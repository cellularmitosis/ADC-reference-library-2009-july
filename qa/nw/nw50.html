<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A NW50: How to use the OT modem script engine</title><meta name="keywords" content="Mac OS 8 Open Transport using Modem Script Engine"><meta name="Description" content="Technical Q&amp;A NW50: Q&amp;A shows how to use the Open Transportmodem script engine."><meta name="categories" content="Networking"><meta name="week-posted" content="Jul 7, 1997 - Jul 11, 1997"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001462" title="How to use the OT modem script engine"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/HardwareDrivers/index.html">Hardware & Drivers</a> &gt; <a href="../../technicalqas/HardwareDrivers/idxNetworking-date.html">Networking</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/HardwareDrivers/idxNetworking-date.html" target="_blank">Hardware & Drivers > Networking</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A NW50</div>
<div id="pageheadsub">How to use the OT modem script engine</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->						<!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600><TR> <td align="left"><hr width=500 align=center><p id = p2>Q:I am in the process of developing software that requires the ability toestablish serial connection via a modem. Rather than have the user entercryptic AT commands or write a CCL parser to configure the modem, I wouldlike to leverage the CCL scripts used in ARA and Open Transport/PPP.</p><p id = p2>Having a single system-level modem access and control method would beextremely useful. Modem vendors have only one CCL engine to support andclient developershave a single API to use rather than special casing each modem. New modemscan be supported through modem scripts rather than new releases of clientsoftware. This greatly reduces support cost for both client developer andmodem vendor. By using a common interface, developers of client softwarecan also reduce conflicts.</p><p id = p2>Is there any documentation or SDKs available?</p><p id=p4>A: At this time, there is no official SDK or support for third party access tothe Open Transport Modem/Script engine. However, it is possible (and quite easy)to use the Open Transport API to access this functionality.</p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>USE THE FOLLOWING INFORMATION AT YOUR OWN RISK!! THIS IS NOTSUPPORTED BY DTS AND COULD (WILL PROBABLY) CHANGE IN THE FUTURE.</P></TD></TR></TABLE></CENTER><BR><p id=p4>The Open Transport Modem/Script engine consist of a number of thingsincluding a "OpenTpt Modem" library, the "Modems" control panel and adirectory called "Modem Scripts".  These files are installed as part of theOpen Transport/PPP and ARA 3.0 distribution.</p><p id=p4>Once the "OpenTpt Modem" module is installed and configured, you can simplyopen an OT endpoint to the Modem/Script engine in the same manner as youwould an OT Serial endpoint with the exception that you pass "Script" inthe config field.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>Err = OTAsyncOpenEndpoint( OTCreateConfiguration("Script"), .....)</pre>    </td></tr></table></CENTER>    <P id =p4>This endpoint will act like a serial endpoint, the <CODE>OT_CONNECT</CODE> will initializethe connection, disconnect etc.  In fact, you should be able to pass inthe phone number from the Connect in the addr field.Since there is no <CODE>OpenTransportModem.h</CODE> file available, you will need someof the following information:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>// The Configuration name for the Opentransport Modem/Script engine        #define kScriptName "Script"// To check if the  Modem/Script engine is installed you should interrogate// the proper Gestalt Selectors for Open Transport-based Modem libraries.#define gestaltOpenTptModem             'otmo'#define gestaltOpenTptModemPresent      0#define gestaltOpenTptModemVersion      'otmv'#define kGestaltOpenTptModemVersion     0x01000080// Note: possible values for the "stage" byte are:// development = 0x20, alpha = 0x40, beta = 0x60, final &amp; release = 0x80// These are the  Modem/Script Configurator error codes.  Other codes may be// returned from Open Transport and operating system routines.#define kModemNoError               0#define kModemOutOfMemory           -14000#define kModemPreferencesMissing    -14001#define kModemScriptMissing         -14002</pre></td></tr></table></CENTER><P id=p4>Since you either have to set the modem type manually through the ModemsControl panel, or hack the Modem Configuration pref file yourself (allwarnings// apply) it might be helpful to know a few things about the Modempreference file.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>// The Modem Configuration pref resource file  constants.    kModemConfigFileCreator     = 'modm',    kModemConfigFileType        = 'mdpf',    kModemConfigVersion         = 0x00010000,    kModemConfigExportType      = 'mdex',    kModemScriptType            = 'mlts',   // Same as ARA 1.0/2.0    kModemScriptCreator         = 'slnk',   // Same as ARA 1.0/2.0// Configuration resource constants.    kModemConfigTypeModem       = 'ccl ',   // Type for Modem config resource    kModemSelectedConfigID      = 1,        // ID of resource containing..    kModemSelectedConfigType    = 'ccfg',   // the ID of current selected CCL    kModemConfigNameType        = 'cnam',   // type of config name rez    kModemConfigTypeLocks       = 'lkmd',   // Types for lock rez    kModemConfigFirstID         = 128       // lowest id for configuration rez// Maximum script file name size.  Same as \// "name" field of FSSpec kMaxScriptNameSize = 64// File name to use only if the internationalized one can't be read// from the resource fork.    #define kDefaultModemPrefsFileName  "\pModem Preferences"// Dial tone modes    enum    {        kDialToneNormal = 0,        kDialToneIgnore = 1,        kDialToneManual = 2    };//  Modem Configuration//  Resource format for Modem configuration info.    typedef struct    {        UInt32      version;        Boolean     useModemScript;        FSSpec      modemScript;        Boolean     modemSpeakerOn;        Boolean     modemPulseDial;        UInt32      modemDialToneMode;        SInt8       lowerLayerName[kMaxProviderNameSize];    } RAConfigModem;</pre></td></tr></table></CENTER></td></tr></table></center><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[Jul 11 1997]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/nw/nw50.html%3Fid%3DDTS10001462-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/nw/nw50.html%3Fid%3DDTS10001462-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/nw/nw50.html%3Fid%3DDTS10001462-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --><hr width=500 align=center> </BODY></HTML>
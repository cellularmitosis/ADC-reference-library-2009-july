<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Quartz Composer Programming Guide: Using QCView to Create a Standalone Composition</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using QCView to Create a Standalone Composition"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001357-CH207" title="Using QCView to Create a Standalone Composition"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../Quartz-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000559" target="_top">Quartz</a> &gt; <a href="../qc_intro/qc_intro.html#//apple_ref/doc/uid/TP40001357-CH201-TPXREF101">Quartz Composer Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../qc_intro/qc_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../qc_play_ib_input/qc_play_ib_input.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001357-CH207-TPXREF101" title="Using QCView to Create a Standalone Composition"></a><h1>Using QCView to Create a Standalone Composition</h1><p>This chapter  shows how to create a standalone Quartz Composer composition using the <code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code> class. You don’t need to write any code to accomplish this task. You simply create a new Cocoa application, modify the nib file in Interface Builder so that the application window has a <code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code> in it, and then specify a composition to load. Launching the compiled Cocoa application causes the composition to play automatically. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001357-CH207-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;This chapter assumes that you are using Xcode and Interface Builder Version 3.0. Interface Builder Version 3.0  is a major update from the previous version of Interface Builder. For detailed information on how to use the new version, see <em><a href="../../../../DeveloperTools/Conceptual/IB_UserGuide/index.html#//apple_ref/doc/uid/TP40005344" target="_top">Interface Builder User Guide</a></em>.</p></div><p>Follow these steps to create a standalone composition:</p><ol class="ol"><li class="li"><p><span class="content_text"><a href="qc_play_ib.html#//apple_ref/doc/uid/TP40001357-CH207-BAJIICAE">“Create a Cocoa Application”</a></span></p></li><li class="li"><p><span class="content_text"><a href="qc_play_ib.html#//apple_ref/doc/uid/TP40001357-CH207-BAJFBCED">“Modify the MainMenu.nib File.”</a></span></p></li><li class="li"><p><span class="content_text"><a href="qc_play_ib.html#//apple_ref/doc/uid/TP40001357-CH207-BAJDJJAE">“Build the Cocoa Application”</a></span></p></li></ol><a name="//apple_ref/doc/uid/TP40001357-CH207-BAJIICAE" title="Create a Cocoa Application"></a><h2>Create a Cocoa Application</h2><p>Creating a Cocoa application is easy. You don’t need to write any code, but you do need to include the Quartz framework in the application.</p><p>Follow these steps:</p><ol class="ol"><li class="li"><p>Launch Xcode.</p></li><li class="li"><p>Choose File > New Project.</p></li><li class="li"><p>In the New Project window, choose Cocoa Application and click Next.</p></li><li class="li"><p>Type a project name and click Finish.</p><p>The Xcode project window opens.</p></li><li class="li"><p>Choose Project > Add to Project.</p></li><li class="li"><p>Navigate to the <code>Quartz.framework</code>, choose it and click Add. </p><p>It’s located in <code>System/Library/Frameworks/Quartz.framework</code>. A Cocoa application does not automatically include the framework that contains the Quartz Composer programming interface, which is why you need to add it.</p></li><li class="li"><p>Click Add in the Add to Targets sheet that appears.</p><p>The <code>Quartz.framework</code> appears in the list of file names on the right side of the project window and in the Groups and Files list on the left side. You may want to drag the <code>Quartz.framework</code> into the Frameworks folder in the Groups and Files list so that your project is well-organized.</p></li><li class="li"><p>In the Resources folder in the Groups &amp; Files list, double-click MainMenu.nib.</p><p>Interface Builder launches. </p></li><li class="li"><p>If the Library is not already open, choose Tools > Library.</p></li><li class="li"><p>Click the disclosure triangle next to Library.</p><p>If you don’t see Quartz Composer listed in the Library, go to <span class="content_text"><a href="qc_play_ib.html#//apple_ref/doc/uid/TP40001357-CH207-SW1">“Add the Quartz Composer Plug-in.”</a></span></p><p>If you see Quartz Composer, go to <span class="content_text"><a href="qc_play_ib.html#//apple_ref/doc/uid/TP40001357-CH207-BAJFBCED">“Modify the MainMenu.nib File.”</a></span></p></li></ol><a name="//apple_ref/doc/uid/TP40001357-CH207-SW1" title="Add the Quartz Composer Plug-in"></a><h2>Add the Quartz Composer Plug-in</h2><p>To add the Quartz Composer plug-in to the Interface Builder library, follow these steps:</p><ol class="ol"><li class="li"><p>Choose Interface Builder > Preferences.</p></li><li class="li"><p>In the Preferences pane, click Plug-ins.</p></li><li class="li"><p>Click the plus (+) button and navigate to Developer > Extras > Palettes.</p></li><li class="li"><p>Choose <code>QuartzComposer.ibplugin</code>.</p></li><li class="li"><p>Close the Preference pane.</p></li></ol><a name="//apple_ref/doc/uid/TP40001357-CH207-BAJFBCED" title="Modify the MainMenu.nib File"></a><h2>Modify the MainMenu.nib File</h2><p>To modify the <code>MainMenu.nib</code> file so that it plays a composition, follow these steps:</p><ol class="ol"><li class="li"><p>In the Library, choose Quartz Composer.</p></li><li class="li"><p>Drag a Quartz Composer View (<code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code> instance) from the library to the main window. Resize and position the view to suit your application.</p></li><li class="li"><p>With the <code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code> selected, open the Attributes inspector.</p></li><li class="li"><p>Click Load and choose a <code>.qtz</code> file to associate with the <code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code>. This is the Quartz Composer composition that plays when the application runs.</p></li><li class="li"><p>To forward user events, such as mouse clicks, from the view to the composition, click Forward All Events in the Rendering Options. If you forward events, the <code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code> accepts First Responder status.</p><p>Events must be forwarded for compositions that can respond to user input. For example, if the position of an object depends on the location of the mouse, you need to forward events.</p></li><li class="li"><p>Choose File > Simulate Interface to verify that the composition loads and plays. </p></li></ol><a name="//apple_ref/doc/uid/TP40001357-CH207-BAJDJJAE" title="Build the Cocoa Application"></a><h2>Build the Cocoa Application</h2><p>Now that you’ve loaded a composition in a <code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code>, the “difficult part” of making a standalone composition is over. Follow these steps to complete the process:</p><ol class="ol"><li class="li"><p>Switch from Interface Builder to Xcode.</p></li><li class="li"><p>In the Xcode project window, click Build &amp; Restart.</p><p>After the project finishes building, a window appears, and you should see your composition playing in it. If you don’t see the composition, but you did see it when you simulated the interface in Interface Builder, then check whether the Quartz framework is added to your Cocoa application. Also check the Xcode run log for any information printed by Quartz Composer.</p></li></ol><p>For more practice making standalone compositions, see <span class="content_text"><a href="qc_play_ib.html#//apple_ref/doc/uid/TP40001357-CH207-BAJBCHBD">“Example: The Dancing Cube Composition.”</a></span></p><a name="//apple_ref/doc/uid/TP40001357-CH207-BAJBCHBD" title="Example: The Dancing Cube Composition"></a><h2>Example: The Dancing Cube Composition</h2><p>The <code>Dancing Cubes.qtz</code> composition (available in the directory <code>/Developer/Examples/Quartz Composer Compositions/Interactive/</code>) tracks the mouse and renders a series of cubes based on the mouse position. </p><p>To modify a nib file so that it plays the Dancing Cubes composition, follow these steps:</p><ol class="ol"><li class="li"><p>Create a Cocoa application and add the Quartz framework to it.</p><p>See <span class="content_text"><a href="qc_play_ib.html#//apple_ref/doc/uid/TP40001357-CH207-BAJIICAE">“Create a Cocoa Application”</a></span> for details.</p></li><li class="li"><p>Double-click the <code>MainMenu.nib</code> file in the Xcode project window.</p><p>This launches Interface Builder with the main application window open.</p></li><li class="li"><p>With the window selected, choose Tools > Size Inspector .</p></li><li class="li"><p>In the Inspector, set the Content Size to  640 and the height to 480.</p></li><li class="li"><p>Drag a Quartz Composer View (<code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code> instance) from the Quartz Composer objects in the Library to the main window. Then resize the view to fill the window.</p></li><li class="li"><p>With the <code><a href="../../../Reference/QuartzFramework/Classes/QCView_Class/Reference/Reference.html#//apple_ref/occ/cl/QCView" target="_top">QCView</a></code> selected, choose Tools > Size Inspector.</p></li><li class="li"><p>Click the inside set of lines in Autosizing so they appear as solid red lines.</p><p>You’ll see that the red box in the Autosizing animation grows as the containing window grows, which is the behavior you want for the view. (The red box represents the view.)</p></li><li class="li"><p>Choose Tools > Attributes.,</p></li><li class="li"><p>Click Load.</p></li><li class="li"><p> Choose <code>Dancing Cubes.qtz</code> from the directory <code>/Developer/Examples/Quartz Composer Compositions/Interactive/</code>, then click Open.</p></li><li class="li"><p>Click Forward All Events to make sure the composition receives all mouse events.</p></li><li class="li"><p>Choose File > Simulate Interface. The window displays cubes that look similar to those in <span class="content_text">Figure 1-1</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001357-CH207-BAJIGDIB" title="Figure 1-1The Dancing Cubes composition"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>The Dancing Cubes composition</p><img src = "../art/dancing_cubes.jpg" alt = "The Dancing Cubes composition" ></div></li><li class="li"><p>Quit the interface simulation and save the nib file.</p></li><li class="li"><p>Switch to Xcode.</p></li><li class="li"><p>Build and Restart the application.</p><p>When the application runs, move the pointer to the window. Then click and hold the mouse button and move the mouse. Cube movements should track the mouse movement when the mouse button is pressed.</p></li></ol><a name="//apple_ref/doc/uid/TP40001357-CH207-DontLinkElementID_4" title="See Also"></a><h2>See Also</h2><ul class="ul"><li class="li"><p>The directory <code>/Developer/Examples/Quartz Composer Compositions/Interface Builder</code> contains additional nib files that use <code>QCView</code>. Take a look at them to see what other results you can achieve using Interface Builder and Quartz Composer.</p></li><li class="li"><p><span class="content_text"><a href="../qc_play_ib_input/qc_play_ib_input.html#//apple_ref/doc/uid/TP40001357-CH208-TPXREF101">“Publishing Ports and Binding Them to Controls”</a></span> describes how to use Cocoa binding to expose input parameters in the user interface of a standalone composition.</p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../qc_intro/qc_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../qc_play_ib_input/qc_play_ib_input.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/QuartzComposer/qc_play_ib/qc_play_ib.html%3Fid%3DTP40001357-4.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/QuartzComposer/qc_play_ib/qc_play_ib.html%3Fid%3DTP40001357-4.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/QuartzComposer/qc_play_ib/qc_play_ib.html%3Fid%3DTP40001357-4.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
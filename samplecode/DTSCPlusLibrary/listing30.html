<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>DTSCPlusLibrary - /Sources/Application.cp</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; <A HREF="javascript:location.replace('index.html');">DTSCPlusLibrary</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">DTSCPlusLibrary</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/Sources/Application.cp</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/Headers/AppleEvent.h</option>
<option value="listing2.html">/Headers/Application.h</option>
<option value="listing3.html">/Headers/ApplicationResources.h</option>
<option value="listing4.html">/Headers/CollectionClasses.h</option>
<option value="listing5.html">/Headers/ColorPicker.h</option>
<option value="listing6.html">/Headers/DTSCPlusLibrary.h</option>
<option value="listing7.html">/Headers/Environment.h</option>
<option value="listing8.html">/Headers/FileClass.h</option>
<option value="listing9.html">/Headers/GDevice.h</option>
<option value="listing10.html">/Headers/GraphicsEnv.h</option>
<option value="listing11.html">/Headers/KeyMap.h</option>
<option value="listing12.html">/Headers/MemoryClass.h</option>
<option value="listing13.html">/Headers/Menu.h</option>
<option value="listing14.html">/Headers/Process.h</option>
<option value="listing15.html">/Headers/Random.h</option>
<option value="listing16.html">/Headers/SoundClass.h</option>
<option value="listing17.html">/Headers/SpinCursor.h</option>
<option value="listing18.html">/Headers/Template.h</option>
<option value="listing19.html">/Headers/Timer.h</option>
<option value="listing20.html">/Headers/Toolbox.h</option>
<option value="listing21.html">/Headers/Tracer.h</option>
<option value="listing22.html">/Headers/UserTermination.h</option>
<option value="listing23.html">/Headers/Volume.h</option>
<option value="listing24.html">/Headers/Window.h</option>
<option value="listing25.html">/Resources/GUIApplication.r</option>
<option value="listing26.html">/Resources/MemoryClass.r</option>
<option value="listing27.html">/Resources/SoundClass.r</option>
<option value="listing28.html">/Resources/SpinCursor.r</option>
<option value="listing29.html">/Sources/AppleEvent.cp</option>
<option value="listing30.html">/Sources/Application.cp</option>
<option value="listing31.html">/Sources/CollectionClasses.cp</option>
<option value="listing32.html">/Sources/CollectionClassesTest.cp</option>
<option value="listing33.html">/Sources/ColorPicker.cp</option>
<option value="listing34.html">/Sources/ColorPickerTest.cp</option>
<option value="listing35.html">/Sources/DTSCPlusLibrary.cp</option>
<option value="listing36.html">/Sources/Environment.cp</option>
<option value="listing37.html">/Sources/EnvironmentTest.cp</option>
<option value="listing38.html">/Sources/FileClass.cp</option>
<option value="listing39.html">/Sources/FileClassTest.cp</option>
<option value="listing40.html">/Sources/GDevice.cp</option>
<option value="listing41.html">/Sources/GDeviceTest.cp</option>
<option value="listing42.html">/Sources/GraphicsEnv.cp</option>
<option value="listing43.html">/Sources/GraphicsEnvTest.cp</option>
<option value="listing44.html">/Sources/KeyMap.cp</option>
<option value="listing45.html">/Sources/KeyMapTest.cp</option>
<option value="listing46.html">/Sources/MemoryClass.cp</option>
<option value="listing47.html">/Sources/MemoryClassTest.cp</option>
<option value="listing48.html">/Sources/Menu.cp</option>
<option value="listing49.html">/Sources/Process.cp</option>
<option value="listing50.html">/Sources/ProcessTest.cp</option>
<option value="listing51.html">/Sources/Random.cp</option>
<option value="listing52.html">/Sources/RandomTest.cp</option>
<option value="listing53.html">/Sources/SoundClass.cp</option>
<option value="listing54.html">/Sources/SoundClassTest.cp</option>
<option value="listing55.html">/Sources/SpinCursor.cp</option>
<option value="listing56.html">/Sources/SpinCursorTest.cp</option>
<option value="listing57.html">/Sources/Template.cp</option>
<option value="listing58.html">/Sources/TemplateTest.cp</option>
<option value="listing59.html">/Sources/Timer.cp</option>
<option value="listing60.html">/Sources/TimerTest.cp</option>
<option value="listing61.html">/Sources/Toolbox.cp</option>
<option value="listing62.html">/Sources/ToolboxTest.cp</option>
<option value="listing63.html">/Sources/Tracer.cp</option>
<option value="listing64.html">/Sources/tracertest.cp</option>
<option value="listing65.html">/Sources/UserTermination.cp</option>
<option value="listing66.html">/Sources/UserTerminationTest.cp</option>
<option value="listing67.html">/Sources/Volume.cp</option>
<option value="listing68.html">/Sources/VolumeTest.cp</option>
<option value="listing69.html">/Sources/Window.cp</option></select>
				</p>
				</form>
				<p><strong><a href="DTSCPlusLibrary.zip">Download Sample</a></strong> (&#147;DTSCPlusLibrary.zip&#148;, 435.0K)<BR>
<strong><a href="DTSCPlusLibrary.dmg">Download Sample</a></strong> (&#147;DTSCPlusLibrary.dmg&#148;, 521.3K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    Application.cp  Contains:  TApplication is an abstract base class, TBKApplication is a background only application class,          TGUIApplication is a window-based user application class. TQTApplication is a QuickTime aware application          class, TGXApplication is a Quick GX aware application class. Finally TQTAndGXApplication           handles both QX and QT application work.          Application.cp contains the needed member functions for the classes defined above.  Written by:     Copyright:  Copyright &copy; 1992-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        8/18/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1        */// INCLUDE FILES#ifndef _APPLICATION_#include &quot;Application.h&quot;#endif// GLOBAL DATA AND FUNCTIONSTApplication* gApplication;            // universal ptr to the frameworkconst short kDefaultNumMasters = 8;        // number of master pointersconst OSType kAEResource = 'aedt';        // our AE binding resourcepascal OSErr AEDispatcher(AppleEvent* in,              AppleEvent* out,              long Command);    // AE Dispatcher// Global Functionspascal OSErr AEDispatcher(AppleEvent* in,              AppleEvent* out,              long Command){  gApplication-&gt;DispatchAppleEvents(in, out, Command);// dispatch event back to the framework  return noErr;}// _________________________________________________________________________________________________________ //// TApplication class member function implementations.//  CONSTRUCTORS &amp; DESTRUCTORS#pragma segment Application TApplication::TApplication()// Default constructor -- put together the basic environment (non-UI model).{  gApplication = this;            // hook ptr to the global pointer  // Default base class constructor, define fields to known initial values.  this-&gt;SetState(TApplication::kInit);    // set out first state  fSleepRegion = ::NewRgn();          // define default sleep region for WaitNextEvent (NULL)  fSleepValue = TApplication::kBackgroundSleepValue;// default sleep value (ticks)  fEventMask = everyEvent;          // default setting  fMoreMasters = kDefaultNumMasters;      // amount of more master calls  this-&gt;InitializeMemory();          // initialize memory  this-&gt;InstallAEHandler();          // install our AE handler}#pragma segment Application TApplication::~TApplication()// Default destructor -- empty for the time being.{}#pragma segment Applicationvoid TApplication::DoNextEvent()// Handle incoming events{  if (!::WaitNextEvent(fEventMask, &amp;fEventRecord, fSleepValue, fSleepRegion))    fEventRecord.what = nullEvent;      // security issue}#pragma segment Applicationvoid TApplication::DoHighLevelEvent()// Handle high level events.{  fError = ::AEProcessAppleEvent(&amp;fEventRecord);// handle primarly AEs  VASSERT(fError == noErr, (&quot;Problems with AEProcessAppleEvent&quot;, fError));}#pragma segment Applicationvoid TApplication::Start()// Start the application and let it run until we change the state to Quit.{  this-&gt;SetState(TApplication::kRun);      // set TApplication to run state  while (fState != TApplication::kQuit)    this-&gt;DoEventLoop();  this-&gt;Quit();                // out from the state, we will quit}#pragma segment Applicationvoid TApplication::Quit()// Quit the application, do any possible cleanup.{}//  CORE AE HANDLER METHODS#pragma segment Applicationvoid TApplication::InstallAEHandler()// Install our core Apple Event Handler that will dispatch the AEs back to the framework.{  Handle aedtResource = NULL;  SignedByte state;  Size tableSize;  AEEventTablePtr tablePtr;  short numEntries = ::Count1Resources(kAEResource);// find out how many entries in the table  fError = ResError();  VASSERT(fError == noErr, (&quot;Problems with Count1Resources = %d&quot;, fError));    if(numEntries != 0)                // we had 'aedt' resources  {    for (short i = 1; i &lt;= numEntries; ++i)    // loop through the resources    {      aedtResource = ::Get1IndResource('aedt', i);// get resource      fError = ResError();      VASSERT(fError == noErr, (&quot;Problems with Get1IndResource = %d&quot;, fError));            state = ::HGetState(aedtResource);    // get the flags from the handle      ::HLockHi(aedtResource);        // and lock the handle high in memory      tableSize = GetHandleSize(aedtResource);// get the size of the resource      fError = MemError();      VASSERT(fError == noErr, (&quot;Problems with GetHandleSize = %d&quot;, fError));            short elements = (short)(tableSize / sizeof(AEEventTable));// get N of elements in resource      tablePtr = (AEEventTablePtr) * aedtResource;// get ptr to the element      // *** Add the information into our fCommandTable as well for future lookups      for (short j = 0; j &lt; elements; j++)  // go through the elements      {        fError  = ::AEInstallEventHandler(tablePtr-&gt;theClass, tablePtr-&gt;theID, NewAEEventHandlerProc(AEDispatcher), tablePtr-&gt;theValue, false);        VASSERT(fError == noErr, (&quot;Problems with AEInstallEventHandler = %d&quot;, fError));        ++tablePtr;      }      ::HSetState(aedtResource, state);    // restore state      ::ReleaseResource(aedtResource);    // release the resource    }  }}#pragma segment Applicationvoid TApplication::DispatchAppleEvents(AppleEvent* in,                     AppleEvent* out,                     long command)// Dispatch to the right Handler based on the command in the AE (refCon).{  switch (command)  {    case cQuitCommand:            // a quit AE      this-&gt;HandleQuit(in, out, command);      break;    case cNewCommand:              // a  new AE      this-&gt;HandleOpen(in, out, command);      break;    case cOpenCommand:            // an open document AE      this-&gt;HandleOpenDocuments(in, out, command);      break;    case cPrintCommand:            // a print AE      this-&gt;HandlePrint(in, out, command);      break;    default:                    // hmm, something else then\xC9      ASSERT(false, &quot;\pProblem: We are dealing with an AE command that we have no handler for&quot;);      break;  }}#pragma segment ApplicationOSErr TApplication::HandleQuit(AppleEvent*    /*in*/,                 AppleEvent*    /*out*/,                 long        /*refCon*/)// Our General Quit Handler. Set state to Quit and return.{  this-&gt;SetState(TApplication::kQuit);    // set state to Quit  return noErr;                // need to have this due to AEHandler prototype}#pragma segment ApplicationOSErr TApplication::HandleOpen(AppleEvent*    /*in*/,                 AppleEvent*    /*out*/,                 long        /*refCon*/){  return errAEEventNotHandled;        // need to have this due to AEHandler prototype}#pragma segment ApplicationOSErr TApplication::HandleOpenDocuments(AppleEvent*/*in*/ ,                    AppleEvent*/*out*/ ,                    long  /*refCon*/){  return errAEEventNotHandled;        // need to have this due to AEHandler prototype}#pragma segment ApplicationOSErr TApplication::HandlePrint(AppleEvent*    /*in*/,                AppleEvent*    /*out*/,                long      /*refCon*/){  return errAEEventNotHandled;        // need to have this due to AEHandler prototype}//  STATE CHANGE METHODS#pragma segment Applicationvoid TApplication::SetState(TApplication::EState theState){  fState = theState;}//  MAIN INTERFACE#pragma segment Applicationvoid TApplication::InitializeMemory()// Initialize issues dealing with memory use.{  ::MaxApplZone();              // increase the zone  for (short i = 0; i &lt; fMoreMasters; i++)  // bounce up the amount of master pointers    ::MoreMasters();  fError = MemError();  VASSERT(fError == noErr, (&quot;Problems with MoreMasters = %d&quot;, fError));}// _________________________________________________________________________________________________________ //// TBKApplication class member function implementations//  CONSTRUCTORS &amp; DESTRUCTORS#pragma segment Application TBKApplication::TBKApplication(){}#pragma segment Application TBKApplication::~TBKApplication(){}// _________________________________________________________________________________________________________ //// TGUIApplication class member function implementations//  CONSTRUCTORS &amp; DESTRUCTORS#pragma segment Application TGUIApplication::TGUIApplication()// Initialize the UI toolbox side.{  this-&gt;InitializeToolbox();          // Initialize toolbox  TMenubar myMenubar;              // handle my menu bar initialization  fCursHandle = ::GetCursor(watchCursor);    // get the watch cursor resource  ::SetCursor(*fCursHandle);          // change the cursor to the watch one}#pragma segment Application TGUIApplication::~TGUIApplication()// Default destructor -- empty for the time being.{}#pragma segment Applicationvoid TGUIApplication::InitializeToolbox()// Initialize the toolbox requirements for a standard window based application.{  ::InitGraf(&amp;qd.thePort);  ::InitFonts();  ::InitWindows();  // _DON'T_ flush disk-inserted or os events or you'll be sorry!   ::FlushEvents(everyEvent - diskMask - osMask, 0);  // The following toolbox init calls are slightly overhead, but that's fine   ::InitMenus();  ::TEInit();  ::InitDialogs(NULL);  ::InitCursor();}//  MAIN INTERFACE#pragma segment Applicationvoid TGUIApplication::Start()// Start the event loop handling.{  ::SetCursor(&amp;qd.arrow);            // OK, scursor back to to the arrow one  TApplication::Start();            // call the inherited Start}//  EVENT HANDLING MEMBER FUNCTIONS#pragma segment Applicationvoid TGUIApplication::DoEventLoop()// This is the big event loop swith statement function.{  this-&gt;DoNextEvent();            // get the next event record  // This is the big switch statement, switch on events received  switch (fEventRecord.what)  {    case nullEvent:              // we got a periodic null event      this-&gt;DoIdle();            // call idle handler      break;    case updateEvt:              // we got an update event      this-&gt;DoWindowUpdate();        // call the window update member function      break;          case diskEvt:              // we got a disk insertion event (most likely formatting)      this-&gt;DoDiskEvent();      break;    case mouseDown:              // we got a mouse down event      // get the window where the mouse down happened, and do an action based on this      switch (::FindWindow(fEventRecord.where, &amp;fCurrentWindow))      {        case inSysWindow:        // It's a DA window, provide time for that.          this-&gt;DoSystemTime();          break;        case inDrag:          // Move the window to a specific target.          this-&gt;DoDragWindow();          break;          case inGoAway:          // Close the window.          this-&gt;DoGoAwayWindow();    // do window close events          // *** Future, Send a Close command          break;        case inContent:          // handle click inside the window          this-&gt;DoInWindowContent();          break;        case inMenuBar:          // handle menu bar clicks          this-&gt;DoMenuCommand();          break;                          default:            // ignore any other sane events for the time being          break;      }    case app4Evt:              // we got a Multifinder event      switch ((unsigned long)fEventRecord.message &gt;&gt; TApplication::kHighByte)      {        case TApplication::kSuspendResumeMessage:// suspend or deactivate message          if ((fEventRecord.message &amp; TApplication::kResumeMask) == 0)            fSleepValue = TApplication::kBackgroundSleepValue;          else            // resume or activate message            fSleepValue = TApplication::kForgroundSleepValue;          break;      }      break;    case kHighLevelEvent:      this-&gt;DoHighLevelEvent();      // handle our high level events (as AEs)      break;    default:      break;  }}#pragma segment Applicationvoid TGUIApplication::DoIdle()// Handle idle time{}#pragma segment Applicationvoid TGUIApplication::DoSystemTime()// Handle DAs{  ::SystemClick(&amp;fEventRecord, fCurrentWindow);}#pragma segment Applicationvoid TGUIApplication::DoDiskEvent()// Handle disk events (formatting, floppies inserted and so on).{  Point dlogPoint;  const short kDILeft = 40;  const short kDITop = 40;  if (HiWrd(fEventRecord.message) != noErr)  // if no error indication  {    ::SetPt(&amp;dlogPoint, kDILeft, kDITop);    // define the dlog box rect    fError = ::DIBadMount(dlogPoint, fEventRecord.message);// turn it over to the system    VASSERT(fError == noErr, (&quot;Problems with DIBadMount = %d &quot;, fError));  }}#pragma segment Applicationvoid TGUIApplication::DispatchAppleEvents(AppleEvent* in, AppleEvent* out, long command)// Take care of the GUI related Apple Events, and dispatch the rest to the TApplication level{  switch(command)  {    case cAboutCommand:    // Send an AE telling the system to display the About box      this-&gt;DoAboutBox();      break;    default:      TApplication::DispatchAppleEvents(in, out, command);      break;  }}#pragma segment Applicationvoid TGUIApplication::DoWindowUpdate()// Handle window update events.{  ::BeginUpdate((WindowPtr)fEventRecord.message);  ::SetPort((WindowPtr)fEventRecord.message);  // set port to the right grafport  this-&gt;Draw();                      // call the window drawing part  ::EndUpdate((WindowPtr)fEventRecord.message);}#pragma segment Applicationvoid TGUIApplication::DoDragWindow()// Handle the inDrag event.{  ::DragWindow(fCurrentWindow, fEventRecord.where, &amp;qd.screenBits.bounds);}#pragma segment Applicationvoid TGUIApplication::DoGoAwayWindow()// Handle dogoAway events.{  ::TrackGoAway(fCurrentWindow, fEventRecord.where);}#pragma segment Applicationvoid TGUIApplication::DoInWindowContent()// Handle inWindow events.{  if (fCurrentWindow != ::FrontWindow())    ::SelectWindow(fCurrentWindow);      // make the window the foremost one  else    this-&gt;DoClick();            // handle the click inside the foremost window}//  MENU EVENTS#pragma segment Applicationvoid TGUIApplication::DoMenuCommand()// Handle menu mouse events.{  long aCommandNumber;  this-&gt;AdjustUserInterface();        // first, make sure the menu entries are enabled/disabled  fMenuResult = ::MenuSelect(fEventRecord.where);// get the selected menu (longword)    aCommandNumber = this-&gt;CalculateMenuCommand(fMenuResult);  // calculate our command number  // We will handle the most typical menu entries here (Apple, Edit, File)  // and call DoCommand() with the rest of the possible commands.  this-&gt;DoInternalMenus(aCommandNumber);    // handle internal menus (Apple)  this-&gt;DoCommand(aCommandNumber);      // handle external commands/menus  ::HiliteMenu(0);              // unhighlight what MenuSelect hilited and return}#pragma segment Applicationlong TGUIApplication::CalculateMenuCommand(long menuEntry)// Calculate the command number based on the algorithm where the menu entry// is either a two-digit or a three-digit number, and where the first number// is the menu number.{  long command;  if (LoWrd(menuEntry) &gt; 9)          // use algorithm 2  {    command = (HiWrd(menuEntry) * 100) + LoWrd(menuEntry);  }  else                        // use algorithm 1    command = (HiWrd(menuEntry) * 10) + LoWrd(menuEntry);    return command;}#pragma segment Applicationvoid TGUIApplication::DoInternalMenus(long command)// Handle our internal menus, Apple, DAs and so on.{  Str255 daName;                // our DA name  short daRefNum;                // our DA refnum   switch (command)  {    case cAboutCommand:            // our About box?      fMessenger.Send(kCoreEventClass, kAEAbout);      break;    default:      if( HiWrd(fMenuResult) == mApple) // we have a DA?      {        ::GetMenuItemText(GetMenuHandle(mApple), (short)LoWrd(fMenuResult), daName);        daRefNum = ::OpenDeskAcc(daName);      }      break;  }}#pragma segment Applicationvoid TGUIApplication::DoCommand(long command)// Handle the default framework menus, post AE commands.{  switch(command)  {    case cQuitCommand:      fMessenger.Send(kCoreEventClass, kAEQuitApplication);      break;        default:      TApplication::DoCommand(command);          // let the underlying framework take a short      break;  }}//  AE HANDLING OVERRIDES#pragma segment ApplicationOSErr TGUIApplication::HandleOpen(AppleEvent*    /*in*/,                 AppleEvent*      /*out*/,                 long          /*refCon*/){  this-&gt;DoCreateDocument();          // Default behavior -- open one window ('document').  return noErr;                // need to have this due to AEHandler prototype}//  DOCUMENT CREATION MEMBER FUNCTIONS#pragma segment Applicationvoid TGUIApplication::DoCreateDocument()// Create initially one window.{  TWindow * aWindow = new TWindow;  ASSERT(aWindow != NULL, &quot;\pWe didn't create a TWindow&quot;);    if(aWindow != NULL)    this-&gt;AddDocument(aWindow);}#pragma segment Applicationvoid TGUIApplication::AddDocument(TWindow* theDocument)// Add the document (Window) to an internal list of documents.{  fDocument = theDocument;}#pragma segment Applicationvoid TGUIApplication::DoCreateDocument(short windowID)// Create initially one window.{  TWindow * aWindow = new TWindow(windowID);  ASSERT(aWindow != NULL, &quot;\pWe didn't create a TWindow&quot;);  if(aWindow != NULL)    this-&gt;AddDocument(aWindow);}#pragma segment Applicationvoid TGUIApplication::Draw()// Define drawing instructions inside this method. Default dispatch// and draw the currently active document (window).{  fDocument-&gt;Draw();}#pragma segment Applicationvoid TGUIApplication::DoClick()// Handle a click inside a window, empty for the moment (need to override this one){}#pragma segment Applicationvoid TGUIApplication::DoAboutBox()// Present our default about box, override for a better one!{  ASSERT(false, &quot;\pThis is the Gamura framework! Override for a better about box&quot;);}#pragma segment Applicationvoid TGUIApplication::DoHelp()// This is the hook for a possible help system (something outside the help balloons){  ASSERT(false, &quot;\pYou triggered the help system, override for a real one!&quot;);}// _________________________________________________________________________________________________________ //// TQTApplication class member function implementations//  CONSTRUCTORS &amp; DESTRUCTORS#pragma segment Application TQTApplication::TQTApplication()// Initialize the QT specific parts.{}#pragma segment Application TQTApplication::~TQTApplication()// Do any possible epilogue cleanup.{}// _________________________________________________________________________________________________________ //// TGXApplication class member function implementations//  CONSTRUCTORS &amp; DESTRUCTORS#pragma segment Application TGXApplication::TGXApplication()// Initialize the GX specific parts{}#pragma segment Application TGXApplication::~TGXApplication()// Do any possible epilogue cleanup.{}// _________________________________________________________________________________________________________ //// TQTAndGXApplication class member function implementations//  CONSTRUCTORS &amp; DESTRUCTORS#pragma segment Application TQTAndGXApplication::TQTAndGXApplication()// Initialize the QT and GX specific parts.{}#pragma segment Application TQTAndGXApplication::~TQTAndGXApplication()// Do any possible epilogue cleanup.{}// _________________________________________________________________________________________________________ ///*  Change History (most recent last):  No    Init.  Date    Comment  1    khs  11/6/92  New file  2    khs  1/14/93  Cleanup*/</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/DTSCPlusLibrary/listing30.html%3Fid%3DDTS10000731-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/DTSCPlusLibrary/listing30.html%3Fid%3DDTS10000731-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/DTSCPlusLibrary/listing30.html%3Fid%3DDTS10000731-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
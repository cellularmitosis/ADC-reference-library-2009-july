<html><head><title>Mac OS X
 Manual Page For netsnmp_table_iterator(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/netsnmp_table_iterator" title="Mac OS X
 Manual Page for netsnmp_table_iterator(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/netsnmp_table_iterator"; name=netsnmp_table_iterator(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
table_iterator(3)                                 net-snmp                                 <!-- a -->table_iterator(3)<!-- /a -->



<b>NAME</b>
       table_iterator - The table iterator helper is designed to simplify the task of writing a table
       handler for the net-snmp agent when the data being accessed is not in an oid sorted form and must be
       accessed externally.



   <b>Data</b> <b>Structures</b>
       struct <b>ti_cache_info_s</b>
       struct <b>netsnmp_iterator_info_s</b>
           <u>Holds</u> <u>iterator</u> <u>information</u> <u>containing</u> <u>functions</u> <u>which</u> <u>should</u> <u>be</u> <u>called</u> <u>by</u> <u>the</u> <u>iterator</u><b>_</b><u>handler</u> <u>to</u>
           <u>loop</u> <u>over</u> <u>your</u> <u>data</u> <u>set</u> <u>and</u> <u>sort</u> <u>it</u> <u>in</u> <u>a</u> <u>SNMP</u> <u>specific</u> <u>manner.</u>
       struct <b>netsnmp_iterator_info_s</b>
           <u>Holds</u> <u>iterator</u> <u>information</u> <u>containing</u> <u>functions</u> <u>which</u> <u>should</u> <u>be</u> <u>called</u> <u>by</u> <u>the</u> <u>iterator</u><b>_</b><u>handler</u> <u>to</u>
           <u>loop</u> <u>over</u> <u>your</u> <u>data</u> <u>set</u> <u>and</u> <u>sort</u> <u>it</u> <u>in</u> <u>a</u> <u>SNMP</u> <u>specific</u> <u>manner.</u>

   <b>Defines</b>
       #define <b>TI_REQUEST_CACHE</b>   'ti_cache'
       #define <b>TABLE_ITERATOR_NOTAGAIN</b>   255
       #define <b>TABLE_ITERATOR_NAME</b>   'table_iterator'

   <b>Typedefs</b>
       typedef <b>ti_cache_info_s</b> <b>ti_cache_info</b>
       typedef <b>netsnmp_variable_list</b> *( <b>Netsnmp_First_Data_Point</b> )(void **loop_context, void **data_context,
           <b>netsnmp_variable_list</b> *, struct <b>netsnmp_iterator_info_s</b> *)
       typedef <b>netsnmp_variable_list</b> *( <b>Netsnmp_Next_Data_Point</b> )(void **loop_context, void **data_context,
           <b>netsnmp_variable_list</b> *, struct <b>netsnmp_iterator_info_s</b> *)
       typedef void *( <b>Netsnmp_Make_Data_Context</b> )(void *loop_context, struct <b>netsnmp_iterator_info_s</b> *)
       typedef void( <b>Netsnmp_Free_Loop_Context</b> )(void *, struct <b>netsnmp_iterator_info_s</b> *)
       typedef void( <b>Netsnmp_Free_Data_Context</b> )(void *, struct <b>netsnmp_iterator_info_s</b> *)
       typedef <b>netsnmp_iterator_info_s</b> <b>netsnmp_iterator_info</b>
           <u>Typedefs</u> <u>the</u> <b>netsnmp_iterator_info_s</b> <u>struct</u> <u>into</u> <u>netsnmp</u><b>_</b><u>iterator</u><b>_</b><u>info.</u>

   <b>Functions</b>
       <b>netsnmp_iterator_info</b> * <b>netsnmp_iterator_create_table</b> (<b>Netsnmp_First_Data_Point</b> *firstDP,
           <b>Netsnmp_Next_Data_Point</b> *nextDP, <b>Netsnmp_First_Data_Point</b> *getidx, <b>netsnmp_variable_list</b>
           *indexes)
       void <b>netsnmp_iterator_delete_table</b> (<b>netsnmp_iterator_info</b> *iinfo)
       <b>netsnmp_mib_handler</b> * <b>netsnmp_get_table_iterator_handler</b> (<b>netsnmp_iterator_info</b> *iinfo)
           <u>returns</u> <u>a</u> <u>netsnmp</u><b>_</b><u>mib</u><b>_</b><u>handler</u> <u>object</u> <u>for</u> <u>the</u> <u>table</u><b>_</b><u>iterator</u> <u>helper</u>
       int <b>netsnmp_register_table_iterator</b> (<b>netsnmp_handler_registration</b> *reginfo, <b>netsnmp_iterator_info</b>
           *iinfo)
           <u>Creates</u> <u>and</u> <u>registers</u> <u>a</u> <u>table</u> <u>iterator</u> <u>helper</u> <u>handler</u> <u>calling</u> <u>netsnmp</u><b>_</b><u>create</u><b>_</b><u>handler</u> <u>with</u> <u>a</u>
           <u>handler</u> <u>name</u> <u>set</u> <u>to</u> <u>TABLE</u><b>_</b><u>ITERATOR</u><b>_</b><u>NAME</u> <u>and</u> <u>access</u> <u>method,</u> <u>netsnmp</u><b>_</b><u>table</u><b>_</b><u>iterator</u><b>_</b><u>helper</u><b>_</b><u>handler.</u>
       NETSNMP_INLINE void * <b>netsnmp_extract_iterator_context</b> (<b>netsnmp_request_info</b> *request)
           <u>extracts</u> <u>the</u> <u>table</u><b>_</b><u>iterator</u> <u>specific</u> <u>data</u> <u>from</u> <u>a</u> <u>request.</u>
       NETSNMP_INLINE void <b>netsnmp_insert_iterator_context</b> (<b>netsnmp_request_info</b> *request, void *data)
           <u>inserts</u> <u>table</u><b>_</b><u>iterator</u> <u>specific</u> <u>data</u> <u>for</u> <u>a</u> <u>newly</u> <u>created</u> <u>row</u> <u>into</u> <u>a</u> <u>request</u>
       int <b>netsnmp_table_iterator_helper_handler</b> (<b>netsnmp_mib_handler</b> *handler, <b>netsnmp_handler_registration</b>
           *reginfo, <b>netsnmp_agent_request_info</b> *reqinfo, <b>netsnmp_request_info</b> *requests)
       void * <b>netsnmp_iterator_row_first</b> (<b>netsnmp_iterator_info</b> *iinfo)
       void * <b>netsnmp_iterator_row_get</b> (<b>netsnmp_iterator_info</b> *iinfo, void *row)
       void * <b>netsnmp_iterator_row_next</b> (<b>netsnmp_iterator_info</b> *iinfo, void *row)
       void * <b>netsnmp_iterator_row_get_byidx</b> (<b>netsnmp_iterator_info</b> *iinfo, <b>netsnmp_variable_list</b> *indexes)
       void * <b>netsnmp_iterator_row_next_byidx</b> (<b>netsnmp_iterator_info</b> *iinfo, <b>netsnmp_variable_list</b> *indexes)
       void * <b>netsnmp_iterator_row_get_byoid</b> (<b>netsnmp_iterator_info</b> *iinfo, oid *instance, size_t len)
       void * <b>netsnmp_iterator_row_next_byoid</b> (<b>netsnmp_iterator_info</b> *iinfo, oid *instance, size_t len)
       int <b>netsnmp_iterator_row_count</b> (<b>netsnmp_iterator_info</b> *iinfo)

   <b>Variables</b>
       <b>Netsnmp_Node_Handler</b> <b>netsnmp_table_iterator_helper_handler</b>

<b>Detailed</b> <b>Description</b>
       The table iterator helper is designed to simplify the task of writing a table handler for the net-<font color="#ffffff" class="whiteout">snmp&nbsp;netsnmp</font>
       snmp agent when the data being accessed is not in an oid sorted form and must be accessed externally.

       Functionally, it is a specialized version of the more generic table helper but easies the burden of
       GETNEXT processing by manually looping through all the data indexes retrieved through function calls
       which should be supplied by the module that wishes help. The module the table_iterator helps should,
       afterwards, never be called for the case of 'MODE_GETNEXT' and only for the GET and SET related modes
       instead.

       The fundamental notion between the table iterator is that it allows your code to iterate over each
       'row' within your data storage mechanism, without requiring that it be sorted in a SNMP-index-<font color="#ffffff" class="whiteout">compliant&nbsp;SNMP-indexcompliant</font>
       compliant manner. Through the get_first_data_point and get_next_data_point hooks, the table_iterator
       helper will repeatedly call your hooks to find the 'proper' row of data that needs processing. The
       following concepts are important:


        A loop context is a pointer which indicates where in the current processing of a set of rows you
         currently are. Allows the get_*_data_point routines to move from one row to the next, once the
         iterator handler has identified the appropriate row for this request, the job of the loop context
         is done. The most simple example would be a pointer to an integer which simply counts rows from 1
         to X. More commonly, it might be a pointer to a linked list node, or someother internal or external
         reference to a data set (file seek value, array pointer, ...). If allocated during iteration,
         either the free_loop_context_at_end (preferably) or the free_loop_context pointers should be set.



        A data context is something that your handler code can use in order to retrieve the rest of the
         data for the needed row. This data can be accessed in your handler via
         netsnmp_extract_iterator_context api with the netsnmp_request_info structure that's passed in. The
         important difference between a loop context and a data context is that multiple data contexts can
         be kept by the table_iterator helper, where as only one loop context will ever be held by the
         table_iterator helper. If allocated during iteration the free_data_context pointer should be set to
         an appropriate function.


       The table iterator operates in a series of steps that call your code hooks from your
       netsnmp_iterator_info registration pointer.


        the get_first_data_point hook is called at the beginning of processing. It should set the variable
         list to a list of indexes for the given table. It should also set the loop_context and maybe a
         data_context which you will get a pointer back to when it needs to call your code to retrieve
         actual data later. The list of indexes should be returned after being update.



        the get_next_data_point hook is then called repeatedly and is passed the loop context and the data
         context for it to update. The indexes, loop context and data context should all be updated if more
         data is available, otherwise they should be left alone and a NULL should be returned. Ideally, it
         should update the loop context without the need to reallocate it. If reallocation is necessary for
         every iterative step, then the free_loop_context function pointer should be set. If not, then the
         free_loop_context_at_end pointer should be set, which is more efficient since a malloc/free will
         only be performed once for every iteration.



<b>Typedef</b> <b>Documentation</b>
   <b>struct</b> <b>netsnmp_iterator_info_s</b> <b>netsnmp_iterator_info</b>
       Typedefs the <b>netsnmp_iterator_info_s</b> struct into netsnmp_iterator_info.


<b>Function</b> <b>Documentation</b>
   <b>void</b> <b>*</b> <b>netsnmp_extract_iterator_context</b> <b>(netsnmp_request_info</b> <b>*</b> <b>request)</b>
       extracts the table_iterator specific data from a request.

       This function extracts the table iterator specific data from a netsnmp_request_info object. Calls
       netsnmp_request_get_list_data with request-&gt;parent_data set with data from a request that was added
       previously by a module and TABLE_ITERATOR_NAME handler name.

       <b>Parameters:</b>
           <u>request</u> the netsnmp request info structure

       <b>Returns:</b>
           a void pointer(request-&gt;parent_data-&gt;data), otherwise NULL is returned if request is NULL or
           request-&gt;parent_data is NULL or request-&gt;parent_data object is not found.the net



       Definition at line 234 of file table_iterator.c.

       References netsnmp_request_get_list_data(), and TABLE_ITERATOR_NAME.

   <b>netsnmp_mib_handler</b> <b>*</b> <b>netsnmp_get_table_iterator_handler</b> <b>(netsnmp_iterator_info</b> <b>*</b> <b>iinfo)</b>
       returns a netsnmp_mib_handler object for the table_iterator helper

       Definition at line 169 of file table_iterator.c.

       References netsnmp_mib_handler_s::myvoid, netsnmp_create_handler(),
       netsnmp_table_iterator_helper_handler, NULL, and TABLE_ITERATOR_NAME.

       Referenced by netsnmp_register_table_iterator().

   <b>void</b> <b>netsnmp_insert_iterator_context</b> <b>(netsnmp_request_info</b> <b>*</b> <b>request,</b> <b>void</b> <b>*</b> <b>data)</b>
       inserts table_iterator specific data for a newly created row into a request

       Definition at line 242 of file table_iterator.c.

       References build_oid_noalloc(), netsnmp_table_request_info_s::indexes, netsnmp_create_data_list(),
       netsnmp_extract_table_info(), netsnmp_request_add_list_data(), netsnmp_request_info_s::next, NULL,
       netsnmp_request_info_s::prev, snmp_oid_compare(), and TABLE_ITERATOR_NAME.

   <b>int</b> <b>netsnmp_register_table_iterator</b> <b>(netsnmp_handler_registration</b> <b>*</b> <b>reginfo,</b> <b>netsnmp_iterator_info</b> <b>*</b>
       <b>iinfo)</b>
       Creates and registers a table iterator helper handler calling netsnmp_create_handler with a handler
       name set to TABLE_ITERATOR_NAME and access method, netsnmp_table_iterator_helper_handler.

       If NOT_SERIALIZED is not defined the function injects the serialize handler into the calling chain
       prior to calling netsnmp_register_table.

       <b>Parameters:</b>
           <u>reginfo</u> is a pointer to a netsnmp_handler_registration struct
           <u>iinfo</u> is a pointer to a netsnmp_iterator_info struct

       <b>Returns:</b>
           MIB_REGISTERED_OK is returned if the registration was a success. Failures are
           MIB_REGISTRATION_FAILED, MIB_DUPLICATE_REGISTRATION. If iinfo is NULL, SNMPERR_GENERR is
           returned.



       Definition at line 205 of file table_iterator.c.

       References HANDLER_CAN_STASH, netsnmp_table_registration_info_s::indexes,
       netsnmp_iterator_info_s::indexes, netsnmp_handler_registration_s::modes,
       netsnmp_get_table_iterator_handler(), netsnmp_inject_handler(), netsnmp_register_table(),
       snmp_clone_varbind(), and netsnmp_iterator_info_s::table_reginfo.



Version 5.4.1                                    27 Jul 2007                               <!-- a -->table_iterator(3)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/netsnmp_table_iterator.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/netsnmp_table_iterator.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/netsnmp_table_iterator.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

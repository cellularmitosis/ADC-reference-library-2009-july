<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>MoofWarsOld - /MoofWars/TSprite.h</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGames-date.html">Games</a> &gt; <A HREF="javascript:location.replace('index.html');">MoofWarsOld</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Games/index.html" target="_blank">Reference Library > Games</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">MoofWarsOld</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/MoofWars/TSprite.h</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/MoofEncoder/AppConditionals.h</option>
<option value="listing2.html">/MoofEncoder/Color Search Procs.cp</option>
<option value="listing3.html">/MoofEncoder/Color Search Procs.h</option>
<option value="listing4.html">/MoofEncoder/GridEncode.cp</option>
<option value="listing5.html">/MoofEncoder/GridEncode.h</option>
<option value="listing6.html">/MoofEncoder/GridTilesFormat.h</option>
<option value="listing7.html">/MoofEncoder/ICL8Encode.cp</option>
<option value="listing8.html">/MoofEncoder/ICL8Encode.h</option>
<option value="listing9.html">/MoofEncoder/main.cp</option>
<option value="listing10.html">/MoofEncoder/main.h</option>
<option value="listing11.html">/MoofEncoder/PICTEncode.cp</option>
<option value="listing12.html">/MoofEncoder/PICTEncode.h</option>
<option value="listing13.html">/MoofEncoder/PICTMask.cp</option>
<option value="listing14.html">/MoofEncoder/PICTMask.h</option>
<option value="listing15.html">/MoofWars/AppConditionals.h</option>
<option value="listing16.html">/MoofWars/GridTilesFormat.h</option>
<option value="listing17.html">/MoofWars/MoofWars.cp</option>
<option value="listing18.html">/MoofWars/MoofWars.h</option>
<option value="listing19.html">/MoofWars/TCommandTimer.cp</option>
<option value="listing20.html">/MoofWars/TCommandTimer.h</option>
<option value="listing21.html">/MoofWars/TEnemySprite.cp</option>
<option value="listing22.html">/MoofWars/TEnemySprite.h</option>
<option value="listing23.html">/MoofWars/TShipSprite.cp</option>
<option value="listing24.html">/MoofWars/TShipSprite.h</option>
<option value="listing25.html">/MoofWars/TShotSprite.cp</option>
<option value="listing26.html">/MoofWars/TShotSprite.h</option>
<option value="listing27.html">/MoofWars/TSprite.cp</option>
<option value="listing28.html">/MoofWars/TSprite.h</option>
<option value="listing29.html">/MoofWars/TSpriteCollection.cp</option>
<option value="listing30.html">/MoofWars/TSpriteCollection.h</option>
<option value="listing31.html">/MoofWars/TTileCollection.cp</option>
<option value="listing32.html">/MoofWars/TTileCollection.h</option>
<option value="listing33.html">/MoofWars/TTileGrid.cp</option>
<option value="listing34.html">/MoofWars/TTileGrid.h</option>
<option value="listing35.html">/Tim's Libraries/Common Stuff.h</option>
<option value="listing36.html">/Tim's Libraries/Error Macros.h</option>
<option value="listing37.html">/Tim's Libraries/Scaling.cp</option>
<option value="listing38.html">/Tim's Libraries/Scaling.h</option>
<option value="listing39.html">/Tim's Libraries/TGraphic.cp</option>
<option value="listing40.html">/Tim's Libraries/TGraphic.h</option>
<option value="listing41.html">/Tim's Libraries/TGraphicCollection.cp</option>
<option value="listing42.html">/Tim's Libraries/TGraphicCollection.h</option></select>
				</p>
				</form>
				<p><strong><a href="MoofWarsOld.zip">Download Sample</a></strong> (&#147;MoofWarsOld.zip&#148;, 222.9K)<BR>
<strong><a href="MoofWarsOld.dmg">Download Sample</a></strong> (&#147;MoofWarsOld.dmg&#148;, 287.5K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    TSprite.h  Contains:  This implements a first cut at a standardized sprite class.  This is an abstract base        class and all sprites must be subclassed off a TSprite.  Written by: Timothy Carroll    Copyright:  Copyright &copy; 1996-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        7/2/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1                8/15/96    Timothy Carroll  Initial Release        */#ifndef _TSPRITE_#define _TSPRITE_#pragma once#include &quot;TGraphicCollection.h&quot;#include &quot;Scaling.h&quot;#if PRAGMA_STRUCT_ALIGN#pragma options align=power#endifenum eVisibleFlag{  kInvisible = 0,  // An invisible sprite can't be hit tested or drawn.  kVisible = 1};// When creating a new TSprite, you fill in a TSpriteData structure and pass it along// to the TSprite constructor.  Two constructors are provided, one that takes a// TSpriteData pointer and one that takes a TSpriteData handle.// The handle allows a nice method we can use to create a sprite from resource data.// Note that the TSprite constructor and any follow up constructors should not modify// the data passed back into it.  We'll define them as const parameters in th// constructor to enforce this.// All the handle based constructor will do is dereference the handle and pass it in.// We'll lock and unlock the handle over the call.struct TSpriteData { // A 4 character type used to describe the sprite.  Each sprite class will register // a OSType that can be used to create a sprite of that type.  Each subclass should // also define a Data type that is used to define its parameters (each adding to the // previous subclasses's data, obviously.  // If you know what type of sprite you are creating, you can call the constructor // directly.  Eventually, I'll try to provide a global creator that can be called with // a data structure that will call the appropriate creator based on the spriteType field.    OSType        spriteType;   SInt32        initialX; // sprite's location in world coordinates  SInt32        initialY;  SInt32        initialXVelocity; // sprite's velocity in world coordinates  SInt32        initialYVelocity;  SInt16        visibility;     // initial visibility  SInt16        face;        // initial face    // Graphics to use for the sprite.  //If the sprites are already loaded, then we can pass in a copy of the TGraphicCollection  //directly.  If the sprites weren't loaded, preloadedCollection should be set to NULL.  //If it is NULL, then the resource ID of the collection must be passed in via collectionID.  //We do this to provide a fast way to make sprites without all the load time.  SInt16        collectionID;       TGraphicCollection  *preloadedCollection;};// Scaling and clipping -- old stuff to be replaced./* // This data structure is used to pass in all of the scaling information needed by each// TSprite.  Unlike the last class, this one we'll actually just define as a pointer -- no// resource based info. This might be a mistake, we can change it easily enough.// Note that the point passed in via worldPt is mapped to the exact center of whatever Rect// is passed in.  This Rect is also the one used to set the clipping for the TGraphic class.struct TScalingData {  WorldPoint32  worldPt;  SInt32      scale;  Rect      screenRect;};extern WorldRect32 gScreenBounds;*/class TSpriteCollection;class TSprite;class TSprite{  // TSpriteCollection is declared as a friend class because it needs direct access to   // the &quot;fNextSprite&quot; and fPrevSprite members.  In the current implementation, we also use  // it in the hit testing code, although this will hopefully be changed in the future because  // I don't particularly like it.   friend TSpriteCollection;      public:    enum {    kSpriteType = 'SPRT'  };      protected:  // This stores all the data for the sprite's current location and visibility.  SInt32        fCoordX;    // 16.16 fixed  SInt32        fCoordY;    // 16.16 fixed  SInt32        fVelocityX;  // 16.16 fixed  SInt32        fVelocityY;  // 16.16 fixed  UInt16        fFace;  UInt16        fVisibility;    Rect        fBounds; // Cache this here rather than in the graphic collection.  SInt32        fXOffset;  SInt32        fYOffset; // used when drawing to move to the upper left corner.    // These store the graphic collections we need to draw our sprites.  TGraphicCollection  *fSpriteImages;    // These are used to maintain sprite groups.  fNextSprite and fPrevSprite  // are used by the owning TSpriteCollection and should not be touched by the Sprite classes at all.    TSpriteCollection  *fGroup;      // if we are a member of a group, this will be non-null.  TSprite      *fNextSprite;   // used by TSpriteCollection if we are a group member.  TSprite      *fPrevSprite;   // used by TSpriteCollection if we are a group member.      public:  /*************************************************************************************  Constructors and Destructors  *************************************************************************************/    TSprite (TSpriteData *data);  ~TSprite (void);  /*************************************************************************************  Standard Accessor Functions  *************************************************************************************/    OSType      GetSpriteType (void) {return kSpriteType;}    void      GetCurrentWorldLocation (SInt32 *worldX, SInt32 *worldY);  void      SetCurrentWorldLocation (SInt32 worldX, SInt32 worldY);  /*  BooleanTSprite::GetCurrentScreenLocation (Rect *currentRect){#pragma unused (currentRect)  DebugStr (&quot;\pNot implemented&quot;);  return false;}*/      SInt16      GetFace() {return fFace;}  void      SetFace (SInt16 newFace) {fFace = newFace;}    SInt16      GetVisibility () {return fVisibility;}  void      SetVisibility (SInt16 newVisibility) {fVisibility = newVisibility;}  SInt32      GetXVelocity();  SInt32      GetYVelocity();  void      SetXVelocity (SInt32 xVelocity);  void      SetYVelocity (SInt32 yVelocity);  /*************************************************************************************  Standard Actions that sprites need to do.*************************************************************************************/  // Drawing takes the sprite's location relative to the scaling values and draws it  // to the current buffer.  Usually called by the TSpriteCollection automatically.    void DrawSprite (void);    // Each sprite will have its process routine called once per frame -- remember that if  // things are slowing down, not every frame will be drawn, but all frames will be  // processed.  Usually called by the TSpriteCollection automatically.    // Default process sprite just moves the sprite according to its velocity.  virtual void ProcessSprite (void) {  fCoordX += fVelocityX; fCoordY += fVelocityY;}    // Whenever two sprites are actually collided, each sprite's collision routine is called  // with the other as a parameter.  Usually called by the TSpriteCollection automatically.  virtual void Collision (TSprite *theSprite);/*************************************************************************************  Utility functions    These aren't automatically called, but are simple utility functions that exist because  all sprites might need to do them.  *************************************************************************************/  void Bounce (WorldRect32 *bounceBounds);/*************************************************************************************  These routines add and remove a sprite from a group.  Call these routines, don't call  the routines from the TSpriteCollection class -- they only exist for these functions to  call.  If you call the TSpriteCollection routines, then parameters in the TSprite class don't  always get set properly.  *************************************************************************************/      void AddToGroup (TSpriteCollection *theGroup);  void RemoveFromGroup (void);/*************************************************************************************  These routines are used to set all the clipping information  These routines set the scaling information and coordinate system.  It also sets the  appropriate clipping rectangle in the TGraphic class.  It doesn't change the GWorld  pointed to by the TGraphic and the caller must make sure this rectangle is within the  GWorld's actual rectangle or bad things will happen.  *************************************************************************************/  };  #if PRAGMA_STRUCT_ALIGN#pragma options align=reset#endif#endif /* _TSPRITE_ */</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/MoofWarsOld/listing28.html%3Fid%3DDTS10000057-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/MoofWarsOld/listing28.html%3Fid%3DDTS10000057-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/MoofWarsOld/listing28.html%3Fid%3DDTS10000057-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
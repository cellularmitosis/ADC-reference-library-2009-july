<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SetResFileAttrs (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING96></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-95.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-97.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A> / <A HREF="MoreToolbox-24.html"><B>Resource Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-30.html"><B>Resource Manager Routines</B></A> / <A HREF="MoreToolbox-94.html"><B>Getting and Setting Resource Fork Attributes</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING96-0></A>
<H3>SetResFileAttrs</H3>
 <A NAME=MARKER-11-456></A><A NAME=MARKER-2-457></A>You can use the <CODE>SetResFileAttrs</CODE> procedure to change a resource fork's attributes.<P>
<PRE>
PROCEDURE SetResFileAttrs  (refNum: Integer; attrs: Integer);
</PRE>
<DL>
<DT><CODE>refNum</CODE>
<DD> A file reference number for the resource fork whose attributes you want to set.
<DT><CODE>attrs</CODE>
<DD> The attributes to set.
</DL>
<A NAME=HEADING96-5></A>
<H5>DESCRIPTION</H5>
 Given a file reference number, the <CODE>SetResFileAttrs</CODE> procedure sets the attributes of the file's resource fork to those specified in the <CODE>attrs</CODE> parameter. If the <CODE>refNum</CODE> parameter is 0, it represents the System file's resource fork. However, you shouldn't change the attributes of the System file's resource fork. If there's no resource fork with the given reference number, <CODE>SetResFileAttrs</CODE> does nothing, and the <CODE>ResError</CODE> function returns the result code <CODE>noErr</CODE>.<P>
 Like individual resources, resource forks have attributes that are specified by bits in the low-order byte of a word. The Resource Manager provides the following masks for setting these bits:<P>
<PRE>
CONST
   mapReadOnly    =  128;  {set to make file read-only}
   mapCompact     =  64;   {set to compact file on update}
   mapChanged     =  32;   {set to write map on update}
</PRE>
 When the <CODE>mapReadOnly</CODE> attribute is set to 1, the Resource Manager doesn't write anything to the resource fork on disk. It also doesn't check whether the resource data can be written to disk when the resource map is modified. When this attribute is set to 1, the <CODE>UpdateResFile</CODE> and <CODE>WriteResource</CODE> procedures do nothing, but the <CODE>ResError</CODE> function returns the result code <CODE>noErr</CODE>.<P>
<DL>
<DT><B>WARNING</B>
<DD>If you set the <CODE>mapReadOnly</CODE> attribute but later clear it, the resource data is written to disk even if there's no room for it. This operation may destroy the resource fork.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 When the <CODE>mapCompact</CODE> attribute is set to 1, the Resource Manager compacts the resource fork when it updates the file. The Resource Manager sets this attribute when a resource is removed or when a resource is made larger and thus must be written at the end of a resource fork. You may want to set the <CODE>mapCompact</CODE> attribute to force the Resource Manager to compact a resource fork when your changes make resources smaller.<P>
 When the <CODE>mapChanged</CODE> attribute is set to 1, the Resource Manager writes the resource map to disk when the file is updated. For example, you can set <CODE>mapChanged</CODE> if you've changed resource attributes only and don't want to call <CODE>ChangedResource</CODE> because you don't want to write the resource data to disk. <P>
 When the Resource Manager first creates a resource fork after a call to <CODE>FSpOpenResFile</CODE> or a related routine, it does not set any of the resource forks's attributes--that is, they are all set to 0.<P>
<A NAME=HEADING96-14></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The Resource Manager sets the <CODE>mapChanged</CODE> attribute for the resource fork when you call the <CODE>ChangedResource</CODE>, the <CODE>AddResource</CODE>, or the <CODE>RemoveResource</CODE> procedure.<P>
<A NAME=HEADING96-16></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>resFNotFound<TD>-193<TD>Resource file not found</TABLE>
</H5>
<A NAME=HEADING96-17></A>
<H5>SEE ALSO</H5>
 To check for errors, call the <CODE>ResError</CODE> function as described on <A HREF=MoreToolbox-35.html#MARKER-9-220>page 1-47</A>.<P>
 For descriptions of the <CODE>ChangedResource</CODE> and <CODE>AddResource</CODE> procedures, see <A HREF=MoreToolbox-63.html#MARKER-9-338>page 1-83</A> and <A HREF=MoreToolbox-64.html#MARKER-9-342>page 1-85</A>, respectively. For descriptions of the <CODE>UpdateResFile</CODE> and <CODE>WriteResource</CODE> procedures, see <A HREF=MoreToolbox-66.html#MARKER-9-349>page 1-87</A> and <A HREF=MoreToolbox-67.html#MARKER-9-353>page 1-88</A>, respectively. For a description of the <CODE>RemoveResource</CODE> procedure, see <A HREF=MoreToolbox-87.html#MARKER-9-426>page 1-103</A>. <A NAME=MARKER-2-458></A> <A NAME=MARKER-2-459></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-95.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-97.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

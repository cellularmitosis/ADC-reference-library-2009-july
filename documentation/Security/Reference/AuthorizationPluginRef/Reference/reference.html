<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Authorization Plug-in Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Authorization Plug-in Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001432-DontLinkChapterID_1" title="Authorization Plug-in Reference"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Security/index.html#//apple_ref/doc/uid/TP30001281-TP30000434" target="_top">Security</a> &gt; <a href="../../../../../reference/Security/idxAuthorization-date.html#//apple_ref/doc/uid/TP30001281-TP30000434-TP30001024" target="_top">Authorization</a> &gt; <a href="../index.html" target="_top">Authorization Plug-in Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../AuthorizationPluginRef_revHist/revision_history.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001432-DontLinkChapterID_1-DontLinkElementID_13" title="Authorization Plug-in Reference"></a><h1>Authorization Plug-in Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px"> <a href="../../SecurityFrameworkReference/index.html#//apple_ref/doc/uid/TP40004330" target="_top">Security</a>/Security.h</div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">AuthorizationPlugin.h</span><br/></div></td></tr></table></div><br/><a name="//apple_ref/doc/uid/TP40001432-CH204-DontLinkElementID_11" title="Overview"></a><h2>Overview</h2><p>The Authorization Plug-in API enables you to create plug-ins that can participate in authorization decisions.</p>
<p>Authorization Plug-ins are available starting in Mac OS X v10.4.</p>
<p>You should read this document if you need to extend Mac OS X authorization services to perform authorizations in a new way or to implement a new policy that is too complex to be implemented entirely with the authorization policy database.</p>

<a name="//apple_ref/doc/uid/TP40001432-CH204-95216" title="Organization of This Document"></a><h3>Organization of This Document</h3>
<p>This document consists of an introduction and a reference to the authorization plug-in API. It contains the following sections:</p>
<ul class="spaceabove"><li class="li"><p><span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH204-87010">“About Authorization Plug-ins”</a></span> gives a brief introduction to the purpose and use of authorization plug-ins and gives basic instructions for installing one.</p></li>
<li class="li"><p><span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH202-427065">“Authorization Plug-in Functions”</a></span> describes the functions that your plug-in can call to communicate with the authorization engine. You use these functions to set and get data and to report the status of your plug-in.</p></li>
<li class="li"><p><span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH1g-433778">“Functions Implemented By the Plug-in”</a></span> describes the functions that must be implemented by your plug-in. These functions are called by the authorization engine in order to install the plug-in, implement and execute the plug-in’s authorization mechanisms, and deactivate or remove the plug-in.</p></li>
<li class="li"><p><span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH2g-434840">“Authorization Plug-in Data Types”</a></span> describes the structures and other data types defined in <code>AuthorizationPlugin.h</code>.</p></li>
<li class="li"><p><span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH3g-435513">“Authorization Plug-in Constants”</a></span> describes the constants defined in <code>AuthorizationPlugin.h</code>.</p></li>
<li class="li"><p><span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH4g-95690">“Authorization Plug-in Result Codes”</a></span> lists the result codes used by authorization plug-ins.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001432-CH204-95347" title="See Also"></a><h3>See Also</h3>
<p>For more information about Mac OS X authorization services, see the following documents:</p>
<ul class="spaceabove"><li class="li"><p><span class="content_text"><a href="../../../Conceptual/authorization_concepts/index.html#//apple_ref/doc/uid/TP30000995" target="_top">Authorization Services Programming Guide</a></span>, which describes authorization services and several components of authorization services, such as the authorization policy data base and the Security Server. This document also provides some sample code.</p></li>
<li class="li"><p><span class="content_text"><a href="../../authorization_ref/index.html#//apple_ref/doc/uid/TP30000826" target="_top">Authorization Services Reference</a></span>, which describes the Authorization Services API.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001432-CH204-87010" title="About Authorization Plug-ins"></a><a name="//apple_ref/doc/uid/TP40001432-CH204-CACDCBAI" title="About Authorization Plug-ins"></a><h3>About Authorization Plug-ins</h3>
<p>To install an authorization plug-in, you write the plug-in using the API described in this document, install the bundle in <code>/System/Library/CoreServices/SecurityAgentPlugins</code>, and use the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationRightSet" target="_top">AuthorizationRightSet</a></code> function to add an entry to the authorization policy database that references the plug-in. The authorization policy database contains a set of rules that the Security Server uses to authorize rights for a user. Most of the rules directly specify the criteria to allow or deny access; however, some reference external code (referred to as <em>authorization mechanisms</em>) that define the behavior. The authorization database is described in <span class="content_text"><a href="../../../Conceptual/authorization_concepts/02authconcepts/authconcepts.html#//apple_ref/doc/uid/TP30000995-CH205-TPXREF19" target="_top">The Policy Database</a></span> section of <em>Authorization Services Programming Guide</em>. To invoke a plug-in, you pass the name of the database entry that references that plug-in in the <code>rights</code> parameter of the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyRights" target="_top">AuthorizationCopyRights</a></code> function.</p>
<p>A typical use for authorization plug-ins is to implement policies that are not included in the standard authorization configuration. For example, you could write a plug-in that authorizes a user to send a fax by requiring a personal identification number (PIN) for a specific fax machine.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40001432-CH204-DontLinkElementID_14" title="Important:"></a><p><strong>Important:</strong>&nbsp;If your plug-in displays a window before the user has logged in, you must set the <code>KHIWindowBitCanBeVisibleWithoutLogin</code> flag on the window. See <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> for more information on setting this flag.</p><p></p></div>
<p>A plug-in’s main entry point must be the function <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code>, which exchanges the plug-in’s interface (<code><a href="reference.html#//apple_ref/c/tdef/version">AuthorizationPluginInterface</a></code>) and the authorization interface of the Security Server (<code><a href="reference.html#//apple_ref/c/tdef/AuthorizationCallbacks">AuthorizationCallbacks</a></code>). </p>
<p>When you add a policy to the authorization policy database, it can refer to any number of plug-ins. Each plug-in includes one or more authorization mechanisms, where a mechanism is a code module that performs one step in the authorization process. </p>
<p>For example, if you wrote a policy for sending faxes that required users to select the fax machine they wanted to use and enter a PIN for that machine, you might name the policy <code>com.ifoo.ifax.send</code>. To implement the policy, you could write a plug-in called <code>SendFaxPlugin</code> that contains two mechanisms: <code>SelectFaxMachine</code> and <code>GetUserPIN</code>. You would add your plug-in code to the folder <code>/System/Library/CoreServices/SecurityAgentPlugins</code> as a bundle called <code>SendFaxPlugin.bundle</code> and you would use the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationRightSet" target="_top">AuthorizationRightSet</a></code> function to add the lines shown in <span class="content_text">Listing 1</span> to the authorization policy database: </p>
<a name="//apple_ref/doc/uid/TP40001432-CH204-87217" title="Listing 1Plug-in entry in policy database"></a><a name="//apple_ref/doc/uid/TP40001432-CH204-BAJJBEBD" title="Listing 1Plug-in entry in policy database"></a><p class="codesample"><strong>Listing 1&nbsp;&nbsp;</strong>Plug-in entry in policy database</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;key>com.ifoo.ifax.send&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>class&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>evaluate-mechanisms&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>comment&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;string>Rule to evaluate whether user has right  to<span></span></pre></td></tr><tr><td scope="row"><pre>                    use a specific fax machine.<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;key>mechanisms&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;array><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>SendFaxPlugin:SelectFaxMachine&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;string>SendFaxPlugin:GetUserPIN&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/array><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/dict><span></span></pre></td></tr></table></div>
<p>Notice that each plug-in is identified by the name of the plug-in, a colon, and the name of the mechanism; for example <code>SendFaxPlugin:SelectFaxMachine</code> where <code>SelectFaxMachine</code> is a mechanism in the plug-in <code>SendFaxPlugin</code>.The keys used in the dictionary entry are listed in the files <code>AuthorizationTags.h</code> and <code>AuthorizationTagsPriv.h</code>. (Note that <code>AuthorizationTagsPriv.h</code> is not part of the public API. Apple reserves the right to change this file or its contents with future releases.) </p>
<p>The Security Server loads plug-ins into a separate process—a plug-in host—to isolate the process of authorization from the client. There are two plug-in hosts:</p>
<ul class="spaceabove"><li class="li"><p>One runs as an anonymous user and can be used to communicate with the user, for example to ask for a password. </p></li>
<li class="li"><p>One runs with root privileges to perform privileged operations.</p></li></ul>
<p>In this document, the portion of the Security Server that deals with authorization and authentication, together with the plug-in hosts, is referred to as the <em>authorization engine</em>.</p>
<p>To have a specific mechanism run with root privileges, add a comma and the word <code>privileged</code> to the mechanism name; for example:</p>
<p><code>&lt;string>SendFaxPlugin:ChangeUserPIN,privileged&lt;/string></code></p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40001432-CH204-DontLinkElementID_15" title="Important:"></a><p><strong>Important:</strong>&nbsp;Authorization plug-ins that put up a GUI or otherwise connect to the window server cannot run as privileged. Note that running GUI code as root is a bad idea in general, because GUI code links in many libraries, any of which could contain security vulnerabilities.</p><p></p></div>
<p>When the authorization engine needs an authorization decision based on a policy that belongs to the plug-in, the authorization engine calls each mechanism belonging to that policy in turn, in the order they are listed in the policy database. For each mechanism, the authorization engine calls the plug-in’s <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> function, passing the <em>plug-in name</em>:<em>mechanism name</em> for that mechanism. </p>
<p>The mechanism calls the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function to report the authorization decision. The authorization engine does not consider the authorization complete and approved until all the mechanisms have returned a positive (<code>kAuthorizationResultAllow</code>) authorization decision, one of the mechanisms has returned a negative (<code>kAuthorizationResultDeny</code>) decision, the maximum number of retries has been reached (<code>kAuthorizationResultUndefined</code>), or the user has canceled the attempt (<code>kAuthorizationResultUserCanceled</code>).</p>
<p>Mechanisms in the authorization can communicate auxiliary information by setting and getting hints and context data. Hints are data values for use during authorization; for example, you can use a hint to pass an intermediate value from one mechanism to a subsequent mechanism. They are not preserved as part of the authorization result. Context data is information that can be useful to an application, such as a user name entered by the user during the authorization process. Context data can be added, read, or modified by each mechanism in the authorization and is preserved by the Security Server. Context data can also be made available to the authorization client after authorization is complete. See <code><a href="reference.html#//apple_ref/c/func/SetHintValue">SetHintValue</a></code> and <code><a href="reference.html#//apple_ref/c/func/SetContextValue">SetContextValue</a></code> for more information on hints and context data.</p>
<p>When the authorization plug-in sets context data, it tags the data with a flag that specifies whether the information should be returned to the authorization client upon request (by using the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyInfo" target="_top">AuthorizationCopyInfo</a></code> function) or whether it’s restricted to the mechanisms involved in the authorization.</p>
<a name="//apple_ref/doc/uid/TP40001432-CH202-427065" title="Functions"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJBIIFJ" title="Functions"></a><h2>Functions</h2>

<p>Your authorization plug-in communicates with the authorization engine through the engine’s callback functions. These functions are declared in the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationCallbacks">AuthorizationCallbacks</a></code> structure passed to your plug-in through the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>








<a name="//apple_ref/c/func/DidDeactivate" title="DidDeactivate"></a><a name="//apple_ref/doc/c_ref/DidDeactivate" title="DidDeactivate"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJJAEGI" title="DidDeactivate"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_19"></a><h3 class="tight">DidDeactivate</h3>
<p class="spaceabove">Report the successful deactivation of an authorization mechanism.</p>
<p class="spaceabove"><pre>
OSStatus (*DidDeactivate)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>You must call this function after deactivating your authorization mechanism in response to a call to your <code><a href="reference.html#//apple_ref/c/tdef/MechanismDeactivate">MechanismDeactivate</a></code> function. The authorization engine waits for confirmation that all mechanisms have deactivated before continuing.</p>
<p>The authorization engine sends you the entry point to the <code>DidDeactivate</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/GetArguments" title="GetArguments"></a><a name="//apple_ref/doc/c_ref/GetArguments" title="GetArguments"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJCHIEC" title="GetArguments"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_20"></a><h3 class="tight">GetArguments</h3>
<p class="spaceabove">Read the arguments for this authorization mechanism from the authorization policy database. Authorization policy database arguments have not yet been implemented.</p>
<p class="spaceabove"><pre>
OSStatus (*GetArguments)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValueVector">AuthorizationValueVector</a> **outArguments);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd>
<dt><em>outValue</em></dt>
<dd><p>On input, allocate a pointer to an <code>AuthorizationValueVector</code> structure. On output, the structure contains the number of arguments and a pointer to the data. Because your <code>AuthorizationValueVector</code> structure does not own the data, you must not deallocate the structure or the data pointed to by the structure. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>The authorization policy database might contain arguments for each authentication mechanism. You can use this function to retrieve these arguments. </p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_16" title="Important:"></a><p><strong>Important:</strong>&nbsp;

As of Mac OS X v 10.4, this feature has not been implemented.</p><p></p></div>
<p>The authorization engine sends you the entry point to the <code>GetArguments</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">This function is available in Mac OS X v10.4 and later; however, the database does not yet support arguments.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/GetContextValue" title="GetContextValue"></a><a name="//apple_ref/doc/c_ref/GetContextValue" title="GetContextValue"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJBIBBD" title="GetContextValue"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_21"></a><h3 class="tight">GetContextValue</h3>
<p class="spaceabove">Read a value collected during authorization.</p>
<p class="spaceabove"><pre>
OSStatus (*GetContextValue)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationContextFlags">AuthorizationContextFlags</a> *outContextFlags,
   const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> **outValue);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd>
<dt><em>inKey</em></dt>
<dd><p>A key indicating which value you want to retrieve. This key must correspond to one you specified when you used the <code><a href="reference.html#//apple_ref/c/func/SetContextValue">SetContextValue</a></code> function to store a context value.</p></dd>
<dt><em>outContextFlags</em></dt>
<dd><p>On output points to a flag that indicates whether this value is available to the authorization client.</p></dd>
<dt><em>outValue</em></dt>
<dd><p>On input, allocate a pointer to an <code>AuthorizationValue</code> structure. On output, the structure contains the size of the data and a pointer to the data. Because your <code>AuthorizationValue</code> structure does not own the data, you must not deallocate the structure or the data pointed to by the structure. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>Your plug-in authorization mechanism might collect data such as the user name and other authentication information during evaluation of authorization. You can use the <code><a href="reference.html#//apple_ref/c/func/SetContextValue">SetContextValue</a></code> function to have the Security Server store this data and the <code>GetContextValue</code> function to retrieve it. </p>
<p>The authorization engine sends you the entry point to the <code>GetContextValue</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<p>Do not call this function after you have called the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function. If you do so, the data retrieved by the <code>GetContextValue</code> function might not reflect the current value even though the function returns the <code>errAuthorizationSuccess</code> result code.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/GetHintValue" title="GetHintValue"></a><a name="//apple_ref/doc/c_ref/GetHintValue" title="GetHintValue"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJEHCCJ" title="GetHintValue"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_22"></a><h3 class="tight">GetHintValue</h3>
<p class="spaceabove">Read a value stored by the plug-in authorization mechanism.</p>
<p class="spaceabove"><pre>
OSStatus (*GetHintValue)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
   const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> **outValue);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd>
<dt><em>inKey</em></dt>
<dd><p>A key indicating which value you want to retrieve. This key must correspond to one you specified when you used the <code><a href="reference.html#//apple_ref/c/func/GetHintValue">GetHintValue</a></code> function to store a hint value.</p></dd>
<dt><em>outValue</em></dt>
<dd><p>On input, allocate a pointer to an <code>AuthorizationValue</code> structure. On output, the structure contains the size of the data and a pointer to the data. Because your <code>AuthorizationValue</code> structure does not own the data, you must not deallocate the structure or the data pointed to by the structure.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>Your plug-in authorization mechanism can save and retrieve auxiliary information—called hints—for use by subsequent mechanisms that are part of the same authorization. You use the <code><a href="reference.html#//apple_ref/c/func/SetHintValue">SetHintValue</a></code> function to have the Security Server store this data and the <code>GetHintValue</code> function to retrieve it. Hints are not preserved as part of the authorization result; once all mechanisms have approved the authorization or any mechanism has denied it, the security engine disposes of the hints. </p>
<p>The authorization engine sends you the entry point to the <code>GetHintValue</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<p>Do not call this function after you have called the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function. If you do so, the data retrieved by the <code>GetHintValue</code> function might not reflect the current value even though the function returns the <code>errAuthorizationSuccess</code> result code.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/GetSessionID" title="GetSessionID"></a><a name="//apple_ref/doc/c_ref/GetSessionID" title="GetSessionID"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJDCFAE" title="GetSessionID"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_23"></a><h3 class="tight">GetSessionID</h3>
<p class="spaceabove">Read the session ID.</p>
<p class="spaceabove"><pre>
OSStatus (*GetSessionID)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationSessionId">AuthorizationSessionId</a> *outSessionId);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd>
<dt><em>outSessionId</em></dt>
<dd><p>On output, points to the session ID.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>The session ID is a unique value provided by the authorization engine for a given authorization session. Normally, all the mechanisms in your plug-in are called in turn for a given authorization session and there is no need to ask for the session ID. However, if you were to launch an authorization daemon (for example) that caches data from different authorization sessions and then uses that data later, you might need to keep track of which session a given data item came from. The session ID is available for your use if you wish to implement such a system.</p>
<p>The authorization engine sends you the entry point to the <code>GetSessionID</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/RequestInterrupt" title="RequestInterrupt"></a><a name="//apple_ref/doc/c_ref/RequestInterrupt" title="RequestInterrupt"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJDCHEH" title="RequestInterrupt"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_24"></a><h3 class="tight">RequestInterrupt</h3>
<p class="spaceabove">Request the authorization engine to interrupt the currently active authorization mechanism.</p>
<p class="spaceabove"><pre>
OSStatus (*RequestInterrupt)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>When you call this function, the security engine calls the <code><a href="reference.html#//apple_ref/c/tdef/MechanismDeactivate">MechanismDeactivate</a></code> function for your plug-in’s currently-active mechanism; that is, the mechanism that was last invoked and that has not yet called the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function to report its result. Your mechanism should then stop any active processing and call the <code><a href="reference.html#//apple_ref/c/func/DidDeactivate">DidDeactivate</a></code> function. When all mechanisms are inactive (that is, they have called either <code>SetResult</code> or <code>DidDeactivate</code>), the authorization engine calls the <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> function for the mechanism that called <code>RequestInterrupt</code> so that it can resume the authorization process from that point. After all mechanisms have called <code>SetResult</code>, the authorization engine calls each mechanism’s <code><a href="reference.html#//apple_ref/c/tdef/MechanismDestroy">MechanismDestroy</a></code> function.</p>
<p>If your mechanism spins off a separate process or UI thread, that thread can call the <code>RequestInterrupt</code> function to reinvoke the mechanism, even if that mechanism has already called the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function. For example, if your plug-in implements a smart card authentication method, reading and evaluating the card might take several minutes to perform. Therefore, in order to avoid blocking other processing while the card is being evaluated, you might spin off a UI thread to interact with the user and then return from <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code>. When the card has been read, the UI thread calls the <code>SetResult</code> function with a value of <code>kAuthorizationResultAllow</code> and changes the UI to request the user’s PIN. The authorization engine calls the next mechanism, which verifies the PIN. If the user pulls out the card before the verification is complete, the UI thread can call <code>RequestInterrupt</code>. The authorization engine then calls the active mechanism’s <code><a href="reference.html#//apple_ref/c/tdef/MechanismDeactivate">MechanismDeactivate</a></code> function, causing it to terminate the PIN verification and call <code><a href="reference.html#//apple_ref/c/func/DidDeactivate">DidDeactivate</a></code>. Then the authorization engine calls your UI mechanism’s <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> function again. Your UI can then prompt the user to reinsert the card.</p>
<p>To understand this sequence better, suppose your plug-in contains three mechanisms: A, B, and C. Mechanism A has called <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> and has no active processes. Mechanism B has called <code>SetResult</code>, but still has a UI thread running. Mechanism C is running and has not yet called <code>SetResult</code>. The user clicks Cancel or otherwise interrupts the UI thread, causing the UI thread to call the <code>RequestInterrupt</code> function. The following sequence of events occurs:</p>
<ol class="ol"><li class="li"><p>The authorization engine calls mechanism C’s <code><a href="reference.html#//apple_ref/c/tdef/MechanismDeactivate">MechanismDeactivate</a></code> function.</p></li>
<li class="li"><p>Mechanism C stops active processing and calls the <code><a href="reference.html#//apple_ref/c/func/DidDeactivate">DidDeactivate</a></code> function.</p></li>
<li class="li"><p>The authorization engine calls mechanism B’s <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> function (because mechanism B is the one that called <code>RequestInterrupt</code>).</p></li>
<li class="li"><p>Mechanism B updates the UI and calls the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function with the value <code>kAuthorizationResultAllow</code>.</p></li>
<li class="li"><p>The authorization engine calls mechanism C’s <code>MechanismInvoke</code> function.</p></li>
<li class="li"><p>Mechanism C completes processing and calls <code>SetResult</code> with <code>kAuthorizationResultAllow</code>.</p></li>
<li class="li"><p>The authorization engine calls the <code><a href="reference.html#//apple_ref/c/tdef/MechanismDestroy">MechanismDestroy</a></code> function of each mechanism in turn (A, B, then C).</p></li></ol>
<p>The authorization engine sends you the entry point to the <code>RequestInterrupt</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/SetContextValue" title="SetContextValue"></a><a name="//apple_ref/doc/c_ref/SetContextValue" title="SetContextValue"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJEAGFF" title="SetContextValue"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_25"></a><h3 class="tight">SetContextValue</h3>
<p class="spaceabove">Store data collected during authorization as a key-value pair.</p>
<p class="spaceabove"><pre>
OSStatus (*SetContextValue)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationContextFlags">AuthorizationContextFlags</a> inContextFlags,
   const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> *inValue);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd>
<dt><em>inKey</em></dt>
<dd><p>A key identifying the value you are storing. For standard values such as user names, use the keys listed in <code>DirectoryService/DirServicesConst.h</code>. If you need to define a new key, use reverse domain notation (such as <code>com.apple.ifoo</code>) and make sure the key is unique. For example, you can use your company name as a prefix for the key name.</p></dd>
<dt><em>inContextFlags</em></dt>
<dd><p>A flag that indicates whether this value should be available to the authorization client.</p></dd>
<dt><em>inValue</em></dt>
<dd><p>A pointer to an <code>AuthorizationValue</code> structure that contains the size of the context data and a pointer to the data. Both the structure and the data are copied to the context maintained by the Security Server.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>Your plug-in authorization mechanism collects data such as the user name and other authentication information during evaluation of authorization. You can use this function to have the Security Server store this data and the <code><a href="reference.html#//apple_ref/c/func/GetContextValue">GetContextValue</a></code> function to retrieve it. </p>
<p>When you store this context data, you flag it to indicate whether the authorization client can obtain the value with the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyInfo" target="_top">AuthorizationCopyInfo</a></code> function. If data is set to be extractable (<code>kAuthorizationContextFlagExtractable</code>), it is possible for the authorization client to use the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyInfo" target="_top">AuthorizationCopyInfo</a></code> function to obtain the value. If data is marked as volatile (<code>kAuthorizationContextFlagVolatile</code>), the value is not available to the client. In any case, sensitive data such as a user’s password is not provided to the client.</p>
<p>The authorization engine sends you the entry point to the <code>SetContextValue</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<p>Do not call this function after you have called the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function. If you do so, the function does not set the context data, even though the function returns the <code>errAuthorizationSuccess</code> result code.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/SetHintValue" title="SetHintValue"></a><a name="//apple_ref/doc/c_ref/SetHintValue" title="SetHintValue"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-BAJEHEAJ" title="SetHintValue"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_26"></a><h3 class="tight">SetHintValue</h3>
<p class="spaceabove">Store data needed during authorization as a key-value pair.</p>
<p class="spaceabove"><pre>
OSStatus (*SetHintValue)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
   const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> *inValue);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd>
<dt><em>inKey</em></dt>
<dd><p>A key identifying the value you are storing. For standard values such as a time stamp, use the keys listed in <code>DirectoryService/DirServicesConst.h</code>. If you need to define a new key, make sure the key is unique. For example, you can use your company name as a prefix for the key name.</p></dd>
<dt><em>inValue</em></dt>
<dd><p>A pointer to an <code>AuthorizationValue</code> structure that contains the size of the data and a pointer to the data. Both the structure and the data are copied to storage maintained by the authorization engine.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>Your plug-in authorization mechanism can save and retrieve auxiliary information—called hints—for use by subsequent mechanisms that are part of the same authorization. You use the <code>SetHintValue</code> function to have the Security Server store this data and the <code><a href="reference.html#//apple_ref/c/func/GetHintValue">GetHintValue</a></code> function to retrieve it. Hints are not preserved as part of the authorization result; once all mechanisms have approved the authorization or any mechanism has denied it, the security engine disposes of the hints. </p>
<p>The authorization engine sends you the entry point to the <code>SetHintValue</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<p>Do not call this function after you have called the <code><a href="reference.html#//apple_ref/c/func/SetResult">SetResult</a></code> function. If you do so, the function does not set the hint data, even though the function returns the <code>errAuthorizationSuccess</code> result code.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/func/SetResult" title="SetResult"></a><a name="//apple_ref/doc/c_ref/SetResult" title="SetResult"></a><a name="//apple_ref/doc/uid/TP40001432-CH202-CJBBJJCA" title="SetResult"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH202-DontLinkElementID_27"></a><h3 class="tight">SetResult</h3>
<p class="spaceabove">Return the result of an authorization operation.</p>
<p class="spaceabove"><pre>
OSStatus (*SetResult)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationResult">AuthorizationResult</a> inResult
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that is passed to your plug-in when the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function.</p></dd>
<dt><em>inResult</em></dt>
<dd><p>The result of the authorization attempt. See <span class="content_text"><a href="reference.html#//apple_ref/doc/constant_group/Authorization_Result">“Authorization Result”</a></span> for possible values.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Possible results are <code>errAuthorizationSuccess</code> (no error) and <code>errAuthorizationInternal</code> (Security Server internal error).</p>
<h5 class="tight">Discussion</h5>
<p>When an application calls the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyRights" target="_top">AuthorizationCopyRights</a></code> function to request a specific authorization right, the Security Agent looks for that right in the authorization policy database. If that right corresponds to your plug-in, the authorization engine calls the <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> function for each mechanism listed in the policy database for your plug-in. </p>
<p>When the authorization engine calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> function, your plug-in should invoke the specified mechanism to attempt an authorization operation. You use the <code>SetResult</code> function to return the results of this operation. If the mechanism returns <code>kAuthorizationResultAllow</code>, then the authorization engine calls the next mechanism (if any) specified in the authorization policy database for the policy. If any of the mechanisms report a result other than <code>kAuthorizationResultAllow</code>, the authorization attempt fails. If all of the mechanisms report results of <code>kAuthorizationResultAllow</code>, the authorization is considered to have succeeded. </p>
<p>Note that you can spin off a separate process and return from <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> before calling <code>SetResult</code>. For example, you might do so to avoid blocking the Security Server if your mechanism takes a significant amount of time to complete or if you want to be able to cancel the operation by calling the <code><a href="reference.html#//apple_ref/c/func/RequestInterrupt">RequestInterrupt</a></code> function (if, for example, the user has clicked Cancel).In that case, your separate process must call the <code>SetResult</code> function to report the result; the authorization engine does not call the next mechanism until you do so. </p>
<p>The authorization engine sends you the entry point to the <code>SetResult</code> function in an <code>AuthorizationCallbacks</code> structure when you call the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/doc/uid/TP40001432-DontLinkChapterID_1-DontLinkElementID_12" title="Callbacks by Task"></a><h2>Callbacks by Task</h2>
<a name="//apple_ref/doc/uid/TP40001432-CH1g-438261" title="Initializing a Plug-in"></a>
    
    <h3 class="tasks">Initializing a Plug-in</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Initializes the plug-in and exchanges interfaces with the authorization engine.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP40001432-CH1g-433803" title="Authorization Plug-in Interface Functions"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJICDBH" title="Authorization Plug-in Interface Functions"></a>
    
    <h3 class="tasks">Authorization Plug-in Interface Functions</h3>
    <p>You must declare and implement the functions referred to in the <code>AuthorizationPluginInterface</code> structure that you pass to the authorization engine with the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p>    
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/tdef/PluginDestroy">PluginDestroy</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Notifies the plug-in that it is about to be unloaded.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Create an authorization mechanism.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Invoke an authorization mechanism to perform an authorization operation.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/tdef/MechanismDeactivate">MechanismDeactivate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Deactivate an authorization mechanism.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/tdef/MechanismDestroy">MechanismDestroy</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Destroy an authorization mechanism.'/>
            </span></li>
    </ul>

<a name="//apple_ref/doc/uid/TP40001432-CH1g-433778" title="Callbacks"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJHFHJG" title="Callbacks"></a><h2>Callbacks</h2>








<a name="//apple_ref/c/tdef/AuthorizationPluginCreate" title="AuthorizationPluginCreate"></a><a name="//apple_ref/doc/c_ref/AuthorizationPluginCreate" title="AuthorizationPluginCreate"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJFGACH" title="AuthorizationPluginCreate"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-DontLinkElementID_28"></a><h3 class="tight">AuthorizationPluginCreate</h3>
<p class="spaceabove">Initializes the plug-in and exchanges interfaces with the authorization engine.</p>
<p class="spaceabove"><pre>
OSStatus AuthorizationPluginCreate (
   const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationCallbacks">AuthorizationCallbacks</a> *callbacks,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationPluginRef">AuthorizationPluginRef</a> *outPlugin,
   const <!--a-->AuthorizationPluginInterface<!--/a--> **outPluginInterface
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>callbacks</em></dt>
<dd><p>A pointer to a structure containing entry points to the Security Server. The functions in this interface are described in <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH202-427065">“Calling the Authorization Engine.”</a></span></p></dd>
<dt><em>outPlugin</em></dt>
<dd><p>On input, a pointer that you can assign, on output, to a reference value that you define. The authorization engine passes this reference back to you in any subsequent calls to your functions <code>outPluginInterface->MechanismCreate</code> (<code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code>) and <code>outPluginInterface->PluginDestroy</code> (<code><a href="reference.html#//apple_ref/c/tdef/MechanismDestroy">MechanismDestroy</a></code>) so that you can identify the instance of the plug-in affected.</p></dd>
<dt><em>outPluginInterface</em></dt>
<dd><p>On input, a pointer that you assign, on output, to a structure containing entry points in the plug-in. This structure remains valid until the authorization engine calls <code>outPluginInterface->PluginDestroy</code>. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Return <code>errAuthorizationSuccess</code> (no error) if the function completes successfully and <code>errAuthorizationInternal</code> (Security Server internal error) if any error occurs.</p>
<h5 class="tight">Discussion</h5>
<p>This function is the main entry point to the plug-in. The authorization engine calls this function only once. The plug-in receives a structure (<code><a href="reference.html#//apple_ref/c/tdef/AuthorizationCallbacks">AuthorizationCallbacks</a></code>) containing the entry points to the Security Server’s functions (described in <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH202-427065">“Calling the Authorization Engine”</a></span>) and returns a structure (<code><a href="reference.html#//apple_ref/c/tdef/version">AuthorizationPluginInterface</a></code>) containing the entry points to all of the plug-in’s routines (<span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH1g-433803">“Authorization Plug-in Interface Functions”</a></span>). Both of these structures contain version numbers. The authorization engine matches the version of its interface to the version in your plug-in’s <code>AuthorizationPluginInterface</code> structure in order to ensure that older plug-ins will continue to function correctly after the Security Server is updated.</p><p>If your plug-in is running in Mac OS X v10.5 or later and displays a window before the user has logged in, you must set the <code>KHIWindowBitCanBeVisibleWithoutLogin</code> flag on the window.</p><p>For Cocoa, the <code>NSWindow</code> method to do this is:</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)setCanBecomeVisibleWithoutLogin:(BOOL)flag;<span></span></pre></td></tr></table></div><p>This method is available in Mac OS X v10.5 and later; see <em><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/index.html#//apple_ref/doc/uid/TP40004151" target="_top">NSWindow Class Reference</a></em>.</p><p>For Carbon, you set the <code>KHIWindowBitCanBeVisibleWithoutLogin</code> attribute directly; see <em><a href="../../../../Carbon/Reference/Window_Manager/index.html#//apple_ref/doc/uid/TP30000176" target="_top">Window Manager Reference</a></em>. This attribute is also supported by <code>IBCarbonRuntime</code> and when archiving a window.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40001432-CH1g-DontLinkElementID_17" title="Important:"></a><p><strong>Important:</strong>&nbsp;Authorization plug-ins that put up a GUI or otherwise connect to the window server cannot run as privileged. Note that running GUI code as root is a bad idea in general, because GUI code links in many libraries, any of which could contain security vulnerabilities.</p><p></p></div>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/tdef/MechanismCreate" title="MechanismCreate"></a><a name="//apple_ref/doc/c_ref/MechanismCreate" title="MechanismCreate"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJCECEF" title="MechanismCreate"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-DontLinkElementID_29"></a><h3 class="tight">MechanismCreate</h3>
<p class="spaceabove">Create an authorization mechanism.</p>
<p class="spaceabove"><pre>
OSStatus (*MechanismCreate)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationPluginRef">AuthorizationPluginRef</a> inPlugin,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismId">AuthorizationMechanismId</a> mechanismId,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> *outMechanism
);
</pre></p>
<p>You would declare your function like this if you were to name it <code>MyMechanismCreate</code>:</p>
<p><pre>
OSStatus MyMechanismCreate (
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationPluginRef">AuthorizationPluginRef</a> inPlugin,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismId">AuthorizationMechanismId</a> mechanismId,
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> *outMechanism
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inPlugin</em></dt>
<dd><p>The authorization plug-in reference you assigned to the plug-in in the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p></dd>
<dt><em>inEngine</em></dt>
<dd><p>An opaque handle that you must pass back to the authorization engine when you call one of the engine’s callback functions.</p></dd>
<dt><em>mechanismID</em></dt>
<dd><p>The mechanism ID specified in the authorization policy database is passed to the plug-in so that the plug-in can create the appropriate mechanism. </p></dd>
<dt><em>outMechanism</em></dt>
<dd><p>On output, points to an authorization mechanism reference that you define. The authorization engine includes this reference when it calls your plug-in so that you can identify which instance of a mechanism to invoke, deactivate, or destroy.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Return <code>errAuthorizationSuccess</code> (no error) if the function completes successfully and <code>errAuthorizationInternal</code> (Security Server internal error) if any error occurs.</p>
<h5 class="tight">Discussion</h5>
<p>A given authorization plug-in can implement any number of authorization mechanisms, distinguished by their mechanism names in the authorization policy database. For an example, see <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH204-87217">Listing 1</a></span>. </p>
<p>When the authorization engine calls your <code>MechanismCreate</code> function, you should create a mechanism of the type specified by the <code>mechanismID</code> parameter and return an authorization mechanism reference. Subsequently, the authorization engine can call your <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code> function to perform an authorization, or can direct you to deactivate or destroy the mechanism instance by calling your <code><a href="reference.html#//apple_ref/c/tdef/MechanismDeactivate">MechanismDeactivate</a></code> or <code><a href="reference.html#//apple_ref/c/tdef/MechanismDestroy">MechanismDestroy</a></code> functions. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/tdef/MechanismDeactivate" title="MechanismDeactivate"></a><a name="//apple_ref/doc/c_ref/MechanismDeactivate" title="MechanismDeactivate"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJGDHJE" title="MechanismDeactivate"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-DontLinkElementID_30"></a><h3 class="tight">MechanismDeactivate</h3>
<p class="spaceabove">Deactivate an authorization mechanism.</p>
<p class="spaceabove"><pre>
OSStatus (*MechanismDeactivate)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism
);
</pre></p>
<p>You would declare your function like this if you were to name it <code>MyMechanismDeactivate</code>:</p>
<p><pre>
OSStatus MyMechanismDeactivate (
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inMechanism</em></dt>
<dd><p>An authorization mechanism reference that you returned when your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function was called to create the mechanism.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Return <code>errAuthorizationSuccess</code> (no error) if the function completes successfully and <code>errAuthorizationInternal</code> (Security Server internal error) if any error occurs.</p>
<h5 class="tight">Discussion</h5>
<p>The authorization engine calls the <code>MechanismDeactivate</code> function of each active mechanism when you call the <code><a href="reference.html#//apple_ref/c/func/RequestInterrupt">RequestInterrupt</a></code> function. To deactivate your mechanism, you must stop any processing that is currently underway; for example, you should terminate any threads or UI processes that you initiated. </p>
<p>After you have terminated all processing, you must call the <code><a href="reference.html#//apple_ref/c/func/DidDeactivate">DidDeactivate</a></code> function; the authorization engine waits for you to call this function before it resumes operation.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/tdef/MechanismDestroy" title="MechanismDestroy"></a><a name="//apple_ref/doc/c_ref/MechanismDestroy" title="MechanismDestroy"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJHDCDB" title="MechanismDestroy"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-DontLinkElementID_31"></a><h3 class="tight">MechanismDestroy</h3>
<p class="spaceabove">Destroy an authorization mechanism.</p>
<p class="spaceabove"><pre>
OSStatus (*MechanismDestroy)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism
);
</pre></p>
<p>You would declare your function like this if you were to name it <code>MyMechanismDestroy</code>:</p>
<p><pre>
OSStatus MyMechanismDeactivate (
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inMechanism</em></dt>
<dd><p>An authorization mechanism reference that you returned when your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function was called to create the mechanism.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Return <code>errAuthorizationSuccess</code> (no error) if the function completes successfully and <code>errAuthorizationInternal</code> (Security Server internal error) if any error occurs.</p>
<h5 class="tight">Discussion</h5>
<p>When the authorization engine calls your <code>MechanismDestroy</code> function, you must release all resources owned by your mechanism and do any other cleanup necessary (such as deleting temporary files).</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/tdef/MechanismInvoke" title="MechanismInvoke"></a><a name="//apple_ref/doc/c_ref/MechanismInvoke" title="MechanismInvoke"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJCJDDA" title="MechanismInvoke"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-DontLinkElementID_32"></a><h3 class="tight">MechanismInvoke</h3>
<p class="spaceabove">Invoke an authorization mechanism to perform an authorization operation.</p>
<p class="spaceabove"><pre>
OSStatus (*MechanismInvoke)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism
);
</pre></p>
<p>You would declare your function like this if you were to name it <code>MyMechanismInvoke</code>:</p>
<p><pre>
OSStatus MyMechanismInvoke (
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inMechanism</em></dt>
<dd><p>An authorization mechanism reference that you returned when your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function was called to create the mechanism.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Return <code>errAuthorizationSuccess</code> (no error) if the function completes successfully and <code>errAuthorizationInternal</code> (Security Server internal error) if any error occurs.</p>
<h5 class="tight">Discussion</h5>
<p>When the authorization engine calls your <code>MechanismInvoke</code> function, you should perform the authorization operation indicated by the mechanism reference. You can use the functions <code><a href="reference.html#//apple_ref/c/func/GetArguments">GetArguments</a></code>, <code><a href="reference.html#//apple_ref/c/func/GetContextValue">GetContextValue</a></code>, and <code><a href="reference.html#//apple_ref/c/func/GetHintValue">GetHintValue</a></code> to get more information, if any, about the authorization.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/c/tdef/PluginDestroy" title="PluginDestroy"></a><a name="//apple_ref/doc/c_ref/PluginDestroy" title="PluginDestroy"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-BAJEGEGC" title="PluginDestroy"></a><a name="//apple_ref/doc/uid/TP40001432-CH1g-DontLinkElementID_33"></a><h3 class="tight">PluginDestroy</h3>
<p class="spaceabove">Notifies the plug-in that it is about to be unloaded.</p>
<p class="spaceabove"><pre>
OSStatus (*PluginDestroy)(
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationPluginRef">AuthorizationPluginRef</a> inPlugin
);
</pre></p>
<p>You would declare your function like this if you were to name it <code>MyPluginDestroy</code>:</p>
<p><pre>
OSStatus MyPluginDestroy (
   <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationPluginRef">AuthorizationPluginRef</a> inPlugin
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inPlugin</em></dt>
<dd><p>The authorization plug-in reference you assigned to the plug-in in the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. Return <code>errAuthorizationSuccess</code> (no error) if the function completes successfully and <code>errAuthorizationInternal</code> (Security Server internal error) if any error occurs.</p>
<h5 class="tight">Discussion</h5>
<p>When this function is called, your plug-in should release any resources it is holding and do any other cleanup necessary (such as deleting temporary files) before it is unloaded.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.4 and later.</li></ul>
<h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code><a name="//apple_ref/doc/uid/TP40001432-CH2g-434840" title="Data Types"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-TPXREF118" title="Data Types"></a><h2>Data Types</h2>
<a name="//apple_ref/c/tdef/AuthorizationValue" title="AuthorizationValue"></a><a name="//apple_ref/doc/c_ref/AuthorizationValue" title="AuthorizationValue"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_1" title="AuthorizationValue"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_34"></a><h3 class="tight">AuthorizationValue</h3>
<p class="spaceabove">Used to pass data between the authorization engine and the plug-in mechanism.</p>
<p class="spaceabove"><pre>
typedef struct AuthorizationValue {
UInt32          length;
void            *data;
} AuthorizationValue;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationValueVector" title="AuthorizationValueVector"></a><a name="//apple_ref/doc/c_ref/AuthorizationValueVector" title="AuthorizationValueVector"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_2" title="AuthorizationValueVector"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_35"></a><h3 class="tight">AuthorizationValueVector</h3>
<p class="spaceabove">Used to pass arguments from the authorization policy database to the authorization mechanism.</p>
<p class="spaceabove"><pre>
typedef struct AuthorizationValueVector {
UInt32              count;
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a>  *values;
} AuthorizationValueVector;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationMechanismId" title="AuthorizationMechanismID"></a><a name="//apple_ref/doc/c_ref/AuthorizationMechanismId" title="AuthorizationMechanismID"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_3" title="AuthorizationMechanismID"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_36"></a><h3 class="tight">AuthorizationMechanismID</h3>
<p class="spaceabove">The mechanism ID specified in the authorization policy database is passed to the plug-in to create the appropriate mechanism.</p>
<p class="spaceabove"><pre>
typedef const <a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> AuthorizationMechanismId;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationPluginRef" title="AuthorizationPluginRef"></a><a name="//apple_ref/doc/c_ref/AuthorizationPluginRef" title="AuthorizationPluginRef"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_4" title="AuthorizationPluginRef"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_37"></a><h3 class="tight">AuthorizationPluginRef</h3>
<p class="spaceabove">Handle passed by the plug-in to the authorization engine when the plug-in is initiated.</p>
<p class="spaceabove"><pre>
typedef void *AuthorizationPluginRef;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Your <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function assigns this value and returns it to the authorization engine. The authorization engine passes this reference back to you in any subsequent calls to your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> and <code><a href="reference.html#//apple_ref/c/tdef/PluginDestroy">PluginDestroy</a></code> functions.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationMechanismRef" title="AuthorizationMechanismRef"></a><a name="//apple_ref/doc/c_ref/AuthorizationMechanismRef" title="AuthorizationMechanismRef"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_5" title="AuthorizationMechanismRef"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_38"></a><h3 class="tight">AuthorizationMechanismRef</h3>
<p class="spaceabove">Handle passed by the plug-in to the authorization engine when creating an instance of a mechanism.</p>
<p class="spaceabove"><pre>
typedef void *AuthorizationMechanismRef;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function assigns this value and returns it to the authorization engine. The authorization engine passes this reference back to you in any subsequent calls to your <code><a href="reference.html#//apple_ref/c/tdef/MechanismInvoke">MechanismInvoke</a></code>, <code><a href="reference.html#//apple_ref/c/tdef/MechanismDeactivate">MechanismDeactivate</a></code>, and <code><a href="reference.html#//apple_ref/c/tdef/MechanismDestroy">MechanismDestroy</a></code> functions.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationEngineRef" title="AuthorizationEngineRef"></a><a name="//apple_ref/doc/c_ref/AuthorizationEngineRef" title="AuthorizationEngineRef"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_6" title="AuthorizationEngineRef"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_39"></a><h3 class="tight">AuthorizationEngineRef</h3>
<p class="spaceabove">Handle passed from the authorization engine to an instance of a mechanism in a plug-in.</p>
<p class="spaceabove"><pre>
typedef struct __OpaqueAuthorizationEngine *AuthorizationEngineRef;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The authorization engine passes one of these opaque handles to your plug-in when it calls your <code><a href="reference.html#//apple_ref/c/tdef/MechanismCreate">MechanismCreate</a></code> function. Your mechanism must pass this handle back to the authorization engine when you call one of the engine’s callback functions (see <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH202-427065">“Calling the Authorization Engine”</a></span>).</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationSessionId" title="AuthorizationSessionId"></a><a name="//apple_ref/doc/c_ref/AuthorizationSessionId" title="AuthorizationSessionId"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_7" title="AuthorizationSessionId"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_40"></a><h3 class="tight">AuthorizationSessionId</h3>
<p class="spaceabove">A unique value for an authorization session, provided by the authorization engine.</p>
<p class="spaceabove"><pre>
typedef void *AuthorizationSessionId;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>You can call the <code><a href="reference.html#//apple_ref/c/func/GetSessionID">GetSessionID</a></code> function to retrieve the authorization session ID.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationResult" title="AuthorizationResult"></a><a name="//apple_ref/doc/c_ref/AuthorizationResult" title="AuthorizationResult"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_8" title="AuthorizationResult"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_41"></a><h3 class="tight">AuthorizationResult</h3>
<p class="spaceabove">The data type for the result of an authorization evaluation.</p>
<p class="spaceabove"><pre>
typedef UInt32 AuthorizationResult;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The permissible values for an authorization result are enumerated in <span class="content_text"><a href="reference.html#//apple_ref/doc/constant_group/Authorization_Result">“Authorization Result.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/AuthorizationCallbacks" title="AuthorizationCallbacks"></a><a name="//apple_ref/doc/c_ref/AuthorizationCallbacks" title="AuthorizationCallbacks"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-BAJIIDHJ" title="AuthorizationCallbacks"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_42"></a><h3 class="tight">AuthorizationCallbacks</h3>
<p class="spaceabove">The interface implemented by the Security Server.</p>
<p class="spaceabove"><pre>
typedef struct AuthorizationCallbacks {
UInt32 version;
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*SetResult)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationResult">AuthorizationResult</a> inResult);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*RequestInterrupt)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*DidDeactivate)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*GetContextValue)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
<a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationContextFlags">AuthorizationContextFlags</a> *outContextFlags,
const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> **outValue);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*SetContextValue)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
<a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationContextFlags">AuthorizationContextFlags</a> inContextFlags,
const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> *inValue);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*GetHintValue)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
<a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> **outValue);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*SetHintValue)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
<a href="../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a> inKey,
const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValue">AuthorizationValue</a> *inValue);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*GetArguments)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
const <a href="reference.html#//apple_ref/doc/c_ref/AuthorizationValueVector">AuthorizationValueVector</a> **outArguments);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*GetSessionId)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationSessionId">AuthorizationSessionId</a> *outSessionId);
} AuthorizationCallbacks;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This structure is passed to your plug-in through the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function. The functions defined by this structure are described in <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH202-427065">“Calling the Authorization Engine.”</a></span></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">Declared In</h5><code>AuthorizationPlugin.h</code>
<a name="//apple_ref/c/tdef/version" title="AuthorizationPluginInterface"></a><a name="//apple_ref/doc/c_ref/version" title="AuthorizationPluginInterface"></a><a name="//apple_ref/doc/uid/TP40001432-CH2g-BAJJJDJC" title="AuthorizationPluginInterface"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH2g-DontLinkElementID_43"></a><h3 class="tight">AuthorizationPluginInterface</h3>
<p class="spaceabove">The interface that must be implemented by your plug-in.</p>
<p class="spaceabove"><pre>
typedef struct AuthorizationPluginInterface
UInt32 version;
OSStatus (*PluginDestroy)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationPluginRef">AuthorizationPluginRef</a> inPlugin);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*MechanismCreate)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationPluginRef">AuthorizationPluginRef</a> inPlugin,
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationEngineRef">AuthorizationEngineRef</a> inEngine,
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismId">AuthorizationMechanismId</a> mechanismId,
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> *outMechanism);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*MechanismInvoke)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*MechanismDeactivate)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism);
<a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a> (*MechanismDestroy)(
<a href="reference.html#//apple_ref/doc/c_ref/AuthorizationMechanismRef">AuthorizationMechanismRef</a> inMechanism);
} AuthorizationPluginInterface;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Your plug-in passes this interface to the authorization engine through the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationPluginCreate">AuthorizationPluginCreate</a></code> function. The functions defined by this structure are described in <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH1g-433778">“Functions Implemented By the Plug-in.”</a></span></p><a name="//apple_ref/doc/uid/TP40001432-CH3g-435513" title="Constants"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-TPXREF119" title="Constants"></a><h2>Constants</h2>
<a name="//apple_ref/c/tdef/AuthorizationContextFlags" title="Authorization Context Flags" role="Enum"></a><a name="//apple_ref/doc/c_ref/AuthorizationContextFlags" title="Authorization Context Flags" role="Enum"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-BCIHIDGG" title="Authorization Context Flags" role="Enum"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_44"></a><h3 class="tight">Authorization Context Flags</h3>
<p class="spaceabove">Defines flags that specify whether authentication data should be made available to the authorization client.</p>
<p class="spaceabove"><pre>
typedef UInt32 AuthorizationContextFlags;
enum {
   <a href="reference.html#//apple_ref/doc/c_ref/kAuthorizationContextFlagExtractable">kAuthorizationContextFlagExtractable</a> =  (1 &lt;&lt; 0),
   <a href="reference.html#//apple_ref/doc/c_ref/kAuthorizationContextFlagVolatile">kAuthorizationContextFlagVolatile</a> =     (1 &lt;&lt; 1),
   <a href="reference.html#//apple_ref/doc/c_ref/kAuthorizationContextFlagSticky">kAuthorizationContextFlagSticky</a> =       (1 &lt;&lt; 2)
};
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/econst/kAuthorizationContextFlagExtractable" title="kAuthorizationContextFlagExtractable"></a><a name="//apple_ref/doc/c_ref/kAuthorizationContextFlagExtractable" title="kAuthorizationContextFlagExtractable"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_45"></a><dt><code>kAuthorizationContextFlagExtractable</code></dt>
<dd><p>It is possible for the authorization client to use the <code><a href="../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyInfo" target="_top">AuthorizationCopyInfo</a></code> function to obtain the value.</p><p>Available in Mac OS X v10.4 and later.</p><p>Declared in <code>AuthorizationPlugin.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kAuthorizationContextFlagVolatile" title="kAuthorizationContextFlagVolatile"></a><a name="//apple_ref/doc/c_ref/kAuthorizationContextFlagVolatile" title="kAuthorizationContextFlagVolatile"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_46"></a><dt><code>kAuthorizationContextFlagVolatile</code></dt>
<dd><p>The value is not saved for the authorization client.</p><p>Available in Mac OS X v10.4 and later.</p><p>Declared in <code>AuthorizationPlugin.h</code>.</p></dd><a name="//apple_ref/c/econst/kAuthorizationContextFlagSticky" title="kAuthorizationContextFlagSticky"></a><a name="//apple_ref/doc/c_ref/kAuthorizationContextFlagSticky" title="kAuthorizationContextFlagSticky"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_47"></a><dt><code>kAuthorizationContextFlagSticky</code></dt><dd><p>This data persists through an interrupted or failed evaluation.</p><p>This flag can be used to propagate an error condition from a downstream plug-in to an upstream one. It is not remembered in the authorization reference (see <em><a href="../../authorization_ref/index.html#//apple_ref/doc/uid/TP30000826" target="_top">Authorization Services C Reference</a></em>.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>AuthorizationPlugin.h</code>.</p></dd></dl>
<a name="//apple_ref/doc/constant_group/Authorization_Result" title="Authorization Result" role="Enum"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-BAJCBHAF" title="Authorization Result" role="Enum"></a>
<a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_48"></a><h3 class="tight">Authorization Result</h3>
<p class="spaceabove">The result of an authorization evaluation.</p>
<p class="spaceabove"><pre>
enum {
   <a href="reference.html#//apple_ref/doc/c_ref/kAuthorizationResultAllow">kAuthorizationResultAllow</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kAuthorizationResultDeny">kAuthorizationResultDeny</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kAuthorizationResultUndefined">kAuthorizationResultUndefined</a>,
   <a href="reference.html#//apple_ref/doc/c_ref/kAuthorizationResultUserCanceled">kAuthorizationResultUserCanceled</a>,
};
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/econst/kAuthorizationResultAllow" title="kAuthorizationResultAllow"></a><a name="//apple_ref/doc/c_ref/kAuthorizationResultAllow" title="kAuthorizationResultAllow"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_49"></a><dt><code>kAuthorizationResultAllow</code></dt>
<dd><p>The authorization operation succeeded and authorization should be granted.</p><p>Available in Mac OS X v10.4 and later.</p><p>Declared in <code>AuthorizationPlugin.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kAuthorizationResultDeny" title="kAuthorizationResultDeny"></a><a name="//apple_ref/doc/c_ref/kAuthorizationResultDeny" title="kAuthorizationResultDeny"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_50"></a><dt><code>kAuthorizationResultDeny</code></dt>
<dd><p>The authorization operation succeeded and authorization should be denied.</p><p>Available in Mac OS X v10.4 and later.</p><p>Declared in <code>AuthorizationPlugin.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kAuthorizationResultUndefined" title="kAuthorizationResultUndefined"></a><a name="//apple_ref/doc/c_ref/kAuthorizationResultUndefined" title="kAuthorizationResultUndefined"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_51"></a><dt><code>kAuthorizationResultUndefined</code></dt>
<dd><p>The authorization operation failed and should not be retried for this session. </p><p>Available in Mac OS X v10.4 and later.</p><p>Declared in <code>AuthorizationPlugin.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kAuthorizationResultUserCanceled" title="kAuthorizationResultUserCanceled"></a><a name="//apple_ref/doc/c_ref/kAuthorizationResultUserCanceled" title="kAuthorizationResultUserCanceled"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_52"></a><dt><code>kAuthorizationResultUserCanceled</code></dt>
<dd><p>The user has requested that the authorization evaluation be terminated.</p><p>Available in Mac OS X v10.4 and later.</p><p>Declared in <code>AuthorizationPlugin.h</code>.</p></dd></dl>
<a name="//apple_ref/doc/constant_group/Plug_in_Interface_Version" title="Plug-in Interface Version" role="Enum"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_9" title="Plug-in Interface Version" role="Enum"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_53"></a><h3 class="tight">Plug-in Interface Version</h3>
<p class="spaceabove">The version of the interface implemented by the plug-in.</p>
<p class="spaceabove"><pre>
enum {
   <!--a-->kAuthorizationPluginInterfaceVersion<!--/a--> =  0
};
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The plug-in interface is defined by the <code><a href="reference.html#//apple_ref/c/tdef/version">AuthorizationPluginInterface</a></code> structure and described in <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH1g-433778">“Functions Implemented By the Plug-in.”</a></span></p>
<a name="//apple_ref/doc/constant_group/Authorization_Engine_Interface_Version" title="Authorization Engine Interface Version" role="Enum"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_10" title="Authorization Engine Interface Version" role="Enum"></a><a name="//apple_ref/doc/uid/TP40001432-CH3g-DontLinkElementID_54"></a><h3 class="tight">Authorization Engine Interface Version</h3>
<p class="spaceabove">The version of the interface implemented by the authorization engine.</p>
<p class="spaceabove"><pre>
enum {
   <!--a-->kAuthorizationCallbacksVersion<!--/a--> =        0
};
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The authorization engine interface is defined by the <code><a href="reference.html#//apple_ref/c/tdef/AuthorizationCallbacks">AuthorizationCallbacks</a></code> structure and described in <span class="content_text"><a href="reference.html#//apple_ref/doc/uid/TP40001432-CH202-427065">“Calling the Authorization Engine.”</a></span></p><a name="//apple_ref/doc/uid/TP40001432-CH4g-CJBEABHG" title="Result Codes"></a><h2><a name="//apple_ref/doc/uid/TP40001432-CH4g-95690" title="Result Codes"></a><a name="//apple_ref/doc/uid/TP40001432-CH4g-TPXREF120" title="Result Codes"></a>Result Codes</h2>
<p>The result codes used by authorization plug-ins are listed in the table below.</p>




<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left"><strong>Result Code</strong></th><th scope="col" align="left"><strong>Value</strong></th><th scope="col" align="left"><strong>Description</strong></th></tr>
<tr>
<a name="//apple_ref/doc/uid/TP40001432-CH4g-DontLinkElementID_55"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errAuthorizationSuccess" title="errAuthorizationSuccess"></a><a name="//apple_ref/doc/c_ref/errAuthorizationSuccess" title="errAuthorizationSuccess"></a><code>errAuthorizationSuccess</code></td>
<td align="right" valign="top" class="content_text noWrap">0</td>

<td valign="top" class="content_text"><p>The operation completed successfully.</p><p>Available in Mac OS X v10.0 and later.</p></td></tr>
<tr>
<a name="//apple_ref/doc/uid/TP40001432-CH4g-DontLinkElementID_56"></a><td valign="top" scope="row"><a name="//apple_ref/c/econst/errAuthorizationInternal" title="errAuthorizationInternal"></a><a name="//apple_ref/doc/c_ref/errAuthorizationInternal" title="errAuthorizationInternal"></a><code>errAuthorizationInternal</code></td>
<td align="right" valign="top" class="content_text noWrap">-60008</td>

<td valign="top" class="content_text"><p>An unrecognized internal error occurred.</p><p>Available in Mac OS X v10.0 and later.</p></td></tr>
</table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../AuthorizationPluginRef_revHist/revision_history.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-05-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Security/Reference/AuthorizationPluginRef/Reference/reference.html%3Fid%3DTP40001432-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Security/Reference/AuthorizationPluginRef/Reference/reference.html%3Fid%3DTP40001432-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Security/Reference/AuthorizationPluginRef/Reference/reference.html%3Fid%3DTP40001432-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Supplying Optional Resources for a Monitors Extension (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING465></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-464.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-466.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-453.html"><B>Chapter 8 - Control Panels</B></A> / <A HREF="MoreToolbox-462.html"><B>Creating an Extension for the Monitors Control Panel</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING465-0></A>
<H2><A NAME=MARKER-9-281></A>Supplying Optional Resources for a Monitors Extension</H2>
 <A NAME=MARKER-2-282></A>Your monitors extension file can also include any of the optional resources described in this section. To create these resources, either you can specify the resource description in an input file and then use a resource compiler, such as Rez, to compile the resource, or you can use a tool such as ResEdit to create your resources in a resource file.<P>
 The optional resources and their resource IDs are<P>
<UL>
<LI>The icon family resources (<CODE>'ICN#'</CODE>, <CODE>'ics#'</CODE>, <CODE>'icl8'</CODE>, <CODE>'icl4'</CODE>, <CODE>'ics8'</CODE>, and <CODE>'ics4'</CODE>), which specify an icon for display in the upper-left corner of the Options dialog box: resource ID -4096.
<LI>The version (<CODE>'vers'</CODE>) resources: resource ID 1 and 2.
<LI>The string list (<CODE>'STR#'</CODE>) resource: resource ID -4096.
<LI>The gamma table (<CODE>'gama'</CODE>) resource: resource ID from -4080 through -4065.
<LI><A NAME=MARKER-2-139></A>The file reference (<CODE>'FREF'</CODE>) resource. The resource ID follows the normal conventions  (typically, you assign a resource ID of 128).
<LI>The<A NAME=MARKER-2-285></A> bundle (<CODE>'BNDL'</CODE>) resource. The resource ID follows the normal conventions (typically, you assign a resource ID of 128).
<LI>The icon family resources (<CODE>'ICN#'</CODE>, <CODE>'ics#'</CODE>, <CODE>'icl8'</CODE>, <CODE>'icl4'</CODE>, <CODE>'ics8'</CODE>, and <CODE>'ics4'</CODE>), which define the monitors extension file icon. The resource ID follows the normal conventions (typically, you assign a resource ID of 128).
<LI>The system extension (<CODE>'INIT'</CODE>) resource.
<LI>The signature resource: resource ID 0.<P>
</UL>
 In addition to the optional resources that these sections describe, you can include <BR>private optional resources whose resource ID numbers must fall within the <BR>range -4080 through -4065. <P>
<A NAME=HEADING465-13></A>
<H3><A NAME=MARKER-21-286></A>Specifying an Icon for the Options Dialog Box</H3>
 To specify an icon that the Monitors control panel displays in the upper-left corner of the Options dialog box, you can define one or more members of an icon family. <A NAME=MARKER-2-287></A>For each of these resources, you must assign a resource ID of -4064. If you provide an icon family, the Monitors control panel displays the appropriate icon according to the bit depth of the monitor. (Note that in System 6 you provide <CODE>'ICON'</CODE> or <CODE>'cicn'</CODE> icons instead of an icon family.) For more information on these icons, see the chapter "Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>. <P>
 If you do not supply either of these icon resources, the Monitors control panel displays the icon<A NAME=MARKER-2-288></A> defined in the <CODE>sRsrcIcon</CODE> entry of the <A NAME=MARKER-2-289></A><CODE>sResource</CODE> data structure of your video card's ROM. If your do not supply either of these resources and your video card does not include an icon, the Monitors control panel displays a generic icon that represents a monitor.<P>
 <A HREF=#MARKER-9-290>Listing 8-20</A> shows a partial listing of the icon family resources that define the SurfBoard video card icon shown in <A HREF=MoreToolbox-463.html#MARKER-9-246>Figure 8-13 on page 8-51</A>.<P>
<B>Listing 8-20  <A NAME=MARKER-9-290></A>Rez input for icon family resources for a monitors extension</B><P>
<PRE>
data 'ICN#' (-4064, purgeable) {
   /*icon data goes here*/
};
data 'icl8' (-4064, purgeable) {
   /*icon data goes here*/
};
data 'icl4' (-4064, purgeable) {
   /*icon data goes here*/
};
</PRE>
<A NAME=HEADING465-19></A>
<H3><A NAME=MARKER-21-291></A>Specifying Version Information </H3>
 You can include two kinds of version resources of type <CODE>'vers'</CODE> to provide version information for your monitors extension file. The version resource with a resource ID <BR>of 1 specifies the version of your monitors extension file. The version resource with a resource ID of 2 specifies the version of the group to which your file belongs--for example, the version number of the video card that your extension file supports. <P>
 The Finder displays version information about your monitors extension for the user. For complete information on how to specify the version resources and how the Finder displays the information from these resources in its information window, see the chapter "Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I>. <P>
 <A HREF=#MARKER-9-292>Listing 8-21</A> shows a version resource with a resource ID of 1 that specifies the version number of the SurfBoard's monitor extension file. This version resource includes the copyright of the River Change Systems company, which manufactures the card. <P>
<B>Listing 8-21  <A NAME=MARKER-9-292></A>Rez input for a version (<CODE>'vers'</CODE>) resource</B><P>
<PRE>
resource 'vers' (1) {
   0x01, 0x00, release, 0x00,
   0, /*verUS*/
   &quot;1.00&quot;,
   &quot;1.00, Copyright &#169; 1993 River Change Systems.&quot;
};
</PRE>
<A NAME=HEADING465-25></A>
<H3>Providing an Alternative Name for a Video Card<A NAME=MARKER-9-293></A><A NAME=MARKER-21-294></A></H3>
 The Monitors control panel displays the name of your video card in the upper-left corner of the Options dialog box. By default, it displays the name defined in the declaration ROM of the video card. To display a name for your video card that is different from the name in the declaration ROM of the video card, you can include a string list (<CODE>'STR#'</CODE>) resource with resource ID -4096. This resource must contain pairs of Pascal strings. The first string in each pair must be identical to the name of your video card as specified in the <CODE>sResource</CODE> data structure in the ROM of the card. (For more information on the <CODE>sResource</CODE> data structure, see <I>Designing Cards and Drivers for the Macintosh Family</I>, third edition.) The second string in each pair is the name that you want to display in the Options dialog box. You can have as many pairs of names in one string list resource as you wish; the Monitors control panel uses the first match it finds.<P>
 It is unlikely that you will need to override the name specified in the declaration ROM. However, if you have misspelled the card name on the board, or if you want to display a name that is more descriptive, you can include a string list resource. <A HREF=#MARKER-9-295>Listing 8-22</A> shows the string list resource for the SurfBoard video card monitors extension. This monitors extension includes two card resources (see <A HREF=MoreToolbox-464.html#MARKER-9-256>Listing 8-17 on page 8-52</A>), but the string list resource includes only one entry to override the name SurfBoard Super Display Card. In this example, when the Monitors control panel displays the Options dialog box for the SurfBoard Super Display Card, it displays the name SurfBoard Super Fast Display Card instead of the name in the card's declaration ROM.<P>
<B>Listing 8-22  <A NAME=MARKER-9-295></A>Rez input for the SurfBoard string list resource</B><P>
<PRE>
resource 'STR#' (-4096, purgeable)
{
   {  &quot;SurfBoard Super Display Card&quot;;
      &quot;SurfBoard Super Fast Display Card&quot;};
};
</PRE>
<A NAME=HEADING465-30></A>
<H3><A NAME=MARKER-21-296></A>Supplying Gamma Table Resources</H3>
 To indicate status as a superuser, the user presses the Option key while clicking the Options button in the Monitors control panel. In response, the Monitors control panel displays a list of gamma tables (see <A HREF=MoreToolbox-463.html#MARKER-9-238>Figure 8-12 on page 8-50</A>). <P>
 <A NAME=MARKER-2-297></A>The software driver for a video card uses a <A NAME=MARKER-2-298></A>gamma table to correct for the fact that the intensity of <A NAME=MARKER-2-301></A>each color on a video display is not linearly proportional to the intensity of the electron beam; in other words, the gamma table helps the video driver to provide the most accurate colors possible for a video display. Because the user might prefer a nonstandard color correction, many developers of video cards provide more than one gamma table for a given card. <P>
 <A NAME=MARKER-2-301></A>To supply one or more gamma tables for a video card, include in the monitors extension file a named resource of type <A NAME=MARKER-2-302></A><CODE>'gama'</CODE> for each gamma table. To change the default gamma table for a monitor, the user clicks the Use Special Gamma checkbox and then selects a table by clicking its name in the list. The default gamma table for a monitor is the one listed in the screen resource of type <CODE>'scrn'</CODE>. For a complete discussion of gamma tables, see <I>Designing Cards and Drivers for the Macintosh Family</I>, third edition. For information on the screen (<CODE>'scrn'</CODE>) resource, see <I><A HREF="../Devices/Devices-2.html">Inside Macintosh: Devices</A></I>. <P>
<A NAME=HEADING465-34></A>
<H3><A NAME=MARKER-21-303></A>Creating File Reference, Bundle, and Signature Resources</H3>
 <A NAME=MARKER-2-65></A>The file reference (<CODE>'FREF'</CODE>), bundle (<CODE>'BNDL'</CODE>), and signature resources<A NAME=MARKER-2-56></A> work together to give your file a distinctive appearance on the desktop. The Finder uses these resources to display the icon for your monitors extension. <P>
 The file reference resource specifies the file type for a monitors extension (<CODE>'cdev'</CODE>), the local ID of your icon list resource, and an empty string. The local ID maps the monitors extension file type to the icon list resource that is assigned the same local ID in the bundle resource. <A HREF=#MARKER-9-308>Listing 8-23</A> shows the file reference resource for the SurfBoard monitors extension. <A NAME=MARKER-2-71></A> <A NAME=MARKER-2-307></A><P>
<B>Listing 8-23  <A NAME=MARKER-9-308></A>Rez input for a file reference resource of a monitors extension </B><P>
<PRE>
resource 'FREF' (128, purgeable) {
   'cdev', 0, &quot;&quot;
};
</PRE>
<DL>
<DT><B>Note</B>
<DD>If you provide the complete icon family, the Finder displays the appropriate member of the icon family according to the bit depth of the monitor.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 The Finder uses the signature resource with the bundle resource to establish the identity of your monitors extension. You define a signature resource as a string resource (that is, a resource of type <CODE>'STR '</CODE>) and specify as its resource type a unique four-character sequence that has the same value as your monitors extension's creator type. The signature resource contains a string that identifies your monitors extension; typically the string specifies the name, version number, and release date of the monitors extension. <P>
 A bundle (<CODE>'BNDL'</CODE>) resource associates all of the resources that the Finder uses for your monitors extension. It associates your monitors extension and its signature with its icon. The Finder requires the information in the bundle resource to display icons for your monitors extension. In the bundle resource, you must specify a local ID for your icon <BR>list resource that matches the local ID you assigned inside the corresponding file reference resource. In the bundle resource shown in <A HREF=#MARKER-9-309>Listing 8-24</A>, local ID 0 is assigned to the icon list resource with resource ID 128, mapping the icon defined for the SurfBoard monitors extension to the monitors extension file. <P>
<B>Listing 8-24  <A NAME=MARKER-9-309></A>Rez input for a bundle resource of a monitors extension</B><P>
<PRE>
resource 'BNDL' (128, purgeable) {
   'kcah',
   0,
   {
   'ICN#', {0, 128},
   'FREF', {0, 128}
   }
};
</PRE>
 (See the chapter "Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> for complete information on how to create file reference, signature, and bundle resources.)<P>
<A NAME=HEADING465-45></A>
<H3>Including a System Extension Resource</H3>
 A file that contains an extension to the Monitors control panel can contain a system extension resource of type <A NAME=MARKER-2-310></A><CODE>'INIT'</CODE>. If your <A NAME=MARKER-2-311></A>monitors extension file is in the Control Panels folder, the Extensions folder, or the base level of the System Folder, then the system software executes the system extension resource when the user starts or restarts the computer. <P>
 Although the system extension resource acts independently of other resources in the file, it should be related to the monitors extension.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-464.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-466.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Color Window Record(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING215></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-214.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-216.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-188.html"><B>Chapter 4 - Window Manager</B></A> / <A HREF="Toolbox-213.html"><B>Window Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-214.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING215-0></A>
<H3><A NAME=MARKER-9-259></A>The Color Window Record</H3>
 <A NAME=MARKER-2-260></A>The Window Manager maintains a window record or color window record for each window on the desktop.<P>
 The Window Manager supplies routines that let you access the window record as necessary. Your application seldom changes fields in the window record directly.<P>
 <A NAME=MARKER-14-261></A><A NAME=MARKER-14-262></A><A NAME=MARKER-14-263></A><A NAME=MARKER-2-264></A>The <CODE>CWindowRecord</CODE> data type defines the window record for a color window. <A NAME=MARKER-2-265></A>The <CODE>CWindowPeek</CODE> data type is a pointer to a color window record. The first field in <BR>the window record is in fact the record that describes the window's graphics port. <A NAME=MARKER-2-266></A>The <CODE>CWindowPtr</CODE> data type is defined as a pointer to the window's graphics port.<P>
 <A NAME=MARKER-14-267></A><A NAME=MARKER-14-268></A><A NAME=MARKER-14-269></A>When Color QuickDraw is not available, you can create monochrome windows using the parallel data types <A NAME=MARKER-2-270></A><CODE>WindowRecord<DFN>,</DFN></CODE> <A NAME=MARKER-2-271></A><CODE>WindowPeek<DFN>,</DFN></CODE> and <CODE><A NAME=MARKER-2-272></A>WindowPtr</CODE>, described in the next section, <A HREF=Toolbox-216.html#MARKER-9-297>"The Window Record."</A><A NAME=MARKER-2-273></A><P>
 For compatibility, the <CODE>WindowPtr</CODE> and <CODE>WindowPeek</CODE> data types can point to either a color window record or a monochrome window record. You use the <CODE>WindowPtr</CODE> data type to specify a window in most Window Manager routines, and you can use it to specify a graphics port in QuickDraw routines that take the <CODE>GrafPtr</CODE> data type. Note that you can access only the fields of the window's graphics port, not the rest of the window record, through the <CODE>WindowPtr</CODE> and <CODE>CWindowPtr</CODE> data types. You use the <CODE>WindowPeek</CODE> and <CODE>CWindowPeek</CODE> data types in low-level Window Manager routines <BR>and in your own routines that access window record fields beyond the graphics port.<P>
 The routines that manipulate color windows get color information from the window color tables and the auxiliary window record described in the sections <A HREF=Toolbox-218.html#MARKER-9-309>"The Window Color Table Record"</A> on <A HREF=Toolbox-218.html#MARKER-9-309>page 4-63</A> and <A HREF=Toolbox-219.html#MARKER-9-324>"The Auxiliary Window Record"</A> on <A HREF=Toolbox-219.html#MARKER-9-324>page 4-66</A>.<P>
<PRE>
TYPE  CWindowPtr  = ^CGrafPtr; 
      CWindowPeek = ^CWindowRecord;
TYPE  CWindowRecord =
   RECORD
      port:          CGrafPort;     {window's graphics port}
      windowKind:    Integer;       {class of the window}
      visible:       Boolean;       {visibility}
      hilited:       Boolean;       {highlighting}
      goAwayFlag:    Boolean;       {presence of close box}
      spareFlag:     Boolean;       {presence of zoom box}
      strucRgn:      RgnHandle;     {handle to structure region}
      contRgn:       RgnHandle;     {handle to content region}
      updateRgn:     RgnHandle;     {handle to update region}
      windowDefProc: Handle;        {handle to window definition }
                                    { function}
      dataHandle:    Handle;        {handle to window state }
                                    { data record}
      titleHandle:   StringHandle;  {handle to window title}
      titleWidth:    Integer;       {title width in pixels}
      controlList:   ControlHandle; {handle to control list}
      nextWindow:    CWindowPeek;   {pointer to next window }
                                    { record in window list}
      windowPic:     PicHandle;     {handle to optional picture}
      refCon:        LongInt;       {storage available to your }
                                    { application}
   END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-274></A>port</CODE>
<DD> The graphics port record that describes the graphics port in which the window is drawn.
<DT>
<DD> The graphics port record, which is documented in <I>Inside Macintosh: Imaging,</I> defines the rectangle in which drawing can occur, the window's visible region, the window's clipping region, and a collection of current drawing characteristics such as fill pattern, pen location, and pen size.
<DT><CODE><A NAME=MARKER-2-275></A>windowKind</CODE>
<DD> The class of window--that is, how the window was created.
<DT>
<DD> The Window Manager fills in this field when it creates the window record. It places a negative value in <CODE>windowKind</CODE> when the window <BR><BR><BR>was created by a desk accessory. (The value is the reference ID of the desk accessory.) This field can also contain one of two constants:
</DL>
<PRE>
               CONST
                  dialogKind  = 2;     {dialog or alert window}
                  userKind    = 8;     {window created by an }
                                       { application}
</PRE>
<DL>
<DT><A NAME=MARKER-13-276></A>
<DD> The value<A NAME=MARKER-2-235></A> <CODE>dialogKind</CODE> identifies all dialog or alert box windows, whether created by the system software or, indirectly through the Dialog Manager, by your application. The Dialog Manager uses this field to help it track dialog and alert box windows.
<DT><A NAME=MARKER-13-278></A>
<DD> The value <A NAME=MARKER-2-279></A><CODE>userKind</CODE> represents a window created directly by your application.
<DT><CODE><A NAME=MARKER-2-280></A>visible</CODE>
<DD> A Boolean value indicating whether or not the window is visible. If the window is visible, the Window Manager sets this field to <CODE>TRUE</CODE>; if not, <CODE>FALSE</CODE>. Visibility means only whether or not the window is to be displayed, not necessarily whether you can see it on the screen. (For example, a window that is completely covered by other windows can still be visible, even if the user cannot see it on the screen.)
<DT><CODE><A NAME=MARKER-2-236></A>hilited</CODE>
<DD> A Boolean value indicating whether the window is highlighted--that is, drawn with stripes in the title bar. Only the active window is ordinarily highlighted. When the window is highlighted, the <CODE>hilited</CODE> field contains <CODE>TRUE</CODE>; when not, <CODE>FALSE</CODE>.
<DT><CODE><A NAME=MARKER-2-237></A>goAwayFlag</CODE>
<DD> A Boolean value indicating whether the window has a close box.
<DT>
<DD> The Window Manager fills in this field when it creates the window according to the information in the <CODE>'WIND'</CODE> resource or the parameters passed to the function that creates the window.
<DT>
<DD> If the value of <CODE>goAwayFlag</CODE> is <CODE>TRUE</CODE>, and if the window type supports a close box, the Window Manager draws a close box when the window is highlighted.
<DT><CODE><A NAME=MARKER-2-283></A>spareFlag</CODE>
<DD> A Boolean value indicating whether the window type supports zooming. The Window Manager sets this field to <CODE>TRUE</CODE> if the window's type is one that includes a zoom box (<CODE>zoomDocProc</CODE>, <CODE>zoomNoGrow</CODE>, or even <CODE>modalDBoxProc + zoomDocProc</CODE>).
<DT><CODE><A NAME=MARKER-2-284></A>strucRgn</CODE>
<DD> A handle to the structure region, which is defined in global coordinates. The structure region is the entire screen area covered by the window--that is, both the window contents and the window frame.
<DT><CODE><A NAME=MARKER-2-285></A>contRgn</CODE>
<DD> A handle to the content region, which is defined in global coordinates. The content region is the part of the window that contains the document, dialog, or other data; the window controls; and the size box. 
<DT><CODE><A NAME=MARKER-2-286></A>updateRgn</CODE>
<DD> A handle to the update region, which is defined in global coordinates. The update region is the portion of the window that must be redrawn. It is maintained jointly by the Window Manager and your application. The update region excludes parts of the window that are covered by other windows.
<DT><CODE><A NAME=MARKER-2-287></A>windowDefProc</CODE>
<DD> A handle to the definition function that controls the window.
<DT>
<DD> There's no need for your application to access this field directly.
<DT>
<DD> In Macintosh models that use only 24-bit addressing, this field contains both a handle to the window's definition function and the window's variation code. If you need to know the variation code, regardless of the addressing mode, call the <CODE>GetWVariant</CODE> function.
<DT><CODE><A NAME=MARKER-2-288></A>dataHandle</CODE>
<DD> Usually a handle to a data area used by the window definition function.
<DT>
<DD> For zoomable windows, <CODE>dataHandle</CODE> contains a handle to the <CODE>WStateData</CODE> record, which contains the user state and standard state rectangles. The <CODE>WStateData</CODE> record is described in <A HREF=Toolbox-452.html#MARKER-2-299>"The Window State Data Record" beginning on page 4-62</A>.
<DT>
<DD> A window definition function that needs only 4 bytes of data can use the <CODE>dataHandle</CODE> field directly, instead of storing a handle to the data. The window definition function that handles rounded-corner windows, for example, stores the diameters of curvature in the <CODE>dataHandle</CODE> field.
<DT><CODE><A NAME=MARKER-2-289></A>titleHandle</CODE>
<DD> A handle to the string that defines the title of the window.
<DT><CODE><A NAME=MARKER-2-290></A>titleWidth</CODE>
<DD> The width, in pixels, of the window's title.
<DT><CODE><A NAME=MARKER-2-291></A>controlList</CODE>
<DD> A handle to the window's control list, which is used by the Control Manager. (See the chapter "Control Manager" in this book for a description of control lists.)
<DT><CODE><A NAME=MARKER-2-292></A>nextWindow</CODE>
<DD> A pointer to the next window in the window list, that is, the window behind this window on the desktop. In the window record for the last window on the desktop, <DFN>the <CODE>nextWindow</CODE></DFN> field is set <BR>to <CODE>NIL</CODE>.
<DT><CODE><A NAME=MARKER-2-240></A>windowPic</CODE>
<DD> A handle to a QuickDraw picture of the window's contents. The Window Manager initially sets the <CODE>windowPic</CODE> field to <CODE>NIL</CODE>. If you're using the window to display a stable image, you can use the<CODE> SetWindowPic</CODE> procedure to place a handle to the picture in this field. When the window's contents need updating, the Window Manager then redraws the contents itself instead of generating an update event.
<DT><CODE><A NAME=MARKER-2-294></A>refCon</CODE>
<DD> The window's reference value field, which is simply storage <BR>space available to your application for any purpose.<EM> The sample code in this chapter uses the refCon field to associate a window with the data it displays by storing a window type constant in <BR>the <CODE>refCon field of alert and dialog window records and a handle to a document record in the refCon field</CODE></EM> of a document <BR>window record. <A NAME=MARKER-2-295></A>
<DT><B>Note</B>
<DD>The close box, drag region, zoom box, and size box are not included in the window record because they don't necessarily have the formal data structure for regions as defined in QuickDraw. The window definition function determines where these regions are.<EM></EM><A NAME=MARKER-2-296></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-214.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-216.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

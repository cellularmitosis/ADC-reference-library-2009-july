<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>NSPersistentDocument Class Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="NSPersistentDocument Class Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001179" title="NSPersistentDocument"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../../../reference/Cocoa/index.html#//apple_ref/doc/uid/TP30001281-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../../../../../reference/Cocoa/idxDataManagement-date.html#//apple_ref/doc/uid/TP30001281-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">NSPersistentDocument Class Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/occ/cl/NSPersistentDocument" title="NSPersistentDocument"></a><a name="//apple_ref/doc/c_ref/NSPersistentDocument" title="NSPersistentDocument"></a><a name="//apple_ref/doc/uid/TP30001179-BAJFJJAF" title="NSPersistentDocument"></a><h1><a name="//apple_ref/doc/uid/TP30001179-BCIEIAGE" title="NSPersistentDocument Class Reference"></a>NSPersistentDocument Class Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span style="white-space: nowrap;">Inherits from</span></strong></td><td><div style="margin-bottom:1px"><a href="../../NSDocument_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDocument" target="_top">NSDocument</a> : <a href="../../../../Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/cl/NSObject" target="_top">NSObject</a></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Conforms to</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../../Protocols/NSUserInterfaceValidations_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSUserInterfaceValidations" target="_top">NSUserInterfaceValidations (NSDocument)</a></span><br/><span class="content_text"><a href="../../../../Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject" target="_top">NSObject (NSObject)</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px">/System/Library/Frameworks/<a href="../../../ObjC_classic/index.html#//apple_ref/doc/uid/20001093" target="_top">AppKit.framework</a></div></td></tr><tr><td scope="row"><strong>Availability</strong></td><td><div style="margin-bottom:1px"><div>Available in Mac OS X v10.4 and later.</div></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">NSPersistentDocument.h</span><br/></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Companion guides</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../../../../Conceptual/NSPersistentDocumentTutorial/index.html#//apple_ref/doc/uid/TP40001799" target="_top">NSPersistentDocument Core Data Tutorial</a></span><br/><span class="content_text"><a href="../../../../../Conceptual/Documents/index.html#//apple_ref/doc/uid/10000006i" target="_top">Document-Based Applications Overview</a></span><br/><span class="content_text"><a href="../../../../../Conceptual/CoreData/index.html#//apple_ref/doc/uid/TP40001075" target="_top">Core Data Programming Guide</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Related sample code</span></strong></td><td><div style="margin-bottom:1px"><div><span class="content_text"><a href="../../../../../../../samplecode/DepartmentAndEmployees/index.html#//apple_ref/doc/uid/DTS10004314" target="_top">Departments and Employees</a></span></div><div><span class="content_text"><a href="../../../../../../../samplecode/DerivedProperty/index.html#//apple_ref/doc/uid/DTS40007750" target="_top">DerivedProperty</a></span></div><div><span class="content_text"><a href="../../../../../../../samplecode/PersistentDocumentFileWrappers/index.html#//apple_ref/doc/uid/DTS40008763" target="_top">File Wrappers with Core Data Documents</a></span></div><div><span class="content_text"><a href="../../../../../../../samplecode/QTMetadataEditor/index.html#//apple_ref/doc/uid/DTS40007652" target="_top">QTMetadataEditor</a></span></div><div><span class="content_text"><a href="../../../../../../../samplecode/TwoManyControllers/index.html#//apple_ref/doc/uid/DTS10004234" target="_top">TwoManyControllers</a></span></div></div></td></tr></table></div><br/>


<a name="//apple_ref/doc/uid/TP30001179-221280" title="Overview"></a><h2>Overview</h2>

<p class="spaceabove">The <code>NSPersistentDocument</code> class is a subclass of <code>NSDocument</code> that is designed to easily integrate into the Core Data framework. It provides methods to access a document-wide <code>NSManagedObjectContext</code> object, and provides default implementations of methods to read and write files using the persistence framework. In a persistent document, the undo manager functionality is taken over by managed object context.</p>
<p>Standard document behavior is implemented as follows:</p>
<ul class="ul"><li class="li"><p>Opening a document invokes <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:">configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</a></code> with the new URL, and adds a store of the default type (XML). Objects are loaded from the persistent store on demand through the document’s context.</p></li>
<li class="li"><p>Saving a new document adds a store of the default type with the chosen URL and invokes save: on the context. For an existing document, a save just invokes <code><a href="../../../../CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/save:" target="_top">save:</a></code> on the context.</p></li>
<li class="li"><p>Save As for a new document, simply invokes save. For an opened document, migrates the persistent store to the new URL, and invokes <code><a href="../../../../CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSManagedObjectContext/save:" target="_top">save:</a></code> on the context.</p></li>
<li class="li"><p>Revert resets the document’s managed object context. Objects are subsequently loaded from the persistent store on demand, as with opening a new document.</p></li></ul>
<p>Note that <code>NSPersistentDocument</code> does not support some standard document behavior, in particular <code>NSPersistentDocument</code> does not support file wrappers. “Save To…” and Autosave are not directly supported—Core Data cannot save to a store and maintain the same changed state in the managed object context, all the while maintaining an unsaved stack as the current document.</p>
<p>By default an <code>NSPersistentDocument</code> instance creates its own ready-to-use persistence stack including managed object context, persistent object store coordinator and persistent store. There is a one-to-one mapping between the document and the backing object store. </p>
<p>You can customize the architecture of the persistence stack by overriding the methods <span class="content_text"><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectModel">managedObjectModel</a></span> and <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:">configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</a></code>. You might wish to do this, for example, to specify a particular managed object model.</p>




<a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_1" title="Tasks"></a><h2>Tasks</h2>
<a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_2" title="Managing the Persistence Objects"></a>
		<h3 class="tasks">Managing the Persistence Objects</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext">&#8211;&#xA0;managedObjectContext</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the managed object context for the receiver.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectModel">&#8211;&#xA0;managedObjectModel</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the receiver’s managed object model.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/setManagedObjectContext:">&#8211;&#xA0;setManagedObjectContext:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the receiver’s managed object context.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:">&#8211;&#xA0;configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Configures the receiver’s persistent store coordinator with the appropriate stores for a given URL.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/persistentStoreTypeForFileType:">&#8211;&#xA0;persistentStoreTypeForFileType:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the type of persistent store associated with the specified file type.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_3" title="Undo Support"></a>
		<h3 class="tasks">Undo Support</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/hasUndoManager">&#8211;&#xA0;hasUndoManager</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns <code>YES</code>.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/setHasUndoManager:">&#8211;&#xA0;setHasUndoManager:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Overridden to be a no-op.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/setUndoManager:">&#8211;&#xA0;setUndoManager:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Overridden to be a no-op.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/isDocumentEdited">&#8211;&#xA0;isDocumentEdited</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a Boolean value that indicates whether the receiver’s managed object context, or editors registered with the context, have uncommitted changes.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_4" title="Document Content Management"></a>
		<h3 class="tasks">Document Content Management</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/readFromURL:ofType:error:">&#8211;&#xA0;readFromURL:ofType:error:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the contents of the receiver by reading from a file of a given type located by a given URL. '/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/revertToContentsOfURL:ofType:error:">&#8211;&#xA0;revertToContentsOfURL:ofType:error:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Overridden to clean up the managed object context and controllers during a revert.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/writeToURL:ofType:forSaveOperation:originalContentsURL:error:">&#8211;&#xA0;writeToURL:ofType:forSaveOperation:originalContentsURL:error:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Saves changes in the document’s managed object context and saves the document’s persistent store to a given URL. '/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_5" title="Deprecated"></a>
		<h3 class="tasks">Deprecated</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                
			
		<li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:error:">&#8211;&#xA0;configurePersistentStoreCoordinatorForURL:ofType:error:</a></code>&#032;&#032;<font color="red">Deprecated in Mac OS X v10.5</font>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Configures the receiver’s persistent store coordinator for a given URL and document type. &#032;(<font color="red">Deprecated.</font>&#032;Use <code>configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</code> instead.)'/>
                    
                </span></li></ul>


<a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_6" title="Instance Methods"></a><h2>Instance Methods</h2><a name="//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:" title="configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:"></a><a name="//apple_ref/doc/uid/TP30001179-SW1" title="configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_9"></a><h3 class="verytight">configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</h3><p class="spaceabove">Configures the receiver’s persistent store coordinator with the appropriate stores for a given URL.</p><p class="spaceabovemethod">- (BOOL)configurePersistentStoreCoordinatorForURL:(<a href="../../../../Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURL" target="_top">NSURL</a> *)<em>url</em>
ofType:(<a href="../../../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>fileType</em>
modelConfiguration:(<a href="../../../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>configuration</em>
storeOptions:(<a href="../../../../Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDictionary" target="_top">NSDictionary</a> *)<em>storeOptions</em>
error:(<a href="../../../../Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSError" target="_top">NSError</a> **)<em>error</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>url</em></dt><dd><p>An URL that specifies the location of the document's store.</p></dd><dt><em>fileType</em></dt><dd><p>The document type.</p></dd><dt><em>configuration</em></dt><dd><p>The name of the managed object model configuration to use. (The managed object model is associated with the persistent store coordinator.) Pass <code>nil</code> if you do not want to specify a configuration.</p></dd><dt><em>storeOptions</em></dt><dd><p>Options for the store. See “Store Options” in <code><a href="../../../../CoreDataFramework/Classes/NSPersistentStoreCoordinator_Class/Reference/NSPersistentStoreCoordinator.html#//apple_ref/occ/cl/NSPersistentStoreCoordinator" target="_top">NSPersistentStoreCoordinator</a></code> for possible values.</p></dd><dt><em>error</em></dt><dd><p>If the method does not complete successfully, upon return contains an <code>NSError</code> object that describes the problem.</p></dd></dl><h5 class="tight">Return Value</h5><p><code>YES</code> if the method completes successfully, otherwise <code>NO</code>.</p><h5 class="tight">Discussion</h5><p>This method is invoked automatically when an existing document is opened. You override this method to customize creation of a persistent store for a given document or store type. You can retrieve the persistent store coordinator with the following code:</p><div class="codesample"><table><tr><td scope="row"><pre>[[self managedObjectContext] persistentStoreCoordinator];<span></span></pre></td></tr></table></div><p>You can override this method to create the store to save to or load from (invoked from within the other <code>NSDocument</code> methods to read/write files), which gives developers the ability to load/save from/to different persistent store types (default type is XML).</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code><a name="//apple_ref/occ/instm/NSPersistentDocument/hasUndoManager" title="hasUndoManager"></a><a name="//apple_ref/doc/uid/TP30001179-CJBFGHEB" title="hasUndoManager"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_10"></a><h3 class="verytight">hasUndoManager</h3>
<p class="spaceabove">Returns <code>YES</code>.</p><p class="spaceabovemethod">- (BOOL)hasUndoManager</p><h5 class="tight">Return Value</h5><p><code>YES</code>.</p>
<h5 class="tight">Special Considerations</h5><p>You should not override this method.</p>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext">&#8211;&#xA0;managedObjectContext</a></code></li></ul><a name="//apple_ref/occ/instm/NSPersistentDocument/isDocumentEdited" title="isDocumentEdited"></a><a name="//apple_ref/doc/uid/TP30001179-CJBHDDCC" title="isDocumentEdited"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_11"></a><h3 class="verytight">isDocumentEdited</h3>
<p class="spaceabove">Returns a Boolean value that indicates whether the receiver’s managed object context, or editors registered with the context, have uncommitted changes.</p><p class="spaceabovemethod">- (BOOL)isDocumentEdited</p><h5 class="tight">Return Value</h5><p><code>YES</code> if the receiver’s managed object context, or editors registered with the context, have uncommitted changes, otherwise <code>NO</code>.</p>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext">&#8211;&#xA0;managedObjectContext</a></code></li></ul><a name="//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext" title="managedObjectContext"></a><a name="//apple_ref/doc/uid/TP30001179-BAJHIAFC" title="managedObjectContext"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_12"></a><h3 class="verytight">managedObjectContext</h3>
<p class="spaceabove">Returns the managed object context for the receiver.</p><p class="spaceabovemethod">- (<a href="../../../../CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSManagedObjectContext" target="_top">NSManagedObjectContext</a> *)managedObjectContext</p><h5 class="tight">Return Value</h5><p>The managed object context for the receiver. </p>
<h5 class="tight">Discussion</h5><p>If a managed object context for the receiver does not exist, one is created automatically. You override this method to customize the creation of the persistence stack.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectModel">&#8211;&#xA0;managedObjectModel</a></code></li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../../../samplecode/DepartmentAndEmployees/index.html#//apple_ref/doc/uid/DTS10004314" target="_top">Departments and Employees</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../../../samplecode/QTMetadataEditor/index.html#//apple_ref/doc/uid/DTS40007652" target="_top">QTMetadataEditor</a></span></li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code><a name="//apple_ref/occ/instm/NSPersistentDocument/managedObjectModel" title="managedObjectModel"></a><a name="//apple_ref/doc/uid/TP30001179-CJBJBIHA" title="managedObjectModel"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_13"></a><h3 class="verytight">managedObjectModel</h3>
<p class="spaceabove">Returns the receiver’s managed object model.</p><p class="spaceabovemethod">- (id)managedObjectModel</p><h5 class="tight">Return Value</h5><p>The receiver’s managed object model, used to configure the receiver’s persistent store coordinator.</p>
<h5 class="tight">Discussion</h5><p>By default the Core Data framework creates a merged model from all models in the application bundle (<code>[NSBundle mainBundle]</code>). You can override this method to return a specific model to use to create persistent stores. A typical implementation might include code similar to the following fragment:</p>
<div class="codesample"><table><tr><td scope="row"><pre>NSBundle *bundle = [NSBundle bundleForClass:[self class]];<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *path = [bundle pathForResource:@"MyModel" ofType:@"mom"];<span></span></pre></td></tr><tr><td scope="row"><pre>NSURL *url = [NSURL fileURLWithPath:path];<span></span></pre></td></tr><tr><td scope="row"><pre>NSManagedObjectModel *model = [[NSManagedObjectModel alloc] initWithContentsOfURL:url];<span></span></pre></td></tr></table></div><p>Normally you would cache the model as an instance variable. If all your document instances use the same model, however, you can increase the efficiency of this method by caching a single instance, as illustrated in the following example. </p><div class="codesample"><table><tr><td scope="row"><pre>- (id)managedObjectModel {<span></span></pre></td></tr><tr><td scope="row"><pre>    static id sharedModel = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    if (sharedModel == nil) {<span></span></pre></td></tr><tr><td scope="row"><pre>        sharedModel = [[super managedObjectModel] retain];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return sharedModel;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><h5 class="tight">Special Considerations</h5><p>In applications built on Mac OS X v10.4, by default the Core Data framework creates a merged model from all the models found in the application bundle <em>and the frameworks against which the application is linked</em>.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext">&#8211;&#xA0;managedObjectContext</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code><a name="//apple_ref/occ/instm/NSPersistentDocument/persistentStoreTypeForFileType:" title="persistentStoreTypeForFileType:"></a><a name="//apple_ref/doc/uid/TP30001179-CJBDBBEA" title="persistentStoreTypeForFileType:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_14"></a><h3 class="verytight">persistentStoreTypeForFileType:</h3>
<p class="spaceabove">Returns the type of persistent store associated with the specified file type.</p><p class="spaceabovemethod">- (<a href="../../../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)persistentStoreTypeForFileType:(<a href="../../../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>fileType</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>fileType</em></dt><dd><p>A document file type.</p></dd></dl><h5 class="tight">Return Value</h5><p>The type of persistent store associated with <em>fileType</em>. For possible values, see <code><a href="../../../../CoreDataFramework/Classes/NSPersistentStoreCoordinator_Class/Reference/NSPersistentStoreCoordinator.html#//apple_ref/occ/cl/NSPersistentStoreCoordinator" target="_top">NSPersistentStoreCoordinator</a></code>.</p><h5 class="tight">Discussion</h5><p>You set the persistent store type in the application's property list (see <span class="content_text"><a href="../../../../../Conceptual/Documents/Concepts/DocTypePList.html#//apple_ref/doc/uid/20000024" target="_top">Storing Document Types Information in a Property List</a></span>).</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:">&#8211;&#xA0;configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code><a name="//apple_ref/occ/instm/NSPersistentDocument/readFromURL:ofType:error:" title="readFromURL:ofType:error:"></a><a name="//apple_ref/doc/uid/TP30001179-BBCICGEF" title="readFromURL:ofType:error:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_15"></a><h3 class="verytight">readFromURL:ofType:error:</h3>
<p class="spaceabove">Sets the contents of the receiver by reading from a file of a given type located by a given URL. </p><p class="spaceabovemethod">- (BOOL)readFromURL:(<a href="../../../../Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURL" target="_top">NSURL</a> *)<em>absoluteURL</em>
ofType:(<a href="../../../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>typeName</em>
error:(<a href="../../../../Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSError" target="_top">NSError</a> **)<em>outError</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>absoluteURL</em></dt><dd><p>An URL that specifies the location from which to read the document.</p></dd><dt><em>typeName</em></dt><dd><p>The document type at <em>absoluteURL</em>.</p></dd><dt><em>outError</em></dt><dd><p>If <em>absoluteURL</em> is not valid, or the store at <em>absoluteURL</em> cannot be read, upon return contains an <code>NSError</code> object that describes the problem</p></dd></dl>
<h5 class="tight">Return Value</h5><p><code>YES</code> if <em>absoluteURL</em> is valid and the file is read correctly, otherwise <code>NO</code>. </p><h5 class="tight">Discussion</h5><p>This method sets the URL for the persistent object store associated with the receiver’s managed object context to <em>absoluteURL</em>.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/revertToContentsOfURL:ofType:error:">&#8211;&#xA0;revertToContentsOfURL:ofType:error:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/writeToURL:ofType:forSaveOperation:originalContentsURL:error:">&#8211;&#xA0;writeToURL:ofType:forSaveOperation:originalContentsURL:error:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:">&#8211;&#xA0;configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code><a name="//apple_ref/occ/instm/NSPersistentDocument/revertToContentsOfURL:ofType:error:" title="revertToContentsOfURL:ofType:error:"></a><a name="//apple_ref/doc/uid/TP30001179-BCIBAIBJ" title="revertToContentsOfURL:ofType:error:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_16"></a><h3 class="verytight">revertToContentsOfURL:ofType:error:</h3>
<p class="spaceabove">Overridden to clean up the managed object context and controllers during a revert.</p><p class="spaceabovemethod">- (BOOL)revertToContentsOfURL:(<a href="../../../../Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURL" target="_top">NSURL</a> *)<em>inAbsoluteURL</em>
ofType:(<a href="../../../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>inTypeName</em>
error:(<a href="../../../../Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSError" target="_top">NSError</a> **)<em>outError</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>inAbsoluteURL</em></dt><dd><p>An URL object that specifies the location of the file to which to revert.</p></dd><dt><em>inTypeName</em></dt><dd><p>The type of the document at <em>inAbsoluteURL</em>.</p></dd><dt><em>outError</em></dt><dd><p>If the method fails to complete correctly, upon return contains an <code>NSError</code> object that describes the problem.</p></dd></dl><h5 class="tight">Return Value</h5><p><code>YES</code> if the method completes correctly, otherwise <code>NO</code>.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/readFromURL:ofType:error:">&#8211;&#xA0;readFromURL:ofType:error:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/writeToURL:ofType:forSaveOperation:originalContentsURL:error:">&#8211;&#xA0;writeToURL:ofType:forSaveOperation:originalContentsURL:error:</a></code></li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../../../samplecode/QTMetadataEditor/index.html#//apple_ref/doc/uid/DTS40007652" target="_top">QTMetadataEditor</a></span></li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code><a name="//apple_ref/occ/instm/NSPersistentDocument/setHasUndoManager:" title="setHasUndoManager:"></a><a name="//apple_ref/doc/uid/TP30001179-CJBFFIIJ" title="setHasUndoManager:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_17"></a><h3 class="verytight">setHasUndoManager:</h3>
<p class="spaceabove">Overridden to be a no-op.</p><p class="spaceabovemethod">- (void)setHasUndoManager:(BOOL)<em>flag</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>flag</em></dt><dd><p>This value is ignored.</p></dd></dl>
<h5 class="tight">Special Considerations</h5><p>You should not override this method. The persistent document uses the managed object context’s undo manager.</p>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext">&#8211;&#xA0;managedObjectContext</a></code></li></ul><a name="//apple_ref/occ/instm/NSPersistentDocument/setManagedObjectContext:" title="setManagedObjectContext:"></a><a name="//apple_ref/doc/uid/TP30001179-BAJCBJIA" title="setManagedObjectContext:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_18"></a><h3 class="verytight">setManagedObjectContext:</h3>
<p class="spaceabove">Sets the receiver’s managed object context.</p><p class="spaceabovemethod">- (void)setManagedObjectContext:(<a href="../../../../CoreDataFramework/Classes/NSManagedObjectContext_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSManagedObjectContext" target="_top">NSManagedObjectContext</a> *)<em>managedObjectContext</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>managedObjectContext</em></dt><dd><p>The managed object context for the receiver.</p></dd></dl>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext">&#8211;&#xA0;managedObjectContext</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectModel">&#8211;&#xA0;managedObjectModel</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code><a name="//apple_ref/occ/instm/NSPersistentDocument/setUndoManager:" title="setUndoManager:"></a><a name="//apple_ref/doc/uid/TP30001179-CJBJEIAF" title="setUndoManager:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_19"></a><h3 class="verytight">setUndoManager:</h3>
<p class="spaceabove">Overridden to be a no-op.</p><p class="spaceabovemethod">- (void)setUndoManager:(<a href="../../../../Foundation/Classes/NSUndoManager_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSUndoManager" target="_top">NSUndoManager</a> *)<em>undoManager</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>undoManager</em></dt><dd><p>This value is ignored.</p></dd></dl>
<h5 class="tight">Special Considerations</h5><p>You should not override this method. The persistent document uses the managed object context’s undo manager.</p>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext">&#8211;&#xA0;managedObjectContext</a></code></li></ul><a name="//apple_ref/occ/instm/NSPersistentDocument/writeToURL:ofType:forSaveOperation:originalContentsURL:error:" title="writeToURL:ofType:forSaveOperation:originalContentsURL:error:"></a><a name="//apple_ref/doc/uid/TP30001179-CJBIFGEA" title="writeToURL:ofType:forSaveOperation:originalContentsURL:error:"></a><a name="//apple_ref/doc/uid/TP30001179-DontLinkElementID_20"></a><h3 class="verytight">writeToURL:ofType:forSaveOperation:originalContentsURL:error:</h3>
<p class="spaceabove">Saves changes in the document’s managed object context and saves the document’s persistent store to a given URL. </p><p class="spaceabovemethod">- (BOOL)writeToURL:(<a href="../../../../Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURL" target="_top">NSURL</a> *)<em>absoluteURL</em>
ofType:(<a href="../../../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>typeName</em>
forSaveOperation:(<a href="../../NSDocument_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSaveOperationType" target="_top">NSSaveOperationType</a>)<em>saveOperation</em>
originalContentsURL:(<a href="../../../../Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURL" target="_top">NSURL</a> *)<em>absoluteOriginalContentsURL</em>
error:(<a href="../../../../Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSError" target="_top">NSError</a> **)<em>error</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>absoluteURL</em></dt><dd><p>An URL that specifies the new location for the document store. It must not be a relative URL.</p></dd><dt><em>typeName</em></dt><dd><p>The document type.</p></dd><dt><em>saveOperation</em></dt><dd><p>The save operation type. See the "Constants" section in <code><a href="../../NSDocument_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDocument" target="_top">NSDocument</a></code> for possible values.</p></dd><dt><em>absoluteOriginalContentsURL</em></dt><dd><p>An URL that specifies the location of the original document store.</p></dd><dt><em>error</em></dt><dd><p>If the save fails to complete correctly, upon return contains an <code>NSError</code> object that describes the problem.</p></dd></dl>
<h5 class="tight">Return Value</h5><p><code>YES</code> if the save completes correctly, otherwise <code>NO</code>.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.4 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/readFromURL:ofType:error:">&#8211;&#xA0;readFromURL:ofType:error:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/revertToContentsOfURL:ofType:error:">&#8211;&#xA0;revertToContentsOfURL:ofType:error:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSPersistentDocument/configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:">&#8211;&#xA0;configurePersistentStoreCoordinatorForURL:ofType:modelConfiguration:storeOptions:error:</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSPersistentDocument.h</code>












        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../DeprecationAppendix/AppendixADeprecatedAPI.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-02-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Reference/ApplicationKit/Classes/NSPersistentDocument_Class/Reference/Reference.html%3Fid%3DTP40004085-2.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Reference/ApplicationKit/Classes/NSPersistentDocument_Class/Reference/Reference.html%3Fid%3DTP40004085-2.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Reference/ApplicationKit/Classes/NSPersistentDocument_Class/Reference/Reference.html%3Fid%3DTP40004085-2.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
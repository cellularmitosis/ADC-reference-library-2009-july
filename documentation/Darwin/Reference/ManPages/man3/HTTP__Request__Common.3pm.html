<html><head><title>Mac OS X
 Manual Page For HTTP::Request::Common(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/HTTP::Request::Common" title="Mac OS X
 Manual Page for HTTP::Request::Common(3pm)"><a name="//apple_ref/doc/man/3/HTTP::Request::Common" title="Mac OS X
 Manual Page for HTTP::Request::Common(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/HTTP::Request::Common"; name=HTTP::Request::Common(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
HTTP::Request::Common(3)             User Contributed Perl Documentation            HTTP::Request::Common(3)



<b>NAME</b>
       HTTP::Request::Common - Construct common HTTP::Request objects

<b>SYNOPSIS</b>
         use HTTP::Request::Common;
         $ua = LWP::UserAgent-&gt;new;
         $ua-&gt;request(GET '<a href="http://www.sn.no/">http://www.sn.no/</a>');
         $ua-&gt;request(POST '<a href="http://somewhere/foo">http://somewhere/foo</a>', [foo =&gt; bar, bar =&gt; foo]);

<b>DESCRIPTION</b>
       This module provide functions that return newly created "HTTP::Request" objects.  These functions are
       usually more convenient to use than the standard "HTTP::Request" constructor for the most common
       requests.  The following functions are provided:

       GET $url
       GET $url, Header =&gt; Value,...
           The <u>GET()</u> function returns an "HTTP::Request" object initialized with the "GET" method and the
           specified URL.  It is roughly equivalent to the following call

             HTTP::Request-&gt;new(
                GET =&gt; $url,
                HTTP::Headers-&gt;new(Header =&gt; Value,...),
             )

           but is less cluttered.  What is different is that a header named "Content" will initialize the
           content part of the request instead of setting a header field.  Note that GET requests should
           normally not have a content, so this hack makes more sense for the <u>PUT()</u> and <u>POST()</u> functions
           described below.

           The get(...) method of "LWP::UserAgent" exists as a shortcut for $ua-&gt;request(GET ...).

       HEAD $url
       HEAD $url, Header =&gt; Value,...
           Like <u>GET()</u> but the method in the request is "HEAD".

           The head(...)  method of "LWP::UserAgent" exists as a shortcut for $ua-&gt;request(HEAD ...).

       PUT $url
       PUT $url, Header =&gt; Value,...
       PUT $url, Header =&gt; Value,..., Content =&gt; $content
           Like <u>GET()</u> but the method in the request is "PUT".

       POST $url
       POST $url, Header =&gt; Value,...
       POST $url, $form_ref, Header =&gt; Value,...
       POST $url, Header =&gt; Value,..., Content =&gt; $form_ref
           This works mostly like <u>GET()</u> with "POST" as the method, but this function also takes a second
           optional array or hash reference parameter ($form_ref).  This argument can be used to pass
           key/value pairs for the form content.  By default we will initialize a request using the
           "application/x-www-form-urlencoded" content type.  This means that you can emulate a HTML &lt;form&gt;
           POSTing like this:

             POST '<a href="http://www.perl.org/survey.cgi">http://www.perl.org/survey.cgi</a>',
                  [ name   =&gt; 'Gisle Aas',
                    email  =&gt; 'gisle@aas.no',
                    gender =&gt; 'M',
                    born   =&gt; '1964',
                    perc   =&gt; '3%',
                  ];

           This will create a HTTP::Request object that looks like this:

             POST <a href="http://www.perl.org/survey.cgi">http://www.perl.org/survey.cgi</a>
             Content-Length: 66
             Content-Type: application/x-www-form-urlencoded

             name=Gisle%20Aas&amp;email=gisle%40aas.no&amp;gender=M&amp;born=1964&amp;perc=3%25

           Multivalued form fields can be specified by either repeating the field name or by passing the
           value as an array reference.

           The POST method also supports the "multipart/form-data" content used for <u>Form-based</u> <u>File</u> <u>Upload</u>
           as specified in RFC 1867.  You trigger this content format by specifying a content type of
           'form-data' as one of the request headers.  If one of the values in the $form_ref is an array
           reference, then it is treated as a file part specification with the following interpretation:

             [ $file, $filename, Header =&gt; Value... ]
             [ undef, $filename, Header =&gt; Value,..., Content =&gt; $content ]

           The first value in the array ($file) is the name of a file to open.  This file will be read and
           its content placed in the request.  The routine will croak if the file can't be opened.  Use an
           "undef" as $file value if you want to specify the content directly with a "Content" header.  The
           $filename is the filename to report in the request.  If this value is undefined, then the
           basename of the $file will be used.  You can specify an empty string as $filename if you want to
           suppress sending the filename when you provide a $file value.

           If a $file is provided by no "Content-Type" header, then "Content-Type" and "Content-Encoding"
           will be filled in automatically with the values returned by <u>LWP::MediaTypes::guess</u><b>_</b><u>media</u><b>_</b><u>type()</u>

           Sending my <u>~/.profile</u> to the survey used as example above can be achieved by this:

             POST '<a href="http://www.perl.org/survey.cgi">http://www.perl.org/survey.cgi</a>',
                  Content_Type =&gt; 'form-data',
                  Content      =&gt; [ name  =&gt; 'Gisle Aas',
                                    email =&gt; 'gisle@aas.no',
                                    gender =&gt; 'M',
                                    born   =&gt; '1964',
                                    init   =&gt; ["$ENV{HOME}/.profile"],
                                  ]

           This will create a HTTP::Request object that almost looks this (the boundary and the content of
           your <u>~/.profile</u> is likely to be different):

             POST <a href="http://www.perl.org/survey.cgi">http://www.perl.org/survey.cgi</a>
             Content-Length: 388
             Content-Type: multipart/form-data; boundary="6G+f"

             --6G+f
             Content-Disposition: form-data; name="name"

             Gisle Aas
             --6G+f
             Content-Disposition: form-data; name="email"

             gisle@aas.no
             --6G+f
             Content-Disposition: form-data; name="gender"

             M
             --6G+f
             Content-Disposition: form-data; name="born"

             1964
             --6G+f
             Content-Disposition: form-data; name="init"; filename=".profile"
             Content-Type: text/plain

             PATH=/local/perl/bin:$PATH
             export PATH

             --6G+f--

           If you set the $DYNAMIC_FILE_UPLOAD variable (exportable) to some TRUE value, then you get back a
           request object with a subroutine closure as the content attribute.  This subroutine will read the
           content of any files on demand and return it in suitable chunks.  This allow you to upload
           arbitrary big files without using lots of memory.  You can even upload infinite files like
           <u>/dev/audio</u> if you wish; however, if the file is not a plain file, there will be no Content-Length
           header defined for the request.  Not all servers (or server applications) like this.  Also, if
           the <!-- a -->file(s)<!-- /a --> change in size between the time the Content-Length is calculated and the time that
           the last chunk is delivered, the subroutine will "Croak".

           The post(...)  method of "LWP::UserAgent" exists as a shortcut for $ua-&gt;request(POST ...).

<b>SEE</b> <b>ALSO</b>
       HTTP::Request, LWP::UserAgent

<b>COPYRIGHT</b>
       Copyright 1997-2004, Gisle Aas

       This library is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself.



perl v5.8.8                                      2004-11-15                         HTTP::Request::Common(3)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/HTTP__Request__Common.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/HTTP__Request__Common.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/HTTP__Request__Common.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

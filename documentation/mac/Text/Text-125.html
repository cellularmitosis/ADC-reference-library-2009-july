<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of TextEdit(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING125></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-124.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-126.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-40.html"><B>Chapter 2 - TextEdit</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING125-0></A>
<H1><A NAME=MARKER-21-575></A><A NAME=MARKER-21-576></A><A NAME=MARKER-9-577></A>Summary of TextEdit</H1>
<A NAME=HEADING125-1></A>
<H2>Pascal Summary</H2>
<A NAME=HEADING125-2></A>
<H3>Constants</H3>
<PRE>
CONST
      {Gestalt returned values} 

      gestaltUndefSelectorErr {Systems before 6.0.4, multistyled TextEdit }
                              { on all hardware} 
      gestaltTE1 = 1;         {System 6.0.4 Roman script system on }
                              { IIci-family hardware}
      gestaltTE2 = 2;         {Script Manager-compatible. System 6.0.4 }
                              { non-Roman script systems on all }
                              { IIci family hardware.New measuring hook }
                              { nWIDTHHook.}
      gestaltTE3 = 3;         {Script Manager-compatible. System 6.0.4 }
                              { non-Roman script systems on all non-IIci }
                              { family hardware.}
      gestaltTE4 = 4;         {Script Manager-compatible. System 6.0.5 on }
                              { all hardware. New TEFeatureFlag function.}
      gestaltTE5 = 5;         {Script Manager-compatible. System 7.0 on all }
                              {hardware}
      {alignment styles: new constant names for the align parameter }
      { of TESetAlignment and TETextBox} 
      teFlushDefault =  0;          {flush according to system direction }
      teCenter       =  1;          {centered for all scripts }
      teFlushRight   = -1;          {flush right for all scripts}
      teFlushLeft    = -2;          {flush left for all scripts}
      {alignment styles; old constant names supported for }
      { backward-compatibility}
      teJustLeft           =  0; 
      teJustCenter         =  1;
      teJustRight          = -1;
      teForceLeft          = -2;

      {values for TEFeatureFlag feature parameter}
      teFAutoScroll        = 0;        {automatic scrolling
      teFAutoScr           = 0;        {old constant for automatic scrolling}
      teFTextBuffering     = 1;        {text buffering}
      teFOutlineHilite     = 2;        {outline highlighting}
      teFInlineInput       = 3;        {inline input}
      teFUseTextServices   = 4;        {use inline input service}

      {values for TEFeatureFlag action parameter}
      teBitClear           = 0;        {clear TEFeatureFlag features}
      teBitSet             = 1;        {set TEFeatureFlag features}
      teBitTest            = -1;       {test TEFeatureFlag features: return }
                                       { the current setting}
         
      {selectors for identifying the routine that called TEFindWord }
      teWordSelect         = 4;        {called for determining new }
                                       { line breaks}
      teWordDrag           = 8;        {called for extending word selection}
      teFromFind           = 12;       {called for word selection}
      teFromRecal          = 16;       {called for word breaking in line }
                                       { recalculation}
         
      {values for TESetStyle/TEContinuousStyle/TEReplaceStyle modes}
      doFont               = 1;        {set font family number}
      doFace               = 2;        {set character style}
      doSize               = 4;        {set type size}
      doColor              = 8;        {set color}
      doAll                = 15;       {set all attributes}
      addSize              = 16;       {adjust type size }
      doToggle             = 32;       {toggle mode for TESetStyle}
      {selectors for TECustomHook}
      intEOLHook           = 0;        {end-of-line hook}
      intDrawHook          = 1;        {drawing hook}
      intWidthHook         = 2;        {width measurement hook}
      intHitTestHook       = 3;     {hit-test hook}
      intNWidthHook        = 6;     {nWIDTHHook measurement hook}
      intTextWidthHook     = 7;     {TextWidth measurement hook}
</PRE>
<A NAME=HEADING125-7></A>
<H3>Data Types</H3>
<PRE>
TYPE  TERec = 
      RECORD         
         destRect:   Rect;       {destination rectangle}
         viewRect:   Rect;       {view rectangle}
         selRect:    Rect;       {the selection rectangle}
         lineHeight: Integer;    {used for vertical spacing of lines}
         fontAscent: Integer;    {used for caret/highlighting position}
         selPoint:   Point;      {point selected with the mouse}
         selStart:   Integer;    {start of selection range}
         selEnd:     Integer;    {end of selection range}
         active:     Integer;    {set when record is }
                                 { activated/deactivated}
         wordBreak:  ProcPtr;    {word break hook}
         clikLoop:   ProcPtr;    {click loop hook}
         clickTime:  LongInt;    {used internally}
         clickLoc:   Integer;    {used internally}
         caretTime:  LongInt;    {used internally}
         caretState: Integer;    {used internally}
         just:       Integer;    {alignment of text}
         teLength:   Integer;    {length of text}
         hText:      Handle;     {handle to text to be edited}
         hDispatchRec: LongInt;  {handle to TextEdit } 
                                 { dispatch record}
         clikStuff:  Integer;    {used internally}
         crOnly:     Integer;    {if &lt;0, new line at Return only}
         txFont:     Integer;    {text font}
         txFace:     Style;      {character style; unpacked byte}
         txMode:     Integer;    {pen mode}
         txSize:     Integer;    {value indicates either a multistyled }
                                 { edit record or a font size}
         inPort:     GrafPtr;    {a pointer to the grafPort for this TERec}
         highHook:   ProcPtr;    {used for text highlighting }
         caretHook:  ProcPtr;    {used for the caret appearance}
         nLines:     Integer;    {number of lines}
         lineStarts: ARRAY[0..16000] OF Integer;
                                 {positions of line starts}
      END;

         TEPtr    = ^TERec;
         TEHandle = ^TEPtr;

         Chars= PACKED ARRAY[0..32000] OF CHAR;

         CharsHandle = ^CharsPtr;
         CharsPtr    = ^Chars;

      TEStyleRec =
      RECORD
         nRuns:      Integer;       {number of style runs}
         nStyles:    Integer;       {size of style table}
         styleTab:   STHandle;      {handle to style table}
         lhTab:      LHHandle;      {handle to line-height table}
         teRefCon:   LongInt;       {reserved for application use}
         nullStyle:  NullStHandle;  {handle to style set at }
                                    { null selection}
         runs:       ARRAY [0..8000] OF StyleRun;
                                    {ARRAY [0..8000] OF StyleRun}
      END;
      TEStylePtr = ^TEStyleRec;
      TEStyleHandle = ^TEStylePtr;
      StyleRun =
      RECORD
         startChar:  Integer;       {starting character position}
         styleIndex: Integer;       {index in style table}
      END;
      STElement =
      RECORD
         stCount:    Integer;       {number of runs in this style}
         stHeight:   Integer;       {line height}
         stAscent:   Integer;       {font ascent}
         stFont:     Integer;       {font (family) number}
         stFace:     Style;         {character style}
         stSize:     Integer;       {size in points}
         stColor:    RGBColor;      {absolute RGB color}
      END;
      STPtr    = ^TEStyleTable;
      STHandle = ^STPtr;

      TEStyleTable = ARRAY [0..1776] OF STElement;

      LHElement = 
      RECORD
         lhHeight:      Integer;    {maximum height in line}
         lhAscent:      Integer;    {maximum ascent in line}
      END;

      LHPtr = ^LHTable;
      LHHandle = ^LHPtr;

      LHTable = ARRAY [0..8000] OF LHElement;
      ScrpSTElement = 
      RECORD
         scrpStartChar:       LongInt;    {offset to start of style}
         scrpHeight:          Integer;    {line height}
         scrpAscent:          Integer;    {font ascent}
         scrpFont:            Integer;    {font (family) number}
         scrpFace:            Style;      {character style}
         scrpSize:            Integer;    {size in points}
         scrpColor:           RGBColor;   {absolute (RGB) color}
      END;

      ScrpStyl2Tab = ARRAY[0..1600] OF ScrpSTElement;

      StScrpRec = 
      RECORD
         scrpNStyles:   Integer;          {number of styles in scrap}
         scrpStyleTab:  ScrpSTTable;      {table of styles for scrap}
      END;
      StScrpPtr = ^StScrpRec;
      StScrpHandle = ^StScrpPtr;

      NullStRec = 
      RECORD
         teReserved:          LongInt;    {reserved for future expansion}
         nullScrap:           StScrpHandle;  {handle to scrap style table}
      END;

      NullStPtr = ^NullStRec;
      NullStHandle = ^NullStPtr;

      TextStyle = 
      RECORD
         tsFont:  Integer;    {font (family) number}
         tsFace:  Style;      {character Style}
         tsSize:  Integer;    {size in points}
         tsColor: RGBColor;   {absolute (RGB) color}
      END;

      TextStylePtr = ^TextStyle;
      TextStyleHandle = ^TextStylePtr;
      TEIntHook = Integer;
</PRE>
<A NAME=HEADING125-18></A>
<H3>Routines</H3>
<A NAME=HEADING125-19></A>
<H4>Initializing TextEdit, Creating an Edit Record, and Disposing of an Edit Record</H4>
<PRE>
PROCEDURE TEInit;
FUNCTION TEStyleNew          (destRect: Rect; viewRect: Rect): TEHandle;
FUNCTION TENew               (destRect, viewRect: Rect): TEHandle;
PROCEDURE TEDispose          (hTE: TEHandle);
</PRE>
<A NAME=HEADING125-24></A>
<H4>Activating and Deactivating an Edit Record</H4>
<PRE>
PROCEDURE TEActivate         (hTE: TEHandle);
PROCEDURE TEDeactivate       (hTE: TEHandle); 
</PRE>
<A NAME=HEADING125-27></A>
<H4>Setting and Getting an Edit Record's Text and Character Attribute Information</H4>
<PRE>
PROCEDURE TEKey              (key: Char; hTE: TEHandle);
PROCEDURE TESetText          (text: Ptr; length: LongInt; hTE: TEHandle); 
FUNCTION TEGetText           (hTE: TEHandle): CharsHandle; 
PROCEDURE TESetStyleHandle   (theHandle: TEStyleHandle; hTE: TEHandle);
FUNCTION TEGetStyleHandle    (hTE: TEHandle): TEStyleHandle;
</PRE>
<A NAME=HEADING125-33></A>
<H4>Setting the Caret and Selection Range</H4>
<PRE>
PROCEDURE TEIdle             (hTE: TEHandle); 
PROCEDURE TEClick            (pt: Point; extend: Boolean; hTE: TEHandle); 
PROCEDURE TESetSelect        (selStart, selEnd: LongInt; hTE: TEHandle);
</PRE>
<A NAME=HEADING125-37></A>
<H4>Displaying and Scrolling Text</H4>
<PRE>
PROCEDURE TESetAlignment     (align: Integer; hTE: TEHandle);
PROCEDURE TEUpdate           (rUpdate: Rect; hTE: TEHandle);
PROCEDURE TETextBox          (text: Ptr; length: LongInt; 
                              box: Rect; just: Integer);
PROCEDURE TECalText          (hTE: TEHandle);
FUNCTION TEGetHeight         (endLine, startLine:LONGINT; 
                              hTE: TEHandle): INTEGER;
PROCEDURE TEScroll           (dh,dv: Integer; hTE: TEHandle);
PROCEDURE TEPinScroll        (dh: INTEGER; dv: INTEGER; hTE: TEHandle);
PROCEDURE TEAutoView         (fAuto: Boolean; hTE: TEHandle);
PROCEDURE TESelView          (hTE: TEHandle);
</PRE>
<A NAME=HEADING125-47></A>
<H4>Modifying the Text of an Edit Record</H4>
<PRE>
PROCEDURE TEDelete           (hTE: TEHandle);
PROCEDURE TEInsert           (text: Ptr; length: LongInt; hTE: TEHandle);
PROCEDURE TECut              (hTE: TEHandle);
PROCEDURE TECopy             (hTE: TEHandle);
PROCEDURE TEPaste            (hTE: TEHandle);
PROCEDURE TEStylePaste       (hTE: TEHandle);
                              FUNCTION TEToScrap: OSErr;
                              FUNCTION TEFromScrap: OSErr;
</PRE>
<A NAME=HEADING125-56></A>
<H4>Managing the TextEdit Private Scrap</H4>
<PRE>
                              FUNCTION TEScrapHandle: Handle;
                              FUNCTION TEGetScrapLength: LongInt;
PROCEDURE TESetScrapLength   (length: LongInt);
</PRE>
<A NAME=HEADING125-60></A>
                              <H4>Checking, Setting, and Replacing Styles</H4>
<PRE>
PROCEDURE TESetStyle         (mode: Integer; newStyle: TextStyle; 
                              redraw: Boolean; hTE: TEHandle);
PROCEDURE TEReplaceStyle     (mode: INTEGER; oldStyle, newStyle: TextStyle; 
                              redraw: BOOLEAN; hTE: TEHandle);
FUNCTION TEContinuousStyle   (VAR mode: Integer; VAR aStyle: TextStyle; 
                              hTE: TEHandle) : Boolean;
PROCEDURE TEStyleInsert      (text: Ptr; length: LongInt; 
                              hST: STScrpHandle; hTE: TEHandle);
FUNCTION TEGetStyleScrapHandle
                             (hTE: TEHandle): StyleScrpHandle;
PROCEDURE TEUseStyleScrap    (rangeStart: LongInt; rangeEnd: LongInt;
                              newStyles: STScrpHandle; redraw: Boolean;
                              hTE: TEHandle);
FUNCTION TENumStyles         (rangeStart: LongInt; rangeEnd: LongInt;
                              hTE: TEHandle): LongInt;
</PRE>
<A NAME=HEADING125-69></A>
<H4>Using Byte Offsets and Corresponding Points</H4>
<PRE>
FUNCTION TEGetOffset         (pt: Point; hTE: TEHandle): Integer;
FUNCTION TEGetPoint          (offset: Integer; hTE: TEHandle): Point;
</PRE>
<A NAME=HEADING125-72></A>
<H4>Additional TextEdit Features</H4>
<PRE>
FUNCTION TEFeatureFlag       (feature: Integer; action: Integer; 
                              hTE: TEHandle) : Integer;
</PRE>
<A NAME=HEADING125-74></A>
<H4>Customizing TextEdit</H4>
<PRE>
PROCEDURE TECustomHook       (which: TEIntHook; VAR addr: ProcPtr; 
                              hTE: TEHandle);
PROCEDURE TESetWordBreak     (wBrkProc: ProcPtr; hTE: TEHandle);
PROCEDURE TESetClickLoop     (clickProc: ProcPtr; hTE: TEHandle);
</PRE>
<A NAME=HEADING125-78></A>
<H2>C Summary</H2>
<A NAME=HEADING125-79></A>
<H3>Constants</H3>
<PRE>
      enum {
      /*alignment styles of TESetAlignment and TETextBox*/ 
      teFlushDefault    =  0,       /*flush according to system direction*/
      teCenter          =  1,       /*centered for all scripts*/
      teFlushRight      = -1,       /*flush right for all scripts*/
      teFlushLeft       = -2,       /*flush left for all script*/
      
      /*alignment styles; old names supported for backward-compatibility*/
      teJustLeft        = 0,
      teJustCenter      = 1,
      teJustRight       = -1,
      teForceLeft       = -2,

      /*feature or bit definitions for TEFeatureFlag feature parameter*/
      teFAutoScroll     = 0,        /*automatic scrolling*/
      teFAutoScr        = 0,        /*old constant for automatic scrolling*/
      teFTextBuffering  = 1,        /*text buffering*/
      teFOutlineHilite  = 2,        /*outline highlighting*/
      teFInlineInput    = 3,        /*inline input*/
      teFUseTextServices   = 4,     /*use inline input service*/

      /* action for the new bit (un)set interface,TEFeatureFlag */
      teBitClear        = 0,        /*set the selector bit*/
      teBitSet          = 1,
      };
      enum {
      teBitTest         = -1, /*no change; just return the current setting*/
      teBitClear        = 0,
      teBitSet          = 1,  /*set the selector bit*/
      teBitTest         = -1, /*no change; just return the current setting*/

      /*constants for identifying the routine that called TEFindWord */
      teWordSelect      = 4,     /*clickExpand to select word*/
      teWordDrag        = 8,     /*clickExpand for extending word selection*/
      teFromFind        = 12,    /*FindLine called it ($0C)*/
      teFromRecal       = 16,
         /*called for word breaking in line recalculation*/
      /*values for TESetStyle/TEContinuousStyle/TEReplaceStyle modes*/
      doFont   = 1,     /*set font family number*/
      doFace   = 2,     /*set character style*/
      doSize   = 4,     /*set type size*/
      doColor  = 8,     /*set color*/
      doAll    = 15,    /*set all attributes*/
      addSize  = 16,    /*adjust type size*/
   };
   enum {
      doToggle = 32,    /*toggle mode for TESetStyle*/

      /*selectors for TECustomHook*/
      intEOLHook     = 0,     /*end-of-line hook*/
      intDrawHook    = 1,     /*drawing hook*/
      intWidthHook   = 2,     /*width measurement hook*/
      intHitTestHook = 3,     /*hit-test hook*/
      intNWidthHook  = 6,     /*nWIDTHHook measurement hook*/ 
      intTextWidthHook  = 7,  /*TextWidth measurement hook*/
   };
</PRE>
<A NAME=HEADING125-82></A>
<H3>Types</H3>
<PRE>
typedef pascal Boolean (*WordBreakProcPtr)(Ptr text, short charPos);
typedef pascal Boolean (*ClikLoopProcPtr)(void);

struct TERec {
 Rect destRect;      /*destination rectangle*/
 Rect viewRect;      /*view rectangle*/
 Rect selRect;       /*the selection rectangle*/
 short lineHeight;   /*used for vertical spacing of lines*/
 short fontAscent;   /*used for caret/highlighting position*/
 Point selPoint;     /*point selected with the mouse*/
 short selStart;     /*start of selection range*/
 short selEnd;       /*end of selection range*/
 short active;       /*set when record is activated/deactivated*/
 WordBreakProcPtr wordBreak;  /*word break hook*/
 ClikLoopProcPtr clikLoop;    /*click loop hook*/
 long clickTime;     /*used internally*/
 short clickLoc;     /*used internally*/
 long caretTime;     /*used internally*/
 short caretState;   /*used internally*/
 short just;         /*alignment of text*/
 short teLength;     /*length of text*/
 Handle hText;       /*handle to text to be edited*/
 long hDispatchRec;  /*handle to TextEdit dispatch record*/
 short clikStuff;    /*used internally*/
 short crOnly;       /*if &lt;0, new line at Return only*/
 short txFont;       /*text font*/
 Style txFace;       /*character style; unpacked byte*/
 char filler;
 short txMode;       /*pen mode*/
 short txSize; 
   /*value indicates either a multistyled edit record or a font size*/
 GrafPtr inPort;     /*a pointer to the grafPort for this TERec*/
 ProcPtr highHook;   /*used for text highlighting and the caret appearance*/
 ProcPts caretHook;  /*used from assembly language*/
 short nLines;       /*number of lines*/
 short lineStarts[16000];/*positions of line starts*/
};

 typedef struct TERec TERec;
 typedef TERec *TEPtr, **TEHandle;

 typedef char Chars[32001];
 typedef char *CharsPtr, **CharsHandle;

 struct StyleRun {
   short startChar;  /*starting character position*/
   short styleIndex; /*index in style table*/
 };

 typedef struct StyleRun StyleRun;

 struct STElement {
   short stCount;    /*number of runs in this style*/
   short stHeight;   /*line height*/
   short stAscent;   /*font ascent*/
   short stFont;     /*font family number*/
   Style stFace;     /*character style*/
   char filler;      /*stFace is unpacked byte*/
   short stSize;     /*size in points*/
   RGBColor stColor; /*absolute Red Green Blue color*/
 };

 typedef struct STElement STElement;

 typedef STElement TEStyleTable[1777], *STPtr, **STHandle;

 struct LHElement {
   short lhHeight;   /*maximum height in line*/
   short lhAscent;   /*maximum ascent in line*/
 };

 typedef struct LHElement LHElement;

 typedef LHElement LHTable[8001], *LHPtr, **LHHandle; 
   /* ARRAY [0..8000] OF LHElement */

 struct ScrpSTElement { 
   long scrpStartChar; /*starting character position*/
   short scrpHeight;    /*line height*/
   short scrpAscent;
   short scrpFont;
   Style scrpFace;   /*unpacked byte*/
   char filler;      /*scrpFace is unpacked byte*/
   short scrpSize;
   RGBColor scrpColor;
 };

 typedef struct ScrpSTElement ScrpSTElement;

 typedef ScrpSTElement ScrpSTTable[1601]; /*ARRAY [0..1600] OF ScrpSTElement*/

 struct STScrpRec {
   short scrpNStyle;          /*number of styles in scrap*/
   ScrpSTTable scrpStyleTab;  /*table of style for scrap*/
 };

 typedef struct StScrpRec StScrpRec;
 typedef StScrpRec *StScrpPtr, **StScrpHandle;
struct NullSTRec {
   long teReserved;           /*reserved for future expansion*/
   StScrpHandle nullScrap;    /*handle to scrap style table*/
 };
typedef struct NullStRec NullSTRec;
 typedef NullStRec *NullStPtr, **NullStHandle;

 struct TEStyleRec {
   short nRuns;         /*number of style runs*/
   short nStyles;       /*size of style table*/
   STHandle styleTab;   /*handle to style table*/
   LHHandle lhTab;      /*handle to line-height table*/
   long teRefCon;       /*reserved for application use*/
   NullSTHandle nullStyle; /*handle to style set at null selection*/
   StyleRun runs [8001];   /*ARRAY [0..8000] OF StyleRun*/
 };
 
 typedef struct TEStyleRec TEStyleRec;
 typedef TEStyleRec *TEStylePtr, **TEStyleHandle;

 struct TextStyle {
   short tsFont;     /*font family number*/
   Style tsFace;     /*character Style*/
   char filler;      /*tsFace is unpacked byte*/
   short tsSize;     /*size in points*/
   RGBColor tsColor; /*absolute red, green, and blue color*/
 };

 typedef struct TextStyle TextStyle;
 typedef TextStyle *TextStylePtr, **TextStyleHandle;

 typedef short TEIntHook;
</PRE>
<A NAME=HEADING125-86></A>
<H3>Routines</H3>
<A NAME=HEADING125-87></A>
<H4>Initializing TextEdit, Creating an Edit Record, and Disposing of an Edit Record</H4>
<PRE>
pascal void TEInit             (void);
pascal TEHandle TEStyleNew     (const Rect *destRect,const Rect *viewRect);
pascal TEHandle TENew          (const Rect *destRect, const Rect *viewRect);
pascal void TEDispose          (TEHandle hTE);
</PRE>
<A NAME=HEADING125-92></A>
<H4>Activating and Deactivating an Edit Record</H4>
<PRE>
pascal void TEActivate         (TEHandle hTE);
pascal void TEDeactivate       (TEHandle hTE); 
</PRE>
<A NAME=HEADING125-95></A>
<H4>Setting and Getting an Edit Record's Text and Character Attribute Information</H4>
<PRE>
pascal void TEKey              (short key, TEHandle hTE);
pascal void TESetText          (const void *text, long length, TEHandle hTE);
pascal CharsHandle TEGetText
                               (TEHandle hTE);
pascal void TESetStyleHandle
                               (TEStyleHandle theHandle, TEHandle hTE);
pascal TEStyleHandle TEGetStyleHandle
                               (TEHandle hTE);
</PRE>
<A NAME=HEADING125-104></A>
<H4>Setting the Caret and Selection Range</H4>
<PRE>
pascal void TEIdle             (TEHandle hTE);
pascal void TEClick            (Point pt, Boolean fExtend, TEHandle hTE);
pascal void TESetSelect        (long selStart, long selEnd, TEHandle hTE);
</PRE>
<A NAME=HEADING125-108></A>
<H4>Displaying and Scrolling Text</H4>
<PRE>
pascal void TESetAlignment     (short just, TEHandle hTE);
pascal void TEUpdate           (const Rect *rUpdate, TEHandle hTE);
pascal void TETextBox          (const void *text, long length, const Rect *box,
                                short just);
pascal void TECalText          (TEHandle hTE);
pascal long TEGetHeight        (long endLine, long startLine, TEHandle hTE);
pascal void TEScroll           (short dh, short dv, TEHandle hTE);
pascal void TEPinScroll        (short dh, short dv, TEHandle hTE);
pascal void TEAutoView         (Boolean fAuto, TEHandle hTE);
pascal void TESelView          (TEHandle hTE);
</PRE>
<A NAME=HEADING125-118></A>
<H4>Modifying the Text of an Edit Record</H4>
<PRE>
pascal void TEDelete           (TEHandle hTE);
pascal void TEInsert           (const void *text, long length, TEHandle hTE);
pascal void TECut              (TEHandle hTE);
pascal void TECopy             (TEHandle hTE);
pascal void TEPaste            (TEHandle hTE);
pascal void TEStylePaste       (TEHandle hTE);
pascal OSErr TEToScrap         (void);
pascal OSErr TEFromScrap       (void);
</PRE>
<A NAME=HEADING125-127></A>
<H4>Managing the TextEdit Private Scrap</H4>
<PRE>
#define TEScrapHandle()        (* (Handle*) 0xAB4)
#define TEGetScrapLength()     ((long) * (unsigned short *) 0x0AB0)
pascal void TESetScrapLength
                               (long length);
</PRE>
<A NAME=HEADING125-132></A>
<H4>Checking, Setting, and Replacing Styles</H4>
<PRE>
pascal void TESetStyle         (short mode, const TextStyle *newStyle, Boolean 
                                fRedraw, TEHandle hTE);
pascal void TEReplaceStyle     (short mode, onst TextStyle *oldStyle,
                                const TextStyle *newStyle, Boolean fRedraw, 
                                TEHandle hTE);
pascal Boolean TEContinuousStyle
                               (short *mode, TextStyle *aStyle, TEHandle hTE);
pascal void TEStyleInsert      (const void *text, long length, 
                                STScrpHandle hSt, TEHandle hTE);
pascal StScrpHandle TEGetStyleScrapHandle
                               (TEHandle hTE);
pascal void TEUseStyleScrap    (long rangeStart, long rangeEnd, StScrpHandle 
                                newStyles, Boolean fRedraw, TEHandle hTE);
pascal long TENumStyles        (long rangeStart, long rangeEnd, TEHandle hTE);
</PRE>
<A NAME=HEADING125-142></A>
<H4>Using Byte Offsets and Corresponding Points</H4>
<PRE>
pascal short TEGetOffset       (Point pt, TEHandle hTE);
pascal Point TEGetPoint        (short offset, TEHandle hTE);
</PRE>
<A NAME=HEADING125-145></A>
<H4>Additional TextEdit Features</H4>
<PRE>
pascal short TEFeatureFlag     (short feature, short action, TEHandle hTE);
</PRE>
<A NAME=HEADING125-147></A>
<H4>Customizing TextEdit</H4>
<PRE>
pascal void TECustomHook       (TEIntHook which, ProcPtr *addr, TEHandle hTE);
pascal void TESetWordBreak     (WordBreakProcPtr wBrkProc, TEHandle hTE);
pascal void TESetClickLoop     (ClikLoopProcPtr clickProc, TEHandle hTE);
</PRE>
<A NAME=HEADING125-151></A>
<H2>Assembly-Language Summary</H2>
<A NAME=HEADING125-152></A>
<H3>Trap Macros</H3>
<A NAME=HEADING125-153></A>
<H4>Trap Macro Names
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Pascal name<TH>Trap macro name<TR>
<TD>TEContinuousStyle<TD>_TEContinuousStyle<TR>
<TD>TEUseStyleScrap<TD>_TEUseStyleScrap<TR>
<TD>TECustomHook<TD>_TECustomHook<TR>
<TD>TENumStyles<TD>_TENumStyles<TR>
<TD>TEFeatureFlag<TD>_TEFeatureFlag<TR>
<TD>TEStylePaste<TD>_TEStylePaste<TR>
<TD>TEReplaceStyle<TD>_TEReplaceStyle<TR>
<TD>TEGetStyleHandle<TD>_TEGetStyleHandle<TR>
<TD>TESetStyleHandle<TD>_TESetStyleHandle<TR>
<TD>TEReplaceStyle<TD>_TEReplaceStyle<TR>
<TD>TEGetStyleScrap<TD>_TEGetStyleScrap<TR>
<TD>TEGetStyleHandle<TD>_TEGetStyleHandle<TR>
<TD>TEGetStyleScrapHandle<TD>_TEGetStyleScrapHandle<TR>
<TD>TEStyleInsert<TD>_TEStyleInsert<TR>
<TD>TEGetPoint<TD>_TEGetPoint<TR>
<TD>TEGetHeight<TD>_TEGetHeight</TABLE>
</H4>
<A NAME=HEADING125-154></A>
<H3>Global Variables
<TABLE BORDER="0" CELLPADDING=3><TD>WordRedraw<TD>Used for line calculations to determine how much of a line must be redrawn after a character is entered.<TR>
<TD>TEFindWord<TD>TextEdit's word selection and line breaking routine.<TR>
<TD>TERecal<TD>The address of the routine called by <CODE>TECalText</CODE> to recalculate the line starts <BR>and set the first and last characters that need to be redrawn.<TR>
<TD>TEDoText<TD>The address of a multi-purpose text editing routine used to display, highlight, <BR>and hit-test characters, and position the pen to draw the caret. <TR>
<TD>TEScrpHandle <TD>A handle to the TextEdit private scrap.<TR>
<TD>TEScrapLength<TD>The size of the TextEdit scrap in bytes.</TABLE>
</H3>
 <A NAME=MARKER-2-318></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-124.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-126.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

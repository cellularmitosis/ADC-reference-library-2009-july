<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Import and Export Guide: Graphics Exporter Components</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Graphics Exporter Components"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents" title="Graphics Exporter Components"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../ImportExport-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000523" target="_top">Import &amp; Export</a> &gt; <a href="../A-Intro/1Introduction.html#//apple_ref/doc/uid/TP40000903-IntroductiontoQuickTimeImportandExportGuide-DontLinkElementID_4">QuickTime Import and Export Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../C-Chapter/3GraphicsImporterCom.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../E-Chapter/5GraphicsExporterCom.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-SW1" title="Graphics Exporter Components"></a>
<h1>Graphics Exporter Components</h1>

<p>This chapter describes the general features of graphics exporter components.</p>
<p>Applications make direct calls to graphic exporter components, so this chapter will be of interest to most QuickTime developers who work with still images or the web. Much of the conceptual information found in <span class="content_text"><a href="../C-Chapter/3GraphicsImporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsImporterComponents-SW1">“Graphics Importer Components”</a></span> also applies to exporters. You should be familiar with that chapter before reading this chapter.</p>
<p>Applications programmers should also be familiar with the Component Manager before working with graphics exporter components.</p>
<p>If you would like to create a new graphics exporter component, refer to this chapter to implement a component that supports the required interface functions.</p>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="4GraphicsExporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-ExportingGraphics">Exporting Graphics</a>
				
			<br/>
			
        
			
			
				<a href="4GraphicsExporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-UsingGraphicsExporterComponents">Using Graphics Exporter Components</a>
				
			<br/>
			
        
			
			
				<a href="4GraphicsExporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-HowGraphicsExportersWork">How Graphics Exporters Work</a>
				
			<br/>
			
        
			
			
				<a href="4GraphicsExporterCom.html#//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-WritingGraphicsExportComponents">Writing Graphics Export Components</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-ExportingGraphics" title="Exporting Graphics"></a>
<h2>Exporting Graphics</h2>
<p>Graphics exporter components provide a standard interface for exporting graphics to image files in a variety of formats. QuickTime selects a graphic exporter component based on the desired output format, such as GIF or PNG. Different image formats support a wide range of configurable features, such as depth, resolution and compression quality.</p>
<p>QuickTime supports the following export image formats: BMP, JFIF, JPEG, GIF, MacPaint, Photoshop, PNG, QuickDraw PICT, QuickTime Image, Silicon Graphics, Targa, and TIFF. Note that this list is not inclusive; QuickTime supports additional export image formats with each software release.</p>
<p>A graphic image can be exported to a handle, a file, or a data reference.</p>
<p>Third-party developers may also write their own graphics exporters for other image file formats.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-UsingGraphicsExporterComponents" title="Using Graphics Exporter Components"></a>
<h2>Using Graphics Exporter Components</h2>
<p>This section describes how to use graphics exporter components. Code samples are included.</p>
<p>To export an image to a file or a data reference using a graphics exporter, you must open a graphics exporter component instance, specify the source of the input image and the destination for the output image file, set the parameters you want, and call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportDoExport" target="_top">GraphicsExportDoExport</a></code>.</p>
<p>You select a particular graphics exporter component based on the desired output format, such as GIF or PNG. If you know which file format you want to write, you can use a call such as <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenADefaultComponent" target="_top">OpenADefaultComponent</a></code> to open the appropriate exporter.</p>
<p>The input image can come from a QuickDraw <code>Picture</code>, a <code>GWorld</code> or <code><!--a target="_top" -->PixMap<!--/a--></code>, a QuickTime graphics importer component instance, or a segment of compressed data described by a QuickTime image description. In the last case, the compressed data may be accessed via a pointer, handle, file or other data reference.</p>
<p>The output image for an export operation can be specified as a handle, a file, or a data reference.</p>
<p>When you are done with the graphics exporter component instance, call <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CloseComponent" target="_top">CloseComponent</a></code>.</p>
<p>The example code in Listing 3-1 shows the basic functions you use to export a <code>GWorld</code> to an image file. Error-checking code has been removed.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-DontLinkElementID_14" title="Listing 3-1The basic functions used to export a GWorld to an image file"></a>
<p class="codesample"><strong>Listing 3-1&nbsp;&nbsp;</strong>The basic functions used to export a GWorld to an image file</p>
<div class="codesample"><table><tr><td scope="row"><pre>void writeGWorldToImageFile( GWorldPtr gw, const FSSpec *fileSpec )<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    GraphicsExportComponent ge = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>    <span></span></pre></td></tr><tr><td scope="row"><pre>    OpenADefaultComponent( GraphicsExporterComponentType,<span></span></pre></td></tr><tr><td scope="row"><pre>                            kQTFileTypePNG, &amp;ge );<span></span></pre></td></tr><tr><td scope="row"><pre>    GraphicsExportSetInputGWorld( ge, gw );<span></span></pre></td></tr><tr><td scope="row"><pre>    GraphicsExportSetOutputFile( ge, fileSpec );<span></span></pre></td></tr><tr><td scope="row"><pre>    GraphicsExportDoExport( ge, nil );<span></span></pre></td></tr><tr><td scope="row"><pre>    CloseComponent( ge );<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-SelectingaGraphicsExporterComponent" title="Selecting a Graphics Exporter Component"></a>
<h3>Selecting a Graphics Exporter Component</h3>
<p>Graphics exporter components have component type <code>'grex'</code> and, by convention, component subtype matching the Mac OS file type for the image file format. For example, the graphics exporter for PNG files has component subtype <code>'PNGf'</code>.</p>
<p>If you know which file format you want to write, you can use a call such as <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenADefaultComponent" target="_top">OpenADefaultComponent</a></code> to open the appropriate exporter.</p>
<p>If you want to display a list of graphics exporter components and let the user select one, you can build a list by using <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/FindNextComponent" target="_top">FindNextComponent</a></code> to search for graphics exporter components and calling <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/GetComponentInfo" target="_top">GetComponentInfo</a></code> on each to find out its name, as shown in Listing 3-2.</p>
<p>Take care not to offer the base exporter as an option. An easy way to do this is to restrict your search to those graphics exporter components that do not have the <code>graphicsExporterIsBaseExporter</code> component flag set.</p>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-DontLinkElementID_15" title="Listing 3-2Building a list of graphics exporter components"></a>
<p class="codesample"><strong>Listing 3-2&nbsp;&nbsp;</strong>Building a list of graphics exporter components</p>
<div class="codesample"><table><tr><td scope="row"><pre>void findGraphicsExporterComponents()<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    ComponentDescription cd;<span></span></pre></td></tr><tr><td scope="row"><pre>    Component c = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>    <span></span></pre></td></tr><tr><td scope="row"><pre>    cd.componentType = GraphicsExporterComponentType;<span></span></pre></td></tr><tr><td scope="row"><pre>    cd.componentSubType = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>    cd.componentManufacturer = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>    cd.componentFlags = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>    cd.componentFlagsMask = graphicsExporterIsBaseExporter;<span></span></pre></td></tr><tr><td scope="row"><pre>    <span></span></pre></td></tr><tr><td scope="row"><pre>    while( ( c = FindNextComponent( c, &amp;cd ) ) != 0 ) {<span></span></pre></td></tr><tr><td scope="row"><pre>        // add component c to the list.<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-SpecifyingtheSource" title="Specifying the Source"></a>
<h3>Specifying the Source</h3>
<p>The input image for an export operation can come from a QuickDraw Picture, <code>GWorld</code> or <code><!--a target="_top" -->PixMap<!--/a--></code>, or a QuickTime graphics importer instance. To specify such a source, call the respective function:</p>

<div class="codesample"><table><tr><td scope="row"><pre>GraphicsExportSetInputPicture<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetInputGWorld<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetInputPixMap<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetInputGraphicsImporter<span></span></pre></td></tr></table></div>

<p>Alternatively, the input image may be a segment of compressed data described by an image description. To specify such a source, call one of these functions:</p>

<div class="codesample"><table><tr><td scope="row"><pre>GraphicsExportSetInputDataReference<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetInputFile<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetInputHandle<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetInputPtr<span></span></pre></td></tr></table></div>

<p>In this case, the compressed data may comprise only a segment of the whole data reference. You may limit access to a segment by calling the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportSetInputOffsetAndLimit" target="_top">GraphicsExportSetInputOffsetAndLimit</a></code>.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-SpecifyingtheDestination" title="Specifying the Destination"></a>
<h3>Specifying the Destination</h3>
<p>The output image for an export operation can be written to a handle, file, or other data reference. To specify the destination, call the respective function:</p>

<div class="codesample"><table><tr><td scope="row"><pre>GraphicsExportSetOutputDataReference<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetOutputFile<span></span></pre></td></tr><tr><td scope="row"><pre>GraphicsExportSetOutputHandle<span></span></pre></td></tr></table></div>

<p>By default, the graphics exporter’s suggested file type and creator will be used for any newly created file. To override the suggested file type or creator, call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportSetOutputFileTypeAndCreator" target="_top">GraphicsExportSetOutputFileTypeAndCreator</a></code>.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-SpecifyingExportSettings" title="Specifying Export Settings"></a>
<h3>Specifying Export Settings</h3>
<p>A variety of <code>GraphicsExportSet</code>... and <code>GraphicsExportGet</code>... functions are available to set and get various settings. Not every graphics exporter supports all of these.</p>
<p>As usual, if you call an unimplemented component function, it will return <code>badComponentSelector</code>. You can find out whether a particular component function is implemented by a component with the <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/CallComponentCanDo" target="_top">CallComponentCanDo</a></code> function.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-DontRecompressFlag" title="DontRecompress Flag"></a>
<h3>DontRecompress Flag</h3>
<p>Repeated compression of an image with a lossy format (such as JPEG) can cause image degradation.</p>
<p>The <code>DontRecompress</code> flag is used to request that the original compressed data not be decompressed and recompressed, but be copied (possibly with modifications) through to the output file. This is not always possible; circumstances may still force a graphics exporter to recompress.</p>
<p>In QuickTime, the JPEG, PICT and QuickTime Image graphics exporters support the <code>DontRecompress</code> flag.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-InterlaceStyles" title="Interlace Styles"></a>
<h3>Interlace Styles</h3>
<p>Some image formats support interlacing, in which image data is rearranged in some manner. A common use for this is in the PNG and GIF formats, which rearrange data so that low-resolution images can be displayed from incomplete data streams.</p>
<p>In QuickTime, the PNG graphics exporter supports the <code>InterlaceStyle</code> settings <code>kQTPNGInterlaceNone</code> and <code>kQTPNGInterlaceAdam7</code>.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-MetaData" title="MetaData"></a>
<h3>MetaData</h3>
<p>Some image file formats can contain supplemental data, such as textual copyright information.</p>
<p>In QuickTime, none of the supplied graphics exporters support setting <code>MetaData</code>.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-CompressionMethods" title="Compression Methods"></a>
<h3>Compression Methods</h3>
<p>Some image file formats support more than one compression algorithm. In QuickTime, the TIFF graphics exporter supports the <code>CompressionMethod</code> settings <code>kQTTIFFCompression_None</code> and <code>kQTTIFFCompression_PackBits</code>.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-CompressionQuality" title="Compression Quality"></a>
<h3>Compression Quality</h3>
<p>Lossy image compression involves a quality-versus-size tradeoff: the higher the image quality, the greater the compressed data size.</p>
<p>In QuickTime, the  JPEG, PICT and QuickTime Image graphics exporters support the <code>CompressionQuality</code> setting. The PICT and QuickTime image graphics exporters pass it on as a parameter to a compressor.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-TargetDataSize" title="Target Data Size"></a>
<h3>Target Data Size</h3>
<p>An alternative way to view the quality-versus-size tradeoff is to specify a desired maximum data size and ask for a quality that does not exceed that size.</p>
<p>In QuickTime, the  JPEG graphics exporter supports the <code>TargetDataSize</code> setting, which is implemented by compressing the image repeatedly, lowering the quality until the target size (or a maximum attempt limit) is reached.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-Resolution" title="Resolution"></a>
<h3>Resolution</h3>
<p>Some image file formats can store the image resolution.</p>
<p>In QuickTime, the BMP, JPEG, Photoshop, PNG, QuickTime Image, and TIFF graphics exporters support the <code>resolution</code> setting. If you do not set a resolution explicitly, the original image’s resolution is used.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-Depth" title="Depth"></a>
<h3>Depth</h3>
<p>Some image file formats support more than one pixel depth.</p>
<p>In QuickTime, the BMP, JPEG, Photoshop, PNG, PICT, QuickTime Image, Targa and  TIFF graphics exporters support the <code>depth</code> setting.</p>
<p>Note that the usual QuickDraw conventions for bit depths apply:</p>
<ul class="spaceabove">
<li class="li"><p>24 means “Millions of Colors”</p></li>
<li class="li"><p>32 means “Millions+,” meaning millions of colors plus an alpha channel</p></li>
<li class="li"><p>40 means 8-bit grayscale.</p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-ColorSyncProfile" title="ColorSyncProfile"></a>
<h3>ColorSyncProfile</h3>
<p>Some image file formats support embedded ColorSync profiles. This allows image files to describe their native colorspace in a self-contained manner. In QuickTime, the JPEG, PNG, PICT, QuickTime Image and TIFF graphics exporters support embedded ColorSync profiles.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-SettingsDialogs" title="Settings Dialogs"></a>
<h3>Settings Dialogs</h3>
<p>You can access all of a graphics exporter’s settings at once with the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportSetSettingsFromAtomContainer" target="_top">GraphicsExportSetSettingsFromAtomContainer</a></code> and <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportGetSettingsAsAtomContainer" target="_top">GraphicsExportGetSettingsAsAtomContainer</a></code> functions. These functions can also be used to access other settings besides those in the list above.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-UserInterface" title="User Interface"></a>
<h3>User Interface</h3>
<p>Some graphics exporters can display a dialog to let the user configure format-specific settings. To display such a dialog, call the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportRequestSettings" target="_top">GraphicsExportRequestSettings</a></code> function.</p>
<p>In QuickTime, the BMP, JPEG, Photoshop, PNG, PICT, QuickTime Image and TIFF graphics exporters support <code>settings</code> dialogs.</p>
<p>You can get a user-readable description of a graphics exporter’s current settings by calling the <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportGetSettingsAsText" target="_top">GraphicsExportGetSettingsAsText</a></code> function.</p>

<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-FileTypeandCreator" title="File Type and Creator"></a>
<h3>File Type and Creator</h3>
<p>To find out the suggested file name extension for a graphics exporter’s format, call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportGetDefaultFileNameExtension" target="_top">GraphicsExportGetDefaultFileNameExtension</a></code>.</p>
<p>To find out the suggested Mac OS file type and creator, call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportGetDefaultFileTypeAndCreator" target="_top">GraphicsExportGetDefaultFileTypeAndCreator</a></code>. To find out the MIME type, call <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportGetMIMETypeList" target="_top">GraphicsExportGetMIMETypeList</a></code>.</p>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-HowGraphicsExportersWork" title="How Graphics Exporters Work"></a>
<h2>How Graphics Exporters Work</h2>
<p>QuickTime provides a base graphics export component which provides abstractions that greatly simplify the work of format-specific graphics exporter components, while offering applications a rich interface.</p>
<p>Format-specific graphics exporters, such as the exporters for JPEG, PNG and TIFF, are relatively simple components. When a format-specific exporter is opened, it opens and targets an instance of the base graphics exporter. Subsequently, it delegates most of its calls to the base exporter instance, as shown in Figure 3-1.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-DontLinkElementID_16" title="Figure 3-1Delegating calls to the base graphics exporter"></a><p><strong>Figure 3-1&nbsp;&nbsp;</strong>Delegating calls to the base graphics exporter</p><img src = "../Art/refExporter-2.jpg" alt = "Delegating calls to the base graphics exporter" ></div><br/>
<p>The base exporter communicates with data handler components to write image file data. If necessary, it calls the Image Compression Manager to perform compression operations.</p>
<p>There are three modes that format-specific exporters can operate in:</p>
<ul class="ul">
<li class="li"><p>Transcode. Data is transferred from one image file to another without decompressing and recompressing. (The data may be modified along the way, if appropriate.)</p></li>
<li class="li"><p>Using a Compressor. The graphics exporter provides an atom container identifying which compressor to use, and any settings to be passed to that compressor.</p></li>
<li class="li"><p>Standalone Export. The graphics exporter component does all the work itself, without using an image compressor.</p></li>
</ul>
<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-HowtheBaseExporterChoosesaMode" title="How the Base Exporter Chooses a Mode"></a>
<h3>How the Base Exporter Chooses a Mode</h3>
<p>When an application calls <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportDoExport" target="_top">GraphicsExportDoExport</a></code>, the base exporter asks the following question:</p>
<ul class="spaceabove">
<li class="li"><p>Can QuickTime transcode?</p></li>
</ul>
<p>It calls the format-specific exporter’s <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportCanTranscode" target="_top">GraphicsExportCanTranscode</a></code> function. If the answer is yes, it calls the exporter’s <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportDoTranscode" target="_top">GraphicsExportDoTranscode</a></code> function.</p>
<p>Otherwise,</p>
<ul class="spaceabove">
<li class="li"><p>Can QuickTime use a compressor?</p></li>
</ul>
<p>It calls the format-specific exporter’s <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportCanUseCompressor" target="_top">GraphicsExportCanUseCompressor</a></code> function.</p>
<p>If the answer is yes, it calls the Image Compression Manager to compress using the compressor and parameters specified in the atom container. This is done in the base exporter’s <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportDoUseCompressor" target="_top">GraphicsExportDoUseCompressor</a></code> function. Usually the format-specific exporter does not need to override this function and should simply delegate it. If the format-specific exporter’s format is a container format (such as a  PICT or QuickTime Image), it can override and delegate this in order to encapsulate the compressed data in the container format.</p>
<p>Otherwise,</p>
<ul class="spaceabove">
<li class="li"><p>QuickTime must perform a standalone export.</p></li>
</ul>
<p>If neither transcoding nor compressing is appropriate, it calls the format-specific exporter’s <code><a href="../../../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/c/func/GraphicsExportDoStandaloneExport" target="_top">GraphicsExportDoStandaloneExport</a></code> function.</p>


<a name="//apple_ref/doc/uid/TP40000903-GraphicsExporterComponents-WritingGraphicsExportComponents" title="Writing Graphics Export Components"></a>
<h2>Writing Graphics Export Components</h2>
<p>If you’re interesting in writing a component, you should check out the sample code at</p>

<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/samplecode/ElectricImageComponent/ElectricImageComponent.html<span></span></pre></td></tr></table></div>

<p>The sample code demonstrates how to build five QuickTime Components: a graphics importer, graphics exporter, movie importer, movie exporter and image decompressor.</p>
<p>These components all work together to allow QuickTime to use the Electric Image format image files. Sample Electric Image files are included.</p>




        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../C-Chapter/3GraphicsImporterCom.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../E-Chapter/5GraphicsExporterCom.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-01-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/RM/ImportExport/DataExchange/D-Chapter/4GraphicsExporterCom.html%3Fid%3DTP40000903-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/RM/ImportExport/DataExchange/D-Chapter/4GraphicsExporterCom.html%3Fid%3DTP40000903-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/RM/ImportExport/DataExchange/D-Chapter/4GraphicsExporterCom.html%3Fid%3DTP40000903-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
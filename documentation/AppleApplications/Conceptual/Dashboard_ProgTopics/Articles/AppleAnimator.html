<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Dashboard Programming Topics: Using Animation</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using Animation"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40003187" title="Using Animation"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../Dashboard-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP40001366" target="_top">Dashboard</a> &gt; <a href="../index.html" target="_top">Dashboard Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="AppleSlider.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AppleButton.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40003187-SW1" title="Using Animation"></a><hr /><H1>Using Animation</H1><p>Apple provides a JavaScript class that functions as an animation timer, useful for animating fading elements or a series of images. The classes that provide this, <code>AppleAnimator</code> and <code>AppleAnimation</code>, are part of the Apple Classes included in Mac OS X v10.4.3 and later.</p><p>For more on using all of the Apple Classes, including <code>AppleAnimator</code> and <code>AppleAnimation</code>, read <span class="content_text"><a href="AppleClasses.html#//apple_ref/doc/uid/TP40003186-SW1">“Introduction to the Apple Classes.”</a></span></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="AppleAnimator.html#//apple_ref/doc/uid/TP40003187-DontLinkElementID_1">Working with Animation</a>
				
			<br/>
			
        
			
			
				<a href="AppleAnimator.html#//apple_ref/doc/uid/TP40003187-DontLinkElementID_2">Apple Animator and Animation, In HTML</a>
				
			<br/>
			
        
			
			
				<a href="AppleAnimator.html#//apple_ref/doc/uid/TP40003187-DontLinkElementID_3">Apple Animator and Animation, in JavaScript</a>
				
			<br/>
			
        
			
			
				<a href="AppleAnimator.html#//apple_ref/doc/uid/TP40003187-DontLinkElementID_7">The Apple Rectangle Animation Subclass</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_1" title="Working with Animation"></a><h2>Working with Animation</h2><p>Providing an animation in your widget can be achieved using the <code>AppleAnimator</code> and <code>AppleAnimation</code> classes. <code>AppleAnimator</code> is a timer that fires at designated intervals for a defined duration. The <code>AppleAnimation</code> contains a set of values and a handler. As <code>AppleAnimations</code> are added to <code>AppleAnimators</code>, values in the animation's range are provided to the handler each time the animator fires. To use animators and animations, you need to:</p><ul class="ul"><li class="li"><p>Include the <code>AppleAnimator</code> class in your HTML file</p></li><li class="li"><p>Construct an animator timer</p></li><li class="li"><p>Construct an animation</p></li><li class="li"><p>Provide a handler used to act when the timer fires</p></li></ul><a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_2" title="Apple Animator and Animation, In HTML"></a><h2>Apple Animator and Animation, In HTML</h2><p>In order to declare <code>AppleAnimator</code> and <code>AppleAnimation</code> objects and use them in JavaScript, you need to include the class in your widget's HTML file. If you're planning backward compatibility with pre-Mac OS X v.10.4.3 versions, follow the directions in <span class="content_text"><a href="AppleClasses.html#//apple_ref/doc/uid/TP40003186-SW2">“Backwards Compatible Usage”</a></span> and include this path:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;script type='text/javascript' src='AppleClasses/AppleAnimator.js' charset='utf-8'/><span></span></pre></td></tr></table></div><p>If you plan on requiring Mac OS X v.10.4.3 or newer for your widget, include the <code>AppleAnimation</code> class in its location in <code>/System/Library/WidgetResources/</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;script type='text/javascript' src='/System/Library/WidgetResources/AppleClasses/AppleAnimator.js' charset='utf-8'/><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_3" title="Apple Animator and Animation, in JavaScript"></a><h2>Apple Animator and Animation, in JavaScript</h2><p>There are two ways to set up the animation timers and associated animation ranges within your widget's JavaScript:</p><ul class="ul"><li class="li"><p>Full setup, allowing you to associate multiple ranges of values with one timer</p></li><li class="li"><p>Quick setup, allowing you to easily create a timer and an associated range of values</p></li></ul><a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_4" title="Full Setup and Usage"></a><h3>Full Setup and Usage</h3><p>The <code>AppleAnimator</code> and <code>AppleAnimation</code> classes don't provide actual animations—they provide numerical values that can be useful when animating elements in your widget's user interface. For instance, if you have elements that fade, resize, or change over time, these classes can provide you with relevant values over time.</p><p>The <code>AppleAnimator</code> class provides an object that functions as a timer. Its constructor takes in two parameters, the length of time that the timer should fire over, and the interval at which the timer should fire, both in milliseconds:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimator = new AppleAnimator(500, 13);<span></span></pre></td></tr></table></div><p>In this instance, the timer, when activated, lasts for 500 milliseconds and fires every 13 milliseconds.</p><p>Now that the timer has been created, the animation range needs to be as well. The constructor for the <code>AppleAnimation</code> class takes three values: a starting value, a finishing value, and a handler:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimation = new AppleAnimation(0.0, 1.0, animationHandler);<span></span></pre></td></tr></table></div><p>This animation provides values between <code>0.0</code> and <code>1.0</code> and, whenever its timer fires, calls a handler function called <code>animationHandler</code>. The handler for the animation needs to accept four arguments: the animator that is processing the animation, the current value of the animation, the animation's starting value, and its finishing value.</p><div class="codesample"><table><tr><td scope="row"><pre>function animationHandler(currentAnimator, current, start, finish)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>... // do something with a current value<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Now that the animation is set up, it needs to be associated with a timer:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimator.addAnimation(currentAnimation);<span></span></pre></td></tr></table></div><p>By adding, or associating, the animation with the timer, the timer calls the animation's handler whenever it fires. When the timer fires and provides the appropriate value for the interval, based on the animation's range mapped to the duration of the timer. Each animator can be associated with multiple animations, allowing you to track multiple sets of values with one timer.</p><p>At this point, the timer and the animation are ready to be run. To begin the timer, send it the start message:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimator.start();<span></span></pre></td></tr></table></div><p>Additionally, you can stop a time at any point by calling <code>stop()</code> on the animator:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimator.stop();<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_5" title="Quick Setup"></a><h3>Quick Setup</h3><p>The previous section described how to perform a full setup of an <code>AppleAnimator</code> timer and an <code>AppleAnimation</code>. This allows you to include multiple animations with one animator and is appropriate for circumstances where one animation is associated with one animator.</p><p>The <code>AppleAnimator</code> constructor, however, allows you to specify animation specifications in addition to its usual parameters. This allows you to bypass having a separate <code>AppleAnimation</code> object, useful for when you only need one animation:</p><div class="codesample"><table><tr><td scope="row"><pre>AppleAnimator(duration, interval, start, finish, handler)<span></span></pre></td></tr></table></div><p>The first two values, <code>duration</code> and <code>interval</code>, are the duration of the timer and how often it fires. The next two values, <code>start</code> and <code>finish</code>, are the starting and finishing values of the range of numbers that are calculated as the timer runs. Finally, <code>handler</code> is the name of the function that you provide; it is called whenever the timer fires:</p><div class="codesample"><table><tr><td scope="row"><pre>function handler(currentAnimator, current, start, finish)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>... // do something with a current value<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>As with the animation handler above, this handler needs to accept four arguments:  the animator that is processing the animation, the current value of the animation, the animation's starting value, and its finishing value.</p><p>To start the animation and the animator's timer, call <code>start()</code> on the animator:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimator.start();<span></span></pre></td></tr></table></div><p>After starting the animator's timer, the <code>handler</code> function is called every interval until the end of the animator's duration is finished. The <code>current</code> value passed to <code>handler</code> reflects an increasing value between <code>start</code> and <code>finish</code>. To stop the animator's timer before it has run out, call <code>stop()</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimator.stop();<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_6" title="Properties of Apple Animator and Animation"></a><h3>Properties of Apple Animator and Animation</h3><p>These properties are available to an <code>AppleAnimator</code> object:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Property</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>animator.duration</code></p></td><td ><p>The duration of the animator's timer</p></td></tr><tr><td  scope="row"><p><code>animator.interval</code></p></td><td ><p>The interval at which the animation's handler is called</p></td></tr><tr><td  scope="row"><p><code>animator.animations</code></p></td><td ><p>An array of the Apple Animation objects associated with an animator</p></td></tr><tr><td  scope="row"><p><code>animator.timer</code></p></td><td ><p>The current value of the timer</p></td></tr><tr><td  scope="row"><p><code>animator.oncomplete</code></p></td><td ><p>A handler called when the timer is complete</p></td></tr></table></div><p>These properties are available to an <code>AppleAnimation</code> object:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Property</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>animation.from</code></p></td><td ><p>The animation's starting value</p></td></tr><tr><td  scope="row"><p><code>animation.to</code></p></td><td ><p>The animation's finishing value</p></td></tr><tr><td  scope="row"><p><code>animation.now</code></p></td><td ><p>The animation's current value</p></td></tr><tr><td  scope="row"><p><code>animation.callback</code></p></td><td ><p>The handler for the animation</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_7" title="The Apple Rectangle Animation Subclass"></a><h2>The Apple Rectangle Animation Subclass</h2><p>The <code>AppleRectangleAnimation</code> subclass provides values useful when transitioning between two rectangles. An <code>AppleRectangleAnimation</code> uses the <code>AppleAnimator</code> timer to trigger its handlers, but require that starting and finishing rectangles be specified as Apple Rectangles, using the <code>AppleRect</code> subclass.</p><p>An <code>AppleRect</code> is defined as:</p><div class="codesample"><table><tr><td scope="row"><pre>AppleRect(left, top, right, bottom)<span></span></pre></td></tr></table></div><p>The rectangle is specified by its top left and bottom right coordinates. To create a new <code>AppleRect</code> object, call its constructor and assign the resulting object into a variable:</p><div class="codesample"><table><tr><td scope="row"><pre>startingRect = new AppleRect( 0, 0, 100, 100 );<span></span></pre></td></tr></table></div><p>Once you have created a starting and finishing rectangle, create an <code>AppleRectAnimation</code> object, passing in the two <code>AppleRect</code> objects and the name of a handler that's to be called when the rectangle animation's animator timer fires:</p><div class="codesample"><table><tr><td scope="row"><pre>currentRectAnimation = new AppleRectAnimation( startingRect, finishingRect, rectHandler );<span></span></pre></td></tr></table></div><p>The rectangle animation handler you provide needs to accept four arguments: the rectangle animation that triggered the handler, an <code>AppleRect</code> object with the current rectangle values, the starting <code>AppleRect</code> object, and the finishing <code>AppleRect</code> object:</p><div class="codesample"><table><tr><td scope="row"><pre>function rectHandler( rectAnimation, currentRect, startingRect, finishingRect );<span></span></pre></td></tr></table></div><p>Once the <code>AppleRectangleAnimation</code> object is created, construct a new <code>AppleAnimator</code> object, associate it with your rectangle animation, and start the animator's timer:</p><div class="codesample"><table><tr><td scope="row"><pre>currentAnimator = new AppleAnimator (500, 13);<span></span></pre></td></tr><tr><td scope="row"><pre>currentAnimator.addAnimation(currentRectAnimation);<span></span></pre></td></tr><tr><td scope="row"><pre>currentAnimator.start();<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40003187-DontLinkElementID_8" title="Properties of Apple Rectangle Animation and Apple Rectangle"></a><h3>Properties of Apple Rectangle Animation and Apple Rectangle</h3><p>These properties are available to an <code>AppleRectangleAnimator</code> object:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Property</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>rectAnimation.from</code></p></td><td ><p>The animation's starting rectangle</p></td></tr><tr><td  scope="row"><p><code>rectAnimation.to</code></p></td><td ><p>The animation's finishing rectangle</p></td></tr><tr><td  scope="row"><p><code>rectAnimation.now</code></p></td><td ><p>The animation's current rectangle</p></td></tr><tr><td  scope="row"><p><code>rectAnimation.callback</code></p></td><td ><p>The handler for the animation</p></td></tr></table></div><p>These properties are available to an <code>AppleRect</code> object:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Property</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>rectangle.left</code></p></td><td ><p>The rectangle's left value, of the top left corner of the rectangle</p></td></tr><tr><td  scope="row"><p><code>rectangle.top</code></p></td><td ><p>The rectangle's top value, of the top left corner of the rectangle</p></td></tr><tr><td  scope="row"><p><code>rectangle.right</code></p></td><td ><p>The rectangle's right value, of the bottom right corner of the rectangle</p></td></tr><tr><td  scope="row"><p><code>rectangle.bottom</code></p></td><td ><p>The rectangle's bottom value, of the bottom right corner of the rectangle</p></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="AppleSlider.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AppleButton.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Conceptual/Dashboard_ProgTopics/Articles/AppleAnimator.html%3Fid%3DTP40002837-2.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Conceptual/Dashboard_ProgTopics/Articles/AppleAnimator.html%3Fid%3DTP40002837-2.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Conceptual/Dashboard_ProgTopics/Articles/AppleAnimator.html%3Fid%3DTP40002837-2.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

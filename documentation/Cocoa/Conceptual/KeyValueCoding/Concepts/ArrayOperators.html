<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Key-Value Coding Programming Guide: Set and Array Operators</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Set and Array Operators"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20002176" title="Set and Array Operators"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">Key-Value Coding Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="DataTypes.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="SearchImplementation.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20002176-BAJEAIEE" title="Set and Array Operators"></a><hr /><H1>Set and Array Operators</H1><p>Array operators allow you to specify operations to be performed on a collection's items using a key path of the form <em>keyPathToArray</em>.@<em>operator</em>.<em>keyPathToProperty</em>. This article describes the available collection operators.</p><p>To perform an operation on the items in a collection, a key prefixed with “@” is used to specify a collection operator. The key path to the left of the collection operator, if present, is used to determine the array or set, relative to the receiver, that is used in the operation. The key path to the right of the collection operator specifies the property of the items in the collection, that is used in the operation. All the collection operators, with the exception of <code>@count</code>, require a key path to the right of the collection operator. It is not currently possible to define your own collection operators.</p><p>The array operator examples in the following sections assume that <code>accountsArray</code> is an array containing <code>Account</code> objects as described in <span class="content_text">Table 1</span> and that <code>transactionArray</code> is an array containing <code>Transaction</code> objects as described in <span class="content_text">Table 2</span>. The <code>savingsAccount</code> variable is an instance of <code>Account</code>.</p><a name="//apple_ref/doc/uid/20002176-184073-BAJCAFEI" title="Table 1Account object keys and data types"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20002176-184073" title="Table 1Account object keys and data types"></a><strong>Table 1&nbsp;&nbsp;</strong>Account object keys and data types</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data type</p></th></tr><tr><td  scope="row"><p><code>openingBalance</code></p></td><td ><p><code>float</code></p></td></tr><tr><td  scope="row"><p><code>name</code></p></td><td ><p><code>NSString</code></p></td></tr><tr><td  scope="row"><p><code>notes</code></p></td><td ><p><code>NSString</code></p></td></tr><tr><td  scope="row"><p><code>transactions</code></p></td><td ><p><code>NSMutableArray</code> of <code>Transaction</code> objects</p></td></tr></table></div><a name="//apple_ref/doc/uid/20002176-184117-BAJGBACJ" title="Table 2Transaction object keys and data types"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20002176-184117" title="Table 2Transaction object keys and data types"></a><strong>Table 2&nbsp;&nbsp;</strong>Transaction object keys and data types</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Data type</p></th></tr><tr><td  scope="row"><p><code>referenceNumber</code></p></td><td ><p><code>NSUInteger</code></p></td></tr><tr><td  scope="row"><p><code>amount</code></p></td><td ><p><code>double</code></p></td></tr><tr><td  scope="row"><p><code>payee</code></p></td><td ><p><code>NSString</code></p></td></tr><tr><td  scope="row"><p><code>date</code></p></td><td ><p><code>NSDate</code></p></td></tr><tr><td  scope="row"><p><code>category</code></p></td><td ><p><code>NSString</code></p></td></tr><tr><td  scope="row"><p><code>reconciled</code></p></td><td ><p><code>BOOL</code></p></td></tr></table></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-206175">@avg</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-184206">@count</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-178521">@distinctUnionOfArrays</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-178539">@distinctUnionOfObjects</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-SW1">@distinctUnionOfSets</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-178557">@max</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-178575">@min</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-178593">@sum</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-178611">@unionOfArrays</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-SW2">@unionOfObjects</a>
				
			<br/>
			
        
			
			
				<a href="ArrayOperators.html#//apple_ref/doc/uid/20002176-178629">@unionOfSets</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20002176-206175" title="@avg"></a><h2>@avg</h2><p>The <code>@avg</code> operator uses <code>valueForKeyPath:</code>to get the value for each item in the receiver, converts the value to a <code>double</code>, and returns the average of the values as an instance of <code>NSNumber</code>.</p><p>The following example returns the average opening balance of your accounts.</p><div class="codesample"><table><tr><td scope="row"><pre>[accountsArray valueForKeyPath:@"@avg.openingBalance"]<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20002176-184206" title="@count"></a><h2>@count</h2><p>The <code>@count</code> operator returns the number of objects, as an instance of <code>NSNumber</code>, in the collection specified by the key path. The key path to the right of the array operator is ignored.</p><p>The following example returns the number of transactions in the savings account object.</p><div class="codesample"><table><tr><td scope="row"><pre>[savingsAccount valueForKeyPath:@"transactions.@count"]<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20002176-178521" title="@distinctUnionOfArrays"></a><h2>@distinctUnionOfArrays</h2><p>The <code>@distinctUnionOfArrays</code> operator returns an array containing the distinct objects in the arrays returned by sending <code>valueForKeyPath:</code> to each item in the receiver, passing the key path to the right of the array operator. </p><p>The following example returns an array containing the payees for the savings account transactions, with the duplicate payee objects removed.</p><div class="codesample"><table><tr><td scope="row"><pre>[accountsArray valueForKeyPath:@"@distinctUnionOfArrays.transactions.payee"]<span></span></pre></td></tr></table></div><p>The <code>unionOfArrays</code> operator is similar, but does not remove duplicate objects.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20002176-DontLinkElementID_4" title="Important:"></a><p><strong>Important:</strong>&nbsp;This operator raises an exception if any of the leaf objects is <code>nil</code>. </p><p></p></div><a name="//apple_ref/doc/uid/20002176-178539" title="@distinctUnionOfObjects"></a><h2>@distinctUnionOfObjects</h2><p>The <code>@distinctUnionOfObjects</code> operator returns an array containing the distinct objects returned by sending <code>valueForKeyPath:</code> to each item in the receiver, passing the key path to the right of the array operator.</p><p>The following example returns an array containing the account payees, with the duplicates removed.</p><div class="codesample"><table><tr><td scope="row"><pre>[savingsAccount<span></span></pre></td></tr><tr><td scope="row"><pre>     valueForKeyPath:@"transactions.@distinctUnionOfObjects.payee"]<span></span></pre></td></tr></table></div><p>The <code>unionOfObjects</code> operator is similar, but does not remove duplicate objects.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20002176-DontLinkElementID_5" title="Important:"></a><p><strong>Important:</strong>&nbsp;This operator raises an exception if any of the leaf objects is <code>nil</code>. </p><p></p></div><a name="//apple_ref/doc/uid/20002176-SW1" title="@distinctUnionOfSets"></a><h2>@distinctUnionOfSets</h2><p>The <code>@distinctUnionOfSets</code> operator returns an array containing the distinct objects returned by sending <code>valueForKeyPath:</code> to each item in the receiver, passing the key path to the right of the @ operator.</p><p>This operator is the same as <code>@distinctUnionOfArrays</code> , but operates on a set (an instance of <code>NSSet</code>), rather than an array.</p><p>The <code>unionOfSets</code> operator is similar, but does not remove duplicate objects.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20002176-DontLinkElementID_6" title="Important:"></a><p><strong>Important:</strong>&nbsp;This operator raises an exception if any of the leaf objects is <code>nil</code>. </p><p></p></div><a name="//apple_ref/doc/uid/20002176-178557" title="@max"></a><h2>@max</h2><p>The <code>@max</code> operator compares the objects returned by sending <code>valueForKeyPath:</code> to each item in the receiver array passing the key path to the right of the array operator as the parameter, returning the maximum value found. The maximum value is determined using the <code>compare:</code> method of the objects at the specified key path. The compared property objects must support comparison with each other.</p><p>The following example returns the date of the latest transaction in the savings account.</p><div class="codesample"><table><tr><td scope="row"><pre>[savingsAccount valueForKeyPath:@"transactions.@max.date"]<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20002176-178575" title="@min"></a><h2>@min</h2><p>The <code>@min</code> operator compares the objects returned by sending <code>valueForKeyPath:</code> to each item in the receiver array with the key path to the right of the array operator as the parameter, returning the minimum value found. The minimum value is determined using the <code>compare:</code> method of the objects at the specified key path. The compared property objects must support comparison with each other.</p><p>The following example returns the date of the earliest transaction in the savings account.</p><div class="codesample"><table><tr><td scope="row"><pre>[savingsAccount valueForKeyPath:@"transactions.@min.date"]<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20002176-178593" title="@sum"></a><h2>@sum</h2><p>The <code>@sum</code> operator returns the total of adding the NSNumber objects returned by sending <code>valueForKeyPath:</code> to each item in the receiver array, with the key path to the right of the array operator as the parameter. Each number is converted to a <code>double</code> and an instance of <code>NSNumber</code> containing the total sum is returned.</p><p>The following example returns the sum of all transactions for the savings account.</p><div class="codesample"><table><tr><td scope="row"><pre>[savingsAccount valueForKeyPath:@"transactions.@sum.amount"]<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20002176-178611" title="@unionOfArrays"></a><h2>@unionOfArrays</h2><p>The <code>@unionOfArrays</code> operator returns an array containing all the object values in the arrays returned by sending <code>valueForKeyPath:</code> to each item in the receiving array, passing the key path to the right of the array operator as the parameter. Unlike <code>@distinctUnionOfArrays</code>, duplicate objects are not removed.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20002176-DontLinkElementID_7" title="Important:"></a><p><strong>Important:</strong>&nbsp;This operator raises an exception if any of the leaf objects is <code>nil</code>. </p><p></p></div><a name="//apple_ref/doc/uid/20002176-SW2" title="@unionOfObjects"></a><h2>@unionOfObjects</h2><p>The <code>@unionOfObjects</code> operator returns an array containing all the objects values returned by sending <code>valueForKeyPath:</code> to each item in the receiving array, passing the key path to the right of the array operator as the parameter. Unlike <code>@distinctUnionOfObjects</code>, duplicate objects are not removed.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20002176-DontLinkElementID_8" title="Important:"></a><p><strong>Important:</strong>&nbsp;This operator raises an exception if any of the leaf objects is <code>nil</code>. </p><p></p></div><a name="//apple_ref/doc/uid/20002176-178629" title="@unionOfSets"></a><h2>@unionOfSets</h2><p>The <code>@unionOfSets</code> operator returns an array containing all the objects values returned by sending <code>valueForKeyPath:</code> to each item in the receiving set, passing the key path to the right of the operator as the parameter. Unlike <code>@distinctUnionOfSets</code>, duplicate objects are not removed.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20002176-DontLinkElementID_9" title="Important:"></a><p><strong>Important:</strong>&nbsp;This operator raises an exception if any of the leaf objects is <code>nil</code>. </p><p></p></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="DataTypes.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="SearchImplementation.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/KeyValueCoding/Concepts/ArrayOperators.html%3Fid%3D10000107i-6.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/KeyValueCoding/Concepts/ArrayOperators.html%3Fid%3D10000107i-6.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/KeyValueCoding/Concepts/ArrayOperators.html%3Fid%3D10000107i-6.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

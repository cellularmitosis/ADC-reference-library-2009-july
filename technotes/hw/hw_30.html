<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"        "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd"><HTML><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note HW30: Sense Lines</title><meta name="categories" content="Hardware"><meta name="week-posted" content="Aug 31, 1992 - Sep 4, 1992"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002499" title="Sense Lines"></a><a name="top"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxHardwareDrivers-date.html">Hardware & Drivers</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/HardwareDrivers/index.html" target="_blank">Reference Library > Hardware & Drivers</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note HW30</div>
<div id="pageheadsub">Sense Lines</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->            <P id = "menutext"><A HREF="#Introduction">Sense Lines</A><BR><BR><A HREF="#Section1">The Original Scheme</A><BR><BR><A HREF="#Section2">Extended Type-7 Sense Codes</A><BR><BR> <A HREF="#Section3">Extended Type-6 Sense Line Protocol</A><BR><BR> <A HREF="#Section4">Multiple Scan Monitors</A><BR><BR><A HREF="#Section5">Summary</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">Ever wonder how your Mac knows what monitors are connected to it? Well, thisTechnical Note will tell you more than you probably wanted to know.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Sep 01 1992]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR><!-- begin_content --><A name="Introduction"></A><h2>Sense Lines</h2><p>The sense line protocol was implemented when Apple recognized the need for amechanism that would allow a display card to identify the monitor connected toit. For example, the built-in video display circuitry on CPUs such as theMacintosh Quadras and the PowerBook 160 and 165c can configure itself accordingto the monitor that is connected at boot time. The identification scheme worksfine, but there is one problem. There are only three sense lines and thislimits the number of different monitors to seven plus the no-connect case. Toovercome this limitation, newer display cards and built-in video use extensionsto the sense line scheme that allow for new codes.</p><p>The first extension, type-7, is based on the following idea: When the displaycircuitry senses a configuration that in the original scheme signals "nodisplay connected" (i.e. when none of the three sense lines are grounded), thecard pulls down each sense line, one by one, and reads what the other linesreturn. To return a unique code, the only requirement is that the sense linesbe interconnected, in the cable or the monitor itself, by wires or diodes. Thebeauty of this idea is that existing monitors are detected correctly and newermonitors can have their own encoding. The circuitry for detecting new monitorsis relatively simple and has no active components. Adding the encoding to newor existing monitors involves only inexpensive diodes and wire. The type-6extension has a similar approach.</p><a name="Section1"></a><P><A HREF="#top">Back to top</A></P><h2>The Original Scheme</h2><p>In the original scheme, the display circuitry determines the type of monitorattached by reading three sense lines and comparing the signal value to ground.By convention, the sense lines are identified as 2, 1, and 0. Given three linesand two different states, on or off, there are a total of eight possiblecombinations. For a monitor to be recognized, a sense line on the monitor sideis connected to ground to be read as a binary 0, or left unconnected to be readas a binary 1.</p><p>The first seven monitors listed in Table S-1 show the required sense linestates for them to be recognized using the original sense line scheme. It'sworth noting that monitors using the original scheme need only have their senselines read once to determine the monitor type. As new monitor types becameavailable for the Macintosh, the extended sense line protocol wasimplemented.</p><a name="Section2"></a><P><A HREF="#top">Back to top</A></P><h2>Extended Type-7 Sense Codes</h2><p>The extended sense line protocol is one of those oddities of softwareengineering that at first seems to defy logic. One wonders how late it was inthe evening and how many cans of Mountain Dew were consumed before the protocolnotation was defined. The protocol sets a standard for defining a 6-bit binarynumber that represents how the sense lines must respond for the monitor to berecognized correctly.</p><p>With this unusual introduction, let's step back. Under the original scheme,sense lines were compared to ground to determine their state. To reiterate,with three pins there are a total of eight possible combinations, 000 (allgrounded) to 111 (none grounded). Seven combinations of the sense line statesare assigned to early monitor types. The eighth combination, 111 (signifying"no display connected" in the original scheme), is used to signal the extendedtype-7 sense line code protocol. This is also known as the no-connect senseline code protocol. The type-7 designation derives from the fact that the threesense lines are high relative to ground and can be represented in binary formatas 0b111 or $07.</p><p>To implement the type-7 sense line protocol, the sense lines get tied to eachother within the monitor using a combination of straight wire and/or diodeconnections. When the display system software reads the state of the threemonitor sense lines and finds that none of them are grounded, it begins dynamicpolling. The software tells the video card/hardware to assert each sense lineand read the other two lines. Instead of being compared to ground, each line iscompared to the asserted line. If a sense line has the same state as theasserted sense line, the state equates to a binary 0, otherwise it is binary1.</p><p>The diagram in Figure 1 illustrates the type-7 sense line protocol notation.There are three pairs of binary numbers. Each pair of binary digits representsthe relative state of two sense line pins to the third, which is held low. Thepairs are always in the order: sense 2 low, sense 1 low, sense 0 low. Each bitin a pair is sense line specific, with the higher sense line bit to the left.</p><p align="center"><img src="images/hw_30_001.gif" alt="Extended Type-7 Sense Line Decode Method" width=467 height=138></p><p align="center"><b>Figure 1</b> - Extended Type-7 Sense Line Decode Method</p><p>To make "sense" of the protocol notation, we now present a diagram showing ahypothetical sense line interconnection. Given the extended sense line notation11 00 01, Figure 2 shows how the monitor cable sense lines would be connectedfor the system to detect that extended monitor type. The diagram uses thetype-7 ordering, going from sense line 2 on the left to line 0 on the right.</p><P align=center><img src="images/hw_30_002.gif" alt="" width=83 height=96></p>        <P align=center><img src="images/hw_30_003.gif" alt="Extended Type-7 Sense Line Decode Example" width=223 height=95></p><P align=center><b>Figure 2</b> - Extended Type-7 Sense Line Decode Example</p><p>In Figure 2, the three points of the triangle correspond to the three senselines. The diodes and wires show the required connection. The 6-bit binarynumber below the diagram corresponds to the result that will be read whenpolled. It is read: when 2 is pulled low, 1 and 0 return the first two digits(11); when 1 is pulled low, 2 and 0 return the second two bits (00); when 0 ispulled low, 2 and 1 return the last two bits (01).</p><P align=center><img src="images/hw_30_004.gif" alt="Extended Type-7 Sense Line Decode Diagram" width=310 height=216></p><P align=center><b>Figure 3</b> - Extended Type-7 Sense Line Decode Diagram</p><p>Figure 3 shows the sense line connections for the monitors that require type-7coding. It is important to clarify the NTSC Encoder and PAL Monitor diagramswhere it might appear a diode is missing. For the NTSC Encoder the binaryextended notation is 01 01 00. One might think for the last pair of binarydigits, 00, to make sense there must be diode between sense lines 0 and 1. Infact, since sense line 1 is wired to sense line 2, asserting sense line 0 meansthat sense lines 2 and 1 will be read as the same state. Similar logic appliesto the PAL Monitor diagram. This technique saves the cost of an extra diode.Also, for the PAL Encoder diagram, any one of the three sense lineinterconnections could be removed while maintaining the same extended senseline logic.</p><a name="Section3"></a><P><A HREF="#top">Back to top</A></P><h2>Extended Type-6 Sense Line Protocol</h2><P>With the implementation of the Display Manager, the sense line protocol wasextended further for a new family of monitors. The same method that gives theextended type-7 sense line protocol its designation applies to the three caseswhere one sense line is grounded. For the extended type-6 sense line protocol,pin 4, i.e. sense line 0, is grounded to pin 11 (see Table S-3) and the binarynotation is expressed as 0b110 ($06) with the least significant bitrepresenting sense line 0. From Table S-1 below, note that the sense lineconfiguration for this case corresponds to the Apple Hi-Res monitor. To extendthe support of monitors in this family, one can add three new codes byconnecting sense lines 1 and 2 with a jumper, or a diode in either direction.These new extended type-6 sense codes support three new monitor types which arecapable of supporting the standard 640x480 resolution and other resolutions.See "Multiple Scan Monitors" below. The extended type-6 sense line decodediagram is presented in Figure 4.</p><p align=center><img src="images/hw_30_005.gif" alt="Extended Type 6 Sense Line Decode Diagram" width=408 height=107></p><p align=center><b>Figure 4</b> - Extended Type 6 Sense Line Decode Diagram</p><a name="Section4"></a><P><A HREF="#top">Back to top</A></P><h2>Multiple Scan Monitors</h2><P>The Power Macintosh VRAM expansion cards include support for three new monitortypes which use the extended type-6 sense codes. These new types are multiplescan rate monitors which can display in multiple screen resolutions. The VRAMexpansion cards being shipped with the Power Macintosh units will support themultiple scan monitors with the resolutions listed in Table 1 on the next page.Note that the Apple Multiple Scan 17 Display is sensed as a multiple scan 16display type and the Apple Multiple Scan 20 Display is sensed as a multiplescan 21 display type.</p><p align=center><img src="images/hw_30_006.gif" alt="" width=390 height=175></p><a name="Section5"></a><P><A HREF="#top">Back to top</A></P><h2>Summary</h2><P>The three tables below summarize the contents of this tech note.</p><p align=center><img src="images/hw_30_007.gif" alt="" width=514 height=535></p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>In this table, the column under "Sense 2 Low 1 &amp; 0" indicates thevalues the software is reading from monitor sense lines 1 and 0 while drivingsense line 2 low. Suppose you have a PowerBook 180c and you want it to believethere is an Apple 16" RGB monitor attached. The sense line code in Table S-2for this monitor is 10 11 01. As shown in Figure 3, this sense code equates tosense line 2 being connected to sense line 0 with a jumper. Based on Table S-3,your tying pin 4 to pin 10 will make the PowerBook think that the 16" monitoris attached. It's important to recognize that pins 4 and 10 in this examplemust not be tied to ground, otherwise a 12" RGB monitor would be indicated.</P></TD></TR></TABLE></CENTER><BR>  <img src="images/hw_30_008.gif" alt="" width=419 height=226><a name="References"></a><P><A HREF="#top">Back to top</A></P><h2>References</h2><P><i>Guide to the Macintosh Family Hardware</i>, Third edition, VideoDisplays</p><P><i>develop</i> Issue 3, "Macintosh Display Card 8*24GC: The Naked Truth"</p><P>Technical Note M.HW.ColorMonitors - HW 8 - Color Monitor Connections</p><P><A HREF="#top">Back to top</A></P><P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (420K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/hw_30.pdf">Download</A></P>               </TD>            </TR></table><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/hw/hw_30.html%3Fid%3DDTS10002499-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/hw/hw_30.html%3Fid%3DDTS10002499-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/hw/hw_30.html%3Fid%3DDTS10002499-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Pausing Speech (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING198></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-197.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-199.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-187.html"><B>Chapter 4 - Speech Manager</B></A> / <A HREF="Sound-193.html"><B>Using the Speech Manager</B></A></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING198-0></A>
<H2><A NAME=MARKER-9-166></A>Pausing Speech</H2>
 <A NAME=MARKER-2-251></A><A NAME=MARKER-2-205></A><A NAME=MARKER-2-845></A>When you start synthesizing speech, you may need a way to stop speech that is being generated. For example, your application might support a Stop Speech menu command to let users stop speech when they want to. Also, you should usually stop speech when you receive a suspend event. You can use <CODE>StopSpeech</CODE> to stop speech immediately, or you can use <CODE>StopSpeechAt</CODE> to choose exactly where you want speech stopped. You can also stop speech temporarily and then resume it again using the <CODE>PauseSpeechAt</CODE> and <CODE>ContinueSpeech</CODE> functions. <A HREF=#MARKER-9-172>Listing 4-5</A> shows how you might do this.<A NAME=MARKER-2-171></A><P>
<B>Listing 4-5  <A NAME=MARKER-9-172></A>Pausing and continuing speech production<A NAME=MARKER-2-173></A></B><P>
<PRE>
FUNCTION MyPauseAndContinueSpeech: OSErr;
VAR
   myErr, myErr2:    OSErr;
   myStr:            Str255;
BEGIN
   gChannel := NIL;
   myStr := 'Hold the mouse button down to test pause speech at immediate.';
   myErr := NewSpeechChannel(NIL, gChannel);    {open speech channel}
   IF myErr = noErr THEN
   BEGIN                                        {speak some text}
      myErr := SpeakText(gChannel, @myStr[1], Length(myStr));
      WHILE (SpeechBusy &lt;&gt; 0) DO                {wait for speech to finish}
         IF (Button) THEN
         BEGIN                                  {stop speech immediately}
            myErr := PauseSpeechAt(gChannel, kImmediate);
            IF myErr = noErr THEN
               WHILE (Button) DO    {while mouse button is down, do nothing}
               BEGIN
               END;                 {on mouse up, resume speaking}
               myErr := ContinueSpeech(gChannel);
      END;
      IF gChannel &lt;&gt; NIL THEN       {dispose of channel}
         myErr2 := DisposeSpeechChannel(gChannel);
   END;
   IF myErr = noErr THEN
      MyPauseAndContinueSpeech := myErr2
   ELSE
      MyPauseAndContinueSpeech := myErr;
END;
</PRE>
 The <CODE>MyPauseAndContinueSpeech</CODE> function defined in <A HREF=#MARKER-9-172>Listing 4-5</A> begins by allocating a speech channel using the default system voice. It then begins to speak some text. <CODE>MyPauseAndContinueSpeech</CODE> uses a busy loop to allow the speech to be completely spoken before finishing the subroutine. Then, when the designated action occurs, in this case the mouse button being depressed by a user, <CODE>MyPauseAndContinueSpeech</CODE> calls <CODE>PauseSpeechAt</CODE> with the currently active channel and a constant that defines where to stop the speech. This example uses the constant <CODE>kImmediate</CODE> to indicate that the speech should cease wherever it us currently being processed by the synthesizer. There are also constants that define the end of a word and the end of a sentence as appropriate stopping places.<P>
 When the mouse button is released, <CODE>MyPauseAndContinueSpeech</CODE> calls the <CODE>ContinueSpeech</CODE> function with the variable identifying the paused speech channel. When paused immediately, the synthesizer resumes speaking at the beginning of the word that was interrupted. While the speech is being generated, <CODE>MyPauseAndContinueSpeech</CODE> continues to call <CODE>SpeechBusy</CODE> to determine if the channel is still being used to process speech. When the channel is no longer busy, <CODE>MyPauseAndContinueSpeech</CODE> calls <CODE>DisposeSpeechChannel</CODE> to release the memory used by the speech channel.<A NAME=MARKER-2-174></A><A NAME=MARKER-2-175></A><A NAME=MARKER-2-176></A><A NAME=MARKER-2-177></A><A NAME=MARKER-2-1></A><A NAME=MARKER-2-179></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-197.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-199.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

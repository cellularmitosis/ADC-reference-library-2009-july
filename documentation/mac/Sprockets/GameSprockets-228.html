<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of InputSprocket (GameSprockets)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" ="A" NAME="HEADING228"></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GameSprockets-227.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-229.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GameSprockets-2.html"><B>Apple Game Sprockets Guide</B></A> / <BR><DD><A HREF="GameSprockets-162.html"><B>Chapter 3 - InputSprocket</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING228-0"></A>
<H1><A NAME="MARKER-9-173"></A>Summary of InputSprocket</H1>
<A NAME="HEADING228-1"></A>
<H2><A NAME="MARKER-2-174"></A>Constants</H2>
<A NAME="HEADING228-2"></A>
<H4>Built-in Device Categories</H4>
<PRE>
enum {
   kIspDeviceClass_SpeechRecognition ='talk',
   kISpDeviceClass_Mouse =    'mous',
   kISpDeviceClass_Keyboard = 'keyd',
   kISpDeviceClass_Joystick = 'joys',
   kISpDeviceClass_Wheel =    'whel',
   kISpDeviceClass_Pedals =   'pedl',
   kISpDeviceClass_Levers =   'levr'
};
</PRE>
<A NAME="HEADING228-4"></A>
<H4>Built-in Element Kinds</H4>
<PRE>
enum {
   kISpElementKind_Button =   'butn',
   kISpElementKind_DPad =     'dpad',
   kISpElementKind_Axis =     'axis',
   kISpElementKind_Movement = 'move'
   kISpElementKind_Virtual =  'virt'
};
</PRE>
<A NAME="HEADING228-6"></A>
<H4>Built-in Element Labels </H4>
<PRE>
enum {
   kISpElementLabel_None = 'none',

   kISpElementLabel_XAxis = 'xaxi',
   kISpElementLabel_YAxis = 'yaxi',
   kISpElementLabel_ZAxis = 'zaxi',

   kISpElementLabel_Rx =   'rxax',
   kISpElementLabel_Ry =   'ryax',
   kISpElementLabel_Rz =   'rzax',

   kISpElementLabel_Gas =  'gasp',
   kISpElementLabel_Brake ='brak',
   kISpElementLabel_Clutch = 'cltc',

   kISpElementLabel_Throttle = 'thrt',
   kISpElementLabel_Trim = 'trim',
   kISpElementLabel_POVHat = 'povh',
   kISpElementLabel_PadMove = 'move',

   kISpElementLabel_Fire = 'fire',
   kISpElementLabel_Start = 'strt',
   kISpElementLabel_Select = 'optn'
};
</PRE>
<A NAME="HEADING228-8"></A>
<H4>Button Element Data Information </H4>
<PRE>
typedef enum {
   kISpButtonUp =             0,
   kISpButtonDown =           1
} ISpButtonData;
</PRE>
<A NAME="HEADING228-10"></A>
<H4>Directional Pad Element Data Information </H4>
<PRE>
typedef enum {
   kISpPadIdle =            0,
   kISpPadLeft,
   kISpPadUpLeft,
   kISpPadUp,
   kISpPadUpRight,
   kISpPadRight,
   kISpPadDownRight,
   kISpPadDown,
   kISpPadDownLeft
} ISpDPadData;
</PRE>
<A NAME="HEADING228-12"></A>
<H4>Axis Element Data Information </H4>
<PRE>
#define kISpAxisMinimum  0x00000000U
#define kISpAxisMiddle   0x7FFFFFFFU
#define kISpAxisMaximum  0xFFFFFFFFU
</PRE>
<A NAME="HEADING228-14"></A>
<H4>Need Flags</H4>
<PRE>
typedef enum ISpNeedFlagBits {
   kISpNeedFlag_NoMultiConfig = 1
};
</PRE>
<A NAME="HEADING228-16"></A>
<H4>Virtual Element Flag</H4>
<PRE>
{
   kISpVirtualElementFlag_UseTempMem = 1
};
</PRE>
<A NAME="HEADING228-18"></A>
<H4>Element List Flag</H4>
<PRE>
enum
{
   kISpElementListFlag_UseTempMem = 1
};
</PRE>
<A NAME="HEADING228-20"></A>
<H4>Resource Types</H4>
<PRE>
enum
{
   kISpSetListResourceType =  'setl',
   kISpSetDataResourceType =  'setd'
};
</PRE>
<A NAME="HEADING228-22"></A>
<H2><A NAME="MARKER-2-175"></A>Data Types</H2>
<PRE>
typedef struct ISpDevicePrivate  *ISpDeviceReference; 
typedef struct ISpElementPrivate *ISpElementReference; 
typedef struct ISpElementListPrivate *ISpElementListReference; 
typedef OSType ISpDeviceClass;
typedef OSType ISpDeviceIdentifier;
typedef OSType ISpElementLabel;
typedef OSType ISpElementKind;
</PRE>
<A NAME="HEADING228-30"></A>
<H4>Device Definition Structure</H4>
<PRE>
typedef struct ISpDeviceDefinition {
   Str63             deviceName; 
   ISpDeviceClass    theDeviceClass;
   ISpDeviceIdentifier theDeviceIdentifier;
   UInt32            permanentId;
   UInt32            flags;
   UInt32            reserved1;
   UInt32            reserved2;
   UInt32            reserved3;
} ISpDeviceDefinition;
</PRE>
<A NAME="HEADING228-32"></A>
<H4>Element Information Structure</H4>
<PRE>
typedef struct ISpElementInfo {
   ISpElementLabel      theLabel;
   ISpElementKind       theKind;
   Str63                theString;
   UInt32               reserved1;
   UInt32               reserved2;
} ISpElementInfo, *ISpElementInfoPtr;
</PRE>
<A NAME="HEADING228-34"></A>
<H4>Button Configuration Information Structure</H4>
<PRE>
typedef struct {
   UInt32               id;
} ISpButtonConfigurationInfo;
</PRE>
<A NAME="HEADING228-36"></A>
<H4>Directional Pad Configuration Information Structure</H4>
<PRE>
typedef struct {
   UInt32               id;
   Boolean              fourWayPad;
} ISpDPadConfigurationInfo;
</PRE>
<A NAME="HEADING228-38"></A>
<H4>Axis Configuration Information Structure</H4>
<PRE>
typedef struct {
   Boolean              SymetricAxis; 
} ISpAxisConfigurationInfo;
</PRE>
<A NAME="HEADING228-40"></A>
<H4>Movement Data Structure</H4>
<PRE>
typedef struct ISpMovementData {
   UInt32               xAxis;
   UInt32               yAxis;
   UInt32               direction; 
};
</PRE>
<A NAME="HEADING228-42"></A>
<H4>Element Event Data Structure</H4>
<PRE>
typedef struct {
   AbsoluteTime      when;
   ISpElementReference element;
   UInt32            refCon;
   Uint32            data; 
} ISpElementEvent, *ISpElementEventPtr;
</PRE>
<A NAME="HEADING228-44"></A>
<H4>Need Structure</H4>
<PRE>
typedef struct ISpNeed {
   Str63             name;
   short             iconSuiteResourceId;
   ISpElementKind    theKind;
   ISpElementLabel   theLabel;
   UInt32            flags;
   UInt32            emulateHow;
   UInt32            emulationData1;
   UInt32            emulationData2;
} ISpNeed;
</PRE>
<A NAME="HEADING228-46"></A>
<H2>InputSprocket Functions<A NAME="MARKER-2-176"></A></H2>
<A NAME="HEADING228-47"></A>
<H4>Configuring the Application</H4>
<PRE>
OSStatus ISpInit              (UInt32 count,
                               ISpNeed *needs,
                               ISpElementReference *inReferences,
                               OSType appCreatorCode,
                               OSType subCreatorCode,
                               UInt32 flags,
                               short setListResourceID
                               UInt32 version);
OSStatus ISpConfigure         (ISpEventProcPtr inEventProcPtr);
OSStatus ISpStop              (void);
OSStatus ISpSuspend           (void);
OSStatus ISpResume            (void);
NumVersion ISpGetVersion      (void);
OSStatus ISpElement_NewVirtual(UInt32 dataSize, 
                               ISpElementReference *outElement;
                               UInt32 flags);
OSStatus ISpElement_NewVirtualFromNeeds(UInt32 count, 
                               ISpNeed *needs,
                               ISpElementReference *outElements
                               UInt32 flags);
OSStatus ISpElement_DisposeVirtual(UInt32 count, 
                               ISpElementReference
                               *inElements);
OSStatus ISpDevices_Extract   (UInt32 inBufferCount, 
                               UInt32 *outCount,
                               ISpDeviceReference *buffer);
OSStatus ISpDevices_ExtractByClass(ISpDeviceClass theClass, 
                               UInt32 inBufferCount, 
                               UInt32 *outCount, 
                               ISpDeviceReference *buffer);
OSStatus ISpDevices_ExtractByIdentifier(ISpDeviceIdentifier theIdentifier,
                               UInt32 inBufferCount, 
                               UInt32 *outCount, 
                               ISpDeviceReference *buffer);
OSStatus ISpDevices_Activate  (UInt32 inDeviceCount, 
                               ISpDeviceReference *inDevicesToActivate);
OSStatus ISpDevices_Deactivate(UInt32 inDeviceCount, 
                               ISpDeviceReference *inDevicesToDeactivate);
OSStatus ISpDevice_IsActive   (ISpDeviceReference inDevice, 
                               Boolean *outIsActive);
OSStatus ISpDevice_GetDefinition(const ISpDeviceReference inDevice, 
                               UInt32 buflen,
                               ISpDeviceDefinition *outStruct);
OSStatus ISpDevice_GetElementList(const ISpDeviceReference inDevice, 
                               ISpElementListReference *outElementList);
OSStatus ISpElement_GetDevice (const ISpElementReference inElement, 
                               ISpDeviceReference *outDevice);
OSStatus ISpElement_GetGroup  (const ISpElementReference inElement, 
                               UInt32 *outGroup); 
OSStatus ISpElement_GetInfo   (const ISpElementReference inElement, 
                               ISpElementInfoPtr outInfo); 
OSStatus ISpElement_GetConfigurationInfo(const ISpElementReference inElement, 
                               UInt32 buflen, void *configInfo);
</PRE>
<A NAME="HEADING228-69"></A>
<H4>Obtaining Data From Elements</H4>
<PRE>
OSStatus ISpElement_GetSimpleState(const ISpElementReference inElement, 
                               Uint32 *state); 
OSStatus ISpElement_GetComplexState(const ISpElementReference inElement, 
                               UInt32 buflen, void *state);
OSStatus ISpElement_GetNextEvent(ElemenReference inElement, 
                               UInt32 bufSize, 
                               ISpElementEventPtr event, 
                               Boolean *wasEvent); 
OSStatus ISpElementList_GetNextEvent(ISpElementListReference inElementList, 
                               UInt32 bufSize, 
                               ISpElementEventPtr event, 
                               Boolean *wasEvent); 
OSStatus ISpElement_Flush     (ISpElementReference inElement); 
OSStatus ISpElementList_Flush (ISpElementListReference inElementList);
</PRE>
<A NAME="HEADING228-76"></A>
<H4>Managing Element Lists</H4>
<PRE>
OSStatus ISpElementList_New   (UInt32 inCount, 
                               ISpElementReference *inElements, 
                               ISpElementListReference *outElementList
                               UInt32 flags); 
OSStatus ISpElementList_Dispose(ISpElementListReference inElementList); 
OSStatus ISpGetGlobalElementList(ISpElementListReference *outElementList); 
OSStatus ISpElementList_AddElements(ISpElementListReference inElementList, 
                               UInt32 refCon,
                               UInt32 count,
                               ISpElementReference *newElements);
OSStatus ISpElementList_RemoveElements(ISpElementListReference inElementList,
                               UInt32 count,
                               ISpElementReference *oldElement);
OSStatus ISpElementList_Extract(ISpElementListReference inElementList, 
                               UInt32 inBufferCount, 
                               UInt32 *outCount, 
                               ISpElementReference *buffer); 
OSStatus ISpElementList_ExtractByKind(ISpElementListReference inElementList,
                               ISpElementKind theKind, 
                               UInt32 inBufferCount, 
                               UInt32 *outCount, 
                               ISpElementReference *buffer);
OSStatus ISpElementList_ExtractByLabel(ISpElementListReference inElementList,
                               ISpElementLabel theLabel, 
                               UInt32 inBufferCount, 
                               UInt32 *outCount, 
                               ISpElementReference *buffer);
</PRE>
<A NAME="HEADING228-85"></A>
<H2>Result Codes
<TABLE BORDER="0" CELLPADDING="3"><TD><CODE>kISpInternalErr</CODE><TD>-30420<TD>Internal error.<TR>
<TD><CODE>kISpSystemListErr</CODE><TD>-30421<TD>Operation is not allowed a system-maintained element list.<TR>
<TD><CODE>kISpBufferToSmallErr</CODE><TD>-30422<TD>The buffer is too small.<TR>
<TD><CODE>kISpElementInListErr</CODE><TD>-30423<TD>The element is already in the element list.<TR>
<TD><CODE>kISpElementNotInListErr</CODE><TD>-30424<TD>The element is not in the element list.<TR>
<TD><CODE>kISpSystemInactiveErr</CODE><TD>-30425<TD>InputSprocket is currently inactive.<TR>
<TD><CODE>kISpDeviceInactiveErr</CODE><TD>-30426<TD>The device is currently inactive.<TR>
<TD><CODE>kISpSystemActiveErr</CODE><TD>-30427<TD>Input Sprocket is currently active.<TR>
<TD><CODE>kISpDeviceActiveErr</CODE><TD>-30428<TD>The device is currently active.<TR>
<TD><CODE>kISpListBusyErr</CODE><TD>-30429<TD>The element list is marked as busy.</TABLE>
<A NAME="MARKER-2-177"></A></H2>
 <P>
</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="GameSprockets-227.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-229.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="GameSprockets-3.html">&copy; Apple Computer, Inc.</A><BR>2 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

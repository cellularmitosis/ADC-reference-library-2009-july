<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>HardDiskQInstall(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING286></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-285.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-287.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-230.html"><B>Chapter 6 - Power Manager</B></A> / <A HREF="Devices-233.html"><B>Power Manager Reference</B></A><BR><DL><DD><A HREF="Devices-263.html"><B>Power Manager Dispatch Routines</B></A> / <A HREF="Devices-279.html"><B>Controlling the Hard Disk</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING286-0></A>
<H3><A NAME=MARKER-9-318></A>HardDiskQInstall</H3>
 You can use the <CODE>HardDiskQInstall</CODE> function to notify your software when power to the internal hard disk is about to be turned off. <A NAME=MARKER-2-319></A><A NAME=MARKER-2-320></A><P>
<PRE>
OSErr HardDiskQInstall(HDQueueElement *theElement);
</PRE>
<DL>
<DT><CODE>theElement</CODE>
<DD> A pointer to an element for the hard disk power down queue.
</DL>
<A NAME=HEADING286-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>HardDiskQInstall</CODE> function installs an element into the hard disk power down queue to provide notification to your software when the internal hard disk is about to be powered off. For example, this feature might be used by the driver for an external battery-powered hard disk. When power to the internal hard disk is turned off, the external hard disk could be turned off as well.<P>
 When power to the internal hard disk is about to be turned off, the software calls the routine pointed to by the <CODE>hdProc</CODE> field so that it can do any special processing. The routine is passed a pointer to its queue element so that, for example, the routine can reference its variables.<P>
 Before calling <CODE>HardDiskQInstall</CODE>, the calling program must set the <CODE>hdQType</CODE> field to <CODE>HDPwrQType </CODE>or the queue element won't be added to the queue and <CODE>HardDiskQInstall</CODE> will return an error.<P>
<A NAME=HEADING286-8></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap is <CODE>_PowerMgrDispatch</CODE> ($A09E). The selector value for <CODE>HardDiskQInstall</CODE> is 10 ($0A) in the low word of register D0. The pointer to the <CODE>HDQueue</CODE> element is passed in register A0. The result code is returned in the low word of register D0. <P>
<A NAME=HEADING286-10></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error</TABLE>
</H5>
<A NAME=HEADING286-11></A>
<H5>SEE ALSO</H5>
 The <CODE>HDQueueElement</CODE> structure is defined in <A HREF=Devices-236.html#MARKER-9-171>"Hard Disk Queue Structure," on page 6-27</A>.<P>
 The application-defined hard disk spindown function is described in <A HREF=Devices-309.html#MARKER-9-372>"Hard Disk Spindown Function," on page 6-66</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-285.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-287.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

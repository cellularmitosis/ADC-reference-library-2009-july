<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Modifying Your Cyberdog Display Part Class(Cyberdog)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING33></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Cyberdog-32.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Cyberdog-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Cyberdog-319.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Cyberdog-34.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Cyberdog-2.html"><B>Cyberdog Programmer's Kit</B></A> / <A HREF="Cyberdog-20.html"><B>Part 2 - Programming in Cyberdog</B></A><BR><DD><A HREF="Cyberdog-32.html"><B>Chapter 5 - Embedding a Cyberdog Display Part in a Navigator</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING33-0></A>
<H1>Modifying Your Cyberdog Display Part Class</H1>
 To embed a a display part in a navigator, you can start with your existing Cyberdog display part class and modify it slightly. <A HREF=#MARKER-9-21>Listing 5-1</A> shows the portion of the embedded text-viewer part's class definition that defines both the new fields and methods and also the methods whose implementation must be modified to support embedding, as well as to support progress broadcasters and enable the navigator's Save a Copy, Page Setup, and Print commands. To enable the navigator's Save a Copy, Page Setup, and Print commands, you must also override the <CODE>HandleCommand</CODE> method of the associated part extension class. <P>
<B>Listing 5-1  <A NAME=MARKER-9-21></A>The <CODE>CybTxtNavViewer</CODE> class definition</B><P>
<PRE>
class CybTxtNavViewer {
public:
   CybTxtViewer();
   virtual ~CybTxtViewer();
   ...
   // Modified to embed a display part
   void OpenCyberItem(Environment *ev, CyberItem* item,
                              ODPart* openerPart,
                              ParameterSet* openParams);

   // Modified to enable Document menu items
   ODBoolean HandleCommand(Environment *ev, long commandCreator, 
                  long commandID, ODFrame* frame, void* cmdData);

   // Modified to attach or detach progress broadcasters
   void  DisplayFrameAdded(Environment* ev, ODFrame* frame);
   void  DisplayFrameRemoved(Environment* ev, ODFrame* frame);
   void  DisplayFrameClosed(Environment* ev, ODFrame* frame);
   void  DisplayFrameConnected(Environment* ev, ODFrame* frame);

   // Added to find an embedded part's navigator
   ODPart* GetContainingNavigator(Environment* ev);

   // Added to handle parameter set creation
   ParameterSet* AcquireCreateParameterSet(Environment* ev, 
                              ParameterSet* params);

   // Modified to add progress broadcaster capabilities
   void  InitiateDownload(Environment *ev, CyberItem* item, 
                      ParameterSet* openParams) 
   void PollStream(Environment* ev);

private:
   ...
   CyberProgressBroadcaster* fBroadcaster; // Reference to a progress
                                 // broadcaster object
   // Modified to abort download operations
   static void CyberAbortProc( CDAbortProcMessage msgCode,
                        CyberProgressBroadcaster* process, 
                        Ptr thisPtr);
   static CyberAbortUPP gMyCyberAbortUPP;
   }
</PRE>
 In the embedded text-viewer part sample, the <CODE>OpenCyberItem</CODE> method embeds the text-viewer. For more information see <A HREF=Cyberdog-34.html#MARKER-9-22>"Opening a Display Part Embedded in a Navigator" (page 149)</A>.<P>
 The <CODE>HandleCommand</CODE> method enables some of the navigator's Document menu items. For more information see <A HREF=Cyberdog-37.html#MARKER-9-59>"Enabling Menu Items From an Embedded Display Part" (page 161)</A>.<P>
 The GetContainingNavigator method returns a reference to the navigator in which the Cyberdog display part is embedded. See <A HREF=Cyberdog-35.html#MARKER-9-33>Listing 5-5 (page 154)</A>. The AcquireCreateParameterSet method encapsulates creation of a parameter set object. See <A HREF=Cyberdog-34.html#MARKER-9-30>Listing 5-3 (page 152)</A>. <P>
 The InitiateDownload method starts the download operation and creates the progress broadcaster object. The <CODE>PollStream</CODE> method reports progress during a download operation. The CyberAbortProc method is associated with the CyberAbortUPP callback procedure, which is used to abort a download operation. For more information about how these methods are used, see <A HREF=Cyberdog-73.html#MARKER-13-41>"Using a Progress Broadcaster" (page 154)</A>.<P>
 The fBroadcaster field is a reference to a progress broadcaster object. It is initialized in the <CODE>CybTxtNavViewer</CODE> constructor to kODNULL. The reference is deleted by the <CODE>CybTxtNavViewer</CODE> destructor. <P>
<DL>
<DT><B>Note</B>
<DD>The fCybTxtNavViewerCyberExt field has exactly the same purpose and use as the fCybTxtViewerCyberExt in <A HREF=Cyberdog-28.html#MARKER-9-19>Chapter 4, "Creating a Cyberdog Display Part,"</A> <A HREF=Cyberdog-28.html#MARKER-9-19>(page 115)</A>. <EM>u</EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Cyberdog-32.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Cyberdog-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Cyberdog-319.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Cyberdog-34.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Cyberdog-3.html">&copy; Apple Computer, Inc.</A><br>13 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>   

<html><head><title>Mac OS X
 Manual Page For restore(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/restore" title="Mac OS X
 Manual Page for restore(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/restore"; name=restore(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
RESTORE(8)                BSD System Manager's Manual               RESTORE(8)

<b>NAME</b>
     <b>restore</b>, <b>rrestore</b> -- restore files or file systems from backups made with dump

<b>ALERT</b>
     UFS SUPPORT IS IN THE PROCESS OF BEING DEPRECATED.  This copy of <b>restore</b> is supplied only for complete-<font color="#ffffff" class="whiteout">ness&nbsp;completeness</font>
     ness and is expected to have deficiencies.  It will likely disappear in the future.  Earlier versions
     were shipped with the SUID and SGID bits set; this is no longer the case, and <b>restore</b> must be run as
     root.

<b>SYNOPSIS</b>
     <b>restore</b> <b>-i</b> [<b>-chmvy</b>] [<b>-b</b> <u>blocksize</u>] [<b>-f</b> <u>file</u>] [<b>-s</b> <u>fileno</u>]
     <b>restore</b> <b>-R</b> [<b>-cvy</b>] [<b>-b</b> <u>blocksize</u>] [<b>-f</b> <u>file</u>] [<b>-s</b> <u>fileno</u>]
     <b>restore</b> <b>-r</b> [<b>-cvy</b>] [<b>-b</b> <u>blocksize</u>] [<b>-f</b> <u>file</u>] [<b>-s</b> <u>fileno</u>]
     <b>restore</b> <b>-t</b> [<b>-chvy</b>] [<b>-b</b> <u>blocksize</u>] [<b>-f</b> <u>file</u>] [<b>-s</b> <u>fileno</u>] [file ...]
     <b>restore</b> <b>-x</b> [<b>-chmvy</b>] [<b>-b</b> <u>blocksize</u>] [<b>-f</b> <u>file</u>] [<b>-s</b> <u>fileno</u>] [file ...]

     <b>rrestore</b> is an alternate name for <b>restore</b>.

     (The 4.3BSD option syntax is implemented for backward compatibility, but is not documented here.)

<b>DESCRIPTION</b>
     The <b>restore</b> command performs the inverse function of <a href="dump.8.html#//apple_ref/doc/man/8/dump">dump(8)</a>.  A full backup of a file system may be
     restored and subsequent incremental backups layered on top of it.  Single files and directory subtrees
     may be restored from full or partial backups.  <b>Restore</b> works across a network; to do this see the <b>-f</b>
     flag described below.  Other arguments to the command are file or directory names specifying the files
     that are to be restored.  Unless the <b>-h</b> flag is specified (see below), the appearance of a directory
     name refers to the files and (recursively) subdirectories of that directory.

     Exactly one of the following flags is required:

     <b>-i</b>      This mode allows interactive restoration of files from a dump.  After reading in the directory
             information from the dump, <b>restore</b> provides a shell like interface that allows the user to move
             around the directory tree selecting files to be extracted.  The available commands are given
             below; for those commands that require an argument, the default is the current directory.

             <b>add</b> [<u>arg</u>]   The current directory or specified argument is added to the list of files to be
                         extracted.  If a directory is specified, then it and all its descendents are added
                         to the extraction list (unless the <b>-h</b> flag is specified on the command line).
                         Files that are on the extraction list are prepended with a ``*'' when they are
                         listed by <b>ls</b>.

             <b>cd</b> <u>arg</u>      Change the current working directory to the specified argument.

             <b>delete</b> [<u>arg</u>]
                         The current directory or specified argument is deleted from the list of files to be
                         extracted.  If a directory is specified, then it and all its descendents are
                         deleted from the extraction list (unless the <b>-h</b> flag is specified on the command
                         line).  The most expedient way to extract most of the files from a directory is to
                         add the directory to the extraction list and then delete those files that are not
                         needed.

             <b>extract</b>     All the files that are on the extraction list are extracted from the dump.  <b>Restore</b>
                         will ask which volume the user wishes to mount.  The fastest way to extract a few
                         files is to start with the last volume, and work towards the first volume.

             <b>help</b>        List a summary of the available commands.

             <b>ls</b> [<u>arg</u>]    List the current or specified directory.  Entries that are directories are appended
                         with a ``/''.  Entries that have been marked for extraction are prepended with a
                         ``*''.  If the verbose flag is set the inode number of each entry is also listed.

             <b>pwd</b>         Print the full pathname of the current working directory.

             <b>quit</b>        Restore immediately exits, even if the extraction list is not empty.

             <b>setmodes</b>    All the directories that have been added to the extraction list have their owner,
                         modes, and times set; nothing is extracted from the dump.  This is useful for
                         cleaning up after a restore has been prematurely aborted.

             <b>verbose</b>     The sense of the <b>-v</b> flag is toggled.  When set, the verbose flag causes the <b>ls</b> com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
                         mand to list the inode numbers of all entries.  It also causes <b>restore</b> to print out
                         information about each file as it is extracted.

     <b>-R</b>      <b>Restore</b> requests a particular tape of a multi volume set on which to restart a full restore
             (see the <b>-r</b> flag below).  This is useful if the restore has been interrupted.

     <b>-r</b>      Restore (rebuild a file system).  The target file system should be made pristine with <a href="newfs.8.html#//apple_ref/doc/man/8/newfs">newfs(8)</a>,
             mounted and the user cd'd into the pristine file system before starting the restoration of the
             initial level 0 backup. If the level 0 restores successfully, the <b>-r</b> flag may be used to
             restore any necessary incremental backups on top of the level 0.  The <b>-r</b> flag precludes an
             interactive file extraction and can be detrimental to one's health if not used carefully (not
             to mention the disk). An example:

                   newfs /dev/rrp0g eagle
                   mount /dev/rp0g /mnt
                   cd /mnt

                   restore rf /dev/rst8

             Note that <b>restore</b> leaves a file <u>restoresymtable</u> in the root directory to pass information
             between incremental restore passes.  This file should be removed when the last incremental has
             been restored.

             <b>Restore</b>, in conjunction with <a href="newfs.8.html#//apple_ref/doc/man/8/newfs">newfs(8)</a> and <a href="dump.8.html#//apple_ref/doc/man/8/dump">dump(8)</a>, may be used to modify file system parameters
             such as size or block size.

     <b>-t</b>      The names of the specified files are listed if they occur on the backup.  If no file argument
             is given, then the root directory is listed, which results in the entire content of the backup
             being listed, unless the <b>-h</b> flag has been specified.  Note that the <b>-t</b> flag replaces the func-<font color="#ffffff" class="whiteout">tion&nbsp;function</font>
             tion of the old <!-- a -->dumpdir(8)<!-- /a --> program.

     <b>-x</b>      The named files are read from the given media.  If a named file matches a directory whose con-<font color="#ffffff" class="whiteout">tents&nbsp;contents</font>
             tents are on the backup and the <b>-h</b> flag is not specified, the directory is recursively
             extracted.  The owner, modification time, and mode are restored (if possible).  If no file
             argument is given, then the root directory is extracted, which results in the entire content of
             the backup being extracted, unless the <b>-h</b> flag has been specified.

     The following additional options may be specified:

     <b>-b</b> <u>blocksize</u>
             The number of kilobytes per dump record.  If the <b>-b</b> option is not specified, <b>restore</b> tries to
             determine the block size dynamically.

     <b>-c</b>      Normally, <b>restore</b> will try to determine dynamically whether the dump was made from an old
             (pre-4.4) or new format file system.  The <b>-c</b> flag disables this check, and only allows reading
             a dump in the old format.

     <b>-f</b> <u>file</u>
             Read the backup from <u>file</u>; <u>file</u> may be a special device file like <u>/dev/rmt12</u> (a tape drive),
             <u>/dev/rsd1c</u> (a disk drive), an ordinary file, or `<b>-</b>' (the standard input).  If the name of the
             file is of the form ``host:file'', or ``user@host:file'', <b>restore</b> reads from the named file on
             the remote host using <a href="rmt.8.html#//apple_ref/doc/man/8/rmt">rmt(8)</a>.

     <b>-h</b>      Extract the actual directory, rather than the files that it references.  This prevents hierar-<font color="#ffffff" class="whiteout">chical&nbsp;hierarchical</font>
             chical restoration of complete subtrees from the dump.

     <b>-m</b>      Extract by inode numbers rather than by file name.  This is useful if only a few files are
             being extracted, and one wants to avoid regenerating the complete pathname to the file.

     <b>-s</b> <u>fileno</u>
             Read from the specified <u>fileno</u> on a multi-file tape.  File numbering starts at 1.

     <b>-v</b>      Normally <b>restore</b> does its work silently.  The <b>-v</b> (verbose) flag causes it to type the name of
             each file it treats preceded by its file type.

     <b>-y</b>      Do not ask the user whether to abort the restore in the event of an error.  Always try to skip
             over the bad <!-- a -->block(s)<!-- /a --> and continue.

<b>DIAGNOSTICS</b>
     Complaints if it gets a read error.  If <b>-y</b> has been specified, or the user responds `y', <b>restore</b> will
     attempt to continue the restore.

     If a backup was made using more than one tape volume, <b>restore</b> will notify the user when it is time to
     mount the next volume.  If the <b>-x</b> or <b>-i</b> flag has been specified, <b>restore</b> will also ask which volume the
     user wishes to mount.  The fastest way to extract a few files is to start with the last volume, and
     work towards the first volume.

     There are numerous consistency checks that can be listed by <b>restore</b>.  Most checks are self-explanatory
     or can ``never happen''.  Common errors are given below.

     Converting to new file system format.
             A dump tape created from the old file system has been loaded.  It is automatically converted to
             the new file system format.

     &lt;filename&gt;: not found on tape
             The specified file name was listed in the tape directory, but was not found on the tape.  This
             is caused by tape read errors while looking for the file, and from using a dump tape created on
             an active file system.

     expected next file &lt;inumber&gt;, got &lt;inumber&gt;
             A file that was not listed in the directory showed up.  This can occur when using a dump cre-<font color="#ffffff" class="whiteout">ated&nbsp;created</font>
             ated on an active file system.

     Incremental dump too low
             When doing incremental restore, a dump that was written before the previous incremental dump,
             or that has too low an incremental level has been loaded.

     Incremental dump too high
             When doing incremental restore, a dump that does not begin its coverage where the previous
             incremental dump left off, or that has too high an incremental level has been loaded.

     Tape read error while restoring &lt;filename&gt;
     Tape read error while skipping over inode &lt;inumber&gt;
     Tape read error while trying to resynchronize
             A tape (or other media) read error has occurred.  If a file name is specified, then its con-<font color="#ffffff" class="whiteout">tents&nbsp;contents</font>
             tents are probably partially wrong.  If an inode is being skipped or the tape is trying to
             resynchronize, then no extracted files have been corrupted, though files may not be found on
             the tape.

     resync restore, skipped &lt;num&gt; blocks
             After a dump read error, <b>restore</b> may have to resynchronize itself.  This message lists the num-<font color="#ffffff" class="whiteout">ber&nbsp;number</font>
             ber of blocks that were skipped over.

<b>FILES</b>
     /dev/rmt?          the default tape drive
     /tmp/rstdir*       file containing directories on the tape.
     /tmp/rstmode*      owner, mode, and time stamps for directories.
     ./restoresymtable  information passed between incremental restores.

<b>SEE</b> <b>ALSO</b>
     <a href="dump.8.html#//apple_ref/doc/man/8/dump">dump(8)</a>, <a href="newfs.8.html#//apple_ref/doc/man/8/newfs">newfs(8)</a>, <a href="mount.8.html#//apple_ref/doc/man/8/mount">mount(8)</a>, <!-- a -->mkfs(8)<!-- /a -->, <a href="rmt.8.html#//apple_ref/doc/man/8/rmt">rmt(8)</a>

<b>BUGS</b>
     <b>Restore</b> can get confused when doing incremental restores from dumps that were made on active file sys-<font color="#ffffff" class="whiteout">tems.&nbsp;systems.</font>
     tems.

     A level zero dump must be done after a full restore.  Because restore runs in user code, it has no con-<font color="#ffffff" class="whiteout">trol&nbsp;control</font>
     trol over inode allocation; thus a full dump must be done to get a new set of directories reflecting
     the new inode numbering, even though the contents of the files is unchanged.

<b>HISTORY</b>
     The <b>restore</b> command appeared in 4.2BSD.

4th Berkeley Distribution         May 1, 1995        4th Berkeley Distribution
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/restore.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/restore.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/restore.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

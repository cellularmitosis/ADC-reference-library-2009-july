<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note PT520: Installer Q&amp;As</title>                                       <meta name="categories" content="Platforms and Tools"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002697" title="Installer Q&As"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxTools-date.html">Tools</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Java/idxTools-date.html" target="_blank">Reference Library > Tools</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note PT520</div>
<div id="pageheadsub">Installer Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id="introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <A HREF = "../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1990]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Solutions for aborted network install</h2><p>My installation process works great from a floppy disk; however, when I try tocreate a network install from these disks, the Installer reports that one ofthe file can't be found and aborts the installation. What's up?</p><P>The following conditions probably are true for your installation:</p><ol type="1" start="1">	<li>The AppleShare volume being used for the network install is a Novell server.</li>	<li>Within the Installer script source file for some <Code>'infs'</code> source file specification resource, the creation date/time stamp field has been set to 1 or some other nonzero odd value (1 tells <Code>ScriptCheck</code> to fill in the field for you).</li>	<li>The creation date/time stamp for a file specified in condition 2 above falls on an odd second.</li></ol><p>So what do these three conditions have to do with each other? Condition 2, thenonzero value for the date/time stamp field, tells the Installer to verify thefiles actual date/time with that stored in the <code><Code>'infs'</code></code> resource. If the valuesdon't match, the Installer reports that the file couldn't be found. On Novellservers, the time stamp granularity is two seconds. When you copy a Macintoshfile whose time stamp ends in an odd second to a Novell server, the externalfile system for the Novell server adjusts the time stamp to an even second.This one second difference is enough to tell the Installer that the found filedoesn't match. This assumes that the server and the workstation have theirsystem clocks set to within 15 minutes of each other. The <code>'incd'</code> resourceQ&amp;A in the Installer Appendix describes how the time difference is handledwhen the two clocks differ by more than 15 seconds.</p><p>There are a couple of solutions to this problem. The first is to set the valueof the date/time stamp fields for all <code><Code>'infs'</code></code> resources to 0. This means thatthe Installer will not verify that the right file is being used, except by thename and location of a source file. Another solution is to use the MPW tools orResEdit to make sure that the date/time stamp for all source files is even. TheInstaller Q&amp;A Appendix discusses another special case to consider.</p><h2>Why Finder requests program disks after installation</h2><P>Date Written:   2/5/93</p><P>Last reviewed: 7/2/93</p><p>I just wrote an installer script for the Apple Installer version 3.4. After theinstallation is complete and I click the Quit button, the Finder insists onmounting both of the disks that were used in the installation. It gives me theannoying dialog "Please insert the disk Install 1" and "Please insert the diskProgram 1." Before I did the installation, only the Install 1 disk was mountedby the Finder. Why is this happening?</p><P>This situation typically occurs when the installer disk sets were created underSystem 7 and the installation is happening under system software version 6.0.x.Its cause is that the system is trying to update the second disk's desktop. Thesolution in this case is to insert the disk into a system running version 6.0.xbefore performing the installation.</p><p>Another possible cause for this problem is that the second disk opens todisplay a window by default. When the Installer quits, there's still "residue"Finder information to be written to the second disk, which has since beenejected. The solution in this case is to insert the second disk with the writetab lock disabled, and close any open window associated with that disk.</p><h2>Order of actAfter and Installer 'inaa' and 'inat' atoms</h2><P>Date Written:  1/5/93</p><P>Last reviewed:  4/1/93</p><p>When an installation package contains</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>   'inaa', 205,/*Restore 'eadr' resource*/</pre>	</TD></TR></TABLE></CENTER><P>is the order of occurrence of these two atoms important? Will the <code>'inaa'</code> alwayshappen<i> after</i> or <i>before</i> the <code>'inat'</code>? The documentation isn't clearwhether the <code>actAfter</code> is really after <i>everything;</i> my experience shows itisn't.</p><P>You're right, the <code>'inat' </code>resources are installed following the call to the lastpostinstallation action atom.</p><h2>No difference between addAuditRec and installing an 'inat' resource</h2><P>Date Written:  1/5/93</p><P>Last reviewed:  6/14/93</p><p>What's the difference between an <code>addAuditRec</code> and installing an <code>'inat'</code>? Thedocumentation doesn't mention the two in the same sentence.</p><P>There is no difference. The <code>AddAuditRec</code> clause and the <code>'inat'</code> resource doexactly the same thing.</p><h2>Installer sample shows how to install fonts by strikes</h2><P>Date Written:  11/17/92</p><P>Last reviewed:  6/14/93</p><p>Is there an Installer sample demonstrating how to install fonts by strikes?</p><P>Yes, check the Installer samples folder on the latest <i>Developer CDSeries</i> disc. By the way, if you ever get the error "There's a problem withthe Installer Document &lt;document name&gt;" and you're installing fonts, onepossible reason for the error is that the script doesn't have the sizes of thesplit resource size matching those of the actual resource exactly.</p><h2>Installing to the startup System Folder</h2><P>Date Written:  8/17/92</p><P>Last reviewed:  6/14/93</p><p>When installing on a system that has multiple volumes and a user selects anonboot volume on which to perform the installation, is there a way to specifythat specific files or resources get installed to the boot blessed folder andsystem?</p><P>Unfortunately, no. The Installer is designed to install all components of theinstallation to the target volume specified by the user. The Installer scriptwriter can specify that a blessed system folder exist on the target volume, orthat specific files exist before installing a resource; however, these actionswork only for a single volume. This suggestion has been passed to the Installerengineering team for their consideration for a future version of theInstaller.</p><p>A sample action atom code resource is included with the Installer kit on thelatest Developer CD to demonstrate a method for installing files to the bootblessed system folder. The code resource takes as an argument, the resource IDof an 'infa' file atom to access the source and target <Code>'infs'</code> filespecification resources. There are several caveats associated with using thissample; however, it may provide a starting sample for implementing suchfunctionality.</p><h2>Implementing Installer file compression</h2><P>Date Written:  8/17/92</p><P>Last reviewed:  6/14/93</p><p>Does the Installer provide any utility routines for compressing files, anddecompressing them on installation?</p><P>The Installer does not provide any built-in capabilities for compressing filesnor for decompressing files on installation. The Installer does implement anaction atom mechanism, by which the developer can write custom code resourcesto run before or after an installation process. Based on this mechanism,several developers have implemented custom code resources to handle thedecompression of compressed files. A typical process is to compress the fileusing a compression application. The Installer script is written to install thecompressed files to the target disk. The decompression code resource is runafter the installation process is complete to decompress the files. A list ofdevelopers who license such decompression code resources is available onrequest from Developer Support. Please note that the list does not constituteany endorsement by Apple of these products.</p><p>If you've already implemented a file decompression action atom code resource,you'll find the new MPW <Code>ScriptCheck</code> tool version 3.4b2 includes some importantfeature enhancements. The most significant feature is that <Code>ScriptCheck</code> version3.4 can set to leave the size field of the 'infa', file atom resource alone, ifthe size is nonzero. The Installer uses the size field to determine the diskspace required for the installation. An important problem experienced by scriptwriters concerned the fact that <Code>ScriptCheck</code> overrode the size field setting ofthe 'infa' resource to that of the size of the compressed file. If left alone,the Installer would preflight the target disk for simply the amount of diskspace to copy the compressed file only. This forced script writers to edit thescript afterwards to replace the size field with the actual value of theuncompressed file.</p><p>Another important enhancement of <Code>ScriptCheck</code> 3.4b2 is that it now recognizesthe 'inff' font family atom, and the version 1 action atom resource. Moreinformation about <Code>ScriptCheck</code> 3.4b2 is in the <Code>ScriptCheck</code> Guide for 3.4b2 nowavailable on the latest Developer CD. Note that <Code>ScriptCheck</code> 3.4b2 is compatiblewith Installer 3.3 and 3.4 scripts--that is, scripts whose file types andcreators are 'bbkr'.</p><h2>Opening a Macintosh Finder window from an Installer action atom</h2><P>Date Written:  8/14/92</p><P>Last reviewed:  11/30/92</p><p>My installer creates a folder on a user's hard disk and copies the necessaryfiles into it. My final action atom moves the folder onto the desktop and setsits size and location. I'd also like to be able to open the folder. I call<Code>PBGetCatInfoSync</code> to get the data into a <Code>PBGetCatInfoSync</code> record. Where is the stateof a folder (open/closed) stored, and can I set one of the parameters in the<Code>PBGetCatInfoSync</code> and then call <Code>PBSetCatInfoSync</code> to solidify the change? Using theinstaller to copy an open folder to the user's drive is unacceptable because ofthe size and nature of the program I'm installing.</p><P>There's no solution for System 6; the Finder data structures are private, andthere's no call to open a folder. In System 7, you can send the Finder an OpenSelection Apple event. This is described in a HyperCard stack calledFinderEvents on the <i>Developer CD Series</i> disc. The stack also containsthe source code for the XCMD used to demonstrate the Finder events. There'sanother sample that you should see as well: SendFinderOpen in the Snippetsfolder.</p><h2>Installer cleanUpCancel mechanism</h2><P>Date Written:  7/20/92</p><P>Last reviewed:  11/1/92</p><p>The document for Installer 3.2 describes the use of the <code>whichStage</code> field (ofthe action atom parameter block) to determine what stage the Installer is in(before, after, or <code>cleanUpCancel</code>). I want to use the <code>cleanUpCancel</code> stage to dosome cleaning up of a preinstallation action atom should the installation becancelled. If I cancel (at any point during) the installation, my action atomis not run, however, only the <code>cleanUpCancel</code> code executed. Determining whatstage your action atom is running in seems straightforward, but how does theInstaller differentiate between "running" and "sending a cancel message" to anaction atom? Are there 'inaa' resource flags that need to be set to enable anaction atom to run during cleanup?</p><P>It turns out that this feature was broken under Installer 3.2. Under Installer3.3, the mechanism works; however, the way it works is not clearly documented.One might think that the <code>cleanUpCancel</code> mechanism applies only to the coderesource in which it's implemented, that you would need to install a procedureto act on cleanUpCancel in each action atom that gets installed. In fact, themechanism is independent of whether an action atom is successful or not underInstaller 3.3 </P><P>If, for whatever reason, an installation is aborted, the Installer does its owncleanup, then searches for all action atoms marked by the flag actAfter. Theseaction atoms are then sent the <code>cleanUpCancel</code> message. In fact, there need onlybe one action atom to respond in such a manner. However, to be called, the<code>'inaa'</code> resource that calls the code resource <i>must</i> have the "actAfter"flag set.</p><p>To resolve your situation, there are two things to be done: Use Installer 3.3,<i>and</i> include a second <code>'inaa'</code> resource marked as "actAfter" and have itreference the same code resource as the original <code>'inaa'</code>. Modify the coderesource so that it checks the <code>whichStage</code> field and executes the cleanup codeonly if the <code>whichStage</code> field is set to <code>cleanUpCancel</code>. In fact a symptom that isreported on occasion is the fact that postinstallation action atom coderesource sometimes gets executed twice. This symptom occurs because an errorwas detected sometime during or after the execution of the postinstallationaction atom and the code resource does not distinguish between stages. If, forinstance, the postinstall code resource reported an error, the Installer wouldthen find that the action atom is set for <code>actAfter</code> and call the code resource asecond time with the whichStage field set to <code>cleanUpCancel</code>.</p><h2>Use preinstallation action atom to protect user prefs file</h2><P>Date Written:  2/25/92</p><P>Last reviewed:  6/14/93</p><p>How can I keep the Macintosh Installer script from replacing a newer file? Thevarious flag settings that I've tried always result in the target file beingreplaced by the source file.</p><P>The Installer uses the creation date/time stamp (as opposed to the modificationdate/time stamp) to determine whether the target file is newer than the sourcefile. If the target file has the same or earlier date/time stamp as does thesource file on the installation disk, the file is replaced.</P><P>To control the installation of a file based on modification date requires anaction atom. The function of the action atom code resource could range fromhalting the installation if the target file is greater than the source file, toperforming the actual file copy. Unfortunately, there isn't a method for simplybypassing the installation of a single file or package. The Installerengineering group is looking into ways of handling this feature for a futurerelease of the Installer.</p><h2>Macintosh Installer 3.2 &amp; 3.3 live installation handling</h2><P>Date Written:  3/2/92</p><P>Last reviewed:  8/19/92</p><p>I'm writing a preinstallation action atom to save some information from anexisting Macintosh file that my script will later replace. When I do a liveinstall, the file appears to have already been deleted. What's happening?</p><P>Installers 3.2 and 3.3 treat live installations differently from installationsto nonboot volumes. To be able to restore the boot volume, should theinstallation be canceled or be unsuccessful, the Installer moves all filesdesignated for replacement, deletion, or modification into the Installer Tempfolder in the System Folder. The preinstallation action atom can make use oftwo parameters passed in the parameter block to access files in the temporaryfolder. The <code>didLiveUpdate</code> flag indicates whether a live installation has beenselected. The <code>installerTempDirID</code> is the <code>DirID</code> of the temporary folder. Youraction atom code resource should check the <code>didLiveUpdate</code> flag. If true, thensearch for the desired file in the desired folder specified by<code>installerTempDirID</code>.</p><h2>Bypassing Macintosh Installer's creation date check</h2><P>Date Written:  1/23/92</p><P>Last reviewed:  6/14/93</p><p>How can I get the Macintosh Installer to bypass checking the creation date ofsource files when preflighting an installation?</p><P>Normally, the Installer checks that the source files exist by the namespecified in the <Code>'infs'</code> resource and that the creation date/time stamp matchesthat specified in the resource as well. To bypass the second check, set thecreation date field to zero. In addition, do <i>not</i> use the -d switch with<Code>ScriptCheck</code>, which forces updating of the date field.</p><h2>Macintosh resources: Dynamic installation and deletion</h2><P>Date Written:  1/23/92</p><P>Last reviewed:  8/19/92</p><p>I've written an Installer script that has an <code>'infa'</code> file atom to copy a newfile, and then uses <code>'inra'</code> resource atoms to delete resources from that file.When I finish the installation process and open the file with ResEdit, the filestill contains the resources designated for deletion. Why?</p><P>When performing an installation, the Installer performs these general steps:</p><ol type="1" start="1">	<li>The Installer identifies all the resource and file atoms to be installed and determines whether there is sufficient target disk space. The Installer also takes into consideration that files designated for deletion will be copied into the temporary folder (for live installations only), so that the installation can be undone.</li>	<li>Preinstallation action atoms are run.</li>	<li>The Installer deletes all specified resources and files, (or moves them into the temporary folder for live installs), plus asks the user whether newer files will be replaced. After performing this function, the Installer assumes all deletions are finished.</li>	<li>The Installer performs the installation of all designated files and resources.</li></ol><p>The Installer handles the resource deletions first. Since the file doesn'texist or is already deleted, the deletion resource atoms are consideredsuccessful. The Installer assumes the installed files are already set asneeded; that there's no need to delete resources from the file. As a result,resources, specified for deletion on a newly installed file, aren't deleted.</p><h2>How Installer computes target volume storage size requirement</h2><P>Date Written:  12/19/91</p><P>Last reviewed:  8/19/92</p><p>How does the Macintosh Installer compute the storage size requirement for atarget volume?</p><P>The Installer creates a list of all files and resources that are to beinstalled. It then goes to each corresponding <Code> 'inra'</code> and <Code>'infa'</code> resource (and'inff' resource for version 3.3), and sums up the size fields. If a liveinstall is being performed, a check is also made to determine the size ofactive files, such as the System file, that need to be duplicated. The sizes ofsuch files are added to the installation size requirement. For this reason,it's difficult to perform a live install onto a floppy startup disk, even iffor a small resource. There is generally insufficient floppy disk space to makea copy of the active System file.</p><h2>Macintosh Installer and Apple event support</h2><P>Date Written:  12/10/91</p><P>Last reviewed:  6/14/93</p><p>Does the Macintosh Installer support Apple events? We would like to launchInstaller and have it install automatically when we send it the appropriateApple event.</p><P>Installer Version 3.4 and earlier does not support Apple events; however,support for Apple events is being considered for a future version of theInstaller.</p><h2>Files for Installer postinstallation action atom</h2><P>Date Written:  12/10/91</p><P>Last reviewed:  6/14/93</p><p>When a postinstallation action atom gets control, can we assume that all of thefiles the atom will work with are on the hard disk?</p><P>You may assume that all of the file and resource atoms included in the packageresources have been fired and all files and resources designated forinstallation by these atoms have been copied to the target disk.</p><h2>Installer and finding a source file by type and creator </h2><P>Date Written:  11/27/91</p><P>Last reviewed:  6/14/93</p><p>Can a Macintosh Installer script be written so a source file is found by itsfile and creator type rather than by name?</p><P>No. The Installer is not designed to find a source file by type and creator.However, we've passed your suggestion along to the the Installer engineeringteam.</p><h2>checkFileVersion clause and 'inrl' resource</h2><P>Date Written:  9/30/91</p><P>Last reviewed:  6/14/93</p><p>How can I check for the existence of a minimum Macintosh file version?</p><P>Use the <code>checkFileVersion</code> clause as part of the <code>'inrl'</code> Rules Framework resource.The format of the minimal-version parameter is shown in the InstallerTypes.rfile as "#define Version." The most common difficulties are in remembering thatBCD values are required, and how to deal with two-digit version numbers. Somesamples follow.</p><p>Assuming that the <Code>'infs'</code> target-filespec resource for the System file is 1000,then use the following clause to check for System 6.0.5:</p><p>Assuming that the <Code>'infs'</code> target-filespec resource for the Finder file is 1001,then use the following clause to check for Finder 6.1.5:</p><p>Assuming that the <Code>'infs'</code> target-filespec resource for the AppleTalk resourcefile is 1002, then use the following clause to check for AppleTalk version53:</p><h2>Why multiple <Code>'DRVR'</code> resources for DA installation</h2><P>Date Written:  9/30/91</p><P>Last reviewed:  8/19/92</p><p>My Macintosh Installer script installs a desk accessory. Under System 6, eachtime I run the script, a new copy of the DA appears as a <Code>'DRVR'</code> resource in theSystem file. Why?</p><P>This happens when the <code>dontDeleteWhenInstalling</code> flag is used in conjunction withthe <code>updateExisting</code> flag. The Installer 3.1 and 3.2 Scripting Guide indicatesthat resources marked with the <code>dontDeleteWhenInstalling</code> flag can be replacedwith a new resource. The guide also indicates that the Installer will overwritea preexisting resource in the target file if the <code>updateExisting</code> flag is set.Given these two flag settings, and the use of the replace <code>byName</code> (<code>noByID</code>) flag,the Installer does not delete the DA. Instead a new <Code>'DRVR'</code> resource is createdwith the same name but a new resource ID.</p><p>The correct Installer action is accomplished by setting the<code>deleteWhenInstalling</code> flag in conjunction with the <code>updateExisting</code> flag. On theother hand, use the <code>dontDeleteWhenInstalling</code> flag with the <code>keepExisting</code> flag.</p><h2>Including current Mac volume name with reportVolError alert</h2><P>Date Written:  9/30/91</p><P>Last reviewed:  6/14/93</p><p>In my Installer script, how can I include the current volume name in a<code>reportVolError</code> alert, as many of the installation scripts from Apple do?</p><P>The volume name can be included by inserting "^0" as part of the Pascal stringpassed to the <code>reportVolError</code> error-reporting clause.</p><h2>Macintosh 'incd' resource</h2><P>Date Written:  9/30/91</p><P>Last reviewed:  8/19/92</p><p>What is the <code>'incd'</code> resource about?</p><P>When the MPW <Code>ScriptCheck</code> tool is used, it reads the script's file creationdate/time stamp converting it into a long word with the <code>Date2Secs</code> procedure.<Code>ScriptCheck</code> stores this long word in the <code>'incd'</code> resource for use with verifyingfiles when a network installation is performed.</p><h2>Macintosh Installer preflight checks</h2><P>Date Written:  9/30/91</p><P>Last reviewed:  8/19/92</p><p>What checks are made by the Installer when preflighting an installation?Occasionally the alert "Could not find a required file..." occurs and theinstallation is aborted.</p><P>The Installer compiles a list of the source file specifications from each ofthe resource <Code> 'inra'</code> and file <Code>'infa'</code> atoms specified among the package 'inpk'atoms included for installation. Each source file specification includes acomplete path name. As each source file is accessed, a check is made of thefile's creation date/time stamp with the date/time stamp recorded in thecorresponding <Code>'infs'</code> resource. If the date/time stamps do not match, the alertresults and the installation is aborted.</p><h2>Network installation setup considerations</h2><P>Date Written:  9/30/91</p><P>Last reviewed:  8/19/92</p><p>What are some of the considerations when configuring a network installationsetup?</p><P>Under Installer 3.1 or 3.2, network software installations are made possible bysetting up an installation folder on the server volume. This folder willcontain the Installer application, the Script file, and a folder(s) matchingthe names of the required disk(s). Within the disk folder(s) are thecorresponding contents of the disk(s).</p><p>One of the engineering problems that needed to be dealt with can occur when aworkstation is used to create the server installation folder. The problemoccurs when the system date and time differ significantly between theworkstation and the server. Under such a condition, files copied from theworkstation to the server may have their creation and modification date timestamps altered. If a modification is made, the "delta" is constant for both thecreation and modification date/time stamp and for all files copied at thattime.</P><P>The Installer preflights a file by comparing its creation date/time stamp withthe value stored in the corresponding <Code>'infs'</code> resource in the script file. Tocompensate for the fact that a server may alter a file's creation date/timestamp, the Installer implements the <code>'incd'</code> resource. After the user selects theInstall button, the Installer reads the 'incd' resource and compares it withthe script file's creation date/time stamp. The difference is stored as thedelta. On a normal disk installation, the delta is always zero. As theInstaller finds each required source file, the file's creation date/time stampis converted to a long word and adjusted by the delta. The modified date/timestamp is then compared with that stored in the script file. If the valuesmatch, the file is considered found and the installation proceeds. On networkinstallations, the delta may be nonzero. If so, it indicates that the file'screation date/time stamps were modified when copied to the server. Thus the'incd' resource gives the Installer a way to maintain file verification eventhough the date/time stamp may be altered.</p><p>A specific problem can occur when an installation is set up on some systemsrunning older versions of Novell server software. Under specific conditions,files copied to some Novell servers have their creation time stamp altered to12:00 AM regardless of the original time stamp. This includes the creation timestamp of the script file. This condition wreaks havoc with the Installer'spreflight mechanism. The delta determined between the <code>'incd'</code> resource and theScript file's creation date/time stamp may not be consistent with the creationdate/time stamp stored in the <Code>'infs'</code> resource and the corresponding file's timestamp now at 12:00 AM.</p><p>A workaround solution for this problem is to set the creation date/time stampfor all files on the installation disk to 12:00 AM, BEFORE running the<Code>ScriptCheck</code> tool. Use the MPW tool SetFile to perform this function. Here's asample MPW script for performing this function:</p><p>This script assumes that the current directory is set to the root of theInstallation disk. For multiple disks, run this script on each disk.</p><h2>Installer 3.2 and preserving a file's locked bit</h2><P>Date Written:  8/28/91</p><P>Last reviewed:  8/19/92</p><p>When using the Apple Installer 3.2, source files that are locked becomeunlocked when the Installer copies them to their destination. The installerpreserves some of the other file attribute bits but not the locked bit. How canI preserve the locked bit? Will I have to write an action atom?</p><P>The problem here is that the locked bit is a Finder information setting. Wereyou to have your own Finder comments associated with a file source, you wouldfind that these comments would not be "installed" along with the file.</p><p>A solution to the problem is to implement an action atom code resource.Specifically, a sample code resource is now available in the Installer kitavailable on the latest Developer CD. The code resource takes the target <Code>'infs'</code>resource as an argument to specify the file on which to set the lock bit. Notethat the Installer will abort an installation if an existing file to bereplaced is locked. Locking a file means that for a future installation, youwill need to tell the user to unlock the file manually before running theinstallation.</p><h2>How Macintosh Installer locates source files</h2><P>Date Written:  8/28/91</p><P>Last reviewed:  8/19/92</p><p>I notice that if I change the name of the installation disk, the Installer isstill able to find the source files. How does this work? I'm writing an actionatom code resource and I want to duplicate the source file-finding schemeimplemented by the Installer, as described on page 30 of the<i> Installer3.1/3.2 Scripting Guide.</i></p><P>The Installer takes the source file specification and parses off the volumename, leaving the filepath from the root of the source volume. It then searchesfor the filespec using this parsed file name from the root of the sourcevolume. If the file is not found, the search order continues with the followingguidelines:</p><ol type="1" start="1">	<li>Search for a folder with the disk's name at the same HFS level as the Installer.</li>	<li>Search for a folder with the disk's name at the root level of the Installer's volume.</li>	<li>Ask for the floppy disk.</li></ol><p>In this manner, the Installer is able to install from disk copies of Installerdisks when the disk name has been changed. Note that the documentation mentionsa fourth guideline, that the Installer searches for a folder with the disk'sname at the same HFS level as the script file. This information is incorrect.Neither version 3.2 nor 3.3 implements this guideline.</p><h2>Macintosh Installer 3.2 makes backup copies of active files</h2><P>Date Written:  7/10/91</p><P>Last reviewed:  8/19/92</p><p>If I start up from an 800K floppy disk with only the Macintosh System andFinder files living on it (leaving some 350K of space free), and then try touse Installer 3.2 to move a 130K cdev and an 8K <code>'adbs'</code> resource, I get amessage that not enough disk space is available on the startup floppy disk.Installer says I need some 505K of space available, yet I am copying less than150K. Why is this happening?</p><P>This results from the "live install" feature of the Installer. Because thefloppy disk System file will be written to in this scenario, the Installerfirst attempts to make a backup copy of the system. This means that there needsto be additional disk space on the startup disk for a copy of all files to berevised--in this case, the System file on the floppy drive. The floppy disk,most likely, does not contain sufficient room to hold a copy of the Systemfile. If the system is started up from a different disk, the Installer installsthe new resources into the inactive System file on a floppy disk withoutcreating a backup.</p><br>         <a name=Downloads></A>                  <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (54K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/pt_520.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/pt/pt_520.html%3Fid%3DDTS10002697-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/pt/pt_520.html%3Fid%3DDTS10002697-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/pt/pt_520.html%3Fid%3DDTS10002697-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
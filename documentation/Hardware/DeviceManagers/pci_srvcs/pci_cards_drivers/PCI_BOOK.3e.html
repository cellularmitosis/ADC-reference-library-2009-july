<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Device Drivers</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.3c.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.3d.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.3f.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=3360"> </A><A NAME="39211"> </A>Device Drivers</H1><P CLASS="T1.Text1"><A NAME="pgfId=3361"> </A>The Open Firmware startup process and all possible operating systems constitute separate <A NAME="marker=3362"> </A><B CLASS="bold">device environments.</B> A separate driver is normally required for each device environment in which a device is expected to work. In rare cases, an operating system may be written so that it uses an Open Firmware driver or a driver for another operating system. </P><P CLASS="T1.Text1"><A NAME="pgfId=3364"> </A>The following rules govern the requirements for <A NAME="marker=3363"> </A>device drivers in Power Macintosh computers that support the Open Firmware startup process:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=3365"> </A>As explained in the previous section, Open Firmware drivers must be stored as FCode in a card's expansion ROM and must conform to IEEE Standard 1275.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3367"> </A>A card's <A NAME="marker=3366"> </A>expansion ROM should also contain all the run-time drivers for different operating systems that might use or support the card.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3368"> </A>If an operating system preserves and uses the Open Firmware device tree or a data structure derived from it, it should store all device drivers specific to that environment in the device tree as properties of the devices they support. Otherwise the operating system must load device drivers as part of its initialization. </LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3369"> </A>Drivers that work with Mac OS must be compiled to native PowerPC code. For further information, see <A HREF="PCI_BOOK.a5.html#12320" CLASS="XRef">Writing Native Drivers</A>.</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=3376"> </A><A HREF="PCI_BOOK.59.html#29811" CLASS="XRef">PCI Open Firmware Drivers</A> provides guidelines for writing device drivers to operate with the Open Firmware startup process. </P><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.3c.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.3d.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.3f.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
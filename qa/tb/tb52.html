<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A TB52: LMGetTheMenu and LMSetMenuHook</title><meta name="keywords" content="Mac OS 8 LMGetTheMenu LMSetMenuHook menu id selected"><meta name="Description" content="Technical Q&amp;A TB52: Q&amp;A explains why LMGetTheMenu doesn'twork with LMSetMenuHook and provides an alternative methodfor discovering the currently selected menu."><meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Dec 21, 1998 - Dec 25, 1998"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002238" title="LMGetTheMenu and LMSetMenuHook"></a> <!-- white background --><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A TB52</div>
<div id="pageheadsub">LMGetTheMenu and LMSetMenuHook</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER>			<!-- -->						<!-- Document Body --><table cellspacing="0" cellpadding="0" border="0" WIDTH="600"><tr><td align="left" scope="row"><hr width=500 align=center><p id=p2>Q: According to <CITE>Inside Macintosh</CITE>,<CODE>LMGetTheMenu</CODE> should return the menu ID of the currentlyhighlighted menu, but the return value is always zero when I call<CODE>LMGetTheMenu</CODE> during the routine whose address I've passedto <CODE>LMSetMenuHook</CODE>. What am I missing?</p><p id=p4>A: Documentation on <CODE>LMGetTheMenu</CODE> is unclear. It issupposed to return the ID of the menu whose title is currentlyhighlighted after a call to <CODE>MenuSelect</CODE>. However, MenuManager does not update this variable while the user is selecting froma menu; it is updated only after a selection has been made. The bottomline is that <CODE>LMGetTheMenu</CODE> does not work at <CODE>MenuHook</CODE> time.</p><p id=p4>If you need to know when a specific menu is pulled down, you might beable to use a custom menu definition (<CODE>'MDEF'</CODE>) -- see thelatest <CITE>Tool Chest Edition</CITE> of the Developer CD Series forsample code. Or, you could use <CODE>LMSetMBarHook</CODE>, whoseparameter is called only when a menu is about to be drawn. You mightthen be able to use the passed rectangle to help you discover whichmenu is pulled down. However, neither of these methods is particularlyrecommended; it would be better to redesign your program so that itdoesn't need to know these things.</p><P id=p4>Further Reference:</P><P id=p4><a href="../../documentation/macos8/HumanInterfaceToolbox/MenuManager/menumanager.html" target="_blank">Inside Macintosh: Menu Manager</a></P><!-- begin_date --><H4 ALIGN=center>[Dec 22 1998]</H4><!-- end_date --></td></tr></table></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/tb/tb52.html%3Fid%3DDTS10002238-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/tb/tb52.html%3Fid%3DDTS10002238-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/tb/tb52.html%3Fid%3DDTS10002238-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
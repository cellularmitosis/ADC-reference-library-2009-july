<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note NW10: AppleShare Foreground Applications</title> <meta name="keywords" content=""><meta name="Description" content="Technical Note NW10: ">                                       <meta name="categories" content="Networking"><meta name="week-posted" content="Oct 31, 1988 - Nov 4, 1988"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002552" title="AppleShare Foreground Applications"></a><a name="top"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxNetworking-date.html">Networking</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Networking/index.html" target="_blank">Reference Library > Networking</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note NW10</div>
<div id="pageheadsub">AppleShare Foreground Applications</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext">					<a href="#Introduction">Introduction</a><BR><BR><a href="#Section1">Multiple AppleShare Foreground Application Support</a><BR><BR><a href="#Section2">Number of Open Files Allowed</a><BR><BR><a href="#Section3">How Much Memory Does an AppleShare <br>Foreground Application Get?</a><BR><BR><a href="#References">References</a><BR><BR><a href="#Downloads">Downloadables</a></p>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note outlines the requirements and restrictions of an AppleShareforeground application (AppleShare foreground applications are called<i>concurrent server applications</i> in the <i>AppleShare File ServerAdministrator's Guide</i>). This information pertains only to AppleShare systemsoftware versions 1.1 through 2.0. AppleShare version 3.0 and Macintosh filesharing run under Macintosh System 7. AppleShare foreground applications arenot necessary and are not supported by AppleShare version 3.0 or Macintosh filesharing.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Mar 01 1988]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR><!-- begin_content --><a name="Introduction"></a><h2>Introduction</h2><P>An AppleShare server requires a dedicated Macintosh. The server, however, isimplemented as an interrupt-driven application that runs in the system heap ofthe server machine. This allows the running of a concurrent or foregroundapplication that will live in the application heap of the server machine. Anexample of a foreground application is LaserShare, the LaserWriter spooleravailable from Apple.</p><p>An AppleShare foreground application has a few additional restrictions andrequirements beyond that of a normal Macintosh application:</p><ol type="1">	<li>In order for AppleShare to recognize your program as a foreground application, it must contain a resource of type <code>'fgnd'</code>, ID=1, containing a longword of <code>$00000000</code>.</li>	<li>Do not make any file system calls outside of server volumes' Server Folders. If a foreground application needs to create files, it is recommended that the application create a folder inside the Server Folder and then create all its files within that folder. For example, all print spooler or E-mail files must reside within the Server Folder, and preferably, within a folder that is inside the Server Folder. To find the Server Folder:<ul type="circle">	<li>Make a <code>PBHGetVlnfo</code> call on the volume. </li>	<li>Examine <code>ioVFndrInfo[8] </code>(long integer). If <code>ioVFndrInfo[8]</code> is nonzero, it is the directory ID of the Server Folder.</li></ul></li><li>Do not make file system calls or in any way modify the AppleShare serverapplication, the Parallel Directory Structure, or the user or group databaseswithin the Server Folder of any volume. Also, do not rely on the presence orformats of these structures, as they are subject to change!</li><LI>Do not eject or unmount a volume that is not in drive 1 or 2.</li><LI>Do not call the <code>Shutdown</code> trap; instead, quit by calling<code>ExitToShell</code> or by dropping out of the main event loop.</li></ol><p>In addition to these restrictions, here are a few other things that are good toknow when writing an AppleShare foreground application.</p><P><A HREF="#top">Back to top</A></P><a name="Section1"></a><h2>Multiple AppleShare Foreground Application Support</h2><p>Although you can install multiple AppleShare foreground applications on anAppleShare server, only one can be active at a time. Since the AppleShare Adminapplication is an AppleShare foreground application, users will have to quitAdmin to run your application and quit your application to run Admin.</p><P><A HREF="#top">Back to top</A></P><a name="Section2"></a><h2>Number of Open Files Allowed</h2><p>Any files opened by an AppleShare foreground application count toward themaximum number of open files allowed on the AppleShare file server. SeeMacintosh Technical Note #216, "AppleShare and File-Sharing Limits," for thenumber of open files allowed on a particular AppleShare file server.</p><P><A HREF="#top">Back to top</A></P><a name="Section3"></a><h2>How Much Memory Does an AppleShare Foreground Application Get?</h2><p>Foreground applications are launched by an AppleShare file server, soAppleShare decides how big your application heap will be. First AppleSharereads your 'SIZE' resource. It uses ID 0 (the Finder-created 'SIZE' resource)if it is available. It uses ID -1 (the default 'SIZE' resource created by theprogrammer) if ID 0 isn't available. It uses any other 'SIZE' resource it canfind if IDs 0 and-1 aren't there. If no 'SIZE' resources are found, thenAppleShare uses 196 KB for the size and the minimum size. If your applicationhas a 'SIZE' less than 128 KB, then 128 KB is used for the size and the minimumsize.</p><p>AppleShare then attempts to allocate the minimum size for your application (asfound above). If successful, AppleShare sets the system cache to 32 KB (theminimum). (At this point, your application could still be launched if any ofthe following things fail.)  Then, AppleShare attempts to allocate the defaultsize for your application (as found above). After that, AppleShare gives anyremaining memory back to the system cache.</p><P><A HREF="#top">Back to top</A></P><a name="References"></a><h2>References</h2><P><i>AppleShare File Server Administrator's Guide</i></p><P><A HREF = "nw_11.html">Macintosh Technical Note #216, AppleShare and File-Sharing Limits</a></p><P><A HREF="#top">Back to top</A></P>                             <P><A NAME=Changes></A></P>                  <H2>Change History</H2>                           <TABLE BORDER=0 CELLPADDING=3 WIDTH=544>            <TR>               <td width=100 align=left>                  <P ALIGN=center>01-November-1987</P>               </TD>               <td align="left">                  <P>Originally written.</P>               </TD>            </TR>             <TR>               <td width=100 align=left>                  <P ALIGN=center>01-March-1988</P>               </TD>               <td align="left">                  <P>Added note that AppleShare version 3.0 andMacintosh file sharing don't support AppleShare foreground applications. Addedadditional notes about AppleShare foreground applications.</P>               </TD>            </TR>                     </TABLE>         <BR>                  <P><A HREF="#top">Back to top</A></P><P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (40K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/nw_10.pdf">Download</A></P>               </TD>            </TR>                     </TABLE>         <BR>         <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/nw/nw_10.html%3Fid%3DDTS10002552-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/nw/nw_10.html%3Fid%3DDTS10002552-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/nw/nw_10.html%3Fid%3DDTS10002552-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
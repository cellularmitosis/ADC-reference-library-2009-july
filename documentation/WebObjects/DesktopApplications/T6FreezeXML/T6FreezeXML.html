<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Java Client Programming Guide (Legacy): Freezing XML User Interfaces</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Freezing XML User Interfaces"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001017-CH313" title="Freezing XML User Interfaces"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30001017-CH297-TP1">WebObjects Java Client Programming Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../T5CommonCustRules/T5CommonCustRules.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../T7MixingStaticAndDyn/T7MixingStaticAndDyn.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001017-CH313-TP1" title="Freezing XML User Interfaces"></a><h1>Freezing XML User Interfaces</h1><p>You can use the tutorial project you created earlier in <span class="content_text"><a href="../AdvancedTutorial/AdvancedTutorial.html#//apple_ref/doc/uid/TP30001017-CH303-TP1">“Enhancing the Application”</a></span> as the basis for the exercises in this chapter.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-TPXREF111">Freeze XML User Interfaces</a>
				
			<br/>
			
        
			
			
				<a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-TPXREF38">Adding Actions to Frozen XML</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001017-CH313-TPXREF111" title="Freeze XML User Interfaces"></a><h2>Freeze XML User Interfaces</h2><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_802"></a><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_803"></a><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_804"></a><p><strong>Problem:</strong> You need more finely grained control over the user interface than the Direct to Java Client Assistant allows.</p><p><strong>Solution:</strong> Use the XML generated by Assistant as a starting point, then edit it by hand to suit your needs.</p><p>Freezing XML is another way to customize Direct to Java Client applications. While Assistant allows you to make basic user interface customizations to your application, it is necessarily limited. Freezing XML, however, gives you finer control over your application’s user interface. With that said, you should use Assistant as much as you can since freezing XML makes your application more complex and less flexible than just using Assistant.</p><p>Freezing XML involves these steps:</p><ul class="ul"><li class="li"><p>making a new D2WComponent</p></li><li class="li"><p>copying an XML description from Assistant and editing it in the new component’s <code>.html</code> file</p></li><li class="li"><p>writing a rule to tell the rule system to use the XML component</p></li></ul><p></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_220" title="Note"></a><p><strong>Note:</strong>&nbsp;<a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_805"></a><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_806"></a>Before freezing XML, your data model should be as complete as possible. When just using Assistant to customize applications, changes to data models are automatically picked up in most cases. However, the more advanced customization techniques, starting with XML freezing, make data model–user interface synchronization more difficult. </p></div><p>Follow these steps to customize the user interface of the Admissions application using frozen XML:</p><ol class="ol"><li class="li"><p>In Project Builder, select the Web Components group, choose File > New File, and select Component from the WebObjects list, as shown in <span class="content_text">Figure 16-1</span>. Do not select Display Group Component or Java Client Component.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001017-CH313-BCIDBGBG" title="Figure 16-1Select Component as the file type"></a><p><strong>Figure 16-1&nbsp;&nbsp;</strong>Select Component as the file type</p><img src = "../Art/newcomponent.gif" alt = "Select Component as the file type" width="388" height="329"></div></li><li class="li"><p>Name the new component <code>StudentFormWindow</code> and make sure Application Server is the selected target, as shown in <span class="content_text">Figure 16-2</span>. </p><p>The recommend convention for naming<a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_807"></a> frozen XML components is <em>EntityNameTaskNameWindowType</em>. So, if the entity in question is Student, and the task is query, the frozen XML component should be named <code>StudentQueryWindow</code>.</p><p>Click Finish.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001017-CH313-BCIJDIBD" title="Figure 16-2Name new component &acirc;&#128;&#156;StudentFormWindow&acirc;&#128;&#157;"></a><p><strong>Figure 16-2&nbsp;&nbsp;</strong>Name new component “StudentFormWindow”</p><img src = "../Art/namexmlcomponent.gif" alt = "Name new component “StudentFormWindow”" width="387" height="323"></div></li><li class="li"><p>The Project Builder assistant for new component files creates a standard WebObjects component, so you need to change it to a D2WComponent. Add the import statement for <code>com.webobjects.directtoweb</code> and change the superclass of <code>StudentFormWindow</code> to <code>D2WComponent</code>, as shown in <span class="content_text"><a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-BCIIGAJH">Listing 16-1</a></span>.</p><a name="//apple_ref/doc/uid/TP30001017-CH313-BCIIGAJH" title="Listing 16-1Change the superclass of StudentFormWindow to D2WComponent"></a><br/><br/><p class="codesample"><strong>Listing 16-1&nbsp;&nbsp;</strong>Change the superclass of StudentFormWindow to D2WComponent</p><div class="codesample"><table><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.appserver.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eocontrol.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eoaccess.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.directtoweb.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class StudentFormWindow extends D2WComponent {<span></span></pre></td></tr><tr><td scope="row"><pre>    public StudentFormWindow(WOContext context) {<span></span></pre></td></tr><tr><td scope="row"><pre>        super(context);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Build and run the application and start the client application. </p></li><li class="li"><p>Switch to the XML pane in Assistant.</p></li><li class="li"><p>Under Specification, choose entity > Student, question > window, and task > form. This puts the XML description for that selection in the XML window as shown in <span class="content_text">Figure 16-3</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001017-CH313-BCIDGIBD" title="Figure 16-3XML description of Student entity, form window"></a><p><strong>Figure 16-3&nbsp;&nbsp;</strong>XML description of Student entity, form window</p><img src = "../Art/studentformxmltab.gif" alt = "XML description of Student entity, form window" width="414" height="387"></div></li><li class="li"><p>Copy the whole XML specification and paste it into the <code>StudentFormWindow.html</code> file in Project Builder. <code>StudentFormWindow.html</code> is in the StudentFormWindow component.</p></li><li class="li"><p>In Project Builder, select the Resources group and choose File > New File and select Empty File. Name the file <code>d2w.d2wmodel</code> and make sure Application Server is the selected target, as shown in <span class="content_text"><a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-BCIGBIDB">Figure 16-4</a></span>. This file will hold custom rules you write. Skip this step if your project already has a <code>d2w.d2wmodel</code> file.</p><p><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_808"></a><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_809"></a>You need to have a <code> d2w.d2wmodel</code> file for a few reasons. First, Assistant stores its rules in the <code>user.d2wmodel</code> file and writes out this file whenever it saves. So, any rules you add or change manually in the <code>user.d2wmodel</code> file is wiped out by Assistant. </p><p>By writing rules in a separate file, you can maintain a custom set of rules and still use Assistant for basic customizations. At runtime, all the <code>user.d2wmodel</code> files in the frameworks and all the <code>d2w.d2wmodel</code> files in your project and in your project’s frameworks are merged, so the rule system picks up your custom rules and the rules you specified with Assistant, along with all the default rules.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001017-CH313-BCIGBIDB" title="Figure 16-4Make a new rule file for custom rules"></a><p><strong>Figure 16-4&nbsp;&nbsp;</strong>Make a new rule file for custom rules</p><img src = "../Art/newd2wmodel.gif" alt = "Make a new rule file for custom rules" width="391" height="327"></div></li><li class="li"><p>Put the Rule Editor application (found in <code>/Developer/Applications/</code>) in the Dock. Drag the <code>d2w.d2wmodel</code> file to the Rule Editor icon in the Dock to open it. </p></li><li class="li"><p>Click New to make a new rule and add these arguments to the left-hand side: <code>(task = 'form') and (entity.name = 'Student')</code>.</p><p>Collectively, the left-hand side arguments constitute the rule’s condition<a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_810"></a>. If the condition exists (that is, the user or application performs some action that triggers the condition), the rule fires and the right-hand side of the rule is evaluated.</p><p>In this case, if the form task is triggered (usually by a user action) on the Student entity, the condition of this rule is <code>true</code>, so the rule fires. Collectively, the left-hand side arguments ask “how should this part of the application behave?” And since the condition has been triggered, the behavior of this part of the application is changed per the right-hand side arguments. </p><p>As described in <span class="content_text"><a href="../InsideAssistant/InsideAssistant.html#//apple_ref/doc/uid/TP30001017-CH301-TPXREF42">“Task Pop-Up Menu,”</a></span> Direct to Java Client applications have four basic tasks: query, form, list, and identify. (The rule system defines other tasks with which you usually do not need to interact). In this step, specifying <code>task = 'form'</code> tells the rule system that this rule pertains to the form task. By specifying the entity with <code>entity.name = 'Student'</code>, the rule system knows that this rule pertains to the form task for the Student entity. However, if you want to use the frozen XML window for the query task, you would instead specify <code>task = 'query'</code>.</p></li><li class="li"><p>Set the right-hand side key to <code>window</code> and the value to <code>StudentFormWindow</code>. Set the priority to 50. Refer to <span class="content_text">Figure 16-5</span> for clarity. For an explanation of rule system priorities, see <span class="content_text"><a href="../InsideTheRuleSystem/InsideTheRuleSystem.html#//apple_ref/doc/uid/TP30001017-CH306-BAJGJBBH">“Rule System Priorities.”</a></span></p><div class="item_figure"><a name="//apple_ref/doc/uid/TP30001017-CH313-BCIGIFGA" title="Figure 16-5Add a rule to use frozen XML"></a><p><strong>Figure 16-5&nbsp;&nbsp;</strong>Add a rule to use frozen XML</p><img src = "../Art/newruleinruleeditor.gif" alt = "Add a rule to use frozen XML" width="610" height="318"></div><p>The right-hand side arguments constitute the answer to the question posed in the left-hand side arguments. The answer is made up of a key and a value for that key. In this case, the key is <code>window</code> and the value is <code>StudentFormWindow</code>. So in this case, the answer is “use the StudentFormWindow as the window for form tasks for the Student entity.” </p><p>For high-level questions like <code>controller</code>, <code>window</code>, and <code>modalDialog</code>, the rule system expects the value to be the name of a D2WComponent, like StudentFormWindow or any of the default D2WComponent classes defined in <code>com.webobjects.eogeneration.*;</code> (see <code>/System/Library/Frameworks/JavaEOGeneration.framework/Resources/</code>).</p></li><li class="li"><p>Save the <code>.d2wmodel</code> file.</p></li></ol><a name="//apple_ref/doc/uid/TP30001017-CH313-TPXREF113" title="Customize the XML"></a><h3>Customize the XML</h3><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_811"></a><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_812"></a><p>Now that you’ve successfully frozen XML, you need to customize it to see any benefit. The default Student form window generated by the EOGeneration framework isn’t too bad, but you might want to group Student’s attributes in a box controller for a cleaner look. Assistant doesn’t give you this level of control of the user interface, so you need to edit the XML by hand.</p><p>If you closely examine the XML, you’ll notice that the widgets are organized in a hierarchy of controllers. The window is defined by a <code>FRAMECONTROLLER</code> tag, the action buttons by an <code>ACTIONSBUTTONCONTROLLER<a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_813"></a></code> tag, the form elements by a <code>FORMCONTROLLER</code> tag, and the components of the form by <code>COMPONENTCONTROLLER</code> tags. You’ll notice that the <code>COMPONENTCONTROLLER<a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_814"></a></code> tag for the form that contains the attributes of the Student entity includes two nested <code>COMPONENTCONTROLLER</code> tags. You can group Student’s attributes into a box by adding a <code>BOXCONTROLLER</code> tag between Student’s outermost <code>COMPONENTCONTROLLER</code> tag and its first inner <code>COMPONENTCONTROLLER</code> tag. Add a <code>BOXCONTROLLER</code> tag with the following XML (also see code line 1 in <span class="content_text"><a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-CHDEHJDG">Listing 16-2</a></span>):</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;BOXCONTROLLER usesTitleBorder="false" highlight="true"<span></span></pre></td></tr><tr><td scope="row"><pre> border="RaisedBezel"><span></span></pre></td></tr></table></div><p>The beginning of the <code>StudentFormWindow.html</code> file should look like <span class="content_text"><a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-CHDEHJDG">Listing 16-2</a></span>. Make sure to also add a closing tag for the box controller <code>&lt;/BOXCONTROLLER></code> before the closing tag of Student’s outermost <code>COMPONENTCONTROLLER</code> tag, as shown in code line 2 in <span class="content_text"><a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-CHDEHJDG">Listing 16-2</a></span>.</p><a name="//apple_ref/doc/uid/TP30001017-CH313-CHDEHJDG" title="Listing 16-2StudentFormWindow.html (frozen XML)"></a><p class="codesample"><strong>Listing 16-2&nbsp;&nbsp;</strong><code>StudentFormWindow.html</code> (frozen XML)</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;FRAMECONTROLLER disposeIfDeactivated="true" typeName="question = window, task = form,<span></span></pre></td></tr><tr><td scope="row"><pre>   entity = Student" reuseMode="NeverReuse"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;ACTIONBUTTONSCONTROLLER widgetPosition="Top"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;FORMCONTROLLER className="admissions.client.CustomFormController"<span></span></pre></td></tr><tr><td scope="row"><pre>            alignsComponents="true" entity="Student" minimumWidth="256"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;COMPONENTCONTROLLER minimumWidth="256" usesHorizontalLayout="true"<span></span></pre></td></tr><tr><td scope="row"><pre>                alignsComponents="true"><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;BOXCONTROLLER usesTitleBorder="false" highlight="true"<span>// 1</span></pre></td></tr><tr><td scope="row"><pre>                    border="RaisedBezel"><span>// 2</span></pre></td></tr><tr><td scope="row"><pre>                &lt;COMPONENTCONTROLLER minimumWidth="256" alignsComponents="true"><span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;TEXTFIELDCONTROLLER valueKey="name"/><span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;TEXTFIELDCONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatClass="com.webobjects.foundation.NSNumberFormatter"<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatPattern="0;-0" valueKey="act"/><span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;TEXTFIELDCONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatClass="com.webobjects.foundation.NSTimestampFormatter"<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatPattern="MM/dd/yyyy" valueKey="firstContact"/><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;/COMPONENTCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;COMPONENTCONTROLLER minimumWidth="256" alignsComponents="true"><span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;TEXTFIELDCONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatClass="com.webobjects.foundation.NSNumberFormatter"<span></span></pre></td></tr><tr><td scope="row"><pre>                        label="GPA" formatPattern="#,##0.00;-#,##0.00" valueKey="gpa"/><span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;TEXTFIELDCONTROLLER<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatClass="com.webobjects.foundation.NSNumberFormatter"                        formatPattern="0;-0" valueKey="sat"/><span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;TEXTFIELDCONTROLLER editability="Never"<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatClass="com.webobjects.foundation.NSNumberFormatter"<span></span></pre></td></tr><tr><td scope="row"><pre>                        formatPattern="#,##0.00" valueKey="rating"/><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;/COMPONENTCONTROLLER><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;/BOXCONTROLLER><span>// 3</span></pre></td></tr></table></div>	<p><span class="content_text">Figure 16-6</span> shows an example of a Student form window with the new <code>BOXCONTROLLER</code>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH313-CHDDIHFJ" title="Figure 16-6Student form window with BOXCONTROLLER tag"></a><p><strong>Figure 16-6&nbsp;&nbsp;</strong>Student form window with <code>BOXCONTROLLER</code> tag</p><img src = "../Art/boxcontroller.gif" alt = "Student form window with BOXCONTROLLER tag" width="370" height="321"></div><br/><div class="notebox"><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_221" title="Note"></a><p><strong>Note:</strong>&nbsp;You can also use some of the WebObjects dynamic elements in frozen XML components such as WOConditional and WORepetition. However, you can only use these elements to control the XML that is generated. You cannot use them to display HTML (only data that is resolved from the controllers is displayed).</p></div><a name="//apple_ref/doc/uid/TP30001017-CH313-TPXREF38" title="Adding Actions to Frozen XML "></a><h2>Adding Actions to Frozen XML </h2><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_815"></a><p><strong>Problem:</strong> You need to add custom actions to a frozen XML component.</p><p><strong>Solution:</strong> Specify an action method in a business logic class or write a custom controller class.</p><a name="//apple_ref/doc/uid/TP30001017-CH313-TPXREF25" title="Edit XML by Hand"></a><h3>Edit XML by Hand</h3><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_816"></a><p>To add an action to a frozen XML component, you embed an <code>ACTIONCONTROLLER</code> tag inside an <code>ACTIONBUTTONSCONTROLLER</code> block (or elsewhere, depending on where you want the button) in a frozen XML file:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;ACTIONCONTROLLER label="Send Record Via Email" usesButton="false" usesAction="true" iconName="ActionIconOk" actionKey="sendRecordViaEmail"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/ACTIONCONTROLLER><span></span></pre></td></tr></table></div><p>Implement the custom action method in the client-side business logic class.</p><a name="//apple_ref/doc/uid/TP30001017-CH313-TPXREF24" title="Using a Custom Controller Class  in Frozen XML"></a><h3>Using a Custom Controller Class  in Frozen XML</h3><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_817"></a><p>You can also add actions to frozen XML components by using a custom controller class.</p><p>To do this, create an empty Java class file (File > New File, then select “Java class” in the Pure Java group) in Project Builder. Name the new file <code>NewController</code> and add it to the Web Server target. Add the import statements and methods shown in the code listing here:</p><div class="codesample"><table><tr><td scope="row"><pre>package businesslogic.client;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.awt.event.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.swing.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eoapplication.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eogeneration.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class NewController extends EOController {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public NewController(EOXMLUnarchiver unarchiver) {<span></span></pre></td></tr><tr><td scope="row"><pre>        super(unarchiver);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    protected NSArray defaultActions() {<span></span></pre></td></tr><tr><td scope="row"><pre>        Icon icon =<span></span></pre></td></tr><tr><td scope="row"><pre>         EOUserInterfaceParameters.localizedIcon("ActionIconInspect");<span></span></pre></td></tr><tr><td scope="row"><pre>        NSMutableArray actions = new NSMutableArray();<span></span></pre></td></tr><tr><td scope="row"><pre>        actions.addObject(EOAction.actionForControllerHierarchy("runInfoDialog",<span></span></pre></td></tr><tr><td scope="row"><pre> "Run Info Dialog", "Run Info Dialog", icon, null, null, 300, 50, false));<span></span></pre></td></tr><tr><td scope="row"><pre>        return EOAction.mergedActions(actions, super.defaultActions());<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public boolean canPerformActionNamed(String actionName) {<span></span></pre></td></tr><tr><td scope="row"><pre>        return actionName.equals("sendRecordViaEmail") ||<span></span></pre></td></tr><tr><td scope="row"><pre>                 super.canPerformActionNamed(actionName);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void sendRecordViaEmail() {<span></span></pre></td></tr><tr><td scope="row"><pre>        EODialogs.runInformationDialog("Hello World!", "Hello World!");<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>By overriding <code>defaultActions</code><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_818"></a>, you are adding to the actions that are displayed in the user interface by the <code>ACTIONBUTTONSCONTROLLER</code> tags. See the API reference for <code>EOApplication.defaultActions</code> for a description of the parameters. </p><p>Notice in the <code>defaultActions</code><a name="//apple_ref/doc/uid/TP30001017-CH313-DontLinkElementID_819"></a> method that a custom icon is specified using <code>EOUserInterfaceParameters.localizedIcon</code>. The method takes a string that is the name of an icon in the Web Server target. You should group all resources such as images in the Web Resources group in your project.</p><p>After writing the custom controller class, you must include it in a frozen XML component:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;CONTROLLER className="businesslogic.client.NewController"><span></span></pre></td></tr></table></div><p>Make sure to place it in the XML hierarchy within an <code>ACTIONBUTTONSCONTROLLER</code> block. </p><p>The implementation of the action method in this example simply puts up a dialog as shown in <span class="content_text"><a href="T6FreezeXML.html#//apple_ref/doc/uid/TP30001017-CH313-TPXREF130">Figure 16-7</a></span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH313-TPXREF130" title="Figure 16-7Action in custom controller class"></a><p><strong>Figure 16-7&nbsp;&nbsp;</strong>Action in custom controller class</p><img src = "../Art/runinfodialog.gif" alt = "Action in custom controller class" width="396" height="390"></div><br/>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../T5CommonCustRules/T5CommonCustRules.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../T7MixingStaticAndDyn/T7MixingStaticAndDyn.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-08-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/DesktopApplications/T6FreezeXML/T6FreezeXML.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/DesktopApplications/T6FreezeXML/T6FreezeXML.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/DesktopApplications/T6FreezeXML/T6FreezeXML.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Number Formats(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING356></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-355.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-357.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-354.html"><B>Chapter 8 - QuickDraw GX Mathematics</B></A> / <A HREF="GXEnvironment-355.html"><B>About QuickDraw GX Mathematics</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING356-0></A>
<H2>Number Formats</H2>
 <A NAME=MARKER-2-15></A>QuickDraw GX accepts standard integer and floating-point number formats, and defines several fixed-point number formats. <P>
<A NAME=HEADING356-2></A>
<H3>Integer Formats</H3>
 <A NAME=MARKER-2-16></A>Some Quickdraw GX functions and data structures may make use of the standard C language integer formats <CODE>short</CODE>, <CODE>unsigned short</CODE>, <CODE>long</CODE>, and <CODE>unsigned long</CODE>. The <B>short number</B> format is a 16-bit signed or unsigned integer; the <B>long number</B> format is a 32-bit signed or unsigned integer. Numbers in these formats have the following ranges of values:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Format<TH>Range<TR>
<TD><A NAME=MARKER-2-3></A>short<TD>-32, 768 to 32,767<TR>
<TD>unsigned short<TD>0 to 65,535<TR>
<TD><A NAME=MARKER-2-4></A>long<TD>-2,147,483,648 to 2,147,483,647<TR>
<TD>unsigned long<TD>0 to 4,294,967,295<A NAME=MARKER-2-5></A></TABLE>
<P>
<A NAME=HEADING356-4></A>
<H3>Floating-Point Formats</H3>
 <A NAME=MARKER-2-17></A>QuickDraw GX supports conversion to and from the C language single precision floating-point format <CODE>float</CODE>; double precision floating-point format <CODE>double</CODE>; and extra precision floating-point format <CODE>extended</CODE>. QuickDraw GX macros that convert between floating-point numbers and <CODE>Fixed</CODE> or <CODE>fract</CODE> numbers can handle all three floating-point formats.<P>
<A NAME=HEADING356-6></A>
<H3>Fixed-Point Formats</H3>
 <A NAME=MARKER-2-18></A>QuickDraw GX defines 16-bit, 32-bit, and 64-bit <B>fixed-point number</B> formats. Fixed-point number formats are integers that are interpreted as real numbers. The conversion between integer number format and a fixed-point number format is described by bias. A <B><A NAME=MARKER-2-19></A>bias</B> is a number (commonly expressed as a power of 2) by <BR>which an integer is divided in order to obtain the real number it represents. For<BR>example, the bias for the <CODE>Fixed</CODE> number format is 16 bits, or 2<EM>16</EM>. In this case, the <BR>integer must be divided by 2<EM>16</EM> to obtain the real number represented. Therefore, <CODE>Fixed</CODE> 0x10000 = 65,536/2<EM>16</EM>, or 1.0.<A NAME=MARKER-0-30></A><P>
 There are one 16-bit, two 32-bit, and one 64-bit number formats:<P>
<UL>
<LI>The<B> <A NAME=MARKER-2-21></A>gxColorValue</B> format for fixed-point numbers is a 16-bit unsigned integer. The values range from 0 to 65,535 to represent numbers from 0 to 1. This fixed-point number is described by a bias of 65,535. The integer must be divided by 65,535 to obtain the real number represented. (Its name derives from the fact that it is used to describe color-component values in a Quickdraw GX color structure; see the chapter "Colors and Color-Related Objects" in <I><A HREF="../../GXObjects/GXObjects-2.html">Inside Macintosh: QuickDraw GX Objects</A></I> for more information.)
<LI>The <CODE><A NAME=MARKER-2-22></A>Fixed</CODE> format for fixed-point numbers has 16 bits to the left and 16 bits to the right of the binary point. This corresponds to a fixed-point bias of 16 bits. <CODE>Fixed</CODE> format numbers range from -32,768 to [32,767 + (65,535/65,536)], or approximately 32,768.
<LI>The <CODE><A NAME=MARKER-2-23></A>fract</CODE> format for fixed-point numbers has 2 bits to the left and 30 bits to the right of the binary point. This corresponds to a fixed-point bias of 30 bits. Numbers in <CODE>fract</CODE> format range from -2 to [2 - (2<EM>-30</EM>)] or -2 to [1 + (1,073,741,823/1,073,741,824)], or approximately 2.0.
<LI>The <CODE><A NAME=MARKER-2-24></A>wide</CODE> format is a signed integer data type that has 64 bits. It can be given a bias, just as any other integer type can. With a bias of 0 bits, a <CODE>wide</CODE> format number represents an integer and can range from -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807. With a bias of 16 bits, a <CODE>wide</CODE> format number represents an extended version of the <CODE>Fixed</CODE> format (that is, it has the same precision but a larger range) and can range from -140,737,488,355,328 to [140,737,488,355,327 + (65,535/65,536)]. <P>
</UL>
 All of the fixed-point number formats except for gxColorValue are two's complement signed integers.<P>
 <CODE><A NAME=MARKER-2-25></A></CODE>The <CODE>wide</CODE> data type is defined as a structure that contains an unsigned long integer as its low-order half and a signed long integer as its high-order half. You can convert a <CODE>long</CODE> into a <CODE>wide</CODE> in either of two ways:<P>
<UL>
<LI>First, assign the <CODE>long</CODE> to the low half of the <CODE>wide</CODE>. Then, if the <CODE>long</CODE> is not negative, assign 0 to the high half of the <CODE>wide</CODE>; if the <CODE>long</CODE> is negative, assign -1 to the high half of the <CODE>wide</CODE>.
<LI>Assign the <CODE>long</CODE> to the high half of the <CODE>wide</CODE>. Use the <CODE>WideShift</CODE> function to shift the bits of the <CODE>wide</CODE> rightward by 32 bits. <P>
</UL>
 The WideShift function is described on <A HREF=GXEnvironment-407.html#MARKER-9-212>page 8-51</A>. The <CODE>wide</CODE> structure is described on page 8-35. <CODE><A NAME=MARKER-2-26></A></CODE>  <A NAME=MARKER-2-27></A>  <A NAME=MARKER-2-28></A><P>
<A NAME=HEADING356-18></A>
<H3>Working With Bias in Fixed-Point Operations</H3>
 <B><A NAME=MARKER-2-29></A><CODE>Fixed</CODE></B> numbers have a bias of 16; <CODE>fract</CODE> numbers have a bias of 30; and <CODE>long</CODE> and <CODE>wide</CODE> numbers have a bias of 0. Unless stated otherwise, all biases will be powers of 2. For brevity, we use the convention of describing a bias by the exponent of 2; for example, we say "a bias of 16" instead of "a bias of 16 bits."Operations that are designed to work on a specific number format (such as <CODE>FixedMultiply</CODE> or <CODE>FractDivide</CODE> or <CODE>WideMultiply</CODE>) apply a bias to the result of their operations that reflects the number format they expect. If you understand how the bias is applied, you can use (and even mix) any of several different fixed-point number formats in these functions, and know what bias to use when interpreting the result:<A NAME=MARKER-0-30></A><P>
<UL>
<LI>Operations on <CODE>Fixed</CODE> numbers (such as <CODE>FixedMultiply</CODE> and <CODE>FixedDivide</CODE>) use a bias of 16; operations on <CODE>fract</CODE> numbers (such as <CODE>FractMultiply</CODE> and <CODE>FractDivide</CODE>) use a bias of 30; operations on <CODE>long</CODE> and <CODE>wide</CODE> numbers (such as <CODE>MultiplyDivide</CODE> and <CODE>WideDivide</CODE>) use a bias of 0.
<LI>When multiplying two fixed-point numbers, the bias of the result is the sum of the biases of the input numbers, minus the bias of the operation. Thus, the result of using <CODE>FixedMultiply</CODE> to multiply two <CODE>Fixed</CODE> numbers is a <CODE>Fixed</CODE> ( = (16 + 16) - 16), as expected. On the other hand, the result of using <CODE>FixedMultiply</CODE> to multiply a <CODE>fract</CODE> and a <CODE>Fixed</CODE> is a <CODE>fract</CODE> ( = (30 + 16) - 16), and the result of <CODE>FractMultiply</CODE> on a <CODE>fract</CODE> and a <CODE>Fixed</CODE> is a <CODE>Fixed</CODE> ( = (30 + 16) - 30).
<LI>When dividing two fixed-point numbers, the bias of the result is the operation bias plus the difference between the biases of the input numbers. Thus, as expected, the result of using <CODE>FixedDivide</CODE> to divide one <CODE>Fixed</CODE> number by another is a <CODE>Fixed</CODE> ( = 16 + (16 - 16)). The result of <CODE>FixedDivide</CODE> on a <CODE>fract</CODE> divided by a <CODE>Fixed</CODE> is a <CODE>Fract</CODE> ( = 16 + (30 - 16)), and the result of <CODE>FractDivide</CODE> on a <CODE>Fixed</CODE> divided by a <CODE>Fract</CODE> is a <CODE>Fixed</CODE> ( = 30 + (16 - 30)).
<LI>For operations that have no bias, the result is simply the sum or difference of the input biases. For example, if you use <CODE>MultiplyDivide</CODE> to multiply a <CODE>Fixed</CODE> by a <CODE>fract</CODE> and divide the result by a <CODE>Fixed</CODE>, the result will be a <CODE>fract</CODE> ( = 16 + 30 - 16). If you use <CODE>WideMultiply</CODE> to multiply two <CODE>Fixed</CODE> numbers, the result will have a bias of 32 bits ( = 16 + 16).<P>
</UL>
 Remember also that using the standard C operators + and - to add or subtract fixed-point numbers is meaningful only if the numbers have the same bias. Thus, if you wish to add together a long integer and a <CODE>Fixed</CODE>, for example, you must first convert one format to the other, or convert both to a common format.<P>
 The functions referred to in this section are described in the section <A HREF=GXEnvironment-393.html#MARKER-9-182>"Fixed-Point Operations" beginning on page 8-42</A>, and <A HREF=GXEnvironment-403.html#MARKER-9-204>"Operations on wide Numbers" beginning on page 8-49</A>.<B><A NAME=MARKER-2-31></A></B><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-355.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-357.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Caching an Entity's Objects</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.9.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.b.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=616587"> </A>Caching an Entity's Objects</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=616588"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=616592"> </A>Describes how to cache data from reference tables so that applications don't have to keep fetching the tables from the database and comparing them to what's in memory. For example, you could cache a RentalTerms table whose rows are used to populate a popup list.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=617496"> </A>Description</H2><P CLASS="Body"><A NAME="pgfId=617431"> </A>You can set an entity to cache its enterprise objects in memory. This caching allows Enterprise Objects Framework to evaluate queries in memory, thereby avoiding round trips to the database. This is most useful for read-only entities, where there is no danger of the cached data getting out of sync with database data. Additionally, this technique should only be used with small tables, since it fetches all of an entity's enterprise objects into memory the first time any object of this entity is needed from the database.</P><P CLASS="Body"><A NAME="pgfId=617432"> </A>For example, using the sample Rentals database, you might cache the entity RentalTerms. RentalTerms objects specify check out length, cost, and deposit amount for different types of rentals--new release movies, video games, and laser discs, for example. Since the set of all RentalTerms enterprise objects is fairly small, is essentially read-only, and is used very frequently, RentalTerms is a good candidate for entity caching.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=617433"> </A>Setting an Entity to Cache Objects</H3><P CLASS="Body"><A NAME="pgfId=617434"> </A>Using EOModeler, check the Cache in Memory option in the Advanced Entity Inspector for the entity, or to set it programmatically, use the EOEntity method <TT CLASS="Code">setCachesObjects</TT> (<TT CLASS="Code">setCachesObjects:</TT> in Objective C).</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=617435"> </A>Limitations</H3><UL><LI CLASS="Bulleted"><A NAME="pgfId=617436"> </A>An entity's cache of objects is maintained per EODatabaseContext. Consequently, a WebObjects application that establishes separate database connections for each session, for example, so each user can connect with a different database username and password, does not get the same performance benefits from entity caching that other applications can.</LI><LI CLASS="Bulleted"><A NAME="pgfId=617437"> </A>The relationships of a cached object are not automatically cached. For example, consider an application that makes conference room reservations. This application has a ConferenceRoom entity with a relationship to a Building entity. Since a company's set of conference rooms and buildings is fairly small and fixed, it makes sense to cache both these entity's. You can either set both entities to cache their objects or you can set ConferenceRoom's relationship to Building to prefetch its destination objects.</LI><LI CLASS="Bulleted"><A NAME="pgfId=618634"> </A>If you need to apply qualifiers to cached data, be aware that evaluating a qualifier in memory is frequently slower than refetching the data from the database when the qualifier is large or is applied to many objects.</LI></UL></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=616657"> </A>See Also</H2></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=616663"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=616664"> </A>How do I keep from fetching the same data over and over again?</LI><LI CLASS="Bulleted"><A NAME="pgfId=616665"> </A>How do I cache commonly accessed objects?</LI><LI CLASS="Bulleted"><A NAME="pgfId=617619"> </A>How do I cache data from reference tables?</LI><LI CLASS="Bulleted"><A NAME="pgfId=617603"> </A>Why are enterprise objects from my cached entity still being faulted in?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=616667"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=617656"> </A>Entity</LI><LI CLASS="Bulleted"><A NAME="pgfId=618641"> </A>Cache</LI><LI CLASS="Bulleted"><A NAME="pgfId=617657"> </A>Tables</LI><LI CLASS="Bulleted"><A NAME="pgfId=617658"> </A>Performance</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=616673"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=617668"> </A>4 May, 1998. Kelly Toshach. First Draft.</P><P CLASS="Body"><A NAME="pgfId=617669"> </A>5 May, 1998. Greg Wilson. Added Synopsis, Questions, and Keywords.</P><P CLASS="Body"><A NAME="pgfId=617676"> </A></P></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.9.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.b.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
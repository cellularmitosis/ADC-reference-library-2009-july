<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SetResourceSize (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING93></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-92.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-94.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A> / <A HREF="MoreToolbox-24.html"><B>Resource Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-30.html"><B>Resource Manager Routines</B></A> / <A HREF="MoreToolbox-90.html"><B>Reading and Writing Partial Resources</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING93-0></A>
<H3><A NAME=MARKER-9-446></A>SetResourceSize</H3>
 <A NAME=MARKER-11-447></A><A NAME=MARKER-2-448></A>You can use the <CODE>SetResourceSize</CODE> procedure to change the size of a resource on disk. This procedure is normally used only with <CODE>ReadPartialResource</CODE> and <CODE>WritePartialResource</CODE>. <P>
<PRE>
PROCEDURE SetResourceSize (theResource: Handle; newSize: LongInt);
</PRE>
<DL>
<DT><CODE>theResource</CODE>
<DD> A handle to a resource.
<DT><CODE>newSize</CODE>
<DD> The size, in bytes, that you want the resource to occupy on disk.
</DL>
<A NAME=HEADING93-5></A>
<H5>DESCRIPTION</H5>
 Given a handle to a resource, <CODE>SetResourceSize</CODE> sets the size field of the specified resource on disk without writing the resource data. You can change the size of <BR>any resource, regardless of the amount of memory you have available.<P>
 If the specified size is smaller than the resource's current size on disk, you lose any data from the cutoff point to the end of the resource. If the specified size is larger than the resource's current size on disk, all data is preserved, but the additional area is uninitialized (arbitrary data).<P>
 If you read a partial resource into memory and then change its size, you must use <CODE>SetResourceSize</CODE> to change the entire resource's size on disk as necessary. For example, suppose the entire resource occupies 1 MB and you use <CODE>ReadPartialResource</CODE> to read in a 200 KB portion of the resource. If you then increase the size of this partial resource to 250 KB, you must call <CODE>SetResourceSize</CODE> to set the size of the resource on disk to 1.05 MB. Note that in this case you must also keep track of the resource data on disk and move any data that follows the original partial resource on disk. Otherwise, there will be no space for the additional 50 KB when you call <CODE>WritePartialResource</CODE> to write the modified partial resource to disk.<P>
 Under certain circumstances, the Resource Manager overrides the size you set with a call to <CODE>SetResourceSize</CODE>. For instance, suppose you read an entire resource into memory by calling <CODE>GetResource</CODE> or related routines, then use <CODE>SetResourceSize</CODE> successfully to set the resource size on disk, and finally attempt to write the resource to disk using <CODE>UpdateResFile</CODE> or <CODE>WriteResource</CODE>. In this case, the Resource Manager adjusts the resource size on disk to conform with the size of the resource in memory.<P>
 If the disk is locked or full, or the file is locked, the <CODE>SetResourceSize</CODE> procedure does nothing, and the <CODE>ResError</CODE> function returns an appropriate File Manager result code. If the resource is in memory, the Resource Manager tries to set the size of the resource on disk. If the attempt succeeds, <CODE>ResError</CODE> returns the result code <CODE>resourceInMemory</CODE>, and the Resource Manager does not update the copy in memory. If the attempt fails, <CODE>ResError</CODE> returns an appropriate File Manager result code.<P>
<A NAME=HEADING93-11></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>SetResourceSize</CODE> procedure may move or purge memory blocks in the application heap. Your application should not call this procedure at interrupt time.<P>
<A NAME=HEADING93-13></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for <CODE>SetResourceSize</CODE> are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_ResourceDispatch<TD>$7003</TABLE>
<P>
<A NAME=HEADING93-15></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>resourceInMemory<TD>-188<TD>Resource already in memory<TR>
<TD>writingPastEnd<TD>-189<TD>Writing past end of file</TABLE>
</H5>
<A NAME=HEADING93-16></A>
<H5>SEE ALSO</H5>
 To check for errors, call the <CODE>ResError</CODE> function as described on <A HREF=MoreToolbox-35.html#MARKER-9-220>page 1-47</A>. <A NAME=MARKER-2-449></A> <A NAME=MARKER-2-450></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-92.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-94.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

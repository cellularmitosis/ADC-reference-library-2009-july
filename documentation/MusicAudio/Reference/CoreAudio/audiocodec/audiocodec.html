<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Core Audio (Legacy): Audio Codec</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Audio Codec"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001108-CH204" title="Audio Codec"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30001281-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../../reference/LegacyTechnologies/idxMusicAudio-date.html#//apple_ref/doc/uid/TP30001281-TP30000470-TP30000452" target="_top">Audio</a> &gt; <a href="../book_intro/book_intro.html#//apple_ref/doc/uid/TP30001108-CH201-DontLinkElementID_85">Core Audio (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../core_audio_intro/core_audio_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../audio_toolbox/audio_toolbox.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_83" title="Audio Codec"></a><h1><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF101" title="Audio Codec"></a>Audio Codec</h1><p>This chapter discusses audio codec development
using the Audio Codec API. The section <span class="content_text"><a href="audiocodec.html#//apple_ref/doc/uid/TP30001108-CH204-76453">“Audio Codec Reference”</a></span> describes
the constants, data types, and functions that are relevant to audio
codec development. </p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="audiocodec.html#//apple_ref/doc/uid/TP30001108-CH204-TPXREF102">Overview of Audio Codec</a>
				
			<br/>
			
        
			
			
				<a href="audiocodec.html#//apple_ref/doc/uid/TP30001108-CH204-BCIFBEBF">Audio Codec Reference</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001108-CH204-60137" title="Overview of Audio Codec"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF102" title="Overview of Audio Codec"></a><h2>Overview of Audio
Codec</h2>
<p>Audio codecs are encoders and decoders provided by Apple or
third-party developers for the purpose of compressing and decompressing
audio streams into and from encoded formats. While codec use is
encouraged, normal use should be performed through the <span class="content_text"><a href="../audio_toolbox/audio_toolbox.html#//apple_ref/doc/uid/TP30001108-CH205-114223">“Audio Converter.”</a></span></p>
<p>Before developing an audio codec for Mac OS X, install the
Core Audio SDK, available from <span class="content_text"><a href="http://developer.apple.com/audio/" target="_top">http://developer.apple.com/audio/</a></span>.</p>
<p>Of particular interest are the contents of <code>/AudioCodecs/ACPublic/</code>,
in the installed SDK.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-60232" title="The ACCodec Class"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF103" title="The ACCodec Class"></a><h3>The ACCodec Class</h3>
<p><code>ACCodec</code> is an abstract
class that defines the basic methods that an audio codec must implement.
At the very least, all codecs must subclass <code>ACCodec</code> to
provide basic services for those who wish to use the codec, based
on standard methods of communication expected of them. However,
two subclasses of <code>ACCodec</code> are
provided, which implement many of this class&#8217;s abstract methods
for your convenience.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-43458" title="The ACBaseCodec Class"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF104" title="The ACBaseCodec Class"></a><h3>The ACBaseCodec
Class</h3>
<p><code>ACBaseCodec</code> is
a subclass of <code>ACCodec</code> and
provides many of the services needed by most codecs to interact
with codec clients. Property management is fully implemented in <code>ACBaseCodec</code> but
you may override it as needed. Also, this class provides format management
for input and outputs, including getting and setting the number
of input and output formats, and getting and setting the <code>AudioStreamBasicDescription</code> format
information for inputs and outputs. </p>
<p><code>ACBaseCodec</code> does
not implement a buffer for the codec, however, and you must implement all
methods pertaining to buffer usage, depending on your chosen buffer
size and implementation.</p>
<p>When developing an audio codec, you must subclass <code>ACBaseCodec</code>.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-43561" title="The ACSimpleCodec Class"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF105" title="The ACSimpleCodec Class"></a><h3>The ACSimpleCodec
Class</h3>
<p><code>ACSimpleCodec</code>,
a subclass of <code>ACBaseCodec</code>,
provides a ring buffer implementation with a variable buffer size
providing for reallocation of the buffer. This class is provided
as a convenience for you in cases where you don&#8217;t need a custom
buffering scheme. When developing a codec, you don&#8217;t need to subclass <code>ACSimpleCodec</code>,
so long as you provide a buffering scheme. </p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-43646" title="Miscellaneous Headers"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF106" title="Miscellaneous Headers"></a><h3>Miscellaneous Headers</h3>
<p>Inside <code>/AudioCodecs/ACPublic/</code> are other
headers that need not be modified but are necessary for the operation
of a codec, and therefore are included in order for the codec to
operate properly:</p>
<ul class="spaceabove"><li class="li"><p><code>ACConditionalMacros.h</code>.
This header helps determine which system headers need to be included
at compile time.</p></li>
<li class="li"><p><code>ACCodecDispatch.h</code>.
An implementation of an audio codec component dispatch method.</p></li>
<li class="li"><p><code>ACCodecDispatchTypes.h</code>.
Glue that helps <code>ACCodecDispatch</code> work
properly on various platforms.</p></li></ul>
<p></p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-76453" title="Audio Codec Reference"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-BCIFBEBF" title="Audio Codec Reference"></a><h2>Audio Codec Reference</h2>
<p>This reference section describes the methods that need to
be implemented in order to deploy an audio codec component for Mac
OS X.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_84" title="Note"></a><p><strong>Note:</strong>&nbsp;The
term &#8220;magic cookie&#8221; is used in this reference section. A magic
cookie refers to header information (usually a vector of bits) that
is placed at the beginning of most audio files and contains information
vital for the codec.</p></div>
<a name="//apple_ref/doc/uid/TP30001108-CH204-94191" title="Audio Codec Types"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF107" title="Audio Codec Types"></a><h3>Audio Codec Types</h3>
<a name="//apple_ref/doc/uid/TP30001108-CH204-94197" title="Defined Data Types"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF108" title="Defined Data Types"></a><h4>Defined Data Types</h4>
<p>Typedefs are used for naming convenience, in an effort to
make information stored in generic variables more easily recognizable.
There are two typedefs in <code>AudioCodec.h</code>:</p>
<ul class="spaceabove"><li class="li"><p><code>typedef ComponentInstance
AudioCodec</code></p></li>
<li class="li"><p><code>typedef UInt32 AudioCodecPropertyID</code></p></li></ul>
<a name="//apple_ref/doc/uid/TP30001108-CH204-52944" title="Data Structures"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF109" title="Data Structures"></a><h4>Data Structures</h4>
<a name="//apple_ref/c/tdef/AudioStreamLoudnessStatistics" title="AudioStreamLoudnessStatistics"></a><a name="//apple_ref/doc/c_ref/AudioStreamLoudnessStatistics" title="AudioStreamLoudnessStatistics"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-AudioStreamLoudnessStatistics" title="AudioStreamLoudnessStatistics"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_275"></a><h3 class="tight">AudioStreamLoudnessStatistics</h3>
<p class="spaceabove">Encapsulates various pieces of information with regards
to the loudness of the stream currently in use.</p>
<p class="spaceabove"><pre>
typedef struct AudioStreamLoudnessStatistics {
<!--a-->Float64<!--/a--> mAveragePerceivedPowerCoefficient;
<!--a-->Float64<!--/a--> mMaximumPerceivedPowerCoefficient;
<!--a-->UInt64<!--/a--> mMaximumPerceivedPowerPacketOffset;
<!--a-->Float32<!--/a--> mPeakAmplitude;
UInt32 mReserved;
<!--a-->UInt64<!--/a--> mPeakAmplitudeSampleOffset;
} AudioStreamLoudnessStatistics;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>An instance of this structure is returned when the <code>kAudioCodecPropertyCurrentLoudnessStatistics</code> property
is queried. The <code>mAveragePercievedPowerCoefficient</code> and <code>mMaximumPercievedPowerCoefficient</code> are a
normalized value on a scale of 0 to 1, while<code> mMaximumPerceivedPowerPacketOffset</code> specifies
the power&#8217;s offset. The <code>mPeakAmplitude</code> value
is the largest sample value in the entire audio stream. <code>mPeakAmplitudeSampleOffset</code> is
the number of the sample where the peak is found.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.3 through Mac OS X v10.4.</li></ul><h5 class="tight">Declared In</h5><code>AudioCodec.h</code>
<a name="//apple_ref/c/tdef/AudioCodecPrimeInfo" title="AudioCodecPrimeInfo"></a><a name="//apple_ref/doc/c_ref/AudioCodecPrimeInfo" title="AudioCodecPrimeInfo"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-BAJGDBHH" title="AudioCodecPrimeInfo"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_276"></a><h3 class="tight">AudioCodecPrimeInfo</h3>
<p class="spaceabove">Holds information about leading and following frames for
a stream of data.</p>
<p class="spaceabove"><pre>
typedef struct AudioCodecPrimeInfo {
UInt32 leadingFrames;
UInt32 trailingFrames;
} AudioCodecPrimeInfo;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Many times, an audio stream has audio data that fixes and
appends the actual content that needs to be encoded or decoded,
based on the codec&#8217;s implementation. This structure holds how
many leading and trailing frames there are. A pointer to an instance
of this structure is accessible via the <code><!--a  -->kAudioCodecPrimeInfo<!--/a--></code> property.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.3 and later.</li></ul><h5 class="tight">Declared In</h5><code>AudioCodec.h</code>
<a name="//apple_ref/doc/uid/TP30001108-CH204-53355" title="Audio Codec Constants"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF110" title="Audio Codec Constants"></a><h3>Audio Codec Constants</h3>
<p>Constants are used throughout the Audio Codec API to provide
information required by the Component Manager in order to function
or to work in conjunction with properties to describe a state or
setting.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-54211" title="Component Identifiers"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF111" title="Component Identifiers"></a><h4>Component Identifiers</h4>
<p>Identifies the codec for the Component Manager.</p>
<dl class="termdef">	<dt><code>kAudioDecoderComponentType
= &#8216;adec&#8217;</code></dt>
<dd><p>The identifier for a codec that translates data in some
format into linear PCM. The subtype of this codec specifies the
format of the incoming data.</p></dd>
<dt><code>kAudioEncoderComponentType
= &#8216;aenc&#8217;</code></dt>
<dd><p>The identifier for a codec that translates data from
linear PCM into the codec&#8217;s specified output format. The subtype
of this codec specifies the format of the outgoing data.</p></dd>
<dt><code>kAudioUnityCodecComponentType
= &#8216;acdc&#8217;</code></dt>
<dd><p>The identifier for a codec that translates data between
different types of the same format. The subtype of this codec specifies
the format ID of the format that is being converted between.</p></dd></dl>
<a name="//apple_ref/doc/uid/TP30001108-CH204-54283" title="Quality Settings"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-BAJICFFE" title="Quality Settings"></a><h4>Quality Settings</h4>
<p>Specify the relative quality of a codec. The values are arbitrary
and are provided as a suggestion. You can add more quality setting
constants, or ignore them.</p>
<dl class="termdef">	<dt><code>kAudioCodecQuality_Max
= 0x7F</code></dt>
<dd><p>The maximum value allowed for the codec.</p></dd>
<dt><code>kAudioCodecQuality_High
= 0x60</code></dt>
<dd><p>A high quality setting.</p></dd>
<dt><code>kAudioCodecQuality_Medium
= 0x40</code></dt>
<dd><p>A medium quality setting.</p></dd>
<dt><code>kAudioCodecQuality_Low
= 0x20</code></dt>
<dd><p>A low quality setting.</p></dd>
<dt><code>kAudioCodecQuality_Min
= 0</code></dt>
<dd><p>The minimum quality setting allowed for the codec.</p></dd></dl>
<p>These constants are used by the <code>kAudioCodecPropertyQualitySetting</code> property.
They are arbitrary and are provided as a suggestion. You can add
more quality setting constants or ignore them altogether.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-54342" title="Priming Selectors"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF112" title="Priming Selectors"></a><h4>Priming Selectors</h4>
<p>Specify the priming method use.</p>
<dl class="termdef">	<dt><code>kAudioCodecPrimeMethod_Pre
= 0</code></dt>
<dd><p>The codec primes with the leading and trailing input
frames.</p></dd>
<dt><code>kAudioCodecPrimeMethod_Normal
= 1</code></dt>
<dd><p>The codec primes with the trailing input frames only;
all leading frames are assumed to be silence.</p></dd>
<dt><code>kAudioCodecPrimeMethod_None
= 2</code></dt>
<dd><p>The codec does not prime; both leading and trailing
frames are assumed to be silent.</p></dd></dl>
<p>These constants are used with the <code>kAudioCodecPrimeMethod</code> property.
The number of frames that are used in priming is stored in the <code><a href="audiocodec.html#//apple_ref/c/tdef/AudioCodecPrimeInfo">AudioCodecPrimeInfo</a></code> structure,
which is accessible through the <code><!--a  -->kAudioCodecPrimeInfo<!--/a--></code> property.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-55006" title="Output Packet Status Constants"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF113" title="Output Packet Status Constants"></a><h4>Output Packet Status
Constants</h4>
<p>When using the <code><!--a-->ProduceOutputPackets()<!--/a--></code> method
to pull data through the codec, one of the parameters, <code>outStatus</code>,
has a value that reflects the state of the encode or decode after
the pull has occurred. These are the possible values:</p>
<dl class="termdef">	<dt><code>kAudioCodecProduceOutputPacketFailure
= 1</code></dt>
<dd><p>There was an error processing the data; check <em>ioNumberPackets</em> to
see how many packets were processed.</p></dd>
<dt><code>kAudioCodecProduceOutputPacketSuccess
= 2</code></dt>
<dd><p>The requested packets were processed successfully and
to completion.</p></dd>
<dt><code>kAudioCodecProduceOutputPacketSuccessHasMore
= 3</code></dt>
<dd><p>The requested packets were processed successfully, and
there are more left to process.</p></dd>
<dt><code>kAudioCodecProduceOutputPacketNeedsMoreInputData
= 4</code></dt>
<dd><p>There was not enough data to produce the requested number
of packets; check <em>ioNumberPackets</em> to
see how many were produced.</p></dd>
<dt><code>kAudioCodecProduceOutputPacketAtEOF
= 5</code></dt>
<dd><p>An end-of-file was encountered during processing, and
therefore the requested number of packets were not produced; check <code>ioNumberPackets</code> to
see how many were produced.</p></dd></dl>
<a name="//apple_ref/doc/uid/TP30001108-CH204-55724" title="Audio Codec Properties"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF114" title="Audio Codec Properties"></a><h3>Audio Codec Properties</h3>
<p>The property management system keeps track of information
about the codec&#8217;s operation, settings, and capabilities. These
are used in conjunction with <code><a href="audiocodec.html#//apple_ref/c/func/GetPropertyInfo">GetPropertyInfo</a></code>, <code><a href="audiocodec.html#//apple_ref/c/func/GetProperty">GetProperty</a></code>,
and <code><a href="audiocodec.html#//apple_ref/c/func/SetProperty">SetProperty</a></code>.</p>
<dl class="termdef">	<dt><code>kAudioCodecPropertyNameCFString
= 'lnam'</code></dt>
<dd><p>Returns a <code>CFStringRef</code> with
the name of the codec&#8217;s format.</p></dd>
<dt><code>kAudioCodecPropertyManufacturerCFString
= 'lmak'</code></dt>
<dd><p>Returns a <code>CFStringRef</code> with
the name of the codec&#8217;s manufacturer.</p></dd>
<dt><code>kAudioCodecPropertyRequiresPacketDescription
= 'pakd'</code></dt>
<dd><p>Returns a <code>UInt32</code> where a value
of <code>1</code> means that the codec
requires an <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioStreamPacketDescription">AudioStreamPacketDescription</a></code> to
be supplied with any data in the format. If <code>0</code> is
returned, <code>AudioStreamPacketDescription</code> is not
needed. This property is used primary in the <code><a href="audiocodec.html#//apple_ref/c/func/AppendInputData">AppendInputData</a></code> method.</p></dd>
<dt><code>kAudioCodecPropertyPacketFrameSize
= 'pakf'</code></dt>
<dd><p>Passes back a <code>UInt32</code> that
reflects the number of frames of audio data in each packet of data
in the codec&#8217;s format. The value is for an encoder&#8217;s input or a
decoder&#8217;s output. Note that this value may be queried only after
a codec&#8217;s initialization.</p></dd>
<dt><code>kAudioCodecPropertyHasVariablePacketByteSizes
= 'vpk?'</code></dt>
<dd><p>Returns a <code>UInt32</code> where
a value of <code>0</code> indicates
that all of the packets in the codec&#8217;s format have the same byte
size, whereas a value of <code>1</code> indicates
that the packets vary in size.</p></dd>
<dt><code>kAudioCodecPropertyMaximumPacketByteSize
= 'pakb'</code></dt>
<dd><p>If the codec&#8217;s format has a constant packet size,
this value will be the number of bytes in a packet of the codec&#8217;s
format; if the format has a variable bit rate, this value will be
the number of bytes in the largest of the packets in the codec&#8217;s
format.</p></dd>
<dt><code>kAudioCodecPropertyCurrentInputFormat
= 'ifmt'</code></dt>
<dd><p>Returns an <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioStreamBasicDescription">AudioStreamBasicDescription</a></code> describing
the current input format for the codec.</p></dd>
<dt><code>kAudioCodecPropertySupportedInputFormats
= 'ifm#'</code></dt>
<dd><p>Returns an <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioStreamBasicDescription">AudioStreamBasicDescription</a></code> array
describing the input formats supported by the codec.</p></dd>
<dt><code>kAudioCodecPropertyCurrentOutputFormat
= 'ofmt'</code></dt>
<dd><p>Returns an <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioStreamBasicDescription">AudioStreamBasicDescription</a></code> describing
the current 
output format for the codec.</p></dd>
<dt><code>kAudioCodecPropertySupportedOutputFormats
= 'ofm#'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioStreamBasicDescription">AudioStreamBasicDescription</a></code> describing
the output formats supported by the codec.</p></dd>
<dt><code>kAudioCodecPropertyMagicCookie
= 'kuki'</code></dt>
<dd><p>Returns an untyped buffer of configuration data the
codec requires to process the stream of data. Note that not every
codec requires a magic cookie.</p></dd>
<dt><code>kAudioCodecPropertyInputBufferSize
= 'tbuf'</code></dt>
<dd><p>Returns a <code>UInt32</code> that
contains the maximum input buffer size for the codec, in bytes.</p></dd>
<dt><code>kAudioCodecPropertyUsedInputBufferSize
= 'ubuf'</code></dt>
<dd><p>Returns a <code>UInt32</code> that
contains the number of bytes currently in use in the buffer.</p></dd>
<dt><code>kAudioCodecPropertyIsInitialized
= 'init'</code></dt>
<dd><p>Returns a <code>UInt32</code> where
a value of <code>0</code> means the
codec is initialized, while any other value means the codec is initialized.</p></dd>
<dt><code>kAudioCodecPropertyCurrentTargetBitRate
= 'brat'</code></dt>
<dd><p>A <code>UInt32</code> containing
the number of bits per second to aim for when encoding data. This
property is only relevant to encoders.</p></dd>
<dt><code>kAudioCodecPropertyAvailableBitRates
= 'brt#'</code></dt>
<dd><p>A <code>UInt32</code> array
containing the target bit rates supported by the encoder. Note that
use of this property is deprecated in favor of <code>kAudioCodecPropertyAvailableBitRateRange</code>.</p></dd>
<dt><code>kAudioCodecPropertyCurrentInputSampleRate
= 'cisr'</code></dt>
<dd><p>Passes back a <code>Float64</code> containing
current input sample rate in Hz.</p></dd>
<dt><code>kAudioCodecPropertyCurrentOutputSampleRate
= 'cosr'</code></dt>
<dd><p>Passes back a <code>Float64</code> containing
current output sample rate in Hz.</p></dd>
<dt><code>kAudioCodecPropertyAvailableInputSampleRates
= 'aisr'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioValueRange">AudioValueRange</a></code> structures
indicating the valid ranges for the input sample rate of the codec
for the current bit rate.</p></dd>
<dt><code>kAudioCodecPropertyAvailableOutputSampleRates
= 'aosr'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioValueRange">AudioValueRange</a></code> structures
indicating the valid ranges for the output sample rates of the codec
for the current bit rate.</p></dd>
<dt><code>kAudioCodecPropertyQualitySetting
= 'srcq'</code></dt>
<dd><p>Returns a value to indicate the relative value of the
codec&#8217;s encoding or decoding quality; see <span class="content_text"><a href="audiocodec.html#//apple_ref/doc/uid/TP30001108-CH204-54283">“Quality Settings”</a></span> for possible
values.</p></dd>
<dt><code>kAudioCodecPropertyCurrentLoudnessStatistics
= 'loud'</code></dt>
<dd><p>Passes back a reference to an <code><a href="audiocodec.html#//apple_ref/c/tdef/AudioStreamLoudnessStatistics">AudioStreamLoudnessStatistics</a></code> array
that provides statistics about the loudness of each channel in the
stream of data being processed by the codec. Note that this property
can be queried only when the codec is initialized. Until data has
actually moved through it, the values are all defaults.</p></dd>
<dt><code>kAudioCodecPropertyAvailableBitRateRange
= 'abrt'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioValueRange">AudioValueRange</a></code> structures
that represents the target bit rates supported by the encoder.</p></dd>
<dt><code>kAudioCodecPropertyApplicableBitRateRange
= 'brta'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioValueRange">AudioValueRange</a></code> structures
that represents the target bit rates supported by the encoder as
it is currently configured.</p></dd>
<dt><code>kAudioCodecPropertyApplicableInputSampleRates
= 'isra'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioValueRange">AudioValueRange</a></code> structures
that represents the valid ranges for the input sample rates of the
codec for the current bit rate.</p></dd>
<dt><code>kAudioCodecPropertyApplicableOutputSampleRates
= 'osra'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioValueRange">AudioValueRange</a></code> structures
that represents the valid ranges for the output sample rates of
the codec for the current bit rate.</p></dd>
<dt><code>kAudioCodecPropertyMinimumNumberInputPackets
= 'mnip'</code></dt>
<dd><p>Returns a <code>UInt32</code> reflecting
the minimum number of packets that need to be supplied to the codec.</p></dd>
<dt><code>kAudioCodecPropertyMinimumNumberOutputPackets
= 'mnop'</code></dt>
<dd><p>Returns a <code>UInt32</code> indicating
the minimum number of output packets that need to be handled from
the codec.</p></dd>
<dt><code>kAudioCodecPropertyZeroFramesPadded
= 'pad0'</code></dt>
<dd><p>Returns a <code>UInt32</code> indicating
the number of zeroes (samples) that were appended to the last packet
of input data to make it a complete packet.</p></dd>
<dt><code>kAudioCodecPropertyChannelLayout
= 'cmap'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioChannelLayout">AudioChannelLayout</a></code> structures
that specifies the channel layout that the codec is using.</p></dd>
<dt><code>kAudioCodecPropertyAvailableChannelLayouts
= 'cmp#'</code></dt>
<dd><p>Returns an array of <code><a href="../core_audio_types/core_audio_types.html#//apple_ref/c/tdef/AudioChannelLayout">AudioChannelLayout</a></code> structures
array that contains the channel layouts the codec is capable of
using.</p></dd>
<dt><code>kAudioCodecPrimeMethod
= 'prmm'</code></dt>
<dd><p>Passes back a <code><!--a  -->kAudioCodecPrimeMethod<!--/a--></code> constant
specifying the priming method currently used by the codec. See <span class="content_text"><a href="audiocodec.html#//apple_ref/doc/uid/TP30001108-CH204-54342">“Priming Selectors”</a></span> for
possible values.</p></dd>
<dt><code>kAudioCodecPrimeInfo =
'prim'</code></dt>
<dd><p>Uses a pointer to an instance of <code><a href="audiocodec.html#//apple_ref/c/tdef/AudioCodecPrimeInfo">AudioCodecPrimeInfo</a></code> to specify the leading
and trailing number of frames used in priming.</p></dd></dl>
<a name="//apple_ref/doc/uid/TP30001108-CH204-57957" title="Base Classes"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF115" title="Base Classes"></a><h3>Base Classes</h3>
<p>There are three classes provided in the Audio Codec SDK, located
in <code>/AudioCodecs/ACPublic/,</code> one of which must
be subclassed when developing a codec: <code>ACCodec</code>, <code>ACBaseCodec</code>,
and <code>ACSimpleCodec</code>. It
is strongly advised that the developer subclass <code>ACBaseCodec</code> over <code>ACCodec</code>when
developing an audio codec, since it provides many of the property
and format management feature required of an audio codec. Note that
abstract methods that exist in <code>ACCodec</code> must
be implemented in subclasses of <code>ACBaseCodec</code> and <code>ACSimpleCodec</code>.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-50989" title="ACCodec"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF116" title="ACCodec"></a><h4>ACCodec</h4>
<p><code>ACCodec</code> defines
the basic methods which any audio codec must implement to be used
in Mac OS X. Most of the methods belonging to <code>ACCodec</code> are
abstract, since they need to customized by the codec developer for
the codec being implemented. Please note that many of these methods
are implemented by <code>ACBaseCodec</code> and <code>ACSimpleCodec</code>.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-51003" title="Construction and Destruction"></a><h5>Construction
and Destruction</h5>
<p>Constructors and destructors should be implemented for the
codec as needed, and should at least allocate the needed buffer
space for the codec and deallocate the space upon the codec&#8217;s
destruction.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-51021" title="Property Management"></a><h5>Property
Management</h5>
<p>These methods provide access to the property management system,
which keeps track of various pieces of information about the codec.
Their implementation is required since other components in Core
Audio rely on their existence. Note that <code>ACBaseCodec</code> contains implementations
of these methods that are adequate for most uses.</p>
<a name="//apple_ref/c/func/GetPropertyInfo" title="GetPropertyInfo"></a><a name="//apple_ref/doc/c_ref/GetPropertyInfo" title="GetPropertyInfo"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetPropertyInfo()" title="GetPropertyInfo"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_277"></a><h3 class="tight">GetPropertyInfo</h3>
<p class="spaceabove">Passes back the size of the property data belonging to <code>inPropertyID</code>,
and its writable state.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void GetPropertyInfo(
<a href="../../AudioCodecServicesRef/Reference/reference.html#//apple_ref/doc/c_ref/AudioCodecPropertyID" target="_top">AudioCodecPropertyID</a> inPropertyID,
UInt32&amp; outSize,
bool&amp; outWritable
) = 0
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 through Mac OS X v10.1.</li></ul><h5 class="tight">Declared In</h5><code>AudioUnit.k.h</code>
<a name="//apple_ref/c/func/GetProperty" title="GetProperty"></a><a name="//apple_ref/doc/c_ref/GetProperty" title="GetProperty"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetProperty()" title="GetProperty"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_278"></a><h3 class="tight">GetProperty</h3>
<p class="spaceabove">Passes the property data belonging to <code>inPropertyID</code> into <code>outPropertyData</code>.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void GetProperty(
<a href="../../AudioCodecServicesRef/Reference/reference.html#//apple_ref/doc/c_ref/AudioCodecPropertyID" target="_top">AudioCodecPropertyID</a> inPropertyID,
UInt32&amp; ioPropertyDataSize,
void* outPropertyData
) = 0
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.k.h</code>
<a name="//apple_ref/c/func/SetProperty" title="SetProperty"></a><a name="//apple_ref/doc/c_ref/SetProperty" title="SetProperty"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-SetProperty()" title="SetProperty"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_279"></a><h3 class="tight">SetProperty</h3>
<p class="spaceabove">Takes <code>inPropertyData</code> and
sets it to the property data belonging to <code>inPropertyID</code>.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void SetProperty(
<a href="../../AudioCodecServicesRef/Reference/reference.html#//apple_ref/doc/c_ref/AudioCodecPropertyID" target="_top">AudioCodecPropertyID</a> inPropertyID,
UInt32 inPropertyDataSize,
const void* inPropertyData
) = 0
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.k.h</code>
<a name="//apple_ref/doc/uid/TP30001108-CH204-51403" title="Data Handling"></a><h5>Data
Handling</h5>
<p>The Data Handling methods deal with getting data into, processed,
and out of the audio codec. All of these methods are abstract and
must be implemented by subclasses of <code>ACCodec</code>.</p>
<a name="//apple_ref/c/func/Initialize" title="Initialize"></a><a name="//apple_ref/doc/c_ref/Initialize" title="Initialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Initialize()" title="Initialize"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_280"></a><h3 class="tight">Initialize</h3>
<p class="spaceabove">Specifies the input and output formats for the data coming
into and going out of the codec, as well as the magic cookie for
the data currently being encoded or decoded.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Initialize(
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* inInputFormat,
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* inOutputFormat,
const void* inMagicCookie,
UInt32 inMagicCookieByteSize
) = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>When a codec is initialized, all of its properties should
be locked, so that they may not be changed during the encoding or
decoding. Note that a codec may be used only after it is initialized.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.k.h</code>
<a name="//apple_ref/c/func/Uninitialize" title="Uninitialize"></a><a name="//apple_ref/doc/c_ref/Uninitialize" title="Uninitialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Uninitialize()" title="Uninitialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_281"></a><h3 class="tight">Uninitialize</h3>
<p class="spaceabove">Unlocks the codec, so that its properties may be altered.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Uninitialize() = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>An audio codec that has been uninitialized may not be used
to encode or decode data, since its properties may be altered at
any time.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 through Mac OS X v10.1.</li></ul><h5 class="tight">Declared In</h5><code>AudioUnit.k.h</code>
<a name="//apple_ref/c/func/AppendInputData" title="AppendInputData"></a><a name="//apple_ref/doc/c_ref/AppendInputData" title="AppendInputData"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-AppendInputData()" title="AppendInputData"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_282"></a><h3 class="tight">AppendInputData</h3>
<p class="spaceabove">Passes in data to placed in the buffer for encoding or
decoding.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void AppendInputData(
const void* inInputData,
UInt32&amp; ioInputDataByteSize,
UInt32&amp; ioNumberPackets,
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamPacketDescription">AudioStreamPacketDescription</a>* inPacketDescription
) = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Here, <code>inInputData</code> is
the data that should be put in the input buffer, and the rest of
the parameters describe the size and nature of the data.</p>
<a name="//apple_ref/c/func/ProduceOutputPackets" title="ProduceOutputPackets"></a><a name="//apple_ref/doc/c_ref/ProduceOutputPackets" title="ProduceOutputPackets"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-ProduceOutputPackets()" title="ProduceOutputPackets"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_283"></a><h3 class="tight">ProduceOutputPackets</h3>
<p class="spaceabove">Runs the codec and returns encoded or decoded data.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> UInt32 ProduceOutputPackets(
void* outOutputData,
UInt32&amp; ioOutputDataByteSize,
UInt32&amp; ioNumberPackets,
AudioStreamPacketDescription* outPacketDescription
UInt32&amp; outStatus,
) = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Calling <code>ProduceOutputPackets()</code> should
pull <code>ioNumberPackets</code> from
the buffer, encode or decoded them, and place them in <code>outOutputData</code>.
The value of <code>outStatus</code> should
be based on the <code>kAudioCodecProduceOutputPacket</code> set
of enumerated values, informing the caller if the encode or decode
failed, was a success, was a success and has more to encode or decode,
was partially successful, yet needed more input, or was at the end
of the file.</p>
<a name="//apple_ref/c/func/Reset" title="Reset"></a><a name="//apple_ref/doc/c_ref/Reset" title="Reset"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Reset()" title="Reset"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_284"></a><h3 class="tight">Reset</h3>
<p class="spaceabove">Clears out the codec&#8217;s input buffer and returns any
state info to its initial settings.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Reset() = 0
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTStreamingComponents.k.h</code>
<a name="//apple_ref/doc/uid/TP30001108-CH204-51944" title="Component Support"></a><h5>Component
Support</h5>
<p>An audio codec is a Component, and therefore, needs to be
accessible from the Component Manager in order for an application
to use it. These methods perform duties that Components must perform
in order to be used.</p>
<a name="//apple_ref/c/func/Register" title="Register"></a><a name="//apple_ref/doc/c_ref/Register" title="Register"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Register()" title="Register"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_285"></a><h3 class="tight">Register</h3>
<p class="spaceabove">Registers the audio codec with the Component Manager.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> bool Register() const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is provided in <code>ACCodec</code> and
usually does not need to be overridden; however, <code><!--a-->Register()<!--/a--></code> is
virtual, should this be necessary.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Components.k.h</code>
<a name="//apple_ref/c/func/GetVersion" title="GetVersion"></a><a name="//apple_ref/doc/c_ref/GetVersion" title="GetVersion"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetVersion()" title="GetVersion"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_286"></a><h3 class="tight">GetVersion</h3>
<p class="spaceabove">Returns the version number of the codec.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> UInt32 GetVersion() const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method should be overridden to reflect the version number
of the codec; however, this is not required of the codec, only recommended.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-61154" title="ACBaseCodec"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF117" title="ACBaseCodec"></a><h4>ACBaseCodec</h4>
<p><code>ACBaseCodec</code> is
provided as a base for building new audio codec components. It provides
all of the Property Management features required of an audio codec,
as well as most Format Management methods. Use of <code>ACBaseCodec</code> is
encouraged when the audio codec being developed has its own custom
buffering scheme, and would not benefit from the ring buffer already
provided for in <code>ACSimpleCodec</code>.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-61171" title="Construction and Destruction"></a><h5>Construction
and Destruction</h5>
<p>Constructors and destructors should be developed as needed,
and may allocate the needed buffer space for the codec. Also, <code><a href="audiocodec.html#//apple_ref/c/func/AddInputFormat">AddInputFormat</a></code> and <code><a href="audiocodec.html#//apple_ref/c/func/AddOutputFormat">AddOutputFormat</a></code> should
be called from a constructor to set up descriptions for the codec&#8217;s
supported formats.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-61193" title="Property Management"></a><h5>Property
Management</h5>
<p>These methods are required of an audio codec and are implemented
for developer convenience in <code>ACBaseCodec</code>.
While overriding these methods is possible, it is usually not necessary.</p>
<a name="//apple_ref/c/func/GetPropertyInfo" title="GetPropertyInfo"></a><a name="//apple_ref/doc/c_ref/GetPropertyInfo" title="GetPropertyInfo"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetPropertySize()" title="GetPropertyInfo"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_287"></a><h3 class="tight">GetPropertyInfo</h3>
<p class="spaceabove">Takes in an <code>AudioCodecPropertyID</code>,
and, by reference, passes back the size of the property data, and
a flag telling if the property is writable.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void GetPropertyInfo(
<a href="../../AudioCodecServicesRef/Reference/reference.html#//apple_ref/doc/c_ref/AudioCodecPropertyID" target="_top">AudioCodecPropertyID</a> inPropertyID,
UInt32&amp; outPropertyDataSize,
bool&amp; outWritable
)
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 through Mac OS X v10.1.</li></ul><h5 class="tight">Declared In</h5><code>AudioUnit.k.h</code>
<a name="//apple_ref/c/func/GetProperty" title="GetProperty"></a><a name="//apple_ref/doc/c_ref/GetProperty" title="GetProperty"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetProperty()" title="GetProperty"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_288"></a><h3 class="tight">GetProperty</h3>
<p class="spaceabove">Takes in a <code>AudioCodecPropertyID</code>,
the property data size (attained using <code>GetPropertySize()</code>),
and a <code>void</code> pointer for
the resulting data.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void GetProperty(
<a href="../../AudioCodecServicesRef/Reference/reference.html#//apple_ref/doc/c_ref/AudioCodecPropertyID" target="_top">AudioCodecPropertyID</a> inPropertyID,
UInt32&amp; ioPropertyDataSize,
void* outPropertyData)
</pre></p>
<h5 class="tight">Discussion</h5>
<p><code>inPropertyID</code> corresponds
to any of the properties listed in the <code><a href="audiocodec.html#//apple_ref/doc/uid/TP30001108-CH204-55724">Audio Codec Properties</a></code> section. For the <code>outPropertyData</code> parameter,
pass in a <code>void</code> pointer,
and the data promised for the property will be passed back into
the pointer, typecast to the appropriate type.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.k.h</code>
<a name="//apple_ref/c/func/SetProperty" title="SetProperty"></a><a name="//apple_ref/doc/c_ref/SetProperty" title="SetProperty"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-SetProperty()" title="SetProperty"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_289"></a><h3 class="tight">SetProperty</h3>
<p class="spaceabove">Takes in the <code>AudioCodecPropertyID</code> of
the property to be set, the size of the data to be set, and a <code>void</code> pointer
to the data.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void SetProperty(
<a href="../../AudioCodecServicesRef/Reference/reference.html#//apple_ref/doc/c_ref/AudioCodecPropertyID" target="_top">AudioCodecPropertyID</a> inPropertyID,
UInt32 inPropertyDataSize,
const void* inPropertyData
)
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.k.h</code>
<a name="//apple_ref/doc/uid/TP30001108-CH204-47169" title="Data Handling"></a><h5>Data
Handling</h5>
<p>These methods are used for initialization, uninitialization,
and like-minded methods for a codec. Many of these methods may be
left as implemented in <code>ACBaseCodec</code>,
but may be overridden as needed. Note that some methods are abstract,
meaning that, in an <code>ACBaseCodec</code> subclass,
they must be implemented.</p>
<a name="//apple_ref/c/func/IsInitialized" title="IsInitialized"></a><a name="//apple_ref/doc/c_ref/IsInitialized" title="IsInitialized"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-IsInitialized()" title="IsInitialized"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_290"></a><h3 class="tight">IsInitialized</h3>
<p class="spaceabove">Returns the value of <code>mIsInitialized</code>,
which should be set in <code>Initialize()</code> and <code>Uninitialize()</code>.</p>
<p class="spaceabove"><pre>
bool IsInitialized() const { <!--a-->return<!--/a--> mIsInitialized; }
</pre></p>
<a name="//apple_ref/c/func/Initialize" title="Initialize"></a><a name="//apple_ref/doc/c_ref/Initialize" title="Initialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Initialize()" title="Initialize"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_291"></a><h3 class="tight">Initialize</h3>
<p class="spaceabove">Passes in an input and output format, the codec&#8217;s magic
cookie, and the cookie&#8217;s size.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Initialize(
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* inInputFormat,
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* inOutputFormat,
const void* inMagicCookie,
UInt32 inMagicCookieByteSize)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The purpose of <code>Initialize()</code> is
to provide a mechanism for the codec user to specify the formats of
the incoming and outgoing data, the proper data for the magic cookie,
and the size of the magic cookie. Initializing a codec should lock
it so that none of its attributes maybe changed. Note that encoding
and decoding should only commence after the codec is initialized</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.k.h</code>
<a name="//apple_ref/c/func/Uninitialize" title="Uninitialize"></a><a name="//apple_ref/doc/c_ref/Uninitialize" title="Uninitialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Uninitialize()" title="Uninitialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_292"></a><h3 class="tight">Uninitialize</h3>
<p class="spaceabove">Unlocks the codec, so that its attributes may be modified.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Uninitialize()
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Note that no encoding or decoding should be allowed when an
audio codec is uninitialized.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 through Mac OS X v10.1.</li></ul><h5 class="tight">Declared In</h5><code>AudioUnit.k.h</code>
<a name="//apple_ref/c/func/Reset" title="Reset"></a><a name="//apple_ref/doc/c_ref/Reset" title="Reset"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Reset()" title="Reset"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_293"></a><h3 class="tight">Reset</h3>
<p class="spaceabove">Clears out the codec&#8217;s buffer and returns it to the
post-initialized state.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Reset()
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTStreamingComponents.k.h</code>
<a name="//apple_ref/c/func/GetInputBufferSize" title="GetInputBufferSize"></a><a name="//apple_ref/doc/c_ref/GetInputBufferSize" title="GetInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetInputBufferSize()" title="GetInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_294"></a><h3 class="tight">GetInputBufferSize</h3>
<p class="spaceabove">Returns the current input buffer size as a <code>UInt32</code>.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> UInt32 GetInputBufferByteSize() const = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This abstract method must be implemented by any subclass of <code>ACBasicCodec</code>,
since the return value is dependant on the buffer size used in the
buffer scheme implemented by the developer.</p>
<a name="//apple_ref/c/func/GetUsedInputBufferSize" title="GetUsedInputBufferSize"></a><a name="//apple_ref/doc/c_ref/GetUsedInputBufferSize" title="GetUsedInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetUsedInputBufferSize()" title="GetUsedInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_295"></a><h3 class="tight">GetUsedInputBufferSize</h3>
<p class="spaceabove">Returns a <code>UInt32</code> which
reflects how much of the input buffer is currently filled up.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> UInt32 GetUsedInputBufferByteSize() const = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This abstract method must be implemented by any subclass of <code>ACBasicCodec</code>.</p>
<a name="//apple_ref/c/func/ReallocateInputBuffer" title="ReallocateInputBuffer"></a><a name="//apple_ref/doc/c_ref/ReallocateInputBuffer" title="ReallocateInputBuffer"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-ReallocateInputBuffer()" title="ReallocateInputBuffer"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_296"></a><h3 class="tight">ReallocateInputBuffer</h3>
<p class="spaceabove">Resizes the buffer to <code>inInputBufferSize</code>.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void ReallocateInputBuffer(UInt32 inInputBufferByteSize) = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>For codecs which implement user-definable input buffer sizes, <code>ReallocateInputBuffer()</code> is
a mechanism which allows for resizing of the input buffer.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-47827" title="Format Management"></a><h5>Format
Management</h5>
<p>This portion of <code>ACBaseCodec</code> focuses
on keeping track of the formats that a codec can decode and encode.
If should be noted that while none of these methods are declared
abstract, it would be advantageous to override some of them; conversely,
some of these methods are not virtual, so what <code>ACBasicCodec</code> implements
for them is adequate.</p>
<a name="//apple_ref/c/func/GetNumberSupportedInputFormats" title="GetNumberSupportedInputFormats"></a><a name="//apple_ref/doc/c_ref/GetNumberSupportedInputFormats" title="GetNumberSupportedInputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetNumberSupportedInputFormats()" title="GetNumberSupportedInputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_297"></a><h3 class="tight">GetNumberSupportedInputFormats</h3>
<p class="spaceabove">Counts and returns the number of formats that the codec
supports. </p>
<p class="spaceabove"><pre>
UInt32 GetNumberSupportedInputFormats() const
</pre></p>
<a name="//apple_ref/c/func/GetSupportedInputFormats" title="GetSupportedInputFormats"></a><a name="//apple_ref/doc/c_ref/GetSupportedInputFormats" title="GetSupportedInputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetSupportedInputFormats()" title="GetSupportedInputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_298"></a><h3 class="tight">GetSupportedInputFormats</h3>
<p class="spaceabove">Passes back an array of the supported input formats for
this codec. </p>
<p class="spaceabove"><pre>
void GetSupportedInputFormats(
<a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* outInputFormats,
UInt32&amp; ioNumberInputFormats
) const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>After the number of supported formats is acquired, it should
be used in this method, which will pass back an <code>AudioStreamBasicDescription</code> array
which contains the descriptions of all of the supported input formats. <code>ioNumberInputFormats</code> is
also passed back as a check to ensure that the correct number of
formats were returned.</p>
<a name="//apple_ref/c/func/GetCurrentInputFormat" title="GetCurrentInputFormat"></a><a name="//apple_ref/doc/c_ref/GetCurrentInputFormat" title="GetCurrentInputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetCurrentInputFormat()" title="GetCurrentInputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_299"></a><h3 class="tight">GetCurrentInputFormat</h3>
<p class="spaceabove">Passes back an <code>AudioStreamBasicDescription</code> with
the current input format information in it.</p>
<p class="spaceabove"><pre>
void GetCurrentInputFormat(<a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>&amp; outInputFormat)
</pre></p>
<a name="//apple_ref/c/func/SetCurrentInputFormat" title="SetCurrentInputFormat"></a><a name="//apple_ref/doc/c_ref/SetCurrentInputFormat" title="SetCurrentInputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-SetCurrentInputFormat()" title="SetCurrentInputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_300"></a><h3 class="tight">SetCurrentInputFormat</h3>
<p class="spaceabove">Takes an <code>AudioStreamBasicDescription</code> and
sets it to be the current input format.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void SetCurrentInputFormat(
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>&amp; inInputFormat
)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Setting a codec&#8217;s input format is performed by calling this
method and passing it an instance of <code>AudioStreamBasicDescription</code>,
configured to the proper format. Note that <code>ACBasicCodec</code> provides
a method for setting the current input format for the codec, but
that this may need to be overridden based on the implemented codec&#8217;s
capabilities.</p>
<a name="//apple_ref/c/func/GetNumberSupportedOutputFormats" title="GetNumberSupportedOutputFormats"></a><a name="//apple_ref/doc/c_ref/GetNumberSupportedOutputFormats" title="GetNumberSupportedOutputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetNumberSupportedOutputFormats()" title="GetNumberSupportedOutputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_301"></a><h3 class="tight">GetNumberSupportedOutputFormats</h3>
<p class="spaceabove">Counts and returns the number of supported output formats.</p>
<p class="spaceabove"><pre>
UInt32 GetNumberSupportedOutputFormats() const
</pre></p>
<a name="//apple_ref/c/func/GetSupporedOutputFormats" title="GetSupporedOutputFormats"></a><a name="//apple_ref/doc/c_ref/GetSupporedOutputFormats" title="GetSupporedOutputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetSupporedOutputFormats()" title="GetSupporedOutputFormats"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_302"></a><h3 class="tight">GetSupporedOutputFormats</h3>
<p class="spaceabove">Passes back and array of the supported output formats.</p>
<p class="spaceabove"><pre>
void GetSupportedOutputFormats(
<a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* outOutputFormats,
UInt32&amp; ioNumberOutputFormats
) const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The value of <code>outOutputFormats</code> is
an <code>AudioStreamBasicDescription</code> array.
The input for <code>ioNumberOutputFormats</code> should
be the result of <code>GetNumberSupportedOutFormats()</code>,
and its output will be the actual number of <code>AudioStreamBasicDescription</code> instances
in <code>outOutputFormats</code>.</p>
<a name="//apple_ref/c/func/GetCurrentOutputFormat" title="GetCurrentOutputFormat"></a><a name="//apple_ref/doc/c_ref/GetCurrentOutputFormat" title="GetCurrentOutputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetCurrentOutputFormat()" title="GetCurrentOutputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_303"></a><h3 class="tight">GetCurrentOutputFormat</h3>
<p class="spaceabove">Passes back a description of the current output format.</p>
<p class="spaceabove"><pre>
void GetCurrentOutputFormat(<a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>&amp; outOutputFormat)
</pre></p>
<a name="//apple_ref/c/func/SetCurrentOutputFormat" title="SetCurrentOutputFormat"></a><a name="//apple_ref/doc/c_ref/SetCurrentOutputFormat" title="SetCurrentOutputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-SetCurrentOutputFormat()" title="SetCurrentOutputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_304"></a><h3 class="tight">SetCurrentOutputFormat</h3>
<p class="spaceabove">Sets the output format to <code>inOutputFormat</code>.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void SetCurrentOutputFormat(
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>&amp; inOutputFormat
)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is declared as virtual, so that it may be modified
as needed to adjust to the needs of different codecs.</p>
<a name="//apple_ref/c/func/GetMagicCookieByteSize" title="GetMagicCookieByteSize"></a><a name="//apple_ref/doc/c_ref/GetMagicCookieByteSize" title="GetMagicCookieByteSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetMagicCookieByteSize()" title="GetMagicCookieByteSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_305"></a><h3 class="tight">GetMagicCookieByteSize</h3>
<p class="spaceabove">Returns the size of the current magic cookie.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> UInt32 GetMagicCookieByteSize() const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>If the codec implements a magic cookie, it is strongly advised
that the codec developer override this method, since each codec&#8217;s
magic cookie has its own size.</p>
<a name="//apple_ref/c/func/GetMagicCookie" title="GetMagicCookie"></a><a name="//apple_ref/doc/c_ref/GetMagicCookie" title="GetMagicCookie"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetMagicCookie()" title="GetMagicCookie"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_306"></a><h3 class="tight">GetMagicCookie</h3>
<p class="spaceabove">Extracts the magic cookie from the codec.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void GetMagicCookie(
void* outMagicCookieData,
UInt32&amp; ioMagicCookieDataByteSize
) const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is virtual and should be overridden based on the
codec&#8217;s requirements for magic cookies.</p>
<a name="//apple_ref/c/func/SetMagicCookie" title="SetMagicCookie"></a><a name="//apple_ref/doc/c_ref/SetMagicCookie" title="SetMagicCookie"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-SetMagicCookie()" title="SetMagicCookie"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_307"></a><h3 class="tight">SetMagicCookie</h3>
<p class="spaceabove">Sets the magic cookie for the codec.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void SetMagicCookie(
const void* outMagicCookieData,
UInt32 inMagicCookieDataByteSize
)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is virtual and should be overridden based on the
codec&#8217;s requirements for magic cookies.</p>
<a name="//apple_ref/c/func/AddInputFormat" title="AddInputFormat"></a><a name="//apple_ref/doc/c_ref/AddInputFormat" title="AddInputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-AddInputFormat()" title="AddInputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_308"></a><h3 class="tight">AddInputFormat</h3>
<p class="spaceabove">Adds <code>inInputFormat</code> to
the <code>mInputFormatList</code>.</p>
<p class="spaceabove"><pre>
void AddInputFormat(const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>&amp; inInputFormat)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is provided for the subclass&#8217;s constructor,
so that the developer may supply input format information. This
is then used by other methods in the Property Management system.</p>
<a name="//apple_ref/c/func/AddOutputFormat" title="AddOutputFormat"></a><a name="//apple_ref/doc/c_ref/AddOutputFormat" title="AddOutputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-AddOutputFormat()" title="AddOutputFormat"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_309"></a><h3 class="tight">AddOutputFormat</h3>
<p class="spaceabove">Adds <code>inOutputFormat</code> to
the <code>mOutputFormatList</code>.</p>
<p class="spaceabove"><pre>
void AddOutputFormat(const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>&amp; inIOutputFormat)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is provided for the subclass&#8217;s constructor,
so that the developer may supply input format information. This
is then used by other methods in the Property Management system.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-61640" title="ACSimpleCodec"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF118" title="ACSimpleCodec"></a><h4>ACSimpleCodec</h4>
<p><code>ACSimpleCodec</code> builds
upon the foundation laid in <code>ACBaseCodec</code> by
providing a simple ring buffer implementation. Subclassing from <code>ACSimpleCodec </code>is
not required, but when the implemented codec does not require a
custom buffering scheme, using <code>ACSimpleCodec</code> is recommended.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-49491" title="Construction and Destruction"></a><h5>Construction
and Destruction</h5>
<p>The <code>ACSimpleCodec</code> constructor
takes in the size that the ring buffer should be, in bytes, and allocates
the appropriate space in memory. The destructor deallocates the
buffer, and should be called from any subclass&#8217;s destructor.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-49522" title="Data Handling"></a><h5>Data
Handling</h5>
<p><code>ACSimpleCodec</code> inherits
all of the format and property management methods from <code>ACBaseCodec</code>,
and so the only methods that need overridding for <code>ACSimpleCodec</code> are
those pertaining to Data Handling; that is, those that deal with
taking in and outputting converted data.</p>
<a name="//apple_ref/c/func/Initialize" title="Initialize"></a><a name="//apple_ref/doc/c_ref/Initialize" title="Initialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Initialize()" title="Initialize"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_310"></a><h3 class="tight">Initialize</h3>
<p class="spaceabove">Sets the codec&#8217;s input format, output format, and its
current magic cookie.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Initialize(
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* inInputFormat,
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription">AudioStreamBasicDescription</a>* inOutputFormat,
const void* inmagicCookie,
UInt32 inmagicCookieByteSize
) = 0
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method initializes the codec, meaning that is locks down
the input and output formats, as well as the magic cookie for the
buffer that is about to be encoded. It also locks all of the codecs
properties, so that they may not be altered during a conversion.
Encoding and decoding should be possible only when the codec is
initialized. Note that this method is declared as abstract, meaning
that it must be overridden by any subclass of <code>ACSimpleCodec</code>; this
is due to varying magic cookie implementations.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.k.h</code>
<a name="//apple_ref/c/func/Uninitialize" title="Uninitialize"></a><a name="//apple_ref/doc/c_ref/Uninitialize" title="Uninitialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Uninitialize()" title="Uninitialize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_311"></a><h3 class="tight">Uninitialize</h3>
<p class="spaceabove">Unlocks the codec so that its formats and properties may
be altered.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Uninitialize()
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is virtual, meaning that it may be overridden
as needed in subclasses of <code>ACSimpleCodec</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 through Mac OS X v10.1.</li></ul><h5 class="tight">Declared In</h5><code>AudioUnit.k.h</code>
<a name="//apple_ref/c/func/Reset" title="Reset"></a><a name="//apple_ref/doc/c_ref/Reset" title="Reset"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-Reset()" title="Reset"></a>
<a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_312"></a><h3 class="tight">Reset</h3>
<p class="spaceabove">Clears the codec&#8217;s buffer and returns the codec to the
post-initialization state.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void Reset()
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method is virtual, meaning that it may be overridden
as needed in subclasses of <code>ACSimpleCodec</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QTStreamingComponents.k.h</code>
<a name="//apple_ref/c/func/AppendInputData" title="AppendInputData"></a><a name="//apple_ref/doc/c_ref/AppendInputData" title="AppendInputData"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-AppendInputData()" title="AppendInputData"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_313"></a><h3 class="tight">AppendInputData</h3>
<p class="spaceabove">Takes a buffer of data in, along with its format description
and size information.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void AppendInputData(
const void* inInputData,
UInt32&amp; ioInputDataByteSize,
UInt32&amp; ioNumberPackets,
const <a href="../core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamPacketDescription">AudioStreamPacketDescription</a>* inPacketDescription
)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Note that this method is virtual, meaning that while <code>ACSimpleCodec</code> provides
this service, it may be overridden if the codec requires it.</p>
<a name="//apple_ref/c/func/GetInputBufferSize" title="GetInputBufferSize"></a><a name="//apple_ref/doc/c_ref/GetInputBufferSize" title="GetInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetInputBufferSize()" title="GetInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_314"></a><h3 class="tight">GetInputBufferSize</h3>
<p class="spaceabove">Returns the size of the codec&#8217;s buffer.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> UInt32 GetInputBufferByteSize() const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Note that this method is virtual, meaning that while <code>ACSimpleCodec</code> provides
this service, it may be overridden if the codec requires it.</p>
<a name="//apple_ref/c/func/GetUsedInputBufferSize" title="GetUsedInputBufferSize"></a><a name="//apple_ref/doc/c_ref/GetUsedInputBufferSize" title="GetUsedInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetUsedInputBufferSize()" title="GetUsedInputBufferSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_315"></a><h3 class="tight">GetUsedInputBufferSize</h3>
<p class="spaceabove">Returns the size of the codec&#8217;s buffer currently in
filled.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> UInt32 GetUsedInputBufferByteSize() const
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Note that this method is virtual, meaning that while <code>ACSimpleCodec</code> provides
this service, it may be overridden if the codec requires it.</p>
<a name="//apple_ref/c/func/ConsumeInputData" title="ConsumeInputData"></a><a name="//apple_ref/doc/c_ref/ConsumeInputData" title="ConsumeInputData"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-ConsumeInputData()" title="ConsumeInputData"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_316"></a><h3 class="tight">ConsumeInputData</h3>
<p class="spaceabove">Runs <code>inConsumedByteSize</code> amount
of data through the codec.</p>
<p class="spaceabove"><pre>
void ConsumeInputData(UInt32 inConsumedByteSize)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This method should be called from within the codec&#8217;s <code>ProduceOutputPackets()</code>.</p>
<a name="//apple_ref/c/func/GetInputBufferStart" title="GetInputBufferStart"></a><a name="//apple_ref/doc/c_ref/GetInputBufferStart" title="GetInputBufferStart"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetInputBufferStart()" title="GetInputBufferStart"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_317"></a><h3 class="tight">GetInputBufferStart</h3>
<p class="spaceabove">Returns the current start position of the buffer.</p>
<p class="spaceabove"><pre>
Byte* GetInputBufferStart() const {
return <!--a-->mInputBuffer<!--/a--> + mInputBufferStart;
}
</pre></p>
<a name="//apple_ref/c/func/GetInputBufferContiguousByteSize" title="GetInputBufferContiguousByteSize"></a><a name="//apple_ref/doc/c_ref/GetInputBufferContiguousByteSize" title="GetInputBufferContiguousByteSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-GetInputBufferContiguousByteSize()" title="GetInputBufferContiguousByteSize"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_318"></a><h3 class="tight">GetInputBufferContiguousByteSize</h3>
<p class="spaceabove">Returns the amount of the buffer left to process.</p>
<p class="spaceabove"><pre>
UInt32 GetInputBufferContiguousByteSize() const {
return (<!--a-->mInputBufferStart<!--/a--> &lt;= mInputBufferEnd)
? (<!--a-->mInputBufferEnd<!--/a--> - mInputBufferStart)
: (<!--a-->mInputBufferByteSize<!--/a--> - mInputBufferStart)
}
</pre></p>
<a name="//apple_ref/c/func/ReallocateInputBuffer" title="ReallocateInputBuffer"></a><a name="//apple_ref/doc/c_ref/ReallocateInputBuffer" title="ReallocateInputBuffer"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-ReallocateInputBuffer()" title="ReallocateInputBuffer"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-DontLinkElementID_319"></a><h3 class="tight">ReallocateInputBuffer</h3>
<p class="spaceabove">Resizes the buffer to a new size.</p>
<p class="spaceabove"><pre>
<!--a-->virtual<!--/a--> void ReallocateInputBuffer(UInt32 inInputBufferByteSize)
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Calling this method wipes the buffer contents before it resizes
it. Note that this method is virtual, so it may be overridden as
needed.</p>
<a name="//apple_ref/doc/uid/TP30001108-CH204-53364" title="Audio Codec Result Codes"></a><a name="//apple_ref/doc/uid/TP30001108-CH204-TPXREF119" title="Audio Codec Result Codes"></a><h3>Audio Codec Result
Codes</h3>
<p>These constants define errors that Audio Codec methods can
return when processing data. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kAudioCodecNoError = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>kAudioCodecUnspecifiedError = 'what',<span></span></pre></td></tr><tr><td scope="row"><pre>kAudioCodecUnknownPropertyError = 'who?',<span></span></pre></td></tr><tr><td scope="row"><pre>kAudioCodecBadPropertySizeError ='!siz',<span></span></pre></td></tr><tr><td scope="row"><pre>kAudioCodecIllegalOperationError = 'nope',<span></span></pre></td></tr><tr><td scope="row"><pre>kAudioCodecUnsupportedFormatError = '!dat',<span></span></pre></td></tr><tr><td scope="row"><pre>kAudioCodecStateError ='!stt',<span></span></pre></td></tr><tr><td scope="row"><pre>kAudioCodecNotEnoughBufferSpaceError = '!buf'<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../core_audio_intro/core_audio_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../audio_toolbox/audio_toolbox.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Reference/CoreAudio/audiocodec/audiocodec.html%3Fid%3DTP30001108-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Reference/CoreAudio/audiocodec/audiocodec.html%3Fid%3DTP30001108-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Reference/CoreAudio/audiocodec/audiocodec.html%3Fid%3DTP30001108-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
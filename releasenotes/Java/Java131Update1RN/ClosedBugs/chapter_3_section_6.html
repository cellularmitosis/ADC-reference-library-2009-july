<html>
    <head>
        <META NAME = "Generator" CONTENT="Gutenberg">
        <META http-equiv="content-type" CONTENT="text/html;charset=iso-8859-1">
        <META NAME = "Copyright" CONTENT="Copyright 2003 Apple Computer, Inc. All Rights Reserved.">
        <TITLE>Java 1.3.1 Update 1 Release Notes: Java HotSpot Issues</TITLE>
        <base target="content">
        
    </head>
    
    <BODY bgcolor="#ffffff">
        <a name="top"></a>
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        
        <!-- start of path -->
<font face="Geneva,Helvetica,Arial" size="1">&nbsp;<a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../documentation/index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../Intro/chapter_1_section_1.html#//apple_ref/doc/uid/TP30000714">Java 1.3.1 Update 1 Release Notes</a> &gt; <a href="chapter_3_section_1.html#//apple_ref/doc/uid/TP30000716">Resolved Issues</a></font><br><br>
<!-- end of path -->
        
        <!-- insert Show/Hide frames -->
        <script type="text/javascript" language="JavaScript"><!--
        function loadFrames(){
            if (top == self || (parent.frames[1].name != doc))
                top.location.href = 'index.html?' + location.href;
        }
            
        if (self != top) {
            // loaded in frames
            document.write('<a href="'+self.location+'" target="_top"><img src="../../../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
        }
        else {
            // not loaded frames
            document.write('<a href="JavaScript:loadFrames()"><img src="../../../images/showframes.gif" border="0" alt="Show Frames"></a>');
        }
        //--></script>
        <!-- end Show/Hide frames -->
        
        <a href="chapter_3_section_5.html" target="_self"><img src="../../../images/previous.gif" border="0" alt="Previous"></a>&nbsp;
        <a href="chapter_3_section_7.html" target="_self"><img src="../../../images/next.gif" border="0" alt="Next"></a>
        
        <hr>
        
        <a name="//apple_ref/doc/uid/TP30000716-TPXREF106" title="Java HotSpot Issues"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF106" title="Java HotSpot Issues"></a>
<a name="TPXREF106" title="Java HotSpot Issues"></a>
<h2><font face="Lucida Grande,Helvetica,Arial">Java
HotSpot Issues</font></h2>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF132"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF132"></a>
<a name="TPXREF132"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2781914</b></font><br>
<p>	Thread Local allocation
is not available on Mac OS X.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	HotSpot has a technology known as Thread Local allocation
which allows more scalable allocation for heavily threaded applications.
This was not available in Mac OS X 10.0 or 10.1.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	Thread Local allocation (known as Thread Local Eden in HotSpot
terminology) can now be activated using a runtime flag: <code>-XX:+UseTLE</code>. </p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF133"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF133"></a>
<a name="TPXREF133"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2782713</b></font><br>
<p><code>java.ext.dir</code> system
property contains non-existent directories.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	The j<code>ava.ext.dir</code> system
property contained directories that were not required to exist on any
given Mac OS X system (<tt>/Network/Library/Java/Extensions</tt>, <tt>~/Library/Java/Extensions</tt>).
This could cause errors in programs that assumed they would exist. </p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	The Java VM now checks for the existence of extension directories
before adding them to the <code>java.ext.dir system</code> property.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF134"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF134"></a>
<a name="TPXREF134"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2786528</b></font><br>
<p><tt>String.equals()</tt> could
return an incorrect result.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	With the Java VM shipped in Mac OS X 10.1, <tt>String.equals()</tt> occasionally
would return an incorrect result when used with interned String
objects.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	This bug was fixed in Mac OS X software update (10.1.1).
The fix is also in this update.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF135"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF135"></a>
<a name="TPXREF135"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2790571</b></font><br>
<p>	Java VM would crash
when debugging was attempted, but not previously enabled.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	The <code>-Xdebug</code> runtime
flag is required to inform the Java VM that it should enable debugging
via JVMDI. If this was omitted, and then a JVMDI call was made,
the Java VM would crash. It should not; it should return an error.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	This bug was fixed. The Java VM now returns the <code>EVERSION</code> error
code under these circumstances.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF136"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF136"></a>
<a name="TPXREF136"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2792716</b></font><br>
<p>	Native code (JNI) crashes
are hard to track down.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	If a Java program crashes in native code, unless it is running
under <code>gdb</code>, it's very
hard to get useful information about what caused the crash.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	A new runtime option has been provided to enable Java backtraces
to be generated when a crash occurs in native code. This is not
guaranteed to work all the time (the crash may destroy some critical
data structures) but can be enabled with a runtime flag: <code>-XX:+PrintJavaStackAtFatalState</code>.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF137"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF137"></a>
<a name="TPXREF137"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2795695</b></font><br>
<p>	When stressed, the Java
VM would occasionally crash with an <code>Illegal
Hardware Instruction</code>.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	There was a narrow race condition in dealing with objects
returned from native (JNI) functions called from compiled (JIT)
code. This could lead to garbage collected objects being referenced
inside compiled methods.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	The race condition was eliminated.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF138"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF138"></a>
<a name="TPXREF138"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2797340</b></font><br>
<p>	Looking up the package
for a class sometimes resulted in a <code>null</code> result.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	With sharing of system classes enabled (the default), <tt><!--a-->Package.getPackage(class)<!--/a--></tt> would return <code>null</code> for
any preloaded classes.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	The sharing technology now stores the package info, so this
call now works correctly.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF139"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF139"></a>
<a name="TPXREF139"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2800776</b></font><br>
<p>	Occasional Java VM <code>internal
error</code> failures.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	Infrequently, and generally, the Java VM would report an
internal error and abort with an error. These were of the form:</p>
<blockquote><pre><code>## HotSpot Virtual Machine Error, Internal Error</code><br><code># Please report this error at</code><br><code># http://bugreport.apple.com/</code><br><code>## Error ID: /SourceCache/HotSpot/HotSpot-47.2/src/os/macosx/vm/os_macosx.cpp, 1420</code><br><code>## Problematic Thread: prio=1 tid=0x64f6ce0 nid=0x6650cd0 runnable</code><br><code>#Internal ErrorFatal: mach_msg returned unexpected result.</code><br></pre></blockquote>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	The error handling code, and the above case in particular,
has been modified to print more information about this unexpected
error.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF140"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF140"></a>
<a name="TPXREF140"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2826003</b></font><br>
<p>	Heavy heap usage can
cause excessive system paging.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	Java applications using large amounts of heap space that
are then released, can still trigger system paging because the heap
memory is seen to the operating system as &#8220;modified&#8221;.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	When the garbage collection mechanism determines that the
heap can be shrunk, i.e., a lot of memory that had been used is
no longer needed by the program, the Java VM marks the memory as
clean. The operating system is then able to reclaim pages for use
by other processes without needing to page out the old memory content
to disk. You can turn this behavior off with the runtime flag <code>-XX:-CleanPagesOnUncommit</code>.</p></p><br>
<a name="//apple_ref/doc/uid/TP30000716-TPXREF141"></a>
<a name="//apple_ref/doc/uid/TP30000716/TPXREF141"></a>
<a name="TPXREF141"></a>
<p><p><b><font face="Lucida Grande,Helvetica,Arial">	Radar # 2852933</b></font><br>
<p>	Initializers with deep
loops in them may cause a crash.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Description: </b></font><br>
<p>	Some initializers contain deep loops. When the number of
iterations is sufficiently large, a Trace/BPT trap error is sent
to standard output.</p>
<p><b><font face="Lucida Grande,Helvetica,Arial">Resolution: </b></font><br>
<p>	 Software changed.</p></p><br>

        <br><br> 
        <!-- insert Show/Hide frames -->
        <script type="text/javascript" language="JavaScript"><!--
        function loadFrames(){
            if (top == self || (parent.frames[1].name != doc))
                top.location.href = 'index.html?' + location.href;
        }
            
        if (self != top) {
            // loaded in frames
            document.write('<a href="'+self.location+'" target="_top"><img src="../../../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
        }
        else {
            // not loaded frames
            document.write('<a href="JavaScript:loadFrames()"><img src="../../../images/showframes.gif" border="0" alt="Show Frames"></a>');
        }
        //--></script>
        <!-- end Show/Hide frames -->
        <a href="chapter_3_section_5.html" target="_self"><img src="../../../images/previous.gif" border="0" alt="Previous"></a>&nbsp;
        <a href="chapter_3_section_7.html" target="_self"><img src="../../../images/next.gif" border="0" alt="Next"></a>

        <br><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2003 Apple Computer, Inc. (Last Updated February 2002)</font>

        
        <!-- start of footer -->
        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
    </BODY>
</html>

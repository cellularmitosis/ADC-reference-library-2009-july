<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Token Field Programming Guide for Cocoa: How Token Fields Work</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="How Token Fields Work"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40006555-CH4" title="How Token Fields Work"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40006555-CH1-DontLinkElementID_3">Token Field Programming Guide for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../TokenFieldPurpose/TokenFieldPurpose.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../TokenFieldsIB/TokenFieldsIB.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40006555-CH4-SW2" title="How Token Fields Work"></a><h1>How Token Fields Work</h1><p>A token field works on the premise of a finite collection of objects as potential content. These objects can be <code><a href="../../../Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/cl/NSString" target="_top">NSString</a></code> objects or objects of any other type. Objects that are not strings require a display string.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="TokenFieldArchitecture.html#//apple_ref/doc/uid/TP40006555-CH4-SW3">Tokens and Represented Objects</a>
				
			<br/>
			
        
			
			
				<a href="TokenFieldArchitecture.html#//apple_ref/doc/uid/TP40006555-CH4-SW4">The Object Value of Token Fields</a>
				
			<br/>
			
        
			
			
				<a href="TokenFieldArchitecture.html#//apple_ref/doc/uid/TP40006555-CH4-SW5">Basic Interaction With the Delegate</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40006555-CH4-SW3" title="Tokens and Represented Objects"></a><h2>Tokens and Represented Objects</h2><p>In a sense a token is a labeled represented object even if that object is simply the string used for the label. A represented object is an object that is arbitrarily associated with a cell or a menu item. A token field—more precisely, the <code><a href="../../../Reference/ApplicationKit/Classes/NSTokenFieldCell_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTokenFieldCell" target="_top">NSTokenFieldCell</a></code> component of a token field—inherits the feature of represented objects from <code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/cl/NSCell" target="_top">NSCell</a></code>. But the implementation extends the notion of represented object to make it apply to all tokens in the field.</p><p>As an example, consider a token field in which users enter the names of people in their Address Book. The token field is implemented so that each token field has a represented object of type <code><a href="../../../../UserExperience/Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/occ/cl/ABPerson" target="_top">ABPerson</a></code> (a class in the Address Book framework).  </p><p>You are not required to assign a represented object to each token in the token field. In this case, the represented object of a token is the string it displays.</p><p>For further information on represented objects, see “<span class="content_text"><a href="../../ControlCell/Concepts/RepresentedObjects.html#//apple_ref/doc/uid/20000067" target="_top">Represented Objects</a></span>" in <em><a href="../../ControlCell/index.html#//apple_ref/doc/uid/10000015i" target="_top">Control and Cell Programming Topics for Cocoa</a></em> and the section on controls and cells in “<span class="content_text"><a href="../../CocoaFundamentals/CoreAppArchitecture/CoreAppArchitecture.html#//apple_ref/doc/uid/TP40002974-CH8" target="_top">The Core Application Architecture</a></span>" in <em><a href="../../CocoaFundamentals/index.html#//apple_ref/doc/uid/TP40002974" target="_top">Cocoa Fundamentals Guide</a></em>. </p><a name="//apple_ref/doc/uid/TP40006555-CH4-SW4" title="The Object Value of Token Fields"></a><h2>The Object Value of Token Fields</h2><p>When you want to retrieve the contents of a token field, you send it an <code><a href="../../../Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/objectValue" target="_top">objectValue</a></code> message. This message returns an array of the field’s represented objects, whether those objects are strings or something else. Conversely, you can set the contents of a token field by sending it a <code><a href="../../../Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/setObjectValue:" target="_top">setObjectValue:</a></code> message, passing in an array of the represented objects you wish the field to have. If these objects are not strings, the token field queries its delegate for the strings to display for the represented objects.</p><p>Because a token field is a direct descendent of <code><a href="../../../Reference/ApplicationKit/Classes/NSTextField_Class/Reference/Reference.html#//apple_ref/occ/cl/NSTextField" target="_top">NSTextField</a></code>, it is a control that sends an action message to its target when the user presses the Return key (or if the insertion point leaves the field, if the action is configured as “Send on End Editing”). Pressing the Return key either tokenizes the most recently entered string or causes the action message to be sent. Your implementation of the action method is an ideal place to ask the token field (<code>sender</code>) for its object value.</p><a name="//apple_ref/doc/uid/TP40006555-CH4-SW5" title="Basic Interaction With the Delegate"></a><h2>Basic Interaction With the Delegate</h2><p>To acquire the capabilities of completion lists, represented objects, and token menus for token fields, you must implement a number of delegation methods. A token field sends a series of messages to its delegate as illustrated in <span class="content_text">Figure 2-1</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40006555-CH4-SW1" title="Figure 2-1Messages to the token field delegate"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>Messages to the token field delegate</p><img src = "../Art/delegate_msg_seq.jpg" alt = "Messages to the token field delegate" ></div><br/><ol class="ol"><li class="li"><p>The user enters text in the token field.</p></li><li class="li"><p>The delegate receives the <code><a href="../../../Reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:" target="_top">tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:</a></code> message and returns a list of possible completions for the passed-in substring.</p><p>The delegate continues to receive this message as the user continues typing in the token field; each time it returns a progressively narrowed list of possible completions.</p></li><li class="li"><p>The user selects a string from the completion list and types the tokenizing character.</p><p>The user could enter a string that is not in the list of possible completions and that is also tokenized. </p></li><li class="li"><p>The delegate receives the <code><a href="../../../Reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/tokenField:representedObjectForEditingString:" target="_top">tokenField:representedObjectForEditingString:</a></code> message and returns a  represented object that corresponds to the passed-in editing string.</p><p>If the delegate doesn’t implement this message or returns <code>nil</code>, the entered string is the represented object.</p></li><li class="li"><p>If the delegate implements the <code>tokenField:representedObjectForEditingString:</code> method to return a represented object for a entered string, it next receives the <code><a href="../../../Reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/tokenField:displayStringForRepresentedObject:" target="_top">tokenField:displayStringForRepresentedObject:</a></code> message. The delegate implements this method to return a display string for the given represented object. (This display string may be different from the string entered from the completion list.)</p></li><li class="li"><p>The token queries the delegate with <code><a href="../../../Reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/tokenField:hasMenuForRepresentedObject:" target="_top">tokenField:hasMenuForRepresentedObject:</a></code> to find out if the token has a menu. If there is a menu, it adds a triangular discovery button when it draws the token.</p></li><li class="li"><p>The user clicks a token’s menu-discovery button.</p></li><li class="li"><p>The delegate receives the <code><a href="../../../Reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/tokenField:menuForRepresentedObject:" target="_top">tokenField:menuForRepresentedObject:</a></code> message and returns an <code><a href="../../../Reference/ApplicationKit/Classes/NSMenu_Class/Reference/Reference.html#//apple_ref/occ/cl/NSMenu" target="_top">NSMenu</a></code> object (containing the desired menu items) to the token field, which displays the menu.</p></li></ol><p>There are several other methods that a token field sends to its delegate, including  <code><a href="../../../Reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/tokenField:styleForRepresentedObject:" target="_top">tokenField:styleForRepresentedObject:</a></code>, which allows the substitution of plain-text tokens for the encapsulating kind. </p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../TokenFieldPurpose/TokenFieldPurpose.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../TokenFieldsIB/TokenFieldsIB.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-12-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/TokenField_Guide/TokenFieldArchitecture/TokenFieldArchitecture.html%3Fid%3DTP40006555-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/TokenField_Guide/TokenFieldArchitecture/TokenFieldArchitecture.html%3Fid%3DTP40006555-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/TokenField_Guide/TokenFieldArchitecture/TokenFieldArchitecture.html%3Fid%3DTP40006555-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>FindControl(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING331></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-330.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-332.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-297.html"><B>Chapter 5 - Control Manager</B></A> / <A HREF="Toolbox-315.html"><B>Control Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-321.html"><B>Control Manager Routines</B></A> / <A HREF="Toolbox-330.html"><B>Handling Mouse Events in Controls</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING331-0></A>
<H3><A NAME=MARKER-9-415></A>FindControl</H3>
 <A NAME=MARKER-11-416></A><A NAME=MARKER-2-417></A>To determine whether a mouse-down event has occurred in a control and, if so, in which part of that control, use the <CODE>FindControl</CODE> function.<P>
<PRE>
FUNCTION FindControl (thePoint: Point; theWindow: WindowPtr;
                      VAR theControl: ControlHandle): Integer;
</PRE>
<DL>
<DT><CODE>thePoint</CODE>
<DD> A point, specified in coordinates local to the window, where the mouse-down event occurred.
<DT><CODE>theWindow</CODE>
<DD> A pointer to the window in which the mouse-down event occurred.
<DT><CODE>theControl</CODE>
<DD> A handle to the control in which the mouse-down event occurred.
</DL>
<A NAME=HEADING331-6></A>
<H5>DESCRIPTION</H5>
 When the user presses the mouse button while the cursor is in a visible, active control, <CODE>FindControl</CODE> returns as its function result a part code identifying the control's part; the function also returns a handle to the control in the parameter <CODE>theControl</CODE>. The part codes that <CODE>FindControl</CODE> returns, and the constants you can use to represent them, are listed here:<P>
<PRE>
CONST inButton       = 10;    {button}
      inCheckBox     = 11;    {checkbox or radio button}
      inUpButton     = 20;    {up arrow for a vertical scroll }
                              { bar, left arrow for a horizontal }
                              { scroll bar}
      inDownButton   = 21;    {down arrow for a vertical scroll }
                              { bar, right arrow for a }
                              { horizontal scroll bar}
      inPageUp       = 22;    {gray area above scroll box for a }
                              { vertical scroll bar, gray area }
                              { to left of scroll box for a }
                              { horizontal scroll bar}
      inPageDown     = 23;    {gray area below scroll box for a }
                              { vertical scroll bar, gray area }
                              { to right of scroll box for a }
                              { horizontal scroll bar}
      inThumb        = 129;   {scroll box}
</PRE>
 The pop-up control definition function does not define part codes for pop-up menus. Instead, your application should store the handles for your pop-up menus when you create them. Your application should then test the handles you store against the handles returned by <CODE>FindControl</CODE> before responding to users' choices in pop-up menus.<P>
 If the mouse-down event occurs in an invisible or inactive control, or if it occurs outside a control, <CODE>FindControl</CODE> sets <CODE>theControl</CODE> to <CODE>NIL</CODE> and returns 0 as its function result.<P>
 When a mouse-down event occurs, your application should call <CODE>FindControl</CODE> after using the Window Manager function <CODE>FindWindow</CODE> to ascertain that a mouse-down event has occurred in the content region of a window containing controls.<P>
 Before calling <CODE>FindControl</CODE>, use the <CODE>GlobalToLocal</CODE> procedure to convert the point stored in the <CODE>where<DFN> field (which describes the location of the mouse-down event) of the event record to coordinates local to the window. </DFN></CODE>Then, when using <CODE>FindControl<DFN>, pass this point in </DFN></CODE>the parameter<DFN> <CODE>thePoint</CODE></DFN>.<P>
 In the parameter <CODE>theWindow</CODE>, <DFN>pass </DFN>the window pointer returned by the <CODE>FindWindow<DFN> function.</DFN></CODE> <P>
 After using <CODE>FindControl<DFN> to determine that </DFN></CODE>a mouse-down event has occurred<DFN> in <BR>a control, you generally use the <CODE>TrackControl function, which automatically <BR>follows the movements of the cursor and responds as appropriate until the user releases the mouse button</CODE></DFN>.<P>
<A NAME=HEADING331-15></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The Dialog Manager automatically calls <CODE>FindControl<DFN> and TrackControl for mouse-down </DFN></CODE>events inside controls of alert boxes and dialog boxes.<P>
 The <CODE>FindControl</CODE> function also returns <CODE>NIL</CODE> in the parameter <CODE>theControl</CODE> and 0 as <BR>its function result if the window is invisible or if it doesn't contain the given point. (However, <CODE>FindWindow</CODE> won't return a window pointer to an invisible window or to one that doesn't contain the point where the mouse-down event occurred. As long as you call <CODE>FindWindow</CODE> before <CODE>FindControl</CODE>, this situation won't arise.)<P>
<A NAME=HEADING331-18></A>
<H5>SEE ALSO</H5>
 <A HREF=Toolbox-310.html#MARKER-9-206>Listing 5-10 on page 5-30</A> illustrates the use of <CODE>FindControl</CODE> for detecting mouse-down events in a pop-up menu and a button; <A HREF=Toolbox-312.html#MARKER-9-271>Listing 5-18 on page 5-48</A> illustrates its use for detecting mouse-down events in scroll bars.<P>
 The <CODE>FindWindow<DFN> function is described in the chapter "Window Manager" in this book. The GlobalToLocal procedure</DFN></CODE> is described in <I>Inside Macintosh: Imaging.</I><P>
 The event record is described in the chapter "Event Manager" in this book. See the chapter "Dialog Manager" in this book for more information about including controls in alert boxes and dialog boxes.<DFN><A NAME=MARKER-2-418></A></DFN><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-330.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-332.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

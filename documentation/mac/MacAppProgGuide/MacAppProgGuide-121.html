<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Recipes--Printing (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING121></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-120.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-122.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <A HREF="MacAppProgGuide-78.html"><B>Part 2 - Working With MacApp</B></A><BR><DD><A HREF="MacAppProgGuide-118.html"><B>Chapter 23 - Working With Printing</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING121-0></A>
<H1><A NAME=MARKER-2-28></A>Recipes--Printing</H1>
 The recipes and sample code in this section summarize how to work with MacApp's printing support and demonstrate how to associate a standard print handler with a view, change default margin settings, show page breaks, define a custom print handler class to modify page strips, and turn on MacApp's debugging code for printing.<P>
<A NAME=HEADING121-2></A>
<H2><A NAME=MARKER-2-29></A><A NAME=MARKER-9-30></A>Working With Printing--A General Outline</H2>
 This outline describes the steps most MacApp applications take to work with printing.<P>
<OL>
<LI>To initialize MacApp's UPrinting unit, you call the <CODE>InitUPrinting</CODE> routine from your <CODE>main</CODE> routine, after calling <CODE>InitUMacApp</CODE> and before creating your application object. (See <A HREF=MacAppProgGuide-84.html#MARKER-9-34>"Recipe--Launching a Simple Application," beginning on page 292</A>.)
<LI>You include MacApp's printing-related resources into your application by adding the following line to your resource definition file:<P>
<pre>include "Printing.rsrc" not 'ckid';</pre><P>
The words <CODE>not <A NAME=MARKER-2-31></A>'ckid'</CODE> ensure that you will not copy the resource that is used for source code control.
<LI>MacApp supplies the <CODE>TPrintHandler</CODE> and <CODE>TStdPrintHandler</CODE> behavior classes to handle printing. To make a view printable, you create and initialize a print-handler object, passing it a reference to the view and optionally a reference to the view's document. Most applications do this in the <CODE>DoMakeViews</CODE> method of a document class. (See <A HREF=#MARKER-9-34>"Recipe--Adding a Standard Print Handler to a View,"</A> following this outline.)<P>
</OL>
<DL>
<DT><B>IMPORTANT</B>
<DD>Be sure to attach the print handler to the correct view. If you attach it to a window, you'll get a printout of the window as it looks on the screen, including scroll bars. You probably want to attach the print handler to the top-level view inside the primary scroller in the window.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<OL>
<LI>In its initialization method, a standard print handler attaches itself to its document, if it has one, by calling the document's <CODE>AttachPrintHandler</CODE> method. The print handler attaches itself to its view by calling the view's <CODE>AttachPrintHandler</CODE> method.
<LI>The <CODE>TDocument::AttachPrintHandler</CODE> method creates a <CODE>TPrintMenuBehavior</CODE> object and adds it to the document. This object handles printing menu commands in its <CODE>DoMenuCommand</CODE> method by calling the <CODE>DoPrintCommand</CODE> method of the print handler.
<LI>The <CODE>TView::AttachPrintHandler</CODE> method adds a print adorner to the view, adds the print handler to the view, and calls the view's <CODE>DoCheckPrinter</CODE> method, which causes the print handler to update itself based on the current machine configuration.
<LI>You modify printing behavior by one or both of the following mechanisms (see <A HREF=#MARKER-9-42>"Recipe--Defining a Custom Print Handler to Modify Page Strips," beginning on page 537</A>):<P>
<UL>
<LI>Define a subclass of <CODE>TStdPrintHandler</CODE> or, less commonly, <CODE>TPrintHandler</CODE>, and override methods such as <CODE>BreakFollowing</CODE>.
<LI>Define a view subclass and override methods such as <CODE>DoBreakFollowing</CODE>.<A NAME=MARKER-2-32></A><P>
</UL>
</OL>
<A NAME=HEADING121-16></A>
<H2><A NAME=MARKER-2-33></A><A NAME=MARKER-9-34></A>Recipe--Adding a Standard Print Handler to a View</H2>
 You normally associate a print-handler object with a view in the <CODE>DoMakeViews</CODE> method of your document class. You create a <CODE>TStdPrintHandler</CODE> object with the <CODE>new</CODE> routine and call the <CODE>IStdPrintHandler</CODE> method to initialize the object, as shown in the <CODE>DoMakeViews</CODE> method from the IconEdit sample application. The code that creates the print handler is shown in boldface:<P>
<PRE>
void TIconDocument::DoMakeViews(Boolean forPrinting) // Override.
{
   TWindow*       aWindow;
   TIconEditView* iconView;

   if (forPrinting)
   {
      // If for printing, you need only the view.
      iconView = (TIconEditView *)gViewServer-&gt;DoCreateViews
                  (this, NULL, kIconEditViewId, gZeroVPt);
      FailNIL(iconView);
   }
   else
   {  
      // Otherwise, you need the view and a window.
      aWindow = gViewServer-&gt;NewTemplateWindow(kIconWindowId, this);
      FailNIL(aWindow);
      // Get reference to the view.
      iconView = (TIconEditView*)(aWindow-&gt;FindSubView('ICON'));
   }
   fIconView = iconView;

   // Create and initialize a print handler. Pass references to the
   // document and view to be printed, the dot type, and the
   // horizontal and vertical page size.
   TStdPrintHandler*aPrintHandler;
   aPrintHandler = new TStdPrintHandler;
   aPrintHandler-&gt;IStdPrintHandler(this, iconView, !kSquareDots,
                           kFixedSize, kFixedSize);
}  // TIconDocument::DoMakeViews
</PRE>
 The parameters to the IStdPrintHandler method are used as follows:<P>
<DL>
<DT><CODE>itsDocument</CODE> 
<DD> The document associated with the print handler (if any).
<DT><CODE>itsView</CODE>
<DD> The view to which the print handler is attached.
<DT><CODE>itsSquareDots</CODE> 
<DD> If <CODE>TRUE</CODE>, a default print record for ImageWriter printers uses square dots ("tall adjusted") rather than rectangular ones. This sacrifices some resolution, but ensures that graphics will not appear distorted. You can use the MacApp constant <CODE>kSquareDots</CODE> (or <CODE>!kSquareDots</CODE>).
<DT><CODE>itsHFixedSize</CODE> 
<DD> A flag that specifies whether the horizontal size of the printed page is fixed. You can use the MacApp constant <CODE>kFixedSize</CODE> (or <CODE>!kFixedSize</CODE>).
<DT><CODE>itsVFixedSize</CODE> 
<DD> A flag that specifies whether the vertical size of the printed page is fixed. Again, you can use the MacApp constant <CODE>kFixedSize</CODE> (or <CODE>!kFixedSize</CODE>).
</DL>
 The call to <CODE>IStdPrintHandler</CODE> shown above attaches the print handler to the view and document objects. The attached print handler has these characteristics:<P>
<UL>
<LI>The default page margins are set to 1 inch on all sides.
<LI>The horizontal and vertical page sizes are fixed.
<LI>The page direction is set to vertical--page 2 is below page 1, page 3 below page 2, and so on (rather than horizontal, with some pages appearing side by side).
<LI>The Print, Print One, Page Setup, and Show Page Breaks menu commands will normally be enabled (if the corresponding menu items are defined in the application's resource definition file).<P>
</UL>
 That's all you need to do to create and attach a print-handler object. The two following sections provide additional information about how the print handler is attached to its document and view objects.<P>
<A NAME=HEADING121-31></A>
<H3>Attaching a Print Handler to Its View</H3>
 The <CODE>IStdPrintHandler</CODE> method contains this call:<P>
<PRE>
fView-&gt;AttachPrintHandler(this);
</PRE>
 The <CODE>TView::AttachPrintHandler</CODE> method attaches the print handler to the view. As a result, the view can be printed whenever it is targeted. Assume, for example, that a user chooses the Print command while the document is open and that the view with an attached print handler is the current target.<P>
<OL>
<LI>The application's <CODE>MenuEvent</CODE> method gets information about the menu choice and calls the <CODE>HandleMenuCommand</CODE> method of the current target object, which is the view.
<LI>The <CODE>HandleMenuCommand</CODE> method gives any behaviors attached to the view a chance to handle the command.
<LI>The <CODE>TStdPrintHandler</CODE> behavior's <CODE>DoMenuCommand</CODE> method handles the menu command by calling its <CODE>DoPrintCommand</CODE> method.<P>
</OL>
 This same mechanism is used to process all Print menu commands (described in <A HREF=MacAppProgGuide-120.html#MARKER-9-20>"Handling Print Menu Commands," beginning on page 528</A>).<P>
 The <CODE>AttachPrintHandler</CODE> method also adds <CODE>gPrintAdorner</CODE> to the view for possible use in drawing page-break feedback. Page breaks are described beginning on <A HREF=MacAppProgGuide-68.html#MARKER-9-240>page 235</A> and screen feedback is described beginning on <A HREF=MacAppProgGuide-68.html#MARKER-9-257>page 238</A>.<P>
<A NAME=HEADING121-40></A>
<H3>Attaching a Print Handler to Its Document</H3>
 The <CODE>IStdPrintHandler</CODE> method also contains this code:<P>
<PRE>
if (itsDocument)
   itsDocument-&gt;AttachPrintHandler(this); // Passes the print handler.
</PRE>
 The <CODE>TDocument::</CODE>AttachPrintHandler method creates a <CODE>TPrintMenuBehavior</CODE> object, initializes it with the passed print handler, and adds the behavior to the document. As a result, the Print menu behavior object is able to handle any print commands directed to the document. For example, when a user prints a document from the Finder, the following steps take place:<P>
<OL>
<LI>The application object's <CODE>DoScriptCommand</CODE> method creates and posts a <CODE>TPDocCommand</CODE> object.
<LI>The <CODE>DoIt</CODE> method of the <CODE>TPDocCommand</CODE> object calls the application's <CODE>PrintDocuments</CODE> method.
<LI>The <CODE>PrintDocuments</CODE> method calls <CODE>DoMakeDocument</CODE> to create a document and calls the document's <CODE>DoMakeViews</CODE> method to create its views.
<LI>The <CODE>DoMakeViews</CODE> method creates a print handler and calls <CODE>IStdPrintHandler</CODE>, which attaches the print handler to the document.
<LI>The <CODE>DoIt</CODE> method of the <CODE>TPDocCommand</CODE> object calls the document's <CODE>HandleMenuCommand</CODE> method.
<LI>The <CODE>HandleMenuCommand</CODE> method gives any behaviors attached to the document a chance to handle the command.
<LI>The <CODE>TPrintMenuBehavior</CODE> behavior's <CODE>DoMenuCommand</CODE> method handles the menu command by calling its print handler's <CODE>DoPrintCommand</CODE> method.<P>
</OL>
 In this case, the document prints the view, even though the view is not currently targeted.<P>
<DL>
<DT><B>Note</B>
<DD>The <CODE>TPrintMenuBehavior</CODE> class uses an algorithm in its <CODE>DoMenuCommand</CODE> method that allows a document to arbitrate between multiple <CODE>TPrintMenuBehavior</CODE> objects, representing multiple printable views owned by the document.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=HEADING121-53></A>
<H2><A NAME=MARKER-9-35></A>Recipe--Changing Default Margin Settings</H2>
 The default page margins for a standard print-handler object are set to 1 inch on all sides. There are two ways to change the default margin settings.<P>
<A NAME=HEADING121-55></A>
<H3><A NAME=MARKER-9-36></A>Using Minimal Margins</H3>
 You can instruct the print handler to use the minimal margins on the printer device. This means that the margins are maintained at the size necessary to have the <CODE>theInterior</CODE> area of the page (described in <A HREF=MacAppProgGuide-68.html#MARKER-9-240>"Page Definition Areas," beginning on page 235</A>) coincide exactly with the printable area of the page on the printer. To specify minimal margins, add the following line to your <CODE>DoMakeViews</CODE> method after calling IStdPrintHandler:<P>
<PRE>
aPrintHandler-&gt;fMinimalMargins = TRUE;
</PRE>
<A NAME=HEADING121-58></A>
<H3><A NAME=MARKER-9-37></A>Installing New Margins</H3>
 You can also call the <CODE>InstallMargins</CODE> method of your print handler to modify the margin settings. To set the margins to 2 inches on each side, you can use code like the following, called from within a view method:<P>
<PRE>
// There are 72 points in an inch.
VCoordinate dpi = 72;
// Use 2 * dpi to set all four margins to 2 inches.
VRect modifiedMargins(2 * dpi, 2 * dpi, -2 * dpi, -2 * dpi);
TStdPrintHandler * itsPrintHandler = NULL;

// Get the view's print handler, set the new margins, and call
// DoPagination to force recalculation of page breaks.
itsPrintHandler = (TStdPrintHandler *) this-&gt;GetPrintHandler();
if (itsPrintHandler)
{
   itsPrintHandler-&gt;InstallMargins(modifiedMargins, FALSE);
   this-&gt;DoPagination();
}
</PRE>
 The InstallMargins method is defined as follows:<P>
<PRE>
void TStdPrintHandler::InstallMargins(const VRect&amp; newMargins,
                              Boolean areMinimalMargins)
</PRE>
 The <CODE>newMargins</CODE> rectangle defines the new values for the <CODE>theMargins</CODE> rectangle in the <CODE>fPageArea</CODE> record of the print handler. If the <CODE>areMinimalMargins</CODE> parameter is <CODE>TRUE</CODE>, the margins are reset to the minimal margins for the printer as described in the previous section and the <CODE>newMargins</CODE> parameter is ignored.<P>
 After you call the print handler's <CODE>InstallMargins</CODE> method, you call the <CODE>DoPagination</CODE> method of its associated view object to force the printable area of the page (<CODE>fInteriorRect</CODE>) to be recalculated; this in turn causes the page breaks in the view to be recalculated.<A NAME=MARKER-2-38></A><P>
<A NAME=HEADING121-65></A>
<H2><A NAME=MARKER-2-39></A>Recipe--Showing Page Breaks in a View</H2>
 MacApp uses a model that divides a view into vertical and horizontal page strips. You can think of the view as being divided by horizontal and vertical lines, called page breaks, which produce a "checkerboard" of pages. MacApp's <CODE>TStdPrintHandler</CODE> class displays these page breaks in a view based on the current value of the print handler's <CODE>fShowBreaks</CODE> field. When the value is <CODE>FALSE</CODE>, no page breaks are shown. When the value is <CODE>TRUE</CODE>, the print handler's <CODE>DrawPrintFeedback</CODE> method calls the view's <CODE>DoDrawPageBreak</CODE> method, which in turn calls the print handler's <CODE>DrawPageBreak</CODE> method to show page breaks. <P>
 To add the Show Page Breaks command to your application, you add a line like the following to a <CODE>'CMNU</CODE>' definition in your resource definition file. This line is from the Edit <CODE>'CMNU'</CODE> resource in the file <CODE>IconEdit.r</CODE>:<P>
<PRE>
/* [12] */&quot;Show Page Breaks&quot;,noIcon,noKey,noMark,plain,cShowBreaks
</PRE>
 The Show Page Breaks menu command is enabled by the print handler's <CODE>DoSetupPrintMenus</CODE> method. When a user chooses the Show Page Breaks menu command, the current state of showing page breaks is toggled. If breaks were previously shown, the view is redrawn without page breaks and the checkmark is removed from the Show Page Breaks menu command. If breaks were <I>not</I> shown, the view is redrawn to show page breaks and the Show Page Breaks menu command is checked.<A NAME=MARKER-2-40></A><P>
<A NAME=HEADING121-70></A>
<H2><A NAME=MARKER-2-41></A><A NAME=MARKER-9-42></A>Recipe--Defining a Custom Print Handler to Modify <BR>Page Strips</H2>
 As mentioned in the previous recipe, MacApp uses a model that divides a view into vertical and horizontal page strips, divided by vertical and horizontal page breaks. A vertical column of pages, one page wide, is called a <I>vertical page strip<B>.</B></I> A horizontal row of pages, one page high, is called a <I>horizontal page strip</I>. For more information, see <A HREF=MacAppProgGuide-68.html#MARKER-9-246>"Page Strips and Page Breaks," beginning on page 237</A>.<P>
 The Calc sample application provides an example of a custom print handler that modifies MacApp's default page strips. Depending on the application, a custom print handler may need to override either the <CODE>CalcViewPerPage</CODE> method or the <CODE>DoBreakFollowing</CODE> method to modify page strips. Calc is an interesting example because it happens to override both. Its custom print handler works with its spreadsheet view to calculate page breaks, using the cell height to determine how many rows will fit on a page.<P>
 To define a custom print handler to modify page strips, you perform these steps:<P>
<OL>
<LI>Define a subclass of <CODE>TStdPrintHandler</CODE>.
<LI>Override the <CODE>CalcViewPerPage</CODE> method in your print handler.
<LI>Override the <CODE>DoBreakFollowing</CODE> method of your view class.<P>
</OL>
 The sample code shown in this recipe is from the Calc application.<P>
<A NAME=HEADING121-78></A>
<H3>Define a Subclass of TStdPrintHandler</H3>
 The Calc application defines a subclass of TStdPrintHandler to modify MacApp's default page strips. The following is a partial listing of the TCalcPrintHandler class definition:<P>
<PRE>
class TCalcPrintHandler: public TStdPrintHandler
{
   MA_DECLARE_CLASS;
public:
   CommandNumberfCmdNumber;

   virtual ~TCalcPrintHandler();          // Destructor.
   virtual void CalcViewPerPage(VPoint&amp; amtPerPage); // Override.

   // Some code not shown.
};
</PRE>
 The CalcViewPerPage method is shown in the next section.<P>
<A NAME=HEADING121-82></A>
<H3>Override the CalcViewPerPage Method in Your Print Handler</H3>
 When a user chooses the Print command to print a document, the flow of control is somewhat complex. The view's print-handler object handles the menu command by creating and posting a <CODE>TPrintCommand</CODE> object. When the command is performed, its <CODE>DoIt</CODE> method calls the <CODE>Print</CODE> method of the print handler. The <CODE>Print</CODE> method calls the view's <CODE>DoCalcPageStrips</CODE> method, which results in a call to the view's <CODE>DoBreakFollowing</CODE> method (shown in the next recipe step), followed by a call to the print handler's <CODE>CalcViewPerPage</CODE> method.<P>
 The <CODE>TCalcPrintHandler</CODE> class overrides <CODE>CalcViewPerPage</CODE> and uses the cell height to compute the number of rows that fit in a page:<P>
<PRE>
void TCalcPrintHandler::CalcViewPerPage(VPoint&amp; amtPerPage) // Override.
{
   long noOfRows;

   Inherited::CalcViewPerPage(amtPerPage);
   noOfRows = amtPerPage.v / kCellHeight;
   amtPerPage.v = noOfRows * kCellHeight;
}
</PRE>
 This approach works for Calc because Calc allows variable column widths but keeps row heights fixed. If Calc allowed variable row heights, there would be no point in overriding <CODE>CalcViewPerPage</CODE>, because only the <CODE>DoBreakFollowing</CODE> method can handle different amounts of information per page.<P>
 The value returned by CalcViewPerPage is stored in the print handler's <CODE>fViewPerPage</CODE> field, which is used by the method shown in the next step.<P>
<A NAME=HEADING121-88></A>
<H3>Override the DoBreakFollowing Method of Your View Class</H3>
 A view's DoBreakFollowing method determines where page breaks should occur for printing when the print area may vary from one page to another. In the Calc application, the spreadsheet view, <CODE>TCellsView</CODE>, overrides the DoBreakFollowing method and calculates page breaks based on the cell height (for vertical page strips) or page width (for horizontal page strips). The DoBreakFollowing method is shown on the following pages.<P>
<PRE>
VCoordinate TCellsView::DoBreakFollowing(VHSelectvhs,
                               VCoordinatepreviousBreak,
                               Boolean&amp;   /*Automatic*/)
                              // Override.
{
   VCoordinate thisBreak = 0;
   short rowsPerPage;
   short totalWidth;
   short width;
   short pageWidth;
   VRect extentRect;
   ColumnNumber firstCol;
   ColumnNumber c;

   GetExtent(extentRect);
   switch (vhs)
   {
      case hSel:
         {
            rowsPerPage =
                  (short)(GetPrintHandler()-&gt;GetViewPerPage().v / kCellHeight);
            thisBreak = previousBreak + (rowsPerPage * kCellHeight);
            break;
         }
      case vSel:
         {
            // Note: GetViewPerPage returns the value computed by CalcViewPerPage.
            pageWidth = (short)GetPrintHandler()-&gt;GetViewPerPage().h;
            totalWidth = 0;
            if (previousBreak == 0)
               firstCol = 1;
            else
            {
               c = 0;
               width = 0;
               do
               {
                  ++c;
                  width = width + GetColWidth(c);
               } while (width &lt; previousBreak);
               firstCol = c + 1;
            }
            for (c = firstCol; c &lt;= fCalcDocument-&gt;fNoOfColumns; c++)
            {
               width = this-&gt;GetColWidth(c);
               if (totalWidth + width &lt;= pageWidth)
                  totalWidth += width;
               else
               {
                  thisBreak = previousBreak + totalWidth;
                  break;
               }
            }
            // Did we set it?
            if (thisBreak == 0)
               thisBreak = previousBreak + totalWidth;

            // Prevent infinite loop from resizing a far-right column!
            if (thisBreak == previousBreak)
               thisBreak = extentRect.right;
            break;
         }
      }

   thisBreak = Min(thisBreak, extentRect[botRight][gOrthogonal[vhs]]);
   return thisBreak;
}
</PRE>
 The DoBreakFollowing method determines where the next vertical or horizontal break should be located, based on the passed value of the previous break. For horizontal page strips, DoBreakFollowing calls the print handler's <CODE>GetViewPerPage</CODE> method. <CODE>GetViewPerPage</CODE> returns the value stored in the <CODE>fViewPerPage</CODE> field, which was computed by CalcViewPerPage in the previous recipe step.<P>
<DL>
<DT><B>Note</B>
<DD>To use your custom print handler, you must install it, as described in <A HREF=#MARKER-9-34>"Recipe--Adding a Standard Print Handler to a View," beginning on page 532</A>.<EM></EM><A NAME=MARKER-2-43></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=HEADING121-94></A>
<H2><A NAME=MARKER-2-44></A>Recipe--Turning on Debugging Support for Printing</H2>
 You can use MacApp's debugging code to provide additional support for debugging printing. To do so, you perform the following steps:<P>
<OL>
<LI>Build a debug version of your application. <A HREF=MacAppProgGuide-148.html#MARKER-9-10>Appendix A</A> describes how to build a version of your application that includes MacApp's debugging code.
<LI>Run the application.
<LI>Choose the Show Debug Flags Window menu option from the Debug menu.
<LI>Check the Debug Printing checkbox. This causes the value of the <CODE>gDebugPrinting</CODE> flag to be set to <CODE>TRUE</CODE>.<P>
</OL>
 MacApp will automatically display page numbers within each printable view at the intersection of each adjoining page. When you print a document, the output will include frames showing the maximum printable page (<CODE>fInkRect</CODE>) and the view's actual drawing area (<CODE>fInteriorRect</CODE>).<P>
 You should also be prepared to land in your low-level debugger with additional printing-related debug statements. Although this may occasionally catch you by surprise, the information can be quite helpful in debugging printing problems.<A NAME=MARKER-2-45></A><A NAME=MARKER-2-46></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-120.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-122.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

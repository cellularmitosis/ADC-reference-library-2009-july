<html><head><title>Mac OS X
 Manual Page For style(9)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/9/style" title="Mac OS X
 Manual Page for style(9)"><!-- headerDoc=man; indexgroup=Section 9; uid="//apple_ref/doc/man/9/style"; name=style(9) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
STYLE(9)                 BSD Kernel Developer's Manual                STYLE(9)

<b>NAME</b>
     <b>style</b> -- kernel source file style guide

<b>DESCRIPTION</b>
     This file specifies the preferred style for kernel source files in the FreeBSD source tree.  It is also
     a guide for preferred userland code style.

     /*
      * Style guide for FreeBSD.  Based on the CSRG's KNF (Kernel Normal Form).
      *
      *      @(#)style       1.14 (Berkeley) 4/28/95
      * $FreeBSD: src/share/man/man9/style.9,v 1.32.2.16 2001/12/17 11:30:19 ru Exp $
      */

     /*
      * VERY important single-line comments look like this.
      */

     /* Most single-line comments look like this. */

     /*
      * Multi-line comments look like this.  Make them real sentences.  Fill
      * them so they look like real paragraphs.
      */

     After any copyright header, there is a blank line, and the <u>rcsid</u> for source files.  Version control
     system ID tags should only exist once in a file (unlike this one).  Non-C/C++ source files follow the
     example above, while C/C++ source files follow the one below.  All VCS (version control system) revi-<font color="#ffffff" class="whiteout">sion&nbsp;revision</font>
     sion identification from files obtained from elsewhere should be maintained, including, where applica-<font color="#ffffff" class="whiteout">ble,&nbsp;applicable,</font>
     ble, multiple IDs showing a file's history.  In general, keep the IDs intact, including any `$'s.
     There is no reason to add "From" in front of foreign VCS IDs.  Most non-FreeBSD VCS IDs should be
     indented by a tab if in a comment.

     #include &lt;sys/cdefs.h&gt;
     __RCSID("@(#)style      1.14 (Berkeley) 4/28/95");
     __FBSDID("$FreeBSD: src/share/man/man9/style.9,v 1.32.2.16 2001/12/17 11:30:19 ru Exp $");

     Leave another blank line before the header files.

     Kernel include files (i.e. <u>sys/*.h</u>) come first; normally, include &lt;<u>sys/types.h&gt;</u> OR &lt;<u>sys/param.h&gt;</u>, but
     not both.  &lt;<u>sys/types.h&gt;</u> includes &lt;<u>sys/cdefs.h&gt;</u>, and it is okay to depend on that.

     #include &lt;sys/types.h&gt;  /* Non-local includes in angle brackets. */

     For a network program, put the network include files next.

     #include &lt;net/if.h&gt;
     #include &lt;net/if_dl.h&gt;
     #include &lt;net/route.h&gt;
     #include &lt;netinet/in.h&gt;
     #include &lt;protocols/rwhod.h&gt;

     Leave a blank line before the next group, the <u>/usr</u> include files, which should be sorted alphabetically
     by name.

     #include &lt;stdio.h&gt;

     Global pathnames are defined in &lt;<u>paths.h&gt;</u>.  Pathnames local to the program go in "<u>pathnames.h</u>" in the
     local directory.

     #include &lt;paths.h&gt;

     Leave another blank line before the user include files.

     #include "pathnames.h"          /* Local includes in double quotes. */

     Do not <b>#define</b> or declare names in the implementation namespace except for implementing application
     interfaces.

     The names of ``unsafe'' macros (ones that have side effects), and the names of macros for manifest con-<font color="#ffffff" class="whiteout">stants,&nbsp;constants,</font>
     stants, are all in uppercase.  The expansions of expression-like macros are either a single token or
     have outer parentheses.  Put a single tab character between the <b>#define</b> and the macro name.  If a macro
     is an inline expansion of a function, the function name is all in lowercase and the macro has the same
     name all in uppercase.  If a macro needs more than a single line, use braces (`{' and `}').  Right-jus-<font color="#ffffff" class="whiteout">tify&nbsp;Right-justify</font>
     tify the backslashes; it makes it easier to read.  If the macro encapsulates a compound statement,
     enclose it in a <b>do</b> loop, so that it can safely be used in <b>if</b> statements.  Any final statement-terminat-<font color="#ffffff" class="whiteout">ing&nbsp;statement-terminating</font>
     ing semicolon should be supplied by the macro invocation rather than the macro, to make parsing easier
     for pretty-printers and editors.

     #define MACRO(x, y) do {                                                \
             variable = (x) + (y);                                           \
             (y) += 2;                                                       \
     } while(0)

     Enumeration values are all uppercase.

     enum enumtype { ONE, TWO } et;

     When declaring variables in structures, declare them sorted by use, then by size, and then in alphabet-<font color="#ffffff" class="whiteout">ical&nbsp;alphabetical</font>
     ical order.  The first category normally does not apply, but there are exceptions.  Each one gets its
     own line.  Try to make the structure readable by aligning the member names using either one or two tabs
     depending upon your judgment.  You should use one tab if it suffices to align most of the member names.
     Names following extremely long types should be separated by a single space.

     Major structures should be declared at the top of the file in which they are used, or in separate
     header files if they are used in multiple source files.  Use of the structures should be by separate
     declarations and should be <b>extern</b> if they are declared in a header file.

     struct foo {
             struct foo      *next;          /* List of active foo. */
             struct mumble   amumble;        /* Comment for mumble. */
             int             bar;            /* Try to align the comments. */
             struct verylongtypename *baz;   /* Won't fit in 2 tabs. */
     };
     struct foo *foohead;                    /* Head of global foo list. */

     Use <a href="../man3/queue.3.html#//apple_ref/doc/man/3/queue">queue(3)</a> macros rather than rolling your own lists, whenever possible.  Thus, the previous example
     would be better written:

     #include &lt;sys/queue.h&gt;

     struct foo {
             LIST_ENTRY(foo) link;           /* Use queue macros for foo lists. */
             struct mumble   amumble;        /* Comment for mumble. */
             int             bar;            /* Try to align the comments. */
             struct verylongtypename *baz;   /* Won't fit in 2 tabs. */
     };
     LIST_HEAD(, foo) foohead;               /* Head of global foo list. */

     Avoid using typedefs for structure types.  Typedefs are problematic because they do not properly hide
     their underlying type; for example you need to know if the typedef is the structure itself or a pointer
     to the structure.  In addition they must be declared exactly once, whereas an incomplete structure type
     can be mentioned as many times as necessary.  Typedefs are difficult to use in stand-alone header
     files: the header that defines the typedef must be included before the header that uses it, or by the
     header that uses it (which causes namespace pollution), or there must be a back-door mechanism for
     obtaining the typedef.

     When convention requires a <b>typedef</b>, make its name match the struct tag.

     /* Make the structure name match the typedef. */
     typedef struct bar {
             int     level;
     } bar_t;

     All functions are prototyped somewhere.

     Function prototypes for private functions (i.e. functions not used elsewhere) go at the top of the
     first source module.  Functions local to one source module should be declared <b>static</b>.  Functions that
     are not exported outside of the kernel should be declared <b>__private_extern__</b>.

     Functions used from other parts of the kernel are prototyped in the relevant include file.

     Functions that are used locally in more than one module go into a separate header file, e.g.
     "<u>extern.h</u>".

     Do not use the __P macro.

     In general code can be considered ``new code'' when it makes up about 50% or more of the <!-- a -->file(s)<!-- /a -->
     involved.  This is enough to break precedents in the existing code and use the current <b>style</b> guide-<font color="#ffffff" class="whiteout">lines.&nbsp;guidelines.</font>
     lines.

     The kernel has a name associated with parameter types, e.g., in the kernel use:

     void    function(int fd);

     In header files visible to userland applications, prototypes that are visible must use either
     ``protected'' names (ones beginning with an underscore) or no names with the types.  It is preferable
     to use protected names.  E.g., use:

     void    function(int);

     or:

     void    function(int _fd);

     Prototypes may have an extra space after a tab to enable function names to line up:

     static char     *function(int _arg, const char *_arg2, struct foo *_arg3,
                         struct bar *_arg4);
     static void      usage(void);

     /*
      * All major routines should have a comment briefly describing what
      * they do.  The comment before the "main" routine should describe
      * what the program does.
      */
     int
     main(int argc, char *argv[])
     {
             long num;
             int ch;
             char *ep;


     For consistency, <a href="../man3/getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a> should be used to parse options.  Options should be sorted in the <a href="../man3/getopt.3.html#//apple_ref/doc/man/3/getopt">getopt(3)</a>
     call and the <b>switch</b> statement, unless parts of the <b>switch</b> cascade.  Elements in a <b>switch</b> statement that
     cascade should have a FALLTHROUGH comment.  Numerical arguments should be checked for accuracy.  Code
     that cannot be reached should have a NOTREACHED comment.

             while ((ch = getopt(argc, argv, "abn:")) != -1)
                     switch (ch) {           /* Indent the switch. */
                     case 'a':               /* Don't indent the case. */
                             aflag = 1;
                             /* FALLTHROUGH */
                     case 'b':
                             bflag = 1;
                             break;
                     case 'n':
                             num = strtol(optarg, &amp;ep, 10);
                             if (num &lt;= 0 || *ep != '\0') {
                                     warnx("illegal number, -n argument -- %s",
                                         optarg);
                                     usage();
                             }
                             break;
                     case '?':
                     default:
                             usage();
                             /* NOTREACHED */
                     }
             argc -= optind;
             argv += optind;

     Space after keywords (<b>if</b>, <b>while</b>, <b>for</b>, <b>return</b>, <b>switch</b>).  No braces are used for control statements with
     zero or only a single statement unless that statement is more than a single line in which case they are
     permitted.  Forever loops are done with <b>for</b>'s, not <b>while</b>'s.

             for (p = buf; *p != '\0'; ++p)
                     ;       /* nothing */
             for (;;)
                     stmt;
             for (;;) {
                     z = a + really + long + statement + that + needs +
                         two lines + gets + indented + four + spaces +
                         on + the + second + and + subsequent + lines;
             }
             for (;;) {
                     if (cond)
                             stmt;
             }
             if (val != NULL)
                     val = realloc(val, newsize);

     Parts of a <b>for</b> loop may be left empty.  Do not put declarations inside blocks unless the routine is
     unusually complicated.

             for (; cnt &lt; 15; cnt++) {
                     stmt1;
                     stmt2;
             }

     Variable names should contain underscores to separate words.  DO NOT use StudlyCaps.

     Indentation is an 8 character tab.  All code should fit in 80 columns.  If you have to wrap a long
     statement, put the operator at the end of the line.

             while (cnt &lt; 20 &amp;&amp; this_variable_name_is_too_long &amp;&amp;
                    ep != NULL)
                     z = a + really + long + statement + that + needs +
                         two lines + gets + indented + four + spaces +
                         on + the + second + and + subsequent + lines;

     Do not add whitespace at the end of a line, and only use tabs followed by spaces to form the indenta-
     tion.  Do not use more spaces than a tab will produce and do not use spaces in front of tabs.

     Closing and opening braces go on the same line as the <b>else</b>.  Braces that are not necessary may be left
     out.

             if (test)
                     stmt;
             else if (bar) {
                     stmt;
                     stmt;
             } else
                     stmt;

     No spaces after function names.  Commas have a space after them.  No spaces after `(' or `[' or preced-<font color="#ffffff" class="whiteout">ing&nbsp;preceding</font>
     ing `]' or `)' characters.

             error = function(a1, a2);
             if (error != 0)
                     exit(error);

     Unary operators do not require spaces, binary operators do.  Do not use parentheses unless they are
     required for precedence or unless the statement is confusing without them.  Remember that other people
     may confuse easier than you.  Do YOU understand the following?

             a = b-&gt;c[0] + ~d == (e || f) || g &amp;&amp; h ? i : j &gt;&gt; 1;
             k = !(l &amp; FLAGS);

     Exits should be 0 on success, or according to the predefined values in <a href="../man3/sysexits.3.html#//apple_ref/doc/man/3/sysexits">sysexits(3)</a>.

             exit(EX_OK);    /*
                              * Avoid obvious comments such as
                              * "Exit 0 on success."
                              */
     }

     The function type should be on a line by itself preceding the function.

     static char *
     function(int a1, int a2, float fl, int a4)
     {

     When declaring variables in functions declare them sorted by size, then in alphabetical order; multiple
     ones per line are okay.  If a line overflows reuse the type keyword.

     Be careful to not obfuscate the code by initializing variables in the declarations.  Use this feature
     only thoughtfully.  DO NOT use function calls in initializers.

             struct foo one, *two;
             double three;
             int *four, five;
             char *six, seven, eight, nine, ten, eleven, twelve;

             four = myfunction();

     Do not declare functions inside other functions; ANSI C says that such declarations have file scope
     regardless of the nesting of the declaration.  Hiding file declarations in what appears to be a local
     scope is undesirable and will elicit complaints from a good compiler.

     Casts and <b>sizeof</b>'s are not followed by a space.  Note that <a href="../man1/indent.1.html#//apple_ref/doc/man/1/indent">indent(1)</a> does not understand this rule.
     <b>sizeof</b>'s are written with parentheses always.

     NULL is the preferred null pointer constant.  Use NULL instead of (<u>type</u> <u>*</u>)0 or (<u>type</u> <u>*</u>)NULL in contexts
     where the compiler knows the type, e.g., in assignments.  Use (<u>type</u> <u>*</u>)NULL in other contexts, in par-<font color="#ffffff" class="whiteout">ticular&nbsp;particular</font>
     ticular for all function args.  (Casting is essential for variadic args and is necessary for other args
     if the function prototype might not be in scope.)  Test pointers against NULL, e.g., use:

     (p = f()) == NULL

     not:

     !(p = f())

     Do not use <b>!</b> for tests unless it is a boolean, e.g. use

     if (*p == '\0')

     not

     if (!*p)

     Routines returning <u>void</u> <u>*</u> should not have their return values cast to any pointer type.

     Values in <b>return</b> statements should be enclosed in parentheses.

     Use <a href="../man3/err.3.html#//apple_ref/doc/man/3/err">err(3)</a> or <a href="../man3/warn.3.html#//apple_ref/doc/man/3/warn">warn(3)</a>, do not roll your own.

             if ((four = malloc(sizeof(struct foo))) == NULL)
                     err(1, (char *)NULL);
             if ((six = (int *)overflow()) == NULL)
                     errx(1, "number overflowed");
             return (eight);
     }

     Use ANSI function declarations.

     Variable numbers of arguments should look like this.

     #include &lt;stdarg.h&gt;

     void
     vaf(const char *fmt, ...)
     {
             va_list ap;

             va_start(ap, fmt);
             STUFF;
             va_end(ap);
             /* No return needed for void functions. */
     }

     Use <a href="../man3/printf.3.html#//apple_ref/doc/man/3/printf">printf(3)</a>, not <a href="../man3/fputs.3.html#//apple_ref/doc/man/3/fputs">fputs(3)</a>, <a href="../man3/puts.3.html#//apple_ref/doc/man/3/puts">puts(3)</a>, <a href="../man3/putchar.3.html#//apple_ref/doc/man/3/putchar">putchar(3)</a>, whatever; it is faster and usually cleaner, not to
     mention avoiding stupid bugs.

     Usage statements should look like the manual pages <u>SYNOPSIS</u>.  The usage statement should be structured
     in the following order:

     1.   Options without operands come first, in alphabetical order, inside a single set of brackets (`['
          and `]').

     2.   Options with operands come next, also in alphabetical order, with each option and its argument
          inside its own pair of brackets.

     3.   Required arguments (if any) are next, listed in the order they should be specified on the command
          line.

     4.   Finally, any optional arguments should be listed, listed in the order they should be specified,
          and all inside brackets.

     A bar (`|') separates ``either-or'' options/arguments, and multiple options/arguments which are speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
     fied together are placed in a single set of brackets.

         "usage: f [-aDde] [-b b_arg] [-m m_arg] req1 req2 [opt1 [opt2]]\n"
         "usage: f [-a | -b] [-c [-dEe] [-n number]]\n"

             (void)fprintf(stderr, "usage: f [-ab]\n");
             exit(EX_USAGE);
     }

     Note that the manual page options description should list the options in pure alphabetical order.  That
     is, without regard to whether an option takes arguments or not.  The alphabetical ordering should take
     into account the case ordering shown above.

     New core kernel code should be compliant with the <b>style</b> guides.

     Stylistic changes (including whitespace changes) are hard on the source repository and are to be
     avoided without good reason.  Code that is approximately FreeBSD KNF <b>style</b> compliant in the repository
     must not diverge from compliance.

     Code should be run through a code checker (e.g., sparse or <b>gcc</b> <b>-Wall</b> <b>-Werror</b> ).

<b>SEE</b> <b>ALSO</b>
     <a href="../man1/indent.1.html#//apple_ref/doc/man/1/indent">indent(1)</a>, <!-- a -->lint(1)<!-- /a -->, <a href="../man3/err.3.html#//apple_ref/doc/man/3/err">err(3)</a>, <a href="../man3/sysexits.3.html#//apple_ref/doc/man/3/sysexits">sysexits(3)</a>, <a href="../man3/warn.3.html#//apple_ref/doc/man/3/warn">warn(3)</a>

<b>HISTORY</b>
     This man page is largely based on the <u>src/admin/style/style</u> file from the 4.4BSD-Lite2 release, with
     occasional updates to reflect the current practice and desire of the FreeBSD project.

BSD                            December 7, 2001                            BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man9/style.9.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man9/style.9.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man9/style.9.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

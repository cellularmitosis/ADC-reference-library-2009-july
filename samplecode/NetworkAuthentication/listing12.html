<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>NetworkAuthentication - /README.txt</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/Darwin/index.html">Darwin</a> &gt; <a href="../../samplecode/Darwin/idxNetworking-date.html">Networking</a> &gt; <A HREF="javascript:location.replace('index.html');">NetworkAuthentication</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">NetworkAuthentication</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/README.txt</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/CRAMMD5helper.c</option>
<option value="listing2.html">/CRAMMD5helper.h</option>
<option value="listing3.html">/democlient.c</option>
<option value="listing4.html">/demoserver.c</option>
<option value="listing5.html">/DSUtility.c</option>
<option value="listing6.html">/DSUtility.h</option>
<option value="listing7.html">/GSSauthenticate.c</option>
<option value="listing8.html">/GSSauthenticate.h</option>
<option value="listing9.html">/lookupuser.c</option>
<option value="listing10.html">/NetworkHelper.c</option>
<option value="listing11.html">/NetworkHelper.h</option>
<option value="listing12.html">/README.txt</option></select>
				</p>
				</form>
				<p><strong><a href="NetworkAuthentication.zip">Download Sample</a></strong> (&#147;NetworkAuthentication.zip&#148;, 60.3K)<BR>
<strong><a href="NetworkAuthentication.dmg">Download Sample</a></strong> (&#147;NetworkAuthentication.dmg&#148;, 106.4K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">NetworkAuthentication

Copyright (c) 2005 Apple Computer, Inc.
All rights reserved.

________________________________________________________________________________

About
NetworkAuthentication

NetworkAuthentication is a collection of sample code that demonstrates how to
authenticate users using Directory Services.  Example include three forms of
authentication:  CRAM-MD5, plaintext password, and GSSAPI.

The routines were designed for applications running on Mac OS X 10.4.
The project and files were built with XCode 2.0

Sample client / server authentication and user lookup applications are included

in this Sample Code.

  lookupuser &lt;username&gt;
  demoserver &lt;port&gt;
  democlient &lt;options&gt;

In order to test GSSAPI, demoserver must be run as root and the machine that 
is running it must have a keytab.

________________________________________________________________________________

Files
in the NetworkAuthentication Package

The routines source files below are re-usable routines that can be used by 
applications to simplify handling various forms of authentications.

  DSUtility.h
  DSUtility.c
  GSSauthenticate.h
  GSSauthenticate.c
    
Other source files provided are purely support files and code for the example.

________________________________________________________________________________

How
to use NetworkAuthentication

You can cut and paste portions of it into your programs. You can use it as an
example. Since NetworkAuthentication is sample code, many routines are there 
simply to show you how to use the Directory Service APIs. If a routine does
more 
or less than what you want, you can have the source so you can modify it to do 
exactly you want it to do. Feel free to rip NetworkAuthentication off and
modify 
its code in whatever ways you find work best for you.

To use the built applications you simply launch the demoserver with a port,
(e.g., &quot;demoserver 2500&quot;).  Then from the same client or a different client
launch the democlient against that server with some method (e.g.,
&quot;democlient -m CRAM-MD5 -h 127.0.0.1 -t 2500 -u testuser -p apple&quot;).  The full
usage output is below.

If testing GSSAPI, you should not use loopback as it will not resolve the name
of the host correctly, so I recommend using the real IP address of the host.

Usage:  democlient -m method -h ipaddress -t port [-u username]
                   [-p password] [-S service] 
        -m   method 'cleartext', 'CRAM-MD5', 'GSSAPI'
        -h   host IP address or dns name
        -t   port for server
        -u   username to authenticate (except GSSAPI)
        -p   password to authenticate (except GSSAPI)
        -S   service principal 'host' to use (GSSAPI)


________________________________________________________________________________

Documentation

The documentation for the routines can be found in the header files. There,
you'll
find function prototypes, and a description of each call that includes a
complete listing of all input and output parameters. For example, here's the
function prototype and documentation for one of the routines, DoPasswordAuth.

/*!
    @function  DoPasswordAuth
    @abstract   Will take a record name and cleartext password to authenticate
a user
    @discussion Authenticates a recordname with the supplied password.  This
does not mean the password
        will be sent in the clear, it just means the password is cleartext-based.
  @param      inDSRef Existing tDirReference from dsOpenDirService
  @param    inNodeRef The node found with LocateUserRecordNameAndNode for the user
to be authenticated
  @param    inAuthMethod The method being used (e.g.,
kDSStdAuthNodeNativeNoClearText)
  @param    inRecordName The record name returned by LocateUserRecordNameAndNode
for the specific user
  @param    inPassword Is a cleartext password supplied by the user
  @result     Will return eDSNoErr if successful, otherwise any error that may
have occurred
*/
tDirStatus DoPasswordAuth( tDirReference inDSRef, tDirNodeReference inNodeRef,
const char *inAuthMethod,
               const char *inRecordName, const char *inPassword );

</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/NetworkAuthentication/listing12.html%3Fid%3DDTS10003616-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/NetworkAuthentication/listing12.html%3Fid%3DDTS10003616-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/NetworkAuthentication/listing12.html%3Fid%3DDTS10003616-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
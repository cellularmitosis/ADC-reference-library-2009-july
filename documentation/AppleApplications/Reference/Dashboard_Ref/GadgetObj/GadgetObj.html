<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Dashboard Reference: Widget Object</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Widget Object"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001339-CH203" title="Widget Object"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/AppleApplications/index.html#//apple_ref/doc/uid/TP30001281-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../../../reference/AppleApplications/idxDashboard-date.html#//apple_ref/doc/uid/TP30001281-TP30000418-TP40001366" target="_top">Dashboard</a> &gt; <a href="../DashboardRef/DashboardRef.html#//apple_ref/doc/uid/TP40001339-CH202-DontLinkElementID_4">Dashboard Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../DashboardRef/DashboardRef.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DashboardRegions/DashboardRegions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001339-CH203-BAJIFEBC" title="Widget Object"></a><h1>Widget Object</h1><p>The Widget object is a JavaScript object that provides Dashboard-specific extensions. When your widget is loaded, Dashboard automatically creates an instance of this object for use in the JavaScript code of your widget. The name of this instance is <code>widget</code>. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001339-CH203-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;The properties and methods found in this chapter are those supported by Apple for developing widgets. Any widget properties and methods not found here are subject to change without notice.</p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="GadgetObj.html#//apple_ref/doc/uid/TP40001339-CH203-SW1">Properties</a>
				
			<br/>
			
        
			
			
				<a href="GadgetObj.html#//apple_ref/doc/uid/TP40001339-CH203-SW8">Methods</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001339-CH203-SW1" title="Properties"></a><h2>Properties</h2><p>The following sections describe the properties of the Widget object.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW2" title="identifier"></a><h3>identifier</h3><p>Contains a unique identifier for this instance of the widget.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.identifier<span></span></pre></td></tr></table></div><p>This read-only property contains a string value that is unique among all of the instances of a single widget. This value is assigned by Dashboard and persists between instantiations of each widget instance.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001339-CH203-DontLinkElementID_6" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>identifier</code> property should not be confused with the <code>CFBundleIdentifier</code> property list key, which is described in <span class="content_text"><a href="../DashboardPlist/DashboardPlist.html#//apple_ref/doc/uid/TP40001339-CH205-BAJCBIDE">“Dashboard Info.plist Keys.”</a></span> The value of the <code>CFBundleIdentifier</code> property list key is used to differentiate between widgets from different projects, not between different instances of the same widget.</p></div><a name="//apple_ref/doc/uid/TP40001339-CH203-SW3" title="ondragstart"></a><h3>ondragstart</h3><p>Contains the event handler to be called upon the start of a widget drag.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.ondragstart<span></span></pre></td></tr></table></div><p>Assign a function to this property if you want to be notified when your widget has begun a drag. You use this function to change your widget’s user interface while it is being dragged. Your function declaration should look like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>function MyDragStartHandler() { ... }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001339-CH203-SW4" title="ondragend"></a><h3>ondragend</h3><p>Contains the event handler to be called upon the finish of a widget drag.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.ondragend<span></span></pre></td></tr></table></div><p>Assign a function to this property if you want to be notified when your widget has ended a drag. You use this function to change your widget’s user interface after it has been dragged. Your function declaration should look like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>function MyDragEndHandler() { ... }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001339-CH203-SW5" title="onhide"></a><h3>onhide</h3><p>Contains the event handler to be called when the Dashboard layer is hidden.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.onhide<span></span></pre></td></tr></table></div><p>Assign a function to this property if you want to be notified when your widget is hidden. You use this function to deactivate your widget and put it into a quiescent state. Your function declaration should look like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>function MyHiddenHandler() { ... }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001339-CH203-SW6" title="onremove"></a><h3>onremove</h3><p>Contains the function to be called when your widget is removed from the Dashboard layer.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.onremove<span></span></pre></td></tr></table></div><p>Assign a function to this property if you want to be notified when your widget is removed from the Dashboard layer. Upon receiving this event, your widget should perform any necessary cleanup operations, such as save its preferences, remove cache files, and release any resources it currently holds. Your function declaration should look like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>function MyRemoveHandler() { ... }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001339-CH203-SW7" title="onshow"></a><h3>onshow</h3><p>Contains the function to be called when the Dashboard layer is shown.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.onshow<span></span></pre></td></tr></table></div><p>Assign a function to this property if you want to be notified when your widget is shown. You use this function to activate your widget and begin processing data again after being quiescent. Your function declaration should look like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>function MyShowHandler() { ... }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001339-CH203-SW8" title="Methods"></a><h2>Methods</h2><p>The following sections describe the methods of the Widget object.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW9" title="openApplication"></a><h3>openApplication</h3><p>Launches the application with the specified bundle identifier.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.openApplication(bundleId)<span></span></pre></td></tr></table></div><p>Use this method to launch the application indicated by <code>bundleId</code> on the target system. Calling this method dismisses the Dashboard layer.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW10" title="openURL"></a><h3>openURL</h3><p>Opens the specified URL in the user’s preferred browser.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.openURL(url)<span></span></pre></td></tr></table></div><p>This method opens the specified URL and dismisses the Dashboard layer. This method does not permit the opening of URLs that use the <code>file:</code> scheme unless the <code>AllowFileAccessOutsideOfWidget</code> key is set in the widget’s information property list file. </p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW11" title="preferenceForKey"></a><h3>preferenceForKey</h3><p>Returns the preference associated with the specified key.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.preferenceForKey(key)<span></span></pre></td></tr></table></div><p>Use this method to retrieve a preference value previously stored with a call to <code>setPreferenceForKey</code>. The method returns a string with the contents of the preference, or <code>undefined</code> if no such preference exists.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW12" title="prepareForTransition"></a><h3>prepareForTransition</h3><p>Notifies Dashboard that you are about to perform a transition to or from its reverse side.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.prepareForTransition(transition)<span></span></pre></td></tr></table></div><p>This method prepares your widget for either showing or hiding its reverse side.</p><p>Passing the string “ToBack” for <code>transition</code> disables screen updates within your widget’s user interface so that you can prepare it for displaying your widget’s reverse side. Passing the string “ToFront” for <code>transition</code> freezes your widget’s user interface so that you can prepare it for displaying the main contents again. When your HTML layers are ready, call <code>performTransition</code> to display them.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW13" title="performTransition"></a><h3>performTransition</h3><p>Runs an animation to toggle between your widget’s reverse and contents.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.performTransition()<span></span></pre></td></tr></table></div><p>You call this method after first calling <code>prepareForTransition</code>, which indicates whether you are displaying your widget’s reverse side or contents. When you call <code>performTransition</code>, Dashboard begins an animation that makes the widget appear to flip over and display the new content. </p><p>Prior to calling this method, you should also adjust the style sheet properties of your HTML to reflect the change in what is about to be displayed. For example, before calling this method to show your reverse side, you should show the HTML elements associated with your reverse side and hide those elements associated with your widget’s contents.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW14" title="setCloseBoxOffset"></a><h3>setCloseBoxOffset</h3><p>Changes the location of the widget close box.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.setCloseBoxOffset(x, y)<span></span></pre></td></tr></table></div><p>Use this method to move your widget’s close box. This method centers the close box <em>x</em> pixels from the left edge of the widget and <code>y</code> pixels down from the top of the widget. Only values between <code>0</code> and <code>100</code> are allowed for <code>x</code> and <code>y</code>.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW15" title="setPreferenceForKey"></a><h3>setPreferenceForKey</h3><p>Associates a preference with the given key.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.setPreferenceForKey(preference, key)<span></span></pre></td></tr></table></div><p>The <em>preference</em> and <em>key</em> parameters contain strings representing the preference you want to store and the key with which you want to associate it. Specifying <code>null</code> for the <em>preference</em> parameter removes the specified key from the preferences.</p><p>Preferences saved using <code>setPreferenceForKey</code> are saved as clear text and therefore are not recommended for saving passwords or other sensitive information.</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW16" title="system"></a><h3>system</h3><p>Executes a command-line utility.</p><div class="codesample"><table><tr><td scope="row"><pre>widget.system(command, endHandler)<span></span></pre></td></tr></table></div><p>The <em>command</em> parameter is a string that specifies a command utility to be executed. It should specify a full or relative path to the command-line utility and include any arguments. For example:</p><div class="codesample"><table><tr><td scope="row"><pre>widget.system("/usr/bin/id -un", null);<span></span></pre></td></tr></table></div><p>The <em>endHandler</em> parameter specifies a handler to be called when the command has finished executing. If <code>NULL</code>, the entire method is run synchronously, meaning that all execution inside the widget halts until the command is finished. When running synchronously, these options are available:</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW17" title="Table 1-1widget.system properties available during synchronous usage"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong><code>widget.system</code> properties available during synchronous usage</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Property</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Definition</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Usage</p></th></tr><tr><td  scope="row"><p><code>outputString</code></p></td><td ><p>The output of the command, as placed on <code>stdout</code>.</p></td><td ><p><code>var output = widget.system("/usr/bin/id -un", null).outputString;</code></p></td></tr><tr><td  scope="row"><p><code>errorString</code></p></td><td ><p>The output of the command, as placed on <code>stderr</code>.</p></td><td ><p><code>var error = widget.system("/usr/bin/id -un", null).errorString;</code></p></td></tr><tr><td  scope="row"><p><code>status</code></p></td><td ><p>The exit status of the command.</p></td><td ><p><code>var status = widget.system("/usr/bin/d -un", null).status;</code></p></td></tr></table></div><p>If <em>endHandler</em> is specified, the command is run asynchronously, meaning that the command runs concurrently and the handler is called when execution is finished. When run asynchronously, <code>widget.system</code> returns an object that can be saved and used to perform other operations upon the command:</p><a name="//apple_ref/doc/uid/TP40001339-CH203-SW18" title="Table 1-2widget.system properties and methods available during asynchronous usage"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong><code>widget.system</code> properties and methods available during asynchronous usage</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Option</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Purpose</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>command.outputString</code></p></td><td ><p>Property</p></td><td ><p>The current string written to <code>stdout</code> (standard output) by the command.</p></td></tr><tr><td  scope="row"><p><code>command.errorString</code></p></td><td ><p>Property</p></td><td ><p>The current string written to <code>stderr</code> (standard error output) by the command.</p></td></tr><tr><td  scope="row"><p><code>command.status</code></p></td><td ><p>Property</p></td><td ><p>The command’s exit status, as defined by the command.</p></td></tr><tr><td  scope="row"><p><code>command.onreadoutput</code></p></td><td ><p>Event Handler</p></td><td ><p>A function called whenever the command writes to <code>stdout</code>. The handler must accept a single argument; when called, the argument contains the current string placed on <code>stdout</code>.</p></td></tr><tr><td  scope="row"><p><code>command.onreaderror</code></p></td><td ><p>Event Handler</p></td><td ><p>A function called whenever the command writes to <code>stderr</code>. The handler must accept a single argument; when called, the argument contains the current string placed on <code>stderr</code>.</p></td></tr><tr><td  scope="row"><p><code>command.cancel()</code></p></td><td ><p>Method</p></td><td ><p>Cancels the execution of the command.</p></td></tr><tr><td  scope="row"><p><code>command.write(string)</code></p></td><td ><p>Method</p></td><td ><p>Writes a string to <code>stdin</code> (standard input).</p></td></tr><tr><td  scope="row"><p><code>command.close()</code></p></td><td ><p>Method</p></td><td ><p>Closes <code>stdin</code> (<code>EOF</code>).</p></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP40001339-CH203-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;To use <code>widget.system</code>, you need to set the <code>AllowSystem</code> key in your <code>Info.plist</code>. For more information, see <span class="content_text"><a href="../DashboardPlist/DashboardPlist.html#//apple_ref/doc/uid/TP40001339-CH205-BAJCBIDE">“Dashboard Info.plist Keys.”</a></span></p></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../DashboardRef/DashboardRef.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DashboardRegions/DashboardRegions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Reference/Dashboard_Ref/GadgetObj/GadgetObj.html%3Fid%3DTP40001339-4.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Reference/Dashboard_Ref/GadgetObj/GadgetObj.html%3Fid%3DTP40001339-4.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Reference/Dashboard_Ref/GadgetObj/GadgetObj.html%3Fid%3DTP40001339-4.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
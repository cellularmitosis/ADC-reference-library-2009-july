<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Apple Core Audio Format Specification 1.0: Core Audio Format Specification</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Core Audio Format Specification"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001862-CH210" title="Core Audio Format Specification"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/MusicAudio/index.html#//apple_ref/doc/uid/TP30001281-TP30000428" target="_top">Audio</a> &gt; <a href="../../../../../reference/MusicAudio/idxCoreAudio-date.html#//apple_ref/doc/uid/TP30001281-TP30000428-TP30000500" target="_top">Core Audio</a> &gt; <a href="../CAF_intro/CAF_intro.html#//apple_ref/doc/uid/TP40001862-CH203-DontLinkElementID_60">Apple Core Audio Format Specification 1.0</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../CAF_overview/CAF_overview.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../CAF_timeOfDay/CAF_timeOfDay.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_63" title="Core Audio Format Specification"></a><h1><a name="//apple_ref/doc/uid/TP40001862-CH210-TPXREF101" title="Core Audio Format Specification "></a>Core Audio Format Specification </h1><p>This chapter describes and specifies Apple’s Core Audio Format. Refer to <span class="content_text"><a href="../CAF_overview/CAF_overview.html#//apple_ref/doc/uid/TP40001862-CH209-TPXREF101">“CAF File Overview”</a></span> for an introduction to CAF, including information on CAF capabilities and file layout.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_64" title="Important:"></a><p><strong>Important:</strong>&nbsp;This document uses standard C structure and enumeration declarations to specify the details of the CAF file header and CAF chunks. This is a notational convenience. The data in a CAF file is not parseable by a C compiler and does not constitute actual C structures or enumerations. For example, in a CAF file there are no pad fields to ensure correct byte alignment. Another deviation from C is that multiple “fields” in a “struct” can vary in length.</p><p>On the other hand, you can use C structures similar to those included in this document to hold the data parsed from a CAF file. The structure names (such as <code>CAFAudioFormat</code>) and the field names (such as <code>mChunkSize</code>) used in this specification are arbitrary, although many of them correspond to names used in <code>AudioToobox/CAFFile.h</code>.</p><p></p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_16">Data Types</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_17">CAF File Header and Chunk Headers</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDDGAI">Required Chunks</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_24">Channel Layout</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_27">Supplementary Data</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_32">Marker and Region Chunks</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_35">Music Metadata</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_39">Audio Editor Support</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_45">Annotations</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_50">Identifier</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_53">Extending the CAF Specification</a>
				
			<br/>
			
        
			
			
				<a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_56">Extra Space</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_16" title="Data Types"></a><h2>Data Types</h2><p>All of the fields in a CAF file are in big-endian (network) byte order, with the exception of the audio data, which can be big- or little-endian depending on the data format. The format of the audio data is described by the Audio Description chunk.</p><p>All floating point fields in a CAF file must conform to the IEEE-754 specification. See <span class="content_text"><a href="http://grouper.ieee.org/groups/754/" target="_blank">http://grouper.ieee.org/groups/754/</a></span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_17" title="CAF File Header and Chunk Headers"></a><h2>CAF File Header and Chunk Headers</h2><p>The CAF file header, and the chunk header in each chunk, are required elements in every CAF file. They serve to make the file and its chunks self-describing.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFDJEF" title="CAF File Header"></a><h3>CAF File Header</h3><p>A CAF file begins with a simple header. The <code>CAFFileHeader</code> structure describes the file header.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFFileHeader<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mFileType;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16  mFileVersion;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16  mFileFlags;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mFileType</code></dt><dd><p>The file type. This value must be set to <code>'caff'</code>. You should consider only files with the <code>mFileType</code> field set to <code>'caff'</code> to be valid CAF files.</p></dd><dt><code>mFileVersion</code></dt><dd><p>The file version. For CAF files conforming to this specification, the version must be set to <code>1</code>. If Apple releases a substantial revision of this specification, files compliant with that revision will have their <code>mFileVersion</code> field set to a number greater than <code>1</code>.</p></dd><dt><code>mFileFlags</code></dt><dd><p>Flags reserved by Apple for future use. For CAF v1 files, must be set to <code>0</code>. You should ignore any value of this field you don’t understand, and you should accept the file as a valid CAF file as long as the version and file type fields are valid.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFEFHB" title="CAF Chunk Header"></a><h3>CAF Chunk Header</h3><p>Every chunk in a CAF file has a header, and each such header contains two required fields as shown in the <code>CAFChunkHeader</code> structure:</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFChunkHeader<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mChunkType;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt64  mChunkSize;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mChunkType</code></dt><dd><p>The chunk type, described as a four-character code. Apple reserves all codes that use only lowercase alphabetic characters—that is, characters in the ASCII range of <code>'a'</code>–<code>'z'</code> along with <code>' '</code> (space) and <code>'.'</code> (period). Application-defined chunk identifiers must include at least one character outside of this range (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHJGEC">“User-Defined Chunk.”</a></span></p></dd><dt><code>mChunkSize</code></dt><dd><p>The size, in bytes, of the data section for the chunk. This is the size of the chunk not including the header. Unless noted otherwise for a particular chunk type, <code>mChunkSize</code> must always be valid.</p></dd></dl><p>The Audio Data chunk can use the special value for <code>mChunkSize</code> of <code>–1</code> when the data section size is not known. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ">“Audio Data Chunk.”</a></span></p><p>CAF files can contain chunks that contain a series of entries—notably the Strings chunk, the Marker chunk, the Region chunk, and the Information chunk. The headers of these chunks can specify a data section size that is larger than the chunk’s current meaningful content in order to reserve room for additional data. The data sections of such chunks begin with a specifier for the current number of valid entries in the chunk. </p><p>CAF files can also have an optional Free chunk, used to reserve additional space for the file as a whole. </p><p>See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDCHAA">“Free Chunk,”</a></span> <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAFAD">“Strings Chunk,”</a></span> <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGCHAJE">“Marker Chunk,”</a></span> <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBCCE">“Region Chunk,”</a></span> and <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBBFI">“Information Chunk.”</a></span></p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDDGAI" title="Required Chunks"></a><h2>Required Chunks</h2><p>Every CAF file must have an Audio Description chunk and an Audio Data chunk. CAF files containing variable bit rate or variable frame rate audio data must also have a Packet Table chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI" title="Audio Description Chunk"></a><h3>Audio Description Chunk</h3><p>The Audio Description chunk is required and must appear in a CAF file immediately following the file header. It describes the format of the audio data in the Audio Data chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_18" title="Audio Description Chunk Header"></a><h4>Audio Description Chunk Header</h4><p><span class="content_text">Table 3-1</span> shows the values for the fields in the Audio Description chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_65" title="Table 2-1Audio Description chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJDBGE" title="Table 2-1Audio Description chunk header fields"></a><strong>Table 2-1&nbsp;&nbsp;</strong>Audio Description chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘desc’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p><code>sizeof(CAFAudioFormat)</code></p></td></tr></table></div><p>The chunk size is fixed at <code>mChunkSize = sizeof(CAFAudioFormat)</code> to accommodate the information in the Audio Description chunk’s data section.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGIAECA" title="Audio Description Chunk Data Section"></a><h4>Audio Description Chunk Data Section</h4><p>The data section in the Audio Description chunk describes the format of the audio data contained within the Audio Data chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ">“Audio Data Chunk.”</a></span> For definitions needed to interpret these fields, see <span class="content_text"><a href="../CAF_overview/CAF_overview.html#//apple_ref/doc/uid/TP40001862-CH209-CJAIJHBI">“Packets, Frames, and Samples.”</a></span></p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFAudioFormat<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>        Float64 mSampleRate;<span></span></pre></td></tr><tr><td scope="row"><pre>        UInt32  mFormatID;<span></span></pre></td></tr><tr><td scope="row"><pre>        UInt32  mFormatFlags;<span></span></pre></td></tr><tr><td scope="row"><pre>        UInt32  mBytesPerPacket;<span></span></pre></td></tr><tr><td scope="row"><pre>        UInt32  mFramesPerPacket;<span></span></pre></td></tr><tr><td scope="row"><pre>        UInt32  mChannelsPerFrame;<span></span></pre></td></tr><tr><td scope="row"><pre>        UInt32  mBitsPerChannel;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mSampleRate</code></dt><dd><p>The number of sample frames per second of the data. You can combine this value with the frames per packet to determine the amount of time represented by a packet. This value must be nonzero.</p></dd><dt><code>mFormatID</code></dt><dd><p>A four-character code indicating the general kind of data in the stream. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJHABG">“mFormatID Field.”</a></span> This value must be nonzero.</p></dd><dt><code>mFormatFlags</code></dt><dd><p>Flags specific to each format. May be set to <code>0</code> to indicate no format flags. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDJGJA">“mFormatFlags Field.”</a></span></p></dd><dt><code>mBytesPerPacket</code></dt><dd><p>The number of bytes in a packet of data. For formats with a variable packet size, this field is set to <code>0</code>. In that case, the file must include a Packet Table chunk <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBDDAI">“Packet Table Chunk.”</a></span> Packets are always aligned to a byte boundary. For an example of an Audio Description chunk for a format with a variable packet size, see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGFDIGI">“Compressed Audio Formats.”</a></span></p></dd><dt><code>mFramesPerPacket</code></dt><dd><p>The number of sample frames in each packet of data. For compressed formats, this field indicates the number of frames encoded in each packet. For formats with a variable number of frames per packet, this field is set to <code>0</code> and the file must include a Packet Table chunk <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBDDAI">“Packet Table Chunk.”</a></span> </p></dd><dt><code>mChannelsPerFrame</code></dt><dd><p>The number of channels in each frame of data. This value must be nonzero.</p></dd><dt><code>mBitsPerChannel</code></dt><dd><p>The number of bits of sample data for each channel in a frame of data. This field must be set to <code>0</code> if the data format (for instance any compressed format) does not contain separate samples for each channel (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGFDIGI">“Compressed Audio Formats”</a></span>).</p></dd></dl><p>The Audio Description chunk can fully describe any constant-bit-rate format that has one or more channels of the same size. For variable bit rate data, a CAF file also requires a Packet Table chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBDDAI">“Packet Table Chunk.”</a></span> </p><p>A CAF file can store any number of audio channels. The <code>mChannelsPerFrame</code> field specifies the number of channels in the data (or encoded in the data for compressed formats). For noncompressed formats, the <code>mBitsPerChannel</code> field specifies how many bits are assigned to each channel (for compressed formats, this field is <code>0</code>). The layout of the channels is described by the Channel Layout chunk (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGCIJCF">“Channel Layout Chunk”</a></span>).</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJHABG" title="mFormatID Field"></a><h4>mFormatID Field</h4><p>The following enumeration lists some of the currently defined values for the <code>mFormatID</code> field. This list is not exhaustive.</p><div class="codesample"><table><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatLinearPCM                   = 'lpcm',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatAppleIMA4                   = 'ima4',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatMPEG4AAC                    = 'aac ',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatMACE3                       = 'MAC3',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatMACE6                       = 'MAC6',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatULaw                        = 'ulaw',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatALaw                        = 'alaw',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatMPEGLayer1                  = '.mp1',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatMPEGLayer2                  = '.mp2',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatMPEGLayer3                  = '.mp3',<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioFormatAppleLossless               = 'alac'<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>kAudioFormatLinearPCM</code></dt><dd><p>Linear PCM. Uses the PCM-related format flags discussed in <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDJGJA">“mFormatFlags Field.”</a></span> See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJEBBI">“Linear PCM”</a></span> for more information about linear PCM formats.</p></dd><dt><code>kAudioFormatAppleIMA4</code></dt><dd><p>Apple’s implementation of IMA 4:1 ADPCM. Has no format flags. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGFDIGI">“Compressed Audio Formats”</a></span> for more information about this and other compressed audio formats.</p></dd><dt><code>kAudioFormatMPEG4AAC</code></dt><dd><p>MPEG-4 AAC. The <code>mFormatFlags</code> field must contain the MPEG-4 audio object type constant indicating the specific kind of data.</p></dd><dt><code>kAudioFormatMACE3</code></dt><dd><p>MACE 3:1; has no format flags.</p></dd><dt><code>kAudioFormatMACE6</code></dt><dd><p>MACE 6:1; has no format flags.</p></dd><dt><code>kAudioFormatULaw</code></dt><dd><p>μLaw 2:1; has no format flags.</p></dd><dt><code>kAudioFormatALaw</code></dt><dd><p>aLaw 2:1; has no format flags.</p></dd><dt><code>kAudioFormatMPEGLayer1</code></dt><dd><p>MPEG-1 or 2, Layer 1 audio. Has no format flags.</p></dd><dt><code>kAudioFormatMPEGLayer2</code></dt><dd><p>MPEG-1 or 2, Layer 2 audio. Has no format flags.</p></dd><dt><code>kAudioFormatMPEGLayer3</code></dt><dd><p>MPEG-1 or 2, Layer 3 audio (that is, MP3). Has no format flags.</p></dd><dt><code>kAudioFormatAppleLossless</code></dt><dd><p>Apple Lossless; has no format flags.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDJGJA" title="mFormatFlags Field"></a><h4>mFormatFlags Field</h4><p>The <code>mFormatFlags</code> field provides detailed specification for audio data formats that require it. These include linear PCM, MPEG-4 AAC, and AC-3. For audio formats that don’t use formatting flags, this field must be set to <code>0</code>.</p><p>Flag bits not specified for any published format are reserved for future use. For compatibility, those flag bits should be set to <code>0</code>.</p><p>Linear PCM formatting flags can have the following values: </p><div class="codesample"><table><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFLinearPCMFormatFlagIsFloat          = (1L &lt;&lt; 0),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFLinearPCMFormatFlagIsLittleEndian   = (1L &lt;&lt; 1)<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>kCAFLinearPCMFormatFlagIsFloat</code></dt><dd><p><code>1</code> for floating point, <code>0</code> for signed integer.</p></dd><dt><code>kCAFLinearPCMFormatFlagIsLittleEndian</code></dt><dd><p><code>1</code> for little endian, <code>0</code> for big endian.</p></dd></dl><p>MPEG-4 AAC formatting flags use the MPEG-4 Audio Object types defined for AAC. These values are subject to revision by the MPEG-4 standards bodies. </p><div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kMP4Audio_AAC_LC_ObjectType         = 2<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJEBBI" title="Linear PCM"></a><h4>Linear PCM</h4><p>Linear PCM (pulse-code modulated) data is the most common noncompressed audio data format. For all linear PCM formats, the <code>mFramesPerPacket</code> field equals <code>1</code> by definition. The <code>mBytesPerPacket</code> field is then equal to the number of bytes per frame. All packets are byte aligned.</p><p>The following variations of linear PCM audio should be supported by all CAF parsers:</p><ul class="spaceabove"><li class="li"><p>Any sample rate.</p></li><li class="li"><p>Samples of 16-, 24-, and 32-bit signed integer, both big and little endian. </p></li><li class="li"><p>Samples of 32- and 64-bit floating point, both big and little endian. </p></li></ul><p>Samples of 24 bits are commonly stored within PCM CAF files in either 3 bytes per sample (packed) or 4 bytes per sample (unpacked) formats. To conform to the CAF specification, you must support both storage methods. </p><p>As an example of unpacked data, to describe 16 bit, big-endian stereo, with a sample rate of 44,100 frames per second, you would use the Audio Description field values in <span class="content_text">Table 3-2</span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_66" title="Table 2-2Audio Description field values for big-endian unpacked 16-bit PCM"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCCGCF" title="Table 2-2Audio Description field values for big-endian unpacked 16-bit PCM"></a><strong>Table 2-2&nbsp;&nbsp;</strong>Audio Description field values for big-endian unpacked 16-bit PCM</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mSampleRate</code></p></td><td ><p>44100.</p></td></tr><tr><td  scope="row"><p><code>mFormatID</code></p></td><td ><p><code>kAudioFormatLinearPCM</code></p></td></tr><tr><td  scope="row"><p><code>mFormatFlags</code></p></td><td ><p><code>0</code> (big-endian integer)</p></td></tr><tr><td  scope="row"><p><code>mChannelsPerFrame</code></p></td><td ><p>2</p></td></tr><tr><td  scope="row"><p><code>mBitsPerChannel</code></p></td><td ><p>16</p></td></tr><tr><td  scope="row"><p><code>mFramesPerPacket</code></p></td><td ><p>1</p></td></tr><tr><td  scope="row"><p><code>mBytesPerPacket</code></p></td><td ><p>4</p></td></tr></table></div><p>In the packed case, each 24 bit sample takes up 3 bytes in the file. For example, to describe 24 bit, little-endian stereo, with a sample rate of 48,000 frames per second, you would use the Audio Description field values in <span class="content_text">Table 3-3</span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_67" title="Table 2-3Audio Description field values for little-endian packed 24-bit PCM"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDGJCA" title="Table 2-3Audio Description field values for little-endian packed 24-bit PCM"></a><strong>Table 2-3&nbsp;&nbsp;</strong>Audio Description field values for little-endian packed 24-bit PCM</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mSampleRate</code></p></td><td ><p>48000.</p></td></tr><tr><td  scope="row"><p><code>mFormatID</code></p></td><td ><p><code>kAudioFormatLinearPCM</code></p></td></tr><tr><td  scope="row"><p><code>mFormatFlags</code></p></td><td ><p><code>kCAFLinearPCMFormatFlagIsLittleEndian</code></p></td></tr><tr><td  scope="row"><p><code>mChannelsPerFrame</code></p></td><td ><p>2</p></td></tr><tr><td  scope="row"><p><code>mBitsPerChannel</code></p></td><td ><p>24</p></td></tr><tr><td  scope="row"><p><code>mFramesPerPacket</code></p></td><td ><p>1</p></td></tr><tr><td  scope="row"><p><code>mBytesPerPacket</code></p></td><td ><p>6</p></td></tr></table></div><p>In the unpacked case, the 24 bits are aligned high within the 4 byte field so that a parser can treat the value as if it were 32 bit integer with the lowest (or least significant) 8 bits all zero). On disk, the little-endian version of this data format looks like this: </p><div class="codesample"><table><tr><td scope="row"><pre>00 LL XX MM<span></span></pre></td></tr></table></div><p>where <code>MM</code> is the most significant byte and <code>LL</code> is the least significant.</p><p>A big-endian version of 24-bit PCM audio in 4 bytes looks like this:</p><div class="codesample"><table><tr><td scope="row"><pre>MM XX LL 00<span></span></pre></td></tr></table></div><p>The Audio Description chunk for this format is the same as for the packed version (<span class="content_text">Table 3-3</span>), except that the <code><!--a  -->mBytesPerPacket<!--/a--></code> field is set to 8 rather than 6.</p><p>To describe floating point samples, you have to add the <code>kCAFLinearPCMFormatFlagIsFloat</code> flag to the <code>mFormatFlags</code> field. For example, to describe 4 channels of little-endian 64-bit floating point samples with a sample rate of 96,000 frames per second, you would use the Audio Description chunk field values in <span class="content_text">Table 3-4</span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_68" title="Table 2-4Audio Description field values for floating-point 64-bit PCM"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCBGEB" title="Table 2-4Audio Description field values for floating-point 64-bit PCM"></a><strong>Table 2-4&nbsp;&nbsp;</strong>Audio Description field values for floating-point 64-bit PCM</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mSampleRate</code></p></td><td ><p>96000.</p></td></tr><tr><td  scope="row"><p><code>mFormatID</code></p></td><td ><p><code>kAudioFormatLinearPCM</code></p></td></tr><tr><td  scope="row"><p><code>mFormatFlags</code></p></td><td ><p><code>kCAFLinearPCMFormatFlagIsFloat | kCAFLinearPCMFormatFlagIsLittleEndian</code></p></td></tr><tr><td  scope="row"><p><code>mChannelsPerFrame</code></p></td><td ><p>4</p></td></tr><tr><td  scope="row"><p><code>mBitsPerChannel</code></p></td><td ><p>64</p></td></tr><tr><td  scope="row"><p><code>mFramesPerPacket</code></p></td><td ><p>1</p></td></tr><tr><td  scope="row"><p><code>mBytesPerPacket</code></p></td><td ><p>32</p></td></tr></table></div><p>You can also use CAF files to store non-byte-aligned PCM formats, such as 12-bit or 18-bit PCM. To do so, you should</p><ol class="ol"><li class="li"><p>Pack the data within a byte-aligned sample width.</p></li><li class="li"><p>High-align the samples within the enclosing byte-aligned width.</p></li></ol><p>For example, 12-bit PCM data should be packed (high-aligned) within a 2-byte (16-bit) word, allowing the CAF parser to parse the sample data using the same algorithms as used for 16-bit data.</p><p>In this case the Audio Description chunk for the 12-bit data would be identical to a chunk for 16-bit data, except that the <code>mBitsPerChannel</code> field would be set to 12 rather than 16.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGGIGIE" title="Pulse Width Modulation"></a><h4>Pulse Width Modulation</h4><p>In the Pulse Width Modulation (PWM) format (also known as 1-bit audio), each sample is one bit. This is the data format used for Super Audio CD (SA-CD; see <span class="content_text"><a href="http://www.superaudio-cd.com/" target="_blank">http://www.superaudio-cd.com/</a></span>). Although CAF does not define a format ID constant for a PWM format, it is instructive to look at how PWM data would be stored.</p><p>The sample rate for a Super Audio CD bit stream is 2,822,400 frames per second. In a CAF file with PWM data there would be no format flags, 1 bit per channel, and 8 frames per packet. Therefore, for two channels (stereo), there would be 2 bytes per packet (1 byte for each channel in the file). </p><p>Stereo PWM is packed as follows (in binary): </p><p><code>LLLLLLLL RRRRRRRR</code></p><p>where <code>L</code> is a bit for the left channel and <code>R</code> is a bit for the right channel. Therefore, the first <code>L</code> bit together with the first <code>R</code> bit constitute the first frame.</p><p>Similarly, for 6 channels there would be 6 bytes per packet and 8 frames per packet, packed as follows:</p><p><code>11111111 22222222 33333333 44444444 55555555 66666666</code></p><p>As is true for the data in all CAF files, the PWM data is byte aligned.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFDIGI" title="Compressed Audio Formats"></a><h4>Compressed Audio Formats</h4><p>In compressed audio formats, the packets are opaque and cannot be parsed without first being decompressed by a codec. For such formats, the <code>mSampleRate</code> field indicates the number of sample frames per second of the decompressed data and the <code>mFramesPerPacket</code> field indicates the number of frames encoded in each compressed packet. In addition, for compressed formats the <code>mBitsPerChannel</code> field is always <code>0</code>. All packets in CAF files must be byte aligned.</p><p>For example, the IMA4 data format encodes 64-sample frames into a single packet with a constant bit rate of 34 bytes per channel. To describe a CAF file of 2 channel IMA4 data with a sampling rate of 44,100 frames per second, you would use the Audio Description field values in <span class="content_text">Table 3-5</span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_69" title="Table 2-5Audio Description field values for 2 channel IMA4"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDDHBD" title="Table 2-5Audio Description field values for 2 channel IMA4"></a><strong>Table 2-5&nbsp;&nbsp;</strong>Audio Description field values for 2 channel IMA4</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mSampleRate</code></p></td><td ><p>44100.</p></td></tr><tr><td  scope="row"><p><code>mFormatID</code></p></td><td ><p><code>kAudioFormatAppleIMA4</code></p></td></tr><tr><td  scope="row"><p><code>mFormatFlags</code></p></td><td ><p>0</p></td></tr><tr><td  scope="row"><p><code>mChannelsPerFrame</code></p></td><td ><p>2</p></td></tr><tr><td  scope="row"><p><code>mBitsPerChannel</code></p></td><td ><p>0</p></td></tr><tr><td  scope="row"><p><code>mFramesPerPacket</code></p></td><td ><p>64</p></td></tr><tr><td  scope="row"><p><code>mBytesPerPacket</code></p></td><td ><p>68 (= <code>mChannelsPerFrame * 34</code>)</p></td></tr></table></div><p>In this example, the <code>mBitsPerChannel</code> field is <code>0</code>, indicating that this is a compressed format. The <code>mBytesPerPacket</code> field reflects the constant number of bytes per channel (34) and the number of frames per packet (64 in this case).</p><p>For a compressed audio format with a variable bit rate, the <code>mBytesPerPacket</code> field is <code>0</code>, indicating that the number of bytes per packet is variable. In this case, a Packet Table chunk (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBDDAI">“Packet Table Chunk”</a></span>) is required. </p><p>For example, the MPEG-4 Advanced Audio Coding (AAC) data format uses a variable bit rate but a constant number of frames per packet. To describe a CAF file of 2 channel Low Complexity Audio Object format AAC data with a sampling rate of 44,100 frames per second (for the decompressed data), you would use the Audio Description field values in <span class="content_text">Table 3-6</span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_70" title="Table 2-6Audio Description field values for 2 channel AAC"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGEEAHI" title="Table 2-6Audio Description field values for 2 channel AAC"></a><strong>Table 2-6&nbsp;&nbsp;</strong>Audio Description field values for 2 channel AAC</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mSampleRate</code></p></td><td ><p>44100.</p></td></tr><tr><td  scope="row"><p><code>mFormatID</code></p></td><td ><p><code>kAudioFormatMPEG4AAC</code></p></td></tr><tr><td  scope="row"><p><code>mFormatFlags</code></p></td><td ><p><code>kMP4Audio_AAC_LC_ObjectType</code></p></td></tr><tr><td  scope="row"><p><code>mChannelsPerFrame</code></p></td><td ><p>2</p></td></tr><tr><td  scope="row"><p><code>mBitsPerChannel</code></p></td><td ><p>0</p></td></tr><tr><td  scope="row"><p><code>mFramesPerPacket</code></p></td><td ><p>1024</p></td></tr><tr><td  scope="row"><p><code>mBytesPerPacket</code></p></td><td ><p>0</p></td></tr></table></div><p>In this example, the <code>mBitsPerChannel</code> field is <code>0</code>, indicating that this is a compressed format, and the <code>mBytesPerPacket</code> field is <code>0</code>, indicating a variable bit rate.</p><p>Note that, as long as the format has a constant number of frames per packet, you can calculate the duration of each packet by dividing the <code>mSampleRate</code> value by the <code>mFramesPerPacket</code> value.</p><p>Some compressed formats vary the number of frames per packet. In this case, you must set the <code>mFramesPerPacket</code> field to <code>0</code> (in addition to the <code>mBitsPerChannel</code> field, which is <code>0</code> for all compressed formats). </p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ" title="Audio Data Chunk"></a><h3>Audio Data Chunk</h3><p>Every CAF file must have exactly one Audio Data chunk. Wheras other chunks contain data that help to characterize or interpret the audio, this is the chunk in a CAF file that contains the actual audio data. If its size is specified, this chunk can be placed anywhere following the Audio Description chunk. If its size is not specified, the Audio Data chunk must be last in the file.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_19" title="Audio Data Chunk Header"></a><h4>Audio Data Chunk Header</h4><p><span class="content_text">Table 3-7</span> shows the values for the fields in the Audio Data chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_71" title="Table 2-7Audio Data chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHDDCI" title="Table 2-7Audio Data chunk header fields"></a><strong>Table 2-7&nbsp;&nbsp;</strong>Audio Data chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘data’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Size of data section in bytes, or <code>-1</code> if unknown.</p></td></tr></table></div><p>An <code>mChunkSize</code> value of <code>-1</code> indicates that the size of the data section for this chunk is unknown. In this case, the Audio Data chunk must appear last in the file so that the end of the Audio Data chunk is the same as the end of the file. This placement allows you to determine the data section size.</p><p>It is highly recommended that, after recording or modifying the audio data, you finalize the CAF file by updating the <code>mChunkSize</code> field to reflect the size of the Audio Data chunk’s data section. When you read a CAF file whose audio data section size is not specified, you should determine the size and update the <code>mChunkSize</code> value for the Audio Data chunk.</p><p>If the Audio Data chunk is not the last chunk in a CAF file, the <code>mChunkSize</code> field must contain the size of the chunk’s data section for the file to be valid.</p><p>Immediately following the Audio Data chunk’s header is the audio data section.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_20" title="Audio Data Chunk Data Section"></a><h4>Audio Data Chunk Data Section</h4><p>The data section in an Audio Data chunk contains audio data in the format specified by the Audio Description chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI">“Audio Description Chunk.”</a></span></p><p>The Audio Data chunk’s data section has an edit count field followed by the audio data for the file. The <code>CAFData</code> structure describes the data section for this chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFData<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mEditCount;                     //initially set to 0<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mData [kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mEditCount</code></dt><dd><p>The modification status of the data section. You should initially set this field to <code>0</code>, and should increment it each time the audio data in the file is modified.</p></dd><dt><code>mData</code></dt><dd><p>The audio data for the CAF file, in the format specified by the Audio Description chunk.</p></dd></dl><p>You can compare the value of <code>mEditCount</code> to the corresponding value in a dependent chunk, such as the <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBIJEH">“Overview Chunk”</a></span> or <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDICDC">“Peak Chunk.”</a></span></p><p>This document does not address the specifics of the data formats specified by the Audio Description chunk. Refer to specifications issued by the appropriate standards body or industry entity for information on a specific audio data format.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBDDAI" title="Packet Table Chunk"></a><h3>Packet Table Chunk</h3><p>CAF files that contain variable bit-rate (VBR) or variable frame-rate (VFR) audio data contain audio packets of varying size. Such files must have exactly one Packet Table chunk to specify the size of each packet. </p><p>You can identify CAF files containing VBR or VFR audio by their Audio Description chunk. In such files, one or both of the <code>mBytesPerPacket</code> and <code>mFramesPerPacket</code> fields in the Audio Description chunk has a value of <code>0</code>. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI">“Audio Description Chunk.”</a></span></p><p>The content of the Packet Table chunk describes, and therefore depends on, the content of the Audio Data chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ">“Audio Data Chunk.”</a></span> The packet table must always reflect current state of the audio data in a CAF file. </p><p>A CAF file with constant packet size can still include a Packet Table chunk in order to record certain information about frames (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJABEI">“Packet Table Description”</a></span>). </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_21" title="Packet Table Chunk Header"></a><h4>Packet Table Chunk Header</h4><p><span class="content_text">Table 3-8</span> shows the values for the fields in the Packet Table chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_72" title="Table 2-8Packet Table chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCGCAC" title="Table 2-8Packet Table chunk header fields"></a><strong>Table 2-8&nbsp;&nbsp;</strong>Packet Table chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘pakt’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>For a CAF file with variable packet sizes, the value for <code>mChunkSize</code> can be greater than the actual valid content of the packet table chunk. The Packet Table description indicates the number of valid entries in the Packet Table (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJABEI">“Packet Table Description”</a></span>). In the case of a CAF file with constant packet size, the value for <code>mChunkSize</code> should be 24 bytes—just enough to contain the Packet Table description itself. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJABEI" title="Packet Table Description"></a><h4>Packet Table Description</h4><p>This chunk has a descriptive section for the packet table itself. It appears immediately after the chunk header. The <code>CAFPacketTableHeader</code> structure describes it:</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFPacketTableHeader<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt64  mNumberPackets;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt64  mNumberValidFrames;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt32  mPrimingFrames;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt32  mRemainderFrames;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mNumberPackets</code></dt><dd><p>The total number of packets of audio data described in the packet table. This value must always be valid. </p><p>For a CAF file with variable packet sizes, this value should reflect the actual number of packets in the Audio Data chunk. In a CAF file with constant packet size, and therefore no packet table, this field should be set to <code>0</code>.</p></dd><dt><code>mNumberValidFrames</code></dt><dd><p>The total number of audio frames encoded in the file. The duration of the audio in the file is this value divided by the sample rate specified in the file’s Audio Description chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI">“Audio Description Chunk.”</a></span> The value of this field must always be valid.</p></dd><dt><code>mPrimingFrames</code></dt><dd><p>The number of frames for priming or processing latency for a compressed audio format. For example, MPEG-AAC codecs typically have a latency of 2112 frames. The number of priming frames can be useful for any CAF file containing compressed audio, whether or not the packets vary in size.</p></dd><dt><code>mRemainderFrames</code></dt><dd><p>The number of unused frames in the CAF file’s final packet; that is, the number of frames that should be trimmed from the output of the last packet when decoding. </p><p>For example, an AAC file may have only 313 frames containing audio data in its final packet. AAC files hold 1024 frames per packet. The value for <code>mRemainderFrames</code> is then 1024 – 313 = 711. </p></dd></dl><p>The <code>mNumberPackets</code> value is specified only when the chunk contains a packet table—that is, when the CAF file contains variable-sized packets. On the other hand, regardless of whether its packets vary in size or not, any CAF file can use the <code>mNumberValildFrames</code>, <code>mPrimingFrames</code>, and <code>mRemainderFrames</code> fields.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBBCHG" title="Packet Table Chunk Data Section"></a><h4>Packet Table Chunk Data Section</h4><p>The Packet Table chunk’s data section lists information about variable-sized packets in the file’s Audio Data chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ">“Audio Data Chunk.”</a></span></p><p>For a given CAF file, depending on the file’s audio format, packets can vary in size because of a variable bit rate (variable bytes per packet), a variable number of frames per packet, or both.</p><p>The following list of these three audio format types includes the corresponding values for <code>mBytesPerPacket</code> and <code>mFramesPerPacket</code> present in the Audio Description chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI">“Audio Description Chunk”</a></span>:</p><ul class="spaceabove"><li class="li"><p>Variable bit rate, constant number of frames per packet (such as AAC and variable-bit-rate MP3): <code>mBytesPerPacket</code> is zero, <code>mFramesPerPacket</code> is nonzero.</p><p>The Packet Table chunk data section contains single-number entries that describe the size, in bytes, of each packet in the Audio Data chunk.</p></li><li class="li"><p>Variable number of frames per packet, constant bit rate: <code>mBytesPerPacket</code> is nonzero; <code>mFramesPerPacket</code> is zero.</p><p>The Packet Table chunk data section contains single-number entries that describe the number of frames represented by each packet in the Audio Data chunk.</p></li><li class="li"><p>Variable bit rate, variable number of frames per packet (such as Ogg Vorbis): <code>mBytesPerPacket</code> is zero, <code>mFramesPerPacket</code> is zero.</p><p>The Packet Table chunk data section contains ordered-pair entries. The first number in each pair is the packet size, in bytes; the second is the number of frames per packet.</p></li></ul><p>The numbers describing the size of packets or frames per packet are encoded as variable-length integers. In this encoding scheme, each byte contains 7 bits of the binary integer and a 1-bit continuation flag—the high-order bit in each byte is used to indicate whether the number is continued in the next byte. The lowest-order byte in any given integer is therefore the first one for which the high-order bit is not set; that is, the first byte that has a value less than 128 holds the last 7 bits in the integer. <span class="content_text">Table 3-9</span> gives some examples of encoded integers. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_73" title="Table 2-9Sample variable-length encoded integers "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDGEGA" title="Table 2-9Sample variable-length encoded integers "></a><strong>Table 2-9&nbsp;&nbsp;</strong>Sample variable-length encoded integers </caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Packet size</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Integer encoding (hexadecimal)</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Integer encoding (binary)</p></th></tr><tr><td  scope="row"><p>1</p></td><td ><p><code>0x01</code></p></td><td ><p><code>0000  0001</code></p></td></tr><tr><td  scope="row"><p>17</p></td><td ><p><code>0x11</code></p></td><td ><p><code>0001  0001</code></p></td></tr><tr><td  scope="row"><p>127</p></td><td ><p><code>0x7F</code></p></td><td ><p><code>0111  1111</code></p></td></tr><tr><td  scope="row"><p>128</p></td><td ><p><code>0x81 0x00</code></p></td><td ><p><code>1000  0001  0000  0000</code></p></td></tr><tr><td  scope="row"><p>130</p></td><td ><p><code>0x81 0x02</code></p></td><td ><p><code>1000  0001  0000  0010</code></p></td></tr><tr><td  scope="row"><p>257</p></td><td ><p><code>0x82 0x01</code></p></td><td ><p><code>1000  0010  0000  0001</code></p></td></tr><tr><td  scope="row"><p>16383</p></td><td ><p><code>0xFF 0x7F</code></p></td><td ><p><code>1111  1111  0111  1111</code></p></td></tr><tr><td  scope="row"><p>16384</p></td><td ><p><code>0x81 0x80 0x00</code></p></td><td ><p><code>1000  0001  1000  0000  0000  0000</code></p></td></tr></table></div><p>Thus, the data section contains a simple list of numbers or a list of ordered pairs of numbers. In all cases, variable-length integers are used to describe each packet.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_22" title="Constant Bit Rate Format"></a><h4>Constant Bit Rate Format</h4><p>A Packet Table chunk may be used with a constant bit rate (constant frames per packet and constant bytes per packet) format to provide information about either of the following:</p><ul class="spaceabove"><li class="li"><p>Any latency due to the nature of the codec (see the discussion of the <code>mPrimingFrames</code> field in <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJABEI">“Packet Table Description”</a></span>).</p></li><li class="li"><p>Any remainder frames. Remainder frames occur when the total number of frames in the audio data is not evenly divisible by the frames per packet specified for the file. See the discussion of the <code>mFramesPerPacket</code> field in <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAECA">“Audio Description Chunk Data Section”</a></span> and the discussion of the <code>mRemainderFrames</code> field in <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJABEI">“Packet Table Description.”</a></span></p></li></ul><p>For either of these cases, no packet table data is needed, so set the <code>mNumberPackets</code> field to <code>0</code>. The size of the packet table is therefore the size of the packet table header structure.</p><p>As an example of the second use, the IMA format encodes samples into packets containing 64 sample frames each. If the audio data is not equally divisible by 64 frames, then the last packet of IMA content decodes to less samples than the 64 that are presented by the packet. In this case, the Packet Table header is used to indicate the total number of frames in the file and the number of remainder frames. For example, if there are 5 remainder frames, you would set the fields of the Packet Table header as shown in <span class="content_text">Table 3-10</span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_74" title="Table 2-10Packet Table header for an IMA file with 5 remainder frames"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGGHGJA" title="Table 2-10Packet Table header for an IMA file with 5 remainder frames"></a><strong>Table 2-10&nbsp;&nbsp;</strong>Packet Table header for an IMA file with 5 remainder frames</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p>mNumberPackets</p></td><td ><p>0</p></td></tr><tr><td  scope="row"><p>mNumberValidFrames</p></td><td ><p><code>numFramesInFile (= (mFramesPerPacket * (sizeOfAudioData) / mBytesPerPacket)-5)</code></p></td></tr><tr><td  scope="row"><p>mPrimingFrames</p></td><td ><p>0</p></td></tr><tr><td  scope="row"><p>mRemainderFrames</p></td><td ><p><code>59 (= mFramesPerPacket - 5)</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_23" title="Variable Bit Rate, Constant Frames per Packet"></a><h4>Variable Bit Rate, Constant Frames per Packet</h4><p>The Packet Table chunk is required for compressed data formats with a variable bit rate (<code>mBytesPerPacket</code> is set to <code>0</code>) and a constant number of frames per packet (<code>mFramesPerPacket</code> is nonzero). (See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAECA">“Audio Description Chunk Data Section”</a></span> for more information about these header fields.)</p><p>In this case, the packet table data contains one variable-length integer for each packet specifying the packet’s size in bytes. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBBCHG">“Packet Table Chunk Data Section”</a></span> for an explanation of variable-length integers.</p><p>For example, because AAC has a latency of 2112 frames, an AAC encoding of 3074 sample frames requires a total of 6 packets (AAC has 1024 frames per packet). The fields of the Packet Table header for this example are as shown in <span class="content_text">Table 3-11</span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_75" title="Table 2-11Packet Table header for an AAC file "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJJJIH" title="Table 2-11Packet Table header for an AAC file "></a><strong>Table 2-11&nbsp;&nbsp;</strong>Packet Table header for an AAC file </caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mNumberPackets</code></p></td><td ><p>6</p></td></tr><tr><td  scope="row"><p><code>mNumberValidFrames</code></p></td><td ><p>3074</p></td></tr><tr><td  scope="row"><p><code>mPrimingFrames</code></p></td><td ><p>2112</p></td></tr><tr><td  scope="row"><p><code>mRemainderFrames</code></p></td><td ><p>958 (= 1024 (<code>mFramesPerPacket</code>) – 66)</p></td></tr></table></div><p>As shown in <span class="content_text">Table 3-12</span>, the first two packets contain only priming frames; these frames do not output any valid audio data. The third packet contains the final 64 priming frames and then outputs 960 frames of audio data. The following two packets contain 1024 sample frames of valid audio data apiece. (There would normally be many more 1024-frame packets than the two in this example.) The last packet contains the final 66 sample frames of audio data followed by 958 remainder frames (which should be trimmed from the output).</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_76" title="Table 2-12Frames of valid audio data per packet for an AAC file of 3074 frames"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBJAJD" title="Table 2-12Frames of valid audio data per packet for an AAC file of 3074 frames"></a><strong>Table 2-12&nbsp;&nbsp;</strong>Frames of valid audio data per packet for an AAC file of 3074 frames</caption><tr><td  scope="row"><p>Packet</p></td><td ><p>1</p></td><td ><p>2</p></td><td ><p>3</p></td><td ><p>4</p></td><td ><p>5</p></td><td ><p>6</p></td></tr><tr><td  scope="row"><p>Valid Frames</p></td><td ><p>     0</p></td><td ><p>     0</p></td><td ><p>  960</p></td><td ><p>1024</p></td><td ><p>1024</p></td><td ><p>   66</p></td></tr><tr><td  scope="row"><p>Total Frames</p></td><td ><p>1024</p></td><td ><p>1024</p></td><td ><p>1024</p></td><td ><p>1024</p></td><td ><p>1024</p></td><td ><p>1024</p></td></tr></table></div><p>Note that the Audio Description chunk would specify this file as having a constant 1024 frames per packet. The priming and trailing frame counts can be used to determine how to trim the audio output of the file when the data is decoded.</p><p>Following this packet table header is the packet table itself, which in this example would consist of 6 variable sized integers that describe the number of bytes for each of the 6 packets. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_24" title="Channel Layout"></a><h2>Channel Layout</h2><p>The channel layout chunk is required for all CAF files that have more than two channels (unless there is no meaning or ordering of the channels in the file). There is no default assumed ordering of channels in a file with more than two channels. The channel layout chunk is optional for a CAF file with one or two channels. For a CAF file with one or two channels and no channel layout chunk, you can assume that a one-channel file represents monaural data and a two-channel file represents stereo with the left-channel sample first in each frame. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCIJCF" title="Channel Layout Chunk"></a><h3>Channel Layout Chunk</h3><p>The Channel Layout chunk describes the order and role of each channel in a CAF file. It is especially useful for any CAF file with more than two audio channels but can also provide important information for one- and two-channel files. For example, when a user converts a stereo or multichannel audio file to a set of one-channel files, the Channel Layout chunk can indicate the role of each one-channel file.</p><p>In the Audio Data chunk (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ">“Audio Data Chunk”</a></span>) of an uncompressed audio CAF file, a sample for each channel appears in sequence in each frame. The number of channels per frame and the number of bits per channel are specified in the Audio Description chunk (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAECA">“Audio Description Chunk Data Section”</a></span>). The Channel Description chunk specifies the order in which the channel data appears in the audio data chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_25" title="Channel Layout Chunk Header"></a><h4>Channel Layout Chunk Header</h4><p><span class="content_text">Table 3-13</span> shows the values for the fields in the Channel Layout chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_77" title="Table 2-13Channel Layout chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGICFDF" title="Table 2-13Channel Layout chunk header fields"></a><strong>Table 2-13&nbsp;&nbsp;</strong>Channel Layout chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘chan’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The <code>mChunkSize</code> field must be set to the size of the chunk’s data section and must always be valid.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_26" title="Channel Layout Chunk Data Section"></a><h4>Channel Layout Chunk Data Section</h4><p>The Channel Layout chunk data section begins with a tag that indicates the nature of the data in the chunk, followed by the data, as shown in the <code>CAFChannelLayout</code> structure.</p><div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>struct CAFChannelLayout<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32                  mChannelLayoutTag;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32                  mChannelBitmap;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32                  mNumberChannelDescriptions;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFChannelDescription   mChannelDescriptions[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mChannelLayoutTag</code></dt><dd><p>A tag that indicates the type of layout used, as described in <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGECJAJ">“Channel Layout Tags.”</a></span></p></dd><dt><code>mChannelBitmap</code></dt><dd><p>A bitmap that describes which channels are present. The order of the channels is the same as the order of the bits; that is, the lowest-order bit that is set corresponds to the first channel of the file, and so on. The number of set bits is the number of channels, which must equal the number of channels in the file. This bit-field technique is used both in WAV files and in the USB Audio Specification. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBHHHI">“Channel Bitmaps”</a></span> for bit assignments.</p></dd><dt><code>mNumberChannelDescriptions</code></dt><dd><p>The number of channel descriptions in the <code>mChannelDescriptions</code> array. If this number is <code>0</code>, then this is the last field in the structure.</p></dd><dt><code>mChannelDescriptions</code></dt><dd><p>An array of <code>CAFChannelDescription</code> structures (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHGHDF">“Channel Description”</a></span>) that describe the layout of the channels. This field is not present if the <code>mNumberChannelDescriptions</code> field is <code>0</code>.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBHHHI" title="Channel Bitmaps"></a><h4>Channel Bitmaps</h4><p>The significance of the bits in the <code>mChannelBitmap</code> field is specified in the following enumeration:</p><div class="codesample"><table><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_Left                 = (1&lt;&lt;0),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_Right                = (1&lt;&lt;1),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_Center               = (1&lt;&lt;2),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_LFEScreen            = (1&lt;&lt;3),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_LeftSurround         = (1&lt;&lt;4),   // WAVE: "Back Left"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_RightSurround        = (1&lt;&lt;5),   // WAVE: "Back Right"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_LeftCenter           = (1&lt;&lt;6),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_RightCenter          = (1&lt;&lt;7),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_CenterSurround       = (1&lt;&lt;8),   // WAVE: "Back Center"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_LeftSurroundDirect   = (1&lt;&lt;9),   // WAVE: "Side Left"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_RightSurroundDirect  = (1&lt;&lt;10), // WAVE: "Side Right"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_TopCenterSurround    = (1&lt;&lt;11),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_VerticalHeightLeft   = (1&lt;&lt;12), // WAVE: "Top Front Left"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_VerticalHeightCenter = (1&lt;&lt;13), // WAVE: "Top Front Center"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_VerticalHeightRight  = (1&lt;&lt;14), // WAVE: "Top Front Right"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_TopBackLeft          = (1&lt;&lt;15),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_TopBackCenter        = (1&lt;&lt;16),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelBit_TopBackRight         = (1&lt;&lt;17)<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGECJAJ" title="Channel Layout Tags"></a><h4>Channel Layout Tags</h4><p>Channel layouts can be described by a code in the <code>mChannelLayoutTag</code> field.</p><p>A value of <code>kCAFChannelLayoutTag_UseChannelDescriptions</code> (<code>== 0</code>) indicates there is no standard description for the ordering or use of channels in the file, so that channel descriptions are used instead. In this case, the number of channel descriptions (<code>mNumberChannelDescriptions</code>) must equal the number of channels contained in the file. The channel descriptions follow the <code>mNumberChannelDescriptions</code> field; see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHGHDF">“Channel Description.”</a></span></p><p>A value of <code>kCAFChannelLayoutTag_UseChannelBitmap</code> (== 0x10000) indicates that the Channel Layout chunk uses a bitmap (in the <code>mChannelBitmap</code> field) to describe which channels are present. </p><p>A value greater than <code>0x10000</code> indicates one of the layout tags listed below in this section. Each channel layout tag has two parts:</p><ul class="spaceabove"><li class="li"><p>The low 16 bits represents the number of channels described by the tag.</p></li><li class="li"><p>The high 16 bits indicates a specific ordering of the channels.</p></li></ul><p>For example, the tag <code>kCAFChannelLayoutTag_Stereo</code> is defined as <code>((101&lt;&lt;16) | 2 )</code> and indicates a two-channel stereo, ordered left as the first channel, right as the second. </p><p>Current values for this code are listed in the following enumeration:</p><div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_UseChannelDescriptions = (0&lt;&lt;16) | 0,<span></span></pre></td></tr><tr><td scope="row"><pre>        // use the array of AudioChannelDescriptions to define the mapping.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_UseChannelBitmap       = (1&lt;&lt;16) | 0,<span></span></pre></td></tr><tr><td scope="row"><pre>        // use the bitmap to define the mapping.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// 1 Channel Layout<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Mono                   = (100&lt;&lt;16) | 1,<span></span></pre></td></tr><tr><td scope="row"><pre>        // a standard mono stream<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// 2 Channel layouts<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Stereo                 = (101&lt;&lt;16) | 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        // a standard stereo stream (L R)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_StereoHeadphones       = (102&lt;&lt;16) | 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        // a standard stereo stream (L R) - implied headphone playback<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MatrixStereo           = (103&lt;&lt;16) | 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        // a matrix encoded stereo stream (Lt, Rt)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MidSide                = (104&lt;&lt;16) | 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        // mid/side recording<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_XY                     = (105&lt;&lt;16) | 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        // coincident mic pair (often 2 figure 8's)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Binaural               = (106&lt;&lt;16) | 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        // binaural stereo (left, right)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Symetric arrangements - same distance between speaker locations<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Ambisonic_B_Format     = (107&lt;&lt;16) | 4,<span></span></pre></td></tr><tr><td scope="row"><pre>        // W, X, Y, Z<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Quadraphonic           = (108&lt;&lt;16) | 4,<span></span></pre></td></tr><tr><td scope="row"><pre>        // front left, front right, back left, back right<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Pentagonal             = (109&lt;&lt;16) | 5,<span></span></pre></td></tr><tr><td scope="row"><pre>        // left, right, rear left, rear right, center<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Hexagonal              = (110&lt;&lt;16) | 6,<span></span></pre></td></tr><tr><td scope="row"><pre>        // left, right, rear left, rear right, center, rear<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Octagonal              = (111&lt;&lt;16) | 8,<span></span></pre></td></tr><tr><td scope="row"><pre>        // front left, front right, rear left, rear right,<span></span></pre></td></tr><tr><td scope="row"><pre>        // front center, rear center, side left, side right<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Cube                   = (112&lt;&lt;16) | 8,<span></span></pre></td></tr><tr><td scope="row"><pre>        // left, right, rear left, rear right<span></span></pre></td></tr><tr><td scope="row"><pre>        // top left, top right, top rear left, top rear right<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>//  MPEG defined layouts<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_1_0   = kCAFChannelLayoutTag_Mono,    //  C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_2_0   = kCAFChannelLayoutTag_Stereo,  //  L R<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_3_0_A = (113&lt;&lt;16) | 3,         // L R C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_3_0_B = (114&lt;&lt;16) | 3,         // C L R<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_4_0_A = (115&lt;&lt;16) | 4,         // L R C Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_4_0_B = (116&lt;&lt;16) | 4,         // C L R Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_0_A = (117&lt;&lt;16) | 5,         // L R C Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_0_B = (118&lt;&lt;16) | 5,         // L R Ls Rs C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_0_C = (119&lt;&lt;16) | 5,         // L C R Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_0_D = (120&lt;&lt;16) | 5,         // C L R Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_1_A = (121&lt;&lt;16) | 6,         // L R C LFE Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_1_B = (122&lt;&lt;16) | 6,         // L R Ls Rs C LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_1_C = (123&lt;&lt;16) | 6,         // L C R Ls Rs LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_5_1_D = (124&lt;&lt;16) | 6,         // C L R Ls Rs LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_6_1_A = (125&lt;&lt;16) | 7,         // L R C LFE Ls Rs Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_7_1_A = (126&lt;&lt;16) | 8,         // L R C LFE Ls Rs Lc Rc<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_7_1_B = (127&lt;&lt;16) | 8,         // C Lc Rc L R Ls Rs LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_MPEG_7_1_C = (128&lt;&lt;16) | 8,         // L R C LFE Ls R Rls Rrs<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_Emagic_Default_7_1 = (129&lt;&lt;16) | 8,<span></span></pre></td></tr><tr><td scope="row"><pre>        //  L R Ls Rs C LFE Lc Rc<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_SMPTE_DTV          = (130&lt;&lt;16) | 8,<span></span></pre></td></tr><tr><td scope="row"><pre>        //  L R C LFE Ls Rs Lt Rt<span></span></pre></td></tr><tr><td scope="row"><pre>        //  (kCAFChannelLayoutTag_ITU_5_1 plus a matrix encoded stereo mix)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>//  ITU defined layouts<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_1_0    = kCAFChannelLayoutTag_Mono,    //  C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_2_0    = kCAFChannelLayoutTag_Stereo,  //  L R<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_2_1    = (131&lt;&lt;16) | 3,         // L R Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_2_2    = (132&lt;&lt;16) | 4,         // L R Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_3_0    = kCAFChannelLayoutTag_MPEG_3_0_A,  //  L R C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_3_1    = kCAFChannelLayoutTag_MPEG_4_0_A,  //  L R C Cs<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_3_2    = kCAFChannelLayoutTag_MPEG_5_0_A,  //  L R C Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_3_2_1  = kCAFChannelLayoutTag_MPEG_5_1_A,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                                //  L R C LFE Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_ITU_3_4_1  = kCAFChannelLayoutTag_MPEG_7_1_C,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                        //  L R C LFE Ls Rs Rls Rrs<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// DVD defined layouts<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_0  = kCAFChannelLayoutTag_Mono,    // C (mono)<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_1  = kCAFChannelLayoutTag_Stereo,  // L R<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_2  = kCAFChannelLayoutTag_ITU_2_1, // L R Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_3  = kCAFChannelLayoutTag_ITU_2_2, // L R Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_4  = (133&lt;&lt;16) | 3,                // L R LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_5  = (134&lt;&lt;16) | 4,                // L R LFE Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_6  = (135&lt;&lt;16) | 5,                // L R LFE Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_7  = kCAFChannelLayoutTag_MPEG_3_0_A,// L R C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_8  = kCAFChannelLayoutTag_MPEG_4_0_A,// L R C Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_9  = kCAFChannelLayoutTag_MPEG_5_0_A,// L R C Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_10 = (136&lt;&lt;16) | 4,                // L R C LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_11 = (137&lt;&lt;16) | 5,                // L R C LFE Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_12 = kCAFChannelLayoutTag_MPEG_5_1_A,// L R C LFE Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    // 13 through 17 are duplicates of 8 through 12.<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_13 = kCAFChannelLayoutTag_DVD_8,   // L R C Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_14 = kCAFChannelLayoutTag_DVD_9,   // L R C Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_15 = kCAFChannelLayoutTag_DVD_10,  // L R C LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_16 = kCAFChannelLayoutTag_DVD_11,  // L R C LFE Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_17 = kCAFChannelLayoutTag_DVD_12,  // L R C LFE Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_18 = (138&lt;&lt;16) | 5,                // L R Ls Rs LFE<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_19 = kCAFChannelLayoutTag_MPEG_5_0_B,// L R Ls Rs C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_DVD_20 = kCAFChannelLayoutTag_MPEG_5_1_B,// L R Ls Rs C LFE<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// These layouts are recommended for Mac OS X's AudioUnit use<span></span></pre></td></tr><tr><td scope="row"><pre>        // These are the symmetrical layouts<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_4= kCAFChannelLayoutTag_Quadraphonic,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_5= kCAFChannelLayoutTag_Pentagonal,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_6= kCAFChannelLayoutTag_Hexagonal,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_8= kCAFChannelLayoutTag_Octagonal,<span></span></pre></td></tr><tr><td scope="row"><pre>        // These are the surround-based layouts<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_5_0  = kCAFChannelLayoutTag_MPEG_5_0_B,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                                // L R Ls Rs C<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_6_0  = (139&lt;&lt;16) | 6,        // L R Ls Rs C Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_7_0  = (140&lt;&lt;16) | 7,        // L R Ls Rs C Rls Rrs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_5_1  = kCAFChannelLayoutTag_MPEG_5_1_A,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                                 // L R C LFE Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_6_1  = kCAFChannelLayoutTag_MPEG_6_1_A,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                                // L R C LFE Ls Rs Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AudioUnit_7_1  = kCAFChannelLayoutTag_MPEG_7_1_C,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                          // L R C LFE Ls Rs Rls Rrs<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// These layouts are used for AAC Encoding within the MPEG-4 Specification<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_Quadraphonic   = kCAFChannelLayoutTag_Quadraphonic,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                                    // L R Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_4_0= kCAFChannelLayoutTag_MPEG_4_0_B,  // C L R Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_5_0= kCAFChannelLayoutTag_MPEG_5_0_D,  // C L R Ls Rs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_5_1= kCAFChannelLayoutTag_MPEG_5_1_D,  // C L R Ls Rs Lfe<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_6_0= (141&lt;&lt;16) | 6,            // C L R Ls Rs Cs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_6_1= (142&lt;&lt;16) | 7,            // C L R Ls Rs Cs Lfe<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_7_0= (143&lt;&lt;16) | 7,            // C L R Ls Rs Rls Rrs<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_7_1= kCAFChannelLayoutTag_MPEG_7_1_B,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                            // C Lc Rc L R Ls Rs Lfe<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_AAC_Octagonal  = (144&lt;&lt;16) | 8,    // C L R Ls Rs Rls Rrs Cs<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_TMH_10_2_std   = (145&lt;&lt;16) | 16,<span></span></pre></td></tr><tr><td scope="row"><pre>                            // L R C Vhc Lsd Rsd Ls Rs Vhl Vhr Lw Rw Csd Cs LFE1 LFE2<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_TMH_10_2_full  = (146&lt;&lt;16) | 21,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            // TMH_10_2_std plus: Lc Rc HI VI Haptic<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLayoutTag_RESERVED_DO_NOT_USE= (147&lt;&lt;16)<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHGHDF" title="Channel Description"></a><h4>Channel Description</h4><p>If the channel layout tag is set to <code>kCAFChannelLayoutTag_UseChannelDescriptions</code> , there is no standard description for the ordering or use of channels in the file; channel descriptions are used instead. In this case, the number of channel descriptions (<code>mNumberChannelDescriptions</code>) must equal the number of channels contained in the file. Following the <code>mNumberChannelDescriptions</code> field is an array of channel descriptions, one for each channel, as specified by the <code>CAFChannelDescription</code> structure:</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFChannelDescription<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt 32             mChannelLabel;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32              mChannelFlags;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32             mCoordinates[3];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mChannelLabel</code></dt><dd><p>A label that describes the role of the channel. In common cases, such as “Left” or “Right,” role implies location. In such cases, <code>mChannelFlags</code> and <code>mCoordinates</code> can be set to <code>0</code>. Refer to <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-CHDIAFFD">“Label Codes for Channel Layouts.”</a></span></p></dd><dt><code>mChannelFlags</code></dt><dd><p>Flags that indicate how to interpret the data in the <code>mCoordinates</code> field. Refer to <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-CHDFCJHB">“Channel Flags for Channel Layouts.”</a></span> If the audio channel does not require this information, set this field to <code>0</code>.</p></dd><dt><code>mCoordinates</code></dt><dd><p>A set of three coordinates that specify the placement of the sound source for the channel in three dimensions, according to the <code>mChannelFlags</code> information. If the audio channel does not require this information, set this field to <code>0</code>. </p></dd></dl><p>The number of channel descriptions in this chunk’s data section must match the number of channels specified in the <code>mChannelsPerFrame</code> field of the Audio Description chunk. In addition, the order of the channel descriptions must correspond to the order of the channels in the Audio Data chunk. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI">“Audio Description Chunk”</a></span> and <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEFGJ">“Audio Data Chunk.”</a></span></p><p>You can use the optional Information chunk (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBBFI">“Information Chunk”</a></span>) to supply user-presentable names for particular channel layouts. However, if there is any conflict between the channel assignments in the Information chunk and those in the Channel Layout chunk, the Channel Layout chunk always takes precedence.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-CHDIAFFD" title="Label Codes for Channel Layouts"></a><h4>Label Codes for Channel Layouts</h4><p>Label Codes indicate the role of a channel. CAF files specify this information in this chunk’s <code>mChannelLabel</code> field.</p><p>The following list includes most channel layouts in common use. Due to differences in channel labeling by various industry groups, there may be overlap or duplication. In every case, use the label that most clearly describes the role of the audio channel.</p><div class="codesample"><table><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Unknown    = 0xFFFFFFFF,   // unknown role or uspecified                                                    // other use for channel<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Unused     = 0,            // channel is present, but<span></span></pre></td></tr><tr><td scope="row"><pre>                                            // has no intended role or destination<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_UseCoordinates         = 100,  // channel is described<span></span></pre></td></tr><tr><td scope="row"><pre>                                            // solely by the mCoordinates fields<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Left                   = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Right                  = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Center                 = 3,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_LFEScreen              = 4,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_LeftSurround           = 5,    // WAVE (.wav files): "Back Left"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_RightSurround          = 6,    // WAVE: "Back Right"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_LeftCenter             = 7,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_RightCenter            = 8,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_CenterSurround         = 9,    // WAVE: "Back Center or<span></span></pre></td></tr><tr><td scope="row"><pre>                                                    // plain "Rear Surround"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_LeftSurroundDirect     = 10,   // WAVE: "Side Left"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_RightSurroundDirect    = 11,   // WAVE: "Side Right"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_TopCenterSurround      = 12,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_VerticalHeightLeft     = 13,   // WAVE: "Top Front Left"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_VerticalHeightCenter   = 14,   // WAVE: "Top Front Center"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_VerticalHeightRight    = 15,   // WAVE: "Top Front Right"<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_TopBackLeft            = 16,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_TopBackCenter          = 17,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_TopBackRight           = 18,<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_RearSurroundLeft       = 33,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_RearSurroundRight      = 34,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_LeftWide               = 35,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_RightWide              = 36,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_LFE2                   = 37,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_LeftTotal              = 38,   // matrix encoded 4 channels<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_RightTotal             = 39,   // matrix encoded 4 channels<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_HearingImpaired        = 40,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Narration              = 41,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Mono                   = 42,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_DialogCentricMix       = 43,<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_CenterSurroundDirect   = 44,   // back center, non diffuse<span></span></pre></td></tr><tr><td scope="row"><pre>    // first order ambisonic channels<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Ambisonic_W            = 200,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Ambisonic_X            = 201,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Ambisonic_Y            = 202,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_Ambisonic_Z            = 203,<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Mid/Side Recording<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_MS_Mid                 = 204,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_MS_Side                = 205,<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // X-Y Recording<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_XY_X                   = 206,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_XY_Y                   = 207,<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // other<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_HeadphonesLeft         = 301,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_HeadphonesRight        = 302,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_ClickTrack             = 304,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelLabel_ForeignLanguage        = 305<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/TP40001862-CH210-CHDFCJHB" title="Channel Flags for Channel Layouts"></a><h4>Channel Flags for Channel Layouts</h4><p>Channel Flags specify whether a channel layout uses spherical or rectangular coordinates, and whether distances are absolute or relative. CAF files specify this information in this chunk’s <code>mChannelFlags</code> field.</p><p>Here are the CAF conventions for rectangular coordinates:</p><ul class="spaceabove"><li class="li"><p>Negative is left, and positive is right.</p></li><li class="li"><p>Negative is back, and positive is front.</p></li><li class="li"><p>Negative is below ground level, <code>0</code> is ground level, and positive is above ground level.</p></li></ul><p>In CAF files, spherical coordinates are measured in degrees. Here are the CAF conventions for spherical coordinates:</p><ul class="spaceabove"><li class="li"><p><code>0</code> is front center, positive is right, negative is left.</p></li><li class="li"><p><code>+90</code> is zenith, <code>0</code> is horizontal, <code>-90</code> is nadir.</p></li></ul><p>These constants are used in the <code>mChannelFlags</code> field of the Channel Layout chunk:</p><div class="codesample"><table><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelFlags_AllOff                     = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelFlags_RectangularCoordinates     = (1&lt;&lt;0),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelFlags_SphericalCoordinates       = (1&lt;&lt;1),<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFChannelFlags_Meters                     = (1&lt;&lt;2)<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>kCAFChannelFlags_AllOff</code></dt><dd><p>No flags are set.</p></dd><dt><code>kCAFChannelFlags_RectangularCoordinates</code></dt><dd><p>The channel is specified by the cartesian coordinates of the speaker position. This flag is mutally exclusive with <code>kCAFChannelFlags_SphericalCoordinates</code>.</p></dd><dt><code>kCAFChannelFlags_SphericalCoordinates</code></dt><dd><p>The channel is specified by the spherical coordinates of the speaker position. This flag is mutally exclusive with <code>kCAFChannelFlags_RectangularCoordinates</code>.</p></dd><dt><code>kCAFChannelFlags_Meters</code></dt><dd><p>A flag that indicates whether the units are absolute or relative. Set to indicate the units are in meters, clear to indicate the units are relative to the unit cube or unit sphere. For relative units, the listener is assumed to be at the center of the cube or sphere and the maximum radius of the sphere or the distance from the center to the midpoint of the side of the cube is 1. </p></dd></dl><p>If the channel description provides no coordinate information, then the <code>mChannelFlags</code> field is set to <code>0</code>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_27" title="Supplementary Data"></a><h2>Supplementary Data</h2><p>Some audio formats require specific information in addition to the data in the Audio Description and Audio Data chunks (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGDDGAI">“Required Chunks”</a></span>). You use the Magic Cookie chunk for this purpose. Similarly, some chunks refer to strings stored in a separate chunk, the Strings chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFCCFA" title="Magic Cookie Chunk"></a><h3>Magic Cookie Chunk</h3><p>The Magic Cookie chunk contains supplementary (“magic cookie”) data required by certain audio data formats, such as MPEG-4 AAC, for decoding of the audio data. If the audio data format contained in a CAF file requires magic cookie data, the file must have this chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_28" title="Magic Cookie Chunk Header"></a><h4>Magic Cookie Chunk Header</h4><p><span class="content_text">Table 3-14</span> shows the values for the fields in the Magic Cookie chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_78" title="Table 2-14Magic Cookie chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBEBGC" title="Table 2-14Magic Cookie chunk header fields"></a><strong>Table 2-14&nbsp;&nbsp;</strong>Magic Cookie chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘kuki’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_29" title="Magic Cookie Chunk Data Section"></a><h4>Magic Cookie Chunk Data Section</h4><p>The structure of a Magic Cookie chunk’s data section is defined by the audio data format it applies to. For example, a CAF file containing MPEG-4 AAC data should have a Magic Cookie chunk containing an elementary stream descriptor. This is the data contained in the 'esds' atom in an MPEG-4 file (and is often referred to as the ESDS) for a given AAC audio track.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGIAFAD" title="Strings Chunk"></a><h3>Strings Chunk</h3><p>The optional Strings chunk contains any number of textual strings, along with an index for accessing them. These strings serve as labels for other chunks, such as Marker or Region chunks.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_30" title="Strings Chunk Header"></a><h4>Strings Chunk Header</h4><p><span class="content_text">Table 3-15</span> shows the values for the fields in the Strings chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_79" title="Table 2-15Strings chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBAAGJ" title="Table 2-15Strings chunk header fields"></a><strong>Table 2-15&nbsp;&nbsp;</strong>Strings chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘strg’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The Strings chunk header can specify a data section size that is larger than the chunk’s current meaningful content in order to reserve room for additional data.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_31" title="Strings Chunk Data Section"></a><h4>Strings Chunk Data Section</h4><p>The <code>CAFStrings</code> structure describes the data section for the Strings chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFStrings<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mNumEntries;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFStringID mStringsIDs[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8       mStrings[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mNumEntries</code></dt><dd><p>The number of strings in the <code>mStrings</code> field. </p></dd><dt><code>mStringsIDs</code></dt><dd><p>A lookup table of string IDs for each of the strings in the <code>mStrings</code> field. You access strings by using the associated ID. It is recommended that you do not use <code>0</code> for an ID.</p></dd><dt><code>mStrings</code></dt><dd><p>An array of null-terminated UTF8-encoded text strings.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGEHAHD" title="String ID"></a><h4>String ID</h4><p>The <code>CAFStringID</code> structure describes a string ID, used for accessing a string.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFStringID {<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mStringID;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt64  mStringStartByteOffset;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFStringID CAFStringID;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mStringID</code></dt><dd><p>The identifier for the string, allowing applications and other chunks in the file to refer to the string. </p></dd><dt><code>mStringStartByteOffset</code></dt><dd><p>The offset, in bytes, for the start of the string, counting from the first byte after the last <code>mStringsIDs</code> entry. The first string has an offset value of <code>0</code>.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_32" title="Marker and Region Chunks"></a><h2>Marker and Region Chunks</h2><p>You can add individual markers, marked regions, or both to a CAF file. Marker and Region chunks share some data types, described in the following section. In addition, both can use Strings chunks (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAFAD">“Strings Chunk”</a></span>) to contain text annotations. </p><p>Markers and region markers can include timestamps that you can use to correlate the marked point in the audio stream with an external event. For example, you can use a timestamp to correlate a sound in an audio file with a video frame in a movie file. SMPTE (Society of Motion Picture and Television Engineers, pronounced “simptee”) time stamps and timecode types are used for this purpose. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBCBBC">“SMPTE Timecode Types”</a></span> and <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGICJJI">“SMPTE Timestamps”</a></span> for more information on SMPTE time.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGIGCIH" title="Marker Data Types"></a><h3>Marker Data Types</h3><p>The data types in this section are used by both the Marker chunk and the Region chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHCGEB" title="Marker Descriptions"></a><h4>Marker Descriptions</h4><p>The <code>CAFMarker</code> structure defines a marker.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFMarker<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32          mType;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float64         mFramePosition;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32          mMarkerID;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAF_SMPTE_Time  mSMPTETime;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32          mChannel;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFMarker CAFMarker;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mType</code></dt><dd><p>The type of the marker, designated by one of the codes in the Marker Types enumeration. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGDBGG">“Marker Types.”</a></span></p></dd><dt><code>mFramePosition</code></dt><dd><p>The location of the marker in the file. The location is specified as a frame number, counting from 0 for the first frame in the file. </p></dd><dt><code>mMarkerID</code></dt><dd><p>The location in the string table (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAFAD">“Strings Chunk”</a></span>) of a unique ID for the marker description, set by the application. You then use this ID to refer to the marker. It is recommended that you do not use <code>0</code> for an ID.</p></dd><dt><code>mSMPTETime</code></dt><dd><p>A SMPTE timestamp for the marker. You can use this field to relate a marker in the CAF file to a time in another file, such as a video file. Mark the SMPTE timestamp as invalid if you do not need this feature. To indicate that a marker’s SMPTE timestamp is not valid, set all of its bytes to <code>0xFF</code>. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGICJJI">“SMPTE Timestamps.”</a></span> </p></dd><dt><code>mChannel</code></dt><dd><p>The channel, by number, to which the marker description applies. This number corresponds to the sequence in which the data for the channels is ordered in the frame. The first channel is numbered 1. Set this field to 0 to indicate that the marker applies to all channels.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGGDBGG" title="Marker Types"></a><h4>Marker Types</h4><p>The following enumeration lists the supported marker types for CAF files. Use these codes in the <code>mType</code> field of each marker description (see the <code>CAFMarker</code> structure, above in this section). </p><div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_Generic              = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_ProgramStart         = 'pbeg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_ProgramEnd           = 'pend',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_TrackStart           = 'tbeg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_TrackEnd             = 'tend',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_Index                = 'indx',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_RegionStart          = 'rbeg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_RegionEnd            = 'rend',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_RegionSyncPoint      = 'rsyc',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_SelectionStart       = 'sbeg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_SelectionEnd         = 'send',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_EditSourceBegin      = 'cbeg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_EditSourceEnd        = 'cend',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_EditDestinationBegin = 'dbeg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_EditDestinationEnd   = 'dend',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_SustainLoopStart     = 'slbg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_SustainLoopEnd       = 'slen',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_ReleaseLoopStart     = 'rlbg',<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFMarkerType_ReleaseLoopEnd       = 'rlen'<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>kCAFMarkerType_Generic</code></dt><dd><p>Generic marker.</p></dd><dt><code>kCAFMarkerType_ProgramStart</code></dt><dd><p>Start-of-program marker; used to delineate the start of a CD or other playlist. </p></dd><dt><code>kCAFMarkerType_ProgramEnd</code></dt><dd><p>End-of-program marker; used to delineate the end of a CD.</p></dd><dt><code>kCAFMarkerType_TrackStart</code></dt><dd><p>Start-of-track marker; used to delineate the start of a track for a CD. </p></dd><dt><code>kCAFMarkerType_TrackEnd</code></dt><dd><p>End-of-track marker; used to delineate the end of a track for a CD.</p></dd><dt><code>kCAFMarkerType_Index</code></dt><dd><p>Index marker for a Red Book compliant index. </p></dd><dt><code>kCAFMarkerType_RegionStart</code></dt><dd><p>Start-of-region marker. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBCCE">“Region Chunk.”</a></span></p></dd><dt><code>kCAFMarkerType_RegionEnd</code></dt><dd><p>End-of-region marker. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBCCE">“Region Chunk.”</a></span></p></dd><dt><code>kCAFMarkerType_RegionSyncPoint</code></dt><dd><p>Region synchronization point marker; used to synchronize a point in (or external to) a region with an event, such as beat in the music.</p></dd><dt><code>kCAFMarkerType_SelectionStart</code></dt><dd><p>Start-of-selection marker, for user selection of a portion of a displayed waveform.</p></dd><dt><code>kCAFMarkerType_SelectionEnd</code></dt><dd><p>End-of-selection marker, for user selection of a portion of a displayed waveform.</p></dd><dt><code>kCAFMarkerType_EditSourceBegin</code></dt><dd><p>Beginning-of-source marker for a copy or move operation.</p></dd><dt><code>kCAFMarkerType_EditSourceEnd</code></dt><dd><p>End-of-source marker for a copy or move operation.</p></dd><dt><code>kCAFMarkerType_EditDestinationBegin</code></dt><dd><p>Beginning-of-destination marker for a copy or move operation.</p></dd><dt><code>kCAFMarkerType_EditDestinationEnd</code></dt><dd><p>End-of-destination marker for a copy or move operation.</p></dd><dt><code>kCAFMarkerType_SustainLoopStart</code></dt><dd><p>Start-of-sustain marker for a sustain loop.</p></dd><dt><code>kCAFMarkerType_SustainLoopEnd</code></dt><dd><p>End-of-sustain marker for a sustain loop.</p></dd><dt><code>kCAFMarkerType_ReleaseLoopStart</code></dt><dd><p>Start-of-release marker for a sustain loop.</p></dd><dt><code>kCAFMarkerType_ReleaseLoopEnd</code></dt><dd><p>End-of-release marker for a sustain loop.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBCBBC" title="SMPTE Timecode Types"></a><h4>SMPTE Timecode Types</h4><p>The following enumeration lists the supported SMPTE timecode types for CAF files. Timecode types are used by the Marker and Region chunks to synchronize the data in a CAF file with the data in a video file (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGDFBI">“Marker Chunk Data Section”</a></span> and <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGCGHFI">“Region Chunk Data Section”</a></span>).</p><div class="codesample"><table><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeTypeNone     = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType24       = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType25       = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType30Drop   = 3,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType30       = 4,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType2997     = 5,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType2997Drop = 6,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType60       = 7,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAF_SMPTE_TimeType5994     = 8<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>kCAF_SMPTE_TimeTypeNone</code></dt><dd><p>No timecode type is assigned. Use this value if you are not specifying a SMPTE time in the marker.</p></dd><dt><code>kCAF_SMPTE_TimeType24</code></dt><dd><p>24 video frames per second—standard for 16mm and 35mm film.</p></dd><dt><code>kCAF_SMPTE_TimeType25</code></dt><dd><p>25 video frames per second—standard for PAL and SECAM video.</p></dd><dt><code>kCAF_SMPTE_TimeType30Drop</code></dt><dd><p>30 video frames per second, with video-frame-number counts adjusted to ensure that the timecode matches elapsed clock time.</p></dd><dt><code>kCAF_SMPTE_TimeType30</code></dt><dd><p>30 video frames per second.</p></dd><dt><code>kCAF_SMPTE_TimeType2997</code></dt><dd><p>29.97 video frames per second—standard for NTSC video.</p></dd><dt><code>kCAF_SMPTE_TimeType2997Drop</code></dt><dd><p>29.97 video frames per second—standard for NTSC video—with video-frame-number counts adjusted to ensure that the timecode matches elapsed clock time.</p></dd><dt><code>kCAF_SMPTE_TimeType60</code></dt><dd><p>60 video frames per second.</p></dd><dt><code>kCAF_SMPTE_TimeType5994</code></dt><dd><p>59.94 video frames per second.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGICJJI" title="SMPTE Timestamps"></a><h4>SMPTE Timestamps</h4><p>Each marker may contain a SMPTE timestamp in its <code>mSMPTETime</code> field that you can use to associate a marker with an external SMPTE time (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHCGEB">“Marker Descriptions”</a></span>)—for example, to synchronize the audio data with a video file.</p><p>The <code>CAF_SMPTE_Time</code> structure describes the format for indicating timestamps in a CAF file.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAF_SMPTE_Time<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt8   mHours;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt8   mMinutes;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt8   mSeconds;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt8   mFrames;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mSubFrameSampleOffset;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAF_SMPTE_Time CAF_SMPTE_Time;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mHours</code></dt><dd><p>The number of hours for the timestamp.</p></dd><dt><code>mMinutes</code></dt><dd><p>The number of minutes for the timestamp.</p></dd><dt><code>mSeconds</code></dt><dd><p>The number of seconds for the timestamp.</p></dd><dt><code>mFrames</code></dt><dd><p>The number of video frames for the timestamp. Use the SMPTE timecode type (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBCBBC">“SMPTE Timecode Types”</a></span>) to determine the number of video frames per second.</p></dd><dt><code>mSubFrameSampleOffset</code></dt><dd><p>An audio sample offset to the HH:MM:SS:FF time stamp. You can use this field to position the marker somewhere within the time span represented by a video frame, if necessary. The <code>mSampleRate</code> field (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAECA">“Audio Description Chunk Data Section”</a></span>) specifies the number of audio frames per second for this CAF file.</p></dd></dl><p>To indicate an unused SMPTE timestamp, set every byte in the <code>CAF_SMPTE_Time</code> structure to <code>0xFF</code>. When a CAF file does not specify a SMPTE timecode type (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBCBBC">“SMPTE Timecode Types”</a></span>), all marker description timestamps must be set as invalid.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCHAJE" title="Marker Chunk"></a><h3>Marker Chunk</h3><p>You can use the optional Marker chunk to contain any number of marker descriptions, each of which marks a particular sample location in the file. </p><p>Marker descriptions may also use a timing convention known as SMPTE (Society of Motion Picture and Television Engineers) timecode. For more information on this convention, see <span class="content_text"><a href="http://www.smpte.org/" target="_blank">http://www.smpte.org/</a></span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_33" title="Marker Chunk Header"></a><h4>Marker Chunk Header</h4><p><span class="content_text">Table 3-16</span> shows the values for the fields in the Marker chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_80" title="Table 2-16Marker chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFACAH" title="Table 2-16Marker chunk header fields"></a><strong>Table 2-16&nbsp;&nbsp;</strong>Marker chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘mark’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The Marker chunk header can specify a data section size that is larger than the chunk’s current meaningful content in order to reserve room for additional data.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGGDFBI" title="Marker Chunk Data Section"></a><h4>Marker Chunk Data Section</h4><p>The Marker chunk data section has two informational fields followed by a list of marker descriptions. The <code>CAFMarkerChunk</code> structure describes the data section for this chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFMarkerChunk<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mSMPTE_TimeType;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mNumberMarkers;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFMarker   mMarkers[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mSMPTE_TimeType</code></dt><dd><p>The type of SMPTE timecode used for the markers. For the types available, see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBCBBC">“SMPTE Timecode Types.”</a></span> You should use a SMPTE timestamp only if you need to synchronize a marker in the CAF file with an external event, such as a point in a video file. To indicate that the markers in the file do not have valid SMPTE timestamps, set this field to <code>0</code>.</p><p>If this field has a nonzero value, you should interpret marker description timestamps according to the specified timecode type. Individual marker descriptions can still have invalid (<code>0xFF</code>) SMPTE timestamps.</p><p>A CAF file can contain markers with no regions (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBCCE">“Region Chunk,”</a></span> regions with no Marker chunk, or both a Marker chunk and a Region chunk. For this reason, the Marker and Region chunks both include an <code>mSMPTE_TimeType</code> field. In typical use, if both chunks are present, the value in both fields is identical.</p></dd><dt><code>mNumberMarkers</code></dt><dd><p>The total number of marker descriptions in this chunk, starting immediately after this field and continuing until the end of this chunk. This number must always be valid.</p></dd><dt><code>mMarkers</code></dt><dd><p>The marker descriptions. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHCGEB">“Marker Descriptions.”</a></span> The Marker chunk data section contains 0 or more marker descriptions. </p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHBCCE" title="Region Chunk"></a><h3>Region Chunk</h3><p>You can use the optional Region chunk to contain any number of region descriptions. Each region description includes starting and ending marker descriptions that delineate a span of sample frames in the audio data. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHCGEB">“Marker Descriptions”</a></span> for more information about markers. A region description can contain more than two markers, with the purpose of the additional markers being application defined.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_34" title="Region Chunk Header"></a><h4>Region Chunk Header</h4><p><span class="content_text">Table 3-17</span> shows the values for the fields in the Region chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_81" title="Table 2-17Region chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCFIEH" title="Table 2-17Region chunk header fields"></a><strong>Table 2-17&nbsp;&nbsp;</strong>Region chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘regn’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The Region chunk header can specify a data section size that is larger than the chunk’s current meaningful content in order to reserve room for additional data.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCGHFI" title="Region Chunk Data Section"></a><h4>Region Chunk Data Section</h4><p>The Region chunk data section has two informational fields followed by a list of region descriptions. The <code>CAFRegionChunk</code> structure describes the data section for this chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFRegionChunk<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mSMPTE_TimeType;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mNumberRegions;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFRegion   mRegions[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFRegionChunk CAFRegionChunk;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mSMPTE_TimeType</code></dt><dd><p>The type of SMPTE timecode used for the markers. For the types available, see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBCBBC">“SMPTE Timecode Types.”</a></span> You should use a SMPTE timestamp only if you need to synchronize a region in the CAF file with a region in another file, such as a video file. To indicate that the markers in the file do not have valid timestamps, set this field to <code>0</code>.</p><p>If this field has a nonzero value, you should interpret marker description timestamps according to the specified timecode type. Individual marker descriptions can still have invalid (<code>0xFF</code>) SMPTE timestamps.</p><p>A CAF file can contain regions with no Marker chunk (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGCHAJE">“Marker Chunk”</a></span>), a Marker chunk with no regions, or both a Marker chunk and a Region chunk. For this reason, both the Marker and Region chunks include an <code>mSMPTE_TimeType</code> field. In typical use, if both chunks are present, the value in both fields is identical.</p></dd><dt><code>mNumberRegions</code></dt><dd><p>The number of region descriptions in the data section.</p></dd><dt><code>mRegions</code></dt><dd><p>The region descriptions. </p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJEAAI" title="Region Description"></a><h4>Region Description</h4><p>The Region chunk data section contains 0 or more region descriptions. The <code>CAFRegion</code> structure defines a region description. Region descriptions are referred to by the Instrument chunk; see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHHAFD">“Instrument Chunk Data Section.”</a></span></p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFRegion<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mRegionID;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mFlags;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32      mNumberMarkers;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFMarker   mMarkers[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFRegion CAFRegion;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mRegionID</code></dt><dd><p>A unique ID for the region description, set by the application. You then use this ID to refer to the region. It is recommended that you do not use <code>0</code> for a region ID.</p></dd><dt><code>mFlags</code></dt><dd><p>A flag providing some information about the purpose of the region. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGFJCIC">“Region Flags”</a></span> for possible values.</p></dd><dt><code>mNumberMarkers</code></dt><dd><p>The total number of marker descriptions in this region description. This number must always be valid.</p></dd><dt><code>mMarkers</code></dt><dd><p>The marker descriptions for this region.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFJCIC" title="Region Flags"></a><h4>Region Flags</h4><p>Each region description includes a set of flags, defined by the following enumeration:</p><div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFRegionFlag_LoopEnable   = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFRegionFlag_PlayForward  = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kCAFRegionFlag_PlayBackward = 4<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>kCAFRegionFlag_LoopEnable</code></dt><dd><p>If this flag is set, the audio data delineated by this region should be played as a loop. If this flag is set, then one or both of the <code>PlayForward</code> and <code>PlayBackward</code> flags must also be set. </p></dd><dt><code>kCAFRegionFlag_PlayForward</code></dt><dd><p>If this flag is set, the loop should be played forward. If both this flag and the <code>PlayBackward</code> flag are set, then the loop should be played alternately forward and backward.</p></dd><dt><code>kCAFRegionFlag_PlayBackward</code></dt><dd><p>If this flag is set, the loop should be played backward. If both this flag and the <code>PlayForward</code> flag are set, then the loop should be played alternately forward and backward.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_35" title="Music Metadata"></a><h2>Music Metadata</h2><p>Two chunk types, the Instrument chunk and the MIDI chunk, provide information of importance to the interpretation of certain music data.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJIDHD" title="Instrument Chunk"></a><h3>Instrument Chunk</h3><p>The optional Instrument chunk can be used to describe the audio data in a CAF file in terms relevant to samplers or to other digital audio processing applications. For example, a file or a portion of a file can be described as a MIDI instrument. (For more information about MIDI and MIDI instruments, go to <span class="content_text"><a href="http://www.midi.org/" target="_blank">http://www.midi.org/</a></span>.)There can be any number of Instrument chunks in a CAF file, each specifying a portion of the file.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_36" title="Instrument Chunk Header"></a><h4>Instrument Chunk Header</h4><p><span class="content_text">Table 3-18</span> shows the values for the fields in the Instrument chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_82" title="Table 2-18Instrument chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBIHAG" title="Table 2-18Instrument chunk header fields"></a><strong>Table 2-18&nbsp;&nbsp;</strong>Instrument chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘inst’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHHAFD" title="Instrument Chunk Data Section"></a><h4>Instrument Chunk Data Section</h4><p>The Instrument chunk data section has informational fields and a list of region descriptions. The <code>CAFInstrumentChunk</code> structure describes the data section for this chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFInstrumentChunk<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 mBaseNote;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mMIDILowNote;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mMIDIHighNote;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mMIDILowVelocity;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mMIDIHighVelocity;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 mdBGain;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mStartRegionID;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mSustainRegionID;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mReleaseRegionID;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mInstrumentID;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFInstrumentChunk CAFInstrumentChunk;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mBaseNote</code></dt><dd><p>The MIDI note number, and fractional pitch, for the base note of the MIDI instrument. The integer portion of this field indicates the base note, in the integer range <code>0</code> to <code>127</code>, where a value of <code>60</code> represents middle C and each integer is a step on a standard piano keyboard (for example, 61 is C# above middle C). The fractional part of the field specifies the fractional pitch; for example, 60.5 is a pitch halfway between notes 60 and 61.</p></dd><dt><code>mMIDILowNote</code></dt><dd><p>The lowest note for the region, in the integer range <code>0</code> to <code>127</code>, where a value of <code>60</code> represents middle C (following the MIDI convention). This value represents the suggested lowest note on a keyboard for playback of this instrument definition. The sound data should be played if the instrument is requested to play a note between <code>mMIDILowNote</code> and <code>mMIDIHighNote</code>, inclusive. The <code>mBaseNote</code> value must be within this range.</p></dd><dt><code>mMIDIHighNote</code></dt><dd><p>The highest note for the region when used as a MIDI instrument, in the integer range <code>0</code> to <code>127</code>, where a value of <code>60</code> represents middle C. See the discussions of the <code>mBaseNote</code> and <code>mMIDILowNote</code> fields for more information.</p></dd><dt><code>mMIDILowVelocity</code></dt><dd><p>The lowest MIDI velocity for playing the region , in the integer range <code>0</code> to <code>127</code>. </p></dd><dt><code>mMIDIHighVelocity</code></dt><dd><p>The highest MIDI velocity for playing the region, in the integer range <code>0</code> to <code>127</code>.</p></dd><dt><code>mdBGain</code></dt><dd><p>The gain, in decibels, for playing the region. A value of <code>0</code> represents unity gain. Use negative numbers to indicate a decrease in gain. </p></dd><dt><code>mStartRegionID</code></dt><dd><p>The ID of the region (see<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJEAAI">“Region Description”</a></span>) that defines the portion of the file to use as the “start” stage for a MIDI instrument. A lack of a valid region ID in this field indicates that there is no start stage. It is recommended that you do not assign an ID of <code>0</code> to any region description, so that you can use <code>0</code> in this and the following fields to indicate the lack of a region ID.</p></dd><dt><code>mSustainRegionID</code></dt><dd><p>The ID of the region (in the Region chunk) that defines the portion of the file to use as the “sustain” stage for a MIDI instrument. A lack of a valid region ID in this field indicates that there is no sustain stage.</p></dd><dt><code>mReleaseRegionID</code></dt><dd><p>The ID of the region (in the Region chunk) that defines the portion of the file to use as the “release” stage for a MIDI instrument. A lack of a valid region ID in this field indicates that there is no release stage.</p></dd><dt><code>mInstrumentID</code></dt><dd><p>The ID of the string (in the Strings chunk, <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIAFAD">“Strings Chunk”</a></span>) that specifies the name of the instrument. A lack of a valid string ID in this field means that no name is specified. It is recommended that you do not assign an ID of <code>0</code> to any string description, so that you can use <code>0</code> in this field to indicate the lack of a string ID.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJJDBF" title="MIDI Chunk"></a><h3>MIDI Chunk</h3><p>You can use the optional MIDI chunk to contain MIDI data using the standard MIDI file format. It can be used to store metadata about the audio in the file’s Data chunk, or even a MIDI representation of that audio. For information on the MIDI standard, see <span class="content_text"><a href="http://www.midi.org/" target="_blank">http://www.midi.org</a></span>.</p><p>You should consider information in this chunk to supersede conflicting information in the Information chunk (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHBBFI">“Information Chunk”</a></span>). For example, both the Information chunk and the MIDI chunk may specify key signature and tempo. In that case, the MIDI chunk values should override the values in the Information chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_37" title="MIDI Chunk Header"></a><h4>MIDI Chunk Header</h4><p><span class="content_text">Table 3-19</span> shows the values for the fields in the MIDI chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_83" title="Table 2-19MIDI chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFGJBI" title="Table 2-19MIDI chunk header fields"></a><strong>Table 2-19&nbsp;&nbsp;</strong>MIDI chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘midi’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The MIDI chunk header must specify the true size of the valid data in the data section.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_38" title="MIDI Chunk Data Section"></a><h4>MIDI Chunk Data Section</h4><p>The data section of a MIDI Chunk can be used to hold anything that can be described by a standard MIDI file, such as:</p><ul class="spaceabove"><li class="li"><p>Tempo information</p></li><li class="li"><p>Key signature</p></li><li class="li"><p>Time signature</p></li><li class="li"><p>MIDI representation of the audio data; for example, MIDI note numbers</p></li></ul><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_39" title="Audio Editor Support"></a><h2>Audio Editor Support</h2><p>You can use the Overview chunk to hold sample descriptions of the audio data for displaying the data for the user, and the Peak chunk to hold information about peak amplitudes.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBIJEH" title="Overview Chunk"></a><h3>Overview Chunk</h3><p>You can use the optional Overview chunk to hold sample descriptions that you can use to draw a graphical view of the audio data in a CAF file. A CAF file can include multiple Overview chunks to represent the audio at multiple graphical resolutions.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_40" title="Overview Chunk Header"></a><h4>Overview Chunk Header</h4><p><span class="content_text">Table 3-20</span> shows the values for the fields in the Overview chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_84" title="Table 2-20Overview chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDGIDG" title="Table 2-20Overview chunk header fields"></a><strong>Table 2-20&nbsp;&nbsp;</strong>Overview chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘ovvw’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The Overview chunk header must specify the true size of the valid data in the data section.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_41" title="Overview Chunk Data Section"></a><h4>Overview Chunk Data Section</h4><p>The Overview chunk data section has two informational fields followed by a list of sample descriptions. The <code>CAFOverview</code> structure describes the data section for this chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFOverview<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32              mEditCount;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32              mNumFramesPerOVWSample;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFOverviewSample   mData[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFOverview CAFOverview;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mEditCount</code></dt><dd><p>The modification count of the Overview Chunk data section. When you create an Overview chunk, you should set the <code>mEditCount</code> field to the value of the <code>mEditCount</code> field of the CAF file’s Audio Data chunk. You can then check whether an overview is still valid by comparing the edit counts. If they don’t match, you should regenerate the overview.</p></dd><dt><code>mNumFramesPerOVWSample</code></dt><dd><p>The number of frames of audio data that are represented by a single overview sample.</p></dd><dt><code>mData</code></dt><dd><p>An array of overview samples. For the <code>mNumFramesPerOVWSample</code> frames of audio in the Audio Data chunk, you must store one sample per channel in this field. The sequence of channels should be the same as in the Audio Data chunk. </p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_42" title="Overview Sample"></a><h4>Overview Sample</h4><p>The Overview chunk data section contains overview samples, described by the <code>CAFOverviewSample</code> structure.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFOverviewSample<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt16  mMinValue;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt16  mMaxValue;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mMinValue</code></dt><dd><p>The minimum value for the sample, listed as a big-endian, 16-bit signed integer.</p></dd><dt><code>mMaxValue</code></dt><dd><p>The maximum value for the sample, listed as a big-endian, 16-bit signed integer.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDICDC" title="Peak Chunk"></a><h3>Peak Chunk</h3><p>You can use the optional Peak chunk to describe the peak amplitude present in each channel of a CAF file and to indicate in which frame the peak occurs for each channel.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_43" title="Peak Chunk Header"></a><h4>Peak Chunk Header</h4><p><span class="content_text">Table 3-21</span> shows the values for the fields in the Peak chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_85" title="Table 2-21Peak chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGJIAJF" title="Table 2-21Peak chunk header fields"></a><strong>Table 2-21&nbsp;&nbsp;</strong>Peak chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘peak’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The Peak chunk uses a Peak structure to describe each peak (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGEHBCJ">“Peak Structure”</a></span>). The size of a Peak chunk’s data section, to be placed in the <code>mChunkSize</code> field of the header, depends on the number of channels in the file as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>mChunkSize = sizeof(CAFPositionPeak) * numChannelsInFile + sizeof(UInt32);<span></span></pre></td></tr></table></div><p>The <code>sizeof(UInt32)</code> argument represents the data section’s <code>mEditCount</code> field. The number of channels in the file, represented by the <code>numChannelsInFile</code> argument, is specified in the <code>mChannelsPerFrame</code> field of the Audio Description chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_44" title="Peak Chunk Data Section"></a><h4>Peak Chunk Data Section</h4><p>The Peak chunk data section contains a field for edit count, followed by a list of Peak structures. The <code>CAFPeakChunk</code> structure describes the data section for the Peak chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFPeakChunk<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32          mEditCount;<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFPositionPeak mPeaks[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFPeakChunk CAFPeakChunk;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mEditCount</code></dt><dd><p>The modification status of the Peak Chunk data section. When you create a Peak chunk, set the <code>mEditCount</code> field to the value of the <code>mEditCount</code> field of the CAF file’s Audio Data chunk. You can then check whether the peak data is still valid by comparing the edit counts. If they don’t match, the peak information must be regenerated.</p></dd><dt><code>mPeaks</code></dt><dd><p>An array of Peak structures, one for each channel of audio data contained in the file. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGEHBCJ">“Peak Structure.”</a></span></p><p>The number of channels in the file is specified in the <code>mChannelsPerFrame</code> field of the Audio Description chunk (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGGEDGI">“Audio Description Chunk”</a></span>).</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGEHBCJ" title="Peak Structure"></a><h4>Peak Structure</h4><p>The Peak chunk data section contains one Peak structure for each channel, defined as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFPositionPeak<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 mValue;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt64  mFrameNumber;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mValue</code></dt><dd><p>The signed maximum absolute amplitude in a channel, normalized to a floating-point value in the interval [{–1.0, +1.0}]. </p></dd><dt><code>mFrameNumber</code></dt><dd><p>The frame number where the peak occurs. The first frame in a CAF file is <code>0</code>.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_45" title="Annotations"></a><h2>Annotations</h2><p>You can add text strings to the CAF file to provide information about the audio data (in the Information chunk) and to indicate what editing has been done on the file (in the Edit Comments chunk).</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFGEAD" title="Edit Comments Chunk"></a><h3>Edit Comments Chunk</h3><p>You can use the optional Edit Comments chunk to carry time-stamped, human-readable comments that coincide with edits to the audio data in a CAF file.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_46" title="Edit Comments Chunk Header"></a><h4>Edit Comments Chunk Header</h4><p><span class="content_text">Table 3-22</span> shows the values for the fields in the Edit Comments chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_86" title="Table 2-22Edit Comments chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDHCDB" title="Table 2-22Edit Comments chunk header fields"></a><strong>Table 2-22&nbsp;&nbsp;</strong>Edit Comments chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘edct’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The Edit Comments chunk header can specify a data section size that is larger than the chunk’s current meaningful content in order to reserve room for additional data.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_47" title="Edit Comments Chunk Data Section"></a><h4>Edit Comments Chunk Data Section</h4><p>The data section for this chunk contains a field describing the number of entries, followed by a list of edit comments. The <code>CAFCommentStringsChunk</code> structure describes the data section for the Edit Comments chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFCommentStringsChunk<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mNumEntries;<span></span></pre></td></tr><tr><td scope="row"><pre>    mStrings[kVariableLengthArray];     // variable length<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mNumEntries</code></dt><dd><p>The number of edit comments in the data section.</p></dd><dt><code>mStrings</code></dt><dd><p>A list of edit comments. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGHJBJD">“Edit Comment.”</a></span></p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHJBJD" title="Edit Comment"></a><h4>Edit Comment</h4><p>The <code>editComment</code> structure describes an edit comment.</p><div class="codesample"><table><tr><td scope="row"><pre>struct editCommment {<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mKey[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mValue[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mKey</code></dt><dd><p>A null-terminated, time-of-day string that conforms to ISO-8601. All times are based on UTC (Coordinated Universal Time). See <span class="content_text"><a href="../CAF_timeOfDay/CAF_timeOfDay.html#//apple_ref/doc/uid/TP40001862-CH211-TPXREF101">“Time Of Day Data Format.”</a></span></p></dd><dt><code>mValue</code></dt><dd><p>A null-terminated UTF8 string. </p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHBBFI" title="Information Chunk"></a><h3>Information Chunk</h3><p>You can use the optional Information chunk to contain any number of human-readable text strings. Each string is accessed through a standard or application-defined key.</p><p>You should consider information in this chunk to be secondary when the same information appears in other chunks. For example, both the Information chunk and the MIDI chunk (<span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGJJDBF">“MIDI Chunk”</a></span>) may specify key signature and tempo. In that case, the MIDI chunk values overrides the values in the Information chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_48" title="Information Chunk Header"></a><h4>Information Chunk Header</h4><p><span class="content_text">Table 3-23</span> shows the values for the fields in the Information chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_87" title="Table 2-23Information chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFCGCF" title="Table 2-23Information chunk header fields"></a><strong>Table 2-23&nbsp;&nbsp;</strong>Information chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘info’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>The Information chunk header can specify a data section size that is larger than the chunk’s current meaningful content in order to reserve room for additional data.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_49" title="Information Chunk Data Section"></a><h4>Information Chunk Data Section</h4><p>The <code>CAFStringsChunk</code> structure describes the data section for the Information chunk.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFStringsChunk<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt32  mNumEntries;<span></span></pre></td></tr><tr><td scope="row"><pre>    mStrings[kVariableLengthArray];             // variable length<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mNumEntries</code></dt><dd><p>The number of information strings in the chunk. Must always be valid.</p></dd><dt><code>mStrings</code></dt><dd><p>A variable-length keyed array of information entries. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGIIAGC">“Information Entries.”</a></span></p></dd></dl><p>CAF includes some conventions for the Information chunk’s key-value pairs.</p><ul class="spaceabove"><li class="li"><p>Apple reserves keys that are all lowercase (see <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBAEAD">“Information Entry Keys”</a></span>). Application-defined keys should include at least one uppercase character.</p></li><li class="li"><p>For any key that ends with <code>' date'</code> (that is, the space character followed by the word <code>'date'</code>—for example, <code>'recorded date'</code>), the value must be a time-of-day string. See <span class="content_text"><a href="../CAF_timeOfDay/CAF_timeOfDay.html#//apple_ref/doc/uid/TP40001862-CH211-TPXREF101">“Time Of Day Data Format.”</a></span> </p></li><li class="li"><p>Using a <code>'.'</code> (period) character as the first character of a key means that the key-value pair is not to be displayed. This allows you to store private information that should be preserved by other applications but not displayed to a user.</p></li></ul><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGIIAGC" title="Information Entries"></a><h4>Information Entries</h4><p>The <code>CAFInformation</code> structure describes an information entry.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFInformation<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mKey[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8   mValue[kVariableLengthArray];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mKey</code></dt><dd><p>A null-terminated UTF8 string. See <span class="content_text"><a href="CAF_spec.html#//apple_ref/doc/uid/TP40001862-CH210-BCGBAEAD">“Information Entry Keys.”</a></span></p></dd><dt><code>mValue</code></dt><dd><p>A null-terminated UTF8 string. </p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGBAEAD" title="Information Entry Keys"></a><h4>Information Entry Keys</h4><p>Apple reserves keys that are all lowercase. Application-defined keys should contain at least one uppercase character. Each key can be used only once. You can specify multiple values for a single key by separating the values with commas. The following are the standard keys for the Information chunk: </p><dl class="termdef">	<dt><code>tempo</code></dt><dd><p>The base tempo of the audio data in beats per minute.</p></dd><dt><code>key signature</code></dt><dd><p>The key signature for the audio in the file. In the <code>mValue</code> field, the note is captialized with values from <code>A</code> to <code>G</code>. Lowercase <code>m</code> indicates a minor key. Lowercase <code>b</code> indicates a flat key. The <code>#</code> symbol indicates a sharp key.</p><p>Examples: <code>‘C’</code>, <code>‘Cm’</code>, <code>‘C#’</code>, <code>‘Cb’</code>. </p></dd><dt><code>time signature</code></dt><dd><p>The time signature for the audio in the file.</p><p>Examples: <code>‘4/4’</code>, <code>‘6/8’</code>. </p></dd><dt><code>artist</code></dt><dd><p>The name of the performance artist for the audio in the file.</p><p>Example: <code>‘Able Baker,Charlie Delta’</code></p></dd><dt><code>album</code></dt><dd><p>The name of the album that the audio in the file is a part of.</p></dd><dt><code>track number</code></dt><dd><p>The track number, within the album, for the audio in the file.</p></dd><dt><code>year</code></dt><dd><p>The year of publication for the audio in the file.</p></dd><dt><code>composer</code></dt><dd><p>The name of the composer for the audio in the file.</p></dd><dt><code>lyricist</code></dt><dd><p>The name of the lyricist for the audio in the file.</p></dd><dt><code>genre</code></dt><dd><p>The name of the genre for the audio in the file.</p></dd><dt><code>title</code></dt><dd><p>The title or name of the audio in the file. Can be different from the filename.</p></dd><dt><code>recorded date</code></dt><dd><p>A timestamp for the recording in the file. See <span class="content_text"><a href="../CAF_timeOfDay/CAF_timeOfDay.html#//apple_ref/doc/uid/TP40001862-CH211-TPXREF101">“Time Of Day Data Format.”</a></span></p></dd><dt><code>comments</code></dt><dd><p>Freeform comments about the audio in the file.</p></dd><dt><code>copyright</code></dt><dd><p>Copyright information for the audio in the file. </p><p>Example: <code>'Copyright © 2004 The CoolBandName. All Rights Reserved'</code></p></dd><dt><code>source encoder</code></dt><dd><p>Description of the encoding algorithm, if any, used for the audio in the file.</p><p>Example: <code>'My AAC Encoder v4.2'</code></p></dd><dt><code>encoding application</code></dt><dd><p>Description of the encoding application, if any, used for the audio in the file.</p><p>Example: <code>'My App v1.0'</code></p></dd><dt><code>nominal bit rate</code></dt><dd><p>Description of the bit rate used for the audio in the file.</p><p>Example: <code>'128 kbits'</code></p></dd><dt><code>channel layout</code></dt><dd><p>Description of the channel layout for the file.</p><p>Examples: <code>'stereo'</code>, <code>'5.1 Surround'</code>, <code>'10.2 Surround'</code></p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_50" title="Identifier"></a><h2>Identifier</h2><p>CAF files can include a Unique Material Identifier chunk to uniquely identify the audio content.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGCECBB" title="Unique Material Identifier Chunk"></a><h3>Unique Material Identifier Chunk</h3><p>You can use the optional Unique Material Identifier chunk to uniquely identify the audio contained in a CAF file. There can be at most one UMID chunk within a file.</p><p>The data in this chunk conforms to the standard SMPTE 330M-2004 specification for unique material identifiers. See <span class="content_text"><a href="http://www.smpte.org/smpte_store/standards/" target="_blank">http://www.smpte.org/smpte_store/standards/</a></span>.</p><p>The European Broadcasing Union (EBU) provides guidelines for use of UMIDs in broadcast production. CAF files should adhere to these guidelines. See <span class="content_text"><a href="http://www.ebu.ch/CMSimages/en/tec_text_d92-2001_tcm6-4721.pdf" target="_blank">http://www.ebu.ch/CMSimages/en/tec_text_d92-2001_tcm6-4721.pdf</a></span>.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_51" title="Unique Material Identifier Chunk Header"></a><h4>Unique Material Identifier Chunk Header</h4><p><span class="content_text">Table 3-24</span> shows the values for the fields in the Unique Material Identifier chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_88" title="Table 2-24Unique Material Identifier chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGFGIED" title="Table 2-24Unique Material Identifier chunk header fields"></a><strong>Table 2-24&nbsp;&nbsp;</strong>Unique Material Identifier chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘umid’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>64 (<code>sizeof(CAFUMIDChunk)</code>); Must always be valid</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_52" title="Unique Material Identifier Chunk Data Section"></a><h4>Unique Material Identifier Chunk Data Section</h4><p>The <code>CAFUMIDChunk</code> structure describes the UMID chunk’s data section.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAFUMIDChunk<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8 mBytes[64];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CAFUMIDChunk CAFUMIDChunk;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt><code>mBytes</code></dt><dd><p>The UMID for the file. The first 32 bytes constitute the “Basic” UMID and include four pieces of information: instance number, flag indicating copy or original, material number, and description of device that recorded the original material.</p><p>The second 32 bytes constitute the so-called “Source Pack” section for the UMID, which includes three additional pieces of information: timestamp of recording, geographic coordinates of recording, and ownership information.</p><p>The size of a UMID chunk’s data section is exactly 64 bytes. If a CAF file has only a “Basic” UMID, the remainning 32 bytes in the data section should be set to <code>0</code>.</p><p>For more information, refer to the UMID specification, SMPTE 330M-2004, available from <span class="content_text"><a href="http://www.smpte.org/smpte_store/standards/" target="_blank">http://www.smpte.org/smpte_store/standards/</a></span>.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_53" title="Extending the CAF Specification"></a><h2>Extending the CAF Specification</h2><p>You can define your own chunk type to extend the CAF file specification. For this purpose, this specification includes the User-Defined chunk type, which you can use to provide a unique universal identifier for your custom chunk.</p><p>When parsing a CAF file, you should ignore any chunk with a UUID that you do not recognize.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHJGEC" title="User-Defined Chunk"></a><h3>User-Defined Chunk</h3><p>If you define your own, custom chunk, you can use the User-Defined chunk type to assign a universally unique ID to the chunk. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_54" title="User-Defined Chunk Header"></a><h4>User-Defined Chunk Header</h4><p><span class="content_text">Table 3-25</span> shows the values for the fields in the User-Defined chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_89" title="Table 2-25CAF header field values for User-Defined Chunk"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGGEDFD" title="Table 2-25CAF header field values for User-Defined Chunk"></a><strong>Table 2-25&nbsp;&nbsp;</strong>CAF header field values for User-Defined Chunk</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘uuid’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>The size of the data section plus 16 bytes for the UUID. Must always be valid</p></td></tr></table></div><p>In addition to the standard fields, the header of a custom chunk includes a universal identifier, as shown in the <code>CAF_UUID_ChunkHeader</code> structure.</p><div class="codesample"><table><tr><td scope="row"><pre>struct CAF_UUID_ChunkHeader<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    CAFChunkHeader  mHeader;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt8           mUUID[16];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>CAF_UUID_ChunkHeader CAF_UUID_ChunkHeader;<span></span></pre></td></tr></table></div><dl class="termdef">	<dt>mHeader</dt><dd><p>The standard CAF header with the values in <span class="content_text">Table 3-25</span>.</p></dd><dt>mUUID</dt><dd><p>A unique univeral identifier (UUID), based on the ISO 14496-1 specification for UUID identifiers, available from <span class="content_text"><a href="http://www.iso.ch/iso/en/CatalogueListPage.CatalogueList" target="_blank">http://www.iso.ch/iso/en/CatalogueListPage.CatalogueList</a></span>.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_55" title="User-Defined Chunk Data Section"></a><h4>User-Defined Chunk Data Section</h4><p>Any data following the chunk header is defined by the custom chunk type. If the UUID chunk has dependencies on the edit count of the Audio Data chunk, then the edit count should be stored after the <code>mUUID</code> field.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_56" title="Extra Space"></a><h2>Extra Space</h2><p>In many chunk types, you can specify a larger chunk size than is currently needed for data in order to reserve additional space within the chunk. To reserve extra space in the CAF file as a whole, use a Free chunk.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGDCHAA" title="Free Chunk"></a><h3>Free Chunk</h3><p>The optional Free chunk is for reserving space, or providing padding, in a CAF file. The contents of the Free chunk data section have no significance and should be ignored.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_57" title="Free Chunk Header"></a><h4>Free Chunk Header</h4><p><span class="content_text">Table 3-26</span> shows the values for the fields in the Free chunk header. </p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_90" title="Table 2-26Free chunk header fields"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40001862-CH210-BCGHHFAC" title="Table 2-26Free chunk header fields"></a><strong>Table 2-26&nbsp;&nbsp;</strong>Free chunk header fields</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>mChunkType</code></p></td><td ><p><code>‘free’</code></p></td></tr><tr><td  scope="row"><p><code>mChunkSize</code></p></td><td ><p>Must always be valid</p></td></tr></table></div><p>Set <code>mChunkSize</code> to the size of the data section you are using for reserved space.</p><a name="//apple_ref/doc/uid/TP40001862-CH210-DontLinkElementID_58" title="Free Chunk Data Section"></a><h4>Free Chunk Data Section</h4><p>You should ignore the contents of the Free chunk data section.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../CAF_overview/CAF_overview.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../CAF_timeOfDay/CAF_timeOfDay.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-03-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Reference/CAFSpec/CAF_spec/CAF_spec.html%3Fid%3DTP40001862-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Reference/CAFSpec/CAF_spec/CAF_spec.html%3Fid%3DTP40001862-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Reference/CAFSpec/CAF_spec/CAF_spec.html%3Fid%3DTP40001862-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
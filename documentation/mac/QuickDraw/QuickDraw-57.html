<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of Basic QuickDraw (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING57></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-56.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-58.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-18.html"><B>Chapter 2 - Basic QuickDraw</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING57-0></A>
<H1>Summary of Basic QuickDraw</H1>
<A NAME=HEADING57-1></A>
<H2>Pascal Summary</H2>
<A NAME=HEADING57-2></A>
<H3>Data Types</H3>
<PRE>
TYPE  Point = 
      RECORD CASE Integer OF
         0: (v:\xDD\xDD       Integer;    {vertical coordinate}
             h:\xDD\xDD       Integer);   {horizontal coordinate}
         1: (vh:\xDD       ARRAY[VHSelect] OF Integer);
      END;
Rect = 
      RECORD CASE Integer OF        {cases: 4 boundaries or 2 corners}
         0: (top:       Integer;    {upper boundary of rectangle}
             left:      Integer;    {left boundary of rectangle}
             bottom:    Integer;    {lower boundary of rectangle}
             right:     Integer);   {right boundary of rectangle}
         1: (topLeft:   Point;      {upper-left corner of rectangle}
             botRight:  Point);     {lower-right corner of rectangle}
      END;
RgnHandle = ^RgnPtr;
      RgnPtr =    ^Region;
      Region = 
      RECORD
         rgnSize: Integer; {size in bytes}
         rgnBBox: Rect;    {enclosing rectangle}
         {more data if not rectangular}
      END;
BitMap =
      RECORD
         baseAddr:   Ptr;     {pointer to bit image}
         rowBytes:   Integer; {row width}
         bounds:     Rect;    {boundary rectangle}
      END;
GrafPtr =      ^GrafPort;
      WindowPtr =    GrafPtr;
GrafPort =  {basic graphics port}
      RECORD
         device:     Integer;    {device-specific information}
         portBits:   BitMap;     {bitmap}
         portRect:   Rect;       {port rectangle}
         visRgn:     RgnHandle;  {visible region}
         clipRgn:    RgnHandle;  {clipping region}
         bkPat:      Pattern;    {background pattern}
         fillPat:    Pattern;    {fill pattern}
         pnLoc:      Point;      {pen location}
         pnSize:     Point;      {pen size}
         pnMode:     Integer;    {pattern mode}
         pnPat:      Pattern;    {pen pattern}
         pnVis:      Integer;    {pen visibility}
         txFont:     Integer;    {font number for text}
         txFace:     Style;      {text's font style}
         txMode:     Integer;    {source mode for text}
         txSize:     Integer;    {font size for text}
         spExtra:    Fixed;      {extra space}
         fgColor:    LongInt;    {foreground color}
         bkColor:    LongInt;    {background color}
         colrBit:    Integer;    {color bit}
         patStretch: Integer;    {used internally}
         picSave:    Handle;     {picture being saved, used internally}
         rgnSave:    Handle;     {region being saved, used internally}
         polySave:   Handle;     {polygon being saved, used internally}
         grafProcs:  QDProcsPtr; {low-level drawing routines}
      END;
</PRE>
<A NAME=HEADING57-9></A>
<H3>Routines</H3>
<A NAME=HEADING57-10></A>
<H4>Initializing QuickDraw</H4>
<PRE>
PROCEDURE InitGraf       (globalPtr: Ptr);
</PRE>
<A NAME=HEADING57-12></A>
<H4>Opening and Closing Basic Graphics Ports</H4>
<PRE>
PROCEDURE OpenPort       (port:\xDDGrafPtr);
PROCEDURE InitPort       (port: GrafPtr); 
PROCEDURE ClosePort      (port:\xDDGrafPtr);
</PRE>
<A NAME=HEADING57-16></A>
<H4>Saving and Restoring Graphics Ports</H4>
<PRE>
PROCEDURE GetPort        (VAR port: GrafPtr);
PROCEDURE SetPort        (port: GrafPtr);
</PRE>
<A NAME=HEADING57-19></A>
<H4>Managing Bitmaps, Port Rectangles, and Clipping Regions</H4>
<PRE>
PROCEDURE ScrollRect     (r:\xDDRect; dh,dv: Integer; updateRgn: RgnHandle);
PROCEDURE SetOrigin      (h,v: Integer);
PROCEDURE PortSize       (width,height:\xDDInteger);
PROCEDURE MovePortTo     (leftGlobal,topGlobal:\xDDInteger);
PROCEDURE GetClip        (rgn: RgnHandle);
PROCEDURE SetClip        (rgn: RgnHandle);
PROCEDURE ClipRect       (r: Rect);
FUNCTION BitMapToRegion  (region: RgnHandle; bMap: BitMap): OSErr;
PROCEDURE SetPortBits    (bm: BitMap);
</PRE>
<A NAME=HEADING57-29></A>
<H4>Manipulating Points in Graphics Ports</H4>
<PRE>
PROCEDURE GlobalToLocal  (VAR pt: Point);
PROCEDURE LocalToGlobal  (VAR pt: Point);
PROCEDURE AddPt          (srcPt: Point; VAR dstPt:\xDDPoint);
PROCEDURE SubPt          (srcPt:\xDDPoint; VAR dstPt:\xDDPoint);
FUNCTION DeltaPoint      (ptA: Point; ptB: Point): LongInt;
PROCEDURE SetPt          (VAR pt:\xDDPoint; h,v:\xDDInteger);
FUNCTION EqualPt         (pt1,pt2: Point): Boolean;
FUNCTION GetPixel        (h,v:\xDDInteger):\xDDBoolean;
</PRE>
<A NAME=HEADING57-38></A>
<H2>C Summary</H2>
<A NAME=HEADING57-39></A>
<H3>Data Types</H3>
<PRE>
struct Point {
      short v;    /* vertical coordinate */
      short h;    /* horizontal coordinate */
   };
struct Rect {
      short top;     /* upper boundary of rectangle */
      short left;    /* left boundary of rectangle */
      short bottom;  /* lower boundary of rectangle */
      short right;   /* right boundary of rectangle */
   };
struct Region {
      short rgnSize;          /* size in bytes */
      Rect  rgnBBox;          /* enclosing rectangle */
      /* more data if not rectangular */
   };
typedef struct Region Region;
typedef Region *RgnPtr, **RgnHandle;
struct BitMap {
      Ptr   baseAddr;         /* pointer to bit image */
      short rowBytes;         /* row width */
      Rect  bounds;           /* boundary rectangle */
   };
struct GrafPort {             /* basic graphics port */
      short       device;     /* device-specific information */
      BitMap      portBits;   /* bitmap */
      Rect        portRect;   /* port rectangle */
      RgnHandle   visRgn;     /* visible region */
      RgnHandle   clipRgn;    /* clipping region */
      Pattern     bkPat;      /* background pattern */
      Pattern     fillPat;    /* fill pattern */
      Point       pnLoc;      /* pen location */
      Point       pnSize;     /* pen size */
      short       pnMode;     /* pattern mode */
      Pattern     pnPat;      /* pen pattern */
      short       pnVis;      /* pen visibility */
      short       txFont;     /* font number for text */
      Style       txFace;     /* text's font style */
      char        filler;
      short       txMode;     /* source mode for text */
      short       txSize;     /* font size for text */
      Fixed       spExtra;    /* extra space */
      long        fgColor;    /* foreground color */
      long        bkColor;    /* background color */
      short       colrBit;    /* color bit */
      short       patStretch; /* used internally */
      Handle      picSave;    /* picture being saved, used internally */
      Handle      rgnSave;    /* region being saved, used internally */
      Handle      polySave;   /* polygon being saved, used internally */
      QDProcsPtr  grafProcs;  /* low-level drawing routines */
   };
typedef struct GrafPort GrafPort;
typedef GrafPort *GrafPtr;
typedef GrafPtr WindowPtr;
</PRE>
<A NAME=HEADING57-47></A>
<H3>Functions</H3>
<A NAME=HEADING57-48></A>
<H4>Initializing QuickDraw</H4>
<PRE>
pascal void InitGraf            (void *globalPtr);
</PRE>
<A NAME=HEADING57-50></A>
<H4>Opening and Closing Basic Graphics Ports</H4>
<PRE>
pascal void OpenPort            (GrafPtr port);
pascal void InitPort            (GrafPtr port); 
pascal void ClosePort           (GrafPtr port);
</PRE>
<A NAME=HEADING57-54></A>
<H4>Saving and Restoring Graphics Ports</H4>
<PRE>
pascal void GetPort             (GrafPtr *port);
pascal void SetPort             (GrafPtr port);
</PRE>
<A NAME=HEADING57-57></A>
<H4>Managing Bitmaps, Port Rectangles, and Clipping Regions</H4>
<PRE>
pascal void ScrollRect          (const Rect *r, short dh, short dv, 
                                 RgnHandle updateRgn);
pascal void SetOrigin           (short h, short v);
pascal void PortSize            (short width, short height);
pascal void MovePortTo          (short leftGlobal, short topGlobal);
pascal void GetClip             (RgnHandle rgn);
pascal void SetClip             (RgnHandle rgn);
pascal void ClipRect            (const Rect *r);
pascal OSErr BitMapToRegion     (RgnHandle region, const BitMap *bMap); 
pascal void SetPortBits         (const BitMap *bm);
</PRE>
<A NAME=HEADING57-67></A>
<H4>Manipulating Points in Graphics Ports</H4>
<PRE>
pascal void GlobalToLocal       (Point *pt);
pascal void LocalToGlobal       (Point *pt);
pascal void AddPt               (Point src, Point *dst);
pascal void SubPt               (Point src, Point *dst);
pascal long DeltaPoint          (Point ptA, Point ptB);
pascal void SetPt               (Point *pt, short h, short v);
pascal Boolean EqualPt          (Point pt1, Point pt2);
pascal Boolean GetPixel         (short h, short v);
</PRE>
<A NAME=HEADING57-76></A>
<H2>Assembly-Language Summary</H2>
<A NAME=HEADING57-77></A>
<H3>Data Structures</H3>
<A NAME=HEADING57-78></A>
<H4>Point Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>v<TD>word<TD>vertical coordinate<TR>
<TD>2<TD>h<TD>word<TD>horizontal coordinate</TABLE>
</H4>
<A NAME=HEADING57-79></A>
<H4>Rectangle Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>topLeft<TD>long<TD>upper-left corner of rectangle<TR>
<TD>4<TD>botRight<TD>long<TD>lower-right corner of rectangle <TR>
<TD>0<TD>top<TD>word<TD>upper boundary of rectangle<TR>
<TD>2<TD>left<TD>word<TD>left boundary of rectangle<TR>
<TD>4<TD>bottom<TD>word<TD>lower boundary of rectangle<TR>
<TD>6<TD>right<TD>word<TD>right boundary of rectangle</TABLE>
</H4>
<A NAME=HEADING57-80></A>
<H4>Region Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>rgnSize<TD>word<TD>size in bytes<TR>
<TD>2<TD>rgnBBox<TD>8 bytes<TD>enclosing rectangle<TR>
<TD>10<TD>rgnData<TD>array<TD>region data</TABLE>
</H4>
<A NAME=HEADING57-81></A>
<H4>Bitmap Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>baseAddr<TD>long<TD>pointer to bit image<TR>
<TD>4<TD>rowBytes<TD>word<TD>row width<TR>
<TD>6<TD>bounds<TD>8 bytes<TD>boundary rectangle</TABLE>
</H4>
<A NAME=HEADING57-82></A>
<H4>GrafPort Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD>device<TD>word<TD>device-specific information<TR>
<TD>2<TD>portBits<TD>14 bytes<TD>bitmap<TR>
<TD>16<TD>portBounds<TD>8 bytes<TD>boundary rectangle<TR>
<TD>24<TD>portRect<TD>8 bytes<TD>port rectangle<TR>
<TD>32<TD>visRgn<TD>long<TD>visible region<TR>
<TD>36<TD>clipRgn<TD>long<TD>clipping region<TR>
<TD>40<TD>bkPat<TD>8 bytes<TD>background pattern<TR>
<TD>48<TD>fillPat<TD>8 bytes<TD>fill pattern<TR>
<TD>56<TD>pnLoc<TD>long<TD>pen location<TR>
<TD>60<TD>pnSize<TD>long<TD>pen size<TR>
<TD>64<TD>pnMode<TD>word<TD>pattern mode<TR>
<TD>66<TD>pnPat<TD>8 bytes<TD>pen pattern<TR>
<TD>74<TD>pnVis<TD>word<TD>pen visibility<TR>
<TD>76<TD>txFont<TD>word<TD>font number for text<TR>
<TD>78<TD>txFace<TD>word<TD>text's font style<TR>
<TD>80<TD>txMode<TD>word<TD>source mode for text<TR>
<TD>82<TD>txSize<TD>word<TD>font size for text<TR>
<TD>84<TD>spExtra<TD>long<TD>extra space<TR>
<TD>88<TD>fgColor<TD>long<TD>foreground color<TR>
<TD>92<TD>bkColor<TD>long<TD>background color<TR>
<TD>96<TD>colrBit<TD>word<TD>color bit<TR>
<TD>98<TD>patStretch<TD>word<TD>used internally<TR>
<TD>100<TD>picSave<TD>long<TD>picture being saved, used internally<TR>
<TD>104<TD>rgnSave<TD>long<TD>region being saved, used internally<TR>
<TD>108<TD>polySave<TD>long<TD>polygon being saved, used internally<TR>
<TD>112<TD>grafProcs<TD>long<TD>low-level drawing routines</TABLE>
</H4>
<A NAME=HEADING57-83></A>
<H3>Global Variables
<TABLE BORDER="0" CELLPADDING=3><TD>arrow<TD>The standard arrow cursor.<TR>
<TD>black<TD>An all-black pattern.<TR>
<TD>dkGray<TD>A 75% gray pattern.<TR>
<TD>gray<TD>A 50% gray pattern.<TR>
<TD>ltGray<TD>A 25% gray pattern.<TR>
<TD>randSeed<TD>Where the random sequence begins.<TR>
<TD>screenBits<TD>The main screen.<TR>
<TD>thePort<TD>The current graphics port.<TR>
<TD>white<TD>An all-white pattern.</TABLE>
</H3>
<A NAME=HEADING57-84></A>
<H2>Result Codes
<TABLE BORDER="0" CELLPADDING=3><TD>pixmapTooDeepErr<TD>-148<TD>Pixel map is deeper than 1 bit per pixel<TR>
<TD>rgnTooBigErr<TD>-500<TD>Bitmap would convert to a region greater than 64 KB</TABLE>
</H2>


</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-56.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-58.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

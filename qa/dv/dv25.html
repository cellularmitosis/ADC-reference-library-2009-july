<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A DV25: Setting Port Speed on a Modem Port</title>		<meta name="keywords" content="Mac OS 7 Modem Port port speed">	<meta name="Description" content="Technical Q&amp;A DV25: Q&amp;A answers question on how to increaseserial speeds of modems by providing some background on serialIO operation and then using this information to determinerelative speeds for the IO."><meta name="categories" content="Devices"><meta name="week-posted" content="Feb 19, 1996 - Feb 23, 1996"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001166" title="Setting Port Speed on a Modem Port"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxHardwareDrivers-date.html">Hardware & Drivers</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/HardwareDrivers/idxSerial-date.html" target="_blank">Hardware & Drivers > Serial</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A DV25</div>
<div id="pageheadsub">Setting Port Speed on a Modem Port</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600><TR> <td align="left"><hr width=500 align=center><p id=p2>Q:  I have some questions concerning setting port speed on the modem port:</p><ol><LI><p id=p4>What is the maximum baud rate available for connection to an external modem?</p></li><LI><p id=p4>If not all speeds are available on all platforms, how do I test for theavailability of various speeds on a machine?</p></li><LI><p id=p4>How do I set the port to various speeds, particularly the higher speeds(e.g., 115K).</p></li></ol><p id=p4>A:  Availability of serial speeds is one thing; success, reliability and usage isanother entirely. To understand limitations of serial IO rates requires alittle understanding of the background information first. </p><p id=p4>The 3 Types of Serial Operation:</p><p id=p4>Macintosh CPUs' async serial operations have all been based on the Zilog 8530SCC. Apple has included this chip in several combination chips, but all suchvariations have had three basic types:</p><p id=p4>A - straight SCC and programmed IO</p><p id=p4>This is the classic setup. Every SCC interrupt must be handled by the CPU andSerial Driver explicitly. All Macintosh CPUs aside from the ones listed below(and future models, of course) can be assumed to have this hardwarearchitecture.</p><p id=p4>B - SCC with Input-Output Processor (IOP) and programmed IO</p><p id=p4>The Macintosh IIfx, Quadra 900 and 950 models have a simple IOP architecturewhich offloads some of the SCC interrupt handling operations from the CPU. TheZilog SCC is combined into a custom chip and is not directly available. Theseare the machines that have the Serial Switch control panel: it allows nativeoperation of the IOP/SCC for best performance, and emulates the Zilog SCCinterface when set into Compatible mode for those few applications that accessthe SCC directly. The Serial Driver for these machines remains interrupt drivenand must respond to IOP/SCC interrupts via the CPU.</p><p id=p4>C - SCC with Direct Memory Access (DMA) controller</p><p id=p4>The Quadra 840AV, 660AV and Power Macintosh 6100/7100/7200/7500/8100/8500/9500CPUs (and their Performa derivatives) are equipped with a custom controllerwhich completely offloads the SCC interrupts from the CPU. A low level chipprotocol shuttles bytes directly out of the SCC into memory. The SerialDriver's need for CPU interrupt handling is much reduced to almost nonexistentsince the SCC is completely decoupled from the CPU in normal operations.</p><p id=p4>From these facts you can see that there are several parameters which constrainserial IO rate. The particular CPU and its speed, the SCC itself, the clockspeed which we can supply it, how fast an individual CPU can cycle theinterrupt handlers (on the CPUs that matter), how dependent a particularhardware/software implementation of the serial port and Serial Driver are uponCPU interrupt handling, how much interrupt overhead there is in a givenexecution environment with other (possibly interrupt dependent) processesrunning, and precisely what a given process' serial IO needs are all have agreat impact upon the success of using async serial IO at different speeds.</p><p id=p4>So how fast can you go?</p><p id=p4>The Serial Driver API, from the earliest days of the Macintosh, has supportedbps rates from 300bps to 57,600bps. How successful a specific computer modeland application are at using the higher end of these rates depends on all thefactors above, plus the application's own IO algorithms. </p><p id=p4>In very general terms, the classic hardware type A on older, slower machineswould normally be expected to handle typical terminal and file transfer needsup to 9600bps, assuming proper implementations, software or hardwarehandshaking, etc. Faster speeds than that start to get dicey, depending uponthe model and its configuration. LocalTalk and other network services, floppydisk access, heavy SCSI disk IO can all occlude essential interrupt handlingand cause input stream byte losses. The faster machines of this class can oftensupport commensurately higher speeds; it's rare, however, that you could expectto sustain full bi-directional async IO at rates of 38.4 or 57.6 without somedropouts, particularly if other interrupt driven processes are running. Withsome applications and very aggressive coding techniques, short bursts of 57.6speeds can be sustained, but they are rare and not to be counted on for generalpurpose use.</p><p id=p4>The type B hardware, run in native mode, can do pretty much as above but thehigher end of the spectrum is more robust. While the IOPs do offload interruptdependency to some degree, the Serial Driver itself is subject to the limits ofhow busy the CPU is and how other processes are driving the interruptenvironment. It's a win but not a big one.</p><p id=p4>The type C hardware, with DMA serial capability, moves into a completely newrange of IO speed handling with reliability. The first generation DMA SerialDriver was optimized for high speed data streams and quite successful at them;however it had several architectural problems that caused some of the morenormal services (like software handshake and duplex terminal operations) to becompromised. We've completely revised the driver for all DMA capable CPUs now(see the "System 7.5.2 Printing Update v1.1" on the various Apple FTP servers).</p>Since the primary goal of the DMA Serial Driver is complete compatibility withearlier application usage, the API has remained unchanged until now with theceiling IO rate being 57.6Kbps. The new version of the driver is far morecapable of being used to advantage at higher IO rates and we have added newControl codes to support both 115 and 230Kbps speeds. These are documented in<a href = "../../technotes/tn/tn1018.html">Technote 1018 "Understanding the DMA Serial Driver"</a>. <p id=p4>So, in sum:</p><ol><LI><p id=p4>Speeds available are 300-57600 bps on all Mac CPUs. 115200 and 230400 bpsare available on DMA serial hardware CPUs with the latest driver. Varyingdegrees of reliability, total throughput, etc. will depend upon the specificCPU and execution environment.</p></li><LI><p id=p4>To test for the availability of various speeds, check the Serial Driverversion with <code>Status</code> call <code>csCode</code> == 9.</p></li><LI><p id=p4>For high speed use of the DMA Serial Driver, and the above version info,read <a href = "../../technotes/tn/tn1018.html">Technote 1018 "Understanding the DMA Serial Driver"</a>.</p></li></ol></td></tr></table></CENTER><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[Feb 09 1996]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/dv/dv25.html%3Fid%3DDTS10001166-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/dv/dv25.html%3Fid%3DDTS10001166-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/dv/dv25.html%3Fid%3DDTS10001166-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --> <hr width=500 align=center> </BODY> </HTML>
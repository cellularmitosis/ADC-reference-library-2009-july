<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>CMProfileIdentifierListSearch(IM: ACI Ref)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING284></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACIReference-283.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-285.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACIReference-2.html"><B>Advanced Color Imaging Reference</B></A> / <BR><DD><A HREF="ACIReference-154.html"><B>Chapter 3 - ColorSync Manager Reference for Applications and Device Drivers</B></A> / <A HREF="ACIReference-218.html"><B>ColorSync Manager Functions</B></A><BR><DL><DD><A HREF="ACIReference-275.html"><B>Profile Searching</B></A> / <A HREF="ACIReference-282.html"><B>Searching for a Profile by Profile Identifier</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING284-0></A>
<H3><A NAME=MARKER-11-439></A><A NAME=MARKER-9-440></A>CMProfileIdentifierListSearch</H3>
 Searches a list of profile references and returns a list of all references that match a specified profile identifier. <P>
<PRE>
pascal CMError CMProfileIdentifierListSearch (
CMProfileIdentifierPtr ident,
CMProfileRef *profileList,
unsigned long listSize,
unsigned long *matchedCount,
CMProfileRef *matchedList);
</PRE>
<DL>
<DT>ident
<DD> A pointer to a profile identifier. The function looks for profile references in profileList that match the profile described by this identifier. For information on how a profile identifier match is determined, see <B><A HREF=ACIReference-212.html#MARKER-9-304>"Profile Identifier Structure" (page 3-64)</A></B>.
<DT>profileList
<DD> A pointer to a list of profile references to search.
<DT>listSize
<DD> The number of profile references in profileList.
<DT>matchedCount
<DD> A pointer to a count of matching profile references. If you set matchedList to <CODE>NULL</CODE>, on output matchedCount specifies the number of references in profileList that match ident. The count is typically 0 or 1, but can be higher.
<DT>
<DD> If you do <I>not</I> set matchedList to <CODE>NULL</CODE>, on input you set matchedCount to the maximum number of matching references to be returned in matchedList. On output, the value of matchedCount specifies the actual number of matching references returned, which is always equal to or less than the number passed in.
<DT>matchedList
<DD> A pointer to a list of profile references. If you set matchedList to <CODE>NULL</CODE> on input, on output nothing is returned in the parameter, and the actual number of matching references is returned in matchedCount.
<DT>
<DD> If you do <I>not</I> set matchedList to <CODE>NULL</CODE> on input, it is treated as a pointer to allocated memory. On output, the allocated memory will contain a list, in no particular order, of profile references that match ident. The number of references in the list is equal to or less than the value you pass in the matchedCount parameter. You must allocate enough memory for matchedList to store the requested number of profile references.<BR>
<DT><I>function result</I>
<DD> A result code of type CMError. See <A HREF=ACIReference-313.html#MARKER-9-479>"Result Codes" (page 3-174)</A> for a list of ColorSync-specific result codes. It is not an error condition if the CMProfileIdentifierListSearch function finds no matching profiles. The function returns an error only if a Memory Manager or other low-level system error occurs.
</DL>
<A NAME=HEADING284-11></A>
<H5>DISCUSSION</H5>
 When your application or device driver processes an image, it typically keeps a list of profile references for each unique profile or profile identifier it encounters in the image. Each time it encounters an embedded profile identifier, your application first calls the CMProfileIdentifierListSearch function to see if there is already a matching profile reference in the list. Although your list of profile references would normally contain at most one reference that matches the profile identifier, it is possible to have two or more matches. For information on how a profile identifier match is determined, see <B><A HREF=ACIReference-212.html#MARKER-9-304>"Profile Identifier Structure" (page 3-64)</A></B>.<P>
 If no matching profile is found in the list, your application calls the CMProfileIdentifierFolderSearch routine <A HREF=ACIReference-283.html#MARKER-9-437>(page 3-139)</A> to see if a matching profile can be found in the ColorSyncTM Profiles folder.<P>
 To determine the amount of memory needed for the list of profile references that match a profile identifier, your application may want to call CMProfileIdentifierListSearch twice. The first time, on input you set matchedList to <CODE>NULL</CODE> and ignore matchedCount. On output, matchedCount specifies the number of matching profiles. You then allocate enough memory to hold that many profile references (or a smaller number if you don't want all the references) and call CMProfileIdentifierListSearch again. This time you set matchedList to a pointer to the allocated memory and set matchedCount to the number of references you wish to obtain. To allocate memory, you use code such as the following:<P>
<PRE>
myProfileRefListPtr = NewPtr(sizeof(CMProfileRef) * matchedCount);
</PRE>
 If your application is interested in obtaining only the first profile that matches the specified profile, you need call CMProfileIdentifierListSearch only once. To do so, you just allocate enough memory to store one profile reference, set matchedList to point to that memory (or just set matchedList to point to a local variable), and set matchedCount to 1. On return, if matchedCount still has the value 1, then CMProfileIdentifierListSearch found a matching profile.<P>
 For sample code demonstrating how to use CMProfileIdentifierFolderSearch, see <A HREF=#nonexistent-marker>"Searching for a Profile That Matches a Profile Identifier"</A> in <I>Advanced Color Imaging on the Mac OS</I>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACIReference-283.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-285.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACIReference-3.html">&copy; Apple Computer, Inc.</A><br>11 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

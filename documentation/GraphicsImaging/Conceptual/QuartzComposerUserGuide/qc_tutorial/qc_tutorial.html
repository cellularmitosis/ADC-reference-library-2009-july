<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Quartz Composer User Guide: Tutorial: Creating a Composition</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Tutorial: Creating a Composition"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40005381-CH213" title="Tutorial: Creating a Composition"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000463" target="_top">Tools</a> &gt; <a href="../qc_intro/qc_intro.html#//apple_ref/doc/uid/TP40005381-CH201-TPXREF101">Quartz Composer User Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../qc_tips_moves/qc_tips_moves.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../qc_glossary/qc_glossary.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40005381-CH213-SW3" title="Tutorial: Creating a Composition"></a><h1>Tutorial: Creating a Composition</h1><p>Creating a composition with Quartz Composer is easy. You need only to add patches to a workspace and connect them. What’s more, you can get instant feedback on your composition as you add patches, allowing you to tune your composition as you create it.</p><p>This chapter is a tutorial that provides step-by-step instructions for creating a glow filter and applying the filter to a rotating cube. After you create the composition, you’ll see how to use it as a screen saver and turn it into a QuickTime movie.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-SW9">Creating a Glow Filter</a>
				
			<br/>
			
        
			
			
				<a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-SW8">Making a Screen Saver</a>
				
			<br/>
			
        
			
			
				<a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-SW2">Turning a Composition into a QuickTime Movie</a>
				
			<br/>
			
        
			
			
				<a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_38">Next Steps</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40005381-CH213-SW9" title="Creating a Glow Filter"></a><h2>Creating a Glow Filter</h2><p>This section shows how to use Quartz Composer to create a composition that renders a textured, rotating cube and then to apply a glow effect to the cube. By following the steps in this section, you’ll learn to:</p><ul class="ul"><li class="li"><p>Create a hierarchical composition that uses macro patches</p></li><li class="li"><p>Set up consumer patches so they evaluate in the correct order</p></li></ul><p>Before you start creating the composition, you’ll learn what a glow filter is and how it can be implemented as a Quartz composition. Then, you’ll create your own glowing cube composition by following these steps:</p><ol class="ol"><li class="li"><p><span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-CJBGDDEI">“Setting Up a Rotating Cube”</a></span></p></li><li class="li"><p><span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-BCIEIBFA">“Adding a Background Color”</a></span></p></li><li class="li"><p><span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-CJBDEDJH">“Creating a Render in Image Macro”</a></span></p></li><li class="li"><p><span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-CJBFEHIC">“Applying a Gaussian Blur”</a></span></p></li><li class="li"><p><span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-BCIDJJAA">“Increasing the Glow Effect”</a></span></p></li></ol><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_37" title="Glow Filter Overview"></a><h3>Glow Filter Overview</h3><p>A glow filter creates a diffuse lighting effect around the edges of an object to make the object appear as if it is glowing. This standard effect appears in many image processing applications. Creating an effect like this in Mac OS X v10.3 and earlier requires many lines of code. Quartz Composer doesn’t require any code to create this and other effects; you simply assemble and connect patches. </p><p>A glow filter achieves its effect by adding together an image and a blurred copy of the image. The addition operation brightens the highlights in an image to create an area of diffuse brightening along the edges in the image. The beach scene on the right of <span class="content_text">Figure 4-1</span> is the result of adding the scene on the left to a blurred copy of the scene.</p><br/><div><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIIEGBJ" title="Figure 4-1A beach scene without (left) and with (right) the glow effect applied"></a><p><strong>Figure 4-1&nbsp;&nbsp;</strong>A beach scene without (left) and with (right) the glow effect applied</p><img src = "../art/beach_glow.gif" alt = "A beach scene without (left) and with (right) the glow effect applied" width="527" height="196"></div><br/><p><span class="content_text">Figure 4-2</span> shows the Quartz composition for creating a glow effect on a bitmap image. The composition uses four patches:</p><ul class="spaceabove"><li class="li"><p>Image Importer generates a bitmap image from a JPEG, TIFF, PNG, BMP, GIF, or PDF file.</p></li><li class="li"><p>Gaussian Blur blurs an image by the amount specified by a radius.</p></li><li class="li"><p>Addition adds the blurred image to the bitmap image and provides the result as an output parameter.</p></li><li class="li"><p>Billboard renders the image.</p></li></ul><br/><div><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIIGICE" title="Figure 4-2A composition that creates a glow effect on an image"></a><p><strong>Figure 4-2&nbsp;&nbsp;</strong>A composition that creates a glow effect on an image</p><img src = "../art/glow_effect.jpg" alt = "A composition that creates a glow effect on an image" ></div><br/><p>Now that you know how a glow filter is implemented, it’s time to launch Quartz Composer and get started creating your own composition. Quartz Composer is located the following directory: </p><p><code>/Developer/Applications/</code></p><p>You’ll need a texture file to complete the composition described in the rest of this chapter. If you don’t have one, you can use one of the image files in <code>/Library/User Pictures</code>.</p><a name="//apple_ref/doc/uid/TP40005381-CH213-CJBGDDEI" title="Setting Up a Rotating Cube"></a><h3>Setting Up a Rotating Cube</h3><p>Quartz Composer provides a Rotating Cube clip  that renders a cube using an input image and a duration value. The image you supply will appear on the six faces of the cube. The duration controls the period of the cube’s rotation.</p><p>Follow these steps to set up the rotating cube.</p><ol class="ol"><li class="li"><p>Launch Quartz Composer. Choose the Blank Composition template.</p><p>If you’ve turned off the option to choose a template, then choose File > New Blank. </p></li><li class="li"><p>Click the Patch Creator button and type Rotating Cube in the search field.</p></li><li class="li"><p>Press Return to add the Rotating Cube clip to the workspace as shown in <span class="content_text">Figure 4-3</span>.</p><p>When you add a clip to the workspace, Quartz Composer makes a copy of the clip and adds the copy to the workspace. This means that you can modify the added clip without affecting what’s in the Patch Creator.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIGBHAD" title="Figure 4-3The Rotating Cube clip in the workspace"></a><p><strong>Figure 4-3&nbsp;&nbsp;</strong>The Rotating Cube clip in the workspace</p><img src = "../art/drag_rotating_cube.jpg" alt = "The Rotating Cube clip in the workspace" ></div></li><li class="li"><p>In the Finder, locate an image file that contains the texture to use for the faces of the cube. Then drag the image directly from the Finder to the workspace.</p><p>This example uses a brick image as a texture, but you can supply any image you’d like to appear on the faces of the cube.</p><p>Quartz Composer automatically creates an instance of an Image Importer patch, copies the texture to the patch, and renames the patch to have the name of the image file.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_67" title="Tip"></a><p><strong>Tip:</strong>&nbsp; Make sure images are not larger than necessary. For example, avoid using a 1024 x 1024 texture when rendering to a destination that is smaller, such as 320 x 240.</p></div></li><li class="li"><p>Connect the Image output to the Image input of the Rotating Cube as shown in <span class="content_text">Figure 4-4</span>. </p><p>To create a connection, click the output port of one patch and then click the input port of another patch. (You’ll notice that you can’t create a connection in the opposite direction.)</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIEBEJD" title="Figure 4-4The Image connected to the Rotating Cube"></a><p><strong>Figure 4-4&nbsp;&nbsp;</strong>The Image connected to the Rotating Cube</p><img src = "../art/image_to_cube.jpg" alt = "The Image connected to the Rotating Cube" ></div></li><li class="li"><p>Open the Input Parameters pane of the inspector for the Rotating Cube. </p><p>The default period value is 10, which means that the cube completes a full rotation every 10 seconds. Change the value to 1  and look at the viewer window to observe how the cube rotation speeds up. Then, change the value back to 10. As you can see, it is easy to change input parameter values. </p></li><li class="li"><p>Click Viewer to bring it to the front. </p><p>A brick-faced cube (see <span class="content_text">Figure 4-5</span>) rotates. The background appears smeared. To correct that, you’ll need to clear the viewer prior to rendering each frame of the animation. You’ll do that next, in <span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-BCIEIBFA">“Adding a Background Color.”</a></span></p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-CJBJBGIB" title="Figure 4-5The background smears"></a><p><strong>Figure 4-5&nbsp;&nbsp;</strong>The background smears</p><img src = "../art/no_background_cube.jpg" alt = "The background smears" ></div></li></ol><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIEIBFA" title="Adding a Background Color"></a><h3>Adding a Background Color</h3><p>So far the composition is a rotating cube; Quartz Composer is rendering nothing except the cube. Because Quartz Composer doesn’t erase the viewing area between frames, you see smearing. In this section you’ll add a Clear patch so that you can not only eliminate the smearing, but you can also control the background color of the rendering destination.</p><p>Colors in Quartz Composer have an alpha component  that lets you specify the opacity of the color. A fully transparent color has an opacity of 0 and a fully opaque one has an opacity of 1.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_68" title="Note"></a><p><strong>Note:</strong>&nbsp;Opacity  is also referred to as the alpha value, which is the term you’ll see if you use the Quartz 2D programming interface.</p></div><p>Follow these steps to add a background color to the composition:</p><ol class="ol"><li class="li"><p>Use the Patch Creator to find and add a Clear patch to the workspace. </p><p>Notice in <span class="content_text">Figure 4-6</span> that Clear is numbered 2 and Rotating Cube is numbered 1. This means that the Rotating Cube is rendered first and then the rendering area is cleared, which is the wrong order for these operations. If you leave these patches in this rendering order, all you’ll see is the solid clear color. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIBAACE" title="Figure 4-6The number in the title bar of a consumer patch indicates its rendering order"></a><p><strong>Figure 4-6&nbsp;&nbsp;</strong>The number in the title bar of a consumer patch indicates its rendering order</p><img src = "../art/clear_numbering.jpg" alt = "The number in the title bar of a consumer patch indicates its rendering order" ></div></li><li class="li"><p>To change the rendering order, click the number on the Clear patch and choose Layer 1 from the pop-up menu, as shown in <span class="content_text">Figure 4-7</span>. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCICEFDI" title="Figure 4-7The rendering layer for the Clear patch"></a><p><strong>Figure 4-7&nbsp;&nbsp;</strong>The rendering layer for the Clear patch</p><img src = "../art/change_render_layer.jpg" alt = "The rendering layer for the Clear patch" ></div></li><li class="li"><p>Look at the viewer window. </p><p>The cube rotates over a black background. The default color is black with an alpha value of 0.0. (An alpha value of 0.0 means 0% opacity or completely transparent.) You can change the color and the opacity  in the Input Parameters pane of the inspector for the Clear patch by clicking the color well.</p></li></ol><a name="//apple_ref/doc/uid/TP40005381-CH213-CJBDEDJH" title="Creating a Render in Image Macro"></a><h3>Creating a Render in Image Macro</h3><p>The Render in Image patch is a macro that renders what’s in it (that is, its subpatches) to an image. By rendering part of your composition into an image, you can then use that image as you would any image in Quartz Composer.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_69" title="Tip"></a><p><strong>Tip:</strong>&nbsp;How do you tell the difference between a patch that is a macro and one that isn’t? Macro patches  have square corners instead of rounded corners.</p></div><p>The steps in this section show how to use the Render in Image macro to convert the rotating cube into a reusable image. You’ll then be able to apply a glow effect to that image.</p><ol class="ol"><li class="li"><p>Use the Patch Creator to find and add a Render in Image macro (see <span class="content_text">Figure 4-8</span>)  to the workspace. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIBDJEH" title="Figure 4-8The Render in Image macro"></a><p><strong>Figure 4-8&nbsp;&nbsp;</strong>The Render in Image macro</p><img src = "../art/render_in_image.jpg" alt = "The Render in Image macro" ></div></li><li class="li"><p>In the Input Parameters pane of the inspector for the Render in Image macro, make sure the Image Dimensions  are set to <code>0</code> x <code>0</code> pixels. </p><p>This is the default setting. When image dimensions are set to <code>0</code> x <code>0</code>, Quartz Composer renders the image so that it has the same dimensions as the rendering destination. When you set the image dimensions to specific values, Quartz Composer forces the image to render to those dimensions.</p></li><li class="li"><p>Select all the patches except the Render in Image macro and choose Edit > Cut. </p></li><li class="li"><p>Double-click the Render in Image macro and choose Edit > Paste.</p><p>You’ve just moved all the patches into the Render in Image macro, creating another level in the composition.</p></li><li class="li"><p>Take a look at the viewer window. </p><p>Note that the composition no longer has a patch in the root macro patch level that draws to a rendering destination.</p></li><li class="li"><p>Click Edit Parent to move up to the root macro patch level of your composition.</p></li><li class="li"><p>Use the Patch Creator to find and add a Billboard patch (see <span class="content_text">Figure 4-9</span>) to the root macro patch level of the workspace. </p><p>The Billboard patch renders a simple quad that takes the perspective of facing the viewer. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIDBJBG" title="Figure 4-9A Billboard patch"></a><p><strong>Figure 4-9&nbsp;&nbsp;</strong>A Billboard patch</p><img src = "../art/billboard.jpg" alt = "A Billboard patch" ></div></li><li class="li"><p>Connect the output port of the Render in Image macro to the Image input port of the Billboard patch.</p><p>At this point, you might notice that your composition does not fill the viewer window. In the next step, you’ll remedy that.</p></li><li class="li"><p>Look at the Input Parameters pane of the inspector for the Billboard patch. Notice that the Width is set to 1.</p><p>The Width parameter specifies the width of the quad. Quartz Composer automatically computes the height of the quad based on the aspect ratio. Recall that the coordinate space is 2.0 units wide (see <span class="content_text"><a href="../qc_concepts/qc_concepts.html#//apple_ref/doc/uid/TP40005381-CH212-SW8">Figure 1-8</a></span>). Because the current width is 1.0, the billboard quad uses half the width of the rendering area.</p><p>For this composition, you will make the billboard use the full width of the Quartz Composer coordinate space.</p></li><li class="li"><p>In the Input Parameters pane of the inspector for the Billboard patch, enter <code>2</code> in the Width text box.</p><p>The composition should now render to the full width of the viewer window.</p></li><li class="li"><p>Take a look at the Viewer. You should see the rotating cube over a black background.</p></li></ol><a name="//apple_ref/doc/uid/TP40005381-CH213-CJBFEHIC" title="Applying a Gaussian Blur"></a><h3>Applying a Gaussian Blur</h3><p>A Gaussian Blur patch  combines neighboring pixels to effectively produce a blurred image. (For those who want to know the details, the convolution kernel used to compute the blue represents the shape of a Gaussian distribution (also known as a bell curve.) </p><p>Recall that the glow effect results from adding a blurred copy of an image to the original image. (See <span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-BCIIEGBJ">Figure 4-1</a></span>.) To achieve the glow effect, you’ll use a Gaussian Blur patch to blur a copy of the rotating cube image. Then, you’ll use an Addition compositing filter patch to combine the two images.</p><ol class="ol"><li class="li"><p>Add the Gaussian Blur and Addition patches to the root macro patch level of the workspace. </p></li><li class="li"><p>Connect the Image output port from the Render in Image macro to the Image input port of the Gaussian Blur patch and make another connection to the Background Image input port of the Addition patch. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_70" title="Tip"></a><p><strong>Tip:</strong>&nbsp;To make multiple connections from the Image output port, hold the Command key as you click the output port and then each of the input ports.</p></div></li><li class="li"><p>Connect the Image output port of the Gaussian Blur patch to the Image input port of the Addition patch.</p></li><li class="li"><p>Finally, connect the Image output port of the Addition patch to the Image input port of the Billboard patch.</p><p>The composition should look as shown in <span class="content_text">Figure 4-10</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-SW1" title="Figure 4-10A composition that produces a glowing, rotating cube"></a><p><strong>Figure 4-10&nbsp;&nbsp;</strong>A composition that produces a glowing, rotating cube</p><img src = "../art/add_blur.jpg" alt = "A composition that produces a glowing, rotating cube" ></div></li><li class="li"><p>Take a look at the composition in the Viewer.</p><p>The glow effect around the edges of the cube is subtle. The next section shows how to increase the effect.</p></li></ol><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIDJJAA" title="Increasing the Glow Effect"></a><h3>Increasing the Glow Effect</h3><p>With older video tube technology it was possible to turn up the brightness adjustment so much that the images on the screen would get little halos around them. Although this sort of behavior is undesirable when you want to view nice crisp images, it is exactly what you need to achieve a glow effect. In this section you’ll set up the digital equivalent of “turning up the brightness” by adding a Gamma Adjust patch.</p><p>The Gamma Adjust patch is usually used to compensate for the nonlinear effects of displays by adjusting midtone brightness. Adjusting the gamma effectively changes the slope of the transition between black and white. </p><p>Using the Gamma Adjust patch in this composition has nothing to do with display adjustment. It’s really a hack, but one that works quite well. When the gamma-adjusted image is then blurred, the rotating cube attains a halo that results in a more pleasing glow effect. </p><p>Follow these steps to add the Gamma Adjust patch.</p><ol class="ol"><li class="li"><p>Use the Patch Creator to find and add a Gamma Adjust patch (see <span class="content_text">Figure 4-11</span>)  to the root macro patch level of the workspace.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIIAIJH" title="Figure 4-11The Gamma Adjust patch"></a><p><strong>Figure 4-11&nbsp;&nbsp;</strong>The Gamma Adjust patch</p><img src = "../art/gamma_adjust.jpg" alt = "The Gamma Adjust patch" ></div></li><li class="li"><p>Insert the Gamma Adjust patch into the composition as shown in <span class="content_text">Figure 4-12</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-BCIEABEH" title="Figure 4-12The Gamma Adjust patch added to the composition"></a><p><strong>Figure 4-12&nbsp;&nbsp;</strong>The Gamma Adjust patch added to the composition</p><img src = "../art/gamma_blur.jpg" alt = "The Gamma Adjust patch added to the composition" ></div></li><li class="li"><p>In the Input Parameters pane of the inspector for the Gamma Adjust patch, move the Power slider until you achieve a pleasing glow effect.</p></li></ol><a name="//apple_ref/doc/uid/TP40005381-CH213-SW10" title="Publishing Ports"></a><h3>Publishing Ports</h3><p>Published ports are available at the top level of a composition and, as you’ll see, provide easy access for manually changing their values. They become even more important as a way to programmatically control a composition. Later, in <span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-SW8">“Making a Screen Saver”</a></span> and <span class="content_text"><a href="qc_tutorial.html#//apple_ref/doc/uid/TP40005381-CH213-SW2">“Turning a Composition into a QuickTime Movie,”</a></span> you’ll see how publishing ports makes your composition interactive. See <em><a href="../../QuartzComposer/index.html#//apple_ref/doc/uid/TP40001357" target="_top">Quartz Composer Programming Guide</a></em> for information on how to programmatically change the values of published ports.</p><p>You’ll revise the composition so that it has two published input ports at the root macro patch level—one that controls the clear color and the other that controls the gamma value. </p><ol class="ol"><li class="li"><p>Double-click the Render in Image macro so that you can see the Clear and Rotating Cube patches.</p><p>Notice that the Clear subpatch has a Clear Color input port. The default clear color is black, which is why the cube appears on a black background. It is difficult to change the color during runtime because the color input is buried in the subpatch. </p></li><li class="li"><p>Control-click the Clear patch and choose Published Inputs > Clear Color, as shown in <span class="content_text">Figure 4-13</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-SW4" title="Figure 4-13Publishing the Clear Color input port"></a><p><strong>Figure 4-13&nbsp;&nbsp;</strong>Publishing the Clear Color input port</p><img src = "../art/publish_clear.jpg" alt = "Publishing the Clear Color input port" ></div></li><li class="li"><p>Press Return.</p><p>Notice that the Clear Color input port appears gray to indicate it is published.</p></li><li class="li"><p>Switch to the root macro patch level.</p><p>Notice that the Render in Image patch has an input parameter it didn’t have earlier—Clear Color. This input parameter is the one you just published from the Clear patch. When the Clear Color parameter for Render in Image is set, the color value is passed to the Clear patch.</p><p>Parameters published from lower levels are not available outside the composition unless you also publish them from the root macro patch. You’ll do that next.</p></li><li class="li"><p>Control-click the Gamma Adjust patch and choose Published Inputs > Power. </p></li><li class="li"><p>Press Return to keep the assigned name.</p></li><li class="li"><p>Control-click the Render in Image patch and choose Published Inputs > Clear Color.</p></li><li class="li"><p>Press Return to keep the assigned name.</p></li><li class="li"><p>In the viewer window, click Input Parameters.</p><p>The input ports that are published to the root macro patch level appear as a sheet in the viewer window, as shown in <span class="content_text">Figure 4-14</span>. Published input ports are are also referred to as the input parameters of the composition. You can manipulate the controls to change the color and power values in real time, just as the background color in the figure was changed to gray by using the published color well.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-SW5" title="Figure 4-14Published input ports as they appear in Quartz Composer"></a><p><strong>Figure 4-14&nbsp;&nbsp;</strong>Published input ports as they appear in Quartz Composer</p><img src = "../art/pub_ports_viewer.jpg" alt = "Published input ports as they appear in Quartz Composer" ></div></li><li class="li"><p>In the editor window, hover the pointer over the Clear Color input port for the Render in Image patch and note the published key name, as shown in <span class="content_text">Figure 4-15</span>. Do the same thing for the Power input for the Gamma Adjust patch.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005381-CH213-SW6" title="Figure 4-15The help tag for the Clear Color input port"></a><p><strong>Figure 4-15&nbsp;&nbsp;</strong>The help tag for the Clear Color input port</p><img src = "../art/color_help_tag.jpg" alt = "The help tag for the Clear Color input port" ></div></li><li class="li"><p>Save the composition and quit Quartz Composer.</p></li></ol><p>You’ve successfully created a composition. Next you’ll see how to use it as a screen saver and then how to make it into a QuickTime movie.</p><a name="//apple_ref/doc/uid/TP40005381-CH213-SW8" title="Making a Screen Saver"></a><h2>Making a Screen Saver</h2><p>There are two steps required for making a Quartz Composer a screen saver:</p><ol class="ol"><li class="li"><p>Create a composition.</p></li><li class="li"><p>Put the composition in one of these folders:</p><ul class="simple-spaceabove"><li><p><code>/Library/Screen Savers</code></p></li><li><p><code>~/Library/Screen Savers</code></p></li></ul></li></ol><p>The composition appears as a screen saver in the Desktop &amp; Screen Saver pane of System Preferences, as shown in <span class="content_text">Figure 4-16</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40005381-CH213-SW7" title="Figure 4-16A composition can be used as a screen saver"></a><p><strong>Figure 4-16&nbsp;&nbsp;</strong>A composition can be used as a screen saver</p><img src = "../art/rosy_screensaver.jpg" alt = "A composition can be used as a screen saver" ></div><br/><p>If the screen saver composition has input parameters, clicking the Options button displays a window for setting the parameter values. Those values are saved as user preferences.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_71" title="Tip"></a><p><strong>Tip:</strong>&nbsp; To open a screen saver composition in Quartz Composer from within System Preferences, select the screen saver composition, then click the Options button while pressing the Option key.</p></div><a name="//apple_ref/doc/uid/TP40005381-CH213-SW2" title="Turning a Composition into a QuickTime Movie"></a><h2>Turning a Composition into a QuickTime Movie</h2><p>Turning a composition into a QuickTime Movie is a quick and easy way to let users view and interact with a composition. Follow these steps to make a QuickTime movie from a composition:</p><ol class="ol"><li class="li"><p>With the editor window active, choose File > Export as QuickTime Movie.</p></li><li class="li"><p>Click Save and then, in the window that appears, modify the dimensions and duration if you need to.</p></li><li class="li"><p>Click Export. </p><p>When you open the exported movie in the Finder, QuickTime Movie Player launches.</p></li></ol><p>The generated QuickTime movie does not contain a prerendered version of the composition but the composition itself, which is then rendered in real time by QuickTime. Such QuickTime movies can be only opened in Mac OS X 10.5 or later.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_72" title="Note"></a><p><strong>Note:</strong>&nbsp;If your composition uses resources that come from the Internet, such as an RSS feed, you won't be able to access those resources from within a QuickTime movie. </p></div><p>Another way to create a QuickTime movie from a Quartz composition is to open it in QuickTime Player and save it as a movie. When creating a QuickTime movie in this way, you can’t specify custom dimensions and duration; default values are used. You can change those defaults with the <code>defaults</code> command-line tool. For example, to specify a width of 1024, a height of 768, and a duration of 60 minutes, you enter these commands in the Terminal window:</p><p><code>defaults write NSGlobalDomain QuartzComposerDefaultMovieDuration 60</code></p><p><code>defaults write NSGlobalDomain QuartzComposerDefaultMovieWidth 1024</code></p><p><code>defaults write NSGlobalDomain QuartzComposerDefaultMovieHeight 768</code></p><p>The <code>NSGlobalDomain</code> defaults apply to all applications. </p><p>If you want to set default values for a specific application (for example, iMovie), you would enter command similar to the following:</p><p><code>defaults write com.apple.iMovie3 QuartzComposerDefaultMovieDuration 300</code></p><p><code>defaults write com.apple.iMovie3 QuartzComposerDefaultMovieWidth 640</code></p><p><code>defaults write com.apple.iMovie3 QuartzComposerDefaultMovieHeight 480</code></p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_73" title="Tip"></a><p><strong>Tip:</strong>&nbsp; In Mac OS X v10.4 and later, any QuickTime-compatible application can open and play a composition. Your composition performs best if the opening application uses the QuickTime Kit and <code>HIMovieView</code> functions, both of which are available in Mac OS X v10.4 and later.</p></div><a name="//apple_ref/doc/uid/TP40005381-CH213-DontLinkElementID_38" title="Next Steps"></a><h2>Next Steps</h2><p>If you know how to write code, you may want to read the following:</p><ul class="ul"><li class="li"><p><em><a href="../../QuartzComposer/index.html#//apple_ref/doc/uid/TP40001357" target="_top">Quartz Composer Programming Guide</a></em> shows how to use the Quartz Composer programming interface to load, play, and control compositions. It also provides instructions on how to use bindings in Interface Builder to create a standalone composition.</p></li><li class="li"><p><em><a href="../../QuartzComposer_Patch_PlugIn_ProgGuide/index.html#//apple_ref/doc/uid/TP40004787" target="_top">Quartz Composer Custom Patch Programming Guide</a></em> describes how to create your own patches that you can use in the Quartz Composer development environment.</p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../qc_tips_moves/qc_tips_moves.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../qc_glossary/qc_glossary.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-17<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/QuartzComposerUserGuide/qc_tutorial/qc_tutorial.html%3Fid%3DTP40005381-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/QuartzComposerUserGuide/qc_tutorial/qc_tutorial.html%3Fid%3DTP40005381-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/QuartzComposerUserGuide/qc_tutorial/qc_tutorial.html%3Fid%3DTP40005381-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>SoundSprocketTest - /TS3TestLoLevel.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGames-date.html">Games</a> &gt; <A HREF="javascript:location.replace('index.html');">SoundSprocketTest</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Games/index.html" target="_blank">Reference Library > Games</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">SoundSprocketTest</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/TS3TestLoLevel.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/TS3Events.c</option>
<option value="listing2.html">/TS3Events.h</option>
<option value="listing3.html">/TS3Main.c</option>
<option value="listing4.html">/TS3Main.h</option>
<option value="listing5.html">/TS3Menu.c</option>
<option value="listing6.html">/TS3Menu.h</option>
<option value="listing7.html">/TS3Message.c</option>
<option value="listing8.html">/TS3Message.h</option>
<option value="listing9.html">/TS3Resource.h</option>
<option value="listing10.html">/TS3Sound.c</option>
<option value="listing11.html">/TS3Sound.h</option>
<option value="listing12.html">/TS3TestAPI.c</option>
<option value="listing13.html">/TS3TestAPI.h</option>
<option value="listing14.html">/TS3TestHiLevel.c</option>
<option value="listing15.html">/TS3TestHiLevel.h</option>
<option value="listing16.html">/TS3TestLoLevel.c</option>
<option value="listing17.html">/TS3TestLoLevel.h</option>
<option value="listing18.html">/TS3Utils.c</option>
<option value="listing19.html">/TS3Utils.h</option>
<option value="listing20.html">/TS3Window.c</option>
<option value="listing21.html">/TS3Window.h</option></select>
				</p>
				</form>
				<p><strong><a href="SoundSprocketTest.zip">Download Sample</a></strong> (&#147;SoundSprocketTest.zip&#148;, 96.8K)<BR>
<strong><a href="SoundSprocketTest.dmg">Download Sample</a></strong> (&#147;SoundSprocketTest.dmg&#148;, 163.5K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/* *  File:    TS3TestLoLevel.c * *  Copyright &copy; 1996 Apple Computer, Inc. */#include &lt;assert.h&gt;#include &lt;math.h&gt;#include &lt;string.h&gt;#include &lt;Dialogs.h&gt;#include &lt;Fonts.h&gt;#include &lt;Menus.h&gt;#include &lt;Timer.h&gt;#include &lt;fp.h&gt;#include &quot;TS3Menu.h&quot;#include &quot;TS3Message.h&quot;#include &quot;TS3Resource.h&quot;#include &quot;TS3Sound.h&quot;#include &quot;TS3TestLoLevel.h&quot;#include &quot;TS3Utils.h&quot;#include &quot;TS3Window.h&quot;#include &quot;SoundSprocket.h&quot;typedef struct TTestLoLevelData {  float      duration;    UInt32      cpuLoad1;  UInt32      cpuLoad2;  Boolean      cpuLoadRange;    UInt32      medium;    float      humidity1;  float      humidity2;  Boolean      humidityRange;    float      roomSize1;  float      roomSize2;  Boolean      roomSizeRange;    float      roomReflectivity1;  float      roomReflectivity2;  Boolean      roomReflectivityRange;    float      reverbAttenuation1;  float      reverbAttenuation2;  Boolean      reverbAttenuationRange;    UInt32      sourceMode;    float      referenceDistance1;  float      referenceDistance2;  Boolean      referenceDistanceRange;    float      coneAngleDeg1;  float      coneAngleDeg2;  Boolean      coneAngleDegRange;    float      coneAttenuation1;  float      coneAttenuation2;  Boolean      coneAttenuationRange;    float      elevationDeg1;  float      elevationDeg2;  Boolean      elevationDegRange;    float      azimuthDeg1;  float      azimuthDeg2;  Boolean      azimuthDegRange;    float      distance1;  float      distance2;  Boolean      distanceRange;    float      projectionAngleDeg1;  float      projectionAngleDeg2;  Boolean      projectionAngleDegRange;    float      sourceVelocity1;  float      sourceVelocity2;  Boolean      sourceVelocityRange;    float      listenerVelocity1;  float      listenerVelocity2;  Boolean      listenerVelocityRange;    float      coneAngleCos1;  float      coneAngleCos2;    float      elevation1;  float      elevation2;    float      azimuth1;  float      azimuth2;    float      projectionAngle1;  float      projectionAngle2;} TTestLoLevelData;static MenuHandle        gTestLoLevelPresetMenu      = NULL;static DialogPtr        gTestLoLevelDialog        = NULL;static UserItemUPP        gTestLoLevelProgressUserItem  = NULL;static UInt32          gTestLoLevelCPULoadLimit;static TTestLoLevelData      gTestLoLevelData;static UnsignedWide        gTestLoLevelCycleStart;static float          gTestLoLevelInterpolant      = 0.0;static WindowMethodPtr TestLoLevel_MetaHandler(  WindowMethod    inMethod);static void TestLoLevel_GetSleep(  WindowPtr      inWindow,  UInt32*        outSleep);static void TestLoLevel_ConsumeEvent(  WindowPtr      inWindow,  const EventRecord*  inEvent,  Boolean*      outConsumed);static void TestLoLevel_Update(  WindowPtr      inWindow);static void TestLoLevel_Activate(  WindowPtr      inWindow);static void TestLoLevel_Deactivate(  WindowPtr      inWindow);static pascal void TestLoLevel_ProgressUserItem(  DialogPtr      inDialog,  short        inItem);static void TestLoLevel_Interpolate(  void);static float TestLoLevel_DoInterpolate(  float        inWhere,  float        inVal0,  float        inVal1,  Boolean        inIsRange);static void TestLoLevel_DeriveData(  void);static void TestLoLevel_SetDialogFields(  void);static void TestLoLevel_GetDialogFields(  void);/* ============================================================================= *    TestLoLevel_Init (external) * *  Initializes our thing. * ========================================================================== */void TestLoLevel_Init(  void){  OSStatus      err;  TEHandle      textEdit;  FontInfo      fontInfo;  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  Str255        str;  short         fNum;    // Make sure we didn't mess up the dialog items  assert(kLoLevelItem_COUNT == kLoLevelItem_ExpectedCOUNT);    // Grab the maximum CPU load limit value  gTestLoLevelCPULoadLimit = 999;  err = SSpGetCPULoadLimit(&amp;gTestLoLevelCPULoadLimit);  Message_CheckError(err, &quot;TestLoLevel_Init&quot;, &quot;SSpGetCPULoadLimit&quot;);    //* TODO: Read in gTestLoLevelData from preferences    // Grab the menu  gTestLoLevelPresetMenu = GetMenu(kMenuID_LoLevelPreset);    // Grab the dialog  gTestLoLevelDialog = GetNewDialog(kDlogID_LoLevel, NULL, (WindowPtr) -1);  assert(gTestLoLevelDialog != NULL);    SetPort(gTestLoLevelDialog);  GetFNum(&quot;\pGeneva&quot;, &amp;fNum);  TextFont(fNum);  TextSize(10);    // Fix up the line height  GetFontInfo(&amp;fontInfo);    textEdit = ((DialogPeek) gTestLoLevelDialog)-&gt;textH;    (*textEdit)-&gt;lineHeight = fontInfo.ascent+fontInfo.descent+fontInfo.leading;  (*textEdit)-&gt;fontAscent = fontInfo.ascent;    // Set up our method table  Window_New(gTestLoLevelDialog, TestLoLevel_MetaHandler);    // Do the user items  GetDialogItem(gTestLoLevelDialog, kLoLevelItem_UpdateHilite, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetDialogItem(gTestLoLevelDialog, kLoLevelItem_UpdateHilite, itemType, (Handle) Utils_GetOKUserItemProc(), &amp;itemBounds);    gTestLoLevelProgressUserItem = NewUserItemProc(TestLoLevel_ProgressUserItem);  assert(gTestLoLevelProgressUserItem != NULL);    GetDialogItem(gTestLoLevelDialog, kLoLevelItem_Progress, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetDialogItem(gTestLoLevelDialog, kLoLevelItem_Progress, itemType, (Handle) gTestLoLevelProgressUserItem, &amp;itemBounds);    // Show the quality limit  sprintf((char*) str, &quot;x[0..%ld]&quot;, gTestLoLevelCPULoadLimit);  str[0] = strlen((char*) str)-1;    GetDialogItem(gTestLoLevelDialog, kLoLevelItem_CPULoadUnits, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetDialogItemText(itemHandle, str);    // Set the initial field values  TestLoLevel_Preset(1);    // Select the first field  SelectDialogItemText(gTestLoLevelDialog, kLoLevelItem_Duration, 0, 32767);    // Show the dialog  ShowWindow(gTestLoLevelDialog);    // Initialize our cycle timer  Microseconds(&amp;gTestLoLevelCycleStart);}/* ============================================================================= *    TestLoLevel_Exit (external) * *  Cleans up. * ========================================================================== */void TestLoLevel_Exit(  void){  //* TODO: Save gTestLoLevel to preferences    if (gTestLoLevelDialog != NULL)  {    DisposeDialog(gTestLoLevelDialog);    gTestLoLevelDialog = NULL;  }    if (gTestLoLevelProgressUserItem != NULL)  {    DisposeRoutineDescriptor(gTestLoLevelProgressUserItem);    gTestLoLevelProgressUserItem = NULL;  }}/* ============================================================================= *    TestLoLevel_MetaHandler (internal) * *  Returns the method function pointer that corresponds to the given ID. * ========================================================================== */WindowMethodPtr TestLoLevel_MetaHandler(  WindowMethod    inMethod){  WindowMethodPtr    result;    result = NULL;    switch (inMethod)  {    case kWindowMethod_GetSleep:      result = (WindowMethodPtr) TestLoLevel_GetSleep;    break;        case kWindowMethod_ConsumeEvent:      result = (WindowMethodPtr) TestLoLevel_ConsumeEvent;    break;        case kWindowMethod_Update:      result = (WindowMethodPtr) TestLoLevel_Update;    break;        case kWindowMethod_Activate:      result = (WindowMethodPtr) TestLoLevel_Activate;    break;        case kWindowMethod_Deactivate:      result = (WindowMethodPtr) TestLoLevel_Deactivate;    break;  }    return result;}/* ============================================================================= *    TestLoLevel_GetSleep (internal) * *  Returns the sleep time to pass to WaitNextEvent when we're in front. * ========================================================================== */void TestLoLevel_GetSleep(  WindowPtr      inWindow,  UInt32*        outSleep){  #pragma unused (inWindow)  assert(outSleep != NULL);    *outSleep = 0;}/* ============================================================================= *    TestLoLevel_ConsumeEvent (internal) * *  Called for each event when this is the front window. * ========================================================================== */void TestLoLevel_ConsumeEvent(  WindowPtr      inWindow,  const EventRecord*  inEvent,  Boolean*      outConsumed){  #pragma unused (inWindow)  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  ControlHandle    updateButton;  Boolean        consumed;  Boolean        passToDialog;  WindowPtr      window;  short        item;  unsigned long    timeout;  UnsignedWide    now;    assert(inEvent != NULL);  assert(outConsumed != NULL);    consumed = false;  passToDialog = true;    // We want to handle some events ourself  switch (inEvent-&gt;what)  {    case keyDown:    case autoKey:      passToDialog = false;            if (inEvent-&gt;modifiers &amp; cmdKey)      {        if (inEvent-&gt;what != autoKey)        {          switch (inEvent-&gt;message &amp; charCodeMask)          {            case '.':              // anything here?            break;          }        }      }      else      {        switch (inEvent-&gt;message &amp; charCodeMask)        {          case 0x08:  // backspace          case 0x09:  // tab          case 0x1C:  // cursor left          case 0x1D:  // cursor right          case 0x1E:  // cursor up          case 0x1F:  // cursor down          case '.':          case '-':          case '0':          case '1':          case '2':          case '3':          case '4':          case '5':          case '6':          case '7':          case '8':          case '9':            // Pass it to the dialog            passToDialog = true;          break;                    case 0x03:  // enter          case 0x0D:  // return            if (inEvent-&gt;what != autoKey)            {              // Update button equivalent              GetDialogItem(gTestLoLevelDialog, kLoLevelItem_Update, &amp;itemType, &amp;itemHandle, &amp;itemBounds);              updateButton = (ControlHandle) itemHandle;                            if ((*updateButton)-&gt;contrlHilite == 0)              {                HiliteControl(updateButton, 1);                                timeout = TickCount()+6;                while (TickCount() &lt; timeout) /* wait */;                                HiliteControl(updateButton, 0);                                TestLoLevel_GetDialogFields();                                consumed = true;              }            }          break;                    default:            SysBeep(10);            consumed = true;        }      }    break;        case activateEvt:      // We need to look at the activate event here because it is      // consumed by IsDialogEvent/DialogSelect below and so never      // gets to the window stuff      window = (WindowPtr) inEvent-&gt;message;            if (inEvent-&gt;modifiers &amp; activeFlag)      {        Window_Activate(window);      }      else      {        Window_Deactivate(window);      }    break;        case nullEvent:      // Find where we are in the cycle (0 is start, 1 is end)      Microseconds(&amp;now);      gTestLoLevelInterpolant = Utils_Interval(&amp;gTestLoLevelCycleStart, &amp;now) / gTestLoLevelData.duration;            switch (Menu_GetInterpolation())      {        case kInterpolationItem_Sinusoidal:          gTestLoLevelInterpolant = 0.5*sinf(gTestLoLevelInterpolant*pi*2.0) + 0.5;        break;                case kInterpolationItem_Triangular:          gTestLoLevelInterpolant = 2.0*fmodf(gTestLoLevelInterpolant, 1.0);                    if (gTestLoLevelInterpolant &gt; 1.0)          {            gTestLoLevelInterpolant = 2.0-gTestLoLevelInterpolant;          }        break;                case kInterpolationItem_Sawtooth:          gTestLoLevelInterpolant = fmodf(2.0*gTestLoLevelInterpolant, 1.0);        break;      }            TestLoLevel_Interpolate();    break;  }    // Do dialog stuff  if (passToDialog)  {    consumed = IsDialogEvent(inEvent);    if (consumed)    {      if (DialogSelect(inEvent, &amp;window, &amp;item))      {        switch (item)        {          case kLoLevelItem_Update:            TestLoLevel_GetDialogFields();          break;        }      }    }  }    // Return the result  *outConsumed = consumed;}/* ============================================================================= *    TestLoLevel_Update (internal) * *  Updates the contents of the window. * ========================================================================== */void TestLoLevel_Update(  WindowPtr      inWindow){  DrawDialog(inWindow);}/* ============================================================================= *    TestLoLevel_Activate (internal) * *  Handles window activation. * ========================================================================== */void TestLoLevel_Activate(  WindowPtr      inWindow){  #pragma unused (inWindow)  InsertMenu(gTestLoLevelPresetMenu, 0);  DrawMenuBar();}/* ============================================================================= *    TestLoLevel_Deactivate (internal) * *  Handles window deactivation. * ========================================================================== */void TestLoLevel_Deactivate(  WindowPtr      inWindow){  #pragma unused (inWindow)  DeleteMenu(kMenuID_LoLevelPreset);  DrawMenuBar();}/* ============================================================================= *    TestLoLevel_ProgressUserItem (internal) * *  Draws the user item used for progress bar, based on gTestLoLevelInterpolant. * ========================================================================== */pascal void TestLoLevel_ProgressUserItem(  DialogPtr      inDialog,  short        inItem){  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  short        size;  Rect        leftWhite;  Rect        rightWhite;  Rect        indicator;    GetDialogItem(inDialog, inItem, &amp;itemType, &amp;itemHandle, &amp;itemBounds);    FrameRect(&amp;itemBounds);    InsetRect(&amp;itemBounds, 1, 1);  size = itemBounds.bottom-itemBounds.top;    indicator = itemBounds;  indicator.left = itemBounds.left + (long) (gTestLoLevelInterpolant*(itemBounds.right-itemBounds.left-size) + 0.5);  indicator.right = indicator.left+size;    leftWhite = itemBounds;  leftWhite.right = indicator.left;    rightWhite = itemBounds;  rightWhite.left = indicator.right;    FrameRect(&amp;indicator);    InsetRect(&amp;indicator, 1, 1);  FillRect(&amp;indicator, &amp;qd.gray);    EraseRect(&amp;leftWhite);  EraseRect(&amp;rightWhite);}/* ============================================================================= *    TestLoLevel_Interpolate (internal) * *  Changes the sound channel to the correct values for the point between *  zero and one determined by gTestLoLevelInterpolant. * ========================================================================== */void TestLoLevel_Interpolate(  void){  SSpLocalizationData      snd3DInfo;  float            elevation;  float            azimuth;    snd3DInfo.cpuLoad = (UInt32) (TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      (float) gTestLoLevelData.cpuLoad1,      (float) gTestLoLevelData.cpuLoad2,      gTestLoLevelData.cpuLoadRange) + 0.5);    snd3DInfo.medium = gTestLoLevelData.medium;    snd3DInfo.humidity = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.humidity1,      gTestLoLevelData.humidity2,      gTestLoLevelData.humidityRange);    snd3DInfo.roomSize = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.roomSize1,      gTestLoLevelData.roomSize2,      gTestLoLevelData.roomSizeRange);    snd3DInfo.roomReflectivity = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.roomReflectivity1,      gTestLoLevelData.roomReflectivity2,      gTestLoLevelData.roomReflectivityRange);    snd3DInfo.reverbAttenuation = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.reverbAttenuation1,      gTestLoLevelData.reverbAttenuation2,      gTestLoLevelData.reverbAttenuationRange);    snd3DInfo.sourceMode = gTestLoLevelData.sourceMode;    snd3DInfo.referenceDistance = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.referenceDistance1,      gTestLoLevelData.referenceDistance2,      gTestLoLevelData.referenceDistanceRange);    snd3DInfo.coneAngleCos = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.coneAngleCos1,      gTestLoLevelData.coneAngleCos2,      gTestLoLevelData.coneAngleDegRange);    snd3DInfo.coneAttenuation = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.coneAttenuation1,      gTestLoLevelData.coneAttenuation2,      gTestLoLevelData.coneAttenuationRange);    // Wrap the azimuth and elevation to fit in their ranges  elevation = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.elevation1,      gTestLoLevelData.elevation2,      gTestLoLevelData.elevationDegRange);    azimuth = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.azimuth1,      gTestLoLevelData.azimuth2,      gTestLoLevelData.azimuthDegRange);    // find azimuth in the range -2&sup1;..2&sup1;  azimuth = fmodf(azimuth, 2.0*pi);    // find azimuth in the range -&sup1;..&sup1;  if (azimuth &lt; -pi)  {    azimuth += 2.0*pi;  }  else if (azimuth &gt; pi)  {    azimuth -= 2.0*pi;  }    // find azimuth in the range -&sup1;/2..&sup1;/2  if (azimuth &lt; -0.5*pi)  {    azimuth = -pi-azimuth;    elevation -= pi;  }  else if (azimuth &gt; 0.5*pi)  {    azimuth = pi-azimuth;    elevation -= pi;  }    // find elevation in the range -2&sup1;..2&sup1;  elevation = fmodf(elevation, 2.0*pi);    // find elevation in the range -&sup1;..&sup1;  if (elevation &lt; -pi)  {    elevation += 2.0*pi;  }  else if (elevation &gt; pi)  {    elevation -= 2.0*pi;  }    snd3DInfo.currentLocation.elevation = elevation;  snd3DInfo.currentLocation.azimuth = azimuth;    snd3DInfo.currentLocation.distance = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.distance1,      gTestLoLevelData.distance2,      gTestLoLevelData.distanceRange);    snd3DInfo.currentLocation.projectionAngle = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.projectionAngle1,      gTestLoLevelData.projectionAngle2,      gTestLoLevelData.projectionAngleDegRange);    snd3DInfo.currentLocation.sourceVelocity = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.sourceVelocity1,      gTestLoLevelData.sourceVelocity2,      gTestLoLevelData.sourceVelocityRange);    snd3DInfo.currentLocation.listenerVelocity = TestLoLevel_DoInterpolate(      gTestLoLevelInterpolant,      gTestLoLevelData.listenerVelocity1,      gTestLoLevelData.listenerVelocity2,      gTestLoLevelData.listenerVelocityRange);    snd3DInfo.reserved0 = 0;  snd3DInfo.reserved1 = 0;  snd3DInfo.reserved2 = 0;  snd3DInfo.reserved3 = 0;    snd3DInfo.virtualSourceCount = 0;    // Make the filter changes  Sound_Set3DInfo(&amp;snd3DInfo);    // Update the progress bar  SetPort(gTestLoLevelDialog);  TestLoLevel_ProgressUserItem(gTestLoLevelDialog, kLoLevelItem_Progress);}/* ============================================================================= *    TestLoLevel_DoInterpolate (internal) * *  Linear interpolation.  When inWhere is zero, inVal0 is returned.  When it *  is one, inVal1 is returned.  In between is linear.  If inIsRange is false *  then we ignore inVal1 and always return inVal0. * ========================================================================== */float TestLoLevel_DoInterpolate(  float        inWhere,  float        inVal0,  float        inVal1,  Boolean        inIsRange){  float        result;    if (inIsRange)  {    result = inWhere*(inVal1-inVal0) + inVal0;  }  else  {    result = inVal0;  }    return result;}/* ============================================================================= *    TestLoLevel_DeriveData (internal) * *  Compute the derived fields in gTestLoLevelData. * ========================================================================== */void TestLoLevel_DeriveData(  void){  gTestLoLevelData.coneAngleCos1      = cosf(0.5*(pi/180.0)*gTestLoLevelData.coneAngleDeg1);  gTestLoLevelData.coneAngleCos2      = cosf(0.5*(pi/180.0)*gTestLoLevelData.coneAngleDeg2);    gTestLoLevelData.elevation1        = (pi/180.0)*gTestLoLevelData.elevationDeg1;  gTestLoLevelData.elevation2        = (pi/180.0)*gTestLoLevelData.elevationDeg2;    gTestLoLevelData.azimuth1        = (pi/180.0)*gTestLoLevelData.azimuthDeg1;  gTestLoLevelData.azimuth2        = (pi/180.0)*gTestLoLevelData.azimuthDeg2;    gTestLoLevelData.projectionAngle1    = cosf((pi/180.0)*gTestLoLevelData.projectionAngleDeg1);  gTestLoLevelData.projectionAngle2    = cosf((pi/180.0)*gTestLoLevelData.projectionAngleDeg2);}/* ============================================================================= *    TestLoLevel_SetDialogFields (internal) * *  Changes the dialog's fields to reflect gTestLoLevelData. * ========================================================================== */void TestLoLevel_SetDialogFields(  void){  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  short        value;    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Duration,      gTestLoLevelData.duration,      true);    Utils_SetUInt32Field(      gTestLoLevelDialog,      kLoLevelItem_CPULoad1,      gTestLoLevelData.cpuLoad1,      true);    Utils_SetUInt32Field(      gTestLoLevelDialog,      kLoLevelItem_CPULoad2,      gTestLoLevelData.cpuLoad2,      gTestLoLevelData.cpuLoadRange);    GetDialogItem(gTestLoLevelDialog, kLoLevelItem_Medium, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetControlValue((ControlHandle) itemHandle,      (gTestLoLevelData.medium == kSSpMedium_Water)          ? kMediumItem_Water          : kMediumItem_Air);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Humidity1,      gTestLoLevelData.humidity1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Humidity2,      gTestLoLevelData.humidity2,      gTestLoLevelData.humidityRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomSize1,      gTestLoLevelData.roomSize1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomSize2,      gTestLoLevelData.roomSize2,      gTestLoLevelData.roomSizeRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomReflectivity1,      gTestLoLevelData.roomReflectivity1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomReflectivity2,      gTestLoLevelData.roomReflectivity2,      gTestLoLevelData.roomReflectivityRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReverbAttenuation1,      gTestLoLevelData.reverbAttenuation1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReverbAttenuation2,      gTestLoLevelData.reverbAttenuation2,      gTestLoLevelData.reverbAttenuationRange);    value = kSourceModeItem_Unfiltered;  switch (gTestLoLevelData.sourceMode)  {    case kSSpSourceMode_Localized:      value = kSourceModeItem_Localized;    break;        case kSSpSourceMode_Ambient:      value = kSourceModeItem_Ambient;    break;        case kSSpSourceMode_Binaural:      value = kSourceModeItem_Binaural;    break;  }    GetDialogItem(gTestLoLevelDialog, kLoLevelItem_SourceMode, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetControlValue((ControlHandle) itemHandle, value);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReferenceDistance1,      gTestLoLevelData.referenceDistance1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReferenceDistance2,      gTestLoLevelData.referenceDistance2,      gTestLoLevelData.referenceDistanceRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAngleDeg1,      gTestLoLevelData.coneAngleDeg1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAngleDeg2,      gTestLoLevelData.coneAngleDeg2,      gTestLoLevelData.coneAngleDegRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAttenuation1,      gTestLoLevelData.coneAttenuation1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAttenuation2,      gTestLoLevelData.coneAttenuation2,      gTestLoLevelData.coneAttenuationRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ElevationDeg1,      gTestLoLevelData.elevationDeg1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ElevationDeg2,      gTestLoLevelData.elevationDeg2,      gTestLoLevelData.elevationDegRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_AzimuthDeg1,      gTestLoLevelData.azimuthDeg1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_AzimuthDeg2,      gTestLoLevelData.azimuthDeg2,      gTestLoLevelData.azimuthDegRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Distance1,      gTestLoLevelData.distance1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Distance2,      gTestLoLevelData.distance2,      gTestLoLevelData.distanceRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ProjectionAngleDeg1,      gTestLoLevelData.projectionAngleDeg1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ProjectionAngleDeg2,      gTestLoLevelData.projectionAngleDeg2,      gTestLoLevelData.projectionAngleDegRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_SourceVelocity1,      gTestLoLevelData.sourceVelocity1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_SourceVelocity2,      gTestLoLevelData.sourceVelocity2,      gTestLoLevelData.sourceVelocityRange);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ListenerVelocity1,      gTestLoLevelData.listenerVelocity1,      true);    Utils_SetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ListenerVelocity2,      gTestLoLevelData.listenerVelocity2,      gTestLoLevelData.listenerVelocityRange);}/* ============================================================================= *    TestLoLevel_GetDialogFields (internal) * *  Grabs the contents of the dialog fields and puts them into gTestLoLevelData. * ========================================================================== */void TestLoLevel_GetDialogFields(  void){  const float      small = 0.000001;  const float      big = 10000000.0;  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  TTestLoLevelData  data;  short        badItem;    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Duration,      &amp;data.duration,      NULL,      small,      big))  {    badItem = kLoLevelItem_Duration;    goto bail;  }    if (!Utils_GetUInt32Field(      gTestLoLevelDialog,      kLoLevelItem_CPULoad1,      &amp;data.cpuLoad1,      NULL,      0,      gTestLoLevelCPULoadLimit))  {    badItem = kLoLevelItem_CPULoad1;    goto bail;  }    if (!Utils_GetUInt32Field(      gTestLoLevelDialog,      kLoLevelItem_CPULoad2,      &amp;data.cpuLoad2,      &amp;data.cpuLoadRange,      0,      gTestLoLevelCPULoadLimit))  {    badItem = kLoLevelItem_CPULoad2;    goto bail;  }    GetDialogItem(gTestLoLevelDialog, kLoLevelItem_Medium, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  switch (GetControlValue((ControlHandle) itemHandle))  {    case kMediumItem_Air:      data.medium = kSSpMedium_Air;    break;        case kMediumItem_Water:      data.medium = kSSpMedium_Water;    break;        default:      assert(0);  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Humidity1,      &amp;data.humidity1,      NULL,      0.0,      100.0))  {    badItem = kLoLevelItem_Humidity1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Humidity2,      &amp;data.humidity2,      &amp;data.humidityRange,      0.0,      100.0))  {    badItem = kLoLevelItem_Humidity2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomSize1,      &amp;data.roomSize1,      NULL,      0.0,      big))  {    badItem = kLoLevelItem_RoomSize1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomSize2,      &amp;data.roomSize2,      &amp;data.roomSizeRange,      0.0,      big))  {    badItem = kLoLevelItem_RoomSize2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomReflectivity1,      &amp;data.roomReflectivity1,      NULL,      -big,      -small))  {    badItem = kLoLevelItem_RoomReflectivity1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_RoomReflectivity2,      &amp;data.roomReflectivity2,      &amp;data.roomReflectivityRange,      -big,      -small))  {    badItem = kLoLevelItem_RoomReflectivity2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReverbAttenuation1,      &amp;data.reverbAttenuation1,      NULL,      -big,      big))  {    badItem = kLoLevelItem_ReverbAttenuation1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReverbAttenuation2,      &amp;data.reverbAttenuation2,      &amp;data.reverbAttenuationRange,      -big,      big))  {    badItem = kLoLevelItem_ReverbAttenuation2;    goto bail;  }    GetDialogItem(gTestLoLevelDialog, kLoLevelItem_SourceMode, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  switch (GetControlValue((ControlHandle) itemHandle))  {    case kSourceModeItem_Unfiltered:      data.sourceMode = kSSpSourceMode_Unfiltered;    break;        case kSourceModeItem_Localized:      data.sourceMode = kSSpSourceMode_Localized;    break;        case kSourceModeItem_Ambient:      data.sourceMode = kSSpSourceMode_Ambient;    break;        case kSourceModeItem_Binaural:      data.sourceMode = kSSpSourceMode_Binaural;    break;        default:      assert(0);  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReferenceDistance1,      &amp;data.referenceDistance1,      NULL,      small,      big))  {    badItem = kLoLevelItem_ReferenceDistance1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ReferenceDistance2,      &amp;data.referenceDistance2,      &amp;data.referenceDistanceRange,      small,      big))  {    badItem = kLoLevelItem_ReferenceDistance2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAngleDeg1,      &amp;data.coneAngleDeg1,      NULL,      0.0,      360.0))  {    badItem = kLoLevelItem_ConeAngleDeg1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAngleDeg2,      &amp;data.coneAngleDeg2,      &amp;data.coneAngleDegRange,      0.0,      360.0))  {    badItem = kLoLevelItem_ConeAngleDeg2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAttenuation1,      &amp;data.coneAttenuation1,      NULL,      -big,      big))  {    badItem = kLoLevelItem_ConeAttenuation1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ConeAttenuation2,      &amp;data.coneAttenuation2,      &amp;data.coneAttenuationRange,      -big,      big))  {    badItem = kLoLevelItem_ConeAttenuation2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ElevationDeg1,      &amp;data.elevationDeg1,      NULL,      -big,      big))  {    badItem = kLoLevelItem_ElevationDeg1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ElevationDeg2,      &amp;data.elevationDeg2,      &amp;data.elevationDegRange,      -big,      big))  {    badItem = kLoLevelItem_ElevationDeg2;    goto bail;  }      if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_AzimuthDeg1,      &amp;data.azimuthDeg1,      NULL,      -big,      big))  {    badItem = kLoLevelItem_AzimuthDeg1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_AzimuthDeg2,      &amp;data.azimuthDeg2,      &amp;data.azimuthDegRange,      -big,      big))  {    badItem = kLoLevelItem_AzimuthDeg2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Distance1,      &amp;data.distance1,      NULL,      small,      big))  {    badItem = kLoLevelItem_Distance1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_Distance2,      &amp;data.distance2,      &amp;data.distanceRange,      small,      big))  {    badItem = kLoLevelItem_Distance2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ProjectionAngleDeg1,      &amp;data.projectionAngleDeg1,      NULL,      0.0,      180.0))  {    badItem = kLoLevelItem_ProjectionAngleDeg1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ProjectionAngleDeg2,      &amp;data.projectionAngleDeg2,      &amp;data.projectionAngleDegRange,      0.0,      180.0))  {    badItem = kLoLevelItem_ProjectionAngleDeg2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_SourceVelocity1,      &amp;data.sourceVelocity1,      NULL,      -big,      big))  {    badItem = kLoLevelItem_SourceVelocity1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_SourceVelocity2,      &amp;data.sourceVelocity2,      &amp;data.sourceVelocityRange,      -big,      big))  {    badItem = kLoLevelItem_SourceVelocity2;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ListenerVelocity1,      &amp;data.listenerVelocity1,      NULL,      -big,      big))  {    badItem = kLoLevelItem_ListenerVelocity1;    goto bail;  }    if (!Utils_GetFloatField(      gTestLoLevelDialog,      kLoLevelItem_ListenerVelocity2,      &amp;data.listenerVelocity2,      &amp;data.listenerVelocityRange,      -big,      big))  {    badItem = kLoLevelItem_ListenerVelocity2;    goto bail;  }    // All fields are good -- finish up  gTestLoLevelData = data;  TestLoLevel_DeriveData();    TestLoLevel_SetDialogFields();    return;    // Error exitbail:  SelectDialogItemText(gTestLoLevelDialog, badItem, 0, 32767);  StopAlert(kAlrtID_BadField, NULL);}/* ============================================================================= *    TestLoLevel_Preset (external) * *  Updates the fields to the chosen preset value. * ========================================================================== */void TestLoLevel_Preset(  UInt32      index){  TTestLoLevelData preset[] = {    { /* nothing for index zero */ 0 },    { /* Side-to-Side */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */ -90.0,  90.0, true,        /* distance        */   1.0,   0.0, false,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* dividing line */ 0 },    { /* Ahead */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Ahead-Right */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */  45.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Right */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */  90.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Behind-Right */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */ 180.0,   0.0, false,        /* azimuthDeg      */  45.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Behind */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */ 180.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Behind-Left */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */ 180.0,   0.0, false,        /* azimuthDeg      */ -45.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Left */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */ -90.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Ahead-Left */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */ -45.0,   0.0, false,        /* distance        */   1.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* dividing line */ 0 },    { /* Around (1 meter) */        /* duration        */    4.0,        /* cpuLoad        */      0,     0, false,        /* medium        */  kSSpMedium_Air,        /* humidity        */    0.0,   0.0, false,        /* roomSize        */    0.0,   0.0, false,        /* roomReflectivity    */  -10.0,   0.0, false,        /* reverbAttenuation  */  -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */    1.0,   0.0, false,        /* coneAngleDeg      */   90.0,   0.0, false,        /* coneAttenuation    */    0.0,   0.0, false,        /* elevationDeg      */    0.0,   0.0, false,        /* azimuthDeg      */ -180.0, 180.0, true,        /* distance        */    1.0,   0.0, false,        /* projectionAngleDeg  */    0.0,   0.0, false,        /* sourceVelocity    */    0.0,   0.0, false,        /* listenerVelocity    */    0.0,   0.0, false    },    { /* Around (10 meters) */        /* duration        */    4.0,        /* cpuLoad        */      0,     0, false,        /* medium        */  kSSpMedium_Air,        /* humidity        */    0.0,   0.0, false,        /* roomSize        */    0.0,   0.0, false,        /* roomReflectivity    */  -10.0,   0.0, false,        /* reverbAttenuation  */  -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */    1.0,   0.0, false,        /* coneAngleDeg      */   90.0,   0.0, false,        /* coneAttenuation    */    0.0,   0.0, false,        /* elevationDeg      */    0.0,   0.0, false,        /* azimuthDeg      */ -180.0, 180.0, true,        /* distance        */   10.0,   0.0, false,        /* projectionAngleDeg  */    0.0,   0.0, false,        /* sourceVelocity    */    0.0,   0.0, false,        /* listenerVelocity    */    0.0,   0.0, false    },    { /* dividing line */ 0 },    { /* Reverb \xD1 Living Room */        /* duration        */  10.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */  10.0,   0.0, false,        /* roomReflectivity    */ -20.0,   0.0, false,        /* reverbAttenuation  */   0.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   2.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Reverb \xD1 Cave */        /* duration        */  10.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */ 100.0,   0.0, false,        /* roomReflectivity    */ -40.0,   0.0, false,        /* reverbAttenuation  */  20.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   2.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Reverb \xD1 Stadium */        /* duration        */  10.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */ 250.0,   0.0, false,        /* roomReflectivity    */ -15.0,   0.0, false,        /* reverbAttenuation  */  -5.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   2.0,  10.0, true,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* dividing line */ 0 },    { /* Source Doppler */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   1.0,   0.0, false,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */ -20.0,  20.0, true,        /* listenerVelocity    */   0.0,   0.0, false    },    { /* Listener Doppler */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   1.0,   0.0, false,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */   0.0,   0.0, false,        /* listenerVelocity    */ -20.0,  20.0, true    },    { /* Combined Doppler */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   1.0,   0.0, false,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */ -20.0,  20.0, true,        /* listenerVelocity    */ -20.0,  20.0, true    },    { /* Cancelled Doppler */        /* duration        */   4.0,        /* cpuLoad        */     0,     0, false,        /* medium        */ kSSpMedium_Air,        /* humidity        */   0.0,   0.0, false,        /* roomSize        */   0.0,   0.0, false,        /* roomReflectivity    */ -10.0,   0.0, false,        /* reverbAttenuation  */ -15.0,   0.0, false,        /* sourceMode      */ kSSpSourceMode_Localized,        /* referenceDistance  */   1.0,   0.0, false,        /* coneAngleDeg      */  90.0,   0.0, false,        /* coneAttenuation    */   0.0,   0.0, false,        /* elevationDeg      */   0.0,   0.0, false,        /* azimuthDeg      */   0.0,   0.0, false,        /* distance        */   1.0,   0.0, false,        /* projectionAngleDeg  */   0.0,   0.0, false,        /* sourceVelocity    */  20.0, -20.0, true,        /* listenerVelocity    */ -20.0,  20.0, true    }  };    gTestLoLevelData = preset[index];    TestLoLevel_DeriveData();  TestLoLevel_SetDialogFields();}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/SoundSprocketTest/listing16.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/SoundSprocketTest/listing16.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/SoundSprocketTest/listing16.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Address Book Programming Guide for Mac OS X: Managing Address Book Records</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Managing Address Book Records"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001022" title="Managing Address Book Records"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../AppleApplications/index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../../AppleApplications/AddressBook-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP30000442" target="_top">Address Book</a> &gt; <a href="../index.html" target="_top">Address Book Programming Guide for Mac OS X</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/WhatsInAB.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AccessingData.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20001022-BABHHIHC" title="Managing Address Book Records"></a><hr /><H1>Managing Address Book Records </H1>

<p>You can manage the people and groups within a user’s Address Book. This document explains how get the user’s address book, add and remove people and groups from that address book, manage groups, find the record that corresponds to the logged-in user, and save your changes.</p>

<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ManagingGroups.html#//apple_ref/doc/uid/20001022-102346">Accessing the Address Book</a>
				
			<br/>
			
        
			
			
				<a href="ManagingGroups.html#//apple_ref/doc/uid/20001022-101861">Adding and Removing People and Groups</a>
				
			<br/>
			
        
			
			
				<a href="ManagingGroups.html#//apple_ref/doc/uid/20001022-101852">Managing Groups</a>
				
			<br/>
			
        
			
			
				<a href="ManagingGroups.html#//apple_ref/doc/uid/20001022-102191">Accessing the User’s Record</a>
				
			<br/>
			
        
			
			
				<a href="ManagingGroups.html#//apple_ref/doc/uid/20001022-102221">Saving Your Changes</a>
				
			<br/>
			
        
			
			
				<a href="ManagingGroups.html#//apple_ref/doc/uid/20001022-134631">An Example</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001022-102346" title="Accessing the Address Book"></a><h2>Accessing the Address Book</h2>
<p>To get the address book for the currently logged-in user, use the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/clm/ABAddressBook/sharedAddressBook" target="_top">sharedAddressBook</a></code>. If you call these procedures more than once or try to create a new address book, you get a pointer to the shared address book.</p>
<a name="//apple_ref/doc/uid/20001022-101861" title="Adding and Removing People and Groups"></a><h2>Adding and Removing People and Groups</h2>
<p>Adding a new person or group takes two steps: creating the appropriate record and then adding it to the user’s address book.</p>
<p>First, create the person or group. You must allocate and initialize the respective ABPerson or ABGroup object. </p>
<p>Second, add the person or group to the Address Book using the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/addRecord:" target="_top">addRecord:</a></code>. </p>
<p>To remove a person or group, use the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/removeRecord:" target="_top">removeRecord:</a></code>. </p>
<a name="//apple_ref/doc/uid/20001022-101852" title="Managing Groups"></a><h2>Managing Groups</h2>
<p>The Address Book lets you add people and subgroups to groups, as well as find out all groups that a person or subgroup is in. </p>
<p>To add and remove people from a group, use the methods <code><a href="../../../Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/instm/ABGroup/addMember:" target="_top">addMember:</a></code> and <code><a href="../../../Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/instm/ABGroup/removeMember:" target="_top">removeMember:</a></code>. To get a list of all the groups a person is in, use the method <code><a href="../../../Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/occ/instm/ABPerson/parentGroups" target="_top">parentGroups</a></code>.</p>
<p>You can also add groups to a group. For example, a user could have a group called “Pet Lovers” that contains the groups “Dog Lovers” and “Cat Lovers.” To add and remove groups from another group, use the methods <code><a href="../../../Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/instm/ABGroup/addSubgroup:" target="_top">addSubgroup:</a></code> and <code><a href="../../../Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/instm/ABGroup/removeSubgroup:" target="_top">removeSubgroup:</a></code>. The Address Book will not let you create a circular dependency. For example, if “Dog Lovers” is a subgroup of “Pet Lovers,” then “Pet Lovers” cannot be a subgroup of “Dog Lovers.” To get a list of all groups that another group is a subgroup of, use the method <code><a href="../../../Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/instm/ABGroup/parentGroups" target="_top">parentGroups</a></code>. </p>
<p>To get lists of what’s in a group, use the methods <code><!--a target="_top" -->members<!--/a--></code> and <code><a href="../../../Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/instm/ABGroup/subgroups" target="_top">subgroups</a></code> or the functions <code><a href="../../../Reference/AddressBook/C/ABGroupRef/Reference/reference.html#//apple_ref/c/func/ABGroupCopyArrayOfAllMembers" target="_top">ABGroupCopyArrayOfAllMembers</a></code> and <code><a href="../../../Reference/AddressBook/C/ABGroupRef/Reference/reference.html#//apple_ref/c/func/ABGroupCopyArrayOfAllSubgroups" target="_top">ABGroupCopyArrayOfAllSubgroups</a></code>. </p>
<a name="//apple_ref/doc/uid/20001022-102191" title="Accessing the User&acirc;&#128;&#153;s Record"></a><h2>Accessing the User’s Record</h2>
<p>The user can specify a record that contains information about himself or herself. That lets your application find the name, address, or phone number of the logged-in user, so you can use it when filling out forms, for example. To get the logged-in user’s record, use the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/me" target="_top">me</a></code>. To set the logged-in user’s record, use the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/setMe:" target="_top">setMe:</a></code>. </p>
<a name="//apple_ref/doc/uid/20001022-102221" title="Saving Your Changes"></a><h2>Saving Your Changes</h2>
<p>When you modify the Address Book database, those changes are made in memory, and not to the database itself. Unless you save those changes, they will be lost.</p>
<p>To save your changes to the address book, use the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/save" target="_top">save</a></code>. To test whether there are unsaved changes to the address book, use the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/hasUnsavedChanges" target="_top">hasUnsavedChanges</a></code>.</p>
<a name="//apple_ref/doc/uid/20001022-134631" title="An Example"></a><h2>An Example</h2>
<p>This brief Objective-C example adds a person named John Doe to the current user’s address book. Take note of how the code accesses the shared address book and how it allocates a new ABPerson object. Also note the properties used (in this case, just our subject’s first name and last), and the final save, which sends the changes to the address book:</p>
<div class="codesample"><table><tr><td scope="row"><pre>ABAddressBook *addressBook;<span></span></pre></td></tr><tr><td scope="row"><pre>ABPerson *newPerson;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>addressBook = [ABAddressBook sharedAddressBook];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>newPerson = [[[ABPerson alloc] init] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>[newPerson setValue:@”John”<span></span></pre></td></tr><tr><td scope="row"><pre>    forProperty:kABFirstNameProperty];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>[newPerson setValue:@"Doe"<span></span></pre></td></tr><tr><td scope="row"><pre>        forProperty:kABLastNameProperty];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>[addressBook addRecord:newPerson];<span></span></pre></td></tr><tr><td scope="row"><pre>[addressBook save];<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/WhatsInAB.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="AccessingData.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-04-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/UserExperience/Conceptual/AddressBook/Tasks/ManagingGroups.html%3Fid%3D10000117i-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/UserExperience/Conceptual/AddressBook/Tasks/ManagingGroups.html%3Fid%3D10000117i-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/UserExperience/Conceptual/AddressBook/Tasks/ManagingGroups.html%3Fid%3D10000117i-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

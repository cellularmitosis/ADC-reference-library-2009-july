<html><head><title>Mac OS X
 Manual Page For awk(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/awk" title="Mac OS X
 Manual Page for awk(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/awk"; name=awk(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
AWK(1)                                                                                                AWK(1)



awk

<b>NAME</b>
       awk - pattern-directed scanning and processing language

<b>SYNOPSIS</b>
       <b>awk</b> [ <b>-F</b> <u>fs</u> ] [ <b>-v</b> <u>var=value</u> ] [ <u>'prog'</u> | <b>-f</b> <u>progfile</u> ] [ <u>file</u> <u>...</u>  ]

<b>DESCRIPTION</b>
       <u>Awk</u>  scans  each input <u>file</u> for lines that match any of a set of patterns specified literally in <u>prog</u>
       or in one or more files specified as <b>-f</b> <u>progfile</u>.  With each  pattern  there  can  be  an  associated
       action  that  will  be  performed  when  a  line of a <u>file</u> matches the pattern.  Each line is matched
       against the pattern portion of every pattern-action statement; the associated action is performed for
       each  matched  pattern.  The file name <b>-</b> means the standard input.  Any <u>file</u> of the form <u>var=value</u> is
       treated as an assignment, not a filename, and is executed at the time it would have been opened if it
       were a filename.  The option <b>-v</b> followed by <u>var=value</u> is an assignment to be done before <u>prog</u> is exe-<font color="#ffffff" class="whiteout">cuted;&nbsp;executed;</font>
       cuted; any number of <b>-v</b> options may be present.  The <b>-F</b> <u>fs</u> option defines the input  field  separator
       to be the regular expression <u>fs.</u>

       An  input  line  is normally made up of fields separated by white space, or by regular expression <b>FS</b>.
       The fields are denoted <b>$1</b>, <b>$2</b>, ..., while <b>$0</b> refers to the entire line.  If <b>FS</b>  is  null,  the  input
       line is split into one field per character.

       A pattern-action statement has the form

              <u>pattern</u> <b>{</b> <u>action</u> <b>}</b>

       A  missing  <b>{</b> <u>action</u> <b>}</b> means print the line; a missing pattern always matches.  Pattern-action state-<font color="#ffffff" class="whiteout">ments&nbsp;statements</font>
       ments are separated by newlines or semicolons.

       An action is a sequence of statements.  A statement can be one of the following:

              if( <u>expression</u> ) <u>statement</u> [ else <u>statement</u> ]
              while( <u>expression</u> ) <u>statement</u>
              for( <u>expression</u> ; <u>expression</u> ; <u>expression</u> ) <u>statement</u>
              for( <u>var</u> in <u>array</u> ) <u>statement</u>
              do <u>statement</u> while( <u>expression</u> )
              break
              continue
              { [ <u>statement</u> <u>...</u> ] }
              <u>expression</u>              # commonly <u>var</u> <u>=</u> <u>expression</u>
              print [ <u>expression-list</u> ] [ &gt; <u>expression</u> ]
              printf <u>format</u> [ , <u>expression-list</u> ] [ &gt; <u>expression</u> ]
              return [ <u>expression</u> ]
              next                    # skip remaining patterns on this input line
              nextfile                # skip rest of this file, open next, start at top
              delete <u>array</u>[ <u>expression</u> ]# delete an array element
              delete <u>array</u>            # delete all elements of array
              exit [ <u>expression</u> ]     # exit immediately; status is <u>expression</u>

       Statements are terminated by semicolons, newlines or right braces.  An empty  <u>expression-list</u>  stands
       for  <b>$0</b>.   String  constants are quoted " ", with the usual C escapes recognized within.  Expressions
       take on string or numeric values as appropriate, and are built using the operators <b>+</b> <b>-</b> <b>*</b> <b>/</b> <b>%</b> <b>^</b> (expo-<font color="#ffffff" class="whiteout">nentiation),&nbsp;(exponentiation),</font>
       nentiation), and concatenation (indicated by white space).  The operators <b>!</b> <b>++</b> <b>--</b> <b>+=</b> <b>-=</b> <b>*=</b> <b>/=</b> <b>%=</b> <b>^=</b> <b>&gt;</b>
       <b>&gt;=</b> <b>&lt;</b> <b>&lt;=</b> <b>==</b> <b>!=</b> <b>?:</b> are also available  in  expressions.   Variables  may  be  scalars,  array  elements
       (denoted <u>x</u><b>[</b><u>i</u><b>]</b><u>)</u> or fields.  Variables are initialized to the null string.  Array subscripts may be any
       string, not necessarily numeric; this allows for a form of associative memory.   Multiple  subscripts
       such as <b>[i,j,k]</b> are permitted; the constituents are concatenated, separated by the value of <b>SUBSEP</b>.

       The  <b>print</b>  statement prints its arguments on the standard output (or on a file if <b>&gt;</b><u>file</u> or <b>&gt;&gt;</b><u>file</u> is
       present or on a pipe if <b>|</b><u>cmd</u> is present), separated by the current output field separator, and termi-<font color="#ffffff" class="whiteout">nated&nbsp;terminated</font>
       nated  by  the  output  record separator.  <u>file</u> and <u>cmd</u> may be literal names or parenthesized expres-<font color="#ffffff" class="whiteout">sions;&nbsp;expressions;</font>
       sions; identical string values in different statements denote the same open file.  The <b>printf</b>  state-<font color="#ffffff" class="whiteout">ment&nbsp;statement</font>
       ment  formats  its  expression  list  according to the format (see <a href="../man3/printf.3.html#//apple_ref/doc/man/3/printf"><u>printf</u>(3)</a>)<u>.</u>  The built-in function
       <b>close(</b><u>expr</u><b>)</b> closes the file or pipe <u>expr</u>.  The built-in function <b>fflush(</b><u>expr</u><b>)</b>  flushes  any  buffered
       output for the file or pipe <u>expr</u>.

       The  mathematical  functions  <b>exp</b>, <b>log</b>, <b>sqrt</b>, <b>sin</b>, <b>cos</b>, and <b>atan2</b> are built in.  Other built-in func-<font color="#ffffff" class="whiteout">tions:&nbsp;functions:</font>
       tions:

       <b>length</b> the length of its argument taken as a string, or of <b>$0</b> if no argument.

       <b>rand</b>   random number on (0,1)

       <b>srand</b>  sets seed for <b>rand</b> and returns the previous seed.

       <b>int</b>    truncates to an integer value

       <b>substr(</b><u>s</u><b>,</b> <u>m</u><b>,</b> <u>n</u><b>)</b>
              the <u>n</u>-character substring of <u>s</u> that begins at position <u>m</u> counted from 1.

       <b>index(</b><u>s</u><b>,</b> <u>t</u><b>)</b>
              the position in <u>s</u> where the string <u>t</u> occurs, or 0 if it does not.

       <b>match(</b><u>s</u><b>,</b> <u>r</u><b>)</b>
              the position in <u>s</u> where the regular expression <u>r</u> occurs, or 0 if it does not.   The  variables
              <b>RSTART</b> and <b>RLENGTH</b> are set to the position and length of the matched string.

       <b>split(</b><u>s</u><b>,</b> <u>a</u><b>,</b> <u>fs</u><b>)</b>
              splits  the string <u>s</u> into array elements <u>a</u><b>[1]</b><u>,</u> <u>a</u><b>[2]</b><u>,</u> ..., <u>a</u><b>[</b><u>n</u><b>]</b><u>,</u> and returns <u>n</u>.  The separation
              is done with the regular expression <u>fs</u> or with the field separator <b>FS</b> if <u>fs</u> is not given.   An
              empty string as field separator splits the string into one array element per character.

       <b>sub(</b><u>r</u><b>,</b> <u>t</u><b>,</b> <u>s</u><b>)</b>
              substitutes  <u>t</u>  for the first occurrence of the regular expression <u>r</u> in the string <u>s</u>.  If <u>s</u> is
              not given, <b>$0</b> is used.

       <b>gsub</b>   same as <b>sub</b> except that all occurrences of the regular expression are replaced; <b>sub</b>  and  <b>gsub</b>
              return the number of replacements.

       <b>sprintf(</b><u>fmt</u><b>,</b> <u>expr</u><b>,</b> <u>...</u> <b>)</b>
              the string resulting from formatting <u>expr</u> <u>...</u>  according to the <a href="../man3/printf.3.html#//apple_ref/doc/man/3/printf"><u>printf</u>(3)</a> format <u>fmt</u>

       <b>system(</b><u>cmd</u><b>)</b>
              executes <u>cmd</u> and returns its exit status

       <b>tolower(</b><u>str</u><b>)</b>
              returns  a copy of <u>str</u> with all upper-case characters translated to their corresponding lower-<font color="#ffffff" class="whiteout">case&nbsp;lowercase</font>
              case equivalents.

       <b>toupper(</b><u>str</u><b>)</b>
              returns a copy of <u>str</u> with all lower-case characters translated to their corresponding  upper-<font color="#ffffff" class="whiteout">case&nbsp;uppercase</font>
              case equivalents.

       The  ``function'' <b>getline</b> sets <b>$0</b> to the next input record from the current input file; <b>getline</b> <b>&lt;</b><u>file</u>
       sets <b>$0</b> to the next record from <u>file</u>.  <b>getline</b> <u>x</u> sets variable <u>x</u> instead.   Finally,  <u>cmd</u>  <b>|</b>  <b>getline</b>
       pipes  the output of <u>cmd</u> into <b>getline</b>; each call of <b>getline</b> returns the next line of output from <u>cmd</u>.
       In all cases, <b>getline</b> returns 1 for a successful input, 0 for end of file, and -1 for an error.

       Patterns are arbitrary Boolean combinations (with <b>!</b> <b>||</b> <b>&amp;&amp;</b>)  of  regular  expressions  and  relational
       expressions.   Regular expressions are as defined in <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format"><u>re</u><b>_</b><u>format</u>(7)</a>.  Isolated regular expressions in a
       pattern apply to the entire line.  Regular expressions may  also  occur  in  relational  expressions,
       using  the  operators <b>~</b> and <b>!~</b>.  <b>/</b><u>re</u><b>/</b> is a constant regular expression; any string (constant or vari-
       able) may be used as a regular expression, except in the position of an isolated  regular  expression
       in a pattern.

       A pattern may consist of two patterns separated by a comma; in this case, the action is performed for
       all lines from an occurrence of the first pattern though an occurrence of the second.

       A relational expression is one of the following:

              <u>expression</u> <u>matchop</u> <u>regular-expression</u>
              <u>expression</u> <u>relop</u> <u>expression</u>
              <u>expression</u> <b>in</b> <u>array-name</u>
              <b>(</b><u>expr</u><b>,</b><u>expr,...</u><b>)</b> <b>in</b> <u>array-name</u>

       where a relop is any of the six relational operators in C, and a matchop is either <b>~</b> (matches) or  <b>!~</b>
       (does  not  match).  A conditional is an arithmetic expression, a relational expression, or a Boolean
       combination of these.

       The special patterns <b>BEGIN</b> and <b>END</b> may be used to capture control before the first input line is read
       and after the last.  <b>BEGIN</b> and <b>END</b> do not combine with other patterns.

       Variable names with special meanings:

       <b>CONVFMT</b>
              conversion format used when converting numbers (default <b>%.6g</b>)

       <b>FS</b>     regular expression used to separate fields; also settable by option <b>-F</b><u>fs.</u>

       <b>NF</b>     number of fields in the current record

       <b>NR</b>     ordinal number of the current record

       <b>FNR</b>    ordinal number of the current record in the current file

       <b>FILENAME</b>
              the name of the current input file

       <b>RS</b>     input record separator (default newline)

       <b>OFS</b>    output field separator (default blank)

       <b>ORS</b>    output record separator (default newline)

       <b>OFMT</b>   output format for numbers (default <b>%.6g</b>)

       <b>SUBSEP</b> separates multiple subscripts (default 034)

       <b>ARGC</b>   argument count, assignable

       <b>ARGV</b>   argument array, assignable; non-null members are taken as filenames

       <b>ENVIRON</b>
              array of environment variables; subscripts are names.

       Functions may be defined (at the position of a pattern-action statement) thus:

              <b>function</b> <b>foo(a,</b> <b>b,</b> <b>c)</b> <b>{</b> <b>...;</b> <b>return</b> <b>x</b> <b>}</b>

       Parameters  are  passed  by  value  if scalar and by reference if array name; functions may be called
       recursively.  Parameters are local to the function; all other variables are global.  Thus local vari-<font color="#ffffff" class="whiteout">ables&nbsp;variables</font>
       ables may be created by providing excess parameters in the function definition.

<b>EXAMPLES</b>
       length($0) &gt; 72
              Print lines longer than 72 characters.

       { print $2, $1 }
              Print first two fields in opposite order.

       BEGIN { FS = ",[ \t]*|[ \t]+" }
             { print $2, $1 }
              Same, with input fields separated by comma and/or blanks and tabs.

            { s += $1 }
       END  { print "sum is", s, " average is", s/NR }
              Add up first column, print sum and average.

       /start/, /stop/
              Print all lines between start/stop pairs.

       BEGIN     {    # Simulate <a href="echo.1.html#//apple_ref/doc/man/1/echo">echo(1)</a>
            for (i = 1; i &lt; ARGC; i++) printf "%s ", ARGV[i]
            printf "\n"
            exit }

<b>SEE</b> <b>ALSO</b>
       <a href="lex.1.html#//apple_ref/doc/man/1/lex"><u>lex</u>(1)</a>, <a href="sed.1.html#//apple_ref/doc/man/1/sed"><u>sed</u>(1)</a>
       A.  V.  Aho,  B.  W. Kernighan, P. J. Weinberger, <u>The</u> <u>AWK</u> <u>Programming</u> <u>Language,</u> Addison-Wesley, 1988.
       ISBN 0-201-07981-X

<b>BUGS</b>
       There are no explicit conversions between numbers and strings.  To force an expression to be  treated
       as a number add 0 to it; to force it to be treated as a string concatenate "" to it.
       The scope rules for variables in functions are a botch; the syntax is worse.



                                                                                                      AWK(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/awk.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/awk.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/awk.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

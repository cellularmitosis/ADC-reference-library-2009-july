<HTML>		<HEAD>		<TITLE>			EOAdaptorOperation		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>EOAdaptor Reference</font><br><br><!--end of path --><a href="../EOAccessTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <BR><h1><FONT COLOR=\"#000066\"><a name="//apple_ref/java/cl/EOAdaptorOperation">EOAdaptorOperation</a></FONT></h1><br><blockquote><b>Inheritsfrom: </b> NSObject</blockquote><blockquote><b>Package: </b>com.apple.yellow.webobjects</blockquote><HR SIZE=4><br><h2>Class Description</h2><hr><p>An EOAdaptorOperation object represents a primitive operationin a database server-lock, insert, update, or delete a row; orexecute a stored procedure-and all the necessary information requiredby the operation. An EOAdaptorOperation is processed by an EOAdaptorChannelobject in the method  <a frame= "conv" href="EOAdaptorChannel.html#//apple_ref/java/instm/EOAdaptorChannel/performAdaptorOperation">performAdaptorOperation</a>.You don't ordinarily create instances of EOAdaptorOperation; rather,the Framework automatically creates an EOAdaptorOperation objectand sends it to an adaptor channel when your application needs thedatabase server to perform an operation. You generally interactwith EOAdaptorOperation objects only if you need to specify theorder in which a set of operations are carried out (see the descriptionfor the EODatabaseContext delegate method databaseContext:willOrderAdaptorOperationsFromDatabaseOperations:).</p><p>An EOAdaptorOperation has an entity and an operator (the typeof operation the object represents). An adaptor operation's operator(<code>AdaptorLockOperator</code>, <code>AdaptorInsertOperator</code>, <code>AdaptorUpdateOperator</code>, <code>AdaptorDeleteOperator</code>,or <code>AdaptorStoredProcedureOperator</code>)determines additional, operator-dependent information used by theEOAdaptorOperation object. For example, only a stored procedureoperation has an EOStoredProcedure object. The operator-dependentinformation is accessible using the methods described below.</p><br><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Constructors</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/EOAdaptorOperation">EOAdaptorOperation</a></dd></dl><dl><dt>Accessing the entity</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/entity">entity</a></dd></dl><dl><dt>Accessing the operator</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/setAdaptorOperator">setAdaptorOperator</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/adaptorOperator">adaptorOperator</a></dd></dl><dl><dt>Accessing the qualifier</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/setQualifier">setQualifier</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/qualifier">qualifier</a></dd></dl><dl><dt>Accessing locking attributes</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/setAttributes">setAttributes</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/attributes">attributes</a></dd></dl><dl><dt>Accessing operation values</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/setChangedValues">setChangedValues</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/changedValues">changedValues</a></dd></dl><dl><dt>Accessing a stored procedure</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/setStoredProcedure">setStoredProcedure</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/storedProcedure">storedProcedure</a></dd></dl><dl><dt>Handling errors duringthe operation</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/setException">setException</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/exception">exception</a></dd></dl><dl><dt>Comparing operations</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/compareAdaptorOperation">compareAdaptorOperation</a></dd></dl></blockquote><br><br><h2>Constructors</h2><hr><a name = "BAADDAGA"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/EOAdaptorOperation">EOAdaptorOperation</a></h3></a><p><code>public <b>EOAdaptorOperation</b>(EOEntity <em>entity</em>)</code></p>Creates and returns a new EOAdaptorOperation,with <em>entity</em> as the entity to whichthe operation will be applied.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/entity">entity</a></p><hr WIDTH=25% ALIGN=LEFT><BR><BR><h2>Instance Methods</h2><hr><a name = "adaptorOperator"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/adaptorOperator">adaptorOperator</a></h3></a><p><code>public int <b>adaptorOperator</b>()</code></p>Returns the receiver's adaptor operator. Theoperator indicates which of the other adaptor operation attributesare valid. For example, an adaptor operation whose operator is <code>AdaptorInsertOperator</code> uses  <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/changedValues">changedValues</a>, butnot  <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/attributes">attributes</a>,  <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/qualifier">qualifier</a>, or  <a frame= "conv" href="#//apple_ref/java/instm/EOAdaptorOperation/storedProcedure">storedProcedure</a>.<hr WIDTH=25% ALIGN=LEFT><a name = "BAADGGCE"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/attributes">attributes</a></h3></a><p><code>public NSArray <b>attributes</b>()</code></p>Returns the array of attributes to select whenlocking the row. If attributes have not been assigned to the receiver,the primary key attributes are selected. Only valid for adaptoroperations with the <code>AdaptorLockOperator</code>.<hr WIDTH=25% ALIGN=LEFT><a name = "BAABCIGA"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/changedValues">changedValues</a></h3></a><p><code>public NSDictionary <b>changedValues</b>()</code></p>Returns the dictionary of values that need tobe updated, inserted, or compared for locking purposes.<hr WIDTH=25% ALIGN=LEFT><a name = "compareAdaptorOperation_"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/compareAdaptorOperation">compareAdaptorOperation</a></h3></a><p><code>public int <b>compareAdaptorOperation</b>(EOAdaptorOperation <em>operation</em>)</code></p>Orders adaptor operations alphabetically byentity name and by adaptor operator within the same entity. Theadaptor operators are ordered as follows:<ul><li><code>AdaptorLockOperator</code></li><li><code>AdaptorInsertOperator</code></li><li><code>AdaptorUpdateOperator</code></li><li><code>AdaptorDeleteOperator</code></li><li><code>AdaptorStoredProcedureOperator</code></li></ul><p><code>AdaptorLockOperator</code> precedes <code>AdaptorInsertOperator</code>, <code>AdaptorInsertOperator</code> precedes <code>AdaptorUpdateOperator</code>,and so on.</p><p>An EODatabaseContext uses <b>compareAdaptorOperation:</b> toorder adaptor operations before invoking EOAdaptorChannel's  <a frame= "conv" href="EOAdaptorChannel.html#//apple_ref/java/instm/EOAdaptorChannel/performAdaptorOperations">performAdaptorOperations</a> method.</p><hr WIDTH=25% ALIGN=LEFT><a name = "BAADIIJB"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/entity">entity</a></h3></a><p><code>public EOEntity <b>entity</b>()</code></p>Returns the entity to which the operation willbe applied.<hr WIDTH=25% ALIGN=LEFT><a name = "BAADIDCB"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/exception">exception</a></h3></a><p><code>public Throwable <b>exception</b>()</code></p>Returns the exception that was thrown when anadaptor channel attempted to process the receiver. Returns null ifno exception was thrown or if the receiver hasn't been processedyet.<hr WIDTH=25% ALIGN=LEFT><a name = "BAADJICG"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/qualifier">qualifier</a></h3></a><p><code>public com.apple.yellow.eocontrol.EOQualifier <b>qualifier</b>()</code></p>Returns the qualifier that identifies the specificrow to which the operation applies. Not valid with adaptor operationswith the operators <code>AdaptorInsertOperator</code> and <code>AdaptorStoredProcedureOperator</code>.<hr WIDTH=25% ALIGN=LEFT><a name = "setAdaptorOperator_"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/setAdaptorOperator">setAdaptorOperator</a></h3></a><p><code>public void <b>setAdaptorOperator</b>(int <em>adaptorOperator</em>)</code></p>Sets the receiver's operator to <em>adaptorOperator</em>,which is one of the following:<ul><li><code>AdaptorLockOperator</code></li><li><code>AdaptorInsertOperator</code></li><li><code>AdaptorUpdateOperator</code></li><li><code>AdaptorDeleteOperator</code></li><li><code>AdaptorStoredProcedureOperator</code></li></ul><p>Formore information, see the discussion on adaptor operators in theclass description above.</p><hr WIDTH=25% ALIGN=LEFT><a name = "setAttributes_"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/setAttributes">setAttributes</a></h3></a><p><code>public void <b>setAttributes</b>(NSArray <em>attributes</em>)</code></p>Sets the array of attributes to select whenlocking the row. The selected values are compared in memory to thecorresponding snapshot values to determine if a row has changedsince the application last fetched it. <em>attributes</em> isan array of EOAttribute objects that can't be compared in a qualifier(generally BLOB types); it should not be null or empty. Generally,an adaptor operation's qualifier contains all the comparisonsneeded to verify that a row hasn't changed since the applicationlast fetched, inserted, or updated it. In this case (if there aren'tany attributes that can't be compared in a qualifier), attributes shouldcontain primary key attributes. This method is only valid for adaptoroperations with the <code>AdaptorLockOperator</code>.<hr WIDTH=25% ALIGN=LEFT><a name = "setChangedValues_"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/setChangedValues">setChangedValues</a></h3></a><p><code>public void <b>setChangedValues</b>(NSDictionary <em>changedValues</em>)</code></p>Sets the dictionary of values that need to beupdated, inserted, or compared for locking purposes. changedValuesis a dictionary object whose keys are attribute names and whosevalues are the values for those attributes. As summarized in thefollowing table, the contents of changedValues depends on the receiver'soperator:<br><table border = \"1\"><tr><td scope="row"><b>Operator</b></td><td><b>Contents of changedValues Dictionary</b></td></tr><tr><td scope="row"><code>AdaptorLockOperator</code></td><td>Snapshot values used to verify that the database row hasn'tchanged since this application last fetched it</td></tr><tr><td scope="row"><code>AdaptorInsertOperator</code></td><td>The values to insert</td></tr><tr><td scope="row"><code>AdaptorUpdateOperator</code></td><td>The new values for the columns to update</td></tr><tr><td scope="row"><code>AdaptorDeleteOperator</code></td><td>Snapshot values (<em>changedValues</em> isonly valid for <code>AdaptorDeleteOperator</code> ifthe receiver's entity uses a stored procedure to perform deleteoperations.)</td></tr><tr><td scope="row"><code>AdaptorStoredProcedureOperator</code></td><td>Snapshot values</td></tr></table><br><hr WIDTH=25% ALIGN=LEFT><a name = "setException_"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/setException">setException</a></h3></a><p><code>public void <b>setException</b>(Throwable <em>exception</em>)</code></p>Sets the receiver's exception to <em>exception</em>.This method is typically invoked from EOAdaptorChannel's  <a frame= "conv" href="EOAdaptorChannel.html#//apple_ref/java/instm/EOAdaptorChannel/performAdaptorOperations">performAdaptorOperations</a> method.If a database error occurs while processing an adaptor operation, theadaptor channel creates an exception and assigns it to the adaptoroperation.<hr WIDTH=25% ALIGN=LEFT><a name = "BAADEIAF"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/setQualifier">setQualifier</a></h3></a><p><code>public void <b>setQualifier</b>(com.apple.yellow.eocontrol.EOQualifier <em>qualifier</em>)</code></p>Sets the qualifier that identifies the row towhich the adaptor operation is to be applied to <em>qualifier</em>.<hr WIDTH=25% ALIGN=LEFT><a name = "BAACGIBI"><BR><h3><b></b></a><a name="//apple_ref/java/instm/EOAdaptorOperation/setStoredProcedure">setStoredProcedure</a></h3><p><code>public void <b>setStoredProcedure</b>(EOStoredProcedure <em>storedProcedure</em>)</code></p>Sets the receiver's stored procedure to <em>storedProcedure</em>.<hr WIDTH=25% ALIGN=LEFT><a name = "BAACGCDA"><BR><h3><a name="//apple_ref/java/instm/EOAdaptorOperation/storedProcedure">storedProcedure</a></h3></a><p><code>public EOStoredProcedure <b>storedProcedure</b>()</code></p>Returns the receiver's stored procedure. Onlyvalid with adaptor operations with the <code>AdaptorStoredProcedureOperator</code>.<hr WIDTH=25% ALIGN=LEFT><BR><br><a href="../EOAccessTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">



<TITLE> Saving and Restoring the Drawing Environment</TITLE></HEAD>
<body bgcolor="#ffffff">
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header -->
<DIV>
<a name="top"></a><!-- start of banner -->			

<!-- end of banner -->

<!-- start of path -->
<font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000420" target="_top">Carbon</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000420-TP30000465" target="_top">User Experience</a></font>
<br><br>
<!-- end of path -->






</DIV>

<!-- top navigation -->
<P><A HREF="Appearance.12.html"><img src="images/up.gif" border="0" alt="Up"></A> <A HREF="Appearance.14.html"><img src="images/previous.gif" border="0" alt="Previous"></A> <A HREF="Appearance.16.html"><img src="images/next.gif" border="0" alt="Next"></a>

<!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != doc))
    top.location.href = '../index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');

}
//--></script>
<!-- end Show/Hide frames -->

<!-- end of top navigation -->

<hr alt="">



<H1 CLASS="H2.Heading2">
<A NAME="pgfId=257937">
 </A>
<A NAME="marker=260628">
 </A>
<A NAME="26520">
 </A>
Saving and Restoring the Drawing Environment</H1>
<P CLASS="T1.Text1">
<A NAME="pgfId=256040">
 </A>
You may have existing code that saves the state of the graphics port before changing the background or pen, and restores the state after drawing. When adopting theme brushes, you should convert your code to use Appearance Manager functions to save and restore all graphics port state values that can be modified by the theme brush, including pixel patterns and other state information that is not typically accessible to applications.</P>
<P CLASS="T1.Text1">
<A NAME="pgfId=258538">
 </A>
To obtain the current graphics port state values, you can call the function 
<TT>
GetThemeDrawingState</TT>

 before performing an operation that modifies the drawing state of a graphics port. To return the graphics port to its previous drawing state and release the memory allocated for the drawing state reference, you can call 
<TT>
SetThemeDrawingState</TT>

, providing the reference obtained in the <TT CLASS="cv">
outState</TT>
 parameter of <TT CLASS="cv">
GetThemeDrawingState</TT>
. You can also call 
<TT>
DisposeThemeDrawingState</TT>

 to release the allocated memory.</P>
<P CLASS="T1.Text1">
<A NAME="pgfId=258598">
 </A>
The function 
<TT>
NormalizeThemeDrawingState</TT>

 sets the current graphics port to a default drawing state. <TT CLASS="cv">
NormalizeThemeDrawingState</TT>
 sets the background of a graphics port to white; the pen of the port to a size of 1 pixel by 1 pixel, a pattern mode of <TT CLASS="cv">
patCopy</TT>
, and a pattern of black; and the text mode of the port to <TT CLASS="cv">
srcOr</TT>
. The <TT CLASS="cv">
NormalizeThemeDrawingState</TT>
 function also flushes from memory any color foreground or background patterns saved in the port's <TT CLASS="cv">
GrafPort.pnPat</TT>
 or <TT CLASS="cv">
GrafPort.bkPat</TT>
 fields, respectively.</P>
<hr alt="">&#169 1999, 2000 Apple Computer, Inc. &#150 (Last Updated 27 Nov 00)<P><A HREF="Appearance.12.html"><img src="images/up.gif" border="0" alt="Up"></A> <A HREF="Appearance.14.html"><img src="images/previous.gif" border="0" alt="Previous"></A> <A HREF="Appearance.16.html"><img src="images/next.gif" border="0" alt="Next"></A>

<!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != doc))
    top.location.href = '../index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');

}
//--></script>
<!-- end Show/Hide frames -->

<!--#include virtual="/includes/framesetfooter" --> 

</body>
</HTML>

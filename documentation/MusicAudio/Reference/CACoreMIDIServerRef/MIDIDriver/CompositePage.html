<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html><head>
    <title>MIDIDriver.h</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="generator" content="HeaderDoc" />
<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style></head><body bgcolor="#ffffff">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../reference/MusicAudio/index.html#//apple_ref/doc/uid/TP30001281-TP30000428" target="_top">Audio</a> <b>&gt;</b> <a href="../../../../../reference/MusicAudio/idxCoreAudio-date.html#//apple_ref/doc/uid/TP30001281-TP30000428-TP30000500" target="_top">Core Audio</a> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/CACoreMIDIServerRef" target="_top">Core MIDI Server Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>


<!-- end of header -->
<a name="top"></a>
<a name="//apple_ref/doc/header/MIDIDriver.h" title="MIDIDriver.h"></a>
<hr><table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h1><a name="MIDIDriver.h">MIDIDriver.h</a></h1>
</td></tr></table><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr><td scope="row"><b>Includes:</b></td><td><div style="margin-bottom:1px"><div class="content_text"><!-- a -->&lt;CoreFoundation/CFPlugIn.h&gt;<!-- /a --><br>
<!-- a -->&lt;CoreFoundation/CFPlugInCOM.h&gt;<!-- /a --><br>
<!-- a -->&lt;CoreFoundation/CFRunLoop.h&gt;<!-- /a --><br>
<!-- a -->&lt;CoreMIDI/CoreMIDI.h&gt;<!-- /a --></div></div></td></tr>
</table></div>
<h2>Overview</h2>
</h5><p><!-- begin discussion --><br><br>
This is the header file for Mac OS X's MIDI driver interface.
<br><br>
<h2>About MIDI drivers</h2>
MIDI drivers are CFPlugIns, installed into the following places:
<pre>
    /System/Library/Extensions      -- not recommended for non-Apple drivers, but
                                    necessary for compatibility with CoreMIDI 1.0
    
    /Library/Audio/MIDI Drivers     -- starting with CoreMIDI 1.1
    
    ~/Library/Audio/MIDI Drivers    -- starting with CoreMIDI 1.1
</pre>
Refer to the CFPlugIn documentation for more information about plug-ins.
<br><br>
<h2>Driver bundle/plug-in properties</h2>
A driver's bundle settings should include settings resembling the following:
<pre>
    Bundle settings:
        CFBundleIdentifier              String          com.mycompany.midi.driver.mydevice
            (note that this will be the driver's persistent ID in MIDISetup's)
        CFPlugInDynamicRegistration     String          NO
        CFPlugInFactories               Dictionary      1 key/value pair
            [your new factory UUID]     String          [your factory function name]
        CFPlugInTypes                   Dictionary      1 key/value pair
            ECDE9574-0FE4-11D4-BB1A-0050E4CEA526        Array       1 object
                (this is kMIDIDriverTypeID)
                0                       String          [your new factory UUID]
    Build settings:
        WRAPPER_EXTENSION               plugin
</pre>
<br><br>
<h2>Driver access to the CoreMIDI API</h2>
Drivers have access to most of the CoreMIDI API.  They should link with
CoreMIDIServer.framework, <b>not</b> CoreMIDI.framework.
<br><br>
Unlike applications, drivers communicate with the server directly, not 
through Mach messaging.  This necessitates some limitations on the contexts from 
which a driver may call the server.
<br><br>
The MIDI I/O functions MIDISend and MIDIReceived may be called from any thread.
<br><br>
All other CoreMIDI functions must only be called from the server's main thread, which is the
thread on which the driver is created and from which all calls to the driver other than
Send() are made.<!-- end discussion --></p>
<hr><br><h2>COM Interfaces</h2>
<a name="HeaderDoc_cominterfaces"></a>
<dl>
<dt><tt><a href="Classes/MIDIDriverInterface/index.html#//apple_ref/c/cl/MIDIDriverInterface" target="_top">MIDIDriverInterface</a></tt></dt>
<dd>		The COM-style interface to a MIDI driver.</dd>
</dl>
<hr><br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceCreate" target="doc">MIDIDeviceCreate</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceDispose" target="doc">MIDIDeviceDispose</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListAddDevice" target="doc">MIDIDeviceListAddDevice</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListDispose" target="doc">MIDIDeviceListDispose</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListGetDevice" target="doc">MIDIDeviceListGetDevice</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListGetNumberOfDevices" target="doc">MIDIDeviceListGetNumberOfDevices</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIDriverEnableMonitoring" target="doc">MIDIDriverEnableMonitoring</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIEndpointGetRefCons" target="doc">MIDIEndpointGetRefCons</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIEndpointSetRefCons" target="doc">MIDIEndpointSetRefCons</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIGetDriverDeviceList" target="doc">MIDIGetDriverDeviceList</a></tt></dt>
<dd></dd>
<dt><tt><a href="CompositePage.html#//apple_ref/c/func/MIDIGetDriverIORunLoop" target="doc">MIDIGetDriverIORunLoop</a></tt></dt>
<dd></dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIDeviceCreate;  name=MIDIDeviceCreate -->
<a name="//apple_ref/c/func/MIDIDeviceCreate"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDeviceCreate">MIDIDeviceCreate</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceCreate" class="function"><span class="function">MIDIDeviceCreate</span></a>(
    <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">owner</span>, 
    <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/tdef/CFStringRef" target="_top" class="type"><span class="type">CFStringRef</span></a> <span class="param">name</span>,
    <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/tdef/CFStringRef" target="_top" class="type"><span class="type">CFStringRef</span></a> <span class="param">manufacturer</span>, 
    <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/tdef/CFStringRef" target="_top" class="type"><span class="type">CFStringRef</span></a> <span class="param">model</span>,
    <a href="../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIDeviceRef" target="_top" class="type"><span class="type">MIDIDeviceRef</span></a> *<span class="param">outDevice</span>) ;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>owner</code></dt><dd>The driver creating the device.  NULL if a non-driver.</dd>
<dt><code>name</code></dt><dd>The name of the new device.</dd>
<dt><code>manufacturer</code></dt><dd>The name of the device's manufacturer.</dd>
<dt><code>model</code></dt><dd>The device's model name.</dd>
<dt><code>outDevice</code></dt><dd>On successful return, points to the newly-created device.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->An OSStatus result code.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Drivers call this function to create new MIDIDevice objects
corresponding to the hardware that is present.
<br><br>
Non-drivers may call this function as of CoreMIDI 1.1, to
create external devices.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.0.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIDeviceDispose;  name=MIDIDeviceDispose -->
<a name="//apple_ref/c/func/MIDIDeviceDispose"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDeviceDispose">MIDIDeviceDispose</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceDispose" class="function"><span class="function">MIDIDeviceDispose</span></a>(
    <a href="../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIDeviceRef" target="_top" class="type"><span class="type">MIDIDeviceRef</span></a> <span class="param">device</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>device</code></dt><dd>The device to be disposed.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->An OSStatus result code.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Drivers may call this function to dispose MIDIDevice objects
which have not yet been added to the system via MIDISetupAddDevice.
Once a device has been added to the system with MIDISetupAddDevice,
the driver must not use this call to destroy it; it must
use MIDISetupRemoveDevice to do so.
<br><br>
Non-drivers do not have access to this function; they must call
MIDISetupAddDevice and MIDISetupRemoveDevice.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.3.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIDeviceListAddDevice;  name=MIDIDeviceListAddDevice -->
<a name="//apple_ref/c/func/MIDIDeviceListAddDevice"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDeviceListAddDevice">MIDIDeviceListAddDevice</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListAddDevice" class="function"><span class="function">MIDIDeviceListAddDevice</span></a>(
    <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDeviceListRef" class="type"><span class="type">MIDIDeviceListRef</span></a> <span class="param">devList</span>,
    <a href="../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIDeviceRef" target="_top" class="type"><span class="type">MIDIDeviceRef</span></a> <span class="param">dev</span>) ;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>devList</code></dt><dd>The device list.</dd>
<dt><code>dev</code></dt><dd>The device to add to the list.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->An OSStatus result code.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Add a device to a device list.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.0.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIDeviceListDispose;  name=MIDIDeviceListDispose -->
<a name="//apple_ref/c/func/MIDIDeviceListDispose"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDeviceListDispose">MIDIDeviceListDispose</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListDispose" class="function"><span class="function">MIDIDeviceListDispose</span></a>(
    <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDeviceListRef" class="type"><span class="type">MIDIDeviceListRef</span></a> <span class="param">devList</span>) ;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>devList</code></dt><dd>The device list to be disposed.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->An OSStatus result code.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Dispose a device list, but not the contained devices.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.1.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIDeviceListGetDevice;  name=MIDIDeviceListGetDevice -->
<a name="//apple_ref/c/func/MIDIDeviceListGetDevice"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDeviceListGetDevice">MIDIDeviceListGetDevice</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIDeviceRef" target="_top" class="type"><span class="type">MIDIDeviceRef</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListGetDevice" class="function"><span class="function">MIDIDeviceListGetDevice</span></a>(
    <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDeviceListRef" class="type"><span class="type">MIDIDeviceListRef</span></a> <span class="param">devList</span>,
    <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/c/tdef/ItemCount" target="_top" class="type"><span class="type">ItemCount</span></a> <span class="param">index0</span>) ;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>devList</code></dt><dd>The device list.</dd>
<dt><code>deviceIndex0</code></dt><dd>The index (0...MIDIDeviceListGetNumberOfDevices()-1) of the device
to return.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->A reference to a device, or NULL if an error occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Return one of the devices in a device list.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.0.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIDeviceListGetNumberOfDevices;  name=MIDIDeviceListGetNumberOfDevices -->
<a name="//apple_ref/c/func/MIDIDeviceListGetNumberOfDevices"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDeviceListGetNumberOfDevices">MIDIDeviceListGetNumberOfDevices</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/c/tdef/ItemCount" target="_top" class="type"><span class="type">ItemCount</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIDeviceListGetNumberOfDevices" class="function"><span class="function">MIDIDeviceListGetNumberOfDevices</span></a>(
    <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDeviceListRef" class="type"><span class="type">MIDIDeviceListRef</span></a> <span class="param">devList</span>) ;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>devList</code></dt><dd>The device list.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The number of devices in the list, or 0 if an error occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Returns the number of devices in a device list.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.0.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIDriverEnableMonitoring;  name=MIDIDriverEnableMonitoring -->
<a name="//apple_ref/c/func/MIDIDriverEnableMonitoring"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDriverEnableMonitoring">MIDIDriverEnableMonitoring</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIDriverEnableMonitoring" class="function"><span class="function">MIDIDriverEnableMonitoring</span></a>(
    <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">driver</span>,
    <!-- a --><span class="type">Boolean</span><!-- /a --> <span class="param">enabled</span>) ;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>driver</code></dt><dd>The driver whose Monitor function is to be enabled.</dd>
<dt><code>enabled</code></dt><dd>true to enable monitoring, false to disable it.
<br><br></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->An OSStatus result code.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->A driver may make this call to have MIDIServer pass it every outgoing MIDI
packet, to all destinations in the system (not just those controlled by
itself).
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.1.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIEndpointGetRefCons;  name=MIDIEndpointGetRefCons -->
<a name="//apple_ref/c/func/MIDIEndpointGetRefCons"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIEndpointGetRefCons">MIDIEndpointGetRefCons</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIEndpointGetRefCons" class="function"><span class="function">MIDIEndpointGetRefCons</span></a>(
    <a href="../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIEndpointRef" target="_top" class="type"><span class="type">MIDIEndpointRef</span></a> <span class="param">endpt</span>, 
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="type">*</span><span class="param">ref1</span>,
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="type">*</span><span class="param">ref2</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>endpt</code></dt><dd>The endpoint whose refCons are to be return</dd>
<dt><code>ref1</code></dt><dd>On exit, the first refCon.</dd>
<dt><code>ref2</code></dt><dd>On exit, the second refCon.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->An OSStatus result code.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Obtain the refCons assigned to the endpoints 
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.0.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIEndpointSetRefCons;  name=MIDIEndpointSetRefCons -->
<a name="//apple_ref/c/func/MIDIEndpointSetRefCons"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIEndpointSetRefCons">MIDIEndpointSetRefCons</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/c/tdef/OSStatus" target="_top" class="type"><span class="type">OSStatus</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIEndpointSetRefCons" class="function"><span class="function">MIDIEndpointSetRefCons</span></a>(
    <a href="../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIEndpointRef" target="_top" class="type"><span class="type">MIDIEndpointRef</span></a> <span class="param">endpt</span>, 
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="param">ref1</span>,
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> *<span class="param">ref2</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>endpt</code></dt><dd>The endpoint whose refCons are to be set</dd>
<dt><code>ref1</code></dt><dd>The first refCon.</dd>
<dt><code>ref2</code></dt><dd>The second refCon.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->An OSStatus result code.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Drivers need an efficient way to translate from a MIDIEndpoint (source or
destination) to their own internal data structures corresponding to
that endpoint.  This function provides a way for the driver to
assign its own refCons to endpoints.
<br><br>
These refCons are passed back to the driver in its Send() and Flush()
methods.
<br><br>
RefCons are not persistent (i.e. they are not saved as part of a 
MIDISetup).  They need to be re-initialized in each call to Start().
<br><br>
A typical use is to use one refCon to refer to a device, and a second
to refer to a port on the device.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.0.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIGetDriverDeviceList;  name=MIDIGetDriverDeviceList -->
<a name="//apple_ref/c/func/MIDIGetDriverDeviceList"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIGetDriverDeviceList">MIDIGetDriverDeviceList</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDeviceListRef" class="type"><span class="type">MIDIDeviceListRef</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIGetDriverDeviceList" class="function"><span class="function">MIDIGetDriverDeviceList</span></a>(
    <a href="CompositePage.html#//apple_ref/c/tdef/MIDIDriverRef" class="type"><span class="type">MIDIDriverRef</span></a> <span class="param">driver</span>) ;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>driver</code></dt><dd>The driver whose devices are to be returned.
<br><br></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The requested device list.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Returns the list of devices which are in the current MIDISetup
and which were created/owned by the specified driver.
<br><br>
The returned device list should be disposed (using MIDIDeviceListDispose)
by the caller.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.1.
</dd>
</dl>
<hr><!-- headerDoc=func;  uid=//apple_ref/c/func/MIDIGetDriverIORunLoop;  name=MIDIGetDriverIORunLoop -->
<a name="//apple_ref/c/func/MIDIGetDriverIORunLoop"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIGetDriverIORunLoop">MIDIGetDriverIORunLoop</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <a href="../../../../CoreFoundation/Reference/CFRunLoopRef/Reference/reference.html#//apple_ref/c/tdef/CFRunLoopRef" target="_top" class="type"><span class="type">CFRunLoopRef</span></a> <a href="CompositePage.html#//apple_ref/c/func/MIDIGetDriverIORunLoop" class="function"><span class="function">MIDIGetDriverIORunLoop</span></a>();  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The CFRunLoopRef of the server's driver I/O thread.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Drivers typically need to receive asynchronous I/O completion callbacks
on a high-priority thread.  To save drivers from the trouble of 
creating their own threads for this purpose, and to make efficient
use of system resources, the MIDIServer provides a thread which
drivers may use.
<br><br>
Drivers should do as little work as possible in this thread; typically,
just dequeueing and encoding output packets, and decoding input packets
into MIDIPacketLists to be passed to MIDIReceived.
<br><br>
This is a realtime-priority thread and shouldn't be used for anything other 
than I/O.  For lower-priority tasks, drivers can use the runloop which 
was current when they were constructed.
<br><br>
<!-- end discussion --></p>
<p></p><dl><dt><i>Availability</i></dt><dd>Introduced in Mac OS X v10.0.
</dd>
</dl>
<h2>Constants</h2>
<hr><!-- headerDoc=data;  uid=//apple_ref/c/data/kMIDIDriverPropertyUsesSerial;  name=kMIDIDriverPropertyUsesSerial -->
<a name="//apple_ref/c/data/kMIDIDriverPropertyUsesSerial"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="kMIDIDriverPropertyUsesSerial">kMIDIDriverPropertyUsesSerial</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">extern</span> <span class="keyword">const</span> <a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/tdef/CFStringRef" target="_top" class="type"><span class="type">CFStringRef</span></a> <span class="var">kMIDIDriverPropertyUsesSerial</span>;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->This constant, "MIDIDriverUsesSerial", when defined to "YES" in a driver's 
bundle, tells MIDIServer that the driver uses serial ports and is eligible to
have serial ports assigned to it.
<br><br>
When a serial driver's Start() method is called, it should use
MIDIGetSerialPortOwner to discover which serial ports it has
been assigned to use, and only use those ports.
<br><br>
New for CoreMIDI 1.1.
<!-- end discussion --></p>
<p></p><h2>Typedefs</h2>
<hr><!-- headerDoc=tdef;  uid=//apple_ref/c/tdef/MIDIDeviceListRef;  name=MIDIDeviceListRef -->
<a name="//apple_ref/c/tdef/MIDIDeviceListRef"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDeviceListRef">MIDIDeviceListRef</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">typedef</span> <a href="../../CACoreMIDIRef/MIDIServices/CompositePage.html#//apple_ref/c/tdef/MIDIObjectRef" target="_top" class="type"><span class="type">MIDIObjectRef</span></a> <span class="var">MIDIDeviceListRef</span>;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->A MIDIDeviceListRef is a list of MIDIDeviceRef's.  The devices are
not owned by the list (i.e., disposing the list does not dispose
the devices it references).
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=tdef;  uid=//apple_ref/c/tdef/MIDIDriverRef;  name=MIDIDriverRef -->
<a name="//apple_ref/c/tdef/MIDIDriverRef"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="MIDIDriverRef">MIDIDriverRef</a></h3>
</td></tr></table><hr><p></p><pre><span class="keyword">typedef</span> <a href="Classes/MIDIDriverInterface/index.html#//apple_ref/c/cl/MIDIDriverInterface" target="_top" class="type"><span class="type">MIDIDriverInterface</span></a> <span class="type">*</span><span class="type">*</span> <span class="var">MIDIDriverRef</span>;  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Points to a pointer to a MIDIDriverInterface, a CFPlugIn
structure (defined in MIDIDriver.h) containing function
pointers for the driver's methods.  Only the MIDIServer
may call a driver's methods.
<!-- end discussion --></p>
<p></p><h2>#defines</h2>
<hr><!-- headerDoc=macro;  uid=//apple_ref/c/macro/kMIDIDriverInterface2ID;  name=kMIDIDriverInterface2ID -->
<a name="//apple_ref/c/macro/kMIDIDriverInterface2ID"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="kMIDIDriverInterface2ID">kMIDIDriverInterface2ID</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->The UUID for version 2 of the MIDI driver interface.<!-- end abstract --></p>
<p></p><pre><span class="">#define</span><span class="preprocessor"> </span><a href="CompositePage.html#//apple_ref/c/macro/kMIDIDriverInterface2ID" class="preprocessor"><span class="preprocessor">kMIDIDriverInterface2ID</span></a><span class="preprocessor"> </span><span class="preprocessor">\</span> 
    <a href="../../../../CoreFoundation/Reference/CFUUIDRef/Reference/reference.html#//apple_ref/c/func/CFUUIDGetConstantUUIDWithBytes" target="_top" class="preprocessor"><span class="preprocessor">CFUUIDGetConstantUUIDWithBytes</span></a><span class="preprocessor">(</span><!-- a --><span class="preprocessor">NULL</span><!-- /a --><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x43</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xC9</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x8C</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x3C</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x30</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x6C</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x11</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xD5</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xAF</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x73</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x00</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x30</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x65</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xA8</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x30</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x1E</span><span class="preprocessor">)</span> </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->See the description of the MIDIDriverInterface structure for
information about different versions of the MIDI driver interface.
<br><br>
The version 2 driver interface is available beginning with CoreMIDI 1.1.<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=macro;  uid=//apple_ref/c/macro/kMIDIDriverInterfaceID;  name=kMIDIDriverInterfaceID -->
<a name="//apple_ref/c/macro/kMIDIDriverInterfaceID"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="kMIDIDriverInterfaceID">kMIDIDriverInterfaceID</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->The UUID for version 1 of the MIDI driver interface.<!-- end abstract --></p>
<p></p><pre><span class="">#define</span><span class="preprocessor"> </span><a href="CompositePage.html#//apple_ref/c/macro/kMIDIDriverInterfaceID" class="preprocessor"><span class="preprocessor">kMIDIDriverInterfaceID</span></a><span class="preprocessor"> </span><span class="preprocessor">\</span> 
    <a href="../../../../CoreFoundation/Reference/CFUUIDRef/Reference/reference.html#//apple_ref/c/func/CFUUIDGetConstantUUIDWithBytes" target="_top" class="preprocessor"><span class="preprocessor">CFUUIDGetConstantUUIDWithBytes</span></a><span class="preprocessor">(</span><!-- a --><span class="preprocessor">NULL</span><!-- /a --><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x49</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xDF</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xCA</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x9E</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x0F</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xE5</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x11</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xD4</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x95</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x0D</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x00</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x50</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xE4</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xCE</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xA5</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x26</span><span class="preprocessor">)</span> </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->See the description of the MIDIDriverInterface structure for
information about different versions of the MIDI driver interface.<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=macro;  uid=//apple_ref/c/macro/kMIDIDriverTypeID;  name=kMIDIDriverTypeID -->
<a name="//apple_ref/c/macro/kMIDIDriverTypeID"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="kMIDIDriverTypeID">kMIDIDriverTypeID</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->The UUID for MIDI driver plugins.<!-- end abstract --></p>
<p></p><pre><span class="">#define</span><span class="preprocessor"> </span><a href="CompositePage.html#//apple_ref/c/macro/kMIDIDriverTypeID" class="preprocessor"><span class="preprocessor">kMIDIDriverTypeID</span></a><span class="preprocessor"> </span><span class="preprocessor">\</span> 
    <a href="../../../../CoreFoundation/Reference/CFUUIDRef/Reference/reference.html#//apple_ref/c/func/CFUUIDGetConstantUUIDWithBytes" target="_top" class="preprocessor"><span class="preprocessor">CFUUIDGetConstantUUIDWithBytes</span></a><span class="preprocessor">(</span><!-- a --><span class="preprocessor">NULL</span><!-- /a --><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xEC</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xDE</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x95</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x74</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x0F</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xE4</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x11</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xD4</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xBB</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x1A</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x00</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x50</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xE4</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xCE</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0xA5</span><span class="preprocessor">,</span><span class="preprocessor"> </span><span class="preprocessor">0x26</span><span class="preprocessor">)</span> </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->kMIDIDriverTypeID should be entered into your driver's bundle settings
as follows:
<br><br>
<pre>
CFPlugInTypes                   Dictionary      1 key/value pair
	ECDE9574-0FE4-11D4-BB1A-0050E4CEA526        Array       1 object
		(this is kMIDIDriverTypeID)
		0                       String          [your new factory UUID]
</pre><!-- end discussion --></p>
<p></p><p><!-- start of footer -->

	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Reference/CACoreMIDIServerRef/MIDIDriver/CompositePage.html%3Fid%3DTP40002092-1.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Reference/CACoreMIDIServerRef/MIDIDriver/CompositePage.html%3Fid%3DTP40002092-1.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Reference/CACoreMIDIServerRef/MIDIDriver/CompositePage.html%3Fid%3DTP40002092-1.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>



<!-- end of footer -->
Last Updated: 2008-03-11
</p></body></html>

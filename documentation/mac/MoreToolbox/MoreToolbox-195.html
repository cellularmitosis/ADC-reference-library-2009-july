<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Menu Help Resource (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING195></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-194.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-196.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-138.html"><B>Chapter 3 - Help Manager</B></A> / <A HREF="MoreToolbox-157.html"><B>Help Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-194.html"><B>Resources</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING195-0></A>
<H3>The Menu Help Resource</H3>
 <A NAME=MARKER-2-524></A>To provide help balloons for a menu--pull-down, pop-up, or hierarchical--that uses the standard menu definition procedure, you can create a menu help resource. A menu help resource is a resource of type <CODE>'hmnu'</CODE>; in it, you specify help balloons for the menu title and for each item in the menu. You create a separate <CODE>'hmnu'</CODE> resource for each menu. All <CODE>'hmnu'</CODE> resources must have resource IDs greater than 128. <P>
 The format of a Rez input file for an <CODE>'hmnu'</CODE> resource differs from its compiled output form. This section describes the structure of a Rez-compiled <CODE>'hmnu'</CODE> resource. If you are concerned only with creating <CODE>'hmnu'</CODE> resources, see <A HREF=MoreToolbox-147.html#MARKER-9-157>"Providing Help Balloons for Menus" beginning on page 3-24</A>. That section gives a detailed description, using several code samples, of how to use Rez input files to create <CODE>'hmnu'</CODE> resources.<P>
 An <CODE>'hmnu'</CODE> resource consists of a header component, a missing-items component, a menu-title component, and a variable number of menu-item components. <A HREF=#MARKER-9-525>Figure 3-23</A> shows the general structure of a compiled <CODE>'hmnu'</CODE> resource.<P>
<B>Figure 3-23  <A NAME=MARKER-9-525></A>Structure of a compiled menu help (<CODE>'hmnu'</CODE>) resource</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-23.jpg">
 If you examine a compiled version of an <CODE>'hmnu'</CODE> resource, you find that the header component consists of the following elements:<P>
<UL>
<LI>Help Manager version. The version of the Help Manager to use; specified in a Rez input file with the <CODE>HelpMgrVersion</CODE> constant.
<LI>Options. The sum of the values of available options, described in <A HREF=MoreToolbox-146.html#MARKER-9-146>"Specifying Options in Help Resources" beginning on page 3-22</A>.
<LI>Balloon definition function. The resource ID of the window definition function used for drawing the help balloon. The standard balloon definition function is of type <CODE>'WDEF'</CODE> with resource ID 126; this can be specified by the number 0 in the Rez input file.
<LI>Variation code. A number signifying the preferred position of the help balloon relative to the hot rectangle. The balloon definition function draws the frame of the help balloon based on the variation code specified here. The eight variation codes and how they affect the standard balloon definition function are illustrated in <A HREF=MoreToolbox-140.html#MARKER-9-48>Figure 3-4 on page 3-9</A>.
<LI>Item count. The number of remaining components--including the missing-items, menu-title, and menu-item components--defined in the rest of this resource.<P>
</UL>
 The Help Manager identifies each component by its order in the resource. The missing-items component always follows the header component of an <CODE>'hmnu'</CODE> resource. The menu-title component always follows the missing-items component. Then a variable number of menu-item components are stored in this resource. The Help Manager determines the end of the <CODE>'hmnu'</CODE> resource by using the item count information in the header component. <P>
 The structures of the missing-items component, the menu-title component, and the menu-item components depend on identifiers specified inside the components. The identifiers used in a Rez input file are described in <A HREF=MoreToolbox-145.html#MARKER-9-122>"Specifying the Format for Help Messages" on page 3-21</A>.<P>
 The missing-items component, the menu-title component, and the menu-item components can each specify four different help messages:<P>
<UL>
<LI>First help message.<P>
<UL>
<LI>In the missing-items component, this is the help message for missing enabled items.
<LI>In the menu-title component, this is the help message for the enabled menu title.
<LI>In all subsequent menu-item components, this is the help message for enabled menu items.<P>
</UL>
<LI>Second help message.<P>
<UL>
<LI>In the missing-items component, this is the help message for missing items that are dimmed by the application.
<LI>In the menu-title component, this is the help message for the menu title when the application dims it.
<LI>In all subsequent menu-item components, this is the help message for menu items when the application dims them.<P>
</UL>
<LI>Third help message.<P>
<UL>
<LI>In the missing-items component, this is the help message for missing enabled-and-checked items.
<LI>In the menu-title component, this is the help message for the menu title when system software dims it at the appearance of an alert box or a modal dialog box.
<LI>In all subsequent menu-item components, this is the help message for enabled-and-checked menu items.<P>
</UL>
<LI>Fourth help message.<P>
<UL>
<LI>In the missing-items component, this is the help message for missing enabled-and-marked items.
<LI>In the menu-title component, this is the help message for all menu items when system software dims them at the appearance of an alert box or a modal dialog box.
<LI>In all subsequent menu-item components, this is the help message for enabled-and-marked menu items.<P>
</UL>
</UL>
 An empty string or a resource ID of 0 for any messages in the menu-title or menu-item components causes the Help Manager to use the appropriate help message contained in the missing-items component.<P>
 Since they all adhere to the formats specified by the previously described identifiers, the missing-items component, the menu-title component, and the menu-item components can have similar structures. The Help Manager determines the end of a component by examining its length, which is stored in the first 2 bytes of the component.<P>
 <A HREF=#MARKER-9-526>Figure 3-24</A> shows the structure of a component that stores its help messages as Pascal strings within the <CODE>'hmnu'</CODE> resource itself. <P>
<B>Figure 3-24  <A NAME=MARKER-9-526></A>Structure of an <CODE>'hmnu'</CODE> component compiled with the <CODE>HMStringItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-24.jpg">
 If you examine a compiled version of an <CODE>'hmnu'</CODE> resource, you find that a component identified in a Rez input file by the <CODE>HMStringItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data. The value 1 is specified here when the help messages are stored as Pascal strings within this component.
<LI>Text string. The first help message (as previously described).
<LI>Text string. The second help message (as previously described).
<LI>Text string. The third help message (as previously described).
<LI>Text string. The fourth help message (as previously described).
<LI>Alignment bytes. Zero or one bytes used to make the previous text strings end on a word boundary.<P>
</UL>
 <A HREF=#MARKER-9-527>Figure 3-25</A> shows the structure of an <CODE>'hmnu'</CODE> component that specifies its help messages as text strings stored in string list (<CODE>'STR#'</CODE>) resources. <P>
<B>Figure 3-25  <A NAME=MARKER-9-527></A>Structure of an <CODE>'hmnu'</CODE> component compiled with the <CODE>HMStringResItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-25.jpg">
 If you examine a compiled version of an <CODE>'hmnu'</CODE> resource, you find that a component identified in a Rez input file by the <CODE>HMStringResItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data. The value 3 is specified here when the help messages for this component are stored in string list (<CODE>'STR#'</CODE>) resources.
<LI>Resource ID. The resource ID of an <CODE>'STR#'</CODE> resource. 
<LI>Index into the string list resource. A number used as an index to a particular text string within the <CODE>'STR#'</CODE> resource. This text string is used for the first help message (as previously described).<P>
</UL>
 Three more pairs of resource IDs/index numbers follow. The text strings that these pairs refer to are used for the second, third, and fourth help messages, respectively.<P>
 <A HREF=#MARKER-9-528>Figure 3-26</A> shows the structure of an <CODE>'hmnu'</CODE> component that specifies its help messages in picture (<CODE>'PICT'</CODE>) resources, styled text (<CODE>'TEXT'</CODE> and <CODE>'styl'</CODE>) resources, or string (<CODE>'STR '</CODE>) resources. <P>
<B>Figure 3-26  <A NAME=MARKER-9-528></A>Structure of an <CODE>'hmnu'</CODE> component compiled with the <CODE>HMPictItem</CODE>, <CODE>HMTEResItem</CODE>, or <CODE>HMSTRResItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-26.jpg">
 If you examine a compiled version of an <CODE>'hmnu'</CODE> resource, you find that a component identified in a Rez input file by either the <CODE>HMPictItem</CODE>, <CODE>HMTEResItem</CODE>, or <CODE>HMSTRResItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data.<P>
<UL>
<LI>The value 2 is specified here when the help messages for this component are stored in <CODE>'PICT'</CODE> resources.
<LI>The value 6 is specified here when the help messages for this component are stored as styled text--that is, in both <CODE>'TEXT'</CODE> and <CODE>'styl'</CODE> resources.
<LI>The value 7 is specified here when the help messages for this component are stored in <CODE>'STR '</CODE> resources.<P>
</UL>
<LI>Resource ID.<P>
<UL>
<LI>The resource ID of a <CODE>'PICT'</CODE> resource when the value 2 is specified as the type of data. The Help Manager uses the picture contained in this resource for the first help message (as previously described).
<LI>The resource ID common to both a <CODE>'TEXT'</CODE> and an <CODE>'styl'</CODE> resource when the value 6 is specified as the type of data. The Help Manager uses the styled text specified by these resources for the first help message.
<LI>The resource ID of an <CODE>'STR '</CODE> resource when the value 7 is specified as the type of data. The Help Manager uses the text contained in this resource for the first help message.<P>
</UL>
</UL>
 Three more resource IDs follow; the Help Manager uses these resources (either <CODE>'PICT'</CODE>, <CODE>'TEXT'</CODE> and <CODE>'styl'</CODE>, or <CODE>'STR '</CODE>) for the second, third, and fourth help messages, respectively (as previously described).<P>
 <A HREF=#MARKER-9-529>Figure 3-27</A> shows the structure of an <CODE>'hmnu'</CODE> component that specifies no help messages. <P>
<B>Figure 3-27  <A NAME=MARKER-9-529></A>Structure of an <CODE>'hmnu'</CODE> component compiled with the <CODE>HMSkipItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-27.jpg">
 If you examine a compiled version of an <CODE>'hmnu'</CODE> resource, you find that a component identified by the <CODE>HMSkipItem</CODE> identifier consists of the following elements:<P>
<UL>
<LI>Size. The value 4, for the number of bytes contained in this component.
<LI>Type of data. The value 256.<P>
</UL>
 For menu-item components, two additional identifiers are available: <CODE>HMCompareItem</CODE> and <CODE>HMNamedResourceItem</CODE>. When the <CODE>HMCompareItem</CODE> identifier is specified, the Help Manager compares a string specified in the component against the current menu item. If the string matches the current menu item, the Help Manager uses the help messages specified in the rest of the component, shown in <A HREF=#MARKER-9-530>Figure 3-28</A>. This type of component is useful for a menu item that can change names.<P>
<B>Figure 3-28  <A NAME=MARKER-9-530></A>Structure of a menu-item component compiled with the <CODE>HMCompareItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-28.jpg">
 If you examine a compiled version of an <CODE>'hmnu'</CODE> resource, you find that a component identified in a Rez input file by the <CODE>HMCompareItem</CODE> identifier consists of these elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data. The value 512 appears here when the Help Manager is to use the help messages specified in this component only when the current menu item matches a specified text string.
<LI>Text string. The string against which to compare the current menu item. If the current menu item matches this string, then the Help Manager uses the help messages specified in this component.
<LI>Alignment bytes. Zero or one bytes used to make the previous text string end on a word boundary.
<LI>Help messages. The four help messages for the menu item. The structure may follow that of any of the previously described menu-item components; that is, this element consists of a value representing the format of the help messages specified in the rest of the component, the size of the rest of the component, and specifications for four actual help messages for the menu item.<P>
</UL>
 When the identifier <CODE>HMNamedResourceItem</CODE> is specified, the Help Manager retrieves help messages from a resource that matches the name and state of the current menu item.<P>
 <A HREF=#MARKER-9-531>Figure 3-29</A> shows the format of a menu-item component that uses named resources for help messages.<P>
<B>Figure 3-29  <A NAME=MARKER-9-531></A>Structure of a menu-item component compiled with the <CODE>HMNamedResourceItem</CODE> identifier</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/HM-L-29.jpg">
 If you examine a compiled version of an <CODE>'hmnu'</CODE> resource, you find that a component identified in a Rez input file by the <CODE>HMNamedResourceItem</CODE> identifier consists of these elements:<P>
<UL>
<LI>Size. The number of bytes contained in this component.
<LI>Type of data. The number 1024 is specified here when the Help Manager is to use named resources for help messages.
<LI>Resource type. The resource type (<CODE>'STR '</CODE>, <CODE>'STR#'</CODE>, <CODE>'PICT'</CODE>, or, for text, <CODE>'TEXT'</CODE>) of the resource that contains the help messages for the current menu item. The Help Manager then uses the <CODE>GetNamedResource</CODE> function to find the resource with the same name as the current menu item. (If <CODE>'TEXT'</CODE> is specified, the Help Manager also uses the style information contained in an <CODE>'styl'</CODE> resource with the same name.) If <BR>the menu item is dimmed, the Help Manager appends an exclamation point (!) to the menu item string and searches for a resource by that name. If the menu item is enabled and marked with a checkmark or other mark, the Help Manager appends the mark to the menu item string and looks for a resource with that name.<A NAME=MARKER-2-532></A><P>
</UL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-194.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-196.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

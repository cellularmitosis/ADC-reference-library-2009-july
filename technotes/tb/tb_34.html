<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><meta name="keywords" content="Movable Modal Dialogs"><meta name="Description" content="Technical Note TB34: This Technical Note describes the  processby which an application can remap the Help Manager 'hmnu'resource while a movable modal dialog box is on the screen."><title>Technical Note TB34: Movable Modal Dialogs</title>                                      <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Jul 29, 1991 - Aug 2, 1991"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002785" title="Movable Modal Dialogs"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB34</div>
<div id="pageheadsub">Movable Modal Dialogs</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">What's involved</A><BR><BR><A HREF="#Section2">The Systems 'hmnu' string resource</A><BR><BR><A HREF="#Section3">An alternate 'hmnu' from your application</A><BR><BR><A HREF="#Section4">Using the alternate 'hmnu' resource</A><BR><BR><A HREF="#Section4">Removing the alternate 'hmnu' resource</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note describes the process by which an application can remap theHelp Manager 'hmnu' resource while a movable modal dialog box is on the screen.The Help Manager handles the case for modal dialog boxes but punts in the caseof movable modal dialog boxes. The following information will help you get thecorrect interface performance.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Aug 01 1991]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>What's involved</h2><p>The System 7 support for movable modal dialog boxes is limited to providing thenew <code>'WDEF'</code> variant. The rest of the implementation of movable modal dialogboxes is left to the application. Applications must provide handling for allevents intended for a movable modal dialog box. This could be accomplished bycalling the <code>IsDialogEvent</code> and <code>DialogSelect</code> Toolbox routines, or using otherToolbox routines such as <code>FindWindow</code>, <code>BeginUpdate</code>, <code>DrawDialog</code>, <code>EndUpdate</code>,<code>TrackControl</code>, <code>TEClick</code>.</p><p>How you process the events is up to you, but when it comes to appropriateballoon help the application must call the <code>EnableItem</code>, <code>DisableItem</code> and<code>HMSetMenuResID</code> Toolbox routines. The <code>HMSetMenuResID</code> is used before and afterenabling or disabling the menus. <code>HMSetMenuResID</code> routine maps an alternative<code>'hmnu'</code> resource to your menus.</p><P><A HREF="#top">Back to top</A></p><a name="Section2"></a><h2>The Systems 'hmnu' string resource</h2><p>Listed here are two alternative <code>'hmnu'</code> resources. The first one uses the samestrings that the Help Manager shows when <code>ModalDialog</code> is called. The constant<code>kHMHelpID</code> is defined in the interface files BalloonsTypes.r, Ballons.h, andBalloons.p. In general it refers to the ID of various Help Mgr resources. Inthis case it selects a STR# resource in the System and the constants 31 and 32refer to the string index within that resource. These strings are the ones theHelp Manager uses when a Modal Dialog Box is on the screen.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>resource 'hmnu' (256,&quot;System Movable Modal Dialog hmnu&quot;) {    HelpMgrVersion,    hmDefaultOptions,    0,    0,    HMStringResItem {        /* Missing items */        0, 0,        kHMHelpID, 31,        0, 0,        0, 0,    },    {        HMStringResItem {    /* Menu Title */            0, 0,            kHMHelpID, 32,            0, 0,        },    }};</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></p><a name="Section3"></a><h2>An alternate 'hmnu' from your application </h2><p>If you don't want to display the same strings that the Help Manager displaysfor Modal Dialog Boxes, you can map in your own alternate <code>'hmnu'</code> resource suchas the following.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>resource 'hmnu' (256,&quot;Application Movable Modal Dialog hmnu&quot;) {    HelpMgrVersion,    hmDefaultOptions,    0,    0,    HMStringItem {        /* Missing items */        &quot;&quot;,        &quot;This item is not available because it cannot be used with&quot;        &quot;the About box on your screen.&quot;,        &quot;&quot;,        &quot;&quot;,    },    {        HMStringItem {    /* Menu Title */            &quot;&quot;,            &quot;This menu is not available because it cannot be used with&quot;            &quot;the About box on your screen.&quot;,            &quot;&quot;,            &quot;&quot;,        },    }</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></p><a name="Section4"></a><h2>Using the alternate 'hmnu' resource</h2><p>After displaying the movable modal dialog box on the screen, the applicationshould disable inappropriate menus and items and map in the alternate <code>'hmnu'</code>resources.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    menu = GetMHandle(mApple);    DisableItem(menu, 0);    HMSetMenuResID(mApple, 256);    menu = GetMHandle(mFile);    DisableItem(menu, 0);    HMSetMenuResID(mFile, 256);    menu = GetMHandle(mEdit);    DisableItem(menu, 0);    HMSetMenuResID(mEdit, 256);</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></p><a name="Section5"></a><h2>Removing the alternate 'hmnu' resource </h2><p>After removing the movable modal dialog box from the screen, the applicationmust enable appropriate menus and items and unmap the alternate <code>'hmnu'</code>resources.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    menu = GetMHandle(mApple);    EnableItem(menu, 0);    HMSetMenuResID(mApple, -1);    menu = GetMHandle(mFile);    EnableItem(menu, 0);    HMSetMenuResID(mFile, -1);    menu = GetMHandle(mEdit);    EnableItem(menu, 0);    HMSetMenuResID(mEdit, -1);</pre>	</TD></TR></TABLE></CENTER><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>The previous fragments of code do not perform error checking.Well-behaved applications perform error checking whenever required. In theseexample the menu handle should be checked for a nil value before callingDisableItem and EnableItem.</P></TD></TR></TABLE></CENTER><BR><P><A HREF="#top">Back to top</A></p><a name = "References"></a><h2>References</h2><P><i>Inside Macintosh</i>, Volume VI, Help Manager</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_34.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_34.html%3Fid%3DDTS10002785-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_34.html%3Fid%3DDTS10002785-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_34.html%3Fid%3DDTS10002785-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
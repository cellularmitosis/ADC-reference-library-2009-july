<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTSndURequest</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING170></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-169.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-171.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-127.html"><B>Chapter 22 - Endpoints Reference</B></A> / <A HREF="NetworkingWOT-146.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-169.html"><B>Functions for Connectionless Transaction-Based Endpoints</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING170-0></A>
<H3><A NAME=MARKER-9-181></A>OTSndURequest</H3>
 Initiates a connectionless transaction by sending a request to the responder.<P>
<A NAME=HEADING170-2></A>
<H5>C INTERFACE</H5>
<PRE>
<A NAME=MARKER-11-182></A>OSStatus OTSndURequest(EndpointRef ref, 
                                         TUnitRequest* req,
                                         OTFlags reqFl
</PRE>
<A NAME=HEADING170-4></A>
<H5>C++ INTERFACE</H5>
<PRE>
<A NAME=MARKER-12-183></A>OSStatus TEndpoint::SndURequest(TUnitRequest* req, 
                     OTFlags reqFlags);
</PRE>
<A NAME=HEADING170-6></A>
<H5>PARAMETERS</H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The endpoint reference of the endpoint making the request.
<DT><CODE>req</CODE>
<DD> A pointer to a <A HREF=NetworkingWOT-140.html#MARKER-9-97><CODE>TUnitRequest</CODE></A> structure that specifies the address of the responder, the request data, and the ID of this transaction. <P>
<DT>
<DD> The <CODE>req-&gt;addr</CODE> field specifies the location and size of a buffer containing the address of the responder. You must allocate a buffer for the address and specify the address. You must set the <CODE>req-&gt;addr.buf</CODE> field to point to this buffer and set the <CODE>req-&gt;addr.len</CODE> field to the length of the address.<P>
<DT>
<DD> The <CODE>req-&gt;opt</CODE> field specifies the location and size of a buffer containing the options you want to negotiate. You must allocate a buffer that contains the option information and set the <CODE>req-&gt;opt.buf</CODE> field to point to it. You must set the <CODE>req-&gt;opt.len</CODE> field to the length of the option data or to 0 if you don't want to specify any options.<P>
<DT>
<DD> The <CODE>req-&gt;udata</CODE> field specifies the location and size of a buffer containing the request data. You must allocate a buffer for the request data, initialize the <CODE>req-&gt;opudata.buf</CODE> field to point to it, and set the <CODE>req-&gt;opudata.len</CODE> field to the size of the request. The request size must not exceed the value for the <CODE>etsdu</CODE> field of the <CODE>TEndpointInfo</CODE> structure for the endpoint.<P>
<DT>
<DD> You set the <CODE>req-&gt;sequence </CODE>field to a unique, non -zero value when you send the request. You only need to do this if the endpoint issues multiple requests.<P>
<DT><CODE>reqFlags</CODE>
<DD> A bitmapped 32-bit value specifying whether delivery is guaranteed for both the requester and the responder (<CODE>T_ACKNOWLEDGED</CODE>) and whether you are sending the request data using additional calls to the <CODE>OTSndURequest</CODE> function (<CODE>T_MORE</CODE>). Use the bitwise OR<CODE> </CODE>operator to set both values.<P>
<DT><I>function result</I>
<DD> An error code. See Discussion.
</DL>
<A NAME=HEADING170-15></A>
<H5>DISCUSSION</H5>
 You use the <CODE>OTSndURequest</CODE> function to initiate a transaction. When the responder replies to your request, you use the <A HREF=NetworkingWOT-173.html#MARKER-9-190><CODE>OTRcvUReply</CODE></A> function to read the reply. If the endpoint is issuing multiple requests, you should set the <CODE>sequence</CODE> field of the <CODE>req</CODE> parameter to a unique non-zero number so that each request is distinguished from all other outstanding requests issued by the endpoint.<P>
 By default, the endpoint provider guarantees delivery for you, but not for the responder. That is, you will always find out whether your request was received, but the responder only receives acknowledgment that you received the reply if you have set the <CODE>T_ACKNOWLEDGED</CODE> flag in the <CODE>reqFlags</CODE> parameter when you send the request. Not all protocols honor this flag.<P>
 The responder's provider generates a <CODE>T_REPLYCOMPLETE</CODE> event when you have read the reply. This happens whether or not the <CODE>T_ACKNOWLEDGED</CODE> flag is set, but if it is set, this guarantees that the reply was delivered. If you don't set this flag, the responder's call to the <A HREF=NetworkingWOT-172.html#MARKER-9-187><CODE>OTSndUReply</CODE></A> function returns right away, and the responding endpoint receives no additional information as to whether the reply was received and the data was read.<P>
 Setting the <CODE>T_MORE</CODE> flag tells the endpoint provider that you are using several calls to the <CODE>OTSndURequest</CODE> function to send the request data. Note that even though you are using several calls, the request data, all put together, must still not exceed the value specified for the <CODE>etsdu</CODE> field in the endpoint's <A HREF=NetworkingWOT-136.html#MARKER-9-81><CODE>TEndpointInfo</CODE></A> structure.<P>
 If the endpoint is in synchronous blocking mode and flow-control restrictions prevent the endpoint provider from accepting the <CODE>OTSndURequest</CODE> function, the provider waits to send the request until flow-control restrictions are lifted.<P>
 If the endpoint is in asynchronous or nonblocking mode and flow-control restrictions prevent the endpoint provider from accepting the <CODE>OTSndURequest</CODE> function, the function returns the <CODE>kOTFLowErr</CODE> result. When flow-control restrictions are lifted, the endpoint provider issues a <CODE>T_GODATA</CODE> event, which you can retrieve by polling the endpoint using the <A HREF=NetworkingWOT-156.html#MARKER-9-143><CODE>OTLook</CODE></A> function or by using a notifier function. When you get this event, you can retry sending the request.<P>
 The following table shows how the endpoint's mode of execution and blocking status affects the behavior of the <CODE>OTSndURequest</CODE> function.<P>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Blocking<TH>Nonblocking<TR>
<TD>Synchronous<TD>The function returns when the provider lifts flow-control restrictions and the request has been sent to the protocol.<TD>The function returns if flow-control restrictions are in effect or the request data has been accepted by the provider.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result is never returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TR>
<TD>Asynchronous&nbsp;&nbsp;<TD>The function returns immediately<TD>The function returns immediately.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.</TABLE>
<P>
<A NAME=HEADING170-23></A>
<H5>SEE ALSO</H5>
 <A HREF=NetworkingWOT-27.html#MARKER-9-12>Table 4-4</A>.<P>
 <A HREF=NetworkingWOT-414.html#MARKER-9-27>"AppleTalk Reference"</A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-169.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-171.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

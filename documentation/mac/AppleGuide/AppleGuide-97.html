<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of Apple Guide API</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING97></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="AppleGuide-96.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="AppleGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="AppleGuide-240.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="AppleGuide-99.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="AppleGuide-2.html"><B>Apple Guide Complete</B></A> / <A HREF="AppleGuide-55.html"><B>Part 3 - Integrating Guide Files</B></A><BR><DD><A HREF="AppleGuide-56.html"><B>Chapter 9 - Apple Guide API</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING97-0></A>
<H1>Summary of Apple Guide API</H1>
<A NAME=HEADING97-1></A>
<H3>Constants</H3>
<PRE>
enum {
   gestaltHelpMtrAttr      'help'   /*Gestalt selector for Help Mgr */
                                    /* and Apple Guide*/
   gestaltAppleGuidePresent= 31,    /*Apple Guide API is available*/
   gestaltAppleGuideIsDebug= 30     /*Apple Guide Debug extension */
                                    /* is installed*/
};
enum {
   /*guide file active list types*/
   kAGViewFullHowdy        = 1,  /*full howdy*/
   kAGViewTopicAreas       = 2,  /*Topic Area*/
   kAGViewIndex            = 3,  /*Index*/
   kAGViewLookFor          = 4,  /*Look For*/
   kAGViewSingleHowdy      = 5,  /*Single List howdy*/
   kAGViewSingleTopics     = 6   /*Single List topics*/
};
enum AGDBTypeBit
{  /*guide file types returned by AGGetAvailableDBTypes*/
   kAGDBBitAny          = 0x00000001,/*one or more guide */
                                     /* files are present*/
   kAGDBTypeBitHelp     = 0x00000002,/*Help guide file*/
   kAGDBTypeBitTutorial              /*Tutorial guide */
                        = 0x00000004,/* file*/
   kAGDBTypeBitShortcuts             /*Shortcuts guide */
                        = 0x00000008,/* file*/
   kAGDBTypeBitAbout    = 0x00000010,  /*About guide file*/
   kAGDBTypeBitOther    = 0x00000080   /*Other guide file*/
};
enum {
   /* Apple Guide Apple events*/
   kAGEventDoCoach            = 'doco', /*coachmark event*/
   kAGEventDoHuh              = 'dhuh', /*huh event*/
   kAGEventGoNext             = 'gonp', /*go next event*/
   kAGEventGoPrev             = 'gopp', /*go previous event*/
   kAGEventHidePanel          = 'pahi', /*hide panel event*/
   kAGEventReturnBack         = 'gobk', /*return back event*/
   kAGEventShowPanel          = 'pash', /*show panel event*/
   kAGEventTogglePanel        = 'patg'  /*toggle panel event*/
};
enum {
   kAGFrontDatabase           = 1   /*refers to active guide file*/
};
enum {
   /*values returned by AGGetFrontWindowKind*/
   kAGNoWindow,                     /*guide file isn't open*/
   kAGAccessWindow,                 /*access window is showing*/
   kAGPresentationWindow            /*panel is showing*/
};
enum {
   /*values returned by AGGetStatus*/
   kAGIsNotRunning,           /*app portion of AG not in memory*/
   kAGIsSleeping,             /*app portion of AG in memory but */
                              /* no guide file is open*/
   kAGIsActive                /*app portion of AG in memory */
                              /* and a guide file is open*/
};
enum {
   /*guide file types, used by the functions AGFileGetIndDB */
   /* and AGFileGetDBCount, from AGFile*/
   kAGFileDBTypeAny           = 0,  /*any or all guide files*/
   kAGFileDBTypeHelp          = 1,  /*Help guide file*/
   kAGFileDBTypeTutorial      = 2,  /*Tutorial guide file*/
   kAGFileDBTypeShortcuts     = 3,  /*Shortcuts guide file*/
   kAGFileDBTypeAbout         = 4,  /*About guide file*/
   kAGFileDBTypeOther         = 8   /*Other guide file*/
};
</PRE>
<A NAME=HEADING97-10></A>
<H3>Data Types</H3>
<PRE>
typedef unsigned long  UInt32;
typedef unsigned short UInt16;
typedef signed   short SInt16;
typedef UInt32 AGRefNum;
typedef UInt32 AGCoachRefNum;
typedef UInt32 AGContextRefNum;
typedef UInt16 AGStatus;
typedef UInt16 AGWindowKind;
typedef UInt32 AGEvent;
typedef SInt16 AGErr;
typedef struct AGAppInfo
{
   AEEventID      eventId;       /*event ID*/
   long           refCon;        /*reference constant*/
   void           *contextObj;   /*private*/
}
typedef struct AGAppInfo, *AGAppInfoPtr, **AGAppInfoHdl;
typedef pascal OSErr (*CoachReplyProcPtr)(Rect *pRect, Ptr name,
                                            long refCon);
typedef pascal OSErr (*ContextReplyProcPtr)
                        (Ptr pInputData, Size inputDataSize, 
                         Ptr *ppOutputData, Size *pOutputDataSize,
                         AGAppInfoHdl hAppInfo);
/*typedefs from AGFile*/
typedef FSSpec             AGFileFSSpecType;
typedef short              AGFileSelectorCountType;
typedef short              AGFileSelectorIndexType;
typedef OSType             AGFileSelectorType;
typedef long               AGFileSelectorValueType;
typedef short              AGFileDBType;
typedef ConstStr63Param    AGFileDBMenuNamePtr;
typedef short              AGFileDBScriptType;
typedef short              AGFileDBRegionType;
typedef short              AGFileMajorRevType;
typedef short              AGFileMinorRevType;
typedef short              AGFileCountType;
</PRE>
<A NAME=HEADING97-19></A>
<H3>Functions</H3>
<A NAME=HEADING97-20></A>
<H4>Starting Up Apple Guide</H4>
<PRE>
AGErr AGStart(void);
AGErr AGQuit(void);
AGStatus AGGetStatus(void);
</PRE>
<A NAME=HEADING97-24></A>
<H4>Determining Which Guide Files Are Available</H4>
<PRE>
UInt32 AGGetAvailableDBTypes (void);
AGFileCountType  AGFileGetDBCount
   (short vRefNum, long dirID,
 AGFileDBType databaseType,
 Boolean wantMixin);
OSErr AGFileGetIndDB(short vRefNum, long dirID,
AGFileDType databaseType,
Boolean wantMixin,
short dbIndex, FSSpecType *fileSpec);
</PRE>
<A NAME=HEADING97-28></A>
<H4>Opening and Closing Guide Files</H4>
<PRE>
AGErr AGOpen(FSSpec *fileSpec, UInt32 flags,
Handle mixinControl,
AGRefNum *resultRefNum);
AGErr AGOpenWithView (FSSpec *fileSpec, UInt32 flags,
Handle mixinControl,
short viewNum,
AGRefNum *resultRefNum);
AGErr AGOpenWithSearch(FSSpec *fileSpec, UInt32 flags,
Handle mixinControl,
ConstStr255Param searchString,
AGRefNum *resultRefNum);
AGErr AGOpenWithSequence(FSSpec *fileSpec, UInt32 flags,
Handle mixinControl,
short sequenceID,
AGRefNum *resultRefNum);
AGErr AGClose(AGRefNum *resultRefNum);
</PRE>
<A NAME=HEADING97-34></A>
<H4>Working With Open Guide Files</H4>
<PRE>
Boolean AGIsDatabaseOpen(AGRefNum refNum);
AGWindowKind AGGetFrontWindowKind
      (AGRefNum refNum);
AGErr AGGeneral(AGRefNum refNum, AGEvent theEvent);
AGErr AGGetFSSpec(AGRefNum refNum, FSSpec *fileSpec); 
Getting Information About Guide Files
OSErr AGFileGetDBMenuName (AGFileFSSpecType *fileSpec,
AGFileDBMenuNamePtr menuItemNameStr);
OSErr AGFileGetHelpBalloonText
   (AGFileFSSpecType *fileSpec,
 Str255 helpMenuBalloonString);
OSErr AGFileGetHelpMenuAppCreator
   (AGFileFSSpecType *fileSpec,
 OSType *helpMenuAppCreator);
OSErr AGFileGetDBType (AGFileFSSpecType *fileSpec,
AGFileDBType *databaseType);
OSErr AGFileGetDBCountry (AGFileFSSpecType *fileSpec,
AGFileDBScriptType *script,
AGFileDBRegionType *region);
OSErr AGFileGetDBVersion (AGFileFSSpecType *fileSpec,
AGFileMajorRevType *majorRev, 
AGFileMinorRevType *minorRev);
AGFileSelectorCountType AGFileGetDBSelectorCount
   (AGFileFSSpecType *fileSpec);
OSErr AGFileGetSelector(AGFileFSSpecType *fileSpec,
AGFileSelectorIndexType selectorNumber,
AGFileSelectorType *selector, 
AGFileSelectorValueType *value);
Boolean AGFileIsMixin (AGFileFSSpecType *fileSpec,
AGFileDBMenuNamePtr menuItemNameStr);
OSErr AGFileGetMixinMatchSelector
   (AGFileFSSpecType *fileSpec,
 OSType *mixinMatchSelector);
</PRE>
<A NAME=HEADING97-50></A>
<H4>Installing and Removing Coachmark Handlers</H4>
<PRE>
OSErr AGInstallCoachHandler(CoachReplyProcPtr CoachReplyProc,
 long refCon,
 AGCoachRefNum *resultRefNum);
OSErr AGRemoveCoachHandler(AGCoachRefNum *theRefNum);
</PRE>
<A NAME=HEADING97-53></A>
<H4>Installing and Removing Context Check Handlers</H4>
<PRE>
OSErr AGInstallContextHandler
                  (ContextReplyProcPtr ContextReplyProc,
                   AEEventID eventID, long refCon,
                   AGContextRefNum *resultRefNum);
OSErr AGRemoveContextHandler(AGContextRefNum *resultRefNum);
</PRE>
<A NAME=HEADING97-56></A>
<H4>Providing Object Locations for Coachmarks</H4>
<PRE>
pascal OSErr MyCoachReplyProc
                     (Rect *pRect, Ptr name, long refCon);
</PRE>
<A NAME=HEADING97-58></A>
<H4>Responding to Context Checks</H4>
<PRE>
pascal OSErr MyContextReplyProc
                     (Ptr pInputData, Size inputDataSize,
                     Ptr *ppOutputData,
                     Size *pOutputDataSize,
                      AGAppInfoHdl hAppInfo);
</PRE>
<A NAME=HEADING97-60></A>
<H3>Result Codes
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>dirNFErr<TD>-12<TD>Directory not found or incomplete pathname<TR>
<TD>nsvErr<TD>-35<TD>Volume doesn't exist<TR>
<TD>ioErr<TD>-36<TD>I/O error<TR>
<TD>fnOpnErr<TD>-38<TD>File not open<TR>
<TD>fnfErr<TD>-43<TD>File or directory does not exist<TR>
<TD>fLckdErr<TD>-45<TD>File is locked<TR>
<TD>rfNumErr<TD>-51<TD>Bad reference number<TR>
<TD>dirNFErr<TD>-120<TD>Directory not found or incomplete pathname<TR>
<TD>kAGErrCannotInitCoach<TD>-2952<TD>Unable to initialize coach handler<TR>
<TD>kAGErrCannotInitContext<TD>-2953<TD>Unable to initialize context handler<TR>
<TD>kAGErrCannotOpenAliasFile<TD>-2954<TD>Unable to open alias<TR>
<TD>kAGErrNoAliasResource<TD>-2955<TD>Unable to open resource alias<TR>
<TD>kAGErrDatabaseNotAvailable<TD>-2956<TD>Guide file is not available<TR>
<TD>kAGErrDatabaseNotOpen<TD>-2957<TD>Guide file is not open<TR>
<TD>kAGErrMissingAppInfoHdl<TD>-2958<TD>No application information handler<TR>
<TD>kAGErrMissingContextObejct<TD>-2959<TD>No context object <TR>
<TD>kAGErrInvalidRefNum<TD>-2960<TD>The guide file was opened by another application<TR>
<TD>kAGErrDatabaseOpen<TD>-2961<TD>No open guide file<TR>
<TD>kAGErrInsufficientMemory<TD>-2962<TD>Not enough memory<TR>
<TD>afpAccessDenied<TD>-5000<TD>User does not have the correct access to the file</TABLE>
</H3>
</BLOCKQUOTE><P>

</BLOCKQUOTE>
<HR>
<center>
<A HREF="AppleGuide-96.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="AppleGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="AppleGuide-240.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="AppleGuide-99.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="AppleGuide-3.html">&copy; Apple Computer, Inc.</A><br>12 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

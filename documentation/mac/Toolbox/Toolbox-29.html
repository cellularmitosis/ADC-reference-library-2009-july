<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Introduction to Events(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING29></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-28.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-30.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING29-0></A>
<H1>Introduction to Events</H1>
 Most Macintosh applications receive information about hardware and software occurrences that require a response from the application, through events. An <B>event</B> is the means by which the Event Manager communicates information about user actions, changes in the processing status of the application, and other occurrences that require a response from the application. <P>
 The Event Manager communicates information about events that occur through the event record. The <CODE>EventRecord</CODE> data type defines the event record. The <B>event record</B> contains information about what type of event occurred (a mouse click or keypress, for example) and contains additional information associated with the event (for example, for a keypress the Event Manager also reports which key was pressed). <A NAME=MARKER-2-360></A><P>
 Most Macintosh applications are event-driven--that is, they respond to various changes or occurrences and take action based on the nature of the event. Typically, a Macintosh application repeatedly checks to see if an event has occurred and, if so, responds to the event. If no events are pending, the application can choose to relinquish the processor for a specified amount of time or can perform other tasks before checking again to see whether an event has occurred.<P>
 Your application typically retrieves events from the Event Manager and also relinquishes processor time by using the <CODE>WaitNextEvent</CODE> function. If any events are pending for your application, the <CODE>WaitNextEvent</CODE> function returns the event to your application. If no events are pending for your application, the <CODE>WaitNextEvent</CODE> function may allocate processing time to other applications.<P>
 When multiple applications are open, the user chooses one to interact with at any given time. The active application (or <B>foreground process</B>) is the one currently interacting with the user. The foreground process displays its menu bar, and its windows are in front of the windows of all other applications. (The term <B>process</B> refers to an open application or, in some cases, an open desk accessory.) <A NAME=MARKER-2-91></A><P>
 There can be only one foreground process at any one time; however, multiple processes can exist in the background. A <B>background process</B> is a process that is not currently interacting with the user. The foreground process has first priority for accessing the <BR>CPU. Other processes can access the CPU only when the foreground process yields time to them. <A NAME=MARKER-2-265></A><P>
 By using <CODE>WaitNextEvent</CODE> to retrieve events, you allow other applications to make use of processing time that your application would otherwise not use. When your application is in the background, it in turn can receive processing time when other applications relinquish the CPU. Using <CODE>WaitNextEvent</CODE> also allows users to switch between multiple open applications.<P>
 An application that is in the background can get CPU time but can't interact with the user while it is in the background. (However, the user can choose to bring the application to the foreground--for example, by clicking in one of the application's windows.) An application can also post a notification request using the Notification Manager if the application is in the background and requires the user's attention. Any application that has the <CODE>canBackground</CODE> flag set in its size (<CODE>'SIZE'</CODE>) resource is eligible to obtain access to the CPU when it is in the background.<P>
 At any given time a process is either in the foreground or the background; a process can switch between the two states at well-defined times. <A NAME=MARKER-2-266></A><P>
 The Event Manager ensures that switching between applications occurs in a smooth fashion--by sending your application an event when it is about to be suspended and sending it an event when it has processing time again and can resume executing. The Event Manager and Process Manager coordinate this switching and scheduling of processor time among many applications. <A NAME=MARKER-2-267></A><A NAME=MARKER-2-512></A><P>
 Your application can receive various types of events: low-level events, operating-system events, and high-level events. <A NAME=MARKER-2-112></A><P>
 The Event Manager returns low-level events to your application for occurrences such as the user pressing the mouse button, releasing the mouse button, pressing a key on the keyboard, or inserting a disk. The Event Manager also returns low-level events to your application if your application needs to activate (make changes to a window based on whether it is in front or not) or update (redraw the contents of) one of its windows. When your application requests an event and there are no other events to report, the Event Manager returns a null event.<P>
 The Event Manager returns operating-system events to your application when the processing status of your application is about to change or has changed. For example, if <BR>a user brings your application to the foreground, the Process Manager sends an event through the Event Manager to your application. Some of the work of reactivating your application is done automatically, both by the Process Manager and by the Window Manager; your application must take care of any further processing needed as a result of your application being reactivated.<P>
 The Event Manager returns high-level events to your application as a result of communication directed to your application from another application or process. <P>
 Low-level events, except for update events and null events, are always directed to the foreground process. Operating-system events are also always directed to the foreground process. High-level events, update events, and null events can be directed to the foreground process or background processes.<P>
 You can specify which types of events you want your application to receive. You do this by specifying an event mask as a parameter to various Event Manager routines. An <B>event mask</B> allows you to mask out the events you are not interested in receiving. For example, you can accept all events except high-level events.<P>
 Events can originate from a number of different sources: the Operating System Event Manager, Window Manager, Process Manager, and PPC Toolbox. <A HREF=#MARKER-9-17>Figure 2-1</A> shows the relationships between the Toolbox Event Manager, other parts of the system software, and your application. <A NAME=MARKER-2-268></A><P>
<B>Figure 2-1  <A NAME=MARKER-9-17></A>Sources of events sent to your application</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/Figure_1-1_EV-04.jpg"><P>
 The Operating System Event Manager creates and maintains a queue referred to as the <B>Operating System event queue.</B> The Operating System Event Manager detects and reports low-level hardware-related events such as mouse clicks, keypresses, and disk insertions. The Operating System Event Manager places these events in the Operating System event queue. The Toolbox Event Manager retrieves events from this event queue and returns events, one at a time at your application's request, to your application. <A NAME=MARKER-2-269></A><P>
 A maximum of 20 events can be pending in the Operating System event queue. If the Operating System event queue becomes full, the Operating System Event Manager begins to discard old events to make room for new ones as events are posted. The Operating System Event Manager always discards the oldest event in the queue when <BR>it must discard an event. However, this is not a common occurrence; your application typically processes events much faster than the user can generate them. The actual capacity of the event queue is determined by system startup information stored on <BR>the startup volume; see the chapter "File Manager" in <I><A HREF="../Files/Files-2.html">Inside Macintosh: Files</A></I> for system startup information. <A NAME=MARKER-2-19></A><P>
 The Event Manager can also report events from the Window Manager and Process Manager. If a window needs to be updated, activated, or deactivated, the <BR>Window Manager directs an event to the Toolbox Event Manager. Similarly, the <BR>Process Manager directs an event to the Toolbox Event Manager if the processing <BR>status of your application changes. The Toolbox Event Manager reports these events <BR>to your application.<P>
<DL>
<DT><B>Note</B>
<DD><A NAME=MARKER-9-20></A>On computers running System 6, MultiFinder provides some of <BR>the capabilities supplied by the Process Manager in System 7. On computers running System 6 without MultiFinder, only a single- application environment is supported.<EM></EM>  <A NAME=MARKER-2-1></A><A NAME=MARKER-2-102></A><A NAME=MARKER-2-108></A>   <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Your application can use the Event Manager to send and receive high-level events. To transmit high-level events between applications, the Event Manager uses the PPC Toolbox on behalf of your application. For each open application capable of receiving high-level events, the Event Manager maintains a separate queue, referred to as the application's <B>high-level event queue,</B> to store high-level events. The size of an application's high-level event queue is limited only by the amount of available memory. <A NAME=MARKER-2-24></A><A NAME=MARKER-2-116></A><P>
 Your application's event stream consists of those events that are available to your application for retrieval when it makes a request for an event. For example, when your application is in the background, its event stream can contain only update events, null events, and high-level events.<P>
 When your application asks the Event Manager for the next event, the Event Manager returns the next available event according to its priority. In general, the Event Manager returns events in this order of priority:<P>
<OL>
<LI>low-level events
<LI>operating-system events 
<LI>high-level events<P>
</OL>
 The next sections describe low-level events, operating-system events, and high-level events in greater detail.<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Toolbox-30.html#HEADING30-0">Low-Level Events</A>
<DD>
<DT><A HREF="Toolbox-31.html#HEADING31-0">Operating-System Events</A>
<DD>
<DT><A HREF="Toolbox-32.html#HEADING32-0">High-Level Events</A>
<DD>
<DT><A HREF="Toolbox-33.html#HEADING33-0">Priority of Events</A>
<DD>
<DT><A HREF="Toolbox-34.html#HEADING34-0">Switching Contexts</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-28.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-30.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

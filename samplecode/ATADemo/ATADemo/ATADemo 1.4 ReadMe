     ATADemo - Macintosh ATA Manager Sample     Version: 1.4     Apple Macintosh Developer Technical Support      Copyright Apple Computer, Inc     You may incorporate this sample code into your applications     without restriction, though the sample code has been provided "AS     IS" and the responsibility for its operation is 100% yours.     However, what you are not permitted to do is to redistribute the     source as "DTS Sample Code" after having made changes. If you're     going to re-distribute the source, we require that you make it     clear in the source that the code was descended from Apple Sample     Code, but that you've made changes.     ATADemo is a CodeWarrior C sample that will call the ATA     Manager, scan the ATA bus, list the various device     configuration data, and attempt to read and display sector 0 for     any devices.          The code to send ATA and ATAPI commands can be found in the file     ATAExecIO.c.          This sample has been updated to properly work with the .AppleCD     driver installed.  On my PowerBook G3 this sample produced the following     results:     ------------------------------------------------------------------Macintosh ATA Manager SampleATA Manager inquiry:    ATA Manager Version: 4.3.1 (hex 04318000)    Busses:     2    Devices:    2    PIO Modes:  0    DMA Modes:  0    Multi DMA Modes:0-----------------------------------------Found .AppleCD driver, preparing to disable it- Disable the CD Driver -- Wake up the CD Driver -- Set the CD Driver Quiescence mode to OnDevice 0 .ATADiskConfiguration: (ATA, Internal)                 Configuration word 0x0040                          Cylinders 4200                              Heads 16                        Bytes/Track 0       Bytes/Sector (0 = 512 bytes) 0                      Sectors/Track 0          Vendor Unique (word 7..9) 0x0000 0x0000 0x0000                      Serial Number "88650292            "                        Buffer Type 0x0000 Buffer size in 512 byte increments 0      Number of ECC bytes available 38                  Firmware Revision "E5.04 G"                       Model Number "TOSHIBA MK2105MAV"     Capability Flags (word 47..53) 0x0007 0x0000 0x0200 0x4000 0x0F00 0x0000 0x8010           Cylinders (current mode) 4200               Heads (current mode) 16       Sectors/Track (current mode) 63        Current Capacity in Sectors 4233600    Multiple Sector Capability Flag 0x0108   Current User-addressable Sectors 4233600Single Word DMA Transfer Mode Flags 0x0007  Multiword DMT Transfer Mode Flags 0x0407*********************************** Sector 0 ***********************************000   0: 45 52 02 00 00 40 99 7f 00 00 00 00 00 00 00 00  ER...@..........010  16: 00 04 00 00 00 40 00 17 00 01 00 00 00 76 00 24  .....@.......v.$020  32: ff ff 00 00 00 c0 00 15 07 01 00 00 00 f6 00 22  ..............."030  48: f8 ff 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................040  64: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................050  80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................060  96: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................070 112: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................080 128: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................090 144: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0a0 160: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0b0 176: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0c0 192: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0d0 208: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0e0 224: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0f0 240: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................100 256: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................110 272: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................120 288: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................130 304: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................140 320: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................150 336: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................160 352: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................170 368: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................180 384: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................190 400: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1a0 416: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1b0 432: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1c0 448: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1d0 464: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1e0 480: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1f0 496: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................-----------------------------------------Device 1 .AppleCDConfiguration: (ATAPI, Media Bay)                 Configuration word 0x8580                          Cylinders 0                              Heads 0                        Bytes/Track 0       Bytes/Sector (0 = 512 bytes) 0                      Sectors/Track 0          Vendor Unique (word 7..9) 0x0000 0x0000 0x0000                      Serial Number ""                        Buffer Type 0x0000 Buffer size in 512 byte increments 0      Number of ECC bytes available 0                  Firmware Revision "A011"                       Model Number "MATSHITA CR-174"     Capability Flags (word 47..53) 0x0002 0x0200 0x0200 0x0000 0x0F00 0x0000 0x0000           Cylinders (current mode) 0               Heads (current mode) 0       Sectors/Track (current mode) 0        Current Capacity in Sectors 0    Multiple Sector Capability Flag 0x0000   Current User-addressable Sectors 0Single Word DMA Transfer Mode Flags 0x0007  Multiword DMT Transfer Mode Flags 0x0407*********************************** Sector 0 ***********************************000   0: 45 52 08 00 00 04 ff fe 00 01 00 01 00 00 00 00  ER..............010  16: 00 04 00 00 00 10 00 05 00 01 00 00 00 1e 00 19  ................020  32: ff ff 00 00 00 3c 00 05 07 01 00 00 00 4a 00 1e  .....<.......J..030  48: f8 ff 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................040  64: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................050  80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................060  96: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................070 112: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................080 128: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................090 144: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0a0 160: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0b0 176: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0c0 192: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0d0 208: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0e0 224: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................0f0 240: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................100 256: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................110 272: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................120 288: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................130 304: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................140 320: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................150 336: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................160 352: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................170 368: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................180 384: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................190 400: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1a0 416: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1b0 432: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1c0 448: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1d0 464: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1e0 480: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................1f0 496: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................200 512: 50 4d 00 00 00 00 00 0a 00 00 00 01 00 00 00 3f  PM.............?210 528: 41 70 70 6c 65 00 00 00 00 00 00 00 00 00 00 00  Apple...........220 544: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................230 560: 41 70 70 6c 65 5f 70 61 72 74 69 74 69 6f 6e 5f  Apple_partition_240 576: 6d 61 70 00 00 00 00 00 00 00 00 00 00 00 00 00  map.............250 592: 00 00 00 00 00 00 00 3f 00 00 00 17 00 00 00 00  .......?........260 608: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................270 624: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................280 640: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................290 656: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................2a0 672: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................2b0 688: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................2c0 704: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................2d0 720: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................2e0 736: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................2f0 752: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................300 768: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................310 784: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................320 800: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................330 816: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................340 832: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................350 848: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................360 864: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................370 880: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................380 896: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................390 912: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................3a0 928: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................3b0 944: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................3c0 960: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................3d0 976: 00 00 00 00 00 0b ff ff 00 00 00 00 00 00 00 00  ................3e0 992: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................3f0 1008: 00 00 00 00 00 00 00 00 00 00 00 00 4d 52 4b 53  ............MRKS400 1024: 50 4d 00 00 00 00 00 0a 00 00 00 40 00 00 00 38  PM.........@...8410 1040: 4d 61 63 69 6e 74 6f 73 68 00 00 00 00 00 00 00  Macintosh.......420 1056: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................430 1072: 41 70 70 6c 65 5f 44 72 69 76 65 72 34 33 00 00  Apple_Driver43..440 1088: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................450 1104: 00 00 00 00 00 00 00 38 00 00 03 7f 00 00 00 00  .......8........460 1120: 00 00 24 00 00 00 00 00 00 00 00 00 00 00 00 00  ..$.............470 1136: 00 00 00 00 00 00 eb 19 00 00 00 00 00 00 00 00  ................480 1152: 00 00 00 00 00 00 00 00 70 74 44 52 00 00 00 00  ........ptDR....490 1168: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................4a0 1184: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................4b0 1200: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................4c0 1216: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................4d0 1232: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................4e0 1248: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................4f0 1264: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................500 1280: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................510 1296: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................520 1312: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................530 1328: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................540 1344: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................550 1360: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................560 1376: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................570 1392: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................580 1408: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................590 1424: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................5a0 1440: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................5b0 1456: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................5c0 1472: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................5d0 1488: 00 00 00 00 00 0f ff ff 00 00 00 00 00 00 00 00  ................5e0 1504: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................5f0 1520: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................600 1536: 50 4d 00 00 00 00 00 0a 00 00 00 78 00 00 00 78  PM.........x...x610 1552: 4d 61 63 69 6e 74 6f 73 68 00 00 00 00 00 00 00  Macintosh.......620 1568: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................630 1584: 41 70 70 6c 65 5f 44 72 69 76 65 72 34 33 5f 43  Apple_Driver43_C640 1600: 44 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  D...............650 1616: 00 00 00 00 00 00 00 78 00 00 03 7f 00 00 00 00  .......x........660 1632: 00 00 c8 00 00 00 00 00 00 00 00 00 00 00 00 00  ................670 1648: 00 00 00 00 00 00 e9 ad 00 00 00 00 00 00 00 00  ................680 1664: 00 00 00 00 00 00 00 00 43 44 72 76 00 00 00 00  ........CDrv....690 1680: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................6a0 1696: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................6b0 1712: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................6c0 1728: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................6d0 1744: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................6e0 1760: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................6f0 1776: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................700 1792: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................710 1808: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................720 1824: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................730 1840: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................740 1856: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................750 1872: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................760 1888: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................770 1904: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................780 1920: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................790 1936: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................7a0 1952: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................7b0 1968: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................7c0 1984: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................7d0 2000: 00 00 00 00 00 13 ff ff 00 00 00 00 00 00 00 00  ................7e0 2016: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................7f0 2032: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................-----------------------------------------Re-enabling the .AppleCD driver - Enable the CD Driver -- Set the CD Driver Quiescence mode to Off
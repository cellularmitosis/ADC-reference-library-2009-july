<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Resource Programming Guide: Image, Sound, and Video Resources</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Image, Sound, and Video Resources"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/10000051i-CH7" title="Image, Sound, and Video Resources"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../ResourceManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000458" target="_top">Resource Management</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW1">Resource Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Strings/Strings.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../CarbonNibs/CarbonNibs.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/10000051i-CH7-SW1" title="Image, Sound, and Video Resources"></a><h1>Image, Sound, and Video Resources</h1><p>The Mac OS X and iPhone OS platforms were built to provide a rich multimedia experience. To support that experience, both platforms provide plenty of support for loading and using image, sound, and video resources in your application. Image resources are commonly used to draw portions of an application’s user interface. Sound and video resources are used less frequently but can also enhance the basic appearance and appeal of an application. The following sections describe the support available for working with image, sound, and video resources in your applications. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ImageSoundResources.html#//apple_ref/doc/uid/10000051i-CH7-SW4">Images and Sounds in Nib Files</a>
				
			<br/>
			
        
			
			
				<a href="ImageSoundResources.html#//apple_ref/doc/uid/10000051i-CH7-SW5">Loading Image Resources</a>
				
			<br/>
			
        
			
			
				<a href="ImageSoundResources.html#//apple_ref/doc/uid/10000051i-CH7-SW8">Playing Audio Files</a>
				
			<br/>
			
        
			
			
				<a href="ImageSoundResources.html#//apple_ref/doc/uid/10000051i-CH7-SW15">Playing Video Resources</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/10000051i-CH7-SW4" title="Images and Sounds in Nib Files"></a><h2>Images and Sounds in Nib Files</h2><p>Using Interface Builder, you can reference your application’s sound and image files from within nib files. You might do so to associate those images or sounds with different properties of a view or control. For example, you might set the default image to display in an image view or set the image to display for a button. Creating such a connection in Interface Builder saves you the hassle of having to make that connection later when the nib file is loaded.  </p><p>To make image and sound resources available in Interface Builder 3.0 and later, all you have to do is add them to your Xcode project. Interface Builder automatically searches your Xcode project for resources and lists them in the library window. When you make a connection to a given resource file, Interface Builder makes a note of that connection in the nib file. At load time, the nib-loading code looks for that resource in the project bundle, where it should have been placed by Xcode at build time. </p><p>When you load a nib file that contains references to image and sound resources, the nib-loading code caches resources whenever possible for easy retrieval later. For example, after loading a nib file, you can retrieve an image associated with that nib file using the <code>imageNamed:</code> method of either <code><a href="../../../Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/occ/cl/NSImage" target="_top">NSImage</a></code> or <code><!--a target="_top" -->UIImage<!--/a--></code> (depending on your platform). Similarly, you can retrieve cached sound resources in Mac OS X using the <code><a href="../../../Reference/ApplicationKit/Classes/NSSound_Class/Reference/Reference.html#//apple_ref/occ/clm/NSSound/soundNamed:" target="_top">soundNamed:</a></code> method of <code><a href="../../../Reference/ApplicationKit/Classes/NSSound_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSound" target="_top">NSSound</a></code>. Interface Builder does not cache sound resources in iPhone OS nor does it cache image and sound resources associated with Carbon nib files. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW5" title="Loading Image Resources"></a><h2>Loading Image Resources</h2><p>Image resources are commonly used in most applications. Even very simple applications use images to create a custom look for controls and views. Mac OS X and iPhone OS provide extensive support for manipulating image data using Objective-C objects. These objects make using image images extremely easy, often requiring only a few lines of code to load and draw the image. If you prefer not to use the Objective-C objects, you can also use Quartz to load images using a C-based interface. The following sections describe the process for loading image resource files using each of the available techniques.</p><a name="//apple_ref/doc/uid/10000051i-CH7-SW6" title="Loading Images in Objective-C"></a><h3>Loading Images in Objective-C</h3><p>To load images in Objective-C, you use either the <code><a href="../../../Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/occ/cl/NSImage" target="_top">NSImage</a></code> or <code><!--a target="_top" -->UIImage<!--/a--></code> object, depending on the current platform. Applications built for Mac OS X using the AppKit framework use the <code>NSImage</code> object to load images and draw them. Applications built for iPhone OS use the <code>UIImage</code> object. Functionally, both of these objects provide almost identical behavior when it comes to loading existing image resources. You initialize the object by passing it a pointer to the image file in your application bundle and the image object takes care of the details of loading and drawing the image data. </p><p><span class="content_text">Listing 4-1</span> shows how to load an image resource using the <code>NSImage</code> class. After you locate the image resource, which in this case is in the application bundle, you simply use that path to initialize the image object. After initialization, you can draw the image using the methods of <code>NSImage</code> or pass that object to other methods that can use it. To perform the exact same task in iPhone OS, all you would need to do is change references of <code>NSImage</code> to <code>UIImage</code>. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW2" title="Listing 4-1Loading an image resource"></a><p class="codesample"><strong>Listing 4-1&nbsp;&nbsp;</strong>Loading an image resource</p><div class="codesample"><table><tr><td scope="row"><pre>NSString* imageName = [[NSBundle mainBundle] pathForResource:@"image1" ofType:@"png"];<span></span></pre></td></tr><tr><td scope="row"><pre>NSImage* imageObj = [[NSImage alloc] initWithContentsOfFile:imageName];<span></span></pre></td></tr></table></div><p>You can use image objects to open any type of image supported on the target platform. Each object is typically a lightweight wrapper for more advanced image handling code. To draw an image in the current graphics context, you would simply use one of its drawing related methods. Both <code>NSImage</code> and <code>UIImage</code> have methods for drawing the image in several different ways. The <code>NSImage</code> class also provides extra support for manipulating the images you load. </p><p>For information about the methods of the <code>NSImage</code> and <code>UIImage</code> classes, see <em><a href="../../../Reference/ApplicationKit/Classes/NSImage_Class/index.html#//apple_ref/doc/uid/TP40004051" target="_top">NSImage Class Reference</a></em> and <em><!--a target="_top" -->UIImage Class Reference<!--/a--></em>. For more detailed information about the additional features of the <code>NSImage</code> class, see <span class="content_text"><a href="../../CocoaDrawingGuide/Images/Images.html#//apple_ref/doc/uid/TP40003290-CH208" target="_top">Images</a></span> in <em><a href="../../CocoaDrawingGuide/index.html#//apple_ref/doc/uid/TP40003290" target="_top">Cocoa Drawing Guide</a></em>. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW7" title="Loading Images Using Quartz"></a><h3>Loading Images Using Quartz</h3><p>If you are writing C-based code, you can use a combination of Core Foundation and Quartz calls to load image resources into your applications. Core Foundation provides the initial support for locating image resources and loading the corresponding image data into memory. Quartz takes the image data you load into memory and turns it into a usable <code><a href="../../../../GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code> that your code can then use to draw the image. </p><p>There are two ways to load images using Quartz: data providers and image source objects. Data providers are available in both iPhone OS and Mac OS X. Image source objects are available only in Mac OS X v10.4 and later but take advantage of the Image I/O framework to enhance the basic image handling capabilities of data providers. When it comes to loading and displaying image resources, both technologies are well suited for the job. The only time you might prefer image sources over data providers is when you want greater access to the image-related data. </p><p><span class="content_text">Listing 4-2</span> shows how to use a data provider to load a JPEG image. This method uses the Core Foundation bundle support to locate the image in the application’s main bundle and get a URL to it. It then uses that URL to create the data provider object and then create a <code><a href="../../../../GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code> for the corresponding JPEG data. (For brevity this example omits any error-handling code. Your own code should make sure that any referenced data structures are valid.) </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW3" title="Listing 4-2Using data providers to load image resources"></a><p class="codesample"><strong>Listing 4-2&nbsp;&nbsp;</strong>Using data providers to load image resources</p><div class="codesample"><table><tr><td scope="row"><pre>CGImageRef MyCreateJPEGImageRef (const char *imageName);<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    CGImageRef image;<span></span></pre></td></tr><tr><td scope="row"><pre>    CGDataProviderRef provider;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFStringRef name;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFURLRef url;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFBundleRef mainBundle = CFBundleGetMainBundle();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Get the URL to the bundle resource.<span></span></pre></td></tr><tr><td scope="row"><pre>    name = CFStringCreateWithCString (NULL, filename, kCFStringEncodingUTF8);<span></span></pre></td></tr><tr><td scope="row"><pre>    url = CFBundleCopyResourceURL(mainBundle, name, CFSTR("jpg"), NULL);<span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease(name);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Create the data provider object<span></span></pre></td></tr><tr><td scope="row"><pre>    provider = CGDataProviderCreateWithURL (url);<span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease (url);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Create the image object from that provider.<span></span></pre></td></tr><tr><td scope="row"><pre>    image = CGImageCreateWithJPEGDataProvider (provider, NULL, true,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    kCGRenderingIntentDefault);<span></span></pre></td></tr><tr><td scope="row"><pre>    CGDataProviderRelease (provider);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    return (image);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>For detailed information about working with Quartz images, see <em><a href="../../../../GraphicsImaging/Conceptual/drawingwithquartz2d/index.html#//apple_ref/doc/uid/TP30001066" target="_top">Quartz 2D Programming Guide</a></em>. For reference information about data providers, see <em><a href="../../../../GraphicsImaging/Reference/Quartz2D_Collection/index.html#//apple_ref/doc/uid/TP40003853" target="_top">Quartz 2D Reference Collection</a></em> (Mac OS X) or <em><!--a target="_top" -->Core Graphics Framework Reference<!--/a--></em> (iPhone OS). </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW8" title="Playing Audio Files"></a><h2>Playing Audio Files</h2><p>Audio resources are typically used to provide audio feedback for different parts of your application. Several technologies are available to handle the loading and playback of audio. Which technology you use is going to be determined by the underlying platform and the level of sophistication you need for handling the audio. The following sections describe the key technologies you might use and when you would use them. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW9" title="Using Core Audio to Play Sounds"></a><h3>Using Core Audio to Play Sounds</h3><p>Both Mac OS X and iPhone OS support the playback of audio files using the Core Audio family of frameworks. Core Audio provides a wide range of audio services, including the playback of essentially any kind of audio file you can imagine. For basic playback, Core Audio offers two mechanisms, both available in the Audio Toolbox framework:</p><ul class="spaceabove"><li class="li"><p>To play short sound files of under five seconds duration when you do not need level control or other control, use System Audio Services.</p></li><li class="li"><p>To play longer sound files, to exert control over playback including level adjustments, or to play multiple sounds simultaneously, use Audio Queue Services. </p></li></ul><p><span class="content_text">Listing 4-3</span> shows a short program that uses the interfaces in System Audio Services to play a sound. Before playing the sound, it registers it and creates a sound ID for it. To play the sound, it then passes this sound ID to the <code><!--a-->AudioServicesPlaySystemSound<!--/a--></code> function. When the sound is finished playing, Core Audio notifies the application by calling its audio completion callback routine. This routine handles the clean up of the sound ID prior to the program exiting. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW10" title="Listing 4-3Playing a sound using System Audio Services"></a><p class="codesample"><strong>Listing 4-3&nbsp;&nbsp;</strong>Playing a sound using System Audio Services</p><div class="codesample"><table><tr><td scope="row"><pre>#include &lt;AudioToolbox/AudioToolbox.h><span></span></pre></td></tr><tr><td scope="row"><pre>#include &lt;CoreFoundation/CoreFoundation.h><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Define a callback to be called when the sound is finished<span></span></pre></td></tr><tr><td scope="row"><pre>// playing. Useful when you need to free memory after playing.<span></span></pre></td></tr><tr><td scope="row"><pre>static void MyCompletionCallback (<span></span></pre></td></tr><tr><td scope="row"><pre>    SystemSoundID  mySSID,<span></span></pre></td></tr><tr><td scope="row"><pre>    void * myURLRef<span></span></pre></td></tr><tr><td scope="row"><pre>) {<span></span></pre></td></tr><tr><td scope="row"><pre>        AudioServicesDisposeSystemSoundID (mySSID);<span></span></pre></td></tr><tr><td scope="row"><pre>        CFRelease (myURLRef);<span></span></pre></td></tr><tr><td scope="row"><pre>        CFRunLoopStop (CFRunLoopGetCurrent());<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>int main (int argc, const char * argv[]) {<span></span></pre></td></tr><tr><td scope="row"><pre>    // Set up the pieces needed to play a sound.<span></span></pre></td></tr><tr><td scope="row"><pre>    SystemSoundID    mySSID;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFURLRef        myURLRef;<span></span></pre></td></tr><tr><td scope="row"><pre>    myURLRef = CFURLCreateWithFileSystemPath (<span></span></pre></td></tr><tr><td scope="row"><pre>        kCFAllocatorDefault,<span></span></pre></td></tr><tr><td scope="row"><pre>        CFSTR ("../../ComedyHorns.aif"),<span></span></pre></td></tr><tr><td scope="row"><pre>        kCFURLPOSIXPathStyle,<span></span></pre></td></tr><tr><td scope="row"><pre>        FALSE<span></span></pre></td></tr><tr><td scope="row"><pre>    );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // create a system sound ID to represent the sound file<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus error = AudioServicesCreateSystemSoundID (myURLRef, &amp;mySSID);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Register the sound completion callback.<span></span></pre></td></tr><tr><td scope="row"><pre>    // Again, useful when you need to free memory after playing.<span></span></pre></td></tr><tr><td scope="row"><pre>    AudioServicesAddSystemSoundCompletion (<span></span></pre></td></tr><tr><td scope="row"><pre>        mySSID,<span></span></pre></td></tr><tr><td scope="row"><pre>        NULL,<span></span></pre></td></tr><tr><td scope="row"><pre>        NULL,<span></span></pre></td></tr><tr><td scope="row"><pre>        MyCompletionCallback,<span></span></pre></td></tr><tr><td scope="row"><pre>        (void *) myURLRef<span></span></pre></td></tr><tr><td scope="row"><pre>    );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Play the sound file.<span></span></pre></td></tr><tr><td scope="row"><pre>    AudioServicesPlaySystemSound (mySSID);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Invoke a run loop on the current thread to keep the application<span></span></pre></td></tr><tr><td scope="row"><pre>    // running long enough for the sound to play; the sound completion<span></span></pre></td></tr><tr><td scope="row"><pre>    // callback later stops this run loop.<span></span></pre></td></tr><tr><td scope="row"><pre>    CFRunLoopRun ();<span></span></pre></td></tr><tr><td scope="row"><pre>    return 0;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	<p>For more information about the features of Core Audio, see <em><a href="../../../../MusicAudio/Conceptual/CoreAudioOverview/index.html#//apple_ref/doc/uid/TP40003577" target="_top">Core Audio Overview</a></em>. For information and examples of how to play sounds using the Audio Queue Services technology, see <em><a href="../../../../MusicAudio/Conceptual/AudioQueueProgrammingGuide/index.html#//apple_ref/doc/uid/TP40005343" target="_top">Audio Queue Services Programming Guide</a></em>.  </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW11" title="Using the AppKit Framework to Play Audio"></a><h3>Using the AppKit Framework to Play Audio</h3><p>In Mac OS X, the AppKit framework provides support for loading and playing sound files through the <code><a href="../../../Reference/ApplicationKit/Classes/NSSound_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSound" target="_top">NSSound</a></code> class. You can use this class to play back sounds stored as AIFF, WAV, and NeXT <code>.snd</code> files. For sound resources located in your application’s bundle, the simplest way to load a sound is using the <code><a href="../../../Reference/ApplicationKit/Classes/NSSound_Class/Reference/Reference.html#//apple_ref/occ/clm/NSSound/soundNamed:" target="_top">soundNamed:</a></code><a name="//apple_ref/doc/uid/10000051i-CH7-DontLinkElementID_6"></a> method, as shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSSound* aSound = [NSSound soundNamed:@"mySound"];<span></span></pre></td></tr></table></div><p>The <code>soundNamed:</code> method checks the application’s sound cache for an existing sound resource with the specified name. If the specified resource is not currently in the sound cache, <code>NSSound</code> automatically searches for it in several other locations, including your application’s main bundle and any system <code>Library/Sounds</code> directories.</p><p>Because the <code>soundNamed:</code> method also loads system sound names, you should avoid using the names of system sounds when naming any of your custom sound files. Cocoa populates the sound cache with any sound files it needs, such as the file used for the current system alert sound. It caches these sounds under the filename of the sound (minus its filename extension). If one of your custom sounds matches the name of a different sound file that is already cached, the <code>soundNamed:</code> method returns the cached file instead of your custom one. </p><p>If you want to ensure that the correct sound file resource is loaded every time, you can always load the sound file using an explicit path string, as shown in the following example. </p><div class="codesample"><table><tr><td scope="row"><pre>NSString* soundFile = [[NSBundle mainBundle] pathForResource:@"mySound" ofType:@"aiff"];<span></span></pre></td></tr><tr><td scope="row"><pre>NSSound* sound = [[NSSound alloc] initWithContentsOfFile:soundFile byReference:YES];<span></span></pre></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/10000051i-CH7-SW14" title="Note"></a><p><strong>Note:</strong>&nbsp;Sound files associated with a nib file are loaded automatically when the nib file is loaded. To access those sounds, use the <code>soundNamed:</code> method of <code>NSSound</code>, passing in the name of the sound. For more information, see <span class="content_text"><a href="../CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW9">“About Image and Sound Resources.”</a></span> </p></div><p>For more information about using the <code>NSSound</code> class, see <em><a href="../../Sound/index.html#//apple_ref/doc/uid/10000104i" target="_top">Sound Programming Topics for Cocoa</a></em> and <em><a href="../../../Reference/ApplicationKit/Classes/NSSound_Class/index.html#//apple_ref/doc/uid/TP40004112" target="_top">NSSound Class Reference</a></em>. If you want to load sound resources for Carbon-based applications, you must use QuickTime or Core Audio to do so. For information about the QuickTime Kit framework, see <em><a href="../../../../QuickTime/Conceptual/QTKitProgrammingGuide/index.html#//apple_ref/doc/uid/TP40001245" target="_top">QuickTime Kit Programming Guide</a></em> and <em><a href="../../../../QuickTime/Reference/QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QTKit Framework Reference</a></em>. For general information about the QuickTime framework, see <em><a href="../../../../QuickTime/RM/Fundamentals/QTOverview/index.html#//apple_ref/doc/uid/TP30000992" target="_top">QuickTime Overview</a></em>. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW15" title="Playing Video Resources"></a><h2>Playing Video Resources</h2><p>Video resources are prerendered movie files that you can play from your application’s user interface. Games often use prerendered movies as cut scenes between different levels. The following sections provide information about how to load these types of resources and play them in your applications. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW16" title="Playing Video Files in Mac OS X"></a><h3>Playing Video Files in Mac OS X</h3><p>Video files are like any other resource files in your application. Once you locate the resource file, you can use an appropriate technology to open and play it. In Mac OS X, you use the QuickTime or Quicktime Kit frameworks to open video files, associate them with a graphics context, and play their contents. These frameworks support the playback of both video and audio files in either C or Objective-C code.</p><p>The following example loads a video file from an application’s bundle and associates it with a view using the QuickTime Kit framework. The view object returned by the <code>getMyQTMovieView</code> method is assumed to be a <code><a href="../../../../QuickTime/Reference/QTKitFramework/Classes/QTMovieView_Class/Reference/Reference.html#//apple_ref/occ/cl/QTMovieView" target="_top">QTMovieView</a></code> object located in one of the caller’s windows. </p><div class="codesample"><table><tr><td scope="row"><pre>NSString*   movieFile = [[NSBundle mainBundle] pathForResource:@"myMovie" ofType:@"mov"];<span></span></pre></td></tr><tr><td scope="row"><pre>QTMovie*    aMovie = [QTMovie movieWithFile:movieFile error:nil];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Install the movie in a custom movie view associated with the caller.<span></span></pre></td></tr><tr><td scope="row"><pre>QTMovieView*   myView = [self getMyQTMovieView];<span></span></pre></td></tr><tr><td scope="row"><pre>[myView setMovie:aMovie];<span></span></pre></td></tr></table></div><p>Prior to Mac OS X v10.4, you can use the <code>NSMovie</code> and <code>NSMovieView</code> classes in Cocoa to load and display video files. In Mac OS X v10.4 and later, it is recommended that you use the classes of the QuickTime Kit framework instead. </p><p>For C-based applications, you can load video files using either the QuickTime framework or the QuickTime Kit framework. If you choose to use the QuickTime Kit framework, you must incorporate Objective-C code into your project. For information on how to use Objective-C code in Carbon applications, see <em><a href="../../CarbonCocoaDoc/index.html#//apple_ref/doc/uid/TP30000893" target="_top">Carbon-Cocoa Integration Guide</a></em>.</p><p>For information about the QuickTime Kit framework, see <em><a href="../../../../QuickTime/Conceptual/QTKitProgrammingGuide/index.html#//apple_ref/doc/uid/TP40001245" target="_top">QuickTime Kit Programming Guide</a></em> and <em><a href="../../../../QuickTime/Reference/QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QTKit Framework Reference</a></em>. For general information about the QuickTime framework, see <em><a href="../../../../QuickTime/RM/Fundamentals/QTOverview/index.html#//apple_ref/doc/uid/TP30000992" target="_top">QuickTime Overview</a></em>. For details of how to incorporate movie content into your application, see <em><a href="../../../../QuickTime/RM/MovieBasics/MTEditing/index.html#//apple_ref/doc/uid/TP40000908" target="_top">QuickTime Movie Basics</a></em>.  </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW12" title="Playing Video Files in iPhone OS"></a><h3>Playing Video Files in iPhone OS</h3><p>iPhone OS supports the ability to play back video files directly from your application using the Media Player framework (<code>MediaPlayer.framework</code>). Video playback is supported in full screen mode only and can be used by game developers who want to play cut scene animations or by other developers who want to play media files. When you start a video from your application, the media player interface takes over, fading the screen to black and then fading in the video content. You can play a video with or without transport controls; enabling transport controls lets the user pause or adjust the playback of the video. If you do not enable these controls, the video plays until completion or until you explicitly stop it in your code.</p><p>To initiate video playback, you must know the URL of the file you want to play. For files your application provides, this would typically be a pointer to a file in your application’s bundle; however, it can also be a pointer to a file on a remote server or elsewhere in the directory containing your application. You use this URL to instantiate a new instance of the <code><!--a target="_top" -->MPMoviePlayerController<!--/a--></code> class. This class presides over the playback of your video file and manages user interactions, such user taps in the transport controls (if shown). To initiate playback, simply call the <code>play</code> method of the controller.</p><p><span class="content_text">Listing 4-4</span> shows a sample method that playbacks the video at the specified URL. The play method is an asynchronous call that returns control to the caller while the movie plays. The movie controller loads the movie in a full-screen view, and animates the movie into place on top of the application’s existing content. When playback is finished, the movie controller sends a notification to the object, which releases the movie controller now that it is no longer needed. </p><a name="//apple_ref/doc/uid/10000051i-CH7-SW13" title="Listing 4-4Playing full screen movies."></a><p class="codesample"><strong>Listing 4-4&nbsp;&nbsp;</strong>Playing full screen movies.</p><div class="codesample"><table><tr><td scope="row"><pre>-(void)playMovieAtURL:(NSURL*)theURL<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    MPMoviePlayerController* thePlayer = [[MPMoviePlayerController alloc] initWithContentURL:theURL];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    thePlayer.scalingMode = MPMovieScalingModeAspectFill;<span></span></pre></td></tr><tr><td scope="row"><pre>    thePlayer.userCanShowTransportControls = NO;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Register for the playback finished notification.<span></span></pre></td></tr><tr><td scope="row"><pre>    [[NSNotificationCenter defaultCenter] addObserver:self<span></span></pre></td></tr><tr><td scope="row"><pre>                selector:@selector(myMovieFinishedCallback:)<span></span></pre></td></tr><tr><td scope="row"><pre>                name:MPMoviePlayerPlaybackDidFinishNotification<span></span></pre></td></tr><tr><td scope="row"><pre>                thePlayer];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Movie playback is asynchronous, so this method returns immediately.<span></span></pre></td></tr><tr><td scope="row"><pre>    [thePlayer play];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// When the movie is done, release the controller.<span></span></pre></td></tr><tr><td scope="row"><pre>-(void)myMovieFinishedCallback:(NSNotification*)aNotification<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    MPMoviePlayerController* thePlayer = [aNotification object];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [[NSNotificationCenter defaultCenter] removeObserver:self<span></span></pre></td></tr><tr><td scope="row"><pre>                name:MPMoviePlayerPlaybackDidFinishNotification<span></span></pre></td></tr><tr><td scope="row"><pre>                thePlayer];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Release the movie instance created in playMovieAtURL:<span></span></pre></td></tr><tr><td scope="row"><pre>    [thePlayer release];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Strings/Strings.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../CarbonNibs/CarbonNibs.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/LoadingResources/ImageSoundResources/ImageSoundResources.html%3Fid%3D10000051i-3.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/LoadingResources/ImageSoundResources/ImageSoundResources.html%3Fid%3D10000051i-3.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/LoadingResources/ImageSoundResources/ImageSoundResources.html%3Fid%3D10000051i-3.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-August-01 --><!-- Includes revisions to graphics tags --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note DV560: Slot Manager Q&amp;As</title><meta name="keywords" content="Mac OS 8 Slot Manager sResource sRsrcHWDevID sRsrcInfo gestaltNuBusConnectors"><meta name="Description" content="Technical Note DV560: This Technical Note contains a collectionof archived Q&amp;As relating to the Slot Manager--questionssent the Developer Support Center (DSC) along with answersfrom the DSC engineers. Archived Q&amp;As include: Apple's definitionof the sResource and the sRsrcHWDevID entry; how to tellif the Slot Manager is implemented; checking for sRsrcInfo,and why does a call to gestaltNuBusConnectors return zeroslots when there actually is a NuBus card or a PDS (ProcessorDirect Slot) card in the Macintosh IIsi slot?">                                       <meta name="categories" content="Devices"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002426" title="Slot Manager Q&As"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxHardwareDrivers-date.html">Hardware & Drivers</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/HardwareDrivers/index.html" target="_blank">Reference Library > Hardware & Drivers</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note DV560</div>
<div id="pageheadsub">Slot Manager Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc --><p id="menutext"><a href="#Section1">Apple-defined sResource sRsrcHWDevID entry</a><BR><BR><a href="#Section2">How to tell if Slot Manager is implemented</a><BR><BR><a href="#Section3">Checking for sRsrcInfo</a><BR><BR><a href="#Section4">Detecting a NuBus or PDS card in the Macintosh IIsi slot</a><BR><BR> <A HREF="#downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along with answers from the DSC engineers. Current Q&amp;As can be found on the <a href="../../qa/index.html">Macintosh Technical Q&amp;As web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1990]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><A NAME="Section1"></A><h2>Apple-defined sResource sRsrcHWDevID entry</h2><p>Date Written:  6/25/92</p><p>Last reviewed:  6/14/93</p><p>In Apple's technical reference <i>Designing Cards and Drivers for the MacintoshFamily,</i> 2nd edition (Chapter 8, page 123), the functional sResource entrycalled sRsrcHWDevId is discussed. The book says that this entry is necessaryfor hardware devices. Please explain the purpose of this entry in theDeclaration ROM functional sResource. Do I generate this ID number or doesDeveloper Support generate this number?</p><p>___</p><p>You generate this sRsrcHWDevId number. However, the hardware device ID isoptional, not necessary. Why might you want to use it? You might want ahardware device ID if you had multiple hardware devices (and it's totally up toyou to define what a "hardware device" is) on a card and wanted certainsResources to be affiliated with certain hardware devices. As an example, let'ssay your card had three hardware devices and six sResources. If, say, youwanted two sResources to be affiliated with each "hardware device", you couldnumber the devices (maybe from 1 to 3) and have the sResources tagged with theaffiliated hardware devices.  To be truthful though, this is another feature ofthe Slot Manager (when the Slot Manager was designed, no one really knew howdevelopers would want to use it, so it was made very, very flexible), and, asfar as we know, no one uses this feature.</p><a name="Section2"></a><P><A HREF="#top">Back to top</A></P><h2>How to tell if Slot Manager is implemented</h2><p>Date Written:  10/22/91</p><p>Last reviewed:  6/14/93</p><p>How do you tell whether the Slot Manager is implemented?</p><p>___</p><p>The best way is to just check for the existence of one of the Slot Managertraps. You should be able to check the implementation of Trap $A06E and if itis there, then the Slot Manager will be there. Below is a piece of code whichdoes this check:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>#define SlotManager       0xA06E#define NoTrap            0xA89Fmain(){     if ((GetTrapAddress(SlotManager) != GetTrapAddress(NoTrap)))          SysBeep(5);        // if the Slot Manager is avail then beep}</pre>	</TD></TR></TABLE></CENTER><a name="Section3"></a><P><A HREF="#top">Back to top</A></P><h2>Checking for sRsrcInfo</h2><p>Date Written:  9/24/91</p><p>Last reviewed:  8/5/92</p><p>Is there a way from Pascal to check availability of traps like SRsrcInfo (whichis not really a trap but a selector). On a Macintosh Plus, the trap SlotManager (A06E) is available but the debugger says the call sRsrcInfo was stopped is not available.</p><p>___</p><p>Use NGetTrapAddress, as in the following example:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    {verify SlotManager is implemented}    IF (NGetTrapAddress(SlotManagerTrap,OSTrap) &lt;&gt;        NGetTrapAddress(UnImplementedTrap,OSTrap)) THEN            BEGIN            {SM implemented}            END</pre>	</TD></TR></TABLE></CENTER><p>Code in the Compatibility Guidelines chapter of <i>Inside Macintosh</i> Volume VI shows this in more detail, and is more robust.</p><a name="Section4"></a><P><A HREF="#top">Back to top</A></P><h2>Detecting a NuBus or PDS card in the Macintosh IIsi slot</h2><p>Date Written: 1/16/90</p><p>Last reviewed: 6/14/93</p><p>Why does a call to gestaltNuBusConnectors return zero slots when there actuallyis a NuBus card or a PDS (Processor Direct Slot) card in the Macintosh IIsi slot?</p><p>___</p><p>A call to gestaltNuBusConnectors returns zero slots because there's no way todetermine if there's a NuBus card or a PDS card in the Macintosh IIsi slot. Gestalt can't assume that there's always a NuBus or PDS slot, so it just says there's no slot. However, Apple recommends that you always use the Slot Manager instead of Gestalt to search for cards, after first checking to see that the Slot Manager trap is implemented. The Slot Manager will safely do all the necessary work for you whether a card with a valid declaration ROM is installed or not, and you can search for the card using a variety of criteria.This technique will allow you to locate NuBus cards, but has the added benefit of being able to find PDS cards that contain declaration ROMs.</p><p>The Macintosh SE/30, IIfx, and LC have the Slot Manager and PDS slots. It's safe to assume the Slot Manager will be resident in all future machines that have either NuBus or PDS slot capability.</p><P><A HREF="#top">Back to top</A></P>         <a name="downloads"></a>         <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center>                                    <img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/dv_560.pdf">Download</A></P>               </TD>            </TR>         </TABLE>         <BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/dv/dv_560.html%3Fid%3DDTS10002426-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/dv/dv_560.html%3Fid%3DDTS10002426-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/dv/dv_560.html%3Fid%3DDTS10002426-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
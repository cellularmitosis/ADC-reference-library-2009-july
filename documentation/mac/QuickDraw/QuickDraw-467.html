<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Maintaining Device Independence (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING467></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-466.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-468.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-465.html"><B>Appendix B - Using Picture Comments for Printing</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING467-0></A>
<H1>Maintaining Device Independence</H1>
 <A NAME=MARKER-2-59></A>Whenever printing, you should use both QuickDraw and non-QuickDraw representations of an image, so that the current printer driver can render the best possible picture. If you send an image described with picture comments to a QuickDraw printer driver that does not support those picture comments, the driver ignores the comments and subsequently does not print your image; if you send only a QuickDraw image to a printer driver that supports picture comments, the driver may not render its best possible image.<P>
 Printer drivers that support <CODE>TextBegin</CODE>, <CODE>TextCenter</CODE>, and <CODE>TextEnd</CODE> are expected to ignore calls to the <CODE>CopyBits</CODE>, <CODE>CopyMask</CODE>, and <CODE>CopyDeepMask</CODE> procedures that fall between the <CODE>TextBegin</CODE> and <CODE>TextEnd</CODE> picture comments. Between the <CODE>TextBegin</CODE> and <CODE>TextEnd</CODE> picture comments, you can use <CODE>CopyBits</CODE> to draw a bitmap representation of rotated text on QuickDraw printers; this bitmap is not used if the <CODE>TextBegin</CODE> and <CODE>TextEnd</CODE> picture comments are supported, but it is used if <CODE>TextBegin</CODE> and <CODE>TextEnd</CODE> are not supported. This is illustrated in <A HREF=QuickDraw-469.html#MARKER-9-117>Listing B-4 on page B-23</A>.<P>
 When your application draws polygons on a PostScript printer, you can use <CODE>PolyBegin</CODE>, <CODE>PolySmooth</CODE>, and <CODE>PolyEnd</CODE> picture comments to draw smoothed polygons; QuickDraw printer drivers ignore these comments. To make a PostScript printer driver ignore your QuickDraw representation of the polygons, you can use the <CODE>PolyIgnore</CODE> picture comment, as illustrated in <A HREF=QuickDraw-470.html#MARKER-9-144>Listing B-6 on page B-29</A>.<P>
 A technique for maintaining two sets of drawing codes, described in <A HREF=QuickDraw-470.html#MARKER-9-147>"Rotating Graphics" beginning on page B-31</A> and <A HREF=QuickDraw-471.html#MARKER-9-159>"Drawing Dashed Lines" beginning on page B-34</A>, makes use of a "magic pen" visible only to PostScript drivers. Graphics comments for drawing dashed lines and for rotating graphics require the use of the <CODE>PenMode</CODE> procedure to set the pattern mode to a value of 23. Normally this value is undefined, but it is handled specially by PostScript printer drivers (all QuickDraw drivers ignore it). Your application can use this pattern mode to draw objects in a picture, and if the picture is printed on a QuickDraw printer, these objects are not visible. <A NAME=MARKER-2-60></A><A NAME=MARKER-2-61></A><P>
 <A NAME=MARKER-2-62></A>To maintain device independence when you send routines to a PostScript printer driver, you can "hide" QuickDraw routines between the <CODE>PostScriptBegin</CODE> and <CODE>PostScriptEnd</CODE> picture comments. The <CODE>PostScriptBegin</CODE> comment is recognized only by PostScript printer drivers. When a PostScript driver receives the <CODE>PostScriptBegin</CODE> comment, it tells the PostScript printer to save the current state of the printer and to disable all low-level standard QuickDraw drawing procedures. Thus, the QuickDraw representation of the graphic is ignored by PostScript printer drivers.<P>
 <A HREF=#MARKER-9-37>Table B-2</A> lists the QuickDraw low-level procedures and the affected high-level drawing routines that are disabled by the <CODE>PostScriptBegin</CODE> picture comment.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-37><BR></A><B>Table B-2:  Low-level QuickDraw routines disabled by the <CODE>PostScriptBegin</CODE> comment</B></CAPTION>
<TH>Low-level routine<TH>Examples of affected high-level QuickDraw routines <TR>
<TD>StdText<TD>QuickDraw text-drawing routines (as described in the chapter "QuickDraw Text" in <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I>)<TR>
<TD>StdLine<TD><CODE>MoveTo</CODE>, <CODE>Move</CODE>, <CODE>LineTo</CODE>, <CODE>Line</CODE><TR>
<TD>StdRect<TD><CODE>FrameRect</CODE>, <CODE>PaintRect</CODE>, <CODE>FillRect</CODE>, <CODE>EraseRect</CODE>, <CODE>InvertRect</CODE><TR>
<TD>StdRRect<TD><CODE>FrameRoundRect</CODE>, <CODE>PaintRoundRect</CODE>, <CODE>FillRoundRect</CODE>, <CODE>EraseRoundRect</CODE>, <CODE>InvertRoundRect</CODE><TR>
<TD>StdOval<TD><CODE>FrameOval</CODE>, <CODE>PaintOval</CODE>, <CODE>FillOval</CODE>, <CODE>EraseOval</CODE>, <CODE>InvertOval</CODE><TR>
<TD>StdArc<TD><CODE>FrameArc</CODE>, <CODE>PaintArc</CODE>, <CODE>FillArc</CODE>, <CODE>EraseArc</CODE>, <CODE>InvertArc</CODE><TR>
<TD>StdPoly<TD><CODE>FramePoly</CODE>, <CODE>PaintPoly</CODE>, <CODE>FillPoly</CODE>, <CODE>ErasePoly</CODE>, <CODE>InvertPoly</CODE><TR>
<TD>StdRgn<TD><CODE>FrameRgn</CODE>, <CODE>PaintRgn</CODE><TR>
<TD>StdBits<TD><CODE>CopyBits</CODE>, <CODE>CopyMask</CODE>, <CODE>CopyDeepMask</CODE></TABLE>
<P>
 To mark the end of a sequence of hidden QuickDraw drawing routines and to reenable QuickDraw drawing routines, you can use the picture comment <CODE>PostScriptEnd</CODE>. The <CODE>PostScriptEnd</CODE> comment is recognized only by PostScript printer drivers. When a PostScript driver receives the <CODE>PostScriptEnd</CODE> comment, it tells the PostScript printer driver to restore the previous state of the printer driver and to enable QuickDraw drawing operations.<A NAME=MARKER-2-63></A><P>
 For a LaserWriter PostScript printer driver, QuickDraw routines that draw text, lines, and shapes and copy bitmaps or pixel maps have no effect when placed between the <CODE>PostScriptBegin</CODE> and <CODE>PostScriptEnd</CODE> picture comments. Instead, the driver expects to receive imaging instructions in subsequent picture comments. On the other hand, a QuickDraw printer driver ignores the <CODE>PostScriptBegin</CODE> and <CODE>PostScriptEnd</CODE> picture comments.<P>
 Only PostScript printer drivers should support the <CODE>DashedLine</CODE>, <CODE>DashedStop</CODE>, <CODE>RotateBegin</CODE>, <CODE>RotateCenter</CODE>, and <CODE>RotateEnd</CODE> picture comments. Therefore, you can use the <CODE>PostScriptBegin</CODE> and <CODE>PostScriptEnd</CODE> picture comments to hide your QuickDraw implementations of these comments from the printer driver. <A HREF=QuickDraw-470.html#MARKER-9-157>Listing B-7 on page B-32</A> illustrates how to use <CODE>PostScriptBegin</CODE> and <CODE>PostScriptEnd</CODE> when rotating graphics on PostScript printers; <A HREF=QuickDraw-471.html#MARKER-9-167>Listing B-9 on page B-35</A> illustrates how to use <CODE>PostScriptBegin</CODE> and <CODE>PostScriptEnd</CODE> when drawing dashed lines on PostScript printers.<A NAME=MARKER-2-64></A><A NAME=MARKER-2-65></A><A NAME=MARKER-2-66></A><A NAME=MARKER-2-67></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-466.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-468.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

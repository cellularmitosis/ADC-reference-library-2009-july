<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TB535: Finder Q&amp;As</title>                                       <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002800" title="Finder Q&As"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB535</div>
<div id="pageheadsub">Finder Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <A HREF = "../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Sep 01 1993]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>How to get Finder Label menu colors and labels</h2><p>Where can an application find the colors and labels the Finder uses in theLabel menu?</p><p>The <code>GetLabel</code> call returns the color and string used in the Finder's label menu.This call is described in the Macintosh Technical Note <A HREF = "../qd/qd_18.html">"Drawing Icons theSystem 7 Way."</a></p><p>The interface to the call is:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>pascal OSErr GetLabel(short labelNumber,              RGBColor *labelColor,              Str255 labelString)</pre>	</TD></TR></TABLE></CENTER><p>A couple of interesting facts that you might find useful: <code>labelNumber</code> is zerobased with zero pointing to the "none" label; the other values, one throughseven, refer to the real labels in reverse order (Don't ask why!) with 1returning "Project 2" and 7 returning "Essential." The information returnedalso applies to the Labels control panel.</p><P><A HREF="#top">Back to top</A></p><h2>Determining whether a file is in the trash under System 6</h2><P>Date Written:  12/22/92</p><P>Last reviewed:  6/14/93</p><p>How do I determine whether a file is in the trash under System 6? <i>InsideMacintosh</i> says that FInfo.fdFldr contains -3 if the file is in the trashbut my tests show that <code>fdFldr</code> always contains zero. Under System 7 it's easy totell whether a file is in the trash, of course.</p><p>Under System 6, the only way the Finder remembers that a file is in the trashis by maintaining an internal list of the files in the trash. Nothing ischanged about that file to indicate that it's in the trash. This is why theSystem 6.0.x Finder can't remember the contents of the trash across a launch orrestart, because the only memory of the fact that these files are in the trashis in RAM. (For example, throw a file away and then restart the machine bypressing the interrupt switch on the programmer's switch. When the machine isdone restarting, you'll find that the file isn't deleted at all; it's exactlywhere you left it.)</p><p>The <code>fdFldr</code> field described in <i>Inside Macintosh</i> Volume II is used onlyunder MFS, where folders were only a Finder construct because the file systemdidn't support hierarchical organization. It became unused on HFS disks and isalways zero.</p><P><A HREF="#top">Back to top</A></p><h2>System 7.1 Fonts folder selector is "font"</h2><P>Date Written:  11/4/92</p><P>Last reviewed:  6/14/93</p><p>Is there a constant for the System 7.1 Fonts folder that I can use with the<code>FindFolder</code> call to locate the folder? The include file supplied with System 7.1doesn't define a constant for the Fonts folder.</p><p>Looks like an oversight--the selector should be included in the header filesfor System 7.1. You can use the selector "font" with the <code>FindFolder</code> routine tolocate the System 7.1 Fonts folder.</p><p>These selectors are stored in the system resource file, of type <code>'fld#'</code>, so youcan always look there for new constants in the future.</p><P><A HREF="#top">Back to top</A></p><h2>Use Mac Finder for application file &amp; folder icon placement</h2><P>Date Written:  5/31/91</p><P>Last reviewed:  8/1/92</p><p>When my Macintosh program creates a file in the Desktop folder, how can I getit to appear where the Finder would place it on the desktop?</p><p>Don't set the "INITed" bit when you create your file or folder, and the Finderwill take care of icon placement for you.</p><p>You should not attempt to place the icon behind the Finder's back, although theicons' positions within the folder relate to where they appear on the desktop.You will have a hard (or impossible) time with icon placement, since you don'thave access to the private Finder data structure where the positions of thevolume icons are stored. You are better off letting the Finder handleplacement. Making assumptions about the way the Finder works internally is abad idea.</p><P><A HREF="#top">Back to top</A></p><h2>Forcing the Macintosh Finder to update the desktop</h2><P>Date Written:  5/14/90</p><P>Last reviewed:  8/1/92</p><p>How do I force the Macintosh Finder to update its windows after my applicationhas changed a file's FndrInfo?</p><p>There is no direct way to tell the Finder to update the desktop. The Finderwill synchronize the desktop file's appearance after it detects that a changehas been made for a volume. This is triggered when the volume's modificationdate changes, which occurs when you create or delete a file, for example, ormove it to another folder. When a change occurs, HFS will change themodification date of the volume and that folder. When the Finder notices thatthe volume's modification date has changed, it begins scanning for changes inall of the open folders. This scanning process takes place about once every 10seconds.</p><p>Changing the file's FndrInfo or renaming the file does not change themodification date. As a suggestion for an installer program, you couldinitially create a temporary file, and then, once all the files are installed,delete the temporary file. Deleting the temporary file as a last step willcause the Finder's window to be updated.</p><P><A HREF="#top">Back to top</A></p><h2>How often the Macintosh Finder updates its internal information</h2><P>Date Written:  5/3/89</p><P>Last reviewed:  8/1/92</p><p>The Macintosh Finder doesn't always show changes my program makes to file sizesand attributes until I close and reopen the window.</p><p>The Finder updates its internal information every 10 seconds, and/or whenever afolder is opened. It may not notice some changes unless the folder'smodification date is changed.</p><P><A HREF="#top">Back to top</A></p><h2>Controlling which application version is launched by Finder</h2><P>Date Written:  11/27/90</p><P>Last reviewed:  6/14/93</p><p>We have several versions of a Macintosh application (standard, demonstration,student, and so on) and they all share the same type (<code>'APPL'</code>) and creatorbytes. When we have all of the versions on a hard disk, double-clicking on adocument launches the demonstration version rather than the full version. Isthe system's application choice based on its date of creation, name, or otherattribute? How can a user specify which of several versions s/he wishes tolaunch when double-clicking on a document? Alternatively, what can we asdevelopers do to designate the standard version as the one to be launched ifthere are other versions on the disk?</p><p>Under System 6, the Finder adds information about the last application copiedto a disk to the disk's Desktop file, and that application is used for openingdocuments with the appropriate creator type.</p><p>Under System 7, the Desktop Database maintains a list of the disk'sapplications, and when asked (via the call <code>PBDTGetAPPL</code>) specifically returns asthe "preferred" application on a volume the one with the appropriate creatortype and most recent creation date. Make certain that the desired applicationhas the most recent creation date before users copy it to their hard drives.For more information about the Desktop Database under System 7, see the FinderInterface chapter of <i>Inside Macintosh</i> Volume VI.</p><P><A HREF="#top">Back to top</A></p><h2>Using 'dast' resource to display "About..." DA under System 7.0</h2><P>Date Written:  11/7/90</p><P>Last reviewed:  6/14/93</p><p>I'm upgrading my desk accessory to be more compatible with Macintosh System7.0, but I'm unable to get anything to display in "About..." using the AlarmClock's 'dast' resource. What do I need to change?</p><p>The 'dast' resource will be used only if the system thinks your DA is System7.0-friendly. The way to convince it of this is to add a <code>BNDL</code> and <code>FREF</code> resourceinto your DA file, along with the appropriate signature string (just like anapplication would have done). You then make sure that all of these resourcesare owned by the <code>DRVR</code>. This can be done in the <code>GetInfo</code> window of ResEdit. Theonly resource that should be special is the signature resource which shouldstill have a resource ID of 1. Once all of this is done, set the Bundle flag,and clear the INITed flag (also using ResEdit) to get the Finder to notice thechanges. At this point, your DA should have the correct icons, and should alsodisplay the dast string in your about box. To make it easy, just copy all ofthe resources including the <code>ICN#</code> and <code>icXX</code> resources out of the Alarm Clockfile, and then make them owned by your driver. If your DRVR resource has thesame ID as the Alarm Clock, all you have to do is copy them over. Once thesystem starts using them, you can simply use ResEdit to edit the icons. Thisway you will have the appropriate icon in the Apple Menu as well as the Aboutbox.</p><P><A HREF="#top">Back to top</A></p><h2>Creating a Finder alias</h2><P>Date Written:  6/14/91</p><P>Last reviewed:  6/14/93</p><p>How can I get my program to create a Finder alias?</p><p>Finder aliases are one aspect of the Macintosh human interface considered"reserved for users." The format is intentionally undefined because it issubject to change, and because alias files should be neither created noraltered by applications. The Finder is the user's domain, and aliases are auser convenience. If you are inclined to create an alias file, rethink yourapplication design. Would clear instructions to users on how to make thealiases be adequate? Are the files your application needs too scattered?</p><p>If some demon still drives you to make alias files, the safest way to do it isby issuing Apple events to the Finder. The particular Finder event for makingan alias is 'FNDR'&nbsp;'sali'; it is documented in the Apple Event registry.Since this Finder event does not return either the name of or an alias to thenew alias file, nor is there a Finder event for identifying the currentlyselected icons, moving the alias file elsewhere will be problematic.</p><p>The unsafe way to make an alias file is to create the file yourself. The formatof alias files is undocumented; there is no guarantee that any alias filescreated by your application will always work. At present, you can construct analias to a document by getting a handle to an alias with a NewAlias call,creating a resource file with the same creator and file type as the originalfile, adding the alias as a resource of type <code>'alis'</code> and ID 0, and setting bit15 of the file's Finder flags. Aliases to applications have the file type'<code>adrp'</code>; folder, volume, and system file aliases use other special file types.Finally, alias files should have the same custom icons as their targets.</p><p>Once again, DTS urges that you not create alias files from within anapplication.</p><P><A HREF="#top">Back to top</A></p><h2>Macintosh Finder extensions aren't supported</h2><P>Date Written:  8/15/91</p><P>Last reviewed:  6/14/93</p><p>Please tell me how to write a Macintosh Finder extension.</p><p>Sorry, but Finder extensions are not supported. They are not documented, andfacilities for them have not been adequately tested. It is doubtful that thereis enough free space in the Finder to reliably add any extensions which are nota standard part of the system.</p><p>This situation may change in the future, but for now, DTS has nothing to offerto help you in trying to write your own Finder Extension.</p><P><A HREF="#top">Back to top</A></p><h2>Macintosh Finder's 'fmnu' menu resource TMPL</h2><P>Date Written:  11/27/91</p><P>Last reviewed:  6/14/93</p><p>A variety of homebrew TMPLs for the Finder's <code>'fmnu'</code> menu resources have been"thrown over the transom" on AppleLink and other bulletin boards, but I don'trecall anything official. Has Apple publicly documented this Finder resource?</p><p>Apple doesn't have an official TMPL for the Finder's <code>'fmnu'</code> menu resources. Ithasn't been publicly documented, because (to some extent) it's private to theFinder.</p><p>The Finder team agreed that there'd be no harm in releasing the Rez templatethey use, because users might want to mess with command keys, menu titles, etc,for their own use. However, they declined to release the definitions of theflag bits (marked below with three asterii); these should be left alone (theyhave to do with how the Finder decides to enable items and certain actions tobe generically performed when an item is chosen). So, here's the template, withthe caveat that it could change anytime:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>type 'fmnu'    {    integer; /* flags *** */    integer = $$CountOf(ItemArray);    /* number of items */    array ItemArray        {        longint;                        /* command id */        integer;                        /* item flags *** */        string[1];                        /* key equivalent */        align word;        pstring;                        /* menu title */        align word;        };</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></p><h2>FindFolder and saving application preferences</h2><P>Date Written:  2/28/92</p><P>Last reviewed:  8/1/92</p><p>In System 7, I want to place my user's preferences file in the Preferencesfolder in the System Folder, but I can't seem to get the Preferences folder'sdirectory ID and other information so that my file will appear there! Also, howdo I get to that folder if the user changes the names of the System Folder andPreferences folder? And once the user's preferences file is there, am Iassuming correctly that the best way to find it again is to make an aliasrecord to track the file ID?</p><p>System 7 introduced the routine <code>FindFolder</code> for locating the Preferences folder.Just make this call:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>err := FindFolder (kOnSystemDisk, kPreferencesFolderType,</pre>	</TD></TR></TABLE></CENTER><p>If FindFolder returns <code>noErr</code>, <code>prefVRefNum</code> and <code>prefDirID</code> will contain the vRefNumand <code>dirID</code> of the Preferences folder, which can be used later with<code>HCreateResFile</code>, <code>HOpenResFile</code>, <code>PBHGetFInfo</code>, and other File Manager calls tolocate your preferences file. If a Preferences folder doesn't already exist,the <code>kCreateFolder</code> parameter instructs <code>FindFolder</code> to make one and return the<code>vRefNum</code> and <code>dirID</code> of the new folder.</p><p>FindFolder is documented in Chapter 9 of <i>Inside Macintosh</i> Volume VI,under "The System Folder and Its Related Directories." Although <code>FindFolder</code> isimplemented only in System 7, if you're using MPW 3.2 (or the current THINKcompilers) glue is automatically included in your compiled code, making it safeto call <code>FindFolder</code> in System 6. The glue checks whether FindFolder is availableand, if it isn't, returns the System Folder's <code>vRefNum</code> and <code>dirID</code> for the<code>kPreferencesFolderType</code> selector. Use the System Folder values as the locationfor the preferences file in System 6.</p><p>If you're not using a development system that provides the <code>FindFolder</code> glue,your code should check the <code>FindFolder</code> Gestalt selector <code>gestaltFindFolderAttr</code> tosee if <code>FindFolder</code> is available. If <code>FindFolder</code> is available, call it. <code>FindFolder</code>is defined as:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>FUNCTION FindFolder (vRefNum: INTEGER; folderType: OSType;    createFolder: BOOLEAN; VAR foundVRefNum: INTEGER;    VAR foundDirID: LONGINT): OSErr;</pre>	</TD></TR></TABLE></CENTER><p>If <code>FindFolder</code> isn't available, call <code>SysEnvirons</code> to find the System Folder'sworking directory reference number, call <code>PBGetWDInfo</code> or <code>GetWDInfo</code> to convertthat number to a true <code>vRefNum</code> and <code>dirID</code>, and use those System Folder numbersfor the location of the preferences file. Example code for this is in theQ&amp;A stack, under Operating System:File System:Code for identifying <code>vRefNum</code>and dirID of Macintosh System Folder.</p><p>To locate the Preferences folder, follow the steps described above rather thantrying to keep an alias of the Preferences folder or of the preferences file.However, if there are any other files in the System Folder that the applicationdepends on (such as dictionaries) those should be tracked with aliases, storedas <code>'alis'</code> resources in the preferences file. See Chapter 27 of <i>InsideMacintosh</i> Volume VI for information on using aliases.</p><P><A HREF="#top">Back to top</A></p><h2>System 7.0 and color volume icons</h2><P>Date Written:  3/4/91</p><P>Last reviewed:  6/14/93</p><p>Now that Macintosh Finder icons can be in color, is it possible to have colorvolume icons as well, and, if so, would you share the specifics?</p><p>Unfortunately, there's no way for the driver to provide the default icon incolor--that is, there are no calls newer than those described in the MacintoshTechnical Note <A HREF = "tb_10.html">"Finders and Foreign Drives."</a></p><P>The System 7.0 Finder can display a custom color icon for a volume, though. Theuser can paste a new color icon over the old one in the volume's Get Info box.(Click the icon in the Get Info box to select it, then Paste.)</p><P><A HREF="#top">Back to top</A></p><h2>Reason for Finder "trash can't be emptied" alert</h2><P>Date Written:  5/1/91</p><P>Last reviewed:  6/14/93</p><p>Why does the Macintosh Finder sometimes display the alert "The trash could notbe emptied (a file was busy or a folder was not empty)" when the trash containsonly an emptied folder?</p><p>This is the behavior that you get from the Finder when another application isrunning (presumably the one that owns the documents that were trashed) that hasthe folder open as a working directory. Unfortunately, some applications thatopen working directories aren't as careful as they should be about closingthem, and the result is that the working directory doesn't go away until theapplication has quit. Once it does go away, however, the folder can be trashedwith impunity.</p><P><A HREF="#top">Back to top</A></p><h2>Saving as stationery for both Systems 6.0.x and 7.0</h2><P>Date Written:  4/22/91</p><P>Last reviewed:  6/14/93</p><p>How should my application implement saving as stationery to be compatible withSystem 6.0.x as well as System 7.0?</p><p>When the user saves a document as stationery, your application should write itout with the appropriate stationery file type so both System 6.0.x and System7.0 Finder vesions will display the file's icon correctly. Also, set the file's<code>isStationery</code> bit, which you'll use to identify the file when the user opens it,under either system version. Of course, along with the regular document's filetype, you'll need to register the stationery file type with DTS.</p><P><A HREF="#top">Back to top</A></p><h2>Old Finder information returned by PBGetCatInfo</h2><P>Date Written:  12/18/91</p><P>Last reviewed:  6/14/93</p><p>I'm having trouble with <code>PBGetCatInfo</code> returning old data to my application. Forexample, if I change a file label using the Finder Label menu and then run myprogram, which calls <code>PBGetCatInfo</code>, the <code>fdFlags</code> field in the <code>FInfo</code> recordreturned doesn't reflect the change. I've tried calling <code>PBFlushVol</code> before I dothis; the file isn't open, so there's no way to call <code>PBFlushFile</code>. However,restarting the Macintosh or changing the file's name causes <code>PBGetCatInfo</code> towork correctly. What's going on and how do I get around it?</p><p>The Finder caches much of the "Finder information," including things like thecolor coding information users can set with the Finder Label menu and the viewposition of objects in folder windows. Changes to the Finder information arecached until the folder that contains the objects that were changed is closed(which happens at system restart or shutdown time) or until some noncachedchange is made to the object (for example, the file is renamed). The Findercaches what it considers Finder-specific information to cut down on the numberof disk accesses it must make. (For example, rearranging the object view in awindow would be very slow on floppy disks if the Finder wrote to the disk everytime the user drags a group of objects around.) Since in most cases no otherapplications should care about the state of the Finder information, thisnormally doesn't cause problems. There's no workaround for this behavior in thecurrent implementation of the Finder.</p><P><A HREF="#top">Back to top</A></p><h2>Quitting System 7 Finder</h2><P>Date Written:  4/17/92</p><P>Last reviewed:  6/14/93</p><p>I've been thinking of shutting down the System 7 Finder. Is this a cool thingto do in my application?</p><p>We normally recommend that you don't quit the System 7 Finder application.Nevertheless, there may be a few good reasons to shut down the Finder. Forexample, the Installer (the only application Apple ships with a good reason todo so) sometimes needs to shut down the Finder and all other applications tomake sure system resources aren't being used while they're being updated by theInstaller.</p><p>If you find yourself in a situation where you need to shut down the Finder, youshould know about a few things:</p><ul type="disc">	<li>Before you shut down the System 7 Finder, use the Process Manager to see if the File Sharing Extension is running. If so, you should shut it down before shutting down the Finder. The File Sharing Extension shouldn't be running without the Finder because the Finder is the only user interface the File Sharing Extension has. You shouldn't take away the user interface to file sharing.</li></ul><p> There's another good reason to shut down the File Sharing Extension before theFinder. The Network Extension (not the Network control panel) handles all theuser interface transactions among the Finder, the File Sharing Monitor controlpanel, the Sharing Setup control panel, the Users &amp; Groups control panel,and the File Sharing Extension (the file server). The Network Extension opensanother file, the Users &amp; Groups Data File, so that it can manipulate usersand groups. When you shut down the Finder (with a <code>kAEQuitApplication</code> Appleevent), the Network Extension and its connection to the Users &amp; Groups DataFile are also closed (almost). Because of a minor bug in the system, the FileManager thinks that the file is closed and that the FCB used by that accesspath is free for reuse; however, the File Sharing Extension thinks the accesspath to the Users &amp; Groups Data File from the Network Extension is stillopen. When the File Manager attempts to reuse that FCB to open another filelater, the file is opened, but because the File Sharing Extension thinks thatFCB is still in use by the Network Extension, it won't allow access to the fileand it returns <code>opWrErr</code> (-49) to the Open call. At this point, the file thatsomeone was attempting to open can't be accessed or closed.</p><ul type="disc">	<li>If the Finder is shut down and then eventually relaunched, there may be some fragmentation of the MultiFinder heap. This can occur because the Finder is the first application to be started, so it's always first in the MultiFinder heap. When you shut it down, that memory becomes available and other processes might occupy that space. When the Finder is restarted, if it can't get into its original space in the MultiFinder heap, it will get loaded somewhere else and probably won't be shut down again.</li>	<li>In System 7, the Finder is responsible for filling the Apple menu with the items in the Apple Menu Items folder. When the Finder is gone, so are the Apple menu items, including things that are important to most users (like control panels).</li>	<li>If the user has selected background printing with a LaserWriter or StyleWriter, nothing will print while the Finder is gone. That's because the Finder is responsible for monitoring the PrintMonitor Documents folder and launching the PrintMonitor application when necessary.</li></ul><P><A HREF="#top">Back to top</A></p><h2>Special Macintosh alias file types</h2><P>Date Written:  3/14/91</p><P>Last reviewed:  6/22/93</p><p>Why does the alias of a font suitcase created in System 7.0 have a type of<code>'drop'</code> instead of <code>'FFIL'</code>? Should applications that open <code>'FFIL'</code> files also tryto open 'drop' files?</p><p>While it is true that an alias file generally has the same type and creator asthe file it points to, certain special Finder objects are given their own type,such as aliases to server volumes. An alias file of type <code>'drop'</code> is an alias toa container object--that is, one that can contain other files like fonts. Alist of special alias types is in the Finder Interface chapter of InsideMacintosh Volume VI and is defined in Finder.h. For information about the aliastype for the Fonts folder, see the Finder Q&amp;A "System 7.1 Fonts folderselector is <code>'font'</code>."</p><p>You asked why the Finder needs to create this special type. The user is allowedto drag objects around the desktop, and if an object is dragged over somethingit can be dropped on or into, such as a folder, that object is immediatelyhighlighted so the user knows this is a cool thing to do. Since the actualobject an alias file points to may not even be currently accessible--forexample, if it's on a server volume--the Finder can't resolve it immediately toknow if it's cool to highlight the object, so alias files of type 'drop' are acatchall type that tells the Finder dropping is cool.</p><p>You should not assume an alias file of this type always points to a font file.It can also point to a desk accessory, for example. If you want to handle thistype properly in a standard file dialog, you need to filter on type 'drop',then have a filter proc which attempts to resolve the alias file. See theMacintosh Technical Note "Resolving Alias Files Quietly" for code to resolvethe alias file without raising a dialog.</p><p>Alternatively, you can allow the user to select the file for opening and thenif it doesn't resolve to the correct type, inform the user via a dialog thatthe file isn't of the appropriate type.</p><P><A HREF="#top">Back to top</A></p><h2>Macintosh System 6.0.x Finder rules for emptying trash</h2><P>Date Written:  1/21/91</p><P>Last reviewed:  6/14/93</p><p>When does the Macintosh 6.0.x Finder empty the trash?</p><p>According to the Finder source code, here are the conditions under which thetrash will be emptied:</p><ul type="disc">	<li>Whenever a copy is done, both the source and destination disk's trash will be emptied.</li>	<li>Whenever a disk goes off line.</li>	<li>Whenever a disk is ejected.</li>	<li>Whenever a disk is formatted, the trash will be emptied before the formatting begins.</li>	<li>Whenever the user selects empty trash from the "Special" menu.</li>	<li>Whenever an application is launched.</li>	<li>Whenever the system is shut down.</li></ul><p>(I determined this by searching the source for all occurrences of the trap<code>_Delete</code>. Then I looked at each of the routines to see if they pertained totrash management. If they did, I searched the source for all occurrences ofthose routines, looked at each of those and figured out what the enclosingroutine did. Since all this was done by examination, it is possible that Imissed something.)</p><P><A HREF="#top">Back to top</A></p><h2>What do all the bits in System 6 Finder's 'LAYO' resource mean?</h2><P>Date Written:  5/3/89</p><P>Last reviewed:  6/14/93</p><p>What do all the bits in the System 6 Finder's <code>'LAYO'</code> resource mean?</p><p>The following is probably the only documentation to be found on the <code>'LAYO'</code>resource. It describes only the settings, not their values. You can use ResEditto look at and change the values, but you do so at your own risk.</p><p>Font ID and size: These change the font and size of most text displayed by theFinder, including the icon titles, the window top margin text, all the text inthe text views, and the printed text generated by "Print Catalog." If, afterchanging font ID or size, you later change the System fonts or use the Finderwith a different System file, the font you specified may be missing. In thatcase the default font will be used. If the size you specify is not available, ascaled size will be used.</p><p>Window rect: This is the rectangle that controls the position and size of newwindows created by the Finder. Windows of new folders are given the same viewas the "parent" window, has regardless of the window rect.</p><p>Tab stops 1-7 and column justification: You can adjust the column spacing usedto display in the text views. The Finder truncates any text that is too widefor the column, so make sure the size, date, time and other columns are wideenough. You cannot change the ordering of the columns or eliminate any of them.Each column can be left or right justified.</p><p>Icon spacing options: You can adjust the grid spacing by dragging the lightgray icon, and the grid offset by dragging the dark gray icon. The grid offsetvertically staggers the icons, allowing you to space the icons a bit closertogether but still read the document titles. The grid you specify will be usedwhen you do a "clean up" or grid drag, or when a new icon is created in a "byicon" format window.</p><p>Text view date: The format of the date can be set to short (12/25/87), medium(Thu Dec 25, 1987) or long (Thursday, December 25, 1987).</p><p>Use zoom rects: This is normally set TRUE, which means that the usual zoomingeffect takes place when the Finder opens a window or an application. If you setthis to FALSE, the Finder does not use the zooming effect.</p><p>Skip trash warnings: DISABLING THIS OPTION IS POTENTIALLY DANGEROUS. If you setthis TRUE, the Finder will skip the usual warning that is given whenever youthrow an application or system file into the trash.</p><p>Always grid drags: This option is normally not set, which means you canposition icons freely on the desktop. If you set this TRUE, whenever you dragan icon, the icon will snap into position on the grid automatically withouthaving to do a "clean up."</p><p>Sort style: This option adjusts the style of the column heading by which theview is sorted. See the previous section on "text views" for more information.The column in which entries in the text view are sorted ("name in view" byname, "kind in view" by kind) is displayed according to the setting of the sortstyle.</p><p>Watch thresh: This allows you to adjust length of time before the Finder willdisplay a wristwatch cursor with animated hands during such lengthy operationsas file copying. Older Finders don't use the watch thresh option, so it isdisabled and cannot be selected. The time is expressed in 60ths of a second. Ifyou set length of time too short, the cursor will jitter and change shape toooften.</p><p>Use phys icon: This forces the system to display the floppy disk icon insteadof an icon with an arrow pointing to a disk drive.</p><p>Title click: This option is normally set FALSE. If it is set TRUE, a feature inthe Finder is enabled, allowing you to double-click the title bar of a windowso that window's "parent window" opens or comes to the front if already open.The "parent window" is the one that contains the folder the original windowrepresents.</p><p>Copy inherit and new folder inherit: These options are for AppleShare folderprivileges. They only affect folders created on an AppleShare server.</p><p>Color style: Normally, folders and file icons are displayed with a coloroutline. Color style causes these icons to be filled in with color.</p><p>Max # of windows: This allows you to set the maximum number of windows theFinder can open at one time. Increasing the number of windows causes the Finderto need more memory. Under MultiFinder, you may have to increase the memoryallocation for the Finder.</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (60K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_535.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_535.html%3Fid%3DDTS10002800-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_535.html%3Fid%3DDTS10002800-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_535.html%3Fid%3DDTS10002800-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
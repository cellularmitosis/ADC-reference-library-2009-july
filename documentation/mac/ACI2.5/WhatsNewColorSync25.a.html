<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">

<TITLE> Changes to System Profile and Monitor Profile Operations</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">

<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- top image banner and para -->



<CENTER>
<P>   
<A HREF="WhatsNewColorSync25.9.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="WhatsNewColorSync25-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A>  <IMG ALIGN = BOTTOM SRC = "nextg.gif" border=none hspace=20 alt="Next"> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="WhatsNewColorSync25-2.html"><B>What's New in ColorSync 2.5</B></A> / </DL></FONT><P>
<HR>


<H1 CLASS="H1.Heading1">
<A NAME="pgfId=11236">
 </A>
Changes to System Profile and Monitor Profile Operations</H1>
<P CLASS="T1.Text1">
<A NAME="pgfId=11237">
 </A>
With version 2.5, ColorSync has removed certain system profile and monitor profile restrictions. A little history can help explain these restrictions and the new, more flexible approach.</P>
<P CLASS="T1.Text1">
<A NAME="pgfId=10672">
 </A>
Prior to version 2.5, ColorSync provided the ColorSync<SUP><SMALL>TM</SMALL></SUP> System Profile control panel. With that panel, a user could only select an RGB profile for the system profile. The system profile was used for the default display profile, as well as for operations on RGB images that resulted in the need for a default profile (such as when the image itself did not specify a profile). So the system profile was used for two dissimilar functions, which led to several limitations:</P>
<UL>
<LI CLASS="B1.Bullet1">
<A NAME="pgfId=10689">
 </A>
A user could not specify default profiles for color spaces other than RGB.</LI>
<LI CLASS="B1.Bullet1">
<A NAME="pgfId=10709">
 </A>
A user could not specify separate profiles for more than one monitor.</LI>
<LI CLASS="B1.Bullet1">
<A NAME="pgfId=11402">
 </A>
When matching an image without an embedded profile to the screen, no matching occurs because the source and destination profiles are the same (system) profile.</LI>
</UL>
<DIV>
<H2 CLASS="H2.Heading2">
<A NAME="pgfId=10690">
 </A>
More Robust User Interface</H2>
<P CLASS="T1.Text1">
<A NAME="pgfId=11251">
 </A>
With version 2.5, the ColorSync control panel replaces the ColorSync<SUP><SMALL>TM</SMALL></SUP> System Profile control panel. The ColorSync panel, with its default settings, is shown in <A HREF="WhatsNewColorSync25.9.html#21472" CLASS="XRef">The ColorSync control panel</A>
. The new panel lets the user specify profiles for the system profile (for backward compatibility), as well as for RGB and CMYK color spaces. As a result, the link between the system profile and the default profile for the RGB color space is broken, and a user can specify separate default profiles for different color spaces. ColorSync also provides functions your code can use to set default profiles, including profiles for Lab and XYZ spaces. These functions are shown in <A HREF="WhatsNewColorSync25.a.html#21979" CLASS="XRef">Default Color Space and System Profile Functions</A>
.</P>
<P CLASS="T1.Text1">
<A NAME="pgfId=10705">
 </A>
With version 2.5, a user can now use the Monitors &amp; Sound control panel to specify a profile for each monitor. ColorSync also provides functions your code can use to specify a profile for each monitor. These functions are shown in <A HREF="WhatsNewColorSync25.a.html#10365" CLASS="XRef">Monitor Profile Functions</A>
.</P>
</DIV>
<DIV>
<H2 CLASS="H2.Heading2">
<A NAME="pgfId=10465">
 </A>
<A NAME="21979">
 </A>
Default Color Space and System Profile Functions</H2>
<P CLASS="T1.Text1">
<A NAME="pgfId=10731">
 </A>
ColorSync provides the following functions your code can call to get and set default profiles for RGB, CMYK, Lab, and XYZ color spaces, and to get and set the system profile. For example, if your application doesn't want to present a user interface for setting these profiles, you can use these calls.</P>

<h3>
<A NAME="pgfId=11164">
 </A>
CMSetSystemProfile</h3>


<A NAME="pgfId=11934">
 </A>
Sets the system profile.</P>

<A NAME="pgfId=10958">
 </A>
<PRE>
pascal  CMError  CMSetSystemProfile (
                        const FSSpec * profileFileSpec);</pre>


<P CLASS="RP.RoutineParam">
<A NAME="pgfId=11007">
 </A>
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>FSSpec	</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A pointer to a file specification structure. Before calling <CODE>
CMSetSystemProfile</code>, set the structure to specify the desired system profile.<P>

<A NAME="pgfId=11038">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><EM CLASS="italics">
function result	</EM>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A result code of type <CODE>
CMError</code>
. See <A HREF="../ACI/ACI-2.html"><I>Advanced Color Imaging on the Mac OS</I></A> for a list of ColorSync-specific result codes.</TABLE>
 
 
<h3>
<A NAME="pgfId=11039">
 </A>
CMGetSystemProfile</h3>

<P CLASS="T1.Text1">
<A NAME="pgfId=11974">
 </A>
Gets the system profile.</P>

<PRE>
<A NAME="pgfId=11574">
 </A>
pascal  CMError  CMGetSystemProfile (
                        CMProfileRef * prof);</PRE>


<P CLASS="RP.RoutineParam">
<A NAME="pgfId=11575">
 </A>
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>prof</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A pointer to a structure of type CMProfileRef. On return, a reference to the current system profile.<p>

<A NAME="pgfId=11004">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><EM CLASS="italics">
function result	</EM>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A result code of type <CODE>
CMError</code>
. See <A HREF="../ACI/ACI-2.html"><I>Advanced Color Imaging on the Mac OS</I></A> for a list of ColorSync-specific result codes.</TABLE>



<h3>
<A NAME="pgfId=10950">
 </A>
CMSetDefaultProfileBySpace</h3>

<P CLASS="RP.RoutineParam">
<A NAME="pgfId=11940">
 </A>
Sets the default profile for a color space.<P>

<PRE>
<A NAME="pgfId=10953">
 </A>
pascal  CMError  CMSetDefaultProfileBySpace (
                       OSType dataColorSpace,
                       CMProfileRef prof);</PRE>




<P CLASS="RP.RoutineParam">
<A NAME="pgfId=11293">
 </A>
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>
dataColorSpace</CODE>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">Specifies the color space for which to set the default profile. You specify one of the currently-supported values, <CODE>cmRGBData</code>, <CODE>cmCMYKData</code>,<CODE>cmLabData</code>, or <CODE>cmXYZData</code>
.</P>


<P CLASS="RP.RoutineParam">
<A NAME="pgfId=11048">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>prof</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A profile reference. Before calling <CODE>
CMSetDefaultProfileBySpace</code>
, set the reference to specify the default profile for the color space.<P>


<A NAME="pgfId=11000">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><EM CLASS="italics">
function result	</EM>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A result code of type <CODE>CMError</code>. See <A HREF="../ACI/ACI-2.html"><I>Advanced Color Imaging on the Mac OS</I></A> for a list of ColorSync-specific result codes.</TABLE>





<h3>
<A NAME="pgfId=10970">
 </A>
CMGetDefaultProfileBySpace</h3>

<P CLASS="RP.RoutineParam">
<A NAME="pgfId=11946">
 </A>
Gets the default profile for a color space.</P>

<pre>
<A NAME="pgfId=10974">
 </A>
pascal CMError CMGetDefaultProfileBySpace(
                     OSType dataColorSpace,
                     CMProfileRef * prof);</pre>

<P CLASS="RP.RoutineParam">
<A NAME="pgfId=12393">
 </A>
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>
dataColorSpace</CODE>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">Specifies the color space for which to set the default profile. You specify one of the currently-supported values, <CODE>cmRGBData</code>, <CODE>cmCMYKData</code>,<CODE>cmLabData</code>, or <CODE>cmXYZData</code>
.</P>


<P CLASS="RP.RoutineParam">
<A NAME="pgfId=11048">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>prof</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A pointer to a profile reference. On return, the reference specifies the current profile for the color space specified by <CODE>
dataColorSpace</code>.</P>


<A NAME="pgfId=10996">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><EM CLASS="italics">
function result	</EM>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A result code of type <CODE>CMError</code>. See <A HREF="../ACI/ACI-2.html"><I>Advanced Color Imaging on the Mac OS</I></A> for a list of ColorSync-specific result codes.</TABLE>
</DIV>


<DIV>
<H2 CLASS="H2.Heading2">
<A NAME="pgfId=10722">
 </A>
<A NAME="10365">
 </A>
Monitor Profile Functions</H2>
<P CLASS="T1.Text1">
<A NAME="pgfId=10852">
 </A>
ColorSync provides the following functions your code can call to get and set the profile for each monitor. These routines work with the AVIDType data type, which is defined by the Display Manager and used to specify a device such as a monitor.</P>

<h3>
<A NAME="pgfId=13458">
 </A>
<A NAME="40581">
 </A>
CMSetProfileByAVID</h3>

<P CLASS="T1.Text1">
<A NAME="pgfId=13459">
 </A>
Sets the profile for a monitor. If the profile contains an optional profile tag for video card gamma, ColorSync will extract the tag from the profile and set the video card based on the tag, as described in <A HREF="WhatsNewColorSync25.6.html#12291" CLASS="XRef">Video Card Gamma</A>
.</P>



<A NAME="pgfId=13460">
 </A>
<PRE>pascal CMError CMSetProfileByAVID (
                          AVIDType  theAVID,
                          CMProfileRef  prof);</PRE>




<A NAME="pgfId=11077">
 </A>
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>
theAVID</CODE>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A Display Manager ID value. You pass the ID value for the monitor for which to set the profile.	</P>

<P CLASS="RP.RoutineParam">
<A NAME="pgfId=12311">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>prof</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A profile reference. Before calling <CODE>
CMSetProfileByAVID</code>
, set the reference to specify the profile for the monitor specified by <CODE>
theAVID</code>
.</P>


<P CLASS="RP.RoutineParam">
<A NAME="pgfId=10992">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><EM CLASS="italics">
function result	</EM>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A result code of type <CODE>CMError</code>.See <A HREF="../ACI/ACI-2.html"><I>Advanced Color Imaging on the Mac OS</I></A> for a list of ColorSync-specific result codes.</TABLE>


<h3>
<A NAME="pgfId=11138">
 </A>
CMGetProfileByAVID</h3>

</CODE><P CLASS="T1.Text1">
<A NAME="pgfId=11962">
 </A>
Gets the current profile for a monitor.</P>

<A NAME="pgfId=10941">
 </A>
<PRE>pascal CMError CMGetProfileByAVID (
                          AVIDType  theAVID,
                          CMProfileRef  *prof);</PRE>


<P CLASS="RP.RoutineParam">
<A NAME="pgfId=12335">
 </A>
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>
theAVID</CODE>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A Display Manager ID value. You pass the ID value for the monitor for which to get the profile.	</P>

<P CLASS="RP.RoutineParam">
<A NAME="pgfId=12311">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>prof</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A pointer to a profile reference. On return, a reference to the current profile for the monitor specified by <CODE>
theAVID</code>
.</P>



<P CLASS="RP.RoutineParam">
<A NAME="pgfId=12762">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><EM CLASS="italics">
function result	</EM>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A result code of type <CODE>CMError</code>. See <A HREF="../ACI/ACI-2.html"><I>Advanced Color Imaging on the Mac OS</I></A> for a list of ColorSync-specific result codes.<A NAME="32147">
 </A>
</TABLE></CODE>
</DIV>
<HR>

<CENTER>
<P>   
<A HREF="WhatsNewColorSync25.9.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="WhatsNewColorSync25-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A>  <IMG ALIGN = BOTTOM SRC = "nextg.gif" border=none hspace=20 alt="Next"> </CENTER><P>

<!-- bottom image banner and para -->

<!-- start of footer -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->

</BODY>
</HTML>

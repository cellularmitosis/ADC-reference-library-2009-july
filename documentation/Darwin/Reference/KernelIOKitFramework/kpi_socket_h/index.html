<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>kpi_socket.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=ascii">
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../reference/Darwin/index.html#//apple_ref/doc/uid/TP30001281-TP30000422" target="_top">Darwin</a> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/kernel_fw_leo" target="_top">Kernel Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&#160;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<a name="//apple_ref/doc/header/kpi_socket.h" title="kpi_socket.h"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="kpi_socket.h">kpi_socket.h</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr>
<td scope="row"><b>Includes:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<a href="../../usr_APIs/types/index.html#//apple_ref/doc/header/types.h" target="_top">&lt;sys/types.h&gt;</a><br><!-- a -->&lt;sys/kernel_types.h&gt;<!-- /a --><br><!-- a -->&lt;sys/socket.h&gt;<!-- /a -->
</div></div></td>
</tr></table></div>
<h2>Overview</h2>
<!-- begin discussion --><p>This header defines an API for creating and interacting with sockets
in the kernel. It is possible to create sockets in the kernel
without an associated file descriptor. In some cases, a reference to
the socket may be known while the file descriptor is not. These
functions can be used for interacting with sockets in the kernel.
The API is similar to the user space socket API.<!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_accept" target="_top">sock_accept</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_bind" target="_top">sock_bind</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_close" target="_top">sock_close</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_connect" target="_top">sock_connect</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_getpeername" target="_top">sock_getpeername</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_getsockname" target="_top">sock_getsockname</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_getsockopt" target="_top">sock_getsockopt</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_gettype" target="_top">sock_gettype</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_ioctl" target="_top">sock_ioctl</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_isconnected" target="_top">sock_isconnected</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_isnonblocking" target="_top">sock_isnonblocking</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_listen" target="_top">sock_listen</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_receive" target="_top">sock_receive</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_receivembuf" target="_top">sock_receivembuf</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_send" target="_top">sock_send</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_sendmbuf" target="_top">sock_sendmbuf</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_setpriv" target="_top">sock_setpriv</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_setsockopt" target="_top">sock_setsockopt</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_shutdown" target="_top">sock_shutdown</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/sock_socket" target="_top">sock_socket</a></tt></dt>
<dd></dd>
</dl>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_accept;   name=sock_accept --><a name="//apple_ref/c/func/sock_accept"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_accept">sock_accept</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_accept" target="_top" class="function"><span class="function">sock_accept</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">struct</span> <!-- a --><span class="type">sockaddr</span><!-- /a --> <span class="type">*</span><span class="param">from</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">fromlen</span>, 
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">flags</span>,
    <a href="index.html#//apple_ref/c/tdef/sock_upcall" target="_top" class="type"><span class="type">sock_upcall</span></a> <span class="param">callback</span>,
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">cookie</span>,
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="type">*</span><span class="param">new_so</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The listening socket you'd like to accept a connection on.</p></dd>
<dt><code>from</code></dt>
<dd><p>A pointer to a socket address that will be filled in
with the address the connection is from.</p></dd>
<dt><code>fromlen</code></dt>
<dd><p>Maximum length of from.</p></dd>
<dt><code>flags</code></dt>
<dd><p>Supports MSG_DONTWAIT and MSG_USEUPCALL. If
MSG_DONTWAIT is set, accept will return EWOULDBLOCK if there are
no connections ready to be accepted. If MSG_USEUPCALL is set,
the created socket will use the same upcall function attached to
the original socket.</p></dd>
<dt><code>callback</code></dt>
<dd><p>A notifier function to be called when an event
occurs on the socket. This may be NULL.</p></dd>
<dt><code>cookie</code></dt>
<dd><p>A cookie passed directly to the callback.</p></dd>
<dt><code>new_so</code></dt>
<dd><p>Upon success, *new_so will be a reference to a new
socket for tracking the connection.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Accepts an incoming connection on a socket. See 'man 2
accept' for more information. Allocating a socket in this manner
creates a socket with no associated file descriptor.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_bind;   name=sock_bind --><a name="//apple_ref/c/func/sock_bind"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_bind">sock_bind</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_bind" target="_top" class="function"><span class="function">sock_bind</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">const</span> <!-- a --><span class="var">struct</span><!-- /a --> <!-- a --><span class="var">sockaddr</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">to</span><!-- /a -->);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket to be bound.</p></dd>
<dt><code>to</code></dt>
<dd><p>The local address the socket should be bound to.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Binds a socket to a specific address. See 'man 2 bind'
for more information.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_close;   name=sock_close --><a name="//apple_ref/c/func/sock_close"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_close">sock_close</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <a href="index.html#//apple_ref/c/func/sock_close" target="_top" class="function"><span class="function">sock_close</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket to close. This should only ever be a socket
created with sock_socket. Closing a socket created in user space
using sock_close may leave a file descriptor pointing to the closed
socket, resulting in undefined behavior.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Close the socket.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_connect;   name=sock_connect --><a name="//apple_ref/c/func/sock_connect"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_connect">sock_connect</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_connect" target="_top" class="function"><span class="function">sock_connect</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">const</span> <!-- a --><span class="var">struct</span><!-- /a --> <!-- a --><span class="var">sockaddr</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">to</span><!-- /a -->,
    <!-- a --><span class="var">int</span><!-- /a --> <!-- a --><span class="var">flags</span><!-- /a -->);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket to be connect.</p></dd>
<dt><code>to</code></dt>
<dd><p>The remote address the socket should connect to.</p></dd>
<dt><code>flags</code></dt>
<dd><p>Flags for connecting. The only flag supported so far is
MSG_DONTWAIT. MSG_DONTWAIT will perform a non-blocking connect.
sock_connect will return immediately with EINPROGRESS. The
upcall, if supplied, will be called when the connection is
completed.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success, EINPROGRESS for a non-blocking connect that
has not completed, otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Initiates a connection on the socket. See 'man 2
connect' for more information.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_getpeername;   name=sock_getpeername --><a name="//apple_ref/c/func/sock_getpeername"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_getpeername">sock_getpeername</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_getpeername" target="_top" class="function"><span class="function">sock_getpeername</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">struct</span> <!-- a --><span class="type">sockaddr</span><!-- /a --> <span class="type">*</span><span class="param">peername</span>, 
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">peernamelen</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>peername</code></dt>
<dd><p>Storage for the peer name.</p></dd>
<dt><code>peernamelen</code></dt>
<dd><p>Length of storage for the peer name.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Retrieves the remote address of a connected socket. See
'man 2 getpeername'.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_getsockname;   name=sock_getsockname --><a name="//apple_ref/c/func/sock_getsockname"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_getsockname">sock_getsockname</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_getsockname" target="_top" class="function"><span class="function">sock_getsockname</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">struct</span> <!-- a --><span class="type">sockaddr</span><!-- /a --> <span class="type">*</span><span class="param">sockname</span>, 
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">socknamelen</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>sockname</code></dt>
<dd><p>Storage for the local name.</p></dd>
<dt><code>socknamelen</code></dt>
<dd><p>Length of storage for the socket name.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Retrieves the local address of a socket. See 'man 2
getsockname'.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_getsockopt;   name=sock_getsockopt --><a name="//apple_ref/c/func/sock_getsockopt"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_getsockopt">sock_getsockopt</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_getsockopt" target="_top" class="function"><span class="function">sock_getsockopt</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">level</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">optname</span>,
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">optval</span>, 
    <!-- a --><span class="type">int</span><!-- /a --> <span class="type">*</span><span class="param">optlen</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>level</code></dt>
<dd><p>Level of the socket option.</p></dd>
<dt><code>optname</code></dt>
<dd><p>The option name.</p></dd>
<dt><code>optval</code></dt>
<dd><p>The option value.</p></dd>
<dt><code>optlen</code></dt>
<dd><p>The length of optval, returns the actual length.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Retrieves a socket option. See 'man 2 getsockopt'.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_gettype;   name=sock_gettype --><a name="//apple_ref/c/func/sock_gettype"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_gettype">sock_gettype</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_gettype" target="_top" class="function"><span class="function">sock_gettype</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="type">*</span><span class="param">domain</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="type">*</span><span class="param">type</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="type">*</span><span class="param">protocol</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket to check.</p></dd>
<dt><code>domain</code></dt>
<dd><p>The domain of the socket (PF_INET, etc...). May be NULL.</p></dd>
<dt><code>type</code></dt>
<dd><p>The socket type (SOCK_STREAM, SOCK_DGRAM, etc...). May be NULL.</p></dd>
<dt><code>protocol</code></dt>
<dd><p>The socket protocol. May be NULL.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Retrieves information about the socket. This is the same
information that was used to create the socket. If any of the
parameters following so are NULL, that information is not
retrieved.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_ioctl;   name=sock_ioctl --><a name="//apple_ref/c/func/sock_ioctl"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_ioctl">sock_ioctl</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_ioctl" target="_top" class="function"><span class="function">sock_ioctl</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">unsigned</span> <!-- a --><span class="type">long</span><!-- /a --> <span class="param">request</span>,
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">argp</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>request</code></dt>
<dd><p>The ioctl name.</p></dd>
<dt><code>argp</code></dt>
<dd><p>The argument.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Performs an ioctl operation on a socket. See 'man 2 ioctl'.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_isconnected;   name=sock_isconnected --><a name="//apple_ref/c/func/sock_isconnected"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_isconnected">sock_isconnected</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">int</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_isconnected" target="_top" class="function"><span class="function">sock_isconnected</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket to check.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 - socket is not connected. 1 - socket is connected.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Returns whether or not the socket is connected.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_isnonblocking;   name=sock_isnonblocking --><a name="//apple_ref/c/func/sock_isnonblocking"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_isnonblocking">sock_isnonblocking</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">int</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_isnonblocking" target="_top" class="function"><span class="function">sock_isnonblocking</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 - socket will block. 1 - socket will not block.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Returns whether or not the socket is non-blocking. In
the context of this KPI, non-blocking means that functions to
perform operations on a socket will not wait for completion.
</p>
<p>To enable or disable blocking, use the FIONBIO ioctl. The
parameter is an int. If the int is zero, the socket will block.
If the parameter is non-zero, the socket will not block.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_listen;   name=sock_listen --><a name="//apple_ref/c/func/sock_listen"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_listen">sock_listen</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_listen" target="_top" class="function"><span class="function">sock_listen</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">backlog</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>backlog</code></dt>
<dd><p>The maximum length of the queue of pending connections.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Indicate that the socket should start accepting incoming
connections. See 'man 2 listen'.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_receive;   name=sock_receive --><a name="//apple_ref/c/func/sock_receive"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_receive">sock_receive</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_receive" target="_top" class="function"><span class="function">sock_receive</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">struct</span> <!-- a --><span class="type">msghdr</span><!-- /a --> <span class="type">*</span><span class="param">msg</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">flags</span>, 
    <!-- a --><span class="type">size_t</span><!-- /a --> <span class="type">*</span><span class="param">recvdlen</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>msg</code></dt>
<dd><p>The msg describing how the data should be received.</p></dd>
<dt><code>flags</code></dt>
<dd><p>See 'man 2 recvmsg'.</p></dd>
<dt><code>recvdlen</code></dt>
<dd><p>Number of bytes received, same as return value of
userland recvmsg.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success, EWOULDBLOCK if non-blocking and operation
would cause the thread to block, otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Receive data from a socket. Similar to recvmsg. See 'man
2 recvmsg' for more information about receiving data.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_receivembuf;   name=sock_receivembuf --><a name="//apple_ref/c/func/sock_receivembuf"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_receivembuf">sock_receivembuf</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_receivembuf" target="_top" class="function"><span class="function">sock_receivembuf</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">struct</span> <!-- a --><span class="type">msghdr</span><!-- /a --> <span class="type">*</span><span class="param">msg</span>,
    <!-- a --><span class="type">mbuf_t</span><!-- /a --> <span class="type">*</span><span class="param">data</span>, 
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">flags</span>,
    <!-- a --><span class="type">size_t</span><!-- /a --> <span class="type">*</span><span class="param">recvlen</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>msg</code></dt>
<dd><p>The msg describing how the data should be received. May
be NULL. The msg_iov is ignored.</p></dd>
<dt><code>data</code></dt>
<dd><p>Upon return *data will be a reference to an mbuf chain
containing the data received. This eliminates copying the data
out of the mbufs. Caller is responsible for freeing the mbufs.</p></dd>
<dt><code>flags</code></dt>
<dd><p>See 'man 2 recvmsg'.</p></dd>
<dt><code>recvlen</code></dt>
<dd><p>Maximum number of bytes to receive in the mbuf chain.
Upon return, this value will be set to the number of bytes
received, same as return value of userland recvmsg.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success, EWOULDBLOCK if non-blocking and operation
would cause the thread to block, otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Receive data from a socket. Similar to sock_receive
though data is returned as a chain of mbufs. See 'man 2 recvmsg'
for more information about receiving data.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_send;   name=sock_send --><a name="//apple_ref/c/func/sock_send"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_send">sock_send</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_send" target="_top" class="function"><span class="function">sock_send</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">const</span> <!-- a --><span class="var">struct</span><!-- /a --> <!-- a --><span class="var">msghdr</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">msg</span><!-- /a -->,
    <!-- a --><span class="var">int</span><!-- /a --> <!-- a --><span class="var">flags</span><!-- /a -->, 
    <!-- a --><span class="var">size_t</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">sentlen</span><!-- /a -->);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>msg</code></dt>
<dd><p>The msg describing how the data should be sent. Any
pointers must point to data in the kernel.</p></dd>
<dt><code>flags</code></dt>
<dd><p>See 'man 2 sendmsg'.</p></dd>
<dt><code>sentlen</code></dt>
<dd><p>The number of bytes sent.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success, EWOULDBLOCK if non-blocking and operation
would cause the thread to block, otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Send data on a socket. Similar to sendmsg. See 'man 2
sendmsg' for more information about sending data.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_sendmbuf;   name=sock_sendmbuf --><a name="//apple_ref/c/func/sock_sendmbuf"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_sendmbuf">sock_sendmbuf</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_sendmbuf" target="_top" class="function"><span class="function">sock_sendmbuf</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <span class="keyword">const</span> <!-- a --><span class="var">struct</span><!-- /a --> <!-- a --><span class="var">msghdr</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">msg</span><!-- /a -->,
    <!-- a --><span class="var">mbuf_t</span><!-- /a --> <!-- a --><span class="var">data</span><!-- /a -->, 
    <!-- a --><span class="var">int</span><!-- /a --> <!-- a --><span class="var">flags</span><!-- /a -->,
    <!-- a --><span class="var">size_t</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">sentlen</span><!-- /a -->);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>msg</code></dt>
<dd><p>The msg describing how the data should be sent. The
msg_iov is ignored. msg may be NULL.</p></dd>
<dt><code>data</code></dt>
<dd><p>The mbuf chain of data to send.</p></dd>
<dt><code>flags</code></dt>
<dd><p>See 'man 2 sendmsg'.</p></dd>
<dt><code>sentlen</code></dt>
<dd><p>The number of bytes sent.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success, EWOULDBLOCK if non-blocking and operation
would cause the thread to block, otherwise the errno error.
Regardless of return value, the mbuf chain 'data' will be freed.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Send data in an mbuf on a socket. Similar to sock_send
only the data to be sent is taken from the mbuf chain.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_setpriv;   name=sock_setpriv --><a name="//apple_ref/c/func/sock_setpriv"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_setpriv">sock_setpriv</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_setpriv" target="_top" class="function"><span class="function">sock_setpriv</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">on</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket on which to modify the SS_PRIV flag.</p></dd>
<dt><code>on</code></dt>
<dd><p>Indicate whether or not the SS_PRIV flag should be set.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Set the privileged bit in the socket. Allows for
operations that require root privileges.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_setsockopt;   name=sock_setsockopt --><a name="//apple_ref/c/func/sock_setsockopt"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_setsockopt">sock_setsockopt</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_setsockopt" target="_top" class="function"><span class="function">sock_setsockopt</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">level</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">optname</span>,
    <span class="keyword">const</span> <!-- a --><span class="var">void</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">optval</span><!-- /a -->, 
    <!-- a --><span class="var">int</span><!-- /a --> <!-- a --><span class="var">optlen</span><!-- /a -->);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>level</code></dt>
<dd><p>Level of the socket option.</p></dd>
<dt><code>optname</code></dt>
<dd><p>The option name.</p></dd>
<dt><code>optval</code></dt>
<dd><p>The option value.</p></dd>
<dt><code>optlen</code></dt>
<dd><p>The length of optval.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Sets a socket option. See 'man 2 setsockopt'.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_shutdown;   name=sock_shutdown --><a name="//apple_ref/c/func/sock_shutdown"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_shutdown">sock_shutdown</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_shutdown" target="_top" class="function"><span class="function">sock_shutdown</span></a>(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">how</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>The socket.</p></dd>
<dt><code>how</code></dt>
<dd><p>SHUT_RD - shutdown receive. SHUT_WR - shutdown send. SHUT_RDWR - shutdown both.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Shutdown one or both directions of a connection. See
'man 2 shutdown' for more information.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/sock_socket;   name=sock_socket --><a name="//apple_ref/c/func/sock_socket"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_socket">sock_socket</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><!-- a --><span class="type">errno_t</span><!-- /a --> <a href="index.html#//apple_ref/c/func/sock_socket" target="_top" class="function"><span class="function">sock_socket</span></a>(
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">domain</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">type</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">protocol</span>,
    <a href="index.html#//apple_ref/c/tdef/sock_upcall" target="_top" class="type"><span class="type">sock_upcall</span></a> <span class="param">callback</span>, 
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">cookie</span>,
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="type">*</span><span class="param">new_so</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>domain</code></dt>
<dd><p>The socket domain (PF_INET, etc...).</p></dd>
<dt><code>type</code></dt>
<dd><p>The socket type (SOCK_STREAM, SOCK_DGRAM, etc...).</p></dd>
<dt><code>protocol</code></dt>
<dd><p>The socket protocol.</p></dd>
<dt><code>callback</code></dt>
<dd><p>A notifier function to be called when an event
occurs on the socket. This may be NULL.</p></dd>
<dt><code>cookie</code></dt>
<dd><p>A cookie passed directly to the callback.</p></dd>
<dt><code>new_so</code></dt>
<dd><p>Upon success, a reference to the new socket.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->0 on success otherwise the errno error.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Allocate a socket. Allocating a socket in this manner
creates a socket with no associated file descriptor. For more
information, see 'man 2 socket'.
<!-- end discussion -->
</p>
<p></p>
<h2>Typedefs</h2>
<hr>
<!-- headerDoc=tdef;  uid=//apple_ref/c/tdef/sock_upcall;   name=sock_upcall --><a name="//apple_ref/c/tdef/sock_upcall"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="sock_upcall">sock_upcall</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><span class="keyword">typedef</span> <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> ( <span class="type">*</span><!-- a --><span class="function">sock_upcall</span><!-- /a -->)(
    <!-- a --><span class="type">socket_t</span><!-- /a --> <span class="param">so</span>,
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">cookie</span>,
    <!-- a --><span class="type">int</span><!-- /a --> <span class="param">waitf</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Fields</font></h5>
<dl>
<dt><code>so</code></dt>
<dd><p>A reference to the socket that's ready.</p></dd>
<dt><code>cookie</code></dt>
<dd><p>The cookie passed in when the socket was created.</p></dd>
<dt><code>waitf</code></dt>
<dd><p>Indicates whether or not it's safe to block.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>sock_upcall is used by a socket to notify an in kernel
client that data is waiting. Instead of making blocking calls in
the kernel, a client can specify an upcall which will be called
when data is available or the socket is ready for sending.
</p>
<p>Calls to your upcall function are not serialized and may be
called concurrently from multiple threads in the kernel.
</p>
<p>Your upcall function will be called when:
</p>
<!-- end discussion -->
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/KernelIOKitFramework/kpi_socket_h/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/KernelIOKitFramework/kpi_socket_h/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/KernelIOKitFramework/kpi_socket_h/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&#160;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2008-12-19
</div>
<!-- headerDoc=Header;  uid=//apple_ref/doc/header/kpi_socket.h;   name=kpi_socket.h --><a name="//apple_ref/doc/header/kpi_socket.h"></a>
</body>
</html>

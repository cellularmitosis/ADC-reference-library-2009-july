<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>WriteResource (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING67></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-66.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-68.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A> / <A HREF="MoreToolbox-24.html"><B>Resource Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-30.html"><B>Resource Manager Routines</B></A> / <A HREF="MoreToolbox-65.html"><B>Writing to Resource Forks</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING67-0></A>
<H3><A NAME=MARKER-9-353></A>WriteResource</H3>
 <A NAME=MARKER-11-354></A><A NAME=MARKER-2-355></A>You can use the <CODE>WriteResource</CODE> procedure to write resource data in memory immediately to a file's resource fork. Note that <CODE>WriteResource</CODE> does not write the resource's resource map entry to disk.<P>
<PRE>
PROCEDURE WriteResource (theResource: Handle);
</PRE>
<DL>
<DT><CODE>theResource</CODE>
<DD> A handle to a resource.
</DL>
<A NAME=HEADING67-4></A>
<H5>DESCRIPTION</H5>
 Given a handle to a resource, <CODE>WriteResource</CODE> checks the <CODE>resChanged</CODE> attribute of that resource. If the <CODE>resChanged</CODE> attribute is set to 1 (after a successful call to the <CODE>ChangedResource</CODE> or <CODE>AddResource</CODE> procedure), <CODE>WriteResource</CODE> writes the resource data in memory to the resource fork, then clears the <CODE>resChanged</CODE> attribute in the resource's resource map in memory.<P>
<DL>
<DT><B>Note</B>
<DD>When your application calls <CODE>ChangedResource</CODE> or <CODE>AddResource</CODE>, the Resource Manager attempts to reserve disk space for the changed resource. If the modified resource data can't be written to the resource fork (for example, if there's not enough room on disk), the <CODE>resChanged</CODE> attribute is not set to 1. If this is the case and you call <CODE>WriteResource</CODE>, the Resource Manager won't know that the resource data has been changed. Thus, the routine won't write the modified resource data to the resource fork and won't return an error. For this reason, always make sure that the <CODE>ResError</CODE> function returns the result code <CODE>noErr</CODE> after a call to <CODE>ChangedResource</CODE> or <CODE>AddResource</CODE>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 If the resource is purgeable and has been purged, <CODE>WriteResource</CODE> writes zero-length resource data to the resource fork. If the resource's <CODE>resProtected</CODE> attribute is set to 1, <CODE>WriteResource</CODE> does nothing, and the <CODE>ResError</CODE> function returns the result code <CODE>noErr</CODE>. The same is true if the <CODE>resChanged</CODE> attribute is not set (that is, set to 0). If the given handle isn't a handle to a resource, <CODE>WriteResource</CODE> does nothing, and <CODE>ResError</CODE> returns the result code <CODE>resNotFound</CODE>.<P>
 The resource fork is updated automatically when your application quits, when you <BR>call <CODE>UpdateResFile</CODE>, or when you call <CODE>CloseResFile</CODE> (which in turn calls <CODE>UpdateResFile</CODE>). Thus, you should call <CODE>WriteResource</CODE> only if you want to write just one or a few resources immediately.<P>
<A NAME=HEADING67-9></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>resNotFound<TD>-192<TD>Resource not found</TABLE>
</H5>
<A NAME=HEADING67-10></A>
<H5>SEE ALSO</H5>
 To check for errors, call the <CODE>ResError</CODE> function as described on <A HREF=MoreToolbox-35.html#MARKER-9-220>page 1-47</A>.<P>
 For more information about resource attributes, see <A HREF=MoreToolbox-13.html#MARKER-9-99>"The Resource Map" beginning on page 1-7</A>. For descriptions of the <CODE>ChangedResource</CODE> and <CODE>AddResource</CODE> procedures, <BR>see <A HREF=MoreToolbox-63.html#MARKER-9-338>page 1-83</A> and <A HREF=MoreToolbox-64.html#MARKER-9-342>page 1-85</A>, respectively. For a description of the <CODE>UpdateResFile</CODE> procedure, see <A HREF=MoreToolbox-66.html#MARKER-9-349>page 1-87</A>. For a description of the <CODE>CloseResFile</CODE> procedure, see <A HREF=MoreToolbox-89.html#MARKER-9-432>page 1-104</A>. <A NAME=MARKER-2-356></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-66.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-68.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

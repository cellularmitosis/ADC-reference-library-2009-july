<html><head><title>Mac OS X Developer Tools
 Manual Page For Tcl_Tell(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tcl_Tell" title="Mac OS X Developer Tools
 Manual Page for Tcl_Tell(3tcl)"><a name="//apple_ref/doc/man/3/Tcl_Tell" title="Mac OS X Developer Tools
 Manual Page for Tcl_Tell(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tcl_Tell"; name=Tcl_Tell(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tcl_OpenFileChannel(3)                     Tcl Library Procedures                     <a href="Tcl_OpenFileChannel.3tcl.html#//apple_ref/doc/man/3/Tcl_OpenFileChannel">Tcl_OpenFileChannel(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tcl_OpenFileChannel,  Tcl_OpenCommandChannel,  Tcl_MakeFileChannel,  Tcl_GetChannel,  Tcl_GetChannel-<font color="#ffffff" class="whiteout">Names,&nbsp;Tcl_GetChannelNames,</font>
       Names,   Tcl_GetChannelNamesEx,   Tcl_RegisterChannel,   Tcl_UnregisterChannel,    Tcl_DetachChannel,
       Tcl_IsStandardChannel,  Tcl_Close,  Tcl_ReadChars,  Tcl_Read,  Tcl_GetsObj,  Tcl_Gets,  Tcl_WriteObj,
       Tcl_WriteChars, Tcl_Write, Tcl_Flush, Tcl_Seek, Tcl_Tell, Tcl_GetChannelOption, Tcl_SetChannelOption,
       Tcl_Eof,  Tcl_InputBlocked, Tcl_InputBuffered, Tcl_OutputBuffered, Tcl_Ungets, Tcl_ReadRaw, Tcl_Writ-<font color="#ffffff" class="whiteout">eRaw&nbsp;Tcl_WriteRaw</font>
       eRaw - buffered I/O facilities using channels

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Channel
       <b>Tcl_OpenFileChannel</b>(<u>interp,</u> <u>fileName,</u> <u>mode,</u> <u>permissions</u>)

       Tcl_Channel
       <b>Tcl_OpenCommandChannel</b>(<u>interp,</u> <u>argc,</u> <u>argv,</u> <u>flags</u>)

       Tcl_Channel
       <b>Tcl_MakeFileChannel</b>(<u>handle,</u> <u>readOrWrite</u>)

       Tcl_Channel
       <b>Tcl_GetChannel</b>(<u>interp,</u> <u>channelName,</u> <u>modePtr</u>)

       int                                                                                                   |
       <b>Tcl_GetChannelNames</b>(<u>interp</u>)                                                                           |

       int                                                                                                   |
       <b>Tcl_GetChannelNamesEx</b>(<u>interp,</u> <u>pattern</u>)                                                                |

       void
       <b>Tcl_RegisterChannel</b>(<u>interp,</u> <u>channel</u>)

       int
       <b>Tcl_UnregisterChannel</b>(<u>interp,</u> <u>channel</u>)

       int
       <b>Tcl_DetachChannel</b>(<u>interp,</u> <u>channel</u>)

       int
       <b>Tcl_IsStandardChannel</b>(<u>channel</u>)

       int
       <b>Tcl_Close</b>(<u>interp,</u> <u>channel</u>)

       int                                                                                                   |
       <b>Tcl_ReadChars</b>(<u>channel,</u> <u>readObjPtr,</u> <u>charsToRead,</u> <u>appendFlag</u>)                                           |

       int                                                                                                   |
       <b>Tcl_Read</b>(<u>channel,</u> <u>readBuf,</u> <u>bytesToRead</u>)                                                               |

       int                                                                                                   |
       <b>Tcl_GetsObj</b>(<u>channel,</u> <u>lineObjPtr</u>)                                                                      |

       int                                                                                                   |
       <b>Tcl_Gets</b>(<u>channel,</u> <u>lineRead</u>)                                                                           |

       int                                                                                                   |
       <b>Tcl_Ungets</b>(<u>channel,</u> <u>input,</u> <u>inputLen,</u> <u>addAtEnd</u>)                                                        |

       int                                                                                                   |
       <b>Tcl_WriteObj</b>(<u>channel,</u> <u>writeObjPtr</u>)                                                                    |

       int                                                                                                   |
       <b>Tcl_WriteChars</b>(<u>channel,</u> <u>charBuf,</u> <u>bytesToWrite</u>)                                                        |

       int                                                                                                   |
       <b>Tcl_Write</b>(<u>channel,</u> <u>byteBuf,</u> <u>bytesToWrite</u>)                                                             |

       int                                                                                                   |
       <b>Tcl_ReadRaw</b>(<u>channel,</u> <u>readBuf,</u> <u>bytesToRead</u>)                                                            |

       int                                                                                                   |
       <b>Tcl_WriteRaw</b>(<u>channel,</u> <u>byteBuf,</u> <u>bytesToWrite</u>)                                                          |

       int
       <b>Tcl_Eof</b>(<u>channel</u>)

       int
       <b>Tcl_Flush</b>(<u>channel</u>)

       int
       <b>Tcl_InputBlocked</b>(<u>channel</u>)

       int
       <b>Tcl_InputBuffered</b>(<u>channel</u>)

       int                                                                                                   |
       <b>Tcl_OutputBuffered</b>(<u>channel</u>)                                                                           |

       Tcl_WideInt                                                                                           |
       <b>Tcl_Seek</b>(<u>channel,</u> <u>offset,</u> <u>seekMode</u>)                                                                   |

       Tcl_WideInt                                                                                           |
       <b>Tcl_Tell</b>(<u>channel</u>)                                                                                     |

       int
       <b>Tcl_GetChannelOption</b>(<u>interp,</u> <u>channel,</u> <u>optionName,</u> <u>optionValue</u>)

       int
       <b>Tcl_SetChannelOption</b>(<u>interp,</u> <u>channel,</u> <u>optionName,</u> <u>newValue</u>)


<b>ARGUMENTS</b>
       Tcl_Interp        <u>*interp</u>            (in)      Used for error reporting and to look up a channel reg-<font color="#ffffff" class="whiteout">istered&nbsp;registered</font>
                                                      istered in it.

       CONST char        <u>*fileName</u>          (in)      The name of a local or network file.

       CONST char        <u>*mode</u>              (in)      Specifies  how  the  file is to be accessed.  May have
                                                      any of the values allowed for the <u>mode</u> argument to the
                                                      Tcl <b>open</b> command.

       int               <u>permissions</u>        (in)      POSIX-style  permission  flags such as 0644.  If a new
                                                      file is created, these permissions will be set on  the
                                                      created file.

       int               <u>argc</u>               (in)      The number of elements in <u>argv</u>.

       CONST char        <u>**argv</u>             (in)      Arguments  for constructing a command pipeline.  These
                                                      values have the same meaning as the  non-switch  argu-<font color="#ffffff" class="whiteout">ments&nbsp;arguments</font>
                                                      ments to the Tcl <b>exec</b> command.

       int               <u>flags</u>              (in)      Specifies  the  disposition  of  the  stdio handles in
                                                      pipeline: OR-ed combination of <b>TCL_STDIN</b>,  <b>TCL_STDOUT</b>,
                                                      <b>TCL_STDERR</b>, and <b>TCL_ENFORCE_MODE</b>. If <b>TCL_STDIN</b> is set,
                                                      stdin for the first child in  the  pipe  is  the  pipe
                                                      channel,  otherwise  it  is  the  same as the standard
                                                      input of the invoking process; likewise for <b>TCL_STDOUT</b>
                                                      and  <b>TCL_STDERR</b>.  If <b>TCL_ENFORCE_MODE</b> is not set, then
                                                      the pipe can redirect stdio handles  to  override  the
                                                      stdio  handles  for  which  <b>TCL_STDIN</b>,  <b>TCL_STDOUT</b> and
                                                      <b>TCL_STDERR</b> have been set.  If it  is  set,  then  such
                                                      redirections cause an error.

       ClientData        <u>handle</u>             (in)      Operating  system  specific  handle for I/O to a file.
                                                      For Unix this is a file descriptor, for Windows it  is
                                                      a HANDLE.

       int               <u>readOrWrite</u>        (in)      OR-ed  combination of <b>TCL_READABLE</b> and <b>TCL_WRITABLE</b> to
                                                      indicate what operations are valid on <u>handle</u>.

       CONST char        <u>*channelName</u>       (in)      The name of the channel.

       int               <u>*modePtr</u>           (out)     Points at an integer variable that will receive an OR-<font color="#ffffff" class="whiteout">ed&nbsp;ORed</font>
                                                      ed combination of <b>TCL_READABLE</b> and <b>TCL_WRITABLE</b> denot-<font color="#ffffff" class="whiteout">ing&nbsp;denoting</font>
                                                      ing whether the channel is open for reading and  writ-<font color="#ffffff" class="whiteout">ing.&nbsp;writing.</font>
                                                      ing.                                                   |

       CONST char        <u>*pat-</u>                                                                               |
       <u>tern</u>           (in)                                                             |                     |
                                                      The pattern to match on, passed to Tcl_StringMatch, or |
                                                      NULL.

       Tcl_Channel       <u>channel</u>            (in)      A Tcl channel for input or output.  Must have been the
                                                      return  value  from  a  procedure  such  as  <b>Tcl_Open</b>-<font color="#ffffff" class="whiteout">FileChannel.&nbsp;Tcl_OpenFileChannel.</font>
                                                      <b>FileChannel</b>.

       Tcl_Obj           <u>*readOb-</u>                                                                            |
       <u>jPtr</u>        (in/out)                                                         |                        |
                                                      A pointer to a Tcl Object in which to store the  char- |
                                                      acters read from the channel.                          |

       int               <u>char-</u>                                                                               |
       <u>sToRead</u>        (in)                                                             |                     |
                                                      The number of characters to read from the channel.  If |
                                                      the  channel's  encoding is <b>binary</b>, this is equivalent |
                                                      to the number of bytes to read from the channel.       |

       int               <u>append-</u>                                                                             |
       <u>Flag</u>         (in)                                                             |                       |
                                                      If  non-zero,  data  read  from  the  channel  will be |
                                                      appended to the  object.   Otherwise,  the  data  will |
                                                      replace the existing contents of the object.           |

       char              <u>*read-</u>                                                                              |
       <u>Buf</u>           (out)                                                            |                      |
                                                      A buffer in which to store the  bytes  read  from  the |
                                                      channel.                                               |

       int               <u>byte-</u>                                                                               |
       <u>sToRead</u>        (in)                                                             |                     |
                                                      The number of bytes to read  from  the  channel.   The |
                                                      buffer  <u>readBuf</u> must be large enough to hold this many |
                                                      bytes.                                                 |

       Tcl_Obj           <u>*lineOb-</u>                                                                            |
       <u>jPtr</u>        (in/out)                                                         |                        |
                                                      A  pointer  to a Tcl object in which to store the line |
                                                      read from the channel.  The line read will be appended |
                                                      to the current value of the object.                    |

       Tcl_DString       <u>*lineRead</u>          (in/out)                                                         ||
                                                      A pointer to a Tcl dynamic string in  which  to  store |
                                                      the  line  read from the channel.  Must have been ini- |
                                                      tialized  by  the  caller.   The  line  read  will  be |
                                                      appended to any data already in the dynamic string.    |

       CONST                                                                                                 |
       char        <u>*input</u>             (in)                                                             |     |
                                                      The input to add to a channel buffer.                  |

       int               <u>inputLen</u>           (in)                                                             ||
                                                      Length of the input                                    |

       int               <u>addA-</u>                                                                               |
       <u>tEnd</u>           (in)                                                             |                     |
                                                      Flag indicating whether the input should be  added  to |
                                                      the end or beginning of the channel buffer.

       Tcl_Obj           <u>*writeObjPtr</u>       (in)      A  pointer to a Tcl Object whose contents will be out-<font color="#ffffff" class="whiteout">put&nbsp;output</font>
                                                      put to the channel.

       CONST char        <u>*charBuf</u>           (in)      A buffer containing the characters to  output  to  the
                                                      channel.

       CONST char        <u>*byteBuf</u>           (in)      A  buffer  containing the bytes to output to the chan-<font color="#ffffff" class="whiteout">nel.&nbsp;channel.</font>
                                                      nel.

       int               <u>bytesToWrite</u>       (in)      The number of bytes to consume from <u>charBuf</u> or <u>byteBuf</u>
                                                      and output to the channel.

       Tcl_WideInt       <u>offset</u>             (in)      How  far  to  move  the access point in the channel at
                                                      which the next  input  or  output  operation  will  be
                                                      applied,  measured in bytes from the position given by
                                                      <u>seekMode</u>.  May be either positive or negative.

       int               <u>seekMode</u>           (in)      Relative to which point to seek; used with  <u>offset</u>  to
                                                      calculate  the new access point for the channel. Legal
                                                      values are <b>SEEK_SET</b>, <b>SEEK_CUR</b>, and <b>SEEK_END</b>.

       CONST char        <u>*optionName</u>        (in)      The name of an option applicable to this channel, such
                                                      as  <b>-blocking</b>.  May have any of the values accepted by
                                                      the <b>fconfigure</b> command.

       Tcl_DString       <u>*optionValue</u>       (in)      Where to store the value of an option or a list of all
                                                      options  and  their values. Must have been initialized
                                                      by the caller.

       CONST char        <u>*newValue</u>          (in)      New value for the option given by <u>optionName</u>.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       The Tcl channel mechanism provides a device-independent and platform-independent mechanism  for  per-<font color="#ffffff" class="whiteout">forming&nbsp;performing</font>
       forming  buffered  input  and  output operations on a variety of file, socket, and device types.  The
       channel mechanism is extensible to new channel types, by providing a low level channel driver for the
       new  type;  the  channel driver interface is described in the manual entry for <b>Tcl_CreateChannel</b>. The
       channel mechanism provides a buffering scheme modeled after Unix's standard I/O, and it  also  allows
       for nonblocking I/O on channels.

       The procedures described in this manual entry comprise the C APIs of the generic layer of the channel
       architecture. For a description of the channel driver architecture and how to implement channel driv-<font color="#ffffff" class="whiteout">ers&nbsp;drivers</font>
       ers for new types of channels, see the manual entry for <b>Tcl_CreateChannel</b>.


<b>TCL_OPENFILECHANNEL</b>
       <b>Tcl_OpenFileChannel</b>  opens a file specified by <u>fileName</u> and returns a channel handle that can be used
       to perform input and output on the file. This API is modeled after the <b>fopen</b> procedure  of  the  Unix
       standard  I/O  library.  The syntax and meaning of all arguments is similar to those given in the Tcl
       <b>open</b> command when opening a file.  If an error occurs while opening the channel,  <b>Tcl_OpenFileChannel</b>
       returns NULL and records a POSIX error code that can be retrieved with <b>Tcl_GetErrno</b>.  In addition, if
       <u>interp</u> is non-NULL, <b>Tcl_OpenFileChannel</b> leaves an error message in <u>interp</u>'s result after  any  error.
       As  of  Tcl 8.4, the object-based API <b>Tcl_FSOpenFileChannel</b> should be used in preference to <b>Tcl_Open</b>-<font color="#ffffff" class="whiteout">FileChannel&nbsp;Tcl_OpenFileChannel</font>
       <b>FileChannel</b> wherever possible.



       The newly created channel is not registered in the supplied interpreter; to register it, use <b>Tcl_Reg</b>-<font color="#ffffff" class="whiteout">isterChannel,&nbsp;Tcl_RegisterChannel,</font>
       <b>isterChannel</b>,  described  below.  If one of the standard channels, <b>stdin,</b> <b>stdout</b> or <b>stderr</b> was previ-<font color="#ffffff" class="whiteout">ously&nbsp;previously</font>
       ously closed, the act of creating the new channel also assigns it as a replacement for  the  standard
       channel.


<b>TCL_OPENCOMMANDCHANNEL</b>
       <b>Tcl_OpenCommandChannel</b>  provides  a C-level interface to the functions of the <b>exec</b> and <b>open</b> commands.
       It creates a sequence of subprocesses specified by the <u>argv</u> and <u>argc</u> arguments and returns a  channel
       that  can  be used to communicate with these subprocesses.  The <u>flags</u> argument indicates what sort of
       communication will exist with the command pipeline.

       If the <b>TCL_STDIN</b> flag is set then the standard input for the first subprocess will  be  tied  to  the
       channel:  writing to the channel will provide input to the subprocess.  If <b>TCL_STDIN</b> is not set, then
       standard input for the first subprocess will be the same as this application's  standard  input.   If
       <b>TCL_STDOUT</b>  is set then standard output from the last subprocess can be read from the channel; other-<font color="#ffffff" class="whiteout">wise&nbsp;otherwise</font>
       wise it goes to this application's standard output.  If <b>TCL_STDERR</b> is set, standard error output  for
       all  subprocesses is returned to the channel and results in an error when the channel is closed; oth-<font color="#ffffff" class="whiteout">erwise&nbsp;otherwise</font>
       erwise it goes to this application's standard error.  If <b>TCL_ENFORCE_MODE</b> is not set, then  <u>argc</u>  and
       <u>argv</u>  can redirect the stdio handles to override <b>TCL_STDIN</b>, <b>TCL_STDOUT</b>, and <b>TCL_STDERR</b>; if it is set,
       then it is an error for argc and argv to override stdio channels for which <b>TCL_STDIN</b>, <b>TCL_STDOUT</b>, and
       <b>TCL_STDERR</b> have been set.

       If an error occurs while opening the channel, <b>Tcl_OpenCommandChannel</b> returns NULL and records a POSIX
       error code that can be retrieved with <b>Tcl_GetErrno</b>.  In addition,  <b>Tcl_OpenCommandChannel</b>  leaves  an
       error message in the interpreter's result if <u>interp</u> is not NULL.

       The newly created channel is not registered in the supplied interpreter; to register it, use <b>Tcl_Reg</b>-<font color="#ffffff" class="whiteout">isterChannel,&nbsp;Tcl_RegisterChannel,</font>
       <b>isterChannel</b>, described below.  If one of the standard channels, <b>stdin,</b> <b>stdout</b> or <b>stderr</b>  was  previ-<font color="#ffffff" class="whiteout">ously&nbsp;previously</font>
       ously  closed,  the act of creating the new channel also assigns it as a replacement for the standard
       channel.


<b>TCL_MAKEFILECHANNEL</b>
       <b>Tcl_MakeFileChannel</b> makes a <b>Tcl_Channel</b> from an existing, platform-specific, file handle.  The  newly
       created  channel is not registered in the supplied interpreter; to register it, use <b>Tcl_RegisterChan</b>-<font color="#ffffff" class="whiteout">nel,&nbsp;Tcl_RegisterChannel,</font>
       <b>nel</b>, described below.  If one of the standard  channels,  <b>stdin,</b>  <b>stdout</b>  or  <b>stderr</b>  was  previously
       closed,  the  act of creating the new channel also assigns it as a replacement for the standard chan-<font color="#ffffff" class="whiteout">nel.&nbsp;channel.</font>
       nel.


<b>TCL_GETCHANNEL</b>
       <b>Tcl_GetChannel</b> returns a channel given the <u>channelName</u> used to create it with <b>Tcl_CreateChannel</b> and a
       pointer  to  a  Tcl interpreter in <u>interp</u>. If a channel by that name is not registered in that inter-<font color="#ffffff" class="whiteout">preter,&nbsp;interpreter,</font>
       preter, the procedure returns NULL. If the <u>modePtr</u> argument is not NULL,  it  points  at  an  integer
       variable  that  will receive an OR-ed combination of <b>TCL_READABLE</b> and <b>TCL_WRITABLE</b> describing whether
       the channel is open for reading and writing.

       <b>Tcl_GetChannelNames</b> and <b>Tcl_GetChannelNamesEx</b> write the names  of  the  registered  channels  to  the
       interpreter's  result  as  a list object.  <b>Tcl_GetChannelNamesEx</b> will filter these names according to
       the <u>pattern</u>.  If <u>pattern</u> is NULL, then it will not do any filtering.  The return value is  <b>TCL_OK</b>  if
       no errors occurred writing to the result, otherwise it is <b>TCL_ERROR</b>, and the error message is left in
       the interpreter's result.


<b>TCL_REGISTERCHANNEL</b>
       <b>Tcl_RegisterChannel</b> adds a channel to the set of channels accessible in <u>interp</u>. After this call,  Tcl
       programs  executing  in that interpreter can refer to the channel in input or output operations using
       the name given in the call to <b>Tcl_CreateChannel</b>.  After this call, the channel becomes  the  property
       of  the  interpreter,  and  the caller should not call <b>Tcl_Close</b> for the channel; the channel will be
       closed automatically when it is unregistered from the interpreter.

       Code executing outside of any Tcl interpreter can call <b>Tcl_RegisterChannel</b> with <u>interp</u>  as  NULL,  to
       indicate  that it wishes to hold a reference to this channel. Subsequently, the channel can be regis-<font color="#ffffff" class="whiteout">tered&nbsp;registered</font>
       tered in a Tcl interpreter and it will only be closed when the matching number of calls to <b>Tcl_Unreg</b>-<font color="#ffffff" class="whiteout">isterChannel&nbsp;Tcl_UnregisterChannel</font>
       <b>isterChannel</b>  have been made.  This allows code executing outside of any interpreter to safely hold a
       reference to a channel that is also registered in a Tcl interpreter.

       This procedure interacts with the code managing the standard channels. If no standard  channels  were
       initialized  before the first call to <b>Tcl_RegisterChannel</b> they will get initialized by that call. See
       <b>Tcl_StandardChannels</b> for a general treatise about standard channels and  the  behaviour  of  the  Tcl
       library with regard to them.


<b>TCL_UNREGISTERCHANNEL</b>
       <b>Tcl_UnregisterChannel</b>  removes  a  channel  from the set of channels accessible in <u>interp</u>. After this
       call, Tcl programs will no longer be able to use the channel's name to refer to the channel  in  that
       interpreter.   If this operation removed the last registration of the channel in any interpreter, the
       channel is also closed and destroyed.

       Code not associated with a Tcl interpreter can call <b>Tcl_UnregisterChannel</b> with  <u>interp</u>  as  NULL,  to
       indicate to Tcl that it no longer holds a reference to that channel. If this is the last reference to
       the channel, it will now be closed.   <b>Tcl_UnregisterChannel</b>  is  very  similar  to  <b>Tcl_DetachChannel</b>
       except that it will also close the channel if no further references to it exist.


<b>TCL_DETACHCHANNEL</b>
       <b>Tcl_DetachChannel</b>  removes  a channel from the set of channels accessible in <u>interp</u>. After this call,
       Tcl programs will no longer be able to use the channel's name to refer to the channel in that  inter-<font color="#ffffff" class="whiteout">preter.&nbsp;interpreter.</font>
       preter.  Beyond that, this command has no further effect.  It cannot be used on the standard channels
       (stdout, stderr, stdin), and will return TCL_ERROR if passed one of those channels.

       Code not associated with a Tcl interpreter can call <b>Tcl_DetachChannel</b> with <u>interp</u> as NULL,  to  indi-<font color="#ffffff" class="whiteout">cate&nbsp;indicate</font>
       cate to Tcl that it no longer holds a reference to that channel. If this is the last reference to the
       channel, unlike <b>Tcl_UnregisterChannel</b>, it will not be closed.


<b>TCL_ISSTANDARDCHANNEL</b>
       <b>Tcl_IsStandardChannel</b> tests whether a channel is one of the three standard channels, stdin, stdout or
       stderr.  If so, it returns 1, otherwise 0.

       No  attempt  is  made  to check whether the given channel or the standard channels are initialized or
       otherwise valid.


<b>TCL_CLOSE</b>
       <b>Tcl_Close</b> destroys the channel <u>channel</u>, which must denote  a  currently  open  channel.  The  channel
       should  not  be registered in any interpreter when <b>Tcl_Close</b> is called. Buffered output is flushed to
       the channel's output device prior to destroying the channel, and any buffered input is discarded.  If
       this  is a blocking channel, the call does not return until all buffered data is successfully sent to
       the channel's output device.  If this is a nonblocking channel and there is buffered output that can-<font color="#ffffff" class="whiteout">not&nbsp;cannot</font>
       not  be  written  without blocking, the call returns immediately; output is flushed in the background
       and the channel will be closed once all of the buffered data has been output.  In  this  case  errors
       during flushing are not reported.

       If  the  channel  was  closed  successfully, <b>Tcl_Close</b> returns <b>TCL_OK</b>.  If an error occurs, <b>Tcl_Close</b>
       returns <b>TCL_ERROR</b> and records a POSIX error code that can be retrieved  with  <b>Tcl_GetErrno</b>.   If  the
       channel is being closed synchronously and an error occurs during closing of the channel and <u>interp</u> is
       not NULL, an error message is left in the interpreter's result.

       Note: it is not safe to call <b>Tcl_Close</b> on a channel that has been registered using  <b>Tcl_RegisterChan</b>-<font color="#ffffff" class="whiteout">nel;&nbsp;Tcl_RegisterChannel;</font>
       <b>nel</b>;  see the documentation for <b>Tcl_RegisterChannel</b>, above, for details. If the channel has ever been
       given as the <b>chan</b> argument in a call to <b>Tcl_RegisterChannel</b>, you should instead  use  <b>Tcl_Unregister</b>-<font color="#ffffff" class="whiteout">Channel,&nbsp;Tcl_UnregisterChannel,</font>
       <b>Channel</b>, which will internally call <b>Tcl_Close</b> when all calls to <b>Tcl_RegisterChannel</b> have been matched
       by corresponding calls to <b>Tcl_UnregisterChannel</b>.


<b>TCL_READCHARS</b> <b>AND</b> <b>TCL_READ</b>                                                                                   |
       <b>Tcl_ReadChars</b> consumes bytes from <u>channel</u>, converting the bytes  to  UTF-8  based  on  the  channel's |
       encoding  and  storing  the produced data in <u>readObjPtr</u>'s string representation.  The return value of |
       <b>Tcl_ReadChars</b> is the number of characters, up to <u>charsToRead</u>, that were stored in <u>readObjPtr</u>.  If  an |
       error  occurs while reading, the return value is -1 and <b>Tcl_ReadChars</b> records a POSIX error code that |
       can be retrieved with <b>Tcl_GetErrno</b>.                                                                   |

       Setting <u>charsToRead</u> to <b>-1</b> will cause the command to read all  characters  currently  available  (non- |
       blocking) or everything until eof (blocking mode).                                                    |

       The  return value may be smaller than the value to read, indicating that less data than requested was |
       available.  This is called a <u>short</u> <u>read</u>.  In blocking mode, this can only happen on  an  end-of-file. |
       In  nonblocking  mode,  a short read can also occur if there is not enough input currently available: |
       <b>Tcl_ReadChars</b> returns a short count rather than waiting for more data.                                |

       If the channel is in blocking mode, a return value of zero indicates an  end-of-file  condition.   If |
       the  channel  is  in  nonblocking mode, a return value of zero indicates either that no input is cur- |
       rently available or an end-of-file condition.  Use <b>Tcl_Eof</b> and  <b>Tcl_InputBlocked</b>  to  tell  which  of |
       these conditions actually occurred.                                                                   |

       <b>Tcl_ReadChars</b>  translates the various end-of-line representations into the canonical <b>\n</b> internal rep- |
       resentation according to the current end-of-line recognition mode.  End-of-line recognition  and  the |
       various platform-specific modes are described in the manual entry for the Tcl <b>fconfigure</b> command.     |

       As  a  performance  optimization, when reading from a channel with the encoding <b>binary</b>, the bytes are |
       not converted to UTF-8 as they are read.  Instead, they are stored in <u>readObjPtr</u>'s internal represen- |
       tation  as a byte-array object.  The string representation of this object will only be constructed if |
       it is needed (e.g., because of a call to <b>Tcl_GetStringFromObj</b>).  In this way, byte-oriented data  can |
       be  read  from  a  channel, manipulated by calling <b>Tcl_GetByteArrayFromObj</b> and related functions, and |
       then written to a channel without the expense of ever converting to or from UTF-8.                    |

       <b>Tcl_Read</b> is similar to <b>Tcl_ReadChars</b>, except that it doesn't do encoding conversions,  regardless  of |
       the  channel's  encoding.   It is deprecated and exists for backwards compatibility with non-interna- |
       tionalized Tcl extensions.  It consumes bytes from <u>channel</u> and stores  them  in  <u>readBuf</u>,  performing |
       end-of-line  translations  on  the  way.   The return value of <b>Tcl_Read</b> is the number of bytes, up to |
       <u>bytesToRead</u>, written in <u>readBuf</u>.  The buffer produced by <b>Tcl_Read</b> is not null-terminated.   Its  con- |
       tents  are  valid  from  the zeroth position up to and excluding the position indicated by the return |
       value.                                                                                                |

       <b>Tcl_ReadRaw</b> is the same as <b>Tcl_Read</b> but does not compensate for stacking.  While  <b>Tcl_Read</b>  (and  the |
       other  functions in the API) always get their data from the topmost channel in the stack the supplied |
       channel is part of, <b>Tcl_ReadRaw</b> does not. Thus this function  is  <b>only</b>  usable  for  transformational |
       channel  drivers, i.e. drivers used in the middle of a stack of channels, to move data from the chan- |
       nel below into the transformation.                                                                    |


<b>TCL_GETSOBJ</b> <b>AND</b> <b>TCL_GETS</b>                                                                                     |
       <b>Tcl_GetsObj</b> consumes bytes from <u>channel</u>, converting the bytes to UTF-8 based on the channel's  encod- |
       ing,  until  a full line of input has been seen.  If the channel's encoding is <b>binary</b>, each byte read |
       from the channel is treated as an individual Unicode character.  All of the characters  of  the  line |
       except  for  the terminating end-of-line <!-- a -->character(s)<!-- /a --> are appended to <u>lineObjPtr</u>'s string representa- |
       tion.  The end-of-line <!-- a -->character(s)<!-- /a --> are read and discarded.                                           |

       If a line was successfully read, the return value is greater than or equal to zero and indicates  the |
       number of bytes stored in <u>lineObjPtr</u>.  If an error occurs, <b>Tcl_GetsObj</b> returns -1 and records a POSIX |
       error code that can be retrieved with <b>Tcl_GetErrno</b>.  <b>Tcl_GetsObj</b> also returns -1 if the  end  of  the |
       file is reached; the <b>Tcl_Eof</b> procedure can be used to distinguish an error from an end-of-file condi- |
       tion.                                                                                                 |

       If the channel is in nonblocking mode, the return value can also be -1 if no data  was  available  or |
       the  data  that  was  available  did  not contain an end-of-line character.  When -1 is returned, the |
       <b>Tcl_InputBlocked</b> procedure may be invoked to determine if the channel is  blocked  because  of  input |
       unavailability.                                                                                       |

       <b>Tcl_Gets</b>  is  the  same  as  <b>Tcl_GetsObj</b>  except the resulting characters are appended to the dynamic |
       string given by <u>lineRead</u> rather than a Tcl object.                                                    |


<b>TCL_UNGETS</b>                                                                                                   |
       <b>Tcl_Ungets</b> is used to add data to the input queue of a channel, at either the head  or  tail  of  the |
       queue.   The pointer <u>input</u> points to the data that is to be added.  The length of the input to add is |
       given by <u>inputLen</u>.  A non-zero value of <u>addAtEnd</u> indicates that the data is to be added at the end of |
       queue;  otherwise  it  will be added at the head of the queue.  If <u>channel</u> has a "sticky" EOF set, no |
       data will be added to the input queue.  <b>Tcl_Ungets</b> returns <u>inputLen</u> or -1 if an error occurs.         |


<b>TCL_WRITECHARS,</b> <b>TCL_WRITEOBJ,</b> <b>AND</b> <b>TCL_WRITE</b>                                                                  |
       <b>Tcl_WriteChars</b> accepts <u>bytesToWrite</u> bytes of character data at <u>charBuf</u>.  The UTF-8 characters in  the |
       buffer  are converted to the channel's encoding and queued for output to <u>channel</u>.  If <u>bytesToWrite</u> is |
       negative, <b>Tcl_WriteChars</b> expects <u>charBuf</u> to be null-terminated and it outputs everything  up  to  the |
       null.                                                                                                 |

       Data  queued  for  output may not appear on the output device immediately, due to internal buffering. |
       If the data should appear immediately, call <b>Tcl_Flush</b> after the call to <b>Tcl_WriteChars</b>,  or  set  the |
       <b>-buffering</b>  option on the channel to <b>none</b>.  If you wish the data to appear as soon as a complete line |
       is accepted for output, set the <b>-buffering</b> option on the channel to <b>line</b> mode.                        |

       The return value of <b>Tcl_WriteChars</b> is a count of how many bytes were accepted for output to the chan- |
       nel.   This is either greater than zero to indicate success or -1 to indicate that an error occurred. |
       If an error occurs, <b>Tcl_WriteChars</b> records a POSIX error code that may be retrieved  with  <b>Tcl_GetEr-</b> |
       <b>rno</b>.                                                                                                  |

       Newline  characters  in  the  output  data  are translated to platform-specific end-of-line sequences |
       according to the <b>-translation</b> option for the channel.  This is done even if the channel has no encod- |
       ing.                                                                                                  |

       <b>Tcl_WriteObj</b>  is similar to <b>Tcl_WriteChars</b> except it accepts a Tcl object whose contents will be out- |
       put to the channel.  The UTF-8 characters in <u>writeObjPtr</u>'s string representation are converted to the |
       channel's  encoding and queued for output to <u>channel</u>.  As a performance optimization, when writing to |
       a channel with the encoding <b>binary</b>, UTF-8 characters are not converted as they are written.  Instead, |
       the bytes in <u>writeObjPtr</u>'s internal representation as a byte-array object are written to the channel. |
       The byte-array representation of the object will be constructed if it is needed.  In this way,  byte- |
       oriented  data can be read from a channel, manipulated by calling <b>Tcl_GetByteArrayFromObj</b> and related |
       functions, and then written to a channel without the expense of ever converting to or from UTF-8.     |

       <b>Tcl_Write</b> is similar to <b>Tcl_WriteChars</b> except that it doesn't do encoding conversions, regardless  of |
       the  channel's  encoding.   It is deprecated and exists for backwards compatibility with non-interna- |
       tionalized Tcl extensions.  It accepts <u>bytesToWrite</u> bytes of data at <u>byteBuf</u> and queues them for out- |
       put  to <u>channel</u>.  If <u>bytesToWrite</u> is negative, <b>Tcl_Write</b> expects <u>byteBuf</u> to be null-terminated and it |
       outputs everything up to the null.                                                                    |

       <b>Tcl_WriteRaw</b> is the same as <b>Tcl_Write</b> but does not compensate for stacking. While <b>Tcl_Write</b> (and  the |
       other  functions in the API) always feed their input to the topmost channel in the stack the supplied |
       channel is part of, <b>Tcl_WriteRaw</b> does not. Thus this function is  <b>only</b>  usable  for  transformational |
       channel drivers, i.e. drivers used in the middle of a stack of channels, to move data from the trans- |
       formation into the channel below it.


<b>TCL_FLUSH</b>
       <b>Tcl_Flush</b> causes all of the buffered output data for <u>channel</u> to be written to its underlying file  or
       device  as  soon as possible.  If the channel is in blocking mode, the call does not return until all
       the buffered data has been sent to the channel or some error occurred.  The call returns  immediately
       if  the channel is nonblocking; it starts a background flush that will write the buffered data to the
       channel eventually, as fast as the channel is able to absorb it.

       The return value is normally <b>TCL_OK</b>.  If an error occurs, <b>Tcl_Flush</b> returns <b>TCL_ERROR</b> and  records  a
       POSIX error code that can be retrieved with <b>Tcl_GetErrno</b>.


<b>TCL_SEEK</b>
       <b>Tcl_Seek</b>  moves  the  access point in <u>channel</u> where subsequent data will be read or written. Buffered
       output is flushed to the channel and buffered input is discarded, prior to the seek operation.

       <b>Tcl_Seek</b> normally returns the new access point.  If an error occurs, <b>Tcl_Seek</b> returns -1 and  records
       a  POSIX error code that can be retrieved with <b>Tcl_GetErrno</b>.  After an error, the access point may or
       may not have been moved.


<b>TCL_TELL</b>
       <b>Tcl_Tell</b> returns the current access point for a channel. The returned value is -1 if the channel does
       not support seeking.


<b>TCL_GETCHANNELOPTION</b>
       <b>Tcl_GetChannelOption</b>  retrieves,  in <u>optionValue</u>, the value of one of the options currently in effect
       for a channel, or a list of all options and their values.  The <u>channel</u> argument identifies the  chan-<font color="#ffffff" class="whiteout">nel&nbsp;channel</font>
       nel  for  which  to  query  an option or retrieve all options and their values.  If <u>optionName</u> is not
       NULL, it is the name of the option to query; the option's value is copied to the Tcl  dynamic  string
       denoted  by  <u>optionValue</u>.  If  <u>optionName</u>  is NULL, the function stores an alternating list of option
       names and their values in <u>optionValue</u>, using a series of calls to <b>Tcl_DStringAppendElement</b>. The vari-<font color="#ffffff" class="whiteout">ous&nbsp;various</font>
       ous preexisting options and their possible values are described in the manual entry for the Tcl <b>fcon</b>-<font color="#ffffff" class="whiteout">figure&nbsp;fconfigure</font>
       <b>figure</b> command. Other options can be added by each channel type.  These channel type specific options
       are  described in the manual entry for the Tcl command that creates a channel of that type; for exam-<font color="#ffffff" class="whiteout">ple,&nbsp;example,</font>
       ple, the additional options for TCP based channels are described in the  manual  entry  for  the  Tcl
       <b>socket</b>  command.  The procedure normally returns <b>TCL_OK</b>. If an error occurs, it returns <b>TCL_ERROR</b> and
       calls <b>Tcl_SetErrno</b> to store an appropriate POSIX error code.


<b>TCL_SETCHANNELOPTION</b>
       <b>Tcl_SetChannelOption</b> sets a new value <u>newValue</u> for an option <u>optionName</u> on  <u>channel</u>.   The  procedure
       normally  returns  <b>TCL_OK</b>.  If an error occurs, it returns <b>TCL_ERROR</b>;  in addition, if <u>interp</u> is non-<font color="#ffffff" class="whiteout">NULL,&nbsp;nonNULL,</font>
       NULL, <b>Tcl_SetChannelOption</b> leaves an error message in the interpreter's result.


<b>TCL_EOF</b>
       <b>Tcl_Eof</b> returns a nonzero value if <u>channel</u> encountered an end of file during the  last  input  opera-<font color="#ffffff" class="whiteout">tion.&nbsp;operation.</font>
       tion.


<b>TCL_INPUTBLOCKED</b>
       <b>Tcl_InputBlocked</b>  returns a nonzero value if <u>channel</u> is in nonblocking mode and the last input opera-<font color="#ffffff" class="whiteout">tion&nbsp;operation</font>
       tion returned less data than requested because there  was  insufficient  data  available.   The  call
       always returns zero if the channel is in blocking mode.


<b>TCL_INPUTBUFFERED</b>
       <b>Tcl_InputBuffered</b> returns the number of bytes of input currently buffered in the internal buffers for
       a channel. If the channel is not open for reading, this function always returns zero.


<b>TCL_OUTPUTBUFFERED</b>
       <b>Tcl_OutputBuffered</b> returns the number of bytes of output currently buffered in the  internal  buffers |
       for a channel. If the channel is not open for writing, this function always returns zero.


<b>PLATFORM</b> <b>ISSUES</b>
       The  handles returned from <b>Tcl_GetChannelHandle</b> depend on the platform and the channel type.  On Unix
       platforms, the handle is always a Unix file descriptor as returned from the  <b>open</b>  system  call.   On
       Windows platforms, the handle is a file <b>HANDLE</b> when the channel was created with <b>Tcl_OpenFileChannel</b>,
       <b>Tcl_OpenCommandChannel</b>, or <b>Tcl_MakeFileChannel</b>.  Other channel types may return a different  type  of
       handle  on  Windows  platforms.   On the Macintosh platform, the handle is a file reference number as
       returned from <b>HOpenDF</b>.


<b>SEE</b> <b>ALSO</b>
       <a href="DString.3tcl.html#//apple_ref/doc/man/3/DString">DString(3)</a>, <a href="../mann/fconfigure.ntcl.html#//apple_ref/doc/man/n/fconfigure">fconfigure(n)</a>, <a href="../mann/filename.ntcl.html#//apple_ref/doc/man/n/filename">filename(n)</a>, <a href="fopen.3.html#//apple_ref/doc/man/3/fopen">fopen(3)</a>, <a href="Tcl_CreateChannel.3tcl.html#//apple_ref/doc/man/3/Tcl_CreateChannel">Tcl_CreateChannel(3)</a>


<b>KEYWORDS</b>
       access point, blocking, buffered I/O, channel, channel driver, end of file, flush,  input,  nonblock-<font color="#ffffff" class="whiteout">ing,&nbsp;nonblocking,</font>
       ing, output, read, seek, write



Tcl                                                  8.3                              <a href="Tcl_OpenFileChannel.3tcl.html#//apple_ref/doc/man/3/Tcl_OpenFileChannel">Tcl_OpenFileChannel(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_Tell.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_Tell.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_Tell.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

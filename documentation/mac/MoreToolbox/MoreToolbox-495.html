<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PBDTGetIcon (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING495></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-494.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-496.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-483.html"><B>Chapter 9 - Desktop Manager</B></A> / <A HREF="MoreToolbox-486.html"><B>Desktop Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-489.html"><B>Routines</B></A> / <A HREF="MoreToolbox-494.html"><B>Reading the Desktop Database</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING495-0></A>
<H3><A NAME=MARKER-9-111></A>PBDTGetIcon</H3>
 <A NAME=MARKER-2-112></A>To retrieve an icon definition, use the <CODE>PBDTGetIcon</CODE> function.<P>
<PRE>
FUNCTION PBDTGetIcon (paramBlock: DTPBPtr; async: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE>paramBlock</CODE>
<DD> A pointer to a desktop parameter block.
<DT><CODE>async</CODE>
<DD> A Boolean value that specifies asynchronous (<CODE>TRUE</CODE>) or synchronous (<CODE>FALSE</CODE>) execution.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--> <TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD>\xAE <TD>ioResult<TD>OSErr<TD>The result code of the function.<TR>
<TD>--> <TD>ioDTRefNum<TD>Integer<TD>The desktop database reference number.<TR>
<TD>--><TD>ioTagInfo<TD>LongInt<TD>Reserved; must be set to 0.<TR>
<TD>--> <TD>ioDTBuffer<TD>Ptr<TD>A pointer to a buffer to hold the icon's data.<TR>
<TD>--> <TD>ioDTReqCount<TD>LongInt<TD>The requested size of the icon's bitmap.<TR>
<TD>\xAE<TD>ioDTActCount<TD>LongInt<TD>The actual size of the icon's bitmap.<TR>
<TD>--> <TD>ioIconType<TD>SignedByte<TD>The icon type.<TR>
<TD>--> <TD>ioFileCreator<TD>OSType<TD>The icon's file creator.<TR>
<TD>--> <TD>ioFileType<TD>OSType<TD>The icon's file type.</TABLE>
</B><P>
<A NAME=HEADING495-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>PBDTGetIcon</CODE> function returns the bitmap for an icon that represents a file of a given type and creator. (For example, to get the icon for a file of file type <CODE>'SFWR'</CODE> created by the application with a signature of <CODE>'WAVE'</CODE>, specify these two values in <CODE>ioFileType</CODE> and <CODE>ioFileCreator</CODE>.) You pass a pointer to a buffer for the icon bitmap in the <CODE>ioDTBuffer</CODE> field. The bitmap is returned in this buffer. You specify the desktop database in <CODE>ioDTRefNum</CODE>, the file creator in <CODE>ioFileCreator</CODE>, and the file type in <CODE>ioFileType</CODE>. For the icon type in <CODE>ioIconType</CODE>, specify a constant from the <BR>following list:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TH>Corresponding<BR>resource type<TH>Description<TR>
<TD><A NAME=MARKER-2-38></A>kLargeIcon<A NAME=MARKER-0-241></A><TD>1<TD>'ICN#'<TD>Large black-and-white icon <BR>with mask<TR>
<TD><A NAME=MARKER-2-39></A>kLarge4BitIcon<A NAME=MARKER-2-27></A><TD>2<TD>'icl4'<TD>Large 4-bit color icon<TR>
<TD><A NAME=MARKER-2-40></A>kLarge8BitIcon<A NAME=MARKER-2-395></A><TD>3<TD>'icl8'<TD>Large 8-bit color icon<TR>
<TD><A NAME=MARKER-2-41></A>kSmallIcon<A NAME=MARKER-2-11></A><TD>4<TD>'ics#'<TD>Small black-and-white icon <BR>with mask<TR>
<TD><A NAME=MARKER-2-42></A>kSmall4BitIcon<A NAME=MARKER-2-250></A><TD>5<TD>'ics4'<TD>Small 4-bit color icon<TR>
<TD><A NAME=MARKER-2-43></A>kSmall8BitIcon<A NAME=MARKER-2-253></A><TD>6<TD>'ics8'<TD>Small 8-bit color icon</TABLE>
<P>
 The value you supply in <CODE>ioDTReqCount</CODE> is the size in bytes of the buffer that you've allocated for the icon's bitmap pointed to by <CODE>ioDTBuffer</CODE>; this value depends on the icon type. Be sure to allocate enough storage for the icon data; 1024 bytes is the largest amount required for any icon in System 7. You can use constants to indicate the amount of memory you have provided for the icon's data. The following list shows these constants and, for each icon type, shows the amount of bytes you should allocate. 
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value <BR>(bytes)<TH>Corresponding<BR>resource type<TH>Description<TR>
<TD>kLargeIconSize<TD><A NAME=MARKER-2-44></A><A NAME=MARKER-9-149></A>256<TD>'ICN#'<TD>Large black-and-white icon <BR>with mask<TR>
<TD><A NAME=MARKER-2-45></A>kLarge4BitIconSize<A NAME=MARKER-21-117></A><TD>512<TD>'icl4'<TD>Large 4-bit color icon<TR>
<TD><A NAME=MARKER-2-46></A>kLarge8BitIconSize<A NAME=MARKER-9-293></A><TD>1024<TD>'icl8'<TD>Large 8-bit color icon<TR>
<TD><A NAME=MARKER-2-47></A>kSmallIconSize<A NAME=MARKER-2-108></A><TD>64<TD>'ics#'<TD>Small black-and-white icon <BR>with mask<TR>
<TD><A NAME=MARKER-2-48></A>kSmall4BitIconSize<A NAME=MARKER-21-110></A><TD>128<TD>'ics4'<TD>Small 4-bit color icon<TR>
<TD><A NAME=MARKER-2-49></A>kSmall8BitIconSize<A NAME=MARKER-2-270></A><TD>256<TD>'ics8'<TD>Small 8-bit color icon</TABLE>
<P>
 The value in <CODE>ioDTActCount</CODE> reflects the size of the bitmap actually retrieved. If <CODE>ioDTActCount</CODE> is larger than <CODE>ioDTReqCount</CODE>, only the amount of data allowed <BR>by <CODE>ioDTReqCount</CODE> is valid.<P>
<A NAME=HEADING495-10></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>ioErr<TD>-36<TD>I/O error<TR>
<TD>rfNumErr<TD>-51<TD>Reference number invalid<TR>
<TD>extFSErr<TD>-58<TD>External file system--file system identifier is nonzero<TR>
<TD>afpItemNotFound<TD>-5012<TD>Information not found <A NAME=MARKER-2-32></A></TABLE>
</H5>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-494.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-496.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

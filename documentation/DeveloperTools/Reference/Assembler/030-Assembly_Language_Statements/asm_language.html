<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Mac OS X Assembler Reference: Assembly Language Statements</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Assembly Language Statements"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000822" title="Assembly Language Statements"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/DeveloperTools/index.html#//apple_ref/doc/uid/TP30001281-TP30000436" target="_top">Tools</a> &gt; <a href="../../../../../reference/DeveloperTools/idxCompilersDebuggers-date.html#//apple_ref/doc/uid/TP30001281-TP30000436-TP30001025" target="_top">Compiling &amp; Debugging</a> &gt; <a href="../000-Introduction/introduction.html#//apple_ref/doc/uid/TP30000851-CH211-DontLinkElementID_9">Mac OS X Assembler Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../020-Assembly_Language_Syntax/asm_syntax.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../040-Assembler_Directives/asm_directives.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000822-TPXREF101" title="Assembly Language Statements"></a><h1>Assembly Language Statements</h1><p>This chapter describes the assembly language statements that make up an assembly language program.</p><p>This is the general format of an assembly language statement:</p><div class="codesample"><table><tr><td scope="row"><pre>[ label_field ] [ opcode_field [ operand_field ] ] [ comment_field ]<span></span></pre></td></tr></table></div><p>Each of the depicted fields is described in detail in one of the following sections.</p><p>A line may contain multiple statements separated by the <code>@</code> character for the PowerPC assembler (and a semicolon for the i386 assembler), which may then be followed by a single comment preceded by a semicolon for the PowerPC assembler (and a <code>#</code> character for the i386 assembler):</p><div class="codesample"><table><tr><td scope="row"><pre>[ statement [ @ statement ...] ] [ ; comment_field ]<span></span></pre></td></tr></table></div><p>The following rules apply to the use of whitespace within a statement:</p><ul class="ul"><li class="li"><p>Spaces or tabs are used to separate fields.</p></li><li class="li"><p>At least one space or tab must occur between the opcode field and the operand field.</p></li><li class="li"><p>Spaces may appear within the operand field.</p></li><li class="li"><p>Spaces and tabs are significant when they appear in a character string.</p></li></ul>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="asm_language.html#//apple_ref/doc/uid/TP30000822-TPXREF102">Label Field</a>
				
			<br/>
			
        
			
			
				<a href="asm_language.html#//apple_ref/doc/uid/TP30000822-TPXREF103">Operation Code Field</a>
				
			<br/>
			
        
			
			
				<a href="asm_language.html#//apple_ref/doc/uid/TP30000822-TPXREF107">Operand Field</a>
				
			<br/>
			
        
			
			
				<a href="asm_language.html#//apple_ref/doc/uid/TP30000822-TPXREF110">Comment Field</a>
				
			<br/>
			
        
			
			
				<a href="asm_language.html#//apple_ref/doc/uid/TP30000822-TPXREF111">Direct Assignment Statements</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000822-TPXREF102" title="Label Field"></a><h2>Label Field</h2><p>Labels are identifiers that you use to tag the locations of program and data objects.  Each label is composed of an identifier and a terminating colon.  The format of the label field is:</p><div class="codesample"><table><tr><td scope="row"><pre>identifier: [ identifier: ] ...<span></span></pre></td></tr></table></div><p>The optional label field may occur only at the beginning of a statement.  The following example shows a label field containing two labels, followed by a (PowerPC-style) comment:</p><div class="codesample"><table><tr><td scope="row"><pre>var: VAR:  ; two labels defined here<span></span></pre></td></tr></table></div><p>As shown here, letters in identifiers are case sensitive, and both uppercase and lowercase letters may be used.</p><a name="//apple_ref/doc/uid/TP30000822-TPXREF103" title="Operation Code Field"></a><h2>Operation Code Field</h2><p>The operation code field of an assembly language statement identifies the statement as a machine instruction, an assembler directive, or a macro defined by the programmer:</p><ul class="ul"><li class="li"><p>A machine instruction is indicated by an instruction mnemonic. An assembly language statement that contains an instruction mnemonic is intended to produce a single executable machine instruction.  The operation and use of each instruction is described in the manufacturer’s user manual.</p></li><li class="li"><p>An assembler directive (or pseudo-op) performs some function during the assembly process.  It doesn’t produce any executable code, but it may assign space for data in the program.</p></li><li class="li"><p>Macros are defined with the <code>.macro</code> directive (see <span class="content_text"><a href="../040-Assembler_Directives/asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF174">“.macro, .endmacro, .macros_on, and .macros_off”</a></span> for more information).</p></li></ul><p>One or more spaces or tabs must separate the operation code field from the following operand field in a statement.  Spaces or tabs are optional between the label and operation code fields, but they help to improve the readability of the program.</p><a name="//apple_ref/doc/uid/TP30000822-TPXREF106" title="Intel i386 Architecture&acirc;&#128;&#147;Specific Caveats"></a><h3>Intel i386 Architecture–Specific Caveats</h3><ul class="spaceabove"><li class="li"><p>i386 instructions can operate on byte, word, or long word data (the last is called “double word” by Intel). The desired size is indicated as part of the instruction mnemonic by adding a trailing <code>b</code>, <code>w</code>, or <code>l</code>:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Mnemonic</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>b</code></p></td><td ><p>Byte (8-bit) data.</p></td></tr><tr><td  scope="row"><p><code>w</code></p></td><td ><p>Word (16-bit) data.</p></td></tr><tr><td  scope="row"><p><code>l</code></p></td><td ><p>Long word (32-bit) data.</p></td></tr></table></div><p>For instance, a <code>movb</code> instruction moves a byte of data, but a <code>movw</code> instruction moves a 16-bit word of data.</p><p>If no size is specified, the assembler attempts to determine the size from the operands.  For example, if the 16-bit names for registers are used as operands, a 16-bit operation is performed.  When both a size specifier and a size-specific register name are given, the size specifier is used.  Thus, the following are all correct and result in the same operation:</p><div class="codesample"><table><tr><td scope="row"><pre> movw    %bx,%cx<span></span></pre></td></tr><tr><td scope="row"><pre> mov     %bx,%cx<span></span></pre></td></tr><tr><td scope="row"><pre> movw    %ebx,%ecx<span></span></pre></td></tr></table></div></li><li class="li"><p>An i386 operation code can also contain optional prefixes, which are separated from the operation code by a slash (<code>/</code>) character.  The prefix mnemonics are:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Prefix</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>data16</code></p></td><td ><p>Operation uses 16-bit data.</p></td></tr><tr><td  scope="row"><p><code>addr16</code></p></td><td ><p>Operation uses 16-bit addresses.</p></td></tr><tr><td  scope="row"><p><code>lock</code></p></td><td ><p>Exclusive memory lock.</p></td></tr><tr><td  scope="row"><p><code>wait</code></p></td><td ><p>Wait for pending numeric exceptions.</p></td></tr><tr><td  scope="row"><p><code>cs</code>, <code>ds</code>, <code>es</code>, <code>fs</code>, <code>gs</code>, <code>ss</code></p></td><td ><p>Segment register override.</p></td></tr><tr><td  scope="row"><p><code>rep</code>, <code>repe</code>, <code>repne</code></p></td><td ><p>Repeat prefixes for string instructions.</p></td></tr></table></div><p>More than one prefix may be specified for some operation codes.  For example:</p><div class="codesample"><table><tr><td scope="row"><pre>lock/fs/xchgl    %ebx,4(%ebp)<span></span></pre></td></tr></table></div><p>Segment register overrides and the 16-bit data specifications are usually given as part of the operation code itself or of its operands.  For example, the following two lines of assembly generate the same instructions:</p><div class="codesample"><table><tr><td scope="row"><pre>movw            %bx,%fs:4(%ebp)<span></span></pre></td></tr><tr><td scope="row"><pre>data16/fs/movl  %bx,4(%ebp)<span></span></pre></td></tr></table></div><p>Not all prefixes are allowed with all instructions.  The assembler does check that the repeat prefixes for strings instructions are used correctly but doesn’t otherwise check for correct usage.</p></li></ul><a name="//apple_ref/doc/uid/TP30000822-TPXREF107" title="Operand Field"></a><h2>Operand Field</h2><p>The operand field of an assembly language statement supplies the arguments to the machine instruction, assembler directive, or macro.</p><p>The operand field may contain one or more operands, depending on the requirements of the preceding machine instruction or assembler directive.  Some machine instructions and assembler directives don’t take any operand, and some take two or more.  If the operand field contains more than one operand, the operands are generally separated by commas, as shown here:</p><div class="codesample"><table><tr><td scope="row"><pre>[ operand [ , operand ] ... ]<span></span></pre></td></tr></table></div><p>The following types of objects can be operands:</p><ul class="ul"><li class="li"><p>Register operands</p></li><li class="li"><p>Register pairs</p></li><li class="li"><p>Address operands</p></li><li class="li"><p>String constants</p></li><li class="li"><p>Floating-point constants</p></li><li class="li"><p>Register lists</p></li><li class="li"><p>Expressions</p></li></ul><p>Register operands in a machine instruction refer to the machine registers of the processor or coprocessor.  Register names may appear in mixed case.</p><a name="//apple_ref/doc/uid/TP30000822-TPXREF109" title="Intel 386 Architecture&acirc;&#128;&#147;Specific Caveats"></a><h3>Intel 386 Architecture–Specific Caveats</h3><p>The Mac OS X assembler orders operand fields for i386 instructions in the reverse order from Intel’s conventions.  Intel’s convention is destination first, source second; Mac OS X assembler’s convention is source first, destination second.  Where Intel documentation would describe the Compare and Exchange instruction for 32-bit operands as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>CMPXCHG  r/m32,r32    # Intel processor manual convention<span></span></pre></td></tr></table></div><p>The Mac OS X assembler syntax for this same instruction is:</p><div class="codesample"><table><tr><td scope="row"><pre>cmpxchg  r32,r/m32    # Mac OS X assembler syntax<span></span></pre></td></tr></table></div><p>So, an example of actual assembly code for the Mac OS X assembler would be:</p><div class="codesample"><table><tr><td scope="row"><pre>cmpxchg  %ebx,(%eax)  # Mac OS X assembly code<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000822-TPXREF110" title="Comment Field"></a><h2>Comment Field</h2><p>The assembler recognizes two types of comments in source code:</p><ul class="ul"><li class="li"><p>A line whose first nonwhitespace character is the hash character (<code>#</code>) is a comment.  This style of comment is useful for passing C preprocessor output through the assembler.  Note that comments of the form:</p><div class="codesample"><table><tr><td scope="row"><pre># line_number file_name level<span></span></pre></td></tr></table></div><p>get turned into:</p><div class="codesample"><table><tr><td scope="row"><pre>.line line_number; .file file_name<span></span></pre></td></tr></table></div><p>This can cause problems when comments of this form that aren’t intended to specify line numbers precede assembly errors, since the error is reported as occurring on a line relative to that specified in the comment.  Suppose a program contains these two lines of assembly source:</p><div class="codesample"><table><tr><td scope="row"><pre># 500<span></span></pre></td></tr><tr><td scope="row"><pre>  .var<span></span></pre></td></tr></table></div><p>If <code>.var</code> hasn’t been defined, this fragment results in the following error message:</p><div class="codesample"><table><tr><td scope="row"><pre>var.s:500:Unknown pseudo-op: .var<span></span></pre></td></tr></table></div></li><li class="li"><p>A comment field, appearing on a line after one or more statements.  The comment field consists of the appropriate comment character and all the characters that follow it on the line:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Character</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>;</code></p></td><td ><p>Comment character for PowerPC processors</p></td></tr><tr><td  scope="row"><p><code>#</code></p></td><td ><p>Comment character for i386 architecture processors</p></td></tr></table></div><p>An assembly language source line can consist of just the comment field; in this case, it’s equivalent to using the hash character comment style:</p><div class="codesample"><table><tr><td scope="row"><pre># This is a comment.<span></span></pre></td></tr><tr><td scope="row"><pre>; This is a comment.<span></span></pre></td></tr></table></div><p>Note the warning given above for hash character comments beginning with a number.</p></li></ul><a name="//apple_ref/doc/uid/TP30000822-TPXREF111" title="Direct Assignment Statements"></a><h2>Direct Assignment Statements</h2><p>This section describes direct assignment statements, which don’t conform to the normal statement syntax described earlier in this chapter.  A direct assignment statement can be used to assign the value of an expression to an identifier.  The format of a direct assignment statement is:</p><div class="codesample"><table><tr><td scope="row"><pre>identifier = expression<span></span></pre></td></tr></table></div><p>If <em>expression</em> in a direct assignment is absolute, <em>identifier</em> is also absolute, and it may be treated as a constant in subsequent expressions.  If <em>expression</em> is relocatable, <em>identifier</em> is also relocatable, and it is considered to be declared in the same program section as the expression.</p><p>The use of an assignment statement is analogous to using the <code>.set</code> directive (described in <span class="content_text"><a href="../040-Assembler_Directives/asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF167">“.set”</a></span>), except that the <code>.set</code> directive makes the value of the expression absolute.  This is used when an assembly time constant is wanted for what would otherwise generate a relocatable expression using the position independent expression of <code>symbol1 - symbol2</code>.  For example, the size of the function is needed as one of the fields of the C++ exception information and is set with:</p><div class="codesample"><table><tr><td scope="row"><pre>.set L_foo_size, L_foo_end - _foo<span></span></pre></td></tr><tr><td scope="row"><pre>.long L_foo_size ; size of function _foo<span></span></pre></td></tr></table></div><p>where a position independent pointer to the function is another field of the C++ exception information and is set with:</p><div class="codesample"><table><tr><td scope="row"><pre>.long _foo - .  ; position independent pointer to _foo<span></span></pre></td></tr></table></div><p>where the runtime adds the address of the pointer to its contents to get a pointer to the function.</p><p>Once an identifier has been defined by a direct assignment statement, it may be redefined—its value is then the result of the last assignment statement.  There are a few restrictions, however, concerning the redefinition of identifiers:</p><ul class="ul"><li class="li"><p>Register identifiers may not be redefined.</p></li><li class="li"><p>An identifier that has already been used as a label should not be redefined, since this would amount to redefining the address of a place in the program.  Moreover, an identifier that has been defined in a direct assignment statement cannot later be used as a label.  Only the second situation produces an assembler error message.</p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../020-Assembly_Language_Syntax/asm_syntax.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../040-Assembler_Directives/asm_directives.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Reference/Assembler/030-Assembly_Language_Statements/asm_language.html%3Fid%3DTP30000851-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Reference/Assembler/030-Assembly_Language_Statements/asm_language.html%3Fid%3DTP30000851-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Reference/Assembler/030-Assembly_Language_Statements/asm_language.html%3Fid%3DTP30000851-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>MyFlattenProc(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING269></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-268.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-270.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-182.html"><B>Chapter 5 - Collection Manager</B></A> / <A HREF="GXEnvironment-206.html"><B>Collection Manager Reference</B></A><BR><DL><DD><A HREF="GXEnvironment-268.html"><B>Application-Defined Functions</B></A> / <A HREF="GXEnvironment-266.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING269-0></A>
<H3><A NAME=MARKER-9-276></A>MyFlattenProc</H3>
 <A NAME=MARKER-2-277></A>You provide the <CODE>MyFlattenProc</CODE> function to read or write flattened collection data.<P>
<PRE>
OSErr MyFlattenProc(long size, void *data, void *refCon);
</PRE>
<DL>
<DT><CODE>size</CODE>
<DD> The size of the block of flattened data to read or write.
<DT><CODE>data</CODE>
<DD> A pointer to the block of flattened data. When flattening, this pointer points to the data your callback function should write. When unflattening, your callback function should read flattened data into the memory pointed to by this parameter. 
<DT><CODE>refCon</CODE>
<DD> A value you provide to the <CODE>FlattenCollection</CODE> function or <CODE>UnflattenCollection</CODE> function that the Collection Manager passes on to your callback function.
</DL>
<A NAME=HEADING269-6></A>
<H5>DESCRIPTION</H5>
 You create this function to pass to the <CODE>FlattenCollection</CODE>, <CODE>FlattenPartialCollection</CODE>, and <CODE>UnflattenCollection</CODE> functions when flattening or unflattening a collection.<P>
 As the Collection Manager is flattening a collection, it repeatedly calls this callback function to process sequential blocks of flattened data. Each time it calls this function, it provides a pointer to the current block of flattened data in the <CODE>data</CODE> parameter and the size of the current block in the <CODE>size</CODE> parameter. You can process this data in a number of ways: appending it to a handle-based block of memory, writing it to disk, and so on.<P>
 When unflattening a collection, the Collection Manager repeatedly calls this function to obtain blocks of flattened data. The Collection Manager specifies the size of the requested block in the <CODE>size</CODE> parameter, and your function should read or copy the requested number of bytes of flattened data into the block of memory pointed to by the <CODE>data</CODE> parameter.<P>
 In either case, the Collection Manager passes in the <CODE>refCon</CODE> parameter the same value you originally passed as the <CODE>refCon</CODE> parameter to the <CODE>FlattenCollection</CODE>, <CODE>FlattenPartialCollection</CODE>, or <CODE>UnflattenCollection</CODE> function. You can use this parameter as a pointer to a structure containing relevant state information you need when reading or writing the flattened data.<P>
 If the execution of this function results in any fatal error, you should return the error code back to the Collection Manager as the function result. If the function executes successfully, you should return the <CODE>noErr</CODE> error code as the function result.<P>
<A NAME=HEADING269-12></A>
<H5>SEE ALSO</H5>
 For more information about the flattening and unflattening functions, see <A HREF=GXEnvironment-255.html#MARKER-9-233>"Flattening and Unflattening a Collection" beginning on page 5-88</A>.<P>
 For examples of this function, see <A HREF=GXEnvironment-202.html#MARKER-9-86>"Flattening and Unflattening a Collection" beginning on page 5-37</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-268.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-270.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

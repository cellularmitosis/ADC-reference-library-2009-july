<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A QA1204: Setting Sequence Grabber Sound Input Device Driver Parameters</title><meta name="keywords" content="SGSetChannelVolume, SPBSetDeviceInfo, Sequence Grabber, QuickTime,sound, input, driver"><meta name="Description" content="Technical Q&amp;A QA1204: This QA demonstrates how to set settingsfor the sound input device driver used by the QuickTime sequencegrabber for a given audio channel"><meta name="categories" content="QuickTime Movie Toolbox"><meta name="week-posted" content="Oct 21, 2002 - Oct 25, 2002"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001729" title="Setting Sequence Grabber Sound Input Device Driver Parameters"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/QuickTime/index.html">QuickTime</a> &gt; <a href="../../technicalqas/QuickTime/idxMovieCreation-date.html">Movie Creation</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QA1204</div>
<div id="pageheadsub">Setting Sequence Grabber Sound Input Device Driver Parameters</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600> <TR> <td align="left"><!-- begin_content --><hr width=500 align=center>                  <P id=p2>Q:      We are using the Sequence Grabber to capture audio from a      microphone and save it to a QuickTime movie. However, we      are not able to control the volume level of the microphone.      Calling the <CODE>SGSetChannelVolume</CODE> function has no effect whatsoever.      How do we go about setting the volume for the microphone?</p>                  <P id=p4>A:      You'll need to first use the <CODE>SGGetSoundInputDriver</CODE> function      to find the sound input driver that is being used by the      Sequence Grabber for the selected sound input device (microphone),      and then set the input gain parameter (not the volume) for      the device using the Sound Manager <CODE>SPBSetDeviceInfo</CODE> function.</p>        <p id=p4>The <CODE>SGSetChannelVolume</CODE> function will only affect the volume setting during           playback - it will not affect the record level or the volume of the           track in the recorded movie.</p>        <p id=p4> Listing 1 below shows how this is done.<BR>        </p>        <CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left>                <pre>long sndInputDriverRef;sndInputDriverRef = SGGetSoundInputDriver(yourSoundChannel);if (sndInputDriverRef != 0){    OSErr result;    Fixed newGainValue = Long2Fix(1.5);     /* input gain may range from 0.5 - 1.5 */    result = SPBSetDeviceInfo(sndInputDriverRef,                              siInputGain,                              (void *)newGainValue);}</pre></TD></TR><TR><td align="left"><P><B>Listing 1</B>.       Setting the input gain value</P></TD></TR></TABLE></CENTER>        <BR>        <P id=p4>Note that in the future, QuickTime on Mac OS X will move away           from using the Sound Manager and will instead use Core Audio. When this           happens, there will be a new API for manipulating Core Audio parameters.           Therefore, it's important you check the error code (0 result) above           when calling the <CODE>SGGetSoundInputDriver</CODE> function.</p>        <p id=p4> Note also the recent QuickTime 6.0.2 update fixes a bug in the           Sound Driver which will cause certain hardware to report itself as &quot;not           being connected&quot; which will in turn give you a 0 result from           <CODE>SGGetSoundInputDriver</CODE>. Be aware of this problem, because you may see           it if your code is run on a system without the QuickTime 6.0.2 update.           If you do, you will of course not be able to perform recording with           the Sequence Grabber either.</p>        <P id=p4>&nbsp; </p><hr width=500 align=center> <!-- begin_date --><H4 ALIGN=center>[Oct 25 2002]</H4><!-- end_date --></TD> </TR> </TABLE></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2001/qa1204.html%3Fid%3DDTS10001729-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2001/qa1204.html%3Fid%3DDTS10001729-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2001/qa1204.html%3Fid%3DDTS10001729-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
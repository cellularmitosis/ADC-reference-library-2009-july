<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>GetPictInfo (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING353></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-352.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-354.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-332.html"><B>Chapter 7 - Pictures</B></A> / <A HREF="QuickDraw-335.html"><B>Pictures Reference</B></A><BR><DL><DD><A HREF="QuickDraw-342.html"><B>QuickDraw and Picture Utilities Routines</B></A> / <A HREF="QuickDraw-352.html"><B>Collecting Picture Information</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING353-0></A>
<H3><A NAME=MARKER-9-226></A>GetPictInfo</H3>
 <A NAME=MARKER-11-228></A><A NAME=MARKER-11-228></A><A NAME=MARKER-2-229></A>Use the <CODE>GetPictInfo</CODE> function to gather information about a single picture.<P>
<PRE>
FUNCTION GetPictInfo (thePictHandle: PicHandle; 
                      VAR thePictInfo: PictInfo; verb: Integer; 
                      colorsRequested: Integer; 
                      colorPickMethod: Integer; 
                      version: Integer): OSErr;
</PRE>
<DL>
<DT><CODE>thePictHandle</CODE>
<DD> A handle to a picture. 
<DT><CODE>thePictInfo</CODE>
<DD> A pointer to a <CODE>PictInfo</CODE> record, which will hold information about the picture. The <CODE>PictInfo</CODE> record is described on <A HREF=QuickDraw-341.html#MARKER-9-137>page 7-31</A>.
<DT><CODE>verb</CODE>
<DD> A value indicating what type of information you want <CODE>GetPictInfo</CODE> to return in the <CODE>PictInfo</CODE> record. You can use any or all of the following constants or the sum of the integers they represent:
</DL>
<PRE>
            CONST
            returnColorTable  = 1;  {return a ColorTable record}
            returnPalette     = 2;  {return a Palette record}
            recordComments    = 4;  {return comment information}
            recordFontInfo    = 8;  {return font information}
            suppressBlackAndWhite
                              = 16; {don't include black and }
                                    { white with returned colors}
</PRE>
<DL>
<DT><CODE></CODE>
<DD> Because the Palette Manager adds black and white when creating a <CODE>Palette</CODE> record, you can specify the number of colors you want minus 2 in the <CODE>colorsRequested</CODE> parameter and specify the <CODE>suppressBlackAndWhite</CODE> constant in the <CODE>verb</CODE> parameter when gathering colors destined for a <CODE>Palette</CODE> record or a screen. 
<DT><CODE>colorsRequested</CODE>
<DD> From 1 to 256, the number of colors you want in the <CODE>ColorTable</CODE> or <CODE>Palette</CODE> record returned via the <CODE>PictInfo</CODE> record. If you are not requesting colors (that is, if you pass the <CODE>recordComments</CODE> or <CODE>recordFontInfo</CODE> constant in the <CODE>verb</CODE> parameter), this function does not return colors, in which case you may instead pass 0 here.
<DT><CODE>colorPickMethod</CODE>
<DD> The method by which colors are selected for the <CODE>ColorTable</CODE> or <CODE>Palette</CODE> record returned via the <CODE>PictInfo</CODE> record. You can use one of the following constants or the integer it represents:
</DL>
<PRE>
            CONST
            systemMethod   = 0;  {let Picture Utilities choose }
                                 { the method (currently they } 
                                 { always choose popularMethod)}
            popularMethod  = 1;  {return most frequently used }
                                 { colors}
            medianMethod   = 2;  {return a weighted distribution }
                                 { of colors}
</PRE>
<DL>
<DT>
<DD> You can also create your own color-picking method in a resource file of type <CODE>'cpmt'</CODE> and pass its resource ID in the <CODE>colorPickMethod</CODE> parameter. The resource ID must be greater than 127. 
<DT><CODE>version</CODE>
<DD> Always set this parameter to 0.
</DL>
<A NAME=HEADING353-13></A>
<H5>DESCRIPTION</H5>
 In the <CODE>PictInfo</CODE> record to which the parameter <CODE>thePictInfo</CODE> points, the <CODE>GetPictInfo</CODE> function returns information about the picture you specify in the <CODE>thePictHandle</CODE> parameter. Initially, all of the fields in a new <CODE>PictInfo</CODE> record are set to <CODE>NIL</CODE>. Relevant fields are set to appropriate values depending on the information you request using the <CODE>GetPictInfo</CODE> function.<P>
 Use the <CODE>verb</CODE> parameter to specify whether you want color information (in a <CODE>ColorTable</CODE> record, a <CODE>Palette</CODE> record, or both), whether you want picture comment information, and whether you want font information. If you want color information, be sure to use the <CODE>colorPickMethod</CODE> parameter to specify the method by which to select colors.<P>
 The Picture Utilities provide two color-picking methods: one (specified by the <CODE>popularMethod</CODE> constant) that gives you the most frequently used colors and one (specified by the <CODE>medianMethod</CODE> constant) that gives you the widest range of colors. Each has advantages in different situations. For example, suppose the picture of a forest image contains 400 colors, of which 300 are greens, 80 are browns, and the rest are a scattering of golden sunlight effects. If you ask for the 250 most used colors, you will probably receive all greens. If you ask for a range of 250 colors, you will receive an assortment stretching from the greens and golds to the browns, including colors in between that might not actually appear in the image. If you specify the <CODE>systemMethod</CODE> constant, the Picture Utilities choose the method; currently they always choose <CODE>popularMethod</CODE>. You can also supply a color-picking method of your own.<P>
 If your application uses more than one color-picking method, it should present the user with a choice of which method to use.<P>
 When you are finished with the information in the <CODE>PictInfo</CODE> record, be sure to dispose of it. Use the Memory Manager procedure <CODE>DisposeHandle</CODE> to dispose of the <CODE>PictInfo</CODE>, <CODE>CommentSpec</CODE>, and <CODE>FontSpec</CODE> records. Dispose of the <CODE>Palette</CODE> record by using the <CODE>DisposePalette</CODE> procedure. Dispose of the <CODE>ColorTable</CODE> record by using the <CODE>DisposeCTable</CODE> procedure.<P>
<A NAME=HEADING353-19></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 When you ask for color information, <CODE>GetPictInfo</CODE> takes into account only the version 2 and extended version 2 picture opcodes <CODE>RGBFgCol</CODE>, <CODE>RGBBkCol</CODE>, <CODE>BkPixPat</CODE>, <CODE>PnPixPat</CODE>, <CODE>FillPixPat</CODE>, and <CODE>HiliteColor</CODE> (as well as pixel map or bitmap data). Each occurrence of these opcodes is treated as 1 pixel, regardless of the number and sizes of the objects drawn with that color. If you need an accurate set of colors from a complex picture, create an image of the picture in an offscreen pixel map, and then call the <CODE>GetPixMapInfo</CODE> function (described on <A HREF=QuickDraw-354.html#MARKER-9-230>page 7-49</A>) to obtain color information about that pixel map.<P>
 The <CODE>GetPictInfo</CODE> function returns a bit depth of 1 on QuickTime-compressed <CODE>'PICT'</CODE> files. However, when QuickTime is installed, QuickTime decompresses and displays the image correctly.<P>
 The <CODE>GetPictInfo</CODE> function may move or purge memory.<P>
<A NAME=HEADING353-23></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>GetPictInfo</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_Pack15<TD>$0800</TABLE>
<P>
<A NAME=HEADING353-25></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>pictInfoVersionErr<TD>-11000<TD>Version number not 0<TR>
<TD>pictInfoVerbErr<TD>-11002<TD>Invalid verb combination specified<TR>
<TD>cantLoadPickMethodErr<TD>-11003<TD>Custom pick method not in resource chain<TR>
<TD>colorsRequestedErr<TD>-11004<TD>Number out of range or greater than that passed to <CODE>NewPictInfo</CODE><TR>
<TD>pictureDataErr<TD>-11005<TD>Invalid picture data<A NAME=MARKER-2-514></A> <A NAME=MARKER-2-2></A></TABLE>
</H5>
<A NAME=HEADING353-26></A>
<H5>SEE ALSO</H5>
 The <CODE>PictInfo</CODE> record is described on <A HREF=QuickDraw-341.html#MARKER-9-137>page 7-31</A>, the <CODE>CommentSpec</CODE> record is described on <A HREF=QuickDraw-339.html#MARKER-9-119>page 7-29</A>, and the <CODE>FontSpec</CODE> record is described on <A HREF=QuickDraw-340.html#MARKER-9-127>page 7-29</A>. The <CODE>ColorTable</CODE> record is described in the chapter "Color QuickDraw" in this book; the <CODE>Palette</CODE> record is described in the chapter "Palette Manager" in <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I>. See <A HREF=QuickDraw-360.html#MARKER-9-260>"Application-Defined Routines" beginning on page 7-60</A> for more information about creating your own color-picking method for the <CODE>colorPickMethod</CODE> parameter.<P>
 The <CODE>DisposePalette</CODE> procedure is described in the chapter "Palette Manager" in <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I>. The <CODE>DisposeCTable</CODE> procedure is described in the chapter "Color QuickDraw" in this book. The <CODE>DisposeHandle</CODE> procedure is described in the chapter "Memory Manager" in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I>.<P>
 <A HREF=QuickDraw-334.html#MARKER-9-95>Listing 7-12 on page 7-24</A> illustrates the use of the <CODE>GetPictInfo</CODE> function.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-352.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-354.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

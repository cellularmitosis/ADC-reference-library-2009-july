<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 03-24-01 --><!--Includes revisions to code listings--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"> <title>Technical Note DV11: Opening the Serial Driver</title><meta name="keywords" content="Mac OS 8 opening serial driver OpenDriver SPConfig PortAUse PortBUse"><meta name="Description" content="Technical Note DV11: This Technical Note describes the recommended,safe, and compatible way to open the Macintosh serial driver,and it explains why you should no longer check for port availability.">                                       <meta name="categories" content="Devices"><meta name="week-posted" content="Jul 31, 1989 - Aug 4, 1989"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002401" title="Opening the Serial Driver"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxHardwareDrivers-date.html">Hardware & Drivers</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/HardwareDrivers/idxSerial-date.html" target="_blank">Hardware & Drivers > Serial</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note DV11</div>
<div id="pageheadsub">Opening the Serial Driver</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                   <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext"><a href="#Section1">OpenDriver</a><BR><BR><a href="#references">References</a><BR><BR><a href="#changes">Change History</a><BR><BR><A href="#downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>		<td width=300 valign="top" align=left>	<!-- begin_intro_text --><P id = "introtext">This Technical Note describes the recommended, safe, and compatible way to openthe Macintosh serial driver, and it explains why you should no longer check for port availability.</p><!-- end_intro_text --><!-- begin_date --><h3>Updated: [October 01 1989]</h3><!-- end_date -->                </TD>             </TR>          </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content --><a name="Section1"></a><h2>OpenDriver</h2><P>Starting with the 128K ROM, we recommend that applications do not check thelow-memory globals <code>SPConfig</code>, <code>PortAUse</code>, and <code>PortBUse</code>before opening the serial driver.  It is no longer the application's responsibility to test for the availability of the serial ports.  When running AppleTalk Phase 2, it is now possible to use the printer port for asynchronous serial communication while AppleTalk is active and using an alternate connection, such as EtherTalk or TokenTalk.</p><p>The serial driver automatically verifies that the serial port is correctlyconfigured and free for an asynchronous driver; if it is not correctlyconfigured or free, the serial driver returns either the result code<code>portNotCf</code> or <code>portInUse</code>.  The serial driver already has allthe code built into it for testing the availability of the serial ports beforetrying to complete the <code>_Open</code> call.  Therefore, since all of therequired checks are made inside the driver itself, we recommend that a simple<code>OpenDriver</code> call be made when you need to use a serial port.</p><p>By using just the <code>OpenDriver</code> call to the serial driver, you ensurethat your code is both user-friendly and compatible with future versions of the System Software.</p><p><b>Pascal</b></p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>result := OpenDriver('.AOut',AoutRefNumber);       {Check result codes in a real application. }result := OpenDriver('.AIn',AinRefNumber);       {See failure mechanism in Sample Code. }</pre>	</TD></TR></TABLE></CENTER><p><b>C</b></p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>result = OpenDriver(&quot;\p.AOut&quot;,&amp;AoutRefNumber);       /*Check result codes in a real app.*/result = OpenDriver(&quot;\p.AIn&quot;,&amp;AinRefNumber);       /* See failure mechanism in Sample Code.*/</pre>	</TD></TR></TABLE></CENTER><p>If you must maintain compatibility with the 64K ROMs, call <code>_SysEnvirons</code>, then either call <code>RAMSDOpen</code> for the 64K ROM machines or <code>OpenDriver</code> for the others.</p> <P><A HREF="#top">Back to top</A></P><a name="references"></a><h2>References</h2><P>   <i>Inside Macintosh</i>, Volume II-249, The Serial Driver</p><P>   <i>Inside Macintosh</i>, Volume IV-225, The Serial Driver</p><P>   Technical Note M.OV.GestaltSysenvirons -- <u><A HREF = "../ov/ov_16.html">Gestalt and Sysenvirons : a Never Ending Story</a></u></p><P>   DTS Q &amp; A Stack</p> <P><A HREF="#top">Back to top</A></P> <a name="changes"></a><h2>Change History</h2> <TABLE BORDER=0 CELLPADDING=3 WIDTH=544>   		<TR>               <td width=100 align=left>                  <P ALIGN=center>01-August-1989</P>               </TD>               <td align="left">                  <P>Originally written.</P>               </TD>            </TR><TR>               <td width=100 align=left>                  <P ALIGN=center>01-October-1989</P>               </TD>               <td align="left">                  <P>Corrected syntax errors in the sample code.</P>               </TD>            </TR></table><P><A HREF="#top">Back to top</A></P>         <a name="downloads"></a>         <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center>                                    <img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/dv_11.pdf">Download</A></P>               </TD>            </TR>         </TABLE>         <BR>                  <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/dv/dv_11.html%3Fid%3DDTS10002401-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/dv/dv_11.html%3Fid%3DDTS10002401-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/dv/dv_11.html%3Fid%3DDTS10002401-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --><hr width=500 align=center></BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><!-- <script language="JavaScript" src="frametest.js"></script> --><TITLE> Adding a Second Component</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!-- #include virtual="/techpubs/navbar" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b> Getting Started With WebObjects</font><br><br><!--end of path --><hr><DIV><a name="top"></a><A HREF="GettingStarted.15.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.1f.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.21.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr><HR></DIV><H1 CLASS="1Head"><A NAME="pgfId=7495"> </A>Adding a Second Component</H1><A NAME="pgfId=7565"> </A>In this section, you'll create a new component. Instead of Java, you'll implement its code using WebScript. This section demonstrates the quick turnaround between development cycles when using WebScript.</P><OL><LI><A NAME="pgfId=7562"> </A>In Project Builder's browser, click Web Components in the first column.<P><LI><A NAME="pgfId=9889"> </A>Choose File&nbsp;<IMG SRC="images/arrow.gif" ALIGN="BASELINE">&nbsp;New in Project.<P><A NAME="pgfId=9892"> </A>Note that the Web Components suitcase is selected.<P><LI><A NAME="pgfId=7570"> </A>Type <TT>GuestList</TT> as the name of the new component, then click OK<P><A NAME="pgfId=7574"> </A>The WebObjects Component Wizard appears. <P><LI><A NAME="pgfId=10266"> </A>Choose None for Available Assistance and WebScript for Component Language. <P><LI><A NAME="pgfId=11852"> </A>Click Finish.<P><LI><A NAME="pgfId=7576"> </A>In the second column of the browser, double-click <B>GuestList.wo</B> to bring up the component window in WebObjects Builder.<P><LI><A NAME="pgfId=8716"> </A>Create a heading for this page, as you did for the Main component. Call it &quot;Guest List&quot; (or something else of your choosing), then press Enter twice.<P><LI><A NAME="pgfId=7557"> </A>Add a WOString below the heading. After the WOString, type the text &quot;<TT> guests have signed this guestbook</TT>.&quot; Press Shift-Enter twice.<P><A NAME="pgfId=8721"> </A>You're going to bind this WOString so that it reflects the number of guests who have submitted this form.<P><LI><A NAME="pgfId=8022"> </A>In the object browser, click <B>application</B>. <P><A NAME="pgfId=8023"> </A>There is an entry in the second column for the <B>allGuests</B> application variable you created. This entry appears in the Main component as well, since application variables are accessible from anywhere in the code.<P><A NAME="pgfId=9945"> </A>If you click <B>allGuests</B>, you'll see in the third column an entry for <B>count</B>. This is a standard method that returns the number of objects in the array. <P><LI><A NAME="pgfId=8024"> </A>Make a connection from <B>count</B> to the center rectangle to bind it to the WOString's <B>value</B> attribute.<P><LI><A NAME="pgfId=13431"> </A>Save the GuestList component.<P><A NAME="pgfId=8730"> </A>You need to do one more thing so that the GuestList page now displays when the user submits the form.<P><LI><A NAME="pgfId=8731"> </A>Go back to Project Builder and view the source code for <B>Main.java</B>. Replace the <TT>return</TT> statement in the <B>submit</B> method with the following code:<P><TT><A NAME="pgfId=8750"> </A>	return pageWithName(&quot;GuestList&quot;);</TT></P><A NAME="pgfId=8755"> </A><B>pageWithName</B> is a standard WebObjects method (defined in the WOApplication class) that allows you to specify a new page to display. <P><A NAME="pgfId=11883"> </A>At this point, the code for <B>Main.java</B> looks like this:<P><TT><A NAME="pgfId=13268"> </A>	// Generated by the WebObjects Wizard ...</P><A NAME="pgfId=13269"> </A><P><A NAME="pgfId=13270"> </A>	import com.apple.yellow.foundation.*;<BR><A NAME="pgfId=13271"> </A>	import com.apple.yellow.webobjects.*;<BR><A NAME="pgfId=13272"> </A>	import com.apple.yellow.eocontrol.*;<BR><A NAME="pgfId=13273"> </A>	import com.apple.yellow.eoaccess.*;<BR><A NAME="pgfId=13274"> </A><BR><A NAME="pgfId=13293"> </A>	public class Main extends WOComponent {<BR><A NAME="pgfId=13294"> </A>&nbsp;&nbsp;&nbsp;protected Guest currentGuest;<BR><A NAME="pgfId=13295"> </A><BR><A NAME="pgfId=13296"> </A>&nbsp;&nbsp;&nbsp;public Main() {<BR><A NAME="pgfId=13297"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super();<BR><A NAME="pgfId=13298"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentGuest = new Guest();<BR><A NAME="pgfId=13299"> </A>&nbsp;&nbsp;&nbsp;}<BR><A NAME="pgfId=13300"> </A><BR><A NAME="pgfId=13301"> </A>&nbsp;&nbsp;&nbsp;public WOComponent submit() {<BR><A NAME="pgfId=13305"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((Application)application()).addGuest(currentGuest);<BR><A NAME="pgfId=13306"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentGuest = new Guest();<BR><A NAME="pgfId=13307"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return pageWithName(&quot;GuestList&quot;);<BR><A NAME="pgfId=13308"> </A>&nbsp;&nbsp;&nbsp;}</P><A NAME="pgfId=13309"> </A>	}</P></TT>		<LI><A NAME="pgfId=8045"> </A>Save <B>Main.java</B>.<P><LI><A NAME="pgfId=8770"> </A>Build and run your application.<P><A NAME="pgfId=8783"> </A>Each time you submit the form, the number of guests displayed in the WOString should increase.<P><A NAME="pgfId=11911"> </A>To return to the Main page, you'll have to use your browser's backtrack button. Later in the tutorial, you'll add a hyperlink to return to the Main page.<P></OL><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 24 Aug 99)<P><A HREF="GettingStarted.15.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.1f.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="GettingStarted.21.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
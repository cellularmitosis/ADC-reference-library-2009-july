<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> IOPreparationTable Options</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.149.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.14a.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.14c.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H3.Heading3"><A NAME="pgfId=3517"> </A><A NAME="35630"> </A>IOPreparationTable Options</H1><P CLASS="T1.Text1"><A NAME="pgfId=3518"> </A>This <TT CLASS="cv">options</TT> field of the <TT CLASS="cv">IOPreparationTable</TT> structure contains flags that have the following meanings:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=3519"> </A><TT CLASS="cv">kIOMultipleRanges</TT> specifies that the <TT CLASS="cv">rangeInfo</TT> field is to be interpreted as <TT CLASS="cv">MultipleAddressRange</TT>, enabling a scatter-gather memory specification.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3520"> </A><TT CLASS="cv">kIOLogicalRanges</TT> specifies that the base fields of the <TT CLASS="cv">AddressRange</TT> structures are logical addresses. If this option is omitted, the addresses are treated as physical addresses. Current versions of the Mac&nbsp;OS do not support specifying physical buffers, so the driver must always specify this option.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3521"> </A><TT CLASS="cv">kIOMinimalLogicalMapping</TT> specifies that the <TT CLASS="cv">LogicalMappingTable</TT> structure is to be filled in with just the first and last mappings of each range, arranged in pairs. Minimal logical mappings are discussed in <A HREF="PCI_BOOK.154.html#37753" CLASS="XRef">DMA Alignment Requirements</A>.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3525"> </A><TT CLASS="cv">kIOShareMappingTables</TT> specifies that the system can use the driver's mapping tables instead of maintaining its own copies of the tables. Sharing mapping tables is discussed in <A HREF="PCI_BOOK.152.html#13104" CLASS="XRef">Reducing Memory Usage</A>.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3529"> </A><TT CLASS="cv">kIOIsInput</TT> specifies that data will be moved into main memory.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3530"> </A><TT CLASS="cv">kIOIsOutput</TT> specifies that data will be moved out of main memory. </LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3531"> </A><TT CLASS="cv">kIOCoherentDataPath</TT> indicates that the data path that will be used to access memory during the I/O operation is fully coherent with the main processor's data caches, making data cache manipulations unnecessary. Memory coherency with the instruction cache is not implied, however, so the appropriate instruction cache manipulations are performed regardless. This option is useful when the overall hardware architecture is not coherent, but the driver knows that the transfer will occur on a particular hardware path that is coherent. (<TT CLASS="cv">PrepareMemoryForIO</TT> operates according to the overall architecture and has no implicit way of knowing about individual data paths.) When in doubt, omit this option. Incorrectly omitting it merely slows operation, whereas incorrectly specifying this option can result in erroneous behavior and crashes.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3532"> </A><TT CLASS="cv">kIOClientIsUserMode</TT> indicates that <TT CLASS="cv">PrepareMemoryForIO</TT> is being called on behalf of a nonprivileged client. If this option is specified, the memory ranges are checked for user-mode accessibility. If this option is omitted, the memory ranges are checked for privileged-level accessibility. Drivers can obtain the client's execution mode through the device's family programming interface (FPI). This option is not implemented in current versions of Mac&nbsp;OS. For compatibility with future Mac&nbsp;OS releases, drivers should omit it from the options. The FPI will perform the buffer access level checks on behalf of the driver.</LI></UL><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.149.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.14a.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.14c.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
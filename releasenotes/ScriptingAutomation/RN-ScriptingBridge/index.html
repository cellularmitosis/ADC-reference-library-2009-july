<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Scripting Bridge Release Note: Scripting Bridge Release Notes for Mac OS X v10.5</title>
	<meta name="Generator" content="Gutenberg"/>
	<meta name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta name = "Copyright" content="Copyright 2009 AppleInc. All Rights Reserved."/>
	<meta name="IndexTitle" content="Scripting Bridge Release Notes for Mac OS X v10.5"/>
	<meta name="xcode-display" content="render"/>
	<meta id="RESOURCES" content="../../../documentation/Resources" />
	<link rel="stylesheet" type="text/css" href="../../../documentation/Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../documentation/Resources/JavaScript/pedia.js"></script>
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40004741" title="Scripting Bridge Release Notes for Mac OS X v10.5"></a>
        <a name="top"></a>
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../index.html#//apple_ref/doc/uid/TP30000872-TP40005948" target="_top">Scripting &amp; Automation</a> &gt; <a href="../idxScriptingBridges-date.html#//apple_ref/doc/uid/TP30000872-TP40005948-TP40005950">Scripting Bridges</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
                
        
        <a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_9" title="Scripting Bridge Release Notes for Mac OS X v10.5"></a><h1>Scripting Bridge Release Notes for Mac OS X v10.5</h1><p>Scripting Bridge is a new technology that lets you control scriptable Apple and third-party applications using standard Objective-C syntax.</p><p>In the past, when you wanted your Cocoa application to control other scriptable applications, you had two main choices: you could write an AppleScript script to do the job and use Cocoa's <code>NSAppleScript</code> class to execute the script, or you could use <code>NSAppleEventDescriptor</code> to manually send and receive Apple events.</p><p>New in Leopard, the Scripting Bridge provides a straightforward model for control of applications, is up to 100 times faster than the traditional <code>NSAppleScript</code> solution and doesn't require detailed knowledge of the target application's Apple event model. In addition to directly controlling one Cocoa application from another, the Scripting Bridge provides a foundation for Ruby (via RubyCocoa) and Python (via PyObjC) to control applications, giving those scripting languages the same advantages enjoyed by AppleScript.</p>
<!-- This template is being used for both PDF and HTML. -->
<!-- TopicBook.pm currently relies on the element name bmini_toc. -->

    <h4>Contents:</h4>
    
    <p class="blockquote">

        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40004741-DontLinkElementID_1" target="_top">The Benefits of Scripting Bridge</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40004741-DontLinkElementID_2" target="_top">How Scripting Bridge Works</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40004741-DontLinkElementID_4" target="_top">Lazy Evaluation</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40004741-DontLinkElementID_7" target="_top">Automatic Application Launch</a>
                
            <br/>
            
        
			
            
                <a href="index.html#//apple_ref/doc/uid/TP40004741-DontLinkElementID_8" target="_top">Filtering Arrays</a>
                
            <br/>
            
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_1" title="The Benefits of Scripting Bridge"></a><h2>The Benefits of Scripting Bridge</h2><p>With Scripting Bridge, you can automatically build "glue" code that lets you access a particular scriptable application. You include the code in your application, then make standard Objective-C calls to perform the desired operations. If you are working with iTunes, for example, you can get the name of the current iTunes track with a simple line of code:</p><p><code>NSString *currentTrackName = [[iTunes currentTrack] name];</code></p><p>In addition to letting you work with Objective-C syntax, Scripting Bridge has these advantages:</p><ul class="ul"><li class="li"><p>It uses native Cocoa data types—<code>NSString</code>, <code>NSArray</code>, <code>NSURL</code>, and so on—so you'll never have to deal with less familiar Carbon types.</p></li><li class="li"><p>It uses standard Cocoa memory management, so you don't have to manually allocate and free space for Apple events.</p></li><li class="li"><p>It requires an order of magnitude less code than using <code>NSAppleEventDescriptor</code> or direct calls.</p></li><li class="li"><p>It checks for syntax errors at compile time, unlike <code>NSAppleScript</code>.</p></li><li class="li"><p>It gives your application access to any scriptable feature of any available scriptable application.</p></li><li class="li"><p>It runs more than twice as fast as a precompiled <code>NSAppleScript</code>, and up to 100x as fast as an uncompiled <code>NSAppleScript</code>.</p></li><li class="li"><p>It integrates seamlessly with existing Objective-C code.</p></li></ul><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_2" title="How Scripting Bridge Works"></a><h2>How Scripting Bridge Works</h2><p>Scripting Bridge is a system framework included with Mac OS X version 10.5 and later. It defines the following classes: <code>SBApplication</code> (an application your application can communicate with), <code>SBObject</code> (an object within an application—for example, an iTunes track), and <code>SBElementArray</code> (a collection of <code>SBObject</code> instances—for example, a collection of all tracks in iTunes)</p><p>With the exception of <code>SBElementArray</code>, you rarely deal with these classes directly. Instead, you deal with subclasses in the generated "glue" code. If you were controlling iTunes, for example, you'd use classes such as <code>iTunesApplication</code> (which inherits from <code>SBApplication</code>) and <code>iTunesTrack</code> (which inherits from <code>SBObject</code>).</p><p>However, it is important to note that the Scripting Bridge framework itself does not include these application-specific subclasses, but instead creates them at run time.</p><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_3" title="Generating &quot;Glue&quot; Code for Scripting Bridge"></a><h3>Generating "Glue" Code for Scripting Bridge</h3><p>To use Scripting Bridge, you use the <code>sdp</code> tool to generate headers based on the AppleScript dictionary of the application you want to control. For example, the following figure shows the dictionary for iTunes:</p><br/><div><img src = "Art/iTunes_sdef.jpg" alt = "AppleScript dictionary for iTunes" ></div><br/><p>The corresponding header file generated by <code>sdp</code> would thus look like this:</p><div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@interface iTunesApplication : SBApplication {<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre>- (void) fastForward;    // skip forward in a playing track<span></span></pre></td></tr><tr><td scope="row"><pre>- (void) nextTrack;        // advance to the next track in the current playlist<span></span></pre></td></tr><tr><td scope="row"><pre>- (void) pause;            // pause playback<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>To generate this glue code, you invoke the sdef and sdp tools in a command with the following format:</p><p><code>sdef </code> <em>pathToApplication</em><code> | sdp -fh --basename </code>  <em>applicationName</em></p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_10" title="Note"></a><p><strong>Note:</strong>&nbsp;There is both an <code>sdef</code> file format for scripting definitions, available since Mac OS X version 10.2, and an <code>sdef</code> tool, first available in Mac OS X v 10.5 (Leopard).</p></div><p>This command line uses <code>sdef</code> to get the scripting definition from the application; if the application does not contain an actual <code>sdef</code>, but does contain scripting information in either of the older 'aete' or Cocoa script suite formats, the tool translates that information into the <code>sdef</code> format.  The command pipes the output of the <code>sdef</code> tool to <code>sdp</code> to generate the corresponding header file. Here is a full command line for iTunes:</p><div class="codesample"><table><tr><td scope="row"><pre>sdef /Applications/iTunes.app | sdp -fh --basename iTunes<span></span></pre></td></tr></table></div><p>This command will produce a file <code>iTunes.h</code> in the current directory. Add this file to your Xcode project. Then, link your project with the Scripting Bridge framework: choose Add to Project from the Project menu, and navigate to <code>/System/Library/Frameworks/ScriptingBridge.framework.</code></p><p>Notice that you have only created a header for all the iTunes classes; your application does not contain implementations for any of them, because Scripting Bridge will create them on the fly.  To start communicating with iTunes, you must first tell Scripting Bridge to create the application class:</p><div class="codesample"><table><tr><td scope="row"><pre>iTunesApplication *iTunes = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"];<span></span></pre></td></tr></table></div><p>This locates the application by its bundle identifier, reads its scripting dictionary, and creates Objective-C classes for all the classes defined there.  It also creates an instance representing the application; you can communicate with iTunes by sending messages to the application object.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_11" title="Note"></a><p><strong>Note:</strong>&nbsp;You can generate similar glue code for TextEdit, Safari, iChat, all of the iLife applications, Adobe Photoshop, Microsoft Word, and many other popular applications. In fact, the only requirement for creating headers to control an application is that it the application have an AppleScript dictionary. (The caveat, of course, is that applications with poorly designed AppleScript dictionaries will have less useful Cocoa headers as well.)</p></div><p>When <code>sdp</code> generates header files, it automatically adds a comment to each method declaration, taken from the corresponding term in the application's AppleScript dictionary. For example, in the header file generated for the Finder, you'll find the following declaration in the FinderApplication class:</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)empty;   // Empty the trash<span></span></pre></td></tr></table></div><p>Application-specific classes make a point of returning data in a form that's useful to you. For example, the Finder's <code>startupDisk</code> method returns a FinderDisk object, and iTunes' <code>currentTrack</code> method returns an iTunesTrack object. When you ask an object for its name using the <code>name</code> method, you get the result back as an instance of <code>NSString</code>. Similarly, you get and set properties of an application the same way you do for instance variables inside your application: using methods such as <code>ignoresPrivileges</code> and <code>setIgnoresPrivileges:</code>. All of these features make it easier to incorporate Scripting Bridge code into your existing projects.</p><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_4" title="Lazy Evaluation"></a><h2>Lazy Evaluation</h2><p>Like AppleScript, Scripting Bridge uses Apple events to send and receive information from other applications. However, because sending Apple events can be expensive, Scripting Bridge is designed to avoid sending Apple events until absolutely necessary.</p><p>Scripting Bridge accomplishes this by the use of references. When you ask for an object from an application, what you actually get back is a reference to it; Scripting Bridge won't evaluate the reference until you need some concrete data from it. For example, Scripting Bridge won't send an Apple event when you ask for the first disk of the Finder, but it will send an event when you ask for the name of the first disk of the Finder. You can see this in action in the following code:</p><div class="codesample"><table><tr><td scope="row"><pre>// Get the shared FinderApplication instance<span></span></pre></td></tr><tr><td scope="row"><pre>FinderApplication *finder = [SBApplication applicationWithBundleIdentifier:@"com.apple.finder"];<span></span></pre></td></tr><tr><td scope="row"><pre>// Get a reference which represents every disk of the Finder (doesn't send an Apple event)<span></span></pre></td></tr><tr><td scope="row"><pre>SBElementArray *disks = [finder disks];<span></span></pre></td></tr><tr><td scope="row"><pre>// Get a reference to the first disk of the Finder (doesn't send an Apple event)<span></span></pre></td></tr><tr><td scope="row"><pre>FinderDisk *firstDisk = [disks objectAtIndex:0];<span></span></pre></td></tr><tr><td scope="row"><pre>// Evaluate the firstDisk reference by sending it an Apple Event requesting its name<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *name = [firstDisk name];<span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(name); // Log the name of the first disk<span></span></pre></td></tr></table></div><p>Most of the time, the fact that Scripting Bridge is lazy about evaluating statements won't make much difference to you. However, there are times when you have to be careful to ensure that you get the behavior you expect.</p><p>Say you were faced with the following code:</p><div class="codesample"><table><tr><td scope="row"><pre>// Get the shared iTunes instance<span></span></pre></td></tr><tr><td scope="row"><pre>iTunesApplication *iTunes = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"];<span></span></pre></td></tr><tr><td scope="row"><pre>// Get the current track<span></span></pre></td></tr><tr><td scope="row"><pre>iTunesTrack *current = [iTunes currentTrack];<span></span></pre></td></tr><tr><td scope="row"><pre>// Wait for 10 minutes<span></span></pre></td></tr><tr><td scope="row"><pre>sleep(600);<span></span></pre></td></tr><tr><td scope="row"><pre>//Print out the name of the current track<span></span></pre></td></tr><tr><td scope="row"><pre>NSLog([current name]);<span></span></pre></td></tr></table></div><p>At first glance, it might appear that this code will log the name of whatever track was playing 10 minutes ago when it gets to the bottom line. In fact, what will happen is that the code will log the name of whatever track is currently playing.</p><p>Why? Recall that Scripting Bridge deals merely with references to objects until you actually need some concrete data from them. So what <code>current</code> stores is a reference to whatever track is currently playing. This reference actually gets evaluated only when you call the <code>name</code> method, which happens 10 minutes later.</p><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_5" title="The get Method"></a><h3>The get Method</h3><p>But what if that's not what you want? What if you want to force the current reference to be evaluated as soon as it is created?</p><p>For that, you use the <code>get</code> method, which is declared by <code>SBObject</code>. In essence, the <code>get</code> method tells Scripting Bridge, "stop being lazy—I want you to evaluate this object now." The following code shows how to change result of the previous example by using <code>get</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>// Get the shared iTunes instance<span></span></pre></td></tr><tr><td scope="row"><pre>iTunesApplication *iTunes = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"];<span></span></pre></td></tr><tr><td scope="row"><pre>// Get a reference to the current track and force it to be evaluated<span></span></pre></td></tr><tr><td scope="row"><pre>iTunesTrack *theTrack = [[iTunes currentTrack] get];<span></span></pre></td></tr><tr><td scope="row"><pre>// Wait for 10 minutes<span></span></pre></td></tr><tr><td scope="row"><pre>sleep(600);<span></span></pre></td></tr><tr><td scope="row"><pre>//Print out the name of the track that was playing 10 minutes ago<span></span></pre></td></tr><tr><td scope="row"><pre>NSLog([theTrack name]);<span></span></pre></td></tr></table></div><p>Because this code uses the <code>get</code> method, <code>theTrack</code> will always hold a reference to the track that was playing when the <code>get</code> method executed.</p><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_6" title="Taking Full Advantage of Laziness"></a><h3>Taking Full Advantage of Laziness</h3><p>Although the lazy nature of Scripting Bridge may not always be what you want, it dramatically reduces the number of Apple events that need to be sent. This allows your application to run significantly faster.</p><p>If you're not careful about how you write your code, however, you may end up entirely bypassing Scripting Bridge's laziness, forcing it to send more Apple events than necessary. Here are several common errors</p><ul class="spaceabove"><li class="li"><p><strong>Using the </strong><code>get</code><strong> method when it isn't needed</strong>. Scripting Bridge is excellent at determining when it needs to send an Apple event to get information you want. When you write <code>[someObject name]</code>, for example, Scripting Bridge automatically sends an Apple event to determine the object's name. If you instead write <code>[[someObject get] name]</code>, you force Scripting Bridge to send two messages instead of one.</p></li><li class="li"><p><strong>Sending the same message multiple times</strong>. Every time you ask an object for a concrete property—such as its name—you force an Apple event to be sent. Thus, in the following example, up to three Apple events may be sent:</p><div class="codesample"><table><tr><td scope="row"><pre>FinderApplication *finder = [SBApplication applicationWithBundleIdentifier:@"com.apple.finder"];<span></span></pre></td></tr><tr><td scope="row"><pre>SBElementArray *disks = [finder disks];<span></span></pre></td></tr><tr><td scope="row"><pre>if ([[[disks objectAtIndex:0] name] isEqualToString:@"Macintosh HD"]) {<span></span></pre></td></tr><tr><td scope="row"><pre>    //First Apple event sent<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLog(@"The first disk's name is Macintosh HD");<span></span></pre></td></tr><tr><td scope="row"><pre>} else if ([[[disks objectAtIndex:0] name] isEqualToString:@"Disk 1"]) {<span></span></pre></td></tr><tr><td scope="row"><pre>    //If execution reaches here, second Apple event sent<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLog(@"The first disk's name is Disk 1");<span></span></pre></td></tr><tr><td scope="row"><pre>} else if ([[[disks objectAtIndex:0] name] isEqualToString:@"My Disk"]) {<span></span></pre></td></tr><tr><td scope="row"><pre>    //If execution reaches here, third Apple event sent<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLog(@"The first disk's name is My Disk");<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>To guarantee that only a single Apple event gets sent, make sure the <code>name</code> method is called only once:</p><div class="codesample"><table><tr><td scope="row"><pre>FinderApplication *finder = [SBApplication applicationWithBundleIdentifier:@"com.apple.finder"];<span></span></pre></td></tr><tr><td scope="row"><pre>SBElementArray *disks = [finder disks];<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *name = [[disks objectAtIndex:0] name]; //Single Apple event sent<span></span></pre></td></tr><tr><td scope="row"><pre>if ([name isEqualToString:@"Macintosh HD"]) { //No additional event sent<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLog(@"The first disk's name is Macintosh HD");<span></span></pre></td></tr><tr><td scope="row"><pre>} else if ([name isEqualToString:@"Disk 1"]) { //No additional event sent<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLog(@"The first disk's name is Disk 1");<span></span></pre></td></tr><tr><td scope="row"><pre>} else if ([name isEqualToString:@"My Disk"]) { //No additional event sent<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLog(@"The first disk's name is My Disk");<span></span></pre></td></tr></table></div></li><li class="li"><p><strong>Manually iterating through arrays</strong>. <code>SBElementArray</code> objects are lazy as well; they don't send any Apple events until absolutely necessary. When you manually iterate through an <code>SBElementArray</code> object, however, you force Scripting Bridge to send as many Apple events as there are items in your array. Take the following example, which makes a list of the name of every disk in the Finder:</p><div class="codesample"><table><tr><td scope="row"><pre>FinderApplication *finder = [SBApplication applicationWithBundleIdentifier:@"com.apple.finder"]; <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>SBElementArray *disks = [finder disks]; <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>NSEnumerator *e = [disks objectEnumerator]; <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>FinderDisk *currentDisk; <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>NSMutableArray *nameArray = [NSMutableArray arrayWithCapacity:[disks count]]; <span>// 5</span></pre></td></tr><tr><td scope="row"><pre>while ((currentDisk = [e nextObject]) != nil) { <span>// 6</span></pre></td></tr><tr><td scope="row"><pre>    [nameArray addObject:[currentDisk name]]; <span>// 7</span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(@"%@", nameArray);<span></span></pre></td></tr></table></div><p>This code is extremely inefficient. First, Scripting Bridge must send an Apple event at line 5 to count the number of disks. Then, each time through the <code>while</code> loop, it must send an additional Apple event to get the name of the current disk.</p><p>To avoid this inefficiency, <code>SBElementArray</code> provides an optimized <code>arrayByApplyingSelector:</code> method, which is guaranteed to send no more than one Apple event. That allows you to rewrite the previous sample as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>FinderApplication *finder = [SBApplication applicationWithBundleIdentifier:@"com.apple.finder"];<span></span></pre></td></tr><tr><td scope="row"><pre>SBElementArray *disks = [finder disks];<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *nameArray = [disks arrayByApplyingSelector:@selector(name)];<span></span></pre></td></tr><tr><td scope="row"><pre>NSLog(@"%@", nameArray);<span></span></pre></td></tr></table></div><p>This code sends only a single Apple event.</p></li></ul><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_7" title="Automatic Application Launch"></a><h2>Automatic Application Launch</h2><p>If an application isn't open when Scripting Bridge tries to send it an Apple event, Scripting Bridge will automatically launch it—which may come as a surprise to the users of your application. In addition, while the other application is launching, your application's execution will be blocked.</p><p>For these reasons, it is often a good idea to check whether an application is running before you try to communicate with it. Suppose you want to write a method that gets the name of the current track, but only if iTunes is running. You could do so with code like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSString *) nameOfCurrentTrack<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([iTunes isRunning]) { // Checks to see if iTunes is running BEFORE getting the name of the current track<span></span></pre></td></tr><tr><td scope="row"><pre>        return [[iTunes currentTrack] name];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return nil;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The <code>isRunning</code> method is defined for all instances of <code>SBApplication</code>.</p><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_8" title="Filtering Arrays"></a><h2>Filtering Arrays</h2><p>AppleScript has a particularly powerful operator—<code>whose</code>—that can filter a list of objects at once. For example, you could say:</p><div class="codesample"><table><tr><td scope="row"><pre>tell application "Finder" to get the name every disk whose name starts with "M"<span></span></pre></td></tr></table></div><p>With Scripting Bridge, you perform the same task with the <code>filteredArrayUsingPredicate:</code> method, which takes an <code>NSPredicate</code> object. So the line above could be written in Cocoa as:</p><div class="codesample"><table><tr><td scope="row"><pre>FinderApplication *finder = [SBApplication applicationWithBundleIdentifier:@"com.apple.finder"];<span></span></pre></td></tr><tr><td scope="row"><pre>    // Specify the criterion for inclusion in the array<span></span></pre></td></tr><tr><td scope="row"><pre>NSPredicate *startsWithM = [NSPredicate predicateWithFormat:@"name BEGINSWITH 'M'"];<span></span></pre></td></tr><tr><td scope="row"><pre>    // Filter the array<span></span></pre></td></tr><tr><td scope="row"><pre>SBElementArray *desiredDisks = [[finder disks] filteredArrayUsingPredicate:startsWithM];<span></span></pre></td></tr><tr><td scope="row"><pre>    // Get the name of every item in the filtered array<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *nameArray = [desiredDisks arrayByApplyingSelector:@selector(name)];<span></span></pre></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP40004741-DontLinkElementID_12" title="Note"></a><p><strong>Note:</strong>&nbsp; Like everything else in Scripting Bridge, the <code>filteredArrayUsingPredicate:</code> method is lazy—that is, it doesn't actually get the items in the filtered array until you explicitly ask for some property of them (such as their names). So in the code sample above, no Apple event is sent until the last line.</p></div>

        <br/><br/> 
        
        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/releasenotes/ScriptingAutomation/RN-ScriptingBridge/index.html%3Fid%3DTP40004741-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/releasenotes/ScriptingAutomation/RN-ScriptingBridge/index.html%3Fid%3DTP40004741-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/releasenotes/ScriptingAutomation/RN-ScriptingBridge/index.html%3Fid%3DTP40004741-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
</body>
</html>
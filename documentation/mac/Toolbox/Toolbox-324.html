<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>NewControl(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING324></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-323.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-325.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-297.html"><B>Chapter 5 - Control Manager</B></A> / <A HREF="Toolbox-315.html"><B>Control Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-321.html"><B>Control Manager Routines</B></A> / <A HREF="Toolbox-322.html"><B>Creating Controls</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING324-0></A>
<H3><A NAME=MARKER-9-382></A>NewControl</H3>
 <A NAME=MARKER-11-383></A><A NAME=MARKER-2-384></A>To create a control, you can use the <CODE>NewControl</CODE> function, which accepts in its parameters the information that describes the control. Generally, you should instead use the <CODE>GetNewControl</CODE> function to create a control. The <CODE>GetNewControl</CODE> function takes information about the control from a control resource, and as a result your application is easier to modify or translate into other languages.<P>
<PRE>
FUNCTION NewControl (theWindow: WindowPtr; boundsRect: Rect;
                     title: Str255; visible: Boolean; 
                     value: Integer; min: Integer; max: Integer;
                     procID: Integer; refCon: LongInt)
                     : ControlHandle;
</PRE>
<DL>
<DT><CODE>theWindow</CODE>
<DD> A pointer to the window in which you want to attach the control. All coordinates pertaining to the control are interpreted in this window's local coordinate system.<A NAME=MARKER-2-369></A>
<DT><CODE>boundsRect</CODE>
<DD> The rectangle, specified in the given window's local coordinates, that encloses the control and thus determines its size and location.<A NAME=MARKER-2-386></A>
<DT><CODE>title</CODE>
<DD> For controls that need a title--such as buttons, checkboxes, radio buttons, and pop-up menus--the string for that title. For controls that don't use titles, pass an empty string<DFN>.</DFN> 
<DT><CODE>visible</CODE>
<DD> The visible/invisible state for the control. If you pass <CODE>TRUE</CODE> in this parameter, <CODE>NewControl</CODE> draws the control immediately, without using your window's standard updating mechanism. If you pass <CODE>FALSE</CODE>, you must later use the <CODE>ShowControl</CODE> procedure to display the control.
<DT><CODE>value</CODE>
<DD> <A NAME=MARKER-2-389></A>The initial setting for the control. For controls--such as buttons--that don't retain a setting, pass 0 in this parameter. For controls--such as checkboxes and radio buttons--that retain an on-or-off setting, pass 0 in this parameter for a control that is off, and pass 1 for a control that is on. For controls--such as scroll bars and sliders--that can take a range of settings, specify whatever value is appropriate within that range.
<DT><CODE>min</CODE>
<DD> The minimum setting for the control. For controls--such as buttons--that don't retain a setting, pass 0 in this parameter. For controls--such as checkboxes and radio buttons--that retain an on-or-off setting, use 0 (meaning "off") for the minimum value. For controls--such as scroll bars and sliders--that can take a range of settings, specify whatever minimum value is appropriate.
<DT><CODE>max</CODE>
<DD> The maximum setting for the control. For controls--such as buttons--that don't retain a setting, pass 1 in this parameter. For controls--such as checkboxes and radio buttons--that retain an on-or-off setting, use 1 (meaning "on") for the maximum value. For controls--such as scroll bars and sliders--that can take a range of settings, specify whatever maximum value is appropriate. When you make the maximum setting of a scroll bar equal to its minimum setting, the control definition function automatically makes the scroll bar inactive; when you make the maximum setting exceed the minimum, the control definition function makes the scroll bar active again.<A NAME=MARKER-9-371></A>
<DT><CODE>procID</CODE>
<DD> <A NAME=MARKER-2-391></A>The control definition ID, which leads to the control definition function for this type of control. The control definition function is read into memory if it isn't already in memory. The control definition IDs and their constants for the standard controls are listed here. (You can also define your own control definition function and specify it the <CODE>procID</CODE> parameter.)
</DL>
<PRE>
         CONST
            pushButProc        = 0;     {button}
            checkBoxProc       = 1;     {checkbox}
            radioButProc       = 2;     {radio button}
            useWFont           = 8;     {add to above to display }
                                        { title in window font}
            scrollBarProc      = 16;    {scroll bar}
            popupMenuProc      = 1008;  {pop-up menu}
            popupFixedWidth    = $0001; {add to popupMenuProc to }
                                        { use a fixed-width ctrl}

            popupUseAddResMenu = $0004; {add to popupMenuProc to }
                                        { specify a value of }
                                        { type ResType in the }
                                        { contrlRfCon field of }
                                        { the control record; }
                                        { Menu Manager adds }
                                        { resources of this type }
                                        { to the menu}
            popupUseWFont      = $0008; {add to popupMenuProc to }
                                        { display in window font}
</PRE>
<DL>
<DT><CODE>refCon</CODE>
<DD> The control's reference value, which is set and used only by <BR>your application.
</DL>
<A NAME=HEADING324-13></A>
<H5>DESCRIPTION</H5>
 The <CODE>NewControl</CODE> function creates a control record from the information you specify in its parameters, adds the control record to the control list for the specified window, and returns as its function result a handle to the control. You use this handle when referring to the control in most other Control Manager routines.<P>
 The <CODE>NewControl</CODE> function creates an auxiliary control record that uses the default control color table if the computer is running in 32-bit mode. <P>
 If you need to use colors other than the default colors for the control, create a control color table record and use the <CODE>SetControlColor</CODE> procedure.<P>
 When specifying the rectangle in the <CODE>boundsRect</CODE> parameter, keep the following guidelines in mind:<P>
<UL>
<LI>Buttons are drawn to fit the rectangle exactly. To accommodate the tallest characters in the system font, allow at least a 20-point difference between the top and bottom coordinates of the rectangle.
<LI>For checkboxes and radio buttons, there should be at least a 16-point difference between the top and bottom coordinates.
<LI>By convention, scroll bars are 16 pixels wide, so there should be a 16-point difference between the left and right (or top and bottom) coordinates. (If there isn't, the scroll bar is scaled to fit the rectangle.) A standard scroll bar should be at least 48 pixels long, to allow room for the scroll arrows and scroll box.<P>
</UL>
 The Control Manager displays control titles in the system font. When specifying a title for the control in the <CODE>title</CODE> parameter, make sure the title fits in the control's rectangle; otherwise, <CODE>NewControl</CODE> truncates the title. For example, <CODE>NewControl</CODE> truncates the titles of checkboxes and radio buttons on the right in Roman scripts, and it centers and truncates both ends of the button titles.<P>
 The Control Manager allows multiple lines of text in the titles of buttons, checkboxes, and radio buttons. When specifying a multiple-line title, separate the lines with the ASCII character code $0D (carriage return). If the control is a button, each line is horizontally centered, and the font leading is inserted between lines. (The height of each line is equal to the distance from the ascent line to the descent line plus the leading of the font used. Be sure to make the total height of the rectangle greater than the number of lines times this height.) If the control is a checkbox or a radio button, the text is justified as appropriate for the user's current script system, and the checkbox or button is vertically centered within its rectangle.<P>
 After you use <CODE>NewControl</CODE> to create the control, you can change the current setting, <BR>the maximum setting, the minimum setting, the reference value, and the title by using, respectively, the <CODE>SetControlValue</CODE>, <CODE>SetControlMaximum</CODE>, <CODE>SetControlMinimum</CODE>, <CODE>SetControlReference</CODE>, and <CODE>SetControlTitle</CODE> procedures. You can use the <CODE>MoveControl</CODE> and <CODE>SizeControl</CODE> procedures to change the control's rectangle. You <BR>can use the <CODE>GetControlValue</CODE>, <CODE>GetControlMaximum</CODE>, <CODE>GetControlMinimum</CODE>, <CODE>GetControlReference</CODE>, and <CODE>GetControlTitle</CODE> functions to determine the <BR>control values.<P>
<A NAME=HEADING324-24></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 <A NAME=MARKER-9-373></A>The title of a button, checkbox, radio button, or pop-up menu normally appears in the system font, which in Roman script systems is 12-point Chicago. Do not use a smaller font; some script systems, such as KanjiTalk, require 12-point fonts. You should generally use the system font in your controls; doing so will simplify localization effort. However, if you absolutely need to display a control title in the font currently associated with the window's graphics port, you can add the <CODE>popupUseWFont</CODE> constant to the pop-up menu control definition ID or add the <CODE>useWFont</CODE> constant to the other standard control definition IDs.<P>
<A NAME=HEADING324-26></A>
<H5>SEE ALSO</H5>
 For information about windows' control lists, see the chapter "Window Manager" in <BR>this book. Control definition IDs for other controls are discussed in <A HREF=Toolbox-360.html#MARKER-9-553>"Defining Your Own Control Definition Function" beginning on page 5-102</A>. <A NAME=MARKER-2-396></A> <A NAME=MARKER-2-397></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-323.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-325.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

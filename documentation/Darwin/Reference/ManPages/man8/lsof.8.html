<html><head><title>Mac OS X
 Manual Page For lsof(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/lsof" title="Mac OS X
 Manual Page for lsof(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/lsof"; name=lsof(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
LSOF(8)                                                                                              LSOF(8)



<b>NAME</b>
       lsof - list open files

<b>SYNOPSIS</b>
       <b>lsof</b>  [  <b>-?abChlnNOPRstUvVX</b>  ] [ <b>-A</b> <u>A</u> ] [ <b>-c</b> <u>c</u> ] [ <b>+c</b> <u>c</u> ] [ <b>+|-d</b> <u>d</u> ] [ <b>+|-D</b> <u>D</u> ] [ <b>+|-f</b> <b>[cfgGn]</b> ] [ <b>-F</b>
       <u>[f]</u> ] [ <b>-g</b> <u>[s]</u> ] [ <b>-i</b> <u>[i]</u> ] [ <b>-k</b> <u>k</u> ] [ <b>+|-L</b> <u>[l]</u> ] [ <b>+|-m</b> <u>m</u> ] [ <b>+|-M</b> ] [ <b>-o</b> <u>[o]</u> ] [ <b>-p</b> <u>s</u> ] [ <b>+|-r</b>  <u>[t]</u>
       ] [ <b>-S</b> <u>[t]</u> ] [ <b>-T</b> <u>[t]</u> ] [ <b>-u</b> <u>s</u> ] [ <b>+|-w</b> ] [ <b>-x</b> <u>[fl]</u> ] [ <b>-z</b> <u>[z]</u> ] [ <b>-Z</b> <u>[Z]</u> ] [ <b>--</b> ] [<u>names</u>]

<b>DESCRIPTION</b>
       <u>Lsof</u> revision 4.78 lists information about files opened by processes for the following UNIX dialects:

            AIX 5.[12] and 5.3-ML1
            Apple Darwin 7.x and 8.x for Power Macintosh systems
            FreeBSD 4.9 for x86-based systems
            FreeBSD 7.0 for AMD64-based systems
            Linux 2.1.72 and above for x86-based systems
            NetBSD 1.[456], 2.x and 3.x for Alpha, x86, and SPARC-based
                systems
            NEXTSTEP 3.[13] for NEXTSTEP architectures
            SCO OpenServer Release 5.0.6 for x86-based systems
            Solaris 9 and 10

       (See the <b>DISTRIBUTION</b> section of this manual page for information on how to obtain  the  latest  <u>lsof</u>
       revision.)

       An  open  file may be a regular file, a directory, a block special file, a character special file, an
       executing text reference, a library, a stream or a network file (Internet socket, NFS  file  or  UNIX
       domain socket.)  A specific file or all the files in a file system may be selected by path.

       Instead  of  a formatted display, <u>lsof</u> will produce output that can be parsed by other programs.  See
       the <b>-F</b>, option description, and the <b>OUTPUT</b> <b>FOR</b> <b>OTHER</b> <b>PROGRAMS</b> section for more information.

       In addition to producing a single output list, <u>lsof</u> will run in repeat mode.  In repeat mode it  will
       produce  output, delay, then repeat the output operation until stopped with an interrupt or quit sig-<font color="#ffffff" class="whiteout">nal.&nbsp;signal.</font>
       nal.  See the <b>+|-r</b> <u>[t]</u> option description for more information.

<b>OPTIONS</b>
       In the absence of any options, <u>lsof</u> lists all open files belonging to all active processes.

       If any list request option is specified, other list requests must be specifically requested  -  e.g.,
       if  <b>-U</b> is specified for the listing of UNIX socket files, NFS files won't be listed unless <b>-N</b> is also
       specified; or if a user list is specified with the <b>-u</b> option, UNIX domain socket files, belonging  to
       users not in the list, won't be listed unless the <b>-U</b> option is also specified.

       Normally  list options that are specifically stated are ORed - i.e., specifying the <b>-i</b> option without
       an address and the <b>-u</b>foo option produces a listing of all network files OR files  belonging  to  pro-<font color="#ffffff" class="whiteout">cesses&nbsp;processes</font>
       cesses  owned  by  user  ``foo''.   Three  exceptions are: 1) the `^' (negated) login name or user ID
       (UID), specified with the <b>-u</b> option; 2) the `^' (negated) process ID (PID),  specified  with  the  <b>-p</b>
       option;  and  3) the `^' (negated) process group ID (PGID), specified with the <b>-g</b> option.  Since they
       represent exclusions, they are applied without ORing or ANDing  and  take  effect  before  any  other
       selection criteria are applied.

       The  <b>-a</b> option may be used to AND the selections.  For example, specifying <b>-a</b>, <b>-U</b>, and <b>-u</b>foo produces
       a listing of only UNIX socket files that belong to processes owned by user ``foo''.

       Caution: the <b>-a</b> option causes all list selection options to be ANDed; it can't be used to cause  AND-<font color="#ffffff" class="whiteout">ing&nbsp;ANDing</font>
       ing  of  selected  pairs  of  selection options by placing it between them, even though its placement
       there is acceptable.  Wherever <b>-a</b> is placed, it causes the ANDing of all selection options.

       Items of the same selection set - command names, file descriptors, network addresses, process identi-<font color="#ffffff" class="whiteout">fiers,&nbsp;identifiers,</font>
       fiers,  user identifiers, zone names, security contexts - are joined in a single ORed set and applied
       before the result participates in ANDing.  Thus, for example, specifying <b>-i</b>@aaa.bbb, <b>-i</b>@ccc.ddd,  <b>-a</b>,
       and  <b>-u</b>fff,ggg  will  select  the listing of files that belong to either login ``fff'' OR ``ggg'' AND
       have network connections to either host aaa.bbb OR ccc.ddd.

       Options may be grouped together following a single prefix -- e.g., the option set ``<b>-a</b> <b>-b</b> <b>-C</b>'' may be
       stated  as  <b>-abC</b>.  However, since values are optional following <b>+|-f</b>, <b>-F</b>, <b>-g</b>, <b>-i</b>, <b>+|-L</b>, <b>-o</b>, <b>+|-r</b>, <b>-S</b>,
       <b>-T</b>, <b>-x</b> and <b>-z</b>.  when you have no values for them  be  careful  that  the  following  character  isn't
       ambiguous.  For example, <b>-Fn</b> might represent the <b>-F</b> and <b>-n</b> options, or it might represent the <b>n</b> field
       identifier character following the <b>-F</b> option.  When ambiguity is possible, start a new option with  a
       `-'  character  -  e.g., ``<b>-F</b> <b>-n</b>''.  If the next option is a file name, follow the possibly ambiguous
       option with ``--'' - e.g., ``<b>-F</b> <b>--</b> <u>name</u>''.

       Either the `+' or the `-' prefix may be applied to a group of options.  Options that  don't  take  on
       separate  meanings  for each prefix - e.g., <b>-i</b> - may be grouped under either prefix.  Thus, for exam-<font color="#ffffff" class="whiteout">ple,&nbsp;example,</font>
       ple, ``+M -i'' may be stated as ``+Mi'' and the group means the same as  the  separate  options.   Be
       careful of prefix grouping when one or more options in the group does take on separate meanings under
       different prefixes - e.g., <b>+|-M</b>; ``-iM'' is not the same request as ``-i +M''.  When  in  doubt,  use
       separate options with appropriate prefixes.

       <b>-?</b> <b>-h</b>    These  two  equivalent options select a usage (help) output list.  <u>Lsof</u> displays a shortened
                form of this output when it detects an error in the options supplied to  it,  after  it  has
                displayed  messages  explaining  each  error.   (Escape  the  `?'  character  as  your shell
                requires.)

       <b>-a</b>       This option causes list selection options to be ANDed, as described above.

       <b>-A</b> <u>A</u>     This option is available on systems configured for AFS whose AFS kernel code is  implemented
                via  dynamic  modules.   It allows the <u>lsof</u> user to specify <u>A</u> as an alternate name list file
                where the kernel addresses of the dynamic modules might be found.  See the <u>lsof</u> FAQ (The <b>FAQ</b>
                section gives its location.)  for more information about dynamic modules, their symbols, and
                how they affect <u>lsof</u>.

       <b>-b</b>       This option causes <u>lsof</u> to avoid kernel functions that might block - <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a>,  <a href="../man2/readlink.2.html#//apple_ref/doc/man/2/readlink"><u>readlink</u>(2)</a>,
                and <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a>.

                See  the  <b>BLOCKS</b>  <b>AND</b>  <b>TIMEOUTS</b> and <b>AVOIDING</b> <b>KERNEL</b> <b>BLOCKS</b> sections for information on using
                this option.

       <b>-c</b> <u>c</u>     This option selects the listing of files for processes executing  the  command  that  begins
                with  the  characters  of <u>c</u>.  Multiple commands may be specified, using multiple <b>-c</b> options.
                They are joined in a single ORed set before participating in AND option selection.

                If <u>c</u> begins and ends with a slash ('/'), the characters between the slashes are  interpreted
                as  a regular expression.  Shell meta-characters in the regular expression must be quoted to
                prevent their interpretation by the shell.  The closing slash may be followed by these modi-<font color="#ffffff" class="whiteout">fiers:&nbsp;modifiers:</font>
                fiers:

                     b    the regular expression is a basic one.
                     i    ignore the case of letters.
                     x    the regular expression is an extended one
                          (default).

                See  the  <u>lsof</u>  FAQ (The <b>FAQ</b> section gives its location.)  for more information on basic and
                extended regular expressions.

                The simple command specification is tested first.  If that test fails, the  command  regular
                expression  is applied.  If the simple command test succeeds, the command regular expression
                test isn't made.  This may result in ``no command found for regex:'' messages when lsof's <b>-V</b>
                option is specified.

       <b>+c</b> <u>w</u>     This  option  defines  the maximum number of initial characters of the name, supplied by the
                UNIX dialect, of the UNIX command associated with a process to be  printed  in  the  COMMAND
                column.  (The <u>lsof</u> default is nine.)

                Note  that many UNIX dialects do not supply all command name characters to <u>lsof</u> in the files
                and structures from which <u>lsof</u> obtains command name.  Often dialects  limit  the  number  of
                characters  supplied  in  those sources.  For example, Linux 2.4.27 and Solaris 9 both limit
                command name length to 16 characters.

                If <u>w</u> is zero ('0'), all command characters supplied to <u>lsof</u> by  the  UNIX  dialect  will  be
                printed.

                If  <u>w</u>  is  less  than the length of the column title, ``COMMAND'', it will be raised to that
                length.

       <b>-C</b>       This option disables the reporting of any path name components from the kernel's name cache.
                See the <b>KERNEL</b> <b>NAME</b> <b>CACHE</b> section for more information.

       <b>+d</b> <u>s</u>     This  option  causes  <u>lsof</u> to search for all open instances of directory <u>s</u> and the files and
                directories it contains at its top level.  This option does NOT descend the directory  tree,
                rooted  at  <u>s</u>.  The <b>+D</b> <u>D</u> option may be used to request a full-descent directory tree search,
                rooted at directory <u>D</u>.

                Processing of the <b>+d</b> option does not follow symbolic links within <u>s</u> unless the <b>-x</b> or  <b>-x</b>   <b>l</b>
                option  is also specified.  Nor does it search for open files on file system mount points on
                subdirectories of <u>s</u> unless the <b>-x</b> or <b>-x</b>  <b>f</b> option is also specified.

                Note: the authority of the user of this option limits it to searching  for  files  that  the
                user has permission to examine with the system <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> function.

       <b>-d</b> <u>s</u>     This  option  specifies  a  list of file descriptors (FDs) to exclude from or include in the
                output listing.  The file descriptors are specified in the comma-separated  set  <u>s</u>  -  e.g.,
                ``cwd,1,3'', ``^6,^2''.  (There should be no spaces in the set.)

                The  list is an exclusion list if all entries of the set begin with '^'.  It is an inclusion
                list if no entry begins with '^'.  Mixed lists are not permitted.

                A file descriptor number range may be in the set as long as neither member  is  empty,  both
                members  are  numbers, and the ending member is larger than the starting one - e.g., ``0-7''
                or ``3-10''.  Ranges may be specified for exclusion if they have  the  '^'  prefix  -  e.g.,
                ``^0-7'' excludes all file descriptors 0 through 7.

                Multiple file descriptor numbers are joined in a single ORed set before participating in AND
                option selection.

                When there are exclusion and inclusion members in the set, <u>lsof</u> reports them as  errors  and
                exits with a non-zero return code.

                See  the  description  of  File Descriptor (FD) output values in the <b>OUTPUT</b> section for more
                information on file descriptor names.

       <b>+D</b> <u>D</u>     This option causes <u>lsof</u> to search for all open instances of directory <u>D</u> and  all  the  files
                and directories it contains to its complete depth.

                Processing  of  the <b>+D</b> option does not follow symbolic links within <u>D</u> unless the <b>-x</b> or <b>-x</b>  <b>l</b>
                option is also specified.  Nor does it search for open files on file system mount points  on
                subdirectories of <u>D</u> unless the <b>-x</b> or <b>-x</b>  <b>f</b> option is also specified.

                Note:  the  authority  of  the user of this option limits it to searching for files that the
                user has permission to examine with the system <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> function.

                Further note: <u>lsof</u> may process this option slowly and require a large amount of dynamic mem-<font color="#ffffff" class="whiteout">ory&nbsp;memory</font>
                ory to do it.  This is because it must descend the entire directory tree, rooted at <u>D</u>, call-<font color="#ffffff" class="whiteout">ing&nbsp;calling</font>
                ing <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> for each file and directory, building a list of all  the  files  it  finds,  and
                searching  that  list  for  a  match with every open file.  When directory <u>D</u> is large, these
                steps can take a long time, so use this option prudently.

       <b>-D</b> <u>D</u>     This option directs <u>lsof's</u> use of the device cache file.  The use of this  option  is  some-<font color="#ffffff" class="whiteout">times&nbsp;sometimes</font>
                times  restricted.   See  the  <b>DEVICE</b> <b>CACHE</b> <b>FILE</b> section and the sections that follow it for
                more information on this option.

                <b>-D</b> must be followed by a function letter; the function letter may optionally be followed  by
                a path name.  <u>Lsof</u> recognizes these function letters:

                     <b>?</b> - report device cache file paths
                     <b>b</b> - build the device cache file
                     <b>i</b> - ignore the device cache file
                     <b>r</b> - read the device cache file
                     <b>u</b> - read and update the device cache file

                The <b>b</b>, <b>r</b>, and <b>u</b> functions, accompanied by a path name, are sometimes restricted.  When these
                functions are restricted, they will not appear in the description  of  the  <b>-D</b>  option  that
                accompanies  <b>-h</b>  or  <b>-?</b>   option output.  See the <b>DEVICE</b> <b>CACHE</b> <b>FILE</b> section and the sections
                that follow it for more information on these functions and when they're restricted.

                The <b>?</b>  function reports the read-only and write paths that lsof can use for the device cache
                file, the names of any environment variables whose values <u>lsof</u> will examine when forming the
                device cache file path, and the format for the personal device cache file path.  (Escape the
                `?' character as your shell requires.)

                When  available,  the <b>b</b>, <b>r</b>, and <b>u</b> functions may be followed by the device cache file's path.
                The standard default is <u>.lsof</u><b>_</b><u>hostname</u> in the home directory of the real user ID  that  exe-<font color="#ffffff" class="whiteout">cutes&nbsp;executes</font>
                cutes  <u>lsof</u>,  but  this could have been changed when <u>lsof</u> was configured and compiled.  (The
                output of the <b>-h</b> and <b>-?</b>  options show the current default prefix -  e.g.,  ``.lsof''.)   The
                suffix, <u>hostname</u>, is the first component of the host's name returned by <!-- a --><u>gethostname</u>(2)<!-- /a --><u>.</u>

                When  available, the <b>b</b> function directs <u>lsof</u> to build a new device cache file at the default
                or specified path.

                The <b>i</b> function directs <u>lsof</u> to ignore the default device cache file and obtain its  informa-<font color="#ffffff" class="whiteout">tion&nbsp;information</font>
                tion about devices via direct calls to the kernel.

                The  <b>r</b>  function directs <u>lsof</u> to read the device cache at the default or specified path, but
                prevents it from creating a new device cache file when none exists or the  existing  one  is
                improperly  structured.   The  <b>r</b> function, when specified without a path name, prevents <u>lsof</u>
                from updating an incorrect or outdated device cache file, or  creating  a  new  one  in  its
                place.   The  <b>r</b>  function is always available when it is specified without a path name argu-<font color="#ffffff" class="whiteout">ment;&nbsp;argument;</font>
                ment; it may be restricted by the permissions of the <u>lsof</u> process.

                When available, the <b>u</b> function directs <u>lsof</u> to read the device cache file at the default  or
                specified  path,  if  possible, and to rebuild it, if necessary.  This is the default device
                cache file function when no <b>-D</b> option has been specified.

       <b>+|-f</b> <b>[cfgGn]</b>
                <b>f</b> by itself clarifies how path name arguments are to be interpreted.  When followed by <b>c</b>, <b>f</b>,
                <b>g</b>,  <b>G</b>, or <b>n</b> in any combination it specifies that the listing of kernel file structure infor-<font color="#ffffff" class="whiteout">mation&nbsp;information</font>
                mation is to be enabled (`+') or inhibited (`-').

                Normally a path name argument is taken to be a file system name if it matches  a  mounted-on
                directory  name reported by <a href="mount.8.html#//apple_ref/doc/man/8/mount"><u>mount</u>(8)</a>, or if it represents a block device, named in the <u>mount</u>
                output and associated with a mounted directory name.  When <b>+f</b> is specified,  all  path  name
                arguments  will  be  taken  to  be file system names, and <u>lsof</u> will complain if any are not.
                This can be useful, for example, when the file system name (mounted-on device) isn't a block
                device.  This happens for some CD-ROM file systems.

                When  <b>-f</b>  is  specified by itself, all path name arguments will be taken to be simple files.
                Thus, for example, the ``<b>-f</b> -- /'' arguments direct lsof to search for open files with a `/'
                path name, not all open files in the `/' (root) file system.

                Be careful to make sure <b>+f</b> and <b>-f</b> are properly terminated and aren't followed by a character
                (e.g., of the file or file system name) that might be taken as a  parameter.   For  example,
                use ``--'' after <b>+f</b> and <b>-f</b> as in these examples.

                     $ lsof +f -- /file/system/name
                     $ lsof -f -- /file/name

                The listing of information from kernel file structures, requested with the <b>+f</b> <b>[cfgGn]</b> option
                form, is normally inhibited, and is not available for  some  dialects  -  e.g.,  /proc-based
                Linux.   When  the prefix to <b>f</b> is a plus sign (`+'), these characters request file structure
                information:

                     <b>c</b>    file structure use count
                     <b>f</b>    file structure address
                     <b>g</b>    file flag abbreviations
                     <b>G</b>    file flags in hexadecimal
                     <b>n</b>    file structure node address

                When the prefix is minus (`-') the same characters disable the listing of the indicated val-<font color="#ffffff" class="whiteout">ues.&nbsp;values.</font>
                ues.

                File  structure  addresses, use counts, flags, and node addresses may be used to detect more
                readily identical files inherited by child processes and identical files in use by different
                processes.  <u>Lsof</u> column output can be sorted by output columns holding the values and listed
                to identify identical file use, or <u>lsof</u> field output  can  be  parsed  by  an  AWK  or  Perl
                post-filter script, or by a C program.

       <b>-F</b> <u>f</u>     This option specifies a character list, <u>f</u>, that selects the fields to be output for process-<font color="#ffffff" class="whiteout">ing&nbsp;processing</font>
                ing by another program, and the character that terminates each output field.  Each field  to
                be  output  is specified with a single character in <u>f</u>.  The field terminator defaults to NL,
                but may be changed to NUL (000).  See the <b>OUTPUT</b> <b>FOR</b> <b>OTHER</b> <b>PROGRAMS</b> section for  a  descrip-<font color="#ffffff" class="whiteout">tion&nbsp;description</font>
                tion of the field identification characters and the field output process.

                When  the  field selection character list is empty, all standard fields are selected (except
                the raw device field, security context and zone field for compatibility reasons) and the  NL
                field terminator is used.

                When  the field selection character list contains only a zero (`0'), all fields are selected
                (except the raw device field for compatibility reasons) and the NUL terminator character  is
                used.

                Other  combinations  of  fields  and their associated field terminator character must be set
                with explicit entries in <u>f</u>, as described in the <b>OUTPUT</b> <b>FOR</b> <b>OTHER</b> <b>PROGRAMS</b> section.

                When a field selection character identifies an item <u>lsof</u> does  not  normally  list  -  e.g.,
                PPID, selected with <b>-R</b> - specification of the field character - e.g., ``<b>-FR</b>'' - also selects
                the listing of the item.

                When the field selection character list contains the single character `?', <u>lsof</u> will display
                a help list of the field identification characters.  (Escape the `?' character as your shell
                requires.)

       <b>-g</b> <u>[s]</u>   This option excludes or selects the listing  of  files  for  the  processes  whose  optional
                process group IDentification (PGID) numbers are in the comma-separated set <u>s</u> - e.g., ``123''
                or ``123,^456''.  (There should be no spaces in the set.)

                PGID numbers that begin with `^' (negation) represent exclusions.

                Multiple PGID numbers are joined in a single ORed set before  participating  in  AND  option
                selection.   However,  PGID  exclusions  are applied without ORing or ANDing and take effect
                before other selection criteria are applied.

                The <b>-g</b> option also enables the output display of PGID numbers.   When  specified  without  a
                PGID set that's all it does.

       <b>-i</b> <u>[i]</u>   This  option  selects the listing of files any of whose Internet address matches the address
                specified in <u>i</u>.  If no address is specified, this option selects the listing of all Internet
                and x.25 (HP-UX) network files.

                If  <b>-i</b><u>4</u>  or  <b>-i</b><u>6</u> is specified with no following address, only files of the indicated IP ver-<font color="#ffffff" class="whiteout">sion,&nbsp;version,</font>
                sion, IPv4 or IPv6, are displayed.  (An IPv6 specification may be used only if the  dialects
                supports  IPv6,  as  indicated  by  ``[46]''  and  ``IPv[46]''  in <u>lsof's</u> <b>-h</b> or <b>-?</b>  output.)
                Sequentially specifying <b>-i</b>4, followed by <b>-i</b>6 is the same as specifying <b>-i</b>,  and  vice-versa.
                Specifying <b>-i</b>4, or <b>-i</b>6 after <b>-i</b> is the same as specifying <b>-i</b>4 or <b>-i</b>6 by itself.

                Multiple  addresses  (up  to  a limit of 100) may be specified with multiple <b>-i</b> options.  (A
                port number or service name range is counted as one address.)  They are joined in  a  single
                ORed set before participating in AND option selection.

                An Internet address is specified in the form (Items in square brackets are optional.):

                [<u>46</u>][<u>protocol</u>][@<u>hostname</u>|<u>hostaddr</u>][:<u>service</u>|<u>port</u>]

                where:
                     <u>46</u> specifies the IP version, IPv4 or IPv6
                          that applies to the following address.
                          '6' may be be specified only if the UNIX
                          dialect supports IPv6.  If neither '4' nor
                          '6' is specified, the following address
                          applies to all IP versions.
                     <u>protocol</u> is a protocol name - <b>TCP</b> or <b>UDP</b>.
                     <u>hostname</u> is an Internet host name.  Unless a
                          specific IP version is specified, open
                          network files associated with host names
                          of all versions will be selected.
                     <u>hostaddr</u> is a numeric Internet IPv4 address in
                          dot form; or an IPv6 numeric address in
                          colon form, enclosed in brackets, if the
                          UNIX dialect supports IPv6.  When an IP
                          version is selected, only its numeric
                          addresses may be specified.
                     <u>service</u> is an <u>/etc/services</u> name - e.g., <b>smtp</b> -<font color="#ffffff" class="whiteout">or&nbsp;smtpor</font>
                          or a list of them.
                     <u>port</u> is a port number, or a list of them.

                IPv6 options may be used only if the UNIX dialect supports IPv6.  To see if the dialect sup-<font color="#ffffff" class="whiteout">ports&nbsp;supports</font>
                ports IPv6, run <u>lsof</u> and specify the <b>-h</b> or <b>-?</b>  (help) option.  If the displayed  description
                of the <b>-i</b> option contains ``[46]'' and ``IPv[46]'', IPv6 is supported.

                IPv4  host  names and addresses may not be specified if network file selection is limited to
                IPv6 with <b>-i</b> 6.  IPv6 host names and addresses may not be specified if network  file  selec-<font color="#ffffff" class="whiteout">tion&nbsp;selection</font>
                tion is limited to IPv4 with <b>-i</b> 4.  When an open IPv4 network file's address is mapped in an
                IPv6 address, the open file's type will be IPv6, not IPv4, and its display will be  selected
                by '6', not '4'.

                At  least one address component - <b>4,</b> <b>6,</b> <u>protocol</u>, ,IR hostname , <u>hostaddr</u>, or <u>service</u> - must
                be supplied.  The `@' character, leading the host specification, is always required;  as  is
                the  `:',  leading  the  port  specification.  Specify either <u>hostname</u> or <u>hostaddr</u>.  Specify
                either <u>service</u> name list or <u>port</u> number list.  If a <u>service</u> name list is specified, the <u>pro</u>-<font color="#ffffff" class="whiteout">tocol&nbsp;protocol</font>
                <u>tocol</u> may also need to be specified if the TCP and UDP port numbers for the service name are
                different.  Use any case - lower or upper - for <u>protocol</u>.

                <u>Service</u> names and <u>port</u> numbers may be combined in a list whose entries are separated by com-<font color="#ffffff" class="whiteout">mas&nbsp;commas</font>
                mas  and whose numeric range entries are separated by minus signs.  There may be no embedded
                spaces, and all service names must belong to the specified <u>protocol</u>.   Since  service  names
                may  contain embedded minus signs, the starting entry of a range can't be a service name; it
                can be a port number, however.

                Here are some sample addresses:

                     -i6 - IPv6 only
                     TCP:25 - TCP and port 25
                     @1.2.3.4 - Internet IPv4 host address 1.2.3.4
                     @[3ffe:1ebc::1]:1234 - Internet IPv6 host address
                          3ffe:1ebc::1, port 1234
                     UDP:who - UDP who service port
                     TCP@lsof.itap:513 - TCP, port 513 and host name lsof.itap
                     tcp@foo:1-10,smtp,99 - TCP, ports 1 through 10,
                          service name <u>smtp</u>, port 99, host name foo
                     tcp@bar:1-smtp - TCP, ports 1 through <u>smtp</u>, host bar
                     :time - either TCP or UDP time service port

       <b>-k</b> <u>k</u>     This option specifies a kernel name list file, <u>k</u>, in place of  /vmunix,  /mach,  etc.   This
                option is not available under AIX on the IBM RISC/System 6000.

       <b>-l</b>       This  option  inhibits  the conversion of user ID numbers to login names.  It is also useful
                when login name lookup is working improperly or slowly.

       <b>+|-L</b> <u>[l]</u> This option enables (`+') or disables (`-') the listing of file link counts, where they  are
                available - e.g., they aren't available for sockets, or most FIFOs and pipes.

                When <b>+L</b> is specified without a following number, all link counts will be listed.  When <b>-L</b> is
                specified (the default), no link counts will be listed.

                When <b>+L</b> is followed by a number, only files having a link count less than that  number  will
                be listed.  (No number may follow <b>-L</b>.)  A specification of the form ``<b>+L1</b>'' will select open
                files that have been unlinked.  A specification  of  the  form  ``<b>+aL1</b> <u>&lt;file</u><b>_</b><u>system&gt;</u>''  will
                select unlinked open files on the specified file system.

                For other link count comparisons, use field output (<b>-F</b>) and a post-processing script or pro-<font color="#ffffff" class="whiteout">gram.&nbsp;program.</font>
                gram.

       <b>+|-m</b> <u>m</u>   This option specifies an alternate kernel memory file or activates  mount  table  supplement
                processing.

                The  option form <b>-m</b> <u>m</u> specifies a kernel memory file, <u>m</u>, in place of <u>/dev/kmem</u> or <u>/dev/mem</u> -<font color="#ffffff" class="whiteout">e.g.,&nbsp;/dev/meme.g.,</font>
                e.g., a crash dump file.

                The option form <b>+m</b> requests that a mount supplement file be written to the  standard  output
                file.  All other options are silently ignored.

                There  will  be a line in the mount supplement file for each mounted file system, containing
                the mounted file system directory, followed by a single space, followed by the device number
                in hexadecimal "0x" format - e.g.,

                     / 0x801

                <u>Lsof</u>  can use the mount supplement file to get device numbers for file systems when it can't
                get them via <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> or <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a>.

                The option form <b>+m</b> <u>m</u> identifies <u>m</u> as a mount supplement file.

                Note: the <b>+m</b> and <b>+m</b> <u>m</u> options are not available for all supported dialects.  Check the  out-<font color="#ffffff" class="whiteout">put&nbsp;output</font>
                put of <u>lsof's</u> <b>-h</b> or <b>-?</b>  options to see if the <b>+m</b> and <b>+m</b> <u>m</u> options are available.

       <b>+|-M</b>     Enables  (<b>+</b>) or disables (<b>-</b>) the reporting of portmapper registrations for local TCP and UDP
                ports.  The default reporting mode is set  by  the  <u>lsof</u>  builder  with  the  HASPMAPENABLED
                #define  in the dialect's machine.h header file; <u>lsof</u> is distributed with the HASPMAPENABLED
                #define deactivated, so portmapper reporting is disabled by default and  must  be  requested
                with  <b>+M</b>.   Specifying  <u>lsof's</u>  <b>-h</b>  or  <b>-?</b>   option will report the default mode.  Disabling
                portmapper registration when it is already disabled or enabling it when already  enabled  is
                acceptable.

                When portmapper registration reporting is enabled, <u>lsof</u> displays the portmapper registration
                (if any) for local TCP or UDP ports in square brackets immediately following the  port  num-<font color="#ffffff" class="whiteout">bers&nbsp;numbers</font>
                bers or service names - e.g., ``:1234[name]'' or ``:name[100083]''.  The registration infor-<font color="#ffffff" class="whiteout">mation&nbsp;information</font>
                mation may be a name or number, depending on what the registering program  supplied  to  the
                portmapper when it registered the port.

                When portmapper registration reporting is enabled, <u>lsof</u> may run a little more slowly or even
                become blocked when access to the portmapper becomes  congested  or  stopped.   Reverse  the
                reporting  mode  to  determine  if  portmapper registration reporting is slowing or blocking
                <u>lsof</u>.

                For purposes of portmapper registration reporting <u>lsof</u> considers a TCP or UDP port local if:
                it is found in the local part of its containing kernel structure; or if it is located in the
                foreign part of its containing kernel structure and the local and foreign Internet addresses
                are the same; or if it is located in the foreign part of its containing kernel structure and
                the foreign Internet address is INADDR_LOOPBACK (127.0.0.1).  This rule may make <u>lsof</u> ignore
                some foreign ports on machines with multiple interfaces when the foreign Internet address is
                on a different interface from the local one.

                See the <u>lsof</u> FAQ (The <b>FAQ</b> section gives its location.)  for further discussion of portmapper
                registration reporting issues.

       <b>-n</b>       This  option  inhibits  the  conversion  of network numbers to host names for network files.
                Inhibiting conversion may make <u>lsof</u> run faster.  It is also useful when host name lookup  is
                not working properly.

       <b>-N</b>       This option selects the listing of NFS files.

       <b>-o</b>       This option directs <u>lsof</u> to display file offset at all times.  It causes the SIZE/OFF output
                column title to be changed to OFFSET.  Note: on some UNIX dialects <u>lsof</u> can't  obtain  accu-<font color="#ffffff" class="whiteout">rate&nbsp;accurate</font>
                rate  or consistent file offset information from its kernel data sources, sometimes just for
                particular kinds of files (e.g., socket files.)  Consult the <u>lsof</u> FAQ (The <b>FAQ</b> section gives
                its location.)  for more information.

                The <b>-o</b> and <b>-s</b> options are mutually exclusive; they can't both be specified.  When neither is
                specified, <u>lsof</u> displays whatever value - size or offset - is appropriate and available  for
                the type of the file.

       <b>-o</b> <u>o</u>     This  option  defines  the number of decimal digits (<u>o</u>) to be printed after the ``0t'' for a
                file offset before the form is switched to  ``0x...''.   An  <u>o</u>  value  of  zero  (unlimited)
                directs <u>lsof</u> to use the ``0t'' form for all offset output.

                This  option  does  NOT  direct  <u>lsof</u>  to display offset at all times; specify <b>-o</b> (without a
                trailing number) to do that.  This option only specifies the number of digits  after  ``0t''
                in either mixed size and offset or offset-only output.  Thus, for example, to direct <u>lsof</u> to
                display offset at all times with a decimal digit count of 10, use:

                     -o -o 10
                or
                     -oo10

                The default number of digits allowed after ``0t'' is normally 8, but may have  been  changed
                by  the lsof builder.  Consult the description of the <b>-o</b> <u>o</u> option in the output of the <b>-h</b> or
                <b>-?</b>  option to determine the default that is in effect.

       <b>-O</b>       This option directs <u>lsof</u> to bypass the strategy it uses to avoid being blocked by some  ker-<font color="#ffffff" class="whiteout">nel&nbsp;kernel</font>
                nel  operations  -  i.e., doing them in forked child processes.  See the <b>BLOCKS</b> <b>AND</b> <b>TIMEOUTS</b>
                and <b>AVOIDING</b> <b>KERNEL</b> <b>BLOCKS</b> sections for more information on kernel operations that may block
                <u>lsof</u>.

                While  use  of this option will reduce <u>lsof</u> startup overhead, it may also cause <u>lsof</u> to hang
                when the kernel doesn't respond to a function.  Use this option cautiously.

       <b>-p</b> <u>s</u>     This option excludes or selects the listing  of  files  for  the  processes  whose  optional
                process  IDentification  (PID)  numbers  are in the comma-separated set <u>s</u> - e.g., ``123'' or
                ``123,^456''.  (There should be no spaces in the set.)

                PID numbers that begin with `^' (negation) represent exclusions.

                Multiple process ID numbers are joined in a single ORed  set  before  participating  in  AND
                option  selection.   However,  PID  exclusions  are applied without ORing or ANDing and take
                effect before other selection criteria are applied.

       <b>-P</b>       This option inhibits the conversion of  port  numbers  to  port  names  for  network  files.
                Inhibiting  the  conversion  may make <u>lsof</u> run a little faster.  It is also useful when port
                name lookup is not working properly.

       <b>+|-r</b> <u>[t]</u> This option puts <u>lsof</u> in repeat mode.  There <u>lsof</u> lists open  files  as  selected  by  other
                options,  delays <u>t</u> seconds (default fifteen), then repeats the listing, delaying and listing
                repetitively until stopped by a condition defined by the prefix to the option.

                If the prefix is a `-', repeat mode is endless.  <u>Lsof</u> must be terminated with  an  interrupt
                or quit signal.

                If the prefix is `+', repeat mode will end the first cycle no open files are listed - and of
                course when <u>lsof</u> is stopped with an interrupt or quit signal.  When repeat mode ends because
                no  files are listed, the process exit code will be zero if any open files were ever listed;
                one, if none were ever listed.

                <u>Lsof</u> marks the end of each listing: if field output is in progress (the <b>-F</b>, option has  been
                specified), the marker is `m'; otherwise the marker is ``========''.  The marker is followed
                by a NL character.

                Repeat mode reduces <u>lsof</u> startup overhead, so it is more efficient to use this mode than  to
                call <u>lsof</u> repetitively from a shell script, for example.

                To  use repeat mode most efficiently, accompany <b>+|-r</b> with specification of other <u>lsof</u> selec-<font color="#ffffff" class="whiteout">tion&nbsp;selection</font>
                tion options, so the amount of kernel memory access <u>lsof</u> does will be  kept  to  a  minimum.
                Options  that  filter  at  the process level - e.g., <b>-c</b>, <b>-g</b>, <b>-p</b>, <b>-u</b> - are the most efficient
                selectors.

                Repeat mode is useful when coupled with field output (see the <b>-F</b>, option description) and  a
                supervising <u>awk</u> or <u>Perl</u> script, or a C program.

       <b>-R</b>       This  option  directs lsof to list the Parent Process IDentification number in the PPID col-<font color="#ffffff" class="whiteout">umn.&nbsp;column.</font>
                umn.

       <b>-s</b>       This option directs <u>lsof</u> to display file size at all times.  It causes the  SIZE/OFF  output
                column title to be changed to SIZE.  If the file does not have a size, nothing is displayed.

                The <b>-o</b> (without a following decimal digit count) and <b>-s</b> options are mutually exclusive; they
                can't  both be specified.  When neither is specified, <u>lsof</u> displays whatever value - size or
                offset - is appropriate and available for the type of file.

                Since some types of files don't have true sizes - sockets, FIFOs, pipes, etc.  -  lsof  dis-<font color="#ffffff" class="whiteout">plays&nbsp;displays</font>
                plays for their sizes the content amounts in their associated kernel buffers, if possible.

       <b>-S</b> <u>[t]</u>   This  option  specifies  an optional time-out seconds value for kernel functions - <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a>,
                <a href="../man2/readlink.2.html#//apple_ref/doc/man/2/readlink"><u>readlink</u>(2)</a>, and <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> - that might otherwise deadlock.  The minimum for  <u>t</u>  is  two;  the
                default, fifteen; when no value is specified, the default is used.

                See the <b>BLOCKS</b> <b>AND</b> <b>TIMEOUTS</b> section for more information.

       <b>-T</b> <u>[t]</u>   This option controls the reporting of some TCP/TPI information, also reported by <a href="../man1/netstat.1.html#//apple_ref/doc/man/1/netstat"><u>netstat</u>(1)</a>,
                following the network addresses.  In normal output the information appears  in  parentheses,
                each  item except state identified by a keyword, followed by `=', separated from others by a
                single space:

                     &lt;TCP or TPI state name&gt;
                     QR=&lt;read queue length&gt;
                     QS=&lt;send queue length&gt;
                     SO=&lt;socket options and values&gt;
                     SS=&lt;socket states&gt;
                     TF=&lt;TCP flags and values&gt;
                     WR=&lt;window read length&gt;
                     WW=&lt;window write length&gt;

                Not all values are reported for all  UNIX  dialects.   Items  values  (when  available)  are
                reported after the item name and '='.

                When  the field output mode is in effect (See <b>OUTPUT</b> <b>FOR</b> <b>OTHER</b> <b>PROGRAMS</b>.)  each item appears
                as a field with a `T' leading character.

                <b>-T</b> with no following key characters disables TCP/TPI information reporting.

                <b>-T</b> with following characters selects the reporting of specific TCP/TPI information:

                     <b>f</b>    selects reporting of socket options,
                          states and values, and TCP flags and
                          values.
                     <b>q</b>    selects queue length reporting.
                     <b>s</b>    selects connection state reporting.
                     <b>w</b>    selects window size reporting.

                Not all selections are enabled for some UNIX  dialects.   State  may  be  selected  for  all
                dialects  and is reported by default.  The <b>-h</b> or <b>-?</b>  help output for the <b>-T</b> option will show
                what selections may be used with the UNIX dialect.

                When <b>-T</b> is used to select information - i.e., it is followed by one or more selection  char-<font color="#ffffff" class="whiteout">acters&nbsp;characters</font>
                acters  - the displaying of state is disabled by default, and it must be explicitly selected
                again in the characters following <b>-T</b>.  (In effect, then, the default is equivalent to  <b>-Ts</b>.)
                For example, if queue lengths and state are desired, use <b>-Tqs</b>.

                Socket  options,  socket  states,  some  socket  values,  TCP flags and one TCP value may be
                reported (when available in the UNIX dialect) in the form of the names that commonly  appear
                after   SO_,  so_,  SS_,  TCP_   and  TF_  in  the  dialect's  header  files  -  most  often
                &lt;sys/socket.h&gt;, &lt;sys/socketvar.h&gt; and &lt;netinet/tcp_var.h&gt;.  Consult those header  files  for
                the meaning of the flags, options, states and values.

                ``SO=''  precedes  socket options and values; ``SS='', socket states; and ``TF='', TCP flags
                and values.

                If a flag or option has a value, the value  will  follow  an  '='  and  the  name  --  e.g.,
                ``SO=LINGER=5'', ``SO=QLIM=5'', ``TF=MSS=512''.  The following seven values may be reported:

                     Name
                     Reported  Description (Common Symbol)

                     KEEPALIVE keep alive time (SO_KEEPALIVE)
                     LINGER    linger time (SO_LINGER)
                     MSS       maximum segment size (TCP_MAXSEG)
                     PQLEN     partial listen queue connections
                     QLEN      established listen queue connections
                     QLIM      established listen queue limit
                     RCVBUF    receive buffer length (SO_RCVBUF)
                     SNDBUF    send buffer length (SO_SNDBUF)

                Details on what socket options and values, socket states, and TCP flags and  values  may  be
                displayed  for particular UNIX dialects may be found in the answer to the ``Why doesn't lsof
                report socket options, socket states, and TCP flags and values for my dialect?''  and  ``Why
                doesn't  lsof  report the partial listen queue connection count for my dialect?''  questions
                in the <u>lsof</u> FAQ (The <b>FAQ</b> section gives its location.)

       <b>-t</b>       This option specifies that <u>lsof</u> should produce terse output with  process  identifiers  only
                and  no  header - e.g., so that the output may be piped to <a href="../man1/kill.1.html#//apple_ref/doc/man/1/kill"><u>kill</u>(1)</a>.  This option selects the
                <b>-w</b> option.

       <b>-u</b> <u>s</u>     This option selects the listing of files for the user whose login names or user  ID  numbers
                are in the comma-separated set <u>s</u> - e.g., ``abe'', or ``548,root''.  (There should be no spa-<font color="#ffffff" class="whiteout">ces&nbsp;spaces</font>
                ces in the set.)

                Multiple login names or user ID numbers are joined in a single ORed set before participating
                in AND option selection.

                If a login name or user ID is preceded by a `^', it becomes a negation - i.e., files of pro-<font color="#ffffff" class="whiteout">cesses&nbsp;processes</font>
                cesses owned by the login name or user ID will never be listed.  A  negated  login  name  or
                user  ID selection is neither ANDed nor ORed with other selections; it is applied before all
                other selections and absolutely excludes the listing of the files of the process.  For exam-<font color="#ffffff" class="whiteout">ple,&nbsp;example,</font>
                ple,  to  direct  <u>lsof</u>  to exclude the listing of files belonging to root processes, specify
                ``-u^root'' or ``-u^0''.

       <b>-U</b>       This option selects the listing of UNIX domain socket files.

       <b>-v</b>       This option selects the listing of <u>lsof</u> version  information,  including:  revision  number;
                when  the <u>lsof</u> binary was constructed; who constructed the binary and where; the name of the
                compiler used to construct the <u>lsof</u> <u>binary;</u> the version number of the compiler when  readily
                available;  the  compiler  and  loader  flags  used to construct the <u>lsof</u> binary; and system
                information, typically the output of <u>uname</u>'s <b>-a</b> option.

       <b>-V</b>       This option directs <u>lsof</u> to indicate the items it was asked to list and  failed  to  find  -<font color="#ffffff" class="whiteout">command&nbsp;findcommand</font>
                command names, file names, Internet addresses or files, login names, NFS files, PIDs, PGIDs,
                and UIDs.

                When other options are ANDed to search options, or compile-time options restrict the listing
                of some files, <u>lsof</u> may not report that it failed to find a search item when an ANDed option
                or compile-time option prevents the listing of the open file containing the  located  search
                item.

                For  example,  ``lsof  -V  -iTCP@foobar  -a -d 999'' may not report a failure to locate open
                files at ``TCP@foobar'' and may not list any, if none have a file descriptor number of  999.
                A  similar  situation  arises  when HASSECURITY and HASNOSOCKSECURITY are defined at compile
                time and they prevent the listing of open files.

       <b>+|-w</b>     Enables (<b>+</b>) or disables (<b>-</b>) the suppression of warning messages.

                The <u>lsof</u> builder may choose to have warning messages disabled or enabled  by  default.   The
                default warning message state is indicated in the output of the <b>-h</b> or <b>-?</b>  option.  Disabling
                warning messages when they are already disabled or enabling them  when  already  enabled  is
                acceptable.

                The <b>-t</b> option selects the <b>-w</b> option.

       <b>-x</b>  <b>[fl]</b> This  option  may  accompany  the <b>+d</b> and <b>+D</b> options to direct their processing to cross over
                symbolic links and|or file system mount points encountered when scanning the directory  (<b>+d</b>)
                or directory tree (<b>+D</b>).

                If  <b>-x</b>  is  specified by itself without a following parameter, cross-over processing of both
                symbolic links and file system mount points is enabled.  Note  that  when  <b>-x</b>  is  specified
                without a parameter, the next argument must begin with '-' or '+'.

                The  optional 'f' parameter enables file system mount point cross-over processing; 'l', sym-<font color="#ffffff" class="whiteout">bolic&nbsp;symbolic</font>
                bolic link cross-over processing.

                The <b>-x</b> option may not be supplied without also supplying a <b>+d</b> or <b>+D</b> option.

       <b>-X</b>       This is a dialect-specific option.

           AIX:
                This IBM AIX RISC/System 6000 option requests the reporting of executed text file and shared
                library references.

                <b>WARNING:</b>  because this option uses the kernel readx() function, its use on a busy AIX system
                might cause an application process to hang so completely that it can neither be  killed  nor
                stopped.   I have never seen this happen or had a report of its happening, but I think there
                is a remote possibility it could happen.

                By default use of readx() is disabled.  On AIX 5L and above <u>lsof</u> may need  setuid-root  per-<font color="#ffffff" class="whiteout">mission&nbsp;permission</font>
                mission to perform the actions this option requests.

                The <u>lsof</u> builder may specify that the <b>-X</b> option be restricted to processes whose real UID is
                root.  If that has been done, the <b>-X</b> option will not appear in the <b>-h</b>  or  <b>-?</b>   help  output
                unless  the  real UID of the <u>lsof</u> process is root.  The default <u>lsof</u> distribution allows any
                UID to specify <b>-X,</b> so by default it will appear in the help output.

                When AIX readx() use is disabled, <u>lsof</u> may not be able to report information  for  all  text
                and  loader  file  references,  but  it  may also avoid exacerbating an AIX kernel directory
                search kernel error, known as the Stale Segment ID bug.

                The readx() function, used by <u>lsof</u> or any other program to access some  sections  of  kernel
                virtual  memory,  can  trigger  the  Stale  Segment  ID  bug.   It  can  cause  the kernel's
                dir_search() function to believe erroneously that part of an in-memory copy of a file system
                directory has been zeroed.  Another application process, distinct from <u>lsof</u>, asking the ker-<font color="#ffffff" class="whiteout">nel&nbsp;kernel</font>
                nel to search the directory - e.g., by using <a href="../man2/open.2.html#//apple_ref/doc/man/2/open"><u>open</u>(2)</a> - can cause dir_search() to  loop  for-<font color="#ffffff" class="whiteout">ever,&nbsp;forever,</font>
                ever, thus hanging the application process.

                Consult  the  <u>lsof</u>  FAQ  (The <b>FAQ</b> section gives its location.)  and the <u>00README</u> file of the
                <u>lsof</u> distribution for a more complete description of the Stale Segment ID bug, its APAR, and
                methods for defining readx() use when compiling <u>lsof</u>.

           Linux:
                This  Linux  option requests that <u>lsof</u> skip the reporting of information on all open TCP and
                UDP IPv4 and IPv6 files.

                This Linux option is most useful when the system has an extremely large number of  open  TCP
                and  UDP files, the processing of whose information in the <u>/proc/net/tcp*</u> and <u>/proc/net/udp*</u>
                files would take <u>lsof</u> a long time, and whose reporting is not of interest.

                Use this option with care and only when you are sure that the information you want  <u>lsof</u>  to
                display isn't associated with open TCP or UDP socket files.

           Solaris 10 and above:
                This  Solaris 10 and above option requests the reporting of cached paths for files that have
                been deleted - i.e., removed with <a href="../man1/rm.1.html#//apple_ref/doc/man/1/rm"><u>rm</u>(1)</a> or <a href="../man2/unlink.2.html#//apple_ref/doc/man/2/unlink"><u>unlink</u>(2)</a>.

                The cached path is followed by the string `` (deleted)'' to indicate that the path by  which
                the file was opened has been deleted.

                Because  intervening  changes made to the path - i.e., renames with <a href="../man1/mv.1.html#//apple_ref/doc/man/1/mv"><u>mv</u>(1)</a> or <a href="../man2/rename.2.html#//apple_ref/doc/man/2/rename"><u>rename</u>(2)</a> - are
                not recorded in the cached path, what <u>lsof</u> reports is only the path by which  the  file  was
                opened, not its possibly different final path.

       <b>-z</b> <u>[z]</u>   specifies how Solaris 10 and higher zone information is to be handled.

                Without  a  following argument - e.g., NO <u>z</u> - the option specifies that zone names are to be
                listed in the ZONE output column.

                The <b>-z</b> option may be followed by a zone name, <b>z</b><u>.</u>  That causes lsof to list only  open  files
                for  processes  in  that  zone.  Multiple <b>-z</b> <u>z</u> option and argument pairs may be specified to
                form a list of named zones.  Any open file of any process  in  any  of  the  zones  will  be
                listed, subject to other conditions specified by other options and arguments.

       <b>-Z</b> <u>[Z]</u>   specifies how SELinux security contexts are to be handled.

                Without  a following argument - e.g., NO <u>Z</u> - the option specifies that security contexts are
                to be listed in the SECURITY-CONTEXT output column.

                The <b>-Z</b> option may be followed by a wildcard security context name, <b>Z</b><u>.</u>  That causes  lsof  to
                list only open files for processes in that security context.  Multiple <b>-Z</b> <u>Z</u> option and argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
                ment pairs may be specified to form a list of security  contexts.   Any  open  file  of  any
                process  in  any of the security contexts will be listed, subject to other conditions speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
                fied by other options and arguments.  Note that <u>Z</u> can be A:B:C or *:B:C or A:B:* or *:*:C to
                match against the A:B:C context.

       <b>--</b>       The  double minus sign option is a marker that signals the end of the keyed options.  It may
                be used, for example, when the first file name begins with a minus sign.   It  may  also  be
                used when the absence of a value for the last keyed option must be signified by the presence
                of a minus sign in the following option and before the start of the file names.

       <u>names</u>    These are path names of specific files to list.  Symbolic links  are  resolved  before  use.
                The first name may be separated from the preceding options with the ``--'' option.

                If  a  <u>name</u>  is  the mounted-on directory of a file system or the device of the file system,
                <u>lsof</u> will list all the files open on the file system.  To be considered a file  system,  the
                <u>name</u> must match a mounted-on directory name in <a href="mount.8.html#//apple_ref/doc/man/8/mount"><u>mount</u>(8)</a> output, or match the name of a block
                device associated with a mounted-on directory name.  The <b>+|-f</b> option may be  used  to  force
                <u>lsof</u> to consider a <u>name</u> a file system identifier (<b>+f</b>) or a simple file (<b>-f</b>).

                If <u>name</u> is a path to a directory that is not the mounted-on directory name of a file system,
                it is treated just as a regular file is treated - i.e., its listing is  restricted  to  pro-<font color="#ffffff" class="whiteout">cesses&nbsp;processes</font>
                cesses  that  have it open as a file or as a process-specific directory, such as the root or
                current working directory.  To request that <u>lsof</u> look for  open  files  inside  a  directory
                name, use the <b>+d</b> <u>s</u> and <b>+D</b> <u>D</u> options.

                If a <u>name</u> is the base name of a family of multiplexed files - e. g, AIX's <u>/dev/pt[cs]</u> - <u>lsof</u>
                will list all the associated  multiplexed  files  on  the  device  that  are  open  -  e.g.,
                <u>/dev/pt[cs]/1</u>, <u>/dev/pt[cs]/2</u>, etc.

                If a <u>name</u> is a UNIX domain socket name, <u>lsof</u> will usually search for it by the characters of
                the name alone - exactly as it is specified and is recorded in the kernel socket  structure.
                (See  the  next  paragraph  for an exception to that rule for Linux.)  Specifying a relative
                path - e.g., <u>./file</u> - in place of the file's absolute path - e.g., <u>/tmp/file</u>  -  won't  work
                because  <u>lsof</u>  must  match  the characters you specify with what it finds in the kernel UNIX
                domain socket structures.

                If a <u>name</u> is a Linux UNIX domain socket name, in one case <u>lsof</u> is able to search for  it  by
                its  device  and  inode number, allowing <u>name</u> to be a relative path.  The case requires that
                the absolute path -- i.e., one beginning with a slash ('/') be used by the process that cre-<font color="#ffffff" class="whiteout">ated&nbsp;created</font>
                ated  the  socket, and hence be stored in the <u>/proc/net/unix</u> file; and it requires that <u>lsof</u>
                be able to obtain the device and node numbers of both the absolute  path  in  <u>/proc/net/unix</u>
                and  <u>name</u>  via successful <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> system calls.  When those conditions are met, <u>lsof</u> will be
                able to search for the UNIX domain socket when some path to it  is  is  specified  in  <u>name</u>.
                Thus, for example, if the path is <u>/dev/log</u>, and an <u>lsof</u> search is initiated when the working
                directory is <u>/dev</u>, then <u>name</u> could be <u>./log</u>.

                If a <u>name</u> is none of the above, <u>lsof</u> will list any open files whose device and  inode  match
                that of the specified path <u>name</u>.

                If  you  have  also  specified the <b>-b</b> option, the only <u>names</u> you may safely specify are file
                systems for which your mount table supplies alternate device numbers.  See the <b>AVOIDING</b> <b>KER</b>-<font color="#ffffff" class="whiteout">NEL&nbsp;KERNEL</font>
                <b>NEL</b> <b>BLOCKS</b> and <b>ALTERNATE</b> <b>DEVICE</b> <b>NUMBERS</b> sections for more information.

                Multiple  file  names  are  joined  in  a single ORed set before participating in AND option
                selection.

<b>AFS</b>
       <u>Lsof</u> supports the recognition of AFS files for these dialects (and AFS versions):

            AIX 4.1.4 (AFS 3.4a)
            HP-UX 9.0.5 (AFS 3.4a)
            Linux 1.2.13 (AFS 3.3)
            Solaris 2.[56] (AFS 3.4a)

       It may recognize AFS files on other versions of these  dialects,  but  has  not  been  tested  there.
       Depending on how AFS is implemented, <u>lsof</u> may recognize AFS files in other dialects, or may have dif-<font color="#ffffff" class="whiteout">ficulties&nbsp;difficulties</font>
       ficulties recognizing AFS files in the supported dialects.

       <u>Lsof</u> may have trouble identifying all aspects of AFS files in supported dialects when AFS kernel sup-<font color="#ffffff" class="whiteout">port&nbsp;support</font>
       port  is  implemented via dynamic modules whose addresses do not appear in the kernel's variable name
       list.  In that case, <u>lsof</u> may have to guess at the identity of AFS files, and might not  be  able  to
       obtain  volume  information  from  the kernel that is needed for calculating AFS volume node numbers.
       When <u>lsof</u> can't compute volume node numbers, it reports blank in the NODE column.

       The <b>-A</b> <u>A</u> option is available in some dialect implementations of <u>lsof</u> for  specifying  the  name  list
       file  where  dynamic module kernel addresses may be found.  When this option is available, it will be
       listed in the <u>lsof</u> help output, presented in response to the <b>-h</b> or <b>-?</b>

       See the <u>lsof</u> FAQ (The <b>FAQ</b> section gives its location.)  for more information about  dynamic  modules,
       their symbols, and how they affect <u>lsof</u> options.

       Because  AFS path lookups don't seem to participate in the kernel's name cache operations, <u>lsof</u> can't
       identify path name components for AFS files.

<b>SECURITY</b>
       <u>Lsof</u> has three features that may cause security concerns.  First, its default compilation mode allows
       anyone  to  list  all  open  files  with  it.   Second,  by  default  it  creates a user-readable and
       user-writable device cache file in the home directory of the real user ID that executes  <u>lsof</u>.   (The
       list-all-open-files  and device cache features may be disabled when <u>lsof</u> is compiled.)  Third, its <b>-k</b>
       and <b>-m</b> options name alternate kernel name list or memory files.

       Restricting the listing of all open files is controlled by  the  compile-time  HASSECURITY  and  HAS-<font color="#ffffff" class="whiteout">NOSOCKSECURITY&nbsp;HASNOSOCKSECURITY</font>
       NOSOCKSECURITY  options.  When HASSECURITY is defined, <u>lsof</u> will allow only the root user to list all
       open files.  The non-root user may list only open files of processes with the same  user  IDentifica-<font color="#ffffff" class="whiteout">tion&nbsp;IDentification</font>
       tion number as the real user ID number of the <u>lsof</u> process (the one that its user logged on with).

       However,  if  HASSECURITY  and HASNOSOCKSECURITY are both defined, anyone may list open socket files,
       provided they are selected with the <b>-i</b> option.

       When HASSECURITY is not defined, anyone may list all open files.

       Help output, presented in response to the <b>-h</b> or <b>-?</b>  option, gives the status of the  HASSECURITY  and
       HASNOSOCKSECURITY definitions.

       See  the  <b>Security</b>  section of the <u>00README</u> file of the <u>lsof</u> distribution for information on building
       <u>lsof</u> with the HASSECURITY and HASNOSOCKSECURITY options enabled.

       Creation and use of a user-readable and user-writable device cache file is  controlled  by  the  com-<font color="#ffffff" class="whiteout">pile-time&nbsp;compile-time</font>
       pile-time  HASDCACHE  option.   See the <b>DEVICE</b> <b>CACHE</b> <b>FILE</b> section and the sections that follow it for
       details on how its path is formed.  For security considerations it is important to note that  in  the
       default <u>lsof</u> distribution, if the real user ID under which <u>lsof</u> is executed is root, the device cache
       file will be written in root's home directory - e.g., <u>/</u> or <u>/root</u>.  When  HASDCACHE  is  not  defined,
       <u>lsof</u> does not write or attempt to read a device cache file.

       When  HASDCACHE  is  defined,  the  <u>lsof</u>  help  output,  presented  in response to the <b>-h</b>, <b>-D?</b>, or <b>-?</b>
       options, will provide device cache file handling information.  When HASDCACHE is not defined, the  <b>-h</b>
       or <b>-?</b>  output will have no <b>-D</b> option description.

       Before  you decide to disable the device cache file feature - enabling it improves the performance of
       <u>lsof</u> by reducing the startup overhead of examining all the nodes in <u>/dev</u> (or  <u>/devices</u>)  -  read  the
       discussion  of  it  in  the  <u>00DCACHE</u> file of the <u>lsof</u> distribution and the <u>lsof</u> FAQ (The <b>FAQ</b> section
       gives its location.)

       WHEN IN DOUBT, YOU CAN TEMPORARILY DISABLE THE USE OF THE DEVICE CACHE FILE WITH THE <b>-Di</b> OPTION.

       When <u>lsof</u> user declares alternate kernel name list or memory files with the <b>-k</b> and <b>-m</b>  options,  <u>lsof</u>
       checks  the  user's authority to read them with <a href="../man2/access.2.html#//apple_ref/doc/man/2/access"><u>access</u>(2)</a>.  This is intended to prevent whatever spe-<font color="#ffffff" class="whiteout">cial&nbsp;special</font>
       cial power <u>lsof's</u> modes might confer on it from letting it read files not normally accessible via the
       authority of the real user ID.

<b>OUTPUT</b>
       This  section describes the information <u>lsof</u> lists for each open file.  See the <b>OUTPUT</b> <b>FOR</b> <b>OTHER</b> <b>PRO</b>-<font color="#ffffff" class="whiteout">GRAMS&nbsp;PROGRAMS</font>
       <b>GRAMS</b> section for additional information on output that can be processed by another program.

       <u>Lsof</u> only outputs printable (declared so by <a href="../man3/isprint.3.html#//apple_ref/doc/man/3/isprint"><u>isprint</u>(3)</a>) 8 bit characters.   Non-printable  characters
       are  printed  in  one  of three forms: the C ``\[bfrnt]'' form; the control character `^' form (e.g.,
       ``^@''); or hexadecimal leading ``\x'' form (e.g., ``\xab'').  Space is non-printable in the  COMMAND
       column (``\x20'') and printable elsewhere.

       For  some  dialects  -  if HASSETLOCALE is defined in the dialect's machine.h header file - <u>lsof</u> will
       print the extended 8 bit characters of a language locale.  The <u>lsof</u> process must be supplied  a  lan-<font color="#ffffff" class="whiteout">guage&nbsp;language</font>
       guage  locale  environment  variable  (e.g.,  LANG) whose value represents a known language locale in
       which the extended characters are considered printable by <a href="../man3/isprint.3.html#//apple_ref/doc/man/3/isprint"><u>isprint</u>(3)</a>.  Otherwise <u>lsof</u>  considers  the
       extended  characters  non-printable  and prints them according to its rules for non-printable charac-<font color="#ffffff" class="whiteout">ters,&nbsp;characters,</font>
       ters, stated above.  Consult your dialect's <a href="../man3/setlocale.3.html#//apple_ref/doc/man/3/setlocale"><u>setlocale</u>(3)</a> man page for the names of other  environment
       variables that may be used in place of LANG - e.g., LC_ALL, LC_CTYPE, etc.

       <u>Lsof's</u> language locale support for a dialect also covers wide characters - e.g., UTF-8 - when HASSET-<font color="#ffffff" class="whiteout">LOCALE&nbsp;HASSETLOCALE</font>
       LOCALE and HASWIDECHAR are defined in the dialect's machine.h header file, and when a  suitable  lan-<font color="#ffffff" class="whiteout">guage&nbsp;language</font>
       guage  locale  has  been  defined in the appropriate environment variable for the <u>lsof</u> process.  Wide
       characters are printable under those conditions if <a href="../man3/iswprint.3.html#//apple_ref/doc/man/3/iswprint"><u>iswprint</u>(3)</a> reports them to be.  If  HASSETLOCALE,
       HASWIDECHAR  and a suitable language locale aren't defined, or if <a href="../man3/iswprint.3.html#//apple_ref/doc/man/3/iswprint"><u>iswprint</u>(3)</a> reports wide characters
       that aren't printable, <u>lsof</u> considers the wide characters non-printable and prints each  of  their  8
       bits according to its rules for non-printable characters, stated above.

       Consult the answers to the "Language locale support" questions in the lsof FAQ (The <b>FAQ</b> section gives
       its location.) for more information.

       <u>Lsof</u> dynamically sizes the output columns each time it runs, guaranteeing that each column is a mini-<font color="#ffffff" class="whiteout">mum&nbsp;minimum</font>
       mum  size.   It  also  guarantees  that each column is separated from its predecessor by at least one
       space.

       COMMAND    contains the first nine characters of the name of the UNIX  command  associated  with  the
                  process.   If  a non-zero <u>w</u> value is specified to the <b>+c</b> <u>w</u> option, the column contains the
                  first <u>w</u> characters of the name of the UNIX command associated with the process up  to  the
                  limit  of characters supplied to <u>lsof</u> by the UNIX dialect.  (See the description of the <b>+c</b>
                  <u>w</u> command or the <u>lsof</u> FAQ for more information.  The <b>FAQ</b> section gives its location.)

                  If <u>w</u> is less than the length of the column title, ``COMMAND'', it will be raised  to  that
                  length.

                  If  a zero <u>w</u> value is specified to the <b>+c</b> <u>w</u> option, the column contains all the characters
                  of the name of the UNIX command associated with the process.

                  All command name characters maintained by the kernel in its structures  are  displayed  in
                  field  output  when  the  command  name descriptor (`c') is specified.  See the <b>OUTPUT</b> <b>FOR</b>
                  <b>OTHER</b> <b>COMMANDS</b> section for information on selecting field output and the  associated  com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
                  mand name descriptor.

       PID        is the Process IDentification number of the process.

       ZONE       is  the Solaris 10 and higher zone name.  This column must be selected with the <b>-z</b> option.

       SECURITY-CONTEXT
                  is the SELinux security context.  This column must be selected with the <b>-Z</b> option.

       PPID       is the Parent Process IDentification number of the process.  It is only displayed when the
                  <b>-R</b> option has been specified.

       PGID       is  the  process group IDentification number associated with the process.  It is only dis-<font color="#ffffff" class="whiteout">played&nbsp;displayed</font>
                  played when the <b>-g</b> option has been specified.

       USER       is the user ID number or login name of the user to whom the process belongs,  usually  the
                  same  as  reported  by  <a href="../man1/ps.1.html#//apple_ref/doc/man/1/ps"><u>ps</u>(1)</a>.  However, on Linux USER is the user ID number or login that
                  owns the directory in /proc where <u>lsof</u> finds information about the process.  Usually  that
                  is  the  same  value  reported  by  <a href="../man1/ps.1.html#//apple_ref/doc/man/1/ps"><u>ps</u>(1)</a>, but may differ when the process has changed its
                  effective user ID.  (See the <b>-l</b> option description for information on when a user ID  num-<font color="#ffffff" class="whiteout">ber&nbsp;number</font>
                  ber or login name is displayed.)

       FD         is the File Descriptor number of the file or:

                       <b>cwd</b>  current working directory;
                       <b>L</b><u>nn</u>  library references (AIX);
                       <b>err</b>  FD information error (see NAME column);
                       <b>jld</b>  jail directory (FreeBSD);
                       <b>ltx</b>  shared library text (code and data);
                       <b>Mxx</b>  hex memory-mapped type number xx.
                       <b>m86</b>  DOS Merge mapped file;
                       <b>mem</b>  memory-mapped file;
                       <b>mmap</b> memory-mapped device;
                       <b>pd</b>   parent directory;
                       <b>rtd</b>  root directory;
                       <b>tr</b>   kernel trace file (OpenBSD);
                       <b>txt</b>  program text (code and data);
                       <b>v86</b>  VP/ix mapped file;

                  FD  is  followed  by  one of these characters, describing the mode under which the file is
                  open:

                       <b>r</b> for read access;
                       <b>w</b> for write access;
                       <b>u</b> for read and write access;
                       space if mode unknown and no lock
                            character follows;
                       `-' if mode unknown and lock
                            character follows.

                  The mode character is followed by one of these lock characters,  describing  the  type  of
                  lock applied to the file:

                       <b>N</b> for a Solaris NFS lock of unknown type;
                       <b>r</b> for read lock on part of the file;
                       <b>R</b> for a read lock on the entire file;
                       <b>w</b> for a write lock on part of the file;
                       <b>W</b> for a write lock on the entire file;
                       <b>u</b> for a read and write lock of any length;
                       <b>U</b> for a lock of unknown type;
                       <b>x</b> for an SCO OpenServer Xenix lock on part      of the file;
                       <b>X</b> for an SCO OpenServer Xenix lock on the      entire file;
                       space if there is no lock.

                  See the <b>LOCKS</b> section for more information on the lock information character.

                  The  FD column contents constitutes a single field for parsing in post-processing scripts.

       TYPE       is the type of the node associated with the file - e.g., GDIR, GREG, VDIR, VREG, etc.

                  or ``IPv4'' for an IPv4 socket;

                  or ``IPv6'' for an open IPv6 network file - even if its address is IPv4, mapped in an IPv6
                  address;

                  or ``ax25'' for a Linux AX.25 socket;

                  or ``inet'' for an Internet domain socket;

                  or ``lla'' for a HP-UX link level access file;

                  or ``rte'' for an AF_ROUTE socket;

                  or ``sock'' for a socket of unknown domain;

                  or ``unix'' for a UNIX domain socket;

                  or ``x.25'' for an HP-UX x.25 socket;

                  or ``BLK'' for a block special file;

                  or ``CHR'' for a character special file;

                  or ``DEL'' for a Linux map file that has been deleted;

                  or ``DIR'' for a directory;

                  or ``DOOR'' for a VDOOR file;

                  or ``FIFO'' for a FIFO special file;

                  or ``KQUEUE'' for a BSD style kernel event queue file;

                  or ``LINK'' for a symbolic link file;

                  or ``MPB'' for a multiplexed block file;

                  or ``MPC'' for a multiplexed character file;

                  or  ``NOFD''  for  a  Linux /proc/&lt;PID&gt;/fd directory that can't be opened -- the directory
                  path appears in the NAME column, followed by an error message;

                  or ``PAS'' for a <u>/proc/as</u> file;

                  or ``PAXV'' for a <u>/proc/auxv</u> file;

                  or ``PCRE'' for a <u>/proc/cred</u> file;

                  or ``PCTL'' for a <u>/proc</u> control file;

                  or ``PCUR'' for the current <u>/proc</u> process;

                  or ``PCWD'' for a <u>/proc</u> current working directory;

                  or ``PDIR'' for a <u>/proc</u> directory;

                  or ``PETY'' for a <u>/proc</u> executable type (<u>etype</u>);

                  or ``PFD'' for a <u>/proc</u> file descriptor;

                  or ``PFDR'' for a <u>/proc</u> file descriptor directory;

                  or ``PFIL'' for an executable <u>/proc</u> file;

                  or ``PFPR'' for a <u>/proc</u> FP register set;

                  or ``PGD'' for a <u>/proc/pagedata</u> file;

                  or ``PGID'' for a <u>/proc</u> group notifier file;

                  or ``PIPE'' for pipes;

                  or ``PLC'' for a <u>/proc/lwpctl</u> file;

                  or ``PLDR'' for a <u>/proc/lpw</u> directory;

                  or ``PLDT'' for a <u>/proc/ldt</u> file;

                  or ``PLPI'' for a <u>/proc/lpsinfo</u> file;

                  or ``PLST'' for a <u>/proc/lstatus</u> file;

                  or ``PLU'' for a <u>/proc/lusage</u> file;

                  or ``PLWG'' for a <u>/proc/gwindows</u> file;

                  or ``PLWI'' for a <u>/proc/lwpsinfo</u> file;

                  or ``PLWS'' for a <u>/proc/lwpstatus</u> file;

                  or ``PLWU'' for a <u>/proc/lwpusage</u> file;

                  or ``PLWX'' for a <u>/proc/xregs</u> file'

                  or ``PMAP'' for a <u>/proc</u> map file (<u>map</u>);

                  or ``PMEM'' for a <u>/proc</u> memory image file;

                  or ``PNTF'' for a <u>/proc</u> process notifier file;

                  or ``POBJ'' for a <u>/proc/object</u> file;

                  or ``PODR'' for a <u>/proc/object</u> directory;

                  or ``POLP'' for an old format <u>/proc</u> light weight process file;

                  or ``POPF'' for an old format <u>/proc</u> PID file;

                  or ``POPG'' for an old format <u>/proc</u> page data file;

                  or ``PORT'' for a SYSV named pipe;

                  or ``PREG'' for a <u>/proc</u> register file;

                  or ``PRMP'' for a <u>/proc/rmap</u> file;

                  or ``PRTD'' for a <u>/proc</u> root directory;

                  or ``PSGA'' for a <u>/proc/sigact</u> file;

                  or ``PSIN'' for a <u>/proc/psinfo</u> file;

                  or ``PSTA'' for a <u>/proc</u> status file;

                  or ``PSXSEM'' for a POSIX semaphore file;

                  or ``PSXSHM'' for a POSIX shared memory file;

                  or ``PUSG'' for a <u>/proc/usage</u> file;

                  or ``PW'' for a <u>/proc/watch</u> file;

                  or ``PXMP'' for a <u>/proc/xmap</u> file;

                  or ``REG'' for a regular file;

                  or ``SMT'' for a shared memory transport file;

                  or ``STSO'' for a stream socket;

                  or ``UNNM'' for an unnamed type file;

                  or ``XNAM'' for an OpenServer Xenix special file of unknown type;

                  or ``XSEM'' for an OpenServer Xenix semaphore file;

                  or ``XSD'' for an OpenServer Xenix shared data file;

                  or the four type number octets if the corresponding name isn't known.

       FILE-ADDR  contains the kernel file structure address when <b>f</b> has been specified to <b>+f</b>;

       FCT        contains the file reference count from the kernel file structure when <b>c</b> has been specified
                  to <b>+f</b>;

       FILE-FLAG  when  <b>g</b>  or  <b>G</b> has been specified to <b>+f</b>, this field contains the contents of the f_flag[s]
                  member of the kernel file structure and the  kernel's  per-process  open  file  flags  (if
                  available);  `G' causes them to be displayed in hexadecimal; `g', as short-hand names; two
                  lists may be displayed with entries separated by commas, the lists separated  by  a  semi-<font color="#ffffff" class="whiteout">colon&nbsp;semicolon</font>
                  colon  (`;');  the  first  list may contain short-hand names for f_flag[s] values from the
                  following table:

                       AIO       asynchronous I/O (e.g., FAIO)
                       AP        append
                       ASYN      asynchronous I/O (e.g., FASYNC)
                       BAS       block, test, and set in use
                       BKIU      block if in use
                       BL        use block offsets
                       BSK       block seek
                       CA        copy avoid
                       CIO       concurrent I/O
                       CLON      clone
                       CLRD      CL read
                       CR        create
                       DF        defer
                       DFI       defer IND
                       DFLU      data flush
                       DIR       direct
                       DLY       delay
                       DOCL      do clone
                       DSYN      data-only integrity
                       EVO       event only
                       EX        open for exec
                       EXCL      exclusive open
                       FSYN      synchronous writes
                       GCDF      defer during unp_gc() (AIX)
                       GCMK      mark during unp_gc() (AIX)
                       GTTY      accessed via /dev/tty
                       HUP       HUP in progress
                       KERN      kernel
                       KIOC      kernel-issued ioctl
                       LCK       has lock
                       LG        large file
                       MBLK      stream message block
                       MK        mark
                       MNT       mount
                       MSYN      multiplex synchronization
                       NB        non-blocking I/O
                       NBDR      no BDRM check
                       NBIO      SYSV non-blocking I/O
                       NBF       n-buffering in effect
                       NC        no cache
                       ND        no delay
                       NDSY      no data synchronization
                       NET       network
                       NMFS      NM file system
                       NOTO      disable background stop
                       NSH       no share
                       NTTY      no controlling TTY
                       OLRM      OLR mirror
                       PAIO      POSIX asynchronous I/O
                       PP        POSIX pipe
                       R         read
                       RC        file and record locking cache
                       REV       revoked
                       RSH       shared read
                       RSYN      read synchronization
                       SL        shared lock
                       SNAP      cooked snapshot
                       SOCK      socket
                       SQSH      Sequent shared set on open
                       SQSV      Sequent SVM set on open
                       SQR       Sequent set repair on open
                       SQS1      Sequent full shared open
                       SQS2      Sequent partial shared open
                       STPI      stop I/O
                       SWR       synchronous read
                       SYN       file integrity while writing
                       TCPM      avoid TCP collision
                       TR        truncate
                       W         write
                       WKUP      parallel I/O synchronization
                       WTG       parallel I/O synchronization
                       VH        vhangup pending
                       VTXT      virtual text
                       XL        exclusive lock

                  this list of names was derived from  F*  #define's  in  dialect  header  files  &lt;fcntl.h&gt;,
                  &lt;linux&lt;/fs.h&gt;,  &lt;sys/fcntl.c&gt;,  &lt;sys/fcntlcom.h&gt;,  and &lt;sys/file.h&gt;; see the lsof.h header
                  file for a list showing the correspondence between the  above  short-hand  names  and  the
                  header file definitions;

                  the  second list (after the semicolon) may contain short-hand names for kernel per-process
                  open file flags from this table:

                       ALLC      allocated
                       BR        the file has been read
                       BHUP      activity stopped by SIGHUP
                       BW        the file has been written
                       CLSG      closing
                       CX        close-on-exec (see fcntl(F_SETFD))
                       LCK       lock was applied
                       MP        memory-mapped
                       OPIP      open pending - in progress
                       RSVW      reserved wait
                       SHMT      UF_FSHMAT set (AIX)
                       USE       in use (multi-threaded)

       NODE-ID    (or INODE-ADDR for some dialects) contains a unique identifier for the file node  (usually
                  the  kernel  vnode  or  inode address, but also occasionally a concatenation of device and
                  node number) when <b>n</b> has been specified to <b>+f</b>;

       DEVICE     contains the device numbers, separated by commas, for a character special, block  special,
                  regular, directory or NFS file;

                  or ``memory'' for a memory file system node under Tru64 UNIX;

                  or the address of the private data area of a Solaris socket stream;

                  or  a  kernel reference address that identifies the file (The kernel reference address may
                  be used for FIFO's, for example.);

                  or the base address or device name of a Linux AX.25 socket device.

                  Usually only the lower thirty two bits of Tru64 UNIX kernel addresses are displayed.

       SIZE, SIZE/OFF, or OFFSET
                  is the size of the file or the file offset in bytes.  A value is displayed in this  column
                  only  if  it is available.  <u>Lsof</u> displays whatever value - size or offset - is appropriate
                  for the type of the file and the version of <u>lsof</u>.

                  On some UNIX dialects <u>lsof</u> can't obtain accurate or  consistent  file  offset  information
                  from  its  kernel data sources, sometimes just for particular kinds of files (e.g., socket
                  files.)  In other cases, files don't have true sizes - e.g., sockets, FIFOs,  pipes  -  so
                  <u>lsof</u> displays for their sizes the content amounts it finds in their kernel buffer descrip-<font color="#ffffff" class="whiteout">tors&nbsp;descriptors</font>
                  tors (e.g., socket buffer size counts or TCP/IP window sizes.)  Consult the <u>lsof</u> FAQ  (The
                  <b>FAQ</b> section gives its location.)  for more information.

                  The  file size is displayed in decimal; the offset is normally displayed in decimal with a
                  leading ``0t'' if it contains 8 digits or less; in hexadecimal with a leading ``0x'' if it
                  is  longer  than 8 digits.  (Consult the <b>-o</b> <u>o</u> option description for information on when 8
                  might default to some other value.)

                  Thus the leading ``0t'' and ``0x'' identify an offset when the column may contain  both  a
                  size and an offset (i.e., its title is SIZE/OFF).

                  If the <b>-o</b> option is specified, <u>lsof</u> always displays the file offset (or nothing if no off-<font color="#ffffff" class="whiteout">set&nbsp;offset</font>
                  set is available) and labels the column OFFSET.  The offset always begins with  ``0t''  or
                  ``0x'' as described above.

                  The  <u>lsof</u> user can control the switch from ``0t'' to ``0x'' with the <b>-o</b> <u>o</u> option.  Consult
                  its description for more information.

                  If the <b>-s</b> option is specified, <u>lsof</u> always displays the file size (or nothing if  no  size
                  is  available)  and labels the column SIZE.  The <b>-o</b> and <b>-s</b> options are mutually exclusive;
                  they can't both be specified.

                  For files that don't have a fixed size - e.g., don't reside on a disk device -  <u>lsof</u>  will
                  display  appropriate  information  about the current size or position of the file if it is
                  available in the kernel structures that define the file.

       NLINK      contains the file link count when <b>+L</b> has been specified;

       NODE       is the node number of a local file;

                  or the inode number of an NFS file in the server host;

                  or the Internet protocol type - e. g, ``TCP'';

                  or ``STR'' for a stream;

                  or ``CCITT'' for an HP-UX x.25 socket;

                  or the IRQ or inode number of a Linux AX.25 socket device.

       NAME       is the name of the mount point and file system on which the file resides;

                  or the name of a file specified in the <u>names</u> option (after any symbolic  links  have  been
                  resolved);

                  or the name of a character special or block special device;

                  or  the  local  and remote Internet addresses of a network file; the local host name or IP
                  number is followed by a colon (':'), the port, ``-&gt;'', and the two-part remote address; IP
                  addresses  may be reported as numbers or names, depending on the <b>+|-M</b>, <b>-n</b>, and <b>-P</b> options;
                  colon-separated IPv6 numbers are enclosed in square brackets;  IPv4  INADDR_ANY  and  IPv6
                  IN6_IS_ADDR_UNSPECIFIED  addresses,  and  zero port numbers are represented by an asterisk
                  ('*'); a UDP destination address may be followed by the amount of time elapsed  since  the
                  last  packet  was sent to the destination; TCP and UDP remote addresses may be followed by
                  TCP/TPI information in parentheses - state (e.g., ``(ESTABLISHED)'', ``(Unbound)''), queue
                  sizes,  and  window  sizes  (not  all  dialects) - in a fashion similar to what <a href="../man1/netstat.1.html#//apple_ref/doc/man/1/netstat"><u>netstat</u>(1)</a>
                  reports; see the <b>-T</b> option description or the description of the TCP/TPI field  in  <b>OUTPUT</b>
                  <b>FOR</b> <b>OTHER</b> <b>PROGRAMS</b> for more information on state, queue size, and window size;

                  or  the  address or name of a UNIX domain socket, possibly including a stream clone device
                  name, a file system object's path name, local and foreign kernel  addresses,  socket  pair
                  information, and a bound vnode address;

                  or the local and remote mount point names of an NFS file;

                  or ``STR'', followed by the stream name;

                  or  a  stream  character  device name, followed by ``-&gt;'' and the stream name or a list of
                  stream module names, separated by ``-&gt;'';

                  or ``STR:'' followed by the SCO OpenServer stream device and module  names,  separated  by
                  ``-&gt;'';

                  or  system  directory  name, `` -- '', and as many components of the path name as <u>lsof</u> can
                  find in the kernel's name cache for selected dialects (See the <b>KERNEL</b> <b>NAME</b>  <b>CACHE</b>  section
                  for more information.);

                  or ``PIPE-&gt;'', followed by a Solaris kernel pipe destination address;

                  or  ``COMMON:'',  followed  by the vnode device information structure's device name, for a
                  Solaris common vnode;

                  or the address family, followed by a slash (`/'),  followed  by  fourteen  comma-separated
                  bytes of a non-Internet raw socket address;

                  or  the HP-UX x.25 local address, followed by the virtual connection number (if any), fol-<font color="#ffffff" class="whiteout">lowed&nbsp;followed</font>
                  lowed by the remote address (if any);

                  or ``(dead)'' for disassociated Tru64 UNIX files - typically terminal files that have been
                  flagged with the TIOCNOTTY ioctl and closed by daemons;

                  or  ``rd=&lt;offset&gt;''  and ``wr=&lt;offset&gt;'' for the values of the read and write offsets of a
                  FIFO;

                  or ``clone <u>n</u>:/dev/event'' for SCO OpenServer file clones of the <u>/dev/event</u> device, where <u>n</u>
                  is the minor device number of the file;

                  or  ``(socketpair:  n)'' for a Solaris 2.6, 8, 9  or 10 UNIX domain socket, created by the
                  <!-- a --><u>socketpair</u>(3N)<!-- /a --> network function;

                  or ``no PCB'' for socket files that do not have a protocol  block  associated  with  them,
                  optionally  followed  by ``, CANTSENDMORE'' if sending on the socket has been disabled, or
                  ``, CANTRCVMORE'' if receiving on the socket has been disabled (e.g., by  the  <a href="../man2/shutdown.2.html#//apple_ref/doc/man/2/shutdown"><u>shutdown</u>(2)</a>
                  function);

                  or   the   local   and   remote  addresses  of  a  Linux  IPX  socket  file  in  the  form
                  &lt;net&gt;:[&lt;node&gt;:]&lt;port&gt;, followed in parentheses by the transmit and  receive  queue  sizes,
                  and the connection state;

                  or  ``dgram''  or  ``stream''  for the type UnixWare 7.1.1 and above in-kernel UNIX domain
                  sockets, followed by a colon (':') and the local path name  when  available,  followed  by
                  ``-&gt;'' and the remote path name or kernel socket address in hexadecimal when available.

       For  dialects that support a ``namefs'' file system, allowing one file to be attached to another with
       <!-- a --><u>fattach</u>(3C)<!-- /a -->, <u>lsof</u> will add ``(FA:&lt;address1&gt;&lt;direction&gt;&lt;address2&gt;)'' to the NAME  column.   &lt;address1&gt;
       and  &lt;address2&gt;  are  hexadecimal vnode addresses.  &lt;direction&gt; will be ``&lt;-'' if &lt;address2&gt; has been
       fattach'ed to this vnode whose address is &lt;address1&gt;; and ``-&gt;'' if &lt;address1&gt;, the vnode address  of
       this  vnode,  has  been fattach'ed to &lt;address2&gt;.  &lt;address1&gt; may be omitted if it already appears in
       the DEVICE column.

       <u>Lsof</u> may add two parenthetical notes to the NAME column for open Solaris 10 files:  ``(?)''  if  <u>lsof</u>
       considers  the path name of questionable accuracy; and ``(deleted)'' if the <b>-X</b> option has been speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
       fied and <u>lsof</u> detects the open file's path name has been deleted.  Consult the <u>lsof</u> FAQ (The <b>FAQ</b> sec-<font color="#ffffff" class="whiteout">tion&nbsp;section</font>
       tion gives its location.)  for more information on these NAME column additions.

<b>LOCKS</b>
       <u>Lsof</u> can't adequately report the wide variety of UNIX dialect file locks in a single character.  What
       it reports in a single character is a compromise between the information it finds in the  kernel  and
       the limitations of the reporting format.

       Moreover,  when  a  process holds several byte level locks on a file, <u>lsof</u> only reports the status of
       the first lock it encounters.  If it is a byte level lock, then the lock character will  be  reported
       in  lower  case  - i.e., `r', `w', or `x' - rather than the upper case equivalent reported for a full
       file lock.

       Generally <u>lsof</u> can only report on locks held by local processes on local files.  When a local process
       sets  a  lock on a remotely mounted (e.g., NFS) file, the remote server host usually records the lock
       state.  One exception is Solaris - at some patch levels of 2.3, and in all versions  above  2.4,  the
       Solaris kernel records information on remote locks in local structures.

       <u>Lsof</u>  has  trouble  reporting  locks for some UNIX dialects.  Consult the <b>BUGS</b> section of this manual
       page or the <u>lsof</u> FAQ (The <b>FAQ</b> section gives its location.)  for more information.

<b>OUTPUT</b> <b>FOR</b> <b>OTHER</b> <b>PROGRAMS</b>
       When the <b>-F</b> option is specified, <u>lsof</u> produces output that is suitable for processing by another pro-<font color="#ffffff" class="whiteout">gram&nbsp;program</font>
       gram - e.g, an <u>awk</u> or <u>Perl</u> script, or a C program.

       Each  unit of information is output in a field that is identified with a leading character and termi-<font color="#ffffff" class="whiteout">nated&nbsp;terminated</font>
       nated by a NL (012) (or a NUL (000) if the 0 (zero) field identifier character  is  specified.)   The
       data  of  the  field  follows immediately after the field identification character and extends to the
       field terminator.

       It is possible to think of field output as process and file sets.  A process set begins with a  field
       whose  identifier is `p' (for process IDentifier (PID)).  It extends to the beginning of the next PID
       field or the beginning of the first file set of the process, whichever comes first.  Included in  the
       process set are fields that identify the command, the process group IDentification (PGID) number, and
       the user ID (UID) number or login name.

       A file set begins with a field whose identifier is `f' (for file  descriptor).   It  is  followed  by
       lines  that describe the file's access mode, lock state, type, device, size, offset, inode, protocol,
       name and stream module names.  It extends to the beginning of the next file or process set, whichever
       comes first.

       When  the  NUL (000) field terminator has been selected with the 0 (zero) field identifier character,
       <u>lsof</u> ends each process and file set with a NL (012) character.

       <u>Lsof</u> always produces one field, the PID (`p') field.  All other fields may be declared optionally  in
       the  field  identifier  character  list that follows the <b>-F</b> option.  When a field selection character
       identifies an item <u>lsof</u> does not normally list - e.g., PPID, selected with <b>-R</b> - specification of  the
       field character - e.g., ``<b>-FR</b>'' - also selects the listing of the item.

       It  is  entirely possible to select a set of fields that cannot easily be parsed - e.g., if the field
       descriptor field is not selected, it may be difficult to identify file sets.  To help you avoid  this
       difficulty, <u>lsof</u> supports the <b>-F</b> option; it selects the output of all fields with NL terminators (the
       <b>-F0</b> option pair selects the output of all fields with NUL terminators).   For  compatibility  reasons
       neither <b>-F</b> nor <b>-F0</b> select the raw device field.

       These  are the fields that <u>lsof</u> will produce.  The single character listed first is the field identi-<font color="#ffffff" class="whiteout">fier.&nbsp;identifier.</font>
       fier.

            a    file access mode
            c    process command name (all characters from proc or
                 user structure)
            C    file structure share count
            d    file's device character code
            D    file's major/minor device number (0x&lt;hexadecimal&gt;)
            f    file descriptor
            F    file structure address (0x&lt;hexadecimal&gt;)
            G    file flaGs (0x&lt;hexadecimal&gt;; names if <b>+fg</b> follows)
            i    file's inode number
            k    link count
            l    file's lock status
            L    process login name
            m    marker between repeated output
            n    file name, comment, Internet address
            N    node identifier (ox&lt;hexadecimal&gt;
            o    file's offset (decimal)
            p    process ID (always selected)
            g    process group ID
            P    protocol name
            r    raw device number (0x&lt;hexadecimal&gt;)
            R    parent process ID
            s    file's size (decimal)
            S    file's stream identification
            t    file's type
            T    TCP/TPI information, identified by prefixes (the
                 `=' is part of the prefix):
                     QR=&lt;read queue size&gt;
                     QS=&lt;send queue size&gt;
                     SO=&lt;socket options and values&gt; (not all dialects)
                     SS=&lt;socket states&gt; (not all dialects)
                     ST=&lt;connection state&gt;
                     TF=&lt;TCP flags and values&gt; (not all dialects)
                     WR=&lt;window read size&gt;  (not all dialects)
                     WW=&lt;window write size&gt;  (not all dialects)
                 (TCP/TPI information isn't reported for all supported
                   UNIX dialects. The <b>-h</b> or <b>-?</b> help output for the
                   <b>-T</b> option will show what TCP/TPI reporting can be
                   requested.)
            u    process user ID
            z    Solaris 10 and higher zone name
            0    use NUL field terminator character in place of NL
            1-9  dialect-specific field identifiers (The output
                 of <b>-F?</b> identifies the information to be found
                 in dialect-specific fields.)

       You can get on-line help information on these characters and their descriptions by specifying the <b>-F?</b>
       option  pair.   (Escape  the  `?' character as your shell requires.)  Additional information on field
       content can be found in the <b>OUTPUT</b> section.

       As an example, ``<b>-F</b> <b>pcfn</b>'' will select the process ID (`p'),  command  name  (`c'),  file  descriptor
       (`f') and file name (`n') fields with an NL field terminator character; ``<b>-F</b> <b>pcfn0</b>'' selects the same
       output with a NUL (000) field terminator character.

       <u>Lsof</u> doesn't produce all fields for every process or file set, only those that are  available.   Some
       fields are mutually exclusive: file device characters and file major/minor device numbers; file inode
       number and protocol name; file name and stream identification; file size  and  offset.   One  or  the
       other member of these mutually exclusive sets will appear in field output, but not both.

       Normally <u>lsof</u> ends each field with a NL (012) character.  The 0 (zero) field identifier character may
       be specified to change the field terminator character to a NUL (000).  A NUL terminator may be easier
       to process with <u>xargs</u> <u>(1),</u> for example, or with programs whose quoting mechanisms may not easily cope
       with the range of characters in the field output.  When the NUL field terminator is in use, <u>lsof</u> ends
       each process and file set with a NL (012).

       Three  aids to producing programs that can process <u>lsof</u> field output are included in the <u>lsof</u> distri-<font color="#ffffff" class="whiteout">bution.&nbsp;distribution.</font>
       bution.  The first is a C header file, <u>lsof</u><b>_</b><u>fields.h</u>, that contains symbols for the field identifica-<font color="#ffffff" class="whiteout">tion&nbsp;identification</font>
       tion  characters,  indexes  for storing them in a table, and explanation strings that may be compiled
       into programs.  <u>Lsof</u> uses this header file.

       The second aid is a set of sample scripts that process field output, written in <u>awk</u>, <u>Perl</u> 4, and <u>Perl</u>
       5.  They're located in the <u>scripts</u> subdirectory of the <u>lsof</u> distribution.

       The third aid is the C library used for the <u>lsof</u> test suite.  The test suite is written in C and uses
       field output to  validate  the  correct  operation  of  <u>lsof</u>.   The  library  can  be  found  in  the
       <u>tests/LTlib.c</u>  file  of  the  <u>lsof</u>  distribution.   The library uses the first aid, the <u>lsof</u><b>_</b><u>fields.h</u>
       header file.

<b>BLOCKS</b> <b>AND</b> <b>TIMEOUTS</b>
       <u>Lsof</u> can be blocked by some kernel functions that it  uses  -  <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a>,  <a href="../man2/readlink.2.html#//apple_ref/doc/man/2/readlink"><u>readlink</u>(2)</a>,  and  <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a>.
       These functions are stalled in the kernel, for example, when the hosts where mounted NFS file systems
       reside become inaccessible.

       <u>Lsof</u> attempts to break these blocks with timers and child  processes,  but  the  techniques  are  not
       wholly reliable.  When <u>lsof</u> does manage to break a block, it will report the break with an error mes-<font color="#ffffff" class="whiteout">sage.&nbsp;message.</font>
       sage.  The messages may be suppressed with the <b>-t</b> and <b>-w</b> options.

       The default timeout value may be displayed with the <b>-h</b> or <b>-?</b>  option, and it may be changed with  the
       <b>-S</b>  <u>[t]</u> option.  The minimum for <u>t</u> is two seconds, but you should avoid small values, since slow sys-<font color="#ffffff" class="whiteout">tem&nbsp;system</font>
       tem responsiveness can cause short timeouts to expire unexpectedly and perhaps stop  <u>lsof</u>  before  it
       can produce any output.

       When <u>lsof</u> has to break a block during its access of mounted file system information, it normally con-<font color="#ffffff" class="whiteout">tinues,&nbsp;continues,</font>
       tinues, although with less information available to display about open files.

       <u>Lsof</u> can also be directed to avoid the protection of timers and child processes when using the kernel
       functions  that might block by specifying the <b>-O</b> option.  While this will allow <u>lsof</u> to start up with
       less overhead, it exposes <u>lsof</u> completely to the kernel situations that might  block  it.   Use  this
       option cautiously.

<b>AVOIDING</b> <b>KERNEL</b> <b>BLOCKS</b>
       You  can  use the <b>-b</b> option to tell <u>lsof</u> to avoid using kernel functions that would block.  Some cau-<font color="#ffffff" class="whiteout">tions&nbsp;cautions</font>
       tions apply.

       First, using this option usually requires that your system supply alternate device numbers  in  place
       of the device numbers that <u>lsof</u> would normally obtain with the <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a> and <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> kernel functions.
       See the <b>ALTERNATE</b> <b>DEVICE</b> <b>NUMBERS</b> section for more information on alternate device numbers.

       Second, you can't specify <u>names</u> for <u>lsof</u> to locate unless they're file system names.  This is because
       <u>lsof</u>  needs  to know the device and inode numbers of files listed with <u>names</u> in the <u>lsof</u> options, and
       the <b>-b</b> option prevents <u>lsof</u> from obtaining them.  Moreover, since <u>lsof</u> only has  device  numbers  for
       the file systems that have alternates, its ability to locate files on file systems depends completely
       on the availability and accuracy of the alternates.  If no alternates are available,  or  if  they're
       incorrect, <u>lsof</u> won't be able to locate files on the named file systems.

       Third,  if the names of your file system directories that <u>lsof</u> obtains from your system's mount table
       are symbolic links, <u>lsof</u> won't be able to resolve the links.  This is because the  <b>-b</b>  option  causes
       <u>lsof</u> to avoid the kernel <a href="../man2/readlink.2.html#//apple_ref/doc/man/2/readlink"><u>readlink</u>(2)</a> function it uses to resolve symbolic links.

       Finally,  using  the  <b>-b</b> option causes <u>lsof</u> to issue warning messages when it needs to use the kernel
       functions that the <b>-b</b> option directs it to avoid.  You can suppress these messages by specifying  the
       <b>-w</b>  option,  but  if  you do, you won't see the alternate device numbers reported in the warning mes-<font color="#ffffff" class="whiteout">sages.&nbsp;messages.</font>
       sages.

<b>ALTERNATE</b> <b>DEVICE</b> <b>NUMBERS</b>
       On some dialects, when <u>lsof</u> has to break a block because it can't get  information  about  a  mounted
       file  system  via  the <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a> and <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> kernel functions, or because you specified the <b>-b</b> option,
       <u>lsof</u> can obtain some of the information it needs - the device number and  possibly  the  file  system
       type  -  from  the  system mount table.  When that is possible, <u>lsof</u> will report the device number it
       obtained.  (You can suppress the report by specifying the <b>-w</b> option.)

       You can assist this process if your mount table is supported with an <u>/etc/mtab</u>  or  <u>/etc/mnttab</u>  file
       that  contains  an options field by adding a ``dev=xxxx'' field for mount points that do not have one
       in their options strings.  Note: you must be able to edit the file - i.e.,  some  mount  tables  like
       recent Solaris /etc/mnttab or Linux /proc/mounts are read-only and can't be modified.

       You  may  also be able to supply device numbers using the <b>+m</b> and <b>+m</b> <u>m</u> options, provided they are sup-<font color="#ffffff" class="whiteout">ported&nbsp;supported</font>
       ported by your dialect.  Check the output of <u>lsof's</u> <b>-h</b> or <b>-?</b>  options to see  if  the  <b>+m</b>  and  <b>+m</b>  <u>m</u>
       options are available.

       The ``xxxx'' portion of the field is the hexadecimal value of the file system's device number.  (Con-<font color="#ffffff" class="whiteout">sult&nbsp;(Consult</font>
       sult the <u>st</u><b>_</b><u>dev</u> field of the output of the <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a> and <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> functions for the appropriate  values
       for  your  file  systems.)   Here's  an  example from a Sun Solaris 2.6 <u>/etc/mnttab</u> for a file system
       remotely mounted via NFS:

            nfs  ignore,noquota,dev=2a40001

       There's an advantage to having ``dev=xxxx'' entries in your mount table  file,  especially  for  file
       systems that are mounted from remote NFS servers.  When a remote server crashes and you want to iden-<font color="#ffffff" class="whiteout">tify&nbsp;identify</font>
       tify its users by running <u>lsof</u> on one of its clients, <u>lsof</u> probably won't be able to get output  from
       the  <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a>  and  <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> functions for the file system.  If it can obtain the file system's device
       number from the mount table, it will be able to display the files open on the crashed NFS server.

       Some dialects that do not use an ASCII <u>/etc/mtab</u> or <u>/etc/mnttab</u> file for the mount  table  may  still
       provide  an  alternative device number in their internal mount tables.  This includes AIX, Apple Dar-<font color="#ffffff" class="whiteout">win,&nbsp;Darwin,</font>
       win, FreeBSD, NetBSD, OpenBSD, and Tru64 UNIX.  <u>Lsof</u> knows how to obtain the alternative device  num-<font color="#ffffff" class="whiteout">ber&nbsp;number</font>
       ber  for  these  dialects  and  uses  it  when  its attempt to <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a> or <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> the file system is
       blocked.

       If you're not sure your dialect supplies alternate device numbers for file systems from its mount ta-<font color="#ffffff" class="whiteout">ble,&nbsp;table,</font>
       ble, use this <u>lsof</u> incantation to see if it reports any alternate device numbers:


              lsof -b

       Look for standard error file warning messages that begin ``assuming "dev=xxxx" from ...''.

<b>KERNEL</b> <b>NAME</b> <b>CACHE</b>
       <u>Lsof</u>  is  able to examine the kernel's name cache or use other kernel facilities (e.g., the ADVFS 4.x
       tag_to_path() function under Tru64 UNIX) on some dialects for most file system types, excluding  AFS,
       and  extract recently used path name components from it.  (AFS file system path lookups don't use the
       kernel's name cache; some Solaris VxFS file system operations apparently don't use it, either.)

       <u>Lsof</u> reports the complete paths it finds in the NAME column.  If <u>lsof</u> can't report all components  in
       a  path, it reports in the NAME column the file system name, followed by a space, two `-' characters,
       another space, and the name components it has located, separated by the `/' character.

       When <u>lsof</u> is run in repeat mode - i.e., with the <b>-r</b> option specified - the extent  to  which  it  can
       report  path  name  components  for the same file may vary from cycle to cycle.  That's because other
       running processes can cause the kernel to remove entries from its name cache and  replace  them  with
       others.

       <u>Lsof's</u>  use  of  the kernel name cache to identify the paths of files can lead it to report incorrect
       components under some circumstances.  This can happen when the kernel name cache uses device and node
       number as a key (e.g., SCO OpenServer) and a key on a rapidly changing file system is reused.  If the
       UNIX dialect's kernel doesn't purge the name cache entry for a file when it  is  unlinked,  <u>lsof</u>  may
       find a reference to the wrong entry in the cache.  The <u>lsof</u> FAQ (The <b>FAQ</b> section gives its location.)
       has more information on this situation.

       <u>Lsof</u> can report path name components for these dialects:

            FreeBSD
            HP-UX
            Linux
            NetBSD
            NEXTSTEP
            OpenBSD
            OPENSTEP
            SCO OpenServer
            SCO|Caldera UnixWare
            Solaris
            Tru64 UNIX

       <u>Lsof</u> can't report path name components for these dialects:

            AIX

       If you want to know why <u>lsof</u> can't report path name components for some dialects, see  the  <u>lsof</u>  FAQ
       (The <b>FAQ</b> section gives its location.)

<b>DEVICE</b> <b>CACHE</b> <b>FILE</b>
       Examining  all members of the <u>/dev</u> (or <u>/devices</u>) node tree with <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> functions can be time consum-<font color="#ffffff" class="whiteout">ing.&nbsp;consuming.</font>
       ing.  What's more, the information that <u>lsof</u> needs - device number, inode number, and path  -  rarely
       changes.

       Consequently,  <u>lsof</u>  normally  maintains  an ASCII text file of cached <u>/dev</u> (or <u>/devices</u>) information
       (exception: the /proc-based Linux <u>lsof</u> where it's not needed.)  The local  system  administrator  who
       builds <u>lsof</u> can control the way the device cache file path is formed, selecting from these options:

            Path from the <b>-D</b> option;
            Path from an environment variable;
            System-wide path;
            Personal path (the default);
            Personal path, modified by an environment variable.

       Consult  the  output  of the <b>-h</b>, <b>-D?</b> <b>,</b> or <b>-?</b>  help options for the current state of device cache sup-<font color="#ffffff" class="whiteout">port.&nbsp;support.</font>
       port.  The help output lists the default read-mode device cache file path that is in effect  for  the
       current  invocation  of <u>lsof</u>.  The <b>-D?</b>  option output lists the read-only and write device cache file
       paths, the names of any applicable environment variables, and the personal device cache path  format.

       <u>Lsof</u>  can  detect that the current device cache file has been accidentally or maliciously modified by
       integrity checks, including the computation and verification of a sixteen bit Cyclic Redundancy Check
       (CRC)  sum on the file's contents.  When <u>lsof</u> senses something wrong with the file, it issues a warn-<font color="#ffffff" class="whiteout">ing&nbsp;warning</font>
       ing and attempts to remove the current cache file and create a new copy, but only to a path that  the
       process can legitimately write.

       The path from which a <u>lsof</u> process may attempt to read a device cache file may not be the same as the
       path to which it can legitimately write.  Thus when <u>lsof</u> senses that it needs to  update  the  device
       cache  file, it may choose a different path for writing it from the path from which it read an incor-<font color="#ffffff" class="whiteout">rect&nbsp;incorrect</font>
       rect or outdated version.

       If available, the <b>-Dr</b> option will inhibit the writing of a  new  device  cache  file.   (It's  always
       available when specified without a path name argument.)

       When a new device is added to the system, the device cache file may need to be recreated.  Since <u>lsof</u>
       compares the mtime of the device cache file with the mtime and ctime of the <u>/dev</u> (or <u>/devices</u>) direc-<font color="#ffffff" class="whiteout">tory,&nbsp;directory,</font>
       tory, it usually detects that a new device has been added; in that case <u>lsof</u> issues a warning message
       and attempts to rebuild the device cache file.

       Whenever <u>lsof</u> writes a device cache file, it sets its ownership to the  real  UID  of  the  executing
       process,  and  its  permission  modes to 0600, this restricting its reading and writing to the file's
       owner.

<b>LSOF</b> <b>PERMISSIONS</b> <b>THAT</b> <b>AFFECT</b> <b>DEVICE</b> <b>CACHE</b> <b>FILE</b> <b>ACCESS</b>
       Two permissions of the <u>lsof</u> executable affect its ability to access device cache files.  The  permis-<font color="#ffffff" class="whiteout">sions&nbsp;permissions</font>
       sions are set by the local system administrator when <u>lsof</u> is installed.

       The  first  and  rarer  permission  is  setuid-root.  It comes into effect when <u>lsof</u> is executed; its
       effective UID is then root, while its real (i.e., that of the logged-on user) UID is not.   The  <u>lsof</u>
       distribution recommends that versions for these dialects run setuid-root.

            HP-UX 11.11 and 11.23
            Linux

       The second and more common permission is setgid.  It comes into effect when the effective group IDen-<font color="#ffffff" class="whiteout">tification&nbsp;IDentification</font>
       tification number (GID) of the <u>lsof</u> process is set to one that can access  kernel  memory  devices  -<font color="#ffffff" class="whiteout">e.g.,&nbsp;devicese.g.,</font>
       e.g., ``kmem'', ``sys'', or ``system''.

       An  <u>lsof</u>  process  that has setgid permission usually surrenders the permission after it has accessed
       the kernel memory devices.  When it does that, <u>lsof</u> can allow more liberal device cache  path  forma-<font color="#ffffff" class="whiteout">tions.&nbsp;formations.</font>
       tions.   The  <u>lsof</u> distribution recommends that versions for these dialects run setgid and be allowed
       to surrender setgid permission.

            AIX 5.[12] and 5.3-ML1
            Apple Darwin 7.x Power Macintosh systems
            FreeBSD 4.x, 4.1x, 5.x and [67].x for x86-based systems
            FreeBSD 5.x and [67].x for Alpha, AMD64 and Sparc64-based
                systems
            HP-UX 11.00
            NetBSD 1.[456], 2.x and 3.x for Alpha, x86, and SPARC-based
                systems
            NEXTSTEP 3.[13] for NEXTSTEP architectures
            OpenBSD 2.[89] and 3.[0-9] for x86-based systems
            OPENSTEP 4.x
            SCO OpenServer Release 5.0.6 for x86-based systems
            SCO|Caldera UnixWare 7.1.4 for x86-based systems
            Solaris 2.6, 8, 9 and 10
            Tru64 UNIX 5.1

       (Note: <u>lsof</u> for AIX 5L and above needs setuid-root permission if its <b>-X</b> option is used.)

       <u>Lsof</u> for these dialects does not support a device cache, so the permissions given to  the  executable
       don't apply to the device cache file.

            Linux

<b>DEVICE</b> <b>CACHE</b> <b>FILE</b> <b>PATH</b> <b>FROM</b> <b>THE</b> <b>-D</b> <b>OPTION</b>
       The <b>-D</b> option provides limited means for specifying the device cache file path.  Its <b>?</b>  function will
       report the read-only and write device cache file paths that <u>lsof</u> will use.

       When the <b>-D</b> <b>b</b>, <b>r</b>, and <b>u</b> functions are available, you can use them to request that the cache  file  be
       built  in  a  specific  location  (<b>b</b>[<u>path</u>]);  read  but  not  rebuilt  (<b>r</b>[<u>path</u>]); or read and rebuilt
       (<b>u</b>[<u>path</u>]).  The <b>b</b>, <b>r</b>, and <b>u</b> functions are restricted under some conditions.  They are restricted when
       the  <u>lsof</u>  process  is setuid-root.  The path specified with the <b>r</b> function is always read-only, even
       when it is available.

       The <b>b</b>, <b>r</b>, and <b>u</b> functions are also restricted when the <u>lsof</u> process runs setgid and <u>lsof</u> doesn't sur-<font color="#ffffff" class="whiteout">render&nbsp;surrender</font>
       render the setgid permission.  (See the <b>LSOF</b> <b>PERMISSIONS</b> <b>THAT</b> <b>AFFECT</b> <b>DEVICE</b> <b>CACHE</b> <b>FILE</b> <b>ACCESS</b> section
       for a list of implementations that normally don't surrender their setgid permission.)

       A further <b>-D</b> function, <b>i</b> (for ignore), is always available.

       When available, the <b>b</b> function tells <u>lsof</u> to read device information from the kernel with the <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a>
       function and build a device cache file at the indicated path.

       When  available,  the <b>r</b> function tells <u>lsof</u> to read the device cache file, but not update it.  When a
       path argument accompanies <b>-Dr</b>, it names the device cache file path.  The <b>r</b> function is always  avail-<font color="#ffffff" class="whiteout">able&nbsp;available</font>
       able  when it is specified without a path name argument.  If <u>lsof</u> is not running setuid-root and sur-<font color="#ffffff" class="whiteout">renders&nbsp;surrenders</font>
       renders its setgid permission, a path name argument may accompany the <b>r</b> function.

       When available, the <b>u</b> function tells <u>lsof</u> to attempt to read and use the device cache  file.   If  it
       can't  read  the  file,  or  if it finds the contents of the file incorrect or outdated, it will read
       information from the kernel, and attempt to write an updated version of the device  cache  file,  but
       only to a path it considers legitimate for the <u>lsof</u> process effective and real UIDs.

<b>DEVICE</b> <b>CACHE</b> <b>PATH</b> <b>FROM</b> <b>AN</b> <b>ENVIRONMENT</b> <b>VARIABLE</b>
       <u>Lsof's</u>  second choice for the device cache file is the contents of the LSOFDEVCACHE environment vari-<font color="#ffffff" class="whiteout">able.&nbsp;variable.</font>
       able.  It avoids this choice if the <u>lsof</u> process is setuid-root, or the real UID of  the  process  is
       root.

       A  further  restriction  applies  to a device cache file path taken from the LSOFDEVCACHE environment
       variable: <u>lsof</u> will not write a device cache file to the path if the <u>lsof</u> process  doesn't  surrender
       its  setgid  permission.   (See the <b>LSOF</b> <b>PERMISSIONS</b> <b>THAT</b> <b>AFFECT</b> <b>DEVICE</b> <b>CACHE</b> <b>FILE</b> <b>ACCESS</b> section for
       information on implementations that don't surrender their setgid permission.)

       The local system administrator can disable the use of the LSOFDEVCACHE environment variable or change
       its name when building <u>lsof</u>.  Consult the output of <b>-D?</b>  for the environment variable's name.

<b>SYSTEM-WIDE</b> <b>DEVICE</b> <b>CACHE</b> <b>PATH</b>
       The local system administrator may choose to have a system-wide device cache file when building <u>lsof</u>.
       That file will generally be constructed by a special system administration procedure when the  system
       is  booted  or when the contents of <u>/dev</u> or <u>/devices</u>) changes.  If defined, it is <u>lsof's</u> third device
       cache file path choice.

       You can tell that a system-wide device cache file is in effect for your local installation by examin-<font color="#ffffff" class="whiteout">ing&nbsp;examining</font>
       ing the <u>lsof</u> help option output - i.e., the output from the <b>-h</b> or <b>-?</b>  option.

       <u>Lsof</u>  will  never  write to the system-wide device cache file path by default.  It must be explicitly
       named with a <b>-D</b> function in a root-owned procedure.  Once the file has been  written,  the  procedure
       must change its permission modes to 0644 (owner-read and owner-write, group-read, and other-read).

<b>PERSONAL</b> <b>DEVICE</b> <b>CACHE</b> <b>PATH</b> <b>(DEFAULT)</b>
       The  default device cache file path of the <u>lsof</u> distribution is one recorded in the home directory of
       the real UID that executes <u>lsof</u>.  Added to the home directory is a second path component of the  form
       <u>.lsof</u><b>_</b><u>hostname</u>.

       This  is  <u>lsof's</u>  fourth device cache file path choice, and is usually the default.  If a system-wide
       device cache file path was defined when <u>lsof</u> was built, this fourth choice will be applied when  <u>lsof</u>
       can't find the system-wide device cache file.  This is the <b>only</b> time <u>lsof</u> uses two paths when reading
       the device cache file.

       The <u>hostname</u> part of the second component is the base name of the  executing  host,  as  returned  by
       <!-- a --><u>gethostname</u>(2)<!-- /a -->.   The base name is defined to be the characters preceding the first `.'  in the <!-- a --><u>geth</u><!-- /a -->-<font color="#ffffff" class="whiteout">ostname(2)&nbsp;gethostname(2)</font>
       <!-- a --><u>ostname</u>(2)<!-- /a --> output, or all the <!-- a --><u>gethostname</u>(2)<!-- /a --> output if it contains no `.'.

       The device cache file belongs to the user ID and is readable and writable by  the  user  ID  alone  -<font color="#ffffff" class="whiteout">i.e.,&nbsp;alonei.e.,</font>
       i.e.,  its  modes are 0600.  Each distinct real user ID on a given host that executes <u>lsof</u> has a dis-<font color="#ffffff" class="whiteout">tinct&nbsp;distinct</font>
       tinct device cache file.  The <u>hostname</u> part of the  path  distinguishes  device  cache  files  in  an
       NFS-mounted home directory into which device cache files are written from several different hosts.

       The  personal  device  cache file path formed by this method represents a device cache file that <u>lsof</u>
       will attempt to read, and will attempt to write should it not exist or should its contents be  incor-<font color="#ffffff" class="whiteout">rect&nbsp;incorrect</font>
       rect or outdated.

       The <b>-Dr</b> option without a path name argument will inhibit the writing of a new device cache file.

       The  <b>-D?</b>   option will list the format specification for constructing the personal device cache file.
       The conversions used in the format specification are described in the <u>00DCACHE</u> file of the <u>lsof</u>  dis-<font color="#ffffff" class="whiteout">tribution.&nbsp;distribution.</font>
       tribution.

<b>MODIFIED</b> <b>PERSONAL</b> <b>DEVICE</b> <b>CACHE</b> <b>PATH</b>
       If  this  option  is defined by the local system administrator when <u>lsof</u> is built, the LSOFPERSDCPATH
       environment variable contents may be used to add a component of the personal device cache file  path.

       The LSOFPERSDCPATH variable contents are inserted in the path at the place marked by the local system
       administrator with the ``%p'' conversion in the  HASPERSDC  format  specification  of  the  dialect's
       <u>machine.h</u>  header  file.   (It's  placed right after the home directory in the default <u>lsof</u> distribu-<font color="#ffffff" class="whiteout">tion.)&nbsp;distribution.)</font>
       tion.)

       Thus, for example, if LSOFPERSDCPATH contains ``LSOF'', the home  directory  is  ``/Homes/abe'',  the
       host  name  is ``lsof.itap.purdue.edu'', and the HASPERSDC format is the default (``%h/%p.lsof_%L''),
       the modified personal device cache file path is:

            /Homes/abe/LSOF/.lsof_vic

       The LSOFPERSDCPATH environment variable is ignored when the <u>lsof</u> process is setuid-root or  when  the
       real UID of the process is root.

       <u>Lsof</u> will not write to a modified personal device cache file path if the <u>lsof</u> process doesn't surren-<font color="#ffffff" class="whiteout">der&nbsp;surrender</font>
       der setgid permission.  (See the <b>LSOF</b> <b>PERMISSIONS</b> <b>THAT</b> <b>AFFECT</b> <b>DEVICE</b> <b>CACHE</b> <b>FILE</b> <b>ACCESS</b> section for  a
       list of implementations that normally don't surrender their setgid permission.)

       If,  for example, you want to create a sub-directory of personal device cache file paths by using the
       LSOFPERSDCPATH environment variable to name it, and <u>lsof</u> doesn't surrender its setgid permission, you
       will  have  to allow <u>lsof</u> to create device cache files at the standard personal path and move them to
       your subdirectory with shell commands.

       The local system administrator may: disable this option when <u>lsof</u> is built; change the  name  of  the
       environment  variable  from  LSOFPERSDCPATH to something else; change the HASPERSDC format to include
       the personal path component in another place; or exclude the personal path component entirely.   Con-<font color="#ffffff" class="whiteout">sult&nbsp;Consult</font>
       sult the output of the <b>-D?</b>  option for the environment variable's name and the HASPERSDC format spec-<font color="#ffffff" class="whiteout">ification.&nbsp;specification.</font>
       ification.

<b>DIAGNOSTICS</b>
       Errors are identified with messages on the standard error file.

       <u>Lsof</u> returns a one (1) if any error was detected, including the failure to locate command names, file
       names,  Internet  addresses  or  files,  login names, NFS files, PIDs, PGIDs, or UIDs it was asked to
       list.  If the <b>-V</b> option is specified, <u>lsof</u> will indicate the search items it failed to list.

       It returns a zero (0) if no errors were detected and if it was able to list  some  information  about
       all the specified search arguments.


       When  <u>lsof</u>  cannot open access to <u>/dev</u> (or <u>/devices</u>) or one of its subdirectories, or get information
       on a file in them with <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a>, it issues a warning message and  continues.   That  <u>lsof</u>  will  issue
       warning  messages  about  inaccessible  files in <u>/dev</u> (or <u>/devices</u>) is indicated in its help output -<font color="#ffffff" class="whiteout">requested&nbsp;outputrequested</font>
       requested with the <b>-h</b> or &gt;B -?  options -  with the message:

            Inaccessible /dev warnings are enabled.

       The warning message may be suppressed with the <b>-w</b> option.  It may also have been  suppressed  by  the
       system  administrator when <u>lsof</u> was compiled by the setting of the WARNDEVACCESS definition.  In this
       case, the output from the help options will include the message:

            Inaccessible /dev warnings are disabled.

       Inaccessible device warning messages usually disappear after <u>lsof</u> has created a working device  cache
       file.

<b>EXAMPLES</b>
       For  a  more  extensive set of examples, documented more fully, see the <u>00QUICKSTART</u> file of the <u>lsof</u>
       distribution.

       To list all open files, use:

              lsof

       To list all open Internet, x.25 (HP-UX), and UNIX domain files, use:

              lsof -i -U

       To list all open IPv4 network files in use by the process whose PID is 1234, use:

              lsof -i 4 -a -p 1234

       Presuming the UNIX dialect supports IPv6, to list only open IPv6 network files, use:

              lsof -i 6

       To list all files using any protocol on ports 513, 514, or 515 of host wonderland.cc.purdue.edu, use:

              lsof -i @wonderland.cc.purdue.edu:513-515

       To  list all files using any protocol on any port of mace.cc.purdue.edu (cc.purdue.edu is the default
       domain), use:

              lsof -i @mace

       To list all open files for login name ``abe'', or user ID 1234, or process 456, or  process  123,  or
       process 789, use:

              lsof -p 456,123,789 -u 1234,abe

       To list all open files on device /dev/hd4, use:

              lsof /dev/hd4

       To find the process that has /u/abe/foo open, use:

              lsof /u/abe/foo

       To send a SIGHUP to the processes that have /u/abe/bar open, use:

              kill -HUP `lsof -t /u/abe/bar`

       To find any open file, including an open UNIX domain socket file, with the name <u>/dev/log</u>, use:

              lsof /dev/log

       To find processes with open files on the NFS file system named <u>/nfs/mount/point</u> whose server is inac-<font color="#ffffff" class="whiteout">cessible,&nbsp;inaccessible,</font>
       cessible, and presuming your mount table supplies the device number for <u>/nfs/mount/point</u>, use:

              lsof -b /nfs/mount/point

       To do the preceding search with warning messages suppressed, use:

              lsof -bw /nfs/mount/point

       To ignore the device cache file, use:

              lsof -Di

       To obtain PID and command name field output for each process, file descriptor,  file  device  number,
       and file inode number for each file of each process, use:

              lsof -FpcfDi

       To  list  the  files  at  descriptors  1 and 3 of every process running the <u>lsof</u> command for login ID
       ``abe'' every 10 seconds, use:

              lsof -c lsof -a -d 1 -d 3 -u abe -r10

       To list the current working directory of processes running a command that is exactly four  characters
       long and has an 'o' or 'O' in character three, use this regular expression form of the <b>-c</b> <u>c</u> option:

              lsof -c /^..o.$/i -a -d cwd

       To find an IP version 4 socket file by its associated numeric dot-form address, use:

              lsof -i@128.210.15.17

       To  find  an IP version 6 socket file (when the UNIX dialect supports IPv6) by its associated numeric
       colon-form address, use:

              lsof -i@[0:1:2:3:4:5:6:7]

       To find an IP version 6 socket file (when the UNIX dialect supports IPv6) by  an  associated  numeric
       colon-form address that has a run of zeroes in it - e.g., the loop-back address - use:

              lsof -i@[::1]

<b>BUGS</b>
       Since  <u>lsof</u> reads kernel memory in its search for open files, rapid changes in kernel memory may pro-<font color="#ffffff" class="whiteout">duce&nbsp;produce</font>
       duce unpredictable results.

       When a file has multiple record locks, the lock status character (following the file  descriptor)  is
       derived  from  a  test of the first lock structure, not from any combination of the individual record
       locks that might be described by multiple lock structures.

       <u>Lsof</u> can't search for files with restrictive access permissions by <u>name</u> unless it is  installed  with
       root  set-UID  permission.   Otherwise  it is limited to searching for files to which its user or its
       set-GID group (if any) has access permission.

       The display of the destination address of a raw socket (e.g., for <u>ping</u>) depends on the UNIX operating
       system.  Some dialects store the destination address in the raw socket's protocol control block, some
       do not.

       <u>Lsof</u> can't always represent Solaris device numbers in the same way that <a href="../man1/ls.1.html#//apple_ref/doc/man/1/ls"><u>ls</u>(1)</a> does.  For example, the
       major  and  minor  device numbers that the <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat"><u>lstat</u>(2)</a> and <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat"><u>stat</u>(2)</a> functions report for the directory on
       which CD-ROM files are mounted (typically <u>/cdrom</u>) are not the same as the ones that  it  reports  for
       the  device on which CD-ROM files are mounted (typically <u>/dev/sr0</u>).  (<u>Lsof</u> reports the directory num-<font color="#ffffff" class="whiteout">bers.)&nbsp;numbers.)</font>
       bers.)

       The support for <u>/proc</u> file systems is available only for BSD and  Tru64  UNIX  dialects,  Linux,  and
       dialects derived from SYSV R4 - e.g., FreeBSD, NetBSD, OpenBSD, Solaris, UnixWare.

       Some  <u>/proc</u>  file  items  -  device  number,  inode  number,  and file size - are unavailable in some
       dialects.  Searching for files in a <u>/proc</u> file system may require that the full path name  be  speci-<font color="#ffffff" class="whiteout">fied.&nbsp;specified.</font>
       fied.

       No  text  (<b>txt</b>) file descriptors are displayed for Linux processes.  All entries for files other than
       the current working directory, the root directory, and numerical file  descriptors  are  labeled  <b>mem</b>
       descriptors.

       <u>Lsof</u> can't search for Tru64 UNIX named pipes by name, because their kernel implementation of <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat">lstat(2)</a>
       returns an improper device number for a named pipe.

       <u>Lsof</u> can't report fully or correctly on HP-UX 9.01, 10.20, and 11.00 locks  because  of  insufficient
       access  to  kernel  data  or  errors in the kernel data.  See the <u>lsof</u> FAQ (The <b>FAQ</b> section gives its
       location.)  for details.

       The AIX SMT file type is a fabrication.  It's made up for  file  structures  whose  type  (15)  isn't
       defined in the AIX <u>/usr/include/sys/file.h</u> header file.  One way to create such file structures is to
       run X clients with the DISPLAY variable set to ``:0.0''.

       The <b>+|-f</b><u>[cfgGn]</u> option is not supported under /proc-based Linux <u>lsof</u>, because it doesn't read  kernel
       structures from kernel memory.

<b>ENVIRONMENT</b>
       <u>Lsof</u> may access these environment variables.

       LANG              defines  a language locale.  See <a href="../man3/setlocale.3.html#//apple_ref/doc/man/3/setlocale"><u>setlocale</u>(3)</a> for the names of other variables that
                         can be used in place of LANG - e.g., LC_ALL, LC_TYPE, etc.

       LSOFDEVCACHE      defines the path to a device cache file.  See the <b>DEVICE</b> <b>CACHE</b> <b>PATH</b> <b>FROM</b>  <b>AN</b>  <b>ENVI</b>-<font color="#ffffff" class="whiteout">RONMENT&nbsp;ENVIRONMENT</font>
                         <b>RONMENT</b> <b>VARIABLE</b> section for more information.

       LSOFPERSDCPATH    defines  the  middle  component of a modified personal device cache file path.  See
                         the <b>MODIFIED</b> <b>PERSONAL</b> <b>DEVICE</b> <b>CACHE</b> <b>PATH</b> section for more information.

<b>FAQ</b>
       Frequently-asked questions and their answers (an FAQ) are available in the <u>00FAQ</u>  file  of  the  <u>lsof</u>
       distribution.

       That  file  is  also available via anonymous ftp from <u>lsof.itap.purdue.edu</u> at <u>pub/tools/unix/lsof</u>FAQ<u>.</u>
       The URL is:

              <a href="ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/FAQ">ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/FAQ</a>

<b>FILES</b>
       <u>/dev/kmem</u>         kernel virtual memory device

       <u>/dev/mem</u>          physical memory device

       <u>/dev/swap</u>         system paging device

       <u>.lsof</u><b>_</b><u>hostname</u>    <u>lsof's</u> device cache file (The suffix, <u>hostname</u>,  is  the  first  component  of  the
                         host's name returned by <!-- a --><u>gethostname</u>(2)<!-- /a --><u>.)</u>

<b>AUTHORS</b>
       <u>Lsof</u> was written by Victor A. Abell &lt;abe@purdue.edu&gt; of Purdue University.  Many others have contrib-
       uted to <u>lsof</u>.  They're listed in the <u>00CREDITS</u> file of the <u>lsof</u> distribution.

<b>DISTRIBUTION</b>
       The latest distribution of <u>lsof</u> is available via anonymous ftp from  the  host  <u>lsof.itap.purdue.edu</u>.
       You'll find the <u>lsof</u> distribution in the <u>pub/tools/unix/lsof</u> directory.

       You can also use this URL:

              <a href="ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof">ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof</a>

       <u>Lsof</u>   is  also  mirrored  elsewhere.   When  you  access  <u>lsof.itap.purdue.edu</u>  and  change  to  its
       <u>pub/tools/unix/lsof</u> directory, you'll be given a list of some mirror sites.  The  <u>pub/tools/unix/lsof</u>
       directory also contains a more complete list in its <u>mirrors</u> file.  Use mirrors with caution - not all
       mirrors always have the latest <u>lsof</u> revision.

       Some pre-compiled <u>Lsof</u> executables are available on <u>lsof.itap.purdue.edu</u>, but their use  is  discour-
       aged - it's better that you build your own from the sources.  If you feel you must use a pre-compiled
       executable, please read the cautions that appear in the README files of the <u>pub/tools/unix/lsof/bina</u>-
       <u>ries</u> subdirectories and in the 00* files of the distribution.

       More  information  on  the  <u>lsof</u> distribution can be found in its <u>README.lsof</u><b>_</b><u>&lt;version&gt;</u> file.  If you
       intend to get the <u>lsof</u> distribution and build it, please read <u>README.lsof</u><b>_</b><u>&lt;version&gt;</u> and the other 00*
       files of the distribution before sending questions to the author.

<b>SEE</b> <b>ALSO</b>
       Not all the following manual pages may exist in every UNIX dialect to which <u>lsof</u> has been ported.

       <a href="../man2/access.2.html#//apple_ref/doc/man/2/access">access(2)</a>,  <a href="../man1/awk.1.html#//apple_ref/doc/man/1/awk">awk(1)</a>,  <!-- a -->crash(1)<!-- /a -->,  <!-- a -->fattach(3C)<!-- /a -->,  <!-- a -->ff(1)<!-- /a -->,  <!-- a -->fstat(8)<!-- /a -->, <a href="../man1/fuser.1.html#//apple_ref/doc/man/1/fuser">fuser(1)</a>, <!-- a -->gethostname(2)<!-- /a -->, <a href="../man3/isprint.3.html#//apple_ref/doc/man/3/isprint">isprint(3)</a>,
       <a href="../man1/kill.1.html#//apple_ref/doc/man/1/kill">kill(1)</a>, <a href="../man2/lstat.2.html#//apple_ref/doc/man/2/lstat">lstat(2)</a>, <!-- a -->modload(8)<!-- /a -->, <a href="mount.8.html#//apple_ref/doc/man/8/mount">mount(8)</a>, <a href="../man1/netstat.1.html#//apple_ref/doc/man/1/netstat">netstat(1)</a>, <!-- a -->ofiles(8L)<!-- /a -->, <a href="../man1/perl.1.html#//apple_ref/doc/man/1/perl">perl(1)</a>, <a href="../man1/ps.1.html#//apple_ref/doc/man/1/ps">ps(1)</a>, <a href="../man2/readlink.2.html#//apple_ref/doc/man/2/readlink">readlink(2)</a>,  <a href="../man3/setlocale.3.html#//apple_ref/doc/man/3/setlocale">setlo</a>-
       <a href="../man3/setlocale.3.html#//apple_ref/doc/man/3/setlocale">cale(3)</a>, <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat">stat(2)</a>, <a href="../man1/uname.1.html#//apple_ref/doc/man/1/uname">uname(1)</a>.



                                                Revision-4.78                                        LSOF(8)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/lsof.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/lsof.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/lsof.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Generating Primary Key Values</TITLE></HEAD><BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../index.html" target="_top">Documentation</a> <b>></b> <a href="../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.22.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.24.html"><img src="next.gif" border="0" alt="Next"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606100"> </A><A NAME="31742"> </A>Generating Primary Key Values</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606101"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606102"> </A>Describes how the primary key is generated for a new object in EOF. It also explains the various ways the user can generate a primary key.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606103"> </A>Description</H2><P CLASS="Body"><A NAME="pgfId=606104"> </A>Primary keys are used in a database to identify a row in a table. Each key is generated on the client side before its corresponding row is inserted into the database. </P><P CLASS="Body"><A NAME="pgfId=606105"> </A>There are several ways to generate the primary key, some of which are outlined below.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606106"> </A>Class Property of an Enterprise Object</H3><P CLASS="Body"><A NAME="pgfId=606108"> </A>The primary key can be generated by the user in the Enterprise Object (EO) when it is created. EOModeler allows the primary key to be made a class property and hence, an instance variable of the Enterprise Object. The user has the responsibility of creating a unique primary key each time a new EO is instantiated.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606109"> </A>Adaptor-Generated Primary Key</H3><P CLASS="Body"><A NAME="pgfId=606111"> </A>In Enterprise Objects Framework's default primary key mechanism, the EOAdaptorChannel generates the primary keys. It collaborates with the database server to maintain a linear sequence of nonrepeating primary keys per entity. The primary key attribute must not be a class property. If the type of the primary key attribute is a 12-byte NSData, EOF generates unique primary keys without going to the database.</P><DIV><H4 CLASS="Heading3"><A NAME="pgfId=606112"> </A>Advantages</H4><UL><LI CLASS="Bulleted"><A NAME="pgfId=606113"> </A>	Easy-to-use; the user does not have to bother with primary key generation.</LI></UL></DIV><DIV><H4 CLASS="Heading3"><A NAME="pgfId=606114"> </A>Disadvantages</H4><UL><LI CLASS="Bulleted"><A NAME="pgfId=607096"> </A>	Server-specific.</LI><LI CLASS="Bulleted"><A NAME="pgfId=606116"> </A>Requires server setup using EOModeler's SQL generation.</LI><LI CLASS="Bulleted"><A NAME="pgfId=606117"> </A>Requires a round-trip to the database at run time for each new key.</LI><LI CLASS="Bulleted"><A NAME="pgfId=606118"> </A>Cannot generate a compound primary key.</LI></UL></DIV></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606120"> </A>Delegate of the Database Context</H3><P CLASS="Body"><A NAME="pgfId=606122"> </A>Before using the adaptor's default primary key generation, the EODatabaseContext's delegate is given a chance to generate the primary key. This method is used only if it satisfies the following conditions</P><UL><LI CLASS="Bulleted"><A NAME="pgfId=606123"> </A>The database context has a delegate.</LI><LI CLASS="Bulleted"><A NAME="pgfId=606124"> </A>The delegate implements <TT CLASS="Code">databaseContextNewPrimaryKeyForObject</TT>.</LI><LI CLASS="Bulleted"><A NAME="pgfId=606125"> </A>The method returns a non-null value.</LI></UL></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606127"> </A>Custom Stored Procedure</H3><P CLASS="Body"><A NAME="pgfId=606129"> </A>The user can create a stored procedure for the generation of the primary keys and add it to model. The stored procedure is set as the primary key stored procedure for the entity.</P><DIV><H4 CLASS="Heading3"><A NAME="pgfId=606130"> </A>Advantages</H4><UL><LI CLASS="Bulleted"><A NAME="pgfId=606131"> </A>	Useful if non-EOF applications share the database.</LI></UL></DIV><DIV><H4 CLASS="Heading3"><A NAME="pgfId=606132"> </A>Disadvantages</H4><UL><LI CLASS="Bulleted"><A NAME="pgfId=606133"> </A>	Requires a round trip to the server for each primary key.</LI></UL></DIV></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606135"> </A>Propagation of Primary Keys</H3><P CLASS="Body"><A NAME="pgfId=606137"> </A>The EOModeler allows the user to set the &quot;Propagate Primary Key&quot; in the advanced relationship inspector. When the user creates an object within an entity, that entity's primary key is used as the primary key for the new object.</P><P CLASS="Body"><A NAME="pgfId=606138"> </A>For example, a column in table A can be the primary key for table A, as well as the foreign key to a table B. </P></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606139"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606140"> </A>EOTemporaryGlobalID class specification in the <EM CLASS="Emphasis">Enterprise Objects Framework Reference</EM></LI><LI CLASS="Bulleted"><A NAME="pgfId=613398"> </A>EOUtilities class specification (Java) in the <EM CLASS="Emphasis">Enterprise Objects Framework Reference</EM></LI><LI CLASS="Bulleted"><A NAME="pgfId=617778"> </A>EOUtilities category specification (Objective-C) in the <EM CLASS="Emphasis">Enterprise Objects Framework Reference</EM></LI><LI CLASS="Bulleted"><A NAME="pgfId=613399"> </A><A HREF="ProgrammingTopics.34.html#24267" CLASS="XRef">Accessing Non-Class Property Values</A></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=617810"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606142"> </A>	How do I generate primary key using stored procedures?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606143"> </A>	How do I generate primary key using the delegate of the database context?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606144"> </A>	How do I generate primary key using class properties?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606145"> </A>	How do I propagate primary keys?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606146"> </A>	How do I generate primary key using the default primary key generation mechanism?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606147"> </A>	How do I generate a primary key at the adaptor layer without a database transaction? </LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606148"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606149"> </A>Primary</LI><LI CLASS="Bulleted"><A NAME="pgfId=617768"> </A>Key</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606152"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606153"> </A>22 July, 1998. Seejo Pylappan. First Draft.<BR>19 November, 1998. Clif Liu. Second Draft.</P><PRE CLASS="Code"><A NAME="pgfId=602450"> </A></PRE></DIV><hr alt="">&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.22.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.24.html"><img src="next.gif" border="0" alt="Next"></A><!-- start of footer --><!--#include file="footer" --><!-- end of footer --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
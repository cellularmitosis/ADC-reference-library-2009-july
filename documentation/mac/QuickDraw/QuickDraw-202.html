<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PixMap (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING202></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-201.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-203.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-197.html"><B>Chapter 4 - Color QuickDraw</B></A> / <A HREF="QuickDraw-200.html"><B>Color QuickDraw Reference</B></A><BR><DL><DD><A HREF="QuickDraw-201.html"><B>Data Structures</B></A> / <A HREF="QuickDraw-195.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING202-0></A>
<H3><A NAME=MARKER-9-165></A>PixMap</H3>
 <A NAME=MARKER-14-167></A><A NAME=MARKER-14-167></A><A NAME=MARKER-9-415></A>A pixel map, which is defined by a data structure of type <CODE>PixMap</CODE>, contains information about the dimensions and contents of a pixel image, as well as information on the image's storage format, depth, resolution, and color usage. <P>
<PRE>
TYPE  PixMap = 
RECORD
   baseAddr:      Ptr;        {pixel image}
   rowBytes:      Integer;    {flags, and row width}
   bounds:        Rect;       {boundary rectangle}
   pmVersion:     Integer;    {PixMap record version number}
   packType:      Integer;    {packing format}
   packSize:      LongInt;    {size of data in packed state}
   hRes:          Fixed;      {horizontal resolution}
   vRes:          Fixed;      {vertical resolution}
   pixelType:     Integer;    {format of pixel image}
   pixelSize:     Integer;    {physical bits per pixel}
   cmpCount:      Integer;    {logical components per pixel}
   cmpSize:       Integer;    {logical bits per component}
   planeBytes:    LongInt;    {offset to next plane}
   pmTable:       CTabHandle; {handle to the ColorTable record }
                              { for this image}
   pmReserved:    LongInt;    {reserved for future expansion}
END; 
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>baseAddr</CODE>
<DD> For an onscreen pixel image, a pointer to the first byte of the image. For optimal performance, this should be a multiple of 4. The pixel image that appears on a screen is normally stored on a graphics card rather than in main memory. 
<DT><B>WARNING</B>
<DD>The <CODE>baseAddr</CODE> field of the <CODE>PixMap</CODE> record for an offscreen graphics world contains a handle instead of a pointer. You must use the <CODE>GetPixBaseAddr</CODE> function (described in the chapter "Offscreen Graphics Worlds" in this book) to obtain a pointer to the <CODE>PixMap</CODE> record for an offscreen graphics world. Your application should never directly access the <CODE>baseAddr</CODE> field of the <CODE>PixMap</CODE> record for an offscreen graphics world; instead, your application should always use <CODE>GetPixBaseAddr</CODE>.<A NAME=MARKER-9-98></A><EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
<DT><CODE>rowBytes</CODE>
<DD> The offset in bytes from one row of the image to the next. The value must be even, less than $4000, and for best performance it should be a multiple of 4. The high 2 bits of <CODE>rowBytes</CODE> are used as flags. If bit 15 = 1, the data structure pointed to is a <CODE>PixMap</CODE> record; otherwise it is a <CODE>BitMap</CODE> record.<A NAME=MARKER-2-109></A>
<DT><CODE>bounds</CODE>
<DD> The boundary rectangle, which links the local coordinate system of a graphics port to QuickDraw's global coordinate system and defines the area of the bit image into which QuickDraw can draw. By default, the boundary rectangle is the entire main screen. Do not use the value of this field to determine the size of the screen; instead use the value of the <CODE>gdRect</CODE> field of the <CODE>GDevice</CODE> record for the screen, as described in the chapter "Graphics Devices" in this book.<A NAME=MARKER-2-147></A>
<DT><CODE>pmVersion</CODE>
<DD> The version number of Color QuickDraw that created this <CODE>PixMap</CODE> record. The value of <CODE>pmVersion</CODE> is normally 0. If <CODE>pmVersion</CODE> is 4, Color QuickDraw treats the <CODE>PixMap</CODE> record's <CODE>baseAddr</CODE> field as 32-bit clean. (All other flags are private.) Most applications never need to set this field.<A NAME=MARKER-2-148></A> 
<DT><CODE>packType</CODE>
<DD> The packing algorithm used to compress image data. Color QuickDraw currently supports a <CODE>packType</CODE> of 0, which means no packing, and values of 1 to 4 for packing direct pixels. <A NAME=MARKER-2-149></A>
<DT><CODE>packSize</CODE>
<DD> The size of the packed image in bytes. When the <CODE>packType</CODE> field contains the value 0, this field is always set to 0.<A NAME=MARKER-2-446></A>
<DT><CODE>hRes</CODE>
<DD> The horizontal resolution of the pixel image in pixels per inch. This value is of type <CODE>Fixed</CODE>; by default, the value here is $00480000 (for 72 pixels per inch).<A NAME=MARKER-9-447></A>
<DT><CODE>vRes</CODE>
<DD> The vertical resolution of the pixel image in pixels per inch. This value is of type <CODE>Fixed</CODE>; by default, the value here is $00480000 (for 72 pixels per inch).<A NAME=MARKER-2-451></A>
<DT><CODE><A NAME=MARKER-13-178></A><A NAME=MARKER-13-178></A>pixelType</CODE>
<DD> The storage format for a pixel image. Indexed pixels are indicated by a value of 0. Direct pixels are specified by a value of <CODE>RGBDirect</CODE>, or 16. In the <CODE>PixMap</CODE> record of the <CODE>GDevice</CODE> record (described in the chapter "Graphics Devices") for a direct device, this field is set to the constant <CODE>RGBDirect</CODE> when the screen depth is set<A NAME=MARKER-2-126></A>.<A NAME=MARKER-2-158></A>
<DT><CODE>pixelSize</CODE>
<DD> Pixel depth; that is, the number of bits used to represent a pixel. Indexed pixels can have sizes of 1, 2, 4, and 8 bits; direct pixel sizes are 16 and 32 bits.<A NAME=MARKER-2-159></A> 
<DT><CODE>cmpCount</CODE>
<DD> The number of components used to represent a color for a pixel. With indexed pixels, each pixel is a single value representing an index in a color table, and therefore this field contains the value 1--the index is the single component. With direct pixels, each pixel contains three components--one integer each for the intensities of red, green, and blue--so this field contains the value 3.<A NAME=MARKER-2-160></A>
<DT><CODE>cmpSize</CODE>
<DD> <A NAME=MARKER-2-130></A>The size in bits of each component for a pixel. Color QuickDraw expects that the sizes of all components are the same, and that the value of the <CODE>cmpCount</CODE> field multiplied by the value of the <CODE>cmpSize</CODE> field is less than or equal to the value in the <CODE>pixelSize</CODE> field.
<DT>
<DD> For an indexed pixel value, which has only one component, the value of the <CODE>cmpSize</CODE> field is the same as the value of the <CODE>pixelSize</CODE> field--that is, 1, 2, 4, or 8. 
<DT>
<DD> For direct pixels there are two additional possibilities: 
<DT>
<DD> A 16-bit pixel, which has three components, has a <CODE>cmpSize</CODE> value <BR>of 5. This leaves an unused high-order bit, which Color QuickDraw sets to 0.
<DT>
<DD> A 32-bit pixel, which has three components (red, green, and blue), has a <CODE>cmpSize</CODE> value of 8. This leaves an unused high-order byte, which Color QuickDraw sets to 0.
<DT>
<DD> If presented with a 32-bit image--for example, in the <CODE>CopyBits</CODE> procedure--Color QuickDraw passes whatever bits are there, and it does not set the high byte to 0. Generally, therefore, your application should clear the memory for the image to 0 before creating a 16-bit or 32-bit image. The Memory Manager functions <CODE>NewHandleClear</CODE> and <CODE>NewPtrClear</CODE>, described in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I>, assist you in allocating prezeroed memory.<A NAME=MARKER-2-136></A>
<DT><CODE>planeBytes</CODE>
<DD> The offset in bytes from one drawing plane to the next. This field is set to 0. <A NAME=MARKER-2-140></A>
<DT><CODE>pmTable</CODE>
<DD> A handle to a <CODE>ColorTable</CODE> record (described on <A HREF=QuickDraw-206.html#MARKER-9-264>page 4-47</A>) for the colors in this pixel map. <A NAME=MARKER-2-186></A>
<DT><CODE>pmReserved</CODE>
<DD> Reserved for future expansion. This field must be set to 0 for future compatibility.
</DL>
 Note that the pixel map for a window's color graphics port always consists of the pixel depth, color table, and boundary rectangle of the main screen, even if the window is created on or moved to an entirely different screen.<A NAME=MARKER-9-416></A><A NAME=MARKER-2-188></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-201.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-203.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

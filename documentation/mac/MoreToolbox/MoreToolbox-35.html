<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>ResError (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING35></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-34.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-36.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A> / <A HREF="MoreToolbox-24.html"><B>Resource Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-30.html"><B>Resource Manager Routines</B></A> / <A HREF="MoreToolbox-34.html"><B>Checking for Errors</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING35-0></A>
<H3><A NAME=MARKER-9-220></A>ResError</H3>
 <A NAME=MARKER-11-221></A><A NAME=MARKER-2-222></A>After calling a Resource Manager routine, you can use the <CODE>ResError</CODE> function to determine whether an error occurred and, if so, what it was. <P>
<PRE>
FUNCTION ResError: Integer;
</PRE>
<A NAME=HEADING35-3></A>
<H5>DESCRIPTION</H5>
 The <CODE>ResError</CODE> function reads the value stored in the system global variable <CODE>ResErr</CODE> and returns an integer result code identifying errors, if any, that occurred. If no error occurred, <CODE>ResError</CODE> returns <CODE>noErr</CODE>. If an error occurs at the Resource Manager level, <CODE>ResError</CODE> returns one of the integer result codes listed in this section. If an error occurs at the Operating System level, <CODE>ResError</CODE> returns an Operating System result code, such as the Memory Manager error <CODE>memFullErr</CODE> or the File Manager error <CODE>ioErr</CODE>.<A NAME=MARKER-2-223></A><P>
 Resource Manager procedures do not report error information directly. Instead, after calling a Resource Manager procedure, your application should call the <CODE>ResError</CODE> function to determine whether an error occurred. <P>
 Resource Manager functions usually return <CODE>NIL</CODE> or -1 as the function result when there's an error. For Resource Manager functions that return -1, your application can call the <CODE>ResError</CODE> function to determine the specific error that occurred. For Resource Manager functions that return handles, your application should always check whether the value of the returned handle is <CODE>NIL</CODE>. If it is, your application can use <CODE>ResError</CODE> to obtain specific information about the nature of the error. Note, however, that in some cases <CODE>ResError</CODE> returns <CODE>noErr</CODE> even though the value of the returned handle is <CODE>NIL</CODE>.<A NAME=MARKER-2-224></A> <P>
<DL>
<DT><B>IMPORTANT</B>
<DD>In certain cases, the <CODE>ResError</CODE> function returns <CODE>noErr</CODE> even though a Resource Manager routine was unable to perform the requested operation. See the individual routine descriptions for details about the circumstances under which this happens.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 Only those result codes dealing specifically with resources are listed in this section. See the description of each Resource Manager routine for a list of errors specific to that routine and that the <CODE>ResError</CODE> function returns.<P>
<A NAME=HEADING35-9></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The global variable <CODE>ResErr</CODE> stores the current value of <CODE>ResError</CODE>, that is, the result code of the most recently performed Resource Manager operation. In addition, you can specify an application-defined procedure to be called whenever an error occurs. To do this, store the address of the procedure in the global variable <CODE>ResErrProc</CODE>. The value of the <CODE>ResErrProc</CODE> global variable is usually 0. Before returning a result code other than <CODE>noErr</CODE>, the <CODE>ResError</CODE> function puts that result in register D0 and calls the procedure identified by the <CODE>ResErrProc</CODE> global variable. <P>
 If you use <CODE>ResErrProc</CODE> to detect resource errors, you will get unexpected calls to your application-defined procedure if you call <CODE>GetMenu</CODE>. The Menu Manager routine <CODE>GetMenu</CODE> makes a call to <CODE>GetResInfo</CODE>, requesting resource information about <BR>'<CODE>MDEF</CODE>' 0. Unfortunately, because <CODE>ROMMapInsert</CODE> is set to <CODE>FALSE</CODE>, this call fails, setting <CODE>ResErr</CODE> to -192 (<CODE>resNotFound</CODE>). This, in turn, causes a call to your application-defined procedure, even though the <CODE>GetMenu</CODE> routine has worked correctly. <P>
 To avoid this problem, follow these steps when you call <CODE>GetMenu</CODE> if you are using <CODE>ResErrProc</CODE>:<P>
<OL>
<LI>Save the address of your application-defined procedure.
<LI>Clear <CODE>ResErrProc</CODE>.
<LI>Call <CODE>GetResource</CODE> for the menu resource you want to get.
<LI>Check whether <CODE>GetResource</CODE> returns a handle whose value is <CODE>NIL</CODE>; if so, process the error in whatever way is appropriate for your application.
<LI>Call <CODE>GetMenu</CODE>.
<LI>When you are finished calling <CODE>GetMenu</CODE>, restore the previous value of <CODE>ResErrProc</CODE>.<P>
</OL>
<A NAME=HEADING35-19></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>resNotFound<TD>-192<TD>Resource not found<TR>
<TD>resFNotFound<TD>-193<TD>Resource file not found<TR>
<TD>addResFailed<TD>-194<TD><CODE>AddResource</CODE> procedure failed<TR>
<TD>rmvResFailed<TD>-196<TD><CODE>RemoveResource</CODE> procedure failed<TR>
<TD>resAttrErr<TD>-198<TD>Attribute inconsistent with operation<TR>
<TD>mapReadErr<TD>-199<TD>Map inconsistent with operation <A NAME=MARKER-2-10></A> </TABLE>
</H5>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-34.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-36.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

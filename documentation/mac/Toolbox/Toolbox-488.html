<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of the Finder Interface(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING488></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-487.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-489.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-443.html"><B>Chapter 7 - Finder Interface</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING488-0></A>
<H1>Summary of the Finder Interface</H1>
<A NAME=HEADING488-1></A>
<H2>Pascal Summary</H2>
<A NAME=HEADING488-2></A>
<H3><A NAME=MARKER-21-649></A>Constants</H3>
<PRE>
CONST {Gestalt selectors}
      gestaltFindFolderAttr         = 'fold';   {selector for FindFolder}

      {interpreting Gestalt selector responses}
      gestaltFindFolderPresent      = 0;        {if this bit is set, }
                                                { FindFolder is present}
      {for custom icons}
      kCustomIconResource           = -16455;   {resource ID for }
                                                { custom icon}
      {for Finder flags}
      fHasBundle                    = 8192;     {set if file has 'BNDL'}
      fInvisible                    = 16384;    {set if icon is invisible}
      kIsOnDesk                     = $1;       {unused and reserved in }
                                                { System 7}
      kColor                        = $E;       {three bits of color coding}
      kIsShared                     = $40;      {file can be executed by }
                                                { multiple users }
                                                { simultaneously}
      kHasBeenInited                 = $100;    {file info is in desktop }
                                                { database}
      kHasCustomIcon                 = $400;    {file or directory has a }
                                                { customized icon}
      kIsStationery                  = $800;    {file is a stationery pad}
      kNameLocked                    = $1000;   {file or directory can't }
                                                { be renamed from Finder, }
                                                { and icon can't be changed}
      kHasBundle                     = $2000;   {file has a bundle resource}
      kIsInvisible                   = $4000;   {file or directory is }
                                                { invisible from Finder &amp; }
                                                { from Standard File }
                                                { Package dialog boxes}
      kIsAlias                       = $8000;   {file is an alias file}
      
      {for FindFolder}
      kOnSystemDisk                 = $8000;    {use vRefNum for the }
                                                { boot disk}
      kCreateFolder                 = TRUE;     {create folder if it }
                                                { doesn't exist}
      kDontCreateFolder             = FALSE;    {don't create folder}
      
      {for special folder types}
      kSystemFolderType             = 'macs';   {System Folder}
      kDesktopFolderType            = 'desk';   {Desktop Folder}
      kTrashFolderType              = 'trsh';   {single-user Trash}
      kWhereToEmptyTrashFolderType  = 'empt';   {shared Trash on network}
      kPrintMonitorDocsFolderType   = 'prnt';   {PrintMonitor Documents}
      kStartupFolderType            = 'strt';   {Startup Items}
      kFontsFolderType              = 'font';   {Fonts}
      kAppleMenuFolderType          = 'amnu';   {Apple Menu Items}
      kControlPanelFolderType       = 'ctrl';   {Control Panels}
      kExtensionFolderType          = 'extn';   {Extensions}
      kPreferencesFolderType        = 'pref';   {Preferences}
      kTemporaryFolderType          = 'temp';   {Temporary Items}
      {alias types}
      kContainerFolderAliasType     = 'fdrp';   {folder alias}
      kContainerTrashAliasType      = 'trsh';   {Trash alias}
      kContainerHardDiskAliasType   = 'hdsk';   {hard disk alias}
      kContainerFloppyAliasType     = 'flpy';   {floppy disk alias}
      kContainerServerAliasType     = 'srvr';   {server alias}
      kApplicationAliasType         = 'adrp';   {application alias}
      kContainerAliasType           = 'drop';   {all other containers}
      kSystemFolderAliasType        = 'fasy';   {System Folder alias}
      kAppleMenuFolderAliasType     = 'faam';   {Apple Menu Items folder }
                                                { alias}
      kStartupFolderAliasType       = 'fast';   {Startup Items folder alias}
      kPrintMonitorDocsFolderAliasType
                                    = 'fapn';   {PrintMonitor Documents }
                                                { folder alias}
      kPreferencesFolderAliasType   = 'fapf';   {Preferences folder alias}
      kControlPanelFolderAliasType  = 'fact';   {Control Panels folder alias}
      kExtensionFolderAliasType     = 'faex';   {Extensions folder alias}
      kExportedFolderAliasType      = 'faet';   {export folder alias}
      kDropFolderAliasType          = 'fadr';   {drop folder alias}
      kSharedFolderAliasType        = 'fash';   {shared folder alias}
      kMountedFolderAliasType       = 'famn';   {mounted folder alias}
</PRE>
<A NAME=HEADING488-4></A>
<H3><A NAME=MARKER-21-650></A>Data Types</H3>
<PRE>
TYPE  {Finder information records in the volume catalog file}
      FInfo =
      RECORD
         fdType:           OSType;        {file type}
         fdCreator:        OSType;        {file creator}
         fdFlags:          Integer;       {Finder flags}
         fdLocation:       Point;         {file's location in window}
         fdFldr:           Integer;       {directory that contains file}
      END;

      FXInfo =
      RECORD
         fdIconID:         Integer;       {icon ID}
         fdUnused:         ARRAY[1..3] OF Integer; 
                                          {unused but reserved 6 bytes}
         fdScript:         SignedByte;    {script flag and code}
         fdXFlags:         SignedByte;    {reserved}
         fdComment:        Integer;       {comment ID}
         fdPutAway:        LongInt;       {home directory ID}
      END;

      DInfo =
      RECORD
         frRect:        Rect;             {folder's window rectangle}
         frFlags:       Integer;          {flags}
         frLocation:    Point;            {folder's location in window}
         frView:        Integer;          {folder's view}
      END;

      DXInfo =
      RECORD
         frScroll:      Point;            {scroll position}
         frOpenChain:   LongInt;          {dir ID chain of open folders}
         frScript:      SignedByte;       {script flag and code}
         frXFlags:      SignedByte;       {reserved}
         frComment:     Integer;          {comment ID}
         frPutAway:     LongInt;          {directory ID}
      END;
</PRE>
<A NAME=HEADING488-6></A>
<H3><A NAME=MARKER-21-651></A>Routines</H3>
<A NAME=HEADING488-7></A>
<H4><A NAME=MARKER-21-652></A>Resolving Alias Files</H4>
<PRE>
FUNCTION ResolveAliasFile(VAR theSpec: FSSpec; 
resolveAliasChains: Boolean; 
VAR targetIsFolder: Boolean; 
VAR wasAliased: Boolean): OSErr;
</PRE>
<A NAME=HEADING488-9></A>
<H4><A NAME=MARKER-21-653></A>Finding Directories</H4>
<PRE>
FUNCTION FindFolder(vRefNum: Integer; folderType: OSType; 
createFolder: Boolean; 
VAR foundVRefNum: Integer; 
VAR foundDirID: LongInt): OSErr;
</PRE>
<A NAME=HEADING488-11></A>
<H2>C Summary</H2>
<A NAME=HEADING488-12></A>
<H3><A NAME=MARKER-21-649></A>Constants</H3>
<PRE>
enum {
      /*Gestalt selectors*/
      #define gestaltFindFolderAttr  'fold'     /*selector for FindFolder*/

      /*interpreting Gestalt selector responses*/
      gestaltFindFolderPresent      = 0         /*if this bit is set, */
                                                /* FindFolder is present*/
};
      /*for custom icons*/
#define kCustomIconResource          -16455     /*resource ID for */
                                                /* custom icon*/

      /*Finder flags*/
#define  kIsOnDesk                  0x1         /*unused and reserved in */
                                                /* System 7*/
#define  kColor                     0xE         /*3 bits of color coding*/
#define  kIsShared                  0x40        /*file can be executed by */
                                                /* multiple users */
                                                /* simultaneously*/
#define  kHasBeenInited             0x100       /*file info is in desktop */
                                                /* database*/
#define  kHasCustomIcon             0x400       /*file or directory has a */
                                                /* customized icon*/
#define  kIsStationary              0x800       /*file is a stationery pad*/
#define  kNameLocked                0x1000      /*file or directory can't */
                                                /* be renamed from the */
                                                /* Finder, and icon can't */
                                                /* be changed*/
#define  kHasBundle                 0x2000      /*file has a bundle */
                                                /* resource*/
#define  kIsInvisible               0x4000      /*file or directory is */
                                                /* invisible from Finder */
                                                /* &amp; from Standard File */
                                                /* Package dialog boxes*/
#define  kIsAlias                   0x8000      /*file is an alias file*/

enum {
      /*for Finder flags*/
      fHasBundle                    = 8192,     /*set if file has 'BNDL'*/
      fInvisible                    = 16384     /*set if icon is invisible*/
};    
enum {   
      /*for FindFolder*/
      kOnSystemDisk                 = 0x8000    /*use vRefNum for the */
                                                /* boot disk*/
      #define kCreateFolder            true     /*create folder if it */
                                                /* doesn't exist*/
      #define kDontCreateFolder        false    /*don't create folder*/
      
      /*for special folder types*/
      #define kSystemFolderType      'macs'     /*System Folder*/
      #define kDesktopFolderType     'desk'     /*Desktop Folder*/
      #define kTrashFolderType       'trsh'     /*single-user Trash*/
      #define kWhereToEmptyTrashFolderType
                                     'empt'     /*shared Trash*/
      #define kPrintMonitorDocsFolderType 
                                     'prnt'     /*PrintMonitor Documents*/
      #define kStartupFolderType     'strt'     /*Startup Items*/
      #define kFontsFolderType       'font'     /*Fonts*/
      #define kAppleMenuFolderType   'amnu'     /*Apple Menu Items*/
      #define kControlPanelFolderType 'ctrl'    /*Control Panels*/
      #define kExtensionFolderType   'extn'     /*Extensions*/
      #define kPreferencesFolderType 'pref'     /*Preferences*/
      #define kTemporaryFolderType   'temp'     /*Temporary Items*/
};    
      /*for alias types*/
#define kContainerFolderAliasType    'fdrp'     /*folder alias*/
#define kContainerTrashAliasType     'trsh'     /*Trash alias*/
#define kContainerHardDiskAliasType  'hdsk'     /*hard disk alias*/
#define kContainerFloppyAliasType    'flpy'     /*floppy disk alias*/
#define kContainerServerAliasType    'srvr'     /*server alias*/
#define kApplicationAliasType        'adrp'     /*application alias*/
#define kContainerAliasType          'drop'     /*all other containers*/
#define kSystemFolderAliasType       'fasy'     /*System Folder alias*/
#define kAppleMenuFolderAliasType    'faam'     /*Apple Menu Items folder */
                                                /* alias*/
#define kStartupFolderAliasType      'fast'     /*Startup Items folder */
                                                /* alias*/
#define kPrintMonitorDocsFolderAliasType
                                     'fapn'     /*PrintMonitor Documents */
                                                /* folder alias*/
#define kPreferencesFolderAliasType  'fapf'     /*Preferences folder alias*/
#define kControlPanelFolderAliasType 'fact'     /*Control Panels fldr alias*/
#define kExtensionFolderAliasType    'faex'     /*Extensions folder alias*/
#define kExportedFolderAliasType     'faet'     /*export folder alias*/
#define kDropFolderAliasType         'fadr'     /*drop folder alias*/
#define kSharedFolderAliasType       'fash'     /*shared folder alias*/
#define kMountedFolderAliasType      'famn'     /*mounted folder alias*/
</PRE>
<A NAME=HEADING488-14></A>
<H3><A NAME=MARKER-21-650></A>Data Types</H3>
<PRE>
struct FInfo {       /*Finder information records in the catalog file*/
      OSType            fdType;        /*file type*/
      OSType            fdCreator;     /*file creator*/
      unsigned short    fdFlags;       /*Finder flags*/
      Point             fdLocation;    /*file's location in window*/
      short             fdFldr;        /*directory that contains file*/
};

struct FXInfo {
      short             fdIconID;      /*icon ID*/
      short             fdUnused[3];   /*unused but reserved 6 bytes*/
      char              fdScript;      /*script flag and code*/
      char              fdXFlags;      /*reserved*/
      short             fdComment;     /*comment ID*/
      long              fdPutAway;     /*home directory ID*/
};
struct DInfo {
      Rect              frRect;        /*folder's window rectangle*/
      unsigned short    frFlags;       /*flags*/
      Point             frLocation;    /*folder's location in window*/
      short             frView;        /*folder's view*/
};

struct DXInfo {
      Point          frScroll;         /*scroll position*/
      long           frOpenChain;      /*directory ID chain of open folders*/
      char           frScript;         /*script flag and code*/
      char           frXFlags;         /*reserved*/
      short          frComment;        /*comment ID*/
      long           frPutAway;        /*directory ID*/
};
</PRE>
<A NAME=HEADING488-17></A>
<H3><A NAME=MARKER-21-651></A>Routines</H3>
<A NAME=HEADING488-18></A>
<H4><A NAME=MARKER-21-652></A>Resolving Alias Files</H4>
<PRE>
pascal OSErr ResolveAliasFile 
   (FSSpec *theSpec, Boolean resolveAliasChains,
Boolean *targetIsFolder, Boolean *wasAliased);
</PRE>
<A NAME=HEADING488-21></A>
<H4><A NAME=MARKER-21-653></A>Finding Directories</H4>
<PRE>
pascal OSErr FindFolder(short vRefNum, OSType folderType, 
Boolean createFolder, short *foundVRefNum,
long *foundDirID);
</PRE>
<A NAME=HEADING488-23></A>
<H2><CODE>Assembly-Language Summary</CODE></H2>
<A NAME=HEADING488-24></A>
<H3>Data Structures</H3>
<A NAME=HEADING488-25></A>
<H4>FInfo Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0 <TD><CODE>fdType</CODE><TD>long<TD>file type<TR>
<TD>4 <TD><CODE>fdCreator</CODE><TD>long<TD>file creator<TR>
<TD>8 <TD><CODE>fdFlags</CODE><TD>word<TD>Finder flags<TR>
<TD>10 <TD><CODE>fdLocation</CODE><TD>long<TD>file's location in window<TR>
<TD>14 <TD><CODE>fdFldr</CODE><TD>word<TD>directory that contains file</TABLE>
</H4>
<A NAME=HEADING488-26></A>
<H4>FXInfo Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0 <TD><CODE>fdIconID</CODE><TD>word<TD>icon ID<TR>
<TD>2 <TD><CODE>fdUnused</CODE><TD>6 bytes<TD>reserved<TR>
<TD>8 <TD><CODE>fdScript</CODE><TD>1 byte<TD>script flag and code<TR>
<TD>9 <TD><CODE>fdXFlags</CODE><TD>1 byte<TD>reserved<TR>
<TD>10 <TD><CODE>fdComment</CODE><TD>word<TD>comment ID<TR>
<TD>12 <TD><CODE>fdPutAway</CODE><TD>long<TD>home directory ID</TABLE>
</H4>
<A NAME=HEADING488-27></A>
<H4>DInfo Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0 <TD><CODE>frRect</CODE><TD>8 bytes<TD>folder's window rectangle<TR>
<TD>8 <TD><CODE>frFlags</CODE><TD>word<TD>flags<TR>
<TD>10 <TD><CODE>frLocation</CODE><TD>long<TD>folder's location in window<TR>
<TD>14 <TD><CODE>frView</CODE><TD>word<TD>folder's view</TABLE>
</H4>
<A NAME=HEADING488-28></A>
<H4>DXInfo Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0 <TD><CODE>frScroll</CODE><TD>long<TD>scroll position<TR>
<TD>4 <TD><CODE>frOpenChain</CODE><TD>long<TD>directory ID chain of open folders<TR>
<TD>8 <TD><CODE>frScript</CODE><TD>1 byte<TD>script flag and code<TR>
<TD>9 <TD><CODE>frXFlags</CODE><TD>1 byte<TD>reserved<TR>
<TD>10 <TD><CODE>frComment</CODE><TD>word<TD>comment ID<TR>
<TD>12 <TD><CODE>frPutAway</CODE><TD>long<TD>directory ID</TABLE>
</H4>
<A NAME=HEADING488-29></A>
<H2>Result Codes
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>nsvErr<TD>-35<TD>Volume not found<TR>
<TD>fnfErr<TD>-43<TD>For <CODE>FindFolder</CODE>: Type not found in <CODE>'fld#'</CODE> resource, or disk doesn't have System Folder support or System Folder in volume header, or disk does not have desktop database support for Desktop Folder--in all cases, folder not found <BR>For <CODE>ResolveAliasFile</CODE>: Target not found, but volume and parent <BR>directory found and <CODE>theSpec</CODE> parameter contains a valid file system specification record<TR>
<TD>dupFNErr<TD>-48<TD>File found instead of folder<TR>
<TD>dirNFErr<TD>-120<TD>Parent directory not found<CODE><A NAME=MARKER-2-88></A></CODE></TABLE>
</H2>
 <P>
</BLOCKQUOTE><P>

</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-487.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-489.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

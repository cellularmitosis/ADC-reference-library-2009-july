<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Assigning Default Values to Enterprise Objects</TITLE></HEAD><BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../index.html" target="_top">Documentation</a> <b>></b> <a href="../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.20.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.22.html"><img src="next.gif" border="0" alt="Next"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606143"> </A><A NAME="21397"> </A>Assigning Default Values to Enterprise Objects</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606144"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606145"> </A>Describes how to assign default values to new enterprise objects. </P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606146"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=606147"> </A>When you create new enterprise objects in your application, you often need to assign default values to attributes of the objects. For example, if you are inserting a new movie into a Movies database, you should assign a default value for the title attribute so that the new movie is not displayed as a blank line when movies are listed. </P><P CLASS="Body"><A NAME="pgfId=606148"> </A>You can assign default values in one of four ways:</P><UL><LI CLASS="Bulleted"><A NAME="pgfId=606150"> </A>	Assignment immediately after object is created and inserted into the editing context</LI><LI CLASS="Bulleted"><A NAME="pgfId=606151"> </A>	A custom action method bound to a display group's insert button</LI><LI CLASS="Bulleted"><A NAME="pgfId=606152"> </A>	Specification of default values using a display group</LI></UL><P CLASS="Body"><A NAME="pgfId=617899"> </A>Although you can assign default values in an enterprise object's constructor (or, in the case of Objective-C, an enterprise object's initializer), it is not recommended that you do so. Because such initialization happens during a fetch, it can create much useless data and thus slow down the fetch.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606163"> </A>Assignment After Insertion Into the Editing Context</H3><P CLASS="Body"><A NAME="pgfId=606164"> </A>If default values are intrinsic to an enterprise object, you could assign them immediately after the objects are inserted into the editing context. As an example, say your video rental application's VideoRental class has a <TT CLASS="Code">dateCheckedOut</TT> property. You probably want to assign the current date automatically to <TT CLASS="Code">dateCheckedOut</TT> instead of requiring the user to supply the value.</P><P CLASS="Body"><A NAME="pgfId=618035"> </A>A custom enterprise object is sent certain messages when it is created, and one of these is of particular significance for assigning default values. After a custom enterprise object is created and inserted into an editing context, it receives the <TT CLASS="Code">awakeFromInsertionInEditingContext</TT> method (which is invoked by the <TT CLASS="Code">insertObjectWithGlobalID</TT> method which, in turn, is invoked by the <TT CLASS="Code">insertObject</TT> method). Your enterprise object can implement the <TT CLASS="Code">awakeFromInsertionInEditingContext</TT> method to assign default values to the attributes of the enterprise object. </P><PRE CLASS="Code"><A NAME="pgfId=618040"> </A>public void awakeFromInsertionInEditingContext(EOEditingContext context) {    super.awakeFromInsertionInEditingContext(context);    dateCheckedOut = new CalendarDate();}</PRE><P CLASS="Body"><A NAME="pgfId=618047"> </A>Use <TT CLASS="Code">awakeFromInsertionInEditingContext</TT> method for assigning default values if you are creating objects that did not previously exist in the database. If, on the other hand, you are creating new enterprise objects from existing data in the database, you should use the <TT CLASS="Code">awakeFromFetchInEditingContext</TT> method, which is sent to an enterprise object just created from a database row and initialized with database values. In this scenario, you must be careful about sending messages to other enterprise objects, however, because faulting may occur because the database channel might still be open while the fetching continues. Read the topics on faults for more information.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606174"> </A>Assignment in an Action Method</H3><P CLASS="Body"><A NAME="pgfId=617963"> </A>If you're using a WODisplayGroup, you can implement a custom action method for the &quot;Insert&quot; button of your application instead of binding that control directly to the display group's <TT CLASS="Code">insert</TT> method. In your implementation of the action method, you might create a new enterprise object, assign default values to it, and then insert the new object into the display group.</P><PRE CLASS="Code"><A NAME="pgfId=617952"> </A>public void insertBook() {    EOEditingContext ec = session().defaultEditingContext();    NSDate dateCheckedOut = new NSDate();    // create new book    Book book = new Book (ec, null, null);    book.setDateCheckedOut(dateCheckedOut);    // assume display group already exists    bookDisplayGroup.insertObject(book);}</PRE></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606177"> </A>Assignment Through Default Values Per Display Group</H3><P CLASS="Body"><A NAME="pgfId=606178"> </A>If the default values are specific to an application or to a particular user interface, you might explicitly initialize the object in code, or specify the default values using a display group. In a Movies application, for example, your user interface may require you to provide a default value so that users can tell when they have selected a newly inserted record. In another situation, you might not want a new movie to have a default title; you might instead want the new movie's title to be blank.</P><P CLASS="Body"><A NAME="pgfId=606179"> </A>To specify default values for newly created Movie objects using the display group, (<TT CLASS="Code">moviesDisplayGroup</TT> in the example below), you might write the following constructor for the movie page WOComponent:</P><PRE CLASS="Code"><A NAME="pgfId=610505"> </A>public MoviePage() {<A NAME="pgfId=610507"> </A>&nbsp;&nbsp;&nbsp;&nbsp;super();<A NAME="pgfId=610509"> </A>&nbsp;&nbsp;&nbsp;&nbsp;NSMutableDictionary defaultValues = new NSMutableDictionary();<A NAME="pgfId=617876"> </A>&nbsp;&nbsp;&nbsp;&nbsp;defaultValues.setObjectForKey(&quot;New Movie Title&quot;, &quot;title&quot;);<A NAME="pgfId=610513"> </A>&nbsp;&nbsp;&nbsp;&nbsp;movieDisplayGroup.setInsertedObjectDefaultValues(defaultValues);<A NAME="pgfId=610515"> </A>}</PRE><P CLASS="Body"><A NAME="pgfId=618902"> </A></P><P CLASS="Body"><A NAME="pgfId=606186"> </A>This method assigns the value &quot;New Movie Title&quot; as the default value for a new movie's <TT CLASS="Code">title</TT> attribute. When <TT CLASS="Code">movieDisplayGroup</TT> inserts a new movie, it creates a new &quot;movie&quot; enterprise object and assigns this default title to that movie.</P></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=623298"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606189"> </A><A HREF="ProgrammingTopics.22.html#16934" CLASS="XRef">Creating a New Enterprise Object</A></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606190"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606191"> </A>	How do I set data in the columns of newly inserted rows?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606192"> </A>	How do I ensure that default values go into my new rows?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606193"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=618028"> </A>Editing</LI><LI CLASS="Bulleted"><A NAME="pgfId=623319"> </A>Context</LI><LI CLASS="Bulleted"><A NAME="pgfId=618019"> </A>Display</LI><LI CLASS="Bulleted"><A NAME="pgfId=623320"> </A>Group</LI><LI CLASS="Bulleted"><A NAME="pgfId=618029"> </A>Action</LI><LI CLASS="Bulleted"><A NAME="pgfId=618020"> </A>Initialization</LI><LI CLASS="Bulleted"><A NAME="pgfId=606196"> </A>Default</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606198"> </A>Revision History</H2><P CLASS="Body-Text"><A NAME="pgfId=606199"> </A>24 July, 1998. Virginia McCulloh. First Draft.</P><P CLASS="Body-Text"><A NAME="pgfId=618021"> </A>18 November, 1998. Terry Donoghue. Second Draft.</P><P CLASS="Body-Text"><A NAME="pgfId=623318"> </A>16 March, 1998. Clif Liu. Corrections.</P><P CLASS="Body"><A NAME="pgfId=602450"> </A></P></DIV><hr alt="">&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.20.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.22.html"><img src="next.gif" border="0" alt="Next"></A><!-- start of footer --><!--#include file="footer" --><!-- end of footer --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>EGetInfo(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING278></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-277.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-279.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-257.html"><B>Chapter 11 - Ethernet, Token Ring, and Fiber Distributed Data Interface</B></A> / <A HREF="Networking-265.html"><B>Ethernet, Token Ring, and FDDI Reference</B></A><BR><DL><DD><A HREF="Networking-269.html"><B>Routines</B></A> / <A HREF="Networking-277.html"><B>Obtaining Information About the Ethernet Driver and Switching Its Mode </B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING278-0></A>
<H3><A NAME=MARKER-9-180></A>EGetInfo<A NAME=MARKER-2-181></A></H3>
<PRE>
The EGetInfo function returns information about the .ENET driver.
FUNCTION EGetInfo (thePBptr: EParamBlkPtr; 
                  async: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE>thePBptr</CODE>
<DD> A pointer to a parameter block of type <CODE>EParamBlock</CODE>.
<DT><CODE>async</CODE>
<DD> A Boolean value that specifies whether the function should be <BR>executed asynchronously or synchronously. Specify <CODE>TRUE</CODE> for asynchronous execution.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The result code. <TR>
<TD>--><TD>ioRefNum<TD>Integer<TD>The driver reference number.<TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>ENetGetInfo</CODE> for this function.<TR>
<TD>--><TD>ePointer<TD>Ptr<TD>A pointer to a buffer.<TR>
<TD>--><TD>eBuffSize<TD>Integer<TD>The size of the buffer.<TR>
<TD><--<TD>eDataSize<TD>Integer<TD>The number of bytes returned.</TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE>ePointer</CODE>
<DD> A pointer to a buffer that is at least 18 bytes in size. The <BR><CODE>EGetInfo</CODE> function returns the information about the <BR>.ENET driver in this buffer. 
<DT><CODE>eBuffSize</CODE>
<DD> The size of the buffer pointed to by <CODE>ePointer</CODE>.
<DT><CODE>eDataSize</CODE>
<DD> The number of bytes of information that <CODE>EGetInfo</CODE> returns in <BR>the buffer pointed to by <CODE>ePointer</CODE>. 
</DL>
<A NAME=HEADING278-9></A>
<H5>DESCRIPTION</H5>
 The <CODE>EGetInfo</CODE> function returns information about the .ENET driver. Beginning with version 58 of AppleTalk, the <CODE>EGetInfo</CODE> function returns additional information for <A NAME=MARKER-2-182></A>SONIC-based network interface controllers (NICs). For these cards, <CODE>EGetInfo</CODE> can return up to 78 bytes of information. The <CODE>eDataSize</CODE> field returns the number of bytes of information that <CODE>EGetInfo</CODE> has placed in the data buffer that you provide. You can use the value returned in this field to determine whether or not the Ethernet card uses a SONIC chip. For all cards that are not SONIC based, this field will contain a value of 18. <P>
 If you do not know whether the Ethernet card that you are using has a SONIC chip, you should provide a data buffer that is at least 78 bytes in length. If you are certain that the Ethernet card that you are using is not SONIC based, you must provide a data buffer that is at least 18 bytes. Put a pointer to the buffer in the <CODE>ePointer</CODE> parameter and the size of the buffer in the <CODE>eBuffSize</CODE> parameter.<A NAME=MARKER-2-82></A><A NAME=MARKER-2-83></A><P>
 For Ethernet cards that are not SONIC based, the <CODE>EGetInfo</CODE> function places the following information in the data buffer:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Bytes<TH>Information<TR>
<TD>1-6<TD>Ethernet address of the node on which the driver is installed<TR>
<TD>7-10<TD>Number of times the receive queue has overflowed<TR>
<TD>11-14<TD>Number of data transmission operations that have timed out <TR>
<TD>15-18<TD>Number of packets received that contain an incorrect address </TABLE>
<P>
 An incorrect Ethernet address is one that is neither the broadcast address, a multicast address for which this node is registered, nor the node's data-link address. A node could receive an incorrect Ethernet address due to a hardware or software error.<P>
 For SONIC-based Ethernet cards, the last 60 bytes in the buffer return information from the SONIC chip network statistic counters. The <CODE>EGetInfo</CODE> function places the following information in the data buffer: 
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Bytes<TH>Information<TR>
<TD>1-6<TD>Ethernet address of the node on which the driver is installed<TR>
<TD>7-10<TD>No information returned (zero-filled)<TR>
<TD>11-14<TD>No information returned (zero-filled)<TR>
<TD>15-18<TD>No information returned (zero-filled)<TR>
<TD>19-22<TD>Frames transmitted without error<TR>
<TD>23-26<TD>Single collision frames<TR>
<TD>27-30<TD>Multiple collision frames<TR>
<TD>31-34<TD>Collision frames<TR>
<TD>35-38<TD>Frames with deferred transmission<TR>
<TD>39-42<TD>Late collision<TR>
<TD>43-46<TD>Excessive collisions<TR>
<TD>47-50<TD>Excessive deferrals<TR>
<TD>51-54<TD>Internal MAC transmit error<TR>
<TD>55-58<TD>Frames received without error<TR>
<TD>59-62<TD>Multicast frames received without error<TR>
<TD>63-66<TD>Broadcast frames received without error<TR>
<TD>67-70<TD>Frame check sequence errors<TR>
<TD>71-74<TD>Alignment errors<TR>
<TD>75-78<TD>Frames lost due to internal MAC receive errors </TABLE>
<P>
<A NAME=HEADING278-15></A>
<H5>TOKEN RING AND FDDI CONSIDERATIONS</H5>
 This function does not apply to token ring and FDDI<A NAME=MARKER-2-185></A>.<P>
<A NAME=HEADING278-17></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>EGetInfo</CODE> function from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>ENetGetInfo</CODE> in the <CODE>csCode</CODE> field of the parameter block. <BR>To execute the <CODE>_Control</CODE> trap asynchronously, include the value <CODE>,ASYNC</CODE> in the <BR>operand field<A NAME=MARKER-2-186></A><A NAME=MARKER-2-187></A>.<P>
<A NAME=HEADING278-19></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error</TABLE>
</H5>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-277.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-279.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

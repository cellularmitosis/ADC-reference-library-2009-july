<html>	<head>		<meta name="generator" content="GoLive CyberStudio 3">		<script language="JavaScript" src="frametest.js"></script><TITLE>ATA_BusInquiry</title>	</head><body bgcolor="#ffffff">	<a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b>	<a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> <a href="../../devicemgrs.html">Device Managers and Drivers</a>	<b>&gt;</b> <a href="../ata.html" target="_top">ATA Devices</a>	<b>&gt;</b> ATA Device Software Guide		</font></td>	</tr>	</table><br><!-- end of path --><div><p><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.2c.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.2e.html"><img src="images/next.gif" border="0"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr>		<H3 CLASS="RoH.RoutineHeading"><a name="pgfId=793"></a><a name="18362"></a>ATA_BusInquiry</h3>		<p class="T0.Text0"><a name="pgfId=794"></a>The ATA_BusInquiry function returns information about a specific ATA bus for standard ATA and ATAPI interfaces, and for the HBA environment. The support for HBA features in this function is provided for possible future expansion of the Macintosh ATA architecture. <a name="marker=795"></a><a name="marker=796"></a></p>		<p class="T1.Text1"><a name="pgfId=797"></a>The manager function code for the ATA_BusInquiry function is $03. </p>		<p class="T1.Text1"><a name="pgfId=798"></a>The parameter block associated with this function is defined below:</p>					<code class="RD.RoutineDeclare"><table border="0" cellpadding="0" cellspacing="2" frame width="0%">				<tr>					<td colspan="2" scope="row"><code class="RD.RoutineDeclare"><a name="pgfId=14057"></a>typedef struct</code></td>					<td width="150"></td>					<td width="200"><code class="RD.RoutineDeclare">/* ATA bus inquiry structure */</code></td>				</tr>				<tr>					<td colspan="2" scope="row"><code class="RD.RoutineDeclare">{</code></td>					<td width="150"></td>					<td width="200"></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">ataPBHdr</code></td>					<td width="150"></td>					<td width="200"><code class="RD.RoutineDeclare">/* ataPBHdr parameter block */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt16</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataEngineCount;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- TBD; zero for now */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt16</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataReserved;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* Reserved */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt32</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataDataTypes;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- TBD; zero for now */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt16</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataIOpbSize;</code></td>					<td width="200"><code class="RD.RoutineDeclare">&nbsp;/* &lt;-- Size of ATA I/O PB */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt16</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataMaxIOpbSize;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- TBD; zero for now */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt32</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataFeatureFlags;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- TBD */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataVersionNum;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- HBA Version number */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataHBAInquiry;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- TBD; zero for now */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt16</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataReserved2;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* Reserved */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt32</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataHBAPrivPtr;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Pointer to HBA */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"></td>					<td width="150"></td>					<td width="200"><code class="RD.RoutineDeclare">/* private data */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt32</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataHBAPrivSize;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Size of HBA */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"></td>					<td width="150"></td>					<td width="200"><code class="RD.RoutineDeclare">/* private data */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt32</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataAsyncFlags;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Capability for */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"></td>					<td width="150"></td>					<td width="200"><code class="RD.RoutineDeclare">/* callback */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataPIOMode;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- PIO modes supported */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataReserved3;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* Reserved */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataSingleDMAModes;</code></td>					<td width="200"><code class="RD.RoutineDeclare">&nbsp;/* &lt;-- Singleword DMA mode */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataMultiDMAModes;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Multiword DMA mode */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt32</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataReserved4[8];</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* Reserved */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">SInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataHBAVendor[16];</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- HBA Vendor ID */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">SInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataContrlFamily[16];</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Family of ATA */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"></td>					<td width="150"></td>					<td width="200"><code class="RD.RoutineDeclare">/*controller */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">SInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataContrlType[16];</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Controller model */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"></td>					<td width="150"></td>					<td width="200"><code class="RD.RoutineDeclare">/*number */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">SInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataXPTversion[4];</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Version number of XPT */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">SInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataReserved6[4];</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* Reserved */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">SInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataHBAversion[4];</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Version number of HBA */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">&nbsp;ataHBAslotType;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Type of slot */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt8</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataHBAslotNum;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* &lt;-- Slot number of the HBA */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt16</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataReserved7;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* Reserved */</code></td>				</tr>				<tr>					<td width="20" scope="row"></td>					<td width="75"><code class="RD.RoutineDeclare">UInt32</code></td>					<td width="150"><code class="RD.RoutineDeclare">ataReserved8;</code></td>					<td width="200"><code class="RD.RoutineDeclare">/* Reserved */</code></td>				</tr>				<tr>					<td colspan="2" scope="row"><code class="RD.RoutineDeclare">} ataBusInquiry;</code> </td>					<td width="150"></td>					<td width="200"></td>				</tr>			</table></code>		<p><code class="RD.RoutineDeclare">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> 		<h4>Field descriptions</h4>		<dl compact>			<dt class="DT.DefinitionTerm"><a name="pgfId=14059"></a><tt class="cv">ataPBHdr</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=857"></a>See the definition of the <tt class="cv"><a href="ATA.26.html" class="XRef">ataPBHdr</tt> structure</a>. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14068"></a><tt class="cv">ataEngineCount</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=858"></a>This field is currently set to 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14077"></a><tt class="cv">ataReserved</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=859"></a>Reserved. All reserved fields are set to 0 to ensure future compatibility. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14086"></a><tt class="cv">ataDataTypes</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=860"></a>Not supported by current ATA architecture. Returns a bit map of data types supported by this HBA. The data types are numbered from 0 to 30; 0 through 15 are reserved for Apple definition and 16 through 30 are available for vendor use. This field is currently not supported and returns 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14095"></a><tt class="cv">ataIOpbSize</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=861"></a>This field contains the size of the I/O parameter block supported. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14104"></a><tt class="cv">ataMaxIOpbSize</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=862"></a>This field specifies the maximum I/O size for the HBA. This field is currently not supported and returns 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14113"></a><tt class="cv">ataFeatureFlags</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=863"></a>This field specifies supported features. This field is not supported; it returns a value of 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14122"></a><tt class="cv">ataVersionNum</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=864"></a>The version number of the HBA is returned. The current version returns a value of 1. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14131"></a><tt class="cv">ataHBAInquiry</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=865"></a>Reserved. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14140"></a><tt class="cv">ataHBAPrivPtr</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=866"></a>This field contains a pointer to the private data area for the HBA. This field is not supported; it returns a value of 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14149"></a><tt class="cv">ataHBAPrivSize</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=867"></a>This field contains the byte size of the private data area for the HDA. This field is not supported; it returns a value of 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14158"></a><tt class="cv">ataAsyncFlags</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=868"></a>These flags indicate which types of asynchronous events the HBA is capable of generating. This field is not supported; it returns a value of 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14167"></a><tt class="cv">ataPIOModes</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=2336"></a>This bit-significant field specifies the PIO modes that the ATA bus supports. The least-significant bit indicates support for PIO transfer mode 0. Refer to ATA-2 specification for information on PIO mode timing. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14176"></a><tt class="cv">ataSingleDMAModes</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=2346"></a>This bit-significant field specifies the Single Word DMA transfer modes that the ATA bus supports. The least-significant bit indicates support for Single Word DMA transfer mode 0. Refer to ATA-2 specification for information on DMA mode timing. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14186"></a><tt class="cv">ataMultiDMAModes</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=2360"></a>This bit-significant field specifies the Multiword DMA transfer modes that the ATA bus supports. The least-significant bit indicates support for Multiword DMA transfer mode 0. Refer to ATA-2 specification for information on DMA mode timing. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14196"></a><tt class="cv">ataHBAVendor</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=869"></a>This field contains the vendor ID of the HBA. This is an ASCII text field. It is currently not supported. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14205"></a><tt class="cv">ataContrlFamily</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=870"></a>Reserved. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14214"></a><tt class="cv">ataContrlType</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=871"></a>This field identifies the specific type of ATA controller. This field is not supported; it returns a value of 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14223"></a><tt class="cv">ataXPTversion</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=872"></a>Reserved. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14232"></a><tt class="cv">ataHBAversion</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=873"></a>This field specifies the version of the HBA. This field is not supported; it returns a value of 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14241"></a><tt class="cv">ataHBAslotType</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=874"></a>This field specifies the type of slot. This field is not supported; it returns a value of 0. 			<dt class="DT.DefinitionTerm"><a name="pgfId=14250"></a><tt class="cv">ataHBAslotNum</tt> 			<dd class="DD.DefinitionDef"><a name="pgfId=875"></a>This field specifies the slot number of the HBA. This field is not supported; it returns a value of 0. 		</dl>		<div>			<h5 class="RSb.RoutineSbhd"><a name="pgfId=876"></a>RESULT CODES</H5>			<p class="T0.Text0"><a name="pgfId=880"></a>See <a href="ATA.3a.html#37212" class="XRef">Table&nbsp;A-1</a> for possible result codes returned by the ATA Manager.</p>		</div>		<p>		<hr>		&copy; 1999 Apple Computer, Inc. </p>		<p><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.2c.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.2e.html"><img src="images/next.gif" border="0"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script></a><!-- end Show/Hide frames --></P><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer -->	</body></html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Resource Programming Guide: Carbon Resources</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Carbon Resources"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/10000051i-CH5" title="Carbon Resources"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../ResourceManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000458" target="_top">Resource Management</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW1">Resource Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ImageSoundResources/ImageSoundResources.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/10000051i-CH5-SW1" title="Carbon Resources"></a><h1>Carbon Resources</h1><p>Carbon applications use all of the same string, image, sound, and video resources that Cocoa applications use. Carbon applications also support the use of nib files for loading the application’s user interface. Unlike Cocoa applications, however, Carbon applications typically do not instantiate all of the objects in a nib file at once. Instead, applications load individual windows and menus from one or more nib files at different points in the program. This chapter provides examples of how to load nib files containing Carbon objects.</p><div class="notebox"><a name="//apple_ref/doc/uid/10000051i-CH5-SW5" title="Note"></a><p><strong>Note:</strong>&nbsp;Carbon supports the loading of nib files through Interface Builder Services, which is part of the HIToolbox in the Carbon framework (<code>Carbon.framework</code>). For information about the functions in Interface Builder Services, see <em><a href="../../../../Carbon/Reference/Interface_Builder/index.html#//apple_ref/doc/uid/TP30000050" target="_top">Interface Builder Services Reference</a></em>.  </p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="CarbonNibs.html#//apple_ref/doc/uid/10000051i-CH5-SW6">Nib File Design Guidelines</a>
				
			<br/>
			
        
			
			
				<a href="CarbonNibs.html#//apple_ref/doc/uid/10000051i-CH5-SW7">Loading Objects from Nib Files</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/10000051i-CH5-SW6" title="Nib File Design Guidelines"></a><h2>Nib File Design Guidelines</h2><p>When creating your Carbon nib files, keep the following guidelines in mind:</p><ul class="ul"><li class="li"><p>Store only launch-related resources in your application’s main nib file. The main nib file should contain the application menu bar and any resources that are needed at launch time only. Other resources should be stored separately.</p></li><li class="li"><p>Store frequently used user-interface components (such as document windows) in their own separate nib files. This nib file should contain only the resources needed immediately by that component.</p></li><li class="li"><p>Store infrequently used user-interface components (such as alert panels) in separate nib files. Avoid storing infrequently used components in nib files with frequently used components. When a nib file is loaded, the data for the entire file is loaded into memory and objects are instantiated from that data as needed. Thus, if an object is not used it is still occupying space in memory. </p></li></ul><a name="//apple_ref/doc/uid/10000051i-CH5-SW7" title="Loading Objects from Nib Files"></a><h2>Loading Objects from Nib Files</h2><p>There are three main ways to load objects. You can:</p><ul class="ul"><li class="li"><p>Load a menu bar and main window from your application’s main nib file.</p></li><li class="li"><p>Load objects from an auxiliary nib file in the main bundle.</p></li><li class="li"><p>Load objects from nib files in other bundles.</p></li></ul><p>In this section, you’ll find steps and code examples for each technique.</p><a name="//apple_ref/doc/uid/10000051i-CH5-TPXREF102" title="Unarchiving Objects from the Main Nib File"></a><h3>Unarchiving Objects from the Main Nib File</h3><p>When your application starts up, you need to call Interface Builder Services functions to open the main nib file and unarchive the interface objects that should be open after startup. The main nib file should contain only those items that are essential when your application starts up. In most cases, the main nib file should contain only the menu bar and perhaps a main window. </p><p>The steps below outline how to open a main nib file and unarchive the objects in it. <span class="content_text"><a href="CarbonNibs.html#//apple_ref/doc/uid/10000051i-CH5-SW2">Listing 5-1</a></span> shows how to implement the steps for a nib file that contains a menu bar and a main window. If your application needs only one of these objects at startup, you can easily modify the sample code.</p><ol class="ol"><li class="li"><p>Call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateNibReference" target="_top">CreateNibReference</a></code> to create a reference to the main nib file.</p></li><li class="li"><p>Unarchive the menu bar from the main nib file by calling the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/SetMenuBarFromNib" target="_top">SetMenuBarFromNib</a></code>. This function also sets the menu bar so users can use the menu bar when your application has started up.</p></li><li class="li"><p>If your application has a main window, call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateWindowFromNib" target="_top">CreateWindowFromNib</a></code> to unarchive the main window.</p></li><li class="li"><p>After you have unarchived the objects from the main nib file, dispose of the nib reference by calling the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/DisposeNibReference" target="_top">DisposeNibReference</a></code>.</p></li><li class="li"><p> The function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateWindowFromNib" target="_top">CreateWindowFromNib</a></code> unarchives the window so that it is hidden. If you want the window to be visible, you must call the Window Manager function <code><a href="../../../../Carbon/Reference/Window_Manager/Reference/reference.html#//apple_ref/doc/c_ref/ShowWindow" target="_top">ShowWindow</a></code>.</p></li></ol><p>It is good practice to check for errors each step of the way, as shown in <span class="content_text">Listing 5-1</span>. If the main user interface cannot be created, your application should halt the start up process and exit. This example assumes that the name of your application’s main nib file is <code>main.nib</code>. </p><a name="//apple_ref/doc/uid/10000051i-CH5-SW2" title="Listing 5-1Unarchiving the menu bar and main window from the main nib file"></a><p class="codesample"><a name="//apple_ref/doc/uid/10000051i-CH5-CIHCAAEJ" title="Listing 5-1Unarchiving the menu bar and main window from the main nib file"></a><strong>Listing 5-1&nbsp;&nbsp;</strong>Unarchiving the menu bar and main window from the main nib file</p><div class="codesample"><table><tr><td scope="row"><pre>int main (int argc, char* argv[])<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    IBNibRef        nibRef;<span></span></pre></td></tr><tr><td scope="row"><pre>    WindowRef       window;<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus        err;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Create a nib reference to a nib file.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CreateNibReference (CFSTR ("main"), &amp;nibRef);<span></span></pre></td></tr><tr><td scope="row"><pre>    // Call the macro require_noerr to make sure no errors occurred<span></span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, CantGetNibRef);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Unarchive the menu bar and make it ready to use.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = SetMenuBarFromNib (nibRef, CFSTR("MainMenu"));<span></span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, CantSetMenuBar);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Unarchive the main window.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CreateWindowFromNib (nibRef, CFSTR("MainWindow"), &amp;window);<span></span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, CantCreateWindow);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Dispose of the nib reference as soon as you don’t need it any more.<span></span></pre></td></tr><tr><td scope="row"><pre>    DisposeNibReference (nibRef);<span></span></pre></td></tr><tr><td scope="row"><pre>    // Make the unarchived window visible.<span></span></pre></td></tr><tr><td scope="row"><pre>    ShowWindow (window);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Start the event loop. RunApplicationEventLoop is a<span></span></pre></td></tr><tr><td scope="row"><pre>     // Carbon Event Manager function.<span></span></pre></td></tr><tr><td scope="row"><pre>    RunApplicationEventLoop ();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // You’ll jump to one of the “Cant” statements only if there’s<span></span></pre></td></tr><tr><td scope="row"><pre>    // an error.<span></span></pre></td></tr><tr><td scope="row"><pre>    CantCreateWindow:<span></span></pre></td></tr><tr><td scope="row"><pre>    CantSetMenuBar:<span></span></pre></td></tr><tr><td scope="row"><pre>    CantGetNibRef:<span></span></pre></td></tr><tr><td scope="row"><pre>    return err;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/10000051i-CH5-TPXREF103" title="Unarchiving an Object from an Auxiliary Nib File"></a><h3>Unarchiving an Object from an Auxiliary Nib File</h3><p>For most applications, it is useful to factor your application’s interface objects into several nib files. The main nib file should contain at the most, the menu bar and the window that opens (if any) when your application starts up. Document windows, palettes, toolbars, contextual menus, and other interface objects should be stored in separate nib files.</p><p>The steps for opening an auxiliary nib file and unarchiving an object from it are similar to those used for your main nib file: </p><ol class="ol"><li class="li"><p>Call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateNibReference" target="_top">CreateNibReference</a></code> to create a reference to the auxiliary nib file that contains the object you want to unarchive.</p></li><li class="li"><p>Call the appropriate function to unarchive the object from the nib file. To unarchive a window, call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateWindowFromNib" target="_top">CreateWindowFromNib</a></code>; to unarchive a menu, call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateMenuFromNib" target="_top">CreateMenuFromNib</a></code>. </p></li><li class="li"><p>After you have unarchived the object from the auxiliary nib file, dispose of the nib reference by calling the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/DisposeNibReference" target="_top">DisposeNibReference</a></code>.</p></li></ol><p>One common use of an auxiliary nib file is to store an object that’s used repeatedly in an application, such as a document window. Another use is to store objects that are rarely needed, such as an About window. <span class="content_text">Listing 5-2</span> shows how to implement a <code><!--a-->MyCreateNewDocument<!--/a--></code> function that your application would call each time the user creates a new document. The code uses macro-based error checking to abort the operation if an error occurs. </p><a name="//apple_ref/doc/uid/10000051i-CH5-SW3" title="Listing 5-2Unarchiving a document window from an auxiliary nib file "></a><p class="codesample"><a name="//apple_ref/doc/uid/10000051i-CH5-CIHHHEGA" title="Listing 5-2Unarchiving a document window from an auxiliary nib file "></a><strong>Listing 5-2&nbsp;&nbsp;</strong>Unarchiving a document window from an auxiliary nib file </p><div class="codesample"><table><tr><td scope="row"><pre>WindowRef MyCreateNewDocument (CFStringRef inName)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    IBNibRef documentNib;<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus err;<span></span></pre></td></tr><tr><td scope="row"><pre>    WindowRef theWindow;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Create a nib reference to an auxiliary nib file with<span></span></pre></td></tr><tr><td scope="row"><pre>    // the name document.nib.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CreateNibReference (CFSTR ("document"), &amp;documentNib);<span></span></pre></td></tr><tr><td scope="row"><pre>    // Call the macro require_noerr to make sure no errors occurred<span></span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, CantGetNibRef);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Unarchive the document window. Use the name you gave to the<span></span></pre></td></tr><tr><td scope="row"><pre>    // window object in the Instances pane in Interface Builder.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CreateWindowFromNib (documentNib, CFSTR("MyDocument"),<span></span></pre></td></tr><tr><td scope="row"><pre>                                                 &amp;theWindow);<span></span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, CantCreateWindow);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Dispose of the nib reference as soon as you don’t need it anymore.<span></span></pre></td></tr><tr><td scope="row"><pre>    DisposeNibReference (documentNib);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Call the Window Manager function to set the title shown in the<span></span></pre></td></tr><tr><td scope="row"><pre>    // window’s title bar to the name passed to MyCreateNewDocument.<span></span></pre></td></tr><tr><td scope="row"><pre>    err =  SetWindowTitleWithCFString (theWindow, inName);<span></span></pre></td></tr><tr><td scope="row"><pre>    // In this example, the window gets returned. Remember, it’s been<span></span></pre></td></tr><tr><td scope="row"><pre>    // unarchived, but it is still not visible. It won’t be visible<span></span></pre></td></tr><tr><td scope="row"><pre>    // until you call the Window Manager function ShowWindow.<span></span></pre></td></tr><tr><td scope="row"><pre>    return theWindow;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // You’ll jump to one of the “Cant” statements only if there’s<span></span></pre></td></tr><tr><td scope="row"><pre>    // an error.<span></span></pre></td></tr><tr><td scope="row"><pre>    CantCreateWindow:<span></span></pre></td></tr><tr><td scope="row"><pre>    CantGetNibRef:<span></span></pre></td></tr><tr><td scope="row"><pre>     return NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/10000051i-CH5-TPXREF104" title="Unarchiving an Object from an External Bundle"></a><h3>Unarchiving an Object from an External Bundle</h3><p>Your application is not limited to using interface objects contained within its own bundle. You can unarchive interface objects from another bundle or framework to which your application has access. For example, you could unarchive a tools palette or other object provided by a plug-in bundle.</p><p>The steps for unarchiving an object from a nib file in a framework or other bundle are similar to those used to open an auxiliary nib file and are listed below. The main difference is that you must first create a a reference to the external bundle. You must also call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateNibReferenceWithCFBundle" target="_top">CreateNibReferenceWithCFBundle</a></code> instead of <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateNibReference" target="_top">CreateNibReference</a></code> to create a reference to the nib file. The steps are as follows:</p><ol class="ol"><li class="li"><p>Call the Core Foundation URL Services function <code><a href="../../../../CoreFoundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/doc/c_ref/CFURLCreateWithFileSystemPath" target="_top">CFURLCreateWithFileSystemPath</a></code> to create a URL that points to the desired bundle. (For reference documentation, see <em><a href="../../../../CoreFoundation/Reference/CFURLRef/index.html#//apple_ref/doc/uid/20001206" target="_top">CFURL Reference</a></em>.) </p></li><li class="li"><p>Call the Core Foundation Bundle Services function <code><a href="../../../../CoreFoundation/Reference/CFBundleRef/Reference/reference.html#//apple_ref/doc/c_ref/CFBundleCreate" target="_top">CFBundleCreate</a></code> to create a reference to the bundle that contains nib file you want to open. (For reference documentation, see <em><a href="../../../../CoreFoundation/Reference/CFBundleRef/index.html#//apple_ref/doc/uid/20001191" target="_top">CFBundle Reference</a></em>.) </p></li><li class="li"><p>Call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateNibReferenceWithCFBundle" target="_top">CreateNibReferenceWithCFBundle</a></code> to create a reference to the nib file that contains the object you want to unarchive.</p></li><li class="li"><p>Call the appropriate function to unarchive the object from the nib file. To unarchive a window, call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateWindowFromNib" target="_top">CreateWindowFromNib</a></code>; to unarchive a menu, call the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/CreateMenuFromNib" target="_top">CreateMenuFromNib</a></code>. </p></li><li class="li"><p>After you have unarchived the object from the nib file, dispose of the nib reference by calling the function <code><a href="../../../../Carbon/Reference/Interface_Builder/Reference/reference.html#//apple_ref/doc/c_ref/DisposeNibReference" target="_top">DisposeNibReference</a></code>.</p></li></ol><p>The function <code><!--a-->MyCreateWidgetFromFramework<!--/a--></code>, shown in <span class="content_text">Listing 5-3</span>, shows how to unarchive a “widget window” from a bundle whose path you pass to the function.</p><a name="//apple_ref/doc/uid/10000051i-CH5-SW4" title="Listing 5-3Unarchiving a widget window from a nib file in a bundle"></a><p class="codesample"><a name="//apple_ref/doc/uid/10000051i-CH5-CIHGIJID" title="Listing 5-3Unarchiving a widget window from a nib file in a bundle"></a><strong>Listing 5-3&nbsp;&nbsp;</strong>Unarchiving a widget window from a nib file in a bundle</p><div class="codesample"><table><tr><td scope="row"><pre>WindowRef MyCreateWidgetFromBundle (CFStringRef widgetBundlePath<span></span></pre></td></tr><tr><td scope="row"><pre>                                    CFStringRef widgetFileName,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    CFStringRef  widgetWindowName)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    IBNibRef widgetNib;<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus err;<span></span></pre></td></tr><tr><td scope="row"><pre>    WindowRef theWindow;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFBundleRef mainBundle;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFURLRef    bundleURL;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFBundleRef widgetBundle;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Look for a resource in the bundle passed to<span></span></pre></td></tr><tr><td scope="row"><pre>    // the function MyCreateWidgetFromBundle<span></span></pre></td></tr><tr><td scope="row"><pre>    bundleURL = CFURLCreateWithFileSystemPath(<span></span></pre></td></tr><tr><td scope="row"><pre>                            kCFAllocatorDefault,<span></span></pre></td></tr><tr><td scope="row"><pre>                            widgetBundlePath,<span></span></pre></td></tr><tr><td scope="row"><pre>                            kCFURLPOSIXPathStyle,<span></span></pre></td></tr><tr><td scope="row"><pre>                            TRUE);<span></span></pre></td></tr><tr><td scope="row"><pre>    // Make a bundle instance using the URL Reference<span></span></pre></td></tr><tr><td scope="row"><pre>    widgetBundle = CFBundleCreate (kCFAllocatorDefault, bundleURL);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Create a nib reference to the nib file.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CreateNibReferenceWithCFBundle (widgetBundle,<span></span></pre></td></tr><tr><td scope="row"><pre>                            widgetFileName, &amp;widgetNib);<span></span></pre></td></tr><tr><td scope="row"><pre>    // Call the macro require_noerr to make sure no errors occurred<span></span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, CantGetNibRef);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Unarchive the widget window.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CreateWindowFromNib (widgetNib, widgetWindowName, &amp;theWindow);<span></span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, CantCreateWindow );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Dispose of the nib reference as soon as you don’t need it anymore.<span></span></pre></td></tr><tr><td scope="row"><pre>    DisposeNibReference (widgetNib);<span></span></pre></td></tr><tr><td scope="row"><pre>    // Release the Core Foundation objects<span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease (bundleURL);<span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease (widgetBundle);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // In this example, the window gets returned. Remember, it’s been<span></span></pre></td></tr><tr><td scope="row"><pre>    // unarchived, but it is still not visible. It won’t be visible<span></span></pre></td></tr><tr><td scope="row"><pre>    // until you call the Window Manager function ShowWindow.<span></span></pre></td></tr><tr><td scope="row"><pre>    return theWindow;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // You’ll jump to one of the “Cant” statements only if there’s<span></span></pre></td></tr><tr><td scope="row"><pre>    // an error.<span></span></pre></td></tr><tr><td scope="row"><pre>    CantCreateWindow:<span></span></pre></td></tr><tr><td scope="row"><pre>    CantGetNibRef:<span></span></pre></td></tr><tr><td scope="row"><pre>     return NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ImageSoundResources/ImageSoundResources.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/LoadingResources/CarbonNibs/CarbonNibs.html%3Fid%3D10000051i-3.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/LoadingResources/CarbonNibs/CarbonNibs.html%3Fid%3D10000051i-3.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/LoadingResources/CarbonNibs/CarbonNibs.html%3Fid%3D10000051i-3.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<HTML><head><script language="JavaScript" src="../../RM/frametest.js"></script><TITLE> Panorama Tracks in Cubic Nodes</TITLE><script language=javascript> window.parent.focus(); </script></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>What's New in QuickTime 5</I><P>| <A HREF="Max.6d.htm">Previous</A> | <A HREF="Max.1.htm">Chapter Contents</A> | <A HREF="Max.htm">Chapter Top</A> | <A HREF="Max.6f.htm">Next</A> |</P></DIV><!-- QTnavbar end --><H1 CLASS="H3.Heading3"><A NAME="pgfId=73271"> </A>Panorama Tracks in Cubic Nodes</H1><P CLASS="T1.Text1"><A NAME="pgfId=73272"> </A>The media sample for a panorama track contains the pano sample atom container. For cubes, some of the fields in the pano sample data atom have special values, which provide compatibility back to earlier versions of QuickTime VR. The cubic projection engine ignores these fields. They allow one to view cubic movies in older versions of QuickTime using the cylindrical engine, although the view will be somewhat incorrect, and the top and bottom faces will not be visible. The special values are shown in <A HREF="Max.6e.htm#73418" CLASS="XRef">Table 1</A>.</P><P CLASS="Tb.Table"><A NAME="pgfId=73277"> </A>Table&nbsp;1 <A NAME="73418"> </A>Fields and their special values as represented in the pano sample data atom, providing backward compatibility to earlier versions of QuickTime VR </P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=73280"> </A>Field</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=73282"> </A>Value</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73284"> </A><TT CLASS="cv">imageNumFramesX </TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73286"> </A>4</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73288"> </A><TT CLASS="cv">imageNumFramesY</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73290"> </A>1</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73292"> </A><TT CLASS="cv">imageSizeX</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73294"> </A>frame width * 4</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73296"> </A><TT CLASS="cv">imageSizeY</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73298"> </A>frame height</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73300"> </A><TT CLASS="cv">minPan</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73302"> </A>0.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73304"> </A><TT CLASS="cv">maxPan</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73306"> </A>360.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73308"> </A><TT CLASS="cv">minTilt</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73310"> </A>-45.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73312"> </A><TT CLASS="cv">maxTilt</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73314"> </A>45.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73316"> </A><TT CLASS="cv">minFieldOfView</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73318"> </A>5.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73320"> </A><TT CLASS="cv">maxFieldOfView</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73322"> </A>90.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73324"> </A><TT CLASS="cv">flags</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73326"> </A>1</FONT></TD></TR></TABLE><P CLASS="T1.Text1"><A NAME="pgfId=73327"> </A>A 1 value in the flags field tells QuickTime VR that the frames are not rotated. QuickTime VR treats this as a four-frame horizontal cylinder. The <TT CLASS="cv">panoType</TT> field (formerly <TT CLASS="cv">reserved1</TT>) must be set to <TT CLASS="cv">kQTVRCube </TT>(<TT CLASS="cv">'cube'</TT>) so that QuickTime&nbsp;5 can recognize this panorama as a cube.</P><P CLASS="T1.Text1"><A NAME="pgfId=73328"> </A>Since certain of the viewing fields in the pano sample data atom are being used for backward compatibility, a new atom must be added to indicate the proper viewing parameters for the cubic image. This atom is the cubic view atom (atom type <TT CLASS="cv">'cuvw'</TT>). The data structure of the cubic view atom is as follows:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=97510"> </A>struct QTVRCubicViewAtom {<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 minPan;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 maxPan;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 minTilt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 maxTilt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 minFieldOfView;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 maxFieldOfView;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 defaultPan;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 defaultTilt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Float32 defaultFieldOfView;<BR>};<BR>typedef struct QTVRCubicViewAtomQTVRCubicViewAtom;</code><br><P CLASS="T1.Text1"><A NAME="pgfId=73330"> </A>The fields are filled in as desired for the cubic image. This atom is ignored by older versions of QuickTime VR. Typical values for the <TT CLASS="cv">min</TT> and <TT CLASS="cv">max</TT> fields are shown in <A HREF="Max.6e.htm#22325" CLASS="XRef">Table 2</A>. </P><P CLASS="Tb.Table"><A NAME="pgfId=73364"> </A>Table&nbsp;2 <A NAME="22325"> </A>Values for min and max fields </P><TABLE><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=73337"> </A>Field</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=73339"> </A>Value</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73341"> </A><TT CLASS="cv">minPan </TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73343"> </A>0.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73345"> </A><TT CLASS="cv">maxPan</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73347"> </A>360.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73349"> </A><TT CLASS="cv">minTilt </TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73351"> </A>-90.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73353"> </A><TT CLASS="cv">maxTilt</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73355"> </A>90.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73357"> </A><TT CLASS="cv">minFieldOfView </TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73359"> </A>5.0</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73361"> </A><TT CLASS="cv">maxFieldOfView</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=73363"> </A>120.0</FONT></TD></TR></TABLE><P CLASS="T1.Text1"><A NAME="pgfId=73365"> </A>You add the cubic view atom to the pano sample atom container (after adding the pano sample data atom). Then use <TT CLASS="cv">AddMediaSample</TT> to add the atom container to the panorama track.</P><hr>&#169; 2001 Apple Computer, Inc.<!-- QTnavbar start --><P><I>What's New in QuickTime 5</I><P>| <A HREF="Max.6d.htm">Previous</A> | <A HREF="Max.1.htm">Chapter Contents</A> | <A HREF="Max.htm">Chapter Top</A> | <A HREF="Max.6f.htm">Next</A> |</P></DIV><!-- QTnavbar end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
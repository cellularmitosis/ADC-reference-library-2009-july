<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Address Book Programming Guide for Mac OS X: Searching an Address Book</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Searching an Address Book"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001024" title="Searching an Address Book"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../AppleApplications/index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../../AppleApplications/AddressBook-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP30000442" target="_top">Address Book</a> &gt; <a href="../index.html" target="_top">Address Book Programming Guide for Mac OS X</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="AccessingData.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="CreatingMailingLists.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20001024-BABHHIHC" title="Searching an Address Book"></a><hr /><H1>Searching an Address Book</H1>

<p>You can quickly search a user’s address book, using arbitrarily complex criteria. The address book is fully indexed, automatically. And the Address Book framework’s searching features let you easily create complex searches. For example, you can search for all people named “Smith,” or for all people who work at Acme and live in San Francisco, or who work at Ajax and live in Seattle. </p>
<p>Here’s how you create a search query. For each property you want to search on, create a search element. If you want to search on multiple properties, combine the search elements together with Boolean operators to create a complex search element. Then search the Address Book with that simple or complex search element. </p>

<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Searching.html#//apple_ref/doc/uid/20001024-103556">Creating a Search Element for a Single Property</a>
				
			<br/>
			
        
			
			
				<a href="Searching.html#//apple_ref/doc/uid/20001024-103511">Creating a Search Element for Multiple Properties</a>
				
			<br/>
			
        
			
			
				<a href="Searching.html#//apple_ref/doc/uid/20001024-103495">Finding Records that Match a Search Element</a>
				
			<br/>
			
        
			
			
				<a href="Searching.html#//apple_ref/doc/uid/20001024-BCIGDABJ">Search Examples</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001024-103556" title="Creating a Search Element for a Single Property"></a><h2>Creating a Search Element for a Single Property</h2>
<p>To create a search element for a person, use the ABPerson class method <code><a href="../../../Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/occ/clm/ABPerson/searchElementForProperty:label:key:value:comparison:" target="_top">searchElementForProperty:label:key:value:comparison:</a></code>. To create a search element for a group, use the ABGroup class method <code><a href="../../../Reference/AddressBook/Classes/ABGroup_Class/Reference/Reference.html#//apple_ref/occ/clm/ABGroup/searchElementForProperty:label:key:value:comparison:" target="_top">searchElementForProperty:label:key:value:comparison:</a></code>. These procedures take the following arguments:</p>
<ul class="ul"><li class="li"><p><em>property</em> is the name of the property to search on, such as <code><a href="../../../Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABAddressProperty" target="_top">kABAddressProperty</a></code> or <code><a href="../../../Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABLastNameProperty" target="_top">kABLastNameProperty</a></code>. It cannot be <code><a href="../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/nil" target="_top">nil</a></code>. For a full list of the properties, see <code>ABGlobals.h</code>.</p></li>
<li class="li"><p><em>label</em> is the label name for a multivalue list, such as <code><!--a  -->kABAdressHomeLabel<!--/a--></code>, <code><a href="../../../Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABPhoneWorkLabel" target="_top">kABPhoneWorkLabel</a></code>, or a user-specified label, such as <code>"Summer Home"</code>. If the specified property does not have multiple values, pass <code><a href="../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/nil" target="_top">nil</a></code>. If the specified property does have multiple values, pass <code><a href="../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/nil" target="_top">nil</a></code> to search all the values.</p></li>
<li class="li"><p><em>key</em> is the key name for a dictionary, such as <code><a href="../../../Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABAddressCityKey" target="_top">kABAddressCityKey</a></code> or <code><a href="../../../Reference/AddressBook/Classes/ABPerson_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABAddressStreetKey" target="_top">kABAddressStreetKey</a></code>. If the specified property is not a dictionary, pass <code><a href="../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/nil" target="_top">nil</a></code>. If the specified property is a dictionary, pass <code><a href="../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/nil" target="_top">nil</a></code> to search all keys.</p></li>
<li class="li"><p><em>value</em> is what you’re searching for. It cannot be <code><a href="../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/nil" target="_top">nil</a></code>. </p></li>
<li class="li"><p><em>comparison</em> specifies the type of comparison to perform. You can choose </p><ul class="nested"><li class="nested li"><p>To search for elements that are equal or not equal to the value, use <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABEqual" target="_top">kABEqual</a></code>, <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABNotEqual" target="_top">kABNotEqual</a></code>, or <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABEqualCaseInsensitive" target="_top">kABEqualCaseInsensitive</a></code></p></li>
<li class="nested li"><p>To search for elements that are less than or greater than the value, use <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABLessThan" target="_top">kABLessThan</a></code>, <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABLessThanOrEqual" target="_top">kABLessThanOrEqual</a></code>, <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABGreaterThan" target="_top">kABGreaterThan</a></code>, or <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABGreaterThanOrEqual" target="_top">kABGreaterThanOrEqual</a></code>. </p></li>
<li class="nested li"><p>To search for elements <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABContainsSubString" target="_top">kABContainsSubString</a></code>, <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABContainsSubStringCaseInsensitive" target="_top">kABContainsSubStringCaseInsensitive</a></code>, <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABPrefixMatch" target="_top">kABPrefixMatch</a></code>, or <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABPrefixMatchCaseInsensitive" target="_top">kABPrefixMatchCaseInsensitive</a></code>. </p></li></ul></li></ul>
<a name="//apple_ref/doc/uid/20001024-103511" title="Creating a Search Element for Multiple Properties"></a><h2>Creating a Search Element for Multiple Properties</h2>
<p>To combine search elements, use the ABSearchElement class method <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/occ/clm/ABSearchElement/searchElementForConjunction:children:" target="_top">searchElementForConjunction:children:</a></code>. These procedures take two arguments:</p>
<ul class="ul"><li class="li"><p><em>conjunctionOperator</em> describes how to combine the search elements. It can be <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABSearchAnd" target="_top">kABSearchAnd</a></code> or <code><a href="../../../Reference/AddressBook/Classes/ABSearchElement_Class/Reference/Reference.html#//apple_ref/doc/c_ref/kABSearchOr" target="_top">kABSearchOr</a></code>.</p></li>
<li class="li"><p><em>children</em> is an NSArray of search elements. The search elements can be a simple elements that specifies only one property, or complex elements that specifies several. This lets you create arbitrarily complex search elements. You cannot combine search elements for groups with search elements for people. </p></li></ul>
<a name="//apple_ref/doc/uid/20001024-103495" title="Finding Records that Match a Search Element"></a><h2>Finding Records that Match a Search Element</h2>
<p>To search the Address Book for records that match a search element, use the ABAddressBook method <code><a href="../../../Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/recordsMatchingSearchElement:" target="_top">recordsMatchingSearchElement:</a></code>. These procedures return an NSArray of records. </p>
<a name="//apple_ref/doc/uid/20001024-109483" title="Search Examples"></a><a name="//apple_ref/doc/uid/20001024-BCIGDABJ" title="Search Examples"></a><h2>Search Examples</h2>
<p><span class="content_text">Listing 1</span> shows a simple search. This code finds all the people whose last name is “Smith.” </p>
<a name="//apple_ref/doc/uid/20001024-BAJHFGAI" title="Listing 1Simple Search"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001024-103380" title="Listing 1Simple Search"></a><strong>Listing 1&nbsp;&nbsp;</strong>Simple Search</p>
<div class="codesample"><table><tr><td scope="row"><pre>ABAddressBook *AB = [ABAddressBook sharedAddressBook];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *nameIsSmith =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABPerson searchElementForProperty:kABLastNameProperty<span></span></pre></td></tr><tr><td scope="row"><pre>                                 label:nil<span></span></pre></td></tr><tr><td scope="row"><pre>                                   key:nil<span></span></pre></td></tr><tr><td scope="row"><pre>                                 value:@"Smith"<span></span></pre></td></tr><tr><td scope="row"><pre>                            comparison:kABEqualCaseInsensitive];<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *peopleFound =<span></span></pre></td></tr><tr><td scope="row"><pre>    [AB recordsMatchingSearchElement:nameIsSmith];<span></span></pre></td></tr></table></div>
<p><span class="content_text">Listing 2</span> shows a complex search. It searches for anyone who lives in San Francisco and works for Acme, or for anyone who lives in Seattle and works for Ajax. Note that the addresses are searched using the <code><a href="../../../Reference/AddressBook/C/ABPersonRef/Reference/reference.html#//apple_ref/c/data/kABHomeLabel" target="_top">kABHomeLabel</a></code> label—we only want to know if they live in the city we are searching, not if they work in the same city.</p>
<a name="//apple_ref/doc/uid/20001024-BAJCGEJD" title="Listing 2Complex Search"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001024-137996" title="Listing 2Complex Search"></a><strong>Listing 2&nbsp;&nbsp;</strong>Complex Search</p>
<div class="codesample"><table><tr><td scope="row"><pre>ABAddressBook *AB = [ABAddressBook sharedAddressBook];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *inSF =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABPerson searchElementForProperty:kABAddressProperty<span></span></pre></td></tr><tr><td scope="row"><pre>                                 label:kABHomeLabel<span></span></pre></td></tr><tr><td scope="row"><pre>                                   key:kABAddressCityKey<span></span></pre></td></tr><tr><td scope="row"><pre>                                 value:@"San Francisco"<span></span></pre></td></tr><tr><td scope="row"><pre>                            comparison:kABEqualCaseInsensitive];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *atAcme =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABPerson searchElementForProperty:kABOrganizationProperty<span></span></pre></td></tr><tr><td scope="row"><pre>                                 label:nil<span></span></pre></td></tr><tr><td scope="row"><pre>                                   key:nil<span></span></pre></td></tr><tr><td scope="row"><pre>                                 value:@"Acme"<span></span></pre></td></tr><tr><td scope="row"><pre>                            comparison:kABContainsSubStringCaseInsensitive];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *inSeattle =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABPerson searchElementForProperty:kABAddressProperty<span></span></pre></td></tr><tr><td scope="row"><pre>                                 label:kABHomeLabel<span></span></pre></td></tr><tr><td scope="row"><pre>                                   key:kABAddressCityKey<span></span></pre></td></tr><tr><td scope="row"><pre>                                 value:@"Seattle"<span></span></pre></td></tr><tr><td scope="row"><pre>                            comparison:kABEqualCaseInsensitive];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *atAjax =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABPerson searchElementForProperty:kABOrganizationProperty<span></span></pre></td></tr><tr><td scope="row"><pre>                                 label:nil<span></span></pre></td></tr><tr><td scope="row"><pre>                                   key:nil<span></span></pre></td></tr><tr><td scope="row"><pre>                                 value:@"Ajax"<span></span></pre></td></tr><tr><td scope="row"><pre>                            comparison:kABContainsSubStringCaseInsensitive];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *inSFAndAtAcme =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABSearchElement searchElementForConjunction:kABSearchAnd<span></span></pre></td></tr><tr><td scope="row"><pre>                                        children:[NSArray arrayWithObjects:<span></span></pre></td></tr><tr><td scope="row"><pre>                                            inSF, atAcme, nil]];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *inSeattleAndAtAjax =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABSearchElement searchElementForConjunction:kABSearchAnd<span></span></pre></td></tr><tr><td scope="row"><pre>                                        children:[NSArray arrayWithObjects:<span></span></pre></td></tr><tr><td scope="row"><pre>                                            inSeattle, atAjax, nil]];<span></span></pre></td></tr><tr><td scope="row"><pre>ABSearchElement *inSFAndAtAcmeOrInSeattleAndAtAjax =<span></span></pre></td></tr><tr><td scope="row"><pre>    [ABSearchElement searchElementForConjunction:kABSearchOr<span></span></pre></td></tr><tr><td scope="row"><pre>                                        children:[NSArray arrayWithObjects:<span></span></pre></td></tr><tr><td scope="row"><pre>                                            inSFAndAtAcme, inSeattleAndAtAjax, nil]];<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *peopleFound =<span></span></pre></td></tr><tr><td scope="row"><pre>    [AB recordsMatchingSearchElement:inSFAndAtAcmeOrInSeattleAndAtAjax];<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="AccessingData.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="CreatingMailingLists.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-04-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/UserExperience/Conceptual/AddressBook/Tasks/Searching.html%3Fid%3D10000117i-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/UserExperience/Conceptual/AddressBook/Tasks/Searching.html%3Fid%3D10000117i-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/UserExperience/Conceptual/AddressBook/Tasks/Searching.html%3Fid%3D10000117i-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

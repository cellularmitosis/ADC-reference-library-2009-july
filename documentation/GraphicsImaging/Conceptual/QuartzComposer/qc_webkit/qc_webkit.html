<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Quartz Composer Programming Guide: Adding Compositions to Webpages and Widgets</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Adding Compositions to Webpages and Widgets"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001357-CH3" title="Adding Compositions to Webpages and Widgets"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../Quartz-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000559" target="_top">Quartz</a> &gt; <a href="../qc_intro/qc_intro.html#//apple_ref/doc/uid/TP40001357-CH201-TPXREF101">Quartz Composer Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../qc_play_renderer/qc_play_renderer.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../qc_revhistory/qc_revhistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001357-CH3-SW6" title="Adding Compositions to Webpages and Widgets"></a><h1>Adding Compositions to Webpages and Widgets</h1><p>The Quartz Composer WebKit plug-in, available in Mac OS X v10.4.7 or later, lets you include Quartz Composer compositions in a webpage or Dashboard widget. The plug-in is a WebKit–style Internet plug-in, available to WebKit–based  browsers, such as Safari, OmniWeb, and Shiira. It’s also available to Dashboard widgets, because Dashboard uses the WebKit to render the HTML, CSS, and JavaScript files that make widgets.</p><p>This chapter shows how to use the WebKit plug-in and how to manipulate a composition using JavaScript. It also describes the HTML attributes specific to the plug-in and discusses which Quartz Composer patches are not allowed in a composition rendered by a WebKit plug-in.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW3">Including a Composition in an HTML File</a>
				
			<br/>
			
        
			
			
				<a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW2">Manipulating a Composition Using JavaScript</a>
				
			<br/>
			
        
			
			
				<a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW7">HTML Attributes for the Quartz Composer WebKit Plug-in</a>
				
			<br/>
			
        
			
			
				<a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW8">Allowed and Disallowed Patches</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001357-CH3-SW3" title="Including a Composition in an HTML File"></a><h2>Including a Composition in an HTML File</h2><p>To add a Quartz Composer composition to a webpage or Dashboard widget, you need to include it in an HTML file using the <code>&lt;embed></code> tag, as shown in <span class="content_text">Listing 4-1</span>.</p><a name="//apple_ref/doc/uid/TP40001357-CH3-SW1" title="Listing 4-1The &amp;lt;embed&gt; tag for a composition"></a><p class="codesample"><strong>Listing 4-1&nbsp;&nbsp;</strong>The &lt;embed> tag for a composition</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;embed type="application/x-quartzcomposer"<span></span></pre></td></tr><tr><td scope="row"><pre>       src="my_composition.qtz"<span></span></pre></td></tr><tr><td scope="row"><pre>       id="myComposition"<span></span></pre></td></tr><tr><td scope="row"><pre>       width="300px"<span></span></pre></td></tr><tr><td scope="row"><pre>       height="150px"<span></span></pre></td></tr><tr><td scope="row"><pre>       opaque="false"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/embed><span></span></pre></td></tr></table></div><p>Some of the attributes included with the <code>&lt;embed></code> tag in <span class="content_text">Listing 4-1</span> are standard attributes found in many HTML elements. Two of the attributes in <span class="content_text">Listing 4-1</span>  are necessary for the plug-in to be loaded properly: </p><ul class="ul"><li class="li"><p><code>type</code> tells the browser loading this element that the content to be displayed is a Quartz Composer composition. To render a Quartz Composer composition, set this attribute to <code>application/x-quartzcomposer</code>. It is important to include this attribute because without it, a browser may try to use another plug-in to render your composition.</p></li><li class="li"><p><code>src</code> is the uniform resource locator, or URL, to your composition. The URL can specify either a path relative to the HTML file that contains the <code>&lt;embed></code> tag or a fully qualified path.</p></li></ul><p>The <code>opaque</code> attribute is optional and specifies whether your composition uses transparency. By default, it is set to <code>true</code>. If your composition uses transparency (that is, the composition is not completely opaque), make sure that you set the attribute to <code>false</code>.</p><p>See <span class="content_text"><a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW7">“HTML Attributes for the Quartz Composer WebKit Plug-in ”</a></span> for a description of other HTML attributes that are available.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001357-CH3-DontLinkElementID_12" title="Note"></a><p><strong>Note:</strong>&nbsp;Certain Quartz Composer patches access local files, services, or hardware. Access to these items from the Quartz Composer WebKit plug-in is not allowed. To see which patches are allowed within a composition, read <span class="content_text"><a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW8">“Allowed and Disallowed Patches.”</a></span></p></div><p>If your composition is self-contained and doesn’t require programmatic interaction through JavaScript, you’re done after you include the composition in your HTML. If your composition has changeable parameters or needs to be controlled through JavaScript, read <span class="content_text"><a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW2">“Manipulating a Composition Using JavaScript.”</a></span></p><a name="//apple_ref/doc/uid/TP40001357-CH3-SW2" title="Manipulating a Composition Using JavaScript"></a><h2>Manipulating a Composition Using JavaScript</h2><p>The Quartz Composer WebKit plug-in allows for manipulating a composition using JavaScript, as shown in <span class="content_text">Listing 4-2</span>.</p><a name="//apple_ref/doc/uid/TP40001357-CH3-SW5" title="Listing 4-2Changing a composition&acirc;&#128;&#153;s values via JavaScript"></a><p class="codesample"><strong>Listing 4-2&nbsp;&nbsp;</strong>Changing a composition’s values via JavaScript</p><div class="codesample"><table><tr><td scope="row"><pre>var composition = document.getElementById("myComposition");<span></span></pre></td></tr><tr><td scope="row"><pre>if (composition.playing() == true)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    composition.pause();<span></span></pre></td></tr><tr><td scope="row"><pre>    composition.setInputValue("aPublishedInput", aValue);<span></span></pre></td></tr><tr><td scope="row"><pre>    composition.setInputValue("anotherPublishedInput", anotherValue);<span></span></pre></td></tr><tr><td scope="row"><pre>    composition.play();<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The code in  <span class="content_text">Listing 4-2</span>  gets a composition from the DOM (Document Object Model) and queries its playback status. If the composition is playing, the code pauses playback. Then it modifies some of the composition input values. Finally, the code resumes playback.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001357-CH3-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;It is not necessary to pause a composition to change its input values.</p></div><p>You need to get the composition from the DOM because it returns the composition object that you can manipulate. Note that the element identifier is the same as the <code>id</code> attribute value for the composition included in <span class="content_text"><a href="qc_webkit.html#//apple_ref/doc/uid/TP40001357-CH3-SW1">Listing 4-1</a></span>. You perform the rest of these actions using JavaScript methods. To learn more about the JavaScript API for Quartz Composer WebKit plug-ins, read <em><a href="../../../../InternetWeb/Conceptual/QuartzComposer_PlugIn_ProgGuide/index.html#//apple_ref/doc/uid/TP40004517" target="_top">Quartz Composer WebKit Plug-in JavaScript Reference</a></em>.</p><a name="//apple_ref/doc/uid/TP40001357-CH3-SW7" title="HTML Attributes for the Quartz Composer WebKit Plug-in "></a><h2>HTML Attributes for the Quartz Composer WebKit Plug-in </h2><p>The Quartz Composer WebKit plug-in provides HTML attributes that affect how a composition is rendered and triggers JavaScript functions for certain events.</p><dl class="termdef">	<dt><code>above</code></dt><dd><p>A Boolean value that specifies whether the composition should render above or below the window that displays a webpage. If <code>above</code> is set to <code>true</code>, no content on the page within the bounds of the composition is shown. If <code>above</code> is set to <code>false</code>, all content on the page within the composition’s bounds is shown over the composition.</p><p>This setting is most useful for Dashboard widgets, where a value of <code>false</code> lets you place elements over a composition.</p><p>The default value, used if this attribute is not specified, is <code>true</code>.</p></dd><dt><code>autoplay</code></dt><dd><p>A Boolean value that specifies whether the composition is played automatically when it’s loaded. If <code>autoplay</code> is set to <code>true</code>, the composition begins playback when it has completed loading. If <code>autoplay</code> is set to <code>false</code>, it doesn’t play automatically.</p><p>The default value, used if this attribute is not specified, is <code>true</code>.</p></dd><dt><code>opaque</code></dt><dd><p>A Boolean value that specifies whether the composition is opaque or transparent. If <code>opaque</code> is set to <code>true</code>, the composition is rendered with no alpha channel, meaning any transparent areas in the composition are rendered as solid and any elements placed under the composition are not visible. If <code>opaque</code> is set to <code>false</code>, the composition is rendered with an alpha channel, meaning that transparent areas in the composition are rendered using any transparency found in the composition and any elements placed under the composition are visible through transparent areas in the composition.</p><p>The default value, used if this attribute is not specified, is <code>true</code>.</p></dd><dt><code>maxfps</code></dt><dd><p>An integer value that specifies the maximum frame rate used when rendering the composition.</p><p>The default value, used if this attribute is not specified, is <code>30</code>.</p></dd><dt><code>onload</code></dt><dd><p>A JavaScript event handler called when the composition is finished loading. The JavaScript function you provide for this event is not passed any arguments when it is called.</p></dd><dt><code>onloading</code></dt><dd><p>A JavaScript event handler called when the composition is in the process of loading. The JavaScript function you provide for this event is passed one argument when it is called; the argument is a float value between <code>0</code> and <code>1</code> that indicates loading progress.</p><p>The default loading animation will be used if this attribute is not specified.</p></dd><dt><code>onerror</code></dt><dd><p>A JavaScript event handler called if the composition fails to load. The JavaScript function you provide for this event is passed one argument when it is called; the argument contains a string representing the reason the composition failed to load.</p></dd></dl><a name="//apple_ref/doc/uid/TP40001357-CH3-SW8" title="Allowed and Disallowed Patches"></a><h2>Allowed and Disallowed Patches</h2><p>The Quartz Composer WebKit plug-in renders most, but not all, the patches available in Quartz Composer. You are <em>not</em> allowed to use patches that:</p><ul class="ul"><li class="li"><p>Access  information from local files and folders, such as the Folder Images and Spotlight Images patches</p></li><li class="li"><p>Fetch information from services, such as the Bonjour Services, Host Info,  RSS Feed,  and Image Downloader patches</p></li><li class="li"><p>Communicate with certain hardware, such as the MIDI Clock, MIDI Controllers, MIDI Notes, and Audio Input patches</p></li></ul><p>For detailed information about Quartz Composer patches and WebKit, see <span class="content_text"><a href="../../../../../qa/qa2006/qa1505.html" target="_top">Technical Q&amp;A QA1505 Availability of Quartz Composer Patches in Web Kit</a></span>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../qc_play_renderer/qc_play_renderer.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../qc_revhistory/qc_revhistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/QuartzComposer/qc_webkit/qc_webkit.html%3Fid%3DTP40001357-4.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/QuartzComposer/qc_webkit/qc_webkit.html%3Fid%3DTP40001357-4.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/QuartzComposer/qc_webkit/qc_webkit.html%3Fid%3DTP40001357-4.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
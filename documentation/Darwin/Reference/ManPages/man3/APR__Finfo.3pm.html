<html><head><title>Mac OS X
 Manual Page For APR::Finfo(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/APR::Finfo" title="Mac OS X
 Manual Page for APR::Finfo(3pm)"><a name="//apple_ref/doc/man/3/APR::Finfo" title="Mac OS X
 Manual Page for APR::Finfo(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/APR::Finfo"; name=APR::Finfo(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
apache_mod_perl-101~38::mod_perl-2.0.o<b></b><b><u>101~</u></b>perl-2.0.2::docs::api::APR::Finfo(3)



<b>NAME</b>
       APR::Finfo - Perl API for APR fileinfo structure

<b>Synopsis</b>
         use APR::Finfo ();
         use APR::Const -compile =&gt; qw(FINFO_NORM);
         my $finfo = APR::Finfo::stat("/tmp/test", APR::Const::FINFO_NORM, $pool);

         $device = $finfo-&gt;device;     # (stat $file)[0]
         $inode  = $finfo-&gt;inode;      # (stat $file)[1]
         $prot   = $finfo-&gt;protection; # (stat $file)[2]
         $nlink  = $finfo-&gt;nlink;      # (stat $file)[3]
         $gid    = $finfo-&gt;group;      # (stat $file)[4]
         $uid    = $finfo-&gt;user;       # (stat $file)[5]
         $size   = $finfo-&gt;size;       # (stat $file)[7]
         $atime  = $finfo-&gt;atime;      # (stat $file)[8]
         $mtime  = $finfo-&gt;mtime;      # (stat $file)[9]
         $ctime  = $finfo-&gt;ctime;      # (stat $file)[10]

         $csize = $finfo-&gt;csize; # consumed size: not portable!

         $filetype = $finfo-&gt;filetype; # file/dir/socket/etc

         $fname = $finfo-&gt;fname;
         $name  = $finfo-&gt;name;  # in filesystem case:

         # valid fields that can be queried
         $valid = $finfo-&gt;valid;

<b>Description</b>
       APR fileinfo structure provides somewhat similar information to Perl's "stat()" call, but you will
       want to use this module's API to query an already "stat()'ed" filehandle to avoid an extra system
       call or to query attributes specific to APR file handles.

       During the HTTP request handlers coming after "PerlMapToStorageHandler", "$r-&gt;finfo" already contains
       the cached values from the apr's "stat()" call. So you don't want to perform it again, but instead
       get the "ARP::Finfo" object via:

         my $finfo = $r-&gt;finfo;

<b>API</b>
       "APR::Finfo" provides the following functions and/or methods:

       <b>"atime"</b>

       Get the time the file was last accessed:

         $atime = $finfo-&gt;atime;

       obj: $finfo ( "APR::Finfo object" )
       return: $atime ( integer )
           Last access time in seconds since the epoch

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[8]

       Note that this method may not be reliable on all platforms, most notably Win32 -- FAT32 filesystems
       appear to work properly, but NTFS filesystems do not.

       <b>"csize"</b>

       Get the storage size consumed by the file

         $csize = $finfo-&gt;csize;

       obj: $finfo ( "APR::Finfo object" )
       return: $csize ( integer )
       since: 2.0.00

       Chances are that you don't want to use this method, since its functionality is not supported on most
       platforms (in which case it always returns 0).

       <b>"ctime"</b>

       Get the time the file was last changed

         $ctime = $finfo-&gt;ctime;

       obj: $finfo ( "APR::Finfo object" )
       return: $ctime ( integer )
           Inode change time in seconds since the epoch

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[10]

       The ctime field is non-portable.  In particular, you cannot expect it to be a "creation time", see
       "Files and Filesystems" in the <u>perlport</u> manpage for details.

       <b>"device"</b>

       Get the id of the device the file is on.

         $device = $finfo-&gt;device;

       obj: $finfo ( "APR::Finfo object" )
       return: $device ( integer )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[0]

       Note that this method is non-portable. It doesn't work on all platforms, most notably Win32.

       <b>"filetype"</b>

       Get the type of file.

         $filetype = $finfo-&gt;filetype;

       obj: $finfo ( "APR::Finfo object" )
       return: $filetype ( ":filetype constant" )
       since: 2.0.00

       For example:

         use APR::Pool;
         use APR::Finfo;
         use APR::Const -compile =&gt; qw(FILETYPE_DIR FILETYPE_REG FINFO_NORM);
         my $pool  = APR::Pool-&gt;new();
         my $finfo = APR::Finfo::stat("/tmp", APR::Const::FINFO_NORM, $pool);
         my $finfo = $finfo-&gt;filetype;
         if ($finfo == APR::Const::FILETYPE_REG) {
             print "regular file";
         }
         elsif ($finfo == APR::Const::FILETYPE_REG) {
             print "directory";
         }
         else {
             print "other file";
         }

       Since <u>/tmp</u> is a directory, this will print:

         directory

       <b>"fname"</b>

       Get the pathname of the file (possibly unrooted)

         $fname = $finfo-&gt;fname;

       obj: $finfo ( "APR::Finfo object" )
       return: $filetype ( string )
       since: 2.0.00

       <b>"group"</b>

       Get the group id that owns the file:

         $gid = $finfo-&gt;group;

       obj: $finfo ( "APR::Finfo object" )
       return: $gid ( number )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[5]

       Note that this method may not be meaningful on all platforms, most notably Win32.  Incorrect results
       have also been reported on some versions of OSX.

       <b>"inode"</b>

       Get the inode of the file.

         $inode = $finfo-&gt;inode;

       obj: $finfo ( "APR::Finfo object" )
       return: $inode ( integer )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[1]

       Note that this method may not be meaningful on all platforms, most notably Win32.

       <b>"mtime"</b>

       The time the file was last modified

         $mtime = $finfo-&gt;mtime;

       obj: $finfo ( "APR::Finfo object" )
       return: $mtime ( integer )
           Last modify time in seconds since the epoch

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[9]

       <b>"name"</b>

       Get the file's name (no path) in filesystem case:

         $name = $finfo-&gt;name;

       obj: $finfo ( "APR::Finfo object" )
       return: $device ( string )
       since: 2.0.00

       <b>"nlink"</b>

       Get the number of hard links to the file.

         $nlink = $finfo-&gt;nlink;

       obj: $finfo ( "APR::Finfo object" )
       return: $nlink ( integer )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[3]

       <b>"protection"</b>

       Get the access permissions of the file.  Mimics Unix access rights.

         $prot = $finfo-&gt;protection;

       obj: $finfo ( "APR::Finfo object" )
       return: $prot ( ":fprot constant" )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[2]

       <b>"size"</b>

       Get the size of the file

         $size = $finfo-&gt;size;

       obj: $finfo ( "APR::Finfo object" )
       return: $size ( integer )
           Total size of file, in bytes

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[7]

       <b>"stat"</b>

       Get the specified file's stats.

         $finfo = APR::Finfo::stat($fname, $wanted_fields, $p);

       arg1: $fname ( string )
           The path to the file to "stat()".

       arg2: $wanted_fields ( ":finfo constant" )
           The desired fields, as a bitmask flag of "APR::FINFO_*" constants.

           Notice that you can also use the constants that already combine several elements in one. For
           example "APR::Const::FINFO_PROT" asks for all protection bits, "APR::Const::FINFO_MIN" asks for
           the following fields: type, mtime, ctime, atime, size and "APR::Const::FINFO_NORM" asks for all
           atomic unix "apr_stat()" fields (similar to perl's "stat()").

       arg3: $p ( "APR::Pool object" )
           the pool to use to allocate the file stat structure.

       ret: $finfo ( "APR::Finfo object" )
       since: 2.0.00

       For example, here is how to get most of the "stat" fields:

         use APR::Pool ();
         use APR::Finfo ();
         use APR::Const -compile =&gt; qw(FINFO_NORM);
         my $pool = APR::Pool-&gt;new();
         my $finfo = APR::Finfo::stat("/tmp/test", APR::Const::FINFO_NORM, $pool);

       <b>"user"</b>

       Get the user id that owns the file:

         $uid = $finfo-&gt;user;

       obj: $finfo ( "APR::Finfo object" )
       return: $uid ( number )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[4]

       Note that this method may not be meaningful on all platforms, most notably Win32.

       <b>"valid"</b>

       The bitmask describing valid fields of this apr_finfo_t structure including all available 'wanted'
       fields and potentially more

         $valid = $finfo-&gt;valid;

       obj: $finfo ( "APR::Finfo object" )
       arg1: $valid ( bitmask )
           This bitmask flag should be bit-OR'ed against ":finfo constant" constants.

       since: 2.0.00

<b>See</b> <b>Also</b>
       mod_perl 2.0 documentation.

<b>Copyright</b>
       mod_perl 2.0 and its core modules are copyrighted under The Apache Software License, Version 2.0.

<b>Authors</b>
       The mod_perl development team and numerous contributors.



perl v5.8.8                                 <!-- a -->apach<u>01</u>-101~38::mod_perl-2.0.2::docs::api::APR::Finfo(3)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/APR__Finfo.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/APR__Finfo.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/APR__Finfo.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

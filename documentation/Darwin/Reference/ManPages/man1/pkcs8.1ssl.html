<html><head><title>Mac OS X
 Manual Page For pkcs8(1ssl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1ssl/pkcs8" title="Mac OS X
 Manual Page for pkcs8(1ssl)"><a name="//apple_ref/doc/man/1/pkcs8" title="Mac OS X
 Manual Page for pkcs8(1ssl)"><!-- headerDoc=man; indexgroup=Section 1ssl; uid="//apple_ref/doc/man/1ssl/pkcs8"; name=pkcs8(1ssl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
PKCS8(1)                                           OpenSSL                                          PKCS8(1)



<b>NAME</b>
       pkcs8 - PKCS#8 format private key conversion tool

<b>SYNOPSIS</b>
       <b>openssl</b> <b>pkcs8</b> [<b>-topk8</b>] [<b>-inform</b> <b>PEM|DER</b>] [<b>-outform</b> <b>PEM|DER</b>] [<b>-in</b> <b>filename</b>] [<b>-passin</b> <b>arg</b>] [<b>-out</b>
       <b>filename</b>] [<b>-passout</b> <b>arg</b>] [<b>-noiter</b>] [<b>-nocrypt</b>] [<b>-nooct</b>] [<b>-embed</b>] [<b>-nsdb</b>] [<b>-v2</b> <b>alg</b>] [<b>-v1</b> <b>alg</b>] [<b>-engine</b>
       <b>id</b>]

<b>DESCRIPTION</b>
       The <b>pkcs8</b> command processes private keys in PKCS#8 format. It can handle both unencrypted PKCS#8
       PrivateKeyInfo format and EncryptedPrivateKeyInfo format with a variety of PKCS#5 (v1.5 and v2.0) and
       PKCS#12 algorithms.

<b>COMMAND</b> <b>OPTIONS</b>
       <b>-topk8</b>
           Normally a PKCS#8 private key is expected on input and a traditional format private key will be
           written. With the <b>-topk8</b> option the situation is reversed: it reads a traditional format private
           key and writes a PKCS#8 format key.

       <b>-inform</b> <b>DER|PEM</b>
           This specifies the input format. If a PKCS#8 format key is expected on input then either a <b>DER</b> or
           <b>PEM</b> encoded version of a PKCS#8 key will be expected. Otherwise the <b>DER</b> or <b>PEM</b> format of the
           traditional format private key is used.

       <b>-outform</b> <b>DER|PEM</b>
           This specifies the output format, the options have the same meaning as the <b>-inform</b> option.

       <b>-in</b> <b>filename</b>
           This specifies the input filename to read a key from or standard input if this option is not
           specified. If the key is encrypted a pass phrase will be prompted for.

       <b>-passin</b> <b>arg</b>
           the input file password source. For more information about the format of <b>arg</b> see the <b>PASS</b> <b>PHRASE</b>
           <b>ARGUMENTS</b> section in <a href="openssl.1ssl.html#//apple_ref/doc/man/1/openssl"><u>openssl</u>(1)</a>.

       <b>-out</b> <b>filename</b>
           This specifies the output filename to write a key to or standard output by default. If any
           encryption options are set then a pass phrase will be prompted for. The output filename should
           <b>not</b> be the same as the input filename.

       <b>-passout</b> <b>arg</b>
           the output file password source. For more information about the format of <b>arg</b> see the <b>PASS</b> <b>PHRASE</b>
           <b>ARGUMENTS</b> section in <a href="openssl.1ssl.html#//apple_ref/doc/man/1/openssl"><u>openssl</u>(1)</a>.

       <b>-nocrypt</b>
           PKCS#8 keys generated or input are normally PKCS#8 EncryptedPrivateKeyInfo structures using an
           appropriate password based encryption algorithm. With this option an unencrypted PrivateKeyInfo
           structure is expected or output.  This option does not encrypt private keys at all and should
           only be used when absolutely necessary. Certain software such as some versions of Java code
           signing software used unencrypted private keys.

       <b>-nooct</b>
           This option generates RSA private keys in a broken format that some software uses. Specifically
           the private key should be enclosed in a OCTET STRING but some software just includes the
           structure itself without the surrounding OCTET STRING.

       <b>-embed</b>
           This option generates DSA keys in a broken format. The DSA parameters are embedded inside the
           PrivateKey structure. In this form the OCTET STRING contains an ASN1 SEQUENCE consisting of two
           structures: a SEQUENCE containing the parameters and an ASN1 INTEGER containing the private key.

       <b>-nsdb</b>
           This option generates DSA keys in a broken format compatible with Netscape private key databases.
           The PrivateKey contains a SEQUENCE consisting of the public and private keys respectively.

       <b>-v2</b> <b>alg</b>
           This option enables the use of PKCS#5 v2.0 algorithms. Normally PKCS#8 private keys are encrypted
           with the password based encryption algorithm called <b>pbeWithMD5AndDES-CBC</b> this uses 56 bit DES
           encryption but it was the strongest encryption algorithm supported in PKCS#5 v1.5. Using the <b>-v2</b>
           option PKCS#5 v2.0 algorithms are used which can use any encryption algorithm such as 168 bit
           triple DES or 128 bit RC2 however not many implementations support PKCS#5 v2.0 yet. If you are
           just using private keys with OpenSSL then this doesn't matter.

           The <b>alg</b> argument is the encryption algorithm to use, valid values include <b>des</b>, <b>des3</b> and <b>rc2</b>. It
           is recommended that <b>des3</b> is used.

       <b>-v1</b> <b>alg</b>
           This option specifies a PKCS#5 v1.5 or PKCS#12 algorithm to use. A complete list of possible
           algorithms is included below.

       <b>-engine</b> <b>id</b>
           specifying an engine (by it's unique <b>id</b> string) will cause <b>req</b> to attempt to obtain a functional
           reference to the specified engine, thus initialising it if needed. The engine will then be set as
           the default for all available algorithms.

<b>NOTES</b>
       The encrypted form of a PEM encode PKCS#8 files uses the following headers and footers:

        -----BEGIN ENCRYPTED PRIVATE KEY-----<font color="#ffffff" class="whiteout">-----END&nbsp;KEY---------END</font>
        -----END ENCRYPTED PRIVATE KEY-----<font color="#ffffff" class="whiteout">The&nbsp;KEY----The</font>

       The unencrypted form uses:

        -----BEGIN PRIVATE KEY-----<font color="#ffffff" class="whiteout">-----END&nbsp;KEY---------END</font>
        -----END PRIVATE KEY-----<font color="#ffffff" class="whiteout">Private&nbsp;KEY----Private</font>

       Private keys encrypted using PKCS#5 v2.0 algorithms and high iteration counts are more secure that
       those encrypted using the traditional SSLeay compatible formats. So if additional security is
       considered important the keys should be converted.

       The default encryption is only 56 bits because this is the encryption that most current
       implementations of PKCS#8 will support.

       Some software may use PKCS#12 password based encryption algorithms with PKCS#8 format private keys:
       these are handled automatically but there is no option to produce them.

       It is possible to write out DER encoded encrypted private keys in PKCS#8 format because the
       encryption details are included at an ASN1 level whereas the traditional format includes them at a
       PEM level.

<b>PKCS#5</b> <b>v1.5</b> <b>and</b> <b>PKCS#12</b> <b>algorithms.</b>
       Various algorithms can be used with the <b>-v1</b> command line option, including PKCS#5 v1.5 and PKCS#12.
       These are described in more detail below.

       <b>PBE-MD2-DES</b> <b>PBE-MD5-DES</b>
           These algorithms were included in the original PKCS#5 v1.5 specification.  They only offer 56
           bits of protection since they both use DES.

       <b>PBE-SHA1-RC2-64</b> <b>PBE-MD2-RC2-64</b> <b>PBE-MD5-RC2-64</b> <b>PBE-SHA1-DES</b>
           These algorithms are not mentioned in the original PKCS#5 v1.5 specification but they use the
           same key derivation algorithm and are supported by some software. They are mentioned in PKCS#5
           v2.0. They use either 64 bit RC2 or 56 bit DES.

       <b>PBE-SHA1-RC4-128</b> <b>PBE-SHA1-RC4-40</b> <b>PBE-SHA1-3DES</b> <b>PBE-SHA1-2DES</b> <b>PBE-SHA1-RC2-128</b> <b>PBE-SHA1-RC2-40</b>
           These algorithms use the PKCS#12 password based encryption algorithm and allow strong encryption
           algorithms like triple DES or 128 bit RC2 to be used.

<b>EXAMPLES</b>
       Convert a private from traditional to PKCS#5 v2.0 format using triple DES:

        openssl pkcs8 -in key.pem -topk8 -v2 des3 -out enckey.pem

       Convert a private key to PKCS#8 using a PKCS#5 1.5 compatible algorithm (DES):

        openssl pkcs8 -in key.pem -topk8 -out enckey.pem

       Convert a private key to PKCS#8 using a PKCS#12 compatible algorithm (3DES):

        openssl pkcs8 -in key.pem -topk8 -out enckey.pem -v1 PBE-SHA1-3DES

       Read a DER unencrypted PKCS#8 format private key:

        openssl pkcs8 -inform DER -nocrypt -in key.der -out key.pem

       Convert a private key from any PKCS#8 format to traditional format:

        openssl pkcs8 -in pk8.pem -out key.pem

<b>STANDARDS</b>
       Test vectors from this PKCS#5 v2.0 implementation were posted to the pkcs-tng mailing list using
       triple DES, DES and RC2 with high iteration counts, several people confirmed that they could decrypt
       the private keys produced and Therefore it can be assumed that the PKCS#5 v2.0 implementation is
       reasonably accurate at least as far as these algorithms are concerned.

       The format of PKCS#8 DSA (and other) private keys is not well documented: it is hidden away in
       PKCS#11 v2.01, section 11.9. OpenSSL's default DSA PKCS#8 private key format complies with this
       standard.

<b>BUGS</b>
       There should be an option that prints out the encryption algorithm in use and other details such as
       the iteration count.

       PKCS#8 using triple DES and PKCS#5 v2.0 should be the default private key format for OpenSSL: for
       compatibility several of the utilities use the old format at present.

<b>SEE</b> <b>ALSO</b>
       <a href="dsa.1ssl.html#//apple_ref/doc/man/1/dsa"><u>dsa</u>(1)</a>, <a href="rsa.1ssl.html#//apple_ref/doc/man/1/rsa"><u>rsa</u>(1)</a>, <a href="genrsa.1ssl.html#//apple_ref/doc/man/1/genrsa"><u>genrsa</u>(1)</a>, <a href="gendsa.1ssl.html#//apple_ref/doc/man/1/gendsa"><u>gendsa</u>(1)</a>



0.9.7l                                           2003-01-30                                         PKCS8(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/pkcs8.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/pkcs8.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/pkcs8.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

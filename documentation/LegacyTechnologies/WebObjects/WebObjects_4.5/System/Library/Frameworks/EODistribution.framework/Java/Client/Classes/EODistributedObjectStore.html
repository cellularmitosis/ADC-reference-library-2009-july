<HTML>		<HEAD>		<TITLE>			EODistributedObjectStore		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../webobjects.html" target="_top">WebObjects 4.5 Documentation</a> <b>&gt;</b>EODistribution Reference</font><br><br><!--end of path --><a href="../../EODistributionTOC.html"><img src="../../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <a name = "EODistributedObjectStore"><BR><h1><FONT COLOR=\"#000066\"><a name="//apple_ref/java/cl/EODistributedObjectStore">EODistributedObjectStore</a></FONT></h1><br></a><blockquote><b>Inheritsfrom: </b> com.apple.client.eocontrol.EOObjectStore</blockquote><blockquote><b>Implements: </b>NSInlineObservable</blockquote><blockquote><b>Package: </b>com.apple.client.eodistribution</blockquote><HR SIZE=4><br><h2>Class Description</h2><hr><p>An EODistributedObjectStore functions as an object store onthe Java client. It handles interaction with the distribution layer'schannel (an EODistributionChannel object), incorporating knowledgeof that channel so it can forward messages it receives from theserver to its editing contexts and forward messages from its editingcontexts to the server. With the channel, it represents a singleconnection to the server, fetching and saving objects on behalfof one or more client-side editing contexts. In this regard, anEODistributedObjectStore acts like an EODatabaseContext on the server;it differs from EODatabaseContext in that its editing contexts interactdirectly with it without the intervention of an object store coordinator.</p><p>EODistributedObjectStore provides several methods in additionto those defined by EOObjectStore. The invocation methods  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invokeRemoteMethod">invokeRemoteMethod</a> (twooverloaded versions) and  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invokeRemoteMethodWithKeyPath">invokeRemoteMethodWithKeyPath</a> allowyou to send messages to any object on the server and receive responsesfrom them. The methods  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/classDescriptionForGlobalID">classDescriptionForGlobalID</a> and  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/snapshotForSourceGlobalID">snapshotForSourceGlobalID</a> returninformation related to enterprise objects in the distributed objectstore given an object's global ID.</p><p>Objects of this class are for use with Java Client only; thereis no equivalent class for Yellow Box applications. </p><br><br><br><h2>Interfaces Implemented</h2><hr><blockquote>NSInlineObservable<dd><b>observerData</b></dd><dd><b>setObserverData</b></dd></blockquote><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Initializing objects</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/initializeObject">initializeObject</a></dd></dl><dl><dt>Getting objects</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/objectsWithFetchSpecification">objectsWithFetchSpecification</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/objectsForSourceGlobalID">objectsForSourceGlobalID</a></dd></dl><dl><dt>Getting faults</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/faultForGlobalID">faultForGlobalID</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/refaultObject">refaultObject</a></dd></dl><dl><dt>Saving changes to objects</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/saveChangesInEditingContext">saveChangesInEditingContext</a></dd></dl><dl><dt>Invalidating objects</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invalidateAllObjects">invalidateAllObjects</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invalidateObjectsWithGlobalIDs">invalidateObjectsWithGlobalIDs</a></dd></dl><dl><dt>Invoking methods on theserver</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invokeRemoteMethod">invokeRemoteMethod</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invokeRemoteMethodWithKeyPath">invokeRemoteMethodWithKeyPath</a></dd></dl><dl><dt>Getting object data viaglobal IDs</dt><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/classDescriptionForGlobalID">classDescriptionForGlobalID</a></dd><dd> <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/snapshotForSourceGlobalID">snapshotForSourceGlobalID</a></dd></dl></blockquote><br><br><h2>Constructors</h2><hr><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/EODistributedObjectStore">EODistributedObjectStore</a></h3><p><code>public <b>EODistributedObjectStore</b>(EODistributionChannel <em>aDistributionChannel</em>)</code></p>Returns an EODistributedObjectStore instanceinitialized with a distribution channel.<hr WIDTH=25% ALIGN=LEFT><BR><BR><h2>Instance Methods</h2><hr><a name = "CCJCIFCE"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a></h3></a><p><code>public NSArray <b>arrayFaultWithSourceGlobalID</b>(com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,String <em>relationshipName</em>,com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>)</code></p>Creates a to-many fault in the editing context <em>editingContext</em> andreturns the destination objects for the to-many relationship identifiedby <em>relationshipName</em>; <em>globalID</em> identifiesthe source object for the relationship (which doesn't necessarilyexist in memory yet). <p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/faultForGlobalID">faultForGlobalID</a>,  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/refaultObject">refaultObject</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJDHABC"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/classDescriptionForGlobalID">classDescriptionForGlobalID</a></h3></a><p><code>public com.apple.client.eocontrol.EOClassDescription <b>classDescriptionForGlobalID</b>(com.apple.client.eocontrol.EOGlobalID <em>globalID</em>)</code></p>Returns the class description for the enterpriseobject identified by <em>globalID</em>.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/snapshotForSourceGlobalID">snapshotForSourceGlobalID</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJEAIIH"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/faultForGlobalID">faultForGlobalID</a></h3></a><p><code>public com.apple.client.eocontrol.EOEnterpriseObject <b>faultForGlobalID</b>(com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>)</code></p>Creates a to-one fault from the enterprise objectidentified by <em>globalID</em>, registersit in <em>editingContext</em>, and returnsthe fault. This method could return an already existing object.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a>,  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/refaultObject">refaultObject</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJBIIGA"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/initializeObject">initializeObject</a></h3></a><p><code>public void <b>initializeObject</b>(com.apple.client.eocontrol.EOEnterpriseObject <em>anObject</em>,com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>)</code></p>Initializes the enterprise object <em>anObject</em> withits attributes and relationships using key-value coding; the propertiesof <em>anObject</em> are identified and accessedusing the global ID <em>globalID</em>. Forproperties with EONullValues, a <b>null</b> issubstituted.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/classDescriptionForGlobalID">classDescriptionForGlobalID</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJEAHGI"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/invalidateAllObjects">invalidateAllObjects</a></h3></a><p><code>public void <b>invalidateAllObjects</b>()</code></p>Invoked to notify the receiver that all theproperties it caches are no longer valid and that they should berefaulted. Any child object stores are also notified that the objectsare no longer valid. Posts InvalidatedAllObjectsInStoreNotificationafter removing objects from the object store.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invalidateObjectsWithGlobalIDs">invalidateObjectsWithGlobalIDs</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJCCFBI"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/invalidateObjectsWithGlobalIDs">invalidateObjectsWithGlobalIDs</a></h3></a><p><code>public void <b>invalidateObjectsWithGlobalIDs</b>(NSArray <em>gidArray</em>)</code></p>Invoked to notify the receiver that all of theobjects identified by the global IDs in <em>gidArray</em> areno longer valid. Any child object stores are also notified thatthe specified objects are no longer valid. After invalidating theobjects, this method posts  <a frame= "conv" href="#CCJDIEFH">ObjectsChangedInStoreNotification</a>.<hr WIDTH=25% ALIGN=LEFT><a name = "CCJDJGBC"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/invokeRemoteMethod">invokeRemoteMethod</a></h3></a><p><code>public Object <b>invokeRemoteMethod</b>(com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>,com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,String <em>methodName</em>,Object[] <em>arguments</em>)</code></p><p><code>public Object <b>invokeRemoteMethod</b>(com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>,com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,String <em>methodName</em>,Object[] <em>arguments</em>,boolean <em>shouldPush</em>)</code></p>Invokes the method identified by <em>methodName</em> onthe server-side enterprise object identified by the editing context <em>editingContext</em> andthe EOGlobalID <em>globalID</em>. The resultof the invocation is returned. The four-argument method (and thefive-argument method, if <em>shouldPush</em> is <b>true</b>)pushes all changes pending on the client to the server before sendingthe invocation; this ensures that the states of the server and clientare synchronized before the method is executed. If for performanceor other reasons you do not want to push pending changes to theserver, use the second method with <em>shouldPush</em> setto <b>false</b>. Note that the method withoutthe <em>shouldPush</em> argument typicallyoriginates with one of the receiver's editing contexts. <p>TheEODistributionContext on the server by default refuses the remoteinvocation unless <em>methodName</em> is prefixedwith "clientSideRequest" or unless its delegate (usually thesession object) implements the  <a frame= "conv" href="../../Server/Protocols/EODistributionContextDlg.html#//apple_ref/java/intfm/EODistributionContext.Delegate/distributionContextShouldAllowInvocation">distributionContextShouldAllowInvocation</a> methodto return true. This mechanism exists to provide security on theserver. </p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJDEJDI"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/invokeRemoteMethodWithKeyPath">invokeRemoteMethodWithKeyPath</a></h3></a><p><code>public Object <b>invokeRemoteMethodWithKeyPath</b>(com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>,String <em>keyPath</em>,String <em>methodName</em>,Object[] <em>arguments</em>,boolean <em>shouldPush</em>)</code></p>This method is similar to  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invokeRemoteMethod">invokeRemoteMethod</a> except for twothings. The receiver of the invocation can be any object (not justan enterprise object) that can be specified with a key path (<em>keyPath</em>).The <em>keyPath</em> argument has specialsemantics:<ul><li>If <em>keyPath</em> isa fully qualified key path (for example, "session.editingContext")the key path is followed starting from the WOComponent that is theinvocation target of the EODistributionContext.</li><li>If <em>keyPath</em> is an empty string,the method is invoked on the WOComponent that is the invocation targetof the EODistributionContext (typically a subclass of WOJavaClientApplet).</li><li>If <em>keyPath</em> is <code>null</code>,the method is invoked on the server side EODistributionContext.</li></ul><p>Ifan actual key path is specified, the EODistributionContext on theserver blocks all invocations sent with this method unless <em>methodName</em> isprefixed with "clientSideRequest" or unless the EODistributionContext'sdelegate (on the server) implements  <a frame= "conv" href="../../Server/Protocols/EODistributionContextDlg.html#//apple_ref/java/intfm/EODistributionContext.Delegate/distributionContextShouldAllowInvocation">distributionContextShouldAllowInvocation</a> <em>and</em>  <a frame= "conv" href="../../Server/Protocols/EODistributionContextDlg.html#//apple_ref/java/intfm/EODistributionContext.Delegate/distributionContextShouldFetchObjectsWithFetchSpecification">distributionContextShouldFetchObjectsWithFetchSpecification</a>.For security reasons, the delegate must authorize the invocationand the key path in these methods.</p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJBDECA"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/objectsForSourceGlobalID">objectsForSourceGlobalID</a></h3></a><p><code>public NSArray <b>objectsForSourceGlobalID</b>(com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,String <em>relationshipName</em>,com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>)</code></p>Returns the destination objects for the to-manyrelationship identified by <em>relationshipName</em>.The source object for the relationship is identified by its globalID (<em>globalID</em>). The source objectand all destination objects for the relationship belong to <em>editingContext</em>.This method first looks to find the destination objects for therelationship in a client-side cache; if that cache is empty, itrequests the server to send it those objects and updates the client-sidecache with them.<hr WIDTH=25% ALIGN=LEFT><a name = "CCJBCBFC"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/objectsWithFetchSpecification">objectsWithFetchSpecification</a></h3></a><p><code>public NSArray <b>objectsWithFetchSpecification</b>(com.apple.client.eocontrol.EOFetchSpecification <em>fetchSpecification</em>,com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>)</code></p>Fetches objects from the server according tothe criteria specified by fetchSpecification and returns them inan array for inclusion in <em>editingContext</em>.Updates the client-side caches with the fetched enterprise objects.Throws an exception if an error occurs.<hr WIDTH=25% ALIGN=LEFT><a name = "CCJDAEAI"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/refaultObject">refaultObject</a></h3></a><p><code>public void <b>refaultObject</b>(com.apple.client.eocontrol.EOEnterpriseObject <em>anObject</em>,com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>)</code></p>Turns enterprise object <em>anObject</em> backinto a fault (an empty enterprise object, identified by <em>globalID</em> in <em>editingContext</em>.Objects that have been inserted but not saved, or that have beendeleted, shouldn't be refaulted.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a>,  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/faultForGlobalID">faultForGlobalID</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "CCJDFGJC"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/saveChangesInEditingContext">saveChangesInEditingContext</a></h3></a><p><code>public void <b>saveChangesInEditingContext</b>(com.apple.client.eocontrol.EOEditingContext <em>editingContext</em>)</code></p>Requests the server to commit changes to theenterprise objects in <em>editingContext</em>;this message is invoked by the editing context (<em>editingContext</em>).The receiver calls back to the editing context to get the updated,deleted, and inserted objects to save and commits these changesin a single transaction. Raises an exception if any error occurs. <hr WIDTH=25% ALIGN=LEFT><a name = "CCJCJECB"><BR><h3><a name="//apple_ref/java/instm/EODistributedObjectStore/snapshotForSourceGlobalID">snapshotForSourceGlobalID</a></h3></a><p><code>public NSArray <b>snapshotForSourceGlobalID</b>(com.apple.client.eocontrol.EOGlobalID <em>globalID</em>,String <em>relationshipName</em>)</code></p>Returns an array of global IDs identifying thedestination objects for the to-many relationship <em>relationshipName</em> havingthe source global ID of <em>globalID</em>.Returns <b>null</b> if the object identified bythe source global ID does not currently exist in the object storeor if there is no relationship with the given name.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/classDescriptionForGlobalID">classDescriptionForGlobalID</a></p><hr WIDTH=25% ALIGN=LEFT><BR><BR><h2>Notifications</h2><hr><p>EOGlobalID's GlobalIDChangedNotification is posted whenthe global ID of an object in the store changes. See the EOGlobalIDdocumentation for more information.</p><h3>InvalidatedAllObjectsInStoreNotification</h3>This notification is posted when all objectsin the object store are invalidated; see  <a frame= "conv" href="#//apple_ref/java/instm/EODistributedObjectStore/invalidateAllObjects">invalidateAllObjects</a>.<br><table border = \"1\"><tr><td scope="row">Notification Object</td><td><code>this</code></td></tr><tr><td scope="row">userInfo Dictionary</td><td>None.</td></tr></table><br><h3>GlobalIDChangedNotification</h3>This EOGlobalID notification is postedwhen the global ID of an object in the store changes.<br><table border = \"1\"><tr><td scope="row">Notification Object</td><td><code>this</code></td></tr><tr><td scope="row">userInfo Dictionary</td><td>Use the old global ID as the key to find the new globalID.</td></tr></table><br><a name = "CCJDIEFH"><h3>ObjectsChangedInStoreNotification</h3></a>This notification is posted on when specificobjects in the object store are inserted, deleted, updated, or invalidated.This can happen as a result of an update from the server.<br><table border = \"1\"><tr><td scope="row">Notification Object</td><td><code>this</code></td></tr><tr><td scope="row">userInfo Dictionary</td><td>The global IDs of inserted, deleted, updated, and invalidated	objects, accessible with EOObjectStore's (respectively) 	InsertedKey,DeletedKey, UpdatedKey, and InvalidatedKey.</td></tr></table><br><BR><br><a href="../../EODistributionTOC.html"><img src="../../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Q&amp;A DV39: Serial API Choice</title><meta name="keywords" content="have creator list relevant keywords here"><meta name="Description" content="Technical Q&amp;A DV39: have creator write a brief descriptionhere."><meta name="categories" content="Devices"><meta name="week-posted" content="Jul 2, 2001 - Jul 6, 2001"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001180" title="Serial API Choice"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/HardwareDrivers/index.html">Hardware & Drivers</a> &gt; <a href="../../technicalqas/HardwareDrivers/idxSerial-date.html">Serial</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A DV39</div>
<div id="pageheadsub">Serial API Choice</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600>  <TR> <td align="left"><hr width=500 align=center>          <P id=p2>Q: Given that the Carbon specification says that         classic serial won't be supported in Carbon but the Open         Transport API will be, should I convert my serial code to         use Open Transport serial endpoints?</P>                  <P id=p4>A: No. There is no point converting your code to         use the Open Transport API because the Open Transport         compatibility layer on Mac OS X will not support serial         endpoints. If you read the Carbon specification carefully,         it says that Carbon only guarantees TCP/IP protocol endpoint         support (TCP, UDP, RawIP). Other endpoint types may work         (for example, on traditional Mac OS, serial endpoints work         just fine from within Carbon), but this won't always be the         case.</P>                  <P id=p4>The following table summarizes the support for the         two APIs in the various environments.</P>                  <TABLE BORDER=1>            <TR>               <td width=200 align=left>                  <p id=p4></P>               </TD>               <TH WIDTH=150>                  <P ALIGN=left>Supports Classic Serial?</P>               </TH>               <TH WIDTH=150>                  <P ALIGN=left>Supports OT Serial?</P>               </TH>            </TR>            <TR>               <TH WIDTH=200>                  <P ALIGN=left>Traditional Mac OS</P>               </TH>               <td width=150 align=left>                  <CENTER>Yes</CENTER>               </TD>               <td width=150 align=left>                  <CENTER>Yes</CENTER>               </TD>            </TR>            <TR>               <TH WIDTH=200>                  <P ALIGN=left>Carbon on traditional Mac OS</P>               </TH>               <td width=150 align=left>                  <CENTER>No</CENTER>               </TD>               <td width=150 align=left>                  <CENTER>Yes</CENTER>               </TD>            </TR>            <TR>               <TH WIDTH=200>                  <P ALIGN=left>Carbon on Mac OS X</P>               </TH>               <td width=150 align=left>                  <CENTER>No</CENTER>               </TD>               <td width=150 align=left>                  <CENTER>No</CENTER>               </TD>            </TR>         </TABLE>                  <p id=p4>For more details on what will and won't be supported by         Carbon, read the <A href="../../documentation/Carbon/CarbonSpecification/CarbonSpecTOC.html">Carbon         Specification</A>.</P>                  <P id=p2>Q: What serial API should I use for new         development?</P>                  <P id=p4>A: There are a number of considerations here:</P>                  <UL>            <LI>Open Transport serial will continue to be supported            on traditional Mac OS, both for Carbon and non-Carbon            applications.</LI>                        <LI>Open Transport serial will not be supported under            Carbon on Mac OS X.</LI>                        <LI>Classic serial will not be supported under Carbon on            traditional Mac OS or Mac OS X.</LI>                        <LI>To talk to serial ports on Mac OS X you should use a            combination of the IOKit API (to enumerate the ports) and            the BSD "termios" API (to actually talk to a port). The            DTS sample code <A href="../../samplecode/Sample_Code/Devices_and_Hardware/Serial/SerialPortSample.htm">SerialPortSample</A>            shows how to do this.</li>                                      <LI>On traditional Mac OS, Open Transport serial is            layered on top of classic serial by a compatibility shim            inside Open Transport.</LI>                        <LI>When deciding which serial API to use, you should            take into account the following points.                        <UL>               <LI>Classic serial offers the best flexibility,               performance and responsiveness.</LI>                              <LI>Open Transport serial is easier to use if you are               already working within the Open Transport world (for               example, you are turning telnet code into terminal               code, or building a STREAMS plug-in that needs               serial).</LI>                              <LI>If you have working code, there is no future               compatibility benefit to be gained by moving it from               classic serial to Open Transport serial, or vice               versa.</LI>            </UL>            </LI>                        <LI>When writing a serial driver for traditional Mac OS,            you should write a Device Manager (either            <CODE>'ndrv'</CODE> or <CODE>'DRVR'</CODE>) driver and            register it with Communications Resource Manager. Open            Transport's serial shim will then work with your driver            automatically, and both Open Transport and classic serial            clients will be able to use it. If you write an Open            Transport (TPI) driver, only Open Transport serial            clients will be able to use your driver.</LI>         </UL>                  <P id=p4>Regardless of the serial API you choose, you should         be familiar with the information in Technote 1119, <a href="../../technotes/tn/tn1119.html">Serial         Port Apocrypha</A>.</P>                 </td></tr></table></CENTER><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[Jul 02 2001]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/dv/dv39.html%3Fid%3DDTS10001180-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/dv/dv39.html%3Fid%3DDTS10001180-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/dv/dv39.html%3Fid%3DDTS10001180-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --> <hr width=500 align=center> </BODY> </HTML>
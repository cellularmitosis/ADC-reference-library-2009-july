<html><head><title>Mac OS X
 Manual Page For Tk_InitOptions(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tk_InitOptions" title="Mac OS X
 Manual Page for Tk_InitOptions(3tcl)"><a name="//apple_ref/doc/man/3/Tk_InitOptions" title="Mac OS X
 Manual Page for Tk_InitOptions(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tk_InitOptions"; name=Tk_InitOptions(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tk_SetOptions(3)                            Tk Library Procedures                           <a href="Tk_SetOptions.3tcl.html#//apple_ref/doc/man/3/Tk_SetOptions">Tk_SetOptions(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tk_CreateOptionTable,   Tk_DeleteOptionTable,   Tk_InitOptions,  Tk_SetOptions,  Tk_FreeSavedOptions,
       Tk_RestoreSavedOptions,  Tk_GetOptionValue,   Tk_GetOptionInfo,  Tk_FreeConfigOptions,  Tk_Offset   -<font color="#ffffff" class="whiteout">process&nbsp;Tk_Offsetprocess</font>
       process configuration options

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       Tk_OptionTable
       <b>Tk_CreateOptionTable(</b><u>interp,</u> <u>templatePtr</u><b>)</b>

       <b>Tk_DeleteOptionTable(</b><u>optionTable</u><b>)</b>

       int
       <b>Tk_InitOptions(</b><u>interp,</u> <u>recordPtr,</u> <u>optionTable,</u> <u>tkwin</u><b>)</b>

       int
       <b>Tk_SetOptions(</b><u>interp,</u> <u>recordPtr,</u> <u>optionTable,</u> <u>objc,</u> <u>objv,</u> <u>tkwin,</u> <u>savePtr,</u> <u>maskPtr</u><b>)</b>

       <b>Tk_FreeSavedOptions(</b><u>savedPtr</u><b>)</b>

       <b>Tk_RestoreSavedOptions(</b><u>savedPtr</u><b>)</b>

       Tcl_Obj *
       <b>Tk_GetOptionValue(</b><u>interp,</u> <u>recordPtr,</u> <u>optionTable,</u> <u>namePtr,</u> <u>tkwin</u><b>)</b>

       Tcl_Obj *
       <b>Tk_GetOptionInfo(</b><u>interp,</u> <u>recordPtr,</u> <u>optionTable,</u> <u>namePtr,</u> <u>tkwin</u><b>)</b>

       <b>Tk_FreeConfigOptions(</b><u>recordPtr,</u> <u>optionTable,</u> <u>tkwin</u><b>)</b>

       int
       <b>Tk_Offset(</b><u>type,</u> <u>field</u><b>)</b>

<b>ARGUMENTS</b>
       Tcl_Interp        <u>*interp</u>         (in)      A  Tcl  interpreter.   Most  procedures use this only for
                                                   returning error messages; if it is  NULL  then  no  error
                                                   messages  are  returned.   For  <b>Tk_CreateOptionTable</b>  the
                                                   value cannot be NULL; it gives the interpreter  in  which
                                                   the option table will be used.

       Tk_OptionSpec     <u>*templatePtr</u>    (in)      Points  to  an array of static information that describes
                                                   the configuration options that are  supported.   Used  to
                                                   build  a  Tk_OptionTable.   The information pointed to by
                                                   this  argument  must  exist  for  the  lifetime  of   the
                                                   Tk_OptionTable.

       Tk_OptionTable    <u>optionTable</u>     (in)      Token  for an option table.  Must have been returned by a
                                                   previous call to <b>Tk_CreateOptionTable</b>.

       char              <u>*recordPtr</u>      (in/out)  Points to structure  in  which  values  of  configuration
                                                   options are stored; fields of this record are modified by
                                                   procedures such as <b>Tk_SetOptions</b> and read  by  procedures
                                                   such as <b>Tk_GetOptionValue</b>.

       Tk_Window         <u>tkwin</u>           (in)      For  options such as TK_OPTION_COLOR, this argument indi-<font color="#ffffff" class="whiteout">cates&nbsp;indicates</font>
                                                   cates the window in which the option will  be  used.   If
                                                   <u>optionTable</u> uses no window-dependent options, then a NULL
                                                   value may be supplied for this argument.

       int               <u>objc</u>            (in)      Number of values in <u>objv</u>.

       Tcl_Obj           <u>*CONST</u> <u>objv[]</u>   (in)      Command-line arguments for setting configuring options.

       Tk_SavedOptions   <u>*savePtr</u>        (out)     If not NULL, the structure pointed to by this argument is
                                                   filled  in  with  the old values of any options that were
                                                   modified and old values are restored automatically if  an
                                                   error occurs in <b>Tk_SetOptions</b>.

       int               <u>*maskPtr</u>        (out)     If  not NULL, the word pointed to by <u>maskPtr</u> is filled in
                                                   with the bit-wise OR  of  the  <u>typeMask</u>  fields  for  the
                                                   options that were modified.

       Tk_SavedOptions   <u>*savedPtr</u>       (in/out)  Points  to  a structure previously filled in by <b>Tk_SetOp</b>-<font color="#ffffff" class="whiteout">tions&nbsp;Tk_SetOptions</font>
                                                   <b>tions</b> with old values of modified options.

       Tcl_Obj           <u>*namePtr</u>        (in)      The value of this object is  the  name  of  a  particular
                                                   option.   If  NULL  is  passed  to  <b>Tk_GetOptionInfo</b> then
                                                   information is returned for all  options.   Must  not  be
                                                   NULL when <b>Tk_GetOptionValue</b> is called.

       type name         <u>type</u>            (in)      The name of the type of a record.

       field name        <u>field</u>           (in)      The name of a field in records of type <u>type</u>.
____________________________________________________________________________________________________________

<b>DESCRIPTION</b>
       These  procedures  handle  most  of the details of parsing configuration options such as those for Tk
       widgets.  Given a description of what options are supported, these procedures handle all the  details
       of  parsing options and storing their values into a C structure associated with the widget or object.
       The procedures were designed primarily for widgets in Tk, but they can also be used for  other  kinds
       of  objects that have configuration options.  In the rest of this manual page ``widget'' will be used
       to refer to the object whose options are being managed; in practice the object may not actually be  a
       widget.   The  term  ``widget record'' is used to refer to the C-level structure in which information
       about a particular widget or object is stored.

       Note: the easiest way to learn how to use these procedures is to look at a working example.   In  Tk,
       the  simplest  example  is  the code that implements the button family of widgets, which is an <b>tkBut</b>-<font color="#ffffff" class="whiteout">ton.c.&nbsp;tkButton.c.</font>
       <b>ton.c</b>.  Other examples are in <b>tkSquare.c</b> and <b>tkMenu.c</b>.

       In order to use these procedures, the code that implements the widget must contain a static array  of
       Tk_OptionSpec  structures.  This  is  a template that describes the various options supported by that
       class of widget; there is a separate template for each kind of widget.  The template contains  infor-<font color="#ffffff" class="whiteout">mation&nbsp;information</font>
       mation  such  as  the  name  of  each option, its type, its default value, and where the value of the
       option is stored in the widget record.  See TEMPLATES below for more detail.

       In order to process configuration options efficiently, the static template  must  be  augmented  with
       additional information that is available only at runtime.  The procedure <b>Tk_CreateOptionTable</b> creates
       this dynamic information from the template and returns a Tk_OptionTable token that describes both the
       static  and  dynamic  information.   All  of  the  other  procedures,  such  as <b>Tk_SetOptions</b>, take a
       Tk_OptionTable token as argument.  Typically, <b>Tk_CreateOptionTable</b> is called the first  time  that  a
       widget  of  a  particular class is created and the resulting Tk_OptionTable is used in the future for
       all widgets of that class.  A Tk_OptionTable may be used only in a single interpreter, given  by  the
       <u>interp</u>  argument  to  <b>Tk_CreateOptionTable</b>.   When  an  option table is no longer needed <b>Tk_DeleteOp</b>-<font color="#ffffff" class="whiteout">tionTable&nbsp;Tk_DeleteOptionTable</font>
       <b>tionTable</b> should be called to free all of its resources.  All of the option tables for a  Tcl  inter-<font color="#ffffff" class="whiteout">preter&nbsp;interpreter</font>
       preter are freed automatically if the interpreter is deleted.

       <b>Tk_InitOptions</b>  is invoked when a new widget is created to set the default values for all of the wid-<font color="#ffffff" class="whiteout">get's&nbsp;widget's</font>
       get's configuration options.  <b>Tk_InitOptions</b> is passed a token for an option table (<u>optionTable</u>)  and
       a  pointer to a widget record (<u>recordPtr</u>), which is the C structure that holds information about this
       widget. <b>Tk_InitOptions</b> uses the information in the option table to choose an appropriate default  for
       each option, then it stores the default value directly into the widget record, overwriting any infor-<font color="#ffffff" class="whiteout">mation&nbsp;information</font>
       mation that was already present in the widget record.  <b>Tk_InitOptions</b> normally returns TCL_OK.  If an
       error  occurred  while  setting the default values (e.g., because a default value was erroneous) then
       TCL_ERROR is returned and an error message is left in <u>interp</u>'s result if <u>interp</u> isn't NULL.

       <b>Tk_SetOptions</b> is invoked to modify configuration options based on information specified in a Tcl com-<font color="#ffffff" class="whiteout">mand.&nbsp;command.</font>
       mand.   The  command might be one that creates a new widget, or a command that modifies options on an
       existing widget.  The <u>objc</u> and <u>objv</u> arguments describe the values of the arguments from the Tcl  com-<font color="#ffffff" class="whiteout">mand.&nbsp;command.</font>
       mand.   <u>Objv</u>  must contain an even number of objects: the first object of each pair gives the name of
       an option and the second object gives the new value for that option.   <b>Tk_SetOptions</b>  looks  up  each
       name in <u>optionTable</u>, checks that the new value of the option conforms to the type in <u>optionTable</u>, and
       stores the value of the option into the widget record given  by  <u>recordPtr</u>.   <b>Tk_SetOptions</b>  normally
       returns  TCL_OK.   If  an  error occurred (such as an unknown option name or an illegal option value)
       then TCL_ERROR is returned and an error message is left in <u>interp</u>'s result if <u>interp</u> isn't NULL.

       <b>Tk_SetOptions</b> has two additional features.  First, if the <u>maskPtr</u> argument isn't NULL then it  points
       to  an  integer  value  that is filled in with information about the options that were modified.  For
       each option in the template passed to <b>Tk_CreateOptionTable</b> there is a <u>typeMask</u> field.   The  bits  of
       this field are defined by the code that implements the widget; for example, each bit might correspond
       to a particular configuration option.  Alternatively, bits might be used functionally.  For  example,
       one bit might be used for redisplay: all options that affect the widget's display, such that changing
       the option requires the widget to be redisplayed, might have that bit set.  Another bit  might  indi-<font color="#ffffff" class="whiteout">cate&nbsp;indicate</font>
       cate  that the geometry of the widget must be recomputed, and so on.  <b>Tk_SetOptions</b> OR's together the
       <u>typeMask</u> fields from all the options that were modified and  returns  this  value  at  *<u>maskPtr</u>;  the
       caller  can  then  use this information to optimize itself so that, for example, it doesn't redisplay
       the widget if the modified options don't affect the widget's appearance.

       The second additional feature of <b>Tk_SetOptions</b> has to do with error recovery.   If  an  error  occurs
       while  processing configuration options, this feature makes it possible to restore all the configura-<font color="#ffffff" class="whiteout">tion&nbsp;configuration</font>
       tion options to their previous values.  Errors can occur either while processing options in <b>Tk_SetOp</b>-<font color="#ffffff" class="whiteout">tions&nbsp;Tk_SetOptions</font>
       <b>tions</b>  or  later  in the caller.  In many cases the caller does additional processing after <b>Tk_SetOp</b>-<font color="#ffffff" class="whiteout">tions&nbsp;Tk_SetOptions</font>
       <b>tions</b> returns; for example, it might use an option value to set a trace on a variable and may  detect
       an  error if the variable is an array instead of a scalar.  Error recovery is enabled by passing in a
       non-NULL value for the <u>savePtr</u> argument to <b>Tk_SetOptions</b>; this should be a pointer to  an  uninitial-<font color="#ffffff" class="whiteout">ized&nbsp;uninitialized</font>
       ized Tk_SavedOptions structure on the caller's stack.  <b>Tk_SetOptions</b> overwrites the structure pointed
       to by <u>savePtr</u> with information about the old values of any options modified  by  the  procedure.   If
       <b>Tk_SetOptions</b>  returns successfully, the caller uses the structure in one of two ways.  If the caller
       completes its processing of the new options without any errors, then it must pass  the  structure  to
       <b>Tk_FreeSavedOptions</b>  so that the old values can be freed.  If the caller detects an error in its pro-<font color="#ffffff" class="whiteout">cessing&nbsp;processing</font>
       cessing of the new options, then it should pass the structure to <b>Tk_RestoreSavedOptions</b>,  which  will
       copy the old values back into the widget record and free the new values.  If <b>Tk_SetOptions</b> detects an
       error then it automatically restores any options that had already been modified and  leaves  *<u>savePtr</u>
       in an empty state: the caller need not call either <b>Tk_FreeSavedOptions</b> or <b>Tk_RestoreSavedOptions</b>.  If
       the <u>savePtr</u> argument to <b>Tk_SetOptions</b> is NULL then <b>Tk_SetOptions</b> frees each old option value  immedi-<font color="#ffffff" class="whiteout">ately&nbsp;immediately</font>
       ately when it sets a new value for the option.  In this case, if an error occurs in the third option,
       the old values for the first two options cannot be restored.

       <b>Tk_GetOptionValue</b> returns the current value of a configuration option for a particular  widget.   The
       <u>namePtr</u>  argument  contains  the  name of an option; <b>Tk_GetOptionValue</b> uses <u>optionTable</u> to lookup the
       option and extract its value from the widget record pointed to  by  <u>recordPtr</u>,  then  it  returns  an
       object  containing  that value.  If an error occurs (e.g., because <u>namePtr</u> contains an unknown option
       name) then NULL is returned and an error message is left in <u>interp</u>'s result unless <u>interp</u> is NULL.

       <b>Tk_GetOptionInfo</b> returns information about configuration options in a  form  suitable  for  <b>configure</b>
       widget  commands.  If the <u>namePtr</u> argument is not NULL, it points to an object that gives the name of
       a configuration option; <b>Tk_GetOptionInfo</b> returns an object containing  a  list  with  five  elements,
       which  are the name of the option, the name and class used for the option in the option database, the
       default value for the option, and the current value for the option.  If the <u>namePtr</u> argument is NULL,
       then <b>Tk_GetOptionInfo</b> returns information about all options in the form of a list of lists; each sub-<font color="#ffffff" class="whiteout">list&nbsp;sublist</font>
       list describes one option.  Synonym options are handled differently depending on whether  <u>namePtr</u>  is
       NULL:  if  <u>namePtr</u>  is NULL then the sublist for each synonym option has only two elements, which are
       the name of the option and the name of the other option that it refers to; if <u>namePtr</u> is non-NULL and
       names  a  synonym  option then the object returned is the five-element list for the other option that
       the synonym refers to.  If an error occurs (e.g., because <u>namePtr</u> contains an  unknown  option  name)
       then NULL is returned and an error message is left in <u>interp</u>'s result unless <u>interp</u> is NULL.

       <b>Tk_FreeConfigOptions</b> must be invoked when a widget is deleted.  It frees all of the resources associ-<font color="#ffffff" class="whiteout">ated&nbsp;associated</font>
       ated with any of the configuration options defined in <u>recordPtr</u> by <u>optionTable</u>.

       The <b>Tk_Offset</b> macro is provided as a safe way of generating the <u>objOffset</u> and  <u>internalOffset</u>  values
       for  entries  in Tk_OptionSpec structures.  It takes two arguments: the name of a type of record, and
       the name of a field in that record. It returns the byte offset of the named field in records  of  the
       given type.


<b>TEMPLATES</b>
       The  array  of  Tk_OptionSpec  structures passed to <b>Tk_CreateOptionTable</b> via its <u>templatePtr</u> argument
       describes the configuration options supported by a particular class of widgets.  Each structure spec-<font color="#ffffff" class="whiteout">ifies&nbsp;specifies</font>
       ifies one configuration option and has the following fields:
              typedef struct {
                Tk_OptionType <u>type</u>;
                char *<u>optionName</u>;
                char *<u>dbName</u>;
                char *<u>dbClass</u>;
                char *<u>defValue</u>;
                int <u>objOffset</u>;
                int <u>internalOffset</u>;
                int <u>flags</u>;
                ClientData <u>clientData</u>;
                int <u>typeMask</u>;
              } Tk_OptionSpec;
       The  <u>type</u> field indicates what kind of configuration option this is (e.g. TK_OPTION_COLOR for a color
       value, or TK_OPTION_INT for an integer value).  <u>Type</u> determines how the value of the option is parsed
       (more on this below).  The <u>optionName</u> field is a string such as <b>-font</b> or <b>-bg</b>; it is the name used for
       the option in Tcl commands and passed to procedures via the <u>objc</u> or <u>namePtr</u>  arguments.   The  <u>dbName</u>
       and  <u>dbClass</u>  fields  are  used  by  <b>Tk_InitOptions</b> to look up a default value for this option in the
       option database; if <u>dbName</u> is NULL then the option database is not used by  <b>Tk_InitOptions</b>  for  this
       option.   The  <u>defValue</u>  field specifies a default value for this configuration option if no value is
       specified in the option database.  The <u>objOffset</u> and <u>internalOffset</u> fields indicate  where  to  store
       the  value of this option in widget records (more on this below); values for the <u>objOffset</u> and <u>inter</u>-<font color="#ffffff" class="whiteout">nalOffset&nbsp;internalOffset</font>
       <u>nalOffset</u> fields should always be generated with the <b>Tk_Offset</b> macro.  The <u>flags</u> field contains addi-<font color="#ffffff" class="whiteout">tional&nbsp;additional</font>
       tional  information  to  control the processing of this configuration option (see below for details).
       <u>ClientData</u> provides additional type-specific  data  needed  by  certain  types.   For  instance,  for
       TK_OPTION_COLOR types, <u>clientData</u> is a string giving the default value to use on monochrome displays.
       See the descriptions of the different types below for details.  The last field, <u>typeMask</u>, is used  by
       <b>Tk_SetOptions</b>  to  return  information  about  which  options  were  modified; see the description of
       <b>Tk_SetOptions</b> above for details.

       When <b>Tk_InitOptions</b> and <b>Tk_SetOptions</b> store the value of an option into the widget record,  they  can
       do it in either of two ways.  If the <u>objOffset</u> field of the Tk_OptionSpec is greater than or equal to
       zero, then the value of the option is stored as a (Tcl_Obj *) at the location in  the  widget  record
       given  by  <u>objOffset</u>.   If  the <u>internalOffset</u> field of the Tk_OptionSpec is greater than or equal to
       zero, then the value of the option is stored in a type-specific internal form at the location in  the
       widget  record  given by <u>internalOffset</u>.  For example, if the option's type is TK_OPTION_INT then the
       internal form is an integer.  If the <u>objOffset</u> or <u>internalOffset</u> field is negative then the value  is
       not stored in that form.  At least one of the offsets must be greater than or equal to zero.

       The  <u>flags</u>  field  consists of one or more bits ORed together.  At present only a single flag is sup-<font color="#ffffff" class="whiteout">ported:&nbsp;supported:</font>
       ported: TK_OPTION_NULL_OK.  If this bit is set for an option then an empty string will be accepted as
       the  value  for  the  option and the resulting internal form will be a NULL pointer, a zero value, or
       <b>None</b>, depending on the type of the option.  If the flag is not set then empty strings will result  in
       errors.  TK_OPTION_NULL_OK is typically used to allow a feature to be turned off entirely, e.g. set a
       cursor value to <b>None</b> so that a window simply inherits its parent's cursor.  Not all option types sup-<font color="#ffffff" class="whiteout">port&nbsp;support</font>
       port  the  TK_OPTION_NULL_OK flag; for those that do, there is an explicit indication of that fact in
       the descriptions below.

       The <u>type</u> field of each Tk_OptionSpec structure determines how to parse the value of  that  configura-<font color="#ffffff" class="whiteout">tion&nbsp;configuration</font>
       tion  option.  The  legal value for <u>type</u>, and the corresponding actions, are described below.  If the
       type requires a <u>tkwin</u> value to be passed into procedures  like  <b>Tk_SetOptions</b>,  or  if  it  uses  the
       <u>clientData</u>  field  of  the Tk_OptionSpec, then it is indicated explicitly; if not mentioned, the type
       requires neither <u>tkwin</u> nor <u>clientData</u>.

       <b>TK_OPTION_ANCHOR</b>
              The value must be a standard anchor position such as <b>ne</b> or <b>center</b>.  The  internal  form  is  a
              Tk_Anchor value like the ones returned by <b>Tk_GetAnchorFromObj</b>.

       <b>TK_OPTION_BITMAP</b>
              The value must be a standard Tk bitmap name. The internal form is a Pixmap token like the ones
              returned by <b>Tk_AllocBitmapFromObj</b>.  This option type requires <u>tkwin</u> to be supplied  to  proce-<font color="#ffffff" class="whiteout">dures&nbsp;procedures</font>
              dures such as <b>Tk_SetOptions</b>, and it supports the TK_OPTION_NULL_OK flag.

       <b>TK_OPTION_BOOLEAN</b>
              The  value must be a standard boolean value such as <b>true</b> or <b>no</b>.  The internal form is an inte-<font color="#ffffff" class="whiteout">ger&nbsp;integer</font>
              ger with value 0 or 1.

       <b>TK_OPTION_BORDER</b>
              The value must be a standard color name such as <b>red</b>  or  <b>#ff8080</b>.   The  internal  form  is  a
              Tk_3DBorder  token  like  the  ones  returned  by  <b>Tk_Alloc3DBorderFromObj</b>.   This option type
              requires <u>tkwin</u> to be supplied to  procedures  such  as  <b>Tk_SetOptions</b>,  and  it  supports  the
              TK_OPTION_NULL_OK flag.

       <b>TK_OPTION_COLOR</b>
              The  value  must  be  a  standard  color name such as <b>red</b> or <b>#ff8080</b>.  The internal form is an
              (XColor *) token like the ones returned by <b>Tk_AllocColorFromObj</b>.  This  option  type  requires
              <u>tkwin</u>   to   be   supplied   to   procedures  such  as  <b>Tk_SetOptions</b>,  and  it  supports  the
              TK_OPTION_NULL_OK flag.

       <b>TK_OPTION_CURSOR</b>
              The value must be a standard cursor name such as <b>cross</b>  or  <b>@foo</b>.   The  internal  form  is  a
              Tk_Cursor  token  like  the ones returned by <b>Tk_AllocCursorFromObj</b>.  This option type requires
              <u>tkwin</u> to be supplied to procedures such as <b>Tk_SetOptions</b>, and when the option is set the  cur-<font color="#ffffff" class="whiteout">sor&nbsp;cursor</font>
              sor  for  the  window is changed by calling <b>XDefineCursor</b>.  This option type also supports the
              TK_OPTION_NULL_OK flag.

       <b>TK_OPTION_CUSTOM</b>
              This option allows applications to define new option types.  The clientData field of the entry
              points to a structure defining the new option type.  See the section CUSTOM OPTION TYPES below
              for details.

       <b>TK_OPTION_DOUBLE</b>
              The string value must be a floating-point number in the format accepted by <b>strtol</b>.  The inter-<font color="#ffffff" class="whiteout">nal&nbsp;internal</font>
              nal form is a C <b>double</b> value.  This option type supports the TK_OPTION_NULL_OK flag; if a NULL
              value is set, the internal representation is set to zero.

       <b>TK_OPTION_END</b>
              Marks  the  end  of  the  template.   There  must  be  a  Tk_OptionSpec  structure  with  <u>type</u>
              TK_OPTION_END  at  the  end of each template.  If the <u>clientData</u> field of this structure isn't
              NULL, then it points to an additional array of Tk_OptionSpec's, which is itself terminated  by
              another  TK_OPTION_END  entry.   Templates  may  be  chained arbitrarily deeply.  This feature
              allows common options to be shared by several widget classes.

       <b>TK_OPTION_FONT</b>
              The value must be a standard font name such as <b>Times</b> <b>16</b>.  The internal form is a Tk_Font  han-<font color="#ffffff" class="whiteout">dle&nbsp;handle</font>
              dle like the ones returned by <b>Tk_AllocFontFromObj</b>.  This option type requires <u>tkwin</u> to be sup-<font color="#ffffff" class="whiteout">plied&nbsp;supplied</font>
              plied to procedures such as <b>Tk_SetOptions</b>, and it supports the TK_OPTION_NULL_OK flag.

       <b>TK_OPTION_INT</b>
              The string value must be an integer in the format accepted by <b>strtol</b> (e.g. <b>0</b> and  <b>0x</b>  prefixes
              may  be used to specify octal or hexadecimal numbers, respectively).  The internal form is a C
              <b>int</b> value.

       <b>TK_OPTION_JUSTIFY</b>
              The value must be a standard justification value such as <b>left</b>.  The internal form is a Tk_Jus-<font color="#ffffff" class="whiteout">tify&nbsp;Tk_Justify</font>
              tify like the values returned by <b>Tk_GetJustifyFromObj</b>.

       <b>TK_OPTION_PIXELS</b>
              The  value  must specify a screen distance such as <b>2i</b> or <b>6.4</b>.  The internal form is an integer
              value giving a distance in pixels, like the values returned by <b>Tk_GetPixelsFromObj</b>.  Note:  if
              the  <u>objOffset</u>  field isn't used then information about the original value of this option will
              be lost.  See <b>OBJOFFSET</b> <b>VS.</b> <b>INTERNALOFFSET</b> below for details.  This option type  supports  the
              TK_OPTION_NULL_OK flag; if a NULL value is set, the internal representation is set to zero.

       <b>TK_OPTION_RELIEF</b>
              The  value  must  be  standard  relief such as <b>raised</b>.  The internal form is an integer relief
              value such as TK_RELIEF_RAISED.  This option type supports the TK_OPTION_NULL_OK flag; if  the
              empty  string  is  specified  as  the value for the option, the integer relief value is set to
              TK_RELIEF_NULL.

       <b>TK_OPTION_STRING</b>
              The value may be any string.  The internal form is a (char *) pointer that points to a dynami-<font color="#ffffff" class="whiteout">cally&nbsp;dynamically</font>
              cally allocated copy of the value.  This option type supports the TK_OPTION_NULL_OK flag.

       <b>TK_OPTION_STRING_TABLE</b>
              For  this  type,  <u>clientData</u>  is  a  pointer  to  an  array of strings suitable for passing to
              <b>Tcl_GetIndexFromObj</b>.  The value must be one of the strings in the table, or a unique abbrevia-<font color="#ffffff" class="whiteout">tion&nbsp;abbreviation</font>
              tion  of  one of the strings.  The internal form is an integer giving the index into the table
              of the matching string, like the return value from <b>Tcl_GetStringFromObj</b>.

       <b>TK_OPTION_SYNONYM</b>
              This type is used to provide alternative names for an option (for example, <b>-bg</b> is  often  used
              as a synonym for <b>-background</b>).  The <b>clientData</b> field is a (char *) pointer that gives the name
              of another option in the same table.  Whenever the synonym option  is  used,  the  information
              from the other option will be used instead.

       <b>TK_OPTION_WINDOW</b>
              The  value must be a window path name.  The internal form is a <b>Tk_Window</b> token for the window.
              This option type requires <u>tkwin</u> to be supplied to procedures such as <b>Tk_SetOptions</b>  (in  order
              to identify the application), and it supports the TK_OPTION_NULL_OK flag.


<b>STORAGE</b> <b>MANAGEMENT</b> <b>ISSUES</b>
       If  a  field  of  a widget record has its offset stored in the <u>objOffset</u> or <u>internalOffset</u> field of a
       Tk_OptionSpec structure then the procedures described here will handle all of the storage  allocation
       and  resource  management  issues associated with the field.  When the value of an option is changed,
       <b>Tk_SetOptions</b> (or <b>Tk_FreeSavedOptions</b>) will automatically free any resources associated with the  old
       value,   such   as   Tk_Fonts   for  TK_OPTION_FONT  options  or  dynamically  allocated  memory  for
       TK_OPTION_STRING options.  For an option  stored  as  an  object  using  the  <u>objOffset</u>  field  of  a
       Tk_OptionSpec,  the  widget  record  shares  the object pointed to by the <u>objv</u> value from the call to
       <b>Tk_SetOptions</b>.  The reference count for this object is incremented when a pointer to it is stored  in
       the  widget  record  and  decremented  when  the  option  is  modified.   When  the widget is deleted
       <b>Tk_FreeConfigOptions</b> should be invoked; it will free the resources associated with  all  options  and
       decrement reference counts for any objects.

       However,  the  widget  code  is  responsible for storing NULL or <b>None</b> in all pointer and token fields
       before invoking <b>Tk_InitOptions</b>.  This is needed to allow proper cleanup in the  rare  case  where  an
       error occurs in <b>Tk_InitOptions</b>.


<b>OBJOFFSET</b> <b>VS.</b> <b>INTERNALOFFSET</b>
       In most cases it is simplest to use the <u>internalOffset</u> field of a Tk_OptionSpec structure and not the
       <u>objOffset</u> field.  This makes the internal form of the value immediately available to the widget  code
       so  the  value  doesn't have to be extracted from an object each time it is used.  However, there are
       two cases where the <u>objOffset</u> field is useful.  The first case is for TK_OPTION_PIXELS  options.   In
       this  case,  the  internal form is an integer pixel value that is valid only for a particular screen.
       If the value of the option is retrieved, it will be returned as a simple number.  For example,  after
       the command <b>.b</b> <b>configure</b> <b>-borderwidth</b> <b>2m</b>, the command <b>.b</b> <b>configure</b> <b>-borderwidth</b> might return 7, which
       is the integer pixel value corresponding to <b>2m</b>.  Unfortunately, this loses the original  screen-inde-<font color="#ffffff" class="whiteout">pendent&nbsp;screen-independent</font>
       pendent  value.   Thus for TK_OPTION_PIXELS options it is better to use the <u>objOffset</u> field.  In this
       case the original value of the option is retained in the object and can be returned when  the  option
       is  retrieved.  In most cases it is convenient to use the <u>internalOffset</u> field field as well, so that
       the integer value is immediately available for use in the widget code  (alternatively,  <b>Tk_GetPixels</b>-<font color="#ffffff" class="whiteout">FromObj&nbsp;Tk_GetPixelsFromObj</font>
       <b>FromObj</b>  can  be used to extract the integer value from the object whenever it is needed).  Note: the
       problem of losing information on retrievals exists only for TK_OPTION_PIXELS options.

       The second reason to use the <u>objOffset</u> field is in order to implement new types of options  not  sup-<font color="#ffffff" class="whiteout">ported&nbsp;supported</font>
       ported  by  these procedures.  To implement a new type of option, you can use TK_OPTION_STRING as the
       type in the Tk_OptionSpec structure and set the <u>objOffset</u> field but  not  the  <u>internalOffset</u>  field.
       Then, after calling <b>Tk_SetOptions</b>, convert the object to internal form yourself.


<b>CUSTOM</b> <b>OPTION</b> <b>TYPES</b>
       Applications can extend the built-in configuration types with additional configuration types by writ-<font color="#ffffff" class="whiteout">ing&nbsp;writing</font>
       ing procedures to parse, print, free, and restore saved copies of the type and creating  a  structure
       pointing to those procedures:
              typedef struct Tk_ObjCustomOption {
                char *name;
                Tk_CustomOptionSetProc *<u>setProc</u>;
                Tk_CustomOptionGetProc *<u>getProc</u>;
                Tk_CustomOptionRestoreProc *<u>restoreProc</u>;
                Tk_CustomOptionFreeProc *<u>freeProc</u>;
                ClientData <u>clientData</u>;
              } Tk_ObjCustomOption;

              typedef int Tk_CustomOptionSetProc(
                ClientData <u>clientData</u>,
                Tcl_Interp *<u>interp</u>,
                Tk_Window <u>tkwin</u>,
                Tcl_Obj **<u>valuePtr</u>,
                char *<u>recordPtr</u>,
                int <u>internalOffset</u>,
                char *<u>saveInternalPtr</u>,
                int <u>flags</u>);

              typedef Tcl_Obj *Tk_CustomOptionGetProc(
                ClientData <u>clientData</u>,
                Tk_Window <u>tkwin</u>,
                char *<u>recordPtr</u>,
                int <u>internalOffset</u>);

              typedef void Tk_CustomOptionRestoreProc(
                ClientData <u>clientData</u>,
                Tk_Window <u>tkwin</u>,
                char *<u>internalPtr</u>,
                char *<u>saveInternalPtr</u>);

              typedef void Tk_CustomOptionFreeProc(
                ClientData <u>clientData</u>,
                Tk_Window <u>tkwin</u>,
                char *<u>internalPtr</u>);

       The  Tk_ObjCustomOption structure contains six fields: a name for the custom option type; pointers to
       the four procedures; and a <u>clientData</u> value to be passed to those procedures when they  are  invoked.
       The  <u>clientData</u>  value  typically  points to a structure containing information that is needed by the
       procedures when they are parsing and printing options.  <u>RestoreProc</u> and <u>freeProc</u> may be  NULL,  indi-<font color="#ffffff" class="whiteout">cating&nbsp;indicating</font>
       cating that no function should be called for those operations.

       The  <u>setProc</u>  procedure is invoked by <b>Tk_SetOptions</b> to convert a Tcl_Obj into an internal representa-<font color="#ffffff" class="whiteout">tion&nbsp;representation</font>
       tion and store the resulting value in the widget record.  The arguments are:

              <u>clientData</u>
                     A copy of the <u>clientData</u> field in the Tk_ObjCustomOption structure.

              <u>interp</u> A pointer to a Tcl interpreter, used for error reporting.

              <u>Tkwin</u>  A copy of the <u>tkwin</u> argument to <b>Tk_SetOptions</b>

              <u>valuePtr</u>
                     A pointer to a reference to a Tcl_Obj describing the new value for the option; it could
                     have  been  specified explicitly in the call to <b>Tk_SetOptions</b> or it could come from the
                     option database or a default.  If the objOffset for the  option  is  non-negative  (the
                     option value is stored as a (Tcl_Obj *) in the widget record), the Tcl_Obj pointer ref-<font color="#ffffff" class="whiteout">erenced&nbsp;referenced</font>
                     erenced by <u>valuePtr</u> is the pointer that will be stored at the objOffset for the option.
                     <u>SetProc</u> may modify the value if necessary; for example, <u>setProc</u> may change the value to
                     NULL to support the TK_OPTION_NULL_OK flag.

              <u>recordPtr</u>
                     A pointer to the start of the widget record to modify.

              <u>internalOffset</u>
                     Offset in bytes from the start of the widget record to the location where the  internal
                     representation of the option value is to be placed.

              <u>saveInternalPtr</u>
                     A  pointer  to storage allocated in a Tk_SavedOptions structure for the internal repre-<font color="#ffffff" class="whiteout">sentation&nbsp;representation</font>
                     sentation of the original option value.  Before setting the option to  its  new  value,
                     <u>setProc</u> should set the value referenced by <u>saveInternalPtr</u> to the original value of the
                     option in order to support <b>Tk_RestoreSavedOptions</b>.

              <u>flags</u>  A copy of the <u>flags</u> field in the Tk_OptionSpec structure for the option

       <u>SetProc</u> returns a standard Tcl result:  TCL_OK to indicate successful  processing,  or  TCL_ERROR  to
       indicate  a failure of any kind.  An error message may be left in the Tcl interpreter given by <u>interp</u>
       in the case of an error.

       The <u>getProc</u> procedure is invoked by <b>Tk_GetOptionValue</b> and <b>Tk_GetOptionInfo</b> to retrieve a Tcl_Obj rep-<font color="#ffffff" class="whiteout">resentation&nbsp;representation</font>
       resentation  of  the  internal representation of an option.  The <u>clientData</u> argument is a copy of the
       <u>clientData</u> field in the Tk_ObjCustomOption structure.  <u>Tkwin</u> is a  copy  of  the  <u>tkwin</u>  argument  to
       <b>Tk_GetOptionValue</b>  or <b>Tk_GetOptionInfo</b>.  <u>RecordPtr</u> is a pointer to the beginning of the widget record
       to query.  <u>InternalOffset</u> is the offset in bytes from the beginning of the widget record to the loca-<font color="#ffffff" class="whiteout">tion&nbsp;location</font>
       tion  where the internal representation of the option value is stored.  <u>GetProc</u> must return a pointer
       to a Tcl_Obj representing the value of the option.

       The <u>restoreProc</u> procedure is invoked by <b>Tk_RestoreSavedOptions</b> to restore a previously saved internal
       representation  of  a custom option value.  The <u>clientData</u> argument is a copy of the <u>clientData</u> field
       in the Tk_ObjCustomOption structure.  <u>Tkwin</u> is a copy of the <u>tkwin</u> argument to  <b>Tk_GetOptionValue</b>  or
       <b>Tk_GetOptionInfo</b>.   <u>InternalPtr</u>  is  a  pointer  to the location where internal representation of the
       option value is stored.  <u>SaveInternalPtr</u> is a pointer to the saved value.  <u>RestoreProc</u> must copy  the
       value from <u>saveInternalPtr</u> to <u>internalPtr</u> to restore the value.  <u>RestoreProc</u> need not free any memory
       associated with either <u>internalPtr</u> or <u>saveInternalPtr</u>; <u>freeProc</u> will be invoked to free  that  memory
       if necessary.  <u>RestoreProc</u> has no return value.

       The  <u>freeProc</u> procedure is invoked by <b>Tk_SetOptions</b> and <b>Tk_FreeSavedOptions</b> to free any storage allo-<font color="#ffffff" class="whiteout">cated&nbsp;allocated</font>
       cated for the internal representation of a custom option.  The <u>clientData</u> argument is a copy  of  the
       <u>clientData</u>  field  in  the  Tk_ObjCustomOption  structure.   <u>Tkwin</u> is a copy of the <u>tkwin</u> argument to
       <b>Tk_GetOptionValue</b> or <b>Tk_GetOptionInfo</b>.  <u>InternalPtr</u> is a pointer to the location where  the  internal
       representation of the option value is stored.  The <u>freeProc</u> must free any storage associated with the
       option.  <u>FreeProc</u> has no return value.



<b>KEYWORDS</b>
       anchor, bitmap, boolean, border, color, configuration option, cursor, double, font, integer, justify,
       pixels, relief, screen distance, synonym



Tk                                                   8.1                                    <a href="Tk_SetOptions.3tcl.html#//apple_ref/doc/man/3/Tk_SetOptions">Tk_SetOptions(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tk_InitOptions.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tk_InitOptions.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tk_InitOptions.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

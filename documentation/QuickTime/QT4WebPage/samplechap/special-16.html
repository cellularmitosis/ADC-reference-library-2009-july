<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 6.0/HTML Export Filter"><TITLE> Flattening</TITLE></HEAD><BODY BGCOLOR="#ffffff"><table width="500"><tr><td width=500 scope="row"><a href="../../../../documentation/quicktime/qtdevdocs/QT4WebPage/qtdevseries.htm" target="top"><I>QuickTime Developer Series</I></a></td></tr><tr><td scope="row"><img src=qlogo2.jpg></td></tr><tr><td scope="row"><img src=specialtitle.gif></td></tr><tr><td scope="row"><H1>Sample Chapter</H1></td></tr></table><hr>| <a href=special-17.html>Next</a> | <a href=special-15.html>Prev</a> | <a href=special.html>Top</a> |<hr><table width=500> <tr> <td scope="row"><H2 CLASS="FM2Head"><A NAME="pgfId-7846"></A>Flattening</H2><P CLASS="First-body"><A NAME="pgfId-7861"></A>Making a movie self-contained is sometimes called &quot;flattening&quot; the movie. That's unfortunate, because <A NAME="marker-13716"></A>flattening is really something more. Flattening a movie means that all references to media data are resolved and copies of the data are stored in the movie file. That does make the movie self-contained. But flattening also resolves internal references. </P><P CLASS="Body"><A NAME="pgfId-12039"></A>Remember, a track can contain multiple references to the same media data. What's more, the same data can be referenced by multiple tracks. If that data is already stored in the movie file, the movie is already self-contained. The references are to internal data. </P><P CLASS="Body"><A NAME="pgfId-12046"></A>When you flatten a movie, all references are resolved, and any referenced data is copied into the movie file. Internal references are resolved by making internal copies of the data. That makes the movie file larger, sometimes much larger, but it also optimizes the movie for smooth playback.</P><UL><P> <B>Note</B>&nbsp;<A NAME="pgfId-9611"></A><A NAME="marker-13719"></A>Macintosh files can have both a <A NAME="marker-13717"></A>data fork and a <A NAME="marker-13718"></A>resource fork, but Windows and UNIX files don't have resource forks. In the ancient days of QuickTime 1.0, the header data for a movie was stored in the movie file's resource fork. Before you could put a movie on a UNIX Web server or a Windows CD, you had to move some things into the data fork. There was a utility program named <TT CLASS="Fruit-code">FlattenMoov</TT> that did this, so using it was often called &quot;flattening&quot; a movie. QuickTime now stores the movie header in the data fork by default, so movies no longer need to be flattened in this old sense.</P></UL><P CLASS="Body-above"><A NAME="pgfId-7996"></A>Clicking the &quot;Make movie self-contained&quot; checkbox when you save a movie in QuickTime Player flattens the movie. Sometimes you want to make a movie self-contained without flattening it, which can be tricky.</P><P CLASS="Body"><A NAME="pgfId-7885"></A>Here's an example. Open any self-contained movie in QuickTime Player. Select All. Copy. Paste. Paste. Paste. Now when you play the movie, it repeats all the data three times. If you choose Save from the File menu, then look at the file size, you'll find that the movie file has grown by only a few bytes. That's because it makes three references to the same set of data. It's self-contained, but not flattened. </P><P CLASS="Body"><A NAME="pgfId-7896"></A>But if you choose Save As from the File menu to make a new copy of the movie, you'll see that you have two choices with dramatically different output sizes. Making the file self-contained triples its original size, while saving normally (allowing dependencies) uses only 1 Kbyte. Why the big difference?</P><TABLE BORDER="1"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="Hold"><A NAME="pgfId-20200"></A>&nbsp;</P><DIV><IMG SRC="special-12.gif"></DIV></TD></TR></TABLE><P CLASS="Body"><A NAME="pgfId-7889"></A>Since Save As creates a new file, your choice is to have no copies of the data (leaving the data in its original file) or to have three copies. Remember: QuickTime Player automatically flattens a movie when you choose &quot;Make movie self-contained.&quot; Movies created using Save As never contain internal references.</P><P CLASS="Body"><A NAME="pgfId-12182"></A>Why would you want to make a movie with internal references? So you could repeat some of the data several times, even hundreds of times, without making a large file. Making the file self-contained isn't necessary--you could have multiple references to data in an external file--but it's convenient to have everything in one place.</P><P CLASS="Body"><A NAME="pgfId-9009"></A>If you want to make a self-contained movie with internal references, start by creating a self-contained movie with at least one copy of everything you need. Edit the movie by copying and pasting within the movie, so you add only internal references, and save using the Save command, not the Save As command.</P><UL><P><B>Important</B>&nbsp;<A NAME="pgfId-12227"></A>When you choose Save from the File menu, the movie is always saved normally (allowing dependencies). Movies saved using the Save command do not always fast start on the Internet. A movie without the Fast Start feature must download completely before it can play.</P></UL><P CLASS="Body"><A NAME="pgfId-7904"></A>If you need to use internal references, use the Save command. If the movie must fast start on the Internet, use Save As. </P><P CLASS="Body"><A NAME="pgfId-12258"></A>There is no easy way to save a movie with internal references that is guaranteed to fast start. However, you can easily create a movie with internal references, save it using the Save command, then save a second version using Save As (allowing dependencies). The second version will be very small (typically 1 Kbyte). The second version is guaranteed to be a Fast Start movie and can play over the Web, but you need to keep both versions together--the second version depends on data in the first version. Save them in the same folder and upload them to your Web server together.</P><P CLASS="Body"><A NAME="pgfId-9638"></A>And that's probably more than you really wanted to know about flattening. But it will come in handy later. Trust me. <A NAME="marker-13715"></A></P></td> </tr> </table><hr>| <a href=special-17.html>Next</a> | <a href=special-15.html>Prev</a> | <a href=special.html>Top</a> |<hr>Copyright 2002 by Academic Press<hr><BR><BR> <font size=+1>				<A HREF="../QT4WebBook.htm">Home</A> | <A HREF="../updates.htm">Updates</A> | <A HREF="../corrections.htm">Corrections</A> | <A HREF="../faq.htm">FAQ</A> | <A HREF="../toc.htm">Table of Contents</A> | <A HREF="special.html">Sample Chapter</a>				</font></BODY></HTML>
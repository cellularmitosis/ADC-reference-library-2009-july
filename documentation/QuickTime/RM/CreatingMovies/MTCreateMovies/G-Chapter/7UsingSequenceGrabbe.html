<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Movie Creation Guide: Using Sequence Grabber Channel Components</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using Sequence Grabber Channel Components"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents" title="Using Sequence Grabber Channel Components"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../MovieCreation-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000501" target="_top">Movie Creation</a> &gt; <a href="../A-Intro/1Introduction.html#//apple_ref/doc/uid/TP40000906-IntroductiontoQuickTimeMovieCreationGuide-DontLinkElementID_142">QuickTime Movie Creation Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../F-Chapter/6SequenceGrabberChan.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../H-Chapter/8TextChannelComponen.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-SW1" title="Using Sequence Grabber Channel Components"></a>
<h1>Using Sequence Grabber Channel Components</h1>

<p>This chapter gives an overview of the services your channel component needs to provide. Your component will primarily be used to preview and record digital data. Your component must also make calls to application-defined callback functions if so directed. Finally, your component must provide utility functions that will perform default procedures for the application’s callback functions.</p>
<p>In response to application requests, sequence grabber components can use channel components in two ways: to preview digitized data for the user or to record captured data in a QuickTime movie. Applications can use previewing to allow the user to prepare to make a recording. Applications that use previewing can move directly from the preview operation to a record operation, without stopping the process.</p>
<p>The next two sections provide an overview of preview and record operations. A third section discusses the callback functions that are supported by some channel components.</p>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_94">Previewing</a>
				
			<br/>
			
        
			
			
				<a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_95">Configuring Sequence Grabber Channel Components</a>
				
			<br/>
			
        
			
			
				<a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_99">Controlling Sequence Grabber Channel Components</a>
				
			<br/>
			
        
			
			
				<a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_100">Recording</a>
				
			<br/>
			
        
			
			
				<a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_101">Working With Callback Functions</a>
				
			<br/>
			
        
			
			
				<a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_104">Working With Channel Devices</a>
				
			<br/>
			
        
			
			
				<a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_105">Utility Functions for Sequence Grabber Channel Components</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_94" title="Previewing"></a>
<h2><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-Previewing" title="Previewing"></a>Previewing</h2>
<p>Previewing captured data involves playing that data for the user as it is digitized. For video data, this means displaying the video images on the computer screen. For audio data, this means playing the sound through the computer’s sound system. The following paragraphs outline the steps the sequence grabber component follows to preview captured data.</p>
<ol class="ol">
<li class="li"><p>First, the sequence grab ber component opens a connection to your channel component, using the Component Manager’s <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenComponent" target="_top">OpenComponent</a></code> function. The sequence grabber component then calls your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGInitChannel" target="_top">SGInitChannel</a></code> function to initialize your component.</p></li>
<li class="li"><p>The sequence grabber component then configures your channel component for the preview operation. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetGWorld" target="_top">SGSetGWorld</a></code> function sets the graphics world in which the preview is to be displayed. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelUsage" target="_top">SGSetChannelUsage</a></code> function specifies that your channel is to be used for previewing. The application can then use the appropriate channel configuration functions to prepare your channel for the preview operation. For video channels, it uses the functions discussed in <span class="content_text"><a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforVideoChannelComponents">Configuration Functions for Video Channel Components</a></span>. For sound channels, the sequence grabber uses the functions discussed in <span class="content_text"><a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforSoundChannelComponents">Configuration Functions for Sound Channel Components</a></span>.</p></li>
<li class="li"><p>The sequence grabber component starts the preview operation by calling your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStartPreview" target="_top">SGStartPreview</a></code> function. The sequence grabber component then begins collecting data from all of the channels participating in the preview and plays that data appropriately. The sequence grabber component can pause and restart the preview by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGPause" target="_top">SGPause</a></code> function. The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStop" target="_top">SGStop</a></code> function to stop the preview. During the preview operation, the sequence grabber component calls your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGIdle" target="_top">SGIdle</a></code> function frequently, so that your channel can perform its operation.</p></li>
<li class="li"><p>When the application is done previewing, the sequence grabber component can start recording or close its connection to your component.</p></li>
</ol>
<p>The following functions allow sequence grabber components to control your channel component:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStartPreview" target="_top">SGStartPreview</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStartRecord" target="_top">SGStartRecord</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGIdle" target="_top">SGIdle</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGUpdate" target="_top">SGUpdate</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStop" target="_top">SGStop</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGWriteSamples" target="_top">SGWriteSamples</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGPause" target="_top">SGPause</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGPrepare" target="_top">SGPrepare</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGRelease" target="_top">SGRelease</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_95" title="Configuring Sequence Grabber Channel Components"></a>
<h2><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfiguringSequenceGrabberChannelComponents" title="Configuring Sequence Grabber Channel Components"></a>Configuring Sequence Grabber Channel Components</h2>
<p>This section discusses the functions that allow sequence grabber components to configure your channel component.</p>
<p>Sequence grabber components use a number of functions to establish the environment for grabbing or previewing digitized data. This section describes the channel component functions that allow the sequence grabber component to establish the environment for recording or previewing captured data.</p>
<p>The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGInitChannel" target="_top">SGInitChannel</a></code> function to initialize your channel prior to a record or preview operation.</p>
<p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetGWorld" target="_top">SGSetGWorld</a></code> function allows the sequence grabber component to assign a graphics world to your component.</p>
<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_96" title="Configuration Functions for All Channel Components"></a>
<h3><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforAllChannelComponents" title="Configuration Functions for All Channel Components"></a>Configuration Functions for All Channel Components</h3>
<p>Your channel is assigned to a sequence grabber component when the application calls the sequence grabber component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGNewChannel" target="_top">SGNewChannel</a></code> function, described in the chapter <span class="content_text"><a href="../D-Chapter/4SequenceGrabberComp.html#//apple_ref/doc/uid/TP40000906-SequenceGrabberComponentFunctions-SW1">Sequence Grabber Component Functions</a></span> in this document. The sequence grabber component must configure your channel before a preview or record operation. Your channel component must provide a number of functions that allow the sequence grabber to configure the characteristics of your channel. Several of these functions work on any channel component. This section discusses these general channel configuration functions.</p>
<p>In addition, channel components provide functions that are specific to the channel type. The sequence grabber component supplied by Apple uses two types of channel components: video channel components and sound channel components. See <span class="content_text"><a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforVideoChannelComponents">Configuration Functions for Video Channel Components</a></span> for information about the configuration functions that work only with video channels. See <span class="content_text"><a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforSoundChannelComponents">Configuration Functions for Sound Channel Components</a></span> for information about the configuration functions that work only with sound channels.</p>
<ul class="spaceabove">
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelUsage" target="_top">SGSetChannelUsage</a></code> function specifies how your channel is to be used. The sequence grabber component can restrict a channel to use during record or preview operations. In addition, this function allows the sequence grabber component to specify whether your channel plays during a record operation. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelUsage" target="_top">SGGetChannelUsage</a></code> function allows the sequence grabber component to determine a channel’s usage.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelInfo" target="_top">SGGetChannelInfo</a></code> function allows the sequence grabber component to determine some of the characteristics of your channel. For example, this function returns information indicating whether your channel has a visual or an audio representation.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelPlayFlags" target="_top">SGSetChannelPlayFlags</a></code> function lets the sequence grabber component influence the speed and quality with which your channel plays captured data. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelPlayFlags" target="_top">SGGetChannelPlayFlags</a></code> function allows the sequence grabber component to determine these flag settings.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelMaxFrames" target="_top">SGSetChannelMaxFrames</a></code> function establishes a limit on the number of frames that your channel component will capture from a channel.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelMaxFrames" target="_top">SGGetChannelMaxFrames</a></code> function enables the sequence grabber component to determine that limit.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelRefCon" target="_top">SGSetChannelRefCon</a></code> function allows the sequence grabber component to set the value of a reference constant that your component passes to its callback functions. See <span class="content_text"><a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-UsingCallbackFunctionsforVideoChannelComponents">Using Callback Functions for Video Channel Components</a></span> for information about the callback functions that are supported by video channels.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetDataRate" target="_top">SGGetDataRate</a></code> function allows the sequence grabber component to determine how many bytes of captured data your channel is collecting each second.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelSampleDescription" target="_top">SGGetChannelSampleDescription</a></code> function allows the sequence grabber to retrieve your channel’s sample description. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelTimeScale" target="_top">SGGetChannelTimeScale</a></code> function allows it to obtain your channel’s time scale.</p></li>
<li class="li"><p>The sequence grabber can modify or retrieve your channel’s clipping region by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelClip" target="_top">SGSetChannelClip</a></code> or <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelClip" target="_top">SGGetChannelClip</a></code> function, respectively. The sequence grabber can work with your channel’s transformation matrix by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelMatrix" target="_top">SGSetChannelMatrix</a></code> and <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelMatrix" target="_top">SGGetChannelMatrix</a></code> functions.</p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_97" title="Configuration Functions for Video Channel Components"></a>
<h3><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforVideoChannelComponents" title="Configuration Functions for Video Channel Components"></a>Configuration Functions for Video Channel Components</h3>
<p>Video channel components provide a number of functions that allow the sequence grabber to configure the channel’s video characteristics. This section describes these video channel configuration functions, which the sequence grabber component uses only with video channels:</p>
<ul class="spaceabove">
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelBounds" target="_top">SGSetChannelBounds</a></code> function allows the sequence grabber to set the display boundary rectangle for a video channel. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelBounds" target="_top">SGGetChannelBounds</a></code> function determines a channel’s boundary rectangle.</p></li>
<li class="li"><p>The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetSrcVideoBounds" target="_top">SGGetSrcVideoBounds</a></code> function to determine the coordinates of the source video boundary rectangle. This rectangle defines the size of the source video image being captured by a video channel. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetVideoRect" target="_top">SGSetVideoRect</a></code> function specifies a part of the source video boundary rectangle to be captured by the channel. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetVideoRect" target="_top">SGGetVideoRect</a></code> function retrieves this active source video rectangle.</p></li>
<li class="li"><p>Typically, video channel components use the Image Compression Manager to compress the video data they capture. The sequence grabber component can control many aspects of this image-compression process. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetVideoCompressorType" target="_top">SGSetVideoCompressorType</a></code> function specifies the type of image compressor to use. The sequence grabber can determine the type of image compressor currently in use by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetVideoCompressorType" target="_top">SGGetVideoCompressorType</a></code> function. The sequence grabber component can specify a particular image compressor and set many image-compression parameters by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetVideoCompressor" target="_top">SGSetVideoCompressor</a></code> function. The sequence grabber component can determine which image compressor is being used and its parameter settings by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetVideoCompressor" target="_top">SGGetVideoCompressor</a></code> function.</p></li>
<li class="li"><p>Video channel components typically work with a video digitizer component (see <span class="content_text"><a href="../I-Chapter/9AboutVideoDigitizer.html#//apple_ref/doc/uid/TP40000906-AboutVideoDigitizerComponents-SW1">About Video Digitizer Components</a></span> for a discussion of video digitizer components). Sequence grabber components provide functions that allow an application to work with a channel’s video digitizer component. Video channel components, in turn, must provide support for these functions. The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetVideoDigitizerComponent" target="_top">SGGetVideoDigitizerComponent</a></code> function to determine which video digitizer component is supplying data to your video channel component. The sequence grabber component sets a channel’s video digitizer component by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetVideoDigitizerComponent" target="_top">SGSetVideoDigitizerComponent</a></code> function. If an application changes any video digitizer settings by calling the video digitizer component directly, the sequence grabber component informs your video channel component by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGVideoDigitizerChanged" target="_top">SGVideoDigitizerChanged</a></code> function.</p></li>
<li class="li"><p>Some video source data may contain unacceptable levels of visual noise or artifacts. One technique for removing this noise is to capture the image and then reduce it in size. During the size reduction process, the noise can be filtered out. Some video channel components may provide functions that allow the sequence grabber component to filter the input video data. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetCompressBuffer" target="_top">SGSetCompressBuffer</a></code> function sets a filter buffer for a video channel. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetCompressBuffer" target="_top">SGGetCompressBuffer</a></code> function returns information about your filter buffer.</p></li>
<li class="li"><p>The sequence grabber can work with a video channel’s frame rate by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetFrameRate" target="_top">SGSetFrameRate</a></code> and <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetFrameRate" target="_top">SGGetFrameRate</a></code> functions. The sequence grabber can control whether your channel uses an offscreen buffer by calling your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetUseScreenBuffer" target="_top">SGSetUseScreenBuffer</a></code> and <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetUseScreenBuffer" target="_top">SGGetUseScreenBuffer</a></code> functions.</p></li>
<li class="li"><p>Your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGAlignChannelRect" target="_top">SGAlignChannelRect</a></code> function allows the sequence grabber to determine a channel’s optimum screen position.</p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_98" title="Configuration Functions for Sound Channel Components"></a>
<h3><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforSoundChannelComponents" title="Configuration Functions for Sound Channel Components"></a>Configuration Functions for Sound Channel Components</h3>
<p>Sound channel components provide a number of functions that allow sequence grabber components to configure the component’s sound channel. This section describes these sound channel configuration functions. The sequence grabber component uses these functions only with sound channels.</p>
<ul class="spaceabove">
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelVolume" target="_top">SGSetChannelVolume</a></code> function allows the sequence grabber component to control a channel’s sound volume. The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelVolume" target="_top">SGGetChannelVolume</a></code> function to determine a channel’s volume.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetSoundInputDriver" target="_top">SGSetSoundInputDriver</a></code> specifies a channel’s sound input device. The sequence grabber component can determine a channel’s sound input device by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetSoundInputDriver" target="_top">SGGetSoundInputDriver</a></code> function. If an application changes any attributes of the sound input device, the sequence grabber component notifies your sound component by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSoundInputDriverChanged" target="_top">SGSoundInputDriverChanged</a></code> function.</p></li>
<li class="li"><p>The sequence grabber component can control the amount of sound data your channel works with at one time by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetSoundRecordChunkSize" target="_top">SGSetSoundRecordChunkSize</a></code> function. The sequence grabber component can determine this value by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetSoundRecordChunkSize" target="_top">SGGetSoundRecordChunkSize</a></code> function.</p></li>
<li class="li"><p>The sequence grabber component controls the rate at which your sound channel samples the input data by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetSoundInputRate" target="_top">SGSetSoundInputRate</a></code> function. The sequence grabber component can determine the sample rate by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetSoundInputRate" target="_top">SGGetSoundInputRate</a></code> function.</p></li>
<li class="li"><p>The sequence grabber can control other sound input parameters by using your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetSoundInputParameters" target="_top">SGSetSoundInputParameters</a></code> and <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetSoundInputParameters" target="_top">SGGetSoundInputParameters</a></code> functions.</p></li>
</ul>


<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_99" title="Controlling Sequence Grabber Channel Components"></a>
<h2><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ControllingSequenceGrabberChannelComponents" title="Controlling Sequence Grabber Channel Components"></a>Controlling Sequence Grabber Channel Components</h2>
<p>Sequence grabber channel components must provide a full set of functions that allow the sequence grabber component to control the preview or record operation. The sequence grabber component can use these functions to start and stop the operation, to pause data collection, and to write captured data to a movie. This section describes these functions.</p>
<ul class="ul">
<li class="li"><p>The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStartPreview" target="_top">SGStartPreview</a></code> function to start a preview operation. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStartRecord" target="_top">SGStartRecord</a></code> function starts a record operation. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStop" target="_top">SGStop</a></code> function stops your channel component after a preview or record operation.</p></li>
<li class="li"><p>The sequence grabber component grants processing time to your channel component by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGIdle" target="_top">SGIdle</a></code> function. The sequence grabber notifies you of update events by calling your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGUpdate" target="_top">SGUpdate</a></code> function.</p></li>
<li class="li"><p>The sequence grabber pauses the current operation by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGPause" target="_top">SGPause</a></code> function.</p></li>
<li class="li"><p>The sequence grabber component calls your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGWriteSamples" target="_top">SGWriteSamples</a></code> function to write captured data to a movie file after a record operation.</p></li>
<li class="li"><p>The sequence grabber component prepares your channel component for an upcoming preview or record operation by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGPrepare" target="_top">SGPrepare</a></code> function. This function also allows the sequence grabber component to verify that your component can support the parameters an application has specified. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGRelease" target="_top">SGRelease</a></code> function releases system resources allocated during the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGPrepare" target="_top">SGPrepare</a></code> function.</p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_100" title="Recording"></a>
<h2><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-Recording" title="Recording"></a>Recording</h2>
<p>During a record operation, a sequence grabber component collects the data it captures and formats that data into a QuickTime movie. During a record operation, the sequence grabber component can also play the captured data for the user.</p>
<p>The following are the steps the sequence grabber component follows to record captured data.</p>
<ol class="ol">
<li class="li"><p>As with a preview operation, the sequence grabber component establishes a connection to your channel component by calling the Component Manager’s <code><a href="../../../../../Carbon/Reference/Component_Manager/Reference/reference.html#//apple_ref/c/func/OpenComponent" target="_top">OpenComponent</a></code> function. It then initializes your component by calling your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGInitChannel" target="_top">SGInitChannel</a></code> function.</p></li>
<li class="li"><p>The sequence grabber component then configures your component for the record operation. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetGWorld" target="_top">SGSetGWorld</a></code> function sets the graphics world in which the data is to be displayed. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelUsage" target="_top">SGSetChannelUsage</a></code> function specifies each channel that is to be used for recording. At this time, the sequence grabber component can also specify whether your component is to play its data while recording. The application can then use the appropriate channel configuration functions to prepare your channel for the record operation. For video channels, it uses the functions discussed in <span class="content_text"><a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforVideoChannelComponents">Configuration Functions for Video Channel Components</a></span>. For sound channels, the sequence grabber uses the functions discussed in <span class="content_text"><a href="7UsingSequenceGrabbe.html#//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-ConfigurationFunctionsforSoundChannelComponents">Configuration Functions for Sound Channel Components</a></span>.</p></li>
<li class="li"><p>The sequence grabber component starts the record operation by calling your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStartRecord" target="_top">SGStartRecord</a></code> function. The sequence grabber component then begins collecting data from the channels it has assigned, stores the data in a QuickTime movie, and, optionally, plays that data appropriately. The sequence grabber can pause and restart the record process by calling the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGPause" target="_top">SGPause</a></code> function. During the record operation, the sequence grabber component calls your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGIdle" target="_top">SGIdle</a></code> function frequently, so that your channel can perform its operation. The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGStop" target="_top">SGStop</a></code> function to stop the record operation. At this time, your component saves the movie in the appropriate movie file if the sequence grabber component instructs your component to do so by calling your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGWriteSamples" target="_top">SGWriteSamples</a></code> function.</p></li>
<li class="li"><p>When the application is done recording, it either returns to previewing or closes its connection to your component.</p></li>
</ol>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_101" title="Working With Callback Functions"></a>
<h2><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-WorkingWithCallbackFunctions" title="Working With Callback Functions"></a>Working With Callback Functions</h2>
<p>Sequence grabber components provide callback functions that allow application developers to customize some aspects of capturing video data. It is your channel component’s responsibility to call these callback functions at specified points in the data capture process. The application’s function can then perform any special processing that is appropriate for the application. For example, an application can overlay text, such as a frame number, on each frame of video data as it is captured.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_180" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
Sound channel components do not support any callback functions.   </p>
</div>
<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_102" title="Using Callback Functions for Video Channel Components"></a>
<h3><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-UsingCallbackFunctionsforVideoChannelComponents" title="Using Callback Functions for Video Channel Components"></a>Using Callback Functions for Video Channel Components</h3>
<p>Sequence grabber components allow application developers to define a number of callback functions in their applications. Your channel component calls these functions at specific points in the process of collecting, compressing, and displaying the source visual data. By defining callback functions, a developer can control the process more precisely or customize the operation of the sequence grabber component and its channel components.</p>
<p>For example, you could use a callback function to draw a frame number on each video frame as it is collected. In this case, you could use either a compress callback function or a grab-complete callback function. You call the compress function after each frame is collected, in order to compress the frame. You call the grab-complete function just before the compress function or as soon as the frame has been captured.</p>
<p>Note that your channel component need not call each and every callback function. If some functions are inappropriate to the operation of your channel, do not call them. However, if your component calls one function of a pair, be sure to call the other. For example, if your component calls an application’s grab function, you must also call its grab-complete function.</p>
<p>The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetVideoBottlenecks" target="_top">SGSetVideoBottlenecks</a></code> function to assign callback functions to your video channel. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetVideoBottlenecks" target="_top">SGGetVideoBottlenecks</a></code> function allows the sequence grabber to determine the callback functions that have been assigned to your video channel. See the chapter <span class="content_text"><a href="../D-Chapter/4SequenceGrabberComp.html#//apple_ref/doc/uid/TP40000906-SequenceGrabberComponentFunctions-SW1">Sequence Grabber Component Functions</a></span> in this document for details on <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetVideoBottlenecks" target="_top">SGSetVideoBottlenecks</a></code> and <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetVideoBottlenecks" target="_top">SGGetVideoBottlenecks</a></code>.</p>
<p>The following application-defined functions are supported by video channels and are described in <span class="content_text"><a href="../D-Chapter/4SequenceGrabberComp.html#//apple_ref/doc/uid/TP40000906-SequenceGrabberComponentFunctions-ApplicationDefinedFunctions">Application-Defined Functions</a></span>.</p>
<ul class="spaceabove">
<li class="li"><p><code>MyAddFrameFunction</code></p></li>
<li class="li"><p><code>MyGrabCompressCompleteFunction</code></p></li>
<li class="li"><p><code>MyCompressCompleteFunction</code></p></li>
<li class="li"><p><code>MyGrabFunction</code></p></li>
<li class="li"><p><code>MyCompressFunction</code></p></li>
<li class="li"><p><code>MyTransferFrameFunction</code></p></li>
<li class="li"><p><code>MyDisplayFunction</code></p></li>
<li class="li"><p><code>MyGrabCompleteFunction</code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_103" title="Using Utility Functions for Video Channel Component Callback Functions"></a>
<h3><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-UsingUtilityFunctionsforVideoChannelComponentCallbackFunctions" title="Using Utility Functions for Video Channel Component Callback Functions"></a>Using Utility Functions for Video Channel Component Callback Functions</h3>
<p>Sequence grabber components provide a number of functions that application-defined functions can use. Several channel functions support those sequence grabber component functions.</p>
<p>The sequence grabber component uses the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetBufferInfo" target="_top">SGGetBufferInfo</a></code> function to obtain information about a buffer that contains data to be manipulated by a callback function. Application callback functions can use the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetBufferInfo" target="_top">SGGetBufferInfo</a></code> function to obtain information about a buffer that you have passed. This information is valid only during record operations, or after your channel has been prepared to record. The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetBufferInfo" target="_top">SGGetBufferInfo</a></code> function is described in the chapter <span class="content_text"><a href="../D-Chapter/4SequenceGrabberComp.html#//apple_ref/doc/uid/TP40000906-SequenceGrabberComponentFunctions-SW1">Sequence Grabber Component Functions</a></span>.</p>
<p>The following functions provide default behavior for application-defined grab, grab-complete, display, compress, compress-complete, add-frame, transfer-frame, display-compress, and grab-compress-complete functions:</p>
<ul class="spaceabove">
<li class="li"><p>Your video channel component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGrabFrame" target="_top">SGGrabFrame</a></code> function provides the default behavior for an application’s grab function. Applications should call this function only from their grab function.</p></li>
<li class="li"><p>Your channel component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGrabFrameComplete" target="_top">SGGrabFrameComplete</a></code> function provides the default behavior for an application’s grab-complete function. Applications should call this function only from their grab-complete functions.</p></li>
<li class="li"><p>Your channel component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGDisplayFrame" target="_top">SGDisplayFrame</a></code> function provides the default behavior for an application’s display function. Applications should call this function only from their display functions.</p></li>
<li class="li"><p>Your video channel component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGCompressFrame" target="_top">SGCompressFrame</a></code> function provides the default behavior for an application’s compress function. Applications should call this function only from their compress functions.</p></li>
<li class="li"><p>Your channel component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGCompressFrameComplete" target="_top">SGCompressFrameComplete</a></code> function provides the default behavior for an application’s compress-complete function. Applications should call this function only from their compress-complete functions.</p></li>
<li class="li"><p>Your component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGAddFrame" target="_top">SGAddFrame</a></code> function provides the default behavior for an application’s add-frame function. Applications should call this function only from their add-frame functions.</p></li>
<li class="li"><p>Your component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGTransferFrameForCompress" target="_top">SGTransferFrameForCompress</a></code> function provides the default behavior for an application’s transfer-frame function. Applications should call this function only from their transfer-frame functions.</p></li>
<li class="li"><p>Your component’s <code><a href="../../../../QT6WhatsNew/Chap1/QT6WhatsNew.html#//apple_ref/c/func/SGGrabCompressComplete" target="_top">SGGrabCompressComplete</a></code> function provides the default behavior for an application’s grab-compress-complete function. Applications should call this function only from their grab-compress-complete function.</p></li>
<li class="li"><p>Your component’s <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGDisplayCompress" target="_top">SGDisplayCompress</a></code> function provides the default behavior for an application’s display-compress function. Applications should call this function only from their display-compress function.</p></li>
</ul>


<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_104" title="Working With Channel Devices"></a>
<h2><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-WorkingWithChannelDevices" title="Working With Channel Devices"></a>Working With Channel Devices</h2>
<p>Sequence grabbers provide a number of functions that allow applications to determine the devices that can be, or the device that is, attached to a given sequence grabber channel. These devices, in turn, allow the channel component to control the digitizing equipment. For example, video channels use video digitizer components, and sound channels use sound input drivers. Applications can use these functions to present a list of available devices to the user, allowing the user to select a specific device for each channel. The sequence grabber passes these functions on to your channel component.</p>
<p>The sequence grabber may use the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelDeviceList" target="_top">SGGetChannelDeviceList</a></code> function to retrieve a list of devices that may be used by your channel.</p>
<p>The sequence grabber can use the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSetChannelDevice" target="_top">SGSetChannelDevice</a></code> function to assign a device to your channel.</p>
<p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelDeviceList" target="_top">SGGetChannelDeviceList</a></code> function uses a device list structure to pass information about one or more channel devices. The <code><!--a target="_top" -->SGDeviceListRecord<!--/a--></code> data type defines the format of the device list structure.</p>

<div class="codesample"><table><tr><td scope="row"><pre>typedef struct SGDeviceListRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    short               count;                  /* count of devices */<span></span></pre></td></tr><tr><td scope="row"><pre>    short               selectedIndex;          /* current device */<span></span></pre></td></tr><tr><td scope="row"><pre>    long                reserved;               /* set to 0 */<span></span></pre></td></tr><tr><td scope="row"><pre>    SGDeviceName        entry[1];               /* device names */<span></span></pre></td></tr><tr><td scope="row"><pre>} SGDeviceListRecord, *SGDeviceListPtr, **SGDeviceList;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>count</code></p></td>
<td ><p>Indicates the number of devices described by this structure. The value of this field corresponds to the number of entries in the device name array defined by the <code>entry</code> field.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>selectedIndex</code></p></td>
<td ><p>Identifies the currently active device. The value of this field corresponds to the appropriate entry in the device name array defined by the <code>entry</code> field. Note that this value is 0-relative; that is, the first entry has an index number of 0, the second's value is 1, and so on.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>reserved</code></p></td>
<td ><p>Reserved for Apple. Always set to 0.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>entry</code></p></td>
<td ><p>Contains an array of device name structures. Each structure corresponds to one valid device. The <code>count</code> field indicates the number of entries in this array. The <code>SGDeviceName</code> data type defines the format of a device name structure; this data type is discussed next.</p></td>
</tr>

</table></div>
<p>Device list structures contain an array of device name structures. Each device name structure identifies a single device that may be used by the channel. The <code><!--a target="_top" -->SGDeviceName<!--/a--></code> data type defines the format of a device name structure.</p>

<div class="codesample"><table><tr><td scope="row"><pre>typedef struct SGDeviceName {<span></span></pre></td></tr><tr><td scope="row"><pre>    Str63           name;                   /* device name */<span></span></pre></td></tr><tr><td scope="row"><pre>    Handle          icon;                   /* device icon */<span></span></pre></td></tr><tr><td scope="row"><pre>    long            flags;                  /* flags */<span></span></pre></td></tr><tr><td scope="row"><pre>    long            refCon;                 /* set to 0 */<span></span></pre></td></tr><tr><td scope="row"><pre>    long            reserved;               /* set to 0 */<span></span></pre></td></tr><tr><td scope="row"><pre>} SGDeviceName;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Parameter</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>name</code></p></td>
<td ><p>Contains the name of the device. For video digitizer components, this field contains the component's name as specified in the component resource. For sound input drivers, this field contains the driver name.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>icon</code></p></td>
<td ><p>Contains a handle to the device's icon. Some devices may support an icon, which applications may choose to present to the user. If the device does not support an icon, or if the sequence grabber chooses not to retrieve this information (by setting the <code>sgDeviceListWithIcons</code> flag to 0 when it calls the <code>SGGetChannelDeviceList</code> function), set this field to <code>nil.</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>flags</code></p></td>
<td ><p>Reflects the current status of the device. The <code>sgDeviceNameFlagDeviceUnavailable</code> flag is defined. When set to 1, this flag indicates that this device is not currently available.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>refCon</code></p></td>
<td ><p>Reserved for Apple. Always set to 0.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>reserved</code></p></td>
<td ><p>Reserved for Apple. Always set to 0.</p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-DontLinkElementID_105" title="Utility Functions for Sequence Grabber Channel Components"></a>
<h2><a name="//apple_ref/doc/uid/TP40000906-UsingSequenceGrabberChannelComponents-UtilityFunctionsforSequenceGrabberChannelComponents" title="Utility Functions for Sequence Grabber Channel Components"></a>Utility Functions for Sequence Grabber Channel Components</h2>
<p>This section describes several utility functions that sequence grabber components provide to sequence grabber channel components.</p>
<ul class="ul">
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGAddMovieData" target="_top">SGAddMovieData</a></code> function lets you add data and sample references to a movie.</p></li>
<li class="li"><p>Alternatively, you can use the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGWriteMovieData" target="_top">SGWriteMovieData</a></code> function to add data to a movie, and the <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGAddFrameReference" target="_top">SGAddFrameReference</a></code> and <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetNextFrameReference" target="_top">SGGetNextFrameReference</a></code> functions to keep track of sample references prior to creating a QuickTime movie from recorded data.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGSortDeviceList" target="_top">SGSortDeviceList</a></code> function allows you to sort the entries in the device list that you create for the sequence grabber when it calls your <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetChannelDeviceList" target="_top">SGGetChannelDeviceList</a></code> function.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGChangedSource" target="_top">SGChangedSource</a></code> function allows you to tell the sequence grabber that you have changed your source device.</p></li>
<li class="li"><p>The <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGAddFrameReference" target="_top">SGAddFrameReference</a></code> and <code><a href="../../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/c/func/SGGetNextFrameReference" target="_top">SGGetNextFrameReference</a></code> functions take a pointer to a frame information structure as a parameter. The <code><!--a target="_top" -->SeqGrabFrameInfo<!--/a--></code> data type defines the format of a frame information structure.</p></li>
</ul>

<div class="codesample"><table><tr><td scope="row"><pre>struct SeqGrabFrameInfo {<span></span></pre></td></tr><tr><td scope="row"><pre>    long            frameOffset;        /* offset to the sample */<span></span></pre></td></tr><tr><td scope="row"><pre>    long            frameTime;          /* time that frame was captured */<span></span></pre></td></tr><tr><td scope="row"><pre>    long            frameSize;          /* number of bytes in sample */<span></span></pre></td></tr><tr><td scope="row"><pre>    SGChannel       frameChannel;       /* current connection to channel */<span></span></pre></td></tr><tr><td scope="row"><pre>    long            frameRefCon;        /* reference constant for channel */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>frameOffset</code></p></td>
<td ><p>Specifies the offset to the sample. Your channel component obtains this value from the <code>SGWriteMovieData</code> function.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>frameTime</code></p></td>
<td ><p>Specifies the time at which your channel component captured the frame. This time value is relative to the data sequence. That is, this time is not represented in the context of any fixed time scale. Rather, your channel component must choose and use a time scale consistently for all sample references.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>frameSize</code></p></td>
<td ><p>Specifies the number of bytes in the sample described by the sample reference.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>frameChannel</code></p></td>
<td ><p>Identifies the current connection to your channel.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>frameRefCon</code></p></td>
<td ><p>Contains a reference constant for use by your channel component. You can use this value in any way that is appropriate for your channel component. For example, video channel components may use this value to store a reference to frame differencing information for a temporally compressed image sequence.</p></td>
</tr>

</table></div>




        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../F-Chapter/6SequenceGrabberChan.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../H-Chapter/8TextChannelComponen.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-01-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/RM/CreatingMovies/MTCreateMovies/G-Chapter/7UsingSequenceGrabbe.html%3Fid%3DTP40000906-3.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/RM/CreatingMovies/MTCreateMovies/G-Chapter/7UsingSequenceGrabbe.html%3Fid%3DTP40000906-3.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/RM/CreatingMovies/MTCreateMovies/G-Chapter/7UsingSequenceGrabbe.html%3Fid%3DTP40000906-3.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
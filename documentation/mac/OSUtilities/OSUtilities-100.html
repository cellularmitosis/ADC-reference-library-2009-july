<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Long Date-Time Record (IM: U)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING100></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="OSUtilities-99.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="OSUtilities-101.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="OSUtilities-2.html"><B>Operating System Utilities</B></A> / <BR><DD><A HREF="OSUtilities-93.html"><B>Chapter 4 - Date, Time, and Measurement Utilities</B></A> / <A HREF="OSUtilities-96.html"><B>Date, Time, and Measurement Utilities Reference</B></A><BR><DL><DD><A HREF="OSUtilities-97.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING100-0></A>
<H3><A NAME=MARKER-9-92></A><A NAME=MARKER-2-93></A><A NAME=MARKER-2-18></A>The Long Date-Time Record</H3>
 In addition to the date-time record, system software provides the long date-time record, which extends the date-time record format by adding several more fields. This format lets you use dates and times with a much longer span (30,000 B.C. to 30,000 A.D.). In addition, the long date-time record allows conversions to different calendar systems, such as a lunar calendar. <P>
 The <CODE>LongDateRec</CODE> data type defines the format of the long date-time record.<P>
<PRE>
TYPE LongDateRec =
RECORD
   CASE Integer OF
   0:
      (era:          Integer;    {era}
       year:         Integer;    {year, from 30,081 B.C. }
                                 { to 29,940 A.D.}
       month:        Integer;    {month}
       day:          Integer;    {day of the month}
       hour:         Integer;    {hour, from 0 to 23}
       minute:       Integer;    {minute, from 0 to 59}
       second:       Integer;    {second, from 0 to 59}
       dayOfWeek:    Integer;    {day of the week}
       dayOfYear:    Integer;    {day of the year}
       weekOfYear:   Integer;    {week of the year}
       pm:           Integer;    {morning/evening}
       res1:         Integer;    {reserved}
       res2:         Integer;    {reserved}
       res3:         Integer);   {reserved}
   1:
                                 {index by LongDateField}
      (list:         ARRAY[0..13] OF Integer);
   2:
      (eraAlt:       Integer;       {era}
      oldDate:       DateTimeRec);  {date-time record}
END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>era</CODE>
<DD> <A NAME=MARKER-2-95></A>The era, where 0 represents A.D., and -1 represents B.C.
<DT><CODE>year</CODE>
<DD> The year, ranging from 30,081 B.C. to 29,940 A.D. Values outside this range produce unpredictable results in all fields of the record. Note that to indicate the year 1984, this field would store the integer 1984, not just 84. This field accepts input of 0 or negative values, but these values return the positive result of the value plus one for the year. For example, a <CODE>year</CODE> value of 0 returns 1, and a <CODE>year</CODE> value of -1993 returns 1994. Other fields are unaffected.
<DT><CODE>month</CODE>
<DD> The month of the year, where 1 represents January, and 12 represents December. When you use the <CODE>LongSecondsToDate</CODE> and <CODE>LongDateToSeconds</CODE> procedures, <CODE>month</CODE> values greater than 12 cause a wraparound to a future year and month. A value of 0 in this field returns the 12th month of the previous year. For example, a <CODE>month</CODE> value of 0 and a <CODE>year</CODE> value of 1993 return 12 and 1992, respectively. A negative value in this field has the effect of subtracting that number from the first month of the given year. For example, a <CODE>month</CODE> value of -2 and a <CODE>year</CODE> value of 1993 return 10 and 1992, respectively.
<DT><CODE>day</CODE>
<DD> The day of the month, ranging from 1 to 31. When using the <CODE>LongSecondsToDate</CODE> and <CODE>LongDateToSeconds</CODE> procedures, <CODE>day</CODE> values greater than the number of days in a given month cause a wraparound to a future month and day. This feature is useful for working with leap years. For example, the 366th day of January in 1992 (1992 was a leap year) evaluates as December 31, 1992, and the 367th day of that year evaluates as January 1, 1993. A value of 0 in this field produces unpredictable results in the <CODE>month</CODE> and <CODE>day</CODE> fields. A negative value in this field has the effect of subtracting that number from the first day of the given month. For example, a <CODE>day</CODE> value of -10 and a <CODE>month</CODE> value of 10 return 9 and 20, respectively.
<DT><CODE>hour</CODE>
<DD> The hour of the day, ranging from 0 to 23, where 0 represents midnight and 23 represents 11:00 P.M. When you use the <CODE>LongSecondsToDate</CODE> and <CODE>LongDateToSeconds</CODE> procedures, <CODE>hour</CODE> values greater than 23 cause a wraparound to a future day and hour. A negative value in this field produces unpredictable results. Note that this field is always maintained in 24-hour time. The <CODE>pm</CODE> field, if used, is redundant.
<DT><CODE>minute</CODE>
<DD> The minute of the hour, ranging from 0 to 59. When you use the <CODE>LongSecondsToDate</CODE> and <CODE>LongDateToSeconds</CODE> procedures, <CODE>minute</CODE> values greater than 59 cause a wraparound to a future hour and minute. A negative value in this field has the effect of subtracting that number from the first minute of the given hour. For example, an <CODE>hour</CODE> value of 10 and a <CODE>minute</CODE> value of -10 return 9 and 50, respectively. However, if the negative value causes the <CODE>hour</CODE> value to become less than 0, for example <CODE>hour</CODE> = 0 and <CODE>minute</CODE> = -61, unpredictable results occur. 
<DT><CODE>second</CODE>
<DD> The second of the minute, ranging from 0 to 59. When you use the <CODE>LongSecondsToDate</CODE> and <CODE>LongDateToSeconds</CODE> procedures, <CODE>second</CODE> values greater than 59 cause a wraparound to a future minute and second. A negative value in this field has the effect of subtracting that number from the first second of the given minute. For example, an <CODE>minute</CODE> value of 10 and a <CODE>second</CODE> value of -10 return 9 and 50, respectively. However, if the negative value causes the <CODE>hour</CODE> value to become less than 0, for example <CODE>hour</CODE> = 0, <CODE>minute</CODE> = 0, and <CODE>second</CODE> = -61, unpredictable results occur.
<DT><CODE>dayOfWeek</CODE>
<DD> The day number of the week, where 1 indicates Sunday and 7 indicates Saturday. This field accepts 0, negative values, or values greater than 7. When you use the <CODE>LongSecondsToDate</CODE> and <CODE>LongDateToSeconds</CODE> procedures, you get correct values because this field is automatically calculated from the values in the <CODE>year</CODE>, <CODE>month</CODE>, and <CODE>day</CODE> fields. For calendars that have more than 7 day names and 12 month names (for example, the Jewish calendar sometimes has 13 months), you use the <CODE>'itl1'</CODE> resource, defined by the <CODE>Itl1ExtRec</CODE> data type. To get more information on the format of the <CODE>'itl1'</CODE> resource, see the appendix "International Resources" in <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I>.
<DT><CODE>dayOfYear</CODE>
<DD> The day number of the year, ranging from 1 to 366. Values greater than the number of days in a given year cause a wraparound to a future year and day. This feature is useful for working with leap years. For example, in a Gregorian calendar the 366th day of January in 1992 (1992 was a leap year) evaluates as December 31, 1992, and the 367th day of that year evaluates as January 1, 1993. 
<DT><CODE>weekOfYear</CODE>
<DD> The week number of the year, ranging from 1 to 52. Note that out-of-range values (such as 0, negative numbers, or numbers greater than 52) can be set for this field. However, you can use the <CODE>LongSecondsToDate</CODE> procedure to convert these out-of-range values to appropriate values.
<DT><CODE>pm</CODE>
<DD> The morning or evening half of the 24-hour day cycle, where 0 represents the morning (for example, A.M.), and 1 represents the evening (for example, P.M.). Note that out-of-range values can be set for this field. However, you can use the <CODE>LongSecondsToDate</CODE> procedure to convert these out-of-range values to appropriate values.
<DT><CODE>res1</CODE>
<DD> Reserved. Set this field to 0.
<DT><CODE>res2</CODE>
<DD> Reserved. Set this field to 0.
<DT><CODE>res3</CODE>
<DD> Reserved. Set this field to 0.
<DT><CODE>list</CODE>
<DD> An array of <CODE>LongDateField</CODE> values. The <CODE>field</CODE> parameter of the <CODE>ToggleDate</CODE> function uses the enumerated data type <CODE>LongDateField</CODE> to indicate the <CODE>LongDateRec</CODE> fields that the <CODE>ValidDate</CODE> function should check. The following values are available:<BR><CODE>TYPE LongDateField = <BR>                 (eraField, yearField, monthField, dayField,<BR>      hourField, minuteField, secondField,<BR>      dayOfWeekField, dayOfYearField,<BR>      weekOfYearField, pmField, res1Field,<BR>      res2Field, res3Field);</CODE>
<DT><CODE>eraAlt</CODE>
<DD> The era, where 0 represents A.D., and -1 represents B.C. Use this field and the <CODE>oldDate</CODE> field to convert from a date-time record.
<DT><CODE>oldDate</CODE>
<DD> The date-time record to convert. Use this field and the <CODE>eraAlt</CODE> field to convert from a date-time record.<A NAME=MARKER-2-19></A><A NAME=MARKER-2-97></A>
</DL>



</BLOCKQUOTE>
<HR>
<center>
<A HREF="OSUtilities-99.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="OSUtilities-101.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="OSUtilities-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<html><head><title>Mac OS X
 Manual Page For Tk_InitImageArgs(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tk_InitImageArgs" title="Mac OS X
 Manual Page for Tk_InitImageArgs(3tcl)"><a name="//apple_ref/doc/man/3/Tk_InitImageArgs" title="Mac OS X
 Manual Page for Tk_InitImageArgs(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tk_InitImageArgs"; name=Tk_InitImageArgs(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tk_CreateImageType(3)                       Tk Library Procedures                      <a href="Tk_CreateImageType.3tcl.html#//apple_ref/doc/man/3/Tk_CreateImageType">Tk_CreateImageType(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tk_CreateImageType, Tk_GetImageMasterData, Tk_InitImageArgs - define new kind of image

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       <b>Tk_CreateImageType</b>(<u>typePtr</u>)

       ClientData                                                                                            |
       <b>Tk_GetImageMasterData</b>(<u>interp,</u> <u>name,</u> <u>typePtrPtr</u>)                                                       |

       <b>Tk_InitImageArgs</b>(<u>interp,</u> <u>argc,</u> <u>argvPtr</u>)                                                               |

<b>ARGUMENTS</b>                                                                                                    |
       Tk_ImageType   <u>*type-</u>                                                                                 |
       <u>Ptr</u>      (in)                                                                     |                   |
                                              Structure that defines the new type of image.  Must be static: |
                                              a pointer to this structure is retained by the image code.     |

       Tcl_Interp     <u>*interp</u>       (in)                                                                     ||
                                              Interpreter in which image was created.                        |

       CONST                                                                                                 |
       char     <u>*name</u>         (in)                                                                     |     |
                                              Name of existing image.                                        |

       Tk_ImageType   <u>**typeP-</u>                                                                               |
       <u>trPtr</u>  (out)                                                                    |                     |
                                              Points to word in which to store a pointer to type information |
                                              for the given image, if it exists.                             |

       int            <u>argc</u>          (in)                                                                     ||
                                              Number of arguments                                            |

       char           <u>***argvPtr</u>    (in/out)                                                                 ||
                                              Pointer to argument list
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       <b>Tk_CreateImageType</b> is invoked to define a new kind of image.  An image type corresponds to a particu-<font color="#ffffff" class="whiteout">lar&nbsp;particular</font>
       lar value of the <u>type</u> argument for the <b>image</b> <b>create</b> command.  There may exist any number of different
       image  types,  and  new types may be defined dynamically by calling <b>Tk_CreateImageType</b>.  For example,
       there might be one type for 2-color bitmaps, another for multi-color  images,  another  for  dithered
       images, another for video, and so on.

       The code that implements a new image type is called an <u>image</u> <u>manager</u>.  It consists of a collection of
       procedures plus three different kinds of data structures.  The first data structure is a Tk_ImageType
       structure,  which contains the name of the image type and pointers to five procedures provided by the
       image manager to deal with images of this type:
              typedef struct Tk_ImageType {
                char *<u>name</u>;
                Tk_ImageCreateProc *<u>createProc</u>;
                Tk_ImageGetProc *<u>getProc</u>;
                Tk_ImageDisplayProc *<u>displayProc</u>;
                Tk_ImageFreeProc *<u>freeProc</u>;
                Tk_ImageDeleteProc *<u>deleteProc</u>;
              } Tk_ImageType;
       The fields of this structure will be described in later subsections of this entry.

       The second major data structure manipulated by an image manager is called an <u>image</u> <u>master</u>;   it  con-<font color="#ffffff" class="whiteout">tains&nbsp;contains</font>
       tains  overall  information about a particular image, such as the values of the configuration options
       specified in an <b>image</b> <b>create</b> command.  There will usually be one of these structures for each invoca-<font color="#ffffff" class="whiteout">tion&nbsp;invocation</font>
       tion of the <b>image</b> <b>create</b> command.

       The  third data structure related to images is an <u>image</u> <u>instance</u>.  There will usually be one of these
       structures for each usage of an image in a particular widget.  It is possible for a single  image  to
       appear  simultaneously  in multiple widgets, or even multiple times in the same widget.  Furthermore,
       different instances may be on different screens or  displays.   The  image  instance  data  structure
       describes  things  that  may vary from instance to instance, such as colors and graphics contexts for
       redisplay.  There is usually one instance structure for each <b>-image</b> option specified for a widget  or
       canvas item.

       The following subsections describe the fields of a Tk_ImageType in more detail.


<b>NAME</b>
       <u>typePtr-&gt;name</u>  provides a name for the image type.  Once <b>Tk_CreateImageType</b> returns, this name may be
       used in <b>image</b> <b>create</b> commands to create images of the new type.  If there already  existed  an  image
       type by this name then the new image type replaces the old one.


<b>PORTABILITY</b>
       In  Tk  8.2  and  earlier,  the createProc below had a different signature. If you want to compile an
       image type using the old interface which should still run on all Tcl/Tk versions, compile it with the
       flag  -DUSE_OLD_IMAGE.  Further  on, if you are using Stubs, you need to call the function Tk_InitIm-<font color="#ffffff" class="whiteout">ageArgs(interp,&nbsp;Tk_InitImageArgs(interp,</font>
       ageArgs(interp, argc, &amp;argv) first in your createProc. See below for a description of this  function.


<b>CREATEPROC</b>
       <u>typePtr-&gt;createProc</u>  provides  the  address  of  a  procedure for Tk to call whenever <b>image</b> <b>create</b> is
       invoked to create an image of the new type.  <u>typePtr-&gt;createProc</u> must match the following prototype:
              typedef int Tk_ImageCreateProc(
                Tcl_Interp *<u>interp</u>,
                char *<u>name</u>,
                int <u>objc</u>,
                Tcl_Obj *CONST <u>objv</u>[],
                Tk_ImageType *<u>typePtr</u>,
                Tk_ImageMaster <u>master</u>,
                ClientData *<u>masterDataPtr</u>);
       The <u>interp</u> argument is the interpreter in which the <b>image</b> command was invoked, and <u>name</u> is  the  name
       for  the new image, which was either specified explicitly in the <b>image</b> command or generated automati-<font color="#ffffff" class="whiteout">cally&nbsp;automatically</font>
       cally by the <b>image</b> command.  The <u>objc</u> and <u>objv</u> arguments describe all the configuration  options  for
       the  new  image  (everything  after the name argument to <b>image</b>).  The <u>master</u> argument is a token that
       refers to Tk's information about this image;  the image manager must return this  token  to  Tk  when
       invoking  the <b>Tk_ImageChanged</b> procedure.  Typically <u>createProc</u> will parse <u>objc</u> and <u>objv</u> and create an
       image master data structure for the new image.  <u>createProc</u> may store an arbitrary one-word  value  at
       *<u>masterDataPtr</u>,  which  will  be  passed  back to the image manager when other callbacks are invoked.
       Typically the value is a pointer to the master data structure for the image.

       If <u>createProc</u> encounters an error, it should leave an error  message  in  <u>interp-&gt;result</u>  and  return
       <b>TCL_ERROR</b>;  otherwise it should return <b>TCL_OK</b>.

       <u>createProc</u>  should  call <b>Tk_ImageChanged</b> in order to set the size of the image and request an initial
       redisplay.


<b>GETPROC</b>
       <u>typePtr-&gt;getProc</u> is invoked by Tk whenever a widget calls <b>Tk_GetImage</b>  to  use  a  particular  image.
       This procedure must match the following prototype:
              typedef ClientData Tk_ImageGetProc(
                Tk_Window <u>tkwin</u>,
                ClientData <u>masterData</u>);
       The  <u>tkwin</u> argument identifies the window in which the image will be used and <u>masterData</u> is the value
       returned by <u>createProc</u> when the image master was created.  <u>getProc</u> will usually create a data  struc-<font color="#ffffff" class="whiteout">ture&nbsp;structure</font>
       ture  for the new instance, including such things as the resources needed to display the image in the
       given window.  <u>getProc</u> returns a one-word token for the instance, which is typically the  address  of
       the  instance  data  structure.   Tk will pass this value back to the image manager when invoking its
       <u>displayProc</u> and <u>freeProc</u> procedures.


<b>DISPLAYPROC</b>
       <u>typePtr-&gt;displayProc</u> is invoked by Tk whenever an image needs to be displayed (i.e., whenever a  wid-<font color="#ffffff" class="whiteout">get&nbsp;widget</font>
       get calls <b>Tk_RedrawImage</b>).  <u>displayProc</u> must match the following prototype:
              typedef void Tk_ImageDisplayProc(
                ClientData <u>instanceData</u>,
                Display *<u>display</u>,
                Drawable <u>drawable</u>,
                int <u>imageX</u>,
                int <u>imageY</u>,
                int <u>width</u>,
                int <u>height</u>,
                int <u>drawableX</u>,
                int <u>drawableY</u>);
       The  <u>instanceData</u>  will  be  the same as the value returned by <u>getProc</u> when the instance was created.
       <u>display</u> and <u>drawable</u> indicate where to display the image;  <u>drawable</u> may be a pixmap rather  than  the
       window  specified to <u>getProc</u> (this is usually the case, since most widgets double-buffer their redis-<font color="#ffffff" class="whiteout">play&nbsp;redisplay</font>
       play to get smoother visual effects).  <u>imageX</u>, <u>imageY</u>, <u>width</u>, and <u>height</u> identify the region  of  the
       image that must be redisplayed.  This region will always be within the size of the image as specified
       in the most recent call to <b>Tk_ImageChanged</b>.  <u>drawableX</u> and <u>drawableY</u> indicate where in  <u>drawable</u>  the
       image  should  be  displayed;  <u>displayProc</u> should display the given region of the image so that point
       (<u>imageX</u>, <u>imageY</u>) in the image appears at (<u>drawableX</u>, <u>drawableY</u>) in <u>drawable</u>.


<b>FREEPROC</b>
       <u>typePtr-&gt;freeProc</u> contains the address of a procedure that Tk will invoke when an image  instance  is
       released  (i.e.,  when  <b>Tk_FreeImage</b>  is  invoked).   This  can happen, for example, when a widget is
       deleted or a image item in a canvas is deleted, or when the image displayed in  a  widget  or  canvas
       item is changed.  <u>freeProc</u> must match the following prototype:
              typedef void Tk_ImageFreeProc(
                ClientData <u>instanceData</u>,
                Display *<u>display</u>);
       The <u>instanceData</u> will be the same as the value returned by <u>getProc</u> when the instance was created, and
       <u>display</u> is the display containing the window for the instance.  <u>freeProc</u> should release any resources
       associated with the image instance, since the instance will never be used again.


<b>DELETEPROC</b>
       <u>typePtr-&gt;deleteProc</u>  is  a  procedure  that  Tk invokes when an image is being deleted (i.e. when the
       <b>image</b> <b>delete</b> command is invoked).  Before invoking <u>deleteProc</u> Tk will invoke <u>freeProc</u> for each of the
       image's instances.  <u>deleteProc</u> must match the following prototype:
              typedef void Tk_ImageDeleteProc(
                ClientData <u>masterData</u>);
       The <u>masterData</u> argument will be the same as the value stored in <u>*masterDataPtr</u> by <u>createProc</u> when the
       image was created.  <u>deleteProc</u> should release any resources associated with the image.


<b>TK_GETIMAGEMASTERDATA</b>
       The procedure <b>Tk_GetImageMasterData</b> may be invoked to retrieve information about an image.  For exam- |
       ple,  an image manager can use this procedure to locate its image master data for an image.  If there |
       exists an image named <u>name</u> in the interpreter given by <u>interp</u>, then <u>*typePtrPtr</u>  is  filled  in  with |
       type  information  for  the image (the <u>typePtr</u> value passed to <b>Tk_CreateImageType</b> when the image type |
       was registered) and the return value is the ClientData value returned  by  the  <u>createProc</u>  when  the |
       image was created (this is typically a pointer to the image master data structure).  If no such image |
       exists then NULL is returned and NULL is stored at <u>*typePtrPtr</u>.


<b>TK_INITIMAGEARGS</b>
       The function <b>Tk_InitImageArgs</b> converts the arguments of the <b>createProc</b> from objects to  strings  when |
       necessary.  When not using stubs, not using the old interface, or running under an older (pre-8.3) Tk |
       version, this function has no effect. This function makes porting older image  handlers  to  the  new |
       interface  a  lot  easier:  After running this function, the arguments are guaranteed to be in string |
       format, no matter how Tk deliverd them.                                                               |


<b>SEE</b> <b>ALSO</b>                                                                                                     |
       Tk_ImageChanged, Tk_GetImage, Tk_FreeImage, Tk_RedrawImage, Tk_SizeOfImage                            |


<b>KEYWORDS</b>                                                                                                     |
       image manager, image type, instance, master                                                           |



Tk                                                   8.3                               <a href="Tk_CreateImageType.3tcl.html#//apple_ref/doc/man/3/Tk_CreateImageType">Tk_CreateImageType(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tk_InitImageArgs.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tk_InitImageArgs.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tk_InitImageArgs.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

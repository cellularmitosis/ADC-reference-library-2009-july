<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Installing and Removing the Translator (IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING25></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-24.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-26.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-15.html"><B>Chapter 1 - QuickDraw GX and the Macintosh Environment</B></A> / <A HREF="GXEnvironment-22.html"><B>Using the QuickDraw-to-QuickDraw GX Translator</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING25-0></A>
<H2><A NAME=MARKER-9-83></A>Installing and Removing the Translator </H2>
 <A NAME=MARKER-8-24></A>If you want to capture QuickDraw commands as they are executed, convert them, and either draw them immediately or save them, you need to install the QuickDraw-to-QuickDraw GX translator in the graphics port to which the QuickDraw drawing commands will be sent.<A NAME=MARKER-9-59></A> <P>
 You install the translator with the <CODE>GXInstallQDTranslator</CODE> function. Once installed, the translator intercepts all QuickDraw drawing commands to that port, converts them to QuickDraw GX shapes, and sends them to a callback function (that you supply) for drawing or saving. When you are finished capturing QuickDraw commands, you remove the translator with the <CODE>GXRemoveQDTranslator</CODE> function.<P>
<DL>
<DT><B>Note</B>
<DD>There is not necessarily a one-to-one match between a QuickDraw function call and the generation of a QuickDraw GX shape.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 <A HREF=GXEnvironment-227.html#MARKER-9-157>Listing 1-5</A> is a sample that uses the functions <CODE>GXInstallQDTranslator</CODE> and <CODE>GXRemoveQDTranslator</CODE> to convert the bounded QuickDraw commands. The application-defined callback function, <CODE>aShapeProc</CODE>, sets the view port and draws each translated shape. The <CODE>aShapeProc</CODE> function is shown in <A HREF=#MARKER-9-88>Listing 1-6 on page 1-22</A>.<P>
<B>Listing 1-5  <A NAME=MARKER-9-157></A>Installing and removing the translator</B><P>
<PRE>
/* first, install the translator */
GXInstallQDTranslator(window, gxDefaultOptionsTranslation, 
                        &amp;theRect, &amp;theRect, theStyleStretch,
                        aShapeProc, (void *) &amp;theWindViewPort);

/* now, make QuickDraw calls */
PenSize(20, 10);

MoveTo(100, 100);
LineTo(200, 100);

MoveTo(100, 150);
LineTo(200, 250);

/* when finished drawing, remove the translator */
GXRemoveQDTranslator(window, nil);
</PRE>
 <A NAME=MARKER-9-159></A>When using the <CODE>GXInstallQDTranslator</CODE> function, you must supply an application-defined function that gives you control over what is to be done with the QuickDraw GX shapes resulting from the translation. For example, you may want to draw each shape as it is translated, or you may want to spool multiple shapes and draw after you have completed the picture.<P>
 <A HREF=#MARKER-9-88>Listing 1-6</A> is the sample shape-spooling function used by the code in <A HREF=GXEnvironment-227.html#MARKER-9-157>Listing 1-5</A>. This function sets the view port, which is passed to it in the <CODE>reference</CODE> parameter, and then draws the shape passed to it in the parameter <CODE>theShape</CODE>.<P>
<B>Listing 1-6  <A NAME=MARKER-9-88></A>Sample application-defined shape-spooling function</B><P>
<PRE>
OSErr aShapeProc( gxShape theShape, 
                                 void *reference)
{
   GXSetShapeViewPorts(theShape, 1, (gxViewPort *) &amp;reference);
   GXDrawShape(theShape);
   GXDisposeShape(theShape);
   return(GXGetGraphicsError(nil));
}
</PRE>
 The prototype for the shape-spooling function, and how to use it, are described in the section <A HREF=GXEnvironment-56.html#MARKER-9-159>"Handling Translated QuickDraw Data" beginning on page 1-41</A>. <P>
 <A NAME=MARKER-2-2></A><CODE> <A NAME=MARKER-8-25></A> <A NAME=MARKER-9-39></A></CODE><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-24.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-26.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

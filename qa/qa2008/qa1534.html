<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- BEGIN META TAG INFO --><link rel="home" href="http://developer.apple.com/">
<link rel="find" href="http://developer.apple.com/search/">
<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
<script language="JavaScript" type="text/javascript" src="../../documentation/js/busnav.js"></script><script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script><!-- END META TAG INFO --><!-- BEGIN TITLE --><title>Technical Q&amp;A QA1534: Creating Core Audio Format (.caf) Files</title>
<!-- END TITLE --><style>
			.sourcecodebox {
				white-space: pre-wrap;
				white-space: -moz-pre-wrap !important;
				white-space: -pre-wrap;
				white-space: -o-pre-wrap;
				word-wrap: break-word;
			}
			</style>
</head>
<!-- BEGIN BODY OPEN --><body bgcolor="#ffffff"><a name="//apple_ref/doc/uid/DTS40008152" title="Creating Core Audio Format (.caf) Files"></a>
<!-- END BODY OPEN --><!-- START CENTER OPEN --><center>
<!-- END CENTER OPEN --><a name="top"></a><!-- BEGIN LOGO AND SEARCH --><!--#include virtual="/includes/adcnavbar" --><!-- END LOGO AND SEARCH --><!-- START BREADCRUMB --><div id="breadcrumb"><table width="680" border="0" cellpadding="0" cellspacing="0">
<tr>
<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
</tr>
<tr valign="middle"><td align="left" colspan="2">
<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&amp;As</a> &gt; <a href="../../technicalqas/MusicAudio/index.html">Audio</a> &gt; <a href="../../technicalqas/MusicAudio/idxCoreAudio-date.html">Core Audio</a> &gt; </td></tr>
<tr><td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td></tr>
</table></div>
<!-- END BREADCRUMB --><!-- START MAIN CONTENT --><!-- START TITLE GRAPHIC AND INTRO --><table width="680" border="0" cellpadding="0" cellspacing="0"><tr align="left" valign="top"><td><h1>
<div id="pagehead">Technical Q&amp;A QA1534</div>
<div id="pageheadsub">Creating Core Audio Format (.caf) Files</div>
</h1></td></tr></table>
<!-- END TITLE GRAPHIC AND INTRO --><!-- BEGIN WIDE COLUMN --><table width="680" border="0" cellpadding="0" cellspacing="0"><tr align="left" valign="top"><td align="left" width="680">
<!-- BEGIN CONTENTS --><h2>Q:
	
I'm trying to author Core Audio Format files using QuickTime Player but it doesn't have a .caf file exporter. How can I create .caf files on Mac OS X?
</h2>
<p>A: While QuickTime supports importing Core Audio Format (<code>.caf</code>) files, it does not currently provide an audio exporter capable of creating these files.</p>
<p>The easiest way to create a Core Audio Format file is by using the <code>afconvert</code> tool located in <code>/usr/bin/</code>.</p>
<p><code>afconvert</code> (a.k.a. Audio File Convert) will convert a source audio file to a new audio file and supports a large set of file formats, data formats and encoding options.</p>
<p>For example, Listing 1 demonstrates how you might use <code>afconvert</code> from the Terminal to create a <code>.caf</code> file containing AAC audio encoded with an average data rate of 192kbps.</p>
<p class="caption"><strong>Listing 1: </strong>Convert an .aif file to a .caf file.</p>
<pre class="sourcecodebox">afconvert -v -f 'caff' -d aac -s 1 -b 192000 MySource.aif MyOutput.caf</pre>
<pre class="sourcecodebox">NAME
     afconvert -- Audio File Convert

SYNOPSIS
     afconvert [option...] input_file [output_file]

DESCRIPTION
     Audio File Convert will convert a source audio file to a new audio file of the specified file type containing audio data of the specified data type.

OPTIONS (may appear before or after arguments)
     { -f | --file } file_format:
        '3gpp' = 3GP Audio (.3gp)
                   data_formats: 'aac ' 'samr' 
        '3gp2' = 3GPP2 Audio (.3g2)
                   data_formats: 'aac ' 'samr' 
        'adts' = AAC ADTS (.aac, .adts)
                   data_formats: 'aac ' 
        'ac-3' = AC3 (.ac3)
                   data_formats: 'ac-3' 
        'AIFC' = AIFC (.aifc, .aiff, .aif)
                   data_formats: I8 BEI16 BEI24 BEI32 BEF32 
                                 BEF64 UI8 'ulaw' 'alaw' 'MAC3' 'MAC6' 
                                 'ima4' 'QDMC' 'QDM2' 'Qclp' 'agsm' 
        'AIFF' = AIFF (.aiff, .aif)
                   data_formats: I8 BEI16 BEI24 BEI32 
        'amrf' = AMR (.amr)
                   data_formats: 'samr' 
        'caff' = Apple CAF (.caf)
                   data_formats: '.mp1' '.mp2' '.mp3' 'MAC3' 'MAC6' 
                                 'QDM2' 'QDMC' 'Qclp' 'Qclq' 'aac ' 'aacl' 
                                 'agsm' 'alac' 'alaw' 'drms' 'dvca' 'dvi ' 
                                 'dvi8' 'ilbc' 'ima4' 'lpc ' I8 BEI16 
                                 BEI24 BEI32 BEF32 BEF64 LEI16 LEI24 
                                 LEI32 LEF32 LEF64 'ms\x00\x02' 'ms\x00\x11' 'ms\x001' 
                                 'ms\x00U' 'samr' 'ulaw' 'vdva' 
        'MPG1' = MPEG Layer 1 (.mp1, .mpeg, .mpa)
                   data_formats: '.mp1' 
        'MPG2' = MPEG Layer 2 (.mp2, .mpeg, .mpa)
                   data_formats: '.mp2' 
        'MPG3' = MPEG Layer 3 (.mp3, .mpeg, .mpa)
                   data_formats: '.mp3' 
        'mp4f' = MPEG4 Audio (.mp4)
                   data_formats: 'aac ' 'aacl' 
        'm4af' = MPEG4 Audio (.m4a)
                   data_formats: 'aac ' 'aacl' 'alac' 
        'NeXT' = NeXT/Sun (.snd, .au)
                   data_formats: I8 BEI16 BEI24 BEI32 BEF32 
                                 BEF64 'ulaw' 
        'Sd2f' = Sound Designer II (.sd2)
                   data_formats: I8 BEI16 BEI24 BEI32 
        'WAVE' = WAVE (.wav)
                   data_formats: UI8 LEI16 LEI24 LEI32 LEF32 
                                 LEF64 'ulaw' 'alaw' 
    { -d | --data } data_format[@sample_rate_hz][/format_flags][#frames_per_packet] :
        [-][BE|LE]{F|[U]I}{8|16|24|32|64} (PCM)
            e.g. BEI16   F32@44100
        or a data format appropriate to file format, as above
        format_flags: hex digits, e.g. '80'
        Frames per packet can be specified for some encoders, e.g.: samr#12
    { -c | --channels } number_of_channels
        add/remove channels without regard to order
    { -l | --channellayout } layout_tag
        layout_tag: name of a constant from CoreAudioTypes.h
          (prefix "kAudioChannelLayoutTag_" may be omitted)
        if specified once, applies to output file; if twice, the first
          applies to the input file, the second to the output file
    { -b | --bitrate } bit_rate_bps
         e.g. 128000
    { -q | --quality } codec_quality
        codec_quality: 0-127
    { -r | --src-quality } src_quality
        src_quality (sample rate converter quality): 0-127
    { --src-complexity } src_complexity
        src_complexity (sample rate converter complexity): line, norm, bats
    { -v | --verbose }
        print progress verbosely
    { -s | --strategy } strategy
        bitrate allocation strategy for encoding an audio track
        0 for CBR, 1 for ABR, 2 for VBR_constrained, 3 for VBR
    { -t | --tag }
        If encoding to CAF, store the source file's format and name in a user chunk.
        If decoding from CAF, use the destination format and filename found in a user chunk.
    --read-track track_index
        For input files containing multiple tracks, the index (0..n-1) of the track
        to read and convert.
    --prime-method method
        decode priming method (see AudioConverter.h)
    --no-filler
        don't page-align audio data in the output file
    { -u | --userproperty } property value
        set an arbitrary property to a given value
        property must be a four char code
        value is a signed 32-bit integer
        A maximum of 8 properties may be set
        e.g. use '-u vbrq &lt;sound_quality&gt;' to set the sound quality level (&lt;sound_quality&gt;: 0-127) 
             for VBR encoding strategy (i.e., -s 3) 
    { -h | --help }
        print help</pre>
<a name="REFERENCES"></a><h2>References</h2>
<p><a href="../../documentation/MusicAudio/Reference/CAFSpec/CAF_intro/chapter_1_section_1.html">Introduction to Apple Core Audio Format Specification</a></p>
<p style="margin-top:-10px"><a href="#top">Back to Top </a><a href="#top"><img src="images/arrow_linkup.gif" height="7" width="10" border="0" alt=""></a></p>
<a name="document_revision_summary"></a><h2>Document Revision History</h2>
<table cellspacing="0" class="graybox" width="680">
<tr>
<th width="100">Date</th>
<th width="580">Notes</th>
</tr>
<tr>
<td scope="row">2009-01-07</td>
<td>First Version</td>
</tr>
</table>
<p><b>Posted: </b>2009-01-07</p>
<!-- END CONTENTS -->
</td></tr></table>
<!-- END WIDE COLUMN --><!-- END MAIN CONTENT --><!-- START BOTTOM APPLE NAVIGATION -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2008/qa1534.html%3Fid%3DDTS40008152-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2008/qa1534.html%3Fid%3DDTS40008152-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2008/qa1534.html%3Fid%3DDTS40008152-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer" --><!-- END BOTTOM APPLE NAVIGATION --><!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->
</body>
</html>

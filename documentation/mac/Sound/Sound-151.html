<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Sound Input Parameter Blocks (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING151></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-150.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-152.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-137.html"><B>Chapter 3 - Sound Input Manager</B></A> / <A HREF="Sound-146.html"><B>Sound Input Manager Reference</B></A><BR><DL><DD><A HREF="Sound-150.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING151-0></A>
<H3>Sound Input Parameter Blocks<A NAME=MARKER-2-183></A></H3>
 The <CODE>SPBRecord</CODE> and <CODE>SPBRecordToFile</CODE> functions require a pointer to a sound input parameter block that defines characteristics of the recording. If you define a sound input completion routine or a sound input interrupt routine, your routine receives a pointer to a sound input parameter block. If you are using only the Sound Input Manager's high-level <CODE>SndRecord</CODE> and <CODE>SndRecordToFile</CODE> functions, the operation of sound input parameter blocks is transparent to your application. A sound input parameter block is defined by the <CODE>SPB</CODE> data type.<A NAME=MARKER-2-181></A><P>
<PRE>
TYPE SPB =
RECORD
   inRefNum:            LongInt;    {reference number of input device}
   count:               LongInt;    {number of bytes to record}
   milliseconds:        LongInt;    {number of milliseconds to record}
   bufferLength:        LongInt;    {length of buffer to record into}
   bufferPtr:           Ptr;        {pointer to buffer to record into}
   completionRoutine:   ProcPtr;    {pointer to a completion routine}
   interruptRoutine:    ProcPtr;    {pointer to an interrupt routine}
   userLong:            LongInt;    {for application's use}
   error:               OSErr;      {error returned after recording}
   unused1:             LongInt;    {reserved}
END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><A NAME=MARKER-9-58></A><CODE>inRefNum</CODE>
<DD> The reference number of the sound input device (as received from the <CODE>SPBOpenDevice</CODE> function) from which the recording is to occur.<A NAME=MARKER-2-40></A>
<DT><A NAME=MARKER-2-229></A><CODE>count</CODE>
<DD> On input, the number of bytes to record. On output, the number of bytes actually recorded. If this field specifies a longer recording time than the <CODE>milliseconds</CODE> field, then the <CODE>milliseconds</CODE> field is ignored on input.
<DT><A NAME=MARKER-2-41></A><CODE>milliseconds</CODE>
<DD> On input, the number of milliseconds to record. On output, the number of milliseconds actually recorded. If this field specifies a longer recording time than the <CODE>count</CODE> field, then the <CODE>count</CODE> field is ignored on input.
<DT><A NAME=MARKER-2-135></A><CODE>bufferLength</CODE>
<DD> The length of the buffer into which recorded sound data is placed. The recording time specified by the <CODE>count</CODE> or <CODE>milliseconds</CODE> field is truncated to fit into this length, if necessary.
<DT><A NAME=MARKER-2-169></A><CODE>bufferPtr</CODE>
<DD> A pointer to the buffer into which recorded data is placed. If this field is <CODE>NIL</CODE>, then the <CODE>count</CODE>, <CODE>milliseconds</CODE>, and <CODE>bufferLength</CODE> fields are ignored and the recording will continue indefinitely until the <CODE>SPBStopRecording</CODE> function is called. However, the data is not stored anywhere, so setting this field to <CODE>NIL</CODE> is useful only if you want to do something in a sound input interrupt routine but do not want to save the recorded sound.<A NAME=MARKER-2-172></A>
<DT><A NAME=MARKER-2-177></A><CODE>completionRoutine</CODE>
<DD> A pointer to a completion routine that is called when the recording terminates as a result of your calling the <CODE>SPBStopRecording</CODE> function or when the limit specified by the <CODE>count</CODE> or <CODE>milliseconds</CODE> field is reached. The completion routine executes only if <CODE>SPBRecord</CODE> is called asynchronously and therefore is called at interrupt time.<A NAME=MARKER-2-142></A><A NAME=MARKER-2-35></A>
<DT><A NAME=MARKER-2-261></A><CODE>interruptRoutine</CODE>
<DD> A pointer to a routine that is called by asynchronous recording devices when their internal buffers are full. You can define a sound input interrupt routine to modify uncompressed sound samples before they are placed into the buffer specified in the <CODE>bufferPtr</CODE> parameter. The interrupt routine executes only if <CODE>SPBRecord</CODE> is called asynchronously and therefore is called at interrupt time.<A NAME=MARKER-2-144></A>
<DT><A NAME=MARKER-9-61></A><CODE>userLong</CODE>
<DD> A long integer available for the application's own use. You can use this field, for instance, to pass a handle to an application-defined structure to the completion routine or to the interrupt routine.
<DT><A NAME=MARKER-2-11></A><CODE>error</CODE>
<DD> On exit, the error that occurred during recording. This field contains a value greater than 0 while recording unless an error occurs, in which case it contains a value less than 0 that indicates an operating system error. Your application can poll this field to check on the status of an asynchronous recording. If recording terminates without an error, this field contains 0.
<DT><A NAME=MARKER-2-43></A><CODE>unused1</CODE>
<DD> Reserved for use by Apple. You should always initialize this field to 0.<A NAME=MARKER-2-174></A><A NAME=MARKER-2-241></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-150.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-152.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

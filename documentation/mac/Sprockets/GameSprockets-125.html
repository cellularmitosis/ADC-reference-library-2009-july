<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>DSpContext_SwapBuffers (GameSprockets)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" ="A" NAME="HEADING125"></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GameSprockets-124.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-126.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GameSprockets-2.html"><B>Apple Game Sprockets Guide</B></A> / <BR><DD><A HREF="GameSprockets-85.html"><B>Chapter 2 - DrawSprocket</B></A> / <A HREF="GameSprockets-88.html"><B>DrawSprocket Reference</B></A><BR><DL><DD><A HREF="GameSprockets-98.html"><B>DrawSprocket Functions</B></A> / <A HREF="GameSprockets-119.html"><B>Drawing and Double Buffering</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING125-0"></A>
<H3><A NAME="MARKER-9-144"></A>DSpContext_SwapBuffers<A NAME="MARKER-11-145"></A></H3>
 <A NAME="MARKER-9-146"></A>You can use the DSpContext_SwapBuffers function to draw a context's back buffer to the screen.<P>
<PRE>
OSStatus DSpContext_SwapBuffers(DSpContextReference inContext,
DSpCallbackProcPtr inBusyProc, 
void *inUserRefCon);
</PRE>
<DL>
<DT><CODE>inContext</CODE>
<DD> A reference to the context whose buffers are to be swapped.
<DT><CODE>inBusyProc</CODE>
<DD> A pointer to an application-supplied callback function that performs any required pre-swap tasks.
<DT>inUserRefCon
<DD> A reference constant to be handed back by DrawSprocket when it calls the callback specified by the <CODE>inBusyProc</CODE> parameter.
<DT><I>function result</I>
<DD> A result code.
</DL>
<A NAME="HEADING125-7"></A>
<H5>DESCRIPTION</H5>
 Calling the DSpContext_SwapBuffers function causes the invalid parts of the back buffer of the context specified in the <CODE>inContext</CODE> parameter (or the entire back buffer, if its invalid-rectangle list is empty) to be drawn to the screen. <P>
 This function returns immediately, even if the buffer swap has not yet occurred. To determine when the next call to <CODE>DSpContext_GetBackBuffer </CODE>will not block, you can repeatedly call the <CODE>DSpContext_IsBusy</CODE> function <A HREF="GameSprockets-126.html#MARKER-9-147">(page 2-52)</A> until it returns a value of <CODE>false</CODE>.<P>
 Before performing the buffer swap, DrawSprocket repeatedly calls an application-supplied callback function, pointed to by the <CODE>inBusyProc</CODE> parameter, to make sure that any constraints you impose are satisfied before the swap occurs. For example, your callback might check to ensure that any QuickDraw 3D acceleration hardware has completed its rendering. When DrawSprocket calls the callback routine, it passes the callback the reference constant you passed to <CODE>DspContext_SwapBuffers</CODE> in the <CODE>refCon</CODE> parameter.<P>
 The buffer swap does not occur until the callback function returns <CODE>false</CODE>. The callback pointer must be of this type:<P>
<PRE>
typedef Boolean (*DSpCallbackProcPtr)(DSpContextReference inContext,
             void *inRefCon);
</PRE>
 See the <CODE>MyCallbackFunction</CODE> function <A HREF="GameSprockets-159.html#MARKER-9-212">(page 2-75)</A> for a description of the callback function. <P>
 In a worst case scenario where the back buffer and the display have different bit depths, <CODE>DSpContext_SwapBuffers</CODE> immediately calls <CODE>CopyBits</CODE> to transfer the data. To avoid this, and to use the optimized DrawSprocket blitters, always insure that your back buffer and display bit depths are identical.<P>
<A NAME="HEADING125-15"></A>
<H5>CALLING RESTRICTIONS</H5>
 Do not call this function during an interrupt.<P>
</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="GameSprockets-124.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="GameSprockets-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="GameSprockets-318.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="GameSprockets-126.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="GameSprockets-3.html">&copy; Apple Computer, Inc.</A><BR>2 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

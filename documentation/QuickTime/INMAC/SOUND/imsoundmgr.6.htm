<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Sampled-Sound Data (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.5.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.3.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.7.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H3.Heading3"><A NAME="pgfId=3091"> </A><A NAME="38753"> </A>Sampled-Sound Data</H1><P CLASS="T0.Text0"><A NAME="pgfId=3092"> </A><A NAME="marker=569"> </A><A NAME="marker=565"> </A>You can use <B CLASS="bold">sampled-sound data</B> to play back sounds that have been digitally recorded (that is, <B CLASS="bold">sampled sounds</B>) as well as sounds that are computed, possibly at run time. Sampled sounds are the most widely used of all the available sound types primarily because it is relatively easy to generate a sampled sound and because sampled-sound data can describe a wide variety of sounds. Sampled sounds are typically used to play back prerecorded sounds such as speech or special sound effects.<A NAME="marker=1025"> </A><A NAME="marker=1026"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3093"> </A>You can use the Sound Manager to store sampled sounds in one of two ways, either as resources of type <TT CLASS="cv">'snd&nbsp;'</TT> or as AIFF or AIFF-C format files. The structure of resources of type <TT CLASS="cv">'snd&nbsp;'</TT> is given in <A target="doc" HREF="imsoundmgr.2d.htm#24013" CLASS="XRef">&quot;Sound Resources&quot;</A>, and the structure of AIFF and AIFF-C files is given in <A target="doc" HREF="imsoundmgr.30.htm#29256" CLASS="XRef">&quot;Sound Files&quot;</A>. If you simply want to play short prerecorded sampled sounds, you should probably include the sound data in <TT CLASS="cv">'snd&nbsp;'</TT> resources. If you want to allow the user to transfer recorded sound data from one application to another (or from one operating system to another), you should probably store the sound data in an AIFF or AIFF-C file. In certain cases, you must store sampled sounds in files and not in resources. For example, a sampled sound might be too large to be stored in a resource.<A NAME="marker=1028"> </A><A NAME="marker=1029"> </A><A NAME="marker=1030"> </A><A NAME="marker=1031"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3094"> </A>Regardless of how you store a sampled sound, you can use Sound Manager routines to play that sound. If you choose to store sampled sounds in files of type AIFF or AIFF-C, you can play those sounds by calling the <TT CLASS="cv">SndStartFilePlay</TT> function, introduced in the chapter <A target="doc" HREF="imintrosound.htm" CLASS="XRef">&quot;Introduction to Sound on the Macintosh&quot;</A> in this book. If you store sampled sounds in resources, your application can play those sounds by passing the Sound Manager function <TT CLASS="cv">SndPlay</TT> a handle to a resource of type <TT CLASS="cv">'snd&nbsp;'</TT> that contains a sampled sound header. (The <TT CLASS="cv">SndStartFilePlay</TT> function can also play <TT CLASS="cv">'snd&nbsp;'</TT> resources directly from disk, but this is not recommended.)</P><P CLASS="T1.Text1"><A NAME="pgfId=2166"> </A>There are three types of sampled-sound headers: the standard sound header, the extended sound header, and the compressed sound header. The<B CLASS="bold"> sound header</B> contains information about the sample (such as the original sampling rate, the length of the sample, and so forth), together with an indication of where the sample data is to be found. The <B CLASS="bold">sampled sound header</B> can reference only buffers of monophonic, 8-bit sound. The <B CLASS="bold">extended sound header</B> can be used for 8- or 16-bit stereo sound data as well as monophonic sound data. The <B CLASS="bold">compressed sound header</B> can be used to describe compressed sound data, whether monophonic or stereo. Data can be stored in a buffer separate from the sound resource or as part of the sound resource as the last field of the sound header.<A NAME="marker=236"> </A><A NAME="marker=1614"> </A></P><P CLASS="Note"><A NAME="pgfId=3095"> </A>The terminology <I CLASS="italics">sampled sound header</I> can be confusing because in most cases the sound header (and hence the <TT CLASS="cv">'snd&nbsp;'</TT> resource) contains the sound data as well as information describing the data. Also, do not confuse sampled sound headers with sound resource headers. Sampled sound headers contain information about sampled-sound data, but sound resource headers contain information on the format of an entire sound resource.  </P><P CLASS="T1.Text1"><A NAME="pgfId=3096"> </A>You can play a sampled sound at its original rate or play it at some other rate to change its pitch. Once you install a sampled sound header into a channel, you can play it at varying rates to provide a number of pitches. In this way, you can use a sampled sound as a <B CLASS="bold">voice</B> or <B CLASS="bold">instrument</B> to play a series of sounds.<A NAME="marker=102"> </A><A NAME="marker=890"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3298"> </A><A NAME="marker=566"> </A>Sampled-sound data is made up of a series of <B CLASS="bold">sample frames,</B> which are stored contiguously in order of increasing time. For noncompressed sound data, each sample frame contains one or more sample points. For compressed sound data, each sample frame contains one or more packets.<A NAME="marker=1506"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3299"> </A>For multichannel sounds, a sample frame is an interleaved set of sample points or packets. (For monophonic sounds, a sample frame is just a single sample point or a single packet.) The sample points within a sample frame are interleaved by channel number. For example, the sound data for a stereo, noncompressed sound is illustrated in&nbsp;<A target="doc" HREF="imsoundmgr.6.htm#29868" CLASS="XRef">Figure 1-19</A>.<A NAME="marker=944"> </A><A NAME="marker=1219"> </A><A NAME="marker=1507"> </A><A NAME="marker=570"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=3570"> </A>Figure&nbsp;19 <A NAME="29868"> </A>Interleaving stereo sample points</P><DIV><IMG SRC="imsoundmgr-3.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=3571"> </A>Each <B CLASS="bold">sample point</B> of noncompressed sound data in a sample frame is, for sound files, a linear, two's complement value, and, for sound resources, a binary offset value. Sample points are from 1 to 32 bits wide. The size is usually 8 bits, but a different size can be specified in the <TT CLASS="cv">sampleSize</TT> field of the extended sound header (for sound resources) or in the <TT CLASS="cv">sampleSize</TT> field of the Common Chunk (for sound files). Each sample point is stored in an integral number of contiguous bytes. Sample points that are from 1 to 8 bits wide are stored in 1 byte, sample points that are from 9 to 16 bits wide are stored in 2 bytes, and so forth. When the width of a sample point is less than a multiple of 8 bits, the sample point data is left aligned (using a shift-left instruction), and the low-order bits at the right end are set to 0.<A NAME="marker=1501"> </A><A NAME="marker=1555"> </A><A NAME="marker=1554"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3572"> </A>For example, for 8-bit noncompressed sound data stored in a sound resource, each sample point is similar to a value in a wave-table description. These values are interpreted as offset values, where $80 represents an amplitude of 0. The value $00 is the most negative amplitude, and $FF is the largest positive amplitude.</P><P CLASS="T1.Text1"><A NAME="pgfId=3573"> </A>Each <B CLASS="bold">packet</B> of 3:1 compressed sound data is 2 bytes; a packet of 6:1 compressed sound is 1 byte. These byte sizes are defined in bits by the constants <TT CLASS="cv">threeToOnePacketSize</TT> and <TT CLASS="cv">sixToOnePacketSize</TT>, respectively.<A NAME="marker=1504"> </A><A NAME="marker=1503"> </A> <A NAME="marker=260"> </A><A NAME="marker=567"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.5.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.3.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.7.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
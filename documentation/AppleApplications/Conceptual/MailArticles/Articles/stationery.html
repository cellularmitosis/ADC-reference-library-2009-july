<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Mail Programming Topics: Creating Mail Stationery Bundles</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating Mail Stationery Bundles"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40006068" title="Creating Mail Stationery Bundles"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../Mail-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP30001038" target="_top">Mail</a> &gt; <a href="../index.html" target="_top">Mail Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../MailAccountBundles.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40006068-SW1" title="Creating Mail Stationery Bundles"></a><hr /><H1>Creating Mail Stationery Bundles</H1><p>Mail Stationery is a new feature in Mac OS v10.5 that allows users to customize their email messages with predefined stationery templates. Each stationery template is a bundle that contains all the files needed to display the stationery.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="stationery.html#//apple_ref/doc/uid/TP40006068-DontLinkElementID_1">Stationery Bundles</a>
				
			<br/>
			
        
			
			
				<a href="stationery.html#//apple_ref/doc/uid/TP40006068-DontLinkElementID_14">Stationery Installation</a>
				
			<br/>
			
        
			
			
				<a href="stationery.html#//apple_ref/doc/uid/TP40006068-SW2">Localization</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_1" title="Stationery Bundles"></a><h2>Stationery Bundles</h2><p>A stationery template is a bundle folder with the file extension <code>.mailstationery</code>. Inside the root folder is a Contents folder, and inside that is a Resources folder. All the files in the stationery bundle are located in the Resources folder.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_2" title="Description Property List"></a><h3>Description Property List</h3><p>The <code>Description.plist</code> file serves as a table of contents describing all the other files in the stationery folder. The Description is a dictionary with the following keys and values:</p><ul class="spaceabove"><li class="li"><p>Folder Name—The name of the stationery bundle folder on disk, including the <code>.mailstationery</code> extension. Required.</p></li><li class="li"><p>Display Name—The name of the template as it is shown to the user. This entry isn't necessary if a display name is given in the category's table of contents or if a localized display name is available. If no display name is supplied in any of these locations, the folder name, minus the <code>.mailstationery</code> extension, is used as the display name. For information about localizing this string, see <span class="content_text"><a href="stationery.html#//apple_ref/doc/uid/TP40006068-SW2">“Localization.”</a></span></p></li><li class="li"><p>Stationery ID—The unique identifier for the stationery template. If this entry is missing, Mail generates one. </p></li><li class="li"><p>HTML File—The name of the HTML file, including any extensions. Required.</p></li><li class="li"><p>Thumbnail Image—The name of the file containing the thumbnail image of the template. The image is shown in the stationery pane of a New Message window. Required.</p></li><li class="li"><p>Background Images—An array of the names of any images referenced as background images in the HTML. Required if the template has any background images.</p></li><li class="li"><p>Tiled Background Image—The name of the image that serves as a background for the entire template. This name should also appear in the Background Images entry. Required if the template has a background image for the body element or another element that encompasses the entire visual content. </p></li><li class="li"><p>Images—An array of the names of any local images referenced in <code>IMG</code> elements in the HTML. Required if the template's HTML has any <code>IMG</code> elements with local URLs.</p></li><li class="li"><p>Composite Images—An array of dictionaries, each dictionary representing one composite image referred to in the template's HTML file. The keys and values of a composite image's dictionary are described below. See <span class="content_text"><a href="stationery.html#//apple_ref/doc/uid/TP40006068-SW3">“Composite Images”</a></span> for more information about the <code>IMG</code> tag and the component images. Each composite image referred to in the HTML file must have an entry. Each of the keys described below is required if the image it identifies is present.</p><ul class="nested"><li class="nested li"><p>Composite Name—The value of the <code>SRC</code> attribute in the <code>IMG</code> tag that represents the composite image.</p></li><li class="nested li"><p>Base Image—The filename of the image that forms the base, or background, of the composite image.</p></li><li class="nested li"><p>Overlay Image—The filename of the image to be used as the top layer of the composite image.</p></li><li class="nested li"><p>Masks—An array of dictionaries, with each dictionary corresponding to one mask file. The dictionaries should be in left-to-right, top-to-bottom order of the drop zones they describe. Each dictionary should have the following keys. For the values that involve a coordinate system, the origin should be assumed to be at the bottom-left corner of the mask image, and the units are in pixels.</p><ul class="nested"><li class="nested li"><p>File Name—The filename of the mask image.</p></li><li class="nested li"><p>Placeholder Image—The filename of the placeholder image.</p></li><li class="nested li"><p>Drop Zone Offset—The position where the bottom-left corner of the user's picture should be placed. This is an array of integers (x, y).</p></li><li class="nested li"><p>Drop Zone Angle—The angle, measured in degrees, through which the user's picture should be rotated. Angles are measured counterclockwise.</p></li><li class="nested li"><p>Drop Zone Size—The width and height to which the user's picture should be scaled. This should be an array of integers (width, height).</p></li></ul></li></ul></li></ul><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_3" title="HTML File"></a><h3>HTML File</h3><p>The HTML file defines the content of the stationery. It can contain any valid HTML that is displayed correctly in common email clients. It should not contain any JavaScript. The next few sections describe the other specific types of content and HTML elements.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_4" title="HTML Content"></a><h4>HTML Content</h4><p>By default, the content of the stationery is not be editable by the user. Each region of the document that the user can edit must be surrounded by an element (for example, <code>DIV</code> or a <code>SPAN</code>) with the <code>contenteditable=YES</code> attribute. </p><p>Precautions must be taken to ensure compatibility with common email client applications, which are often much less capable than most web browsers at displaying HTML. </p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_5" title="Dynamic Elements"></a><h4>Dynamic Elements</h4><p>Dynamic elements are placeholders that can be inserted in the HTML of the stationery. When the stationery is loaded into the New Message window, the dynamic element is replaced by static content. A dynamic element is specified in the HTML by a <code>SPAN</code> element with the class name <code>AppleStationeryDynamicElement</code>. Any HTML contained in the <code>SPAN</code> element is discarded when the stationery is loaded except when desired content cannot be inserted. On these occasions, the contents of the <code>SPAN</code> is displayed. The span tag must also have a <code>apple-content-type</code> attribute that specifies what the replacement content should be. For example, a value of <code>full-name</code> for <code>apple-content-type</code> specifies that the dynamic element should be replaced by the user's full name. The following values for <code>apple-content-type</code> are available:</p><dl class="table-display"><dt><code>full-name</code></dt><dd>User's full name from the Me card in Address Book.</dd><dt><code>first-name</code></dt><dd>User's first name from the Me card in Address Book.</dd><dt><code>email</code></dt><dd>The email address of the account being used to send the message.</dd><dt><code>date</code></dt><dd>The current date.</dd></dl><p class="clear"></p><p>A dynamic element of type <code>date</code> must also have a <code>date-format</code> attribute. Its value is a format string as used by Cocoa's <code>NSCalendarDate</code> class.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_6" title="Images"></a><h4>Images</h4><p>Local images that are supplied as resources in the stationery bundle and referenced in <code>IMG</code> tags or as background images are embedded in the message when it's sent. The URL in each <code>IMG</code> tag or background attribute should be a path relative to the stationery bundle's Resources folder. All <code>IMG</code> elements should have width and height attributes with absolute, not relative, values.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_7" title="Composite Images in HTML"></a><h4>Composite Images in HTML</h4><p>A composite image consists of one or more images from the stationery bundle that are layered together with pictures supplied by the user to create a single image.</p><p>A composite image is specified in the HTML with an <code>IMG</code> tag whose <code>SRC</code> attribute is the name of the composite image. This name is the <code>Composite Name</code> specified in the Description file. The end user may see this name, so it should be something that would be appropriate as a filename. The <code>IMG</code> tag should have the class name <code>AppleCompositeImage</code>.</p><p>For more information about composite images, see <span class="content_text"><a href="stationery.html#//apple_ref/doc/uid/TP40006068-SW3">“Composite Images.”</a></span></p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_8" title="Images"></a><h3>Images</h3><p>Images referenced by <code>IMG</code> tags or as background images should be included in the Resources folder of the stationery bundle. They should also be listed in the <code>Images</code> or <code>Background Images</code> entry in the Description. When the message is sent, the data for these images is included in the message.</p><a name="//apple_ref/doc/uid/TP40006068-SW3" title="Composite Images"></a><h3>Composite Images</h3><p>Composite images provide a way for templates to include images supplied by the user in more attractive and complex ways than ordinary messages can supply. A composite image provides a static background image containing specific regions where the user can drop his or her own pictures. The user's pictures is sized and rotated as needed to fit the drop zones. After the user pictures is layered on top of the base or background image, an overlay image, usually mostly transparent, may be composited on top if desired. </p><p>A composite image is made up of a background image, one or more masks that define the drop zones for the user's pictures, and optionally an overlay image image to be composited on top of the user pictures. It's also possible to provide placeholder user pictures that are shown in the drop zones until the user replaces them with his or her own pictures. </p><p>Each mask image defines a region where the user can drop a picture. The only data in the mask that is used is the alpha channel. When the user drops an image in the drop zone, the image is be rotated to match the bottom edge of the drop zone if it isn't horizontal. It is then sized, maintaining its proportions, so that it just covers the entire drop zone, and positioned over the drop zone. Next, the alpha from the mask is set as the alpha for the user's image. </p><p>When the message is sent, the components of the composite image and the user pictures are composited together to form a single image, which is sent as part of the message. The individual components and the individual user pictures are not sent.</p><p>If the stationery's HTML contains any references to composite images, the files used to produce the composite image (except for the ones that are supplied by the user, of course) should be included in the Resources folder of the stationery bundle. They should be identified with the Base Image, Overlay Image, and Masks keys in the Description section, as described above.</p><p>The final image is created with the Generic RGB colorsync profile so any other images in the tempate whose colors need to match this one should have that same colorsync profile.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_9" title="Thumbnail Image"></a><h3>Thumbnail Image</h3><p>Each stationery bundle should contain a thumbnail image of the stationery. The thumbnail image should have dimensions of 69x90 pixels.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_10" title="Color-Changing Stationery"></a><h3>Color-Changing Stationery</h3><p>Some stationery templates can change colors when the user clicks the background in a New Message window or clicks on the thumbnail image in the stationery selection pane. For example, see Apple's Daisies template. For such a template, the HTML file is almost the same for an ordinary template, but the bundle contains multiple versions of some or all of the images and the Description dictionary contains some additional and modified entries to describe the color changes. Color changes can affect background images, foreground images, and text fonts that are specified in font elements in the HTML.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_11" title="Image Files"></a><h4>Image Files</h4><p>For any image that changes color, the stationery bundle should contain a separate image file for each of the desired colors. An image that doesn't change color when the template changes needs only one image file. The changes needed in the Description file are described below. The names of the colors used in these entries are not visible to the user.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_12" title="Description Property List"></a><h4>Description Property List</h4><ul class="spaceabove"><li class="li"><p>Images—For a template that can change colors, each of the image names in this array should be replaced by a dictionary whose keys are the available colors. The value for each color should be the name of an image file. Even if an image doesn't change when the stationery changes colors, its entry must still be a dictionary. The dictionary of every entry must contain the complete set of colors.</p></li><li class="li"><p>Background Images—This entry should be modified as described above for the Images entry.</p></li><li class="li"><p>Composite Images—Base Image and Overlay Image. These entries should be modified as described above for the Images entry.</p></li><li class="li"><p>Font Colors—This entry provides a means for one or more fonts specified in the HTML to change color. The entry is a dictionary whose keys are class names of HTML font elements whose colors need to change. See the section describing the HTML file for more information about the class names. The value associated with each class name is a dictionary whose keys are the available colors and whose values are the HTML color values. These color values should be the strings that would appear in the HTML, for example <code>#a4b936</code>.</p></li><li class="li"><p>Default Color—This entry gives the name of the color that loads when the user first chooses the template. Changing this entry does not cause a different color to load initially; rather, this entry tells the application which set of images and font colors are referenced in the HTML.</p></li><li class="li"><p>Letter Rectangle—This entry describes the portion of the stationery outside of which the user can click to change the color. Normally, this region is a rectangle that looks like a piece of paper. It's a dictionary with two keys–Top Margin and Width. The value of Top Margin should give the distance in pixels between the top of the view and the top of the letter region. Width should give the width in pixels of the letter region. Mail assumes that the HTML is written so that the letter region is always centered in the view.</p></li></ul><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_13" title="HTML File"></a><h4>HTML File</h4><p>In order for a font color to change, it must be specified as a color attribute in a font element in the HTML, and the font element must have a class name. All the font elements that have the same color values can share the same class name. This class name is used as a key in the Font Colors entry of the Description file. </p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_14" title="Stationery Installation"></a><h2>Stationery Installation</h2><p>Stationery bundles are installed in one of two locations: <code>/Library/Application Support/Apple/Mail/Stationery</code> or <code>~/Library/Application Support/Mail/Stationery</code>. However, stationery bundles are not placed directly in these folders. At the root level of either of these locations is a company folder. By default, there is already an Apple company folder for all the preinstalled stationery templates. This company folder is referred to as a <strong>company bundle</strong>.</p><p>Like the stationery bundle, the company bundle contains a table of contents property list and a Contents folder which, in turn, contains a Resources folder. The Resources folder can contain a table of contents property list along with a folder for each category of stationery. When the user runs Mail, the stationery templates from all the company bundles are merged together when presented to the user. If multiple category bundles are found with the same display name, their templates are merged into a single list and the user sees them as a single category.  See <span class="content_text"><a href="stationery.html#//apple_ref/doc/uid/TP40006068-SW5">Figure 1</a></span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40006068-SW5" title="Figure 1Mail stationery categories"></a><p><strong>Figure 1&nbsp;&nbsp;</strong>Mail stationery categories</p><img src = "../Art/mailstationery.jpg" alt = "" ></div><br/><p>The table of contents file contains an an array of dictionaries, each of which describes one category (for a company bundle) or one stationery bundle (for a category bundle). The order of the entries in the dictionary determines the order in which the stationery templates or categories are displayed to the user. If the table of contents is missing or incomplete, Mail finds the stationery bundles or categories missing from the table of contents and displays them to the user.</p><p>The mail stationery bundles are installed within the category folders, known as <strong>category bundles</strong>. If the stationery is properly installed, the directory structure should look like <span class="content_text"><a href="stationery.html#//apple_ref/doc/uid/TP40006068-SW4">Figure 2</a></span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40006068-SW4" title="Figure 2Stationery directory structure"></a><p><strong>Figure 2&nbsp;&nbsp;</strong>Stationery directory structure</p><img src = "../Art/folders.jpg" alt = "" ></div><br/><a name="//apple_ref/doc/uid/TP40006068-SW2" title="Localization"></a><h2>Localization</h2><p>Some of the resources in the stationery, category, and company bundles can be localized using localization project folders. Mail uses the values in the <code>English.lproj</code> folder as defaults when it can't find values localized for other languages.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_15" title="Stationery Bundles"></a><h3>Stationery Bundles</h3><p>You can localize the stationery bundle’s display name by putting it in a localized strings file in the stationery bundle instead of in the description property list or the category's table of contents. The strings file should be named <code>DisplayName.strings</code>, and the key for the entry should be <code>Display Name</code>.</p><a name="//apple_ref/doc/uid/TP40006068-DontLinkElementID_16" title="Category Bundles"></a><h3>Category Bundles</h3><p>The display name of a category can be localized by putting it in a localized strings file in the category bundle instead of in the <code>TableOfContents.plist</code> file of the company bundle. The strings file should be named <code>DisplayName.strings</code>, and the key for the entry should be <code>Display Name</code>.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../MailAccountBundles.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-05-22<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Conceptual/MailArticles/Articles/stationery.html%3Fid%3DTP40006071-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Conceptual/MailArticles/Articles/stationery.html%3Fid%3DTP40006071-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Conceptual/MailArticles/Articles/stationery.html%3Fid%3DTP40006071-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

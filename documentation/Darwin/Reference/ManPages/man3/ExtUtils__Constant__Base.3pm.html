<html><head><title>Mac OS X
 Manual Page For ExtUtils::Constant::Base(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/ExtUtils::Constant::Base" title="Mac OS X
 Manual Page for ExtUtils::Constant::Base(3pm)"><a name="//apple_ref/doc/man/3/ExtUtils::Constant::Base" title="Mac OS X
 Manual Page for ExtUtils::Constant::Base(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/ExtUtils::Constant::Base"; name=ExtUtils::Constant::Base(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
ExtUtils::Constant::Base(3pm)         Perl Programmers Reference Guide         ExtUtils::Constant::Base(3pm)



<b>NAME</b>
       ExtUtils::Constant::Base - base class for ExtUtils::Constant objects

<b>SYNOPSIS</b>
           require ExtUtils::Constant::Base;
           @ISA = 'ExtUtils::Constant::Base';

<b>DESCRIPTION</b>
       ExtUtils::Constant::Base provides a base implementation of methods to generate C code to give fast
       constant value lookup by named string. Currently it's mostly used ExtUtils::Constant::XS, which gen-<font color="#ffffff" class="whiteout">erates&nbsp;generates</font>
       erates the lookup code for the <u>constant()</u> subroutine found in many XS modules.

<b>USAGE</b>
       ExtUtils::Constant::Base exports no subroutines. The following methods are available

       header
           A method returning a scalar containing definitions needed, typically for a C header file.

       memEQ_clause args_hashref
           A method to return a suitable C "if" statement to check whether <u>name</u> is equal to the C variable
           "name". If <u>checked</u><b>_</b><u>at</u> is defined, then it is used to avoid "memEQ" for short names, or to gener-<font color="#ffffff" class="whiteout">ate&nbsp;generate</font>
           ate a comment to highlight the position of the character in the "switch" statement.

           If i&lt;checked_at&gt; is a reference to a scalar, then instead it gives the characters pre-checked at
           the beginning, (and the number of chars by which the C variable name has been advanced. These
           need to be chopped from the front of <u>name</u>).

       dump_names arg_hashref, ITEM...
           An internal function to generate the embedded perl code that will regenerate the constant subrou-<font color="#ffffff" class="whiteout">tines.&nbsp;subroutines.</font>
           tines.  <u>default</u><b>_</b><u>type</u>, <u>types</u> and <u>ITEM</u>s are the same as for C_constant.  <u>indent</u> is treated as num-<font color="#ffffff" class="whiteout">ber&nbsp;number</font>
           ber of spaces to indent by.  If "declare_types" is true a $types is always declared in the perl
           code generated, if defined and false never declared, and if undefined $types is only declared if
           the values in <u>types</u> as passed in cannot be inferred from <u>default</u><b>_</b><u>types</u> and the <u>ITEM</u>s.

       assign arg_hashref, VALUE...
           A method to return a suitable assignment clause. If <u>type</u> is aggregate (eg <u>PVN</u> expects both
           pointer and length) then there should be multiple <u>VALUE</u>s for the components. <u>pre</u> and <u>post</u> if
           defined give snippets of C code to proceed and follow the assignment. <u>pre</u> will be at the start of
           a block, so variables may be defined in it.

       return_clause arg_hashref, ITEM
           A method to return a suitable "#ifdef" clause. <u>ITEM</u> is a hashref (as passed to "C_constant" and
           "match_clause". <u>indent</u> is the number of spaces to indent, defaulting to 6.

       switch_clause arg_hashref, NAMELEN, ITEMHASH, ITEM...
           An internal method to generate a suitable "switch" clause, called by "C_constant" <u>ITEM</u>s are in
           the hash ref format as given in the description of "C_constant", and must all have the names of
           the same length, given by <u>NAMELEN</u>.  <u>ITEMHASH</u> is a reference to a hash, keyed by name, values
           being the hashrefs in the <u>ITEM</u> list.  (No parameters are modified, and there can be keys in the
           <u>ITEMHASH</u> that are not in the list of <u>ITEM</u>s without causing problems - the hash is passed in to
           save generating it afresh for each call).

       params WHAT
           An "internal" method, subject to change, currently called to allow an overriding class to cache
           information that will then be passed into all the "*param*" calls. (Yes, having to read the
           source to make sense of this is considered a known bug). <u>WHAT</u> is be a hashref of types the con-<font color="#ffffff" class="whiteout">stant&nbsp;constant</font>
           stant function will return. In ExtUtils::Constant::XS this method is used to returns a hashref
           keyed IV NV PV SV to show which combination of pointers will be needed in the C argument list
           generated by C_constant_other_params_definition and C_constant_other_params

       dogfood arg_hashref, ITEM...
           An internal function to generate the embedded perl code that will regenerate the constant subrou-<font color="#ffffff" class="whiteout">tines.&nbsp;subroutines.</font>
           tines.  Parameters are the same as for C_constant.

           Currently the base class does nothing and returns an empty string.

       C_constant arg_hashref, ITEM...
           A function that returns a <b>list</b> of C subroutine definitions that return the value and type of con-<font color="#ffffff" class="whiteout">stants&nbsp;constants</font>
           stants when passed the name by the XS wrapper.  <u>ITEM...</u> gives a list of constant names. Each can
           either be a string, which is taken as a C macro name, or a reference to a hash with the following
           keys

           name    The name of the constant, as seen by the perl code.

           type    The type of the constant (<u>IV</u>, <u>NV</u> etc)

           value   A C expression for the value of the constant, or a list of C expressions if the type is
                   aggregate. This defaults to the <u>name</u> if not given.

           macro   The C pre-processor macro to use in the "#ifdef". This defaults to the <u>name</u>, and is
                   mainly used if <u>value</u> is an "enum". If a reference an array is passed then the first ele-<font color="#ffffff" class="whiteout">ment&nbsp;element</font>
                   ment is used in place of the "#ifdef" line, and the second element in place of the
                   "#endif". This allows pre-processor constructions such as

                       #if defined (foo)
                       #if !defined (bar)
                       ...
                       #endif
                       #endif

                   to be used to determine if a constant is to be defined.

                   A "macro" 1 signals that the constant is always defined, so the "#if"/"#endif" test is
                   omitted.

           default Default value to use (instead of "croak"ing with "your vendor has not defined...") to
                   return if the macro isn't defined. Specify a reference to an array with type followed by
                   <!-- a -->value(s)<!-- /a -->.

           pre     C code to use before the assignment of the value of the constant. This allows you to use
                   temporary variables to extract a value from part of a "struct" and return this as <u>value</u>.
                   This C code is places at the start of a block, so you can declare variables in it.

           post    C code to place between the assignment of value (to a temporary) and the return from the
                   function. This allows you to clear up anything in <u>pre</u>.  Rarely needed.

           def_pre
           def_post
                   Equivalents of <u>pre</u> and <u>post</u> for the default value.

           utf8    Generated internally. Is zero or undefined if name is 7 bit ASCII, "no" if the name is 8
                   bit (and so should only match if <u>SvUTF8()</u> is false), "yes" if the name is utf8 encoded.

                   The internals automatically clone any name with characters 128-255 but none 256+ (ie one
                   that could be either in bytes or utf8) into a second entry which is utf8 encoded.

           weight  Optional sorting weight for names, to determine the order of linear testing when multiple
                   names fall in the same case of a switch clause.  Higher comes earlier, undefined defaults
                   to zero.

           In the argument hashref, <u>package</u> is the name of the package, and is only used in comments inside
           the generated C code. <u>subname</u> defaults to "constant" if undefined.

           <u>default</u><b>_</b><u>type</u> is the type returned by "ITEM"s that don't specify their type. It defaults to the
           value of "default_type()". <u>types</u> should be given either as a comma separated list of types that
           the C subroutine <u>subname</u> will generate or as a reference to a hash. <u>default</u><b>_</b><u>type</u> will be added to
           the list if not present, as will any types given in the list of <u>ITEM</u>s. The resultant list should
           be the same list of types that "XS_constant" is given. [Otherwise "XS_constant" and "C_constant"
           may differ in the number of parameters to the constant function. <u>indent</u> is currently unused and
           ignored. In future it may be used to pass in information used to change the C indentation style
           used.]  The best way to maintain consistency is to pass in a hash reference and let this function
           update it.

           <u>breakout</u> governs when child functions of <u>subname</u> are generated.  If there are <u>breakout</u> or more
           <u>ITEM</u>s with the same length of name, then the code to switch between them is placed into a func-<font color="#ffffff" class="whiteout">tion&nbsp;function</font>
           tion named <u>subname</u>_<u>len</u>, for example "constant_5" for names 5 characters long.  The default <u>break</u>-<font color="#ffffff" class="whiteout">out&nbsp;breakout</font>
           <u>out</u> is 3.  A single "ITEM" is always inlined.

<b>BUGS</b>
       Not everything is documented yet.

       Probably others.

<b>AUTHOR</b>
       Nicholas Clark &lt;nick@ccl4.org&gt; based on the code in "h2xs" by Larry Wall and others



perl v5.8.8                                      2001-09-21                    ExtUtils::Constant::Base(3pm)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/ExtUtils__Constant__Base.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/ExtUtils__Constant__Base.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/ExtUtils__Constant__Base.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Web Services Programming Guide: Developing Direct to Web Services Applications</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Developing Direct to Web Services Applications"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001019-CH208" title="Developing Direct to Web Services Applications"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../InternetWeb/index.html#//apple_ref/doc/uid/TP30000440-TP30000469" target="_top">Internet &amp; Web</a> &gt; <a href="../../../InternetWeb/WebServices-date.html#//apple_ref/doc/uid/TP30000440-TP30000469-TP30000590" target="_top">Web Services</a> &gt; <a href="../About/About.html#//apple_ref/doc/uid/TP30001019-CH204-TPXREF101">WebObjects Web Services Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Web_Services/Web_Services.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory/RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF101" title="Developing Direct to Web Services Applications"></a>
    <h1>Developing Direct to Web Services Applications</h1>
    
        <p>
            <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_5"></a>
            This chapter describes the creation of a Direct to Web Services application. Direct to Web Services allows you to rapidly develop Web service–based applications that provide access to a data store. As other WebObjects rapid-development approaches, Direct to Web Services is a data model–based and rule-based application development approach.</p>
        <p>You create a project called <code>HousesForSale</code>
            , which provides a Web service with two operations, one to find information on houses for sale and another to find real-estate agents. If you don't want to create the project by hand, you can find it in <code>projects/HousesForSale</code>
            .</p>
        <p>The chapter contains the following sections:</p>
        <ul class="ul">
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF116">“The Data Model”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF117">“Creating a Direct to Web Services Application Project”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF118">“Web Services Assistant”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF119">“Adding a Web Service”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF120">“Adding an Operation”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF121">“Testing an Operation”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF122">“Using WODefaultWebService Operations”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF123">“Observing SOAP Messages Using TCPMonitor”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-CJBGIEEC">“Freezing Operations”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF124">“Unfreezing Operations”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF125">“Component-Based Operations”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF126">“Operations Derived From Fetch Specifications”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF127">“Using Transactions”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF129">“Using Global IDs”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF130">“Default Return Values of Operations”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-CJBCCCIH">“Creating a Custom Rule File”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF128">“Rule Editor Keys”</a></span>
                </p>
            </li>
        </ul>
    
    
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF116" title="The Data Model"></a>
            <h2>The Data Model</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_6"></a>
                The HousesForSale project includes the JavaRealEstate framework located in <code>/Library/Frameworks</code>
                . The framework contains the RealEstate data-model file. The data model defines several entities; you work with only two of them: Listing and ListingAddress. <span class="content_text">Figure 4-1</span>
                 shows the Listing entity definition and data from its corresponding database table; <span class="content_text">Figure 4-2</span>
                 does the same for the ListingAddress entity.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_7"></a>
            </p>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBDEIGE" title="Figure 4-1Listing entity defined in the RealEstate data model"></a>
                <p><strong>Figure 4-1&nbsp;&nbsp;</strong>Listing entity defined in the RealEstate data model</p>
                <img src = "../art/modlisting.gif" alt = "Listing entity defined in the RealEstate data model" width="473" height="375">
            </div><br/>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBJFEDJ" title="Figure 4-2ListingAddress entity defined in the RealEstate data model"></a>
                <p><strong>Figure 4-2&nbsp;&nbsp;</strong>ListingAddress entity defined in the RealEstate data model</p>
                <img src = "../art/modlistingaddress.gif" alt = "ListingAddress entity defined in the RealEstate data model" width="489" height="432">
            </div><br/>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF117" title="Creating a Direct to Web Services Application Project"></a>
            <h2>Creating a Direct to Web Services Application Project</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_8"></a>
                Follow these steps to create a Direct to Web Services–based application project:</p>
            <ol class="ol">
                <li class="li">
                    <p>Launch Project Builder, located in <code>/Developer/Applications</code>
                        .</p>
                </li>
                <li class="li">
                    <p>In the New Project pane of the Project Builder Assistant, select Direct to Web Services Application under WebObjects.</p>
                </li>
            </ol>
            <p>To create the HousesForSale project:</p>
            <ol class="ol">
                <li class="li">
                    <p>Name the project <code>HousesForSale</code>
                        .</p>
                </li>
                <li class="li">
                    <p>In the Choose EOAdaptors pane, make sure the JDBC adaptor is selected.</p>
                </li>
                <li class="li">
                    <p>In the Choose Frameworks pane, add the JavaRealEstate framework located in <code>/Library/Frameworks</code>
                        .</p>
                </li>
                <li class="li">
                    <p>In the Build and Launch Project pane, deselect "Build and launch project now."</p>
                </li>
                <li class="li">
                    <p>Edit the Properties file so that it looks like <span class="content_text">Listing 4-1</span>
                        .</p>
                    <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBEAEFA" title="Listing 4-1Properties file of the HousesForSale project"></a>
                        <br/><br/><p class="codesample"><strong>Listing 4-1&nbsp;&nbsp;</strong>Properties file of the HousesForSale project</p>
                        <div class="codesample"><table><tr><td scope="row"><pre>WOAutoOpenInBrowser false<span></span></pre></td></tr><tr><td scope="row"><pre>WOPort 5210<span></span></pre></td></tr></table></div>
                    
                </li>
                <li class="li">
                    <p>Build and run the application.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_9"></a>
                    </p>
                </li>
            </ol>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF118" title="Web Services Assistant"></a>
            <h2>Web Services Assistant</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_10"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_11"></a>
                To customize a Direct to Web Services application you use the Web Services Assistant. It's located in <code>/Developer/Applications</code>
                . With it you define an operation's parameters and return values. In addition, you determine whether the operation's result is returned as an array of enterprise-object instances or as a SOAP document, which can be traversed using an NSDictionary.</p>
            <p>After you launch the Assistant, the Connect dialog<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_12"></a>
                 appears (<span class="content_text">Figure 4-3</span>
                ). Enter <code>http://localhost:&lt;port></code>
                 in the text input field and click Connect.</p>
            <p>To connect to the HousesForSale application, enter <code>http://localhost:5210</code>
                .</p>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBJGIEJ" title="Figure 4-3Connect dialog of Web Services Assistant"></a>
                <p><strong>Figure 4-3&nbsp;&nbsp;</strong>Connect dialog of Web Services Assistant</p>
                <img src = "../art/wsaconnect.gif" alt = "Connect dialog of Web Services Assistant" width="310" height="114">
            </div><br/>
            <p>
                <span class="content_text">Figure 4-4</span>
                 shows the Web Services Assistant main window.</p>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBHJAAF" title="Figure 4-4The Web Services Assistant main window"></a>
                <p><strong>Figure 4-4&nbsp;&nbsp;</strong>The Web Services Assistant main window</p>
                <img src = "../art/wsadefault.gif" alt = "The Web Services Assistant main window" width="629" height="368">
            </div><br/>
            <p>Initially, your application contains one Web service named WODefaultWebService, which is disabled by default. You should enable this service during development only. When the service is enabled and you add an entity to the service's Public Entity list, the Assistant creates <code>insert</code>
                , <code>update</code>
                , <code>search</code>
                , and <code>delete</code>
                 operations for it, in addition to fetch-specification based operations. You can then copy those operations to a custom service, intended for public consumption. See <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF122">“Using WODefaultWebService Operations”</a></span>
                 for details.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_13"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_14"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF119" title="Adding a Web Service"></a>
            <h2>Adding a Web Service</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_15"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_16"></a>
                These are the steps you need to perform to add a Web service to a Direct to Web Services application:</p>
            <ol class="ol">
                <li class="li">
                    <p>In the Web Services Assistant main window, select the server application in the left-hand side list.</p>
                </li>
                <li class="li">
                    <p>Click the New Service toolbar button.</p>
                </li>
                <li class="li">
                    <p>Enter the name of the service in the Service Name text input field.</p>
                </li>
                <li class="li">
                    <p>Select the entities you want to use in the Web service.</p>
                </li>
            </ol>
            <p>To add the HouseSearch Web service to the HousesForSale application:</p>
            <ol class="ol">
                <li class="li">
                    <p>Select <code>http://localhost:5210</code>
                         in the left-hand side list.</p>
                </li>
                <li class="li">
                    <p>Click New Service.</p>
                </li>
                <li class="li">
                    <p>Enter HouseSearch in the Service Name text field.</p>
                </li>
                <li class="li">
                    <p>Select Listing and ListingAddress in the Available list of the Public Entities pane and click the button with the left-pointing arrow.</p>
                </li>
                <li class="li">
                    <p>Make sure Enabled is selected.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_17"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_18"></a>
                    </p>
                </li>
            </ol>
            <br/><div>
                <img src = "../art/wsahousesearch.gif" alt = "image: ../art/wsahousesearch.gif" width="629" height="366">
            </div><br/>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF120" title="Adding an Operation"></a>
            <h2>Adding an Operation</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_19"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_20"></a>
                These are the steps you need to perform to add an operation to a Web service:</p>
            <ol class="ol">
                <li class="li">
                    <p>In the Web Services Assistant, click the New Operation toolbar button.</p>
                </li>
                <li class="li">
                    <p>Set the name and type of the operation in the New Operation dialog:</p>
                    <ol class="ol">
                        <li class="ol ol">
                            <p>Enter the name of the operation in the Name text input field.</p>
                        </li>
                        <li class="ol ol">
                            <p>From the Entity pop-up menu, choose the entity the operation is to act on.</p>
                        </li>
                        <li class="ol ol">
                            <p>From the Type pop-up menu, choose the type of the operation: search, insert, update, or delete.</p>
                        </li>
                        <li class="ol ol">
                            <p>Click OK.</p>
                        </li>
                    </ol>
                </li>
                <li class="li">
                    <p>Define the operation's arguments and return values in the Arguments and Return Values panes, respectively.</p>
                </li>
            </ol>
            <p>To add the <code>findHouseByAskingPrice</code>
                 operation to the HouseSearch Web service of the HousesForSale application, follow these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>Click New Operation.</p>
                </li>
                <li class="li">
                    <p>Enter <code>findHouseByAskingPrice</code>
                         in the Name text field.</p>
                </li>
                <li class="li">
                    <p>Choose Listing from the Entity pop-up menu.</p>
                </li>
                <li class="li">
                    <p>Make sure Type is "search."</p>
                </li>
                <li class="li">
                    <p>Make sure HouseSearch is selected in the Services list and click OK.</p>
                    <div class="item_figure"><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBCIGHC" title="Figure 4-5The New Operation dialog"></a>
                        <p><strong>Figure 4-5&nbsp;&nbsp;</strong>The New Operation dialog</p>
                        <img src = "../art/wsanewoperation.gif" alt = "The New Operation dialog" width="214" height="196">
                    </div>
                </li>
                <li class="li">
                    <p>In the main window (<span class="content_text">Figure 4-6</span>
                        ), select <code>askingPrice</code>
                         in the Available list in the Arguments pane and click the button with the left-pointing arrow twice.</p>
                </li>
                <li class="li">
                    <p>Select the first row of the Selected list, enter <code>low</code>
                         in the Public Name text input field, and choose ">" from the Operator pop-up menu.</p>
                </li>
                <li class="li">
                    <p>Select the second row, enter <code>high</code>
                         in the Public Name text field, and choose "&lt;" from the Operator pop-up menu.</p>
                    <div class="item_figure"><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBGEDGA" title="Figure 4-6The findHouseByAskingPrice operation of the HouseSearch Web service"></a>
                        <p><strong>Figure 4-6&nbsp;&nbsp;</strong>The findHouseByAskingPrice operation of the HouseSearch Web service</p>
                        <img src = "../art/wsafindhouse.gif" alt = "The findHouseByAskingPrice operation of the HouseSearch Web service" width="646" height="369">
                    </div>
                </li>
                <li class="li">
                    <p>In the Return Values pane, select <code>askingPrice</code>
                         from the Available list and click the button with the left-pointing arrow. Repeat for <code>address.appNum</code>
                        , <code>address.street</code>
                        , <code>address.city</code>
                        , <code>address.state</code>
                        , and <code>address.zip</code>
                        .</p>
                    <div class="item_figure">
                        <img src = "../art/wsafindhousereturnval.gif" alt = "image: ../art/wsafindhousereturnval.gif" width="643" height="367">
                    </div>
                </li>
            </ol>
            <p>Notice that the Selected list of the Return Values pane contains two columns: Property Name and Public Name. The Property Name column shows the fully qualified name of the property as shown in the Available list—including key paths—such as <code>address.city</code>
                . The Public Name column shows the name to be used for operation parameters and return values. You can use different names for those properties, especially since periods cannot be used within the names of operation parameters and return values. The Web Services Assistant removes periods from key paths and capitalizes the first letter of each node of the key path except the first node. So, <code>address.city</code>
                 becomes <code>addressCity</code>
                . See <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF121">“Testing an Operation”</a></span>
                 for an example response to an invocation of the <code>findHouseByAskingPrice</code>
                 operation.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_21"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_22"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF121" title="Testing an Operation"></a>
            <h2>Testing an Operation</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_23"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_24"></a>
                To test an existing operation in the Web Services Assistant, perform these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>Select the operation you want to test from the left-hand side list.</p>
                    <p>For testing purposes, it's appropriate to select Return SOAP Struct. That setting is also appropriate when the applications that consume the operation are not WebObjects applications.</p>
                </li>
                <li class="li">
                    <p>Click the Test toolbar button.</p>
                    <p>The Testing pane of the test window, shown in <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF104">Figure 4-7</a></span>
                        , has two panes: the Parameters pane and the Result pane. In the Parameters pane you enter the values for the operation's parameters. When you click Test, the Result pane shows the return values of the operation.</p>
                </li>
                <li class="li">
                    <p>In the Parameters pane of the Test window, enter values for the operation's parameters and click Test.</p>
                </li>
            </ol>
            <p>To test the <code>findHouseByAskingPrice</code>
                 operation of the HouseSearch service of the HousesForSale example, follow these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>Select <code>findHouseByAskingPrice</code>
                         under HouseSearch under <code>http://localhost:5210</code>
                        .</p>
                </li>
                <li class="li">
                    <p>Select Return SOAP Struct.</p>
                </li>
                <li class="li">
                    <p>Click the Test toolbar button.</p>
                </li>
                <li class="li">
                    <p> Enter <code>250000</code>
                         in the Low text input field, <code>350000</code>
                         in the High text field, and click Test.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_25"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_26"></a>
                    </p>
                </li>
            </ol>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF104" title="Figure 4-7The test window of the findHouseByAskingPrice operation"></a>
                <p><strong>Figure 4-7&nbsp;&nbsp;</strong>The test window of the <code>findHouseByAskingPrice</code>
                     operation</p>
                <img src = "../art/wsatestfindhouse.gif" alt = "The test window of the findHouseByAskingPrice operation" width="465" height="476">
            </div><br/>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF122" title="Using WODefaultWebService Operations"></a>
            <h2>Using WODefaultWebService Operations</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_27"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_28"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_29"></a>
                Although creating operations is made easy by the Web Services Assistant, you may want to get a head start. When you add entities to the WODefaultWebService service, the Assistant adds four operations: <code>insert</code>
                , <code>update</code>
                , <code>search</code>
                , and <code>delete</code>
                . By default only the <code>search</code>
                 operation is enabled. In addition, operations are created for all fetch specifications defined in the data model for the entity.</p>
            <p>To use an operation from WODefaultWebService in another Web service provided by the same application, follow these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>In the Web Services Assistant, select WODefaultWebService in the left-hand side list.</p>
                </li>
                <li class="li">
                    <p>Add the necessary entities to the Public Entities list of WODefaultWebService. </p>
                    <p>Note that you cannot delete automatically generated operations from WODefaultWebService. But you can remove an entity from the Public Entities list, which removes all the automatically generated operations based on that entity.</p>
                </li>
                <li class="li">
                    <p>Select the operation of WODefaultWebService you want to use in another Web service.</p>
                </li>
                <li class="li">
                    <p>Click the Clone toolbar button.</p>
                </li>
                <li class="li">
                    <p>In the Clone dialog, enter a name for the new operation and click Clone.</p>
                </li>
                <li class="li">
                    <p>Select the new operation in the left-hand side list and display the Services pane.</p>
                </li>
                <li class="li">
                    <p>Select the Web service you want to add the operation to in the Available list and click the button with the left-pointing arrow.</p>
                    <p>You can remove the operation from WODefaultWebService by selecting WODefaultWebService in the Selected list and clicking the "–" button.</p>
                </li>
            </ol>
            <p>To create the <code>findHouseByCity</code>
                 operation for the HouseSearch Web service, based on the automatically generated <code>searchListingAddress</code>
                 operation of WODefaultWebService, follow these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>In the Web Services Assistant, select WODefaultWebService under <code>http://localhost:5210</code>
                        .</p>
                </li>
                <li class="li">
                    <p>In the Public Entities pane, select ListingAddress in the Available list and click the button with the left-pointing arrow.</p>
                    <p>Web Services Assistant adds four operations to WODefaultWebService: <code>deleteListingAddress</code>
                        , <code>insertListingAddress</code>
                        , <code>searchListingAddress</code>
                        , and <code>updateListingAddress</code>
                        . Notice that only the <code>searchListingAddress</code>
                         operation is enabled.</p>
                    <div class="item_figure">
                        <img src = "../art/wsadefaultoperations.gif" alt = "image: ../art/wsadefaultoperations.gif" width="645" height="367">
                    </div>
                </li>
                <li class="li">
                    <p>Select <code>searchListingAddress</code>
                         under WODefaultWebService.</p>
                </li>
                <li class="li">
                    <p>Click the Clone toolbar button, enter <code>findHouseByCity</code>
                         in the text input field of the Clone dialog, and click Clone.</p>
                    <div class="item_figure">
                        <img src = "../art/wsaclone.gif" alt = "image: ../art/wsaclone.gif" width="214" height="114">
                    </div>
                </li>
                <li class="li">
                    <p>Select <code>findHouseByCity</code>
                         under WODefaultWebService.</p>
                </li>
                <li class="li">
                    <p>In the Services pane, select HouseSearch in the Available list and click the button with the left-pointing arrow.</p>
                </li>
                <li class="li">
                    <p>In the Selected pane, select WODefaultWebService and click the "–" button. The operation is now part of the HouseSearch Web service.</p>
                    <div class="item_figure">
                        <img src = "../art/wsafindhousebycity.gif" alt = "image: ../art/wsafindhousebycity.gif" width="646" height="365">
                    </div>
                </li>
                <li class="li">
                    <p>Select <code>findHouseByCity</code>
                         under HouseSearch and display the Arguments pane.</p>
                </li>
                <li class="li">
                    <p>Select the <code>aptNum</code>
                         property in the Selected list and click the button with the minus sign. Repeat for <code>street</code>
                         and <code>zip</code>
                        .</p>
                </li>
                <li class="li">
                    <p>In the Return Values pane, remove all properties from the Selected list.</p>
                </li>
                <li class="li">
                    <p>Select <code>listing.askingPrice</code>
                         in the Available list and click the button with the left-pointing arrow. Repeat for <code>listing.bathrooms</code>
                        , <code>listing.bedrooms</code>
                        , and <code>listing.yearBuilt</code>
                        .</p>
                    <div class="item_figure">
                        <img src = "../art/wsafindhousebycityretval.gif" alt = "image: ../art/wsafindhousebycityretval.gif" width="647" height="364">
                    </div>
                </li>
                <li class="li">
                    <p>Select Return SOAP Struct and test the operation.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_30"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_31"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_32"></a>
                    </p>
                    <div class="item_figure">
                        <img src = "../art/wsatestfindhousebycity.gif" alt = "image: ../art/wsatestfindhousebycity.gif" width="464" height="475">
                    </div>
                </li>
            </ol>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF123" title="Observing SOAP Messages Using TCPMonitor"></a>
            <h2>Observing SOAP Messages Using TCPMonitor</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_33"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_34"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_35"></a>
                Sometimes you may find it useful to see the SOAP messages as they are transmitted between Web service consumers and providers. Follow these steps to observe the communication that occurs between the Web Services Assistant and your Direct to Web Services application:</p>
            <ol class="ol">
                <li class="li">
                    <p>Make sure the Web Services Assistant is not connected to the Direct to Web Services application whose communication you want to monitor and that the application itself is not running.</p>
                </li>
                <li class="li">
                    <p>In Project Builder, add a custom rule file called <code>d2w.d2wmodel</code>
                        (if it doesn't already exist), and assign it to the Application Server target. See <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-CJBCCCIH">“Creating a Custom Rule File”</a></span>
                         for details.</p>
                </li>
                <li class="li">
                    <p>Open <code>d2w.d2wmodel</code>
                         in Rule Editor.</p>
                    <p>Control-click <code>d2w.d2wmodel</code>
                         and choose "Open with Finder."</p>
                </li>
                <li class="li">
                    <p>In Rule Editor, add the following rule and save the <code>d2w.d2wmodel</code>
                         file:</p>
                    <ul class="simple-spaceabove">
                        <li>
                            <p>Left-Hand Side: <code>(serviceName = '&lt;serviceName>')</code>
                                .</p>
                        </li>
                        <li>
                            <p>Key: <code>serviceLocationURL</code>
                                .</p>
                        </li>
                        <li>
                            <p>Value: <code>"http://&lt;host>:&lt;TCPMonitorListenPort>/cgi-bin/WebObjects/&lt;applicationName>.woa/ws/&lt;serviceName>"</code>
                                .</p>
                        </li>
                        <li>
                            <p>Priority: <code>50</code>
                                .</p>
                        </li>
                    </ul>
                </li>
                <li class="li">
                    <p>Launch TCPMonitor by double-clicking TCPMonitor in <code>/Developer/Examples/JavaWebObjects</code>
                        , and enter the appropriate values in the Listen Port and Target Port text input fields, the port that TCPMonitor monitors and your application's port, respectively. Click Add.</p>
                </li>
                <li class="li">
                    <p>In the Web Services Assistant, connect to your application through the port that TCPMonitor monitors.</p>
                </li>
            </ol>
            <p>To observe the communication that happens between the Web Services Assistant and HousesForSale, follow these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>In the Web Services Assistant, save the application's Web service configuration and close the Web Services Assistant window.</p>
                </li>
                <li class="li">
                    <p>In Project Builder, add a custom rule file named <code>d2w.d2wmodel</code>
                         to the application project if it doesn't already exist.</p>
                </li>
                <li class="li">
                    <p>Open the <code>d2w.d2wmodel</code>
                         file in Rule Editor and add the following rule:</p>
                    <ul class="simple-spaceabove">
                        <li>
                            <p>Left-Hand Side: <code>(serviceName = 'HouseSearch')</code>
                                .</p>
                        </li>
                        <li>
                            <p>Key: <code>serviceLocationURL</code>
                                .</p>
                        </li>
                        <li>
                            <p>Value: <code>"http://localhost:5299/cgi-bin/WebObjects/HousesForSale.woa/ws/HouseSearch"</code>
                                .</p>
                        </li>
                        <li>
                            <p>Priority: <code>50</code>
                                .</p>
                        </li>
                    </ul>
                </li>
                <li class="li">
                    <p>Save the <code>d2w.d2wmodel</code>
                         file and build and run the application.</p>
                </li>
                <li class="li">
                    <p>Launch TCPMonitor.</p>
                </li>
                <li class="li">
                    <p>Enter <code>5299</code>
                         in the Listen Port text input field and <code>5210</code>
                         in the Target Port text field and click Add.</p>
                </li>
                <li class="li">
                    <p>Display the Port <code>5299</code>
                         pane of TCPMonitor.</p>
                </li>
                <li class="li">
                    <p>In the Web Services Assistant, enter <code>http://localhost:5299</code>
                         in the text input field of the Connect dialog and click Connect.</p>
                    <p>Notice that TCPMonitor shows you the request and response documents as the Web Services Assistant communicates with the HousesForSale application.</p>
                </li>
                <li class="li">
                    <p>If you test the <code>findByCity</code>
                         or <code>findByAskingPrice</code>
                         operations, TCPMonitor logs the SOAP request the Assistant sends to the application as well as the response sent by the application as shown in <span class="content_text">Figure 4-8</span>
                        .<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_36"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_37"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_38"></a>
                    </p>
                    <div class="item_figure"><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBFIGED" title="Figure 4-8TCPMonitor window"></a>
                        <p><strong>Figure 4-8&nbsp;&nbsp;</strong>TCPMonitor window</p>
                        <img src = "../art/tcpmonitor.gif" alt = "TCPMonitor window" width="893" height="688">
                    </div>
                </li>
            </ol>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBGIEEC" title="Freezing Operations"></a>
            <h2>Freezing Operations</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_39"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_40"></a>
                You can freeze operations when you need to customize their workings. Frozen operations take the form of Web components in your application project. When you freeze an operation, the parts of the Web service's WSDL document that correspond to the operation are frozen as well. In addition, you cannot use the Web Services Assistant to customize further a frozen operation; for example, you cannot add or remove arguments or return values with the Assistant. If you need to do so, you have to edit the Java file and WSDL document manually.</p>
            <p>The following list itemizes the steps needed to freeze an operation.</p>
            <ol class="ol">
                <li class="li">
                    <p>In the Web Services Assistant, select the operation you want to freeze and click the Freeze toolbar button. In the Freeze dialog, enter the name of the frozen-operation component and click Freeze.</p>
                    <div class="item_figure">
                        <img src = "../art/wsafreeze.gif" alt = "image: ../art/wsafreeze.gif" width="219" height="114">
                    </div>
                    <div class="item_figure">
                        <img src = "../art/wsafindhousebycityfrozen.gif" alt = "image: ../art/wsafindhousebycityfrozen.gif" width="644" height="367">
                    </div>
                    <p>The Assistant adds the FindHouseByCity component to the HouseForSale project, as shown in <span class="content_text">Figure 4-9</span>
                        .</p>
                    <div class="item_figure"><a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF114" title="Figure 4-9The FindHouseByCity component&acirc;&#128;&#148;the frozen version of the findHouseByCity operation"></a>
                        <p><strong>Figure 4-9&nbsp;&nbsp;</strong>The FindHouseByCity component—the frozen version of the <code>findHouseByCity</code>
                             operation</p>
                        <img src = "../art/pbfindhousebycity.gif" alt = "The FindHouseByCity component—the frozen version of the findHouseByCity operation" width="531" height="285">
                    </div>
                </li>
                <li class="li">
                    <p>Save the Web service configuration and close the Web Services Assistant window.</p>
                </li>
                <li class="li">
                    <p>Restart the application.</p>
                </li>
            </ol>
            <p>The WSDL document corresponding to a frozen operation is stored in the HTML file of the corresponding component. <span class="content_text">Listing 4-2</span>
                 shows the WSDL document for the frozen <code>findHouseByCity</code>
                 operation.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBFCJBH" title="Listing 4-2The WSDL document of the frozen findHouseByCity operation&acirc;&#128;&#148;the HTML file of the FindHouseByCity component"></a>
                <p class="codesample"><strong>Listing 4-2&nbsp;&nbsp;</strong>The WSDL document of the frozen findHouseByCity operation—the HTML file of the FindHouseByCity component</p>
                <div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;definitions name="[AnyService]Definition"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:xsd="http://www.w3.org/2001/XMLSchema"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:tns="http://17.203.33.19/cgi-bin/WebObjects/HousesForSale.woa/ws/<span></span></pre></td></tr><tr><td scope="row"><pre>[AnyService]/wsdl"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns="http://schemas.xmlsoap.org/wsdl/"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:lang="http://lang.java/"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:webobjects="http://www.apple.com/webobjects/webservices/soap/"<span></span></pre></td></tr><tr><td scope="row"><pre>    targetNamespace="http://17.203.33.19/cgi-bin/WebObjects/HousesForSale.woa/ws/<span></span></pre></td></tr><tr><td scope="row"><pre>[AnyService]/wsdl"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;types><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/types><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="findHouseByCityInput"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;part type="xsd:string" name="city"/><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;part type="xsd:string" name="state"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="findHouseByCityOutput"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;part type="xsd:anyType" name="return"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="WSDLInput"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="WSDLOutput"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;part type="xsd:anyType" name="return"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="beginTransactionInput"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="beginTransactionOutput"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;part type="xsd:anyType" name="return"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="commitTransactionInput"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="commitTransactionOutput"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;part type="xsd:anyType" name="return"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="rollbackTransactionInput"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;message name="rollbackTransactionOutput"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;part type="xsd:anyType" name="return"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/message><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;portType name="[AnyService]PortType"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="findHouseByCity" parameterOrder="city state"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input message="tns:findHouseByCityInput"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output message="tns:findHouseByCityOutput"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="WSDL"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input message="tns:WSDLInput"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output message="tns:WSDLOutput"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="beginTransaction"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input message="tns:beginTransactionInput"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output message="tns:beginTransactionOutput"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="commitTransaction"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input message="tns:commitTransactionInput"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output message="tns:commitTransactionOutput"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="rollbackTransaction"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input message="tns:rollbackTransactionInput"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output message="tns:rollbackTransactionOutput"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/portType><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;binding type="tns:[AnyService]PortType"<span></span></pre></td></tr><tr><td scope="row"><pre> name="[AnyService]SoapBinding">&lt;soap:binding style="rpc"<span></span></pre></td></tr><tr><td scope="row"><pre> transport="http://schemas.xmlsoap.org/soap/http"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="findHouseByCity"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;soap:operation soapAction="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/input><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/output><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="WSDL"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;soap:operation soapAction="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/input><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/output><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="beginTransaction"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;soap:operation soapAction="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/input><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/output><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="commitTransaction"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;soap:operation soapAction="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/input><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/output><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;operation name="rollbackTransaction"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;soap:operation soapAction="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/input><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;output><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;soap:body use="encoded" namespace="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl" encodingStyle=<span></span></pre></td></tr><tr><td scope="row"><pre>"http://schemas.xmlsoap.org/soap/encoding/"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/output><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/operation><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/binding><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;service name="[AnyService]"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;port name="[AnyService]Port" binding="tns:[AnyService]SoapBinding"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;soap:address location="http://17.203.33.19/cgi-bin/WebObjects/<span></span></pre></td></tr><tr><td scope="row"><pre>HousesForSale.woa/ws/[AnyService]/wsdl"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/port><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/service><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/definitions><span></span></pre></td></tr></table></div>	
            
            <p>In addition to the <code>findHouseByCity</code>
                 operation, the frozen WSDL document defines four additional operations: <code>WSDL</code>
                , <code>beginTransaction</code>
                , <code>commitTransaction</code>
                , and <code>rollbackTransaction</code>
                . The WSDL method can returns the WSDL document for the Web service. Consumers can use the rest of the additional operations to implement rudimentary transaction processing. For more information, see <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-TPXREF127">“Using Transactions”</a></span>
                .<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_41"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_42"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF124" title="Unfreezing Operations"></a>
            <h2>Unfreezing Operations</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_43"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_44"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_45"></a>
                To unfreeze a frozen operation follow these steps:</p>
            <ol class="ol">
                <li class="li">
                    <p>In the Web Services Assistant, select the operation you want to unfreeze.</p>
                </li>
                <li class="li">
                    <p>Click Unfreeze in the Freezing pane.</p>
                </li>
                <li class="li">
                    <p>Save the Web service configuration.</p>
                </li>
                <li class="li">
                    <p>In Project Builder, delete the corresponding component.</p>
                    <ol class="ol">
                        <li class="ol ol">
                            <p>Select the component under the Web Components group.</p>
                        </li>
                        <li class="ol ol">
                            <p>Choose Edit > Delete.</p>
                        </li>
                        <li class="ol ol">
                            <p>In the Delete References dialog, click Delete References &amp; Files.</p>
                        </li>
                    </ol>
                </li>
            </ol>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF125" title="Component-Based Operations"></a>
            <h2>Component-Based Operations</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_46"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_47"></a>
                <span class="content_text"><a href="DtoWS.html#//apple_ref/doc/uid/TP30001019-CH208-CJBGIEEC">“Freezing Operations”</a></span>
                 indicated that when you freeze an operation, the operation's WSDL document as well as its parameters and return values cannot be customized using the Web Services Assistant. However, you can create custom operations whose WSDL document is dynamically generated. For that you need to copy the <code>templates/Direct to Web Services Operation.pbfiletemplate.pbfiletemplate</code>
                 to <code>/Developer/ProjectBuilder Extras/File Templates/WebObjects</code>
                .</p>
            <p>Follow these steps to create an operation with a dynamic WSDL document for the HousesForSale application:</p>
            <ol class="ol">
                <li class="li">
                    <p>Create an operation using the Web Services Assistant.</p>
                    <div class="item_figure">
                        <img src = "../art/wsaloginoperation.gif" alt = "image: ../art/wsaloginoperation.gif" width="214" height="196">
                    </div>
                </li>
                <li class="li">
                    <p>Save the Web service configuration and close the Web Services Assistant window.</p>
                </li>
                <li class="li">
                    <p>In Project Builder, select the Web Components group and add a Direct to Web Services Operation component with the same name of the operation added in the Web Services Assistant.</p>
                    <p>To confirm that the component's <code>invoke</code>
                         method is invoked, edit the <code>invoke</code>
                         method of its Java file so that it like this:</p>
                    
                        <div class="codesample"><table><tr><td scope="row"><pre>public Object invoke() {<span></span></pre></td></tr><tr><td scope="row"><pre>    System.out.println("LogIn operation invoked.");<span></span></pre></td></tr><tr><td scope="row"><pre>    return super.invoke();<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
                    
                </li>
                <li class="li">
                    <p>Add the following rule to the <code>d2w.d2wmodel</code>
                         file:</p>
                    <ul class="simple-spaceabove">
                        <li>
                            <p>Left-Hand Side: <code>(operationName = 'LogIn')</code>
                                .</p>
                        </li>
                        <li>
                            <p>Key: <code>operationClassName</code>
                                .</p>
                        </li>
                        <li>
                            <p>Value: <code>"LogIn"</code>
                                .</p>
                        </li>
                        <li>
                            <p>Priority: <code>50</code>
                                .</p>
                        </li>
                    </ul>
                </li>
                <li class="li">
                    <p>Save <code>d2w.d2wmodel</code>
                        .</p>
                </li>
                <li class="li">
                    <p>Rebuild and run the application.</p>
                </li>
                <li class="li">
                    <p>Connect to the application through the Web Services Assistant.</p>
                </li>
                <li class="li">
                    <p>Test the operation. Make sure that you see the test output in the console (Project Builder's Run pane).<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_48"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_49"></a>
                    </p>
                </li>
            </ol>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF126" title="Operations Derived From Fetch Specifications"></a>
            <h2>Operations Derived From Fetch Specifications</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_50"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_51"></a>
                When you make public an entity with fetch specifications in the Web Services Assistant, the Assistant creates operations corresponding to those fetch specifications. You can see the arguments the operations require and the return values in the Arguments pane and the Return Values panes, respectively.</p>
            <p>To modify an operation that is based on a fetch specification from a data model, you must edit the fetch specification in the model and rebuild the application.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_52"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_53"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF127" title="Using Transactions"></a>
            <h2>Using Transactions</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_54"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_55"></a>
                Direct to Web Services supports light-weight transactions. These transactions are editing context–based and cannot be nested. See the reference documentation for <code>com.webobjects.eocontrol.EOEditingContext</code>
                 for more information on editing contexts.</p>
            <p>When you select Allows Transactions in the Web Services Assistant for a given Web service and restart the service-provider application, three additional operations become available: <code>beginTransaction</code>
                , <code>commitTransaction</code>
                , and <code>rollbackTransaction</code>
                . These transactions are not visible in the Assistant, but you can view them in the Web service's WSDL document. The following list provides an overview of each operation.</p>
            <ul class="ul">
                <li class="li">
                    <p>
                        <code>beginTransaction</code>
                        : You invoke this operation before invoking operations that modify data in a data store. After invoking the operation, calls to <code>EOEditingContext.saveChangesInEditingContext</code>
                         have no effect. To learn more, see the reference documentation for WOBeginTransactionOperation<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_56"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_57"></a>
                         in <code>com.webobjects.webservices.generation</code>
                        .</p>
                </li>
                <li class="li">
                    <p>
                        <code>commitTransaction</code>
                        : Saves the changes made to the editing context (<code>com.webobjects.eocontrol.EOEditingContext</code>
                        ) used by the Web service. To learn more, see the reference documentation for WOCommitTransactionOperation<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_58"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_59"></a>
                         in <code>com.webobjects.webservices.generation</code>
                        .</p>
                </li>
                <li class="li">
                    <p>
                        <code>rollbackTransaction</code>
                        : Resets the editing context used by the Web service. To learn more, see the reference documentation for WORollbackTransactionOperation<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_60"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_61"></a>
                         in <code>com.webobjects.webservices.generation</code>
                        .<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_62"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_63"></a>
                    </p>
                </li>
            </ul>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF129" title="Using Global IDs"></a>
            <h2>Using Global IDs</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_64"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_65"></a>
                Using the Return SOAP Struct option in the Web Services Assistant you can determine whether an operation returns a <code>SOAP-struct</code>
                 element or one or more enterprise objects. When an operation is invoked from other WebObjects applications, you should not select Return SOAP Struct. That way the client application can access data, such as global IDs with relative ease.</p>
            <p>Sometimes you may need to create operations that create enterprise objects that are part of a relationship. For example, <span class="content_text">Figure 4-10</span>
                 shows the relationships between two data entities: the <code>books</code>
                 relationship of Authors and the <code>author</code>
                 relationship of Book.</p>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBICFCH" title="Figure 4-10Relationship between Author entity and Book entity"></a>
                <p><strong>Figure 4-10&nbsp;&nbsp;</strong>Relationship between Author entity and Book entity</p>
                <img src = "../art/modrelationships.gif" alt = "Relationship between Author entity and Book entity" width="259" height="79">
            </div><br/>
            <p>Also notice that the <code>authorId</code>
                 attribute of Book is part of the entity's primary key. This means that a Book enterprise object cannot be added to the data store without a value for the <code>authorId</code>
                 attribute. (You cannot add a book to the data store without a corresponding author.) Creating an operation in Web Services Assistant that creates an author record and a book record is not possible. However, a method in a client of an Author Web service can invoke the <code>addAuthor</code>
                 and <code>addBook</code>
                 operations to perform the procedure. For that, you have to use global IDs (<code>com.webobjects.eocontrol.EOKeyGlobalID).</code>
                <span class="content_text">Listing 4-3</span>
                 shows a possible implementation of such a method, named <code>addBookForAuthor</code>
                , while <span class="content_text">Listing 4-4</span>
                 shows the methods that invoke the Web service operations that interact with the data store.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBHJGBE" title="Listing 4-3 addBookForAuthor method"></a>
                <p class="codesample"><strong>Listing 4-3&nbsp;&nbsp;</strong>
                    <code>addBookForAuthor</code>
                     method</p>
                <div class="codesample"><table><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Adds a book and an author to the data store.<span></span></pre></td></tr><tr><td scope="row"><pre> * @param title            book's title;<span></span></pre></td></tr><tr><td scope="row"><pre> * @param authorLastName   last name of the author;<span></span></pre></td></tr><tr><td scope="row"><pre> * @param authorFirstName  first name of the author;<span></span></pre></td></tr><tr><td scope="row"><pre> * @return &lt;code>true&lt;/code> when successful; &lt;code>false&lt;/code> otherwise.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>public boolean addBookForAuthor(String title, String authorLastName,<span></span></pre></td></tr><tr><td scope="row"><pre>                                 String authorFirstName) {<span></span></pre></td></tr><tr><td scope="row"><pre>    EOKeyGlobalID author_global_id = addAuthor(authorLastName, authorFirstName);<span></span></pre></td></tr><tr><td scope="row"><pre>    addBook(title, author_global_id);<span></span></pre></td></tr><tr><td scope="row"><pre>    return true;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
            <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBDDFIA" title="Listing 4-4 addAuthor and addBooks methods"></a>
                <p class="codesample"><strong>Listing 4-4&nbsp;&nbsp;</strong>
                    <code>addAuthor</code>
                     and <code>addBooks</code>
                     methods</p>
                <div class="codesample"><table><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Adds an author to the data store.<span></span></pre></td></tr><tr><td scope="row"><pre> * @param authorLastName   last name of the book's author;<span></span></pre></td></tr><tr><td scope="row"><pre> * @param authorFirstName  first name of the book's author;<span></span></pre></td></tr><tr><td scope="row"><pre> * @return global ID of the corresponding enterprise object.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>private EOKeyGlobalID addAuthor(String lastName, String firstName) {<span></span></pre></td></tr><tr><td scope="row"><pre>    Object arguments[] = {lastName, firstName};<span></span></pre></td></tr><tr><td scope="row"><pre>    Object[] result = (Object[])serviceClient().invoke(serviceName(),<span></span></pre></td></tr><tr><td scope="row"><pre>                                                "addAuthor", arguments);<span></span></pre></td></tr><tr><td scope="row"><pre>    WOStringKeyMap key_map = (WOStringKeyMap)result[0];<span></span></pre></td></tr><tr><td scope="row"><pre>    EOKeyGlobalID author_global_id = (EOKeyGlobalID)key_map.valueForKey("globalID");<span></span></pre></td></tr><tr><td scope="row"><pre>    return author_global_id;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Adds a book to the data store.<span></span></pre></td></tr><tr><td scope="row"><pre> * @param title              book's title;<span></span></pre></td></tr><tr><td scope="row"><pre> * @param author_global_id   global ID of the enterprise object representing<span></span></pre></td></tr><tr><td scope="row"><pre> *                           the book's author;<span></span></pre></td></tr><tr><td scope="row"><pre> * @return &lt;code>true&lt;/code> when successful; &lt;code>false&lt;/code> otherwise.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>private boolean addBook(String title, EOKeyGlobalID author_global_id) {<span></span></pre></td></tr><tr><td scope="row"><pre>    Object arguments[] = {title, author_global_id};<span></span></pre></td></tr><tr><td scope="row"><pre>    Object result = serviceClient().invoke(serviceName(), "addBook", arguments);<span></span></pre></td></tr><tr><td scope="row"><pre>    return true;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
            <p>
                <span class="content_text">Figure 4-11</span>
                 shows the definition of the addBook operation. Notice the <code>author</code>
                 argument.</p>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH208-CJBCGCGF" title="Figure 4-11Definition of the addBook operation"></a>
                <p><strong>Figure 4-11&nbsp;&nbsp;</strong>Definition of the <code>addBook</code>
                     operation</p>
                <img src = "../art/wsaaddbook.gif" alt = "Definition of the addBook operation" width="643" height="368">
            </div><br/>
            <p>The <code>projects</code>
                 directory includes two projects Authors and Authors_Client that demonstrate the concepts described earlier. To run them you must install the Authors database, located in the <code>databases</code>
                 directory.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_66"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_67"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF130" title="Default Return Values of Operations"></a>
            <h2>Default Return Values of Operations</h2>
            <p>
                <span class="content_text">Table 4-1</span>
                 shows the return values of operations for which you don't enter return values in the Return Values pane.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBBAGHH" title="Table 4-1Default return values of operations"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
                <caption class="tablecaption"><strong>Table 4-1&nbsp;&nbsp;</strong>Default return values of operations</caption>
                
                    <tr>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Type of operation</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Return value</p>
                        </th>
                    </tr>
                
                
                    <tr>
                        <td  scope="row">
                            <p>insert<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_68"></a>
                                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_69"></a>
                            </p>
                        </td>
                        <td >
                            <p>Global ID of enterprise object created.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>update<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_70"></a>
                                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_71"></a>
                            </p>
                        </td>
                        <td >
                            <p>Array of updated enterprise objects.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>search<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_72"></a>
                                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_73"></a>
                            </p>
                        </td>
                        <td >
                            <p>Array of found enterprise objects.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>delete<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_74"></a>
                                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_75"></a>
                            </p>
                        </td>
                        <td >
                            <p>Empty array.</p>
                        </td>
                    </tr>
                
            </table></div>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBCCCIH" title="Creating a Custom Rule File"></a>
            <h2>Creating a Custom Rule File</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_76"></a>
                When you need to perform advanced customization in a Direct to Web Services application, you may have to create a custom rule file named <code>d2w.d2wmodel</code>
                 in which you place custom rules. The other rule file, <code>user.d2wmodel</code>
                , is for the exclusive use of the Web Services Assistant. You must not edit <code>user.d2wmodel</code>
                .</p>
            <p>To add the <code>d2w.d2wmodel</code>
                 file to a Direct to Web Services application project, add a new, empty file to the Resources group, name the file <code>d2w.d2wmodel</code>
                , and assign it to the Application Server target<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_77"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH208-TPXREF128" title="Rule Editor Keys"></a>
            <h2>Rule Editor Keys</h2>
            <p>
                <span class="content_text">Table 4-2</span>
                 lists the keys you can use in the <code>d2w.d2wmodel</code>
                 file of a project to customize a Direct to Web Services application. To learn more, see the reference documentation for WOServiceUtilities.RuleSystemConstants in the <code>com.webobjects.webservices.generation</code>
                 package.<a name="//apple_ref/doc/uid/TP30001019-CH208-DontLinkElementID_78"></a>
            </p>
            <a name="//apple_ref/doc/uid/TP30001019-CH208-CJBEBEGH" title="Table 4-2Direct to Web Services rule keys"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
                <caption class="tablecaption"><strong>Table 4-2&nbsp;&nbsp;</strong>Direct to Web Services rule keys</caption>
                
                    <tr>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Key</p>
                        </th>
                        <th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC">
                            <p>Description</p>
                        </th>
                    </tr>
                
                
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>AllOperationNames</code>
                            </p>
                        </td>
                        <td >
                            <p>The names of all the operations available in a Web service.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>AllServiceNames</code>
                            </p>
                        </td>
                        <td >
                            <p>The names of all the Web services available in an application.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>ClassForPropertyKey</code>
                            </p>
                        </td>
                        <td >
                            <p>The class of a property.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>ClassNameForPropertyKey</code>
                            </p>
                        </td>
                        <td >
                            <p>The class name of a property.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>ComparisonKey</code>
                            </p>
                        </td>
                        <td >
                            <p>The EOKeyComparisonQualifier used to build an EOQualifier for a property.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>EntityName</code>
                            </p>
                        </td>
                        <td >
                            <p>The entity name for an operation.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>FetchLimit</code>
                            </p>
                        </td>
                        <td >
                            <p>The <code>fetchLimit</code>
                                 of a WOSearchOperation.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>FetchSpecificationName</code>
                            </p>
                        </td>
                        <td >
                            <p>The name of the fetch specification used in a WOFetchSpecSearchOperation.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>GidArgumentKey</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether an enterprise object is to be serialized as an EOGlobalID.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>InputPartNames</code>
                            </p>
                        </td>
                        <td >
                            <p>The XML element names of an operation's input-message parts.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>InputPartValues</code>
                            </p>
                        </td>
                        <td >
                            <p>The arguments in an operation invocation.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>IsDefaultService</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether a Web service is the default Web Service in a Direct to Web Services application.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>IsOperationEnabled</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether an operation is enabled.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>IsOperationFrozen</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether an operation is frozen.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>IsServiceEnabled</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether a Web service is enabled.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>IsTransactionEnabled</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether a Web services supports transactions.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>ModelGroup</code>
                            </p>
                        </td>
                        <td >
                            <p>The EOModelGroup of the current operation.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>OperationClassName</code>
                            </p>
                        </td>
                        <td >
                            <p>The class name of an operation.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>OperationName</code>
                            </p>
                        </td>
                        <td >
                            <p>The name of an operation.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>OperationNames</code>
                            </p>
                        </td>
                        <td >
                            <p>The names of the operations of a Web service.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>OutputPartNames</code>
                            </p>
                        </td>
                        <td >
                            <p>The XML element names of the properties an operation returns.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>PropertyKey</code>
                            </p>
                        </td>
                        <td >
                            <p>A property key.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>PublicEntityNames</code>
                            </p>
                        </td>
                        <td >
                            <p>The names of the public entities available in a Direct to Web Services application.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>ReturnSOAPStruct</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether an operation returns EOEnterpriseObjects as serialized enterprise objects or a SOAP structures.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>ServiceName</code>
                            </p>
                        </td>
                        <td >
                            <p>The name of a Web service.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>TranslatedAttributeName</code>
                            </p>
                        </td>
                        <td >
                            <p>The EOProperty key path for an argument or result value.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>UnspecifiedArgumentKey</code>
                            </p>
                        </td>
                        <td >
                            <p>The key used to determine whether a parameter is unspecified.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>UsesNamedFetchSpecification</code>
                            </p>
                        </td>
                        <td >
                            <p>Determines whether an operation uses a named fetch specification.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>WOContext</code>
                            </p>
                        </td>
                        <td >
                            <p>The WOContext.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>WODefaultWebService</code>
                            </p>
                        </td>
                        <td >
                            <p>The name of the default Web service.</p>
                        </td>
                    </tr>
                    <tr>
                        <td  scope="row">
                            <p>
                                <code>WSDLComponentName</code>
                            </p>
                        </td>
                        <td >
                            <p>The name of the component containing the WSDL document for an operation.</p>
                        </td>
                    </tr>
                
            </table></div>
        
    


        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Web_Services/Web_Services.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory/RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/Web_Services/DtoWS/DtoWS.html%3Fid%3DTP30001019-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/Web_Services/DtoWS/DtoWS.html%3Fid%3DTP30001019-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/Web_Services/DtoWS/DtoWS.html%3Fid%3DTP30001019-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
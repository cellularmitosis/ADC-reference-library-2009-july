<html><head><title>Mac OS X Developer Tools
 Manual Page For Tcl_UntraceCommand(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tcl_UntraceCommand" title="Mac OS X Developer Tools
 Manual Page for Tcl_UntraceCommand(3tcl)"><a name="//apple_ref/doc/man/3/Tcl_UntraceCommand" title="Mac OS X Developer Tools
 Manual Page for Tcl_UntraceCommand(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tcl_UntraceCommand"; name=Tcl_UntraceCommand(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tcl_TraceCommand(3)                        Tcl Library Procedures                        <a href="Tcl_TraceCommand.3tcl.html#//apple_ref/doc/man/3/Tcl_TraceCommand">Tcl_TraceCommand(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tcl_CommandTraceInfo, Tcl_TraceCommand, Tcl_UntraceCommand - monitor renames and deletes of a command

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       ClientData
       <b>Tcl_CommandTraceInfo(</b><u>interp,</u> <u>cmdName,</u> <u>flags,</u> <u>proc,</u> <u>prevClientData</u><b>)</b>

       int
       <b>Tcl_TraceCommand(</b><u>interp,</u> <u>cmdName,</u> <u>flags,</u> <u>proc,</u> <u>clientData</u><b>)</b>

       void
       <b>Tcl_UntraceCommand(</b><u>interp,</u> <u>cmdName,</u> <u>flags,</u> <u>proc,</u> <u>clientData</u><b>)</b>

<b>ARGUMENTS</b>
       Tcl_Interp             <u>*interp</u>          (in)      Interpreter containing the command.

       CONST char             <u>*cmdName</u>         (in)      Name of command.

       int                    <u>flags</u>            (in)      OR-ed collection of the value TCL_TRACE_RENAME  and
                                                         TCL_TRACE_DELETE.

       Tcl_CommandTraceProc   <u>*proc</u>            (in)      Procedure  to  call when specified operations occur
                                                         to <u>cmdName</u>.

       ClientData             <u>clientData</u>       (in)      Arbitrary argument to pass to <u>proc</u>.

       ClientData             <u>prevClientData</u>   (in)      If non-NULL, gives last value returned by  <b>Tcl_Com</b>-<font color="#ffffff" class="whiteout">mandTraceInfo,&nbsp;Tcl_CommandTraceInfo,</font>
                                                         <b>mandTraceInfo</b>, so this call will return information
                                                         about next trace.  If NULL, this call  will  return
                                                         information about first trace.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       <b>Tcl_TraceCommand</b> allows a C procedure to monitor operations performed on a Tcl command, so that the C
       procedure is invoked whenever the command is renamed or deleted.  If the trace  is  created  success-<font color="#ffffff" class="whiteout">fully&nbsp;successfully</font>
       fully then <b>Tcl_TraceCommand</b> returns TCL_OK.  If an error occurred (e.g. <u>cmdName</u> specifies a non-exis-<font color="#ffffff" class="whiteout">tent&nbsp;non-existent</font>
       tent command) then TCL_ERROR is returned and an error message is left in the interpreter's result.

       The <u>flags</u> argument to <b>Tcl_TraceCommand</b> indicates when the trace procedure is to be invoked.  It  con-<font color="#ffffff" class="whiteout">sists&nbsp;consists</font>
       sists of an OR-ed combination of any of the following values:

       <b>TCL_TRACE_RENAME</b>
              Invoke <u>proc</u> whenever the command is renamed.

       <b>TCL_TRACE_DELETE</b>
              Invoke <u>proc</u> when the command is deleted.

       Whenever one of the specified operations occurs to the command, <u>proc</u> will be invoked.  It should have
       arguments and result that match the type <b>Tcl_CommandTraceProc</b>:
              typedef void Tcl_CommandTraceProc(
                ClientData <u>clientData</u>,
                      Tcl_Interp *<u>interp</u>,
                CONST char *<u>oldName</u>,
                CONST char *<u>newName</u>,
                      int <u>flags</u>);
       The <u>clientData</u> and <u>interp</u> parameters will have the same values as those  passed  to  <b>Tcl_TraceCommand</b>
       when  the  trace  was created.  <u>ClientData</u> typically points to an application-specific data structure
       that describes what to do when <u>proc</u> is invoked.  <u>OldName</u> gives the name of the command being renamed,
       and  <u>newName</u> gives the name that the command is being renamed to (or an empty string or NULL when the
       command is being deleted.)  <u>Flags</u> is an OR-ed  combination  of  bits  potentially  providing  several
       pieces of information.  One of the bits TCL_TRACE_RENAME and TCL_TRACE_DELETE will be set in <u>flags</u> to
       indicate which operation is being performed on the command.  The bit TCL_TRACE_DESTROYED will be  set
       in <u>flags</u> if the trace is about to be destroyed; this information may be useful to <u>proc</u> so that it can
       clean up its own internal data  structures  (see  the  section  TCL_TRACE_DESTROYED  below  for  more
       details).   Lastly,  the  bit  TCL_INTERP_DESTROYED  will  be  set if the entire interpreter is being
       destroyed.  When this bit is set, <u>proc</u> must be especially careful in the things it does (see the sec-<font color="#ffffff" class="whiteout">tion&nbsp;section</font>
       tion TCL_INTERP_DESTROYED below).

       <b>Tcl_UntraceCommand</b>  may  be used to remove a trace.  If the command specified by <u>interp</u>, <u>cmdName</u>, and
       <u>flags</u> has a trace set with <u>flags</u>, <u>proc</u>, and <u>clientData</u>, then the corresponding trace is removed.   If
       no such trace exists, then the call to <b>Tcl_UntraceCommand</b> has no effect.  The same bits are valid for
       <u>flags</u> as for calls to <b>Tcl_TraceCommand</b>.

       <b>Tcl_CommandTraceInfo</b> may be used to retrieve information about traces set on a  given  command.   The
       return  value  from  <b>Tcl_CommandTraceInfo</b>  is the <u>clientData</u> associated with a particular trace.  The
       trace must be on the command specified by the <u>interp</u>, <u>cmdName</u>, and <u>flags</u> arguments  (note  that  cur-<font color="#ffffff" class="whiteout">rently&nbsp;currently</font>
       rently the flags are ignored; <u>flags</u> should be set to 0 for future compatibility) and its trace proce-<font color="#ffffff" class="whiteout">dure&nbsp;procedure</font>
       dure must the same as the <u>proc</u> argument.  If the <u>prevClientData</u> argument  is  NULL  then  the  return
       value corresponds to the first (most recently created) matching trace, or NULL if there are no match-<font color="#ffffff" class="whiteout">ing&nbsp;matching</font>
       ing traces.  If the <u>prevClientData</u> argument isn't NULL, then it should be the  return  value  from  a
       previous  call  to  <b>Tcl_CommandTraceInfo</b>.   In this case, the new return value will correspond to the
       next matching trace after the one whose <u>clientData</u>  matches  <u>prevClientData</u>,  or  NULL  if  no  trace
       matches  <u>prevClientData</u>  or  if  there are no more matching traces after it.  This mechanism makes it
       possible to step through all of the traces for a given command that have the same <u>proc</u>.


<b>CALLING</b> <b>COMMANDS</b> <b>DURING</b> <b>TRACES</b>
       During rename traces, the command being renamed is visible with both names  simultaneously,  and  the
       command still exists during delete traces (if TCL_INTERP_DESTROYED is not set).  However, there is no
       mechanism for signaling that an error occurred in a trace procedure, so great care  should  be  taken
       that errors do not get silently lost.


<b>MULTIPLE</b> <b>TRACES</b>
       It is possible for multiple traces to exist on the same command.  When this happens, all of the trace
       procedures will be invoked on each access, in order from most-recently-created to least-recently-cre-<font color="#ffffff" class="whiteout">ated.&nbsp;least-recently-created.</font>
       ated.   Attempts to delete the command during a delete trace will fail silently, since the command is
       already scheduled for deletion anyway.  If the command being renamed is renamed by one of its  rename
       traces,  that  renaming  takes precedence over the one that triggered the trace and the collection of
       traces will not be reexecuted; if several traces rename the command, the last renaming  takes  prece-<font color="#ffffff" class="whiteout">dence.&nbsp;precedence.</font>
       dence.


<b>TCL_TRACE_DESTROYED</b> <b>FLAG</b>
       In a delete callback to <u>proc</u>, the TCL_TRACE_DESTROYED bit is set in <u>flags</u>.



<b>TCL_INTERP_DESTROYED</b>
       When  an  interpreter  is  destroyed,  unset  traces  are  called  for  all  of  its  commands.   The
       TCL_INTERP_DESTROYED bit will be set in the <u>flags</u> argument passed to  the  trace  procedures.   Trace
       procedures  must  be extremely careful in what they do if the TCL_INTERP_DESTROYED bit is set.  It is
       not safe for the procedures to invoke any Tcl procedures on the interpreter, since its state is  par-<font color="#ffffff" class="whiteout">tially&nbsp;partially</font>
       tially  deleted.   All  that  trace procedures should do under these circumstances is to clean up and
       free their own internal data structures.


<b>BUGS</b>
       Tcl doesn't do any error checking to prevent trace procedures from misusing  the  interpreter  during
       traces with TCL_INTERP_DESTROYED set.


<b>KEYWORDS</b>
       clientData, trace, command



Tcl                                                  7.4                                 <a href="Tcl_TraceCommand.3tcl.html#//apple_ref/doc/man/3/Tcl_TraceCommand">Tcl_TraceCommand(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_UntraceCommand.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_UntraceCommand.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_UntraceCommand.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

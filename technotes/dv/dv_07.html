<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 03-24-01 --><!--Includes revisions to code listings--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note DV07: Forcing Floppy Disk Size to be Either 400K or 800K</title><meta name="keywords" content="Mac OS 8 floppy disk size 400k 800k MFS HFS"><meta name="Description" content="Technical Note DV07: This Technical Note explains how toinitialize a disk as either single-(MFS) or double-(HFS)sided. It only applies to 800K drives. This technical noteprovides a means for specific applications to produce, forexample 400K disks."><meta name="categories" content="Devices"><meta name="week-posted" content="Jan 27, 1986 - Feb 7, 1986"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002397" title="Forcing Floppy Disk Size to be Either 400K or 800K"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxHardwareDrivers-date.html">Hardware & Drivers</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/HardwareDrivers/idxMassStorageDevices-date.html" target="_blank">Hardware & Drivers > Storage</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note DV07</div>
<div id="pageheadsub">Forcing Floppy Disk Size to be Either 400K or 800K</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                   <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext"><A href="#Section1">Calling the disk driver</A><BR><BR><a href="#references">References</a><BR><BR><A href="#downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>		<td width=300 valign="top" align=left>	<!-- begin_intro_text --><P id = "introtext">This document explains how to initialize a disk as either single- or double-sided. It only applies to 800K drives, of course.</p><!-- end_intro_text --><!-- begin_date --><h3>Updated: [February 01 1986]</h3><!-- end_date -->                </TD>             </TR>          </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content --><a name="Section1"></a><h2>Calling the disk driver</h2><p>You can call the disk driver to initialize a disk and determine programmatically whetherit should be initialized as single- (MFS) or double- (HFS) sided. All you have to do is call the <code>.Sony</code> driver directly to do the formatting then the Disk Initialization Package to write the directory information.</p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>This is not the way you should normally format disks within an application. If the user puts in an unformatted disk, you should let her or him decide whether it becomes single- or double-sided via the Disk Initializationdialog. This automatically happens when you call DIBadMount or the user inserts a disk while in Standard File. The intent of this technical note is to provide a means for specific applications to produce, say, 400K disks. An example might be a production disk copying program.</P></TD></TR></TABLE></CENTER><BR><p><b>From MPW Pascal:</b></p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    VAR      error:      OSErr;      IPtr:       ^INTEGER;      paramBlock: ParamBlockRec;     {needs OSIntf}    ...    WITH paramBlock DO BEGIN       ioRefNum := -5;            {.Sony driver}       ioVRefNum := 1;            {drive number}       csCode := 6;            {format control code}       IPtr:=@csParam;            {pretend it's an INTEGER}       IPtr^:=1;                {number of sides}    END;    error:=PBControl(@paramBlock, FALSE);    {do the call}    IF error=ControlErr THEN    {you are under MFS, which doesn't support control code 6, but it}    {would always get formatted single-sided anyway.}    {other errors are possible: ioErr, etc.}    END;</pre>	</TD></TR></TABLE></CENTER><p><b>From MPW C:</b></p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    OSErr            error;    CntrlParam        paramBlock;    paramBlock.ioCRefNum = -5;    /*.Sony driver*/    paramBlock.ioVRefNum = 1;    /*drive number*/    paramBlock.csCode = 6;    /*format control code*/    paramBlock.csParam[0]=1;     /*for single sided,2 for double-sided*/    error=PBControl(&amp;paramBlock, false);/*do the call*/    if (error==controlErr) ;    /*you are under MFS, which doesn't support control code 6, but it*/    /*would always get formatted single-sided anyway.*/    /*other errors are possible: ioErr, etc.*/</pre>	</TD></TR></TABLE></CENTER><p>You then call <code>DIZero</code> to write a standard (MFS or HFS) directory. It willproduce MFS if you formatted it single-sided, and HFS if you formatted double-sided.</p> <P><A HREF="#top">Back to top</A></P> <a name="references"></a><h2>References</h2><P>The Disk Driver</p><P>The Disk Initialization Package</p><P><A HREF="#top">Back to top</A></P>         <a name="downloads"></a>         <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center>                                    <img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (52K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/dv_07.pdf">Download</A></P>               </TD>            </TR>         </TABLE>         <BR>                  <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/dv/dv_07.html%3Fid%3DDTS10002397-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/dv/dv_07.html%3Fid%3DDTS10002397-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/dv/dv_07.html%3Fid%3DDTS10002397-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --><hr width=500 align=center></BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><meta name="keywords" content="Toolbox Karma compatibility"><meta name="Description" content="Technical Note TB39: This Technical Note discusses MacintoshToolbox compatibility and what you can do to help the Macintoshcontinue evolving in the future."><title>Technical Note TB39: Toolbox Karma</title>                                       <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Jan 30, 1989 - Feb 3, 1989"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002790" title="Toolbox Karma"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB39</div>
<div id="pageheadsub">Toolbox Karma</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#Section2">Rules, Rules, Rules</A><BR><BR><A HREF="#Section3">Your Future is Apple's Future</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note discusses Macintosh Toolbox compatibility and what you cando to help the Macintosh continue evolving in the future.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Feb 01 1989]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><P>It is getting increasingly difficult to make additions to the MacintoshToolbox.  The single greatest obstacle today is compatibility.  Often,engineering is prevented from doing something in an elegant manner because itwould break some applications.  This usually leaves three choices:</p><ol type="1" start="1">	<li>Break the application. Engineering does not normally choose this course of action.</li>	<li>Don't support the feature. This is rarely a good choice. It is bad for the user, and it limits developers.</li>	<li>Implement the feature in a less-than-optimal way. This is the choice most often taken. Examples are the auxiliary window list, faking desk accessories in MultiFinder to force clipboard conversion, and the ever unpopular menu bar definition procedure (MBDF).</li></ol><p>Engineering doesn't like making additions in this way, since it clutters thearchitecture and makes Macintosh programming even more difficult.</p><a name="Section2"></a><P><A HREF="#top">Back to top</A></p><h2>Rules, Rules, Rules</h2><p>You're probably thinking, "But I followed the rules."  You're right.  You'vefollowed the stated guidelines in <i>Inside Macintosh</i> and the MacintoshTechnical Notes.  You've done nothing explicitly wrong.</p><p>However, you can do <b>more</b> than just follow the rules.  Consider whateffect your design decisions have on the Macintosh community.  Understand thatby taking advantage of a documented feature, you may be preventing theMacintosh from growing in the future.  If you follow some of the followingguidelines, you can give Apple some flexibility in changing rules that are nolonger appropriate.  These guidelines are just a sample, and hopefully you canextrapolate more from this list.</p><b>Traps Are Here to Stay</b><p>The trap interface is the ultimate Macintosh standard.  Even when datastructures change, the traps always work.  Use them to their fullest.  Don'tdirectly manipulate data structures when a trap call will do, don't use<code>_HandToHand</code> to duplicate a handle if there is an explicit trap callavailable (e.g., <code>_TENew</code>), and don't patch traps.  If a trap does notwork the way you want, implement your own code instead of trying to patch therequired functionality into the trap.  If you absolutely must patch a trap,don't make assumptions about registers (e.g., <code>A5</code>) or modify the stack.See TM.OV.32BitClean for more information on the evils of patching traps.</p><b>Data Structures Are Subject to Change</b><p>Engineering won't haphazardly change them, but by using the traps, you givethem the flexibility to make these changes.  If everyone had been using<code>_SetWRefCon</code> and <code>_GetWRefCon</code>, the auxiliary window list mightnot have been necessary.  Of course, if everyone agrees to use these traps<b>and</b> leave the auxiliary window list alone, maybe they can fix this onein the future.</p><b>Write Robust Definition Procedures</b><p>All of the definition functions, WDEF, CDEF, MDEF, etc. have room for growth.Do not stunt this growth by making unnecessary assumptions.  If you do notunderstand the message, don't do anything.  If a parameter is documented asunused, don't use it; it may be used in the future.  These same rules apply toanything which might be called from ROM, such as drivers, user procedures, andfilter procedures.  Treat the MBDF as undocumented.  It has changedconsiderably in the past and will continue to do so.</p><b>Use Globals With Caution</b><p>Globals often have their meaning changed or their format altered.  Use the trapinterfaces when available (e.g., <code>_TickCount</code> instead of<code>Ticks</code>).  Try to avoid using them at all if possible.</p><P><A HREF="#top">Back to top</A></p><a name="Section3"></a><h2>Your Future is Apple's Future</h2><p>As a developer you play a key role in shaping the future of the Macintosh.  Bygoing beyond the guidelines in <i>Inside Macintosh</i> and the MacintoshTechnical Notes and considering the effects of your design decisions on thewhole Macintosh community, you allow the Macintosh to grow and change whilestill maintaining compatibility.  We won't break your applications, we canfully support features you desire, and we can implement these features in thebest possible way for us, for you, and for the users.  By going that extrastep, you help us make programming the Macintosh simpler and ensure the bestpossible future for your products as well as ours.</p><P><A HREF="#top">Back to top</A></p><a name = "References"></a><h2>References</h2><P><i>Inside Macintosh</i>, Volume V, Compatibility Guidelines</p><P><A HREF = "../ov/ov_505.html">M.OV.Compatibility</a></p><P><A HREF = "../ov/ov_04.html">M.OV.CompatibilityWh</a></p><P><A HREF = "../ov/ov_11.html">M.OV.32BitClean</a></p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (44K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_39.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_39.html%3Fid%3DDTS10002790-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_39.html%3Fid%3DDTS10002790-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_39.html%3Fid%3DDTS10002790-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<HTML>		<HEAD>		<TITLE>			EOObjectStore		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>EOControl Reference</font><br><br><!--end of path --><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a><a name = "EOObjectStore"></a><BR><h1><FONT COLOR="#000066"><a name="//apple_ref/java/cl/EOObjectStore">EOObjectStore</a></FONT></h1><br><blockquote><dl><dt><b>Inherits from: </b></dt><dd> (com.apple.client.eocontrol) Object<br>(com.apple.yellow.eocontrol) NSObject</dd></dl></blockquote><blockquote><dl><dt><b>Package: </b></dt><dd>com.apple.client.eocontrol</dd><dd>com.apple.yellow.eocontrol</dd></dl></blockquote><HR SIZE=4><br><h2>Class Description</h2><hr><p>EOObjectStore is the abstract class that defines the API foran "intelligent" repository of objects, the control layer'sobject storage abstraction. An object store is responsible for constructingand registering objects, servicing object faults, and saving changesmade to objects. For more information on the object storage abstraction,see  <a href="../Introduction.html#BIACAIJE">"Object Storage Abstraction"</a> in the introduction tothe EOControl Framework.</p><p>EOEditingContext is the principal EOObjectStore subclass andis used for managing objects in memory-in fact, the primary purposeof the EOObjectStore class is to define an API for servicing editingcontexts, not to define a completely general API. Other subclassesof EOObjectStore are:</p><ul><li> <a href="EOCooperatingObjectStore.html#EOCooperatingObjectStore">EOCooperatingObjectStore</a></li><li> <a href="EOObjectStoreCoordinator.html#EOObjectStoreCoordinator">EOObjectStoreCoordinator</a></li><li>EODatabaseContext (EOAccess)</li></ul><p>A subclass of EOObjectStore must implement all of its methods.The default implementations simply throw exceptions.</p><br><br><br><h2>Constants</h2><hr><p>EOObjectStore defines the following String constants to beused as keys in the notifications it posts:</p><ul><li><a name = "CBJFFHFB"></a><tt>DeletedKey</tt></li><li><a name = "CBJHEEDI"></a><tt>InsertedKey</tt></li><li><a name = "CBJIEFEE"></a><tt>InvalidatedKey</tt></li><li><a name = "CBJBJFDJ"></a><tt>UpdatedKey</tt></li></ul><p>Additionally, EOObjectStore defines String constants for thenames of the notifications it posts. See the section  <a href="#CJDCIADI">"Notifications"</a> for more information on the notifications.</p><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Initializing objects</dt><dd> <a href="#//apple_ref/java/instm/EOObjectStore/initializeObject">initializeObject</a></dd></dl><dl><dt>Getting objects</dt><dd> <a href="#//apple_ref/java/instm/EOObjectStore/objectsWithFetchSpecification">objectsWithFetchSpecification</a></dd><dd> <a href="#//apple_ref/java/instm/EOObjectStore/objectsForSourceGlobalID">objectsForSourceGlobalID</a></dd></dl><dl><dt>Getting faults</dt><dd> <a href="#//apple_ref/java/instm/EOObjectStore/faultForGlobalID">faultForGlobalID</a></dd><dd> <a href="#//apple_ref/java/instm/EOObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a></dd><dd> <a href="#//apple_ref/java/instm/EOObjectStore/refaultObject">refaultObject</a></dd><dd> <a href="#//apple_ref/java/instm/EOObjectStore/faultForRawRow">faultForRawRow</a></dd></dl><dl><dt>Locking objects</dt><dd> <a href="#//apple_ref/java/instm/EOObjectStore/lockObjectWithGlobalID">lockObjectWithGlobalID</a></dd><dd> <a href="#//apple_ref/java/instm/EOObjectStore/isObjectLockedWithGlobalID">isObjectLockedWithGlobalID</a></dd></dl><dl><dt>Saving changes to objects</dt><dd> <a href="#//apple_ref/java/instm/EOObjectStore/saveChangesInEditingContext">saveChangesInEditingContext</a></dd></dl><dl><dt>Invalidating and forgettingobjects</dt><dd> <a href="#//apple_ref/java/instm/EOObjectStore/invalidateAllObjects">invalidateAllObjects</a></dd><dd> <a href="#//apple_ref/java/instm/EOObjectStore/invalidateObjectsWithGlobalIDs">invalidateObjectsWithGlobalIDs</a></dd><dd> <a href="#//apple_ref/java/instm/EOObjectStore/editingContextDidForgetObjectWithGlobalID">editingContextDidForgetObjectWithGlobalID</a></dd></dl><dl><dt>Interacting with theserver</dt><dd> <a href="#//apple_ref/java/instm/EOObjectStore/invokeRemoteMethod">invokeRemoteMethod</a> (com.apple.client.eocontrol only)</dd></dl></blockquote><BR><BR><h2>Instance Methods</h2><hr><a name = "arrayFaultWithSourceGlobalID_relationshipName_editingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a></h3><p><code>public abstract NSArray <code>arrayFaultWithSourceGlobalID</code>(EOGlobalID <em>globalID,</em> String <em>relationshipName,</em> EOEditingContext <em>anEditingContext</em>)</code></p>Implemented by subclasses to return the destinationobjects for a to-many relationship, whether as real instances oras faults (empty enterprise objects). <em>globalID</em>  identifiesthe source object for the relationship (which doesn't necessarilyexist in memory yet), and <em>relationshipName</em>  isthe name of the relationship. The object identified by <em>globalID</em>  andthe destination objects for the relationship all belong to <em>anEditingContext.</em> <p>Ifyou implement this method to return a fault, you must define anEOFaultHandler subclass that stores <em>globalID</em>  and <em>relationshipName,</em> using them to fetch the objects in a later  <a href="#//apple_ref/java/instm/EOObjectStore/objectsForSourceGlobalID">objectsForSourceGlobalID</a> messageand that turns the fault into an array containing those objects.See the  <a href="EOFaultHandler.html#EOFaultHandler">EOFaultHandler</a> class specification formore information on faults.</p><p>See the  <a href="EOEditingContext.html#EOEditingContext">EOEditingContext</a> and EODatabaseContext(EOAccess) class specifications for more information on how thismethod works in concrete subclasses.</p><p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/EOObjectStore/faultForGlobalID">faultForGlobalID</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "CBJDGEIA"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/editingContextDidForgetObjectWithGlobalID">editingContextDidForgetObjectWithGlobalID</a></h3><p><code>public void <code>editingContextDidForgetObjectWithGlobalID</code>(EOEditingContext <em>context,</em> EOGlobalID <em>gid</em>)</code></p>Invoked to inform the object store that it canstop keeping data about an object it passed to a child. Don't invokethis method; it is invoked automatically by the Framework.<hr WIDTH="25%" ALIGN="LEFT"><a name = "faultForGlobalID_editingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/faultForGlobalID">faultForGlobalID</a></h3><p><code>public abstract EOEnterpriseObject <code>faultForGlobalID</code>(EOGlobalID <em>globalID,</em> EOEditingContext <em>anEditingContext</em>)</code></p>If the receiver is <em>anEditingContext</em>  andthe object associated with <em>globalID</em>  isalready registered in <em>anEditingContext,</em> this method returns that object. Otherwise it creates a to-one fault,registers it in <em>anEditingContext,</em> and returns the fault. This method is always directed first at <em>anEditingContext,</em>  whichforwards the message to its parent object store if needed to createa fault.<p>If you implement this method to return a fault (an emptyenterprise object), you must define an EOFaultHandler subclass thatstores <em>globalID,</em>  uses it to fetchthe object's data, and initializes the object with EOObjectStore's  <a href="#//apple_ref/java/instm/EOObjectStore/initializeObject">initializeObject</a>. See the  <a href="EOFaultHandler.html#EOFaultHandler">EOFaultHandler</a> class specification formore information on faults.</p><p>See the  <a href="EOEditingContext.html#EOEditingContext">EOEditingContext</a> and EODatabaseContext(EOAccess) class specifications for more information on how thismethod works in concrete subclasses.</p><p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/EOObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a>,  <a href="EOEditingContext.html#//apple_ref/java/instm/EOEditingContext/recordObject">recordObject</a> ( <a href="EOEditingContext.html#EOEditingContext">EOEditingContext</a>)</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "CJDBBBBA"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/faultForRawRow">faultForRawRow</a></h3><p><code>public abstract EOEnterpriseObject <code>faultForRawRow</code>(NSDictionary <em>row,</em> String <em>entityName,</em> EOEditingContext <em>anEOEditingContext</em>)</code></p><p>Returns a fault for the enterprise objectcorresponding to <em>row,</em>  which is adictionary of values containing at least the primary key of thecorresponding enterprise object. This is especially useful if youhave fetched raw rows and now want a unique enterprise object. </p><hr WIDTH="25%" ALIGN="LEFT"><a name = "initializeObject_withGlobalID_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/initializeObject">initializeObject</a></h3><p><code>public abstract void <code>initializeObject</code>(EOEnterpriseObject <em>anObject,</em> EOGlobalID <em>globalID,</em> EOEditingContext <em>anEditingContext</em>)</code></p>Implemented by subclasses to set <em>anObject</em>'sproperties, as obtained for <em>globalID.</em> This method is typically invoked after <em>anObject</em>  hasbeen created using EOClassDescription's  <a href="EOClassDescription.html#//apple_ref/java/instm/EOClassDescription/createInstanceWithEditingContext">createInstanceWithEditingContext</a> orusing EOGenericRecord's or EOCustomObject's constructors. Thismethod is also invoked after a fault has been fired.<p><b>SeeAlso: </b>  <a href="../Protocols/EOEnterpriseObject.html#//apple_ref/java/intfm/EOEnterpriseObject/awakeFromInsertion">awakeFromInsertion</a> ( <a href="../Protocols/EOEnterpriseObject.html#BABBCHJH">EOEnterpriseObject</a>),  <a href="../Protocols/EOEnterpriseObject.html#//apple_ref/java/intfm/EOEnterpriseObject/awakeFromFetch">awakeFromFetch</a> ( <a href="../Protocols/EOEnterpriseObject.html#BABBCHJH">EOEnterpriseObject</a>)</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "invalidateAllObjects"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/invalidateAllObjects">invalidateAllObjects</a></h3><p><code>public abstract void <code>invalidateAllObjects</code>()</code></p>Discards the values of all objects held by thereceiver and turns them into faults (empty enterprise objects).This causes all locks to be dropped and any transaction to be rolledback. The next time any object is accessed, its data is fetchedanew. Any child object stores are also notified that the objectsare no longer valid. See the  <a href="EOEditingContext.html#EOEditingContext">EOEditingContext</a> class specificationfor more information on how this method works in concrete subclasses.<p>Thismethod should also post an  <a href="#CJDECHGB">InvalidatedAllObjectsInStoreNotification</a>.</p><p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/EOObjectStore/invalidateObjectsWithGlobalIDs">invalidateObjectsWithGlobalIDs</a>,  <a href="#//apple_ref/java/instm/EOObjectStore/refaultObject">refaultObject</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "invalidateObjectWithGlobalID_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/invalidateObjectsWithGlobalIDs">invalidateObjectsWithGlobalIDs</a></h3><p><code>public abstract void <code>invalidateObjectsWithGlobalIDs</code>(NSArray <em>globalIDs</em>)</code></p>Signals that the objects identified by the EOGlobalIDsin <em>globalIDs</em>  should no longer beconsidered valid and that they should be turned into faults (emptyenterprise objects). This causes data for each object to be refetchedthe next time it's accessed. Any child object stores are alsonotified that the objects are no longer valid.<p><b>SeeAlso: </b>  <a href="#//apple_ref/java/instm/EOObjectStore/invalidateAllObjects">invalidateAllObjects</a>,  <a href="#//apple_ref/java/instm/EOObjectStore/refaultObject">refaultObject</a></p><hr WIDTH="25%" ALIGN="LEFT"><a name = "CJDBFJBB"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/invokeRemoteMethod">invokeRemoteMethod</a></h3><p><code>public abstract void <code>invokeRemoteMethod</code>(EOEditingContext <em>anEditingContext,</em> EOGlobalID <em>receiverGID,</em> String <em>methodName,</em> Object[] <em>arguments</em>)</code></p><p>(com.apple.client.eocontrol only) Invokes <em>methodName</em>  onthe enterprise object identified by <em>receiverGID</em> in<em>  anEditingContext,</em> using <em>arguments.</em> To pass an enterprise object as an argument, use its global ID. Thismethod has the side effect of saving all the changes from the editingcontext all the way down to the editing context in the server session.</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "isObjectLockedWithGlobalID_editingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/isObjectLockedWithGlobalID">isObjectLockedWithGlobalID</a></h3><p><code>public abstract boolean <code>isObjectLockedWithGlobalID</code>(EOGlobalID <em>globalID,</em> EOEditingContext <em>anEditingContext</em>)</code></p>Returns true if the object identified by <em>globalID</em>  islocked, false if it isn't. See the EODatabaseContext (EOAccess)class specification for more information on how this method worksin concrete subclasses.<hr WIDTH="25%" ALIGN="LEFT"><a name = "lockObjectWithGlobalID_editingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/lockObjectWithGlobalID">lockObjectWithGlobalID</a></h3><p><code>public abstract void <code>lockObjectWithGlobalID</code>(EOGlobalID <em>globalID,</em> EOEditingContext <em>anEditingContext</em>)</code></p>Locks the object identified by <em>globalID.</em> See the EODatabaseContext (EOAccess) class specification for moreinformation on how this method works in concrete subclasses.<hr WIDTH="25%" ALIGN="LEFT"><a name = "objectsForSourceGlobalID_relationshipName_editingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/objectsForSourceGlobalID">objectsForSourceGlobalID</a></h3><p><code>public abstract NSArray <code>objectsForSourceGlobalID</code>(EOGlobalID <em>globalID,</em> String <em>relationshipName,</em> EOEditingContext <em>anEditingContext</em>)</code></p>Returns the destination objects for a to-manyrelationship. This method is used by an array fault previously constructedusing  <a href="#//apple_ref/java/instm/EOObjectStore/arrayFaultWithSourceGlobalID">arrayFaultWithSourceGlobalID</a>.<em>  globalID</em>  identifiesthe source object for the relationship (which doesn't necessarilyexist in memory yet), and <em>relationshipName</em>  isthe name of the relationship. The object identified by <em>globalID</em>  andthe destination objects for the relationship all belong to <em>anEditingContext.</em> <p>Seethe  <a href="EOEditingContext.html#EOEditingContext">EOEditingContext</a> and EODatabaseContext(EOAccess) class specifications for more information on how thismethod works in concrete subclasses.</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "objectsWithFetchSpecification_editingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/objectsWithFetchSpecification">objectsWithFetchSpecification</a></h3><p><code>public abstract NSArray <code>objectsWithFetchSpecification</code>(EOFetchSpecification <em>aFetchSpecification,</em> EOEditingContext <em>anEditingContext</em>)</code></p>Fetches objects from an external store accordingto the criteria specified by <em>fetchSpecification</em>  and returnsthem in an array for inclusion in <em>anEditingContext.</em> If one of these objects is already present in memory, this methoddoesn't overwrite its values with the new values from the database. Throws an exceptionif an error occurs.<p>See the  <a href="EOEditingContext.html#EOEditingContext">EOEditingContext</a> and EODatabaseContext(EOAccess) class specifications for more information on how thismethod works in concrete subclasses.</p><hr WIDTH="25%" ALIGN="LEFT"><a name = "refaultObject_ withGlobalID_editingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/refaultObject">refaultObject</a></h3><p><code>public abstract void <code>refaultObject</code>(EOEnterpriseObject <em>anObject,</em> EOGlobalID <em>globalID,</em> EOEditingContext <em>anEditingContext</em>)</code></p>Turns <em>anObject</em>  intoa fault (an empty enterprise object), identified by <em>globalID</em>  in <em>anEditingContext.</em>  Objectsthat have been inserted but not saved, or that have been deleted,shouldn't be refaulted. When using com.apple.yellow.eocontrol,use this method with caution since refaulting an object doesn't removethe object snapshot from the undo stack.<hr WIDTH="25%" ALIGN="LEFT"><a name = "saveChangesInEditingContext_"></a><BR><h3><a name="//apple_ref/java/instm/EOObjectStore/saveChangesInEditingContext">saveChangesInEditingContext</a></h3><p><code>public abstract void <code>saveChangesInEditingContext</code>(EOEditingContext <em>anEditingContext</em>)</code></p>Saves any changes in <em>anEditingContext</em>  tothe receiver's repository. Sends  <a href="EOEditingContext.html#//apple_ref/java/instm/EOEditingContext/insertedObjects">insertedObjects</a>,  <a href="EOEditingContext.html#//apple_ref/java/instm/EOEditingContext/deletedObjects">deletedObjects</a>, and  <a href="EOEditingContext.html#//apple_ref/java/instm/EOEditingContext/updatedObjects">updatedObjects</a> messages to <em>anEditingContext</em>  andapplies the changes to the receiver's data repository as appropriate.For example, EODatabaseContext (EOAccess) implements this methodto send operations to an EOAdaptor (EOAccess) for making the changesin a database.<hr WIDTH="25%" ALIGN="LEFT"><a name = "CJDCIADI"></a><BR><BR><h2>Notifications</h2><hr><a name = "CJDECHGB"></a><h3>InvalidatedAllObjectsInStoreNotification</h3><p><code>public static final String InvalidatedAllObjectsInStoreNotification</code></p>Posted whenever an EOObjectStore receivesan  <a href="#//apple_ref/java/instm/EOObjectStore/invalidateAllObjects">invalidateAllObjects</a> message.The notification contains:<br><table border = "1"><tr><td scope="row">Notification Object</td><td>The EOObjectStore that received the  <a href="#//apple_ref/java/instm/EOObjectStore/invalidateAllObjects">invalidateAllObjects</a> message.</td></tr><tr><td scope="row">Userinfo</td><td>None</td></tr></table><br><a name = "CJDDGBEC"></a><h3>ObjectsChangedInStoreNotification</h3><p><code>public static final String ObjectsChangedInStoreNotification</code></p>Posted whenever an EOObjectStore observeschanges to its objects. The notification contains:<dl><dt>Notification Object</dt><dd>The EOObjectStore that observed the change</dd></dl><dl><dt>userInfo</dt><dd>A dictionary containing the following keys and values:</dd></dl><br><table border = "1"><tr><td scope="row"><b>Key</b></td><td><b>Value</b></td></tr><tr><td scope="row"> <a href="#CBJBJFDJ">UpdatedKey</a></td><td>An NSArray of EOGlobalIDs for objects whose propertieshave changed. A receiving EOEditingContext typically responds byrefaulting its corresponding objects.</td></tr><tr><td scope="row"> <a href="#CBJHEEDI">InsertedKey</a></td><td>An NSArray of EOGlobalIDs for objects that have beeninserted into the EOObjectStore.</td></tr><tr><td scope="row"> <a href="#CBJFFHFB">DeletedKey</a></td><td>An NSArray of EOGlobalIDs for objects that have beendeleted from the EOObjectStore.</td></tr><tr><td scope="row"> <a href="#CBJIEFEE">InvalidatedKey</a></td><td>An NSArray of EOGlobalIDs for objects that have beenturned into faults.</td></tr></table><br><BR><br><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a></BODY></HTML>
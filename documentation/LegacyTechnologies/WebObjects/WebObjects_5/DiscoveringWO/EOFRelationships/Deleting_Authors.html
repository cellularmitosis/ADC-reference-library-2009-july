<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Deleting Authors</title>		</HEAD>	<BODY bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Running_the_Application.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Sorting_a_Fetch.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF107"></a><h2><font face="Lucida Grande,Helvetica,Arial">Deleting Authors</font></h2><!-- apple_doc: pageHeadingEnd --><p>When the user deletes an author, she doesn't get a warningtelling her that all the books related to that author are goingto be deleted as well. In this section, you'll add a componentthat displays such a warning.</p><p>Though conceptually more complex, the design and implementationof the logic for deleting authors is just as simple as that forbooks. The only significant difference is that the application asksthe user for confirmation before deleting the author, because this actionhas the side effect of removing additional objects from the objectstore that the user may not be aware of.</p><p>You'll add a component that displays the author that theuser wants to delete, along with all related books, and asks forconfirmation. If the user changes her mind, she'll be returnedto the Main component. If the user clicks Delete, the author andrelated books are deleted from the editing context (the actual deletetransaction takes place when the user clicks Save on the Main page).</p><br><a name = "TPXREF125"></a><h3><font face="Lucida Grande,Helvetica,Arial">Create the ConfirmAuthorDeleteComponent</font></h3><ol><li>Add a newcomponent and name it ConfirmAuthorDelete.<p>(See  <a sector="mod" href="../ComponentCommunication/iDefining_a_New_Component.html" target="_top">"Defining a New Component"</a> fordetails.)</p></font></li><li>Open <code>ConfirmAuthorDelete.wo</code> inWebObjects Builder.</font></li><li>Add the following instance variables:<ol><li><code>author</code> (Author),with accessor methods</font></li><li><code>bookItem</code> (Book),without accessor methods</font></li></ol></font></li><li>Add the following actions:<ol><li><code>cancel</code> (Main)</font></li><li><code>deleteAuthor</code> (Main)</font></li></ol></font></li><li>Edit the component's content so that it looks similar to  <a href="#BBCBBFJH">Figure 12-6</a> andmake the necessary bindings.<br><a name = "BBCBBFJH"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure 12-6  ConfirmAuthorDelete.wo</font></b></p> <img src = "../Art/confirmauthordeletewo.gif" alt = "[image: ../Art/confirmauthordeletewo.gif]"></font></li><li>Save <code>ConfirmAuthorDelete.wo</code>.</font></li></ol><br><a name = "TPXREF126"></a><h3><font face="Lucida Grande,Helvetica,Arial">Edit ConfirmAuthorDelete.java</font></h3><p>Edit the <code>deleteAuthor</code> methodso that it looks like  <a href="#BBCBGICG">Listing 12-15</a>.</p><a name = "BBCBGICG"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing12-15 The deleteAuthor method in ConfirmAuthorDelete.java</font></b></p><pre>public Main deleteAuthor() {    Main nextPage = (Main)pageWithName("Main");    // get session    Session session = (Session)session();    session.deleteAuthor(author);        return nextPage;}</pre><br><a name = "TPXREF127"></a><h3><font face="Lucida Grande,Helvetica,Arial">Modify the Main Component</font></h3><p>The Main component needs to display the ConfirmAuthorDeletecomponent when its <code>deleteAuthor</code> actionis invoked. You accomplish that by modifying the <code>deleteAuthor</code> methodin Main.java so that it looks like  <a href="#BBCBCCCH">Listing 12-16</a>.</p><a name = "BBCBCCCH"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing12-16 The deleteAuthor method in Main.java&#151;returnsConfirmAuthorDelete component</font></b></p><pre>public ConfirmAuthorDelete deleteAuthor() {    ConfirmAuthorDelete nextPage =  (ConfirmAuthorDelete)pageWithName("ConfirmAuthorDelete");    nextPage.setAuthor(authorItem);    return nextPage;}</pre><br><a name = "TPXREF128"></a><h3><font face="Lucida Grande,Helvetica,Arial">Run the Application</font></h3><p>Build and run the application. Create a new author, add severalbooks, and save your changes. (You can use EOModeler to browse thetables's contents and confirm that the new information has beenadded to the database.) Click Delete on the newly added author.You should be presented with a confirmation page similar to  <a href="#BBCIJEJI">Figure 12-7</a>.</p><br><a name = "BBCIJEJI"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure12-7 The ConfirmAuthorDelete componentin action</font></b></p> <img src = "../Art/confirmauthordeleteie.gif" alt = "[image: ../Art/confirmauthordeleteie.gif]"><p>If you click Cancel, you are simply returned to the Main page.Clicking Delete causes the <code>deleteAuthor</code> methodin <code>ConfirmAuthorDelete.java</code> tobe invoked. In turn, it invokes the session's <code>deleteAuthor</code> method,which removes the author from the <code>authorList</code> arrayand adds it to the editing context's list of enterprise objectsto delete.</p><br>    <br><a href="Running_the_Application.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Sorting_a_Fetch.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<hr alt=""><p><font face="Palatino" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
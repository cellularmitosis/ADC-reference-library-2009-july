<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Accessing Objects by Position</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=3169"> </A><A NAME="34356"> </A>Accessing Objects by Position</H1><P CLASS="T1.Text1"><A NAME="pgfId=3170"> </A>You can iterate through a group by getting the position of its first object and then getting the positions of any subsequent objects. All groups, regardless of type, are stored in a single list which you can step through only by calling QuickDraw&nbsp;3D routines.</P><P CLASS="T1.Text1"><A NAME="pgfId=3177"> </A><A HREF="qd3dgroups.8.htm#23385" CLASS="XRef">Listing&nbsp;2</A> shows how to access all the lights in a light group. The <TT CLASS="cv">MyTurnOnOrOffAllLights</TT> function takes a view parameter and an on/off state value. It turns all the lights in the view's light group on or off, as specified by the state value.</P><P CLASS="L.Listing"><A NAME="pgfId=3179"> </A>Listing&nbsp;2<A NAME="23385"> </A>Accessing all the lights in a light group</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=6192"> </A>TQ3Status MyTurnOnOrOffViewLights (TQ3ViewObject myView, TQ3Boolean myState)<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3GroupObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myGroup;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*the view's light group*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3GroupPosition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myPos;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a group position*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3Object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myLight;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a light*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a result code*/<BR></CODE><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=6198"> </A>&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3View_GetLightGroup(myView, &amp;myGroup);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if (myResult == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;for (Q3Group_GetFirstPosition(myGroup, &amp;myPos);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myPos != NULL;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3Group_GetNextPosition(myGroup, &amp;myPos))<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Group_GetPositionObject(myGroup, myPos, myLight);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (myResult == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Light_SetState(myLight, myState);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3Object_Dispose(myLight);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*balance reference count of light*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;return(kQ3Success);<BR><BR>bail:<BR>&nbsp;&nbsp;&nbsp;&nbsp;return(kQ3Failure);<BR>}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3185"> </A><A NAME="marker=6200"> </A>You can use the looping technique illustrated in <A HREF="qd3dgroups.8.htm#23385" CLASS="XRef">Listing&nbsp;2</A> to traverse ordered display groups as well, as shown in <A HREF="qd3dgroups.8.htm#24937" CLASS="XRef">Listing&nbsp;3</A>. The function <TT CLASS="cv">MyToggleOrderedGroupLights</TT> traverses an ordered display group and toggles any lights it finds. Notice that <TT CLASS="cv">MyToggleOrderedGroupLights</TT> calls the <TT CLASS="cv">Q3Group_GetFirstPositionOfType</TT> function to find the position of the first light in the group.</P><P CLASS="L.Listing"><A NAME="pgfId=3190"> </A>Listing&nbsp;3<A NAME="24937"> </A>Accessing all the lights in an ordered display group</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=6204"> </A>TQ3Status MyToggleOrderedGroupLights (TQ3GroupObject myGroup)<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3GroupPosition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myPos;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a group position*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3Object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myLight;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a light*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3Boolean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myState;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a light state*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a result code*/<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;for (Q3Group_GetFirstPositionOfType(myGroup, kQ3ShapeTypeLight, &amp;myPos);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myPos != NULL;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3Group_GetNextPositionOfType(myGroup, kQ3ShapeTypeLight, &amp;myPos))<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Group_GetPositionObject(myGroup, myPos, myLight);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (myResult == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Light_GetState(myLight, &amp;myState);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myState = !myState;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*toggle the light state*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Light_SetState(myLight, myState);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3Object_Dispose(myLight);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*balance reference count of light*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;return(kQ3Success);<BR><BR>bail:<BR>&nbsp;&nbsp;&nbsp;&nbsp;return(kQ3Failure);<BR>}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3193"> </A><A NAME="marker=6206"> </A>It's also possible to find the position of the next object in an ordered display group by calling the <TT CLASS="cv">Q3Group_GetNextPosition</TT> function. <TT CLASS="cv">Q3Group_GetNextPosition</TT> is not, however, guaranteed to return a position of an object that is of the same type as the object immediately before it. If you use <TT CLASS="cv">Q3Group_GetNextPosition</TT> to iterate through an ordered display group, you must therefore make sure not to step past the part of the list that contains objects of the type you're interested in. <A HREF="qd3dgroups.8.htm#31215" CLASS="XRef">Listing&nbsp;4</A> shows, in outline, how to call <TT CLASS="cv">Q3Group_GetNextPosition</TT> to iterate safely through an object type in an ordered display group.</P><P CLASS="L.Listing"><A NAME="pgfId=3198"> </A>Listing&nbsp;4<A NAME="31215"> </A>Accessing all the lights in an ordered display group using <TT CLASS="cv">Q3Group_GetNextPosition</TT></P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=6210"> </A>TQ3GroupPosition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myFirst;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*group position of first light*/<BR>TQ3GroupPosition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myLast;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*group position of last light*/<BR>TQ3Object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myLight;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a light*/<BR>TQ3Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*a result code*/<BR><BR>Q3Group_GetFirstPositionOfType(myGroup, kQ3ShapeTypeLight, &amp;myFirst);<BR>if (myFirst) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3Group_GetLastPositionOfType(myGroup, kQ3ShapeTypeLight, &amp;myLast);<BR>&nbsp;&nbsp;&nbsp;&nbsp;do<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Group_GetPositionObject(myGroup, myFirst, myLight);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (myResult == kQ3Failure)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto bail;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Light_GetState(myLight, &amp;myState);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myState = !myState;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*toggle the light state*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myResult = Q3Light_SetState(myLight, myState);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3Object_Dispose(myLight);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*balance reference count of light*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3Group_GetNextPosition(myGroup, &amp;myFirst);<BR>&nbsp;&nbsp;&nbsp;&nbsp;} while (myFirst != myLast);<BR>}<BR></CODE><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
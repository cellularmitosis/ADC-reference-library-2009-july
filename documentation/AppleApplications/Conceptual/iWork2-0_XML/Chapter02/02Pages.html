<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>iWork Programming Guide: The iWork XML Schemas</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="The iWork XML Schemas"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002479-CH203" title="The iWork XML Schemas"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../Keynote-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP30000534" target="_top">Keynote</a> &gt; <a href="../Chapter01/Introduction.html#//apple_ref/doc/uid/TP40002479-CH202-DontLinkElementID_62">iWork Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Chapter01/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Chapter03/03Keynote.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_65" title="The iWork XML Schemas"></a><h1><a name="//apple_ref/doc/uid/TP40002479-CH203-TPXREF101" title="The iWork XML Schemas"></a>The iWork XML Schemas</h1><p>Extensible Markup Language (XML) is a ubiquitous and flexible markup standard for processing and exchanging data. You can find XML in a wide range of categories, including property lists and file formats for various applications. XML is used extensively to specify the format of various sources of information on the Internet, including web-based services. XML is at the heart of both iWork applications, Keynote and Pages, developed by Apple. </p><p>This chapter provides you with a high-level, architectural view of the document-based XML schemas used by both Keynote 2.x and Pages 1.x. As noted in the <span class="content_text"><a href="../Chapter01/Introduction.html#//apple_ref/doc/uid/TP40002479-CH202-TPXREF101">“Introduction,”</a></span> Apple’s technical documents describing the Keynote XML schema pertain only to Keynote 1.x and are not relevant to any discussion of the current version of that application. </p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_66" title="Important:"></a><p><strong>Important:</strong>&nbsp;This document does <em>not</em> provide you with a complete description of the file format specification or the XML schemas for Keynote 2.x and Pages 1.x, but rather with enough information to help in creating or modifying your application.</p><p></p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="02Pages.html#//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_4">Developer Issues</a>
				
			<br/>
			
        
			
			
				<a href="02Pages.html#//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_6">Defining the iWork XML Schemas</a>
				
			<br/>
			
        
			
			
				<a href="02Pages.html#//apple_ref/doc/uid/TP40002479-CH203-TPXREF135">iWork XML Document Structures</a>
				
			<br/>
			
        
			
			
				<a href="02Pages.html#//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_18">Working With Document Bundles and Preferences</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_4" title="Developer Issues"></a><h2>Developer Issues</h2><p>Both Pages 1.x and Keynote 2.x, which form the basis of Apple’s iWork package, are powerful, yet easy to use applications that have attracted large and ever-growing customer bases. The iWork package is part of a family of iApps productivity tools.</p><p>Because Keynote uses an open, easily accessible file format, developers can take advantage of its XML schema to enhance existing products or create new ones. Beginning with Keynote 1.x, it is possible to build applications that will create or change the contents of a Keynote presentation. For example, developers can use any of Keynote’s themes and build an entire presentation of their own design simply by filling out the <code>&lt;key:slide-list></code> element in a text editor of their choice. </p><p>The Keynote APXL file is the engine that drives every presentation, specifying every detail of the presentation’s appearance and behavior––from master slide and each individual slide to the transitions used between slides. The APXL file also defines the state of the presentation when the user first opens it. An understanding of how the elements in an APXL file combine to create a presentation is critical to developing applications that are robust and well-behaved. </p><p>Similarly, understanding the Pages document structure is important for Apple developers who want to customize their own page layouts or add value to their existing applications.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_5" title="Important Changes to the File Format"></a><h3>Important Changes to the File Format</h3><p>When Apple introduced Keynote 2.x, a number of new features were added to the application. In so doing, the document file format was significantly expanded and revised. </p><p>For developers of existing applications that read and write the Keynote 1.x file format, this has necessitated updating their code to read and write the new Keynote 2.x format.</p><p>What this means is that Keynote 2.x will read existing Keynote 1.x files, so developers can continue creating documents in the older file format programmatically from their applications. <em>However, the original file will be converted to the new format and overwritten when it is saved from within Keynote 2.x.</em></p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_67" title="Important:"></a><p><strong>Important:</strong>&nbsp;While both Pages and Keynote XML schemas may lend themselves to developer modification and enhancements, a caveat is necessary here. Developers should not think of “extending the schemas” of either application, proceeding on the false or misleading assumption that they can add their own types of objects to the file formats of each, and consequently, have Keynote or Pages load those objects into their applications. This will simply not be the case, and is not recommended.</p><p></p></div><p>Note that the file type name of Keynote was changed from <code>presentation.apxl</code> in Keynote 1.x to <code>index.apxl</code> in Keynote 2.x.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_6" title="Defining the iWork XML Schemas"></a><h2>Defining the iWork XML Schemas</h2><p>A schema determines the layout of an XML document’s elements, the attributes and subelements that each can have, and the constraints that the attribute data and element data must adhere to. XML schemas are used to define the structure, content and semantics of XML documents.</p><p>As with any XML file, Keynote and Pages XML consists of a series of elements, some of which may contain mixed content, while most include only attributes and/or child elements. Many elements have unique identifiers which allow them to be referenced by other elements.</p><p>Despite a number of internal differences, both iWork XML schemas represent an XML document as an ordered, labeled tree in which each node has a unique identity and may have a value, attributes, and namespaces associated with it. </p><p>The iWork XML schemas operate on the abstract, logical structure of an XML document—the data model—rather than its surface syntax. The data model represents an XML document as a tree of nodes. The tree can have various kinds of nodes, each of which corresponds to a type of XML construct, such as element, attribute, text, and namespace.</p><p>Each node in a tree typically has a unique identity. Most nodes have a name, and many have some string or other type of value associated with them.</p><p>To be usable in a particular context, an XML document must be <em>well formed</em>. This means that a document must have open and close tags for all its elements (in the correct sequence) and contain one root element. In addition, XML documents must have at least one XML declaration: an element that provides XML parsers with essential information needed to process a document and ensure that it is <em>valid</em>. </p><p>A valid document is one that follows the structure specified by a schema file, such as the Pages or Keynote schema files.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-TPXREF135" title="iWork XML Document Structures"></a><h2>iWork XML Document Structures</h2><p>This section discusses both the Keynote and Pages document structures, with a high-level architectural overview of the various elements and attributes that comprise each structure. </p><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIGFBDI" title="The Keynote Document Structure "></a><h3>The Keynote Document Structure </h3><p>If you deconstruct the XML for a valid Keynote presentation, you’ll find that it conforms to an ordered hierarchical list. A Keynote XML document follows the basic hierarchy shown in <span class="content_text">Listing 2-1</span>, with the <code>&lt;key:presentation></code> element always at the top-level.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_68" title="Listing 1-1The Keynote XML hierarchy"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIIJAJG" title="Listing 1-1The Keynote XML hierarchy"></a><strong>Listing 1-1&nbsp;&nbsp;</strong>The Keynote XML hierarchy</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key:presentation><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:theme-list><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key:theme>...&lt;/key:theme><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/key:theme-list><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:slide-list><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key:slides>...&lt;/key:slides><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/key:slide-list><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:ui-state>...&lt;/key:ui-state><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:version-history>...&lt;/key:version-history><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:size>...&lt;/key:size><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/key:presentation><span></span></pre></td></tr></table></div><p>The Keynote XML format also specifies that the <code>&lt;key:theme-list></code> element must have at least one <code>&lt;key:theme></code> child element, and similarly, the <code>&lt;key:slide-list></code> element must have one or more <code>&lt;key:slide></code> child elements.</p><p>The hierarchy of the Keynote schema, with its ordering of elements and associated child elements, is illustrated in <span class="content_text">Figure 2-1</span>. </p><br/><div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_69" title="Figure 1-1The Keynote hierarchy of elements"></a><p><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIBJHAI" title="Figure 1-1The Keynote hierarchy of elements"></a><strong>Figure 1-1&nbsp;&nbsp;</strong>The Keynote hierarchy of elements</p><img src = "../Art/iworks_presentation.gif" alt = "The Keynote hierarchy of elements" width="590" height="544"></div><br/><p><span class="content_text">Table 2-1</span> describes the usage of each Keynote child element. </p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_70" title="Table 1-1The Keynote presentation elements&acirc;&#128;&#153; children and their usage"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIBCFHH" title="Table 1-1The Keynote presentation elements&acirc;&#128;&#153; children and their usage"></a><strong>Table 1-1&nbsp;&nbsp;</strong>The Keynote presentation elements’ children and their usage</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Elements</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>&lt;key:theme-list></code></p></td><td ><p>Describes the default appearance of a Keynote document and each master slide. This element is made up of one or more themes, with child elements that include <code>&lt;key:size></code>, <code>&lt;key:stylesheet></code>, and <code>&lt;key:master-sides></code>. </p></td></tr><tr><td  scope="row"><p><code>&lt;key:slide-list></code></p></td><td ><p>A list of slides, comprising <code>&lt;key:stylesheet></code>, <code>&lt;key:page></code>, <code>&lt;key:body></code>, <code>&lt;key:title></code>, <code>&lt;key:slide-number></code>, and other child elements. The <code>&lt;key:slide-list></code> element is at the center of any Keynote presentation: nothing else can appear in a <code>&lt;key:slide-list></code>. The order of slides in the list is the same as their order of appearance in a presentation. A Keynote document must contain at least one slide.</p></td></tr><tr><td  scope="row"><p><code>&lt;key:ui-state></code></p></td><td ><p>Describes the user interface state of a document; a required element, but can be left empty if you wish. The <code>&lt;key:ui-state></code> element allows you to set the following: which slide the user sees first when opening a document, the size of the document window, and the zoom level of the document.</p></td></tr><tr><td  scope="row"><p><code>&lt;key:version-history></code></p></td><td ><p>Describes the elements that specify the version of the document.</p></td></tr><tr><td  scope="row"><p><code>&lt;key:size></code></p></td><td ><p>Describes the dimensions of the presentation in pixels.</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_7" title="Defining Characteristics"></a><h4>Defining Characteristics</h4><p>In Keynote, the top-level <code>&lt;key:presentation></code> element is comprised of a <code>&lt;key:theme-list></code> and a <code>&lt;key:slide-list></code>. A <code>&lt;key:theme-list></code>, in turn, is comprised of several themes, including one <code>&lt;key:stylesheet></code> and one or more master-slides, and in turn, each master-slide has a single <code>&lt;key:stylesheet></code>. </p><p>Within this structure, there are zero or more visible drawables: <code>&lt;key:body></code>, <code>&lt;key:title></code>, <code>&lt;key:slide-number></code>, and <code>&lt;key:object-placeholder></code>, each of which may or may not be in a list of visible drawables. </p><p>A <code>&lt;key:slide-list></code> element is comprised of one or more slides. A <code>&lt;key:slide></code> consists of one <code>&lt;key:stylesheet></code> and three layers, one of which is a master proxy layer. A layer is a container for drawables. A master proxy layer displays all of the visible drawables from the slide’s master-slide displayed in it. You can have one layer beneath or one layer over it, or just one layer over it. Every slide refers to one master-slide and each master-slide can have zero or more slides. </p><p>A <code>&lt;key:stylesheet></code> element for a slide inherits from the <code>&lt;key:stylesheet></code> for its master-slide. A <code>&lt;key:slide></code> element has three drawable layers. </p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_71" title="Important:"></a><p><strong>Important:</strong>&nbsp;It is not recommended to have a <code>&lt;key:slide></code> element with either more or less than three drawable layers.</p><p></p></div><p>A slide also has a <code>&lt;key:body></code>, <code>&lt;key:title></code>, <code>&lt;key:slide-number></code>, and <code>&lt;key:object-placeholder></code>, which, just like the master slide, may or not be visible. If they are visible, they will show these layers. And a slide has one or more <code>&lt;key:headlines></code>, the first of which is the <code>&lt;key:title></code>, and is always present. But it will not appear unless the title placeholder is present. </p><p>A slide has a single page, and a page has three layers, one of which is the master proxy layer, two of which are drawable layers.  A master slide has one page which has a single drawable layer. Master slides have exactly six headlines, which have no text, and are empty. Headlines each have depths. The six headlines on master slide always have depths 0, 1, 2, 3, 4, and 5. In addition, both master slides and slides have a <code>&lt;key:thumbnail></code> element that contains a single image binary. </p><p>A presentation has a <code>&lt;key:size></code> element that specifies the slide size. Each theme also has a <code>&lt;key:size></code> element.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_8" title="Style and Stylesheet Inheritance"></a><h4>Style and Stylesheet Inheritance</h4><p>Style and style sheet inheritance are important because if you break the inheritance, your document will behave in undefined ways.</p><p>In Keynote, there are three levels of stylesheet: theme (which has no inheritance), master, and slide. Master stylesheets always inherit from a theme stylesheet. Slide stylesheets always inherit from a master stylesheet. For reasons of performance, you have to explicitly set up these inheritance relationships.</p><p>A slide style cannot inherit directly from the theme style. It has to inherit from another element in its stylesheet or its parents’ master stylesheet.</p><p>A stylesheet’s parent is indicated by the <code>&lt;sf:parent-ref></code> child element, where the value of the<code> sfa:IDREF</code> attribute is the value of the<code> sfa:ID</code> attribute of the parent stylesheet’s <code>&lt;key:stylesheet></code> element.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIEIHDD" title="The Pages Document Structure"></a><h3>The Pages Document Structure</h3><p>The Pages document structure shares many substructures with the Keynote structure, with some notable exceptions, as discussed in this section. If you deconstruct the XML for a valid Pages document, you’ll find that it conforms to an ordered hierarchical list shown in <span class="content_text">Listing 2-2</span>. </p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_72" title="Listing 1-2The Pages XML hierarchy"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIFDBDB" title="Listing 1-2The Pages XML hierarchy"></a><strong>Listing 1-2&nbsp;&nbsp;</strong>The Pages XML hierarchy</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;sl:document><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:version-history>...&lt;/sl:version-history><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:publication-info>...&lt;/sl:publication-info><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:metadata>...&lt;/sl:metadata><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:print-info>...&lt;/sl:print-info><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:section-prototypes><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;sl:prototype><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:stylesheet>...&lt;/sl:stylesheet><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:headers>...&lt;/sl: headers><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:footers>...&lt;/sl:footers><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:drawables>...&lt;/sl:drawables><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:text-storage>...&lt;/sl:text-storage><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:thumbnails>...&lt;/sl:thumbnails><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/sl:prototype><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:/section-prototypes><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:stylesheet>...&lt;/sl:stylesheet><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:headers>...&lt;/sl: headers><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:footers>...&lt;/sl:footers><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:drawables>...&lt;/sl:drawables><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:text-storage>...&lt;/sl:text-storage><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:thumbnails>...&lt;/sl:thumbnails><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:window-configs>...&lt;/sl:window-configs><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/sl:document><span></span></pre></td></tr></table></div><p>The Pages XML format specifies that the <code>&lt;sl:document></code> element is always at the top-level of a Pages document. </p><p>The <code>&lt;sl:prototype></code> elements define the captured pages and follow the structure of the document proper, which follows the <code>&lt;sl:section-prototypes></code> element, having child elements for stylesheet, headers, footers, drawables, text-storage, and thumbnails. </p><p><span class="content_text"><a href="../Chapter04/04WorkingPages.html#//apple_ref/doc/uid/TP40002479-CH209-TPXREF101">“Chapter 4, Working With Text Objects in Pages Documents,”</a></span> describes in detail the usage of these elements and their attributes.</p><p>The hierarchy and structure of a Pages document is illustrated in <span class="content_text">Figure 2-2</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_73" title="Figure 1-2The Pages document hierarchy and structure with associated child elements"></a><p><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIGBAAH" title="Figure 1-2The Pages document hierarchy and structure with associated child elements"></a><strong>Figure 1-2&nbsp;&nbsp;</strong>The Pages document hierarchy and structure with associated child elements</p><img src = "../Art/iworks_publication.gif" alt = "The Pages document hierarchy and structure with associated child elements" width="630" height="476"></div><br/><p>The children and their usage in a Pages document are described in <span class="content_text">Table 2-2</span>:</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_74" title="Table 1-2The Pages document structure with associated child elements"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIEJCFG" title="Table 1-2The Pages document structure with associated child elements"></a><strong>Table 1-2&nbsp;&nbsp;</strong>The Pages document structure with associated child elements</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Elements</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>&lt;sl:version-history></code></p></td><td ><p>Lists the previous version of the document format.</p></td></tr><tr><td  scope="row"><p><code>&lt;sl:publication-info></code></p></td><td ><p>Document-level globals, including user preferences.</p></td></tr><tr><td  scope="row"><p><code>&lt;sl:metadata></code></p></td><td ><p>Spotlight metadata.</p></td></tr><tr><td  scope="row"><p><code>&lt;sl:print-info></code></p></td><td ><p>Properties of a Cocoa <code>NSPrintInfo</code> object.</p></td></tr><tr><td  scope="row"><p><code>&lt;sl:section-prototypes></code></p></td><td ><p>A list of <code>&lt;sl:prototype></code> elements which contain data for captured pages, including the style sheet, drawables, headers, footers, the main body text, and thumbnails images.</p></td></tr><tr><td  scope="row"><p><code>&lt;sf:stylesheet></code></p></td><td ><p>The document’s main style sheet.</p></td></tr><tr><td  scope="row"><p><code>&lt;sl:drawables></code></p></td><td ><p>Objects not in the main text flow, such as shapes, text boxes, and so on.</p></td></tr><tr><td  scope="row"><p><code>&lt;sf:headers></code> and <code>&lt;sf:footers></code></p></td><td ><p>Lists the headers and footers used in the document.</p></td></tr><tr><td  scope="row"><p><code>&lt;sf:text-storage></code></p></td><td ><p>The main body text of the document.</p></td></tr><tr><td  scope="row"><p><code>&lt;sl:thumbnails></code></p></td><td ><p>Thumbnail images of the document pages.</p></td></tr><tr><td  scope="row"><p><code>&lt;sl:window-configs></code></p></td><td ><p>Specifies the window size, position, and scroll-position, and the selection when the document was saved.</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_9" title="Defining Characteristics"></a><h4>Defining Characteristics</h4><p>In a high-level view of the Pages document structure, the first notable difference between a Keynote document and a Pages document is the <code>&lt;sl:section-prototypes></code> element, which is unique to Pages. The <code>&lt;sl:section-prototypes></code> contains a list of <code>&lt;sl:prototype></code> elements that mimic the structure of the main pages document, less those parts which pertain to the document as a whole.</p><p>A Pages <code>&lt;sf:stylesheet></code> element has exactly the same format as a Keynote <code>&lt;key:stylesheet></code>, except in Pages there is only one stylesheet for the main document, and one for each captured page set. </p><p>The <code>&lt;sl:drawables></code> element contains all the floating objects either for the page set, or the main document. These are grouped in a manner similar to the way they are grouped in Keynote––that is, into a masters-group and page-groups. Both the page-groups and masters-group have essentially the same structure. The masters-group are for drawables that are on the section masters, while the page-groups are the other drawables, grouped by the page on which they appear. </p><p>The <code>&lt;sl:masters-group></code> has a <code>&lt;sl:section-drawables></code> element for each section in the document or page set, indicated by its <code>&lt;sf:style></code> child element. Each <code>&lt;sl:section-drawables></code> element also has child elements in its foreground and background groups, which are in the same format as the Keynote drawables.</p><p>The <code>&lt;sl:drawables></code> element has <code>&lt;sl:page-group></code> child elements for each page with floating drawables.</p><p>The main document and each page set also have <code>&lt;sl:headers></code> and <code>&lt;sl:footers></code> elements that contain the headers and footers stored as arrays of text storages, and <code>&lt;sl:thumbnails></code> elements that contain the page thumbnail images in an ordered list, similar to the way that thumbnails are stored in Keynote.</p><p>The<code>&lt;sl:window-configs></code> element is used to specify the window size, location, and scroll position, and where the selection was when the document was saved.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_10" title="Stylesheet Inheritance"></a><h4>Stylesheet Inheritance</h4><p>In Pages, as contrasted with Keynote, there is no stylesheet inheritance. There is just one stylesheet per capture page set, and one for the rest of the document.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_11" title="Document Elements"></a><h4>Document Elements</h4><p>The next section describes some of the document elements in a Pages document. It is intended as a symbolic representation of the Pages document format rather than strictly valid XML.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_12" title="Version History"></a><h5>Version History</h5><p>The version-history is purely informational and is not interpreted by the application.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_13" title="Publication-Info"></a><h5>Publication-Info</h5><p>The publication-info is defined in the following XML.</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;sl:publication-info><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:kSFWPFootnoteFormatProperty><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:number sfa:number="0" sfa:type="i"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/sl:kSFWPFootnoteFormatProperty><span></span></pre></td></tr><tr><td scope="row"><pre>    .<span></span></pre></td></tr><tr><td scope="row"><pre>     .<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:SLCreationDateProperty><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:date sfa:ID="NSCalendarDate-0" sl:val="2005-04-19T20:39:39 +0000"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/sl:SLCreationDateProperty><span></span></pre></td></tr><tr><td scope="row"><pre>    .<span></span></pre></td></tr><tr><td scope="row"><pre>     .<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:SLLastModifiedDateProperty><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:date sfa:ID="NSDate-0" sl:val="2005-04-19T22:16:41 +0000"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/sl:SLLastModifiedDateProperty><span></span></pre></td></tr><tr><td scope="row"><pre>     .<span></span></pre></td></tr><tr><td scope="row"><pre>     .<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/sl:publication-info><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_14" title="Metadata"></a><h5>Metadata</h5><p>The metadata element is defined in the following XML: </p><div class="codesample"><table><tr><td scope="row"><pre>&lt;sf:metadata><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sf:comment>...&lt;/sf:comment><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sf:copyright>...&lt;/sf:copyright><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sf:keywords>...&lt;/sf:keywords><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sf:authors>...&lt;/sf:authors><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sf:title>...&lt;/sf:title><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/sf:metadata><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_15" title="Print-Info"></a><h5>Print-Info</h5><p>Some of the print-info elements that appear in the Pages XML are as follows: </p><div class="codesample"><table><tr><td scope="row"><pre>&lt;sl:slprint-info sfa:ID="SLPrintInfo-0" sl:page-width="612" sl:page-height="792" sl:page-scale="1"><span></span></pre></td></tr><tr><td scope="row"><pre>     &lt;sf:page-margins sfa:ID="SFWPMargins-0" sf:top="72"  sf:left="72" sf:bottom="72"  sf:right="72" sf:header="36" sf:footer="43.200000762939453"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:print-info><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSJobDisposition><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSPaperSize><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSMustCollate><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSVerticalPagination><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSVerticallyCentered><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSPrintAllPages><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSCopies><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSBottomMargin><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSLeftMargin><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSTopMargin><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSLastPage><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSFirstPage><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSSavePath><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sl:NSOrientation><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/sl:print-info><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/sl:slprint-info><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_16" title="Section Prototypes"></a><h5>Section Prototypes</h5><p>The section-prototypes XML describe the capture pages sets as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;sl:section-prototypes><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sl:prototype sl:name="Text Page"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sf:stylesheet sfa:ID="SFSStylesheet-0"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;sf:styles><span></span></pre></td></tr><tr><td scope="row"><pre>          &lt;sf:paragraphstyle sfa:ID="SFWPParagraphStyle-0" sf:name="Free Form" sf:ident="paragraph-style-default"><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;sf:null/><span></span></pre></td></tr><tr><td scope="row"><pre>              &lt;/sf:listStyle><span></span></pre></td></tr><tr><td scope="row"><pre>              &lt;sf:hidden/><span></span></pre></td></tr><tr><td scope="row"><pre>              &lt;sf:underline/><span></span></pre></td></tr><tr><td scope="row"><pre>              &lt;sf:underlineColor><span></span></pre></td></tr><tr><td scope="row"><pre>              &lt;sf:word_strikethrough/><span></span></pre></td></tr><tr><td scope="row"><pre>              &lt;sf:firstTopicNumber/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:headers>...&lt;/sl: headers><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:footers>...&lt;/sl:footers><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:drawables>...&lt;/sl:drawables><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:text-storage>...&lt;/sl:text-storage><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;sl:thumbnails>...&lt;/sl:thumbnails><span></span></pre></td></tr><tr><td scope="row"><pre>     &lt;/sl:prototype><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;sl:/section-prototypes><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_17" title="Common Elements and Usage"></a><h3>Common Elements and Usage</h3><p>Many elements in a Keynote or Pages document include a <code>sfa:ID</code> attribute, which assigns a unique name to the element by which it can be referred to elsewhere in the document, generally via a <code>sfa:IDREF</code> attribute. </p><p>A common use is when the same object appears in multiple places in the document, the first being the complete object with an <code>sfa:ID</code> attribute. In subsequent appearances, the object appears in an element of the same name and a <code>-ref</code> suffix with an <code>sfa:IDREF</code> attribute.</p><p>For example:</p><div class="codesample"><table><tr><td scope="row"><pre>        &lt;key:object sfa:ID="Object-0">…&lt;key:object/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key:object-ref sfa:IDREF="Object-0"/><span></span></pre></td></tr></table></div><p>Both <span class="content_text"><a href="../Chapter03/03Keynote.html#//apple_ref/doc/uid/TP40002479-CH204-TPXREF101">“Chapter 3, Deconstructing iWork Shapes and Drawable Objects,”</a></span> and <span class="content_text"><a href="../Chapter04/04WorkingPages.html#//apple_ref/doc/uid/TP40002479-CH209-TPXREF101">“Chapter 4, Working With Text Objects in Pages Documents,”</a></span> discuss in detail the usage of these elements and attributes, with many XML examples for illustration.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_18" title="Working With Document Bundles and Preferences"></a><h2>Working With Document Bundles and Preferences</h2><p>Both Pages documents and Keynote presentations are bundles. A bundle is a directory containing related resources and is treated as a single object (application, document, and so on) by Mac OS X. The term <strong>bundle</strong> refers both to the object and to the directory it represents. </p><p>Keynote and Pages document bundles contain a compressed XML file that describes the entire document, plus the media files that are used in the document, although certain media assets can be referenced externally.</p><p>For Keynote, some media files are actually kept in the theme bundles, which are part of the application. Likewise, media files belonging to Pages’ templates are referenced from the template bundles to help reduce the size of user documents. A user can also choose whether to copy QuickTime movies into the document bundle.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_19" title="Package Contents"></a><h3>Package Contents</h3><p>To view the contents of a Pages or Keynote file, you can control-click it, and select Show Package Contents from the contextual menu that appears.</p><p>A Keynote document bundle contains an <code>index.apxl.gz</code> file containing the compressed XML for the document, a <code>Contents</code> folder that contains only the bundle <code>PkgInfo</code>, and a <code>Thumbs</code> folder, which stores a thumbnail image of each slides (seen in the slide sorter on the left column of the application). Media assets are also saved here.</p><p>Likewise, a Pages document bundle contains an <code>index.xml.gz file</code> containing the compressed XML for the document, a <code>Contents</code> folder that contains only the bundle <code>PkgInfo</code>, and a <code>Thumbs</code> folder, which stores thumbnail images of the pages. Media assets are also saved here.</p><p>The XML files use standard zlib compression, and may be decompressed by double-clicking the file, or with the gzip command-line tool. The applications can also recognize the files in their uncompressed form (without the <code>.gz</code> extension). Be aware that the compressed version is preferred if both exist in the document bundle.</p><p>Note that a Keynote 2.x index file is called <code>index.apxl</code>, while a Pages 1.x index file is specified simply as <code>index.xml</code>.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIICHBB" title="Decompressed Keynote Files"></a><h3>Decompressed Keynote Files</h3><p>If you decompress a Keynote document’s <code>index.apxl.gz</code> file and open it in a text editor, you’ll see something similar to what is shown in <span class="content_text">Listing 2-3</span>.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_75" title="Listing 1-3Decompressed Keynote XML viewed in a text editor "></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIJIFCA" title="Listing 1-3Decompressed Keynote XML viewed in a text editor "></a><strong>Listing 1-3&nbsp;&nbsp;</strong>Decompressed Keynote XML viewed in a text editor </p><div class="codesample"><table><tr><td scope="row"><pre> &lt;key:presentation xmlns:sfa="http://developer.apple.com/namespaces/sfa"  xmlns:sf="http://developer.apple.com/namespaces/sf" xmlns:xsi="http://www.w3.org/ 2001/XMLSchema-instance" xmlns:key="http://developer.apple.com/namespaces/ keynote2" sfa:ID="BGShow-0" key:play-mode="interactive"  key:kiosk-slide-delay="5"  key:kiosk-build-delay="2" key:mode="once" key:version="2004102100"> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:theme-list sfa:ID="NSMutableArray-0"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:theme sfa:ID="BGTheme-0" key:name="Theme" key:decimal-tab="."><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;key:size sfa:w="800" sfa:h="600"/><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;key:stylesheet sfa:ID="SFSStylesheet-0"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;sf:styles><span></span></pre></td></tr><tr><td scope="row"><pre>.<span></span></pre></td></tr><tr><td scope="row"><pre>.<span></span></pre></td></tr><tr><td scope="row"><pre>.<span></span></pre></td></tr><tr><td scope="row"><pre>.<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:slide-list><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key:slide sfa:ID="BGSlide-6" key:depth="0"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:ui-state><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:version-history><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:size><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/key:presentation><span></span></pre></td></tr></table></div><p>In every Keynote document, the <code>&lt;key:presentation></code> element has a number of attributes, including four namespaces that are used throughout the document: (<code>sfa</code>, <code>sf</code>, <code>xsi</code>, and <code>key</code>), and a <code>key:play-mode</code>. </p><p>The <code>&lt;key:presentation></code> elements’ children include <code>&lt;key:theme-list></code>, <code>&lt;key:slide-list></code> , <code>&lt;key:ui-state></code>, <code>&lt;key:version-history></code>, and <code>&lt;key:size></code>, as discussed earlier in this chapter.</p><p>In the example shown in <span class="content_text">Listing 2-4</span>, you’ll see the partial structure of elements from the beginning of a <code>&lt;key:theme-list></code> element to the beginning of a child <code>&lt;sf:styles></code> element. </p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_76" title="Listing 1-4Keynote XML order from theme-list to styles"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIBCEDI" title="Listing 1-4Keynote XML order from theme-list to styles"></a><strong>Listing 1-4&nbsp;&nbsp;</strong>Keynote XML order from theme-list to styles</p><div class="codesample"><table><tr><td scope="row"><pre>  &lt;key:theme-list sfa:ID="NSMutableArray-0"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key:theme sfa:ID="BGTheme-0" key:name="Theme" key:decimal-tab="."><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;key:size sfa:w="800" sfa:h="600"/><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;key:stylesheet sfa:ID="SFSStylesheet-0"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;sf:styles><span></span></pre></td></tr><tr><td scope="row"><pre>            .<span></span></pre></td></tr><tr><td scope="row"><pre>            .<span></span></pre></td></tr><tr><td scope="row"><pre>            .<span></span></pre></td></tr></table></div><p>Here the <code>&lt;key:theme-list></code> element has three children: a <code>&lt;key:theme></code> with a <code>key:name</code> attribute, a <code>&lt;key:size></code> with attributes specifying the width a <code>sfa:w</code> and the height <code>sfa:h</code>, and a <code>&lt;key:stylesheet></code>.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-BCIHGADF" title="Decompressed Pages Documents"></a><h3>Decompressed Pages Documents</h3><p>If you decompress a Pages document’s <code>index.xml.gz</code> file and open it in a text editor, you’ll see something similar to what is shown in <span class="content_text">Listing 2-5</span> near the bottom of the file.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_77" title="Listing 1-5Decompressed Pages XML"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002479-CH203-BBCEIECD" title="Listing 1-5Decompressed Pages XML"></a><strong>Listing 1-5&nbsp;&nbsp;</strong>Decompressed Pages XML</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;sf:text-storage sf:kind="body" sfa:ID="SFWPStorage-8"><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;sf:stylesheet-ref sfa:IDREF="SFSStylesheet-1"/><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;sf:attachments/><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;sf:footnotes>...&lt;/sf:footnotes><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;sf:text-body><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;sf:section sf:name="Chapter 1" sf:style="section-style-0"><span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;sf:layout sf:style="layout-style-20"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;sf:p sf:style="paragraph-style-32">Main body text.&lt;sf:br/>&lt;/sf:p><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;sf:p sf:style="SFWPParagraphStyle-44">Second paragraph with a<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;sf:span sf:style="SFWPCharacterStyle-5">character&lt;/sf:span> style and a&lt;sf:tab/>tab.&lt;sf:br/>&lt;/sf:p><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;sf:p sf:style="paragraph-style-32"><span></span></pre></td></tr><tr><td scope="row"><pre>          &lt;sf:br/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/sf:p><span></span></pre></td></tr><tr><td scope="row"><pre>        .<span></span></pre></td></tr><tr><td scope="row"><pre>        .<span></span></pre></td></tr><tr><td scope="row"><pre>        .<span></span></pre></td></tr><tr><td scope="row"><pre>      &lt;/sf:layout><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/sf:section><span></span></pre></td></tr><tr><td scope="row"><pre>  &lt;/sf:text-body><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/sf:text-storage><span></span></pre></td></tr></table></div><p>In this example, the <code>&lt;sf:text-storage></code> element has an attribute, <code>sf:kind</code>, which specifies that it pertains to the text in the document’s main body. </p><p>The <code>&lt;sf:text-storage></code> element has four children: a <code>&lt;sf:stylesheet-ref></code>, which is a reference to a style sheet that appears earlier in the document, the <code>&lt;sf:attachment></code> and <code>&lt;sf:footnotes></code> elements, and a <code>&lt;sf:text-body></code> element. </p><p>The <code>&lt;sf:text-body></code> element has one or more child elements: an <code>&lt;sf:section></code>, which itself has one or more child <code>&lt;sf:layout></code> elements, which in turn has one or more <code>&lt;sf:p></code> elements, each of which has a <code>sf:style</code> attribute that specifies the identifiers of the sections, layouts, and paragraphs, respectively, of the first section, layout, and paragraph of the main body text.</p><a name="//apple_ref/doc/uid/TP40002479-CH203-DontLinkElementID_20" title="Setting Preferences"></a><h3>Setting Preferences</h3><p>Both Pages and Keynote have several preferences you can set that make it easier to work with their XML files:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults write com.apple.iWork.Pages SaveCompressionLevel 0<span></span></pre></td></tr><tr><td scope="row"><pre>defaults write com.apple.iWork.Keynote SaveCompressionLevel 0<span></span></pre></td></tr></table></div><p>When the <code>SaveCompressionLevel</code> default is set to 0, the XML file will not be compressed. The normal value is 3.</p><div class="codesample"><table><tr><td scope="row"><pre>defaults write com.apple.iWork.Pages FormatXML YES<span></span></pre></td></tr><tr><td scope="row"><pre>defaults write com.apple.iWork.Keynote FormatXML YES<span></span></pre></td></tr></table></div><p>When the <code>FormatXML</code> default is set to <code>YES</code>, the XML will be written formatted for easier viewing and editing. The normal value is <code>NO</code>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Chapter01/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Chapter03/03Keynote.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-11-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Conceptual/iWork2-0_XML/Chapter02/02Pages.html%3Fid%3DTP40002479-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Conceptual/iWork2-0_XML/Chapter02/02Pages.html%3Fid%3DTP40002479-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Conceptual/iWork2-0_XML/Chapter02/02Pages.html%3Fid%3DTP40002479-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>CalcCMask (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING239></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-238.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-240.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-197.html"><B>Chapter 4 - Color QuickDraw</B></A> / <A HREF="QuickDraw-200.html"><B>Color QuickDraw Reference</B></A><BR><DL><DD><A HREF="QuickDraw-211.html"><B>Color QuickDraw Routines</B></A> / <A HREF="QuickDraw-237.html"><B>Calculating Color Fills</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING239-0></A>
<H3>CalcCMask</H3>
 <A NAME=MARKER-11-487></A><A NAME=MARKER-11-487></A><A NAME=MARKER-2-201></A>To determine where filling will not occur when filling from the outside of a rectangle, you can use the <CODE>CalcCMask</CODE> procedure, which indicates pixels that match, or are surrounded by pixels that match, a particular color. <P>
<PRE>
PROCEDURE CalcCMask (srcBits,dstBits: BitMap; 
                     srcRect,dstRect: Rect; 
                     seedRGB: RGBColor; matchProc: ProcPtr;
                     matchData: LongInt); 
</PRE>
<DL>
<DT><CODE>srcBits</CODE>
<DD> The source image. If the image is in a pixel map, you must coerce its <CODE>PixMap</CODE> record to a <CODE>BitMap</CODE> record.
<DT><CODE>dstBits</CODE>
<DD> The destination image, a <CODE>BitMap</CODE> record.
<DT><CODE>srcRect</CODE>
<DD> The rectangle of the source image.
<DT><CODE>dstRect</CODE>
<DD> The rectangle of the destination image.
<DT><CODE>seedRGB</CODE>
<DD> An <CODE>RGBColor</CODE> record specifying the color for pixels that should not be filled.
<DT><CODE>matchProc</CODE>
<DD> An optional matching procedure.
<DT><CODE>matchData</CODE>
<DD> Data for the optional matching procedure.
</DL>
<A NAME=HEADING239-10></A>
<H5>DESCRIPTION</H5>
 The <CODE>CalcCMask</CODE> procedure generates a mask showing where pixels in an image cannot be filled from any of the outer edges of the rectangle you specify. The <CODE>CalcCMask</CODE> procedure returns this mask in the <CODE>dstBits</CODE> parameter. This mask is a bitmap filled with 1's only where the pixels in the source image <I>cannot</I> be filled. You can then use this mask with the <CODE>CopyBits</CODE>, <CODE>CopyMask</CODE>, and <CODE>CopyDeepMask</CODE> procedures.<P>
 You specify a source image in the <CODE>srcBits</CODE> parameter, and in the <CODE>srcRect</CODE> parameter you specify a rectangle within that source image. Starting from the edges of this rectangle, <CODE>CalcCMask</CODE> calculates which pixels <I>cannot</I> be filled. By default, <CODE>CalcCMask</CODE> returns 1's in the mask to indicate which pixels have the exact color that you specify in the <CODE>seedRGB</CODE> parameter, as well as which pixels are enclosed by shapes whose outlines consist entirely of pixels with this color.<P>
 For instance, if the source image in <CODE>srcBits</CODE> contains a dark blue rectangle on a red background, and your application sets <CODE>seedRGB</CODE> equal to dark blue, then <CODE>CalcCMask</CODE> returns a mask with 1's in the positions corresponding to the edges and interior of the rectangle, and 0's outside of the rectangle.<P>
 If you set the <CODE>matchProc</CODE> and <CODE>matchData</CODE> parameters to 0, <CODE>CalcCMask</CODE> uses the exact color specified in the <CODE>RGBColor</CODE> record that you supply in the <CODE>seedRGB</CODE> parameter. You can customize <CODE>CalcCMask</CODE> by writing your own color search function and pointing to it in the <CODE>matchProc</CODE> procedure; your color search function might, for example, search for colors that approximate the color specified in the <CODE>RGBColor</CODE> record. As with <CODE>SeedCFill</CODE>, you can then use the <CODE>matchData</CODE> parameter in any manner useful for your application. <P>
 The <CODE>CalcCMask</CODE> procedure does not scale--the source and destination rectangles must be the same size. Calls to <CODE>CalcCMask</CODE> are not clipped to the current port and are not stored into QuickDraw pictures.<P>
<A NAME=HEADING239-16></A>
<H5>SEE ALSO</H5>
 See <A HREF=QuickDraw-263.html#MARKER-9-592>"Application-Defined Routine" on page 4-92</A> for a description of how to customize the <CODE>CalcCMask</CODE> procedure.<A NAME=MARKER-2-489></A><A NAME=MARKER-2-214></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-238.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-240.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

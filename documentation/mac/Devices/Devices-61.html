<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Format Header Record(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING61></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-60.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-62.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-53.html"><B>Chapter 2 - Slot Manager</B></A> / <A HREF="Devices-57.html"><B>Slot Manager Reference</B></A><BR><DL><DD><A HREF="Devices-58.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING61-0></A>
<H3><A NAME=MARKER-2-229></A><A NAME=MARKER-9-230></A>Format Header Record</H3>
 <A NAME=MARKER-14-231></A><A NAME=MARKER-2-232></A>The Slot Manager uses a format header record to describe the structure of a card's format block, which is located at the highest address in the slot's NuBus address space. By reading information from the format header record, the Slot Manager can locate and validate the card's declaration ROM. The format header record is defined by the <CODE>FHeaderRec</CODE> data type.<P>
<DL>
<DT><B>Note</B>
<DD>For more information about the format block, see <I>Designing Cards and Drivers for the Macintosh Family</I>, third edition.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<PRE>
   TYPE FHeaderRec =                {format header record}
   PACKED RECORD
      fhDirOffset:   LongInt;       {offset to sResource directory}
      fhLength:      LongInt;       {length in bytes of declaration ROM}
      fhCRC:         LongInt;       {cyclic redundancy check}
      fhROMRev:      SignedByte;    {declaration ROM revision}
      fhFormat:      SignedByte;    {declaration ROM format}
      fhTstPat:      LongInt;       {test pattern}
      fhReserved:    SignedByte;    {reserved; must be 0}
      fhByteLanes:   SignedByte;    {byte lanes used by declaration ROM}
   END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>fhDirOffset</CODE>
<DD> A self-relative signed offset to the sResource directory. This field specifies only bytes accessible by valid byte lanes; as a result, the value in this field might not be the absolute address difference.<A NAME=MARKER-2-75></A>
<DT><CODE>fhLength</CODE>
<DD> The number of valid bytes in the declaration ROM. The Slot Manager uses this value when computing the checksum.<A NAME=MARKER-2-85></A>
<DT><CODE>fhCRC</CODE>
<DD> A checksum that allows the Slot Manager to validate the entire declaration ROM.<A NAME=MARKER-2-87></A>
<DT><CODE>fhROMRev</CODE>
<DD> The current ROM revision level. This field should contain a value in the range 1-9; values greater than 9 cause the Slot Manager to generate the error <CODE>smRevisionErr</CODE>.<A NAME=MARKER-2-119></A>
<DT><CODE>fhFormat</CODE>
<DD> The format of the declaration ROM. A value of 1 designates the Apple format.<A NAME=MARKER-2-121></A>
<DT><CODE>fhTstPat</CODE>
<DD> A test pattern. This field must contain the value $5A932BC7.<A NAME=MARKER-2-153></A>
<DT><CODE>fhReserved</CODE>
<DD> Reserved. This field must be 0.<A NAME=MARKER-2-155></A>
<DT><CODE>fhByteLanes</CODE>
<DD> A signed byte that specifies which of the four byte lanes to use when communicating with the declaration ROM. Refer to <I>Designing Cards and Drivers for the Macintosh Family</I>, third edition, for a list of valid values.<A NAME=MARKER-2-158></A><A NAME=MARKER-2-161></A><A NAME=MARKER-2-165></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-60.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-62.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

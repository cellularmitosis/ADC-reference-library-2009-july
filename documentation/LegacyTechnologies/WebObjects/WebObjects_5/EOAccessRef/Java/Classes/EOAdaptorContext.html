<html>	<head>		<title>EOAdaptorContext (Java) </title>	</head><BODY bgcolor=#ffffff>		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../../index.html" target="_top">Documentation</a> <b>></b> <a href="../../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path -->		<a href="../EOAccessTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> <a name="EOAdaptorContext"></a><br>		<h1><font color="#000066"><a name="//apple_ref/java/cl/EOAdaptorContext">EOAdaptorContext</a></font></h1>		<br>		<blockquote>			<dt><b>Inherits from: </b>			<dd>Object </blockquote>		<blockquote>			<dt><b>Package: </b>			<dd>com.webobjects.eoaccess</blockquote>		<hr size="4">		<br>		<h2>Class Description</h2>		<hr alt="">		<p>EOAdaptorContext is an abstract class that provides its concrete subclasses with a structure for handling database transactions. It's associated with EOAdaptor and EOAdaptorChannel, which, together with EOAdaptorContext, form the <em>adaptor level</em> of Enterprise Objects Framework's access layer. See the EOAdaptor class specification for more information about accessing, creating, and using adaptor level objects.</p>		<p>A concrete subclass of EOAdaptorContext provides database-specific method implementations and represents a single transaction scope (logical user) on the database server to which its EOAdaptor object is connected. You never interact with instances of the EOAdaptorContext class, rather your Enterprise Objects Framework applications use instances of concrete subclasses that are written to work with a specific database or other persistent storage system.</p>		<p>If a database server supports multiple concurrent transaction sessions, an adaptor context's EOAdaptor can have several contexts. When you use multiple EOAdaptorContexts for a single EOAdaptor, you can have several database server transactions in progress simultaneously. You should be aware of the issues involved in concurrent access if you do this.</p>		<br>		<table border="0" bgcolor="#E6E6E6">			<tr>				<td scope="row"><b>Note: </b>EOAdaptorContext is abstract. Never create instances of the EOAdaptorContext class.</td>			</tr>		</table><br>		<p>An EOAdaptorContext has an EOAdaptorChannel, which handles actual access to the data on the server. If the database server supports it, a context can have multiple channels. See your adaptor context's documentation to find out if your adaptor supports multiple channels. An EOAdaptorContext by default has no EOAdaptorChannels; to create a new channel send your EOAdaptorContext a <a href="#//apple_ref/java/instm/EOAdaptorContext/createAdaptorChannel">createAdaptorChannel</a> message.</p>		<p>The EOAdaptorContext class has the following principal attributes:</p>		<ul>			<li>Array of adaptor channels 			<li>Delegate 			<li>Adaptor 		</ul>		<p>To create an instance of a concrete EOAdaptorContext subclass, you send a createAdaptorContext message to an instance of the corresponding EOAdaptor subclass. You rarely create adaptor contexts yourself. They are generally created automatically by other framework objects.</p>		<p>You typically don't interact with EOAdaptorContext API directly; rather, a concrete adaptor context subclass inherits from EOAdaptorContext and overrides many of its methods, which are invoked automatically by the Enterprise Objects Framework. If you're not creating a concrete adaptor context subclass, there aren't very many methods you need to use, and you'll rarely invoke them directly. The following table lists the most commonly-used EOAdaptorContext methods:</p>		<br>		<table border="1">			<tr>				<td scope="row"><b>Method</b></td>				<td><b>Description</b></td>			</tr>			<tr>				<td scope="row"><a href="#//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a></td>				<td>Begins a transaction in the database server.</td>			</tr>			<tr>				<td scope="row"><a href="#//apple_ref/java/instm/EOAdaptorContext/commitTransaction">commitTransaction</a></td>				<td>Commits the last transaction begun.</td>			</tr>			<tr>				<td scope="row"><a href="#//apple_ref/java/instm/EOAdaptorContext/rollbackTransaction">rollbackTransaction</a></td>				<td>Rolls back the last transaction begun.</td>			</tr>		</table><br>		<br>		<br>		<br>		<h2>Method Types</h2>		<hr alt="">		<blockquote>			<dt>Constructors 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/EOAdaptorContext">EOAdaptorContext</a> 			<dt>Accessing the adaptor 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/adaptor">adaptor</a> 			<dt>Creating adaptor channels 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/createAdaptorChannel">createAdaptorChannel</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/channels">channels</a> 			<dt>Accessing and managing connection status 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/hasOpenChannels">hasOpenChannels</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/hasBusyChannels">hasBusyChannels</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/handleDroppedConnection">handleDroppedConnection</a> 			<dt>Controlling transactions 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/commitTransaction">commitTransaction</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/rollbackTransaction">rollbackTransaction</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidBegin">transactionDidBegin</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidCommit">transactionDidCommit</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidRollback">transactionDidRollback</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/hasOpenTransaction">hasOpenTransaction</a> 			<dt>Accessing the delegate 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/delegate">delegate</a> 			<dd><a href="#//apple_ref/java/instm/EOAdaptorContext/setDelegate">setDelegate</a> 			<dd><a href="#//apple_ref/java/clm/EOAdaptorContext/defaultDelegate">defaultDelegate</a> 			<dd><a href="#//apple_ref/java/clm/EOAdaptorContext/setDefaultDelegate">setDefaultDelegate</a></blockquote>		<br>		<br>		<h2>Constructors</h2>		<hr alt="">		<a name="BIABGGFG"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/EOAdaptorContext">EOAdaptorContext</a></h3>		<p><code>public <b>EOAdaptorContext</b>(EOAdaptor <em>anAdaptor</em>)</code></p>		Returns a new EOAdaptorContext. You never invoke this constructor directly. You must use the Adaptor method createAdaptorContext to create a new adaptor context. 		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/adaptor">adaptor</a></p>		<hr width="25%" align="LEFT">		<br>		<br>		<h2>Static Methods</h2>		<hr alt="">		<a name="BIACJIIB"></a><br>		<h3><a name="//apple_ref/java/clm/EOAdaptorContext/defaultDelegate">defaultDelegate</a></h3>		<p><code>public static Object <b>defaultDelegate</b>()</code></p>		Returns the default delegate-the object that is assigned as delegate to new adaptor context instances (and their channels). 		<hr width="25%" align="LEFT">		<a name="BIACFBBF"></a><br>		<h3><a name="//apple_ref/java/clm/EOAdaptorContext/setDefaultDelegate">setDefaultDelegate</a></h3>		<p><code>public static void <b>setDefaultDelegate</b>(Object <em>anObject</em>)</code></p>		Sets the default delegate-the object assigned as delegate to all newly created EOAdaptorContext instances (and their EOAdaptorChannels). By default there is no default delegate. 		<hr width="25%" align="LEFT">		<br>		<br>		<h2>Instance Methods</h2>		<hr alt="">		<a name="adaptor"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/adaptor">adaptor</a></h3>		<p><code>public EOAdaptor <b>adaptor</b>()</code></p>		Returns the receiver's EOAdaptor. 		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/EOAdaptorContext">EOAdaptorContext</a> constructor</p>		<hr width="25%" align="LEFT">		<a name="beginTransaction"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a></h3>		<p><code>public abstract void <b>beginTransaction</b>()</code></p>		Implemented by subclasses to attempt to begin a new transaction. A successful invocation of <b>beginTransaction</b> must be paired with an invocation of either <b>commitTransaction</b> or <b>rollbackTransaction</b> to end the transaction. 		<p>The Enterprise Objects Framework automatically wraps database operations in transactions, so you don't have to begin and end transactions explicitly. In fact, letting the framework manage transactions is sometimes more efficient. You typically use <b>beginTransaction</b> only to execute more than one database operation in the same transaction scope.</p>		<p>This method invokes the delegate method adaptorContextShouldBegin before beginning the transaction. If the transaction is begun successfully, the method sends <code>this</code> a <a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidBegin">transactionDidBegin</a> message and invokes the delegate method adaptorContextDidBegin. Throws an exception if the attempt is unsuccessful. Some possible reasons for failure are:</p>		<ul>			<li>A connection to the database hasn't been established. 			<li>A transaction is already in progress. 			<li>A fetch is in progress. 			<li>The delegate refuses<b>.</b> 			<li>The database server fails to begin a transaction. 		</ul>		<p>An adaptor context subclass should override this method without invoking EOAdaptorContext's implementation.</p>		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/hasOpenTransaction">hasOpenTransaction</a></p>		<hr width="25%" align="LEFT">		<br>		<h3><b><a name="//apple_ref/java/instm/EOAdaptorContext/canNestTransactions">canNestTransactions</a></b></h3>		<p><code>public boolean <b>canNestTransactions</b>()</code></p>		Description forthcoming. 		<hr width="25%" align="LEFT">		<a name="channels"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/channels">channels</a></h3>		<p><code>public NSArray <b>channels</b>()</code></p>		Returns an array of channels created by the receiver. 		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/createAdaptorChannel">createAdaptorChannel</a></p>		<hr width="25%" align="LEFT">		<a name="commitTransaction"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/commitTransaction">commitTransaction</a></h3>		<p><code>public abstract void <b>commitTransaction</b>()</code></p>		Implemented by subclasses to attempt to commit the last transaction begun. Invokes the delegate method adaptorContextShouldCommit before committing the transaction. If the transaction is committed successfully, the method sends <code>this</code> a <a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidCommit">transactionDidCommit</a> message and invokes the delegate method adaptorContextDidCommit. Throws an exception if the attempt is unsuccessful. Some possible reasons for failure are: 		<ul>			<li>A transaction is not in progress. 			<li>Fetches are in progress. 			<li>The delegate refuses. 			<li>The database server fails to commit. 		</ul>		<p>An adaptor context subclass should override this method without invoking EOAdaptorContext's implementation.</p>		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a>, <a href="#//apple_ref/java/instm/EOAdaptorContext/rollbackTransaction">rollbackTransaction</a>, <a href="#//apple_ref/java/instm/EOAdaptorContext/hasBusyChannels">hasBusyChannels</a></p>		<hr width="25%" align="LEFT">		<a name="BIABADBC"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/createAdaptorChannel">createAdaptorChannel</a></h3>		<p><code>public abstract EOAdaptorChannel <b>createAdaptorChannel</b>()</code></p>		Implemented by subclasses to create and return a new AdaptorChannel, or <code>null</code> if a new channel cannot be created. Sets the new channel's adaptorContext to this. A newly created adaptor context has no channels. Specific adaptors have different limits on the maximum number of channels a context can have, and <b>createAdaptorChannel</b> fails if a newly created channel would exceed the limits. 		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/channels">channels</a></p>		<hr width="25%" align="LEFT">		<a name="BIACGCDH"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/delegate">delegate</a></h3>		<p><code>public Object <b>delegate</b>()</code></p>		Returns the receiver's delegate, or <code>null</code> if the receiver doesn't have a delegate. 		<hr width="25%" align="LEFT">		<a name="BIAEAIGH"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/handleDroppedConnection">handleDroppedConnection</a></h3>		<p><code>public abstract void <b>handleDroppedConnection</b>()</code></p>		Implemented by subclasses to clean up after the receiver's adaptor lost its connection to its database server. Invoked from EOAdaptor's handleDroppedConnection, this method cleans up the state of its adaptor channels and of itself so the receiver and its channels can be safely disposed of without any errors. 		<p>You should never invoke this method; it is invoked automatically by the Framework. Subclasses must implement this method, without invoking super, if the adaptor supports automatic database reconnection.</p>		<hr width="25%" align="LEFT">		<a name="hasBusyChannels"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/hasBusyChannels">hasBusyChannels</a></h3>		<p><code>public boolean <b>hasBusyChannels</b>()</code></p>		Returns <code>true</code> if any of the receiver's channels have outstanding operations (that is, have a fetch in progress), <code>false</code> otherwise. 		<p><b>See Also: </b>isFetchInProgress (EOAdaptorChannel)</p>		<hr width="25%" align="LEFT">		<a name="hasOpenChannels"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/hasOpenChannels">hasOpenChannels</a></h3>		<p><code>public boolean <b>hasOpenChannels</b>()</code></p>		Returns <code>true</code> if any of the receiver's channels are open, <code>false</code> otherwise. 		<p><b>See Also: </b>openChannel (EOAdaptorChannel), isOpen (EOAdaptorChannel)</p>		<hr width="25%" align="LEFT">		<a name="BIACIJGG"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/hasOpenTransaction">hasOpenTransaction</a></h3>		<p><code>public boolean <b>hasOpenTransaction</b>()</code></p>		Returns <code>true</code> if a transaction is open (begun but not yet committed or rolled back), <code>false</code> otherwise. 		<hr width="25%" align="LEFT">		<a name="rollbackTransaction"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/rollbackTransaction">rollbackTransaction</a></h3>		<p><code>public abstract void <b>rollbackTransaction</b>()</code></p>		Implemented by subclasses to attempt to roll back the last transaction begun. Invokes the delegate method adaptorContextShouldRollback before rolling back the transaction. If the transaction is begun successfully, the method sends <code>this</code> a <a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidRollback">transactionDidRollback</a> message and invokes the delegate method adaptorContextDidRollback. Throws an exception if the attempt is unsuccessful. Some possible reasons for failure are: 		<ul>			<li>A transaction is not in progress. 			<li>Fetches are in progress. 			<li>The delegate refuses. 			<li>The database server fails to rollback. 		</ul>		<p>An adaptor context subclass should override this method without invoking EOAdaptorContext's implementation.</p>		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a>, <a href="#//apple_ref/java/instm/EOAdaptorContext/commitTransaction">commitTransaction</a></p>		<hr width="25%" align="LEFT">		<a name="setDelegate_"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/setDelegate">setDelegate</a></h3>		<p><code>public void <b>setDelegate</b>(Object <em>delegate</em>)</code></p>		Sets the receiver's delegate and the delegate of all the receiver's channels to <em>delegate</em>, or removes their delegates if <em>delegate</em> is <code>null</code>. 		<p><b>See Also: </b><a href="#//apple_ref/java/instm/EOAdaptorContext/channels">channels</a></p>		<hr width="25%" align="LEFT">		<a name="transactionDidBegin"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/transactionDidBegin">transactionDidBegin</a></h3>		<p><code>public void <b>transactionDidBegin</b>()</code></p>		Informs the adaptor context that a transaction has begun in the database server, so the receiver can update its state to reflect this fact and send an <a href="#BIACJGFG">AdaptorContextBeginTransactionNotification</a>. This method is invoked from <a href="#//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a> after a transaction has successfully been started. It is also invoked when the Enterprise Objects Framework implicitly begins a transaction. 		<p>You don't need to invoke this method unless you are implementing a concrete adaptor. Your concrete adaptor should invoke this method from within your adaptor context's implementation of <a href="#//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a> method and anywhere else it begins a transaction-either implicitly or explicitly. For example, an adaptor channel's implementation of evaluateExpression should check to see if a transaction is in progress. If no transaction is in progress, it can start one explicitly by invoking <a href="#//apple_ref/java/instm/EOAdaptorContext/beginTransaction">beginTransaction</a>. Alternatively, it can start an implicit transaction by invoking <a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidBegin">transactionDidBegin</a>.</p>		<p>A subclass of EOAdaptorContext doesn't need to override this method. A subclass that does override it must incorporate the superclass's version through a message to <b>super</b>.</p>		<hr width="25%" align="LEFT">		<a name="transactionDidCommit"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/transactionDidCommit">transactionDidCommit</a></h3>		<p><code>public void <b>transactionDidCommit</b>()</code></p>		Informs the adaptor context that a transaction has committed in the database server, so the receiver can update its state to reflect this fact and send an <a href="#BIADJHJB">AdaptorContextCommitTransactionNotification</a>. This method is invoked from <a href="#//apple_ref/java/instm/EOAdaptorContext/commitTransaction">commitTransaction</a> after a transaction has successfully committed. 		<p>You don't need to invoke this method unless you are implementing a concrete adaptor. Your concrete adaptor should invoke this method from within your adaptor context's implementation of <a href="#//apple_ref/java/instm/EOAdaptorContext/commitTransaction">commitTransaction</a> method and anywhere else it commits a transaction-either implicitly or explicitly.</p>		<p>A subclass of EOAdaptorContext doesn't need to override this method. A subclass that does override it must incorporate the superclass's version through a message to <b>super</b>.</p>		<hr width="25%" align="LEFT">		<a name="transactionDidRollback"></a><br>		<h3><a name="//apple_ref/java/instm/EOAdaptorContext/transactionDidRollback">transactionDidRollback</a></h3>		<p><code>public void <b>transactionDidRollback</b>()</code></p>		Informs the receiver that a transaction has rolled back in the database server, so the adaptor context can update its state to reflect this fact and send an <a href="#BIAEIEHC">AdaptorContextRollbackTransactionNotification</a>. This method is invoked from <a href="#//apple_ref/java/instm/EOAdaptorContext/rollbackTransaction">rollbackTransaction</a> after a transaction has successfully been rolled back. 		<p>You don't need to invoke this method unless you are implementing a concrete adaptor. Your concrete adaptor should invoke this method from within your adaptor context's implementation of <a href="#//apple_ref/java/instm/EOAdaptorContext/rollbackTransaction">rollbackTransaction</a> method and anywhere else it rolls back a transaction-either implicitly or explicitly.</p>		<p>A subclass of EOAdaptorContext doesn't need to override this method. A subclass that does override it must incorporate the superclass's version through a message to <b>super</b>..</p>		<hr width="25%" align="LEFT">		<br>		<h3><b><a name="//apple_ref/java/instm/EOAdaptorContext/transactionNestingLevel">transactionNestingLevel</a></b></h3>		<p><code>public int <b>transactionNestingLevel</b>()</code></p>		Description forthcoming. 		<hr width="25%" align="LEFT">		<br>		<br>		<h2>Notifications</h2>		<hr alt="">		<a name="BIACJGFG"></a>		<h3>AdaptorContextBeginTransactionNotification</h3>		<p><code>public static final String <b>AdaptorContextBeginTransactionNotification</b></code></p>		Sent from <a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidBegin">transactionDidBegin</a> to tell observers that a transaction has begun. The notification contains:<br>		<table border="1">			<tr>				<td scope="row">Notification Object</td>				<td>The notifying EOAdaptorContext object</td>			</tr>			<tr>				<td scope="row">Userinfo</td>				<td>None</td>			</tr>		</table><br>		<a name="BIADJHJB"></a>		<h3>AdaptorContextCommitTransactionNotification</h3>		<p><code>public static final String <b>AdaptorContextCommitTransactionNotification</b></code></p>		Sent from <a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidCommit">transactionDidCommit</a> to tell observers that a transaction has been committed. The notification contains:<br>		<table border="1">			<tr>				<td scope="row">Notification Object</td>				<td>The notifying EOAdaptorContext object</td>			</tr>			<tr>				<td scope="row">Userinfo</td>				<td>None</td>			</tr>		</table><br>		<a name="BIAEIEHC"></a>		<h3>AdaptorContextRollbackTransactionNotification</h3>		<p><code>public static final String <b>AdaptorContextRollbackTransactionNotification</b></code></p>		Sent from <a href="#//apple_ref/java/instm/EOAdaptorContext/transactionDidRollback">transactionDidRollback</a> to tell observers that a transaction has been rolled back. The notification contains:<br>		<table border="1">			<tr>				<td scope="row">Notification Object</td>				<td>The notifying EOAdaptorContext object</td>			</tr>			<tr>				<td scope="row">Userinfo</td>				<td>None</td>			</tr>		</table><br>		<br>		<p>&copy; 2001 Apple Computer, Inc. (Last Published April 13, 2001)</p>		<br>		<a href="../EOAccessTOC.html"><img src="../Art/up.gif" border="0" alt="Table of Contents"></a> <!-- start of footer -->		<!--#include virtual="/includes/framesetfooter" -->		<!-- end of footer -->	</body></html>
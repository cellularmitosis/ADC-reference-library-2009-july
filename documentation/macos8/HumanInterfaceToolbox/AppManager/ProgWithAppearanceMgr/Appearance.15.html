<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">

<script language="JavaScript" src="frametest.js"></script>

<TITLE> Saving and Restoring the Drawing Environment</TITLE><LINK REL="stylesheet" TYPE="text/css" HREF="../../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../../Resources/JavaScript/page.js"></script>
</head>
<body bgcolor="#ffffff">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<DIV>
<a name="top"></a><!-- start of banner -->			
<!--#include virtual="/includes/framesetheader" -->
<!-- end of banner -->

<!-- start of path -->
<table border="0" cellpadding="0" cellspacing="2" width="450">	
	<tr>
	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">
	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b><a href="../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../mac8.html" target="_top">Mac OS 8 and 9</a> 
	<b>&gt;</b> Human Interface Toolbox
	<b>&gt;</b> <a href="../appearancemanager.html" target="_top">Appearance Manager</a> 
	<b>&gt;</b>
	</font></td>
	</tr>
	<tr><td align="left" scope="row"><br>
	<img src="../../../images/im_smblue.gif" width="116" height="8"><img src="../../../images/space.gif" width="6" height="11">
	<font face="Geneva,Helvetica,Arial">Programming With the Appearance Manager</font>
	</td></tr>
</table><br>
<!-- end of path -->
</DIV>

<!-- top navigation -->
<P><A HREF="Appearance.12.html"><img src="images/up.gif" border="0"></A> <A HREF="Appearance.14.html"><img src="images/previous.gif" border="0"></A> <A HREF="Appearance.16.html"><img src="images/next.gif" border="0"></a>

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>

<!-- end of top navigation -->

<hr>



<H1 CLASS="H2.Heading2">
<A NAME="pgfId=257937">
 </A>
<A NAME="marker=260628">
 </A>
<A NAME="26520">
 </A>
Saving and Restoring the Drawing Environment</H1>
<P CLASS="T1.Text1">
<A NAME="pgfId=256040">
 </A>
You may have existing code that saves the state of the graphics port before changing the background or pen, and restores the state after drawing. When adopting theme brushes, you should convert your code to use Appearance Manager functions to save and restore all graphics port state values that can be modified by the theme brush, including pixel patterns and other state information that is not typically accessible to applications.</P>
<P CLASS="T1.Text1">
<A NAME="pgfId=258538">
 </A>
To obtain the current graphics port state values, you can call the function <A HREF="Appearance.31.html#26037" CLASS="XRef">
GetThemeDrawingState</A>
 before performing an operation that modifies the drawing state of a graphics port. To return the graphics port to its previous drawing state and release the memory allocated for the drawing state reference, you can call <A HREF="Appearance.36.html#24011" CLASS="XRef">
SetThemeDrawingState</A>
, providing the reference obtained in the <TT CLASS="cv">
outState</TT>
 parameter of <TT CLASS="cv">
GetThemeDrawingState</TT>
. You can also call <A HREF="Appearance.2e.html#30799" CLASS="XRef">
DisposeThemeDrawingState</A>
 to release the allocated memory.</P>
<P CLASS="T1.Text1">
<A NAME="pgfId=258598">
 </A>
The function <A HREF="Appearance.34.html#19740" CLASS="XRef">
NormalizeThemeDrawingState</A>
 sets the current graphics port to a default drawing state. <TT CLASS="cv">
NormalizeThemeDrawingState</TT>
 sets the background of a graphics port to white; the pen of the port to a size of 1 pixel by 1 pixel, a pattern mode of <TT CLASS="cv">
patCopy</TT>
, and a pattern of black; and the text mode of the port to <TT CLASS="cv">
srcOr</TT>
. The <TT CLASS="cv">
NormalizeThemeDrawingState</TT>
 function also flushes from memory any color foreground or background patterns saved in the port's <TT CLASS="cv">
GrafPort.pnPat</TT>
 or <TT CLASS="cv">
GrafPort.bkPat</TT>
 fields, respectively.</P>
<HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 29 April  99)<P><A HREF="Appearance.12.html"><img src="images/up.gif" border="0"></A> <A HREF="Appearance.14.html"><img src="images/previous.gif" border="0"></A> <A HREF="Appearance.16.html"><img src="images/next.gif" border="0"></A>

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>

<!-- start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->

</body>
</HTML>

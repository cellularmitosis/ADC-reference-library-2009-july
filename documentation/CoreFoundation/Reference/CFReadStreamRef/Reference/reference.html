<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>CFReadStream Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="CFReadStream Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001440-DontLinkChapterID_1" title="CFReadStream Reference"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/CoreFoundation/index.html#//apple_ref/doc/uid/TP30001281-TP30000421" target="_top">Core Foundation</a> &gt; <a href="../index.html" target="_top">CFReadStream Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/revisionCFReadStream.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/20001440-DontLinkChapterID_1-DontLinkElementID_11" title="CFReadStream Reference"></a><h1>CFReadStream Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span class="noWrap">Derived from</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">
<span class="content_text"><a href="../../CFTypeRef/index.html#//apple_ref/doc/uid/20001203" target="_top">CFType</a></span></span></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px"><a href="../../CoreFoundation_Collection/index.html#//apple_ref/doc/uid/TP40003849" target="_top">CoreFoundation</a>/CoreFoundation.h</div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">CFStream.h</span><br/></div></td></tr></table></div><br/><a name="//apple_ref/doc/uid/20001440-CH203-DontLinkElementID_9" title="Overview"></a><h2>Overview</h2><p><code>CFReadStream</code> provides an interface for reading a byte stream either synchronously or asynchronously. You can create streams that read bytes from a block of memory, a file, or a generic socket. All streams need to be opened, using <span class="content_text"><a href="reference.html#//apple_ref/c/func/CFReadStreamOpen">CFReadStreamOpen</a></span>, before reading.</p>
<p>Use <span class="content_text"><a href="../../CFWriteStreamRef/index.html#//apple_ref/doc/uid/20001447" target="_top">CFWriteStream</a></span> for writing byte streams. The CFNetwork framework defines an additional type of stream for reading responses to HTTP requests.</p>
<p>CFReadStream is “toll-free bridged” with its Cocoa Foundation counterpart, <span class="content_text"><a href="../../../../Cocoa/Reference/Foundation/Classes/NSInputStream_Class/Reference/Reference.html#//apple_ref/occ/cl/NSInputStream" target="_top">NSInputStream</a></span>. This means that the Core Foundation type is interchangeable in function or method calls with the bridged Foundation object. Therefore, in a method where you see an <code>NSInputStream *</code> parameter, you can pass in a CFReadStreamRef, and in a function where you see a CFReadStreamRef parameter, you can pass in an <code>NSInputStream</code> instance. Note, however, that you may have either a delegate or callbacks but not both. See <span class="content_text"><a href="../../../../Cocoa/Conceptual/CarbonCocoaDoc/Articles/InterchangeableDataTypes.html#//apple_ref/doc/uid/20002401" target="_top">Interchangeable Data Types</a></span> for more information on toll-free bridging.</p>



<a name="//apple_ref/doc/uid/20001440-DontLinkChapterID_1-DontLinkElementID_10" title="Functions by Task"></a><h2>Functions by Task</h2>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_2" title="Creating a Read Stream"></a>
    
    <h3 class="tasks">Creating a Read Stream</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamCreateWithBytesNoCopy">CFReadStreamCreateWithBytesNoCopy</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a readable stream for a block of memory.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamCreateWithFile">CFReadStreamCreateWithFile</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a readable stream for a file.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_3" title="Opening and Closing a Read Stream"></a>
    
    <h3 class="tasks">Opening and Closing a Read Stream</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamClose">CFReadStreamClose</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Closes a readable stream.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamOpen">CFReadStreamOpen</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Opens a stream for reading.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_4" title="Reading from a Stream"></a>
    
    <h3 class="tasks">Reading from a Stream</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamRead">CFReadStreamRead</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Reads data from a readable stream.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_5" title="Scheduling a Read Stream"></a>
    
    <h3 class="tasks">Scheduling a Read Stream</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamScheduleWithRunLoop">CFReadStreamScheduleWithRunLoop</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Schedules a stream into a run loop.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamUnscheduleFromRunLoop">CFReadStreamUnscheduleFromRunLoop</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Removes a read stream from a given run loop.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_6" title="Examining Stream Properties"></a>
    
    <h3 class="tasks">Examining Stream Properties</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamCopyProperty">CFReadStreamCopyProperty</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the value of a property for a stream.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamGetBuffer">CFReadStreamGetBuffer</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a pointer to a stream’s internal buffer of unread data, if possible.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamCopyError">CFReadStreamCopyError</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the error associated with a stream.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamGetError">CFReadStreamGetError</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the error status of a stream.&#032;(<font color="red">Deprecated.</font>&#032;Use <code>CFReadStreamCopyError</code> instead.)'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamGetStatus">CFReadStreamGetStatus</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the current state of a stream.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamHasBytesAvailable">CFReadStreamHasBytesAvailable</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a Boolean value that indicates whether a readable stream has data that can be read without blocking.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_7" title="Setting Stream Properties"></a>
    
    <h3 class="tasks">Setting Stream Properties</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamSetClient">CFReadStreamSetClient</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Assigns a client to a stream, which receives callbacks when certain events occur.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamSetProperty">CFReadStreamSetProperty</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the value of a property for a stream.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_8" title="Getting the CFReadStream Type ID"></a>
    
    <h3 class="tasks">Getting the CFReadStream Type ID</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFReadStreamGetTypeID">CFReadStreamGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the type identifier the <code>CFReadStream</code> opaque type.'/>
            </span></li>
    </ul>

<a name="//apple_ref/doc/uid/20001440-CH1g-85766" title="Functions"></a><a name="//apple_ref/doc/uid/20001440-CH1g-TPXREF102" title="Functions"></a><h2>Functions</h2><a name="//apple_ref/c/func/CFReadStreamClose" title="CFReadStreamClose"></a><a name="//apple_ref/doc/c_ref/CFReadStreamClose" title="CFReadStreamClose"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17780" title="CFReadStreamClose"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_13"></a><h3 class="tight">CFReadStreamClose</h3>
<p class="spaceabove">Closes a readable stream.</p>
<p class="spaceabove"><pre>
void CFReadStreamClose (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to close.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function terminates the flow of bytes and releases any system resources required by the stream. The stream is removed from any run loops in which it was scheduled. Once closed, the stream cannot be reopened.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFNetworkHTTPDownload/index.html#//apple_ref/doc/uid/DTS10000694" target="_top">CFNetworkHTTPDownload</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamCopyError" title="CFReadStreamCopyError"></a><a name="//apple_ref/doc/c_ref/CFReadStreamCopyError" title="CFReadStreamCopyError"></a><a name="//apple_ref/doc/uid/20001440-CH1g-SW1" title="CFReadStreamCopyError"></a><a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_14"></a><h3 class="tight">CFReadStreamCopyError</h3><p class="spaceabove">Returns the error associated with a stream.</p><p class="spaceabove"><pre>
<a href="../../CFErrorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFErrorRef" target="_top">CFErrorRef</a> CFReadStreamCopyError (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream
);
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>stream</em></dt><dd><p>The stream to examine.</p></dd></dl><h5 class="tight">Return Value</h5><p>A CFError object that describes the current problem with stream, or <code>NULL</code> if there is no error. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamCopyProperty" title="CFReadStreamCopyProperty"></a><a name="//apple_ref/doc/c_ref/CFReadStreamCopyProperty" title="CFReadStreamCopyProperty"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17787" title="CFReadStreamCopyProperty"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_15"></a><h3 class="tight">CFReadStreamCopyProperty</h3>
<p class="spaceabove">Returns the value of a property for a stream.</p>
<p class="spaceabove"><pre>
<a href="../../CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> CFReadStreamCopyProperty (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> propertyName
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to examine.</p></dd>
<dt><em>propertyName</em></dt>
<dd><p>The name of the stream property to obtain. The available properties for standard Core Foundation streams are listed in <em><a href="../../CFStreamConstants/index.html#//apple_ref/doc/uid/TP40003362" target="_top">CFStream Reference</a></em>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The value of the property <em>propertyName</em>. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p>
<h5 class="tight">Discussion</h5>
<p>Each type of stream can define a set of properties that either describe or configure individual streams. A property can be any information about a stream, other than the actual data the stream handles. Examples include the headers from an HTTP transmission, the expected number of bytes, file permission information, and so on. Use <code><a href="reference.html#//apple_ref/c/func/CFReadStreamSetProperty">CFReadStreamSetProperty</a></code> to modify the value of a property, although some properties are read-only.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamCreateWithBytesNoCopy" title="CFReadStreamCreateWithBytesNoCopy"></a><a name="//apple_ref/doc/c_ref/CFReadStreamCreateWithBytesNoCopy" title="CFReadStreamCreateWithBytesNoCopy"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17767" title="CFReadStreamCreateWithBytesNoCopy"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_16"></a><h3 class="tight">CFReadStreamCreateWithBytesNoCopy</h3>
<p class="spaceabove">Creates a readable stream for a block of memory.</p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> CFReadStreamCreateWithBytesNoCopy (
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRef" target="_top">CFAllocatorRef</a> alloc,
   const UInt8 *bytes,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> length,
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRef" target="_top">CFAllocatorRef</a> bytesDeallocator
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>alloc</em></dt>
<dd><p>The allocator to use to allocate memory for the new object. Pass <code><!--a  -->NULL<!--/a--></code> or <code><!--a target="_top" -->kCFAllocatorDefault<!--/a--></code> to use the current default allocator.</p></dd>
<dt><em>bytes</em></dt>
<dd><p>The memory buffer to read. This memory must exist for the lifetime of the new stream.</p></dd>
<dt><em>length</em></dt>
<dd><p>The size of <em>bytes</em>.</p></dd>
<dt><em>bytesDeallocator</em></dt>
<dd><p>The allocator to use to deallocate <em>bytes</em> when the stream is deallocated. Pass <code><!--a target="_top" -->kCFAllocatorNull<!--/a--></code> to prevent the stream from deallocating <em>bytes</em>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The new read stream, or <code>NULL</code> on failure. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p><h5 class="tight">Discussion</h5><p>You must open the stream, using <span class="content_text"><a href="reference.html#//apple_ref/c/func/CFReadStreamOpen">CFReadStreamOpen</a></span>, before reading from it.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamCreateWithFile" title="CFReadStreamCreateWithFile"></a><a name="//apple_ref/doc/c_ref/CFReadStreamCreateWithFile" title="CFReadStreamCreateWithFile"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17770" title="CFReadStreamCreateWithFile"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_17"></a><h3 class="tight">CFReadStreamCreateWithFile</h3>
<p class="spaceabove">Creates a readable stream for a file.</p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> CFReadStreamCreateWithFile (
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRef" target="_top">CFAllocatorRef</a> alloc,
   <a href="../../CFURLRef/Reference/reference.html#//apple_ref/doc/c_ref/CFURLRef" target="_top">CFURLRef</a> fileURL
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>alloc</em></dt>
<dd><p>The allocator to use to allocate memory for the new object. Pass <code><!--a  -->NULL<!--/a--></code> or <code><!--a target="_top" -->kCFAllocatorDefault<!--/a--></code> to use the current default allocator.</p></dd>
<dt><em>fileURL</em></dt>
<dd><p>The URL of the file to read. The URL must use the file scheme.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The new readable stream object, or <code><!--a  -->NULL<!--/a--></code> on failure. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p><h5 class="tight">Discussion</h5><p>You must open the stream, using <span class="content_text"><a href="reference.html#//apple_ref/c/func/CFReadStreamOpen">CFReadStreamOpen</a></span>, before reading from it.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamGetBuffer" title="CFReadStreamGetBuffer"></a><a name="//apple_ref/doc/c_ref/CFReadStreamGetBuffer" title="CFReadStreamGetBuffer"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17784" title="CFReadStreamGetBuffer"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_18"></a><h3 class="tight">CFReadStreamGetBuffer</h3>
<p class="spaceabove">Returns a pointer to a stream’s internal buffer of unread data, if possible.</p>
<p class="spaceabove"><pre>
const UInt8 * CFReadStreamGetBuffer (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> maxBytesToRead,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> *numBytesRead
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to examine.</p></dd>
<dt><em>maxBytesToRead</em></dt>
<dd><p>The maximum number of bytes to read. If greater than <code>0</code>, <code>maxBytesToRead</code> limits the number of bytes read; if <code>0</code> or less, all available bytes are read.</p></dd>
<dt><em>numBytesRead</em></dt>
<dd><p>On return, contains the length of returned buffer. If <em>stream</em> is not open or has encountered an error, <em>numBytesRead</em> is set to <code>-1</code>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A pointer to the internal buffer of unread data for <em>stream</em>, if possible; <code><!--a  -->NULL<!--/a--></code> otherwise. The buffer is good only until the next stream operation called on the stream. You should neither change the contents of the returned buffer nor attempt to deallocate the buffer; it is still owned by the stream. The bytes returned in the buffer are considered read from the stream.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamGetError" title="CFReadStreamGetError"></a><a name="//apple_ref/doc/c_ref/CFReadStreamGetError" title="CFReadStreamGetError"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17776" title="CFReadStreamGetError"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_19"></a><h3 class="tight">CFReadStreamGetError</h3>
<p class="spaceabove">Returns the error status of a stream.&#032;(<strong>Deprecated.</strong>&#032;Use <code><a href="reference.html#//apple_ref/c/func/CFReadStreamCopyError">CFReadStreamCopyError</a></code> instead.)</p>
<p class="spaceabove"><pre>
<a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/doc/c_ref/CFStreamError" target="_top">CFStreamError</a> CFReadStreamGetError (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to examine.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The error status of <em>stream</em> returned in a <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/tdef/CFStreamError" target="_top">CFStreamError</a></code> structure.</p><p>The error field is <code>0</code> if no error has occurred. If the error field is not <code>0</code>, the <code>domain</code> field contains a code that identifies the domain in which the value of the <code>error</code> field should be interpreted.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamGetStatus" title="CFReadStreamGetStatus"></a><a name="//apple_ref/doc/c_ref/CFReadStreamGetStatus" title="CFReadStreamGetStatus"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17774" title="CFReadStreamGetStatus"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_20"></a><h3 class="tight">CFReadStreamGetStatus</h3>
<p class="spaceabove">Returns the current state of a stream.</p>
<p class="spaceabove"><pre>
<a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/doc/c_ref/CFStreamStatus" target="_top">CFStreamStatus</a> CFReadStreamGetStatus (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to examine.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The current state of <em>stream</em>. See <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/tdef/CFStreamStatus" target="_top">CFStreamStatus</a></code> for the list of possible states.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamGetTypeID" title="CFReadStreamGetTypeID"></a><a name="//apple_ref/doc/c_ref/CFReadStreamGetTypeID" title="CFReadStreamGetTypeID"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17765" title="CFReadStreamGetTypeID"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_21"></a><h3 class="tight">CFReadStreamGetTypeID</h3>
<p class="spaceabove">Returns the type identifier the <code>CFReadStream</code> opaque type.</p>
<p class="spaceabove"><pre>
<a href="../../CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> CFReadStreamGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>The type identifier for the <code>CFReadStream</code> opaque type.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamHasBytesAvailable" title="CFReadStreamHasBytesAvailable"></a><a name="//apple_ref/doc/c_ref/CFReadStreamHasBytesAvailable" title="CFReadStreamHasBytesAvailable"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17782" title="CFReadStreamHasBytesAvailable"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_22"></a><h3 class="tight">CFReadStreamHasBytesAvailable</h3>
<p class="spaceabove">Returns a Boolean value that indicates whether a readable stream has data that can be read without blocking.</p>
<p class="spaceabove"><pre>
<!--a-->Boolean<!--/a--> CFReadStreamHasBytesAvailable (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to examine.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p><code><!--a  -->TRUE<!--/a--></code> if data can be read from <em>stream</em> without blocking, otherwise <code><!--a  -->FALSE<!--/a--></code>. If <em>stream</em> cannot tell if data is available without actually trying to read the data, this function returns <code><!--a  -->TRUE<!--/a--></code>.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamOpen" title="CFReadStreamOpen"></a><a name="//apple_ref/doc/c_ref/CFReadStreamOpen" title="CFReadStreamOpen"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17778" title="CFReadStreamOpen"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_23"></a><h3 class="tight">CFReadStreamOpen</h3>
<p class="spaceabove">Opens a stream for reading.</p>
<p class="spaceabove"><pre>
<!--a-->Boolean<!--/a--> CFReadStreamOpen (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to open.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p><code><!--a  -->TRUE<!--/a--></code> if <em>stream</em> was successfully opened, <code><!--a  -->FALSE<!--/a--></code> otherwise. If <em>stream</em> is not in the <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/econst/kCFStreamStatusNotOpen" target="_top">kCFStreamStatusNotOpen</a></code> state, this function returns <code><!--a  -->FALSE<!--/a--></code>.</p>
<h5 class="tight">Discussion</h5>
<p>Opening a stream causes it to reserve all the system resources it requires. If the stream can open in the background without blocking, this function always returns <code><!--a  -->true<!--/a--></code>. To learn when a background open operation completes, you can either schedule the stream into a run loop with <code><a href="reference.html#//apple_ref/c/func/CFReadStreamScheduleWithRunLoop">CFReadStreamScheduleWithRunLoop</a></code> and wait for the stream’s client (set with <code><a href="reference.html#//apple_ref/c/func/CFReadStreamSetClient">CFReadStreamSetClient</a></code>) to be notified or you can poll the stream using <code><a href="reference.html#//apple_ref/c/func/CFReadStreamGetStatus">CFReadStreamGetStatus</a></code>, waiting for a status of <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/econst/kCFStreamStatusOpen" target="_top">kCFStreamStatusOpen</a></code> or <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/econst/kCFStreamStatusError" target="_top">kCFStreamStatusError</a></code>.</p>
<p>You do not need to wait until a stream has finished opening in the background before calling the <code><a href="reference.html#//apple_ref/c/func/CFReadStreamRead">CFReadStreamRead</a></code> function. The read operation will simply block until the open has completed.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFNetworkHTTPDownload/index.html#//apple_ref/doc/uid/DTS10000694" target="_top">CFNetworkHTTPDownload</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamRead" title="CFReadStreamRead"></a><a name="//apple_ref/doc/c_ref/CFReadStreamRead" title="CFReadStreamRead"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17783" title="CFReadStreamRead"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_24"></a><h3 class="tight">CFReadStreamRead</h3>
<p class="spaceabove">Reads data from a readable stream.</p>
<p class="spaceabove"><pre>
<a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> CFReadStreamRead (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   UInt8 *buffer,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> bufferLength
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream from which to read.</p></dd>
<dt><em>buffer</em></dt>
<dd><p>The buffer into which to place the data.</p></dd>
<dt><em>bufferLength</em></dt>
<dd><p>The size of <em>buffer</em> and the maximum number of bytes to read.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The number of bytes read; <code>0</code> if the stream has reached its end; or <code>-1</code> if either the stream is not open or an error occurs.</p>
<h5 class="tight">Discussion</h5>
<p>If <em>stream</em> is in the process of opening, this function waits until it has completed. This function blocks until at least one byte is available; it does not block until <em>buffer</em> is filled. To avoid blocking, call this function only if <code><a href="reference.html#//apple_ref/c/func/CFReadStreamHasBytesAvailable">CFReadStreamHasBytesAvailable</a></code> returns <code><!--a  -->TRUE<!--/a--></code> or after the stream’s client (set with <code><a href="reference.html#//apple_ref/c/func/CFReadStreamSetClient">CFReadStreamSetClient</a></code>) is notified of a <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/econst/kCFStreamEventHasBytesAvailable" target="_top">kCFStreamEventHasBytesAvailable</a></code> event.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFNetworkHTTPDownload/index.html#//apple_ref/doc/uid/DTS10000694" target="_top">CFNetworkHTTPDownload</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamScheduleWithRunLoop" title="CFReadStreamScheduleWithRunLoop"></a><a name="//apple_ref/doc/c_ref/CFReadStreamScheduleWithRunLoop" title="CFReadStreamScheduleWithRunLoop"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17791" title="CFReadStreamScheduleWithRunLoop"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_25"></a><h3 class="tight">CFReadStreamScheduleWithRunLoop</h3>
<p class="spaceabove">Schedules a stream into a run loop.</p>
<p class="spaceabove"><pre>
void CFReadStreamScheduleWithRunLoop (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFRunLoopRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRunLoopRef" target="_top">CFRunLoopRef</a> runLoop,
   <a href="../../CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> runLoopMode
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to schedule.</p></dd>
<dt><em>runLoop</em></dt>
<dd><p>The run loop with which to schedule <em>stream</em>.</p></dd>
<dt><em>runLoopMode</em></dt>
<dd><p>The run loop mode of <em>runLoop</em> in which to schedule <em>stream</em>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>After scheduling <em>stream</em> with a run loop, its client (set with <code><a href="reference.html#//apple_ref/c/func/CFReadStreamSetClient">CFReadStreamSetClient</a></code>) is notified when various events happen with the stream, such as when it finishes opening, when it has bytes available, and when an error occurs. A stream can be scheduled with multiple run loops and run loop modes. Use <code><a href="reference.html#//apple_ref/c/func/CFReadStreamUnscheduleFromRunLoop">CFReadStreamUnscheduleFromRunLoop</a></code> to later remove <em>stream</em> from the run loop.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFNetworkHTTPDownload/index.html#//apple_ref/doc/uid/DTS10000694" target="_top">CFNetworkHTTPDownload</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamSetClient" title="CFReadStreamSetClient"></a><a name="//apple_ref/doc/c_ref/CFReadStreamSetClient" title="CFReadStreamSetClient"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17789" title="CFReadStreamSetClient"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_26"></a><h3 class="tight">CFReadStreamSetClient</h3>
<p class="spaceabove">Assigns a client to a stream, which receives callbacks when certain events occur.</p>
<p class="spaceabove"><pre>
<!--a-->Boolean<!--/a--> CFReadStreamSetClient (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFOptionFlags" target="_top">CFOptionFlags</a> streamEvents,
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamClientCallBack">CFReadStreamClientCallBack</a> clientCB,
   <a href="reference.html#//apple_ref/doc/c_ref/CFStreamClientContext">CFStreamClientContext</a> *clientContext
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to modify.</p></dd>
<dt><em>streamEvents</em></dt>
<dd><p>The set of events for which the client should receive callbacks. The events are listed in <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/tdef/CFStreamEventType" target="_top">CFStreamEventType</a></code>. If you pass <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/econst/kCFStreamEventNone" target="_top">kCFStreamEventNone</a></code>, the current client for <em>stream</em> is removed.</p></dd>
<dt><em>clientCB</em></dt>
<dd><p>The client callback function to be called when one of the events requested in <em>streamEvents</em> occurs. If <code><!--a  -->NULL<!--/a--></code>, the current client for <em>stream</em> is removed.</p></dd>
<dt><em>clientContext</em></dt>
<dd><p>A structure holding contextual information for the stream client. The function copies the information out of the structure, so the memory pointed to by <em>clientContext</em> does not need to persist beyond the function call. If <code><!--a  -->NULL<!--/a--></code>, the current client for <em>stream</em> is removed.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p><code><!--a  -->TRUE<!--/a--></code> if the stream supports asynchronous notification, otherwise <code><!--a  -->FALSE<!--/a--></code>.</p>
<h5 class="tight">Discussion</h5>
<p>To avoid polling and blocking, you can register a client to hear about interesting events that occur on a stream. Only one client per stream is allowed; registering a new client replaces the previous one.</p>
<p>Once you have set a client, you need to schedule the stream in a run loop using <code><a href="reference.html#//apple_ref/c/func/CFReadStreamScheduleWithRunLoop">CFReadStreamScheduleWithRunLoop</a></code> so that the client can receive the asynchronous notifications. You can schedule each stream in multiple run loops (for example, if you are using a thread pool). It is the caller's responsibility to ensure that at least one of the scheduled run loops is being run, otherwise the callback cannot be called.</p>
<p>Although all Core Foundation streams currently support asynchronous notification, future stream types may not. If a stream does not support asynchronous notification, this function returns <code><!--a  -->false<!--/a--></code>. Typically, such streams never block for device I/O (for example, a stream reading memory) and don’t benefit from asynchronous notification.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFNetworkHTTPDownload/index.html#//apple_ref/doc/uid/DTS10000694" target="_top">CFNetworkHTTPDownload</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamSetProperty" title="CFReadStreamSetProperty"></a><a name="//apple_ref/doc/c_ref/CFReadStreamSetProperty" title="CFReadStreamSetProperty"></a><a name="//apple_ref/doc/uid/20001440-CH1g-CFReadStreamSetProperty" title="CFReadStreamSetProperty"></a><a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_27"></a><h3 class="tight">CFReadStreamSetProperty</h3>
<p class="spaceabove">Sets the value of a property for a stream.</p>
<p class="spaceabove"><pre>
<!--a-->Boolean<!--/a--> CFReadStreamSetProperty (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> propertyName,
   <a href="../../CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeRef" target="_top">CFTypeRef</a> propertyValue
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to modify.</p></dd>
<dt><em>propertyName</em></dt>
<dd><p>The name of the property to set. The available properties for standard Core Foundation streams are listed in <em><a href="../../CFStreamConstants/index.html#//apple_ref/doc/uid/TP40003362" target="_top">CFStream Reference</a></em>.</p></dd>
<dt><em>propertyValue</em></dt>
<dd><p>The value to which to set the property <em>propertyName</em> for <em>stream</em>. The allowed data type of the value depends on the property being set.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p><code><!--a  -->TRUE<!--/a--></code> if <em>stream</em> recognizes and accepts the given property-value pair, otherwise<code><!--a  -->FALSE<!--/a--></code>.</p>
<h5 class="tight">Discussion</h5>
<p>Each type of stream can define a set of properties that either describe or configure individual streams. A property can be any interesting information about a stream. Examples include the headers from an HTTP transmission, the expected number of bytes, file permission information, and so on. Properties that can be set configure the behavior of the stream and may be modifiable only at particular times, such as before the stream has been opened. (In fact, you should assume that you can set properties only before opening the stream, unless otherwise noted.) To read the value of a property use <code><a href="reference.html#//apple_ref/c/func/CFReadStreamCopyProperty">CFReadStreamCopyProperty</a></code>, although some properties are write-only.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CocoaEcho/index.html#//apple_ref/doc/uid/DTS10003603" target="_top">CocoaEcho</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CocoaHTTPServer/index.html#//apple_ref/doc/uid/DTS10003604" target="_top">CocoaHTTPServer</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CocoaSOAP/index.html#//apple_ref/doc/uid/DTS10003715" target="_top">CocoaSOAP</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/func/CFReadStreamUnscheduleFromRunLoop" title="CFReadStreamUnscheduleFromRunLoop"></a><a name="//apple_ref/doc/c_ref/CFReadStreamUnscheduleFromRunLoop" title="CFReadStreamUnscheduleFromRunLoop"></a><a name="//apple_ref/doc/uid/20001440-CH1g-F17793" title="CFReadStreamUnscheduleFromRunLoop"></a>
<a name="//apple_ref/doc/uid/20001440-CH1g-DontLinkElementID_28"></a><h3 class="tight">CFReadStreamUnscheduleFromRunLoop</h3>
<p class="spaceabove">Removes a read stream from a given run loop.</p>
<p class="spaceabove"><pre>
void CFReadStreamUnscheduleFromRunLoop (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFRunLoopRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRunLoopRef" target="_top">CFRunLoopRef</a> runLoop,
   <a href="../../CFStringRef/Reference/reference.html#//apple_ref/doc/c_ref/CFStringRef" target="_top">CFStringRef</a> runLoopMode
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream to unschedule.</p></dd>
<dt><em>runLoop</em></dt>
<dd><p>The run loop from which to remove <em>stream</em>.</p></dd>
<dt><em>runLoopMode</em></dt>
<dd><p>The run loop mode of <em>runLoop</em> from which to remove <em>stream</em>.</p></dd></dl>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFFTPSample/index.html#//apple_ref/doc/uid/DTS10003223" target="_top">CFFTPSample</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/CFNetworkHTTPDownload/index.html#//apple_ref/doc/uid/DTS10000694" target="_top">CFNetworkHTTPDownload</a></span></li><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/ImageClient/index.html#//apple_ref/doc/uid/DTS10003661" target="_top">ImageClient</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/doc/uid/20001440-CH2g-87122" title="Callbacks"></a><a name="//apple_ref/doc/uid/20001440-CH2g-TPXREF103" title="Callbacks"></a><h2>Callbacks</h2>
<a name="//apple_ref/c/tdef/CFReadStreamClientCallBack" title="CFReadStreamClientCallBack"></a><a name="//apple_ref/doc/c_ref/CFReadStreamClientCallBack" title="CFReadStreamClientCallBack"></a><a name="//apple_ref/doc/uid/20001440-CH2g-F17634" title="CFReadStreamClientCallBack"></a><a name="//apple_ref/doc/uid/20001440-CH2g-DontLinkElementID_29"></a><h3 class="tight">CFReadStreamClientCallBack</h3>
<p class="spaceabove">Callback invoked when certain types of activity takes place on a readable stream.</p>
<p class="spaceabove"><pre>
typedef void (*CFReadStreamClientCallBack) (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/doc/c_ref/CFStreamEventType" target="_top">CFStreamEventType</a> eventType,
   void *clientCallBackInfo
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
void MyCallBack (
   <a href="reference.html#//apple_ref/doc/c_ref/CFReadStreamRef">CFReadStreamRef</a> stream,
   <a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/doc/c_ref/CFStreamEventType" target="_top">CFStreamEventType</a> eventType,
   void *clientCallBackInfo
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>stream</em></dt>
<dd><p>The stream that experienced the event <em>eventType</em>.</p></dd>
<dt><em>eventType</em></dt>
<dd><p>The event that caused the callback to be called. The possible events are listed in <code><a href="../../CFStreamConstants/Reference/reference.html#//apple_ref/c/tdef/CFStreamEventType" target="_top">CFStreamEventType</a></code>.</p></dd>
<dt><em>clientCallBackInfo</em></dt>
<dd><p>The <code>info</code> member of the <code><a href="reference.html#//apple_ref/c/tdef/CFStreamClientContext">CFStreamClientContext</a></code> structure that was used when setting the client for <em>stream</em>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This callback is called only for the events requested when setting the client with <code><a href="reference.html#//apple_ref/c/func/CFReadStreamSetClient">CFReadStreamSetClient</a></code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later. </li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/doc/uid/20001440-CH3g-87275" title="Data Types"></a><a name="//apple_ref/doc/uid/20001440-CH3g-TPXREF104" title="Data Types"></a><h2>Data Types</h2>


<a name="//apple_ref/c/tdef/CFReadStreamRef" title="CFReadStreamRef"></a><a name="//apple_ref/doc/c_ref/CFReadStreamRef" title="CFReadStreamRef"></a><a name="//apple_ref/doc/uid/20001440-CH3g-C017598" title="CFReadStreamRef"></a><a name="//apple_ref/doc/uid/20001440-CH3g-DontLinkElementID_30"></a><h3 class="tight">CFReadStreamRef</h3>
<p class="spaceabove">A reference to a readable stream object.</p>
<p class="spaceabove"><pre>
typedef struct __CFReadStream *CFReadStreamRef;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later. </li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code><a name="//apple_ref/c/tdef/CFStreamClientContext" title="CFStreamClientContext"></a><a name="//apple_ref/doc/c_ref/CFStreamClientContext" title="CFStreamClientContext"></a><a name="//apple_ref/doc/uid/20001440-CH3g-C017597" title="CFStreamClientContext"></a>
<a name="//apple_ref/doc/uid/20001440-CH3g-DontLinkElementID_31"></a><h3 class="tight">CFStreamClientContext</h3>
<p class="spaceabove">A structure that contains program-defined data and callbacks with which you can configure a stream’s client behavior.</p>
<p class="spaceabove"><pre>
struct CFStreamClientContext {
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> version;
   void *info;
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRetainCallBack" target="_top">CFAllocatorRetainCallBack</a> retain;
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorReleaseCallBack" target="_top">CFAllocatorReleaseCallBack</a> release;
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorCopyDescriptionCallBack" target="_top">CFAllocatorCopyDescriptionCallBack</a> copyDescription;
};
typedef struct CFStreamClientContext CFStreamClientContext;
</pre></p>
<h5 class="tight">Fields</h5><dl class="termdef">
<dt><code>version</code></dt>
<dd><p>Version number of the structure. Must be <code>0</code>.</p></dd>
<dt><code>info</code></dt>
<dd><p>An arbitrary pointer to program-defined data, which can be associated with the client. This pointer is passed to the callbacks defined in the context and to the client callback function <code><a href="reference.html#//apple_ref/c/tdef/CFReadStreamClientCallBack">CFReadStreamClientCallBack</a></code>.</p></dd>
<dt><code>retain</code></dt>
<dd><p>A retain callback for your program-defined <code>info</code> pointer. Can be <code>NULL</code>.</p></dd>
<dt><code>release</code></dt>
<dd><p>A release callback for your program-defined <code>info</code> pointer. Can be <code>NULL</code>.</p></dd>
<dt><code>copyDescription</code></dt>
<dd><p>A copy description callback for your program-defined <code>info</code> pointer. Can be <code>NULL</code>.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later. </li></ul><h5 class="tight">Declared In</h5><code>CFStream.h</code>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/revisionCFReadStream.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-05-03<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/CoreFoundation/Reference/CFReadStreamRef/Reference/reference.html%3Fid%3D20001440-3.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/CoreFoundation/Reference/CFReadStreamRef/Reference/reference.html%3Fid%3D20001440-3.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/CoreFoundation/Reference/CFReadStreamRef/Reference/reference.html%3Fid%3D20001440-3.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
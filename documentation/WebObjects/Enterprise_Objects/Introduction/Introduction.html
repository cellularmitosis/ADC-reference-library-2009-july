<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Enterprise Objects Programming Guide: Enterprise Objects Overview</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Enterprise Objects Overview"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001011-CH202" title="Enterprise Objects Overview"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../InternetWeb/index.html#//apple_ref/doc/uid/TP30000440-TP30000469" target="_top">Internet &amp; Web</a> &gt; <a href="../../../InternetWeb/WebObjects-date.html#//apple_ref/doc/uid/TP30000440-TP30000469-TP30000592" target="_top">WebObjects</a> &gt; <a href="../About/About.html#//apple_ref/doc/uid/TP30001011-CH201-DontLinkElementID_1">WebObjects Enterprise Objects Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../About/About.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../EnterpriseObjects/EnterpriseObjects.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_136" title="Enterprise Objects Overview"></a><h1><a name="//apple_ref/doc/uid/TP30001011-CH202-TP1" title="Enterprise Objects Overview"></a>Enterprise Objects Overview</h1><p>The Enterprise Object technology provides a set of flexible, modular, and mature object-oriented frameworks that allow you to build data-driven applications without needing to worry about an application’s data sources. It allows you to work with objects rather than directly with the data source, which reduces development time, reduces the amount of code you need to write, and allows you to build reusable, portable business objects that can be shared between many different applications.</p><p>Enterprise Objects specializes in providing mechanisms to retrieve data from various data sources, such as relational databases via JDBC and JNDI directories, and mechanisms to commit data back to those data sources. These mechanisms are designed in a layered, abstract approach that allows you to think about data retrieval and commitment at a higher level than a specific data source or data source vendor.</p><p>In marrying relational databases to object-oriented programming, the fundamental problem is how to define the mapping between each world. To solve this problem, Enterprise Objects provides tools and frameworks for <strong>object-relational mapping</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_483"></a> to allow you to work with data objects, rather than directly with database tables. These data objects are referred to as <strong>enterprise objects</strong>.</p><p>The core element to this mapping is a model file<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_484"></a> that you build with a tool called EOModeler<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_485"></a>. This tool is documented in <em><a href="../../UsingEOModeler/index.html#//apple_ref/doc/uid/TP30001018" target="_top">EOModeler User Guide</a></em><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_486"></a>, which you should read before reading this document. By understanding how to build models that Enterprise Objects can use, you'll be better equipped to understand the concepts in this book.</p><p>This chapter introduces the major concepts in Enterprise Objects. It is divided into the following sections:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="Introduction.html#//apple_ref/doc/uid/TP30001011-CH202-TPXREF141">“What Does Enterprise Objects Do?”</a></span> describes the core purposes of Enterprise Objects.</p></li><li class="li"><p><span class="content_text"><a href="Introduction.html#//apple_ref/doc/uid/TP30001011-CH202-CACCBFIB">“Why Enterprise Objects?”</a></span> discusses the Enterprise Objects advantage.</p></li><li class="li"><p><span class="content_text"><a href="Introduction.html#//apple_ref/doc/uid/TP30001011-CH202-CEHIFFAE">“What Is an Enterprise Object?”</a></span> introduces the key element in Enterprise Objects applications: instances of classes that implement the EOEnterpriseObject interface.</p></li><li class="li"><p><span class="content_text"><a href="Introduction.html#//apple_ref/doc/uid/TP30001011-CH202-TPXREF143">“Core Layers”</a></span> introduces the core layers in the Enterprise Objects frameworks.</p></li><li class="li"><p><span class="content_text"><a href="Introduction.html#//apple_ref/doc/uid/TP30001011-CH202-TPXREF144">“Key Concepts of Object-Oriented Programming”</a></span> discusses some important object-oriented programming principles that you’ll encounter when using Enterprise Objects.</p></li></ul><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF141" title="What Does Enterprise Objects Do?"></a><h2>What Does Enterprise Objects Do?</h2><p>Enterprise Objects is a complex system that does much more than just communicate with data sources. It also includes objects that participate in user interface-to-data source synchronization, it helps you build business logic into Java objects, and it provides an object-oriented framework with which you develop data-driven Web and desktop applications. Enterprise Objects does the following:</p><ul class="ul"><li class="li"><p>manages transactions for JDBC, JNDI, and other types of data sources</p></li><li class="li"><p>maps database contents to Java objects</p></li><li class="li"><p>allows you to focus on writing business logic rather than on writing SQL to talk to a data store</p></li><li class="li"><p>helps you build object-oriented database applications</p></li><li class="li"><p>helps you to maintain platform independence while providing the flexibility to take advantage of platform-specific features</p></li><li class="li"><p>lets you build robust database applications that respect the Model-View-Controller paradigm and object-oriented design principles</p></li><li class="li"><p>provides a distribution layer between client and server in Java client desktop applications</p></li><li class="li"><p>provides objects that allow heterogeneous user interface kits to communicate with Java business objects</p></li><li class="li"><p>provides a change tracking mechanism, as well as automatic undo and redo</p></li></ul><p><span class="content_text">Figure 2-1</span> gives a high-level view of the core layers of Enterprise Objects.</p><br/><div><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_137" title="Figure 1-1High-level view of Enterprise Objects"></a><p><a name="//apple_ref/doc/uid/TP30001011-CH202-CACCJFGI" title="Figure 1-1High-level view of Enterprise Objects"></a><strong>Figure 1-1&nbsp;&nbsp;</strong>High-level view of Enterprise Objects</p><img src = "../Art/eoclients.gif" alt = "High-level view of Enterprise Objects" width="377" height="339"></div><br/><a name="//apple_ref/doc/uid/TP30001011-CH202-CACCBFIB" title="Why Enterprise Objects?"></a><h2>Why Enterprise Objects?</h2><p>There are two common design patterns<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_487"></a> in database application development, both of which suffer from the same fault. The first design pattern is to implement business logic in user interface code. The second design pattern is to mix business logic with the logic for accessing business data. A variation of the second pattern is to put business logic rules in the data store using triggers, stored procedures, and the like.</p><p>In the first case, Swing user interface code or HTML is mixed in the same class with Java business logic. In the second case, Java business logic and SQL code are mixed within the same class. In both cases, this practice of mixing presentation code with business logic code greatly reduces the reusability of those objects. Aside from violating good object-oriented programming practices, both approaches distract developers from their primary task: building applications that use and profit from custom business logic.</p><p>In short, mixing business logic with application logic, user interface logic, or with data access logic results in these consequences:</p><ul class="ul"><li class="li"><p><strong>Business objects are not reusable.</strong> Putting business logic in user interface code requires you to reimplement business logic in each application and within multiple user interface components in an application. Putting business logic in the data store locks you into that data store, forces you to work in raw SQL, and in general makes your business logic less maintainable.</p></li><li class="li"><p><strong>Data integrity is compromised.</strong> If you have to constantly reimplement your business logic in each application you build, you rely on each reimplementation to be correct, which is very risky. If you leave tasks like validation to the data store, you give up earlier and more effective interception points and require a round trip to the data store for tasks that can occur without that kind of network overhead.</p></li><li class="li"><p><strong>Business objects<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_488"></a> are not maintainable.</strong> When you hard-code database artifacts like attribute and entity names within user interface code, any changes to your database schema require you to find and update this related information in each user interface in which business logic is implemented. When you put business logic in the data store, you are forced to put database-specific SQL within your business objects to use the business logic in the data store.</p></li><li class="li"><p><strong>Business logic<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_489"></a> becomes dirty.</strong> The last thing you should think about when developing business logic classes are database artifacts like primary and foreign keys. However, most database application development environments force you to do just this! Needing to think about these things distracts you from the important task of writing great business logic.</p></li><li class="li"><p><strong>You are forced to mix languages.</strong> Although many database application development environments force you to mix SQL, Swing, HTML, and Java code within components and classes, this is terrible design and doesn’t reflect the expertise within development organizations. Database administrators are SQL experts; application developers are Java experts; Web designers are HTML experts. Combining languages within components devalues the talents within development organizations as it prevents the clean separation of business logic code, user interface code, and data access code.</p></li></ul><p>Fortunately, there is a third approach to database application development that allows you to build clean, reusable, maintainable, and robust business objects without needing to mix SQL, HTML, or Swing code within Java business classes. This is the approach the Enterprise Object technology offers.</p><p>It allows you to put business rules in business objects called enterprise objects<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_490"></a>. Enterprise objects have no knowledge of the data store or data access mechanism from which they derive their data, nor do they have knowledge of the user interfaces that use the data they provide. Enterprise object classes are made up exclusively of Java foundation classes—they contain no SQL, no HTML, and no Swing code. Rather, they work within a hierarchy of other classes that perform specific functions.</p><p>This clean separation<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_491"></a> of business logic, user interface logic, and data access logic allows you to focus on the task of writing business logic and building applications that benefit from that logic.</p><a name="//apple_ref/doc/uid/TP30001011-CH202-CEHIFFAE" title="What Is an Enterprise Object?"></a><h2>What Is an Enterprise Object?</h2><p>An enterprise object is an instance of a class that implements the <code>com.webobjects.eocontrol.EOEnterpriseObject</code> interface. You can think of an enterprise object as a business object. It contains your business rules and represents the data on which your business relies. </p><p>An enterprise object<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_492"></a> is like any other object in that it couples data with the methods for operating on that data. However, an enterprise object has certain characteristics that distinguish it from other classes:</p><ul class="ul"><li class="li"><p>It has properties that map to stored data; an enterprise object instance typically corresponds to a single row or record in a database.</p></li><li class="li"><p>It knows how to interact with other parts of the Enterprise Object technology to give and receive values for its properties.</p></li></ul><p>An enterprise object is an instance of a class (such as <code>com.webobjects.eocontrol.EOGenericRecord</code>) that has attributes that correspond to the data values from the database row or record from which the object is instantiated. An enterprise object<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_493"></a> has a corresponding model that defines the mapping between the class’s object model and the database schema. However, an enterprise object doesn’t explicitly know about its model.</p><p>This model (an EOModel) allows Enterprise Objects to map<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_494"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_495"></a> database tables to enterprise objects (Java objects) so that a database row maps to an instance of a particular enterprise object class. For instance, a database table named “LISTING” maps to an enterprise object class, which is usually an instance of or subclass<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_496"></a> of <code>com.webobjects.eocontrol.EOGenericRecord</code>, which implements the <code>com.webobjects.eocontrol.EOEnterpriseObject</code> interface. </p><p>You control what kind of enterprise object class a given database table maps to. <span class="content_text">Figure 2-2</span> illustrates the mapping between a database table and an enterprise object.</p><br/><div><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_138" title="Figure 1-2Mapping between a database table and an enterprise object"></a><p><a name="//apple_ref/doc/uid/TP30001011-CH202-BIHBIJHJ" title="Figure 1-2Mapping between a database table and an enterprise object"></a><strong>Figure 1-2&nbsp;&nbsp;</strong>Mapping between a database table and an enterprise object</p><img src = "../Art/mappingtabletoeo.gif" alt = "Mapping between a database table and an enterprise object" width="341" height="223"></div><br/><p>You have a good deal of control over how this mapping<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_497"></a> happens. For example:</p><ul class="ul"><li class="li"><p>You can map an enterprise object class to a single database table, a subset of a table, or to more than one table (via relationships, flattening, and other mechanisms). For example, a Listing enterprise object can get its price, square footage, and number of bedrooms from a LISTING table, its street address, city, state, and zip code information from an ADDRESS table, and its property tax information from a LISTING_TAX table.</p></li><li class="li"><p>Generally, an enterprise object property (a datum in an enterprise object) maps to a single column in a table. For example, an employee’s salary can be defined strictly by the row value of the SALARY column in an EMPLOYEE table. But an employee’s salary can also be mapped to a derived attribute such as “SALARY + BONUS” or “SALARY * 12”.</p></li><li class="li"><p>You can map an enterprise object inheritance<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_498"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_499"></a> hierarchy to one or more database tables. Inheritance is a powerful feature that lets you think of your database schema in terms of an object hierarchy. It is discussed in detail in <em><a href="../../UsingEOModeler/index.html#//apple_ref/doc/uid/TP30001018" target="_top">EOModeler User Guide</a></em>.</p></li></ul><p>One of the most powerful features of Enterprise Objects is that it maps database joins<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_500"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_501"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_502"></a> to relationships between objects. Again, you have a great deal of flexibility with regard to how this mapping occurs. You can map to-one, to-many, and many-to-many relationships, and you can control the business rules that govern those relationships, such as delete rule, optionality, and ownership.</p><p><span class="content_text">Figure 2-3</span> illustrates the mapping between a database table and an enterprise object. A single row in the LISTING table is related to one or more rows in the LISTING_PHOTO table: there is a to-many relationship between the LISTING table and the LISTING_PHOTO table.</p><p>When an enterprise object is instantiated from the LISTING table, placeholder objects (called <strong>faults</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_503"></a>) for related rows in the LISTING_PHOTO table are also instantiated. When a Listing’s <code>photos</code> relationship is accessed, those faults are turned into fully formed enterprise objects, which allows the Listing enterprise object to access data in the ListingPhoto enterprise objects. All the SQL you would normally need to write to resolve the joins is handled for you automatically. </p><p>Faulting is explained in more detail in <span class="content_text"><a href="../EnterpriseObjects/EnterpriseObjects.html#//apple_ref/doc/uid/TP30001011-CH203-TPXREF140">“Faulting.”</a></span></p><br/><div><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_139" title="Figure 1-3Mapping between two joined tables and enterprise object instances"></a><p><a name="//apple_ref/doc/uid/TP30001011-CH202-BIHFGIII" title="Figure 1-3Mapping between two joined tables and enterprise object instances"></a><strong>Figure 1-3&nbsp;&nbsp;</strong>Mapping between two joined tables and enterprise object instances</p><img src = "../Art/eosinrelationship.gif" alt = "Mapping between two joined tables and enterprise object instances" width="347" height="348"></div><br/><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF143" title="Core Layers"></a><h2>Core Layers</h2><p>Now that you understand the basic ideas behind enterprise object instances, you need to understand how those instances work within the Enterprise Objects frameworks.</p><p>Enterprise Objects is composed of many layers<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_504"></a>, each of which is responsible for a particular set of tasks in an application. A layer generally corresponds to a Java package so that the <code>com.webobjects.eoaccess</code> package is referred to as the access layer<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_505"></a> and the <code>com.webobjects.eointerface</code> package is referred to as the interface layer.</p><p>The first layer you work with is referred to throughout the documentation as the control layer and is composed of the classes in the <code>com.webobjects.eocontrol</code> package. Many things happen at the control layer, but the most important thing to remember is that the control layer is where the graph<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_506"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_507"></a> of enterprise objects lives. This layer is not concerned with and has no direct knowledge of how data is collected into it. </p><p>The <strong>object graph</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_508"></a> is the organizing principle of Enterprise Objects. The object graph refers to a graph, or structure, of business objects and the objects that support those business objects, such as editing contexts. In an Enterprise Objects application, the object graph is made up of editing contexts,<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_509"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_510"></a> which in turn contain enterprise objects—objects instantiated from classes that implement the EOEnterpriseObject interface. Editing contexts<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_511"></a> allow enterprise objects to know about each other and also to know when data from other layers arrives at the control layer and affects the data within enterprise object instances. </p><p>The advantage<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_512"></a> of the object graph is that it allows you to work with database content as Java objects, rather than as SQL or another more primitive language. For example, rather than managing<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_513"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_514"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_515"></a> a particular data source’s primary keys, you can rely on Enterprise Objects to manage primary keys based on the operations you make within a given object graph. Likewise, rather than managing join tables for a particular database, you simply manipulate related enterprise objects in the object graph and then rely on Enterprise Objects to generate the appropriate SQL to propagate changes to the data source.</p><p>The control layer<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_516"></a> is where you insert new enterprise objects, delete enterprise objects, invoke fetches and commits, manipulate relationships, and most importantly, it is where you implement business logic. The operations<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_517"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_518"></a> you perform at the control layer are eventually transformed into SQL and vendor-specific or vendor-optimized calls at lower levels of the technology, as illustrated in <span class="content_text">Figure 2-4</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_140" title="Figure 1-4Java method invocations map to SQL expressions"></a><p><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF160" title="Figure 1-4Java method invocations map to SQL expressions"></a><strong>Figure 1-4&nbsp;&nbsp;</strong>Java method invocations map to SQL expressions</p><img src = "../Art/javainvocationstosql.gif" alt = "Java method invocations map to SQL expressions" width="478" height="266"></div><br/><p>Two of the most common challenges new developers face when coming to the Enterprise Object technology from other database development environments is to think at a level higher than SQL<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_519"></a> and to not think of any particular data source vendor. So, once you begin to trust that Enterprise Objects produces SQL for you and that you can invoke methods on business<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_520"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_521"></a> objects that result in database operations, you are better prepared to understand the technology.</p><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF144" title="Key Concepts of Object-Oriented Programming"></a><h2>Key Concepts of Object-Oriented Programming</h2><p>There are a few key concepts you should understand when learning the Enterprise Objects frameworks. They are all rooted in good object-oriented design principles and many of them share ancestry with Apple’s <strong>Cocoa</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_522"></a> object-oriented application framework. Although understanding these concepts isn’t necessary to develop Enterprise Objects applications, familiarity with them helps you gain a better appreciation of how the technology works. </p><p>That said, there is a lot of information to digest when learning Enterprise Objects and you won’t need to put these concepts into use until after you know the basics. So you may want to skip this section and come back to it later on.</p><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF147" title="Key-Value Coding"></a><h3>Key-Value Coding</h3><p><strong>Key-value coding</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_523"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_524"></a> is a data access mechanism in which the properties of an object are accessed indirectly by key or name, rather than directly as fields or by invocation of accessor methods. It is used throughout Enterprise Objects but is perhaps most useful to you when accessing data in relationships between enterprise objects. </p><p>Key-value coding enables the use of <strong>keypaths</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_525"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_526"></a> to traverse relationships. For example, if a Person entity has a relationship called <code>toPhoto</code> whose destination entity (called PersonPhoto) contains an attribute called <code>photo</code>, you could access that data by traversing the keypath <code>toPhoto.photo</code> from within a Person object.</p><p>Keypaths are just one way key-value coding is an invaluable feature of Enterprise Objects. In general, though, it is most useful in providing a consistent<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_527"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_528"></a> way to access an object's data. Rather than needing to know if an object's data members have accessor methods, what the names of those accessor methods are, or if the data is accessible through fields, all you need to know are the keys that represent an object’s data. Key-value coding automatically finds the data, regardless of how the object provides its data. In this context, key-value coding satisfies the classic design<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_529"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_530"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_531"></a> pattern principle to “encapsulate the things that varies.”</p><p>Using the previous example, if you're working in a class that has access to a PersonPhoto object, you can get the photo data in the PersonPhoto object by invoking <code>valueForKey("photo")</code>. You don't need to know if the PersonPhoto object returns that data by providing an accessor method called <code>photo</code> or <code>getPhoto</code>, or through a field. Key-value coding is another feature of Enterprise Objects that reduces the amount of code you need to write and helps you write reusable business objects.</p><p>Advanced key-value coding concepts are discussed in:</p><ul class="spaceabove"><li class="li"><p><span class="content_text"><a href="../EnterpriseObjects/EnterpriseObjects.html#//apple_ref/doc/uid/TP30001011-CH203-CEHBFJGE">“Relationships With Other Enterprise Objects”</a></span> discusses how you can use key-value coding to access data across relationships between enterprise object instances.</p></li><li class="li"><p><span class="content_text"><a href="../EnterpriseObjects/EnterpriseObjects.html#//apple_ref/doc/uid/TP30001011-CH203-CEHCAEDE">“Accessing an Enterprise Object’s Data”</a></span> discusses the lookup order in key-value coding, the “stored” version of key-value coding methods, and other key-value coding concepts.</p></li><li class="li"><p><span class="content_text"><a href="../EnterpriseObjects/EnterpriseObjects.html#//apple_ref/doc/uid/TP30001011-CH203-TPXREF141">“Error Handling for Accessors”</a></span> discusses what happens when key-value coding lookup fails for a particular key and how to manage the failure.</p></li></ul><p>In addition, the API reference for <code>com.webobjects.eocontrol.EOKeyValueCoding</code> and for <code>com.webobjects.foundation.NSKeyValueCoding</code> provide more detailed information on key-value coding.</p><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF145" title="Delegation"></a><h3>Delegation</h3><p><strong>Delegation</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_532"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_533"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_534"></a> is a way of extending a class in an object-oriented framework. Whereas subclassing means that you write a new class based on an existing class, delegation means that you make use of hooks that the class provides to change its behavior. In object-oriented design methodology, delegation is a form of class composition.</p><p>Delegation does just what it suggests: When you implement an object’s delegate, you are telling the object to use the behavior that your delegate specifies at specific points in an application's execution. So for example, in the case of an editing context object, if you write a delegate for this object, the editing context object checks your delegate at certain points in an application’s execution and uses the logic your delegate specifies instead of or in addition to its own. The pseudocode in <span class="content_text">Listing 2-1</span> illustrates delegation.</p><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_141" title="Listing 1-1Pseudocode illustrating delegation"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF158" title="Listing 1-1Pseudocode illustrating delegation"></a><strong>Listing 1-1&nbsp;&nbsp;</strong>Pseudocode illustrating delegation</p><div class="codesample"><table><tr><td scope="row"><pre>if (delegateIsImplemented) {<span></span></pre></td></tr><tr><td scope="row"><pre>    useDelegateImplementation();<span></span></pre></td></tr><tr><td scope="row"><pre>} else {<span></span></pre></td></tr><tr><td scope="row"><pre>    useDefaultImplementation();<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Compared<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_535"></a> to subclassing, delegation is usually a more elegant solution to extend or customize the behavior of a class. A class’s delegate provides hooks for those parts of a class that the class’s designer wants to be customizable. Furthermore, subclassing can be a tricky, tedious, and undesirable task for large classes that have many dependencies on other classes. Delegation reduces the amount of code you have to write and better ensures that your custom code will work, even when the delegate’s class is updated.</p><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF146" title="Notification"></a><h3>Notification</h3><p>The objects in an application are no good on their own. It is the relationships and communications between objects that breathe life into an application. In a complex system like Enterprise Objects, it's common that a single object needs to communicate with multiple objects simultaneously. </p><p>There are any number of bad approaches to this problem and one remarkably good one: <strong>notifications</strong><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_536"></a>. Notification allows for a loose coupling of objects—objects that need to communicate with one another don’t need to know about one another in advance. Rather, when objects need to communicate with one another, they rely on a notification center to manage their communications.</p><p>Enterprise Objects uses an object called a notification<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_537"></a> center to broadcast messages to objects in an application. Objects register with the notification center for specific notifications they want to receive. They also post notifications with the notification center when they want to notify other objects that a particular event occurred.</p><p><span class="content_text">Figure 2-5</span> illustrates how objects and the notification center interact. A given object tells the notification center which notifications it’s interested in; it posts notifications to the notification center when its state changes; it receives notifications that it is registered to receive.</p><br/><div><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_142" title="Figure 1-5Notification center and its clients"></a><p><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF159" title="Figure 1-5Notification center and its clients"></a><strong>Figure 1-5&nbsp;&nbsp;</strong>Notification center and its clients</p><img src = "../Art/notifications.gif" alt = "Notification center and its clients" width="304" height="340"></div><br/><p>Notifications are particularly important in the control<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_538"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_539"></a> layer. Enterprise objects often have relationships to other enterprise objects in the same editing context. When a value in one enterprise object changes, other enterprise objects in that editing context (and perhaps in other editing contexts, too) need to be told of the change. So, when a value in an enterprise object changes, that enterprise object's editing context posts a notification to let the other enterprise objects in that editing context update their data accordingly.</p><p>Notification creates a kind of dynamic nervous system within the object graph with the notification center as the brain of the system. You can think of the object graph as an organic system with many built-in feedback loops. As you begin to work with object graphs, you’ll find them to be a very natural way of thinking about data.</p><p>You may wonder about the differences between delegation and notification<a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_540"></a><a name="//apple_ref/doc/uid/TP30001011-CH202-DontLinkElementID_541"></a>. With delegation, an object (the delegator) asks another object (the delegate) for a response before it performs a particular action (communication between objects can be forced and synchronous). Notification differs from delegation in that objects that post notifications don’t directly communicate with the objects that receive those notifications (communication between objects can never be forced and synchronous; object communication through notification is always asynchronous). With delegation, the delegate object has the opportunity to affect the tasks of its delegator, whereas in notification, objects don’t directly affect the execution of other objects.</p><a name="//apple_ref/doc/uid/TP30001011-CH202-TPXREF161" title="Principal Methods of Enterprise Objects"></a><h2>Principal Methods of Enterprise Objects</h2><p>As discussed in <span class="content_text"><a href="../About/About.html#//apple_ref/doc/uid/TP30001011-CH201-TPXREF142">“How to Learn About Enterprise Objects,”</a></span> Enterprise Objects includes an extensive API, most of which you never need to know about or use. To help you get started with the API, the appendix <span class="content_text"><a href="../CommonMethods/CommonMethods.html#//apple_ref/doc/uid/TP30001011-CH213-TP1">“Principal Methods”</a></span> describes the 30 most common methods that all Enterprise Objects applications are likely to use. </p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../About/About.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../EnterpriseObjects/EnterpriseObjects.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/Enterprise_Objects/Introduction/Introduction.html%3Fid%3DTP30001011-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/Enterprise_Objects/Introduction/Introduction.html%3Fid%3DTP30001011-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/Enterprise_Objects/Introduction/Introduction.html%3Fid%3DTP30001011-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
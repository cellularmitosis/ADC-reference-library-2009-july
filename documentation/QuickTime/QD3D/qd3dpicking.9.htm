<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Handling Mesh Part Picking</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=3510"> </A>Handling Mesh Part Picking</H1><P CLASS="T1.Text1"><A NAME="pgfId=3512"> </A><A NAME="marker=3511"> </A>When a model includes a mesh, you can decide whether the entire mesh only or parts of the mesh also are eligible for picking. You do this by specifying an appropriate hit information mask. For example, to allow mesh parts to be selected, you can set up the hit information mask like this:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=16336"> </A>myPickData.mask = kQ3PickDetailMaskShapePart | <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQ3PickDetailMaskObject | <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQ3PickDetailMaskDistance;<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3517"> </A>This line of code indicates that you want QuickDraw&nbsp;3D to return information about objects and any distinguishable parts of objects, as well as the distances from the objects to the pick origin. (To prevent mesh parts from being selected, you simply omit adding in the <TT CLASS="cv">kQ3PickDetailMaskShapePart</TT> mask.)</P><P CLASS="T1.Text1"><A NAME="pgfId=3518"> </A>You can determine whether data returned by <TT CLASS="cv">Q3Pick_GetPickDetailData</TT> applies to a shape part by inspecting the <TT CLASS="cv">validMask</TT> bit. If the value of the bit is 1, the data contains information about a shape part. Currently the only available shape parts are mesh parts. <A HREF="qd3dpicking.9.htm#12502" CLASS="XRef">Listing&nbsp;6</A> illustrates how to use the <TT CLASS="cv">shapePart</TT> field to determine the type of mesh part selected and to perform some operation on the selected mesh part.</P><P CLASS="L.Listing"><A NAME="pgfId=3523"> </A>Listing&nbsp;6<A NAME="12502"> </A>Picking mesh parts</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=16340"> </A>Q3Pick_GetPickDetailValidMask(myPickObject, myIndex);<BR>Q3Pick_GetPickDetailData(myPickObject, myIndex, shapePart);<BR></CODE><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=16344"> </A>if (shapePart != NULL) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;switch(Q3Object_GetLeafType(shapePart)) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case kQ3MeshPartTypeMeshFacePart:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3MeshFacePart_GetFace(shapePart, &amp;myFace);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyDoPickFace(object, myFace);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case kQ3MeshPartTypeMeshEdgePart:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3MeshEdgePart_GetEdge(shapePart, &amp;myEdge);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyDoPickEdge(object, myEdge);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case kQ3MeshPartTypeMeshVertexPart:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Q3MeshVertexPart_GetVertex(shapePart, &amp;myVertex);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MyDoPickVertex(object, myVertex);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3525"> </A>This code branches on the type of the mesh part indicated by the <TT CLASS="cv">shapePart</TT> field. For each defined type of mesh part, the code calls a QuickDraw&nbsp;3D routine to retrieve the corresponding mesh face, edge, or vertex. Then it calls an application-defined routine (for example, <TT CLASS="cv">MyDoPickFace</TT>) to handle the mesh part selection.<A NAME="marker=3529"> </A></P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
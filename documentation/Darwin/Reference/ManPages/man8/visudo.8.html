<html><head><title>Mac OS X
 Manual Page For visudo(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/visudo" title="Mac OS X
 Manual Page for visudo(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/visudo"; name=visudo(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
VISUDO(8)                                   MAINTENANCE COMMANDS                                   VISUDO(8)



<b>NAME</b>
       visudo - edit the sudoers file

<b>SYNOPSIS</b>
       <b>visudo</b> [ <b>-c</b> ] [ <b>-f</b> <u>sudoers</u> ] [ <b>-q</b> ] [ <b>-s</b> ] [ <b>-V</b> ]

<b>DESCRIPTION</b>
       <b>visudo</b> edits the <u>sudoers</u> file in a safe fashion, analogous to <a href="vipw.8.html#//apple_ref/doc/man/8/vipw">vipw(8)</a>.  <b>visudo</b> locks the <u>sudoers</u> file
       against multiple simultaneous edits, provides basic sanity checks, and checks for parse errors.  If
       the <u>sudoers</u> file is currently being edited you will receive a message to try again later.

       There is a hard-coded list of editors that <b>visudo</b> will use set at compile-time that may be overridden
       via the <u>editor</u> <u>sudoers</u> Default variable.  This list defaults to the path to <a href="../man1/vi.1.html#//apple_ref/doc/man/1/vi"><u>vi</u>(1)</a> on your system, as
       determined by the <u>configure</u> script.  Normally, <b>visudo</b> does not honor the VISUAL or EDITOR environment
       variables unless they contain an editor in the aforementioned editors list.  However, if <b>visudo</b> is
       configured with the <u>--with-enveditor</u> flag or the <u>enveditor</u> Default variable is set in <u>sudoers</u>, <b>visudo</b>
       will use any the editor defines by VISUAL or EDITOR.  Note that this can be a security hole since it
       allows the user to execute any program they wish simply by setting VISUAL or EDITOR.

       <b>visudo</b> parses the <u>sudoers</u> file after the edit and will not save the changes if there is a syntax
       error.  Upon finding an error, <b>visudo</b> will print a message stating the line <!-- a -->number(s)<!-- /a --> where the error
       occurred and the user will receive the "What now?" prompt.  At this point the user may enter "e" to
       re-edit the <u>sudoers</u> file, "x" to exit without saving the changes, or "Q" to quit and save changes.
       The "Q" option should be used with extreme care because if <b>visudo</b> believes there to be a parse error,
       so will <b>sudo</b> and no one will be able to <b>sudo</b> again until the error is fixed.  If "e" is typed to edit
       the  <u>sudoers</u> file after a parse error has been detected, the cursor will be placed on the line where
       the error occurred (if the editor supports this feature).

<b>OPTIONS</b>
       <b>visudo</b> accepts the following command line options:

       -c  Enable <b>check-only</b> mode.  The existing <u>sudoers</u> file will be checked for syntax and a message will
           be printed to the standard output detailing the status of <u>sudoers</u>.  If the syntax check completes
           successfully, <b>visudo</b> will exit with a value of 0.  If a syntax error is encountered, <b>visudo</b> will
           exit with a value of 1.

       -f  Specify and alternate <u>sudoers</u> file location.  With this option <b>visudo</b> will edit (or check) the
           <u>sudoers</u> file of your choice, instead of the default, <u>/private/etc/sudoers</u>.  The lock file used is
           the specified <u>sudoers</u> file with ".tmp" appended to it.

       -q  Enable <b>quiet</b> mode.  In this mode details about syntax errors are not printed.  This option is
           only useful when combined with the <b>-c</b> flag.

       -s  Enable <b>strict</b> checking of the <u>sudoers</u> file.  If an alias is used before it is defined, <b>visudo</b>
           will consider this a parse error.  Note that it is not possible to differentiate between an alias
           and a hostname or username that consists solely of uppercase letters, digits, and the underscore
           ('_') character.

       -V  The <b>-V</b> (version) option causes <b>visudo</b> to print its version number and exit.

<b>ENVIRONMENT</b>
       The following environment variables are used only if <b>visudo</b> was configured with the <u>--with-env-editor</u>
       option:

        VISUAL                 Invoked by visudo as the editor to use
        EDITOR                 Used by visudo if VISUAL is not set

<b>FILES</b>
        /private/etc/sudoers           List of who can run what
        /private/etc/sudoers.tmp       Lock file for visudo

<b>DIAGNOSTICS</b>
       sudoers file busy, try again later.
           Someone else is currently editing the <u>sudoers</u> file.

       /private/etc/sudoers.tmp: Permission denied
           You didn't run <b>visudo</b> as root.

       Can't find you in the passwd database
           Your userid does not appear in the system passwd file.

       Warning: undeclared Alias referenced near ...
           Either you are using a {User,Runas,Host,Cmnd}_Alias before defining it or you have a user or
           hostname listed that consists solely of uppercase letters, digits, and the underscore ('_') char-<font color="#ffffff" class="whiteout">acter.&nbsp;character.</font>
           acter.  If the latter, you can ignore the warnings (<b>sudo</b> will not complain).  In <b>-s</b> (strict) mode
           these are errors, not warnings.

       Warning: runas_default set after old value is in use ...
           You have a <u>runas</u><b>_</b><u>default</u> Defaults setting listed in the <u>sudoers</u> file after its value has already
           been used.  This means that entries prior to the <u>runas</u><b>_</b><u>default</u> setting will match based on the
           default value of <u>runas</u><b>_</b><u>default</u> (root) whereas entries <b>after</b> the <u>runas</u><b>_</b><u>default</u> setting will match
           based on the new value.  This is usually unintentional and in most cases the &lt;runas_default&gt; set-<font color="#ffffff" class="whiteout">ting&nbsp;setting</font>
           ting should be placed before any Runas_Alias or User specifications.  In <b>-s</b> (strict) mode this is
           an error, not a warning.

<b>SEE</b> <b>ALSO</b>
       <a href="../man1/vi.1.html#//apple_ref/doc/man/1/vi"><u>vi</u>(1)</a>, <a href="../man5/sudoers.5.html#//apple_ref/doc/man/5/sudoers">sudoers(5)</a>, <a href="sudo.8.html#//apple_ref/doc/man/8/sudo">sudo(8)</a>, <a href="vipw.8.html#//apple_ref/doc/man/8/vipw">vipw(8)</a>

<b>AUTHOR</b>
       Many people have worked on <u>sudo</u> over the years; this version of <b>visudo</b> was written by:

        Todd Miller

       See the HISTORY file in the sudo distribution or visit <a href="http://www.sudo.ws/sudo/history.html">http://www.sudo.ws/sudo/history.html</a> for more
       details.

<b>CAVEATS</b>
       There is no easy way to prevent a user from gaining a root shell if the editor used by <b>visudo</b> allows
       shell escapes.

<b>BUGS</b>
       If you feel you have found a bug in <b>visudo</b>, please submit a bug report at
       <a href="http://www.sudo.ws/sudo/bugs/">http://www.sudo.ws/sudo/bugs/</a>

<b>SUPPORT</b>
       Commercial support is available for <b>sudo</b>, see <a href="http://www.sudo.ws/sudo/support.html">http://www.sudo.ws/sudo/support.html</a> for details.

       Limited free support is available via the sudo-users mailing list, see <a href="http://www.sudo.ws/mailman/listinfo/sudo-users">http://www.sudo.ws/mail-</a>
       <a href="http://www.sudo.ws/mailman/listinfo/sudo-users">man/listinfo/sudo-users</a> to subscribe or search the archives.

<b>DISCLAIMER</b>
       <b>Visudo</b> is provided ``AS IS'' and any express or implied warranties, including, but not limited to,
       the implied warranties of merchantability and fitness for a particular purpose are disclaimed.  See
       the LICENSE file distributed with <b>sudo</b> or <a href="http://www.sudo.ws/sudo/license.html">http://www.sudo.ws/sudo/license.html</a> for complete details.



1.6.8p12                                        June 20, 2005                                      VISUDO(8)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/visudo.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/visudo.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/visudo.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

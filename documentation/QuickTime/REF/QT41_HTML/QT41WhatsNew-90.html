<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><head><script language="JavaScript" src="../../frametest.js"></script><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><!-- Link line removed --><TITLE> Writing the SoundConverterFillBufferData Routine</TITLE><script language=javascript> window.parent.focus(); </script></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="QT41WhatsNew-89.html">Previous</A> | <A HREF="QT41WhatsNew-1.html">Chapter Contents</A> | <A HREF="QT41WhatsNew.html">Chapter Top</A> | <A HREF="QT41WhatsNew-91.html">Next</A> |</P><!-- QTnavbar end --><H1><A NAME="pgfId-41163"></A>Writing the SoundConverterFillBufferData Routine</H1><A NAME="pgfId-41164"></A>If you call <TT>SoundConverterFillBuffer</TT>, you must provide a callback routine that provides the source data for the conversion. This is the <TT>SoundConverterFillBufferData</TT> routine whose prototype is:</P><TT><A NAME="pgfId-55736"></A>pascal&nbsp;Boolean&nbsp;&nbsp;&nbsp;&nbsp;SoundConverterFillBufferDataProc(&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SoundComponentDataPtr*&nbsp;&nbsp;&nbsp;&nbsp;data,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refCon);</TT><P CLASS="T1-Text1"><A NAME="pgfId-41166"></A>The <TT>SoundConverterFillBufferDataProc</TT> call provides its data by setting the <TT>data</TT> argument to a pointer to a properly filled out <TT>SoundComponentData</TT> or <TT>ExtendedSoundComponentData</TT> structure.</P><P CLASS="T1-Text1"><A NAME="pgfId-41167"></A>The <TT>refCon</TT> argument is the same <TT>fillbufferDataRefCon</TT> passed into <TT>SoundConverterFillBuffer</TT>.</P><P CLASS="T1-Text1"><A NAME="pgfId-41168"></A>The <TT>SoundConverterFillBufferDataProc</TT> tells its caller whether or not it provided any data through the Boolean return value.</P><P CLASS="T1-Text1"><A NAME="pgfId-41169"></A>The data provided by the <TT>SoundConverterFillBufferDataProc</TT> is not considered consumed until either the <TT>SoundConverterFillBufferDataProc</TT> is called again or <TT>SoundConverterEndConversion</TT> is called. Until those times, the data should be considered &quot;in use&quot; and shouldn't be modified.</P><P CLASS="T1-Text1"><A NAME="pgfId-41170"></A>Because of the the way the Sound Converter works, the <TT>SoundConverterFillBufferDataProc</TT> routine may be called several times after returning no data from the previous call. Unless there is actually more data to provide, the <TT>SoundConverterFillBufferDataProc</TT> routine should continue to return no data.</P><BLOCKQUOTE><B>Note:&nbsp;&nbsp;</B><A NAME="pgfId-41161"></A>The <TT>SoundConverterFillBufferDataProc</TT> routine, like all Sound Converter-related routines, may be called at interrupt time (if the client of <TT>SoundConvertFillBuffer</TT> called it at interrupt time), so it should not move or allocate memory. </P></BLOCKQUOTE><hr>&#169; 2000 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="QT41WhatsNew-89.html">Previous</A> | <A HREF="QT41WhatsNew-1.html">Chapter Contents</A> | <A HREF="QT41WhatsNew.html">Chapter Top</A> | <A HREF="QT41WhatsNew-91.html">Next</A> |</P><!-- QTnavbar end --></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>String Programming Guide for Cocoa: Scanners</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Scanners"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20000147" title="Scanners"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">String Programming Guide for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="CharacterSets.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ManipulatingPaths.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20000147-BCIEFGHC" title="Scanners"></a><hr /><H1>Scanners</H1>

<p>An <code>NSScanner</code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_98"></a><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_99"></a> object scans the characters of an <code>NSString</code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_100"></a> object, typically interpreting the characters and converting them into number and string values. You assign the scanner’s string on creation, and the scanner progresses through the characters of that string from beginning to end as you request items. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Scanners.html#//apple_ref/doc/uid/20000147-SW1">Creating a Scanner</a>
				
			<br/>
			
        
			
			
				<a href="Scanners.html#//apple_ref/doc/uid/20000147-SW2">Using a Scanner</a>
				
			<br/>
			
        
			
			
				<a href="Scanners.html#//apple_ref/doc/uid/20000147-SW3">Example</a>
				
			<br/>
			
        
			
			
				<a href="Scanners.html#//apple_ref/doc/uid/20000147-SW4">Localization</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20000147-SW1" title="Creating a Scanner"></a><h2>Creating a Scanner</h2>
<p><code>NSScanner</code> is a class cluster with a single public class, <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/cl/NSScanner" target="_top">NSScanner</a></code>. Generally, you instantiate a scanner<a name="//apple_ref/doc/uid/20000147-DontLinkElementID_101"></a> object by invoking the class method <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/clm/NSScanner/scannerWithString:" target="_top">scannerWithString:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_102"></a> or <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/clm/NSScanner/localizedScannerWithString:" target="_top">localizedScannerWithString:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_103"></a>. Either method returns a scanner object initialized with the string you pass to it. The newly created scanner starts at the beginning of its string. You scan components using the <code>scan...</code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_104"></a> methods such as <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanInt:" target="_top">scanInt:</a></code>, <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanDouble:" target="_top">scanDouble:</a></code>, and <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanString:intoString:" target="_top">scanString:intoString:</a></code>. If you are scanning multiple lines, you typically create a <code>while</code> loop that continues until the scanner is at the end of the string, as illustrated in the following code fragment: </p><div class="codesample"><table><tr><td scope="row"><pre>float aFloat;<span></span></pre></td></tr><tr><td scope="row"><pre>NSScanner *theScanner = [NSScanner scannerWithString:aString];<span></span></pre></td></tr><tr><td scope="row"><pre>while ([theScanner isAtEnd] == NO) {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [theScanner scanFloat:&amp;aFloat];<span></span></pre></td></tr><tr><td scope="row"><pre>    // implementation continues...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>You can configure a scanner to consider or ignore case using the <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/setCaseSensitive:" target="_top">setCaseSensitive:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_105"></a> method. By default a scanner ignores case. </p><a name="//apple_ref/doc/uid/20000147-SW2" title="Using a Scanner"></a><h2>Using a Scanner</h2><p>Scan operations<a name="//apple_ref/doc/uid/20000147-DontLinkElementID_106"></a> start at the scan location and advance the scanner to just past the last character in the scanned value representation (if any). For example, after scanning an integer from the string “<code>137 small cases of bananas</code>”, a scanner’s location will be 3, indicating the space immediately after the number. Often you need to advance the scan location to skip characters in which you are not interested. You can change the implicit scan location with the <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/setScanLocation:" target="_top">setScanLocation:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_107"></a> method to skip ahead a certain number of characters (you can also use the method to rescan a portion of the string after an error). Typically, however, you either want to skip characters from a particular character set, scan past a specific string, or scan up to a specific string.</p><p>You can configure a scanner to skip a set of characters with the <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/setCharactersToBeSkipped:" target="_top">setCharactersToBeSkipped:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_108"></a> method. A scanner ignores characters to be skipped at the beginning of any scan operation. Once it finds a scannable character, however, it includes all characters matching the request. Scanners skip whitespace and newline characters by default. Note that case is always considered with regard to characters to be skipped. To skip all English vowels, for example, you must set the characters to be skipped to those in the string “AEIOUaeiou”.</p><p>If you want to read content from the current location up to a particular string, you can use <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanUpToString:intoString:" target="_top">scanUpToString:intoString:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_109"></a> (you can pass <code>NULL</code> as the second argument if you simply want to skip the intervening characters). For example, given the following string:</p><div class="codesample"><table><tr><td scope="row"><pre>137 small cases of bananas<span></span></pre></td></tr></table></div><p>you can find the type of container and number of containers using <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/scanUpToString:intoString:" target="_top">scanUpToString:intoString:</a></code> as shown in the following example.</p><div class="codesample"><table><tr><td scope="row"><pre>NSString *bananas = @"137 small cases of bananas";<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *separatorString = @" of";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSScanner *aScanner = [NSScanner scannerWithString:bananas];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSInteger anInteger;<span></span></pre></td></tr><tr><td scope="row"><pre>[aScanner scanInteger:&amp;anInteger];<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *container;<span></span></pre></td></tr><tr><td scope="row"><pre>[aScanner scanUpToString:separatorString intoString:&amp;container];<span></span></pre></td></tr></table></div><p>It is important to note that the search string (<code>separatorString</code>) is <code>" of"</code>. By default a scanner ignores whitespace, so the space character after the integer is ignored. Once the scanner begins to accumulate characters, however, all characters are added to the output string until the search string is reached. Thus if the search string is <code>"of"</code> (no space before), the first value of <code>container</code> is “small cases ” (includes the space following); if the search string is <code>" of"</code> (with a space before), the first value of <code>container</code> is “small cases” (no space following). </p><p>After scanning up to a given string, the scan location is the beginning of that string. If you want to scan past that string, you must therefore first scan in the string you scanned up to. The following code fragment illustrates how to skip past the search string in the previous example and determine the type of product in the container. Note the use of <code><a href="../../../Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/substringFromIndex:" target="_top">substringFromIndex:</a></code> to in effect scan up to the end of a string.</p><div class="codesample"><table><tr><td scope="row"><pre>[aScanner scanString:separatorString intoString:NULL];<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *product;<span></span></pre></td></tr><tr><td scope="row"><pre>product = [[aScanner string] substringFromIndex:[aScanner scanLocation]];<span></span></pre></td></tr><tr><td scope="row"><pre>// could also use:<span></span></pre></td></tr><tr><td scope="row"><pre>// product = [bananas substringFromIndex:[aScanner scanLocation]];<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20000147-SW3" title="Example"></a><h2>Example</h2>
<p>Suppose you have a string containing lines such as:</p>
<ul class="simple"><li><p>Product: Acme Potato Peeler; Cost: 0.98 73</p></li>
<li><p>Product: Chef Pierre Pasta Fork; Cost: 0.75 19</p></li>
<li><p>Product: Chef Pierre Colander; Cost: 1.27 2</p></li></ul>
<p>The following example uses alternating scan operations to extract the product names and costs (costs are read as a <code>float</code> for simplicity’s sake), skipping the expected substrings “Product:” and “Cost:”, as well as the semicolon. Note that because a scanner<a name="//apple_ref/doc/uid/20000147-DontLinkElementID_110"></a> skips whitespace and newlines by default, the loop does no special processing for them (in particular there is no need to do additional whitespace processing to retrieve the final integer).<a name="//apple_ref/doc/uid/20000147-DontLinkElementID_111"></a><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_112"></a></p>
<div class="codesample"><table><tr><td scope="row"><pre>NSString *string = @"Product: Acme Potato Peeler; Cost: 0.98 73\n\<span></span></pre></td></tr><tr><td scope="row"><pre>Product: Chef Pierre Pasta Fork; Cost: 0.75 19\n\<span></span></pre></td></tr><tr><td scope="row"><pre>Product: Chef Pierre Colander; Cost: 1.27 2\n";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSCharacterSet *semicolonSet;<span></span></pre></td></tr><tr><td scope="row"><pre>NSScanner *theScanner;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSString *PRODUCT = @"Product:";<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *COST = @"Cost:";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>NSString *productName;<span></span></pre></td></tr><tr><td scope="row"><pre>float productCost;<span></span></pre></td></tr><tr><td scope="row"><pre>NSInteger productSold;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>semicolonSet = [NSCharacterSet characterSetWithCharactersInString:@";"];<span></span></pre></td></tr><tr><td scope="row"><pre>theScanner = [NSScanner scannerWithString:string];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>while ([theScanner isAtEnd] == NO)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([theScanner scanString:PRODUCT intoString:NULL] &amp;&amp;<span></span></pre></td></tr><tr><td scope="row"><pre>        [theScanner scanUpToCharactersFromSet:semicolonSet<span></span></pre></td></tr><tr><td scope="row"><pre>            intoString:&amp;productName] &amp;&amp;<span></span></pre></td></tr><tr><td scope="row"><pre>        [theScanner scanString:@";" intoString:NULL] &amp;&amp;<span></span></pre></td></tr><tr><td scope="row"><pre>        [theScanner scanString:COST intoString:NULL] &amp;&amp;<span></span></pre></td></tr><tr><td scope="row"><pre>        [theScanner scanFloat:&amp;productCost] &amp;&amp;<span></span></pre></td></tr><tr><td scope="row"><pre>        [theScanner scanInteger:&amp;productSold])<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(@"Sales of %@: $%1.2f", productName, productCost * productSold);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20000147-SW4" title="Localization"></a><h2>Localization</h2>
<p><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_113"></a>A scanner bases some of its scanning behavior on a locale, which specifies a language and conventions for value representations. <code>NSScanner</code> uses only the locale’s definition for the decimal separator (given by the key named <code><a href="../../../Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDecimalSeparator" target="_top">NSDecimalSeparator</a></code>). You can create a scanner with the user’s locale by using <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/clm/NSScanner/localizedScannerWithString:" target="_top">localizedScannerWithString:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_114"></a>, or set the locale explicitly using <code><a href="../../../Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScanner/setLocale:" target="_top">setLocale:</a></code><a name="//apple_ref/doc/uid/20000147-DontLinkElementID_115"></a>. If you use a method that doesn’t specify a locale, the scanner assumes the default locale values.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="CharacterSets.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ManipulatingPaths.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 1997, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html%3Fid%3D10000035i-4.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html%3Fid%3D10000035i-4.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html%3Fid%3D10000035i-4.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Boot ROM Contents </TITLE></HEAD><BODY BGCOLOR="#ffffff"><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> Original iMac Developer Note		</font></td>	</tr>	</table><br><!-- end of path --><DIV><!-- top navigation --><P><A HREF="iMac.27.html"><img src="images/up.gif" border="0" alt="Up"></A> <A HREF="iMac.2a.html"><img src="images/previous.gif" border="0" alt="Previous"></A> <A HREF="iMac.2c.html"><img src="images/next.gif" border="0" alt="Next"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr><H1 CLASS="H1.Heading1"><A NAME="pgfId=3349"> </A>Boot ROM Contents <A NAME="marker=3348"> </A></H1><P CLASS="T1.Text1"><A NAME="pgfId=3350"> </A>The Boot ROM contains the code needed to start up the computer, initialize and examine the hardware, provide a device tree to describe the hardware, provide hardware access services (RTAS), and control to the OS. The Boot ROM can be grouped into the following major pieces. </P><DIV><H2 CLASS="H2nb.Heading2"><A NAME="pgfId=3353"> </A>POST Code<A NAME="marker=3351"> </A><A NAME="marker=3352"> </A></H2><P CLASS="T1.Text1"><A NAME="pgfId=3354"> </A>This is the code executed when the computer first boots. This encompasses many of the traditional Mac ROM operations and is based on the hardware initialization code used in the past: setup and initialization of the processor and ASICs, a boot beep, an error beep, diagnostics, and transfer to Open Firmware.</P><P CLASS="T1.Text1"><A NAME="pgfId=3355"> </A>A small debugging Mini-Nub is part of this section. It allows prodding and poking with some MacsBug-like commands. Getting into the Debugger Nub is not possible using standard user interface input, however.</P><P CLASS="T1.Text1"><A NAME="pgfId=3356"> </A>Failure to boot in POST causes the error beep, optionally entering the Mini-Nub. </P></DIV><DIV><H2 CLASS="H2nb.Heading2"><A NAME="pgfId=3358"> </A>Open Firmware<A NAME="marker=3357"> </A></H2><P CLASS="T1.Text1"><A NAME="pgfId=3359"> </A>The Open Firmware component of NewWorld is based on the CHRP version of Open Firmware, also known as Open Firmware 3.0. This is the most robust and full-featured Open Firmware used by Apple to date. This version of Open Firmware contains several notable changes from the Open Firmware found in the first and second generation PCI Macintosh computers:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=3360"> </A>Open Firmware is capable of reliably reading files from block devices.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3361"> </A>Open Firmware builds an expanded device tree that holds every facet of hardware information needed by an operating system.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3362"> </A>Open Firmware contains code that mimics the <TT CLASS="cv">StartSearch</TT> code in the ToolBox ROM and provides a Mac-like user interface during startup. </LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3363"> </A>Open Firmware creates an interrupt tree that is interlaced through the Device Tree to provide a mechanism to describe the interrupt layout of the computer. </LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=3364"> </A>If a boot failure occurs in Open Firmware, Open Firmware attempts to provide a Macintosh-like experience.</P></DIV><DIV><H2 CLASS="H2nb.Heading2"><A NAME="pgfId=3366"> </A>Mac OS <TT CLASS="cv">'ndrv'</TT> Drivers<A NAME="marker=3365"> </A></H2><P CLASS="T1.Text1"><A NAME="pgfId=3367"> </A>The Boot ROM may also contain Mac OS drivers that are hardware-specific and needed at boot time; they are organized as <TT CLASS="cv">'ndrv'</TT> drivers. Drivers needed at boot time (video drivers, network drivers, or disk drivers) need to be loaded from the Device Tree.</P></DIV><DIV><H2 CLASS="H2nb.Heading2"><A NAME="pgfId=3369"> </A>RTAS<A NAME="marker=3368"> </A></H2><P CLASS="T1.Text1"><A NAME="pgfId=3370"> </A>RTAS (Run-Time Abstraction Services) can be thought of as a BIOS. RTAS code handles hardware accesses needed by an OS, making it possible for multiple operating systems to get hardware services without having to know the specifics. RTAS handles hardware-specific services such as NV-RAM (containing parameter RAM), time services (the real time clock), PCI configuration cycles, power management, and the code needed to restart and shutdown. </P><P CLASS="T1.Text1"><A NAME="pgfId=3555"> </A>RTAS is relocateable code; its location in RAM is determined by the OS, and it remains functional after the OS boots. </P><P CLASS="Note"><A NAME="pgfId=3371"> </A>RTAS is part of the system software. It is not needed by applications, which use operating system APIs. <A NAME="marker=3375"> </A></P></DIV><HR>\xA9 1998 Apple Computer, Inc. <P><A HREF="iMac.27.html"><img src="images/up.gif" border="0" alt="Up"></A> <A HREF="iMac.2a.html"><img src="images/previous.gif" border="0" alt="Previous"></A> <A HREF="iMac.2c.html"><img src="images/next.gif" border="0" alt="Next"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></P> <!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
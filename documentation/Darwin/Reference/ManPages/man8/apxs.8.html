<html><head><title>Mac OS X
 Manual Page For apxs(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/apxs" title="Mac OS X
 Manual Page for apxs(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/apxs"; name=apxs(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
APXS(8)                                             apxs                                             APXS(8)



<b>NAME</b>
       apxs - APache eXtenSion tool


<b>SYNOPSIS</b>
       <b>apxs</b> -<b>g</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] -<b>n</b> <u>modname</u>


       <b>apxs</b> -<b>q</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] <u>query</u> ...


       <b>apxs</b> -<b>c</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] [ -<b>o</b> <u>dsofile</u> ] [ -<b>I</b> <u>incdir</u> ] [ -<b>D</b> <u>name</u>=<u>value</u> ] [ -<b>L</b> <u>libdir</u> ] [ -<b>l</b> <u>libname</u> ]
       [ -<b>Wc,</b><u>compiler-flags</u> ] [ -<b>Wl,</b><u>linker-flags</u> ] <u>files</u> ...


       <b>apxs</b> -<b>i</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] [ -<b>n</b> <u>modname</u> ] [ -<b>a</b> ] [ -<b>A</b> ] <u>dso-file</u> ...


       <b>apxs</b> -<b>e</b> [ -<b>S</b> <u>name</u>=<u>value</u> ] [ -<b>n</b> <u>modname</u> ] [ -<b>a</b> ] [ -<b>A</b> ] <u>dso-file</u> ...



<b>SUMMARY</b>
       apxs is a tool for building and installing extension modules for the Apache HyperText Transfer Proto-<font color="#ffffff" class="whiteout">col&nbsp;Protocol</font>
       col (HTTP) server. This is achieved by building a dynamic shared object (DSO) from one or more source
       or object <u>files</u> which then can be loaded into the Apache server  under  runtime  via  the  LoadModule
       directive from mod_so.


       So to use this extension mechanism your platform has to support the DSO feature and your Apache httpd
       binary has to be built with the mod_so module. The apxs tool automatically complains if this  is  not
       the case. You can check this yourself by manually running the command


             $ httpd -l



       The  module  mod_so should be part of the displayed list. If these requirements are fulfilled you can
       easily extend your Apache server's functionality by installing your own modules with the  DSO  mecha-<font color="#ffffff" class="whiteout">nism&nbsp;mechanism</font>
       nism by the help of this apxs tool:


             $ apxs -i -a -c mod_foo.c
             gcc -fpic -DSHARED_MODULE -I/path/to/apache/include -c mod_foo.c
             ld -Bshareable -o mod_foo.so mod_foo.o
             cp mod_foo.so /path/to/apache/modules/mod_foo.so
             chmod 755 /path/to/apache/modules/mod_foo.so
             [activating module `foo' in /path/to/apache/etc/httpd.conf]
             $ apachectl restart
             /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
             [Tue Mar 31 11:27:55 1998] [debug] <!-- a -->mod_so.c(303)<!-- /a -->: loaded module foo_module
             /path/to/apache/sbin/apachectl restart: httpd started
             $ _



       The arguments <u>files</u> can be any C source file (.c), a object file (.o) or even a library archive (.a).
       The apxs tool automatically recognizes these extensions and automatically used the C source files for
       compilation  while just using the object and archive files for the linking phase. But when using such
       pre-compiled objects make sure they are compiled for position independent code (PIC) to  be  able  to
       use  them  for  a dynamically loaded shared object. For instance with GCC you always just have to use
       -fpic. For other C compilers consult its manual page or at watch for the flags apxs uses  to  compile
       the object files.


       For  more  details  about DSO support in Apache read the documentation of mod_so or perhaps even read
       the src/modules/standard/mod_so.c source file.



<b>OPTIONS</b>
   <b>Common</b> <b>Options</b>
       -n <u>modname</u>
              This explicitly sets the module name for the -i (install) and -g (template generation) option.
              Use  this to explicitly specify the module name. For option -g this is required, for option -i
              the apxs tool tries to determine the name from the source or  (as  a  fallback)  at  least  by
              guessing it from the filename.


   <b>Query</b> <b>Options</b>
       -q     Performs  a query for apxs's knowledge about certain settings. The <u>query</u> parameters can be one
              or  more  of  the  following  strings:  CC,  CFLAGS,   CFLAGS_SHLIB,   INCLUDEDIR,   LD_SHLIB,
              LDFLAGS_SHLIB,  LIBEXECDIR, LIBS_SHLIB, SBINDIR, SYSCONFDIR, TARGET. .PP Use this for manually
              determining settings. For instance use INC=-I`apxs -q INCLUDEDIR` .PP inside  your  own  Make-<font color="#ffffff" class="whiteout">files&nbsp;Makefiles</font>
              files if you need manual access to Apache's C header files.


   <b>Configuration</b> <b>Options</b>
       -S <u>name</u>=<u>value</u>
              This option changes the apxs settings described above.


   <b>Template</b> <b>Generation</b> <b>Options</b>
       -g     This generates a subdirectory <u>name</u> (see option -n) and there two files: A sample module source
              file named mod_<u>name</u>.c which can be used as a template for creating your own modules  or  as  a
              quick  start for playing with the apxs mechanism. And a corresponding Makefile for even easier
              build and installing of this module.


   <b>DSO</b> <b>Compilation</b> <b>Options</b>
       -c     This indicates the compilation operation. It first compiles the C source files (.c)  of  <u>files</u>
              into corresponding object files (.o) and then builds a dynamically shared object in <u>dsofile</u> by
              linking these object files plus the remaining object files (.o and .a)  of  <u>files</u>.  If  no  -o
              option  is specified the output file is guessed from the first filename in <u>files</u> and thus usu-<font color="#ffffff" class="whiteout">ally&nbsp;usually</font>
              ally defaults to mod_<u>name</u>.so.

       -o <u>dsofile</u>
              Explicitly specifies the filename of the created dynamically shared object. If  not  specified
              and  the name cannot be guessed from the <u>files</u> list, the fallback name mod_unknown.so is used.

       -D <u>name</u>=<u>value</u>
              This option is directly passed through to the compilation <!-- a -->command(s)<!-- /a -->. Use this to add your own
              defines to the build process.

       -I <u>incdir</u>
              This option is directly passed through to the compilation <!-- a -->command(s)<!-- /a -->. Use this to add your own
              include directories to search to the build process.

       -L <u>libdir</u>
              This option is directly passed through to the linker command. Use this to add your own library
              directories to search to the build process.

       -l <u>libname</u>
              This  option  is  directly  passed  through  to  the  linker command. Use this to add your own
              libraries to search to the build process.

       -Wc,<u>compiler-flags</u>
              This option passes <u>compiler-flags</u> as additional flags to the libtool  --mode=compile  command.
              Use this to add local compiler-specific options.

       -Wl,<u>linker-flags</u>
              This  option  passes  <u>linker-flags</u> as additional flags to the libtool --mode=link command. Use
              this to add local linker-specific options.


   <b>DSO</b> <b>Installation</b> <b>and</b> <b>Configuration</b> <b>Options</b>
       -i     This indicates the installation operation and installs one or more dynamically shared  objects
              into the server's <u>modules</u> directory.

       -a     This  activates the module by automatically adding a corresponding LoadModule line to Apache's
              httpd.conf configuration file, or by enabling it if it already exists.

       -A     Same as option -a but the created LoadModule directive is prefixed with a hash sign (#), <u>i.e.</u>,
              the module is just prepared for later activation but initially disabled.

       -e     This  indicates  the editing operation, which can be used with the -a and -A options similarly
              to the -i operation to edit Apache's  httpd.conf  configuration  file  without  attempting  to
              install the module.


<b>EXAMPLES</b>
       Assume  you have an Apache module named mod_foo.c available which should extend Apache's server func-<font color="#ffffff" class="whiteout">tionality.&nbsp;functionality.</font>
       tionality. To accomplish this you first have to compile the C source into a  shared  object  suitable
       for loading into the Apache server under runtime via the following command:


             $ apxs -c mod_foo.c
             /path/to/libtool --mode=compile gcc ... -c mod_foo.c
             /path/to/libtool --mode=link gcc ... -o mod_foo.la mod_foo.slo
             $ _



       Then  you have to update the Apache configuration by making sure a LoadModule directive is present to
       load this shared object. To simplify this step apxs provides an automatic way to install  the  shared
       object  in its "modules" directory and updating the httpd.conf file accordingly. This can be achieved
       by running:


             $ apxs -i -a mod_foo.la
             /path/to/instdso.sh mod_foo.la /path/to/apache/modules
             /path/to/libtool --mode=install cp mod_foo.la /path/to/apache/modules
             ...
             chmod 755 /path/to/apache/modules/mod_foo.so
             [activating module `foo' in /path/to/apache/conf/httpd.conf]
             $ _



       This way a line named


             LoadModule foo_module modules/mod_foo.so



       is added to the configuration file if still not present. If  you  want  to  have  this  disabled  per
       default use the -A option, <u>i.e.</u>


             $ apxs -i -A mod_foo.c



       For  a  quick test of the apxs mechanism you can create a sample Apache module template plus a corre-<font color="#ffffff" class="whiteout">sponding&nbsp;corresponding</font>
       sponding Makefile via:


             $ apxs -g -n foo
             Creating [DIR]  foo
             Creating [FILE] foo/Makefile
             Creating [FILE] foo/modules.mk
             Creating [FILE] foo/mod_foo.c
             Creating [FILE] foo/.deps
             $ _



       Then you can immediately compile this sample module into a shared object and load it into the  Apache
       server:


             $ cd foo
             $ make all reload
             apxs -c mod_foo.c
             /path/to/libtool --mode=compile gcc ... -c mod_foo.c
             /path/to/libtool --mode=link gcc ... -o mod_foo.la mod_foo.slo
             apxs -i -a -n "foo" mod_foo.la
             /path/to/instdso.sh mod_foo.la /path/to/apache/modules
             /path/to/libtool --mode=install cp mod_foo.la /path/to/apache/modules
             ...
             chmod 755 /path/to/apache/modules/mod_foo.so
             [activating module `foo' in /path/to/apache/conf/httpd.conf]
             apachectl restart
             /path/to/apache/sbin/apachectl restart: httpd not running, trying to start
             [Tue Mar 31 11:27:55 1998] [debug] <!-- a -->mod_so.c(303)<!-- /a -->: loaded module foo_module
             /path/to/apache/sbin/apachectl restart: httpd started
             $ _





Apache HTTP Server                               2004-10-01                                          APXS(8)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/apxs.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/apxs.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/apxs.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>HIArchive Programming Guide: Archiving and Unarchiving Objects</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Archiving and Unarchiving Objects"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002481-CH202" title="Archiving and Unarchiving Objects"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../HumanInterfaceToolbox-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000516" target="_top">Human Interface Toolbox</a> &gt; <a href="../HIArchive_intro/HIArchive_intro.html#//apple_ref/doc/uid/TP40002481-CH201-DontLinkElementID_20">HIArchive Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../HIArchive_intro/HIArchive_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../HIArchive_hiobj/HIArchive_hiobj.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_12" title="Archiving and Unarchiving Objects"></a><h1><a name="//apple_ref/doc/uid/TP40002481-CH202-BBCGCCFE" title="Archiving and Unarchiving Objects"></a>Archiving and Unarchiving Objects</h1><p>HIArchive provides a convenient way to store
data objects in a portable format. This chapter describes the basics
of archiving and unarchiving objects using HIArchive APIs. </p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="HIArchive_archiving.html#//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_1">What Can Be Archived?</a>
				
			<br/>
			
        
			
			
				<a href="HIArchive_archiving.html#//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_2">Using Default Values for Efficiency</a>
				
			<br/>
			
        
			
			
				<a href="HIArchive_archiving.html#//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_3">Archiving Objects</a>
				
			<br/>
			
        
			
			
				<a href="HIArchive_archiving.html#//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_4">Unarchiving Objects</a>
				
			<br/>
			
        
			
			
				<a href="HIArchive_archiving.html#//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_5">Editing Archives</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_1" title="What Can Be Archived?"></a><h2>What Can Be Archived?</h2>
<p>You can use HIArchive to archive any CFPropertyList data types. Some
examples: </p>
<ul class="ul"><li class="li"><p>CFArray</p></li>
<li class="li"><p>CFData</p></li>
<li class="li"><p>CFString</p></li>
<li class="li"><p>CFDictionary</p></li>
<li class="li"><p>CFDate</p></li>
<li class="li"><p>CFBoolean</p></li>
<li class="li"><p>CFNumber</p></li></ul>
<p>CFPropertyList collection types are archivable if they contain
only archivable objects.</p>
<p>You can also archive any HIObject that supports the HIArchive
protocol. All the standard HIViews (menus, controls) and windows
support archiving. If you use custom views, you need to add some
additional code to support archiving. See <span class="content_text"><a href="../HIArchive_hiobj/HIArchive_hiobj.html#//apple_ref/doc/uid/TP40002481-CH205-BBCGCCFE">“Making HIObjects Archivable”</a></span> for
details. </p>
<p>In addition, you can archive other CFTypes by manually serializing
them to CFData objects (which are archivable).</p>
<p>All data is stored in the HIArchive as key value pairs. </p>
<a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_2" title="Using Default Values for Efficiency"></a><h2>Using Default Values for Efficiency</h2>
<p>Often when archiving data, you may find that certain item
values are unchanged from their initial or default values. For example,
a custom view may have bounds that, while modifiable, are more often
left in their initial state. In cases where you would encode known
default values into an archive, you can leave such items out. Then
during decoding, if an expected key does not exist, you should assign
that item its default value. Doing so minimizes archive space and
encoding/decoding time. </p>
<p> However, keep the following thoughts in mind:</p>
<ul class="ul"><li class="li"><p>If you choose
to not write a key value pair to the archive if the object data
has the default value, make sure you don&#8217;t change the default
value in a future version of your software. </p></li>
<li class="li"><p>You should not change the meaning of a key, as this could
cause problems for older software unarchiving newer objects. If
you feel you need to change a key, consider using a new one instead,
and write both keys to the archive. Older software can read the
old key. Newer software can read the new key, if present, or the
old key if not. </p></li></ul>
<p>The examples in this document check for default values and
do not write them to the archive. </p>
<a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_3" title="Archiving Objects"></a><h2>Archiving Objects</h2>
<p>To write data to an archive, your application must first create
a write-only archive (specified by an <code>HIArchiveRef</code> object) by
calling <code>HIArchiveCreateForEncoding</code>. </p>
<p>To add data to the archive, you call the appropriate encoding
function:</p>
<ul class="ul"><li class="li"><p><code>HIArchiveEncodeBoolean</code> for
Boolean values</p></li>
<li class="li"><p><code>HIArchiveEncodeNumber</code> for
any numerical values</p></li>
<li class="li"><p><code>HIArchiveEncodeCFType</code> for
any CFPropertyList types. You also use this function to encode HIObjects
or their subclasses. </p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>HIArchiveEncodeBoolean</code> and <code>HIArchiveEncodeNumber</code> functions
are wrappers that call <code>HIArchiveEncodeCFType</code> with
the appropriate CFBoolean or CFNumber value. </p></div>
<p>All data is encoded with a (CFStringRef) key, which uniquely
identifies the data within the archive. The keys must be unique
only within the current object you are encoding. For example, keys
used by object A do not conflict with keys used by object B, even
if A and B are instances of the same class. Within a single object,
however, keys used by a subclass can conflict with keys used by
its superclass. If you overwrite a superclass key, HIArchive warns
you by sending a message to the console output; it is up to you
to decide whether this message indicates an error. </p>
<p>System-supplied HIObjects always have an <code>HI</code> prefix
in the key name; your custom HIObject subclasses should avoid using
this prefix unless you are explicitly overriding a value written
to the archive by the superclass. With careful use of keys, your
archives can support versioning; on older versions, newly keyed
data written on a more recent version of software or OS is ignored. </p>
<p>If you call <code>HIArchiveEncodeCFType</code> on
your own custom HIObject, the system sends a <code>kEventHIObjectEncode</code> Carbon
event to the object. It is then your custom object&#8217;s responsibility
to encode the appropriate instance data into the archive specified
in the <code>kEventParamHIArchive</code> parameter
using the <code>HIArchiveEncodeXXX</code> calls.
To receive the <code>kEventHIObjectEncode</code> event,
your HIObject must indicate that it supports archiving by passing <code>false</code> to
the HIObject function <code>HIObjectSetArchivingIgnored</code>.
For more details, see <span class="content_text"><a href="../HIArchive_hiobj/HIArchive_hiobj.html#//apple_ref/doc/uid/TP40002481-CH205-BBCGCCFE">“Making HIObjects Archivable.”</a></span></p>
<p>After you have encoded all the data into the archive, call <code>HIArchiveCopyEncodedData</code> to compress
the data. After compression, you handle the archive using the returned
Core Foundation data reference (<code>CFDataRef</code>).
You can use this reference to write the archive to disk, pass it
to another application, copy it to a pasteboard, and so on. After
compression, you can no longer write to the archive, and you must
release the original archive reference (<code>HIArchiveRef</code>)
by calling <code>CFRelease</code>.</p>
<p><span class="content_text"><a href="HIArchive_archiving.html#//apple_ref/doc/uid/TP40002481-CH202-BCIJBEHF">Listing 1-1</a></span> shows how you might encode data items into an archive
and then write the archive to a file specified by a URL. </p>
<a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_14" title="Listing 1-1Encoding items and writing to a file"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002481-CH202-BCIJBEHF" title="Listing 1-1Encoding items and writing to a file"></a><strong>Listing 1-1&nbsp;&nbsp;</strong>Encoding items and writing to a file</p>
<div class="codesample"><table><tr><td scope="row"><pre>#define kFirstItemKey CFSTR(&quot;myFirstItemKey&quot;);<span></span></pre></td></tr><tr><td scope="row"><pre>#define kSecondItemKey CFSTR(&quot;mySecondItemKey&quot;);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus ArchiveObjectsInFile (CFTypeRef firstItem,<span></span></pre></td></tr><tr><td scope="row"><pre>                                CFTypeRef secondItem, CFURLRef inFileURL )<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus err = noErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    HIArchiveRef encoder;<span></span></pre></td></tr><tr><td scope="row"><pre>    CFDataRef encodedData;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    err = HIArchiveCreateForEncoding( &amp;encoder ); <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, cantCreateEncoder);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (!CFEqual( firstItem, kDefaultFirstItem))  <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        err = HIArchiveEncodeCFType( encoder, kFirstItemKey, firstItem ); <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>        require_noerr (err, cantEncodeObject);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (!CFEqual( secondItem, kDefaultSecondItem))  <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        err = HIArchiveEncodeCFType( encoder, kSecondItemKey, secondItem );<span></span></pre></td></tr><tr><td scope="row"><pre>        require_noerr (err, cantEncodeObject);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    err = HIArchiveCopyEncodedData( encoder, &amp;encodedData ); <span>// 5</span></pre></td></tr><tr><td scope="row"><pre>    require_noerr (err, cantCopyEncodedData);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    verify(<span></span></pre></td></tr><tr><td scope="row"><pre>        CFURLWriteDataAndPropertiesToResource( inFileURL, encodedData,  <span>// 6</span></pre></td></tr><tr><td scope="row"><pre>                                NULL, NULL ));<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease ( encodedData ); <span>// 7</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>cantEncodeObject:<span></span></pre></td></tr><tr><td scope="row"><pre>cantCopyEncodedData:<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease ( encoder ); <span>// 8</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>cantCreateEncoder:<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    return err;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>Here is how the code works:</p>
<ol class="ol"><li class="li"><p>Creates an
HIArchive to hold the encoded data. </p></li>
<li class="li"><p>Checks to see if the value to be archived is the same as the
default value. The default value could be any value you would commonly
expect to see for this archivable item; an initial position or setting,
standard size, default attribute, and so on. If the value to be
archived is the same as the default, you can skip the archiving
procedure, which saves space and processing time. Of course, you
must make sure that your unarchiving function automatically inserts
default values for items that do not appear in the archive. </p></li>
<li class="li"><p>Calls the <code>HIArchiveEncodeCFType</code> function to
add the item to the archive by key. </p></li>
<li class="li"><p>Repeats the archiving process for the second item. </p></li>
<li class="li"><p>After encoding all the items, calls <code>HIArchiveCopyEncodedData</code> to
flatten the archived items into a CFData object. </p></li>
<li class="li"><p>Writes the CFData object to a file URL.</p></li>
<li class="li"><p>Releases the CFData object. </p></li>
<li class="li"><p>Releases the archive. </p></li></ol>
<a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_4" title="Unarchiving Objects"></a><h2>Unarchiving Objects</h2>
<p>To read data from an archive, your application must create
a read-only archive from the specified <code>CFDataRef</code> by
calling <code>HIArchiveCreateForDecoding</code>.
You retrieve data from the archive using the appropriate decoding
functions:</p>
<ul class="ul"><li class="li"><p><code>HIArchiveDecodeBoolean</code></p></li>
<li class="li"><p><code>HIArchiveDecodeNumber</code></p></li>
<li class="li"><p><code>HIArchiveCopyDecodedCFType</code></p></li></ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;Again,
the <code>HIArchiveDecodeBoolean</code> and <code>HIArchiveDecodeNumber</code> functions
are wrappers that call <code>HIArchiveCopyDecodedCFType</code> with
the appropriate CFBoolean or CFNumber value. </p></div>
<p>If you call <code>HIArchiveCopyDecodedCFType</code> to
retrieve a custom HIObject from an archive, the system sends a <code>kEventHIObjectInitialize</code> event
to the object. Your HIObject&#8217;s initialization handler must then
retrieve data for its custom HIObject from the <code>kEventParamHIArchive</code> parameter
using the <code>HIArchiveDecodeXXX</code> calls.
See see <span class="content_text"><a href="../HIArchive_hiobj/HIArchive_hiobj.html#//apple_ref/doc/uid/TP40002481-CH205-BBCGCCFE">“Making HIObjects Archivable”</a></span> for
details.</p>
<p>When you finish retrieving data from the archive, call <code>CFRelease</code> to
release the archive reference. </p>
<p><span class="content_text"><a href="HIArchive_archiving.html#//apple_ref/doc/uid/TP40002481-CH202-BCIDDHFJ">Listing 1-2</a></span> shows how you might unarchive data using a CFData
reference. This data may be the reference obtained from a <code>HIArchiveCopyEncodedData</code> call or
a copy obtained from a file, URL, or other source. For example,
you could call <code>CFURLCreateDataAndPropertiesFromResource</code>,
to load the XML data from an arbitrary URL. </p>
<a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_16" title="Listing 1-2Decoding items from a CFData reference"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002481-CH202-BCIDDHFJ" title="Listing 1-2Decoding items from a CFData reference"></a><strong>Listing 1-2&nbsp;&nbsp;</strong>Decoding items from a CFData reference</p>
<div class="codesample"><table><tr><td scope="row"><pre>OSStatus LoadObjectsFromCFData( CFTypeRef* firstItem,<span></span></pre></td></tr><tr><td scope="row"><pre>                            CFTypeRef* secondItem, CFDataRef inData )<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus err = noErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    HIArchiveRef decoder;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    err = HIArchiveCreateForDecoding( inData, 0, &amp;decoder ); <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>    require_noerr( err, cantCreateDecoder );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    err = HIArchiveCopyDecodedCFType( decoder, kFirstItemKey, firstItem); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (err == hiArchiveKeyNotAvailableErr)  <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>        *firstItem = CFRetain( kDefaultFirstItem);<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>        require_noerr( err, cantDecodeObjectFromData );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    err = HIArchiveCopyDecodedCFType( decoder, kSecondItemKey, secondItem ); <span>// 4</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (err == hiArchiveKeyNotAvailableErr)<span></span></pre></td></tr><tr><td scope="row"><pre>        *secondItem = CFRetain( kDefaultSecondItem);<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>        require_noerr( err, cantDecodeObjectFromData );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>cantDecodeObjectFromData:<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease( decoder ); <span>// 5</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>cantCreateDecoder:<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    return err;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>Here is how the code works:</p>
<ol class="ol"><li class="li"><p>Creates an
HIArchive for decoding items.</p></li>
<li class="li"><p>Attempts to decode the first archive object by key name.</p></li>
<li class="li"><p>Assigns a default value for this item if the error indicates
that the specified key does not exist in the archive . If you are
opening an older archive that does not contain the latest items,
you can also use defaults to populate the missing values. </p></li>
<li class="li"><p>Repeats the unarchiving for the second item. </p></li>
<li class="li"><p>Releases the archive.</p></li></ol>
<a name="//apple_ref/doc/uid/TP40002481-CH202-DontLinkElementID_5" title="Editing Archives"></a><h2>Editing Archives</h2>
<p>If you want to create a generic HIArchive editor, you should
keep the following in mind:</p>
<ul class="ul"><li class="li"><p>Because the
editor does not have any prior knowledge of what keys and data exist, you
may want to obtain the archive as a CFPropertyList, which you can
then parse to obtain key names. You can do so by calling the Core
Foundation function <code>CFPropertyListCreateFromXMLData</code>.</p></li>
<li class="li"><p>A generic editor will probably encounter archives containing
custom HIObject subclasses that have not been registered with the
system. In such cases, you should make sure to specify the <code>kHIArchiveDecodeSuperClassForUnregisteredObject</code> option when
calling <code>HIArchiveCreateForDecoding</code>.
When HIArchive encounters an unregistered subclass, it instantiates
its superclass instead and attaches any custom data to that object.
The custom data is comparable to the information available in the Attributes
pane of the Inspector window for custom HIViews in Interface Builder.
You can obtain the custom (that is, subclass-specific) data by calling
the HIObject function <code>HIObjectCopyCustomArchiveData</code>.You
receive the data as a CFDictionary with keys defined in <code>HIObject.h</code>.
See <span class="content_text"><a href="../../../Reference/HIObjectReference/index.html#//apple_ref/doc/uid/TP30000783" target="_top">HIObject Reference</a></span> for more details. </p></li>
<li class="li"><p>When writing an unregistered subclass object to an archive,
your editor must call the HIObject function <code>HIObjectSetCustomArchiveData</code>,
passing a CFDictionary containing subclass-specific data. You should
write the dictionary data as key value pairs using the dictionary
keys supplied in <code>HIObject.h</code> (specifying,
for example, initialization parameters, and class and superclass
identifiers).</p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../HIArchive_intro/HIArchive_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../HIArchive_hiobj/HIArchive_hiobj.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-08-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/HIArchiveProgrammingGuide/HIArchive_archiving/HIArchive_archiving.html%3Fid%3DTP40002481-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/HIArchiveProgrammingGuide/HIArchive_archiving/HIArchive_archiving.html%3Fid%3DTP40002481-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/HIArchiveProgrammingGuide/HIArchive_archiving/HIArchive_archiving.html%3Fid%3DTP40002481-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
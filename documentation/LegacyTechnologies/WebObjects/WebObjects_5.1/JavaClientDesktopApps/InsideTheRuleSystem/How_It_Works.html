<HTML>
	<HEAD>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="XML_Publisher">
		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">
        <title>How
It Works</title>
		</HEAD>
	<BODY bgcolor="#ffffff">
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --> <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Inside_the_Rule_System.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="Rule_System_Priorities.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerTop -->  
<!-- apple_doc: pageHeadingStart --><a name = "TPXREF31"></a><a name="-603546"></a><h2><font face="Lucida Grande,Helvetica,Arial">How
It Works</font></h2><!-- apple_doc: pageHeadingEnd -->

<p>From these questions, the rule system builds a detailed description
of the user interface. When the controller factory sends a request
to the server application, the rule system works with a set of <code>com.webobjects.directtoweb.D2WComponent</code> classes
and WebObjects dynamic elements to generate the XML. The rule system
receives the controller factory's requests and evaluates rules
to determine which D2WComponent subclasses should generate the XML
for the current request. The D2WComponent subclasses (using WOXMLNode
dynamic elements internally) do the actual XML generation.</p>
<p>All the information about how to configure a Direct to Java
Client application is stored in rule system rules. A rule has a
key, a value, and a priority. A key is a condition that must be
true for the rule to fire. The rule system evaluates requests as
follows:</p>
<ol><li>The controller
factory makes a request to the rule system by specifying a key.</font></li>
<li>The rule system identifies the rules whose key is the same
as the request key.</font></li>
<li>It then evaluates the conditions of the matching rules to
see which can fire.</font></li>
<li>Of the rules that can fire, the rule system fires the one
with the highest priority, returning the value for the rule's
key.</font></li></ol>
<p>By specifying <code>-D2WTraceRuleFiringEnabled
YES</code> as a launch argument on the server application,
you can see all the rules fire in a Direct to Java Client application.</p>
<p>To evaluate requests, the rule system needs information about
the state of the client application. In addition to specifying a
key, the controller factory also provides key-value pairs of state
information that the rule system can use to evaluate the conditions
of rules. For example, the rule system might need to know what task
the client application is attempting to perform (query, list, or
form) and the entity on which the client application is operating.</p>
<p>The controller factory packages all rule system input&#151;the
request key and the key-value pairs of state information&#151;into
a dictionary known as a <b>specification</b>. The following
are examples of specifications:</p>
<ul><li><code>question
= window</code>, <code>task = query</code></font></li>
<li><code>question = window</code>, <code>entity.name
= Student</code>, <code>task = form</code></font></li>
<li><code>question = modalDialog</code>, <code>entity.name
= Activity</code>, <code>task = select</code></font></li></ul>
<p>A specification always contains a question, which is the request
key. The request keys in the above examples are <code>window</code> and <code>modalDialog</code>.</p>
<p>In the rule system, you have access to the user's language
and platform, so you can write rules to provide application behavior
based on those attributes of the client. This allows for mostly
automatic localization of rule-generated components (as described
in  <a href="../T9LocalizingDComponents/iTask_Locali_htmlTP1.html" target="_top">"Task: Localizing Dynamic Components"</a>)
and provides automatic platform-specific user interface layout.</p>
<p>The rule system stores the key-value pairs of state information
in a <code>com.webobjects.directtoweb.D2WContext</code> object.
The D2WContext's whole purpose is to keep track of state as a
response is generated. Initially the D2WContext contains state information
provided by the controller factory. As the rule system processes
requests, the system adds more state information to the D2WContext.</p>
<br>
    <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Inside_the_Rule_System.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="Rule_System_Priorities.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerBottom --> <br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated May 1, 2002)</font></p><!-- start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->
</body>
</html>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of the Event Manager(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING88></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-87.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-89.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING88-0></A>
<H1><A NAME=MARKER-2-340></A>Summary of the Event Manager</H1>
<A NAME=HEADING88-1></A>
<H2>Pascal Summary</H2>
<A NAME=HEADING88-2></A>
<H3>Constants</H3>
<PRE>
CONST {event codes}
      nullEvent               = 0;        {no other pending events}
      mouseDown               = 1;        {mouse button pressed}
      mouseUp                 = 2;        {mouse button released}
      keyDown                 = 3;        {key pressed}
      keyUp                   = 4;        {key released}
      autoKey                 = 5;        {key repeatedly held down}
      updateEvt               = 6;        {window needs updating}
      diskEvt                 = 7;        {disk inserted}
      activateEvt             = 8;        {activate/deactivate window}
      osEvt                   = 15;       {operating-system events }
                                          { (suspend, resume, mouse-moved)}
      kHighLevelEvent         = 23;       {high-level events }
                                          { (includes Apple events)}
      
      {event masks}
      everyEvent              = -1;       {every event}
      mDownMask               =  2;       {mouse-down event       (bit 1)}
      mUpMask                 =  4;       {mouse-up event         (bit 2)}
      keyDownMask             =  8;       {key-down event         (bit 3)}
      keyUpMask               =  16;      {key-up event           (bit 4)}
      autoKeyMask             =  32;      {auto-key event         (bit 5)}
      updateMask              =  64;      {update event           (bit 6)}
      diskMask                =  128;     {disk-inserted event    (bit 7)}
      activMask               =  256;     {activate event         (bit 8)}
      highLevelEventMask      =  1024;    {high-level event       (bit 10)}
      osMask                  = -32768;   {operating-system event (bit 15)}

      {message codes for operating-system events}
      suspendResumeMessage    = $01;      {suspend or resume event}
      mouseMovedMessage       = $FA;      {mouse-moved event}
      osEvtMessageMask        = $FF000000;{can use to extract msg code}
      {flags for suspend and resume events}
      resumeFlag              = 1;           {resume event}
      convertClipboardFlag    = 2;           {Clipboard conversion }
                                             { required}
      {event message masks for keyboard events}
      charCodeMask= $000000FF;               {use to get character code}
      keyCodeMask = $0000FF00;               {use to get key code}
      adbAddrMask = $00FF0000;               {ADB address for ADB keyboard}

      {constants corresponding to bits in the modifiers field of event}
      activeFlag  = 1;        {bit 0 of low byte--valid only for }
                              { activate and mouse-moved events}
      btnState    = 128;      {bit 7 of low byte is mouse button state}
      cmdKey      = 256;      {bit 0 of high byte}
      shiftKey    = 512;      {bit 1 of high byte}
      alphaLock   = 1024;     {bit 2 of high byte}
      optionKey   = 2048;     {bit 3 of high byte}
      controlKey  = 4096;     {bit 4 of high byte}

      {high-level event posting options}
      nAttnMsg                = $00000001;   {give this message priority}
      priorityMask            = $000000FF;   {mask for priority options}
      nReturnReceipt          = $00000200;   {return receipt requested}
      systemOptionsMask       = $00000F00;   
      receiverIDisTargetID    = $00005000;   {ID is port name &amp; location}
      receiverIDisSessionID   = $00006000;   {ID is PPC session ref number}
      receiverIDisSignature   = $00007000;   {ID is creator signature}
      receiverIDisPSN         = $00008000;   {ID is process serial number}
      receiverIDMask          = $0000F000;
      
      {class and ID values for return receipt}
      HighLevelEventMsgClass  = 'jaym';      {event class of return receipt}
      rtrnReceiptMsgID        = 'rtrn';      {event ID of return receipt}
      
      {modifiers values in return receipt}
      msgWasNotAccepted       = 0;           {recipient did not accept }
                                             { the message}
      msgWasFullyAccepted     = 1;           {recipient accepted the}
                                             { entire message}
      msgWasPartiallyAccepted = 2;           {recipient did not accept }
                                             { the entire message}
</PRE>
<A NAME=HEADING88-4></A>
<H3>Data Types</H3>
<PRE>
TYPE
   EventRecord = 
   RECORD
      what:       Integer;       {event code}
      message:    LongInt;       {event message}
      when:       LongInt;       {ticks since startup}
      where:      Point;         {mouse location}
      modifiers:  Integer;       {modifier flags}
   END;

   KeyMap = PACKED ARRAY[0..127] OF Boolean; {records state of keyboard}

   TargetID = 
   RECORD
      sessionID:        LongInt;          {session reference number (not }
                                          { used if posting an event)}
      name:             PPCPortRec;       {port name}
      location:         LocationNameRec;  {location name}
      recvrName:        PPCPortRec;       {reserved}
   END;

   TargetIDPtr          = ^TargetID;      {pointer to a target ID record}
   TargetIDHdl          = ^TargetIDPtr;   {handle to a target ID record}
   HighLevelEventMsg =
   RECORD
      HighLevelEventMsgHeaderLength:   Integer;       {reserved}
      version:                         Integer;       {reserved}
      reserved1:                       LongInt;       {reserved}
      theMsgEvent:                     EventRecord;   {event record}
      userRefCon:                      LongInt;       {reference constant}
      postingOptions:                  LongInt;       {reserved}
      msgLength:                       LongInt;       {reserved}
   END;

   HighLevelEventMsgPtr = ^HighLevelEventMsg;
   HighLevelEventMsgHdl = ^HighLevelEventMsgPtr;

   GetSpecificFilterProcPtr = ProcPtr;
   EvQEl =                       {event queue entry}
   RECORD
      qLink:         QElemPtr;   {next queue entry}
      qType:         Integer;    {queue type (ORD(evType))}
      evtQWhat:      Integer;    {event code}
      evtQMessage:   LongInt;    {event message}
      evtQWhen:      LongInt;    {ticks since startup}
      evtQWhere:     Point;      {mouse location}
      evtQModifiers: Integer;    {modifier flags}
   END;

   EvQElPtr = ^EvQEl;
</PRE>
<A NAME=HEADING88-8></A>
<H3>Event Manager Routines</H3>
<A NAME=HEADING88-9></A>
<H4>Receiving Events</H4>
<PRE>
FUNCTION WaitNextEvent(eventMask: Integer; VAR theEvent: EventRecord; 
sleep: LongInt; mouseRgn: RgnHandle): Boolean;
FUNCTION EventAvail(eventMask: Integer; VAR theEvent: EventRecord)
: Boolean;
FUNCTION GetNextEvent(eventMask: Integer; VAR theEvent: EventRecord)
: Boolean;
FUNCTION AcceptHighLevelEvent
   (VAR sender: TargetID; VAR msgRefcon: LongInt; 
msgBuff: Ptr; VAR msgLen: LongInt): OSErr;
FUNCTION GetSpecificHighLevelEvent
   (aFilter: GetSpecificFilterProcPtr; 
yourDataPtr: UNIV Ptr; VAR err: OSErr) 
: Boolean;
PROCEDURE FlushEvents(whichMask: Integer; stopMask: Integer);
PROCEDURE SystemClick(theEvent: EventRecord; theWindow: WindowPtr);
PROCEDURE SystemTask;
FUNCTION SystemEvent (theEvent: EventRecord): Boolean;
FUNCTION GetOSEvent(mask: Integer; VAR theEvent: EventRecord)
: Boolean;
FUNCTION OSEventAvail(mask: Integer; VAR theEvent: EventRecord)
: Boolean;
PROCEDURE SetEventMask(theMask: Integer);
FUNCTION GetEvQHdr: QHdrPtr;
</PRE>
<A NAME=HEADING88-25></A>
<H4>Sending Events</H4>
<PRE>
FUNCTION PostHighLevelEvent(theEvent: EventRecord; receiverID: Ptr; 
msgRefcon: LongInt; msgBuff: Ptr; 
msgLen: LongInt; postingOptions: LongInt) 
: OSErr;
FUNCTION PPostEvent (eventCode: Integer; eventMsg: LongInt;
VAR qEl: EvQElPtr): OSErr;
FUNCTION PostEvent(eventNum: Integer; eventMsg: LongInt): OSErr;
</PRE>
<A NAME=HEADING88-29></A>
<H4>Converting Process Serial Numbers and Port Names</H4>
<PRE>
FUNCTION GetProcessSerialNumberFromPortName
   (portName: PPCPortRec; 
VAR PSN: ProcessSerialNumber): OSErr;
FUNCTION GetPortNameFromProcessSerialNumber
   (VAR portName: PPCPortRec; 
PSN: ProcessSerialNumber): OSErr;
</PRE>
<A NAME=HEADING88-34></A>
<H4>Reading the Mouse</H4>
<PRE>
PROCEDURE GetMouse(VAR mouseLoc: Point);
FUNCTION Button: Boolean;
FUNCTION StillDown: Boolean;
FUNCTION WaitMouseUp: Boolean;
</PRE>
<A NAME=HEADING88-39></A>
<H4>Reading the Keyboard</H4>
<PRE>
PROCEDURE GetKeys(VAR theKeys: KeyMap);
{the KeyTranslate function is also available as the KeyTrans function}
FUNCTION KeyTranslate (transData: Ptr; keycode: Integer; 
                  VAR state: LongInt): LongInt;
</PRE>
<A NAME=HEADING88-43></A>
<H4>Getting Timing Information</H4>
<PRE>
FUNCTION TickCount: LongInt;
FUNCTION GetDblTime: LongInt;
FUNCTION GetCaretTime: LongInt;
</PRE>
<A NAME=HEADING88-47></A>
<H3>Application-Defined Routine</H3>
<A NAME=HEADING88-48></A>
<H4>Filter Function for Searching the High-Level Event Queue</H4>
<PRE>
FUNCTION MyFilter(yourDataPtr: Ptr; 
msgBuff: HighLevelEventMsgPtr; 
sender: TargetID): Boolean;
</PRE>
<A NAME=HEADING88-50></A>
<H2>C Summary</H2>
<A NAME=HEADING88-51></A>
<H3>Constants</H3>
<PRE>
enum {
      /*event codes*/
      nullEvent               = 0,  /*no other pending events*/
      mouseDown               = 1,  /*mouse button pressed*/
      mouseUp                 = 2,  /*mouse button released*/
      keyDown                 = 3,  /*key pressed*/
      keyUp                   = 4,  /*key released*/
      autoKey                 = 5,  /*key repeatedly held down*/
      updateEvt               = 6,  /*window needs updating*/
      diskEvt                 = 7,  /*disk inserted*/
      activateEvt             = 8,  /*activate/deactivate window*/
      osEvt                   = 15, /*operating-system events */
                                    /* (suspend, resume, mouse-moved)*/
      
      /*event masks*/
      mDownMask               =  2,          /*mouse-down         (bit 1)*/
      mUpMask                 =  4,          /*mouse-up           (bit 2)*/
      keyDownMask             =  8,          /*key-down           (bit 3)*/
      keyUpMask               =  16,         /*key-up             (bit 4)*/
      autoKeyMask             =  32,         /*auto-key           (bit 5)*/
      updateMask              =  64,         /*update             (bit 6)*/
      diskMask                =  128,        /*disk-inserted      (bit 7)*/
      activMask               =  256,        /*activate           (bit 8)*/
      highLevelEventMask      =  1024,       /*high-level         (bit 10)*/
      osMask                  = -32768       /*operating-system   (bit 15)*/
};

enum {
      everyEvent                 = -1,          /*every event*/

      /*event message masks for keyboard events*/
      charCodeMask      = 0x000000FF,        /*use to get character code*/
      keyCodeMask       = 0x0000FF00,        /*use to get key code*/
      adbAddrMask       = 0x00FF0000,        /*ADB address if ADB keyboard*/
      osEvtMessageMask  = 0xFF000000,        /*can use to extract msg code*/



      /*message codes for operating-system events*/
      mouseMovedMessage       = 0xFA,        /*mouse-moved event*/
      suspendResumeMessage    = 0x01,        /*suspend or resume event*/
      /*flags for suspend and resume events*/
      resumeFlag              = 1,           /*resume event*/
      convertClipboardFlag    = 2,           /*Clipboard conversion */
                                             /* required*/

      /*constants corresponding to bits in the modifiers field of event*/
      activeFlag  = 1,        /*bit 0 of low byte--valid only for */
                              /* activate and mouse-moved events*/
      btnState    = 128,      /*bit 7 of low byte is mouse button state*/
      cmdKey      = 256,      /*bit 0 of high byte*/
      shiftKey    = 512,      /*bit 1 of high byte*/
      alphaLock   = 1024,     /*bit 2 of high byte*/
      optionKey   = 2048,     /*bit 3 of high byte*/
      controlKey  = 4096      /*bit 4 of high byte*/
};
enum {
      kHighLevelEvent         = 23, /*event code for high-level events */
                                    /* (includes Apple events)*/
      /*high-level event posting options*/
      receiverIDMask          = 0x0000F000,  /*mask for receiver ID bits*/
      receiverIDisPSN         = 0x00008000,  /*ID is proc serial number*/
      receiverIDisSignature   = 0x00007000,  /*ID is creator signature*/
      receiverIDisSessionID   = 0x00006000,  /*ID is session ref number*/
      receiverIDisTargetID    = 0x00005000,  /*ID is port name &amp; location*/

      systemOptionsMask       = 0x00000F00,
      nReturnReceipt          = 0x00000200,  /*return receipt requested*/
      priorityMask            = 0x000000FF,  /*mask for priority options*/
      nAttnMsg                = 0x00000001,  /*give this message priority*/
      
      /*class and ID values for return receipt*/
      #define HighLevelEventMsgClass 'jaym'
      #define rtrnReceiptMsgID 'rtrn'
      
      /*modifiers values in return receipt*/
      msgWasPartiallyAccepted = 2,
      msgWasFullyAccepted     = 1,
      msgWasNotAccepted       = 0
};
</PRE>
<A NAME=HEADING88-53></A>
<H3>Data Types</H3>
<PRE>
   
struct EventRecord { 
      short    what;                   /*event code*/
      long     message;                /*event message*/
      long     when;                   /*ticks since startup*/
      Point    where;                  /*mouse location*/
      short    modifiers;              /*modifier flags*/
   };
typedef struct EventRecord EventRecord;

typedef long KeyMap[4];                /*records state of keyboard*/

struct TargetID {
      long              sessionID;     /*session reference number (not */
                                       /* used if posting an event)*/
      PPCPortRec        name;          /*port name*/
      LocationNameRec   location;      /*location name*/
      PPCPortRec        recvrName;     /*reserved*/
   };

typedef struct TargetID TargetID;
typedef TargetID *TargetIDPtr, **TargetIDHdl;
struct HighLevelEventMsg {
      unsigned short    HighLevelEventMsgHeaderLength;   /*reserved*/
      unsigned short    version;                         /*reserved*/
      unsigned long     reserved1;                       /*reserved*/
      EventRecord       theMsgEvent;                     /*event record*/
      unsigned long     userRefCon;                      /*ref constant*/
      unsigned long     postingOptions;                  /*reserved*/
      unsigned long     msgLength;                       /*reserved*/
   };

typedef struct HighLevelEventMsg HighLevelEventMsg;
typedef HighLevelEventMsg *HighLevelEventMsgPtr, **HighLevelEventMsgHdl;
   struct EvQEl {       /*event queue entry*/
      QElemPtr    qLink;            /*next queue entry*/
      short       qType;            /*queue type (evType)*/
      short       evtQWhat;         /*event code*/
      long        evtQMessage;      /*event message*/
      long        evtQWhen;         /*ticks since startup*/
      Point       evtQWhere;        /*mouse location*/
      short       evtQModifiers;    /*modifier flags*/
   };
   typedef struct EvQEl EvQEl;
   typedef EvQEl *EvQElPtr;
typedef pascal Boolean (*GetSpecificFilterProcPtr) 
(void *yourDataPtr, 
HighLevelEventMsgPtr msgBuff, 
const TargetID *sender);
</PRE>
<A NAME=HEADING88-58></A>
<H3>Event Manager Routines</H3>
<A NAME=HEADING88-59></A>
<H4>Receiving Events</H4>
<PRE>
pascal Boolean WaitNextEvent(short eventMask, EventRecord *theEvent,
unsigned long sleep, RgnHandle mouseRgn);
pascal Boolean EventAvail(short eventMask, EventRecord *theEvent);
pascal Boolean GetNextEvent(short eventMask, EventRecord *theEvent);
pascal OSErr AcceptHighLevelEvent
   (TargetID *sender, unsigned long *msgRefcon, 
Ptr msgBuff, unsigned long *msgLen); 
pascal Boolean GetSpecificHighLevelEvent
   (GetSpecificFilterProcPtr aFilter, 
void *yourDataPtr, OSErr *err);
pascal void FlushEvents(short whichMask, short stopMask);
pascal void SystemClick(const EventRecord *theEvent,
WindowPtr theWindow);
pascal void SystemTask(void);
pascal Boolean SystemEvent(const EventRecord *theEvent);
pascal Boolean GetOSEvent(short mask, EventRecord *theEvent);
pascal Boolean OSEventAvail(short mask, EventRecord *theEvent);
pascal void SetEventMask(short theMask);
#define GetEvQHdr() ((QHdrPtr) 0x014A)
</PRE>
<A NAME=HEADING88-75></A>
<H4>Sending Events</H4>
<PRE>
pascal OSErr PostHighLevelEvent
   (const EventRecord *theEvent, 
unsigned long receiverID, 
unsigned long msgRefcon, Ptr msgBuff, 
unsigned long msgLen, 
unsigned long postingOptions);
pascal OSErr PPostEvent(short eventCode, long eventMsg, EvQElPtr *qEl)
pascal OSErr PostEvent(short eventNum, long eventMsg);
</PRE>
<A NAME=HEADING88-80></A>
<H4>Converting Process Serial Numbers and Port Names</H4>
<PRE>
pascal OSErr GetPortNameFromProcessSerialNumber
   (PPCPortPtr portName,
const ProcessSerialNumberPtr pPSN);
pascal OSErr GetProcessSerialNumberFromPortName
   (const PPCPortPtr portName, 
ProcessSerialNumberPtr pPSN);
</PRE>
<A NAME=HEADING88-85></A>
<H4>Reading the Mouse</H4>
<PRE>
pascal void GetMouse(Point *mouseLoc);
pascal Boolean Button(void);
pascal Boolean StillDown(void);
pascal Boolean WaitMouseUp(void);
</PRE>
<A NAME=HEADING88-90></A>
<H4>Reading the Keyboard</H4>
<PRE>
pascal void GetKeys(KeyMap theKeys);
{the KeyTranslate function is also available as the KeyTrans function}
pascal long KeyTranslate (const void *transData, short keycode, 
long *state);
</PRE>
<A NAME=HEADING88-94></A>
<H4>Getting Timing Information</H4>
<PRE>
pascal unsigned long TickCount 
   (void);
#define GetDblTime() (* (unsigned long*) 0x02F0)
#define GetCaretTime() (* (unsigned long*) 0x02F4)
</PRE>
<A NAME=HEADING88-99></A>
<H3>Application-Defined Routine</H3>
<A NAME=HEADING88-100></A>
<H4>Filter Function for Searching the High-Level Event Queue</H4>
<PRE>
pascal Boolean MyFilter(void *yourDataPtr, 
HighLevelEventMsgPtr msgBuff, 
const TargetID *sender);
</PRE>
<A NAME=HEADING88-102></A>
<H2>Assembly-Language Summary</H2>
<A NAME=HEADING88-103></A>
<H3>Data Structures</H3>
<A NAME=HEADING88-104></A>
<H4>Event Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>what</CODE><TD>word<TD>event code<TR>
<TD>2<TD><CODE>message</CODE><TD>long<TD>event message<TR>
<TD>6<TD><CODE>when</CODE><TD>long<TD>ticks since startup<TR>
<TD>10<TD><CODE>where</CODE><TD>long<TD>mouse location<TR>
<TD>14<TD><CODE>modifiers</CODE><TD>word<TD>modifier flags</TABLE>
</H4>
<A NAME=HEADING88-105></A>
<H4>Target ID Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>sessionID</CODE><TD>long<TD>session reference number (not used if posting event)<TR>
<TD>4<TD><CODE>name</CODE><TD>68 bytes<TD>port name (specified in a <CODE>PPCPortRec</CODE> data structure)<TR>
<TD>72<TD><CODE>location</CODE><TD>34 bytes<TD>location name (specified in a <CODE>LocationNameRec</CODE>)<TR>
<TD>106<TD><CODE>recvrName</CODE><TD>68 bytes<TD>reserved</TABLE>
</H4>
<A NAME=HEADING88-106></A>
<H4>High-Level Event Message Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD colspan=3><CODE>HighLevelEventMsgHeaderLength</CODE><TR>
<TD>&nbsp;<TD>&nbsp;<TD>word<TD>reserved<TR>
<TD>2<TD><CODE>version</CODE><TD>word<TD>reserved<TR>
<TD>4<TD><CODE>reserved1</CODE><TD>long<TD>reserved<TR>
<TD>8<TD><CODE>theMsgEvent</CODE><TD>16 bytes <TD>event record<TR>
<TD>22<TD><CODE>userRefCon</CODE><TD>long<TD>reference constant<TR>
<TD>26<TD><CODE>postingOptions</CODE><TD>long<TD>reserved<TR>
<TD>30<TD><CODE>msgLength</CODE><TD>long<TD>reserved</TABLE>
</H4>
<A NAME=HEADING88-107></A>
<H4>Event Queue Header Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>qLink</CODE><TD>long<TD>next queue entry<TR>
<TD>4<TD><CODE>qType</CODE><TD>word<TD>queue type<TR>
<TD>6<TD><CODE>evtQWhat</CODE><TD>word<TD>event code<TR>
<TD>8<TD><CODE>evtQMessage</CODE><TD>long<TD>event message<TR>
<TD>12<TD><CODE>evtQWhen</CODE><TD>long<TD>ticks since startup<TR>
<TD>16<TD><CODE>evtQWhere</CODE><TD>long<TD>mouse location<TR>
<TD>20<TD><CODE>evtQModifiers</CODE><TD>word<TD>modifier flags</TABLE>
</H4>
<A NAME=HEADING88-108></A>
<H3>Trap Macros</H3>
<A NAME=HEADING88-109></A>
<H4>Trap Macros Requiring Routine Selectors</H4>
<PRE>
<CODE>_OSDispatch</CODE>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Selector<TH>Routine <TR>
<TD>$0033<TD><CODE>AcceptHighLevelEvent</CODE><TR>
<TD>$0034<TD><CODE>PostHighLevelEvent</CODE><TR>
<TD>$0035<TD><CODE>GetProcessSerialNumberFromPortName</CODE><TR>
<TD>$0045<TD><CODE>GetSpecificHighLevelEvent</CODE><TR>
<TD>$0046<TD><CODE>GetPortNameFromProcessSerialNumber</CODE></TABLE>

</PRE>
<A NAME=HEADING88-111></A>
<H4>Trap Macros Requiring Register Setup 
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro name<TH colspan=2>Registers on entry<TH colspan=2>Registers on exit<TR>
<TD>_FlushEvents<TD>D0: <TD>event mask (low-order word)<BR>stop mask (high-order word)<TD>D0: <TD>0 if all events were removed from the queue, or the event code of the event that stopped the search (low-order word)<TR>
<TD><CODE>_GetOSEvent</CODE><TD>A0:<BR>D0:<TD>address of event record<BR>event mask (low-order word)<TD><BR>D0:<TD><BR>0 if <CODE>GetOSEvent</CODE> returns any event other than a null event, or -1 if it returns a null event (low-order byte)<TR>
<TD><CODE>_OSEventAvail</CODE><TD>A0:<BR>D0:<TD>address of event record<BR>event mask (low-order word)<TD><BR>D0:<TD><BR>0 if <CODE>OSEventAvail</CODE> returns any event other than a null event, or -1 if it returns a null event (low-order byte)<TR>
<TD><CODE>_PostEvent</CODE><TD>A0:<BR>D0:<TD>event code (low-order word)<BR>event message (long word)<TD><BR>D0:<TD><BR>result code (low-order word)</TABLE>
</H4>
<A NAME=HEADING88-112></A>
<H3>Global Variables
<TABLE BORDER="0" CELLPADDING=3><TD>CaretTime<TD>The suggested difference in ticks that should exist between blinks of the caret in editable text.<TR>
<TD>DoubleTime<TD>The suggested maximum difference in ticks that should exist between the time of a mouse-up event and a mouse-down event for your application to consider those two mouse events a double click.<TR>
<TD>EventQueue<TD>The header of the event queue.<TR>
<TD>KeyRepThresh<TD>The value of the auto-key rate (the amount of time, in ticks, that must elapse before the Event Manager generates a subsequent auto-key event).<TR>
<TD>KeyThresh<TD>The value of the auto-key threshold (the amount of time, in ticks, that must elapse before the Event Manager generates an auto-key event).<TR>
<TD>ScrDmpEnable<TD>A byte that, if set to 0, disables the Event Manager's processing of Command-Shift-number key combinations with numbers 3 through 9. <TR>
<TD>SEvtEnb<TD>A byte that, if set to 0, causes the <CODE>SystemEvent</CODE> function to always return <CODE>FALSE</CODE>.<TR>
<TD>SysEvtMask<TD>The system event mask of the current application.<TR>
<TD>Ticks<TD>A long integer that indicates the current number of ticks since the system last started up.</TABLE>
</H3>
<A NAME=HEADING88-113></A>
<H2>Result Codes
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>procNotFound<TD>-600<TD>No eligible process with specified process serial number<TR>
<TD>bufferIsSmall<TD>-607<TD>Buffer is too small<TR>
<TD>noOutstandingHLE<TD>-608<TD>No outstanding high-level event<TR>
<TD>connectionInvalid<TD>-609<TD>Connection is invalid<TR>
<TD>noUserInteractionAllowed<TD>-610<TD>Cannot interact directly with user<TR>
<TD>noPortErr<TD>-903<TD>Invalid port name<A NAME=MARKER-2-185></A></TABLE>
</H2>
 <P>
</BLOCKQUOTE><P>

</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-87.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-89.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

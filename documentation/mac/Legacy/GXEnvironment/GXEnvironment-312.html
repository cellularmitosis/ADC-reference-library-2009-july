<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Data(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING312></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-311.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-313.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-306.html"><B>Chapter 7 - QuickDraw GX Stream Format</B></A> / <A HREF="GXEnvironment-307.html"><B>About QuickDraw GX Stream Format</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING312-0></A>
<H2><A NAME=MARKER-9-51></A>Data</H2>
 The sequence of the optional object-specific data that follows a data type opcode byte is predetermined and consists of type constants and data. Some data sequences are preceded by an omit byte. An <A NAME=MARKER-2-52></A><B>omit byte</B> is included in the data stream format to describe the presence or absence, meaning, order, and compression of data that corresponds to the fields of a type or the properties of an object. If an omit byte is not present for an object, then, with the exception of bitmaps and transforms, the compression type opcode in the data type opcode byte defines the data compression.<P>
<A NAME=HEADING312-2></A>
<H3><A NAME=MARKER-9-53></A>Omit Byte Masks and Omit Byte Shifts</H3>
 The omit byte provides an efficient method of assigning different data compressions to type constants and object properties that immediately follow the omit byte. <A HREF=#MARKER-9-54>Figure 7-7</A> shows the relationship of the bits in an omit byte and the four constants or properties that follow.<P>
<B>Figure 7-7  <A NAME=MARKER-9-54></A>Omit byte relationship with the data that follows</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/EU-L-73.gif"><p>
 The compression type constants used in the omit byte are defined in the <CODE>gxTwoBitCompressionValues</CODE> enumeration listed in <A HREF=GXEnvironment-311.html#MARKER-9-1>Table 7-2</A>. Long, word, or byte data compression is applied if the enumeration constants are 0x00, 0x40, 0x80, respectively. If the constant is 0xC0, the compression is "omit compression," then the stream format does not include the field or property. For example, if the omit byte in <A HREF=#MARKER-9-54>Figure 7-7</A> contained 0x0C for bits 3 and 2, Data 3 constant or property would not appear in the stream and Data 4 would follow Data 2.<P>
 Some omit byte enumerations provide multiple bytes of mask constants and shift constants to accommodate the description of all of the properties of an object or all of the fields of a structure. For example, the description of a layout shape requires three omit bytes to specify the compression of all of the properties. The data corresponding to each omit byte mask follows the mask. For multiple masks, the sequence is omit mask1, data, omit mask2, data, omit mask3, data, and so on.<P>
 You can use an <A NAME=MARKER-2-55></A><B>omit byte mask</B> and its corresponding <A NAME=MARKER-2-56></A><B>omit byte shift</B> to interpret the meaning of each of the bits in the omit byte. Each entry in an omit mask enumeration has a name and a value. The name describes the property. The hexadecimal value of the mask is given in the enumeration. The binary equivalent is the mask. <P>
 <A HREF=#MARKER-9-21>Table 7-10</A> shows a typical omit byte mask enumeration and its corresponding omit byte shift enumeration values. The example shows the <CODE>gxOmitTextMask</CODE> enumeration binary mask values and the bit shift from the corresponding <CODE>gxOmitTextShift</CODE> enumeration.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-21></A>Constants from the <CODE>gxOmitTextMask</CODE> and the <CODE>gxOmitTextShift</CODE> enumerations</CAPTION>
<TH>gxOmitTextMask enumeration<TH>Enumeration<BR>value<TH>Binary mask<BR>value<TH>Bit shift<BR>constant<TR>
<TD><CODE>gxOmitTextCharacterMask</CODE><TD><CODE>0xC0</CODE><TD><CODE>11000000</CODE><TD>6<TR>
<TD><CODE>gxOmitTextPositionXMask</CODE><TD><CODE>0x30</CODE><TD><CODE>00110000</CODE><TD>4<TR>
<TD><CODE>gxOmitTextPositionYMask</CODE><TD><CODE>0x0C</CODE><TD><CODE>00001100</CODE><TD>2<TR>
<TD><CODE>gxOmitTextDataMask</CODE><TD><CODE>0x02</CODE><TD><CODE>00000010</CODE><TD>1</TABLE>
<P>
 <A HREF=#MARKER-9-57>Figure 7-8</A> shows how you can use an omit mask and corresponding omit shift to analyze an omit byte in the data stream. <P>
<B>Figure 7-8  <A NAME=MARKER-9-57></A>Select the bits from the omit byte</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/EU-L-46.gif"><p>
 First, the bits in the omit byte are masked with the <CODE>gxOmit_Mask</CODE> enumeration with a value of 0xC0 and a binary value 11000000. This mask selects the first two high-order bits of the omit byte. In order to interpret the two bits selected, shift the bits to the right by the number of bits indicated by the <CODE>gxOmit_Shift</CODE> enumeration value. Once the bits are selected and shifted, determine the compression of the data that follows by comparing these bits with the <CODE>gxTwoBitCompressionValues</CODE> enumeration, as shown in <A HREF=#MARKER-9-58>Figure 7-9</A>. The values of the <CODE>gxTwoBitCompressionValues</CODE> enumeration are given in <A HREF=GXEnvironment-311.html#MARKER-9-1>Table 7-2</A>.<P>
<B>Figure 7-9  <A NAME=MARKER-9-58></A>Compare the bits selected and shifted with the compression enumeration</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/EU-L-47.gif"><p>
 Here is an example of how this works with an omit byte describing the shape object for a text shape. First you need to correlate the names of the constants in the omit mask enumeration with the structures, enumerations, or properties of the object that they describe. For more information on correlating omit bytes, see the appropriate object-specific heading in the section<A HREF=#MARKER-9-51>"Data" beginning on page 7-22</A>. <P>
 <A HREF=#MARKER-9-8>Table 7-11</A> shows the correlation between the <CODE>gxOmitTextMask</CODE> names and the parameters of the <CODE>GXNewTextFunction</CODE>. 
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-8></A>Correlation between <CODE>gxOmitTextMask</CODE> and the <CODE>GXNewText</CODE> function</CAPTION>
<TH>Constants in the <CODE>gxOmitTextMask</CODE> enumeration<TH>Text shape property<TR>
<TD><CODE>gxOmitTextCharacterMask</CODE><TD><CODE>charCount</CODE><TR>
<TD><CODE>gxOmitTextPositionXMask</CODE><TD>position .x<TR>
<TD><CODE>gxOmitTextPositionYMask</CODE><TD>position .y<TR>
<TD><CODE>gxOmitTextDataMask</CODE><TD>text</TABLE>
<P>
 A summary of these constants is provided in <A HREF=#MARKER-9-21>Table 7-10</A>. The <CODE>gxOmitTextMask</CODE> enumeration constants correlate with the properties of the text shape. The text shape is described in the text shape chapter of <I><A HREF="../../GXTypography/GXTypography-2.html">Inside Macintosh: QuickDraw GX Typography</A></I>.<P>
 The order of the <CODE>gxOmitTextMask</CODE> enumeration tells us that the data to follow will be in the sequence <CODE>charCount</CODE>, <CODE>position</CODE> <CODE>.x</CODE>, <CODE>position</CODE> <CODE>.y</CODE>, and <CODE>text</CODE>.<P>
 For instance, suppose the omit byte is 0xA4 or binary 10100100. <P>
 The binary mask value for the <CODE>gxOmitTextCharacterMask</CODE>, 11000000, selects the high order 2 bits, 10. The <CODE>gxTwoBitCompressionValues</CODE> enumeration with value 2 is <CODE>gxByteCompression</CODE>. The data for <CODE>charCount</CODE> is therefore byte compressed.<P>
 The binary mask value for the <CODE>gxOmitPositionXMask</CODE>, 00110000, selects the next 2 bits, 10. The <CODE>gxTwoBitCompressionValues</CODE> enumeration with value 2 is again <CODE>gxByteCompression</CODE>. The data for <CODE>position.x</CODE> is therefore byte compressed.<P>
 The binary mask value for the <CODE>gxOmitPositionYMask</CODE>, 00001100, selects the next 2 bits, 01. The <CODE>gxTwoBitCompressionValues</CODE> enumeration with value 1 is <CODE>gxWordCompression</CODE>. The data for <CODE>position.y</CODE> is therefore word compressed.<P>
 The binary mask value for the <CODE>gxOmitTextDataMask</CODE>, 10, selects the next bit, 0. The <CODE>gxTwoBitCompressionValues</CODE> enumeration with value 0 is <CODE>gxNoCompression</CODE>. The <CODE>text</CODE> data is therefore not compressed.<P>
 The above example is from the analysis of a data stream of a flattened text shape. For additional information about this example see the section <A HREF=GXEnvironment-318.html#MARKER-9-117>"Analyzing a Flattened Text Shape" beginning on page 7-72</A>.<P>
 One or more omit mask bytes are included in the data stream whenever specific enumeration or structure data is required to describe a specific object. <P>
 Omit mask and omit shift enumerations can be used to analyze QuickDraw GX omit bytes and compare the masked bits to other values. <P>
 An omit byte is first masked to obtain the bits desired. The bits are then shifted using the omit shift enumeration that corresponds to the omit byte. The resulting bits can then be compared to other data in your application to obtain information about the data stream. <P>
 <A HREF=#MARKER-9-59>Listing 7-1</A> shows how to determine if the x-coordinate of the position field in a flattened shape data stream is compressed. <P>
<B>Listing 7-1  <A NAME=MARKER-9-59></A>Determining if <CODE>position(x)</CODE> is byte compressed</B><P>
<PRE>
unsigned char a = ReadByte();
if ((a &amp; (gxOmitTextPositionXMask &gt;&gt; gxOmitTextPositionXShift)) ==
    gxByteCompression
{
/* perform an action */
}
</PRE>
 The function reads the byte, masks it with <CODE>gxOmitTextPositionXMask</CODE> to obtain the desired two bits, and then shifts it by the amount given by the <CODE>gxOmitTextPositionShift</CODE>. The resulting 2 bits can now be compared to the 2 bits of <CODE>gxByteCompression.</CODE><P>
<A NAME=HEADING312-35></A>
<H3><A NAME=MARKER-9-60></A>Header Data</H3>
 <A NAME=MARKER-2-307></A>The header marks the beginning of a new flattened shape in the data stream. The <CODE>gxHeaderTypeOpcode</CODE> constant indicates that the version of QuickDraw GX that generated the data stream follows. As new versions become available, older software may not be able to interpret the newer portions of a data stream. The interpreter can then look at the version number and skip over versions that it doesn't understand. For example, if an interpreter that understands only QuickDraw GX version 1.0 encounters version 2.0 or if the interpreter finds a version 1.0 opcode, but doesn't recognize the data, an error is posted. <P>
 The byte after the version byte contains the <CODE>gxFontListFlatten</CODE> and <CODE>gxFontGlyphsFlatten</CODE> flags. These flags are functional only if the shape contains text. <P>
 The <CODE>gxFontListFlatten</CODE> flag instructs the <CODE>GXFlattenShape</CODE> function to attach a tag object to the flattened shape containing a list of the fonts referenced in the shape. A list of all of the fonts used in the data stream are included at the end of the data stream.<P>
 The <CODE>gxFontGlyphsFlatten</CODE> flag instructs the <CODE>GXFlattenShape</CODE> function to attach a tag to the flattened shape containing a list of the specific glyphs used from each font referenced by the shape. A list of all of the glyph codes used by all of the fonts referenced in a data stream is then included at the end of that data stream.<P>
 For more information about the font and glyph list flags, see the chapter "Shape Objects" in <I><A HREF="../../GXObjects/GXObjects-2.html">Inside Macintosh: QuickDraw GX Objects</A></I>.<P>
 The font list and glyph list are combined to form a tag that is of type <CODE>gxFlatFontListItem</CODE> and designated <CODE>'flst</CODE>'. During printing, only the fonts and glyphs used in the stream are loaded to the printing device. <P>
 The <CODE>gxFlatFontList</CODE> structure includes the <CODE>gxFlatFontListItem</CODE> structure. The <CODE>gxFlatFontListItem</CODE> contains two arrays. The first is the array of font names. The second is the array of glyphs that are used. The array of glyphs is obtained by setting a bit in an array for each glyph that is used. If you ask only for the font names, the glyph array will be omitted. The glyphs array cannot be selected without the font array selected. In other words, you may specify either a list of fonts or specify a list of fonts and glyphs to be listed at the end of the data stream. <P>
 The fonts and glyphs included in the flattened list, <CODE>'flst</CODE>', are used in the print file for the QuickDraw GX portable digital document. For more information on the QuickDraw GX portable digital document see the section <A HREF=GXEnvironment-315.html#MARKER-9-86>"Portable Digital Documents" beginning on page 7-53</A>.<P>
 For more information on the QuickDraw GX print file, see the section <A HREF=GXEnvironment-313.html#MARKER-9-79>"About Print Files and Portable Digital Documents" beginning on page 7-51</A>. For more information about how to use the print file data, see the section <A HREF=GXEnvironment-319.html#MARKER-9-128>"Obtaining Data From a Print File" beginning on page 7-89</A>.<P>
 For more information on <CODE>the</CODE> <CODE>gxFlatFontName</CODE>, <CODE>gxFlatFontListItemTag</CODE>, and <CODE>gxFlatFontList</CODE> structures see the chapter "Fonts" in <I><A HREF="../../GXTypography/GXTypography-2.html">Inside Macintosh: QuickDraw GX Typography</A></I>.<A NAME=MARKER-2-62></A><P>
<A NAME=HEADING312-46></A>
<H3>New Shape Object Data</H3>
 A new shape object always follows the style, ink, transform, and any other objects that have been built for the shape object in the data stream. New shape data follows an operation opcode <CODE>gxNewObjectOpcode</CODE> constant and a data type opcode containing one of the constants in <CODE>the</CODE> <CODE>gxGraphicsNewOpcode</CODE> enumeration. Values 1 (<CODE>gxEmptyType</CODE>) through 13 (<CODE>gxPictureType</CODE>) are the constants from the <CODE>gxShapeTypes</CODE> enumeration. <P>
 This opcode creates a new shape object with all of the properties of the previous shape object in the data stream. If the current shape object is the first shape object in the stream, then it is created with default properties.<P>
 The values of the constants for all of the shape objects are summarized in <A HREF=GXEnvironment-311.html#MARKER-9-2>Table 7-3</A>. Shape types are described in the chapter "Shape Objects" in <I><A HREF="../../GXObjects/GXObjects-2.html">Inside Macintosh: QuickDraw GX Objects</A></I>.<P>
<A NAME=HEADING312-50></A>
<H4>Empty Shape Data</H4>
 The data type opcode with a value 1 is the <CODE>gxEmptyType</CODE> constant. Empty shapes store no information in their geometries. For the current shape object, the <CODE>gxEmptyType</CODE> means that the current shape is an empty shape. No data follows.<P>
 The <CODE>gxEmptyTypes</CODE> constant is described in the chapter "Geometric Shapes" in <I><A HREF="../GXGraphics/GXGraphics-2.html">Inside Macintosh: QuickDraw GX Graphics</A></I>.<P>
<A NAME=HEADING312-53></A>
<H4>Point Shape Data</H4>
 The data type opcode with a value 2 is the <CODE>gxPointType</CODE> constant. The data for the fields of a <CODE>gxPoint</CODE> structure follows. The data sequence is <CODE>x</CODE> (<CODE>Fixed</CODE>), <CODE>y</CODE> (<CODE>Fixed</CODE>).<P>
 Compression data: <CODE>gxNoCompression</CODE> - read 2 <CODE>longs</CODE> per point; <CODE>gxWordCompression</CODE> - read 2 shorts per point or treat each short as a signed integer (120 = 120.0 and -171 = -171.0); <CODE>gxByteCompression</CODE> - read 2 bytes per point and treat each byte as a signed integer (7 = 7.0 and -13 = -13.0).<P>
 The <CODE>gxPoint</CODE> structure is described in the chapter "Geometric Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-57></A>
<H4>Line Shape Data</H4>
 The data type opcode with a value 3 is the <CODE>gxLineType</CODE> constant. The data for the fields of the <CODE>gxLine</CODE> structure follows. The data sequence is <CODE>first.x,first.y</CODE> <CODE>last.x,last.y</CODE>.<P>
  Compression data: <CODE>gxNoCompression</CODE> - read 2 <CODE>longs</CODE> per point; <CODE>gxWordCompression</CODE> - read 2 shorts per point or treat each short as a signed integer (120 = 120.0 and -171 = -171.0); <CODE>gxByteCompression</CODE> - read 2 bytes per point and treat each byte as a signed integer (7 = 7.0 and -13 = -13.0).<P>
 The <CODE>gxLine</CODE> structure is described in the chapter "Geometric Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-61></A>
<H4>Curve Shape Data</H4>
 The data type opcode with a value 4 is the <CODE>gxCurveType</CODE> constant. The data for the fields of the <CODE>gx</CODE>Curve structure follows. The fields in the structure correspond to the parameters in the <CODE>GXNew</CODE>Curve function. The data sequence is <CODE>x</CODE> (first point), <CODE>y</CODE> (first point), <CODE>x</CODE> (control point), <CODE>y</CODE> (control point), <CODE>x</CODE> (last point), and <CODE>y</CODE> (last point).<P>
 Compression data: <CODE>gxNoCompression</CODE> - read 2 <CODE>longs</CODE> per point; <CODE>gxWordCompression</CODE> - read 2 shorts per point or treat each short as a signed integer (120 = 120.0 and -171 = -171.0); <CODE>gxByteCompression</CODE> - read 2 bytes per point and treat each byte as a signed integer (7 = 7.0 and -13 = -13.0).<P>
 The <CODE>gxCurve</CODE> structure is described in the chapter "Geometric Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-65></A>
<H4>Rectangle Shape Data</H4>
 The data type opcode with a value 5 is the <CODE>gxRectangleType</CODE> constant. The data for the fields of the <CODE>gxRectangle</CODE> structure follows. The data sequence is left, top, right, bottom. Typically, the first corner is left-top and the second corner is right-bottom; but this order is not required. They need only be opposite corners of a rectangle.<P>
 Compression data: <CODE>gxNoCompression</CODE> - read 2 <CODE>longs</CODE> per point; <CODE>gxWordCompression</CODE> - read 2 shorts per point or treat each short as a signed integer (120 = 120.0 and -171 = -171.0); <CODE>gxByteCompression</CODE> - read 2 bytes per point and treat each byte as a signed integer (7 = 7.0 and -13 = -13.0).<P>
 The <CODE>gxRectangle</CODE> structure is described in the chapter "Geometric Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-69></A>
<H4>Polygon Shape Data</H4>
 The data type opcode with a value 6 is the <CODE>gxPolygonType</CODE> constant. The data for the fields of the <CODE>gxPolygons</CODE> structure follows. The <CODE>gxPolygons</CODE> structure includes the <CODE>gxPolygon</CODE> structure. <P>
 The data sequence is <CODE>contours</CODE>, <CODE>vectors</CODE>, omit byte, <CODE>x</CODE> (first point), <CODE>y</CODE> (first point), <CODE>x</CODE> (second point), <CODE>y</CODE> (second point), <CODE>x</CODE> (third point), <CODE>y</CODE> (third point), and so on. The numbers are compressed as fixed-point numbers.<P>
 The point array for polygons and paths stream is stored as relative positions, not absolute positions ( as is the case for the point arrays in polygon and path shapes.)<P>
 The omit byte is interpreted by the <CODE>gxOmitPathMask</CODE> and <CODE>gxOmitPathShift</CODE> enumerations. <P>
 The first two entries of the omit byte describe the compression for the first two points of the polygon shape, which are absolute. The numbers are compressed as fixed-point numbers: <CODE>gxNoCompression</CODE> means 1 <CODE>long</CODE> for each fixed number; <CODE>gxWordCompression</CODE> means 1 <CODE>short</CODE> for each fixed number treated as an integer <BR>(17 = 17.0); <CODE>gxByteCompression</CODE> means 1 byte per fixed number. Thus a byte compressed value can represent an integer fixed point number from -128.0 to 127.0; a word compression value can represent any integer fixed-point number.<P>
 The second two entries in the omit byte describe the compression for the second through the last points in the contour. The coordinates of these points are relative to the first absolute points and appear in the stream as differences. The relative values are stored as differences. Thus each x value in the stream is subtracted from the prior value to reconstruct the original value. Conversely, each value in the shape is subtracted from the prior value to compute the delta to be written to the stream. The x and y coordinate values are considered separately. Each may be independently byte, word, or long compressed, using the same fixed-point compression as the absolute values. Each subsequent contour has its own omit byte to describe the absolute initial point values and the subsequent relative point values. <P>
 The compression bits in the data type opcode byte control the compression of the contour counts and all vector counts. Compression data: <CODE>gxNoCompression</CODE> - read 1 long for contour and each vector count; <CODE>gxWordCompression</CODE> - read 1 word for contour count and each vector count; <CODE>gxByteCompression</CODE> - read 1 byte for contour count and each vector count.<P>
 The <CODE>gxPolygons</CODE> structure is described in the chapter "Geometric Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-78></A>
<H4><A NAME=MARKER-9-63></A>Path Shape Data</H4>
 The data type opcode with a value 7 is the <CODE>gxPathType</CODE> constant. The data for the fields of the <CODE>gx</CODE>Paths structure follows. The <CODE>gxPaths</CODE> structure includes the <CODE>gxPath</CODE> structure. <P>
 The data sequence is <CODE>contours</CODE> (number of contours), <CODE>vectors</CODE> (number of points in the contour), control bytes, omit byte, <CODE>x</CODE> (absolute coordinate of first point), <CODE>y</CODE> (absolute coordinate of first point), <CODE>x</CODE> (relative coordinate of second point), <CODE>y</CODE> (relative coordinate of second point), <CODE>x</CODE> (relative coordinate of third point), <CODE>y</CODE> (relative coordinate of third point), and so on. <P>
 A control byte contains control bits for each point off or on the path. Each point is assigned a bit. Bits with value 1 are off the path; bits with value 0 are on the path. If the number of points exceeds 8, multiple control bytes are used. If the number of points is not an even multiple of 8, the final unused bits are ignored. <P>
 The omit byte is interpreted by the <CODE>gxOmitPathMask</CODE> and <CODE>gxOmitPathShift</CODE> enumerations. <P>
 The first two entries of the omit byte describe the compression for the first two points of the path shape, which are absolute coordinates. The numbers are compressed as fixed-point numbers: <CODE>gxNoCompression</CODE> means 1 <CODE>long</CODE> for each fixed number; <CODE>gxWordCompression</CODE> means 1 <CODE>short</CODE> for each fixed number treated as an integer <BR>(17 = 17.0); <CODE>gxByteCompression</CODE> means 1 byte per fixed number. Thus a byte compressed value can represent an integer fixed point number from -128.0 to 127.0; a word compression value can represent any integer fixed-point number.<P>
 The second two entries in the omit byte describe the compression for the second through the last relative points in the contour. The coordinates of these points are relative to the first absolute points and appear in the stream as differences. Thus each x value in the stream is subtracted from the prior value to reconstruct the original value. Conversely, each value in the shape is subtracted from the prior value to compute the delta to be written to the stream. The x and y coordinate values are considered separately. Each may be independently byte, word, or long compressed, using the same fixed-point compression as the absolute values. Each subsequent contour has its own omit byte to describe the absolute initial point values and the subsequent relative point values.<P>
 The compression bits in the data type opcode byte control the compression of the contour counts and all vector counts. Compression data: <CODE>gxNoCompression</CODE> - read 1 long for contour and each vector count; <CODE>gxWordCompression</CODE> - read 1 word for contour count and each vector count; <CODE>gxByteCompression</CODE> - read 1 byte for contour count and each vector count.<P>
 The <CODE>gxPaths</CODE> structure is described in the chapter "Geometric Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-87></A>
<H4><A NAME=MARKER-9-64></A>Bitmap Shape Data</H4>
 The data type opcode with a value 8 is the <CODE>gxBitmapType</CODE> constant. The data for the fields of the <CODE>gxBitmap</CODE> and <CODE>gxPoint</CODE> structures follow. The <CODE>gxBitmap</CODE> structure includes the <CODE>gxColorSpace</CODE> enumeration and the references to the <CODE>gxColorSet</CODE> and <CODE>gxColorProfile</CODE> structures.<P>
 The data sequence is omit byte 1, <CODE>image</CODE> reference, <CODE>width</CODE>, <CODE>height</CODE>, <CODE>rowBytes</CODE>, omit byte 2, <CODE>pixelSize</CODE>, <CODE>space</CODE> (color space), <CODE>set</CODE> (color set), <CODE>profile</CODE> (color profile), omit byte 3, <CODE>x</CODE> (position), <CODE>y</CODE> (position). <P>
 Omit byte 1 is interpreted by the <CODE>gxOmitBitmapMask1</CODE> and <CODE>gxOmitBitmapShift1</CODE> enumerations. Omit byte 2 is interpreted by the <CODE>gxOmitBitmapMask2</CODE> and <CODE>gxOmitBitmapShift2</CODE> enumerations. Omit byte 3 is interpreted by the <CODE>gxOmitBitmapMask3</CODE> and <CODE>gxOmitBitmapShift3</CODE> enumerations. <P>
 Data compression: The value may be a byte, word, or long. The value references a previous bit image: a value of 1 references the first bit image, a value of 2 references the second bit image, etc. A value of 0 indicates that the bitmap references a bit image through a file alias. The bitmap shape must reference a tag containing the file alias and offset as described in the chapter "Tag Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I> All bitmap values are compressed as integers (see polygon coutour compression above) except for the x and y coordinate positions. These are compressed as <CODE>Fixed</CODE> (see polygon first absolute position). Unlike prior shape types in this section, bitmaps and shape types described below can also have fields with the <CODE>gxOmitCompression</CODE> bits set. In this case, the value 0 or <CODE>nil</CODE> is used wherever the omit compression bits are set.<P>
 The <CODE>gxBitmap</CODE> structure is described in the chapter "Bitmap Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-93></A>
<H4><A NAME=MARKER-9-65></A>Text Shape Data</H4>
 The data type opcode with a value 9 is the <CODE>gxTextType</CODE> constant. The data that follows corresponds to the parameters of the <CODE>GXNewText</CODE> function. <P>
 The data sequence is omit byte, byte length (of text), <CODE>x</CODE> (position), <CODE>y</CODE> (position), <CODE>charCount</CODE> (number of characters), data (character text). <P>
 The data is the character stream or glyph indexes for the text. For nonRoman scripts, the actual byte length may be more than the number of characters.<P>
 The omit byte is interpreted by the <CODE>gxOmitTextDataMask</CODE> and <CODE>gxOmitTextDataShift</CODE> enumerations. <P>
 Data compression: The byte length is compressed as a long. The x and y coordinates are compressed as a fixed number. The data stream may contain bytes or shorts. If the stream contains shorts and all values are less than 255, then the stream may be compressed. It is an error to specify a character count of zero (omit compression) and to set the text data omit bit.<P>
 The <CODE>GXNewText</CODE> function is described in the chapter "Text Shapes" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-100></A>
<H4><A NAME=MARKER-9-66></A>Glyph Shape Data</H4>
 The data type opcode with a value 10 is the <CODE>gxGlyphType</CODE> constant. The data correspond to the parameters in the <CODE>GXNewGlyphs</CODE> function and include the <CODE>gxPoint</CODE> and <CODE>gxStyle</CODE> structures.<P>
 The data sequence is omit byte 1, <CODE>charCount</CODE> (number of characters), byte length (of text), <CODE>runNumber</CODE> (number of runs), data <CODE>(</CODE>glyph character), omit byte 2, <CODE>positions</CODE>, <CODE>advance</CODE>, <CODE>tangents</CODE>, <CODE>styleRuns</CODE>, <CODE>glyphStyles</CODE>. <P>
 Omit byte 1 is interpreted by the <CODE>gxOmitGlyphDataMask1</CODE> and <CODE>gxOmitGlyphDataShift1</CODE> enumerations. Omit byte 2 is interpreted by the <CODE>gxOmitGlyphDataMask2</CODE> and <CODE>gxOmitGlyphDataShift2</CODE> enumerations. <P>
 Data compression: <CODE>charCount</CODE>, byte length, and <CODE>runNumber</CODE> are compressed as longs. If <CODE>charCount</CODE> is 0, the data, positions, advance, and tangents are not read. If the <CODE>gxOmitGlyphOnePosition</CODE> bit is set in the first byte, then the glyph shape contains 1 absolute position or as many positions as there are in the stream. In either case, all are compressed as fixed point values, as bytes, words, or longs. Unlike polygon positions, the x and y values do not have separate compression bits, nor are the positions stored in the relative manner of polygons or paths. <P>
 The advances in the glyph shape are read after the positions, if the <CODE>gxOmitGlyphAdvance</CODE> bits are not <CODE>gxOmitCompression</CODE> constant. The character count determines the number of bytes read, as is the case with the control bits in a path shape. <P>
 If the <CODE>gxOmitGlyphTangent</CODE> bits in the second omit byte are not equal to the <CODE>gxOmitCompression</CODE> constant, the <CODE>tangents</CODE> parameter follows. The tangent values are stored and compressed identically to the positions. If the number of runs (<CODE>runNumber</CODE>) is greater than zero, then 1 bit in the second omit byte interprets the runs as shorts or shorts compressed to bytes (like the text character compression). If <CODE>runNumber</CODE> is greater than 0, then the style array is compressed into an array of bytes, words, or longs. The values are references to previous styles in the stream: a value of 1 references the 1st style in the stream, and so on.<P>
 The <CODE>GXNewGlyphs</CODE> function is described in the chapter "Glyph Shapes" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-108></A>
<H4><A NAME=MARKER-9-67></A>Layout Shape Data</H4>
 The data type opcode with a value 11 is the <CODE>gxGlyphType</CODE> constant. The data correspond to the parameters in the <CODE>GXNew</CODE>Layout function. <P>
 Layouts are compressed in a way that is similar to glyphs. Like all types that are greater than or equal to <CODE>bitmap</CODE> type, all fields default to zero and omit compression is allowed. If the length is greater than 0, the data is read as shorts compressed as bytes or as an uncompressed stream (like text and glyphs). If the style run number is greater than 0, the style run array and style array are present identically to the glyph format. If the <CODE>omitLayoutHasBaseline</CODE> bit is set in omit byte 3, uncompressed data is read the size of the <CODE>gxLineBaselineRecord</CODE>. If the level run number is greater than zero, the 4th omit byte (read regardless) specifies the compression of the <CODE>levelRunLength</CODE> and level arrays as an optionally compressed array of shorts. <P>
 The data sequence is omit byte 1, <CODE>length</CODE>, <CODE>x</CODE> (position), <CODE>y</CODE> (position), data<CODE>,</CODE> omit byte 2, <CODE>width</CODE>, <CODE>flush</CODE>, <CODE>set</CODE>, <CODE>just</CODE>, <CODE>options</CODE>, omit byte 3, <CODE>style</CODE>, run number, level run number, <CODE>hasBaseline</CODE>, style runs, styles, omit byte 4, level runs, levels. <P>
 Omit byte 1 is interpreted by the <CODE>gxOmitLayoutMask1</CODE> and <CODE>gxOmitLayoutShift1</CODE> enumerations. Omit byte 2 is interpreted by the <CODE>gxOmitLayoutMask2</CODE> and <CODE>gxOmitLayoutShift2</CODE> enumerations. Omit byte 3 is interpreted by the <CODE>gxOmitLayoutMask3</CODE> and <CODE>gxOmitLayoutShift3</CODE> enumerations. Omit byte 4 is interpreted by the <CODE>gxOmitLayoutMask4</CODE> and <CODE>gxOmitLayoutShift4</CODE> enumerations.<P>
 The <CODE>GXNewLayout</CODE> function is described in the chapter "Layout Shapes" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-114></A>
<H4>Full Shape Data</H4>
 The data type opcode with a value 12 is the <CODE>gxFullType</CODE> constant. Full shapes store no information in their geometries. For the current shape object, the <CODE>gxFullType</CODE> constant is a parameter in the <CODE>GXNewShape</CODE> function. No data follows. <P>
 The <CODE>gxFullType</CODE> constant is described in the chapter "Geometric Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-117></A>
<H4><A NAME=MARKER-9-68></A>Picture Shape Data</H4>
 The data type opcode with a value 13 is the <CODE>gxPictureType</CODE> constant. The data corresponds to the parameters in the <CODE>GXNewPicture</CODE> function. The data sequence is omit byte 1, the number of items (compressed as long as specified by the data type opcode), followed by an array of shapes and optional arrays of styles, inks, and transforms. The shape array must exist and may not contain nil (zero) references. The styles, inks and transform array references may be omitted entirely.<P>
 The <CODE>gxPicture</CODE> structure is described in the chapter "Picture Shapes" in <I><A HREF="../GXGraphics/GXGraphics-2.html">Inside Macintosh: QuickDraw GX Graphics</A></I>.<P>
<A NAME=HEADING312-120></A>
<H3>Modified Shape Object Data</H3>
 Once a shape object is defined, it can be modified. Modified shape data follow a <CODE>gxSetDataOpcode</CODE> operation opcode and a data type opcode containing one of the constants from the <CODE>gxShapeDataOpcode</CODE> enumeration. <A HREF=GXEnvironment-311.html#MARKER-9-24>Table 7-4</A> summarizes the values of the constants for all of the modified shape objects.<P>
<A NAME=HEADING312-122></A>
<H4>Attributes Data</H4>
 An attribute is added to the current shape object if the data type opcode has value 0. This is the <CODE>gxShapeAttributesOpcode</CODE> constant. <P>
 The data for the fields of the <CODE>gxShapeAttributes</CODE> structure follow and are compressed as long. That data may be 1, 2, or 4 bytes depending on the compression bits.<P>
 The <CODE>gxShapeAttributes</CODE> enumeration is described in the chapter "Shape Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-126></A>
<H4>Tag Data</H4>
 A tag is added to the current shape if the data type opcode has value 1. This is the <CODE>gxShapeTagOpcode</CODE> constant. The data for the parameters of the <CODE>GXSetShapeTags</CODE> function follows.<P>
 The size of the opcode specifies the number of tags; the compression specifies whether the data is in bytes, words, or longs. For instance, if the size is 4 and the compression is <CODE>gxShortCompression</CODE> (2 bytes), then the stream contains 4/2 == 2 tags. The equivalent operation would be <CODE>GXSetShapeTags</CODE> (shape, nil, 1, 0, 2, tag array).<P>
 The <CODE>GXSetShapeTags</CODE> function is described in the chapter "Shape Objects" of <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-130></A>
<H4>Fill Data</H4>
 A <B>shape fill,</B> compressed as long, is added to the current shape if the data type opcode has value 2. This is the <CODE>gxShapeFillOpcode</CODE>. A constant from the <CODE>gxShapeFill</CODE> enumeration follows.<P>
 The <CODE>gxShapeFills</CODE> enumeration is described in the chapter "Shape Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-133></A>
<H3>New Style Object Data</H3>
 Data for a new style object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 28. This is the <CODE>gxStyleTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 This opcode creates a new style object with all of the properties of the previous style object in the data stream. If the current style object is the first style object in the stream, then it is created with default properties. No data follows for the new style object.<P>
 The style object is described in the chapter "Style Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-137></A>
<H3>Modified Style Object Data</H3>
 Once a style object is defined, it can be modified by the addition of style data. Modified style data follows a <CODE>gxSetDataOpcode</CODE> operation opcode and a data type opcode containing one of the constants from the <CODE>gxStyleDataOpcode</CODE> enumeration. <A HREF=GXEnvironment-311.html#MARKER-9-25>Table 7-5</A> summarizes the values of the constants for all of the modified style objects. For all style data, the opcodes described in the following subsections change the default style.<P>
<A NAME=HEADING312-139></A>
<H4>Attributes Data</H4>
 An attribute is added to the current style object if the data type opcode has value 0. This is the <CODE>gxStyleAttributesOpcode</CODE> constant. <P>
 The data, compressed as long, for the fields of the <CODE>gxStyleAttribute</CODE> structure follow and may be byte, short, or long.<P>
 The <CODE>gxStyleAttribute</CODE>s enumeration is described in the chapter "Geometric Styles" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-143></A>
<H4>Tag Data</H4>
 A tag is added to the current style if the data type opcode has value 1. This is the <CODE>gxStyleTagOpcode</CODE> constant. The data for the parameters of the <CODE>GXSetStyleTags</CODE> function follows.<P>
 The size of the opcode specifies the number of tags; the compression specifies whether the data is in bytes, words, or longs. For instance, if the size is 4 and the compression is <CODE>gxShortCompression</CODE> (2 bytes), then the stream contains 4/2 == 2 tags. The equivalent operation would be <CODE>GXSetShapeTags</CODE> (shape, nil, 1, 0, 2, tag array);<P>
 The <CODE>GXSetStyleTags</CODE> function is described in the chapter "Style Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-147></A>
<H4>Curve Error Data</H4>
 A curve error, compressed as fixed-point, is added to the current style if the data type opcode has value 2. This is the <CODE>gxStyleCurveErrorOpcode</CODE> constant. The data for the <CODE>error</CODE> (<CODE>Fixed</CODE>) parameter of the <CODE>GXSetStyleCurveError</CODE> function follows. <P>
 For fixed point compression <CODE>gxNoCompression</CODE> means 1 <CODE>long</CODE> for each fixed number; <CODE>gxWordCompression</CODE> means 1 <CODE>short</CODE> for each fixed number treated as an integer <BR>(17 = 17.0); <CODE>gxByteCompression</CODE> means 1 byte per fixed number. Thus a byte compressed value can represent an integer fixed point number from -128.0 to 127.0; a word compression value can represent any integer fixed-point number.<P>
 The <CODE>GXSetStyleCurveError</CODE> function is described in the chapter "Geometric Styles" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-151></A>
<H4>Pen Data</H4>
 A pen, compressed as fixed point, is added to the current style object if the data type opcode has value 3. This is the <CODE>gxStylePenOpcode</CODE> constant. The data for the <CODE>pen</CODE> (<CODE>Fixed</CODE>) parameter of the <CODE>GXSetStylePen</CODE> function follows.<P>
 For fixed-point compression <CODE>gxNoCompression</CODE> means 1 <CODE>long</CODE> for each fixed number; <CODE>gxWordCompression</CODE> means 1 <CODE>short</CODE> for each fixed number treated as an integer <BR>(17 = 17.0); <CODE>gxByteCompression</CODE> means 1 byte per fixed number. Thus a byte compressed value can represent an integer fixed point number from -128.0 to 127.0; a word compression value can represent any integer fixed-point number.<P>
 The <CODE>GXSetStylePen</CODE> function is described in the chapter "Geometric Styles" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-155></A>
<H4><A NAME=MARKER-9-69></A>Join Data</H4>
 A join is added to the current style object if the data type opcode has value 4. This is the <CODE>gxStyleJoinOpcode</CODE>. The data for the fields of the <CODE>gxJoinRecord</CODE> structure follows. The <CODE>gxJoinRecord</CODE> structure includes the <CODE>gxShape</CODE> and <CODE>gxJoinAttribute</CODE> structures. <P>
 The data sequence is omit byte, <CODE>attributes</CODE> (modifier flags) compressed as long, <CODE>join</CODE> (corner shape) compressed as long (reference), <CODE>miter</CODE> (size limit) compressed as fixed point.<P>
 The omit byte is interpreted by the <CODE>gxOmitJoinMask</CODE> and <CODE>gxOmitJoinShift</CODE> enumerations. <P>
 The <CODE>gxJoinAttribute</CODE> structure is described in the chapter "Geometric Styles" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-160></A>
<H4><A NAME=MARKER-9-70></A>Dash Data</H4>
 A dash is added to the current style object if the data type opcode has value 5. This is the <CODE>gxStyleDashOpcode</CODE> constant. The data for the fields of the <CODE>gxDashRecord</CODE> structure follows. The <CODE>gxShape</CODE> and <CODE>gxDashAttribute</CODE> enumerations are included in the <CODE>gxDashRecord</CODE> structure. <P>
 The data sequence is omit byte 1, <CODE>attributes</CODE> (modifier flags) compressed as long, <CODE>dash</CODE> (shape used for dash) compressed as long (reference), <CODE>advance</CODE> (distance between dashes) compressed as long, <CODE>phase</CODE> (start offset) compressed as fract, omit byte 2, and <CODE>scale</CODE> (height of dash) compressed as fixed<CODE>.</CODE><P>
 In fract compression a long means a full fract; a word means that 16 bits are read followed by 16 bits of zeros; a byte means that 8 bits are read followed by 24 bits of zeros. Thus numbers like 1.0, -1.0, or fract 0.5 fit into a compressed byte.<P>
 Omit byte 1 is interpreted by the <CODE>gxOmitDashMask1</CODE> and <CODE>gxOmitDashShift1</CODE> enumerations. Omit byte 2 is interpreted by the <CODE>gxOmitDashMask2</CODE> and <CODE>gxOmitDashShift2</CODE> enumerations.<P>
 The <CODE>gxDashRecord</CODE> structure is described in the chapter "Geometric Styles" of <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-166></A>
<H4><A NAME=MARKER-9-71></A>Caps Data</H4>
 A cap is added to the current style object if the data type opcode has value 6. This is the <CODE>gxStyleCapsOpcode</CODE>. The data for the fields of the <CODE>gxCapRecord</CODE> structure follows. The <CODE>gxShape</CODE> and <CODE>gxCapAttribute</CODE> enumerations are included in the <CODE>gxCapRecord</CODE> structure.<P>
 The data sequence is omit byte, <CODE>attributes</CODE> (modifier flags) compressed as long, <CODE>startCap</CODE> (shape used at start of contours) compressed as long (reference), <CODE>endCap</CODE> (shape used at end of contours) compressed as long (reference)<CODE>.</CODE><P>
 The omit byte is interpreted by the <CODE>gxOmitCapMask</CODE> and <CODE>gxOmitCapShift</CODE> enumerations. <P>
 The <CODE>gxCapRecord</CODE> structure is described in the chapter "Geometric Styles" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-171></A>
<H4><A NAME=MARKER-9-72></A>Pattern Data</H4>
 A pattern is added to the current style object if the data type opcode has value 7. This is the <CODE>gxStylePatternOpcode</CODE> constant. The data for the fields of the <CODE>gxPatternRecord</CODE> structure follows. The <CODE>gxShape</CODE>, <CODE>gxPatternAttribute</CODE>, and <CODE>gxPoint</CODE> enumerations are included in the <CODE>gxPatternRecord</CODE> structure. <P>
 The data sequence is omit byte 1, <CODE>attributes</CODE> (modifier flags) compressed as long, <CODE>pattern</CODE> (shape to use as pattern) compressed as long (reference), <CODE>x</CODE> (x-coordinate of vector <CODE>u</CODE> for pattern grid) compressed as fixed, <CODE>y</CODE> (y-coordinate of vector <CODE>u</CODE> for pattern grid) compressed as fixed, omit byte 2, <CODE>x</CODE> (x coordinate of vector <CODE>v</CODE> for pattern grid) compressed as fixed, and <CODE>y</CODE> (y-coordinate of vector <CODE>v</CODE> for pattern grid) compressed as fixed. Note that for all of these, omit (zero) values are permitted.<P>
 Omit byte 1 is interpreted by the <CODE>gxOmitPatternMask1</CODE> and <CODE>gxOmitPatternShift1</CODE> enumerations. Omit byte 2 is interpreted by the <CODE>gxOmitPatternMask2</CODE> and <CODE>gxOmitPatternShift2</CODE> enumerations. <P>
 The <CODE>gxPatternRecord</CODE> structure is described in the chapter "Geometric Styles" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
<A NAME=HEADING312-176></A>
<H4>Text Attributes Data</H4>
 A text attribute compressed as long is added to the current style object if the data type opcode has value 8. This is the <CODE>gxStyleTextAttributesOpcode</CODE> constant. The data may be byte, word, or long.<P>
 The <CODE>gxTextAttribute</CODE> enumeration is described in the chapter "Typographic Styles" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-179></A>
<H4>Text Size Data</H4>
 The text size, compressed as long, for the current style object is specified if the data type opcode has value 9. This is the <CODE>gxStyleTextSizeOpcode</CODE> constant. The data for the <CODE>size</CODE> (fixed point size of text) parameter of the <CODE>GXSetStyleTextSize</CODE> function follows.<P>
 The <CODE>GXSetStyleTextSize</CODE> function is described in the chapter "Typographic Styles" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-182></A>
<H4>Font Data</H4>
 A font is added to the current style object if the data type opcode has value 10. This is the <CODE>gxStyleFontOpcode</CODE> constant. The attribute data for the <CODE>GXSetStyleFont</CODE> function follows. It is compressed as long (reference ); the reference is to a font name defined earlier in the stream<P>
 The <CODE>GXSetStyleFont</CODE> function is described in the chapter "Typographic Styles" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-185></A>
<H4><A NAME=MARKER-9-73></A>Text Face Data</H4>
 A text face is added to the current style object if the data type opcode has value 11. This is the <CODE>gxStyleTextFaceOpcode</CODE> constant. The data for the fields of the <CODE>gxTextFace</CODE> structure follows.<P>
 The data sequence is omit byte, <CODE>faceLayers</CODE> compressed as long, mapping size and <CODE>advanceMapping.</CODE><P>
 The <CODE>advanceMapping</CODE> in text face and transform mapping is reordered so that common mappings can be stored in fewer bytes. The omit byte and number of layers is followed by an optional byte (whose compression is described by <CODE>omitFaceMapping). </CODE><P>
 The value of the byte may be one of the following:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Byte <TH>Value<TR>
<TD>2<TD>Mapping contains identity plus elements h and k.<TR>
<TD>4<TD>Same as byte 2, plus elements a and d.<TR>
<TD>6<TD>Same as byte 4, plus elements b and c.<TR>
<TD>9<TD>Same as byte 6 plus elements u, v, and w.</TABLE>
<P>
 The meaning of the elements mentioned in the previous table are shown in <A HREF=#MARKER-9-74>Figure 7-10</A>.<P>
<B>Figure 7-10  <A NAME=MARKER-9-74></A>Mapping matrix elements</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/EU-L-59.jpg"><p>
 The byte value is multiplied by the compression level to specify the length of the mapping data that follows. Byte compression multiplies by 1; word compression multiplies by 2; long compression multiplies by 4. The values in the left and middle columns are compressed as fixed values. The values in the right column are compressed as fract values. All elements whether the stream contains 2, 4, 6, or 9 numbers, have the same level of compression.<P>
 If the <CODE>faceLayers</CODE> value is greater than 0, then following the mapping data is an omit byte as described by <CODE>gxOmitFaceLayer</CODE> Mask 1. The omit byte is followed by the <CODE>outlineFill</CODE> compressed as a long, the flags comrpessed as a long, the <CODE>outlineStyle</CODE> and reference compressed as a long, and the <CODE>outlineTransform</CODE>, also comrpessed as a long. The second omit byte describes the bold x and bold y, compressed as fixed values. This sequence is repeated for the second and all remaining layers.<P>
 The omit byte is interpreted by the <CODE>gxOmitFaceMask</CODE> and <CODE>gxOmitFaceShift</CODE> enumerations. <P>
 The <CODE>gxTextFace</CODE> structure is described in the chapter "Typographic Styles" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-197></A>
<H4>Platform Data</H4>
 The platform, script, and language is defined for the current object if the data type opcode has value 12. This is the <CODE>gxStylePlatformOpcode</CODE> constant. Data from the <CODE>gxFontPlatform</CODE>, <CODE>gxFontScript</CODE>, and <CODE>gxFontLanguage</CODE> enumerations follow. <P>
 The platform, script, and language are combined into a long and then that value is compressed as a long that is equal to<P>
<PRE>
(platform &lt;&lt; 16) | (script &lt;&lt; 8) | language
</PRE>
 The <CODE>gxFontPlatform</CODE>, <CODE>gxFontScript</CODE>, and <CODE>gxFontLanguage</CODE> enumerations are described in the chapter "Font Objects" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-202></A>
<H4>Font Variations Data</H4>
 Font variations are added to the current style object if the data type opcode has value 13. The data is uncompressed. This is the <CODE>gxStyleFontVariationsOpcode</CODE> constant. The data for the fields of the <CODE>gxFontVariation</CODE> structure follows. The <CODE>gxFontVariationTag</CODE> structure is included in the <CODE>gxFontVariations</CODE> structure.<P>
 The data sequence is an array <CODE>[name</CODE> (variation tag), <CODE>value</CODE> (<CODE>Fixed</CODE>)<CODE>].</CODE>The opcode size specifies the number of variations in the stream.<P>
 The <CODE>gxFontVariation</CODE> structure is described in the chapter "Fonts" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-206></A>
<H4>Run Controls Data</H4>
 Run controls are added to the current style object if the data type opcode has value 14. The data is uncompressed. This is the <CODE>gxStyleRunControlsOpcode</CODE> constant. The data for the fields of the <CODE>gxRunControls</CODE> structure follows. The opcode size specifies the size in bytes of the run control stream.<P>
 The <CODE>gxRunControls</CODE> structure is described in the chapter "Layout Line Controls" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-209></A>
<H4>Run Priority Justification Override Data</H4>
 A run priority justification override is added to the current style object if <BR>the data type opcode has value 15. The data is uncompressed. This is the <CODE>gxStyleRunPriorityJustOverrideOpcode</CODE> constant. The data for the fields <BR>of the <CODE>gxPriorityJustificationOverride</CODE> structure follows. The opcode size specifies the size in bytes of the run control stream.<P>
 The data sequence is an array of delta. The opcode specifies the byte size.<P>
 The <CODE>gxPriorityJustificationOverride</CODE> structure is described in the chapter "Layout Line Controls" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-213></A>
<H4>Run Glyph Justification Overrides Data</H4>
 A run glyph justification override is added to the current style object if the <BR>data type opcode has value 16. The data is uncompressed. This is the <CODE>gxStyleRunGlyphJustOverrideOpcode</CODE> constant. The data for the fields <BR>of the <CODE>gxGlyphJustificationOverride</CODE> structure follows. The <CODE>gxGlyphJustificationOverride</CODE> structure includes the <CODE>gxGlyphcode</CODE> <BR>and <CODE>gxWidthDeltaRecord</CODE> enumerations. The opcode specifies the byte size.<P>
 The data sequence is <CODE>count</CODE>, <CODE>glyphJustificationOverrides.</CODE><P>
 The <CODE>gxGlyphJustificationOverride</CODE> structure is described in the chapter "Layout Line Controls" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-217></A>
<H4>Run Glyph Substitutions Data</H4>
 A run glyph substitution is added to the current style object if the data type <BR>opcode has value 17. The data is uncompressed. This is the <CODE>gxStyleRunGlyphSubstitutionsOpcode</CODE> constant. The data for the fields <BR>of the <CODE>gxGlyphSubstitution</CODE> structure follows.<P>
 The data sequence is <CODE>count</CODE>, <CODE>glyphsubstitutions[].</CODE><P>
 The <CODE>GXSetStyleRunGlyphSubstitutions</CODE> structure is described in the chapter "Layout Line Controls" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-221></A>
<H4>Run Features Data</H4>
 A run feature is added to the current style object if the data type opcode has value 18. The data is uncompressed. This is the <CODE>gxStyleRunFeaturesOpcode</CODE> constant. The data for the fields of the <CODE>gxRunFeature</CODE> structure follows.<P>
 The data sequence is <CODE>count</CODE>, <CODE>runFeatures[].</CODE><P>
 The <CODE>gxRunFeature</CODE> structure is described in the chapter "Layout Line Controls" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-225></A>
<H4>Run Kerning Adjustments Data</H4>
 Run kerning adjustment is added to the current style object if the data type opcode has value 19. The data is uncompressed. This is the <CODE>gxStyleRunKerningAdjustmentsOpcode</CODE> constant. The data for the fields of the <CODE>gxKerningAdjustment</CODE> structure follows.<P>
 The data sequence is <CODE>count</CODE>, <CODE>kerningAdjustments[].</CODE><P>
 The <CODE>gxKerningAdjustment</CODE> structure is described in the chapter "Layout Line Controls" in <I><A HREF="../../GXTypography/GXTypography-2.html">Inside Macintosh: QuickDraw GX Typography</A></I>.<P>
<A NAME=HEADING312-229></A>
<H4>Style Justification Data</H4>
 Style justification is added to the current style object if the data type opcode has <BR>value 20. The data is compressed as fract. This is the <CODE>gxStyleJustificationOpcode</CODE> constant. The data for the justify parameter of the <CODE>GXSetStyleJustification</CODE> function follows.<P>
 In fract compression a long means a full fract; a word means that 16 bits are read followed by 16 bits of zeros; a byte means that 8 bits are read followed by 24 bits of zeros. Thus numbers like 1.0, -1.0, or fract 0.5 fit into a compressed byte.<P>
 The <CODE>GXSetStyleJustification</CODE> function is described in the chapter "Typographic Styles" in <I>Inside Macintosh: QuickDraw GX Typography.</I><P>
<A NAME=HEADING312-233></A>
<H3>New Ink Object Data</H3>
 Data for a new ink object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 29. This is the <CODE>gxInkTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 This opcode creates a new ink object with all of the properties of the previous ink object in the data stream. If the current ink object is the first ink object in the stream, then it is created with default properties. No data follows for the new ink object.<P>
 The ink object is described in the chapter "Ink Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-237></A>
<H3>Modified Ink Object Data</H3>
 Once an ink object is defined, it can be modified by the addition of ink data. Modified style data follows a <CODE>gxSetDataOpcode</CODE> operation opcode and a data type opcode containing one of the constants from the <CODE>gxInkDataOpcode</CODE> enumeration. <A HREF=GXEnvironment-311.html#MARKER-9-18>Table 7-6</A> summarizes the values of the constants for all of the modified ink objects.<P>
<A NAME=HEADING312-239></A>
<H4>Attributes Data</H4>
 An attribute, compressed as long, is added to the current ink object if the data type opcode has value 0. This is the <CODE>gxInkAttributes</CODE>Opcode constant. <P>
 The data for the fields of the <CODE>gxInkAttributes</CODE> structure follow. The next two bytes contain the ink attribute flags.<P>
 The <CODE>gxInkAttributes</CODE> enumeration is described in the chapter "Ink Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-243></A>
<H4>Tag Data</H4>
 A tag is added to the current ink object if the data type opcode has value 1. This is the <CODE>gxInkTagOpcode</CODE> constant. The data for the parameters of the <CODE>GXSetInkTags</CODE> function follows.<P>
 The size of the opcode specifies the number of tags; the compression specifies whether the data is in bytes, words, or longs. For instance, if the size is 4 and the compression is <CODE>gxShortCompression</CODE> (2 bytes), then the stream contains 4/2 == 2 tags. The equivalent operation would be <CODE>GXSetShapeTags</CODE> (shape, nil, 1, 0, 2, tag array).<P>
 The sequence is <CODE>tagType</CODE>, <CODE>index</CODE>, <CODE>oldCount</CODE>, <CODE>newCount</CODE>, <CODE>items</CODE>.<P>
 The <CODE>GXSetInkTags</CODE> function is described in the chapter "Ink Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-248></A>
<H4><A NAME=MARKER-9-75></A>Color Data</H4>
 A color is added to the current ink object if the data type opcode has value 2. This is the <CODE>gxInkColorOpcode</CODE> constant. The data for the fields of the <CODE>gxInkAttribute</CODE>s structure follow. The data for the fields of the <CODE>gxColor</CODE> structure follows.<P>
 The data sequence is omit byte, <CODE>space</CODE> (long)<CODE>,</CODE> <CODE>profile</CODE> (long). The value of the omit byte may be omit compression.<P>
 The omit byte is interpreted by the <CODE>gxOmitColorsMask</CODE> and <CODE>gxOmitColorsShift</CODE> enumerations.<P>
 If space is indexed space, <CODE>gxOmitColoursIndex</CODE> is used to determine index compression (compressed as long), which is read first, followed by color set (compressed as long), with the compression determined by <CODE>gxOmitColorsIndexSet</CODE>. <P>
 If space is not indexed space, the color space determines the number of elements read from the stream as shown in <A HREF=#MARKER-9-17>Table 7-12</A>. 
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-17></A><B>Table 7-12 Color space and words read</B></CAPTION>
<TD>16-bit<TD>1<TR>
<TD>32-bit<TD>2<TR>
<TD>gray, index<TD>1<TR>
<TD>gray alpha<TD>2<TR>
<TD>RGB, HSV, HLS, YXY, XYZ, LUV, LAB, YIQ<TD>3<TR>
<TD>RGBA, CYMK<TD>4</TABLE>
<P>
 The bits in the omit byte determine whether a word is read from the stream for each word in the component or whether the byte is repeated twice for each word. For example, if the byte contains 0x3A, the word contains 0X3A3A. The <CODE>gxOmitColorsComponentsMask</CODE> sets 1 bit for up to 4 components.<P>
 The <CODE>gxColor</CODE> enumeration is described in the chapter "Ink Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-256></A>
<H4><A NAME=MARKER-9-76></A>Transfer Mode Data</H4>
 A transfer mode is added to the current ink object if the data type opcode has value 3. This is the <CODE>gxInkTransferModeOpcode</CODE> constant. The data for the fields of the <CODE>gxTransferMode</CODE> structure follow.<P>
 The data sequence is omit byte 1, <CODE>space</CODE>, compressed as long, <CODE>set</CODE>, compresssed as long<CODE>,profile</CODE>, compressed as long; omits are allowed. Omit byte 2 follows and then <CODE>sourceMatrix</CODE>, <CODE>deviceMatrix,</CODE> <CODE>resultMatrix</CODE>, <CODE>flags</CODE>, and <CODE>component</CODE>; omits are allowed.<P>
 The <CODE>sourceMatrix</CODE>, <CODE>deviceMatrix,</CODE> and <CODE>resultMatrix</CODE> are compressed as arrays of Fixed values. The color space determines the number of transfer components that follow, as shown in <A HREF=#MARKER-9-17>Table 7-12</A>.<P>
 Each transfer component is preceded by an omit byte (<CODE>gxomitTransferComponentMask1</CODE>) that describes the first 4 fields of the structure. Omit byte one is followed by <CODE>gxOmitTransferComponentModeMask,</CODE> compressed as byte, <CODE>gxOmitTransferComponentFlagsMask</CODE>, compressed as byte,<CODE> gxOmitTransferComponentSourceMinimumShift</CODE>, compressed as color,<CODE> gxOmitTransferComponentSourceMaximumMask</CODE>, compressed as color, and <CODE>gxOmitTransferComponentDeviceMinimumMask</CODE>, compressed as color. Omit byte 2 follows which describes <CODE>gxOmitTransferComponentDeviceMaximumMask, gxOmitTransferComponentClampMinimumMask,gxOmitTransferComponentClampMaximumMask,</CODE>and <CODE>gxOmitTransferComponentOperandMask;</CODE>all these are compressed as color. The color compression specifies that the field may be omitted (inherits value from default), or is represented by a repeated byte (for example, <CODE>0X7A ==0X7A7A</CODE>), or is represented as a word.<P>
 Note that the mode and flags in the first omit byte have a single bit<P>
 The <CODE>gxTransferMode</CODE> structure is described in the chapter "Ink Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-263></A>
<H3>New Object Transform Data</H3>
 Data for a new transform object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 0x2A. This is the <CODE>gxTransformTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 This opcode creates a new transform object with all of the properties of the previous transform object in the data stream. If the current transform object is the first transform object in the stream, then it is created with default properties. No data follows for the new transform object.<P>
 The transform object is described in the chapter "Transform Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I> For additional information about transform mapping, see <A HREF=#MARKER-9-77>"Mapping Data" on page 7-46</A>.<P>
<A NAME=HEADING312-267></A>
<H3>Modified Transform Object Data</H3>
 Once a transform object is defined in the data stream, it can then be modified. Modified transform object data follows a <CODE>gxSetDataOpcode</CODE> operation opcode and a data type opcode containing one of the constants from the <CODE>gxTransformDataOpcode</CODE> enumeration. <A HREF=GXEnvironment-311.html#MARKER-9-28>Table 7-9</A> summarizes the values of the constants for all of the modified transform objects.<P>
<A NAME=HEADING312-269></A>
<H4>Reserved Opcode for Modified Transform Data</H4>
 The data type opcode with value 0 is reserved for future expansion.<P>
<A NAME=HEADING312-271></A>
<H4>Tag Data</H4>
 A tag is added to the current transform object if the data type opcode has value 1. This is the <CODE>gxTransformTagOpcode</CODE> constant. The data for the parameters of the <CODE>GXSetTransformTags</CODE> function follows.<P>
 The data stream sequence is <CODE>tagType</CODE>, <CODE>index</CODE>, <CODE>oldCount</CODE>, <CODE>newCount</CODE>, <CODE>items[]</CODE>.<P>
 The <CODE>GXSetTransformTags</CODE> function is described in the chapter "Transform Objects" of <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-275></A>
<H4>Clip Data</H4>
 A clip, compressed as long (reference) is added to the current transform object if the data type opcode has value 2. This is the <CODE>gxTransformClipOpcode</CODE> constant. The data for the <CODE>clip</CODE> parameter of the <CODE>GXSetTransformClip</CODE> function follows.<P>
 The <CODE>GXSetTransformClip</CODE> function is described in the chapter "Transform Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-278></A>
<H4><A NAME=MARKER-9-77></A>Mapping Data</H4>
 A mapping is added to the current transform object if the data type opcode has value 3. This is the <CODE>gxTransformMappingOpcode</CODE> constant. The data for the <CODE>map</CODE> parameter of the <CODE>GXSetTransformMapping</CODE> function follows.<P>
 A transform mapping is initiated by the sequential appearance of the <CODE>gxSetDataOpcode</CODE>, and <CODE>gxTransformDataOpcode</CODE> constants in the data stream. <P>
 The bytes following the appearance in the data stream of the <CODE>gxTransformMapping</CODE> constant from the <CODE>gxTransformDataOpcode</CODE> enumeration have a special format. The interpretation of the bytes that follow require the determination of a size constant. The size to be used for a specific transform depends upon the compression and the size of the transform data specified by the byte containing the previous <CODE>gxGraphicsOperationOpcode</CODE> constant. The size is the number of bytes, words, or longs, depending upon the type of compression. <P>
 If the size obtained from the <CODE>gxGraphicsOperationOpcode</CODE> byte indicated that there are 24 bytes of transform data and the byte containing the <CODE>gxTransformMappingOpcode</CODE> constant indicated that there was no compression, then the size of each transform attribute would be 4 bytes (longs) and the size constant for our transformation bytes format would be size 24/4 = 6. The interpretation of the mapping that occurs for each mapping size is summarized in the section <A HREF=#MARKER-9-73>"Text Face Data" on page 7-39</A>.<P>
 The <CODE>GXSetTransformMapping</CODE> function is described in the chapter "Transform Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-284></A>
<H4>Part Mask Data</H4>
 A part mask, compressed as a long, is added to the current transform object if the data type opcode has value 4. This is the <CODE>gxTransformPartMaskOpcode</CODE> constant. The data for the <CODE>mask</CODE> parameter of the <CODE>GXSetTransformHitTest</CODE> function follows.<P>
 The <CODE>GXSetTransformHitTest</CODE> function is described in the chapter "Transform Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-287></A>
<H4>Tolerance Data</H4>
 Tolerance, compressed as long, is added to the current transform object if the data type opcode has value 5. This is the <CODE>gxTransformToleranceOpcode</CODE> constant. The data for the tolerance parameter of the <CODE>GXSetTransformHitTest</CODE> function follows.<P>
 The <CODE>GXSetTransformHitTest</CODE> function is described in the chapter "Transform Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-290></A>
<H3>New Color Profile Object Data</H3>
 Data for a new color profile object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 0x2B. This is the <CODE>gxColorProfileTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 This opcode creates a new color profile object with all of the properties of the previous color profile object in the data stream. If the current color profile object is the first color profile object in the stream, then it is created with default properties. The data that follows is uncompressed; the opcode size specifies the size of the stream.<P>
 The color profile object is described in the chapter "Color Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-294></A>
<H3>Modified Color Profile Object Data</H3>
 Once a color profile object is defined in the data stream, it can be modified. Modified color set object data follows a <CODE>gxSetDataOpcode</CODE> operation opcode and a data type opcode containing one of the constants from the <CODE>gxColorProfileDataOpcode</CODE> enumeration. <A HREF=GXEnvironment-311.html#MARKER-9-27>Table 7-8</A> summarizes the values of the constants for all of the modified color profile objects.<P>
<A NAME=HEADING312-296></A>
<H4>Reserved Opcode for Modified Color Profile Data</H4>
 The data type opcode with value 0 is reserved for future expansion.<P>
<A NAME=HEADING312-298></A>
<H4>Color Profile Tag Data</H4>
 A tag for the current color profile object is added if the data type opcode has value 1. This is the <CODE>gxColorProfileTagOpcode</CODE> constant. The data for the parameters of the <CODE>GXSetColorProfileTags</CODE> function follows.<P>
 The size of the opcode specifies the number of tags; the compression specifies whether the data is in bytes, words, or longs. For instance, if the size is 4 and the compression is <CODE>gxShortCompression</CODE> (2 bytes), then the stream contains 4/2 == 2 tags. The equivalent operation would be <CODE>GXSetShapeTags</CODE> (shape, nil, 1, 0, 2, tag array).<P>
 The <CODE>GXSetColorProfileTags</CODE> function is described in the chapter "Color Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-302></A>
<H3>New Color Set Object Data</H3>
 Data for a new color set object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 0x2C. This is the <CODE>gxColorSetTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 This opcode creates a new color set object with all of the properties of the previous color set object in the data stream. If the current color set object is the first color set object in the stream, then it is created with default properties.<P>
 The color set object is described in the chapter "Color Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-306></A>
<H3>Modified Color Set Object Data</H3>
 Once a color set object is defined in the data stream, it can be modified. Modified color set object data follows an operation opcode <CODE>gxSetDataOpcode</CODE> constant from the <CODE>gxGraphicsOperationOpcode</CODE> enumeration and a data type opcode containing one of the constants from the <CODE>gxColorSetDataOpcode</CODE> enumeration. <A HREF=GXEnvironment-311.html#MARKER-9-26>Table 7-7</A> summarizes the values of the constants for modified color set objects.<P>
 The first byte or two is space, space and specifies the number of components. The remaining stream is colors. The compression for the color set can be byte or word. To determine the number of colors in the stream use the following formula:<P>
<PRE>
(size - colorSpaceByte * compression) / componentsInColorSpace * 
                                             compression
</PRE>
 For instance, if the space is <CODE>gxRGBSpace</CODE>, the compression is <CODE>gxByteCompression</CODE>, and the size is 7, the number of colors would be (7 - 1 * 1)/3*1, which evaluates to 2. If the stream continued with 0, 0, 0, 0XFF, 0XFF, 0XFF, then the color set would contain black (0X0000, 0X0000,0X0000) and white 0XFFFF, 0XFFFF, 0XFFFF). As the example shows, the color set entries are compressed as colors. See section <A HREF=#MARKER-9-76>"Transfer Mode Data" on page 7-44</A> for information on color compression.<P>
<A NAME=HEADING312-311></A>
<H4>Reserved Opcode for Modified Color Set Data</H4>
 The data type opcode with value 0 is reserved for future expansion.<P>
<A NAME=HEADING312-313></A>
<H4>Color Set Tag Data</H4>
 A tag is added to the current color set object if the data type opcode has value 1. This is the <CODE>gxColorSetTagOpcode</CODE> constant. The data for the parameters of the <CODE>GXSetColorSetTags</CODE> function follows.<P>
 The size of the opcode specifies the number of tags; the compression specifies whether the data is in bytes, words, or longs. For instance, if the size is 4 and the compression is <CODE>gxShortCompression</CODE> (2 bytes), then the stream contains 4/2 == 2 tags. The equivalent operation would be <CODE>GXSetShapeTags</CODE> (shape, nil, 1, 0, 2, tag array).<P>
 The <CODE>GXSetColorSetTags</CODE> function is described in the chapter "Color Objects" of <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-317></A>
<H3>New Tag Object Data</H3>
 Data for a new tag object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 0x2D. This is the <CODE>gxTagTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 This opcode creates a new tag object with all of the properties of the previous tag object in the data stream. If the current tag object is the first tag object in the stream, then it is created with default properties. For tag data is uncompressed. The first parameter is tag type (long), followed by data computed from opcode length - sizeof (long).<P>
 The <CODE>GXNewtag</CODE> function is described in the chapter "Tag Objects" in <I>Inside Macintosh: QuickDraw GX Objects.</I><P>
<A NAME=HEADING312-321></A>
<H3><A NAME=MARKER-9-78></A>New Bit Image Object Data</H3>
 Data for a bit image object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 0x2E. This is the <CODE>gxBitImageTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 The data sequence is omit byte (gxOmitBitImage), followed by the fields described by omit byte: <CODE>rowBytes</CODE>, compressed as long, <CODE>height</CODE>, compressed as long, and <CODE>data</CODE> compressed in the custom format described ahead. The bit image is compressed only if it makes the data stream smaller.<P>
 The <CODE>GXNewBitmap</CODE> function is described in the chapter "Bitmap Shapes" in <I>Inside Macintosh: QuickDraw GX Graphics.</I><P>
 The bit image compression byte appears only in data streams containing a bitmap shape. This byte describes how each section of a bit image is compressed. The bit image compression byte follows the bytes containing the bit image attributes described by the <CODE>gxOmitBitImageMask</CODE> constant. <P>
 Bit images are described in the "Bitmap Shapes" chapter of <I><A HREF="../GXGraphics/GXGraphics-2.html">Inside Macintosh: QuickDraw GX Graphics</A></I>.<P>
 The bit image compression byte has the format <I>xx yyyyyy</I>. <P>
 The <I>xx</I> bits describe which of the bit image compression type opcodes is used for the next part of the bit image. The bit image compression opcode values are either 0, 1, 2, <BR>or 3.<P>
 The <I>yyyyyy</I> bits describe the number of times, z, that the action defined by the bit image compression opcode is replicated. The number of replications, <I>z</I>, can vary range from 0 to 63. <A HREF=#MARKER-9-3>Table 7-13</A> summarizes the four compression opcodes.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-3></A><B>Table 7-13 Bit image compression opcodes</B></CAPTION>
<TH>Bit image<BR>compression<BR>opcode<TH>Bit image compression description<TR>
<TD>0<TD>Add the <I>z</I> bytes of bit image that follow to the current row. <I>Z</I> Bytes of data follow.<TR>
<TD>1<TD>Repeat 1 byte <I>z</I> times and add the bits to the current row. One byte of data follows.<TR>
<TD>2<TD>Copy <I>z</I> bytes of the previous row and add the bits to the current row. No data follows.<TR>
<TD>3<TD>Copy the previous row of bits <I>z</I> times and add the bits to the next z rows. No data follows.</TABLE>
<P>
 The analysis of a bit image compression byte in a stream format is described in the section <A HREF=GXEnvironment-318.html#MARKER-9-124>"Analyzing a Flattened Bitmap Shape" beginning on page 7-81</A>.<P>
<A NAME=HEADING312-331></A>
<H3>New Font Name Data</H3>
 Data for a font name follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 0x2F. This is the <CODE>gxFontNameTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. <P>
 The fields in the <CODE>gxFlatFontName</CODE> structure follow. This structure includes the <CODE>gxFontName</CODE>, <CODE>gxFontPlatform</CODE>, <CODE>gxFontScr</CODE>ipt, <CODE>gxFontLanguage</CODE>, and <CODE>gxFontName</CODE> structures, the byte length of the name and the name itself. <P>
 The stream exactly mirrors the sequence and size of the fields in the <CODE>gxFlatFontName</CODE> structure.<P>
<A NAME=HEADING312-335></A>
<H3>New Trailer Object Data</H3>
 Data for a trailer object follows a <CODE>gxNewObjectOpcode</CODE> operation opcode and a data type opcode with a value 0x3F. This is the <CODE>gxTrailerTypeOpcode</CODE> constant from the <CODE>gxGraphicsNewOpcode</CODE> enumeration. This is the termination (last) object in the stream. No data follows. <P>
 The last two bytes of a stream are always 0x01 and 0x3F. The next to the last byte in a data stream contains a <CODE>gxNewObjectOpcode</CODE> constant with a record size of 1 byte. The last byte in a data stream contains a <CODE>gxTrailerTypeOpcode</CODE> constant with a <CODE>gxTwoBitCompression</CODE> value of 0, indicating the <CODE>gxNoCompression</CODE> constant.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-311.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-313.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Framework Programming Guide: Framework Versions</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Framework Versions"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20002255" title="Framework Versions"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../DeveloperTools/index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../../DeveloperTools/Xcode-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000557" target="_top">Xcode</a> &gt; <a href="../index.html" target="_top">Framework Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="FrameworkAnatomy.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="FrameworkBinding.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20002255-BCIECADD" title="Framework Versions"></a><hr /><H1>Framework Versions</H1>

<p>You can create different versions of a framework based on the type of changes made to its dynamic shared library. There are two types of versions: major (or incompatible) and minor (or compatible) versions. Both have an impact on the programs linked to the framework, albeit in different ways.</p>

<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="VersionInformation.html#//apple_ref/doc/uid/20002255-97505-TPXREF102">Major Versions</a>
				
			<br/>
			
        
			
			
				<a href="VersionInformation.html#//apple_ref/doc/uid/20002255-101531-TPXREF103">Minor Versions</a>
				
			<br/>
			
        
			
			
				<a href="VersionInformation.html#//apple_ref/doc/uid/20002255-97272-TPXREF104">Versioning Guidelines</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20002255-97505" title="Major Versions"></a><a name="//apple_ref/doc/uid/20002255-97505-TPXREF102" title="Major Versions"></a><h2>Major Versions</h2>
<p>A major version of a framework is also known as an incompatible version because it breaks compatibility with programs linked to a previous version of the framework’s dynamic shared library. Any such program running under the newer version of the framework is likely to experience runtime errors because of the changes made to the framework. </p>
<p>The following sections describe how you designate major version information in your framework and how the system uses that information to ensure applications can run.</p>
<a name="//apple_ref/doc/uid/20002255-100993" title="Major Version Numbering Scheme"></a><h3>Major Version Numbering Scheme</h3>
<p>Because all major versions of a framework are kept within the framework bundle, a program that is incompatible with the current version can still run against an older version if needed. The path of each major version encodes the version (see <span class="content_text"><a href="FrameworkAnatomy.html#//apple_ref/doc/uid/20002253-99920">“Framework Bundle Structure”</a></span>). For example, the letter “A” in the path below indicates the major version of a hypothetical framework:</p>
<div class="codesample"><table><tr><td scope="row"><pre>/System/Library/Frameworks/Boffo.framework/Versions/A/Boffo<span></span></pre></td></tr></table></div>
<p>When a program is built, the linker records this path in the program executable file. The dynamic link editor uses the path at runtime to find the compatible version of the framework’s library. Thus the major versioning scheme enables backward compatibility of a framework by including all major versions and recording the major version for each executable to run against.</p>
<a name="//apple_ref/doc/uid/20002255-101368" title="When to Use Major Versions"></a><h3>When to Use Major Versions</h3>
<p>You should make a new major version of a framework or dynamic shared library whenever you make changes that might break programs linked to it. The following changes might cause programs to break:</p>
<ul class="spaceabove"><li class="li"><p>Removing public interfaces, such as a class, function, method, or structure</p></li>
<li class="li"><p>Renaming any public interfaces</p></li>
<li class="li"><p>Changing the data layout of a structure</p></li>
<li class="li"><p>Adding, changing, or reordering the instance variables of a class</p></li>
<li class="li"><p>Adding virtual methods to a C++ class</p></li>
<li class="li"><p>Reordering the virtual methods of a C++ class</p></li>
<li class="li"><p>Changing C++ compilers or compiler versions</p></li>
<li class="li"><p>Changing the signature of a public function or method</p></li></ul>
<p>Changes to the signature of a function include changing the order, type, or number of parameters. The signature can also change by the addition or removal of <code>const</code> labels from the function or its parameters.</p>
<p>When you change the major version of a framework, you typically make the new version the “current” version. Xcode automatically generates a network of symbolic links to point to the current major version of a framework. See <span class="content_text"><a href="FrameworkAnatomy.html#//apple_ref/doc/uid/20002253-99920">“Framework Bundle Structure”</a></span> for details.</p>
<a name="//apple_ref/doc/uid/20002255-101437" title="Avoiding Major Version Changes"></a><a name="//apple_ref/doc/uid/20002255-101437-BCIDGBGH" title="Avoiding Major Version Changes"></a><h3>Avoiding Major Version Changes</h3>
<p>Creating a major version of a framework is something that you should avoid whenever possible. Each new major version of a framework requires more storage space than a comparable minor version change. Adding new major versions is unnecessary in many cases. </p>
<p>Before you find yourself needing to create a new major version of your framework, consider the implementation of your framework carefully. The following list shows ways to incorporate features without requiring a new major version: </p>
<ul class="spaceabove"><li class="li"><p>Pad classes and structures with reserved fields. Whenever you add an instance variable to a public class, you must change the major version number because subclasses depend on the size of the superclass. However, you can pad a class and a structure by defining unused (“reserved”) instance variables and fields. Then, if you need to add instance variables to the class, you can instead define a whole new class containing the storage you need and have your reserved instance variable point to it. </p><p>Keep in mind that padding the instance variables of frequently instantiated classes or the fields of frequently allocated structures has a cost in memory.</p></li>
<li class="li"><p>Don’t publish class, function, or method names unless you want your clients to use them. You can freely change private interfaces because you can be sure no programs are using them. Declare any interfaces that may change in a private header. </p></li>
<li class="li"><p>Don’t delete interfaces. If a method or function no longer has any useful work to perform, leave it in for compatibility purposes. Make sure it returns some reasonable value. Even if you add additional arguments to a method or function, leave the old form around if at all possible.</p></li>
<li class="li"><a name="//apple_ref/doc/uid/20002255-DontLinkElementID_32"></a><a name="//apple_ref/doc/uid/20002255-DontLinkElementID_33"></a><p>Remember that if you add interfaces rather than change or delete them, you don't have to change the major version number because the old interfaces still exist. The exception to this rule is instance variables. </p></li></ul>
<p>While many of the preceding changes do not require the creation of a major version of your framework, most require changing the minor version information. See <span class="content_text"><a href="VersionInformation.html#//apple_ref/doc/uid/20002255-97272">“Versioning Guidelines”</a></span> for more information.</p>
<a name="//apple_ref/doc/uid/20002255-97812" title="Creating a Major Version of a Framework"></a><h3>Creating a Major Version of a Framework</h3>
<p>When you create a major version of a framework, Xcode takes care of most of the implementation details for you. All you need to do is specify the major-version designator. A popular convention for this designator is the letters of the alphabet, with each new version designator “incremented” from the previous one. However, you can use whatever convention is suitable for your needs, for example “2.0” or “Two”.</p>
<p>To set the major version information for a framework in Xcode, do the following:</p>
<ol class="ol"><li class="li"><p>Open your project in Xcode 2.4.</p></li><li class="li"><p>In the Groups &amp; Files pane, select the target for your framework and open an inspector window.</p></li><li class="li"><p>Select the Build tab of the inspector window. </p></li><li class="li"><p>In the Packaging settings, set the value of the “Framework Version” setting to the designator for the new major version of your framework, for example, <code>B</code>..</p></li></ol>
<p>You can also make major versions of standalone dynamic shared libraries (that is, libraries not contained within a framework bundle). The major version for a standalone library is encoded in the filename itself, as shown in the following example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>libMyLib.B.dylib<span></span></pre></td></tr></table></div>
<p>To make it easier to change the major version, you can create a symbolic link with the name <code>libMyLib.dylib</code> to point to the new major version of your library. Programs that use the library can refer to the symbolic link. When you need to change the major version, you can then update the link to point to a new library.</p>
<a name="//apple_ref/doc/uid/20002255-101531" title="Minor Versions"></a><a name="//apple_ref/doc/uid/20002255-101531-TPXREF103" title="Minor Versions"></a><h2>Minor Versions</h2>
<p>Within a major version of a framework, you can also designate the current minor version. Minor versions are also referred to as “compatible versions” because they retain compatibility with the applications linked to the framework. Minor versions don’t change the existing public interfaces of the framework. Instead, they add new interfaces or modify the implementation of the framework in ways that provide new behavior without changing the old behavior.</p>
<p>Within any major version of the framework, only one minor version at a time exists. Subsequent minor versions simply overwrite the previous one. This differs from the major version scheme, in which multiple major versions coexist in the framework bundle. </p>
<p>The following sections describe how you designate minor version information in your framework and how the system uses that information to ensure applications can run.</p>
<a name="//apple_ref/doc/uid/20002255-101542" title="Minor Version Numbering Scheme"></a><h3>Minor Version Numbering Scheme</h3>
<p>Frameworks employ two separate numbers to track minor version information. The <strong>current version</strong> number tracks individual builds of your framework and is mostly for internal use by your team. You can use this number to track a group of changes to your framework and you can increment it as often as seems appropriate. A typical example would be to increment this number each time you build and distribute your framework to your internal development and testing teams. </p>
<p>The <strong>compatibility version</strong> number of your framework is more important because it marks changes to your framework’s public interfaces. When you make certain kinds of changes to public interfaces, you should set the compatibility version to match the current version of your framework. Thus, the compatibility version typically lags behind the current version. Only when your framework’s public interfaces change do the two numbers match up. </p>
<p>Remember that not all changes to your framework’s public interfaces can be matched by incrementing the compatibility version. Some changes may require that you release a new major version of your framework. See <span class="content_text"><a href="VersionInformation.html#//apple_ref/doc/uid/20002255-97272">“Versioning Guidelines”</a></span> for a summary of the changes you can make for each version. </p>
<a name="//apple_ref/doc/uid/20002255-101748" title="When to Use Minor Versions"></a><a name="//apple_ref/doc/uid/20002255-101748-BCIIHJEC" title="When to Use Minor Versions"></a><h3>When to Use Minor Versions</h3>
<p>You should update the version information of your framework when you make any of the following changes:</p>
<ul class="spaceabove"><li class="li"><p>Add a class</p></li>
<li class="li"><p>Add methods to an Objective-C class</p></li>
<li class="li"><p>Add non-virtual methods to a C++ class</p></li>
<li class="li"><p>Add public structures</p></li>
<li class="li"><p>Add public functions</p></li>
<li class="li"><p>Fix bugs that do not change your public interfaces</p></li>
<li class="li"><p>Make enhancements that do not change your public interfaces</p></li></ul>
<p>Any time you change the public interfaces of your framework, you must update its compatibility version number. If your changes are restricted to bug fixes or enhancements that do not affect the framework’s public interfaces, you do not need to update the compatibility version number. </p>
<a name="//apple_ref/doc/uid/20002255-100130" title="Compatibility Version Numbers at Runtime"></a><a name="//apple_ref/doc/uid/20002255-100130-BCIFGJCD" title="Compatibility Version Numbers at Runtime"></a><h3>Compatibility Version Numbers at Runtime</h3>
<p>When a program is linked with a framework during development, the linker records the compatibility version of the development framework in the program’s executable file. At runtime, the dynamic link editor compares that version against the compatibility version of the framework installed on the user’s system. If the value recorded in the program file is greater than the value in the user’s framework, the user’s framework is too old and cannot be used. </p>
<p>Cases where a framework is too old are uncommon, but not impossible. For example, it can happen when the user is running a version of Mac OS X older than the version required by the software. When such an incompatibility occurs, the dynamic link editor stops launching the application and reports an error to the console. </p>
<p>To run an application on earlier versions of a framework, you must link the application against the earliest version of the framework it supports. Xcode provides support for linking against earlier versions of the Mac OS X frameworks. This feature lets you link against specific versions of Mac OS X version 10.1 and later. For more information, see <em><a href="../../../../DeveloperTools/Conceptual/cross_development/index.html#//apple_ref/doc/uid/10000163i" target="_top">Cross-Development Programming Guide</a></em>.</p>
<a name="//apple_ref/doc/uid/20002255-99386" title="Creating a Minor Version of a Framework"></a><a name="//apple_ref/doc/uid/20002255-99386-BCIHBGIF" title="Creating a Minor Version of a Framework"></a><h3>Creating a Minor Version of a Framework</h3>
<p>If you are developing a framework, you need to increment your current version and compatibility version numbers at appropriate times. You set both of these numbers from within Xcode. The linking options for Xcode framework projects include options to specify the current and compatibility version of your framework. To set these numbers for a specific target, do the following:</p>
<ol class="ol"><li class="li"><p>Open your project in Xcode 2.4.</p></li>
<li class="li"><p>In the Groups &amp; Files pane, select the target for your framework and open an inspector window.</p></li>
<li class="li"><p>Select the Build tab of the inspector window. </p></li>
<li class="li"><p>In the Linking settings, set the value of the “Current Library Version” setting to the current version of your framework.</p></li>
<li class="li"><p>Update the “Compatibility version” option as needed to reflect significant changes to your framework. (See <span class="content_text"><a href="VersionInformation.html#//apple_ref/doc/uid/20002255-100130">“Compatibility Version Numbers at Runtime”</a></span> for more information.)</p></li></ol>
<div class="notebox"><a name="//apple_ref/doc/uid/20002255-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;In Xcode, the current and compatibility version numbers should generally be associated with the target, not the project. </p></div>
<a name="//apple_ref/doc/uid/20002255-97272" title="Versioning Guidelines"></a><a name="//apple_ref/doc/uid/20002255-97272-TPXREF104" title="Versioning Guidelines"></a><h2>Versioning Guidelines</h2>
<p>Whenever you change the code in your framework, you should also modify the configuration information in your framework project to reflect the changes. For simple changes, such as bug fixes and most new interfaces, you may need to increment only the minor version numbers associated with your framework. For more extensive changes, you must create a new major version of your framework.</p>
<p><span class="content_text">Table 1</span> lists the types of changes you can make to your framework code and the corresponding configuration changes you must make to your project file. Most changes that require a major or minor version update occur because the changes affect public interfaces.</p>
<a name="//apple_ref/doc/uid/20002255-109235-BCIGJCHA" title="Table 1Making changes to a framework"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><a name="//apple_ref/doc/uid/20002255-109235" title="Table 1Making changes to a framework"></a><strong>Table 1&nbsp;&nbsp;</strong>Making changes to a framework</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Version type</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Changes Allowed</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>What to do</p></th>
</tr>


<tr>
<td  scope="row"><p>Major version</p></td>
<td ><p>Remove interfaces (classes, functions, methods, and so on).  Rename interfaces.  Change the layout of a class or structure.  Add, change, or reorder instance variables of a class.  Add or reorder virtual methods in a C++ class.  Change the signature of a function or method.  Changing C++ compilers or compiler versions.</p></td>
<td ><p>You must change the major version designator for your project. Build your framework and incorporate the new version into your existing framework directory structure.</p></td>
</tr>
<tr>
<td  scope="row"><p>Minor version (public interface changes)</p></td>
<td ><p>Add a C++ or Objective-C class.  Add methods to an Objective-C class.  Add non-virtual methods to a C++ class.  Add structures.  Add functions.</p></td>
<td ><p>Increment your current version number and set your compatibility version number to match. Build your framework.</p></td>
</tr>
<tr>
<td  scope="row"><p>Minor version (no public interface changes)</p></td>
<td ><p>Fix bugs that do not affect programmatic interfaces.  Make enhancements that do not affect your programmatic interfaces.  Change interfaces used only internally to the framework.</p></td>
<td ><p>Increment your current version number. Do not change the compatibility version number. </p></td>
</tr>

</table></div>
<p>If you don’t change the framework’s major version number when you need to, programs linked to it may fail in unpredictable ways. Conversely, if you change the major version number when you didn’t need to, you clutter up the system with unnecessary framework versions. </p>
<p>Because major versions can be very disruptive to development, it is best to avoid them if possible. <span class="content_text"><a href="VersionInformation.html#//apple_ref/doc/uid/20002255-101437">“Avoiding Major Version Changes”</a></span> describes techniques you can use to make major changes without releasing a new major version of your framework.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="FrameworkAnatomy.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="FrameworkBinding.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-11-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/VersionInformation.html%3Fid%3D10000183i-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/VersionInformation.html%3Fid%3D10000183i-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/VersionInformation.html%3Fid%3D10000183i-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

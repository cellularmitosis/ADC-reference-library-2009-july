<html><head><title>Mac OS X Developer Tools
 Manual Page For Tcl_ConcatObj(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tcl_ConcatObj" title="Mac OS X Developer Tools
 Manual Page for Tcl_ConcatObj(3tcl)"><a name="//apple_ref/doc/man/3/Tcl_ConcatObj" title="Mac OS X Developer Tools
 Manual Page for Tcl_ConcatObj(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tcl_ConcatObj"; name=Tcl_ConcatObj(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tcl_StringObj(3)                           Tcl Library Procedures                           <!-- a -->Tcl_StringObj(3)<!-- /a -->



____________________________________________________________________________________________________________

<b>NAME</b>
       Tcl_NewStringObj,   Tcl_NewUnicodeObj,   Tcl_SetStringObj,  Tcl_SetUnicodeObj,  Tcl_GetStringFromObj,
       Tcl_GetString,    Tcl_GetUnicodeFromObj,    Tcl_GetUnicode,    Tcl_GetUniChar,     Tcl_GetCharLength,
       Tcl_GetRange, Tcl_AppendToObj, Tcl_AppendUnicodeToObj, Tcl_AppendStringsToObj, Tcl_AppendStringsToOb-<font color="#ffffff" class="whiteout">jVA,&nbsp;Tcl_AppendStringsToObjVA,</font>
       jVA, Tcl_AppendObjToObj, Tcl_SetObjLength, Tcl_ConcatObj, Tcl_AttemptSetObjLength  -  manipulate  Tcl
       objects as strings

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Obj *
       <b>Tcl_NewStringObj</b>(<u>bytes,</u> <u>length</u>)

       Tcl_Obj *
       <b>Tcl_NewUnicodeObj</b>(<u>unicode,</u> <u>numChars</u>)

       void
       <b>Tcl_SetStringObj</b>(<u>objPtr,</u> <u>bytes,</u> <u>length</u>)

       void
       <b>Tcl_SetUnicodeObj</b>(<u>objPtr,</u> <u>unicode,</u> <u>numChars</u>)

       char *
       <b>Tcl_GetStringFromObj</b>(<u>objPtr,</u> <u>lengthPtr</u>)

       char *
       <b>Tcl_GetString</b>(<u>objPtr</u>)

       Tcl_UniChar *
       <b>Tcl_GetUnicodeFromObj</b>(<u>objPtr,</u> <u>lengthPtr</u>)

       Tcl_UniChar *
       <b>Tcl_GetUnicode</b>(<u>objPtr</u>)

       Tcl_UniChar
       <b>Tcl_GetUniChar</b>(<u>objPtr,</u> <u>index</u>)

       int
       <b>Tcl_GetCharLength</b>(<u>objPtr</u>)

       Tcl_Obj *
       <b>Tcl_GetRange</b>(<u>objPtr,</u> <u>first,</u> <u>last</u>)

       void
       <b>Tcl_AppendToObj</b>(<u>objPtr,</u> <u>bytes,</u> <u>length</u>)

       void
       <b>Tcl_AppendUnicodeToObj</b>(<u>objPtr,</u> <u>unicode,</u> <u>numChars</u>)

       void
       <b>Tcl_AppendObjToObj</b>(<u>objPtr,</u> <u>appendObjPtr</u>)

       void
       <b>Tcl_AppendStringsToObj</b>(<u>objPtr,</u> <u>string,</u> <u>string,</u> <u>...</u> <b>(char</b> <b>*)</b> <b>NULL</b>)

       void
       <b>Tcl_AppendStringsToObjVA</b>(<u>objPtr,</u> <u>argList</u>)

       void
       <b>Tcl_SetObjLength</b>(<u>objPtr,</u> <u>newLength</u>)

       int
       <b>Tcl_AttemptSetObjLength</b>(<u>objPtr,</u> <u>newLength</u>)

       Tcl_Obj *
       <b>Tcl_ConcatObj</b>(<u>objc,</u> <u>objv</u>)

<b>ARGUMENTS</b>
       CONST char          <u>*bytes</u>          (in)      Points  to  the first byte of an array of UTF-8-encoded |
                                                     bytes used to set or append to a string  object.   This |
                                                     byte  array  should  not  contain  embedded  null bytes |
                                                     unless <u>length</u> is negative.  (Applications needing  null |
                                                     bytes  should  represent  them as the two-byte sequence |
                                                     <u>\700\600</u>, use <b>Tcl_ExternalToUtf</b> to convert, or <b>Tcl_New-</b> |
                                                     <b>ByteArrayObj</b>  if the string is a collection of uninter- |
                                                     preted bytes.)

       int                 <u>length</u>          (in)      The number of bytes to copy from <u>bytes</u> when  initializ-<font color="#ffffff" class="whiteout">ing,&nbsp;initializing,</font>
                                                     ing, setting, or appending to a string object.  If neg-<font color="#ffffff" class="whiteout">ative,&nbsp;negative,</font>
                                                     ative, all bytes up to the first null are used.

       CONST Tcl_UniChar   <u>*unicode</u>        (in)      Points to the first byte of an array of Unicode charac-<font color="#ffffff" class="whiteout">ters&nbsp;characters</font>
                                                     ters  used  to  set or append to a string object.  This
                                                     byte array may contain embedded null characters  unless
                                                     <u>numChars</u> is negative.

       int                 <u>numChars</u>        (in)      The  number  of Unicode characters to copy from <u>unicode</u>
                                                     when initializing, setting, or appending  to  a  string
                                                     object.   If  negative,  all characters up to the first
                                                     null character are used.

       int                 <u>index</u>           (in)      The index of the Unicode character to return.

       int                 <u>first</u>           (in)      The index of the first Unicode character in the Unicode
                                                     range to be returned as a new object.

       int                 <u>last</u>            (in)      The  index of the last Unicode character in the Unicode
                                                     range to be returned as a new object.

       Tcl_Obj             <u>*objPtr</u>         (in/out)  Points to an object to manipulate.

       Tcl_Obj             <u>*appendObjPtr</u>   (in)      The object to append to <u>objPtr</u> in <b>Tcl_AppendObjToObj</b>.

       int                 <u>*lengthPtr</u>      (out)     If non-NULL, the  location  where  <b>Tcl_GetStringFromObj</b>
                                                     will  store the the length of an object's string repre-<font color="#ffffff" class="whiteout">sentation.&nbsp;representation.</font>
                                                     sentation.

       CONST char          <u>*string</u>         (in)      Null-terminated string value to append to <u>objPtr</u>.

       va_list             <u>argList</u>         (in)      An argument list which must have been initialised using
                                                     <b>TCL_VARARGS_START</b>, and cleared using <b>va_end</b>.

       int                 <u>newLength</u>       (in)      New  length for the string value of <u>objPtr</u>, not includ-<font color="#ffffff" class="whiteout">ing&nbsp;including</font>
                                                     ing the final null character.

       int                 <u>objc</u>            (in)      The number of elements to concatenate.

       Tcl_Obj             <u>*objv[]</u>         (in)      The array of objects to concatenate.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       The procedures described in this manual entry allow Tcl objects to be manipulated as  string  values.
       They use the internal representation of the object to store additional information to make the string
       manipulations more efficient.  In particular, they make a series of append  operations  efficient  by
       allocating  extra  storage space for the string so that it doesn't have to be copied for each append.
       Also, indexing and length computations are optimized because the  Unicode  string  representation  is
       calculated  and  cached  as  needed.  When using the <b>Tcl_Append*</b> family of functions where the inter-<font color="#ffffff" class="whiteout">preter's&nbsp;interpreter's</font>
       preter's result is the object being appended to, it is important to  call  Tcl_ResetResult  first  to
       ensure you are not unintentionally appending to existing data in the result object.

       <b>Tcl_NewStringObj</b> and <b>Tcl_SetStringObj</b> create a new object or modify an existing object to hold a copy
       of the string given by <u>bytes</u> and <u>length</u>.  <b>Tcl_NewUnicodeObj</b> and <b>Tcl_SetUnicodeObj</b> create a new object
       or  modify  an  existing  object  to hold a copy of the Unicode string given by <u>unicode</u> and <u>numChars</u>.
       <b>Tcl_NewStringObj</b> and <b>Tcl_NewUnicodeObj</b> return a pointer to a  newly  created  object  with  reference
       count  zero.   All  four  procedures set the object to hold a copy of the specified string.  <b>Tcl_Set</b>-<font color="#ffffff" class="whiteout">StringObj&nbsp;Tcl_SetStringObj</font>
       <b>StringObj</b> and <b>Tcl_SetUnicodeObj</b> free any old string representation as well as any old internal repre-<font color="#ffffff" class="whiteout">sentation&nbsp;representation</font>
       sentation of the object.

       <b>Tcl_GetStringFromObj</b>  and  <b>Tcl_GetString</b>  return an object's string representation.  This is given by
       the returned byte pointer and (for <b>Tcl_GetStringFromObj</b>) length, which is stored in <u>lengthPtr</u>  if  it
       is  non-NULL.   If  the object's UTF string representation is invalid (its byte pointer is NULL), the
       string representation is regenerated from the object's internal representation.  The  storage  refer-<font color="#ffffff" class="whiteout">enced&nbsp;referenced</font>
       enced  by  the returned byte pointer is owned by the object manager.  It is passed back as a writable
       pointer so that extension author creating their own <b>Tcl_ObjType</b> will be able  to  modify  the  string
       representation  within  the  <b>Tcl_UpdateStringProc</b> of their <b>Tcl_ObjType</b>.  Except for that limited pur-<font color="#ffffff" class="whiteout">pose,&nbsp;purpose,</font>
       pose, the pointer returned by <b>Tcl_GetStringFromObj</b> or <b>Tcl_GetString</b> should be treated  as  read-only.
       It  is  recommended  that this pointer be assigned to a (CONST char *) variable.  Even in the limited
       situations where writing to this pointer is acceptable, one should take care to respect the  copy-on-<font color="#ffffff" class="whiteout">write&nbsp;copy-onwrite</font>
       write  semantics  required  by <b>Tcl_Obj</b>'s, with appropriate calls to <b>Tcl_IsShared</b> and <b>Tcl_DuplicateObj</b>
       prior to any in-place modification of the string representation.  The procedure <b>Tcl_GetString</b> is used
       in the common case where the caller does not need the length of the string representation.

       <b>Tcl_GetUnicodeFromObj</b> and <b>Tcl_GetUnicode</b> return an object's value as a Unicode string.  This is given
       by the returned pointer and (for <b>Tcl_GetUnicodeFromObj</b>) length, which is stored in <u>lengthPtr</u> if it is
       non-NULL.   The  storage  referenced  by the returned byte pointer is owned by the object manager and
       should not be modified by the caller.  The procedure <b>Tcl_GetUnicode</b> is used in the common case  where
       the caller does not need the length of the unicode string representation.

       <b>Tcl_GetUniChar</b> returns the <u>index</u>'th character in the object's Unicode representation.

       <b>Tcl_GetRange</b>  returns  a  newly  created  object  comprised  of the characters between <u>first</u> and <u>last</u>
       (inclusive) in the object's Unicode  representation.   If  the  object's  Unicode  representation  is
       invalid, the Unicode representation is regenerated from the object's string representation.

       <b>Tcl_GetCharLength</b> returns the number of characters (as opposed to bytes) in the string object.

       <b>Tcl_AppendToObj</b> appends the data given by <u>bytes</u> and <u>length</u> to the string representation of the object
       specified by <u>objPtr</u>.  If the object has an invalid string representation, then an attempt is made  to
       convert  <u>bytes</u> is to the Unicode format.  If the conversion is successful, then the converted form of
       <u>bytes</u> is appended to the object's Unicode representation.  Otherwise, the object's Unicode  represen-<font color="#ffffff" class="whiteout">tation&nbsp;representation</font>
       tation  is  invalidated  and  converted  to the UTF format, and <u>bytes</u> is appended to the object's new
       string representation.

       <b>Tcl_AppendUnicodeToObj</b> appends the Unicode string given by <u>unicode</u> and <u>numChars</u> to the object  speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
       fied  by  <u>objPtr</u>.   If the object has an invalid Unicode representation, then <u>unicode</u> is converted to
       the UTF format and appended to the object's string representation.  Appends are optimized  to  handle
       repeated  appends  relatively  efficiently  (it  overallocates  the  string or Unicode space to avoid
       repeated reallocations and copies of object's string value).

       <b>Tcl_AppendObjToObj</b> is similar to <b>Tcl_AppendToObj</b>, but it appends the string or Unicode value  (which-<font color="#ffffff" class="whiteout">ever&nbsp;(whichever</font>
       ever exists and is best suited to be appended to <u>objPtr</u>) of <u>appendObjPtr</u> to <u>objPtr</u>.

       <b>Tcl_AppendStringsToObj</b> is similar to <b>Tcl_AppendToObj</b> except that it can be passed more than one value
       to append and each value must be a null-terminated string (i.e. none of the values may contain inter-<font color="#ffffff" class="whiteout">nal&nbsp;internal</font>
       nal  null characters).  Any number of <u>string</u> arguments may be provided, but the last argument must be
       a NULL pointer to indicate the end of the list.

       <b>Tcl_AppendStringsToObjVA</b> is the same as <b>Tcl_AppendStringsToObj</b> except that instead of taking a  vari-<font color="#ffffff" class="whiteout">able&nbsp;variable</font>
       able number of arguments it takes an argument list.

       The <b>Tcl_SetObjLength</b> procedure changes the length of the string value of its <u>objPtr</u> argument.  If the
       <u>newLength</u> argument is greater than the space allocated for the object's string, then the string space
       is  reallocated and the old value is copied to the new space; the bytes between the old length of the
       string and the new length may have arbitrary values.  If the <u>newLength</u> argument is less than the cur-<font color="#ffffff" class="whiteout">rent&nbsp;current</font>
       rent  length  of  the object's string, with <u>objPtr-&gt;length</u> is reduced without reallocating the string
       space; the original allocated size for the string is recorded in  the  object,  so  that  the  string
       length can be enlarged in a subsequent call to <b>Tcl_SetObjLength</b> without reallocating storage.  In all
       cases <b>Tcl_SetObjLength</b> leaves a null character at <u>objPtr-&gt;bytes[newLength]</u>.

       <b>Tcl_AttemptSetObjLength</b> is identical in function to <b>Tcl_SetObjLength</b> except that if sufficient memory
       to satisfy the request cannot be allocated, it does not cause the Tcl interpreter to <b>panic</b>.  Thus, if
       <u>newLength</u> is greater than the space allocated for the object's string, and there is not enough memory
       available  to  satisfy the request, <b>Tcl_AttemptSetObjLength</b> will take no action and return 0 to indi-<font color="#ffffff" class="whiteout">cate&nbsp;indicate</font>
       cate failure.  If there is enough memory to satisfy the request, <b>Tcl_AttemptSetObjLength</b> behaves just
       like <b>Tcl_SetObjLength</b> and returns 1 to indicate success.

       The  <b>Tcl_ConcatObj</b> function returns a new string object whose value is the space-separated concatena-<font color="#ffffff" class="whiteout">tion&nbsp;concatenation</font>
       tion of the string representations of all of the objects in the <u>objv</u> array. <b>Tcl_ConcatObj</b>  eliminates
       leading  and  trailing  white  space as it copies the string representations of the <u>objv</u> array to the
       result. If an element of the <u>objv</u> array consists of nothing but white  space,  then  that  object  is
       ignored  entirely.  This  white-space  removal  was  added  to  make the output of the <b>concat</b> command
       cleaner-looking. <b>Tcl_ConcatObj</b> returns a pointer to a newly-created object whose ref count is zero.


<b>SEE</b> <b>ALSO</b>
       Tcl_NewObj, Tcl_IncrRefCount, Tcl_DecrRefCount


<b>KEYWORDS</b>
       append, internal representation, object, object type, string object, string type, string  representa-<font color="#ffffff" class="whiteout">tion,&nbsp;representation,</font>
       tion, concat, concatenate, unicode



Tcl                                                  8.1                                    <!-- a -->Tcl_StringObj(3)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_ConcatObj.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_ConcatObj.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_ConcatObj.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Data Structures(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING57></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-56.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-58.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-40.html"><B>Chapter 2 - TextEdit</B></A> / <A HREF="Text-56.html"><B>TextEdit Reference</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING57-0></A>
<H2><A NAME=MARKER-9-349></A><A NAME=MARKER-21-350></A><A NAME=MARKER-21-351></A>Data Structures</H2>
 This s<A NAME=MARKER-2-352></A>ection describes the data structures and their contents which provide information to the TextEdit routines. Both monostyled and multistyled edit records have a 32 KB maximum text size.<P>
 The TextEdit data structures are defined as follows:<P>
<UL>
<LI>The edit record, <A NAME=MARKER-2-50></A>defined by the <A NAME=MARKER-2-243></A><CODE>TERec</CODE> data type, stores the display and editing information for TextEdit.
<LI>Along with various subsidiary data structures, the style record, defined by the <CODE>TEStyleRec</CODE> data type, stores the character attribute information for the text of the edit record.
<LI>The style run table, <A NAME=MARKER-2-248></A>defined by the <CODE>StyleRun</CODE> data type, is an array that contains the boundaries of each style run and an index to its character attribute information in the style element array.
<LI>The style table<A NAME=MARKER-2-251></A>, defined by the <CODE>TEStyleTable</CODE> <A NAME=MARKER-2-253></A>data type, contains one entry for each distinct set of character attributes used in the text of the edit record.
<LI>The line-height table, defined by the <CODE>LHTable</CODE> data type, provides an array of line heights to hold the vertical spacing information for a given edit record. It also contains line ascent information.<A NAME=MARKER-2-979></A>
<LI>The null style record, defined by<A NAME=MARKER-2-257></A> the <CODE>NullStRec</CODE> data <A NAME=MARKER-2-259></A>type, contains the null scrap which is used to store character attribute information for a null selection.
<LI>The style scrap <A NAME=MARKER-9-260></A>record, defined by the <CODE>StScrpRec</CODE> data t<A NAME=MARKER-2-262></A>ype, is used by routines to store character attribute information temporarily.
<LI>The scrap style table,<A NAME=MARKER-2-150></A> defined by the <CODE>scrpStyleTab</CODE> data <A NAME=MARKER-2-358></A>type, is contained in the style scrap record.
<LI>The scrap <A NAME=MARKER-2-152></A>style element <A NAME=MARKER-2-359></A>record, defined by the <CODE>ScrpSTElement</CODE> data type, contains the character attribute information for an element in the scrap style table. One scrap style element record exists for each sequential attribute change in the associated text.
<LI>The TextEdit dispatch record, defined by the <A NAME=MARKER-2-588></A><CODE>TEDispatchRec<A NAME=MARKER-9-210></A></CODE> data type, contains the internal addresses of the TextEdit routines for the end-of-line hook, the draw hook, the width measurement hook, the new width measurement hook, and the text width measurement hook, unless you replace them with the addresses of your own customized versions of these routines.
<LI>The text style record, <A NAME=MARKER-2-278></A>defined by the <CODE>TextStyle</CODE> <A NAME=MARKER-2-406></A>data type, is used by several routines to pass character attribute information between the application and a routine. The record is passed as a variable or reference parameter.<P>
</UL>
 <A HREF=#MARKER-9-371>Figure 2-15</A> shows the TextEdit data structures and their fields to help you understand how the TextEdit data structures are organized and related. (For a monostyled edit record, TextEdit creates only the <CODE>TERec</CODE> and <CODE>TEDispatchRec</CODE> data structures.) To read from and write to these data structures, use the TextEdit routines rather than modifying these fields directly. This practice ensures future compatibility.<P>
 For most operations, you do not need to know the exact structure of an edit record; TextEdit routines gain access to the record for you. However, when manipulating character attribute information, you might find it helpful to understand how the data structures used to contain and track character attribute information are organized.<P>
<DL>
<DT><B>Note</B>
<DD>The space beyond the hooks in the TextEdit dispatch record is reserved for internal use. If you attempt to use this private area, you may corrupt TextEdit data.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<B>Figure 2-15  <A NAME=MARKER-9-371></A>The TextEdit data structures and fields</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/TE_L-22.jpg">
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Text-58.html#HEADING58-0">The Edit Record</A>
<DD>
<DT><A HREF="Text-59.html#HEADING59-0">The High Hook and Caret Hook Fields</A>
<DD>
<DT><A HREF="Text-60.html#HEADING60-0">The Style Record</A>
<DD>
<DT><A HREF="Text-61.html#HEADING61-0">The Style Table</A>
<DD>
<DT><A HREF="Text-62.html#HEADING62-0">The Line Height Table</A>
<DD>
<DT><A HREF="Text-63.html#HEADING63-0">The Null Style Record</A>
<DD>
<DT><A HREF="Text-64.html#HEADING64-0">The Style Scrap Record</A>
<DD>
<DT><A HREF="Text-65.html#HEADING65-0">The Scrap Style Table</A>
<DD>
<DT><A HREF="Text-66.html#HEADING66-0">Text Style Record</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-56.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-58.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

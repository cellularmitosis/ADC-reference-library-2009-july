<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE>Trimeshes</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=26980"> </A><A NAME="19409"> </A>Trimeshes</H1><P CLASS="T1.Text1"><A NAME="pgfId=31194"> </A><A NAME="marker=31193"> </A>A <B CLASS="bold">trimesh</B> is a collection of vertices, edges, and faces in which all faces are triangular. In other words, a trimesh is simply a mesh composed entirely of triangles. A trimesh is like a polyhedron in that its faces are defined indirectly, using indices into an array of vertices. Similarly, the edges of a trimesh are defined by an optional array of edge vertices.</P><P CLASS="T1.Text1"><A NAME="pgfId=31212"> </A>The main difference between trimeshes and all other QuickDraw&nbsp;3D primitives (including polyhedra) is that attributes for trimesh vertices, edges, and faces are not stored as objects of type <TT CLASS="cv">TQ3AttributeSet</TT>; rather, those attributes are stored in arrays of explicit attribute data structures. Moreover, if any single vertex (or edge, or face) has an attribute of a specific non-custom type, then every vertex (or edge, or face) in the trimesh must also have an attribute of that type. This restriction can deleteriously affect the memory requirements of a large trimesh.</P><P CLASS="Note"><A NAME="pgfId=27078"> </A>See <A HREF="qd3dgeometry.4.htm#22045" CLASS="XRef">&quot;Comparison of the Polyhedral Primitives&quot;</A> for more information on the advantages and disadvantages of using trimeshes to model a polyhedral surface. </P><P CLASS="T1.Text1"><A NAME="pgfId=31278"> </A>A trimesh triangle data structure specifies information about a triangular face of a trimesh. A trimesh triangle data structure is defined by the <TT CLASS="cv">TQ3TriMeshTriangleData</TT> data type.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=41175"> </A>typedef struct TQ3TriMeshTriangleData {<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointIndices[3];<BR>} TQ3TriMeshTriangleData;<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41179"> </A><TT CLASS="cv">pointIndices</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27116"> </A>Three indices into an array of three-dimensional points. (The array is specified by the <TT CLASS="cv">points</TT> field of the <TT CLASS="cv">TQ3TriMeshData</TT> data structure.) These three points define the vertices of the face.</DD></DL COMPACT><P CLASS="T1.Text1"><A NAME="pgfId=31312"> </A>A trimesh edge data structure specifies information about an edge of a trimesh; it is defined by the <TT CLASS="cv">TQ3TriMeshEdgeData</TT> data structure.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=41191"> </A>typedef struct TQ3TriMeshEdgeData {<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pointIndices[2];<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triangleIndices[2];<BR>} TQ3TriMeshEdgeData;<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41195"> </A><TT CLASS="cv">pointIndices</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=31304"> </A>Two indices into an array of three-dimensional points. (The array is specified by the <TT CLASS="cv">points</TT> field of the <TT CLASS="cv">TQ3TriMeshData</TT> data structure.) These two points define the endpoints of the edge.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41205"> </A><TT CLASS="cv">triangleIndices</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=31326"> </A>Two indices into an array of trimesh triangle data structures, which contain information about the faces in the trimesh. (The array is specified by the <TT CLASS="cv">triangles</TT> field of the <TT CLASS="cv">TQ3TriMeshData</TT> data structure.) These two triangles define the two faces that contain the edge. When an edge abuts only one face (that is, when the edge is on a boundary of the trimesh), you can use the constant <TT CLASS="cv">kQ3ArrayIndexNULL</TT> as the face index for the side of the edge that has no face attached to it.</DD></DL COMPACT><P CLASS="T1.Text1"><A NAME="pgfId=27083"> </A>Attributes for the parts of a trimesh are defined by a <B CLASS="bold">trimesh attributes data structure,</B> of type <TT CLASS="cv">TQ3TriMeshAttributeData</TT>. </P><CODE CLASS="Cv.Code"><A NAME="pgfId=41216"> </A>typedef struct TQ3TriMeshAttributeData {<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3AttributeType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributeType;<BR>&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*data;<BR>&nbsp;&nbsp;&nbsp;&nbsp;char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*attributeUseArray<BR>} TQ3TriMeshAttributeData;<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41220"> </A><TT CLASS="cv">attributeType</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27118"> </A>The type of the attribute.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41234"> </A><TT CLASS="cv">data</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27125"> </A>A pointer to the attribute data.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41243"> </A><TT CLASS="cv">attributeUseArray</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=31385"> </A>A pointer to an array of 0's and 1's that defines which vertices (or edges, or faces) have custom attributes.</DD></DL COMPACT><P CLASS="T1.Text1"><A NAME="pgfId=36786"> </A>When the <TT CLASS="cv">attributeType</TT> field is set to a pre-defined (that is, non-custom) attribute type, the <TT CLASS="cv">attributeUseArray</TT> field must contain <TT CLASS="cv">NULL</TT>. When the <TT CLASS="cv">attributeType</TT> field is set to a custom attribute type, it should contain a pointer to an array containing only the values 0 and 1. If an element in <TT CLASS="cv">attributeUseArray</TT> has the value 1, then the corresponding vertex (or edge, or face) has a custom attribute; otherwise, if an element in this array has the value 0, the corresponding vertex (or edge, or face) doesn't have a custom attribute.</P><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41252"> </A>Finally, a trimesh is defined by the <TT CLASS="cv">TQ3TriMeshData</TT> data type.</DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=31228"> </A>&nbsp;</DD></DL COMPACT><CODE CLASS="Cv.Code"><A NAME="pgfId=41261"> </A>typedef struct TQ3TriMeshData {<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3AttributeSet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triMeshAttributeSet;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numTriangles;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3TriMeshTriangleData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*triangles;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numTriangleAttributeTypes;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3TriMeshAttributeData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*triangleAttributeTypes;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numEdges;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3TriMeshEdgeData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*edges;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numEdgeAttributeTypes;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3TriMeshAttributeData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*edgeAttributeTypes;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numPoints;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3Point3D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*points;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numVertexAttributeTypes;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3TriMeshAttributeData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*vertexAttributeTypes;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3BoundingBox&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bBox;<BR>} TQ3TriMeshData;<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41265"> </A><TT CLASS="cv">triMeshAttributeSet</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27132"> </A> A pointer to a trimesh attributes data structure that contains information about the attributes of the entire trimesh. If the trimesh has no attributes, this field should be set to <TT CLASS="cv">NULL</TT>.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41276"> </A><TT CLASS="cv">numTriangles</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27137"> </A>The number of triangles (that is, faces) in the trimesh. </DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41285"> </A><TT CLASS="cv">triangles</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27138"> </A>A pointer to an array of trimesh triangle data structures, which contain information about the faces in the trimesh.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41294"> </A><TT CLASS="cv">numTriangleAttributeTypes</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27139"> </A> The number of types of attributes that are associated with each triangle in the trimesh.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41304"> </A><TT CLASS="cv">triangleAttributeTypes</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27140"> </A> A pointer to a trimesh attributes data structure that contains information about the face attributes of the trimesh. If no attributes are to be assigned to individual faces of the trimesh, this field should be set to <TT CLASS="cv">NULL</TT>.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41314"> </A><TT CLASS="cv">numEdges</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27141"> </A>The number of edges in the trimesh. Set this field to 0 if you do not want to specify any edges.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41323"> </A><TT CLASS="cv">edges</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27142"> </A>A pointer to an array of trimesh edge data structures, which contain information about the edges in the trimesh. Set this field to <TT CLASS="cv">NULL</TT> if you do not want to specify any edges.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41332"> </A><TT CLASS="cv">numEdgeAttributeTypes</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27143"> </A> The number of types of attributes that are associated with each edge in the trimesh.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41342"> </A><TT CLASS="cv">edgeAttributeTypes</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27144"> </A>A pointer to a trimesh attributes data structure that contains information about the edge attributes of the trimesh. If no attributes are to be assigned to individual edges of the trimesh, this field should be set to <TT CLASS="cv">NULL</TT>.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41351"> </A><TT CLASS="cv">numPoints</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27145"> </A>The number of points in the trimesh.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41360"> </A><TT CLASS="cv">points</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=31264"> </A>A pointer to the array of points in the trimesh.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41369"> </A><TT CLASS="cv">numVertexAttributeTypes</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27176"> </A> The number of types of attributes that are associated with each vertex in the trimesh.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41379"> </A><TT CLASS="cv">vertexAttributeTypes</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27177"> </A> A pointer to a trimesh attributes data structure that contains information about the vertex attributes of the trimesh. If no attributes are to be assigned to individual vertices of the trimesh, this field should be set to <TT CLASS="cv">NULL</TT>.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41389"> </A><TT CLASS="cv">bBox</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=27178"> </A>The bounding box of the trimesh.<A NAME="marker=36833"> </A></DD></DL COMPACT><P CLASS="I.Important"><A NAME="pgfId=31676"> </A>You can accelerate trimesh rendering by specifying the trimesh as a strip or fan. A <B CLASS="bold">strip</B><A NAME="marker=36623"> </A> is a trimesh whose triangles are ordered sequentially (that is, each triangle has one edge in common with the previous neighboring triangle, a second edge in common with the next neighboring triangle, and the remaining edge in common with no other triangle). A <B CLASS="bold">fan</B><A NAME="marker=36624"> </A> is a strip in which all the triangles share a common vertex. </P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>CFMachPort Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="CFMachPort Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001436-DontLinkChapterID_1" title="CFMachPort Reference"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/CoreFoundation/index.html#//apple_ref/doc/uid/TP30001281-TP30000421" target="_top">Core Foundation</a> &gt; <a href="../index.html" target="_top">CFMachPort Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/revisionCFMachPort.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/20001436-DontLinkChapterID_1-DontLinkElementID_2" title="CFMachPort Reference"></a><h1>CFMachPort Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span class="noWrap">Derived from</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">
<em><a href="../../CFTypeRef/index.html#//apple_ref/doc/uid/20001203" target="_top">CFType Reference</a></em></span></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px"><a href="../../CoreFoundation_Collection/index.html#//apple_ref/doc/uid/TP40003849" target="_top">CoreFoundation</a>/CoreFoundation.h</div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">CFMachPort.h</span><br/></div></td></tr></table></div><br/><a name="//apple_ref/doc/uid/20001436-CH203-SW1" title="Overview"></a><h2>Overview</h2><p>A CFMachPort object is a wrapper for a native Mach port (<code>mach_port_t</code>). Mach ports are the native communication channel for the Mac OS X kernel.</p><p>CFMachPort does not provide a function to send messages, so you primarily use a CFMachPort object if you need to listen to a Mach port that you obtained by other means. You can get a callback when a message arrives on the port or when the port becomes invalid, such as when the native port dies.</p><p>To listen for messages you need to create a run loop source with <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreateRunLoopSource">CFMachPortCreateRunLoopSource</a></code> and add it to a run loop with <code><a href="../../CFRunLoopRef/Reference/reference.html#//apple_ref/c/func/CFRunLoopAddSource" target="_top">CFRunLoopAddSource</a></code>.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001436-CH203-DontLinkElementID_3" title="Important:"></a><p><strong>Important:</strong>&nbsp;If you want to tear down the connection, you must invalidate the port (using <code><a href="reference.html#//apple_ref/c/func/CFMachPortInvalidate">CFMachPortInvalidate</a></code>) before releasing the runloop source and the Mach port object.</p><p></p></div><p>To send data, you must use the Mach APIs with the native Mach port, which is not described here. Alternatively, you can use a <em><a href="../../CFMessagePortRef/index.html#//apple_ref/doc/uid/20001437" target="_top">CFMessagePort Reference</a></em> object, which can send arbitrary data.</p>
<p>Mach ports only support communication on the local machine. For network communication, you have to use a <em><a href="../../CFSocketRef/index.html#//apple_ref/doc/uid/20001445" target="_top">CFSocket Reference</a></em> object.</p>



<a name="//apple_ref/doc/uid/20001436-DontLinkChapterID_1-DontLinkElementID_1" title="Functions by Task"></a><h2>Functions by Task</h2>
<a name="//apple_ref/doc/uid/20001436-CH201-SW1" title="Creating a CFMachPort Object"></a>
    
    <h3 class="tasks">Creating a CFMachPort Object</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreate">CFMachPortCreate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a CFMachPort object with a new Mach port.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreateWithPort">CFMachPortCreateWithPort</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a CFMachPort object for a pre-existing native Mach port.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001436-CH201-SW2" title="Configuring a CFMachPort Object"></a>
    
    <h3 class="tasks">Configuring a CFMachPort Object</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortInvalidate">CFMachPortInvalidate</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Invalidates a CFMachPort object, stopping it from receiving any more messages.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreateRunLoopSource">CFMachPortCreateRunLoopSource</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Creates a CFRunLoopSource object for a CFMachPort object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortSetInvalidationCallBack">CFMachPortSetInvalidationCallBack</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the callback function invoked when a CFMachPort object is invalidated.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001436-CH201-SW3" title="Examining a CFMachPort Object"></a>
    
    <h3 class="tasks">Examining a CFMachPort Object</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortGetContext">CFMachPortGetContext</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the context information for a CFMachPort object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortGetInvalidationCallBack">CFMachPortGetInvalidationCallBack</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the invalidation callback function for a CFMachPort object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortGetPort">CFMachPortGetPort</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the native Mach port represented by a CFMachPort object.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortIsValid">CFMachPortIsValid</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a Boolean value that indicates whether a CFMachPort object is valid and able to receive messages.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/20001436-CH201-SW4" title="Getting the CFMachPort Type ID"></a>
    
    <h3 class="tasks">Getting the CFMachPort Type ID</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CFMachPortGetTypeID">CFMachPortGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the type identifier for the CFMachPort opaque type.'/>
            </span></li>
    </ul>

<a name="//apple_ref/doc/uid/20001436-CH201-85785" title="Functions"></a><a name="//apple_ref/doc/uid/20001436-CH201-CJBJJICF" title="Functions"></a><h2>Functions</h2>









<a name="//apple_ref/c/func/CFMachPortCreate" title="CFMachPortCreate"></a><a name="//apple_ref/doc/c_ref/CFMachPortCreate" title="CFMachPortCreate"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17670" title="CFMachPortCreate"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_4"></a><h3 class="tight">CFMachPortCreate</h3>
<p class="spaceabove">Creates a CFMachPort object with a new Mach port.</p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> CFMachPortCreate (
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRef" target="_top">CFAllocatorRef</a> allocator,
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortCallBack">CFMachPortCallBack</a> callout,
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortContext">CFMachPortContext</a> *context,
   <!--a-->Boolean<!--/a--> *shouldFreeInfo
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to use to allocate memory for the new object. Pass <code><!--a  -->NULL<!--/a--></code> or <code><a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/c/data/kCFAllocatorDefault" target="_top">kCFAllocatorDefault</a></code> to use the current default allocator. </p></dd>
<dt><em>callout</em></dt>
<dd><p>The callback function invoked when a message is received on the new Mach port. </p></dd>
<dt><em>context</em></dt>
<dd><p>A structure holding contextual information for the new Mach port. The function copies the information out of the structure, so the memory pointed to by <em>context</em> does not need to persist beyond the function call. </p></dd>
<dt><em>shouldFreeInfo</em></dt>
<dd><p>A flag set by the function to indicate whether the <code>info</code> member of <em>context</em> should be freed. The flag is set to <code><!--a  -->true<!--/a--></code> on failure, <code><!--a  -->false<!--/a--></code> otherwise. <em>shouldFreeInfo</em> can be <code><!--a  -->NULL<!--/a--></code>. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The new CFMachPort object or <code><!--a  -->NULL<!--/a--></code> on failure. The CFMachPort object has both send and receive rights. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortCreateRunLoopSource" title="CFMachPortCreateRunLoopSource"></a><a name="//apple_ref/doc/c_ref/CFMachPortCreateRunLoopSource" title="CFMachPortCreateRunLoopSource"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17678" title="CFMachPortCreateRunLoopSource"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_5"></a><h3 class="tight">CFMachPortCreateRunLoopSource</h3>
<p class="spaceabove">Creates a CFRunLoopSource object for a CFMachPort object.</p>
<p class="spaceabove"><pre>
<a href="../../CFRunLoopSourceRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRunLoopSourceRef" target="_top">CFRunLoopSourceRef</a> CFMachPortCreateRunLoopSource (
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRef" target="_top">CFAllocatorRef</a> allocator,
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> order
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to use to allocate memory for the new object. Pass <code><!--a  -->NULL<!--/a--></code> or <code><a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/c/data/kCFAllocatorDefault" target="_top">kCFAllocatorDefault</a></code> to use the current default allocator. </p></dd>
<dt><em>port</em></dt>
<dd><p>The Mach port for which to create a CFRunLoopSource object. </p></dd>
<dt><em>order</em></dt>
<dd><p>A priority index indicating the order in which run loop sources are processed. <em>order</em> is currently ignored by CFMachPort run loop sources. Pass <code>0</code> for this value.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The new CFRunLoopSource object for <em>port</em>. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p>
<h5 class="tight">Discussion</h5>
<p>The run loop source is not automatically added to a run loop. To add the source to a run loop, use <code><a href="../../CFRunLoopRef/Reference/reference.html#//apple_ref/c/func/CFRunLoopAddSource" target="_top">CFRunLoopAddSource</a></code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/NotifyTool/index.html#//apple_ref/doc/uid/DTS10004462" target="_top">NotifyTool</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortCreateWithPort" title="CFMachPortCreateWithPort"></a><a name="//apple_ref/doc/c_ref/CFMachPortCreateWithPort" title="CFMachPortCreateWithPort"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17671" title="CFMachPortCreateWithPort"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_6"></a><h3 class="tight">CFMachPortCreateWithPort</h3>
<p class="spaceabove">Creates a CFMachPort object for a pre-existing native Mach port.</p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> CFMachPortCreateWithPort (
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRef" target="_top">CFAllocatorRef</a> allocator,
   mach_port_t portNum,
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortCallBack">CFMachPortCallBack</a> callout,
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortContext">CFMachPortContext</a> *context,
   <!--a-->Boolean<!--/a--> *shouldFreeInfo
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>allocator</em></dt>
<dd><p>The allocator to use to allocate memory for the new object. Pass <code><!--a  -->NULL<!--/a--></code> or <code><a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/c/data/kCFAllocatorDefault" target="_top">kCFAllocatorDefault</a></code> to use the current default allocator. </p></dd>
<dt><em>portNum</em></dt>
<dd><p>The native Mach port to use.</p></dd>
<dt><em>callout</em></dt>
<dd><p>The callback function invoked when a message is received on the Mach port. </p></dd>
<dt><em>context</em></dt>
<dd><p>A structure holding contextual information for the Mach port. The function copies the information out of the structure, so the memory pointed to by <em>context</em> does not need to persist beyond the function call. </p></dd>
<dt><em>shouldFreeInfo</em></dt>
<dd><p>A flag set by the function to indicate whether the <code>info</code> member of <em>context</em> should be freed. The flag is set to <code><!--a  -->true<!--/a--></code> on failure or if a CFMachPort object already exists for <em>portNum</em>, <code><!--a  -->false<!--/a--></code> otherwise. <em>shouldFreeInfo</em> can be <code><!--a  -->NULL<!--/a--></code>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The new CFMachPort object or <code><!--a  -->NULL<!--/a--></code> on failure. If a CFMachPort object already exists for <em>portNum</em>, the function returns the pre-existing object instead of creating a new object; the <em>context</em> and <em>callout</em> parameters are ignored in this case. Ownership follows the <span class="content_text"><a href="../../../Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029" target="_top">Create Rule</a></span>.</p>
<h5 class="tight">Discussion</h5>
<p>The CFMachPort object does not take full ownership of the send and receive rights of the Mach port <em>portNum</em>. It is the caller’s responsibility to deallocate the Mach port rights after the CFMachPort object is no longer needed and has been invalidated.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/NotifyTool/index.html#//apple_ref/doc/uid/DTS10004462" target="_top">NotifyTool</a></span></li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortGetContext" title="CFMachPortGetContext"></a><a name="//apple_ref/doc/c_ref/CFMachPortGetContext" title="CFMachPortGetContext"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17673" title="CFMachPortGetContext"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_7"></a><h3 class="tight">CFMachPortGetContext</h3>
<p class="spaceabove">Returns the context information for a CFMachPort object.</p>
<p class="spaceabove"><pre>
void CFMachPortGetContext (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port,
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortContext">CFMachPortContext</a> *context
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object to examine. </p></dd>
<dt><em>context</em></dt>
<dd><p>A pointer to the structure into which the context information for <em>port</em> is to be copied. The information being returned is usually the same information you passed to <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreate">CFMachPortCreate</a></code> or <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreateWithPort">CFMachPortCreateWithPort</a></code> when creating <em>port</em>. However, if <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreateWithPort">CFMachPortCreateWithPort</a></code> returned a cached CFMachPort object instead of creating a new object, <em>context</em> is filled with information from the original CFMachPort object instead of the information you passed to the function.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>The context version number for CFMachPort objects is currently <code>0</code>. Before calling this function, you need to initialize the <code>version</code> member of <em>context</em> to <code>0</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortGetInvalidationCallBack" title="CFMachPortGetInvalidationCallBack"></a><a name="//apple_ref/doc/c_ref/CFMachPortGetInvalidationCallBack" title="CFMachPortGetInvalidationCallBack"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17676" title="CFMachPortGetInvalidationCallBack"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_8"></a><h3 class="tight">CFMachPortGetInvalidationCallBack</h3>
<p class="spaceabove">Returns the invalidation callback function for a CFMachPort object.</p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CFMachPortInvalidationCallBack">CFMachPortInvalidationCallBack</a> CFMachPortGetInvalidationCallBack (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object to examine. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The callback function invoked when <em>port</em> is invalidated. <code><!--a  -->NULL<!--/a--></code> if no callback has been set with <code><a href="reference.html#//apple_ref/c/func/CFMachPortSetInvalidationCallBack">CFMachPortSetInvalidationCallBack</a></code>. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortGetPort" title="CFMachPortGetPort"></a><a name="//apple_ref/doc/c_ref/CFMachPortGetPort" title="CFMachPortGetPort"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17672" title="CFMachPortGetPort"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_9"></a><h3 class="tight">CFMachPortGetPort</h3>
<p class="spaceabove">Returns the native Mach port represented by a CFMachPort object.</p>
<p class="spaceabove"><pre>
mach_port_t CFMachPortGetPort (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object to examine. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The native Mach port represented by <em>port</em>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortGetTypeID" title="CFMachPortGetTypeID"></a><a name="//apple_ref/doc/c_ref/CFMachPortGetTypeID" title="CFMachPortGetTypeID"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17669" title="CFMachPortGetTypeID"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_10"></a><h3 class="tight">CFMachPortGetTypeID</h3>
<p class="spaceabove">Returns the type identifier for the CFMachPort opaque type.</p>
<p class="spaceabove"><pre>
<a href="../../CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> CFMachPortGetTypeID (
   void
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>The type identifier for the CFMachPort opaque type.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortInvalidate" title="CFMachPortInvalidate"></a><a name="//apple_ref/doc/c_ref/CFMachPortInvalidate" title="CFMachPortInvalidate"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17674" title="CFMachPortInvalidate"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_11"></a><h3 class="tight">CFMachPortInvalidate</h3>
<p class="spaceabove">Invalidates a CFMachPort object, stopping it from receiving any more messages.</p>
<p class="spaceabove"><pre>
void CFMachPortInvalidate (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object to invalidate. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>Invalidating a CFMachPort object prevents the port from ever receiving any more messages. The CFMachPort object is not deallocated, though. If the port has not already been invalidated, the port’s invalidation callback function is invoked, if one has been set with <code><a href="reference.html#//apple_ref/c/func/CFMachPortSetInvalidationCallBack">CFMachPortSetInvalidationCallBack</a></code>. The <code><a href="reference.html#//apple_ref/c/tdef/CFMachPortContext">CFMachPortContext</a></code>  <code>info</code> information for <em>port</em> is also released, if a release callback was specified in the port’s context structure. Finally, if a run loop source was created for <em>port</em>, the run loop source is invalidated, as well.</p><p>If the underlying Mach port is destroyed, the CFMachPort object is automatically invalidated.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortIsValid" title="CFMachPortIsValid"></a><a name="//apple_ref/doc/c_ref/CFMachPortIsValid" title="CFMachPortIsValid"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17675" title="CFMachPortIsValid"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_12"></a><h3 class="tight">CFMachPortIsValid</h3>
<p class="spaceabove">Returns a Boolean value that indicates whether a CFMachPort object is valid and able to receive messages.</p>
<p class="spaceabove"><pre>
<!--a-->Boolean<!--/a--> CFMachPortIsValid (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object to examine. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p><code><!--a  -->true<!--/a--></code> if <em>port</em> can be used for communication, otherwise <code><!--a  -->false<!--/a--></code>. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/func/CFMachPortSetInvalidationCallBack" title="CFMachPortSetInvalidationCallBack"></a><a name="//apple_ref/doc/c_ref/CFMachPortSetInvalidationCallBack" title="CFMachPortSetInvalidationCallBack"></a><a name="//apple_ref/doc/uid/20001436-CH201-F17677" title="CFMachPortSetInvalidationCallBack"></a>
<a name="//apple_ref/doc/uid/20001436-CH201-DontLinkElementID_13"></a><h3 class="tight">CFMachPortSetInvalidationCallBack</h3>
<p class="spaceabove">Sets the callback function invoked when a CFMachPort object is invalidated.</p>
<p class="spaceabove"><pre>
void CFMachPortSetInvalidationCallBack (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port,
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortInvalidationCallBack">CFMachPortInvalidationCallBack</a> callout
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object to modify. </p></dd>
<dt><em>callout</em></dt>
<dd><p>The callback function to invoke when <em>port</em> is invalidated. Pass <code><!--a  -->NULL<!--/a--></code> to remove a callback. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If <em>port</em> is already invalid, <em>callout</em> is invoked immediately.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/doc/uid/20001436-CH1g-96399" title="Callbacks"></a><a name="//apple_ref/doc/uid/20001436-CH1g-CJBBDDGA" title="Callbacks"></a><h2>Callbacks</h2>

<a name="//apple_ref/c/tdef/CFMachPortCallBack" title="CFMachPortCallBack"></a><a name="//apple_ref/doc/c_ref/CFMachPortCallBack" title="CFMachPortCallBack"></a><a name="//apple_ref/doc/uid/20001436-CH1g-F17619" title="CFMachPortCallBack"></a><a name="//apple_ref/doc/uid/20001436-CH1g-DontLinkElementID_14"></a><h3 class="tight">CFMachPortCallBack</h3>
<p class="spaceabove">Callback invoked to process a message received on a CFMachPort object.</p>
<p class="spaceabove"><pre>
typedef void (*CFMachPortCallBack) (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port,
   void *msg,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> size,
   void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
void MyCallBack (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port,
   void *msg,
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> size,
   void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object on which the message <em>msg</em> was received. </p></dd>
<dt><em>msg</em></dt>
<dd><p>The Mach message received on <em>port</em>. The pointer is to a <code>mach_msg_header_t</code> structure.</p></dd>
<dt><em>size</em></dt>
<dd><p>Size of the Mach message <em>msg</em>, excluding the message trailer.</p></dd>
<dt><em>info</em></dt>
<dd><p>The <code>info</code> member of the <code><a href="reference.html#//apple_ref/c/tdef/CFMachPortContext">CFMachPortContext</a></code> structure used when creating <em>port</em>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>You specify this callback when creating a CFMachPort object with either <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreate">CFMachPortCreate</a></code> or <code><a href="reference.html#//apple_ref/c/func/CFMachPortCreateWithPort">CFMachPortCreateWithPort</a></code>. To receive messages on a CFMachPort object (and have this callback invoked), you must create a run loop source for the port and add it to a run loop.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/tdef/CFMachPortInvalidationCallBack" title="CFMachPortInvalidationCallBack"></a><a name="//apple_ref/doc/c_ref/CFMachPortInvalidationCallBack" title="CFMachPortInvalidationCallBack"></a><a name="//apple_ref/doc/uid/20001436-CH1g-F17620" title="CFMachPortInvalidationCallBack"></a><a name="//apple_ref/doc/uid/20001436-CH1g-DontLinkElementID_15"></a><h3 class="tight">CFMachPortInvalidationCallBack</h3>
<p class="spaceabove">Callback invoked when a CFMachPort object is invalidated.</p>
<p class="spaceabove"><pre>
typedef void (*CFMachPortInvalidationCallBack) (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port,
   void *info
);
</pre></p>
<p>If you name your function <code>MyCallBack</code>, you would declare it like this:</p>
<p><pre>
void MyCallBack (
   <a href="reference.html#//apple_ref/doc/c_ref/CFMachPortRef">CFMachPortRef</a> port,
   void *info
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>port</em></dt>
<dd><p>The CFMachPort object that has been invalidated. </p></dd>
<dt><em>info</em></dt>
<dd><p>The <code>info</code> member of the <code><a href="reference.html#//apple_ref/c/tdef/CFMachPortContext">CFMachPortContext</a></code> structure used when creating <em>port</em>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>Your callback should free any resources allocated for <em>port</em>.</p>
<p>You specify this callback with <code><a href="reference.html#//apple_ref/c/func/CFMachPortSetInvalidationCallBack">CFMachPortSetInvalidationCallBack</a></code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/doc/uid/20001436-CH2g-98269" title="Data Types"></a><a name="//apple_ref/doc/uid/20001436-CH2g-CJBHAEDF" title="Data Types"></a><h2>Data Types</h2>


<a name="//apple_ref/c/tdef/CFMachPortContext" title="CFMachPortContext"></a><a name="//apple_ref/doc/c_ref/CFMachPortContext" title="CFMachPortContext"></a><a name="//apple_ref/doc/uid/20001436-CH2g-C017549" title="CFMachPortContext"></a>
<a name="//apple_ref/doc/uid/20001436-CH2g-DontLinkElementID_16"></a><h3 class="tight">CFMachPortContext</h3>
<p class="spaceabove">A structure that contains program-defined data and callbacks with which you can configure a CFMachPort object’s behavior.</p>
<p class="spaceabove"><pre>
struct CFMachPortContext {
   <a href="../../CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> version;
   void *info;
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorRetainCallBack" target="_top">CFAllocatorRetainCallBack</a> retain;
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorReleaseCallBack" target="_top">CFAllocatorReleaseCallBack</a> release;
   <a href="../../CFAllocatorRef/Reference/reference.html#//apple_ref/doc/c_ref/CFAllocatorCopyDescriptionCallBack" target="_top">CFAllocatorCopyDescriptionCallBack</a> copyDescription;
};
typedef struct CFMachPortContext CFMachPortContext;
</pre></p>
<h5 class="tight">Fields</h5><dl class="termdef">
<dt><code>version</code></dt>
<dd><p>Version number of the structure. Must be <code>0</code>.</p></dd>
<dt><code>info</code></dt>
<dd><p>An arbitrary pointer to program-defined data, which can be associated with the CFMachPort object at creation time. This pointer is passed to all the callbacks defined in the context.</p></dd>
<dt><code>retain</code></dt>
<dd><p>A retain callback for your program-defined <code>info</code> pointer. Can be <code>NULL</code>. </p></dd>
<dt><code>release</code></dt>
<dd><p>A release callback for your program-defined <code>info</code> pointer. Can be <code>NULL</code>. </p></dd>
<dt><code>copyDescription</code></dt>
<dd><p>A copy description callback for your program-defined <code>info</code> pointer. Can be <code>NULL</code>. </p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code><a name="//apple_ref/c/tdef/CFMachPortRef" title="CFMachPortRef"></a><a name="//apple_ref/doc/c_ref/CFMachPortRef" title="CFMachPortRef"></a><a name="//apple_ref/doc/uid/20001436-CH2g-C017547" title="CFMachPortRef"></a><a name="//apple_ref/doc/uid/20001436-CH2g-DontLinkElementID_17"></a><h3 class="tight">CFMachPortRef</h3>
<p class="spaceabove">A reference to a CFMachPort object.</p>
<p class="spaceabove"><pre>
typedef struct __CFMachPort *CFMachPortRef;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>CFMachPort.h</code>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/revisionCFMachPort.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-04-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/CoreFoundation/Reference/CFMachPortRef/Reference/reference.html%3Fid%3D20001436-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/CoreFoundation/Reference/CFMachPortRef/Reference/reference.html%3Fid%3D20001436-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/CoreFoundation/Reference/CFMachPortRef/Reference/reference.html%3Fid%3D20001436-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
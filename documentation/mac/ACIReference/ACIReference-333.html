<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>MyCMMGetPS2ColorRenderingVMSize(IM: ACI Ref)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING333></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACIReference-332.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-334.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACIReference-2.html"><B>Advanced Color Imaging Reference</B></A> / <BR><DD><A HREF="ACIReference-314.html"><B>Chapter 4 - ColorSync Manager Reference for Color Management Modules</B></A> / <A HREF="ACIReference-322.html"><B>Optional CMM-Defined Functions</B></A><BR><DL><DD><A HREF="ACIReference-308.html"><B></B></A> / <A HREF="ACIReference-317.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING333-0></A>
<H3><A NAME=MARKER-11-74></A><A NAME=MARKER-9-75></A>MyCMMGetPS2ColorRenderingVMSize</H3>
 Handles the <CODE>kCMMGetNamedColorValue</CODE> request by obtaining the maximum virtual memory (VM) size of the color rendering dictionary (CRD) for the rendering intent specified by the source profile.<P>
 A CMM may respond <A NAME=MARKER-2-76></A>to the <CODE>kCMMGetPS2ColorRenderingVMSize</CODE> request code, but it is not required to do so. The ColorSync Manager sends this request code to your CMM on behalf of an application that called the <CODE>CMGetPS2ColorRenderingVMSize </CODE>function. The ColorSync Manager dispatches this request to the Component Manager, which calls your CMM to service the request. A CMM typically responds to the <CODE>kCMMGetPS2ColorRenderingVMSize </CODE>request code by calling a CMM-defined function (for example, <CODE>MyCMMGetPS2ColorRenderingVMSize</CODE>) to handle the request.<P>
 The MyCMMGetPS2ColorRenderingVMSize function is a color management module-defined subroutine.<P>
<PRE>
pascal CMError MyCMMGetPS2ColorRenderingVMSize(
ComponentInstance CMSession, 
CMProfileRef srcProf,
CMProfileRef dstProf,
unsigned long vmSize);
</PRE>
<DL>
<DT><CODE>CMSession</CODE>
<DD> A handle to your CMM's storage for the instance of your component associated with the calling application or device driver.
<DT><CODE>srcProf</CODE>
<DD> A profile reference to the source profile specifying the rendering intent to use.
<DT><CODE>dstProf</CODE>
<DD> A profile reference to the destination printer profile from which you obtain or assess the virtual memory (VM) size of the CRD. 
<DT><CODE>vmSize</CODE>
<DD> The VM size of the CRD, returned by the function. 
<DT><I>function result</I>
<DD> A result code of type CMError. See <A HREF=ACIReference-313.html#MARKER-9-479>"Result Codes" (page 3-172)</A> for a list of ColorSync-specific result codes.
</DL>
<A NAME=HEADING333-10></A>
<H5>DISCUSSION</H5>
 Only for special cases should a custom CMM need to support this request code. If your CMM supports this function, your <CODE>MyCMMGetPS2ColorRenderingVMSize</CODE> function must obtain the maximum VM size of the CRD for the rendering intent specified by the source profile. <P>
 Your function must return the VM size in the <CODE>vmSize</CODE> parameter. (In turn, the ColorSync Manager returns the VM size to the calling application or device driver.) The CRD whose maximum size you return must be that of the dictionary for the rendering intent specified by the source profile. <P>
 If the destination profile contains the Apple-defined private tag <CODE>'psvm'</CODE>, described later in this section, then your CMM may read the tag and return the CRD VM size data supplied by this tag for the specified rendering intent. If the destination profile does not contain this tag, then you must assess the VM size of the CRD. In this case, the assessment may be larger than the actual maximum VM size. <P>
 The <CODE>CMPS2CRDVMSizeType</CODE> data type defines the Apple-defined <CODE>'psvm'</CODE> optional tag that a profile may contain to identify the maximum VM size of a CRD for different rendering intents. This tag's element data includes an array containing one entry for each rendering intent and its virtual memory size. <P>
 The <CODE>CMIntentCRDVMSize</CODE> data type defines the rendering intent and its maximum VM size:<P>
<PRE>
struct CMIntentCRDVMSize {
   long        renderingIntent;
   unsigned long VMSize; 
};
</PRE>
 For example, a rendering intent might be 0 and its VM size 120 KB.<P>
<B>Constant descriptions</B><P>
<DL>
<DT><CODE>renderingIntent</CODE>
<DD> The rendering intent whose CRD VM size you want to obtain. Rendering intent values are
<DD>0 (<CODE>cmPerceptual</CODE>) <BR>1 (<CODE>cmRelativeColorimetric</CODE>) <BR>2 (<CODE>cmSaturation</CODE>)<BR>3 (<CODE>cmAbsoluteColorimetric</CODE>)  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
<DT><CODE>VMSize</CODE>
<DD> The VM size of the CRD for the rendering intent specified for the <CODE>renderingIntent</CODE> field. 
</DL>
 The <CODE>CMPS2CRDVMSizeType</CODE> data type for the tag includes an array containing one or more members of type <CODE>CMIntentCRDVMSize:</CODE><P>
<PRE>
struct CMPS2CRDVMSizeType {
   OSType  typeDescriptor; 
   unsigned long   reserved; 
   unsigned long   count; 
   CMIntentCRDVMSize   intentCRD[1]; 
};
</PRE>
<B>Constant descriptions</B><P>
<DL>
<DT><CODE>typeDescriptor</CODE>
<DD> The <CODE>'psvm'</CODE> tag signature. 
<DT><CODE>reserved</CODE>
<DD> Reserved for future use. 
<DT><CODE>count</CODE>
<DD> The number of entries in the <CODE>intentCRD</CODE> array. 
<DT><CODE>intentCRD</CODE>
<DD> A variable-sized array of four or more members defined by the <CODE>CMIntentCRDSize</CODE> data type. 
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACIReference-332.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-334.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACIReference-3.html">&copy; Apple Computer, Inc.</A><br>11 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

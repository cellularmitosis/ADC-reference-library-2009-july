<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Detecting Memory Leaks</TITLE></HEAD><BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../index.html" target="_top">Documentation</a> <b>></b> <a href="../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.5.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.7.html"><img src="next.gif" border="0" alt="Next"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606100"> </A><A NAME="21233"> </A>Detecting Memory Leaks</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606101"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606102"> </A>Describes methods to detect and prevent memory leaks in an application.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606103"> </A>Description</H2><P CLASS="Body"><A NAME="pgfId=606104"> </A>The best tool currently available to detect memory leaks is ObjectAlloc. This application is available on all platforms. ObjectAlloc uses the object allocation statistics built into the Foundation framework. When this facility is active, every object allocation, deallocation, copy, retain, release, and autorelease is recorded as it happens.</P><P CLASS="Body"><A NAME="pgfId=606105"> </A>The ObjectAlloc application resides under <TT CLASS="Code">$NEXT_ROOT/Developer/Applications</TT> on Windows NT machines with WebObjects 4 installed. The ObjectAlloc application resides under <TT CLASS="Code">/System/Developer/Applications</TT> on Mac OS X Server machines with WebObjects 4 installed. General information about using ObjectAlloc is available through the Help menu.</P><P CLASS="Body"><A NAME="pgfId=614146"> </A>You can use ObjectAlloc on a Mach/Windows machine to get the allocation information from a PDO process. To attach a PDO process to ObjectAlloc, make sure that the Executable field in the ObjectAlloc window is blank, and click the start button (the green arrow) on the ObjectAlloc panel. A panel will appear and ask, &quot;Do you want ObjectAlloc to wait for a task to attach, and launch the task to be monitored yourself?&quot; Click Yes to continue. The next panel appears with the environment variables that you'll need to set to monitor the task. Make sure <TT CLASS="Code">NSKeepAllocationStatistics</TT> is set to <TT CLASS="Code">YES</TT>.</P><P CLASS="Body"><A NAME="pgfId=606108"> </A>Another memory leak detector, MallocDebug, is available on Mac OS X Server. Since this application uses Mach-specific messaging calls, it is not available under Windows NT. The online help provides detailed documentation on how to prepare an application for use with MallocDebug.For applications that use the Java-wrapped frameworks, WebObjects 4.0 provides methods to force garbage collection in the WOApplication class. The API is defined as follows:</P><PRE CLASS="Code"><A NAME="pgfId=607010"> </A>public int garbageCollectionPeriod ();<A NAME="pgfId=607012"> </A>public void setGarbageCollectionPeriod (int);</PRE><P CLASS="Body"><A NAME="pgfId=615053"> </A></P><P CLASS="Body"><A NAME="pgfId=606111"> </A>The default value for <TT CLASS="Code">WOGarbageCollectionPeriod</TT> is 20, that is, garbage collection is forced every 20 requests.</P><P CLASS="Body"><A NAME="pgfId=614155"> </A></P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=614156"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606114"> </A><A HREF="ProgrammingTopics.5.html#34924" CLASS="XRef">Detecting Freed Object Exceptions</A></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606116"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606117"> </A>	What tools can I use to detect memory leaks?</LI><LI CLASS="Bulleted"><A NAME="pgfId=615063"> </A>How do I force my WebObjects application to garbage collect?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606118"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606119"> </A>Memory</LI><LI CLASS="Bulleted"><A NAME="pgfId=618518"> </A>Leak</LI><LI CLASS="Bulleted"><A NAME="pgfId=606120"> </A>ObjectAlloc</LI><LI CLASS="Bulleted"><A NAME="pgfId=606121"> </A>MallocDebug</LI><LI CLASS="Bulleted"><A NAME="pgfId=606122"> </A>Garbage</LI><LI CLASS="Bulleted"><A NAME="pgfId=618519"> </A>Collection</LI><LI CLASS="Bulleted"><A NAME="pgfId=606123"> </A>Performance</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606124"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606125"> </A>21 July, 1998. Mai Nguyen. First Draft.</P><P CLASS="Body"><A NAME="pgfId=614200"> </A>26 October, 1998. Clif Liu. Second Draft.</P><PRE CLASS="Code"><A NAME="pgfId=602450"> </A></PRE></DIV><hr alt="">&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.5.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.7.html"><img src="next.gif" border="0" alt="Next"></A><!-- start of footer --><!--#include file="footer" --><!-- end of footer --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
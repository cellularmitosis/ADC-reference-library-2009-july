<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>About Picture Comments (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING466></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-465.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-467.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-465.html"><B>Appendix B - Using Picture Comments for Printing</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING466-0></A>
<H1>About Picture Comments</H1>
 Within the drawing code sent to a printer driver after your application uses the <CODE>PrOpenPage</CODE> procedure, your application can specify picture comments by using the QuickDraw <CODE>PicComment</CODE> procedure. The <CODE>PicComment</CODE> procedure allows your application to pass data or commands directly to an output device.<P>
<PRE>
PROCEDURE PicComment (kind: Integer; dataSize: Integer; 
                      dataHandle: Handle);
</PRE>
 The <CODE>kind</CODE> parameter specifies the kind of picture comment, and the <CODE>dataSize</CODE> parameter specifies the size of the data referred to by the <CODE>dataHandle</CODE> parameter. (For some picture comments, the values passed in the <CODE>dataSize</CODE> and <CODE>dataHandle</CODE> parameters should be 0 and <CODE>NIL</CODE>, respectively.)<P>
 You typically use a picture comment to give your application and an output device additional control over the rendering of images. A number of picture comments have been given special definitions by various printer drivers. When a printer driver encounters one of these comments, it interprets the comment as an appropriate drawing operation. A PostScript printer driver, for example, may convert a picture comment into PostScript code. <P>
 By including picture comments in your code that draws into a printing graphics port, your application can rotate text and graphics, smooth polygons, draw hairlines, create dashed lines, and pass PostScript code directly to the printer driver. (For information about the PostScript language, see the <I>PostScript Language Reference Manual</I>, second edition, published by Addison-Wesley.)<P>
 Picture comments were initially designed to allow applications to share data in the form of QuickDraw pictures (as described in the chapter "Pictures" in this book). With the advent of the PostScript LaserWriter printer, the use of picture comments was extended to allow applications to more easily take advantage of various PostScript features unavailable with QuickDraw.<P>
 However, you do not need to create a QuickDraw picture to use picture comments for printing. When your application calls the Printing Manager procedure <CODE>PrOpenPage</CODE>, the printer driver collects your drawing operations after they are handled by the low-level drawing routines contained in the <CODE>QDProcs</CODE> record for the printing graphics port. As explained in the chapter "QuickDraw Drawing" in this book, the default low-level procedure specified by QuickDraw in the <CODE>commentProc</CODE> field of the <CODE>QDProcs</CODE> record is the <CODE>StdComment</CODE> procedure, which simply ignores picture comments. However, a printer driver can replace the <CODE>StdComment</CODE> procedure with its own routine for handling picture comments.<A NAME=MARKER-2-44></A> <A NAME=MARKER-2-45></A><P>
<DL>
<DT><B>WARNING</B>
<DD>As described in the chapter "Pictures" in this book, do not call the <CODE>OpenCPicture</CODE> or <CODE>OpenPicture</CODE> function between calls to <CODE>PrOpenPage</CODE> and <CODE>PrClosePage</CODE>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 When you use the <CODE>PicComment</CODE> procedure after calling <CODE>PrOpenPage</CODE> and before calling <CODE>PrClosePage</CODE>, the printer driver either ignores the picture comment passed to <CODE>PicComment</CODE> or collects the results of its drawing operations, depending on whether the printer driver has installed its own low-level drawing routine that handles the picture comment. <P>
 Although the <CODE>PicComment</CODE> procedure is available on all Macintosh computers, the availability of the drawing operations that you can implement with picture comments depends on the driver for the current printer. The inability to determine which picture comments are supported by the current printer driver means that if you use picture comments to perform drawing operations not supported by QuickDraw, you must also provide for printing on QuickDraw-only printers. <P>
 This requires your application to maintain separate code branches: for example, one that takes advantage of the picture comment handling of a PostScript printer driver, and another for a printer driver that supports only QuickDraw. Furthermore, you must hide the code that takes advantage of PostScript printer drivers from QuickDraw-based drivers, and you must hide from PostScript drivers the code that uses QuickDraw-based approximations of these drawing operations. Your application's printed output will necessarily differ depending on the driver for the current printer.<P>
 <A HREF=#MARKER-9-1>Table B-1</A> lists picture comments defined for various printer drivers produced by Apple and used by third-party producers of various other printer drivers. For each picture comment, this table shows the name of the picture comment that you specify in the <CODE>kind</CODE> parameter of the <CODE>PicComment</CODE> procedure, the value represented by the name, the value for the <CODE>dataSize</CODE> parameter, and the value for the <CODE>dataHandle</CODE> parameter. (Be sure to dispose of the memory you allocate for any handle you pass in the <CODE>dataHandle</CODE> parameter.) Keep in mind that it is impossible to determine which picture comments are supported by the driver of the current printer.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-1></A><B>Table B-1 Names, values, and data sizes for picture comments</B> (Continued)</CAPTION>
<TH>Name<TH>Value<TH>Data size<TH>Data handle<TH>Description<TR>
<TD colspan=2><B>Text picture comments</B><A NAME=MARKER-2-2></A><TD>&nbsp;<TD>&nbsp;<TD>&nbsp;<TR>
<TD>TextBegin<TD>150<TD>6<TD>TTxtPicRec<TD>Begin text function<A NAME=MARKER-2-3></A><TR>
<TD>TextEnd<TD>151<TD>0<TD>NIL<TD>End text function<A NAME=MARKER-2-4></A><TR>
<TD>StringBegin<TD>152<TD>0<TD>NIL<TD>Begin string delimitation<A NAME=MARKER-2-5></A><TR>
<TD>StringEnd<TD>153<TD>0<TD>NIL<TD>End string delimitation<A NAME=MARKER-2-6></A><TR>
<TD>TextCenter<TD>154<TD>8<TD>TCenterRec<TD>Offset to center of rotation for text<A NAME=MARKER-2-7></A><TR>
<TD>LineLayoutOff<TD>155<TD>0<TD>NIL<TD>Turn printer driver's line layout off<A NAME=MARKER-2-8></A><TR>
<TD>LineLayoutOn<TD>156<TD>0<TD>NIL<TD>Turn printer driver's line layout on<TR>
<TD>ClientLineLayout<TD>157<TD>16<TD>TClientLLRec<TD>Customize line layout error distribution<A NAME=MARKER-2-10></A><TR>
<TD colspan=5>&nbsp;<TR>
<TD colspan=2><B>Graphics picture comments</B><A NAME=MARKER-2-11></A><TD>&nbsp;<TD>&nbsp;<TD>&nbsp;<TR>
<TD>PolyBegin<TD>160<TD>0<TD>NIL<TD>Begin special polygon<A NAME=MARKER-2-12></A><TR>
<TD>PolyEnd<TD>161<TD>0<TD>NIL<TD>End special polygon<A NAME=MARKER-2-13></A><TR>
<TD>PolyIgnore<TD>163<TD>0<TD>NIL<TD>Ignore following polygon data<A NAME=MARKER-9-60></A><TR>
<TD>PolySmooth<TD>164<TD>1<TD>TPolyVerbRec<TD>Close, fill, frame<A NAME=MARKER-2-15></A><TR>
<TD>PolyClose<TD>165<TD>0<TD>NIL<TD>Smooth the curve between endpoints<A NAME=MARKER-2-16></A><TR>
<TD>RotateBegin<TD>200<TD>8<TD>TRotationRec<TD>Begin rotated port<A NAME=MARKER-2-17></A><TR>
<TD>RotateEnd<TD>201<TD>0<TD>NIL<TD>End rotation<A NAME=MARKER-2-232></A><TR>
<TD>RotateCenter<TD>202<TD>8<TD>TCenterRec<TD>Offset to center of rotation<A NAME=MARKER-2-19></A><TR>
<TD colspan=2><B>Line-drawing picture comments</B><A NAME=MARKER-2-20></A><TD>&nbsp;<TD>&nbsp;<TD>&nbsp;<TR>
<TD>DashedLine<TD>180<TD>Size of a <CODE>TDashedLineRec</CODE>record<TD>TDashedLineRec<TD>Draw following lines as dashed<A NAME=MARKER-2-21></A><TR>
<TD>DashedStop<TD>181<TD>0<TD>NIL<TD>End dashed lines<A NAME=MARKER-2-22></A><TR>
<TD>SetLineWidth<TD>182<TD>4<TD>TLineWidthHdl<TD>Set fractional line widths<A NAME=MARKER-2-23></A><TR>
<TD colspan=2><B>PostScript picture comments</B><A NAME=MARKER-2-24></A><TD>&nbsp;<TD>&nbsp;<TD>&nbsp;<TR>
<TD>PostScriptBegin<TD>190<TD>0<TD>NIL<TD>Set driver state to PostScript<TR>
<TD>PostScriptEnd<TD>191<TD>0<TD>NIL<TD>Restore QuickDraw state<TR>
<TD>PostScriptHandle<TD>192<TD>Length of PostScript data<TD>Handle<TD>PostScript data referenced in handle<A NAME=MARKER-2-25></A><TR>
<TD>PostScriptFile<TD>193<TD>Length of PostScript data<TD>Handle<TD>Filename referenced in handle<A NAME=MARKER-9-69></A><TR>
<TD>TextIsPostScript<TD>194<TD>0<TD>NIL<TD>QuickDraw text is sent as PostScript<A NAME=MARKER-9-1></A><TR>
<TD>ResourcePS<TD>195<TD>8<TD>Resource type, resource ID, index<TD>PostScript data in a resource file<A NAME=MARKER-9-56></A><TR>
<TD>PSBeginNoSave<TD>196<TD>0<TD>NIL<TD>Set driver state to PostScript<A NAME=MARKER-9-23></A><TR>
<TD colspan=2><B>Forms-printing picture comments</B><TD>&nbsp;<TD>&nbsp;<TD>&nbsp;<TR>
<TD>FormsPrinting<TD>210<TD>0<TD>NIL<TD>Don't clear print buffer after each page<A NAME=MARKER-2-30></A><TR>
<TD>EndFormsPrinting<TD>211<TD>0<TD>NIL<TD>End forms printing after <CODE>PrClosePage</CODE><A NAME=MARKER-2-31></A><TR>
<TD colspan=2><B>ColorSync picture comments<B></B><TD><A NAME=MARKER-2-32></A><TD>&nbsp;<TD>&nbsp;<TR>
<TD>CMBeginProfile<TD>220<TD>0<TD>NIL<TD>Begin ColorSync profile<A NAME=MARKER-2-33></A><TR>
<TD>CMEndProfile<TD>221<TD>0<TD>NIL<TD>End ColorSync profile<A NAME=MARKER-2-34></A><TR>
<TD>CMEnableMatching<TD>222<TD>0<TD>NIL<TD>Begin ColorSync color matching<A NAME=MARKER-2-35></A><TR>
<TD>CMDisableMatching<TD>223<TD>0<TD>NIL<TD>End ColorSync color matching<A NAME=MARKER-2-36></A></TABLE>
<P>
 <A NAME=MARKER-9-46></A><A NAME=MARKER-2-47></A><A NAME=MARKER-2-48></A>All PostScript LaserWriter drivers support the picture comments listed in <A HREF=#MARKER-9-1>Table B-1</A>. <A NAME=MARKER-2-49></A><P>
 <A NAME=MARKER-2-50></A>Some third-party QuickDraw printer drivers support the <CODE>TextBegin</CODE>, <CODE>TextCenter</CODE>, and <CODE>TextEnd</CODE> picture comments. <P>
 The QuickDraw LaserWriter SC driver supports the <CODE>LineLayoutOff</CODE>, <CODE>LineLayoutOn</CODE>, and <CODE>SetLineWidth</CODE> picture comments. <A NAME=MARKER-2-51></A><A NAME=MARKER-2-52></A><P>
 The QuickDraw ImageWriter LQ driver and versions prior to 7.2 of the QuickDraw StyleWriter driver support the <CODE>LineLayoutOff</CODE> and <CODE>LineLayoutOn</CODE> picture comments.<A NAME=MARKER-2-53></A><P>
 The QuickDraw Personal LaserWriter LS driver and versions later than 7.2 of the QuickDraw StyleWriter driver support no picture comments at all.<A NAME=MARKER-2-54></A><A NAME=MARKER-2-55></A><A NAME=MARKER-2-56></A><A NAME=MARKER-2-57></A><P>
 The <CODE>SetGrayLevel</CODE> picture comment is now obsolete. The <CODE>PostScriptFile</CODE>, <CODE>TextIsPostScript</CODE>, <CODE>FormsPrinting</CODE>, <CODE>EndFormsPrinting</CODE>, <CODE>ClientLineLayout</CODE>, <CODE>PSBeginNoSave</CODE>, and <CODE>ResourcePS</CODE> picture comments have limited use and are no longer recommended.<P>
 See <I><A HREF="../ACI/ACI-2.html">Advanced Color Imaging on the Mac OS</A></I> for information about the picture comments used by the ColorSync Utilities.<A NAME=MARKER-2-58></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-465.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-467.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

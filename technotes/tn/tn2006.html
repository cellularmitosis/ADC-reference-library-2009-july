<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="Stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN2006: MP-Safe Routines</title><meta name="keywords" content="have creator list relevant keywords here"><meta name="Description" content="Technical Note TN2006: This technote lists all routines callablefrom MP tasks under Multiprocessing Services 2.0 and higher.It is directed at all developers with compute-bound or I/O-boundapplication. It is now possible to do this type of work fromMP tasks, with potential performance and power saving benefitson both Mac OS 9 and Mac OS X."><meta name="categories" content="System Releases, Runtime Architecture, Processes, Overview, Operating System and Networking"><meta name="week-posted" content="Dec 18, 2000 - Dec 22, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10003045" title="MP-Safe Routines"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxProcessManagement-date.html" target="_blank">Carbon > Process Management</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN2006</div>
<div id="pageheadsub">MP-Safe Routines</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">         <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <!-- begin_toc -->                        <p id="menutext"><A HREF="#Introduction">Introduction</A><BR>                   <BR>                   <A HREF="#RoutinesByManager">MP-Safe Routines by                   Manager</A><BR>                   <BR>                   <A HREF="#CarbonLibVsMP">CarbonLib and MP</A><BR>                   <BR>                   <A HREF="#Summary">Summary</A><BR>                   <BR>                   <A HREF="#references">References</A><BR>                   <BR>                   <A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                 <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left>                                    <!-- begin_intro_text --><p id="introtext">This                   technote lists all routines callable from MP tasks                   under Multiprocessing Services 2.0 and higher. This                   list of routines is larger than you might expect,                   and is growing steadily. You may find some pleasant                   surprises in the latest list.</P>                   <p id="introtext">This Note is directed at all developers with                   a compute-bound or I/O-bound application. It is now                   possible to do this type of work from MP tasks,                   with potential performance and power-saving                   benefits with both Mac OS 9 and Mac OS X.</P>                   <!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Dec 21 2000]</h3><!-- end_date -->                </TD>             </TR>          </TABLE><!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR>          <!-- begin_content -->          <P><A NAME=Introduction></A></P>          <H2>Introduction</H2>          <P>With the introduction of Multiprocessing Services 2.0          (Mac OS 8.6) and renewed availability of multiprocessor          hardware, many developers are reconsidering whether to adopt          the preemptive and multiprocessor-aware threading provided          by Multiprocessing Services. Historically, the biggest          obstacle to the adoption of Multiprocessing Services has          been the limited set of system routines that are callable          from MP tasks. However, this set is steadily increasing and          is now sufficient for many real-world applications. This          technote provides a list of MP-safe system routines, and          when they became MP-safe.</P><BR>          <CENTER ><TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   The MP tasks provided by Multiprocessing Services                   2.0 are not just for use on MP systems. They                   provide a general purpose preemptive threading                   mechanism on all computers, even those with a                   single CPU. If your application needs preemptive                   threads, you should consider using MP tasks.                   Specifically, if your code is either compute-bound                   or I/O-bound, it's likely that adopting MP tasks                   will yield some combination of performance                   benefits, power savings, and maintainability                   improvements.</P>                </TD>             </TR>          </TABLE><BR>         <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>WARNING:</B><BR>                   This technote discusses Multiprocessing Services                   2.0 (Mac OS 8.6) and higher exclusively. It does                   not cover any issues related to Multiprocessing                   Services 1.x.</P>                </TD>             </TR>          </table><BR>          </CENTER>          <P >Most of the APIs listed in this technote are part          of Carbon. Accessing an API through CarbonLib on traditional          Mac OS does not affect its MP-safeness: if the routine is          MP-safe for an InterfaceLib-based application, it will also          be MP-safe for a CarbonLib-based one. All of the MP-safe          routines listed here are MP-safe on all versions of Mac OS          X.</P>          <P >This technote concentrates on          routines that are callable from preemptive tasks on both Mac          OS 9 and Mac OS X. Many Mac OS X routines that are not part          of Carbon, for example, the BSD file and network APIs, are          MP-safe but are not described here.</P>          <P >The list of MP-safe routines          described in this technote supplants the list given in the          <a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Preemptive          Task-Safe Mac OS System Software          Functions</A> section of          <a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Adding          Multitasking Capability to Applications Using          Multiprocessing          Services</A>.</P>          <P ><A HREF="#top">Back to top</A></P>          <P><A NAME=RoutinesByManager></A></P>          <H2>MP-Safe Routines by Manager</H2>          <P>This section lists all MP-safe routines, grouped by the          manager that implements the routine. In cases where the          description refers to header files, it refers to          Universal Interfaces 3.3.2. This list is accurate as of Mac          OS 9.0.4.</P>          <H3>Debugging</H3>          <P>With <a href="http://developer.apple.com/tools/debuggers/MacsBug/">MacsBug</A>          (version 6.6.3 or greater) installed, it is safe to call          <CODE>Debugger</CODE>, <CODE>DebugStr</CODE>, and          <CODE>debugstr</CODE> from MP tasks.</P>          <H3>Multiprocessing Services</H3>          <P>All Multiprocessing Services routines are callable from          MP tasks. Specifically, all the non-deprecated routine          declared in "Multiprocessing.h" are callable from MP          tasks.</P>          <P>See <a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Adding          Multitasking Capability to Applications Using          Multiprocessing Services</A> for more details on these          routines.</P>          <H3>Memory Manager</H3>          <P>The following Memory Manager routines are MP-safe:          <CODE>BlockMove</CODE>, <CODE>BlockMoveData</CODE>,          <CODE>BlockMoveUncached</CODE>,          <CODE>BlockMoveDataUncached</CODE>, <CODE>BlockZero</CODE>,          and <CODE>BlockZeroUncached</CODE>.</P>          <P>See <a href="../../documentation/mac/Memory/Memory-2.html">Inside          Macintosh: Memory</A> and <a href="../../documentation/hardware/DeviceManagers/pci_srvcs/pci_cards_drivers/index.html">Designing          PCI Cards and Drivers for Power Macintosh Computers</A> for          more details on these routines.</P>          <H3>Driver Services</H3>          <P>All of the atomic operations originally introduced in          DriverServicesLib (and exported by InterfaceLib since Mac OS          8.5) are MP-safe. Specifically, all of the routines declared          in "DriverSynchronization.h" are MP-safe.</P>          <CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>WARNING:</B><BR>                   Do not use the PowerPC instructions Load Reserved                   (<CODE>lwarx</CODE>) and Store Conditional                   (<CODE>stwcx</CODE>) to implement atomicity in your                   preemptively threaded application. As described in                   DTS Technote 1137 <a href="tn1137.html">Disabling                   Interrupts on the Traditional Mac OS</A>, these                   instructions are non-portable and are tricky to use                   correctly across the full spectrum of PowerPC                   implementations.</P>                </TD>             </TR>          </table><BR>          <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>WARNING:</B><BR>                   The DriverServicesLib queue manipulation routines                   (for example, <CODE>PBEnqueue</CODE>) are not                   MP-safe.</P>                </TD>             </TR>          </table><BR>          </CENTER>          <P>Most of the DriverServicesLib time measurement routines          are MP-safe. This includes the routines <CODE>UpTime</CODE>,          <CODE>AbsoluteToNanoseconds</CODE>,          <CODE>AbsoluteToDuration</CODE>,          <CODE>NanosecondsToAbsolute</CODE>,          <CODE>DurationToAbsolute</CODE>,          <CODE>AddAbsoluteToAbsolute</CODE>,          <CODE>SubAbsoluteFromAbsolute</CODE>,          <CODE>AddNanosecondsToAbsolute</CODE>,          <CODE>AddDurationToAbsolute</CODE>,          <CODE>SubNanosecondsFromAbsolute</CODE>,          <CODE>SubDurationFromAbsolute</CODE>,          <CODE>AbsoluteDeltaToNanoseconds</CODE>,          <CODE>AbsoluteDeltaToDuration</CODE>,          <CODE>DurationToNanoseconds</CODE>, and          <CODE>NanosecondsToDuration</CODE>. The routine          <CODE>DelayForHardware</CODE> is MP-safe but you should use          the routine <CODE>MPDelayUntil</CODE> instead, because it          yields better CPU utilitization and power savings.</P>          <P>All of the DriverServicesLib string manipulation routines          are MP-safe. This includes the routines          <CODE>CStrCopy</CODE>, <CODE>PStrCopy</CODE>,          <CODE>CStrNCopy</CODE>, <CODE>PStrNCopy</CODE>,          <CODE>CStrCat</CODE>, <CODE>PStrCat</CODE>,          <CODE>CStrNCat</CODE>, <CODE>PStrNCat</CODE>,          <CODE>PStrToCStr</CODE>, <CODE>CStrToPStr</CODE>,          <CODE>CStrCmp</CODE>, <CODE>PStrCmp</CODE>,          <CODE>CStrNCmp</CODE>, <CODE>PStrNCmp</CODE>,          <CODE>CStrLen</CODE>, and <CODE>PStrLen</CODE>.</P>          <P>The <CODE>DriverServicesLib</CODE> routine          <CODE>BlockCopy</CODE> is MP-safe.</P>          <P>See <a href="../../documentation/hardware/DeviceManagers/pci_srvcs/pci_cards_drivers/index.html">Designing          PCI Cards and Drivers for Power Macintosh Computers</A> for          more details on these routines.</P>          <H3>File Manager</H3>          <P>In Mac OS 9.0 and above, it is safe to call the bulk of          the File Manager API synchronously from an MP task. See the          <a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Preemptive          Task-Safe Mac OS System Software Functions</A> section of          <a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Adding          Multitasking Capability to Applications Using          Multiprocessing Services</A>.</P>          <CENTER ><TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   See the section <A HREF="#CarbonLibVsMP">CarbonLib                   and MP</A> for an                   important caveat.</P>                </TD>             </TR>          </table><BR>         <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>WARNING:</B><BR>                   Rather than test for a specific system software                   version, your application should test for this                   functionality by calling <CODE>Gestalt</CODE> with                   the <CODE>gestaltMPCallableAPIsAttr</CODE> selector                   and checking the <CODE>gestaltMPFileManager</CODE>                   bit in the response.</P>                </TD>             </TR>          </table><BR>          </CENTER>          <P>The File Manager is described in detail by a number of          <a href="../../documentation/macos8/Files/FileManager/filemanager.html">documents</A>          on the developer web site.</P>          <H3>Device Manager</H3>          <P>In Mac OS 9.0 and above it is safe to call core Device          Manager routines synchronously from an MP task. See the          <a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Preemptive          Task-Safe Mac OS System Software Functions</A> section of          <a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Adding          Multitasking Capability to Applications Using          Multiprocessing Services</A>.</P>          <CENTER ><TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   See the section <A HREF="#CarbonLibVsMP">CarbonLib                   and MP</A> for an                   important caveat.</P>                </TD>             </TR>          </table><BR>         <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>WARNING:</B><BR>                   Rather than test for a specific system software                   version, your application should test for this                   functionality by calling <CODE>Gestalt</CODE> with                   the <CODE>gestaltMPCallableAPIsAttr</CODE> selector                   and checking the                   <CODE>gestaltMPDeviceManager</CODE> bit in the                   response.</P>                </TD>             </TR>          </table><BR>          </CENTER>          <P>See <a href="../../documentation/mac/Devices/Devices-2.html">Inside          Macintosh: Devices</A> for more details on these          routines.</P>          <H3>Process Manager</H3>          <P>In Mac OS 9.0 and above it is safe to call the Process          Manager routine <CODE>WakeUpProcess</CODE> from an MP          task.</P>          <CENTER ><TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   See the section <A HREF="#CarbonLibVsMP">CarbonLib                   and MP</A> for an                   important caveat.</P>                </TD>             </TR>          </table><BR>         <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   This feature is very important if you need to                   communicate between MP tasks and your main thread.                   Imagine you have a network server that does all of                   its core work in MP tasks. The main thread's only                   job is to start the MP tasks and then block waiting                   for user interface events. It waits for events by                   calling <CODE>WaitNextEvent</CODE> with a very                   large sleep time. This makes it friendly to other                   users of the CPU and maximizes power savings when                   the server is not busy.</P>                   <P>Now let's imagine that the server supports                   remote administration and some remote                   administration requests must be performed by the                   main thread. A good example of this is a request to                   quit the server. The MP task handling that request                   must wake up the main thread, even though the main                   thread is blocked inside a call to                   <CODE>WaitNextEvent</CODE>. It can do this by                   calling <CODE>WakeUpProcess</CODE>.</P>                </TD>             </TR>          </table><BR>          </CENTER>          <P><CODE>WakeUpProcess</CODE> is documented in <a href="../../documentation/mac/Processes/Processes-46.html">Inside          Macintosh: Processes</A>.</P>          <H3>Deferred Task Manager</H3>          <P>In Mac OS 9.0 and above it is safe to call the Deferred          Task Manager routine <CODE>DTInstall</CODE> from an MP          task.</P>          <CENTER ><TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   See the section <A HREF="#CarbonLibVsMP">CarbonLib                   and MP</A> for an                   important caveat.</P>                </TD>             </TR>          </table><BR>         <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   Do not underestimate the utility of this facility.                   It provides a general purpose low-latency                   communications mechanism between MP tasks and any                   "blue" code that can be called at interrupt time.                   If you need to call an <a href="tn1104.html">interrupt-safe</A>                   (but not MP-safe) routine from an MP task, you can                   use <CODE>DTInstall</CODE> to schedule a deferred                   task to do the work. The OTMP library (discussed in                   the next section) uses this technique                   extensively.</P>                </TD>             </TR>          </table><BR>          </CENTER>          <P><CODE>DTInstall</CODE> is documented in <a href="../../documentation/mac/Processes/Processes-130.html">Inside          Macintosh: Processes</A>.</P>          <H3>Open Transport</H3>          <P>Many Open Transport utility routines are MP-safe. These          routines are summarized in Tables 1 through 11.</P>          <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 1</B>. MP-safe OT debugging                   utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTDebugStr</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTDebugBreak</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTDebugStr</CODE></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTDebugTest</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTDebugStr</CODE></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAssert</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTDebugStr</CODE></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTDebugBreak2</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTDebugStr</CODE></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTDebugTest2</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTDebugStr</CODE></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </table><BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 2</B>. OT port reference                   manipulators</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCreatePortRef</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetDeviceTypeFromPortRef</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetBusTypeFromPortRef</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetSlotFromPortRef</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetDeviceTypeInPortRef</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetBusTypeInPortRef</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCreateNuBusPortRef</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTCreatePortRef</CODE></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCreatePCIPortRef</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTCreatePortRef</CODE></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCreatePCCardPortRef</CODE></P>                         </TD>                         <td align="left">                            <P>macro that calls                            <CODE>OTCreatePortRef</CODE></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 3</B>. OT buffer manipulation</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitBufferInfo</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTNextLookupBuffer</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTNextOption</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTFindOption</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OPT_NEXTHDR</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>datamsg</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTBufferDataSize</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTReadBuffer</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTReleaseBuffer</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>StoreIntoNetbuf</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>StoreMsgIntoNetbuf</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 4</B>. OT memory and string                   utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTMemcpy</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTMemcmp</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTMemmove</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTMemzero</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTMemset</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTStrLength</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTStrCopy</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTStrCat</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTStrEqual</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 5</B>. OT list utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetLinkObject</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTLIFOEnqueue</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTLIFODequeue</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTLIFOStealList</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTReverseList</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAddFirst</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAddLast</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTRemoveFirst</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTRemoveLast</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetFirst</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetLast</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTIsInList</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTFindLink</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTRemoveLink</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTFindAndRemoveLink</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetIndexedLink</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTEnqueue</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTDequeue</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 6</B>. OT atomic utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAtomicSetBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAtomicClearBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAtomicTestBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCompareAndSwapPtr</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCompareAndSwap32</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCompareAndSwap16</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCompareAndSwap8</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAtomicAdd32</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAtomicAdd16</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAtomicAdd8</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTClearLock</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAcquireLock</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetFirstClearBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTClearBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTTestBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 7</B>. TCP/IP utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>SET_TOS</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitInetAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitDNSAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInetStringToHost</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInetHostToString</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 8</B>. AppleTalk utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>IsAppleTalkEvent</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCopyDDPAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitDDPAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitNBPAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitDDPNBPAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCompareDDPAddresses</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitNBPEntity</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetNBPEntityLengthAsAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetAddressFromNBPEntity</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetAddressFromNBPString</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetNBPEntityFromAddress</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetNBPName</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetNBPType</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetNBPZone</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTExtractNBPName</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTExtractNBPType</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTExtractNBPZone</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 9</B>. Ethernet utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCompare48BitAddresses</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCopy48BitAddress</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTClear48BitAddress</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCompare8022SNAP</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCopy8022SNAP</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTIs48BitBroadcastAddress</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSet48BitBroadcastAddress</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTIs48BitZeroAddress</CODE></P>                         </TD>                         <td align="left">                            <P>macro</P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 10</B>. Serial utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH WIDTH=280>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td width=280 align=left>                            <P><CODE>OTSerialHandshakeData</CODE></P>                         </TD>                         <td align="left">                            <P>macro/inline</P>                         </TD>                      </TR>                      <TR>                         <td width=280 align=left>                            <P><CODE>OTSerialSetErrorCharacter</CODE></P>                         </TD>                         <td align="left">                            <P>macro/inline</P>                         </TD>                      </TR>                      <TR>                         <td width=280 align=left> <P><CODE>OTSerialSetErrorCharacterWithAlternate</CODE></P>                         </TD>                         <td align="left">                            <P>macro/inline</P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 11</B>. OT advanced utilities</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH>                            <P ALIGN=left>Routine</P>                         </TH>                         <TH>                            <P ALIGN=left>Comment</P>                         </TH>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetFirstClearBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTClearBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTSetBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTTestBit</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTCalculateHashListMemoryNeeds</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitHashList</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTAddToHashList</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTRemoveLinkFromHashList</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTIsInHashList</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTFindInHashList</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTRemoveFromHashList</CODE></P>                         </TD>                         <td align="left">                            <P>still need mutual exclusion, see                            below</P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetRandomSeed</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTGetRandomNumber</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTInitGate</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTEnterGate</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                      <TR>                         <td align="left">                            <P><CODE>OTLeaveGate</CODE></P>                         </TD>                         <td align="left">                            <P></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>          </CENTER>          <P>Some of the Open Transport utility routines (those that          manipulate OT lists and hash tables) are safe to call from          an MP task, but the underlying data structure is not          re-entrant. These routines are tagged with the text "still          need mutual exclusion" in the tables above. If you call          these routines from preemptive code, you must be sure to          synchronize your operations on any given object such that          the object is not corrupted by re-entrant calls. One way to          do this is to have each MP task that operates on an object          enter a critical section before calling OT and leave the          critical section once OT returns.</P>          <P>The Open Transport routines listed above are inherently          MP-safe, but do not let you send or received network data.          They are useful utilities only. If you wish to send or          receive network data from an MP task, you must use the OTMP          library. Table 12 shows the appropriate OTMP routine to call          for any given OT routine.</P>          <P>The OTMP library is available as <a href="../../samplecode/Sample_Code/Networking.htm">DTS          sample code</A>. It requires Mac OS 9.0 or later. See the          documentation that comes with the library for more details          on how to use it.</P>          <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=500>             <TR>                <td align="left">                   <P>&nbsp;<B>Table 12</B>. Routines supported by the                   OTMP library</P>                   <TABLE BORDER=1 WIDTH="100%">                      <TR>                         <TH WIDTH=208>                            <P ALIGN=left>Routine Needed</P>                         </TH>                         <TH>                            <P ALIGN=left>OTMP Routine to Call</P>                         </TH>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>InitOpenTransportInContext</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>InitOpenTransportMPXInContext</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>InitOpenTransport</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>InitOpenTransportMPXInContext</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>CloseOpenTransportInContext</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>CloseOpenTransportMPXInContext</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>CloseOpenTransport</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>CloseOpenTransportMPXInContext</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTOpenEndpointInContext</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXOpenEndpointQInContext</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTOpenEndpoint</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXOpenEndpointQInContext</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTCloseProvider</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXCloseProvider</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTIoctl</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXIoctl</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTCancelSynchronousCalls</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXCancelSynchronousCalls</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTGetEndpointInfo</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXGetEndpointInfo</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTGetEndpointState</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXGetEndpointState</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTLook</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXLook</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTCountDataBytes</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXCountDataBytes</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTGetProtAddress</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXGetProtAddress</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTResolveAddress</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXResolveAddress</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTBind</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXBind</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTUnbind</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXUnbind</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTConnect</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXConnect</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTListen</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXListen</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTAccept</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXAccept</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTSndDisconnect</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXSndDisconnect</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTRcvDisconnect</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXRcvDisconnect</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTSndOrderlyDisconnect</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXSndOrderlyDisconnect</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTRcvOrderlyDisconnect</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXRcvOrderlyDisconnect</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTOptionManagement</CODE></P>                         </TD>                         <td align="left">                            <P>use                            <CODE>OTMPXOptionManagement</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTRcv</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXRcv</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTSnd</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXSnd</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTSndUData</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXSndUData</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTRcvUData</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXRcvUData</CODE></P>                         </TD>                      </TR>                      <TR>                         <td width=208 align=left>                            <P><CODE>OTRcvUDErr</CODE></P>                         </TD>                         <td align="left">                            <P>use <CODE>OTMPXRcvUDErr</CODE></P>                         </TD>                      </TR>                   </TABLE>                   <BR>                </TD>             </TR>          </TABLE>         <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   See the section <A HREF="#CarbonLibVsMP">CarbonLib                   and MP</A> for an                   important caveat.</P>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>Note:</B><BR>                   The OTMP library does not provide an equivalent for                   the <CODE>OTInetStringToAddress</CODE> routine.                   This is a deliberate omission. Most users of that                   routine would be better served by using                   <CODE>AF_DNS</CODE> addresses. See the discussion                   of addressing in <a href="../../documentation/mac/NetworkingOT/NetworkingWOT-19.html">Inside                   Macintosh: Networking with Open Transport</A> and                   the DTS sample code <a href="../../samplecode/Sample_Code/Networking/OTSimpleDownloadHTTP.htm">OTSimpleDownloadHTTP</A>                   for details.</P>                </TD>             </TR>          </TABLE>                   <BR>          <TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>Note:</B><BR>                   The techniques used by the OTMP library to layer a                   synchronous MP-safe API on top of an asynchronous                   interrupt-safe API are applicable to other problem                   domains, such as most traditional Mac OS I/O                   services.</P>                </TD>             </TR>          </table><br>          </CENTER>          <P ><a href="../../documentation/mac/NetworkingOT/NetworkingWOT-2.html">Inside          Macintosh: Networking with Open Transport</A> is the core          API reference for Open Transport.</P>          <P ><A HREF="#top">Back to top</A></P>                   <P><A NAME=CarbonLibVsMP></A></P>          <H2>CarbonLib and MP</H2>          <P>Due to a problem in current          versions of the CarbonLib extension [2563553], many          of the routines that were are documented as MP-safe in Mac          OS 9.0 and above are not MP-safe if any version of CarbonLib          prior to version 1.2.5 is installed. This problem affects both          InterfaceLib and CarbonLib applications. If the user has run          a CarbonLib application since the system was booted, you          will find that calling these routines from an MP task will          crash the system.</P>          <CENTER ><TABLE BORDER=0 CELLPADDING=3 WIDTH=550>             <TR>                <td bgcolor="#E6E6E6" align=left>                   <P><B>IMPORTANT:</B><BR>                   If your application uses the Multiprocessing Library                   routines, then you should ensure CarbonLib&nbsp;1.2.5                   (or later) is installed.</P>                </TD>             </TR>          </table><br>          </CENTER>          <P>This problem affects the following          system services as they are described in this          technote:</P>          <UL>             <LI>File Manager</LI>             <LI>Device Manager</LI>             <LI>Process Manager</LI>             <LI>Deferred Task             Manager</LI>             <LI>OTMP</LI>          </UL>          <P>The <a href="../../samplecode/Sample_Code/Networking.htm">OTMP</A>          sample code library contains an example of how you can          detect the presence of a CarbonLib with this          problem.</P>          <P ><A HREF="#top">Back to top</A></P>                            <P><A NAME=Summary></A></P>          <H2>Summary</H2>          <P >The set of MP-safe system routines has been          steadily growing since the release of Multiprocessing          Services 2.0. With Mac OS 8.6, only compute-bound          applications could use MP tasks in a useful way. With Mac OS          9.0 and OTMP, the set of MP-safe routines is now large enough          to support most I/O-bound applications. The time has come to          think about using MP tasks in your application, and exploit          the benefits available on both Mac OS 9 and X.</P>          <P ><A HREF="#top">Back to top</A></P>                            <P>&nbsp;<A NAME=references></A></P>          <H2>References</H2>          <P><a href="../../documentation/Carbon/oss/MultiPServices/multiprocessingservices.html">Adding          Multitasking Capability to Applications Using          Multiprocessing Services</A></P>          <P><a href="../../documentation/mac/NetworkingOT/NetworkingWOT-2.html">Inside          Macintosh: Networking with Open Transport</A></P>          <P><a href="../../documentation/mac/Processes/Processes-130.html">Inside          Macintosh: Processes</A></P>          <P><a href="../../documentation/mac/Memory/Memory-2.html">Inside          Macintosh: Memory</A></P>          <P><a href="../../documentation/mac/Devices/Devices-2.html">Inside          Macintosh: Devices</A></P>          <P><a href="../../documentation/hardware/DeviceManagers/pci_srvcs/pci_cards_drivers/index.html">Designing          PCI Cards and Drivers for Power Macintosh Computers</A></P>          <P><a href="http://developer.apple.com/tools/debuggers/MacsBug/">MacsBug          releases</A></P>          <P>DTS Technote 1104 <a href="tn1104.html">Interrupt-Safe          Routines</A></P>          <P>DTS Technote 1137 <a href="tn1137.html">Disabling          Interrupts on the Traditional Mac OS</A></P>          <P>DTS sample code <a href="../../samplecode/Sample_Code/Networking/OTSimpleDownloadHTTP.htm">OTSimpleDownloadHTTP</A></P>          <P ><A HREF="#top">Back to top</A></P>                  <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" height=23 align=middle alt="Acrobat gif" width=22></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (124K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tn2006.pdf">Download</A></P>               </TD>            </TR>                    </table>         <BR>                  <P ><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn2006.html%3Fid%3DDTS10003045-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn2006.html%3Fid%3DDTS10003045-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn2006.html%3Fid%3DDTS10003045-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
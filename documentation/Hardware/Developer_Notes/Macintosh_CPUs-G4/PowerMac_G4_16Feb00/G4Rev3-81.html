<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language = "JavaScript" src = "frametest.js"></script><TITLE> Aspects of the ROM-in-RAM Approach</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><A HREF="G4Rev3-80.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="G4Rev3-80.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="G4Rev3-82.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//	--></script><!-- end Show/Hide frames --></A><TABLE border="0" cellpadding="0" cellspacing="2" width="432">          <TR>        <TD><FONT face="Geneva,Helvetica,Arial" size="1">        <B>PATH<IMG src="images/space.gif" width="6" height="12"></B><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->         <B>></B> Power Mac G4 Developer Note                </FONT></TD>        </TR>        </TABLE><BR><hr></DIV><H1><A NAME="pgfId-4538"></A>Aspects of the ROM-in-RAM Approach</H1><P CLASS="T1-Text1"><A NAME="pgfId-4539"></A>Some aspects of the ROM-in-RAM approach are apparent in the operation of the system. </P><P CLASS="T1-Text1"><A NAME="pgfId-4847"></A><A HREF="G4Rev3-81.html#32626" CLASS="XRef">RAM Footprint</A></P><P CLASS="T1-Text1"><A NAME="pgfId-4852"></A><A HREF="G4Rev3-81.html#42074" CLASS="XRef">Startup Disk Control Panel</A></P><P CLASS="T1-Text1"><A NAME="pgfId-4862"></A><A HREF="G4Rev3-81.html#31803" CLASS="XRef">Memory Mapping</A></P><DIV><H3 CLASS="H3nb-Heading3"><A NAME="pgfId-4532"></A><A NAME="32626"></A>RAM Footprint<A NAME="marker-4343"></A></H3><P CLASS="T1-Text1"><A NAME="pgfId-3314"></A>The Power Mac G4 computer has its Mac OS ROM image stored in RAM. The area of RAM that contains the Mac OS ROM image is excluded from the available memory space and is marked as read-only. This removes approximately 3 megabytes of RAM from availability for other uses. In effect, a system with 64 megabytes of RAM appears to have only 61 megabytes available. </P></DIV><DIV><H3 CLASS="H3nb-Heading3"><A NAME="pgfId-3315"></A><A NAME="42074"></A>Startup Disk Control Panel<A NAME="marker-5234"></A></H3><P CLASS="T1-Text1"><A NAME="pgfId-3316"></A>Setting the startup device from the Startup Disk control panel makes the changes to the boot process that are needed for the ROM-in-RAM approach. The Startup Disk control panel sets the Open Firmware's boot-device configuration variable by modifying the Open Firmware NV-RAM partition that contains the Open Firmware's configuration variables. </P><DIV><BLOCKQUOTE><H4 CLASS="ImportantHead"><A NAME="pgfId-15480"></A>IMPORTANT</H4><P CLASS="I-Important"><A NAME="pgfId-3317"></A>The previous API for controlling the startup device selection, using <TT CLASS="cv">_GetDefaultStartup</TT> and<TT CLASS="cv"> _SetDefaultStartup</TT>, is not effective on computers that use the ROM-in-RAM approach.  </P></BLOCKQUOTE></DIV></DIV><DIV><H3 CLASS="H3nb-Heading3"><A NAME="pgfId-3327"></A><A NAME="31803"></A>Memory Mapping<A NAME="marker-3326"></A></H3><P CLASS="T1-Text1"><A NAME="pgfId-3328"></A>With the ROM-in-RAM approach, memory is not mapped one-to-one as it has been for earlier PCI-based Macintosh computers. This could be a compatibility issue with some software. Software that assumes the logical and physical addresses are the same will fail, even when virtual memory is not on. Well-behaved software--that is, software that always calls the <TT CLASS="cv">LogicalToPhysical</TT> or <TT CLASS="cv">PrepareMemoryForIO</TT> functions when it needs a physical memory address--will continue to work. <A NAME="marker-5236"></A><A NAME="marker-5352"></A></P><P CLASS="T1-Text1"><A NAME="pgfId-5170"></A>For more information see Technical Q&amp;A DV 33, <I CLASS="italics">PrepareMemoryForIO for the New World</I>, available on Apple's technote website at </P><P CLASS="T1-Text1"><A NAME="pgfId-5172"></A><a href="http://developer.apple.com/qa/dv/dv33.html" CLASS="URL" target="_top">http://developer.apple.com/qa/dv/dv33.html</A></P></DIV><HR>&#169 1999-2000 Apple Computer, Inc. &#150 (Last Updated 15 Feb 00)<P><A HREF="G4Rev3-80.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="G4Rev3-80.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="G4Rev3-82.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//	--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
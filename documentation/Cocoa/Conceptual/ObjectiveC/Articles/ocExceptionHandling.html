<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>The Objective-C 2.0 Programming Language: Exception Handling</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Exception Handling"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001163-CH13" title="Exception Handling"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../ObjectiveCLanguage-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000856" target="_top">Objective-C Language</a> &gt; <a href="../Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163-CH1-SW2">The Objective-C 2.0 Programming Language</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ocSelectors.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ocThreading.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001163-CH13-SW1" title="Exception Handling"></a><h1>Exception Handling</h1><p><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_121"></a>The Objective-C language has an exception-handling syntax similar to that of Java and C++. Coupled with the use of the <a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_122"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_123"></a><code>NSException</code>, <code>NSError</code>, or custom classes, you can add robust error-handling to your programs. This article provides a summary of exception syntax and handling; for more details, see <em><a href="../../Exceptions/index.html#//apple_ref/doc/uid/10000012i" target="_top">Exception Programming Topics for Cocoa</a></em>.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ocExceptionHandling.html#//apple_ref/doc/uid/TP30001163-CH13-SW2">Enabling Exception-Handling</a>
				
			<br/>
			
        
			
			
				<a href="ocExceptionHandling.html#//apple_ref/doc/uid/TP30001163-CH13-SW3">Exception Handling</a>
				
			<br/>
			
        
			
			
				<a href="ocExceptionHandling.html#//apple_ref/doc/uid/TP30001163-CH13-TPXREF169">Catching Different Types of Exception</a>
				
			<br/>
			
        
			
			
				<a href="ocExceptionHandling.html#//apple_ref/doc/uid/TP30001163-CH13-TPXREF168">Throwing Exceptions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001163-CH13-SW2" title="Enabling Exception-Handling"></a><h2>Enabling Exception-Handling</h2><p>Using GNU Compiler Collection (GCC) version 3.3 and later, Objective-C provides language-level support for exception handling. To turn on support for these features<a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_124"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_125"></a>, use the <code>-fobjc-exceptions</code> switch of the GNU Compiler Collection (GCC) version 3.3 and later. (Note that this renders the application runnable only in Mac OS X v10.3 and later<a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_126"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_127"></a> because runtime support for exception handling and synchronization is not present in earlier versions of the software.)</p><a name="//apple_ref/doc/uid/TP30001163-CH13-SW3" title="Exception Handling"></a><h2>Exception Handling</h2><p>An exception is a special condition that interrupts the normal flow of program execution. There are a variety of reasons why an exception may be generated (exceptions are typically said to be <strong>raised</strong> or <strong>thrown</strong>), by hardware as well as software. Examples include arithmetical errors such as division by zero, underflow or overflow, calling undefined instructions (such as attempting to invoke an unimplemented method), and attempting to access a collection element out of bounds.</p><p>Objective-C’s exception support revolves around four compiler directives: <code>@try</code>, <code>@catch</code>, <code>@throw</code>, and <code>@finally</code>:</p><ul class="ul"><li class="li"><p>Code that can potentially throw an exception is enclosed in a <code>@try</code> block.</p></li><li class="li"><p>A <code>@catch()</code><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_128"></a> block contains exception-handling logic for exceptions thrown in a <code>@try</code><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_129"></a> block. You can have multiple <code>@catch()</code> blocks to catch different types of exception. (This is illustrated in <span class="content_text"><a href="ocExceptionHandling.html#//apple_ref/doc/uid/TP30001163-CH13-171873">“Catching Different Types of Exception.”</a></span>)</p></li><li class="li"><p>A <code>@finally</code><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_130"></a> block contains code that must be executed whether an exception is thrown or not.</p></li><li class="li"><p>You use the <code>@throw</code><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_131"></a> directive to throw an exception, which is essentially an Objective-C object. You typically use an <a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_132"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_133"></a><code>NSException</code> object, but are not required to.</p></li></ul><p>The example below depicts a simple exception-handling algorithm:</p><div class="codesample"><table><tr><td scope="row"><pre>Cup *cup = [[Cup alloc] init];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@try {<span></span></pre></td></tr><tr><td scope="row"><pre>    [cup fill];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@catch (NSException *exception) {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSLog(@"main: Caught %@: %@", [exception name], [exception  reason]);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@finally {<span></span></pre></td></tr><tr><td scope="row"><pre>    [cup release];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30001163-CH13-171873" title="Catching Different Types of Exception"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-TPXREF169" title="Catching Different Types of Exception"></a><h2>Catching Different Types of Exception</h2><p>To catch an exception thrown in a <code>@try</code> block, use one or more <code>@catch()</code><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_134"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_135"></a>blocks following the <code>@try</code> block. The <code>@catch()</code> blocks should be ordered from most-specific to the least-specific. That way you can tailor the processing of exceptions as groups, as shown in <span class="content_text">Listing 10-1</span>.</p><a name="//apple_ref/doc/uid/TP30001163-CH13-171908" title="Listing 10-1An exception handler"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-BCICHFFA" title="Listing 10-1An exception handler"></a><p class="codesample"><strong>Listing 10-1&nbsp;&nbsp;</strong>An exception handler</p><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_136"></a><div class="codesample"><table><tr><td scope="row"><pre>@try {<span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@catch (CustomException *ce) {  // 1<span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@catch (NSException *ne) {  // 2<span></span></pre></td></tr><tr><td scope="row"><pre>    // Perform processing necessary at this level.<span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@catch (id ue) {<span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@finally {  // 3<span></span></pre></td></tr><tr><td scope="row"><pre>    // Perform processing necessary whether an exception occurred  or not.<span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The following list describes the numbered code-lines:</p><ol class="ol"><li class="li"><p>Catches the most specific exception type.</p></li><li class="li"><p>Catches a more general exception type.</p></li><li class="li"><p>Performs any clean-up processing<a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_137"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_138"></a> that must always be performed, whether exceptions were thrown or not.<a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_139"></a></p></li></ol><a name="//apple_ref/doc/uid/TP30001163-CH13-171819" title="Throwing Exceptions"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-TPXREF168" title="Throwing Exceptions"></a><h2>Throwing Exceptions</h2><p><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_140"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_141"></a>To throw an exception you must instantiate an object with the appropriate information, such as the exception name and the reason it was thrown.</p><div class="codesample"><table><tr><td scope="row"><pre>NSException *exception = [NSException exceptionWithName:@"HotTeaException"<span></span></pre></td></tr><tr><td scope="row"><pre>                            reason:@"The tea is too hot"  userInfo:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>@throw exception;<span></span></pre></td></tr></table></div><div class="importantbox"><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_2" title="Important:"></a><p><strong>Important:</strong>&nbsp;In many environments, use of exceptions is fairly commonplace. For example, you might throw an exception to signal that a routine could not execute normally—such as when a file is missing or data could not be parsed correctly. Exceptions are resource-intensive in Objective-C. You should not use exceptions for general flow-control, or simply to signify errors. Instead you should use the return value of a method or function to indicate that an error has occurred, and provide information about the problem in an error object. For more information, see <em><a href="../../ErrorHandlingCocoa/index.html#//apple_ref/doc/uid/TP40001806" target="_top">Error Handling Programming Guide For Cocoa</a></em>.</p><p></p></div><p>Inside a <code>@catch()</code> block, you can re-throw the caught exception using the <code>@throw</code> directive without an argument. This can help make your code more readable.</p><p>You are not limited to throwing <code>NSException</code> objects. You can throw any Objective-C object as an exception object. The <code>NSException</code> class provides methods that help in exception processing, but you can implement your own if you so desire. You can also subclass <code>NSException</code><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_142"></a><a name="//apple_ref/doc/uid/TP30001163-CH13-DontLinkElementID_143"></a> to implement specialized types of exceptions, such as file-system exceptions or communications exceptions.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ocSelectors.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ocThreading.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-05-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocExceptionHandling.html%3Fid%3DTP30001163-4.9&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocExceptionHandling.html%3Fid%3DTP30001163-4.9&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocExceptionHandling.html%3Fid%3DTP30001163-4.9&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
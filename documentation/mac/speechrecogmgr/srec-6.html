<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Speech Objects</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING6></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="srec-5.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="srec-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="srec-87.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="srec-7.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="srec-2.html"><B>Speech Recognition Manager</B></A> / <BR><DD><A HREF="srec-4.html"><B>Chapter 1 - Speech Recognition Manager</B></A> / <A HREF="srec-5.html"><B>About the Speech Recognition Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING6-0></A>
<H2>Speech Objects</H2>
 <A NAME=MARKER-2-61></A><A NAME=MARKER-2-62></A>The Speech Recognition Manager is <I>object oriented</I> in the sense that many of its capabilities are accessed by creating and manipulating speech objects. A <B>speech object</B> is an instance of a <B>speech class,</B> which defines a set of properties for objects in the class. The behavior of a speech object is determined by the set of properties associated with the object's class. Here are the basic type definitions for speech objects:<P>
<PRE>
typedef struct OpaqueSRSpeechObject*SRSpeechObject;
typedef SRSpeechObject        SRRecognitionSystem;
typedef SRSpeechObject        SRRecognizer;
typedef SRSpeechObject        SRSpeechSource;
typedef SRSpeechObject        SRLanguageObject;
typedef SRSpeechSource        SRRecognitionResult;
</PRE>
 <A NAME=MARKER-2-63></A>As these definitions make clear, all speech classes are arranged in the <B>speech class hierarchy,</B> a hierarchical structure that provides for inheritance and overriding of class data and methods. <A HREF=#MARKER-9-64>Figure 1-2</A> shows the speech class hierarchy.<P>
<B>Figure 1-2  <A NAME=MARKER-9-64></A>The speech class hierarchy</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/SR-02.jpg"><P>
 As you can see, words, phrases, paths, and language models are all subclasses of the language object class. In addition, language objects, recognition systems, recognizers, and recognition results are all subclasses of the speech object class.<P>
 This hierarchy is useful for determining which Speech Recognition Manager routines operate on which types of objects. A function that takes a parameter of type <CODE>SRSpeechObject</CODE> can operate on an object located anywhere in this hierarchy, because all speech classes are derived from the <CODE>SRSpeechObject</CODE> class. (So, for example, you can use the <CODE>SRGetProperty</CODE> function to get a property of a recognizer, a recognition system, a word, a phrase, and so on.) A function that takes a parameter of type <CODE>SRLanguageObject</CODE> can operate on any language object.<A NAME=MARKER-2-65></A><A NAME=MARKER-2-66></A><P>
<A NAME=HEADING6-10></A>
<H3><A NAME=MARKER-9-67></A>Object References</H3>
 <A NAME=MARKER-2-68></A>You access a speech object by using an <B>object reference</B> (or, more briefly, a <B>reference</B>). You obtain a reference whenever you create an object (for instance, by calling the <CODE>SRNewWord</CODE> function) or whenever you retrieve an object (for instance, by calling the <CODE>SRGetIndexedItem</CODE> function). A reference is essentially a tag for some private information maintained internally by the Speech Recognition Manager. The Speech Recognition Manager allocates space (usually in the system heap) for that information when you first create an object and returns a reference for that object to your application. You can dispose of that memory only indirectly, by calling <CODE>SRReleaseObject</CODE> to release an object.<P>
 It's possible to have more than one reference to a speech object. (For example, if you call the <CODE>SRGetIndexedItem</CODE> routine twice on the same speech object with the same index, you'll be given two different references to the same speech object.) For each speech object, the Speech Recognition Manager maintains a <B>reference count</B> (that is, the number of references that exist to that object).<P>
 Certain operations on a speech object increase its reference count, and other operations decrease it. When you first create a speech object (by calling a function beginning <CODE>SRNew</CODE>), its reference count is set to 1. When you retrieve an object (by calling a function beginning <CODE>SRGet</CODE>), the object's reference count is incremented by 1. When you release an object, the object's reference count is decremented by 1. If the reference count of an object becomes 0, the memory occupied by that object is disposed of.<A NAME=MARKER-2-70></A><P>
<DL>
<DT><B>IMPORTANT</B>
<DD>You must balance every function call that creates an object reference with a call to the <CODE>SRReleaseObject</CODE> function when you are finished using that reference. Failure to do so will result in a memory leak. Every call to a function of the form <CODE>SRNew<I>Object</I></CODE> or <CODE>SRGet<I>Object</I></CODE> that successfully returns an object reference must be balanced by a call to <CODE>SRReleaseObject</CODE>.<EM></EM><A NAME=MARKER-2-71></A>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING6-15></A>
<H3>Object Properties</H3>
 <A NAME=MARKER-2-72></A>Each type of speech object has one or more <B>properties</B> associated with it that control some of the object's behavior. For instance, a word has a spelling property that indicates how the word is spelled. A property is just an item of data associated with an object; this item of data has both a <B>property type</B> and a <B>property value.<A NAME=MARKER-2-73></A></B><P>
 The property types associated with an object depend on the location of that object in the speech class hierarchy. Every language object (that is, every instance of any subclass of the <CODE>SRLanguageObject</CODE> class) shares a number of properties, including properties that determine the spelling of the object, an application-defined reference constant for the object, and whether the object can meaningfully be repeated by the user. By contrast, a recognition system is not a language object and hence has no spelling property. Instead, recognition systems have other properties (for instance, the feedback and listening modes property mentioned later in the next section).<P>
 You can get or set a specific property of an object by calling the <CODE>SRGetProperty</CODE> and <CODE>SRSetProperty</CODE> functions. You indicate the object of which you want to get or set a property by passing an object reference. You indicate which property of that object you want to get or set by passing a <B>property selector.</B> For instance, the following lines of code set a word's reference constant property to a specified value.<A NAME=MARKER-2-74></A><P>
<PRE>
/* suppose that the word myWord has already been created */
unsigned long  myVal;
OSErr          myErr;

myVal = 3;
myErr = SRSetProperty(myWord, kSRRefCon, &amp;myVal, sizeof(myVal));
</PRE>
 The constant <CODE>kSRRefCon</CODE> is a property selector for the reference constant property of a language object. As shown later (in <A HREF=srec-12.html#MARKER-9-116>"Building a Language Model" on page 1-18</A> and <A HREF=srec-17.html#MARKER-9-146>"Interpreting Recognition Results" on page 1-31</A>), you'll probably use a language object's reference constant property to help you interpret the data passed to you in a recognition result. In general, all properties of an object have reasonable default values.<P>
 See <A HREF=srec-23.html#MARKER-9-170>"Recognition System Properties" on page 1-37</A>, <A HREF=srec-25.html#MARKER-9-192>"Recognizer Properties" on page 1-40</A>, <A HREF=srec-29.html#MARKER-9-249>"Recognition Result Properties" on page 1-46</A>, and <A HREF=srec-30.html#MARKER-9-258>"Language Object Properties" on page 1-47</A> for a description of the properties defined by the Speech Recognition Manager.<A NAME=MARKER-2-76></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="srec-5.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="srec-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="srec-87.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="srec-7.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="srec-3.html">&copy; Apple Computer, Inc.</A><br>22 JAN 1997<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

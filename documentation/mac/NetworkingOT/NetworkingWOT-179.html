<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTListen</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING179></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-178.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-180.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-127.html"><B>Chapter 22 - Endpoints Reference</B></A> / <A HREF="NetworkingWOT-146.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-176.html"><B>Establishing Connection</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING179-0></A>
<H3><A NAME=MARKER-9-205></A>OTListen</H3>
 Listens for an incoming connection request.<P>
<A NAME=HEADING179-2></A>
<H5>C INTERFACE</H5>
<PRE>
<A NAME=MARKER-11-206></A>OSStatus OTListen(EndpointRef ref, 
                     TCall* call);
</PRE>
<A NAME=HEADING179-4></A>
<H5>C++ INTERFACE</H5>
<PRE>
<A NAME=MARKER-12-207></A>OSStatus TEndpoint::Listen(TCall* call);
</PRE>
<A NAME=HEADING179-6></A>
<H5>PARAMETERS</H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The endpoint reference of the endpoint listening for the connection request.<P>
<DT><CODE>call</CODE>
<DD> A pointer to a <A HREF=NetworkingWOT-142.html#MARKER-9-103><CODE>TCall</CODE></A> structure that contains, on return, information about the address of the peer requesting the connection, option information, data associated with the connection request, and the connection ID for this connection. You must allocate buffers in which this information can be stored and specify the maximum length for each buffer.<P>
<DT>
<DD> The <CODE>call-&gt;addr.buf</CODE> field points to a buffer that will hold the address of the endpoint that requested the connection. Set the <CODE>call-&gt;addr.maxlen</CODE> field to the size of the buffer. <P>
<DT>
<DD> The <CODE>call-&gt;opt.buf</CODE> field points to a buffer that will hold the options that the peer has requested for this connection. Set the <CODE>call-&gt;opt.maxlen</CODE> field to the size of the buffer.<P>
<DT>
<DD> The <CODE>call-&gt;udata.buf</CODE> field points to a buffer that stores any data sent by the endpoint requesting the connection. Set the <CODE>call-&gt;udata.maxlen</CODE> field to the maximum size of this buffer.<P>
<DT>
<DD> The <CODE>call-&gt;sequence</CODE> field contains the connection ID of the incoming request<P>.
<DT><I>function result</I>
<DD> An error code. See Discussion.
</DL>
<A NAME=HEADING179-14></A>
<H5>DISCUSSION</H5>
 You use the <CODE>OTListen</CODE> function to listen for incoming connection requests.<P>
 If the endpoint is in synchronous mode and is blocking, the <CODE>OTListen</CODE> function returns when a connection request has arrived. On return, the function fills in the <CODE>TCall</CODE> structure referenced by the <CODE>call</CODE> parameter with information about the connection request. After retrieving the connection request using the <CODE>OTListen</CODE> function, you can reject the request using the <A HREF=NetworkingWOT-192.html#MARKER-9-236><CODE>OTSndDisconnect</CODE></A> function, or you can accept the request using the <A HREF=NetworkingWOT-180.html#MARKER-9-208><CODE>OTAccept</CODE></A> function.<P>
 If the endpoint is in asynchronous mode or is not blocking, the <CODE>OTListen</CODE> function returns any pending connection requests or returns the <CODE>kOTNoDataErr</CODE> result if there are no pending connection requests. Typically, you would call the <CODE>OTListen</CODE> function from within a notifier function in response to the <CODE>T_LISTEN</CODE> event..<P>
<A NAME=HEADING179-18></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Not all endpoints support the sending of data with a connection request. Examine the <CODE>connect</CODE> field of the <CODE>TEndpointInfo</CODE> structure for the endpoint to determine if the endpoint supports the sending of data and to determine the maximum size of the data.<P>
<A NAME=HEADING179-20></A>
<H5>SEE ALSO</H5>
 <A HREF=NetworkingWOT-414.html#MARKER-9-27>"AppleTalk Reference"</A>.<P>
 <A HREF=NetworkingWOT-27.html#MARKER-9-12>Table 4-4</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-178.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-180.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

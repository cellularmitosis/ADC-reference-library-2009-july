<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTSndRequest</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING185></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-184.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-186.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-127.html"><B>Chapter 22 - Endpoints Reference</B></A> / <A HREF="NetworkingWOT-146.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-184.html"><B>Functions for Connection-Oriented Transaction-Based Endpoints</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING185-0></A>
<H3><A NAME=MARKER-9-217></A>OTSndRequest</H3>
 Sends a request to a connection-oriented transaction-based endpoint.<P>
<A NAME=HEADING185-2></A>
<H5>C INTERFACE</H5>
<PRE>
<A NAME=MARKER-11-218></A>OSStatus OTSndRequest(EndpointRef ref,
                                         TRequest* req, 
                                         OTFlags reqFlags);
</PRE>
<A NAME=HEADING185-4></A>
<H5>C++ INTERFACE</H5>
<PRE>
<A NAME=MARKER-12-219></A>OSStatus TEndpoint::SndRequest(TRequest* req,
                     OTFlags reqFlags);
</PRE>
<A NAME=HEADING185-6></A>
<H5>PARAMETERS</H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The endpoint reference of the endpoint making the request.<P>
<DT><CODE>req</CODE>
<DD> A pointer to a <A HREF=NetworkingWOT-143.html#MARKER-9-106><CODE>TRequest</CODE></A> structure that contains information about the request, options for this request, and the transaction ID of the request. You must allocate buffers for this information and specify their size.<P>
<DT>
<DD> The<CODE> req-&gt;data.buf</CODE> field is apointer to a buffer that contains the request. Set the <CODE>req-&gt;data.len</CODE> field to the size of the request data. The size of the request cannot exceed the value specified for the <CODE>etsdu</CODE> field of the <CODE>TEndpointInfo</CODE> structure for the endpoint.<P>
<DT>
<DD> The<CODE> req-&gt;opt.buf</CODE> field is a pointer to a buffer that contains option values you want to negotiate for this request. Set the <CODE>req-&gt;opt.len</CODE> field to the size of the option data. Set the <CODE>opt.len</CODE> field to 0 if there are no options.<P>
<DT>
<DD> The<CODE> req-&gt;sequence</CODE> field specifies a unique non-zero number of your choice that identifies this request.<P>
<DT><CODE>reqFlags</CODE>
<DD> A bitmapped 32-bit value specifying whether you are sending request data using additional calls to this function (<CODE>T_MORE</CODE>) and whether you plan to acknowledge replies (<CODE>T_ACKNOWLEGED</CODE>). Use the bitwise <CODE>OR</CODE> operator to set both bits.<P>
<DT><I>function result</I>
<DD> An error code. See <A HREF=NetworkingWOT-479.html#MARKER-9-72>Appendix B</A>, and Discussion.
</DL>
<A NAME=HEADING185-14></A>
<H5>DISCUSSION</H5>
 You use the <CODE>OTSndRequest</CODE> function to initiate a transaction for a connection-oriented transaction-based endpoint. Call the <A HREF=NetworkingWOT-188.html#MARKER-9-226><CODE>OTRcvReply</CODE></A> function to read the reply to your request. <P>
 By default, delivery is guaranteed for you, but not for the responder. That is, you will always find out whether your request was received, but the responder only receives acknowledgment that you received the reply if you set the <CODE>T_ACKNOWLEDGED</CODE> bit in the <CODE>reqFlags</CODE> parameter when you send the request. <P>
 If the responder is an Open Transport endpoint, its provider generates a <CODE>T_REPLYCOMPLETE</CODE> event when you have read the reply. This happens whether or not the <CODE>T_ACKNOWLEDGED</CODE> bit is set; but if it is set, this guarantees that the reply was delivered. If you don't set this flag, the responder's call to the <CODE>OTSndReply</CODE> function returns right away, and the responding endpoint receives no additional information as to whether the reply was received and the data was read.<P>
 Setting the <CODE>T_MORE</CODE> bit tells the endpoint provider that you are using several calls to the <CODE>OTSndRequest</CODE> function to send the request data. Note that even though you are using several calls, the request data, put all together, must still not exceed the value specified for the <CODE>etsdu</CODE> field in the endpoint's <CODE>TEndpointInfo</CODE> structure.<P>
 If the endpoint is in synchronous blocking mode and flow-control restrictions prevent the endpoint provider from accepting the <CODE>OTSndRequest</CODE> function, Open Transport retries the operation until flow-control restrictions are lifted.<P>
 If the endpoint is in asynchronous or nonblocking mode and flow-control restrictions prevent the endpoint provider from accepting the <CODE>OTSndRequest</CODE> function, Open Transport returns the <CODE>kOTFlowErr</CODE> result. When flow-control restrictions are lifted, the provider issues a <CODE>T_GODATA</CODE> event, which you can retrieve using your notifier function or by polling the endpoint using the <A HREF=NetworkingWOT-156.html#MARKER-9-143><CODE>OTLook</CODE></A> function. When you get this event, you can try sending the request again.<P>
 The next table shows how the endpoint's mode of execution and blocking status affects the behavior of the <CODE>OTSndRequest</CODE> function.<P>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Blocking<TH>Nonblocking<TR>
<TD>Synchronous<TD>The function returns when the provider lifts flow-control restrictions and the request has been sent to the protocol.<TD>The function returns if flow-control restrictions are in effect or the request data has been sent to the protocol.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result is never returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TR>
<TD>Asynchronous&nbsp;&nbsp;<TD>The function returns immediately.<TD>The function returns immediately.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.</TABLE>
<P>
<A NAME=HEADING185-22></A>
<H5>SEE ALSO</H5>
 <A HREF=NetworkingWOT-414.html#MARKER-9-27>"AppleTalk Reference"</A>.<P>
 <A HREF=NetworkingWOT-27.html#MARKER-9-12>Table 4-4</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-184.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-186.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

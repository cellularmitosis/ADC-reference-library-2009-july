<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SndNewChannel (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING97></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-96.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-98.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-44.html"><B>Chapter 2 - Sound Manager</B></A> / <A HREF="Sound-62.html"><B>Sound Manager Reference</B></A><BR><DL><DD><A HREF="Sound-88.html"><B>Sound Manager Routines</B></A> / <A HREF="Sound-96.html"><B>Allocating and Releasing Sound Channels</B></A></DL></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING97-0></A>
<H3><A NAME=MARKER-9-844></A>SndNewChannel<A NAME=MARKER-2-845></A></H3>
 You can use the <CODE>SndNewChannel</CODE> function to allocate a new sound channel.<A NAME=MARKER-2-846></A><P>
<PRE>
FUNCTION SndNewChannel (VAR chan: SndChannelPtr; synth: Integer; 
                        init: LongInt; userRoutine: ProcPtr): 
                        OSErr;
</PRE>
<DL>
<DT><CODE>chan</CODE>
<DD> A pointer to a sound channel record. You can pass a pointer whose value is <CODE>NIL</CODE> to force the Sound Manager to allocate the sound channel record internally.
<DT><CODE>synth</CODE>
<DD> The sound data type you intend to play on this channel. If you do not want to specify a specific data type, pass 0 in this parameter. You might do this if you plan to use the channel to play a single sound resource that itself specifies the sound's data type.
<DT><CODE>init</CODE>
<DD> The desired initialization parameters for the channel. If you cannot determine what types of sounds you will be playing on the channel, pass 0 in this parameter. Only sounds defined by wave-table data and sampled-sound data currently use the <CODE>init</CODE> options. You can use the <CODE>Gestalt</CODE> function to determine if a sound feature (such as stereo output) is supported by a particular computer.
<DT><CODE>userRoutine</CODE>
<DD> A pointer to a callback procedure that the Sound Manager executes whenever it receives a <CODE>callBackCmd</CODE> command. If you pass <CODE>NIL</CODE> as the <CODE>userRoutine</CODE> parameter, then any <CODE>callBackCmd</CODE> commands sent to this channel are ignored. 
</DL>
<A NAME=HEADING97-7></A>
<H5>DESCRIPTION</H5>
 The <CODE>SndNewChannel</CODE> function internally allocates memory to store a queue of sound commands. If you pass a pointer to <CODE>NIL</CODE> as the <CODE>chan</CODE> parameter, the function also allocates a sound channel record in your application's heap and returns a pointer to that record. If you do not pass a pointer to <CODE>NIL</CODE> as the <CODE>chan</CODE> parameter, then that parameter must contain a pointer to a sound channel record.<P>
 If you pass a pointer to <CODE>NIL</CODE> as the <CODE>chan</CODE> parameter, then the amount of memory the <CODE>SndNewChannel</CODE> function allocates to store the sound commands is enough to store 128 sound commands. However, if you pass a pointer to the sound channel record rather than a pointer to <CODE>NIL</CODE>, the amount of memory allocated is determined by the <CODE>qLength</CODE> field of the sound channel record. Thus, if you wish to control the size of the sound queue, you must allocate your own sound channel record. Regardless of whether you allocate your own sound channel record, the Sound Manager allocates memory for the sound command queue internally.<P>
 The <CODE>synth</CODE> parameter specifies the sound data type you intend to play on this channel. You can use these constants to specify the data type:<P>
<PRE>
CONST
   squareWaveSynth         = 1;        {square-wave data}
   waveTableSynth          = 3;        {wave-table data}
   sampledSynth            = 5;        {sampled-sound data}
</PRE>
 In Sound Manager versions earlier than version 3.0, only one data type can be produced at any one time. As a result, <CODE>SndNewChannel</CODE> may fail if you attempt to open a channel specifying a data type other than the one currently being played.<P>
 To specify a sound output device other than the current sound output device, pass the value <CODE>kUseOptionalOutputDevice</CODE> in the <CODE>synth</CODE> parameter and the signature of the desired sound output device component in the <CODE>init</CODE> parameter.<P>
<PRE>
CONST
   kUseOptionalOutputDevice      = -1;
</PRE>
 The ability to redirect output away from the current sound output device is intended for use by specialized applications that need to use a specific sound output device. In general, your application should always send sound to the current sound output device selected by the user.<P>
<A NAME=HEADING97-16></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Because the <CODE>SndNewChannel</CODE> function allocates memory, you should not call it at interrupt time.<P>
<A NAME=HEADING97-18></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>resProblem<TD>-204<TD>Problem loading the resource<TR>
<TD>badChannel<TD>-205<TD>Channel is corrupt or unusable</TABLE>
</H5>
<A NAME=HEADING97-19></A>
<H5>SEE ALSO</H5>
 For an example of a routine that uses the <CODE>SndNewChannel</CODE> function, see <A HREF=Sound-51.html#MARKER-9-140>Listing 2-1 on page 2-20</A>.<P>
 <A NAME=MARKER-2-150></A>For information on the format of a callback procedure, see <A HREF=Sound-130.html#MARKER-9-935>"Callback Procedures" on page 2-152</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-96.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-98.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">    <title>Technical Note TN1168: The Care And Feeding Of Runtime.exec</title>    <meta name="keywords" content="Runtime.exec mrj">    <meta name="Description" content="This technote for jdk 1.1.x on Mac OS Classic describes MRJ 2.x's implementation of Runtime.exec, and how it differs from that of the JDK. Runtime.exec( ) is probably the single least cross-platform-compatible part of the Java API set."><meta name="categories" content="Java"><meta name="week-posted" content="Jan 31, 2000 - Feb 4, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10003007" title="The Care And Feeding Of Runtime.exec"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxJava-date.html">Java</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Java/idxPorting-date.html" target="_blank">Java > Porting</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1168</div>
<div id="pageheadsub">The Care And Feeding Of Runtime.exec</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">   <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">     <tr><td width=300 valign="top" align=left scope="row">    <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr><td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>  </tr>  <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left> <span id="menutitle">CONTENTS   <br>  <br> </span>   </td>  </tr>  <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left> <!-- begin_toc --><P id = "menutext"><A HREF = "#Section1">The Platform-Dependent Perils of <CODE>Runtime.exec</CODE></A><BR><BR><A HREF = "#Section2">The Path To The App</A><BR><BR><A HREF = "#Section3">But I Came Here For An Argument!</A><BR><BR><A HREF = "#Section4">Launching Java</A><BR><BR><A HREF = "#Section5">Pasteurized Processes</A><BR><BR><A HREF = "#Section6">Example: Opening A URL In A Browser</A><BR><BR><A HREF = "#References">References</A><br><br><A HREF = "#Downloads">Downloadables</A></p> <!-- end_toc --></td>  </tr>  <tr>   <td width=300 align=left scope="row"> <img src="images/tnmenubottom.gif" alt="" width=300 height=16>   </td>  </tr>    </table></td>  <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext"><CODE>Runtime.exec( )</CODE> is probably the single leastcross-platform-compatible part of the Java API set. It assumes the existence of acommand-line interface to the OS and the ability to launch arbitrary apps that canaccept arbitrary parameters. Nevertheless, there are times when you need to use it -- for instance, to open a URL in a Web browser or to spawn a new Java process. This technote describes MRJ 2.x's implementation of <CODE>Runtime.exec</CODE>, and how it differs from that of the JDK.</p>       <!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Feb 14 2000]</h3><!-- end_date --></TD> </TR>    </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content --><A NAME="Section1"></A><H2>The Platform-Dependent Perils of <CODE>Runtime.exec</CODE></H2><P>The standard Java method <CODE>Runtime.exec</CODE> launches new processes on the machine on which it's running. You pass it a command line, either as a String of space-delimited arguments or as an array of argument Strings. According to the documentation in <I>The Java Class Libraries</I>:</P><BLOCKQUOTE><P>&quot;This method executes the <B>platform-dependent</B> program specified ...The program may be specified using a <B>platform-dependent</B> absolute pathnameor as a <B>platform-dependent</B> command name found using the <B>platform-dependent</B>search path. ...</P><P>&quot;<CODE>exec</CODE> returns a <CODE>Process</CODE> object, which has methodsfor obtaining the standard input, standard output, and standard error [streams] ofthe newly created process.&quot; <I>[Emphasis added]</I></P></BLOCKQUOTE><P>You may notice that they are subtly trying to imply that much of the behaviorof this method is, well, <B>platform-dependent</B>. (And even the &quot;standard&quot;streams they refer to aren't at all standard on Mac OS.)</P><P>It is therefore quite easy, if you use this method, to end up with code that won'trun or runs incorrectly on some operating systems. The Mac OS is at a disadvantagehere because, unlike Unix or Windows, it is not a thin GUI veneer over a command-line-basedOS. There is no such thing as a command line in the Mac OS itself, so it's been ratherdifficult for MRJ to support the kinds of uses to which imaginative developers put<CODE>Runtime.exec</CODE>.</P><P>Nevertheless, we do try, and the good news is that MRJ 2.1 supports a lot moreof the typical uses of <CODE>Runtime.exec</CODE> than its predecessors did. Thistechnote explains in detail what we do and don't support.</P><H3>JConfig</H3><P>If you're willing to incorporate third-party code (which includes native libraries),you might consider Samizdat Productions' freeware <A HREF = "http://www.tolstoy.com/samizdat/jconfig.html">JConfig</A>library.</p><BLOCKQUOTE><P>JConfig &quot;is a cross-platform library which supplements the core Java API.It lets you work with files, web browsers, processes, file types, and other system-levelitems in a much more advanced manner than that provided by the standard Java classlibraries.&quot;<br>(from the manual)</p></BLOCKQUOTE><P>JConfig is a lot more powerful than <CODE>Runtime.exec</CODE> and lets you dealwith a lot of nasty higher-level issues like locating the user's preferred web browser,or indeed the preferred helper app for any arbitrary URL type. It runs on Mac OS,Windows, and Unix, and a lot of developers who work with MRJ swear by it. (Apple,of course, has no official connection with JConfig or Samizdat Productions andcan't vouch for the reliability of the library. But we think it's cool.)</p><BR><P><A HREF = "#top">Back to top</A></P><H2><A NAME="Section2"></A>The Path To The App</H2><P>The Mac OS has no search path, so you must specify an application using a realfile path. For example, just referring to the application as &quot;<CODE>netscape</CODE>&quot;is not going to work. There are several ways to do this:</P><H3>Relative path</H3><P>If the application you're launching is at a known location relative to the applicationrunning (i.e., both are part of the same installation) you can provide a path that'srelative to the current application. This works reliably only if you're running anapplication built with JBindery, not if you run your code directly from JBinderyitself.</P><H3>User preference</H3><P>If the app to launch is not part of your installation (for instance, if it's somethingstandard like SimpleText or a web browser), you'll need to provide an absolute path.</P><P>The most reasonable cross-platform way to do this is to store the path in a preferencefile. If the preference doesn't exist yet, or if you tried using the preferred pathand it failed, you should put up a dialog box and ask the user to select the application,then store the path into the preference file. See <A HREF = "tn1134.html">Technote1134, &quot;The Preferences Problem,&quot;</A> for more discussion about settingthe correct path using a preference file.</P><H3><A NAME="lookupByCreator"></A>Lookup by creator</H3><P>If you're willing to use some Mac-specific code, it's friendlier to use the MacOS facility to locate an application automatically given its <I>creator code</I>,which is a unique four-letter code assigned to that application.</P><P>You can find the creator of any application by using ResEdit's <CODE>Get File/FolderInfo</CODE> command. The creators of some common applications are:</P><TABLE BORDER="1">    <TR>        <td align="left"><P>Microsoft Internet Explorer</p></td>        <td align="left"><P><CODE>MWIE</CODE></p></td>    </TR>    <TR>        <td align="left"><P>Netscape Navigator</p></td>        <td align="left"><P><CODE>MOSS</CODE></p></td>    </TR>    <TR>        <td align="left"><P>iCab</p></td>        <td align="left"><P><CODE>iCAB</CODE></p></td>    </TR>    <TR>        <td align="left"><P>SimpleText</p></td>        <td align="left"><P><CODE>ttxt</CODE></p></td>    </TR>    <TR>        <td align="left"><P>Finder</p></td>        <td align="left"><P><CODE>FNDR</CODE></p></td>    </TR></table><BR><P>The MRJToolkit library, provided as part of the MRJ SDK (including extensive documentation)includes a <CODE>findApplication</CODE> method that takes a creator code and returnsa File object that points to the app. For example:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>import com.apple.mrj.*;...File simpleTextApp = MRJFileUtils.findApplication(new MRJOSType(&quot;ttxt&quot;));</pre></TD></TR></TABLE></CENTER><BR><BR>        <H3><A NAME="jconfig"></A>Let JConfig locate it for you</H3><P>The third-party <A HREF = "http://www.tolstoy.com/samizdat/jconfig.html">JConfig</A>library from Samizdat Productions, described above, has features that can locatethe user's preferred helper app for any type of URL, which is one of the common usesof <CODE>Runtime.exec</CODE>.</P><H3>Let OpenURL do it all</H3><P>In MRJ 2.2, there is a new utility method <CODE>MRJFileUtils.openURL()</CODE> in the MRJToolkit.It works by passing the URL to the user's preferred helper application as configuredin the Internet control panel (e.g., Internet Config).</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>import com.apple.mrj.MRJFileUtils;...MRJFileUtils.openURL(&quot;http://www.apple.com&quot;);</pre></TD></TR></TABLE></CENTER><BR><BR>        <CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Versions of MRJ prior to 2.2 do not implement the <CODE>openURL()</CODE> method and will throwa <CODE>NoSuchMethodError</CODE> if called. In addition, if you have installed MRJToolkitStubs.zipfrom MRJ 2.2 and are running on a non-MRJ VM (e.g., Windows or Solaris), a call to<CODE>openURL()</CODE> will silently do nothing.</P></TD></TR></TABLE></CENTER><BR><BR><BR><P><A HREF = "#top">Back to top</A></P><H2><A NAME="Section3"></A>But I Came Here For An Argument!</H2><P>The Mac OS uses a mechanism known as AppleEvents to send messages from one processto another. AppleEvents are much higher level than command-line arguments, and includea rich set of data types and tags. However, this means that MRJ can't take a setof arbitrary argument strings and send them to an application in any meaningful way.(Remember all the stuff about &quot;platform-dependent&quot; in the first section?)</P><P>MRJ tries to detect certain common types of command-line arguments and convertthem into AppleEvents. In general, the two types of arguments MRJ knows about arefile paths and URLs. Any argument containing a &quot;:&quot; character is interpretedas a URL, and anything else is interpreted as a file path. (These rules don't applywhen you're launching another Java process, though. See the <A HREF = "#Section4">next section</A>.)</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Versions of MRJ prior to 2.1 do not support URL parameters and just assume everythingis a file path.</P></TD></TR></TABLE></CENTER><BR><BR><P>(If you're AppleEvent savvy, you may wish to know that file paths are sent ina single <CODE>'odoc'</CODE> event, while URLs are sent in individual <CODE>'GURL'</CODE>events.)</P><P>There are a couple of things to keep in mind:</P><H3>No multi-launching</H3><P>The Mac OS does not allow the same app to be launched multiple times, so if youcall <CODE>Runtime.exec</CODE> on a running app, or call it multiple times on thesame app, the same instance of the app will receive each request and open each item.</P><H3>URLs usually don't open a new window</H3><P>The convention in web browsers, at least, is that they display most URLs in theactive window, replacing its previous contents, rather than opening a new window.(They do open files in new windows.) That means that if you send a browser a URLargument it will effectively ignore any argument that came before it. (For instance,if you pass it two URLs, it will try to show the first one and then immediately thesecond one in the same window. If you pass a file and a URL, it will open a new windowfor the file, but then show the URL in that window.)</p><BR><P><A HREF = "#top">Back to top</A></P><H2><A NAME="Section4"></A>Launching Java</H2><P>It turns out that one of the useful things you can do with <CODE>Runtime.exec</CODE>is to launch a new Java process. This is useful if you need to give the code you'relaunching complete independence of your current process. For instance, some Javatools like <CODE>javac</CODE> never reclaim memory or close files, and for practicalpurposes must be run in a separate process that is cleaned up by the OS when it quits.</P><P>In MRJ 2.1 and 2.2, we valiantly added some special cases (some say &quot;hacks&quot;)to facilitate this. If the application/command named in the first argument does notpoint to an existing file, and it does include the substring &quot;<CODE>java</CODE>&quot;(independent of case), then we assume you are trying to launch a Java process, justas if you were invoking the JDK from a command line. MRJ builds an java applicationon the fly and launches it.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Versions of MRJ prior to 2.1 do not support this feature.</P></TD></TR></TABLE></CENTER><BR><BR><P>For example, you can invoke the Java compiler thusly:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>String args = {&quot;java&quot;, &quot;sun.tools.javac.Main&quot;, ...javac argument list...};Runtime.getRuntime().exec(args);</pre></TD></TR></TABLE></CENTER><BR><BR>       <P>Since we know the thing on the other end is a Java process, we allow a bit moregeneral functionality:</P><UL>    <LI>You can pass any arguments you like; they don't have to be URLs or files. They    get passed directly to the <CODE>main()</CODE> method of the app's main class, as    Strings.</li>    <LI>You can use the <CODE>Process</CODE> object [see below] to access the Java process's    standard input / output / error streams.</li></UL><H3>Special flags for '<CODE>java</CODE>'</H3><P>The JDK '<CODE>java</CODE>' command takes a number of flag parameters. MRJ supportsa subset of these:</P><TABLE BORDER="1" WIDTH="100%">    <TR>        <TH><P ALIGN="LEFT">Flag</p>        </TH>        <TH><P ALIGN="LEFT">Purpose</p>        </TH>        <TH><P ALIGN="LEFT">MRJ <BR>2.1 or 2.2</p>        </TH>        <TH><P ALIGN="LEFT">MRJ 2.2 with <BR>-XMRJAppBuilder</p>        </TH>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-help</CODE></p></td>        <td valign="TOP" align=left><P>Prints help message &amp; exits</p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-classpath</CODE></p></td>        <td valign="TOP" align=left><P><A HREF = "#classpathNote">Sets class search path*</A></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-D</CODE></p></td>        <td valign="TOP" align=left><P>Sets system property</p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xverify:remote</CODE></p></td>        <td valign="TOP" align=left><P>Enable bytecode verification on remote classes</p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xverify:all</CODE></p></td>        <td valign="TOP" align=left><P>Enable bytecode verification on all classes</p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xverify:none</CODE></p></td>        <td valign="TOP" align=left><P>Disable bytecode verification</p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xnoasyncgc</CODE></p></td>        <td valign="TOP" align=left><P>Disable asynchronous garbage collection</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xnoclassgc</CODE></p></td>        <td valign="TOP" align=left><P>Disable class GC</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xms</CODE></p></td>        <td valign="TOP" align=left><P>Set initial Java heap size</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xmx</CODE></p></td>        <td valign="TOP" align=left><P>Set max Java heap size</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xss</CODE></p></td>        <td valign="TOP" align=left><P>Set max native stack size</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xoss</CODE></p></td>        <td valign="TOP" align=left><P>Set max Java stack size</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xverbose:gc</CODE></p></td>        <td valign="TOP" align=left><P>Report on garbage collection</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xverbose:jni</CODE></p></td>        <td valign="TOP" align=left><P>Reports Java Native Interface activity</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xverbose:class</CODE></p></td>        <td valign="TOP" align=left><P>Reports class loading information</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-verbose</CODE></p></td>        <td valign="TOP" align=left><P>Reports class loading information</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-X</CODE></p></td>        <td valign="TOP" align=left><P>Prints help on nonstandard options &amp; exits</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xdebug</CODE></p></td>        <td valign="TOP" align=left><P>Enable debugging</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xprof</CODE></p></td>        <td valign="TOP" align=left><P>Enable method profiling</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Supported</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xiprof</CODE></p></td>        <td valign="TOP" align=left><P>Enable instruction profiling</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-Xhprof</CODE></p></td>        <td valign="TOP" align=left><P>Enable heap profiling</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-version</CODE></p></td>        <td valign="TOP" align=left><P>Prints version &amp; exits</p></td>        <td valign="TOP" align=left><P><B>Error</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-cp</CODE></p></td>        <td valign="TOP" align=left><P>Sets classpath</p></td>        <td valign="TOP" align=left><P><B>Error</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-jar</CODE></p></td>        <td valign="TOP" align=left><P>Sets classpath and main</p></td>        <td valign="TOP" align=left><P><B>Error</B></p></td>        <td valign="TOP" align=left><P><B>Warning</B></p></td>    </TR>    <TR>        <td align="left"></td>        <td align="left"></td>        <td align="left"></td>        <td align="left"></td>    </TR>    <TR>        <td valign="TOP" align=left><P><CODE>-XMRJAppBuilder</CODE></p></td>        <td valign="TOP" align=left><P>Run via MRJAppBuilder app</p></td>        <td valign="TOP" align=left><P><B>Ignored</B></p></td>        <td valign="TOP" align=left><P><B>Required</B></p></td>    </TR></table><BR><P>Future versions of MRJ may support more of these flags.</P><P><A NAME="MRJAppBuilderNote"></A></P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>In MRJ 2.2, the <CODE>-XMRJAppBuilder</CODE> option which tells MRJ to build an MRJAppBuilderapplication on-the-fly instead of a JBindery application. If you do not use <CODE>-XMRJAppBuilder</CODE>,you will get the same functionality as MRJ 2.1.</P></TD></TR></TABLE></CENTER><BR><BR><A NAME="classpathNote"></A><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>* A note on <CODE>-classpath</CODE>: As in JDK 1.2, you only need to specify <I>additions</I>to the regular system classpath -- you do not need to add <CODE>classes.zip</CODE>or <CODE>JDKClasses.zip</CODE> or <CODE>rt.jar</CODE>, and you'll get errors if youdo. Classpath entries can be absolute paths, or can be relative to the current workingdirectory, which by default is the directory containing the current application.<BR><BR>When using -XMRJAppBuilder under MRJ 2.2, you may use the magic classpath entry <CODE>$BOOTCLASSPATH</CODE>at the end of the classpath to denote that the classpath additions should be beforethe regular system classpath. See MRJAppBuilder documentation for more details.</P></TD></TR></TABLE></CENTER><BR><BR><BR><P><A HREF = "#top">Back to top</A></P><H2><A NAME="Section5"></A>Pasteurized Processes</H2><P>The <CODE>Runtime.exec</CODE> method, if it succeeds, returns a <CODE>Process</CODE>object. You can use this object to check the status of the process, force it to quit,and access its input / output / error streams.</P><P>Most of these work as advertised, but the latter usage is problematic -- the MacOS has no notion of text streams attached to applications, so it's meaningless totry to access them. MRJ just returns <CODE>null</CODE> if you ask <CODE>Process</CODE> for a streamassociated with a normal app.</P><P>The exception is Java processes, as described above. Since these are special processesthat just run Java code, they do have console I/O streams, and the <code>Process</code> API allowsyou to access them. This is implemented by using Sockets. Therefore, you must haveTCP/IP configured on the machine, or you will get an exception thrown when tryingto exec the java process.</p><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>On MRJ 2.2 when using <CODE>-XMRJAPPBuilder</CODE>, console I/O streams to the childprocess are not supported. If you are not using the <code>Process</code> object, then this isa feature that improves launch time and removes the requirement for the machine beconfigured for IP. But, if you want to use the <code>Process</code> object to communicate withthe child process, you should not use <CODE>-XMRJAPPBuilder</CODE>. </p></TD></TR></TABLE></CENTER><BR><BR><P>Future versions of MRJ may add an explicit command line option to independently controlwhether or not the <code>Process</code> object sets up sockets to the child process.</p><BR><P><A HREF = "#top">Back to top</A></P><H2><A NAME="Section6"></A>Example: Opening A URL In A Browser</H2><P>Here's some sample code by Levi Brown that demonstrates a cross-platform-savvyway to open a URL in a Web browser. It will attempt to use MRJ's openURL function,and upon failure will revert to presenting a file dialog to choose the browser touse, then launch the browser and open the specified URL:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre><B>import</B> java.awt.Frame;<B>import</B> java.awt.FileDialog;<B>import</B> java.io.File;<B>import</B> java.io.IOException;<B>import</B> com.apple.mrj.MRJFileUtils;<B>public</B> <B>class</B> ExecTest <B>extends</B> Frame{    <B>public</B> <B>static</B> <B>void</B> main(<B>String</B>[ ] args)    {        <B>new</B> ExecTest();        System.exit(0);    }    <B>public</B> ExecTest()    {        <B>String</B> url = &quot;http://developer.apple.com/java/&quot;;        <B>try</B>        {               //Attempt to let MRJ do all the work for us.MRJFileUtils.openURL(url);               //If this was successful, then we need not go on.<B>return</B>;        }        <B>catch</B> (IOException exc)        {               //This can occur if problems arise while attempting               //to open the URL.    }        <B>catch</B> (NoSuchMethodError err)        {               //This can occur when earlier versions of MRJ are used which               //do not support the openURL method.        }        <B>catch</B> (NoClassDefFoundError err)        {               //This can occur under runtime environments other than MRJ.        }                // If we make it here, MRJ was unsuccessful in opening                 // the URL, and we need to do it the hard way, using                // Runtime.exec.        <B>String</B> browserName;               //Set up a FileDialog for the user to locate the               //browser to use.        FileDialog fileDialog = <B>new</B> java.awt.FileDialog(<B>this</B>);        fileDialog.setMode(FileDialog.LOAD);        fileDialog.setTitle(&quot;Choose the browser to use:&quot;);        fileDialog.setVisible(<B>true</B>);               //Retrieve the path information from the dialog               //and verify it.        <B>String</B> resultPath = fileDialog.getDirectory();        <B>String</B> resultFile = fileDialog.getFile();        <B>if</B>(resultPath != <B>null</B> &amp;&amp; resultPath.length()!= 0 &amp;&amp;resultFile != <B>null</B> &amp;&amp; resultFile.length() != 0)        {File file = <B>new</B> File(resultPath + resultFile);<B>if</B>(file != <B>null</B>){    browserName = file.getPath();    <B>try</B>    {               //Launch the browser and pass it the desired URL        Runtime.getRuntime().exec(<B>new</B> <B>String</B>[]{browserName, url});    }    <B>catch</B> (IOException exc)    {        exc.printStackTrace();    }}        }    }}</pre></TD></TR></TABLE></CENTER><BR><BR>      <P>This example should be refined, if used in a real setting, to store the locationof the browser (<CODE>browserName</CODE>) in a preference file, and only ask theuser if the cached browser could not be located. It should also make the prompt stringlocalizable.</P><P>Alternatively, as <A HREF = "#Section2">described above</A>, you could locate a browser <A HREF = "#lookupByCreator">by its application signature</A>, or use <A HREF = "#jconfig">JConfig</A> or <A HREF = "http://www.stanford.edu/~ejalbert/software/BrowserLauncher/">BrowserLauncher</A>to handle the whole open-the-URL process for you.</p>   <a name="References"></a><H2>References</H2><P><A HREF = "tn1134.html">Technote 1134: The Preferences Problem</A></p><BR><P><A HREF = "#top">Back to top</a></p><A NAME="Downloads"></A> <h2>Downloadables</h2><center><TABLE BORDER=0 CELLPADDING=3 WIDTH="600"> <TR> <td width=50 align=left>   <P ALIGN=center><img src="images/acrobatsmall.gif" align=middle alt="Acrobat" width=22 height=23></P></TD><td align="left">   <p>Acrobat version of this Note (76K).</P></TD><td width=60 align=left>   <p><A HREF="pdf/tn1168.pdf">Download</A></P></TD>  </TR> </table></center>  <BR><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1168.html%3Fid%3DDTS10003007-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1168.html%3Fid%3DDTS10003007-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1168.html%3Fid%3DDTS10003007-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
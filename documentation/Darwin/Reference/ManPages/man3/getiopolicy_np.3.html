<html><head><title>Mac OS X
 Manual Page For getiopolicy_np(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/getiopolicy_np" title="Mac OS X
 Manual Page for getiopolicy_np(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/getiopolicy_np"; name=getiopolicy_np(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
getiopolicy_np(3)        BSD Library Functions Manual        getiopolicy_np(3)

<b>NAME</b>
     <b>getiopolicy_np,</b> <b>setiopolicy_np</b> -- manipulate the I/O policy of a process or thread

<b>LIBRARY</b>
     Standard C Library (libc, -lc)

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/resource.h&gt;</b>

     <u>int</u>
     <b>getiopolicy_np</b>(<u>int</u> <u>iotype</u>, <u>int</u> <u>scope</u>);

     <u>int</u>
     <b>setiopolicy_np</b>(<u>int</u> <u>iotype</u>, <u>int</u> <u>scope</u>, <u>int</u> <u>policy</u>);

<b>DESCRIPTION</b>
     The <b>getiopolicy_np</b>() and <b>setiopolicy_np</b>() functions are provided to get or set the I/O policy of the
     current process or the current thread.  The policy of the I/O of the given type <u>iotype</u> can be get or
     set for the given <u>scope</u>.

     The I/O type is specified in the argument <u>iotype</u>.  The currently supported I/O type is IOPOL_TYPE_DISK,
     which means the I/O policy for I/Os to local disks can be get or set.  I/Os to local disks are I/Os
     sent to the media without going through a network, including I/Os to internal and external hard drives,
     optical media in internal and external drives, flash drives, floppy disks, ram disks, and mounted disk
     images which reside on these media, but not including remote volumes mounted through networks (AFP,
     SMB, NFS, etc) or disk images residing on remote volumes.

     The scope that the I/O policy takes effect is specified in the argument <u>scope</u> as follows:

     IOPOL_SCOPE_PROCESS  The I/O policy of all I/Os issued by the current process is get or set.

     IOPOL_SCOPE_THREAD   The I/O policy of all I/Os issued by the current thread is get or set.

     In <b>getiopolicy_np</b>(), the I/O policy of the given I/O type and scope is returned.  In <b>setiopolicy_np</b>(),
     the argument <u>policy</u> is an integer which contains the new I/O policy to be set for the given I/O type
     and scope.  The I/O policy can have the following values:

     IOPOL_DEFAULT    This is the default I/O policy for the first process and every new created thread.

     IOPOL_NORMAL     I/Os with NORMAL policy are called NORMAL I/Os.  They are handled by the system using
                      best-effort.

     IOPOL_THROTTLE   I/Os with THROTTLE policy are called THROTTLE I/Os.  If a THROTTLE I/O request occurs
                      within a small time window (usually a fraction of a second) of another NORMAL I/O
                      request, the thread that issues the THROTTLE I/O is forced to sleep for a certain
                      interval. This slows down the thread that issues the THROTTLE I/O so that NORMAL I/Os
                      can utilize most of the disk I/O bandwidth.

     IOPOL_PASSIVE    The PASSIVE I/Os are a special type of NORMAL I/O that are processed the same as NOR-<font color="#ffffff" class="whiteout">MAL&nbsp;NORMAL</font>
                      MAL I/Os but are ignored by the THROTTLE I/Os so that the threads issuing THROTTLE
                      I/Os are not slowed down by PASSIVE I/Os.  The PASSIVE I/O policy is useful for server
                      type applications.  The I/Os generated by these applications are called passive I/Os
                      because these I/Os are caused directly or indirectly by the I/O requests they receive
                      from client applications.  For example, when an image file is mounted by DiskImages,
                      DiskImages generate passive I/Os.  DiskImages should mark these I/Os using the PASSIVE
                      I/O policy so that when client applications that issue THROTTLE I/Os access the volume
                      managed by DiskImages, these client applications will not be slowed down by the I/Os
                      generated by DiskImages.

     The I/O policy of a new created process is inherited from its parent process.  The I/O policy of an I/O
     request depends on the I/O policy of both the current thread and the current process.  If the I/O pol-<font color="#ffffff" class="whiteout">icy&nbsp;policy</font>
     icy of the current thread is IOPOL_DEFAULT, the I/O policy of the current process is used; if the I/O
     policy of the current thread is not IOPOL_DEFAULT, the I/O policy of the current thread overrides the
     I/O policy of the current process; if the I/O policy of the current process is IOPOL_DEFAULT, the pol-<font color="#ffffff" class="whiteout">icy&nbsp;policy</font>
     icy of I/Os issued by this process is NORMAL.  For example, given the following thread and process I/O
     policy in the first two columns, the I/O policy of all I/Os issued by the thread is given in the third
     column:

           <b>Process</b> <b>I/O</b> <b>Policy</b>      <b>Thread</b> <b>I/O</b> <b>Policy</b>      <b>I/O</b> <b>Policy</b>
           DEFAULT                 DEFAULT                NORMAL
           DEFAULT                 PASSIVE                PASSIVE
           THROTTLE                DEFAULT                THROTTLE
           THROTTLE                PASSIVE                PASSIVE
           PASSIVE                 NORMAL                 NORMAL

     The thread or process with THROTTLE I/O policy enabled may be slowed down when it issues reads, but
     will not be slowed down when it issues writes.  If it issues far more writes than reads (e.g., an
     application downloading large amounts of data through the network), these writes compete with the nor-<font color="#ffffff" class="whiteout">mal&nbsp;normal</font>
     mal I/Os of other processes and may have an adverse effect on the I/O throughput or latency of those
     processes.

<b>RETURN</b> <b>VALUES</b>
     The <b>getiopolicy_np</b>() call returns the I/O policy of the given I/O type and scope.  If error happens, -1
     is returned.  The <b>setiopolicy_np</b>() call returns 0 if there is no error, or -1 if there is an error.
     When error happens, the error code is stored in the external variable <u>errno</u>.

<b>ERRORS</b>
     <b>Getiopolicy_np</b>() and <b>setiopolicy_np</b>() will fail if:

     [EINVAL]           Io_type or scope is not one of the values defined in this manual.

     In addition to the errors indicated above, <b>setiopolicy_np</b>() will fail if:

     [EINVAL]           Policy is not one of the values defined in this manual.

<b>SEE</b> <b>ALSO</b>
     <a href="nice.3.html#//apple_ref/doc/man/3/nice">nice(3)</a>, <a href="../man2/getpriority.2.html#//apple_ref/doc/man/2/getpriority">getpriority(2)</a>, <a href="../man2/setpriority.2.html#//apple_ref/doc/man/2/setpriority">setpriority(2)</a>, <a href="../man8/renice.8.html#//apple_ref/doc/man/8/renice">renice(8)</a>

<b>HISTORY</b>
     The <b>getiopolicy_np</b>() and <b>setiopolicy_np</b>() function call first appeared in Mac OS X 10.5 (Leopard) .

BSD                              July 18, 2006                             BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/getiopolicy_np.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/getiopolicy_np.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/getiopolicy_np.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Direct to Web Guide: An Introduction to Direct To Web</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="An Introduction to Direct To Web"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5" title="An Introduction to Direct To Web"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../InternetWeb/index.html#//apple_ref/doc/uid/TP30000440-TP30000469" target="_top">Internet &amp; Web</a> &gt; <a href="../../../InternetWeb/WebObjects-date.html#//apple_ref/doc/uid/TP30000440-TP30000469-TP30000592" target="_top">WebObjects</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_4-TPXREF101">WebObjects Direct to Web Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Architecture/Architecture.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF101" title="An Introduction to Direct To Web"></a><h1>An Introduction to Direct To Web</h1><p>Direct to Web is a Java-based technology that provides a quick and easy method to create a web application that accesses a database. It lets you experiment and prototype, while also allowing you the flexibility to access the full power of WebObjects.</p><p>There are several stages you can go through, depending on your needs:</p><ul class="ul"><li class="li"><p>First, you create a WebObjects project and specify a <em>model </em>to use. Direct to Web uses the model, which defines the mapping between your database and enterprise object classes, to generate an application that provides an interface to your database. This application consists of a set of pages that allow you to do queries on the entities in your database, display results, and add and delete records.</p><p>A complete model file that correctly defines all the relationships is the key to creating a WebObjects application with Direct to Web. </p></li><li class="li"><p>To change the way the pages are presented, you can use the WebAssistant, which is a Java applet that runs in your web browser. For each page in your application, the WebAssistant allows you to specify which page is shown, which properties are shown on the page, how these properties are displayed, and the order in which they are listed. You can experiment with different configurations until you are satisfied, without writing any code.</p></li><li class="li"><p>If you want to customize beyond what the WebAssistant provides, you can “freeze” any or all of the pages in your application as WebObjects components. This gives you the full power of WebObjects: you can modify a component’s layout using WebObjects Builder, and you can customize its behavior by writing Java code using Project Builder.</p></li><li class="li"><p>You can also modify the templates that Direct to Web uses to generate its pages. These templates are WebObjects components that you can edit with WebObjects Builder. This way you can modify the “look” or style of the pages that Direct to Web generates.</p></li></ul><p>You can also use Direct to Web in other types of WebObjects applications. Your application can take two approaches:</p><ul class="ul"><li class="li"><p>embedding Direct to Web components in your pages; these include query forms, lists, or edit/inspect forms</p></li><li class="li"><p>linking to dynamically generated Direct to Web pages</p></li></ul><p>This chapter describes the elements that make up a Direct to Web application and shows you the steps you follow when creating and modifying an application. If you find that your application needs some specific behavior that Direct to Web does not provide, see <span class="content_text"><a href="../Customizing/Customizing.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_3-BABJCFJA">“Customizing a Direct to Web Application.”</a></span> For more information on using Project Builder, see Project Builder Help. For more information about using Project Builder and WebObjects Builder to develop WebObjects applications, see <em>Developing Web Applications</em>. For more information about using WebObjects with database applications, see <em>Enterprise Objects</em> as well as <em>Using EOModeler</em>.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABJIBIC">Creating a Direct to Web Project</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABHDECG">The Structure of a Direct to Web Project</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIGHACJ">Using Your Direct to Web Application</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHGJBJ">Customizing Your Application With the WebAssistant</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF105">Running the WebAssistant With appletviewer</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF106">WebAssistant Overview</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF107">Restricting Access to Entities</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIFBFFD">Customizing Pages</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCICHCHH">Setting Which Properties are Displayed</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHDAGJ">Changing How Properties Are Displayed</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIJCDDD">WebAssistant Expert Mode</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIJIIDE">Generating Components</a>
				
			<br/>
			
        
			
			
				<a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIFDJAB">User Templates</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABJIBIC" title="Creating a Direct to Web Project"></a><h2>Creating a Direct to Web Project</h2><p>To create a Direct to Web application, begin by using Project Builder to create a WebObjects application project. Follow these steps:</p><ol class="ol"><li class="li"><p>Launch Project Builder.</p></li><li class="li"><p>Choose File > New Project.</p></li><li class="li"><p>Select WebObjects/Direct to Web Application.</p></li><li class="li"><p>Set the name and location of your project.</p><p>Enter <code>D2WTutorial</code> in the Project Name field.</p><p>Click Set and select a location for your project.</p></li><li class="li"><p>Click Next in the “Enable J2EE Integration” window.</p></li><li class="li"><p>Click Next in the “Enable Web Services” window.</p></li><li class="li"><p>In the “Choose EOAdaptors” window, make sure <code>JavaJDBCAdaptor</code> is selected.</p><p>Click Next.</p></li><li class="li"><p>Add additional frameworks to the project.</p><p>No additional frameworks are required for this tutorial, so click Next.</p></li><li class="li"><p>Choose a model file.</p><p>You’ll use one of the models defined in the sample projects.</p><p>Click Add.</p><p>Navigate to the <code>/Developer/Examples/JavaWebObjects/Frameworks/JavaRealEstate</code> directory.</p><p>Select <code>RealEstate.eomodeld</code> and click Choose.</p><p>Click Next.</p></li><li class="li"><p>Select a look for the user-interface.</p><p>This pane offers a selection of user-interface styles (“looks”) for your Direct to Web application; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIIEJHC">“The Different Looks for WebObjects Applications”</a></span> for more information.</p><p>Select Basic Look from the Direct To Web Looks list and click Next.</p></li><li class="li"><p>Build and launch the project.</p><p>This pane asks if you would like to build and launch your application immediately. If you choose not to have the wizard build and launch your application, see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIGHACJ">“Using Your Direct to Web Application,”</a></span> which tells you how to launch your WebObjects application and describes what you see when you launch it. For information about building a project, see <em>Developing Web Applications</em>.</p><p>For the purposes of this tutorial, make sure “Build and launch project now” is selected and click Finish.</p></li></ol><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIIEJHC" title="The Different Looks for WebObjects Applications"></a><h3>The Different Looks for WebObjects Applications</h3><p>In this release, Direct to Web offers three different user-interface styles, or looks, for WebObjects applications: Basic, Neutral, and WebObjects. Currently the only simple way to change the look of an application is to re-create a project using Project Builder. Therefore it is advisable to know which look you want in advance.</p><p>All the looks provide the same functions for the user. They only differ in the style and placement of their user-interface elements.The Neutral look and the WebObjects look are very similar but the Neutral look does not display the Apple logo, which makes it easier if you want to use your own logo.</p><p>The login page for the Basic look has a panel-like submit form for the entry of user name and password:</p><br/><div><img src = "../art/basiclook.gif" alt = "image: ../art/basiclook.gif" width="268" height="160"></div><br/><p>The login page for the Neutral look is much simpler:</p><br/><div><img src = "../art/neutrallook.gif" alt = "image: ../art/neutrallook.gif" width="326" height="102"></div><br/><p>This is the login page for the WebObjects look:</p><br/><div><img src = "../art/webobjectslook.gif" alt = "image: ../art/webobjectslook.gif" width="332" height="152"></div><br/><p>In the dynamically-generated pages (query, list, inspect, and so on), the Basic look differs from the Neutral and WebObjects looks even more strikingly. In the Basic look the control header runs across the top of the page whereas in the Neutral and WebObjects looks it appears on the left side of the page. In addition, the Basic look is more tabular while the Neutral and WebObjects looks tends to present records in visual “blocks.” For example, the following is an example of a list page in the Basic look: </p><br/><div><img src = "../art/basiclooklist.gif" alt = "image: ../art/basiclooklist.gif" width="499" height="300"></div><br/><p>The list page in the Neutral look appears like this: </p><br/><div><img src = "../art/neutrallooklist.gif" alt = "image: ../art/neutrallooklist.gif" width="497" height="347"></div><br/><p>The following illustrates what a list page looks like in the WebObjects look:</p><br/><div><img src = "../art/webobjectslooklist.gif" alt = "image: ../art/webobjectslooklist.gif" width="499" height="358"></div><br/><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABHDECG" title="The Structure of a Direct to Web Project"></a><h2>The Structure of a Direct to Web Project</h2><p>A Direct to Web project has a structure similar to other WebObjects application projects. A newly created project contains three components, each enclosed in a subgroup, which you can access if you disclose the contents of the Web Components group in the Groups &amp; Files list in Project Builder’s main window.</p><ul class="ul"><li class="li"><p><code>MenuHeader.wo</code> is a reusable component that contains the header with the control buttons on the left side of each page (or the top of the page in the Basic look.) You can add text or other elements to this component if you choose.</p></li><li class="li"><p><code>Main.wo</code> is the main component, representing the login page of the application. </p></li><li class="li"><p><code>PageWrapper.wo</code> is a reusable component that wraps the content of the pages of the application (except for <code>Main.wo</code>). It contains a header, the menu header component (<code>MenuHeader.wo</code>), and footer text and elements common to these pages. If you want to customize the headers and footers for all pages of your application, you can add text or other elements to this component.</p></li></ul><p>You can add code to the <code>.java</code> files corresponding to each component to extend their functionality. See the WebObjects API Reference for more information on the Direct to Web API.</p><p>Each of the subgroups that contains a component also holds the component’s <code>.api</code> file. This file specifies the exported keys, both optional and required, for each component.</p><p>As you run your application, Direct to Web creates additional pages, using information in your model file and the settings specified in the WebAssistant. These pages do not show up as components in your project. Rather, Direct to Web creates them dynamically using a set of reusable components in the Direct to Web framework. However, you can generate components or user templates. When you do that, you can modify the resulting components just as you would with any other WebObjects components. See <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIJIIDE">“Generating Components”</a></span> and <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIFDJAB">“User Templates”</a></span> for more information.</p><p>The Resources group contains the model file you specified when you created the project (in this example, <code>RealEstate.eomodeld</code>). It also contains <code>user.d2wmodel</code>, which stores the preferences you have specified using the WebAssistant. Advanced users can edit this file; see <span class="content_text"><a href="../Architecture/Architecture.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_2-BAJDAABJ">“The Rule System”</a></span> for more information about the rule file.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIGHACJ" title="Using Your Direct to Web Application"></a><h2>Using Your Direct to Web Application</h2><p>Once you have created a Direct to Web application using Project Builder and the WebObjects application wizard, and have compiled the resulting project files, you can launch the application by clicking Build and Run in Project Builder’s toolbar <img src = "../art/launchicon_small.gif" alt = "image: ../art/launchicon_small.gif" width="31" height="30">. The application pages are displayed in a web browser, where you can test the application’s presentation of data and, with the WebAssistant enabled, modify the layout of that data.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF102" title="Launching a Direct to Web Application"></a><h3>Launching a Direct to Web Application</h3><p>To launch your application from Project Builder, click <img src = "../art/launchicon_small.gif" alt = "image: ../art/launchicon_small.gif" width="31" height="30"> in the toolbar in Project Builder’s main window.</p><p>Before you launch the application you might want to set some command line options. For example, when running a Direct to Web Application for deployment, you should turn on caching and disable the WebAssistant (to prevent anyone from connecting to the application using WebAssistant). To do this, set the <code>-WOCachingEnabled</code> and <code>-D2WWebAssistantEnabled</code> options, respectively:</p><ol class="ol"><li class="li"><p>Under the Project menu choose “Edit Active Executable”.</p></li><li class="li"><p>Under the Launch Arguments listing in the content pane, click the “plus” icon.</p></li><li class="li"><p>Enter <code>-WOCachingEnabled YES -D2WWebAssistantEnabled NO</code> in the new entry that was created.</p></li></ol><br/><div><img src = "../art/launcharguments.gif" alt = "image: ../art/launcharguments.gif" width="676" height="457"></div><br/><p>For other command-line options for WebObjects applications, such as <code>-WOPort</code>, see <em>Deploying WebObjects Applications</em>.</p><p>You can test the Direct to Web application using a web browser on a machine remote from the machine on which the application is running (that is, the server). When you launch the application, look in the console output, which is displayed in the Launch panel, for the line containing application’s URL.</p><div class="codesample"><table><tr><td scope="row"><pre>Welcometo D2WTutorial!<span></span></pre></td></tr><tr><td scope="row"><pre>Opening application’s URLin browser:http://localhost:1234/cgi-bin/WebObjects/D2WTutorial.woa<span></span></pre></td></tr></table></div><p>Enter the URL in your browser, after substituting the host name of the server machine for “localhost”. In fact, you can exclude every thing in the URL after the application port number. For example, if the server host name is “foobar” you would enter the following URL in the browser to load the WebObjects application:</p><div class="codesample"><table><tr><td scope="row"><pre>http://foobar:1234/<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF103" title="The Login Page"></a><h3>The Login Page</h3><p>When you launch your application, your web browser displays the Direct to Web login screen:</p><br/><div><img src = "../art/loginbrowser.gif" alt = "image: ../art/loginbrowser.gif" width="267" height="160"></div><br/><p>The login page is the default implementation of your Main component, <code>Main.wo</code>. It contains text fields to enter a name and password, as well as a submit button (Login) and an Enable Assistant checkbox. To go to the application’s default first page, select Enable Assistant and click Login button. You don’t need to enter a name and password, because the default application provides no password-checking logic. If you don’t select Enable Assistant before clicking Login, you won’t have access to the WebAssistant.</p><p>You can modify the login page (<code>Main.wo</code>) to provide any behavior or appearance you like. For example, you can add your own password-checking logic, as shown in the section <span class="content_text"><a href="../Customizing/Customizing.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_3-BABGHDED">“Adding Authentication to the Main Component.”</a></span> </p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABIGHDG" title="Dynamically Generated Pages"></a><h3>Dynamically Generated Pages</h3><p>Besides the login page, there are nine types of dynamically-generated pages (or reusable components) in a Direct to Web application:</p><ul class="spaceabove"><li class="li"><p><strong>A query-all</strong> page that displays all entities that are currently exposed and lets users construct queries on the attributes (but not the relationships) of those entities; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCICFHEJ">“Query Pages.”</a></span> The properties of this page cannot be customized.</p></li><li class="li"><p><strong>A query page</strong> that allows the user to construct a query for a particular entity; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCICFHEJ">“Query Pages.”</a></span></p></li><li class="li"><p><strong>A list page</strong> that displays one or more records of a particular entity in tabular form. List pages and select components are implemented with the same components; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIIIBDE">“List Pages and Select Components.”</a></span> The result of a query is always a list page.</p></li><li class="li"><p><strong>An inspect page</strong> that displays a single record of a given entity. Inspect pages and edit pages are implemented with the same components; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIDAJFE">“Inspect and Edit Pages.”</a></span></p></li><li class="li"><p><strong>An edit page</strong> that displays a single record of a given entity and also allows you to make changes to the record and save it to the database. Edit and inspect pages are implemented with the same components; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIDAJFE">“Inspect and Edit Pages.”</a></span></p></li><li class="li"><p><strong>A select component</strong> that lets users select a record from a list, thereby adding it to a relationship or populating an edit component with it. List pages and select components are implemented with the same components; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIIIBDE">“List Pages and Select Components.”</a></span></p></li><li class="li"><p><strong>A confirm page</strong> that prompts users to confirm that they want to delete records. The properties of this page cannot be customized.</p></li><li class="li"><p><strong>An edit-relationship page</strong> is a multiple component page for removing and adding objects to a relationship. See <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIDFFJD">“Edit-Relationship Pages.”</a></span></p></li><li class="li"><p><strong>An error page</strong> for displaying information related to exceptions and other errors. The properties of this page cannot be customized.</p></li></ul><p>All pages in your application contain the standard Direct to Web header (defined in <code>MenuHeader.wo</code>) at the top of the page. This header provides a number of controls, shown in <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABIIFAJ">Figure 1-1</a></span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABIIFAJ" title="Figure 1-1Header controls"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Header controls</p><img src = "../art/headercontrols.gif" alt = "Header controls" width="482" height="48"></div><br/><p>For best results when navigating through a Direct to Web application, don’t use your web browser’s backtrack buttons. Instead:</p><ul class="spaceabove"><li class="li"><p>To return to the previous page from an edit or inspect page, click Cancel.</p></li><li class="li"><p>To return to a query page from a list page, click Return.</p></li></ul><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCICFHEJ" title="Query Pages"></a><h4>Query Pages</h4><p>Direct To Web has two kinds of pages for constructing queries on the properties of entities: a query-all page and a query page. When you log into a Direct To Web application, the query-all page is displayed first by default. </p><br/><div><img src = "../art/queryallpage.gif" alt = "image: ../art/queryallpage.gif" width="357" height="310"></div><br/><p>The query-all page enables you to construct a query on an attribute of a particular entity (queries on relationships are not allowed). To use this page, select a property from an entity’s pop-up list, specify the comparison operator, type the string to search on and click the magnifying-glass button.</p><p>The query page, on the other hand, is tied to a particular entity but allows you to construct queries on relationships as well as attributes. The following illustrates a query page:</p><br/><div><img src = "../art/querypage2.gif" alt = "image: ../art/querypage2.gif" width="370" height="238"></div><br/><p>The first column in the table lists the current entity’s properties. The second column contains pop-up lists and text fields that let you enter values to construct queries on single and multiple properties. When you specify values for multiple properties, the query becomes the logical AND of the queries on the individual properties.</p><p>A property is either an <em>attribute</em> (a value stored directly in this entity’s table) or a <em>relationship</em> (an association between this entity and another entity). For example, in the figure above, First Name is an attribute and Contact Info is a relationship. You can use the WebAssistant to hide properties that you don’t want users to see.</p><p><code>Note:</code> Direct to Web only displays properties that are class properties. In addition, primary keys and attributes marked as the source of a relationship are hidden by default.</p><p>Properties are represented in various ways. For example, in the figure, you enter a single string value for First Name, while you enter a range of values for User Type. You can change the representation of most properties using the WebAssistant. In particular, you may want to change how relationships are shown, since by default, you query them by specifying an ID, which is something the user is unlikely to know. See <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHDAGJ">“Changing How Properties Are Displayed”</a></span> for more information on the different ways of representing properties in your application’s pages.</p><p>You can choose a string operator (starts with, contains, ends with, is, like, =, &lt;>, &lt;, &lt;=, >, >=) and specify a string with optional special characters in query fields for string searches. For example, you could select “starts with” in the Customer entity’s Last Name pop-up list and enter “sh” in the text field to search for all customers whose last name begins with those characters. You can also use the “like” operator and enter a string with the asterisk character to indicate “all occurrences.” For instance, you could enter “*rob*” to return all customers whose last name contains the substring “rob”. Alternatively you could select “contains” in the pop-up list and enter “rob” to return the same customers.</p><p>In the Customer query, to get a list of all customers whose last name containts “id” and first name begins with “r”, you would:</p><ol class="ol"><li class="li"><p>Select “starts with” in the First Name pop-up list and enter “r” in the text field.</p></li><li class="li"><p>Select “contains“ in the Last Name pop-up list and enter “id”the text field.</p></li><li class="li"><p>Click Query DB.</p><p>The results are displayed in a list page; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIIIBDE">“List Pages and Select Components.”</a></span></p></li></ol><p>To clear the query page, click Build Query.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIIIBDE" title="List Pages and Select Components"></a><h4>List Pages and Select Components</h4><p>A list page displays a table showing multiple records of an entity. List pages are used to display the results of a query, or to show the records satisfying a to-many relationship in another list or inspect page.</p><br/><div><img src = "../art/listpage.gif" alt = "image: ../art/listpage.gif" width="506" height="153"></div><br/><p>Each row in the table represents a record. By default, a batch of ten records are shown in a page. To change the batch size, type a number in the “Display _ items” field and press Return or Enter. To display additional records in either direction, click the triangle buttons or enter the page number you want to go to.</p><p>Each column in the list represents one of the entity’s properties. By default, all properties are shown in alphabetical order. You can hide columns and change their order by using the WebAssistant; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHGJBJ">“Customizing Your Application With the WebAssistant.”</a></span></p><p>The symbols to the right of attribute names represent their sort order:</p><ul class="spaceabove"><li class="li"><img src = "../art/sortascending.gif" alt = "image: ../art/sortascending.gif" width="19" height="19"><p>: ascending order</p></li><li class="li"><img src = "../art/sortdescending.gif" alt = "image: ../art/sortdescending.gif" width="16" height="19"><p>: descending order</p></li><li class="li"><img src = "../art/sortunsorted.gif" alt = "image: ../art/sortunsorted.gif" width="18" height="17"><p>: unsorted</p></li></ul><p>To change the sort order for any attribute, click the title to cycle between ascending, descending, and unsorted. By default, the records are sorted in ascending order by the attribute in the first column. You can specify up to three columns to sort on; the last one specified becomes the primary sort key.</p><p>For properties that represent relationships, an Inspect button appears in the cell by default (DisplayToManyFault).</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;By default, the list page does not display relationships (including the Inspect buttons). You can configure the list page to display relationships using the WebAssistant; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHGJBJ">“Customizing Your Application With the WebAssistant.”</a></span></p></div><p>When you click the Inspect button one of two things happen, depending on the type of relationship:</p><ul class="spaceabove"><li class="li"><p>If it is a to-one relationship, an inspect page appears, showing the destination record.</p><p>In the above example, the Customer entity’s Agent relationship is a to-one relationship to the Agent entity. If you click the Inspect button, an inspect page appears for the Agent entity corresponding to the selected customer; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIDAJFE">“Inspect and Edit Pages.”</a></span></p></li><li class="li"><p>If it is a to-many relationship, another list page appears, showing all the destination records in the relationship.</p><p>In the above example, the Customer entity’s Suggested Listings relationship is a to-many relationship to the Listing entity. If you click the Inspect button, a list page appears, showing all the suggested listings in the selected customer. </p><div class="item_figure"><img src = "../art/listinglist.gif" alt = "image: ../art/listinglist.gif" width="447" height="155"></div></li></ul><p>You can use the WebAssistant to display the related records directly in the table instead of with an Inspect button; see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHGJBJ">“Customizing Your Application With the WebAssistant.”</a></span></p><p>The select component looks a lot like the list page, but instead of the Edit button there is a Select or Add button. The select component occurs in multiple-component pages. In the edit-relationship page you click Select or Add to add a record to a to-many relationship or select a record for a to-one relationship. In the master-detail page you click Select to select a record to edit. A select component looks like this:</p><br/><div><img src = "../art/selectcomponent.gif" alt = "image: ../art/selectcomponent.gif" width="413" height="137"></div><br/><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIDAJFE" title="Inspect and Edit Pages"></a><h4>Inspect and Edit Pages</h4><p>Inspect pages and edit pages display the data for a single record of an entity. An edit page allows you to make changes to the record and save the changes, while an inspect page is read-only. </p><p>An inspect page looks like this</p><br/><div><img src = "../art/inspectpage_1.gif" alt = "image: ../art/inspectpage_1.gif" width="151" height="178"></div><br/><p>Note the buttons at the bottom of the page:</p><ul class="spaceabove"><li class="li"><p>Delete allows you to delete the record from the database.</p></li><li class="li"><p>Return takes you back to the page from which you accessed this inspect page.</p></li><li class="li"><p>Edit brings up the equivalent edit page for this record, so that you can make changes. (However, if your application specifies a particular entity as read-only, you won’t be able to edit it.)</p></li></ul><p>Also note the Customers property in the example above. You click the triangle to display the Customers of this Agent in a list, browser, or table, as in the following example:</p><br/><div><img src = "../art/inspectpage_2.gif" alt = "image: ../art/inspectpage_2.gif" width="260" height="250"></div><br/><p>This property is configured with the DisplayToManyTable component. For more on how this is done, see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHBJGJ">“Representation of Relationships.”</a></span></p><p>An edit page (or edit component) looks like this:</p><br/><div><img src = "../art/editpage.gif" alt = "image: ../art/editpage.gif" width="335" height="307"></div><br/><p>It is similar to the inspect page, except that it has a Save button (for saving changes to the database) instead of an Edit button. If you click the Edit button next to the list of Customers, an edit-relationship page is displayed for editing the records in the to-many relationship. Edit components can occur in multiple-component pages, such as the master-detail page.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIDFFJD" title="Edit-Relationship Pages"></a><h4>Edit-Relationship Pages</h4><p>An edit-relationship page allows users to add records to a relationship and remove records from the relationship. Users typically come to these pages when they click an Edit button next to a relationship in an edit page. Edit-relationship pages consist of three separate components, of which two are shown at any one time. The first component lists the relationships of a particular property and contains several controls. In addition, a query component initially appears for locating another object to link to for that property. The third component, a select component, appears after you have specified a query and is discussed in the following pages.</p><br/><div><img src = "../art/editrelationship.gif" alt = "image: ../art/editrelationship.gif" width="374" height="356"></div><br/><p>This user interface facilitates the following tasks:</p><ul class="spaceabove"><li class="li"><p>To remove a record from the property, select the key identifying the record in the browser and click Remove.</p></li><li class="li"><p>To add a new record to the property, click New Record. An edit component appears underneath the list of relationships; fill out the fields of the edit component and click Save to add the new record to the database <em>and</em> the new relationship to the property above.</p></li><li class="li"><p>To locate an existing record to add to the relationship, enter the properties to search on in the query component and click Query DB.</p></li></ul><p>When a query is executed (assuming matching records are found) a select component replaces the query component.</p><br/><div><img src = "../art/editrelationshipselect.gif" alt = "image: ../art/editrelationshipselect.gif" width="348" height="195"></div><br/><p>To add a listed record to the to-many relationship, click the Select button. To construct a new query, click the Build Query button.</p><p>When you have finished editing a relationship, click the Return button under the browser to return to the original edit page. You must click the Save button in this page to store the changed relationship in the database.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF104" title="Master-Detail Pages"></a><h4>Master-Detail Pages</h4><p>Master-detail pages put a select component and an edit component on the same page, thereby allowing users to select and edit records without having to go to another page. The following is an example of a master-detail page:</p><br/><div><img src = "../art/masterdetailpage_customers.gif" alt = "image: ../art/masterdetailpage_customers.gif" width="403" height="390"></div><br/><p>To use a master-detail page, click Select next to a record in the list component. The record is displayed in an edit component. See <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIDAJFE">“Inspect and Edit Pages”</a></span> for usage information.</p><p>The master-detail page does not appear under Tasks in the WebAssistant (expert mode). This is because it is defined as a type of list page (BASMasterDetailPage, NEUMasterDetailPage, or WOLMasterDetail page depending on the look) of the list task. </p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHGJBJ" title="Customizing Your Application With the WebAssistant"></a><h2>Customizing Your Application With the WebAssistant</h2><p>The WebAssistant allows you to customize each page of your application. You can specify</p><ul class="ul"><li class="li"><p>which entities of the model the application displays and, of these, which are read-only</p></li><li class="li"><p>global attributes of pages, such as style, color, and border thickness</p></li><li class="li"><p>which properties are displayed, and in what order</p><p>By default, an entity’s properties are listed in alphabetical order. Often, you’ll want to change the order, as well as hiding some properties.</p></li><li class="li"><p>how number and date strings should be represented</p></li><li class="li"><p>how relationships should be represented</p></li></ul><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF105" title="Running the WebAssistant With appletviewer"></a><h2>Running the WebAssistant With appletviewer</h2><p>You can launch WebAssistant using the Java program <code>appletviewer</code>. You might need to do this if your web browser is unable to launch WebAssistant itself. Follow these steps:</p><ol class="ol"><li class="li"><p>Launch your application with the command-line option <code>D2WWebAssistantEnabled </code>set to YES. This is covered in <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF102">“Launching a Direct to Web Application.”</a></span></p></li><li class="li"><p>In the “Run” output of Project Builder, look for a line similar to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>DirectToWeb WebAssistant launch line:appletviewer http://localhost:51508/cgi-bin/WebObjects/D2WTutorial.woa/wa/D2WActions/openWebAssistant<span></span></pre></td></tr></table></div></li><li class="li"><p>Open the Terminal application provided on Mac OS X.</p></li><li class="li"><p>Copy the string beginning at “appletviewer” up to “openWebAssistant” to the Terminal and press Return.</p></li></ol><p>When you complete this procedure, WebAssistant launches and connects to your application. If you stop and restart the Direct to Web application, the WebAssistant will re-connect to it—provided it is running on the same port.</p><p>A standalone WebAssistant has exactly the same functionality as one launched inside your browser. However, if the browser you are using is not Java-enabled, your pages are not automatically refreshed after you click Update. You must either click your browser’s “reload” or “refresh” button or (when you are picking a new type of page, such as a MasterDetails page instead of a ListPage), you will have to re-navigate to the same page.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF106" title="WebAssistant Overview"></a><h2>WebAssistant Overview</h2><p>When the Web Assistant applet is launched, it appears in a window whose title indicates the current page and entity:</p><br/><div><img src = "../art/wapropertieslist.gif" alt = "image: ../art/wapropertieslist.gif" width="578" height="237"></div><br/><p>The WebAssistant has four displays, each selectable by clicking a tab:</p><ul class="ul"><li class="li"><p><strong>Properties</strong> Allows you to set which properties of an entity are shown in a page, the order in which they’re displayed, and the display characteristics of properties (for example, color and alignment).</p></li><li class="li"><p><strong>Page</strong> Allows you to customize global page properties, such as template, overall style, color, and border thickness.</p></li><li class="li"><p><strong>Generation</strong> Only available in expert mode, this display allows you to generate templates and “freeze” customized pages as reusable components.</p></li><li class="li"><p><strong>Entities</strong> Allows you to select which entities of the model are hidden, which are shown, and which are read-only.</p></li></ul><p>The WebAssistant stays synchronous with your browser. When you navigate to a new page, it displays the settings for that page.</p><p>The Web Assistant has two modes, Standard mode and Expert mode. By default the Web Assistant opens in Standard mode, which lets you customize the current page in your application. When you customize a page in Standard mode, the changes apply to all occurrences of that page, and that page only. For example, if you change the order of properties in an edit page for the Customer entity, then any time a Customer edit page is displayed, those changes are in effect (provided you have clicked Update or Save). However, the changes don’t apply to a Customer query, list, or inspect page; if you want to customize those in the same way, you must do so explicitly.</p><p>Using Web Assistant’s Expert mode, you can customize any page in the application, regardless of whether it is currently displayed. Thus, by specifying the “*all*” setting in Expert mode, you could change all pages of a given entity at once. In addition, you can generate a template or “freeze” a page as a reusable component. For more information, see <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIJCDDD">“WebAssistant Expert Mode.”</a></span> </p><p>When you’ve made changes to a page, you can use the buttons at the bottom of the WebAssistant to apply them:</p><ul class="ul"><li class="li"><p><strong>Update</strong> sends your changes to the server. On some systems this causes the page to be refreshed in your browser. </p></li><li class="li"><p><strong>Revert</strong> causes all settings to revert to their last saved values.</p></li><li class="li"><p><strong>Use Defaults</strong> reverts all settings to the values they had when the project was created.</p></li><li class="li"><p><strong>Save</strong> saves the changes to disk. You need to save your changes in order for them to persist beyond the current session.</p></li></ul><p>The “Info...” button displays a brief description of the currently selected Direct to Web component.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF107" title="Restricting Access to Entities"></a><h2>Restricting Access to Entities</h2><p>The Entities display of the WebAssistant enables you to specify which entities of the database model appear in the application. Of those entities, it further allows you to specify which are read-only and which the user can write data to. Records from read-only entities are restricted from appearing in edit pages. </p><p>The user interface for accomplishing these tasks is simple, as the following example illustrates:</p><br/><div><img src = "../art/waentities.gif" alt = "image: ../art/waentities.gif" width="523" height="243"></div><br/><p>To specify an entity that shouldn’t appear in the application, select it and use the arrow keys to move it to the Hidden Entities column. The above example shows that the entities ListingFeature and Suggestions are hidden. To specify an entity that should be read-only, select it and use the arrow keys to move it to the Read-only Entities column. The above example shows that the Rating entity has been moved the the Read-Only column. By default, all entities initially appear in the Read/Write Entities column.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIFBFFD" title="Customizing Pages"></a><h2>Customizing Pages</h2><p>The Customize Page display of the WebAssistant enables you to set global attributes for the current page. These attributes include the page template, the color of the table, whether this color alternates with another color in lists, and the size of the border enclosing the page. The following is an example of the Customize Page display:</p><br/><div><img src = "../art/wapage.gif" alt = "image: ../art/wapage.gif" width="441" height="242"></div><br/><ul class="ul"><li class="li"><p>To change the template defining the page style, choose another template from the pop-up list.</p></li><li class="li"><p>To change the thickness of the border around the page, choose a value from the Border Size pop-up list, replacing the current number. You can specify a border thickness of 0 to 5 pixels.</p></li><li class="li"><p>To change the color of the table, move the sliders to the right of the sample color. The color specification is RGB-based (that is, a specific mixture of red, green, and blue). The top slider manipulates red saturation, the middle slider is for green, and the bottom slider is for blue. The three pairs of hexadecimal digits after the number sign in the field represent (left to right) saturation levels of red, green, and blue.</p></li></ul><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCICHCHH" title="Setting Which Properties are Displayed"></a><h2>Setting Which Properties are Displayed</h2><p>The Properties display of the WebAssistant enables you to specify which properties of an entity appear in a page (or component) and the order in which these properties appear. Most of the user-interface elements for accomplishing these things are in the left half of the display as shown in the following example:</p><br/><div><img src = "../art/wapropertieslistexplained.gif" alt = "image: ../art/wapropertieslistexplained.gif" width="510" height="252"></div><br/><p>The entity’s properties (attributes and relationships) in the Show column are displayed in the page. To the left of the arrows is a key browser that shows relationships (which appear with a “+”) and hidden attributes. You can click on a relationship to show its attributes and relationships in the next column of the key browser.</p><p>The WebAssistant displays the keys that can be found in the entity’s source code. If you want to show a key or key path that doesn’t appear, you can type in the text field.</p><p>For each property, you can</p><ul class="ul"><li class="li"><p>Move it to the key browser by selecting it and clicking the left arrow. This hides the property. Similarly, if a property is hidden, you can show it by selecting it and clicking the right arrow.</p></li><li class="li"><p>Move it up or down in the list by clicking the up and down arrows. This changes the order of appearance of the properties in the page (left to right or top to bottom, depending on the component).</p></li></ul><p>By default, the WebAssistant shows only class properties. If you want to show a custom method or a keypath, type it into the textfield under the “Pick Properties To Show” label (for example, “agent.photo”).</p><p>You can also change the title for a property by editing the string in the Display (Disp.) field. This change only affects the way the property is labeled in the page and has no effect on the actual property name.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHDAGJ" title="Changing How Properties Are Displayed"></a><h2>Changing How Properties Are Displayed</h2><p>You can use the Properties display of the WebAssistant to specify various display characteristics of properties, such as formatting, color, alignment, and the representation of relationships. The fields and controls for setting these characteristics are on the right half of the display. Here is an example:</p><br/><div><img src = "../art/wafirstname.gif" alt = "image: ../art/wafirstname.gif" width="189" height="145"></div><br/><p>Let’s go over the various elements of this part of the user interface:</p><ul class="ul"><li class="li"><p>At the top is the Display field, which holds the title of the property for the current page and entity. As discussed in <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCICHCHH">“Setting Which Properties are Displayed,”</a></span> you can edit this string.</p></li><li class="li"><p>Next to the Display field, in parentheses, is its data type. The data type determines the set of display components available for use. You cannot edit this information directly (however, you can edit the model file, which specifies the data type, using EOModeler).</p></li><li class="li"><p>The pop-up list shows the name of the component that is used to display the selected property in the current page. From this menu you can choose a different component to display the property. When you choose a display component, the set of controls and fields in the right side of the Properties display can change. </p></li></ul><p>The items in the pop-up list identify reusable components in the Direct to Web framework called property-level components, which are used to render the properties on the pages you see in your application. Each property in a page of any type is initially shown in a default way for that type using a default property-level component.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF108" title="Textual Attributes and Formatting"></a><h3>Textual Attributes and Formatting</h3><p>The display components available for the currently selected property offer characteristics suitable to the data type and function of the attribute. A few examples might help to clarify this statement:</p><ul class="spaceabove"><li class="li"><p>If the data type of the attribute is a String, but it is also a URL, then the DisplayHyperlink or DisplayMailTo components could be what you want. </p></li><li class="li"><p>If the attribute is a date (NSTimestamp), then you might choose the DisplayString component and provide format specifiers to have the date formatted in a certain way.</p></li><li class="li"><p>Similarly, if the attribute is a currency value (BigDecimal), you might want to use the DisplayNumber component and format the display of the attribute with two decimal positions and a leading dollar sign. </p></li><li class="li"><p>If you want to highlight a certain column of values in a table by giving them a different color, then you could choose the DisplayStyledString component that lets you apply a color to a property.</p></li></ul><p>You can click the Info button in the WebAssistant to get a short description of the currently selected display component.</p><p>The three most common display characteristics for properties are alignment, formatting, and color. Each of these has their own controls or fields in the right side of the Property display:</p><ul class="spaceabove"><li class="li"><p><strong>Alignment</strong> Choose Right, Center, or Left from the pop-up list to specify the alignment of text within a cell of a table.</p></li><li class="li"><p><strong>Formatter</strong> You can have your application display some types of data, such as dates and numbers, as formatted strings. For example, the date “Sat 4 Jul 98” can be also represented as “July 4, 1998.” The number one thousand can be represented either as “1,000” or “1.000”, depending on the locale. There are different format specifiers for dates and numbers; check the reference documentation for the NSTimestampFormatter and NSNumberFormatter classes for details. </p></li><li class="li"><p><strong>Color</strong> To change the color of text, either move the sliders to the right of the sample color or enter hexadecimal numbers in the field above the sliders. The color specification is RGB-based (that is, a specific mixture of red, green, and blue). The top slider manipulates red saturation, the middle slider is for green, and the bottom slider is for blue. The three pairs of hexadecimal digits after the number sign in the field represent (left to right) saturation levels of red, green, and blue.</p></li></ul><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIHBJGJ" title="Representation of Relationships"></a><h3>Representation of Relationships</h3><p>Properties that are relationships (instead of attributes) have their own set of display components that you can use. Take the following list page as an example:</p><br/><div><img src = "../art/listpage.gif" alt = "image: ../art/listpage.gif" width="506" height="153"></div><br/><p>There are two relationships on this page. One is a to-one relationship (Agent) and the other is a to-many relationship (Suggested Listings). By default, all to-many relationships are displayed using DisplayToManyFault, and to-one relationships are displayed using DisplayToOneFault. “Fault” indicates that the records in the relationship aren’t displayed until they are asked for; that is, until the user clicks Inspect. When you click Inspect, a list page appears, showing all the records in the relationship (such as all suggested listings for the customer). </p><p>You can change the display component for the relationship to get a different presentation. Consider the Suggested Listings relationship in the Customer-List page example above. Using your browser, navigate to the list page for the Customer entity. Move the suggestedListings property to the Show column using the WebAssistant and choose D2WDisplayToManyBrowser from the component pop-up list. The right side of the WebAssistant should look similar to the following example:</p><br/><div><img src = "../art/wadisplaytomanybrowser.gif" alt = "image: ../art/wadisplaytomanybrowser.gif" width="196" height="180"></div><br/><p>In addition to the Alignment pop-up list, the WOComponent group includes two controls specific to the display of relationships. The items in the Target Key browser are selected attributes of the destination entity; these “target keys” refer to a string identifying a to-many relationship. In this case the Suggested Listings entity has many target keys to choose from<code></code>. In addition, Direct to Web provides a default key called <code>userPresentableDescription</code>, which is usually a combination of the relationship’s keys, if there are multiple keys. </p><p>The Allow Collapsing checkbox, when checked, causes the relationship initially to be presented as a disclosure triangle followed by a number and the plural form of the display name for the destination entity (for example, “3 Listings”). When the user clicks the triangle, the table cell expands to display the items in the form appropriate to the display component; in this case, a browser:</p><br/><div><img src = "../art/displaytomanybrowser.gif" alt = "image: ../art/displaytomanybrowser.gif" width="106" height="83"></div><br/><p>To get a better sense of the control you have over the presentation of relationships, set the display component for the Suggested Listings relationship to DisplayToMany and uncheck the Allow Collapsing checkbox. When you update your browser, a cell in the Suggested Listings column should look similar to this:</p><br/><div><img src = "../art/displaytomany.gif" alt = "image: ../art/displaytomany.gif" width="98" height="52"></div><br/><p>To-one relationships offer five possibilities for presentation. However, only three are relevant. The DisplayToOneFault component presents an Inspect button which, when clicked, displays the relationship record in an inspect page. The DisplayToOne component displays the target key for the single destination record as a hyperlink which, when clicked, brings you to the same inspect page. Finally, there is always the option of using a D2WCustomComponent. For more information on creating custom components, see “Creating a Custom Property-Level Component” (page 83).</p><p>A note of caution: The type of display component appropriate to a relationship depends on the likely number of records in that relationship. For example, the Agent entity has a Listings to-many relationship; if some agents have numerous listings, it might make more sense to use DisplayToManyFault (that is, the Inspect button) rather than display the listing numbers of all those listings in a cell in the table.</p><p>To find out more about a display component for a relationship, click the Info button in the WebAssistant after selecting the component.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIJCDDD" title="WebAssistant Expert Mode"></a><h2>WebAssistant Expert Mode</h2><p>Expert mode is similar to standard mode, except that it allows you to make changes to any page in your application whether it is currently displayed in your browser or not. If you click the Expert mode button at the bottom of the WebAssistant, the window expands to include the following interface:</p><br/><div><img src = "../art/waexperttasksentities.gif" alt = "image: ../art/waexperttasksentities.gif" width="133" height="166"></div><br/><p>The tasks pop-up list shows the types of pages available in Direct to Web. The Entities pop-up list shows the entities in the model.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-TPXREF109" title="Choosing a Page to Customize"></a><h3>Choosing a Page to Customize</h3><p>To customize any page in your application, simply select the type of page and the entity. The figure above shows an example of choosing the list page for the Customer entity, making the WebAssistant focus on this page rather than the page currently showing in the browser. </p><p>If you select “*all*” under Tasks, any changes you make affect all customizable pages for the selected entity. If you select “*all*” under Entities, you’ll see a list of data types that exist in the application, as shown in the following figure. </p><br/><div><img src = "../art/waexpertallentities.gif" alt = "image: ../art/waexpertallentities.gif" width="315" height="192"></div><br/><p>Any changes you make affect all occurrences of that type. For example, the figure shows NSTimestamp selected. You can specify a formatter, and pick a component to use anywhere in the application that an NSTimestamp object is displayed.</p><p>If you click Synchronize, the task and entity for the current browser page are selected in the WebAssistant.</p><p>You can also select the Page pane in the WebAssistant window while in Expert mode and change the underlying component, color, and border thickness of whatever page for whatever entity you select in the Tasks and Entities pop-up menus.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABCJDCC" title="Named Configurations"></a><h3>Named Configurations</h3><p>Once you have customized a page, you can capture the settings in a <em>named configuration</em>. Named configurations are used when you need to display more than one type of page for a particular task and entity. Consider a page that lists properties for a real estate agency. A potential buyer would want to see the things like amount of rooms and bathrooms along with the asking price. A real estate agent might want to see how many times the property has been looked at and what the selling price is. In addition, the buyer should not be able to edit any information, while the agent might be able to edit some properties. To set up such a system, you create two named configurations for listing properties: one for the potential buyer and another for the real estate agent.</p><p>Named configurations can only be displayed programmatically; the WebAssistant can edit named configurations but can’t display the changes in your browser.</p><p>To create a new named configuration follow these steps:</p><ol class="ol"><li class="li"><p>In the expert mode interface, click Add.</p><p>A panel appears with a text field containing a default name for the configuration (the page name followed by the entity name).</p></li><li class="li"><p>Enter a new name for the configuration if you choose.</p></li><li class="li"><p>Click Ok.</p></li><li class="li"><p>Configure the Properties and Page panes for the named configuration.</p></li><li class="li"><p>Click Save.</p></li></ol><p>To edit a named configuration, select it from the Named Configurations pop-up list, make the changes, and click Save.</p><p>To delete a named configuration, select it from the Named Configurations pop-up list and click Delete.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIJIIDE" title="Generating Components"></a><h2>Generating Components</h2><p>When you have worked with the WebAssistant and customized your pages to your liking, you may still want to add more features to your application. To do so, you can “freeze” a page; that is, save it as a WebObjects component. When you do this, the component becomes part of your project and is no longer created “on the fly” by Direct to Web. This has several advantages:</p><ul class="ul"><li class="li"><p>You have complete control over the visual appearance of the page. You can add any static or dynamic HTML elements you like, using a tool such as WebObjects Builder.</p></li><li class="li"><p>You can add functionality to the page by editing the component’s Java code, as well as by editing the bindings of the page’s dynamic elements.</p></li><li class="li"><p>Your application’s performance improves because Direct to Web doesn’t have to go through the process of creating the page “on the fly.”</p></li></ul><p>The main disadvantage of generating components is that you lose the ability to modify settings with the WebAssistant since the entity, property settings, and page configuration are stored directly in the generated component. To modify the page, you must edit the component or its corresponding <code>.java</code> file. Therefore, you should try to get your settings as close as possible to what you want before generating the component.</p><p>To generate a component:</p><ol class="ol"><li class="li"><p>Click the Expert Mode button at the bottom of the WebAssistant to enter Expert mode.</p></li><li class="li"><p>Click the Generation tab at the top of the WebAssistant.</p><div class="item_figure"><img src = "../art/wafreezepage.gif" alt = "image: ../art/wafreezepage.gif" width="257" height="135"></div></li><li class="li"><p>Select the task and entity corresponding to the page you want to generate.</p><p>You can’t select “*all*” to generate multiple components. You must generate the components one at a time.</p></li><li class="li"><p>In the Advanced Options group of controls, make sure the “Use DirectToWeb or User Template” radio button is selected.</p></li><li class="li"><p>Click Freeze Component.</p><p>The Freeze Component window appears. It contains a text field with a default name for your page (the page name followed by the entity name). You can edit the name if you choose.</p><div class="item_figure"><img src = "../art/wafreezecomponentwindow.gif" alt = "image: ../art/wafreezecomponentwindow.gif" width="188" height="159"></div></li><li class="li"><p>Click the Ok button.</p><p>Direct to Web generates a component (with extension <code>.wo</code>) and a corresponding <code>.java</code> file and adds them to your project. You may have to wait a few moments for this process to complete. Your settings are automatically saved.</p></li><li class="li"><p>Rebuild and run your project, and restart the WebAssistant.</p></li></ol><p>If you decide not to use the frozen component and have Direct to Web build the page “on the fly,” select the “Use DirectToWeb or User Template” option.</p><p>When you generate a page and click Update, the browser’s current page doesn’t reflect the changes. To use the new component, you must rebuild the application, relaunch it, and then navigate to a new instance of the page. For example, if the current page is a Movie query page, and you use the WebAssistant to freeze it, you must rebuild the project with the frozen component, then launch the application and navigate to a new instance of Movie query (by clicking Build Query); the new instance uses the frozen component.</p><p>The generated component is like any other WebObjects component. You can edit your component graphically using WebObjects Builder. You can also examine the HTML and bindings (<code>.wod</code> file) of the new component in Project Builder.</p><p>Direct to Web also generates Java code for your component, which you can modify appropriately to your needs. Each component implements an interface that is appropriate to the page: QueryPageInterface, ListPageInterface, InspectPageInterface, and EditPageInterface. For example, the <code>QueryAgent.java</code> file in <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABBJFGB">Listing 1-1</a></span> implements the QueryPageInterface. For example, it contains an action method called <code>queryAction </code>that returns a component when the Query DB button is clicked. (Note that the component’s submit button is bound to <code>queryAction </code>in <code>QueryAgent.wod</code>.)</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABBJFGB" title="Listing 1-1QueryMovieRole.java generated by the Web Assistant"></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>QueryMovieRole.java generated by the Web Assistant</p><div class="codesample"><table><tr><td scope="row"><pre>importcom.webobjects.appserver.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eocontrol.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.directtoweb.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eoaccess.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.util.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class QueryAgent extendsWOComponent implements QueryPageInterface {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    protected EODatabaseDataSource_queryDataSource;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    protected WODisplayGroupdisplayGroup;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    protected NextPageDelegate_nextPageDelegate;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public WOComponent queryAction(){<span></span></pre></td></tr><tr><td scope="row"><pre>        _queryDataSource =new EODatabaseDataSource(session().defaultEditingContext(), "Agent");<span></span></pre></td></tr><tr><td scope="row"><pre>        _queryDataSource.setAuxiliaryQualifier(qualifier());<span></span></pre></td></tr><tr><td scope="row"><pre>        _queryDataSource.fetchSpecification().setIsDeep(true);<span></span></pre></td></tr><tr><td scope="row"><pre>    _queryDataSource.fetchSpecification().setUsesDistinct(false);<span></span></pre></td></tr><tr><td scope="row"><pre>    _queryDataSource.fetchSpecification().setRefreshesRefetchedObjects(false);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        if (_nextPageDelegate==null){<span></span></pre></td></tr><tr><td scope="row"><pre>            ListPageInterface listPage=D2W.factory().listPageForEntityNamed("Agent",session());<span></span></pre></td></tr><tr><td scope="row"><pre>            listPage.setDataSource(_queryDataSource);<span></span></pre></td></tr><tr><td scope="row"><pre>            listPage.setNextPage(this);<span></span></pre></td></tr><tr><td scope="row"><pre>            return (WOComponent)listPage;<span></span></pre></td></tr><tr><td scope="row"><pre>        } else<span></span></pre></td></tr><tr><td scope="row"><pre>            return _nextPageDelegate.nextPage(this);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public EOQualifier qualifier(){<span></span></pre></td></tr><tr><td scope="row"><pre>    return displayGroup.qualifierFromQueryValues();}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void setNextPageDelegate(NextPageDelegatedelegate) {<span></span></pre></td></tr><tr><td scope="row"><pre>           _nextPageDelegate=delegate;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public EODataSource queryDataSource(){ return _queryDataSource; }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public String entity() {<span></span></pre></td></tr><tr><td scope="row"><pre>            return "Agent";<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public QueryAgent(WOContextaContext) {<span></span></pre></td></tr><tr><td scope="row"><pre>        super(aContext);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIFDJAB" title="User Templates"></a><h2>User Templates</h2><p>Sometimes you need to change the appearance of a Direct to Web page without freezing the component. You might want to change all of the pages for a particular task (list pages for example) without freezing components for every entity. Or you might want to use the Web Assistant to fine-tune pages having your custom appearance.</p><p>Direct to Web allows you to generate, modify, and use templates. Templates are WebObjects components that Direct to Web can use to generate pages (list pages for example) for any entity. Direct to Web provides a number of prebuilt templates from which you generate <em>user templates</em>. User templates appear together with the prebuilt templates in the Web Assistant and you can apply them to pages in your project.</p><p>These are the advantages of using templates:</p><ul class="ul"><li class="li"><p>You can use a template for any entity.</p></li><li class="li"><p>You can modify the properties and page appearance with the Web Assistant.</p></li><li class="li"><p>Since the template is a WebObjects component, you have control over its visual appearance. You can add any static or dynamic HTML elements you like, using a tool such as WebObjects Builder.</p></li><li class="li"><p>You can add functionality to the template by editing the component’s Java code, as well as by editing the bindings of the component’s dynamic elements.</p></li></ul><p>Templates are slower than frozen components since Direct to Web generates the pages that the user sees in the browser.</p><a name="//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BABGIBAC" title="Generating a Template"></a><h3>Generating a Template</h3><p>Follow these steps to generate a template:</p><ol class="ol"><li class="li"><p>Click Expert Mode at the bottom of the Web Assistant window to enter Expert mode.</p></li><li class="li"><p>Click the Generation tab at the top of the WebAssistant.</p><div class="item_figure"><img src = "../art/wageneratetemplate.gif" alt = "image: ../art/wageneratetemplate.gif" width="269" height="135"></div></li><li class="li"><p>Select the task corresponding to the page you want to generate.</p></li><li class="li"><p>Select “*all*” in the Entities pop-up list.</p><p>You must select “*all*” for the entities because the template is independent of the entity. You cannot select “*all*” for the task to generate multiple templates. You must generate the templates one at a time.</p></li><li class="li"><p>Make sure the “Use DirectToWeb or User Template” radio button is selected.</p></li><li class="li"><p>Click Generate Template.</p><p>The Generate Template window appears. It contains a text field with a default name for your template. You can edit the name if you choose.</p></li><li class="li"><p>Click the Ok button.</p><p>Direct to Web copies a component (with extension <code>.wo</code>) and a corresponding <code>.java</code> file from a predefined template and adds them to your project. You may have to wait a few moments for this process to complete. Your settings are automatically saved.</p></li><li class="li"><p>Rebuild and run your project, and restart the WebAssistant.</p></li></ol><p>After you generate the template and rebuild your project, you can use the Web Assistant to apply the template to a Direct to Web page. See <span class="content_text"><a href="WalkThrough.html#//apple_ref/doc/uid/TP30001015-DontLinkChapterID_5-BCIFBFFD">“Customizing Pages.”</a></span></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Architecture/Architecture.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/Developing_With_D2W/WalkThrough/WalkThrough.html%3Fid%3DTP30001015-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/Developing_With_D2W/WalkThrough/WalkThrough.html%3Fid%3DTP30001015-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/Developing_With_D2W/WalkThrough/WalkThrough.html%3Fid%3DTP30001015-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
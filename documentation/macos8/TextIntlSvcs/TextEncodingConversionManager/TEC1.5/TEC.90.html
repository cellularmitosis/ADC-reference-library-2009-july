<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<script language="JavaScript" src="frametest.js"></script>
<TITLE> TruncateForTextToUnicode</TITLE><LINK REL="stylesheet" TYPE="text/css" HREF="../../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../../Resources/JavaScript/page.js"></script>
</head>
<body bgcolor="#ffffff">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<DIV>
<a name="top"></a>
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --><A HREF="TEC.8f.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.8f.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.91.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A><br>
<font face="Geneva,Helvetica,Arial" size="1"><b><br>
		PATH<spacer type="horizontal" size="5">&nbsp;</b></font><a href="../../../mac8.html"><font face="Geneva,Helvetica,Arial" size="1">Mac OS 8 and 9 Developer Documentation</a>  <b>&gt;</b> Text Encoding Conversion Manager<br>
		<img src="images/im_smblue.gif" width="116" height="8"><img src="images/space.gif" width="6" height="11">Programming With the Text Encoding Conversion Manager</font><br>
		<br>
		<hr>

</DIV>
<H1>
<A NAME="pgfId=11151">
 </A>
<A NAME="10958">
 </A>
TruncateForTextToUnicode</H1>
<P>
<A NAME="pgfId=3831">
 </A>
Identifies where your application can safely break a multibyte string to be converted to Unicode so that the string is not broken in the middle of a multibyte character. </P>
<TT>
<A NAME="pgfId=26828">
 </A>
pascal OSStatus TruncateForTextToUnicode(<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstTextToUnicodeInfo iTextToUnicodeInfo,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteCount iSourceLen, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConstLogicalAddress iSourceStr, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteCount iMaxLen, <BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteCount *oTruncatedLen);</TT>
<DL COMPACT>
<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26832">
 </A>
<TT>iTextToUnicodeInfo</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3834">
 </A>
 The Unicode converter object of type <A HREF="TEC.73.html" CLASS="XRef">
TextToUnicodeInfo</A>
 for the text string to be divided up with each segment properly truncated. The <TT>TruncateForTextToUnicode</TT> function does not modify the object's contents.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26843">
 </A>
<TT>iSourceLen</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3838">
 </A>
The length in bytes of the multibyte string to be divided up. </DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26852">
 </A>
<TT>iSourceStr</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3839">
 </A>
The address of the multibyte string to be divided up.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26861">
 </A>
<TT>iMaxLen</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3840">
 </A>
The maximum allowable length of the string to be truncated. This must be less than or equal to <TT>iSourceLen</TT>.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26870">
 </A>
<TT>oTruncatedLen</TT></DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=3841">
 </A>
A pointer to a value of type <TT>ByteCount</TT>. On output, this value contains the length of the longest portion of the multibyte string, pointed to by <TT>iSourceStr</TT>, that is less than or equal to the length specified by <TT>iMaxLen</TT>. This identifies the byte after which you can break the string.</DD><P>

<DT CLASS="DT.DefinitionTerm">
<A NAME="pgfId=26879">
 </A>
<I CLASS="italics">
function result</I>
</DT>
<DD CLASS="DD.DefinitionDef">
<A NAME="pgfId=14420">
 </A>
A result code. See <A HREF="TEC.20.html" CLASS="XRef">
Text Encoding Conversion Manager Result Codes</A>
 in the chapter <A HREF="TEC.18.html" CLASS="XRef">
Basic Text Types Reference</A>
</DD><P>

</DL COMPACT>
<DIV>
<H5 CLASS="RSb.RoutineSbhd">
<A NAME="pgfId=3843">
 </A>
DISCUSSION</H5>
<P>
<A NAME="pgfId=3844">
 </A>
Your application can use this function to break a string properly before you call the function <A HREF="TEC.80.html" CLASS="XRef"><TT>ConvertFromTextToUnicode</TT></A> so that the string you pass it is terminated with complete characters. You can call this function repeatedly to properly divide up a text segment, each time identifying the new beginning of the string, until the last portion of the text is less than or equal to the maximum allowable length. Each time you use the function, you get a properly terminated string within the allowable length range. You use the function as many times as necessary to be able to convert the entire text segment. <P>


<A NAME="pgfId=11210">
 </A>
Because the <TT>TruncateForTextToUnicode</TT> function does not modify the contents of the Unicode converter object, you can call this function safely between calls to the function <A HREF="TEC.80.html" CLASS="XRef"><TT>ConvertFromTextToUnicode</TT></A>.<P>


<A NAME="pgfId=3846">
 </A>
If the function returns <TT>paramErr</TT>, <TT>kTECGlobalsUnavailableErr</TT>, or <TT>kTECTableFormatErr</TT> the value returned by the <TT>oTruncatedLen</TT> parameter is invalid.</P>
</DIV>
<HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 13 Dec 99)<P><A HREF="TEC.8f.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="TEC.8f.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="TEC.91.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr>
<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
document.write(frameLink);
//	-->
</script><!-- end Show/Hide frames --></A>

<!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY>
</HTML>

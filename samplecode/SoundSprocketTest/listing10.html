<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>SoundSprocketTest - /TS3Sound.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGames-date.html">Games</a> &gt; <A HREF="javascript:location.replace('index.html');">SoundSprocketTest</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Games/index.html" target="_blank">Reference Library > Games</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">SoundSprocketTest</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/TS3Sound.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/TS3Events.c</option>
<option value="listing2.html">/TS3Events.h</option>
<option value="listing3.html">/TS3Main.c</option>
<option value="listing4.html">/TS3Main.h</option>
<option value="listing5.html">/TS3Menu.c</option>
<option value="listing6.html">/TS3Menu.h</option>
<option value="listing7.html">/TS3Message.c</option>
<option value="listing8.html">/TS3Message.h</option>
<option value="listing9.html">/TS3Resource.h</option>
<option value="listing10.html">/TS3Sound.c</option>
<option value="listing11.html">/TS3Sound.h</option>
<option value="listing12.html">/TS3TestAPI.c</option>
<option value="listing13.html">/TS3TestAPI.h</option>
<option value="listing14.html">/TS3TestHiLevel.c</option>
<option value="listing15.html">/TS3TestHiLevel.h</option>
<option value="listing16.html">/TS3TestLoLevel.c</option>
<option value="listing17.html">/TS3TestLoLevel.h</option>
<option value="listing18.html">/TS3Utils.c</option>
<option value="listing19.html">/TS3Utils.h</option>
<option value="listing20.html">/TS3Window.c</option>
<option value="listing21.html">/TS3Window.h</option></select>
				</p>
				</form>
				<p><strong><a href="SoundSprocketTest.zip">Download Sample</a></strong> (&#147;SoundSprocketTest.zip&#148;, 96.8K)<BR>
<strong><a href="SoundSprocketTest.dmg">Download Sample</a></strong> (&#147;SoundSprocketTest.dmg&#148;, 163.5K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/* *  File:    TS3Sound.c * *  Contents:  Handles some of the sound stuff. * *  Copyright &copy; 1996 Apple Computer, Inc. */#include &lt;assert.h&gt;#include &lt;math.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;Components.h&gt;#include &lt;Controls.h&gt;#include &lt;Dialogs.h&gt;#include &lt;Sound.h&gt;#include &lt;SoundComponents.h&gt;#include &lt;Resources.h&gt;#include &lt;Timer.h&gt;#include &lt;ToolUtils.h&gt;#include &lt;Types.h&gt;#define __USING_OLD_SOUND_H__ 0#include &quot;SoundSprocket.h&quot;#include &quot;TS3Message.h&quot;#include &quot;TS3Resource.h&quot;#include &quot;TS3Sound.h&quot;#include &quot;TS3Utils.h&quot;#include &quot;TS3Window.h&quot;static SndChannelPtr    gSoundChannel      = NULL;static SndListHandle    gSoundResource      = NULL;static DialogPtr      gSoundDialog      = NULL;static SSpLocalizationData  gSoundPrev3DInfo;static Boolean CheckVersionNumber(  const NumVersion*    inVersion,  UInt8          inMajor,  UInt8          inMinor,  UInt8          inBug);static WindowMethodPtr Sound_MetaHandler(  WindowMethod    inMethod);static void Sound_ConsumeEvent(  WindowPtr      inWindow,  const EventRecord*  inEvent,  Boolean*      outConsumed);static void Sound_Update(  WindowPtr      inWindow);static Boolean EventProc(  EventRecord    *inEvent);static pascal void Sound_BoxUserItem(  DialogPtr      inDialog,  short        inItem);/******************************************************************************* *  CheckVersionNumber * *  Returns true if the given version number is compatible with (i. e not older *  than) version inMajor.inMinor.inBug. ******************************************************************************/Boolean CheckVersionNumber(  const NumVersion*    inVersion,  UInt8          inMajor,  UInt8          inMinor,  UInt8          inBug){  if (inVersion-&gt;majorRev != inMajor)  {    return inVersion-&gt;majorRev &gt; inMajor;  }  else  {    return inVersion-&gt;minorAndBugRev &gt;= inMinor &lt;&lt; 4 | inBug;  }}// **************************** GetSSpFilterVersion ****************************// Finds the manufacturer and version number of the SoundSprocket filter that// may be installed.  inManufacturer should be the manufacturer code specified// at the installation time, which may be zero to allow any manufacturer.// If no error is encountered, outManufacturer is set to the actual manufacturer// code and outMajorVersion and outMinorVersion are set to the component// specification level and manufacturer's implementation revision, respectively.static OSStatus GetSSpFilterVersion(  OSType          inManufacturer,  OSType*          outManufacturer,  UInt32*          outMajorVersion,  UInt32*          outMinorVersion){  OSStatus        err;  ComponentDescription  description;  Component        componentRef;  UInt32          vers;    // Set up the component description    description.componentType      = kSoundEffectsType;    description.componentSubType    = kSSpLocalizationSubType;    description.componentManufacturer  = inManufacturer;    description.componentFlags      = 0;            description.componentFlagsMask    = 0;        // Find a component matching the description  componentRef = FindNextComponent(nil, &amp;description);  if (componentRef == nil)  return couldntGetRequiredComponent;    // Get the component description (for the manufacturer code)  err = GetComponentInfo(componentRef, &amp;description, nil, nil, nil);  if (err != noErr)  return err;    // Get the version composite  vers = (UInt32) GetComponentVersion((ComponentInstance) componentRef);    // Return the results  *outManufacturer = description.componentManufacturer;  *outMajorVersion = HiWord(vers);  *outMinorVersion = LoWord(vers);    return noErr;}/* ============================================================================= *    Sound_Init (external) * *  Initializes the sound stuff. * ========================================================================== */void Sound_Init(  void){  OSStatus      err;  SoundComponentLink  link;  NumVersion      version;  OSType        manufacturer;  UInt32        majorVersion;  UInt32        minorVersion;    assert(kFeedbackItem_COUNT == kFeedbackItem_ExpectedCount);    // Check the sound manager version  version = SndSoundManagerVersion();  //*** WARNING ***  //* IF YOU CAN'T COMPILE THE PREVIOUS LINE, YOU MUST UPGRADE TO ETO #20 OR  //* EDIT YOUR Sound.h TO MAKE SndSoundManagerVersion RETURN THE TYPE NumVersion.    if (!CheckVersionNumber(&amp;version, 3, 2, 1))  {    StopAlert(kAlrtID_SoundMgrVersion, NULL);    // Note: A normal application would bail on 3D sound here  }    // Allocate the sound channel  err = SndNewChannel(&amp;gSoundChannel, sampledSynth, initMono, NULL);  Message_CheckError(err, &quot;Sound_Init&quot;, &quot;SndNewChannel&quot;);    assert(gSoundChannel != NULL);    // Install the 3D sound filters  link.description.componentType      = kSoundEffectsType;  link.description.componentSubType    = kSSpLocalizationSubType;  link.description.componentManufacturer  = 0;  link.description.componentFlags      = 0;          link.description.componentFlagsMask    = 0;      link.mixerID              = nil;  link.linkID                = nil;    SndSetInfo(gSoundChannel, siPreMixerSoundComponent, &amp;link);  Message_CheckError(err, &quot;Sound_Init&quot;, &quot;SndNewChannel&quot;);    // Verify that the right version filter was installed  err = GetSSpFilterVersion(      link.description.componentManufacturer,      &amp;manufacturer,      &amp;majorVersion,      &amp;minorVersion);    if (err != noErr)  {    // Filter must not be installed    // Note: A normal application would bail on 3D sound here    StopAlert(kAlrtID_FilterNotInstalled, NULL);  }  else  {    // The major version represents the component specification level    if (majorVersion &lt; 1)    {      //* if we couldn't handle some old version, we could bail here.            StopAlert(kAlrtID_FilterVersion, NULL);      // Note: A normal application would bail on 3D sound here    }    else    {      // The minor version specifies the manufacturer's implementation revision            //* could do something here is we needed to handle tweaks for specific      //* manufacturers or versions.    }  }  // Grab the dialog  gSoundDialog = GetNewDialog(kDlogID_Feedback, NULL, (WindowPtr) -1);  assert(gSoundDialog != NULL);    // Set up our method table  Window_New(gSoundDialog, Sound_MetaHandler);    // Show the dialog  ShowWindow(gSoundDialog);    // Initialize the SSpLocalizationData state to garbage  memset(&amp;gSoundPrev3DInfo, 0x55, sizeof(SSpLocalizationData));}/* ============================================================================= *    Sound_Exit (external) * *  Prepares for exit. * ========================================================================== */void Sound_Exit(  void){  Sound_PlaySilence();  assert(gSoundResource == NULL);    if (gSoundChannel != NULL)  {    SndDisposeChannel(gSoundChannel, true);    gSoundChannel = NULL;  }    if (gSoundDialog != NULL)  {    DisposeDialog(gSoundDialog);    gSoundDialog = NULL;  }}/* ============================================================================= *    Sound_MetaHandler (internal) * *  Returns the method function pointer that corresponds to the given ID. * ========================================================================== */WindowMethodPtr Sound_MetaHandler(  WindowMethod    inMethod){  WindowMethodPtr    result;    result = NULL;    switch (inMethod)  {    case kWindowMethod_ConsumeEvent:      result = (WindowMethodPtr) Sound_ConsumeEvent;    break;        case kWindowMethod_Update:      result = (WindowMethodPtr) Sound_Update;    break;  }    return result;}/* ============================================================================= *    Sound_ConsumeEvent (internal) * *  Called for each event when this is the front window. * ========================================================================== */void Sound_ConsumeEvent(  WindowPtr      inWindow,  const EventRecord*  inEvent,  Boolean*      outConsumed){  #pragma unused (inWindow)  Boolean        consumed;  WindowPtr      window;  short        item;    assert(inEvent != NULL);  assert(outConsumed != NULL);    consumed = false;    if (inEvent-&gt;what == activateEvt)  {    // We need to look at the activate event here because it is    // consumed by IsDialogEvent/DialogSelect below and so never    // gets to the window stuff    window = (WindowPtr) inEvent-&gt;message;        if (inEvent-&gt;modifiers &amp; activeFlag)    {      Window_Activate(window);    }    else    {      Window_Deactivate(window);    }  }      // Do dialog stuff  if (inEvent-&gt;what != keyDown || (inEvent-&gt;modifiers &amp; cmdKey) == 0)  {    consumed = IsDialogEvent(inEvent);    if (consumed)    {      DialogSelect(inEvent, &amp;window, &amp;item);    }  }    // Return the result  *outConsumed = consumed;}/* ============================================================================= *    Sound_Update (internal) * *  Updates the contents of the window. * ========================================================================== */void Sound_Update(  WindowPtr      inWindow){  DrawDialog(inWindow);}/* ============================================================================= *    Sound_Configure (external) * *  Stops the current sound, puts up the Configure dialog box, and resumes the *  stopped sound. * ========================================================================== */void Sound_Configure(  void){  OSStatus      err;  Boolean        playing;  short        resID;  ResType        resType;  Str255        resName;    // Find out which sound to restore  playing = gSoundResource != NULL;    if (playing)  {    GetResInfo((Handle) gSoundResource, &amp;resID, &amp;resType, resName);  }    // Quiet  Sound_PlaySilence();    // Configure  err = SSpConfigureSpeakerSetup(EventProc);  Message_CheckError(err, &quot;Sound_Configure&quot;, &quot;SSpConfigureSpeakerSetup&quot;);    // Play it again, Sam  if (playing)  {    Sound_PlayResource(resName);  }}/* ============================================================================= *    EventProc (internal) * *  Called to process events during the 3D sound Configure dialog.  Returns *  true if the event was handled (except for update events). * ========================================================================== */Boolean EventProc(  EventRecord    *inEvent){  WindowPtr        wind;    assert(inEvent != NULL);    if (inEvent-&gt;what == updateEvt)  {    wind = (WindowPtr) inEvent-&gt;message;        if (Window_IsMine(wind))    {      SetPort(wind);      BeginUpdate(wind);      Window_Update(wind);      EndUpdate(wind);    }  }    return false;}/* ============================================================================= *    Sound_PlaySilence (external) * *  Stops any sound that is playing. * ========================================================================== */void Sound_PlaySilence(  void){  OSStatus      err;  SndCommand      sndCommand;    sndCommand.cmd = quietCmd;  sndCommand.param1 = 0;  sndCommand.param2 = 0;  err = SndDoImmediate(gSoundChannel, &amp;sndCommand);  Message_CheckError(err, &quot;Sound_PlaySilence&quot;, &quot;SndDoImmediate&quot;);    if (gSoundResource != NULL)  {    ReleaseResource((Handle) gSoundResource);    gSoundResource = NULL;  }}/* ============================================================================= *    Sound_PlayResource (external) * *  Plays the 'snd ' resource that has the given name.  Returns true if *  successful; returns false if unsuccessful and therefore silence is happening. * ========================================================================== */Boolean Sound_PlayResource(  Str255        inSndName){  OSStatus      err;  SndCommand      sndCommand;  long        offset;    // Silence the sound channel and get rid of the old resource  Sound_PlaySilence();    // Grab the resource  gSoundResource = (SndListHandle) GetNamedResource('snd ', inSndName);  if (gSoundResource == NULL || ResError() != noErr)  {    StopAlert(kAlrtID_BadSndLoad, NULL);    goto bail;  }    // Lock it down  HLockHi((Handle) gSoundResource);    // Play it indefinitely  GetSoundHeaderOffset(gSoundResource, &amp;offset);    sndCommand.cmd = soundCmd;  sndCommand.param1 = 0;  sndCommand.param2 = (long) *gSoundResource + offset;  err = SndDoImmediate(gSoundChannel, &amp;sndCommand);  Message_CheckError(err, &quot;Sound_PlayResource&quot;, &quot;SndDoImmediate&quot;);  sndCommand.cmd = freqCmd;  sndCommand.param1 = 0;  sndCommand.param2 = 60;  err = SndDoImmediate(gSoundChannel, &amp;sndCommand);  Message_CheckError(err, &quot;Sound_PlayResource&quot;, &quot;SndDoImmediate&quot;);    return true;  // Error exitbail:  if (gSoundResource != NULL)  {    ReleaseResource((Handle) gSoundResource);    gSoundResource = NULL;  }    return false;}/* ============================================================================= *    Sound_Set3DInfo (external) * *  Sends the given 3D info to the sound channel. * ========================================================================== */void Sound_Set3DInfo(  const SSpLocalizationData*  in3DInfo){  OSStatus      err;  Str255        str;  UnsignedWide    time;    static UnsignedWide  prevTime = {0, 0};    assert(in3DInfo != NULL);    // Change the filter  err = SndSetInfo(gSoundChannel, siSSpLocalization, (SSpLocalizationData*) in3DInfo);  Message_CheckError(err, &quot;Sound_Set3DInfo&quot;, &quot;SndSetInfo&quot;);    // Update the dialog  Microseconds(&amp;time);    Utils_SetUInt32Field(    gSoundDialog,    kFeedbackItem_Updates,    1000000.0 / (time.lo-prevTime.lo),    true);    prevTime = time;    if (gSoundPrev3DInfo.cpuLoad != in3DInfo-&gt;cpuLoad)  {    Utils_SetUInt32Field(      gSoundDialog,      kFeedbackItem_CPULoad,      in3DInfo-&gt;cpuLoad,      true);        gSoundPrev3DInfo.cpuLoad = in3DInfo-&gt;cpuLoad;  }    if (gSoundPrev3DInfo.medium != in3DInfo-&gt;medium)  {    switch (in3DInfo-&gt;medium)    {      case kSSpMedium_Air:        strcpy((char*) str, (char*) &quot;\pkSSp\xC9Air&quot;);      break;            case kSSpMedium_Water:        strcpy((char*) str, (char*) &quot;\pkSSp\xC9Water&quot;);      break;            default:        sprintf((char*) str, &quot;x&lt;&lt;%lu&gt;&gt;&quot;, (unsigned long) in3DInfo-&gt;medium);        str[0] = strlen((char*) str) - 1;    }        Utils_SetStr255Field(      gSoundDialog,      kFeedbackItem_Medium,      str,      true);        gSoundPrev3DInfo.medium = in3DInfo-&gt;medium;  }    if (gSoundPrev3DInfo.humidity != in3DInfo-&gt;humidity)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Humidity,      in3DInfo-&gt;humidity,      true);        gSoundPrev3DInfo.humidity = in3DInfo-&gt;humidity;  }    if (gSoundPrev3DInfo.roomSize != in3DInfo-&gt;roomSize)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_RoomSize,      in3DInfo-&gt;roomSize,      true);        gSoundPrev3DInfo.roomSize = in3DInfo-&gt;roomSize;  }    if (gSoundPrev3DInfo.roomReflectivity != in3DInfo-&gt;roomReflectivity)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_RoomReflectivity,      in3DInfo-&gt;roomReflectivity,      true);        gSoundPrev3DInfo.roomReflectivity = in3DInfo-&gt;roomReflectivity;  }    if (gSoundPrev3DInfo.reverbAttenuation != in3DInfo-&gt;reverbAttenuation)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_ReverbAttenuation,      in3DInfo-&gt;reverbAttenuation,      true);        gSoundPrev3DInfo.reverbAttenuation = in3DInfo-&gt;reverbAttenuation;  }    if (gSoundPrev3DInfo.sourceMode != in3DInfo-&gt;sourceMode)  {    switch (in3DInfo-&gt;sourceMode)    {      case kSSpSourceMode_Unfiltered:        strcpy((char*) str, (char*) &quot;\pkSSp\xC9Unfiltered&quot;);      break;            case kSSpSourceMode_Localized:        strcpy((char*) str, (char*) &quot;\pkSSp\xC9Localized&quot;);      break;            case kSSpSourceMode_Ambient:        strcpy((char*) str, (char*) &quot;\pkSSp\xC9Ambient&quot;);      break;            case kSSpSourceMode_Binaural:        strcpy((char*) str, (char*) &quot;\pkSSp\xC9Binaural&quot;);      break;            default:        sprintf((char*) str, &quot;x&lt;&lt;%lu&gt;&gt;&quot;, (unsigned long) in3DInfo-&gt;sourceMode);        str[0] = strlen((char*) str) - 1;    }        Utils_SetStr255Field(      gSoundDialog,      kFeedbackItem_SourceMode,      str,      true);        gSoundPrev3DInfo.sourceMode = in3DInfo-&gt;sourceMode;  }    if (gSoundPrev3DInfo.referenceDistance != in3DInfo-&gt;referenceDistance)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_ReferenceDistance,      in3DInfo-&gt;referenceDistance,      true);        gSoundPrev3DInfo.referenceDistance = in3DInfo-&gt;referenceDistance;  }    if (gSoundPrev3DInfo.coneAngleCos != in3DInfo-&gt;coneAngleCos)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_ConeAngleCos,      in3DInfo-&gt;coneAngleCos,      true);        gSoundPrev3DInfo.coneAngleCos = in3DInfo-&gt;coneAngleCos;  }    if (gSoundPrev3DInfo.coneAttenuation != in3DInfo-&gt;coneAttenuation)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_ConeAttenuation,      in3DInfo-&gt;coneAttenuation,      true);        gSoundPrev3DInfo.coneAttenuation = in3DInfo-&gt;coneAttenuation;  }    if (gSoundPrev3DInfo.currentLocation.elevation != in3DInfo-&gt;currentLocation.elevation)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Elevation,      in3DInfo-&gt;currentLocation.elevation,      true);        gSoundPrev3DInfo.currentLocation.elevation = in3DInfo-&gt;currentLocation.elevation;  }    if (gSoundPrev3DInfo.currentLocation.azimuth != in3DInfo-&gt;currentLocation.azimuth)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Azimuth,      in3DInfo-&gt;currentLocation.azimuth,      true);        gSoundPrev3DInfo.currentLocation.azimuth = in3DInfo-&gt;currentLocation.azimuth;  }    if (gSoundPrev3DInfo.currentLocation.distance != in3DInfo-&gt;currentLocation.distance)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Distance,      in3DInfo-&gt;currentLocation.distance,      true);        gSoundPrev3DInfo.currentLocation.distance = in3DInfo-&gt;currentLocation.distance;  }    if (gSoundPrev3DInfo.currentLocation.projectionAngle != in3DInfo-&gt;currentLocation.projectionAngle)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_ProjectionAngle,      in3DInfo-&gt;currentLocation.projectionAngle,      true);        gSoundPrev3DInfo.currentLocation.projectionAngle = in3DInfo-&gt;currentLocation.projectionAngle;  }    if (gSoundPrev3DInfo.currentLocation.sourceVelocity != in3DInfo-&gt;currentLocation.sourceVelocity)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_SourceVelocity,      in3DInfo-&gt;currentLocation.sourceVelocity,      true);        gSoundPrev3DInfo.currentLocation.sourceVelocity = in3DInfo-&gt;currentLocation.sourceVelocity;  }    if (gSoundPrev3DInfo.currentLocation.listenerVelocity != in3DInfo-&gt;currentLocation.listenerVelocity)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_ListenerVelocity,      in3DInfo-&gt;currentLocation.listenerVelocity,      true);        gSoundPrev3DInfo.currentLocation.listenerVelocity = in3DInfo-&gt;currentLocation.listenerVelocity;  }    if (gSoundPrev3DInfo.reserved0 != in3DInfo-&gt;reserved0)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Reserved0,      in3DInfo-&gt;reserved0,      true);        gSoundPrev3DInfo.reserved0 = in3DInfo-&gt;reserved0;  }    if (gSoundPrev3DInfo.reserved1 != in3DInfo-&gt;reserved1)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Reserved1,      in3DInfo-&gt;reserved1,      true);        gSoundPrev3DInfo.reserved1 = in3DInfo-&gt;reserved1;  }    if (gSoundPrev3DInfo.reserved2 != in3DInfo-&gt;reserved2)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Reserved2,      in3DInfo-&gt;reserved2,      true);        gSoundPrev3DInfo.reserved2 = in3DInfo-&gt;reserved2;  }    if (gSoundPrev3DInfo.reserved3 != in3DInfo-&gt;reserved3)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_Reserved3,      in3DInfo-&gt;reserved3,      true);        gSoundPrev3DInfo.reserved3 = in3DInfo-&gt;reserved3;  }    if (gSoundPrev3DInfo.virtualSourceCount != in3DInfo-&gt;virtualSourceCount)  {    Utils_SetFloatField(      gSoundDialog,      kFeedbackItem_VirtualSourceCount,      in3DInfo-&gt;virtualSourceCount,      true);        gSoundPrev3DInfo.virtualSourceCount = in3DInfo-&gt;virtualSourceCount;  }}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/SoundSprocketTest/listing10.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/SoundSprocketTest/listing10.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/SoundSprocketTest/listing10.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<html><head><title>Mac OS X
 Manual Page For MPI_Pack_external(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/MPI_Pack_external" title="Mac OS X
 Manual Page for MPI_Pack_external(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/MPI_Pack_external"; name=MPI_Pack_external(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MPI_Pack_external(3OpenMPI)                                                      MPI_Pack_external(3OpenMPI)



<b>NAME</b>
       <b>MPI_Pack_external</b> - Writes data to a portable format


<b>SYNTAX</b>
<b>C</b> <b>Syntax</b>
       #include &lt;mpi.h&gt;
       int MPI_Pack_external(char *<u>datarep</u>, void *<u>inbuf</u>,
            int <u>incount</u>, MPI_Datatype <u>datatype</u>,
            void *<u>outbuf</u>, MPI_Aint <u>outsize</u>,
            MPI_Aint *<u>position</u>)


<b>Fortran</b> <b>Syntax</b>
       INCLUDE 'mpif.h'
       MPI_PACK_EXTERNAL(<u>DATAREP,</u> <u>INBUF,</u> <u>INCOUNT,</u> <u>DATATYPE,</u>
            <u>OUTBUF,</u> <u>OUTSIZE,</u> <u>POSITION,</u> <u>IERROR</u>)

            INTEGER        <u>INCOUNT,</u> <u>DATATYPE,</u> <u>IERROR</u>
            INTEGER (KIND=MPI_ADDRESS_KIND) <u>OUTSIZE,</u> <u>POSITION</u>
            CHARACTER*(*)  <u>DATAREP</u>
            &lt;type&gt;         <u>INBUF(*),</u> <u>OUTBUF(*)</u>


<b>C++</b> <b>Syntax</b>
       #include &lt;mpi.h&gt;
       void MPI::Datatype::Pack_external(const char* <u>datarep</u>,
            const void* <u>inbuf</u>, int <u>incount</u>,
            void* <u>outbuf</u>, MPI::Aint <u>outsize</u>,
            MPI::Aint&amp; <u>position</u>) const


<b>INPUT</b> <b>PARAMETERS</b>
       datarep   Data representation (string).

       inbuf     Input buffer start (choice).

       incount   Number of input data items (integer).

       datatype  Datatype of each input data item (handle).

       outsize   Output buffer size, in bytes (integer).


<b>INPUT/OUTPUT</b> <b>PARAMETER</b>
       position  Current position in buffer, in bytes (integer).


<b>OUTPUT</b> <b>PARAMETERS</b>
       outbuf    Output buffer start (choice).

       IERROR    Fortran only: Error status (integer).


<b>DESCRIPTION</b>
       MPI_Pack_external  packs  data into the external32 format, a universal data representation defined by
       the MPI Forum. This format is useful for exchanging data between MPI implementations, or when writing
       data to a file.

       The  input  buffer  is  specified by <u>inbuf</u>, <u>incount</u> and <u>datatype</u>, and may be any communication buffer
       allowed in MPI_Send. The output buffer <u>outbuf</u> must be a contiguous storage  area  containing  <u>outsize</u>
       bytes.

       The  input  value  of  <u>position</u>  is  the first position in <u>outbuf</u> to be used for packing (measured in
       bytes, not elements, relative to the start of the buffer). When the  function  returns,  <u>position</u>  is
       incremented by the size of the packed message, so that it points to the first location in <u>outbuf</u> fol-<font color="#ffffff" class="whiteout">lowing&nbsp;following</font>
       lowing the packed message. This way it may be used as input to a subsequent call  to  MPI_Pack_exter-<font color="#ffffff" class="whiteout">nal.&nbsp;MPI_Pack_external.</font>
       nal.


       <b>Example:</b> An example using MPI_Pack_external:

            int position, i;
            double msg[5];
            char buf[1000];

            ...

            MPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank);
            if (myrank == 0) {  /* SENDER CODE */
                 position = 0;
                 i = 5; /* number of doubles in msg[] */
                 MPI_Pack_external("external32", &amp;i, 1, MPI_INT,
                     buf, 1000, &amp;position);
                 MPI_Pack_external("external32", &amp;msg, i, MPI_DOUBLE,
                     buf, 1000, &amp;position);
                 MPI_Send(buf, position, MPI_PACKED, 1, 0,
                     MPI_COMM_WORLD);
            } else {       /* RECEIVER CODE */
                 MPI_Recv(buf, 1, MPI_PACKED, 0, 0, MPI_COMM_WORLD,
                     MPI_STATUS_IGNORE);
                 MPI_Unpack_external("external32", buf, 1000,
                     MPI_INT, &amp;i, 1, &amp;position);
                 MPI_Unpack_external("external32", buf, 1000,
                     MPI_DOUBLE, &amp;msg, i, &amp;position);
            }


<b>NOTES</b>
       The <u>datarep</u> argument specifies the data format. The only valid value in the current version of MPI is
       "external32". The argument is provided for future extensibility.

       To understand the behavior of pack and unpack, it is convenient to think of the data part of  a  mes-<font color="#ffffff" class="whiteout">sage&nbsp;message</font>
       sage  as being the sequence obtained by concatenating the successive values sent in that message. The
       pack operation stores this sequence in the buffer space, as if sending the message  to  that  buffer.
       The  unpack  operation retrieves this sequence from buffer space, as if receiving a message from that
       buffer. (It is helpful to think of internal Fortran files or sscanf in C for a similar function.)

       Several messages can be successively packed into one packing unit. This is effected by  several  suc-<font color="#ffffff" class="whiteout">cessive&nbsp;successive</font>
       cessive  related  calls to MPI_Pack_external, where the first call provides <u>position</u>=0, and each suc-<font color="#ffffff" class="whiteout">cessive&nbsp;successive</font>
       cessive call inputs the value of <u>position</u> that was output by the previous call, along with  the  same
       values  for <u>outbuf</u> and <u>outcount</u>. This packing unit now contains the equivalent information that would
       have been stored in a message by one send call with a send buffer that is the "concatenation" of  the
       individual send buffers.

       A  packing  unit  can  be  sent using type MPI_PACKED. Any point-to-point or collective communication
       function can be used to move the sequence of bytes that forms the packing unit from  one  process  to
       another.  This  packing unit can now be received using any receive operation, with any datatype. (The
       type-matching rules are relaxed for messages sent with type MPI_PACKED.)

       A packing unit can be unpacked into several successive messages. This is effected by several  succes-<font color="#ffffff" class="whiteout">sive&nbsp;successive</font>
       sive related calls to MPI_Unpack_external, where the first call provides <u>position</u>=0, and each succes-<font color="#ffffff" class="whiteout">sive&nbsp;successive</font>
       sive call inputs the value of position that was output by the previous call, and the same values  for
       <u>inbuf</u> and <u>insize</u>.

       The  concatenation  of  two  packing units is not necessarily a packing unit; nor is a substring of a
       packing unit necessarily a packing unit. Thus, one cannot concatenate  two  packing  units  and  then
       unpack the result as one packing unit; nor can one unpack a substring of a packing unit as a separate
       packing unit. Each packing unit that was created by a related sequence of pack calls must be unpacked
       as a unit by a sequence of related unpack calls.


<b>ERRORS</b>
       Almost  all  MPI  routines return an error value; C routines as the value of the function and Fortran
       routines in the last argument. C++ functions do not return errors. If the default  error  handler  is
       set  to MPI::ERRORS_THROW_EXCEPTIONS, then on error the C++ exception mechanism will be used to throw
       an MPI:Exception object.

       Before the error value is returned, the current MPI error handler is called. By default,  this  error
       handler  aborts  the  MPI  job, except for I/O function errors. The error handler may be changed with
       MPI_Comm_set_errhandler; the predefined error handler MPI_ERRORS_RETURN may be used  to  cause  error
       values  to  be  returned.  Note  that MPI does not guarantee that an MPI program can continue past an
       error.

       See the MPI man page for a full list of MPI error codes.


<b>SEE</b> <b>ALSO</b>
       MPI_Pack_external_size
       MPI_Send
       MPI_Unpack_external
       <a href="sscanf.3.html#//apple_ref/doc/man/3/sscanf">sscanf(3C)</a>




Open MPI 1.2                                   September 2006                    MPI_Pack_external(3OpenMPI)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Pack_external.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Pack_external.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Pack_external.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

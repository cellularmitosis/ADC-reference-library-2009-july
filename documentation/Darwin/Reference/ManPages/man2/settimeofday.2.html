<html><head><title>Mac OS X Developer Tools
 Manual Page For settimeofday(2)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/2/settimeofday" title="Mac OS X Developer Tools
 Manual Page for settimeofday(2)"><!-- headerDoc=man; indexgroup=Section 2; uid="//apple_ref/doc/man/2/settimeofday"; name=settimeofday(2) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
GETTIMEOFDAY(2)             BSD System Calls Manual            <!-- a -->GETTIMEOFDAY(2)<!-- /a -->

<b>NAME</b>
     <b>gettimeofday</b>, <b>settimeofday</b> -- get/set date and time

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/time.h&gt;</b>

     <u>int</u>
     <b>gettimeofday</b>(<u>struct</u> <u>timeval</u> <u>*restrict</u> <u>tp</u>, <u>void</u> <u>*restrict</u> <u>tzp</u>);

     <u>int</u>
     <b>settimeofday</b>(<u>const</u> <u>struct</u> <u>timeval</u> <u>*tp</u>, <u>const</u> <u>struct</u> <u>timezone</u> <u>*tzp</u>);

<b>DESCRIPTION</b>
     <b>Note:</b> <b>timezone</b> <b>is</b> <b>no</b> <b>longer</b> <b>used;</b> <b>this</b> <b>information</b> <b>is</b> <b>kept</b> <b>outside</b> <b>the</b> <b>kernel.</b>

     The system's notion of the current Greenwich time and the current time zone is obtained with the
     <b>gettimeofday</b>() call, and set with the <b>settimeofday</b>() call.  The time is expressed in seconds and
     microseconds since midnight (0 hour), January 1, 1970.  The resolution of the system clock is hardware
     dependent, and the time may be updated continuously or in ``ticks.''  If <u>tp</u> or <u>tzp</u> is NULL, the associ-<font color="#ffffff" class="whiteout">ated&nbsp;associated</font>
     ated time information will not be returned or set.

     The structures pointed to by <u>tp</u> and <u>tzp</u> are defined in &lt;<u>sys/time.h&gt;</u> as:

     struct timeval {
             time_t       tv_sec;   /* seconds since Jan. 1, 1970 */
             suseconds_t  tv_usec;  /* and microseconds */
     };

     struct timezone {
             int     tz_minuteswest; /* of Greenwich */
             int     tz_dsttime;     /* type of dst correction to apply */
     };

     The <u>timeval</u> structure specifies a time value in seconds and microseconds.  The values in <u>timeval</u> are
     opaque types whose length may vary on different machines; depending on them to have any given length
     may lead to errors.

     The <u>timezone</u> structure indicates the local time zone (measured in minutes of time westward from Green-<font color="#ffffff" class="whiteout">wich),&nbsp;Greenwich),</font>
     wich), and a flag that, if nonzero, indicates that Daylight Saving time applies locally during the
     appropriate part of the year.

     Only the super-user may set the time of day or time zone.  If the system securelevel is greater than 1
     (see <!-- a -->init(8)<!-- /a --> ), the time may only be advanced.  This limitation is imposed to prevent a malicious
     super-user from setting arbitrary time stamps on files.  The system time can still be adjusted back-<font color="#ffffff" class="whiteout">wards&nbsp;backwards</font>
     wards using the <a href="adjtime.2.html#//apple_ref/doc/man/2/adjtime">adjtime(2)</a> system call even when the system is secure.

<b>RETURN</b>
     A 0 return value indicates that the call succeeded.  A -1 return value indicates an error occurred, and
     in this case an error code is stored into the global variable <u>errno</u>.

<b>ERRORS</b>
     The following error codes may be set in <u>errno</u>:

     [EFAULT]  An argument address referenced invalid memory.

     [EPERM]   A user other than the super-user attempted to set the time.

<b>LEGACY</b> <b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/time.h&gt;</b>

     <u>int</u>
     <b>gettimeofday</b>(<u>struct</u> <u>timeval</u> <u>*tp</u>, <u>struct</u> <u>timezone</u> <u>*tzp</u>);

     The type of <u>tzp</u> has changed.

<b>SEE</b> <b>ALSO</b>
     <a href="../man1/date.1.html#//apple_ref/doc/man/1/date">date(1)</a>, <a href="adjtime.2.html#//apple_ref/doc/man/2/adjtime">adjtime(2)</a>, <a href="../man3/ctime.3.html#//apple_ref/doc/man/3/ctime">ctime(3)</a>, <a href="../man5/compat.5.html#//apple_ref/doc/man/5/compat">compat(5)</a>, <a href="../man8/timed.8.html#//apple_ref/doc/man/8/timed">timed(8)</a>

<b>HISTORY</b>
     The <b>gettimeofday</b>() function call appeared in 4.2BSD.

4th Berkeley Distribution        May 26, 1995        4th Berkeley Distribution
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man2/settimeofday.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man2/settimeofday.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man2/settimeofday.2.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Power Services</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.220.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.224.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.226.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=3521"> </A><A NAME="12231"> </A>Power Services</H1><P CLASS="T1.Text1"><A NAME="pgfId=3522"> </A>For those devices that can change their power usage, the STREAMS module must export the entry point <TT CLASS="cv">OTSetPowerLevel</TT>. This lets the system set the device's power level before its driver is installed into a stream.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=14531"> </A>void OTSetPowerLevel(UInt32 powerSelector);</CODE><P CLASS="T1.Text1"><A NAME="pgfId=3524"> </A>In addition, devices that can change their power usage should support the <TT CLASS="cv">I_OTSetPowerLevel</TT> IOCTL call. However, <TT CLASS="cv">I_OTSetPowerLevel</TT> is used only  if the driver is already installed into a stream.</P><P CLASS="T1.Text1"><A NAME="pgfId=3525"> </A>Following are the four-byte selectors that can be passed to <TT CLASS="cv">I_OTSetPowerLevel</TT>, with their return values:</P><TABLE border=1 cellpadding=3><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3528"> </A><TT CLASS="cv">'pmn3'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3530"> </A>Returns the card's maximum power consumption in microwatts from the 3.3 V supply while in low power mode.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3532"> </A><TT CLASS="cv">'pmn5'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3534"> </A>Returns the card's maximum power consumption in microwatts from the 5 V supply while in low power mode.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3536"> </A><TT CLASS="cv">'pmx3'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3538"> </A>Returns the card's maximum power consumption in microwatts from the 3.3 V supply while in high power mode.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3540"> </A><TT CLASS="cv">'pmx5'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3542"> </A>Returns the card's maximum power consumption in microwatts from the 5 V supply while in high power mode.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3544"> </A><TT CLASS="cv">'psta'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3546"> </A>Returns a value of 1 if the card is in high power mode.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3548"> </A><TT CLASS="cv">'psup'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3550"> </A>Returns a value of 1 if the card supports power control, 0 if it does not.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3552"> </A><TT CLASS="cv">'ptog'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3554"> </A>Returns a value of 1 if the card supports switch between high and low power after initialization, 0 if it does not.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3556"> </A><TT CLASS="cv">'sphi'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3558"> </A>Sets the card to high power mode. Returns a value of 0 if completed successfully, <TT CLASS="cv">OSErr</TT> if not.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3560"> </A><TT CLASS="cv">'splo'</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3562"> </A>Sets the card to low power mode. Returns a value of 0 if completed successfully, <TT CLASS="cv">OSErr</TT> if not.</FONT></TD></TR></TABLE><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.220.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.224.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.226.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
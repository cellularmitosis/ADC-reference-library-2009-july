<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>AEGestalt - /UAEDocument.cp</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; <A HREF="javascript:location.replace('index.html');">AEGestalt</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxInterapplicationCommunication-date.html" target="_blank">Carbon > Interapplication Communication</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">AEGestalt</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/UAEDocument.cp</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/About.cp</option>
<option value="listing2.html">/About.h</option>
<option value="listing3.html">/AEGestalt.r</option>
<option value="listing4.html">/Definitions.h</option>
<option value="listing5.html">/IncludeFiles.h</option>
<option value="listing6.html">/MAEGestalt.cp</option>
<option value="listing7.html">/ResourceConstants.h</option>
<option value="listing8.html">/UAEClientCommand.cp</option>
<option value="listing9.html">/UAEClientCommand.h</option>
<option value="listing10.html">/UAEDocument.cp</option>
<option value="listing11.html">/UAEDocument.h</option>
<option value="listing12.html">/UAEGestalt.cp</option>
<option value="listing13.html">/UAEGestalt.h</option>
<option value="listing14.html">/UAEServerCommand.cp</option>
<option value="listing15.html">/UAEServerCommand.h</option>
<option value="listing16.html">/UGrayFillAdorner.cp</option>
<option value="listing17.html">/UGrayFillAdorner.h</option>
<option value="listing18.html">/UInformationView.cp</option>
<option value="listing19.html">/UInformationView.h</option>
<option value="listing20.html">/ULabelView.cp</option>
<option value="listing21.html">/ULabelView.h</option>
<option value="listing22.html">/ULookupCommand.cp</option>
<option value="listing23.html">/ULookupCommand.h</option></select>
				</p>
				</form>
				<p><strong><a href="AEGestalt.zip">Download Sample</a></strong> (&#147;AEGestalt.zip&#148;, 26.9K)<BR>
<strong><a href="AEGestalt.dmg">Download Sample</a></strong> (&#147;AEGestalt.dmg&#148;, 84.7K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">//   UAEDocument.cp //   Copyright &copy; 1991-92 by Apple Computer, Inc. All rights reserved.//  Kent Sandvik DTS//  This file contains the basic TAEDocument member functions////  &lt;1&gt;    khs    1.0    First final version// INCLUDES#ifndef __UAEDOCUMENT__#include &quot;UAEDocument.h&quot;                    #endif//  CLASS METHODS //  Empty constructor - for avoiding ptabs in global data space#undef Inherited#define Inherited TDocument#pragma segment AResDefineClass(TAEDocument, TDocument);TAEDocument::TAEDocument(){}//  Create TAEDocument#pragma segment AInitvoid TAEDocument::IAEDocument(){  Inherited::IDocument();    // initialize handle to AE  fAEGestaltAddress.descriptorType = typeNull;  fAEGestaltAddress.dataHandle = NULL;  fConfigurationInfo = NULL;  fOKNode = FALSE;}//  Create any needed TDocument Views#pragma segment AOpenvoid TAEDocument::DoMakeViews(Boolean  /*forPrinting*/){  TWindow * aWindow = NULL;  FailInfo fi;    Try(fi)  {    // create Main Information Window      aWindow = (TWindow *)gViewServer-&gt;NewTemplateWindow(kMainWindow, this);    // find text views    fInfoField = (TStaticText *)aWindow-&gt;FindSubView('info');    fLabelView = (TLabelView *)aWindow-&gt;FindSubView('VIW1');    fInfoView  = (TInformationView *)aWindow-&gt;FindSubView('VIW2');    // find buttons    fFindButton = (TButton *)aWindow-&gt;FindSubView('find');    fReportButton = (TButton *)aWindow-&gt;FindSubView('repo');//  Add Adorners to various views - yes this would be far better to do//  from the resource file itself, but as long as there's no ViewEdit 3.0//  which handles the new format, I'm hesitant to hack in by hand these//  values, because it's a tidy exersize.    // add window adorners, fill gray background    aWindow-&gt;AddAdorner(NewStdAdorner('gray',&quot;&quot;,'gray', kFreeOnDeletion),                       kAdornBefore, kRedraw);                          // add view adorners, frame second view    fInfoView-&gt;AddAdorner(NewStdAdorner('fram', &quot;&quot;, 'fram', kFreeOnDeletion),                      kDrawView, kRedraw);    fInfoView-&gt;AddAdorner(NewStdAdorner('eras', &quot;&quot;, 'eras', kFreeOnDeletion),                      kDrawView, kRedraw);        // add static text adorner, erase background    fInfoField-&gt;AddAdorner(NewStdAdorner('eras', &quot;&quot;, 'eras', kFreeOnDeletion),                        kDrawView, kRedraw);    fi.Success();  }  else    fi.ReSignal();}//  Handle Events passed to TDocument, like the find button event#pragma segment AMainvoid TAEDocument::DoEvent(EventNumber eventNumber,                 TEventHandler* source,                 TEvent* event){  if (eventNumber == mButtonHit)  {    // were any of the buttons pressed?    if (source-&gt;fIdentifier == 'find')    {      // find button?        // post a menu command which translates to the Find\xC9 menu entry        this-&gt;HandleMenuCommand(cFindAEGestalt);    }    else if (source-&gt;fIdentifier == 'repo')    {      // report button &amp; we have valid node?      if (fOKNode)      // post a menu command which translates to the Report\xC9 menu entry          this-&gt;HandleMenuCommand(cCreateReport);    }  }  else    Inherited::DoEvent(eventNumber, source, event);}//  Free any resources attached to the TDocument, take also care of AE resources#pragma segment AClosevoid TAEDocument::Free(){  AEAddressDesc aDesc = fAEGestaltAddress;  // dispose the descriptor!  AEDisposeDesc(&amp;aDesc);  Inherited::Free();}//  Setup menus when TDocument is created#pragma segment AResvoid TAEDocument::DoSetupMenus(){  Inherited::DoSetupMenus();  // we assume that we are starting from a Find command  Enable(cFindAEGestalt, TRUE);  // we can't report anything until we have information  Enable(cCreateReport, fAEGestaltAddress.dataHandle != NULL);  fReportButton-&gt;DimState(!(fAEGestaltAddress.dataHandle != NULL), TRUE);}//  Handle menu commands assigned to the TDocument controlled menus#pragma segment ASelCommandvoid TAEDocument::DoMenuCommand(CommandNumber theNumber){  TCommand * cmdToPost = NULL;  TAEClientCommand * AEcmd = NULL;  TLookupCommand * aLookup = NULL;  switch (theNumber)  {    case cFindAEGestalt:      aLookup = new TLookupCommand;      aLookup-&gt;ILookupCommand(cFindAEGestalt, this);      cmdToPost = aLookup;      fInfoField-&gt;SetText(&quot;Look for node to examine...&quot;, TRUE);      break;    case cCreateReport:      AEcmd = new TAEClientCommand;      AEcmd-&gt;IAEClientCommand(cCreateReport, this, kAEGetConfig);      cmdToPost = AEcmd;      fInfoField-&gt;SetText(&quot;Report node information...&quot;, TRUE);      break;    default:      Inherited::DoMenuCommand(theNumber);  }  if (cmdToPost != NULL)    this-&gt;PostAnEvent(cmdToPost);}//  Return the AppleEvents address stored in TAEDocument#pragma segment AResvoid TAEDocument::GetAEGestaltAddress(AEAddressDesc&amp; theAddress){  theAddress = fAEGestaltAddress;}//  Read the Configuration information#pragma segment Mainvoid TAEDocument::ReadConfiguration(Configuration* theConfig){  BlockMove(&amp;theConfig, &amp;fConfigurationInfo, sizeof(theConfig));}//  Process the information we got from the AE for the View class for//  later display#pragma segment Mainvoid TAEDocument::ProcessAEInformation(){  switch (fConfigurationInfo-&gt;machineType)  {                      // Label1 - Machine Type    case 1:      fInfoView-&gt;fLabel1 = &quot;Classic&quot;;      break;    case 2:      fInfoView-&gt;fLabel1 = &quot;MacXL&quot;;      break;    case 3:      fInfoView-&gt;fLabel1 = &quot;Mac512KE&quot;;      break;    case 4:      fInfoView-&gt;fLabel1 = &quot;Mac Plus&quot;;      break;    case 5:      fInfoView-&gt;fLabel1 = &quot;MacSE&quot;;      break;    case 6:      fInfoView-&gt;fLabel1 = &quot;MacII&quot;;      break;    case 7:      fInfoView-&gt;fLabel1 = &quot;MacIIx&quot;;      break;    case 8:      fInfoView-&gt;fLabel1 = &quot;MacIIcx&quot;;      break;    case 9:      fInfoView-&gt;fLabel1 = &quot;MacSe030&quot;;      break;    case 10:      fInfoView-&gt;fLabel1 = &quot;Portable&quot;;      break;    case 11:      fInfoView-&gt;fLabel1 = &quot;MacIIci&quot;;      break;    case 13:      fInfoView-&gt;fLabel1 = &quot;MacIIfx&quot;;      break;    case 17:      fInfoView-&gt;fLabel1 = &quot;Mac Classic&quot;;      break;    case 18:      fInfoView-&gt;fLabel1 = &quot;MacIIsi&quot;;      break;    case 19:      fInfoView-&gt;fLabel1 = &quot;MacLC&quot;;      break;    case 20:      fInfoView-&gt;fLabel1 = &quot;Quadra 900&quot;;      break;    case 21:      fInfoView-&gt;fLabel1 = &quot;PowerBook 140&quot;;      break;    case 22:      fInfoView-&gt;fLabel1 = &quot;Quadra 700&quot;;      break;    case 23:      fInfoView-&gt;fLabel1 = &quot;Classic II&quot;;      break;    case 24:      fInfoView-&gt;fLabel1 = &quot;PowerBook 100&quot;;      break;    case 25:      fInfoView-&gt;fLabel1 = &quot;PowerBook 140&quot;;      break;    default:      fInfoView-&gt;fLabel1 = &quot;Unknown type&quot;;      break;  }  if (fConfigurationInfo-&gt;systemVersion == 0x700)// Label2 - System Version    fInfoView-&gt;fLabel2 = &quot;System 7.0&quot;;  else if (fConfigurationInfo-&gt;systemVersion == 0x701)    fInfoView-&gt;fLabel2 = &quot;System 7.0.1&quot;;  else if (fConfigurationInfo-&gt;systemVersion == 0x602)    fInfoView-&gt;fLabel2 = &quot;System 6.0.2&quot;;  else if (fConfigurationInfo-&gt;systemVersion == 0x603)    fInfoView-&gt;fLabel2 = &quot;System 6.0.3&quot;;  else if (fConfigurationInfo-&gt;systemVersion == 0x604)    fInfoView-&gt;fLabel2 = &quot;System 6.0.4&quot;;  else if (fConfigurationInfo-&gt;systemVersion == 0x605)    fInfoView-&gt;fLabel2 = &quot;System 6.0.5&quot;;  else if (fConfigurationInfo-&gt;systemVersion == 0x607)    fInfoView-&gt;fLabel2 = &quot;System 6.0.7&quot;;  else if (fConfigurationInfo-&gt;systemVersion &lt; 0x600)    fInfoView-&gt;fLabel2 = &quot;Pre 6.0.x System&quot;;  else if (fConfigurationInfo-&gt;systemVersion &gt; 0x701)    fInfoView-&gt;fLabel2 = &quot;Post 7.0.1 System&quot;;  switch (fConfigurationInfo-&gt;processor)  {                      // Label3 - Processor Type    case 1:      fInfoView-&gt;fLabel3 = &quot;68000&quot;;      break;    case 2:      fInfoView-&gt;fLabel3 = &quot;68010&quot;;      break;    case 3:      fInfoView-&gt;fLabel3 = &quot;68020&quot;;      break;    case 4:      fInfoView-&gt;fLabel3 = &quot;68030&quot;;      break;    case 5:      fInfoView-&gt;fLabel3 = &quot;68040&quot;;      break;    default:      fInfoView-&gt;fLabel3 = &quot;Unknown CPU&quot;;      break;  }  if (fConfigurationInfo-&gt;hasFPU)        // Label4 - Has FPU?    fInfoView-&gt;fLabel4 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel4 = &quot;FALSE&quot;;  if (fConfigurationInfo-&gt;hasColorQD)      // Label5 - Has Color QD?    fInfoView-&gt;fLabel5 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel5 = &quot;FALSE&quot;;  if (fConfigurationInfo-&gt;has32BitQD)      // Label6 - Has 32-bit QD?    fInfoView-&gt;fLabel6 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel6 = &quot;FALSE&quot;;  if (fConfigurationInfo-&gt;hasSCSI)      // Label7 - Has SCSI?    fInfoView-&gt;fLabel7 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel7 = &quot;FALSE&quot;;  if (fConfigurationInfo-&gt;hasAppleEventMgr)  // Label8 - Has AppleEvent Mgr?    fInfoView-&gt;fLabel8 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel8 = &quot;FALSE&quot;;  if (fConfigurationInfo-&gt;hasEditionMgr)    // Label9 - Has Edition Mgr?    fInfoView-&gt;fLabel9 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel9 = &quot;FALSE&quot;;  if (fConfigurationInfo-&gt;hasAUX)        // Label10 - Is A/UX System?    fInfoView-&gt;fLabel10 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel10 = &quot;FALSE&quot;;  if (fConfigurationInfo-&gt;hasTrueType)    // Label11 - Has TrueType?    fInfoView-&gt;fLabel11 = &quot;TRUE&quot;;  else    fInfoView-&gt;fLabel11 = &quot;FALSE&quot;;  CStr255 tempString;              // Label12 - AppleTalk version  NumToString(long(fConfigurationInfo-&gt; atDrvrVersNum), tempString);  fInfoView-&gt;fLabel12 = tempString;  fInfoView-&gt;fHasGestaltInfo = TRUE;      // report for view to draw  fInfoView-&gt;ForceRedraw();          // redraw the view}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/AEGestalt/listing10.html%3Fid%3DDTS10000203-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/AEGestalt/listing10.html%3Fid%3DDTS10000203-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/AEGestalt/listing10.html%3Fid%3DDTS10000203-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
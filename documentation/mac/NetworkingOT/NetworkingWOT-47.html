<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Acknowledging Sends</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING47></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-46.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-48.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-10.html"><B>Part 1 - Open Transport Essentials</B></A><BR><DD><A HREF="NetworkingWOT-46.html"><B>Chapter 10 - Advanced Topics</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING47-0></A>
<H1><A NAME=MARKER-9-20></A>Acknowledging Sends</H1>
 By default, providers do not acknowledge sends. This means that when you send data, the provider copies the data into an internal buffer and then sends the data. Once the provider has copied the data into its own buffer<B>,</B> it no longer uses the buffer you have allocated for the data. As soon as the function completes, you can change the contents of your buffer--even if the provider has not yet sent the data it copied.<P>
 If you use the <A NAME=MARKER-13-101></A><CODE>OTAckSends</CODE> function to specify that you want the endpoint provider to acknowledge sends and you call a function that sends data, the endpoint provider does not copy data from your buffer before sending it. Instead it reads data directly from your buffer while sending. For this reason, you must not change the contents of your buffer until the endpoint provider is no longer using it. The advantage of acknowledging sends is that it improves performance at the cost of some added complexity in your code.<P>
 Sometimes, due to flow control, a send operation can be delayed. The provider lets you know that it has finished using the buffer by calling your notifier function and passing <A NAME=MARKER-13-48></A><CODE>T_MEMORYRELEASED</CODE> for the <CODE>code</CODE> parameter, a pointer to the buffer that was sent in the <CODE>cookie</CODE> parameter, and the size of the buffer in the <CODE>result</CODE> parameter. <P>
<DL>
<DT><B>WARNING</B>
<DD>If you want Open Transport to acknowledge sends, you must make sure that there are no outstanding sends when you close Open Transport; otherwise, you crash.   <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 Because of the complexity of handling flow control, Open Transport performance suffers when the acknowledge sends option is used with noncontiguous data, such as when you pass an <CODE>OTData</CODE> structure to the <CODE>OTSnd</CODE> function. Therefore, it is best to avoid this option with non-contiguous data, especially if the last element is a large element.<P>
 Only endpoint provider functions are affected by your calling the <CODE>OTAckSends</CODE> and <A NAME=MARKER-13-105></A><CODE>OTDontAckSends</CODE> functions. <A NAME=MARKER-13-24></A><P>
<DL>
<DT><B>IMPORTANT</B>
<DD>If the endpoint acknowledges sends and there are outstanding buffers still in use, you must flush the buffers before closing the endpoint provider. To flush the stream, call the function <CODE>OTIOCtl</CODE> as follows:<BR><BR><CODE>OTIOCtl (MyEptref, FLUSHRW, 0);<BR></CODE><BR>Then, wait until you receive all of the <CODE>T_MEMORYRELEASED</CODE> events.  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
</BLOCKQUOTE><HR>
<center>
<A HREF="NetworkingWOT-46.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-48.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A QA1086: Setting the preferred CMM programatically?</title><meta name="keywords" content="NCWConcatColorWorld,NCMConcatProfileSet, preferred CMM, ColorSync"><meta name="Description" content="Technical Q&amp;A QA1086: This Q&amp;A describes how to use the NCMConcatProfileSetstructure to specify the CMM (and quality and rendering intent)to be used to make the CMWorldRef when calling the NCWConcatColorWorldfunction."><meta name="categories" content="Color"><meta name="week-posted" content="Oct 22, 2001 - Oct 26, 2001"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001635" title="Setting the preferred CMM programatically?"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/idxColorSync-date.html" target="_blank">Graphics & Imaging > ColorSync</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QA1086</div>
<div id="pageheadsub">Setting the preferred CMM programatically?</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600> <TR> <td align="left"><!-- begin_content --><hr width=500 align=center>                  <P id=p2>Q:      I would like to be able to check the current state of the      ColorSync preferred CMM, save it, set it to a different CMM,      perform some color matching functions, then restore the old      state. Is this possible? In other words, is there a <CODE>CMSetPreferredCMM</CODE>      function to go along with <CODE>CMGetPreferredCMM</CODE>?</p>                  <P id=p4>A:      There is no public API to set the preferred CMM because giving      developers the ability to bypass/change the user preference      (set in the ColorSync control panel) defeats the purpose      of the user setting.  Just as there are developers who want      to set the preferred CMM, there are also users who want to      set the CMM.  ColorSync decided to favor the user's right      to choose over the developer's.</p>      <P id=p4>      That being said, if a developer uses the <CODE>NCWConcatColorWorld</CODE>      function (see       <a href="../../technotes/tn/tn1160.html">&lt;http://developer.apple.com/technotes/tn/tn1160.html&gt;</A>      )      it is possible to use the <CODE>NCMConcatProfileSet</CODE> structure to      specify the CMM (and quality and rendering intent) to be      used to make the <CODE>CMWorldRef</CODE>.  With this API it is possible      for the developer's choice to override the user's choice.       The only catch is the chosen CMM must support the <CODE>kNCMMConcatInit</CODE>      component selector on Mac OS 9 or the <CODE>NCMMConcatInit</CODE> <CODE>CFBundle</CODE>      symbol on Mac OS X.</p>      <P id=p4>      Here's some additional details regarding the <CODE>flags</CODE> and <CODE>flagsMask</CODE>      fields of the <CODE>NCMConcatProfileSet</CODE> structure. In the past, if an application      wanted to control the quality and rendering intent for a      match it would need to modify the various flag bits of the      profiles before creating the <CODE>ColorWorld</CODE>.  Now this can be      done more easily with the <CODE>NCMConcatProfileSpec</CODE> structure.</p>      <P id=p4>      For example, if you would like to force best quality mode,      specify the <CODE>flags</CODE> and <CODE>flagsMask</CODE> as follows:</p>      <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>    flags = cmBestMode &lt;&lt; 16;    flagsMask = cmQualityMask;</pre></TD></TR></TABLE></CENTER><BR><BR>                    <P id=p4>      If you would like to force normal quality mode, specify the      <CODE>flags</CODE> and <CODE>flagsMask</CODE> as follows:</p>      <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>    flags = cmNormalMode &lt;&lt; 16;    flagsMask = cmQualityMask;</pre></TD></TR></TABLE></CENTER><BR><BR>                    <P id=p4>      If you would like to force draft quality mode, specify the      <CODE>flags</CODE> and <CODE>flagsMask</CODE> as follows:</p>      <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>    flags = cmDraftMode &lt;&lt; 16;    flagsMask = cmQualityMask;</pre></TD></TR></TABLE></CENTER><BR><BR>                    <P id=p4>      If you don't need to perform gamut checking (<CODE>CWCheckPixMap</CODE>,      <CODE>CWCheckBitmap</CODE>, etc.) you can more quickly build the <CODE>ColorWorld</CODE>      by specifying:</p>      <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>    flags = cmGamutCheckingMask;    flagsMask = cmGamutCheckingMask;</pre></TD></TR></TABLE></CENTER><BR><BR>                    <P id=p4>      Setting the gamut checking flag will reduce the time and      memory needed to build the <CODE>ColorWorld</CODE>.</p>          <hr width=500 align=center> <!-- begin_date --><H4 ALIGN=center>[Oct 24 2001]</H4><!-- end_date --></TD> </TR> </TABLE></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2001/qa1086.html%3Fid%3DDTS10001635-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2001/qa1086.html%3Fid%3DDTS10001635-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2001/qa1086.html%3Fid%3DDTS10001635-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --><hr width=500 align=center></BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Resource Manager Reference: Deprecated Resource Manager  Functions</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Deprecated Resource Manager  Functions"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000154-AppendixA" title="Deprecated Resource Manager  Functions"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Carbon/index.html#//apple_ref/doc/uid/TP30001281-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../../../reference/Carbon/idxFileManagement-date.html#//apple_ref/doc/uid/TP30001281-TP30000420-TP30000448" target="_top">File Management</a> &gt; <a href="../index.html" target="_top">Resource Manager Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Reference/reference.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../appendixa/appendixa.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <h1>Deprecated Resource Manager  Functions</h1><p>A function identified as deprecated has been superseded and may become unsupported in the future.</p><a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_118" title="Deprecated in Mac OS X v10.5"></a><h2>Deprecated in Mac OS X v10.5</h2><a name="//apple_ref/c/func/FSpCreateResFile" title="FSpCreateResFile"></a><a name="//apple_ref/doc/c_ref/FSpCreateResFile" title="FSpCreateResFile"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-F01577" title="FSpCreateResFile"></a>
<a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_23"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-DontLinkElementID_23"></a><h3 class="tight">FSpCreateResFile</h3>
<p class="spaceabove">Creates an empty resource fork in a new or existing file.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>&#032;Use <code><a href="../Reference/reference.html#//apple_ref/c/func/FSCreateResourceFile">FSCreateResourceFile</a></code> instead.)</p>
<p class="spaceabove"><pre>
void FSpCreateResFile (
   const <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSSpec" target="_top">FSSpec</a> *spec,
   <!--a-->OSType<!--/a--> creator,
   <!--a-->OSType<!--/a--> fileType,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ScriptCode" target="_top">ScriptCode</a> scriptTag
);
</pre></p><h5 class="tight">Discussion</h5><p>This function is not recommended. You should use a file’s data fork instead of its resource fork to store resource data.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>Resources.h</code><a name="//apple_ref/c/func/FSpOpenOrphanResFile" title="FSpOpenOrphanResFile"></a><a name="//apple_ref/doc/c_ref/FSpOpenOrphanResFile" title="FSpOpenOrphanResFile"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-F11549" title="FSpOpenOrphanResFile"></a>
<a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_24"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-DontLinkElementID_24"></a><h3 class="tight">FSpOpenOrphanResFile</h3>
<p class="spaceabove">Opens a resource file that is persistent across all contexts.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>&#032;Use <code><a href="../Reference/reference.html#//apple_ref/c/func/FSOpenOrphanResFile">FSOpenOrphanResFile</a></code> instead.)</p>
<p class="spaceabove"><pre>
OSErr FSpOpenOrphanResFile (
   const <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSSpec" target="_top">FSSpec</a> *spec,
   <!--a-->SignedByte<!--/a--> permission,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/ResFileRefNum">ResFileRefNum</a> *refNum
);
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000154-CH5g-RCM0083">“Resource Manager Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p><code>FSpOpenOrphanResFile</code> should be used to open a resource file that is persistent across all contexts. <code>FSpOpenOrphanResFile</code> loads everything into the system context and detaches the file from the context in which it was opened. If the file is already in the resource chain and a new instance is not opened, <code>FSpOpenOrphanResFile</code> will return a <code>paramErr</code>. Use this function with care, as it can and will fail if the map is very large or a lot of resources are preloaded.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>Resources.h</code><a name="//apple_ref/c/func/FSpOpenResFile" title="FSpOpenResFile"></a><a name="//apple_ref/doc/c_ref/FSpOpenResFile" title="FSpOpenResFile"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-F01583" title="FSpOpenResFile"></a>
<a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_25"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-DontLinkElementID_25"></a><h3 class="tight">FSpOpenResFile</h3>
<p class="spaceabove">Opens the resource fork in a file specified with an <code>FSSpec</code> structure.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>&#032;Use <code><a href="../Reference/reference.html#//apple_ref/c/func/FSOpenResourceFile">FSOpenResourceFile</a></code> instead.)</p>
<p class="spaceabove"><pre>
<a href="../Reference/reference.html#//apple_ref/doc/c_ref/ResFileRefNum">ResFileRefNum</a> FSpOpenResFile (
   const <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSSpec" target="_top">FSSpec</a> *spec,
   <!--a-->SignedByte<!--/a--> permission
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>spec</em></dt>
<dd><p>A pointer to a file system specification record specifying the name and location of the file whose resource fork is to be opened. This function also makes the specified file the current resource file.</p></dd>
<dt><em>permission</em></dt>
<dd><p>A constant indicating the type of access with which to open the resource fork. For a description of the types of access you can request, see File Access Permission Constants in <em><a href="../../File_Manager/index.html#//apple_ref/doc/uid/TP30000107" target="_top">File Manager Reference</a></em>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The file reference number for the resource fork. If the file reference number returned is greater than 0, you can use this number to refer to the resource fork in some other Resource Manager functions.</p><p>If you attempt to use this function to open a resource fork that is already open, it returns the existing file reference number or a new one, depending on the access permission for the existing access path. For example, your application receives a new file reference number after a successful request for read-only access to a file previously opened with write access, whereas it receives the same file reference number in response to a second request for write access to the same file. In this case, the function doesn’t make that file the current resource file.</p><p>If the function fails to open the specified file’s resource fork (for instance, because there’s no file with the given file system specification record or because there are permission problems), it returns –1 as the file reference number. Use the <code><a href="../Reference/reference.html#//apple_ref/c/func/ResError">ResError</a></code> function to determine what kind of error occurred. </p><p>If an application attempts to open a second access path with write access and the application is different from the one that originally opened the resource fork, <code>FSpOpenResFile</code> returns –1, and the <code>ResError</code> function returns the result code <code>opWrErr</code>.</p>
<h5 class="tight">Discussion</h5>
<p>This function is available only in System 7 and later versions of system software. You can determine whether <code>FSpOpenResFile</code> is available by calling the <code>Gestalt</code> function with the <code>gestaltFSAttr</code> selector code. If this function is not available to your application, you can use <code>HOpenResFile</code>, <code>OpenRFPerm</code>, or <code>OpenResFile</code> instead. The <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/HOpenResFile">HOpenResFile</a></code> function is preferred if <code>FSpOpenResFile</code> is not available. The <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/OpenRFPerm">OpenRFPerm</a></code> function is an earlier version of <code>HOpenResFile</code> that is still supported but is more restricted in its capabilities.</p>
<p>The Resource Manager reads the resource map from the specified file’s resource fork into memory. It also reads into memory every resource in the resource fork whose <code>resPreload</code> attribute is set.</p>
<p>You don’t have to call this function to open the System file’s resource fork or an application file’s resource fork. These resource forks are opened automatically when the system and the application start up, respectively. To get the file reference number for your application, call the <code><a href="../Reference/reference.html#//apple_ref/c/func/CurResFile">CurResFile</a></code> function after your application starts up and before you open any other resource forks.</p>
<p>The <code>FSpOpenResFile</code> function checks that the information in the resource map is internally consistent. If it isn’t, <code>ResError</code> returns the result code <code>mapReadErr</code>.</p>
<p>It’s possible to create multiple, unique, read-only access paths to a resource fork using this function however, you should avoid doing so. If a resource fork is opened twice—once with read/write permission and once with read-only permission—two copies of the resource map exist in memory. If you change one of the resources in memory using one of the resource maps, the two resource maps become inconsistent and the file will appear damaged to the second resource map. </p>
<p>If you must use this technique for read-only access, call this function immediately before your application reads information from the file and close the file immediately afterward. Otherwise, your application may get unexpected results.</p>
<p>If you want to open the resource fork for another application (or any resource fork other than your application’s that includes <code>'CODE'</code> resources), you must bracket your calls to this function with calls to the <code><a href="../Reference/reference.html#//apple_ref/c/func/SetResLoad">SetResLoad</a></code> function with the <code>load</code> parameter set to <code>FALSE</code> and then to <code>TRUE</code>. You must also avoid making intersegment calls while the other application’s resource fork is open. If you don’t do this, the Segment Loader Manager treats any preloaded <code>'CODE'</code> resources as your code resources when you make an intersegment call that triggers a call to the <code>LoadSeg</code> function while the other application is first in the resource chain. In this case, your application can begin executing the other application’s code, and severe problems will ensue. If you need to get <code>'CODE'</code> resources from the other application’s resource fork, you can still prevent the Segment Loader Manager problem by calling the <code><a href="../Reference/reference.html#//apple_ref/c/func/UseResFile">UseResFile</a></code> function with your application’s file reference number to make your application the current resource file.</p>
<p>To open a resource fork just for block-level operations, such as copying files without reading the resource map into memory, use the File Manager function <code>OpenRF</code>. </p>
<h5 class="tight">Special Considerations</h5>
<p>Because there is no support for locking and unlocking file ranges on local disks in Mac OS X, regardless of whether File Sharing is enabled, you cannot open more than one path to a resource fork with read/ write permission. If you try to open a more than one path to a file's resource fork with <code>fsRdWrShPerm</code> permission, only the first attempt will succeed. Subsequent attempts will return an invalid reference number and the <code>ResError</code> function will return the error <code>opWrErr</code>.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/Simple_DrawSprocket/index.html#//apple_ref/doc/uid/DTS10000169" target="_top">Simple DrawSprocket</a></span></li></ul><h5 class="tight">Declared In</h5><code>Resources.h</code><a name="//apple_ref/c/func/FSpResourceFileAlreadyOpen" title="FSpResourceFileAlreadyOpen"></a><a name="//apple_ref/doc/c_ref/FSpResourceFileAlreadyOpen" title="FSpResourceFileAlreadyOpen"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-F11550" title="FSpResourceFileAlreadyOpen"></a>
<a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_26"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-DontLinkElementID_26"></a><h3 class="tight">FSpResourceFileAlreadyOpen</h3>
<p class="spaceabove">Checks whether a resource file is open.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>&#032;Use <code><a href="../Reference/reference.html#//apple_ref/c/func/FSResourceFileAlreadyOpen">FSResourceFileAlreadyOpen</a></code> instead.)</p>
<p class="spaceabove"><pre>
<!--a-->Boolean<!--/a--> FSpResourceFileAlreadyOpen (
   const <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSSpec" target="_top">FSSpec</a> *resourceFile,
   <!--a-->Boolean<!--/a--> *inChain,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/ResFileRefNum">ResFileRefNum</a> *refNum
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>resourceFile</em></dt>
<dd><p>The resource file to check.</p></dd>
<dt><em>inChain</em></dt>
<dd><p>A pointer to a variable allocated by the caller. On return, <code>true</code> if the resource file is in the resource chain, <code>false</code> otherwise.</p></dd>
<dt><em>refNum</em></dt>
<dd><p>A pointer to a variable allocated by the caller. On return, the reference number of the file if it is open.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>This function returns <code>true</code> if the resource file is already open and known by the Resource Manager—for example, it is either in the current resource chain or it is a detached resource file.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>Resources.h</code><a name="//apple_ref/c/func/HCreateResFile" title="HCreateResFile"></a><a name="//apple_ref/doc/c_ref/HCreateResFile" title="HCreateResFile"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-F02842" title="HCreateResFile"></a>
<a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_44"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-DontLinkElementID_44"></a><h3 class="tight">HCreateResFile</h3>
<p class="spaceabove">Creates an empty resource fork, when the <code>FSpCreateResFile</code> function is not available.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>&#032;Use <code><a href="../Reference/reference.html#//apple_ref/c/func/FSCreateResourceFile">FSCreateResourceFile</a></code> instead.)</p>
<p class="spaceabove"><pre>
void HCreateResFile (
   <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSVolumeRefNum" target="_top">FSVolumeRefNum</a> vRefNum,
   long dirID,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ConstStr255Param" target="_top">ConstStr255Param</a> fileName
);
</pre></p><h5 class="tight">Discussion</h5><p>This function is not recommended. You should use a file’s data fork instead of its resource fork to store resource data.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>Resources.h</code><a name="//apple_ref/c/func/HOpenResFile" title="HOpenResFile"></a><a name="//apple_ref/doc/c_ref/HOpenResFile" title="HOpenResFile"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-F02893" title="HOpenResFile"></a>
<a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_46"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-DontLinkElementID_46"></a><h3 class="tight">HOpenResFile</h3>
<p class="spaceabove">Opens a file’s resource fork, when the <code>FSpOpenResFile</code> function is not available.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>&#032;Use <code><a href="../Reference/reference.html#//apple_ref/c/func/FSOpenResourceFile">FSOpenResourceFile</a></code> instead.)</p>
<p class="spaceabove"><pre>
<a href="../Reference/reference.html#//apple_ref/doc/c_ref/ResFileRefNum">ResFileRefNum</a> HOpenResFile (
   <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSVolumeRefNum" target="_top">FSVolumeRefNum</a> vRefNum,
   long dirID,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ConstStr255Param" target="_top">ConstStr255Param</a> fileName,
   SInt8 permission
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>vRefNum</em></dt>
<dd><p>The volume reference number of the volume on which the file is located.</p></dd>
<dt><em>dirID</em></dt>
<dd><p>The directory ID of the directory where the file is located.</p></dd>
<dt><em>fileName</em></dt>
<dd><p>The name of the file whose resource fork is to be opened.</p></dd>
<dt><em>permission</em></dt>
<dd><p>A constant indicating the type of access with which to open the resource fork. For a description of the types of access you can request, see File Access Permission Constants in <em><a href="../../File_Manager/index.html#//apple_ref/doc/uid/TP30000107" target="_top">File Manager Reference</a></em>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The file reference number for the file. You can use this file reference number to refer to the file in other Resource Manager functions. The function also makes this file the current resource file. If the file’s resource fork is already open, the function returns the file reference number but does not make that file the current resource file. If the function fails to open the specified file’s resource fork (because there’s no file with the specified name or because there are permission problems), it returns –1 as the file reference number. Use the <code><a href="../Reference/reference.html#//apple_ref/c/func/ResError">ResError</a></code> function to determine what kind of error occurred.</p><p>Versions of system software before System 7 do not allow you to use this function to open a second access path, with write access, to a resource fork. In this case, the function returns the reference number already assigned to the file.</p>
<h5 class="tight">Discussion</h5>
<p>The Resource Manager reads the resource map from the resource fork of the specified file into memory. It also reads into memory every resource whose <code>resPreload</code> attribute is set.</p>
<p>You don’t have to call this function to open the System file’s resource fork or an application file’s resource fork. These files are opened automatically when the system and the application start up, respectively. To get the file reference number for your application, call the <code><a href="../Reference/reference.html#//apple_ref/c/func/CurResFile">CurResFile</a></code> function after the application starts up and before you open the resource forks for any other files.</p>
<p>The <code>HOpenResFile</code> function checks that the information in the resource map is internally consistent. If it isn’t, <code>ResError</code> returns the result code <code>mapReadErr</code>. It’s possible to create multiple, unique, read-only access paths to a resource fork using <code>HOpenResFile</code>; however, you should avoid doing so, to prevent inconsistencies between multiple copies of the resource map. See the discussion of this issue in relation to <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/FSpOpenResFile">FSpOpenResFile</a></code>. The <code>HOpenResFile</code> function works the same way. </p>
<p>To open a resource fork just for block-level operations, such as copying files without reading the resource map into memory, use the File Manager function <code>OpenRF</code>.</p>
<p>If you want to open the resource fork for another application (or any resource fork other than your application’s that includes <code>'CODE'</code> resources), you must bracket your calls to <code>HOpenResFile</code> with calls to the <code><a href="../Reference/reference.html#//apple_ref/c/func/SetResLoad">SetResLoad</a></code> function with the <code>load</code> parameter set to <code>FALSE</code> and then to <code>TRUE</code>. You must also avoid making intersegment calls while the other application’s resource fork is open. The discussion of this issue in relation to <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/FSpOpenResFile">FSpOpenResFile</a></code> also applies to <code>HOpenResFile</code>. </p>
<h5 class="tight">Special Considerations</h5>
<p>Because there is no support for locking and unlocking file ranges on local disks in Mac OS X, regardless of whether File Sharing is enabled, you cannot open more than one path to a resource fork with read/write permission. If you try to open a more than one path to a file's resource fork with <code>fsRdWrShPerm</code> permission, only the first attempt will succeed. Subsequent attempts will return an invalid reference number and the <code>ResError</code> function will return the error <code>opWrErr</code>.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>Resources.h</code><a name="//apple_ref/c/func/OpenRFPerm" title="OpenRFPerm"></a><a name="//apple_ref/doc/c_ref/OpenRFPerm" title="OpenRFPerm"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-F04441" title="OpenRFPerm"></a>
<a name="//apple_ref/doc/uid/TP30000154-AppendixA-DontLinkElementID_51"></a><a name="//apple_ref/doc/uid/TP30000154-CH1g-DontLinkElementID_51"></a><h3 class="tight">OpenRFPerm</h3>
<p class="spaceabove">Opens a file’s resource fork, when the <code>FSpOpenResFile</code> and <code>HOpenResFile</code> functions are not available. &#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>&#032;Use <code><a href="../Reference/reference.html#//apple_ref/c/func/FSOpenResourceFile">FSOpenResourceFile</a></code> instead.)</p>
<p class="spaceabove"><pre>
<a href="../Reference/reference.html#//apple_ref/doc/c_ref/ResFileRefNum">ResFileRefNum</a> OpenRFPerm (
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ConstStr255Param" target="_top">ConstStr255Param</a> fileName,
   <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSVolumeRefNum" target="_top">FSVolumeRefNum</a> vRefNum,
   SInt8 permission
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>fileName</em></dt>
<dd><p>The name of the file whose resource fork is to be opened. </p></dd>
<dt><em>vRefNum</em></dt>
<dd><p>The volume reference number or directory ID for the volume or directory in which the file is located. </p></dd>
<dt><em>permission</em></dt>
<dd><p>A constant indicating the type of access with which to open the resource fork. For a description of the types of access you can request, see File Access Permission Constants in <em><a href="../../File_Manager/index.html#//apple_ref/doc/uid/TP30000107" target="_top">File Manager Reference</a></em>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The file reference number for the file whose resource fork it has opened. You can use this file reference number to refer to the file in other Resource Manager functions. The function also makes this file the current resource file. If the file’s resource fork is already open, the function returns the file reference number but does not make that file the current resource file.</p><p>If the function fails to open the specified file’s resource fork (because there’s no file with the given name or because there are permission problems), it returns –1 as the file reference number. Use the <code><a href="../Reference/reference.html#//apple_ref/c/func/ResError">ResError</a></code> function to determine what kind of error occurred.</p><p>Versions of system software before System 7 do not allow you to use this function to open a second access path, with write access, to a resource fork. In this case, the function returns the reference number already assigned to the file.</p>
<h5 class="tight">Discussion</h5>
<p>You can use this function if the <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/FSpOpenResFile">FSpOpenResFile</a></code> function is not available. You can determine whether <code>FSpOpenResFile</code> is available by calling the <code>Gestalt</code> function with the <code>gestaltFSAttr</code> selector code. The <code>HOpenResFile</code> function allows you to specify both a directory ID and a volume reference number, and is therefore preferred if <code>FSpOpenResFile</code> is not available. The <code>OpenRFPerm</code> is an earlier versions of <code>HOpenResFile</code> that is still supported but is more restricted in its capabilities.</p>
<p>The Resource Manager reads the resource map from the resource fork for the specified file into memory. It also reads into memory every resource in the resource fork whose <code>resPreload</code> attribute is set.</p>
<p>You don’t have to call this function to open the System file’s resource fork or an application file’s resource fork. These files are opened automatically when the system and the application start up, respectively. To get the file reference number for your application, call the <code><a href="../Reference/reference.html#//apple_ref/c/func/CurResFile">CurResFile</a></code> function after the application starts up and before you open the resource forks for any other files.</p>
<p>This function checks that the information in the resource map is internally consistent. If it isn’t, <code>ResError</code> returns the result code <code>mapReadErr</code>. It’s possible to create multiple, unique, read-only access paths to a resource fork using this function however, you should avoid doing so, to prevent inconsistencies between multiple copies of the resource map. </p>
<p>To open a resource fork just for block-level operations, such as copying files without reading the resource map into memory, use the File Manager function <code>OpenRF</code>.</p>
<p>If you want to open the resource fork for another application (or any resource fork other than your application’s that includes <code>'CODE'</code> resources), you must bracket your calls to this function with calls to the <code><a href="../Reference/reference.html#//apple_ref/c/func/SetResLoad">SetResLoad</a></code> function with the <code>load</code> parameter set to <code>FALSE</code> and then to <code>TRUE</code>. You must also avoid making intersegment calls while the other application’s resource fork is open. </p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul><h5 class="tight">Declared In</h5><code>Resources.h</code>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Reference/reference.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../appendixa/appendixa.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2001, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Reference/Resource_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000154-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Reference/Resource_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000154-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Reference/Resource_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000154-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
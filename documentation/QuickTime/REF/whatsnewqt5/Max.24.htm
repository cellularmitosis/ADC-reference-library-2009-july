<HTML><head><script language="JavaScript" src="../../RM/frametest.js"></script><TITLE> Sample Atom Container for the QTVR Flattener</TITLE><script language=javascript> window.parent.focus(); </script></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>What's New in QuickTime 5</I><P>| <A HREF="Max.23.htm">Previous</A> | <A HREF="Max.1.htm">Chapter Contents</A> | <A HREF="Max.htm">Chapter Top</A> | <A HREF="Max.25.htm">Next</A> |</P></DIV><!-- QTnavbar end --><H1 CLASS="H3.Heading3"><A NAME="pgfId=93529"> </A>Sample Atom Container for the QTVR Flattener</H1><P CLASS="T1.Text1"><A NAME="pgfId=93534"> </A>The sample code in <A HREF="Max.24.htm#38978" CLASS="XRef">Listing&nbsp;5</A> creates an <A NAME="marker=93533"> </A>atom container and adds atoms to indicate an import preview file for the flattener to use.</P><P CLASS="L.Listing"><A NAME="pgfId=93536"> </A>Listing&nbsp;5 <A NAME="38978"> </A>Specifying a preview file for the flattener to use </P><CODE CLASS="Cv.Code"><A NAME="pgfId=97121"> </A>Boolean yes = true;<BR>QTAtomContainer exportData;<BR>QTAtom parent;<BR>err = QTNewAtomContainer(&amp;exportData);<BR>// create a parent for the other settings atoms<BR>err = QTInsertChild (exportData, kParentAtomIsContainer,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQTVRFlattenerSettingsParentAtomType, 1, 0, 0, nil, &amp;parent);<BR>// Add child atom to indicate we want to import the preview from a file<BR>err = QTInsertChild (exportData, parent, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQTVRFlattenerCreatePreviewAtomType, 1, 0, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeof (yes), &amp;yes, nil);<BR>// Add child atom to tell which file to import<BR>err = QTInsertChild (exportData, parent, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kQTVRFlattenerImportPreviewAtomType, 1, 0,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sizeof (previewSpec), &amp;previewSpec, nil);<BR>// Tell the export component<BR>MovieExportSetSettingsFromAtomContainer (qtvrExport, exportData);</code><br><P CLASS="T1.Text1"><A NAME="pgfId=93538"> </A>Overriding the compression settings is a bit more complicated. You need to open a standard image compression dialog component and make calls to obtain an atom container that you can then pass to the <A NAME="QTVR Flattener component"> </A>QTVR Flattener component.</P><P CLASS="L.Listing"><A NAME="pgfId=93540"> </A>Listing&nbsp;6 Overriding the compression settings </P><CODE CLASS="Cv.Code"><A NAME="pgfId=97125"> </A>ComponentInstance sc;<BR>QTAtomContainer compressorData;<BR>SCSpatialSettings ss;<BR>sc = &nbsp;&nbsp;&nbsp;OpenDefaultComponent(StandardCompressionType,StandardCompressionSubType);<BR>ss.codecType = kCinepakCodecType;<BR>ss.codec = nil;<BR>ss.depth = 0;<BR>ss.spatialQuality = codecHighQuality<BR>err = SCSetInfo(sc, scSpatialSettingsType, &amp;ss);<BR>err = SCGetSettingsAsAtomContainer(sc, &amp;compressorData);<BR>MovieExportSetSettingsFromAtomContainer (qtvrExport, compressorData);</code><br><hr>&#169; 2001 Apple Computer, Inc.<!-- QTnavbar start --><P><I>What's New in QuickTime 5</I><P>| <A HREF="Max.23.htm">Previous</A> | <A HREF="Max.1.htm">Chapter Contents</A> | <A HREF="Max.htm">Chapter Top</A> | <A HREF="Max.25.htm">Next</A> |</P></DIV><!-- QTnavbar end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
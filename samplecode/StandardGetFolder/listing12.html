<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>StandardGetFolder - /Search.h</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; <A HREF="javascript:location.replace('index.html');">StandardGetFolder</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxFileManagement-date.html" target="_blank">Carbon > File Management</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">StandardGetFolder</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/Search.h</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/FSpCompat.c</option>
<option value="listing2.html">/FSpCompat.h</option>
<option value="listing3.html">/MoreDesktopMgr.c</option>
<option value="listing4.html">/MoreDesktopMgr.h</option>
<option value="listing5.html">/MoreFiles.c</option>
<option value="listing6.html">/MoreFiles.h</option>
<option value="listing7.html">/MoreFilesExtras.c</option>
<option value="listing8.html">/MoreFilesExtras.h</option>
<option value="listing9.html">/Optimization.h</option>
<option value="listing10.html">/OptimizationEnd.h</option>
<option value="listing11.html">/Search.c</option>
<option value="listing12.html">/Search.h</option>
<option value="listing13.html">/StandardGetFolder.c</option>
<option value="listing14.html">/StandardGetFolder.h</option>
<option value="listing15.html">/StandardGetFolderMain.c</option></select>
				</p>
				</form>
				<p><strong><a href="StandardGetFolder.zip">Download Sample</a></strong> (&#147;StandardGetFolder.zip&#148;, 101.3K)<BR>
<strong><a href="StandardGetFolder.dmg">Download Sample</a></strong> (&#147;StandardGetFolder.dmg&#148;, 177.7K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    Search.h    Description:IndexedSearch and the PBCatSearch compatibility function.  Author:    JL  Copyright:   Copyright: &copy; 1992-1999 by Apple Computer, Inc.        all rights reserved.    Disclaimer:  You may incorporate this sample code into your applications without        restriction, though the sample code has been provided &quot;AS IS&quot; and the        responsibility for its operation is 100% yours.  However, what you are        not permitted to do is to redistribute the source as &quot;DSC Sample Code&quot;        after having made changes. If you're going to re-distribute the source,        we require that you make it clear in the source that the code was        descended from Apple Sample Code, but that you've made changes.    Change History (most recent first):        6/25/99  Updated for Metrowerks Codewarror Pro 2.1(KG)*/#ifndef __SEARCH__#define __SEARCH__#include &lt;Types.h&gt;#include &lt;Files.h&gt;#include &quot;Optimization.h&quot;#ifdef __cplusplusextern &quot;C&quot; {#endif/*****************************************************************************/pascal  OSErr  IndexedSearch(CSParamPtr pb,                long dirID);/*  &brvbar; Search in and below a directory.  The IndexedSearch function performs an indexed search in and below the  specified directory using the same parameters (in pb) as is passed to  PBCatSearch. See Inside Macintosh: Files for a description of the  parameter block.    pb      input:  A CSParamPtr record specifying the volume to search            and the search criteria.        output:  Fields in the parameter block are returned indicating            the number of matches found, the matches, and if the            search ended with noErr, the CatPosition record that            lets you resume a search where the last search left            off.  dirID    input:  The directory to search. If fsRtDirID is passed,            the entire volume is searched.    Note:  If you use a high-level debugger and use ioSearchTime to limit      the length of time to run the search, you'll want to step over      calls to IndexedSearch because it installs a Time Manager task.      Most high-level debuggers don't deal gracefully with interrupt      driven code.    Result Codes    noErr        0    No error    nsvErr        -35    Volume not found    ioErr        -36    I/O error    eofErr        -39    End of catalog found (this is normal!)    paramErr      -50    Parameter block has invalid parameters                  (see source for VerifyUserPB) or                  invalid catPosition record was passed    extFSErr      -58    External file system error - no file                  system claimed this call.    memFullErr      -108  Memory could not be allocated in heap    catChangedErr    -1304  Catalog has changed and catalog position                  record may be invalid    __________    See also:  PBCatSearch, PBCatSearchSyncCompat*//*****************************************************************************/pascal  OSErr  PBCatSearchSyncCompat(CSParamPtr paramBlock);/*  &brvbar; Search a volume using PBCatSearch or IndexedSearch.  The PBCatSearchSyncCompat function uses PBCatSearch (if available) or  IndexedSearch (if PBCatSearch is not available) to search a volume  using a set of search criteria that you specify. It builds a list of all  files or directories that meet your specifications.    pb      input:  A CSParamPtr record specifying the volume to search            and the search criteria.        output:  Fields in the parameter block are returned indicating            the number of matches found, the matches, and if the            search ended with noErr, the CatPosition record that            lets you resume a search where the last search left            off.    Note:  If you use a high-level debugger and use ioSearchTime to limit      the length of time to run the search, you'll want to step over      calls to PBCatSearchSyncCompat because it calls IndexedSearch      which installs a Time Manager task. Most high-level debuggers      don't deal gracefully with interrupt driven code.    Result Codes    noErr        0    No error    nsvErr        -35    Volume not found    ioErr        -36    I/O error    eofErr        -39    End of catalog found (this is normal!)    paramErr      -50    Parameter block has invalid parameters                  (see source for VerifyUserPB) or                  invalid catPosition record was passed    extFSErr      -58    External file system error - no file                  system claimed this call.    memFullErr      -108  Memory could not be allocated in heap    catChangedErr    -1304  Catalog has changed and catalog position                  record may be invalid    afpCatalogChanged  -5037  Catalog has changed and search cannot                  be resumed    __________    See also:  PBCatSearch, IndexedSearch*//*****************************************************************************/pascal  OSErr  NameFileSearch(ConstStr255Param volName,                 short vRefNum,                 ConstStr255Param fileName,                 FSSpecPtr matches,                 long reqMatchCount,                 long *actMatchCount,                 Boolean newSearch,                 Boolean partial);/*  &brvbar; Search for files by file name with PBCatSearch.  The NameFileSearch function searches for files with a specific file  name on a volume that supports PBCatSearch.  Note: A result of catChangedErr means the catalog has changed between  searches, but the search can be continued with the possiblity that you  may miss some matches or get duplicate matches.  For all other results  (except for noErr), the search cannot be continued.  volName      input:  A pointer to the name of a mounted volume              or nil.  vRefNum      input:  Volume specification.  fileName    input:  The name of the file to search for.  matches      input:  Pointer to array of FSSpec where the match list is              returned.  reqMatchCount  input:  Maximum number of matches to return  (the number of              elements in the matches array).  actMatchCount  output: The number of matches actually returned.  newSearch    input:  If true, start a new search. If false and if              vRefNum is the same as the last call to              NameFileSearch, then start searching at the              position where the last search left off.  partial      input:  If the partial parameter is false, then only files              that exactly match fileName will be found.  If the              partial parameter is true, then all file names that              contain fileName will be found.    Result Codes    noErr        0    No error    nsvErr        -35    Volume not found    ioErr        -36    I/O error    eofErr        -39    End of catalog found (this is normal!)    paramErr      -50    Parameter block has invalid parameters                  (see source for VerifyUserPB) or                  invalid catPosition record was passed    extFSErr      -58    External file system error - no file                  system claimed this call.    memFullErr      -108  Memory could not be allocated in heap    catChangedErr    -1304  Catalog has changed and catalog position                  record may be invalid    afpCatalogChanged  -5037  Catalog has changed and search cannot                  be resumed    __________    Also see:  CreatorTypeFileSearch*//*****************************************************************************/pascal  OSErr  CreatorTypeFileSearch(ConstStr255Param volName,                    short vRefNum,                    OSType creator,                    OSType fileType,                    FSSpecPtr matches,                    long reqMatchCount,                    long *actMatchCount,                    Boolean newSearch);/*  &brvbar; Search for files by creator/fileType with PBCatSearch.  The CreatorTypeFileSearch function searches for files with a specific  creator or fileType on a volume that supports PBCatSearch.  Note: A result of catChangedErr means the catalog has changed between  searches, but the search can be continued with the possiblity that you  may miss some matches or get duplicate matches.  For all other results  (except for noErr), the search cannot be continued.  volName      input:  A pointer to the name of a mounted volume              or nil.  vRefNum      input:  Volume specification.  creator      input:  The creator type of the file to search for.              To ignore the creator type, pass 0x00000000 in              this field.  fileType    input:  The file type of the file to search for.              To ignore the file type, pass 0x00000000 in              this field.  matches      input:  Pointer to array of FSSpec where the match list is              returned.  reqMatchCount  input:  Maximum number of matches to return  (the number of              elements in the matches array).  actMatchCount  output: The number of matches actually returned.  newSearch    input:  If true, start a new search. If false and if              vRefNum is the same as the last call to              CreatorTypeFileSearch, then start searching at the              position where the last search left off.    Result Codes    noErr        0    No error    nsvErr        -35    Volume not found    ioErr        -36    I/O error    eofErr        -39    End of catalog found (this is normal!)    paramErr      -50    Parameter block has invalid parameters                  (see source for VerifyUserPB) or                  invalid catPosition record was passed    extFSErr      -58    External file system error - no file                  system claimed this call.    memFullErr      -108  Memory could not be allocated in heap    catChangedErr    -1304  Catalog has changed and catalog position                  record may be invalid    afpCatalogChanged  -5037  Catalog has changed and search cannot                  be resumed    __________    Also see:  NameFileSearch*//*****************************************************************************/#ifdef __cplusplus}#endif#include &quot;OptimizationEnd.h&quot;#endif  /* __SEARCH__ */</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/StandardGetFolder/listing12.html%3Fid%3DDTS10000048-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/StandardGetFolder/listing12.html%3Fid%3DDTS10000048-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/StandardGetFolder/listing12.html%3Fid%3DDTS10000048-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
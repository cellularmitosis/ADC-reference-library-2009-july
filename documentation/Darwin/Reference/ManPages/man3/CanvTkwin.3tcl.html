<html><head><title>Mac OS X
 Manual Page For CanvTkwin(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/CanvTkwin" title="Mac OS X
 Manual Page for CanvTkwin(3tcl)"><a name="//apple_ref/doc/man/3/CanvTkwin" title="Mac OS X
 Manual Page for CanvTkwin(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/CanvTkwin"; name=CanvTkwin(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tk_CanvasTkwin(3)                           Tk Library Procedures                          <a href="Tk_CanvasTkwin.3tcl.html#//apple_ref/doc/man/3/Tk_CanvasTkwin">Tk_CanvasTkwin(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tk_CanvasTkwin,  Tk_CanvasGetCoord, Tk_CanvasDrawableCoords, Tk_CanvasSetStippleOrigin, Tk_CanvasWin-<font color="#ffffff" class="whiteout">dowCoords,&nbsp;Tk_CanvasWindowCoords,</font>
       dowCoords, Tk_CanvasEventuallyRedraw, Tk_CanvasTagsOption - utility procedures for canvas  type  man-<font color="#ffffff" class="whiteout">agers&nbsp;managers</font>
       agers

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       Tk_Window
       <b>Tk_CanvasTkwin</b>(<u>canvas</u>)

       int
       <b>Tk_CanvasGetCoord</b>(<u>interp,</u> <u>canvas,</u> <u>string,</u> <u>doublePtr</u>)

       <b>Tk_CanvasDrawableCoords</b>(<u>canvas,</u> <u>x,</u> <u>y,</u> <u>drawableXPtr,</u> <u>drawableYPtr</u>)

       <b>Tk_CanvasSetStippleOrigin</b>(<u>canvas,</u> <u>gc</u>)

       <b>Tk_CanvasWindowCoords</b>(<u>canvas,</u> <u>x,</u> <u>y,</u> <u>screenXPtr,</u> <u>screenYPtr</u>)

       <b>Tk_CanvasEventuallyRedraw</b>(<u>canvas,</u> <u>x1,</u> <u>y1,</u> <u>x2,</u> <u>y2</u>)

       Tk_OptionParseProc *<b>Tk_CanvasTagsParseProc</b>;

       Tk_OptionPrintProc *<b>Tk_CanvasTagsPrintProc</b>;

<b>ARGUMENTS</b>
       Tk_Canvas     <u>canvas</u>          (in)      A token that identifies a canvas widget.

       Tcl_Interp    <u>*interp</u>         (in/out)  Interpreter to use for error reporting.

       CONST char    <u>*string</u>         (in)      Textual description of a canvas coordinate.

       double        <u>*doublePtr</u>      (out)     Points to place to store a converted coordinate.

       double        <u>x</u>               (in)      An x coordinate in the space of the canvas.

       double        <u>y</u>               (in)      A y coordinate in the space of the canvas.

       short         <u>*drawableXPtr</u>   (out)     Pointer  to  a  location in which to store an x coordinate in
                                               the space of the drawable currently being used  to  redisplay
                                               the canvas.

       short         <u>*drawableYPtr</u>   (out)     Pointer to a location in which to store a y coordinate in the
                                               space of the drawable currently being used to  redisplay  the
                                               canvas.

       GC            <u>gc</u>              (out)     Graphics context to modify.

       short         <u>*screenXPtr</u>     (out)     Points  to a location in which to store the screen coordinate
                                               in the canvas window that corresponds to <u>x</u>.

       short         <u>*screenYPtr</u>     (out)     Points to a location in which to store the screen  coordinate
                                               in the canvas window that corresponds to <u>y</u>.

       int           <u>x1</u>              (in)      Left edge of the region that needs redisplay.  Only pixels at
                                               or to the right of this coordinate need to be redisplayed.

       int           <u>y1</u>              (in)      Top edge of the region that needs redisplay.  Only pixels  at
                                               or below this coordinate need to be redisplayed.

       int           <u>x2</u>              (in)      Right  edge  of the region that needs redisplay.  Only pixels
                                               to the left of this coordinate need to be redisplayed.

       int           <u>y2</u>              (in)      Bottom edge of the region that needs redisplay.  Only  pixels
                                               above this coordinate need to be redisplayed.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       These procedures are called by canvas type managers to perform various utility functions.

       <b>Tk_CanvasTkwin</b> returns the Tk_Window associated with a particular canvas.

       <b>Tk_CanvasGetCoord</b>  translates a string specification of a coordinate (such as <b>2p</b> or <b>1.6c</b>) into a dou-<font color="#ffffff" class="whiteout">ble-precision&nbsp;double-precision</font>
       ble-precision canvas coordinate.  If <u>string</u> is a valid coordinate description then  <b>Tk_CanvasGetCoord</b>
       stores  the corresponding canvas coordinate at *<u>doublePtr</u> and returns TCL_OK.  Otherwise it stores an
       error message in <u>interp-&gt;result</u> and returns TCL_ERROR.

       <b>Tk_CanvasDrawableCoords</b> is called by type managers during redisplay to compute where to draw  things.
       Given  <u>x</u>  and  <u>y</u>  coordinates in the space of the canvas, <b>Tk_CanvasDrawableCoords</b> computes the corre-<font color="#ffffff" class="whiteout">sponding&nbsp;corresponding</font>
       sponding pixel in the drawable that is currently being used for redisplay; it returns  those  coordi-<font color="#ffffff" class="whiteout">nates&nbsp;coordinates</font>
       nates  in *<u>drawableXPtr</u> and *<u>drawableYPtr</u>.  This procedure should not be invoked except during redis-<font color="#ffffff" class="whiteout">play.&nbsp;redisplay.</font>
       play.

       <b>Tk_CanvasSetStippleOrigin</b> is also used during redisplay.  It sets the stipple origin in  <u>gc</u>  so  that
       stipples  drawn  with <u>gc</u> in the current offscreen pixmap will line up with stipples drawn with origin
       (0,0) in the canvas's actual window.  <b>Tk_CanvasSetStippleOrigin</b> is needed in order to guarantee  that
       stipple  patterns  line  up  properly when the canvas is redisplayed in small pieces.  Redisplays are
       carried out in double-buffered fashion where a piece of the canvas is redrawn in an offscreen  pixmap
       and then copied back onto the screen.  In this approach the stipple origins in graphics contexts need
       to be adjusted during each redisplay to compensate for the position of the off-screen pixmap relative
       to  the window.  If an item is being drawn with stipples, its type manager typically calls <b>Tk_Canvas</b>-<font color="#ffffff" class="whiteout">SetStippleOrigin&nbsp;Tk_CanvasSetStippleOrigin</font>
       <b>SetStippleOrigin</b> just before using <u>gc</u> to draw something;  after it is finished drawing, the type man-<font color="#ffffff" class="whiteout">ager&nbsp;manager</font>
       ager  calls  <b>XSetTSOrigin</b>  to  restore  the origin in <u>gc</u> back to (0,0) (the restore is needed because
       graphics contexts are shared, so they cannot be modified permanently).

       <b>Tk_CanvasWindowCoords</b> is similar to <b>Tk_CanvasDrawableCoords</b> except that it returns coordinates in the
       canvas's window on the screen, instead of coordinates in an off-screen pixmap.

       <b>Tk_CanvasEventuallyRedraw</b>  may  be  invoked by a type manager to inform Tk that a portion of a canvas
       needs to be redrawn.  The <u>x1</u>, <u>y1</u>, <u>x2</u>, and <u>y2</u> arguments specify the region that needs to  be  redrawn,
       in  canvas  coordinates.  Type managers rarely need to invoke <b>Tk_CanvasEventuallyRedraw</b>, since Tk can
       normally figure out when an item has changed and make the redisplay request on its behalf (this  hap-<font color="#ffffff" class="whiteout">pens,&nbsp;happens,</font>
       pens, for example whenever Tk calls a <u>configureProc</u> or <u>scaleProc</u>).  The only time that a type manager
       needs to call <b>Tk_CanvasEventuallyRedraw</b> is if an item has changed on its own  without  being  invoked
       through one of the procedures in its Tk_ItemType; this could happen, for example, in an image item if
       the image is modified using image commands.

       <b>Tk_CanvasTagsParseProc</b> and <b>Tk_CanvasTagsPrintProc</b> are procedures that handle  the  <b>-tags</b>  option  for
       canvas  items.   The code of a canvas type manager won't call these procedures directly, but will use
       their addresses to create a <b>Tk_CustomOption</b> structure for the  <b>-tags</b>  option.    The  code  typically
       looks like this:
              static Tk_CustomOption tagsOption = {Tk_CanvasTagsParseProc,
                Tk_CanvasTagsPrintProc, (ClientData) NULL
              };

              static Tk_ConfigSpec configSpecs[] = {
                ...
                {TK_CONFIG_CUSTOM, "-tags", (char *) NULL, (char *) NULL,
                   (char *) NULL, 0, TK_CONFIG_NULL_OK, &amp;tagsOption},
                ...
              };


<b>KEYWORDS</b>
       canvas, focus, item type, redisplay, selection, type manager



Tk                                                   4.1                                   <a href="Tk_CanvasTkwin.3tcl.html#//apple_ref/doc/man/3/Tk_CanvasTkwin">Tk_CanvasTkwin(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/CanvTkwin.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/CanvTkwin.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/CanvTkwin.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html><head><title>Mac OS X
 Manual Page For CrtPhImgFmt(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/CrtPhImgFmt" title="Mac OS X
 Manual Page for CrtPhImgFmt(3tcl)"><a name="//apple_ref/doc/man/3/CrtPhImgFmt" title="Mac OS X
 Manual Page for CrtPhImgFmt(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/CrtPhImgFmt"; name=CrtPhImgFmt(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tk_CreatePhotoImageFormat(3)                Tk Library Procedures               <a href="Tk_CreatePhotoImageFormat.3tcl.html#//apple_ref/doc/man/3/Tk_CreatePhotoImageFormat">Tk_CreatePhotoImageFormat(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tk_CreatePhotoImageFormat - define new file format for photo images

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       <b>Tk_CreatePhotoImageFormat</b>(<u>formatPtr</u>)

<b>ARGUMENTS</b>
       Tk_PhotoImageFormat   <u>*formatPtr</u>   (in)      Structure that defines the new file format.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       <b>Tk_CreatePhotoImageFormat</b>  is  invoked  to define a new file format for image data for use with photo
       images.  The code that implements an image file format is called an image  file  format  handler,  or
       handler  for  short.   The photo image code maintains a list of handlers that can be used to read and
       write data to or from a file.  Some handlers may also support reading image data  from  a  string  or
       converting image data to a string format.  The user can specify which handler to use with the <b>-format</b>
       image configuration option or the <b>-format</b> option to the <b>read</b> and <b>write</b> photo image subcommands.

       An image file format handler consists of a collection of procedures plus a Tk_PhotoImageFormat struc-<font color="#ffffff" class="whiteout">ture,&nbsp;structure,</font>
       ture, which contains the name of the image file format and pointers to six procedures provided by the
       handler to deal with files and strings in this format.  The  Tk_PhotoImageFormat  structure  contains
       the following fields:
              typedef struct Tk_PhotoImageFormat {
                char *<u>name</u>;
                Tk_ImageFileMatchProc *<u>fileMatchProc</u>;
                Tk_ImageStringMatchProc *<u>stringMatchProc</u>;
                Tk_ImageFileReadProc *<u>fileReadProc</u>;
                Tk_ImageStringReadProc *<u>stringReadProc</u>;
                Tk_ImageFileWriteProc *<u>fileWriteProc</u>;
                Tk_ImageStringWriteProc *<u>stringWriteProc</u>;
              } Tk_PhotoImageFormat;

       The handler need not provide implementations of all six procedures.  For example, the procedures that
       handle string data would not be provided for a format in which the image data are stored  in  binary,
       and  could therefore contain null characters.  If any procedure is not implemented, the corresponding
       pointer in the Tk_PhotoImageFormat structure should be set to NULL.  The  handler  must  provide  the
       <u>fileMatchProc</u>  procedure if it provides the <u>fileReadProc</u> procedure, and the <u>stringMatchProc</u> procedure
       if it provides the <u>stringReadProc</u> procedure.


<b>PORTABILITY</b>
       In Tk 8.2 and earlier, a different interface was used. Tk 8.3 will still support the old format  han-<font color="#ffffff" class="whiteout">dlers&nbsp;handlers</font>
       dlers  if  the  format  name  is in upper case. If you still want to compile old format handlers with
       Tk8.3, use the flag -DUSE_OLD_IMAGE. This will restore all function prototypes to match  the  pre-8.3
       situation.


<b>NAME</b>
       <u>formatPtr-&gt;name</u>  provides  a  name  for the image type.  Once <b>Tk_CreatePhotoImageFormat</b> returns, this
       name may be used in the <b>-format</b> photo image configuration and subcommand option.  The manual page for
       the  photo  image <a href="../mann/photo.ntcl.html#//apple_ref/doc/man/n/photo">(photo(n)</a>) describes how image file formats are chosen based on their names and the
       value given to the <b>-format</b> option. For new format handlers, the name should be in lower case. Pre-8.3
       format handlers are assumed to be in upper case.


<b>FILEMATCHPROC</b>
       <u>formatPtr-&gt;fileMatchProc</u>  provides the address of a procedure for Tk to call when it is searching for
       an image file format handler suitable for reading data in  a  given  file.   <u>formatPtr-&gt;fileMatchProc</u>
       must match the following prototype:
              typedef int Tk_ImageFileMatchProc(
                Tcl_Channel <u>chan</u>,
                CONST char *<u>fileName</u>,
                Tcl_Obj *<u>format</u>,
                int *<u>widthPtr</u>,
                int *<u>heightPtr</u>,
                Tcl_Interp *<u>interp</u>);
       The <u>fileName</u> argument is the name of the file containing the image data, which is open for reading as
       <u>chan</u>.  The <u>format</u> argument contains the value given for the <b>-format</b> option, or NULL if the option was
       not  specified.   If  the data in the file appears to be in the format supported by this handler, the
       <u>formatPtr-&gt;fileMatchProc</u> procedure should store the width and height of the image  in  *<u>widthPtr</u>  and
       *<u>heightPtr</u> respectively, and return 1.  Otherwise it should return 0.


<b>STRINGMATCHPROC</b>
       <u>formatPtr-&gt;stringMatchProc</u>  provides  the  address of a procedure for Tk to call when it is searching
       for an image file  format  handler  for  suitable  for  reading  data  from  a  given  string.   <u>for</u>-<font color="#ffffff" class="whiteout">matPtr-&gt;stringMatchProc&nbsp;formatPtr-&gt;stringMatchProc</font>
       <u>matPtr-&gt;stringMatchProc</u> must match the following prototype:
              typedef int Tk_ImageStringMatchProc(
                Tcl_Obj *<u>data</u>,
                Tcl_Obj *<u>format</u>,
                int *<u>widthPtr</u>,
                int *<u>heightPtr</u>,
                Tcl_Interp *<u>interp</u>);
       The  <u>data</u>  argument points to the object containing the image data.  The <u>format</u> argument contains the
       value given for the <b>-format</b> option, or NULL if the option was not specified.   If  the  data  in  the
       string  appears  to be in the format supported by this handler, the <u>formatPtr-&gt;stringMatchProc</u> proce-<font color="#ffffff" class="whiteout">dure&nbsp;procedure</font>
       dure should store the width and height of the image in *<u>widthPtr</u>  and  *<u>heightPtr</u>  respectively,  and
       return 1.  Otherwise it should return 0.


<b>FILEREADPROC</b>
       <u>formatPtr-&gt;fileReadProc</u> provides the address of a procedure for Tk to call to read data from an image
       file into a photo image.  <u>formatPtr-&gt;fileReadProc</u> must match the following prototype:
              typedef int Tk_ImageFileReadProc(
                Tcl_Interp *<u>interp</u>,
                Tcl_Channel <u>chan</u>,
                CONST char *<u>fileName</u>,
                Tcl_Obj *<u>format</u>,
                PhotoHandle <u>imageHandle</u>,
                int <u>destX</u>, int <u>destY</u>,
                int <u>width</u>, int <u>height</u>,
                int <u>srcX</u>, int <u>srcY</u>);
       The <u>interp</u> argument is the interpreter in which the command was invoked to read the image; it  should
       be  used for reporting errors.  The image data is in the file named <u>fileName</u>, which is open for read-<font color="#ffffff" class="whiteout">ing&nbsp;reading</font>
       ing as <u>chan</u>.  The <u>format</u> argument contains the value given for the <b>-format</b> option,  or  NULL  if  the
       option  was  not  specified.  The image data in the file, or a subimage of it, is to be read into the
       photo image identified by the handle <u>imageHandle</u>.  The subimage of the data in the file is of  dimen-<font color="#ffffff" class="whiteout">sions&nbsp;dimensions</font>
       sions  <u>width</u>  x <u>height</u> and has its top-left corner at coordinates (<u>srcX</u>,<u>srcY</u>).  It is to be stored in
       the photo image with its top-left corner at coordinates (<u>destX</u>,<u>destY</u>) using the <b>Tk_PhotoPutBlock</b> pro-<font color="#ffffff" class="whiteout">cedure.&nbsp;procedure.</font>
       cedure.  The return value is a standard Tcl return value.


<b>STRINGREADPROC</b>
       <u>formatPtr-&gt;stringReadProc</u>  provides  the  address  of  a procedure for Tk to call to read data from a
       string into a photo image.  <u>formatPtr-&gt;stringReadProc</u> must match the following prototype:
              typedef int Tk_ImageStringReadProc(
                Tcl_Interp *<u>interp</u>,
                Tcl_Obj *<u>data</u>,
                Tcl_Obj *<u>format</u>,
                PhotoHandle <u>imageHandle</u>,
                int <u>destX</u>, int <u>destY</u>,
                int <u>width</u>, int <u>height</u>,
                int <u>srcX</u>, int <u>srcY</u>);
       The <u>interp</u> argument is the interpreter in which the command was invoked to read the image; it  should
       be used for reporting errors.  The <u>data</u> argument points to the image data in object form.  The <u>format</u>
       argument contains the value given for the <b>-format</b> option, or NULL if the option  was  not  specified.
       The  image  data in the string, or a subimage of it, is to be read into the photo image identified by
       the handle <u>imageHandle</u>.  The subimage of the data in the string is of dimensions <u>width</u> x  <u>height</u>  and
       has  its  top-left corner at coordinates (<u>srcX</u>,<u>srcY</u>).  It is to be stored in the photo image with its
       top-left corner at coordinates (<u>destX</u>,<u>destY</u>) using the <b>Tk_PhotoPutBlock</b> procedure.  The return  value
       is a standard Tcl return value.


<b>FILEWRITEPROC</b>
       <u>formatPtr-&gt;fileWriteProc</u>  provides  the  address  of  a procedure for Tk to call to write data from a
       photo image to a file.  <u>formatPtr-&gt;fileWriteProc</u> must match the following prototype:
              typedef int Tk_ImageFileWriteProc(
                Tcl_Interp *<u>interp</u>,
                CONST char *<u>fileName</u>,
                Tcl_Obj *<u>format</u>,
                Tk_PhotoImageBlock *<u>blockPtr</u>);
       The <u>interp</u> argument is the interpreter in which the command was invoked to write the image; it should
       be  used  for  reporting errors.  The image data to be written are in memory and are described by the
       Tk_PhotoImageBlock structure pointed to by <u>blockPtr</u>; see the manual page  <a href="FindPhoto.3tcl.html#//apple_ref/doc/man/3/FindPhoto">FindPhoto(3)</a>  for  details.
       The  <u>fileName</u>  argument  points to the string giving the name of the file in which to write the image
       data.  The <u>format</u> argument contains the value given for the <b>-format</b> option, or NULL if the option was
       not  specified.   The  format  string  can contain extra characters after the name of the format.  If
       appropriate, the <u>formatPtr-&gt;fileWriteProc</u> procedure may interpret these characters to specify further
       details about the image file.  The return value is a standard Tcl return value.


<b>STRINGWRITEPROC</b>
       <u>formatPtr-&gt;stringWriteProc</u> provides the address of a procedure for Tk to call to translate image data
       from a photo image into a string.  <u>formatPtr-&gt;stringWriteProc</u> must match the following prototype:
              typedef int Tk_ImageStringWriteProc(
                Tcl_Interp *<u>interp</u>,
                Tcl_Obj *<u>format</u>,
                Tk_PhotoImageBlock *<u>blockPtr</u>);
       The <u>interp</u> argument is the interpreter in which the command was invoked  to  convert  the  image;  it
       should  be used for reporting errors.  The image data to be converted are in memory and are described
       by the Tk_PhotoImageBlock structure pointed to by <u>blockPtr</u>; see  the  manual  page  <a href="FindPhoto.3tcl.html#//apple_ref/doc/man/3/FindPhoto">FindPhoto(3)</a>  for
       details.   The  data for the string should be put in the interpreter <u>interp</u> result.  The <u>format</u> argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
       ment contains the value given for the <b>-format</b> option, or NULL if the option was not  specified.   The
       format  string  can  contain extra characters after the name of the format.  If appropriate, the <u>for</u>-<font color="#ffffff" class="whiteout">matPtr-&gt;stringWriteProc&nbsp;formatPtr-&gt;stringWriteProc</font>
       <u>matPtr-&gt;stringWriteProc</u> procedure may interpret these characters to specify further details about the
       image file.  The return value is a standard Tcl return value.


<b>SEE</b> <b>ALSO</b>
       Tk_FindPhoto, Tk_PhotoPutBlock


<b>KEYWORDS</b>
       photo image, image file



Tk                                                   8.3                        <a href="Tk_CreatePhotoImageFormat.3tcl.html#//apple_ref/doc/man/3/Tk_CreatePhotoImageFormat">Tk_CreatePhotoImageFormat(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/CrtPhImgFmt.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/CrtPhImgFmt.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/CrtPhImgFmt.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html><head><title>Mac OS X
 Manual Page For socket(ntcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/ntcl/socket" title="Mac OS X
 Manual Page for socket(ntcl)"><a name="//apple_ref/doc/man/n/socket" title="Mac OS X
 Manual Page for socket(ntcl)"><!-- headerDoc=man; indexgroup=Section ntcl; uid="//apple_ref/doc/man/ntcl/socket"; name=socket(ntcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
socket(n)                                   Tcl Built-In Commands                                  socket(n)



____________________________________________________________________________________________________________

<b>NAME</b>
       socket - Open a TCP network connection

<b>SYNOPSIS</b>
       <b>socket</b> ?<u>options</u>? <u>host</u> <u>port</u>

       <b>socket</b> <b>-server</b> <u>command</u> ?<u>options</u>? <u>port</u>
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       This command opens a network socket and returns a channel identifier that may be used in future invo-<font color="#ffffff" class="whiteout">cations&nbsp;invocations</font>
       cations of commands like <b>read</b>, <b>puts</b> and <b>flush</b>.  At present only the  TCP  network  protocol  is  sup-<font color="#ffffff" class="whiteout">ported;&nbsp;supported;</font>
       ported;   future  releases  may  include support for additional protocols.  The <b>socket</b> command may be
       used to open either the client or server side of a  connection,  depending  on  whether  the  <b>-server</b>
       switch is specified.

       Note  that  the default encoding for <u>all</u> sockets is the system encoding, as returned by <b>encoding</b> <b>sys</b>-<font color="#ffffff" class="whiteout">tem.&nbsp;system.</font>
       <b>tem</b>.  Most of the time, you will need to use <b>fconfigure</b> to alter this  to  something  else,  such  as
       <u>utf-8</u> (ideal for communicating with other Tcl processes) or <u>iso8859-1</u> (useful for many network proto-<font color="#ffffff" class="whiteout">cols,&nbsp;protocols,</font>
       cols, especially the older ones).


<b>CLIENT</b> <b>SOCKETS</b>
       If the <b>-server</b> option is not specified, then the client side of a connection is opened and  the  com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
       mand returns a channel identifier that can be used for both reading and writing.  <u>Port</u> and <u>host</u> spec-<font color="#ffffff" class="whiteout">ify&nbsp;specify</font>
       ify a port to connect to;  there must be a server accepting connections on this  port.   <u>Port</u>  is  an
       integer  port  number  (or service name, where supported and understood by the host operating system)
       and <u>host</u> is either a domain-style name such as <b>www.sunlabs.com</b> or a  numerical  IP  address  such  as
       <b>127.0.0.1</b>.  Use <u>localhost</u> to refer to the host on which the command is invoked.

       The  following  options  may  also be present before <u>host</u> to specify additional information about the
       connection:

       <b>-myaddr</b> <u>addr</u>
              <u>Addr</u> gives the domain-style name or numerical IP address of the client-side network  interface
              to  use for the connection.  This option may be useful if the client machine has multiple net-<font color="#ffffff" class="whiteout">work&nbsp;network</font>
              work interfaces.  If the option is omitted then the client-side interface will  be  chosen  by
              the system software.

       <b>-myport</b> <u>port</u>
              <u>Port</u>  specifies an integer port number (or service name, where supported and understood by the
              host operating system) to use for the client's side of the  connection.   If  this  option  is
              omitted, the client's port number will be chosen at random by the system software.

       <b>-async</b> The <b>-async</b> option will cause the client socket to be connected asynchronously. This means that
              the socket will be created immediately but may not yet be connected to the  server,  when  the
              call  to  <b>socket</b>  returns.  When  a  <b>gets</b> or <b>flush</b> is done on the socket before the connection
              attempt succeeds or fails, if the socket is in blocking mode, the operation  will  wait  until
              the connection is completed or fails. If the socket is in nonblocking mode and a <b>gets</b> or <b>flush</b>
              is done on the socket before the connection attempt succeeds or fails, the  operation  returns
              immediately and <b>fblocked</b> on the socket returns 1.


<b>SERVER</b> <b>SOCKETS</b>
       If  the  <b>-server</b>  option is specified then the new socket will be a server for the port given by <u>port</u>
       (either an integer or a service name, where supported and understood by the host  operating  system).
       Tcl  will  automatically accept connections to the given port.  For each connection Tcl will create a
       new channel that may be used to communicate with the client.  Tcl then  invokes  <u>command</u>  with  three
       additional  arguments:  the name of the new channel, the address, in network address notation, of the
       client's host, and the client's port number.

       The following additional option may also be specified before <u>host</u>:

       <b>-myaddr</b> <u>addr</u>
              <u>Addr</u> gives the domain-style name or numerical IP address of the server-side network  interface
              to  use for the connection.  This option may be useful if the server machine has multiple net-<font color="#ffffff" class="whiteout">work&nbsp;network</font>
              work interfaces.  If the option is omitted then the server socket  is  bound  to  the  special
              address INADDR_ANY so that it can accept connections from any interface.

       Server  channels  cannot  be used for input or output; their sole use is to accept new client connec-<font color="#ffffff" class="whiteout">tions.&nbsp;connections.</font>
       tions. The channels created for each incoming client connection are  opened  for  input  and  output.
       Closing  the  server channel shuts down the server so that no new connections will be accepted;  how-<font color="#ffffff" class="whiteout">ever,&nbsp;however,</font>
       ever, existing connections will be unaffected.

       Server sockets depend on the Tcl event mechanism to find out when new connections are opened.  If the
       application  doesn't enter the event loop, for example by invoking the <b>vwait</b> command or calling the C
       procedure <b>Tcl_DoOneEvent</b>, then no connections will be accepted.

       If <u>port</u> is specified as zero, the operating system will allocate an unused port for use as  a  server
       socket.   The port number actually allocated my be retrieved from the created server socket using the
       <b>fconfigure</b> command to retrieve the <b>-sockname</b> option as described below.


<b>CONFIGURATION</b> <b>OPTIONS</b>
       The <b>fconfigure</b> command can be used to query several readonly configuration options for  socket  chan-<font color="#ffffff" class="whiteout">nels:&nbsp;channels:</font>
       nels:

       <b>-error</b> This  option  gets the current error status of the given socket.  This is useful when you need
              to determine if an asynchronous connect operation succeeded.  If there was an error, the error
              message is returned.  If there was no error, an empty string is returned.

       <b>-sockname</b>
              This  option  returns a list of three elements, the address, the host name and the port number
              for the socket. If the host name cannot be computed, the second element is  identical  to  the
              address, the first element of the list.

       <b>-peername</b>
              This  option  is not supported by server sockets. For client and accepted sockets, this option
              returns a list of three elements; these are the address, the host name and the port  to  which
              the peer socket is connected or bound. If the host name cannot be computed, the second element
              of the list is identical to the address, its first element.



<b>SEE</b> <b>ALSO</b>
       <a href="fconfigure.ntcl.html#//apple_ref/doc/man/n/fconfigure">fconfigure(n)</a>, <a href="flush.ntcl.html#//apple_ref/doc/man/n/flush">flush(n)</a>, <a href="open.ntcl.html#//apple_ref/doc/man/n/open">open(n)</a>, <a href="read.ntcl.html#//apple_ref/doc/man/n/read">read(n)</a>


<b>KEYWORDS</b>
       bind, channel, connection, domain name, host, network address, socket, tcp



Tcl                                                  8.0                                           socket(n)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/mann/socket.ntcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/mann/socket.ntcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/mann/socket.ntcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

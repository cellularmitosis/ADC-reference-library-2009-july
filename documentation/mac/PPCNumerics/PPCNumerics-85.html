<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>num2dec(IM:PN)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING85></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCNumerics-84.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-86.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCNumerics-2.html"><B>PowerPC Numerics </B></A> / <A HREF="PPCNumerics-48.html"><B>Part 2 - The PowerPC Numerics C Implementation</B></A><BR><DD><A HREF="PPCNumerics-71.html"><B>Chapter 9 - Conversion Functions</B></A> / <A HREF="PPCNumerics-83.html"><B>Converting Between Binary and Decimal Numbers</B></A><BR><DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING85-0></A>
<H3><A NAME=MARKER-9-54></A>num2dec</H3>
 <A NAME=MARKER-2-41></A>You can use the <CODE>num2dec</CODE> function to convert a binary floating-point number to a decimal number.<P>
<PRE>
void num2dec (const decform *f, double_t x, decimal *d);
void num2decl (const decform *f, long double x, decimal *d);
</PRE>
<DL>
<DT><CODE>f</CODE>
<DD> A <CODE>decform</CODE> structure that describes how the number should look in decimal. See page 9-14</A> for a description of the <CODE>decform</CODE> structure.
<DT><CODE>x</CODE>
<DD> The floating-point number to be converted.
<DT><CODE>d</CODE>
<DD> Upon return, a pointer to the <CODE>decimal</CODE> structure containing the number. See page 9-13</A> for a description of the <CODE>decimal</CODE> structure. 
</DL>
<A NAME=HEADING85-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>num2dec</CODE> function converts a floating-point number to a decimal number. The decimal number is contained in a <CODE>decimal</CODE> structure. Each conversion to a <CODE>decimal</CODE> structure <CODE>d</CODE> is controlled by a <CODE>decform</CODE> structure <CODE>f</CODE>. All implementations allow 36 digits to be returned in the <CODE>sig</CODE> field of the <CODE>decimal</CODE> structure. The implied decimal point is at the right end of <CODE>sig</CODE>, with <CODE>exp</CODE> set accordingly.<CODE><A NAME=MARKER-2-71></A></CODE><P>
 After using the <CODE>num2dec</CODE> function, you can use the <CODE>dec2str</CODE> function to convert the <CODE>decimal</CODE> structure to a character string.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD>Use the same decimal format structure settings for <CODE>dec2str</CODE> as you used for <CODE>num2dec</CODE>; otherwise, the results are unspecified.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING85-10></A>
<H5>EXCEPTIONS</H5>
 When the number of digits specified in a <CODE>decform</CODE> structure exceeds an implementation maximum (which is 36), the result is undefined.<P>
 <A NAME=MARKER-10-92></A>A number might be too large to represent in a chosen fixed style. For instance, if the implementation's maximum length for <CODE>sig</CODE> is 36, then 
<MATH>
10<SUP>35</SUP>
</MATH>

 (which requires 33 digits to the left of the point in fixed-style representations) is too large for a fixed-style representation specifying more than two digits to the right of the point. If a number is too large for a chosen fixed style, then (depending on the numeric implementation) one of two results is returned: an implementation might return the most significant digits of the number in <CODE>sig</CODE> and set <CODE>exp</CODE> so that the <CODE>decimal</CODE> structure contains a valid floating-style approximation of the number; alternatively, an implementation might simply set <CODE>sig</CODE> to the string "?". Note that in any implementation, the following test determines whether a nonzero finite number is too large for the chosen fixed style.<P>
<PRE>
   decimal d;
   decform f;
   int too_big; /* Boolean */

   too_big = (-d.exp != f.digits) || (d.sig.text[0] == &quot;?&quot;);
</PRE>
 For fixed-point formatting, PowerPC Numerics treats a negative value for <CODE>digits</CODE> as a specification for rounding to the left of the decimal point; for example, <CODE>digits</CODE> = -2 means to round to hundreds. For floating-point formatting, a negative value for <CODE>digits</CODE> gives unspecified results.<CODE><A NAME=MARKER-2-27></A></CODE><P>
<A NAME=HEADING85-15></A>
<H5>SPECIAL CASES</H5>
<UL>
<LI><A NAME=MARKER-2-24></A>For zeros, the character "0" is placed in <CODE>sig.text[0]</CODE>.
<LI>For NaNs, The character "N" is placed in <CODE>sig.text[0]</CODE>. The character "N" might be followed by a hexadecimal representation of the input significand. The third and fourth hexadecimal digits following the "N" give the NaN code. For example, "N4021000000000000" has NaN code 0x21.
<LI>For Infinities, the character "I" is placed in <CODE>sig.text[0]</CODE>.<P>
</UL>
 In all three of these cases, <CODE>exp</CODE> is undefined.<A NAME=MARKER-9-43></A><A NAME=MARKER-2-31></A><A NAME=MARKER-2-34></A><P>
<A NAME=HEADING85-20></A>
<H5>EXAMPLES</H5>
<PRE>
decimal d;
decform f;
double_t fp_num = 1.000007;

f.style = FLOATDECIMAL;    /* floating-point format */
f.digits = 7;              /* seven significant digits */
num2dec(&amp;f, fp_num, &amp;d);   /* d now contains 1.000007 expressed
                              in decimal structure */
</PRE>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="PPCNumerics-84.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-86.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="PPCNumerics-3.html">&copy; Apple Computer, Inc.</A><br>13 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

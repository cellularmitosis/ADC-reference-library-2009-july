<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Distribution Legacy Guide (Legacy): Creating a Package</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating a Package"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001764" title="Creating a Package"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../index.html" target="_top">Software Distribution Legacy Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_install_features.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_install_process.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001764-TPXREF5" title="Creating a Package"></a><hr /><H1>Creating a Package</H1><p>This section describes the general steps you take to package your software. It assumes you are familiar with the information in <span class="content_text"><a href="sd_about_pkgs.html#//apple_ref/doc/uid/20001761-TPXREF2">“About Packages,”</a></span> which introduces packages and describes the contents of a simple package. You should also be familiar with the information in <span class="content_text"><a href="sd_install_features.html#//apple_ref/doc/uid/20001763-TPXREF2">“PackageMaker and Installer Features.”</a></span></p><p>This section is not strictly a tutorial. For a step-by-step tutorial that describes how to create a package, see <em>Packaging Your KEXT for Distribution and Installation</em>, in <span class="content_text"><a href="../../../../Darwin/index.html#//apple_ref/doc/uid/TP30000422" target="_top">Darwin Documentation</a></span>. That document describes how to create a package for installing a kernel extension (or KEXT), but most of the steps are common to packaging any kind of software.</p><p>In addition, you can read about many of the steps for creating a package in PackageMaker Help. You can also learn about the PackageMaker user interface through the available help tags.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1011501-TPXREF2">Preparation</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1011551-TPXREF4">Roadmap</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1029914-TPXREF11">Create a Directory to Store Your Software</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1019030-CACCBBHB">Create Files to Customize the Installation</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1017868-CACJBDAG">Create Script Files for Special Processing</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1019923-TPXREF6">Create a Directory to Store Additional Installation Files</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1018763-CACDIHGE">Specify the Installation Destination</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1012136-CHDGFBCC">Create a Package With PackageMaker</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1030016-CACHEGEF">Modify the Package for Special Processing</a>
				
			<br/>
			
        
			
			
				<a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1015807-TPXREF10">Test the Package</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001764-1011501" title="Preparation"></a><a name="//apple_ref/doc/uid/20001764-1011501-TPXREF2" title="Preparation"></a><h2>Preparation</h2><p>Before you start packaging your software, it is worthwhile to consider your installation goals and make some decisions. The following issues apply to most software installations:</p><ul class="ul"><li class="li"><p>Do you really need to use an installation process, or can you allow users to simply drag your software to an appropriate location, as described in <span class="content_text"><a href="sd_guidelines.html#//apple_ref/doc/uid/20001758-1036551">“Drag-and-Drop Installation”</a></span>?</p></li><li class="li"><p>How will you be distributing your software? If you’re distributing software on a CD, you can be less sensitive to size issues. However, if you’re distributing software through Internet downloads, you may want to take steps to minimize the size of your package:</p><ul class="nested"><li class="nested li"><p>Be sure you choose to compress the package archive (this is the default setting).</p></li><li class="nested li"><p>If possible, consider providing your software in separate packages.</p></li><li class="nested li"><p>Avoid steps that can make the package unnecessarily large, such as using a large background image and providing localized copies for many languages.</p></li></ul></li><li class="li"><p>Are some parts of your software optional? If so, consider distributing your software with a metapackage, which allows the user to do a custom install.</p><p>For more information, see <span class="content_text"><a href="sd_about_pkgs.html#//apple_ref/doc/uid/20001761-1041172">“What Is a Metapackage?.”</a></span></p></li><li class="li"><p>Does your software need to reside in a specific location, or is it relocatable (the user can choose a location for it)? If your software must be installed in more than one location (such as <code>/Applications</code> and <code>/System/Library/Fonts</code>), you can’t make it relocatable (unless you put it into separate packages).</p><p>For more information, see <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1018763">“Specify the Installation Destination.”</a></span></p></li><li class="li"><p>How much will you want to customize the installation process? You can supply a welcome statement, a Read Me file, a license agreement, and a background image for the installer window. These are described in <span class="content_text"><a href="sd_modify_install_ui.html#//apple_ref/doc/uid/20001766-TPXREF2">“Customizing What Installer Shows to the User,”</a></span> which also describes how you can localize the information you provide for customization.</p></li><li class="li"><p>Do you need to check for certain requirements on the installation system or the installation volume? Do you need other special processing before or after installing your software? See <span class="content_text"><a href="sd_spec_install_req.html#//apple_ref/doc/uid/20001949-TPXREF4">“Specifying Installation Requirements”</a></span> and <span class="content_text"><a href="sd_install_features.html#//apple_ref/doc/uid/20001763-1039017">“Customizing an Installation With Executable Scripts”</a></span> for information on how to perform these kinds of operations.</p></li><li class="li"><p>Will installing your software require root or administrator authorization? For more information, see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-TPXREF2">“Authorization, File Ownership, and Permissions.”</a></span></p></li><li class="li"><p>Does your software require or recommend a restart, logout, or shutdown? You can specify such requirements in PackageMaker.</p><p>See <span class="content_text"><a href="sd_install_features.html#//apple_ref/doc/uid/20001763-1039447">“Restarting, Logging Out, or Shutting Down.”</a></span></p></li></ul><p>There are additional issues you may need to resolve for some software installations. These include:</p><ul class="ul"><li class="li"><p>Will you provide information that can help Installer find your previously installed software during future upgrades? This is most likely to be an issue if your software is easily relocatable. For more information, see <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-CIAHIEAF">“Finding Previously Installed Software.”</a></span></p></li><li class="li"><p>Will you provide information in your software that can help Installer decide what needs to be replaced during future upgrades? For more information, see <span class="content_text"><a href="sd_pkg_version_info.html#//apple_ref/doc/uid/20001942-TPXREF4">“Specifying Version Information for Packaged Software.”</a></span></p></li></ul><p>Finally, you should take a tour of the PackageMaker application, using the Help and help tags to gain familiarity with the interface and available options.</p><a name="//apple_ref/doc/uid/20001764-1011551" title="Roadmap"></a><a name="//apple_ref/doc/uid/20001764-1011551-TPXREF4" title="Roadmap"></a><h2>Roadmap</h2><p>Once you have completed development of your software, including making any changes required by the issues described in <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1011501">“Preparation,”</a></span> you’re ready to start packaging. That will require the following steps:</p><ol class="ol"><li class="li"><p>Create a directory to store your software</p></li><li class="li"><p>Create a directory to store additional installation files</p></li><li class="li"><p>Create any files you need to customize the installation</p></li><li class="li"><p>Create files you need for special processing</p></li><li class="li"><p>Specify the installation destination</p></li><li class="li"><p>Create a package with PackageMaker</p></li><li class="li"><p>Modify the package for special processing</p></li><li class="li"><p>Test the package</p></li></ol><p>These steps are described in the sections that follow.</p><p>Once you have packaged your software, you can distribute it with the mechanisms described in <span class="content_text"><a href="sd_guidelines.html#//apple_ref/doc/uid/20001758-TPXREF1">“Software Distribution Guidelines.”</a></span></p><a name="//apple_ref/doc/uid/20001764-1029914" title="Create a Directory to Store Your Software"></a><a name="//apple_ref/doc/uid/20001764-1029914-TPXREF11" title="Create a Directory to Store Your Software"></a><h2>Create a Directory to Store Your Software</h2><p>You’ll have to create a directory to store your software prior to packaging. This directory can have any reasonable name, but for this example, name it <code>Package_contents</code>, indicating it contains the software to be packaged. These files will end up in an archive file in the package. Use the Root field on the Files pane to tell PackageMaker about this directory.</p><p>If your software consists of one, atomic component, such as an application or framework bundle, you can place it directly in the <code>Package_contents</code> directory. Similarly, if your software consists of multiple components, but they are all installed in the same location, you can place each of the components directly in the <code>Package_contents</code> directory.</p><p>If your software consists of multiple components that must be placed in specific places in a directory hierarchy, you should create a directory structure within <code>Package_contents</code> that mirrors the installation hierarchy. For example, to install an application in <code>/Applications</code> and some fonts in <code>/System/Library/Fonts</code>, you set up a directory structure like the one shown in <span class="content_text">Listing 1</span>.</p><a name="//apple_ref/doc/uid/20001764-1016632-CACDAGFF" title="Listing 1Directory structure for installing software in two fixed places"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001764-1016632" title="Listing 1Directory structure for installing software in two fixed places"></a><strong>Listing 1&nbsp;&nbsp;</strong>Directory structure for installing software in two fixed places</p><div class="codesample"><table><tr><td scope="row"><pre>Package_contents<span></span></pre></td></tr><tr><td scope="row"><pre>    Applications<span></span></pre></td></tr><tr><td scope="row"><pre>    System<span></span></pre></td></tr><tr><td scope="row"><pre>        Library<span></span></pre></td></tr><tr><td scope="row"><pre>            Fonts<span></span></pre></td></tr></table></div><p>You then place your application in the <code>Applications</code> directory and your fonts in the <code>Fonts</code> directory. Later in this process, you’ll specify a location for installing your software, as described in <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1018763">“Specify the Installation Destination.”</a></span> For this example (with an application and some fonts), you specify an installation destination of <code>/</code> (the root directory), and the files are installed in the appropriate subdirectories. For an installation that places all the files in one location, you can specify the exact location, such as <code>/Applications</code>.</p><p>If your software consists of multiple components that don’t all have to be installed, you should put each component into a separate package, then combine the packages in a metapackage. For more information, see <span class="content_text"><a href="sd_mpkg_anatomy.html#//apple_ref/doc/uid/20001768-TPXREF3">“Anatomy of a Metapackage.”</a></span></p><a name="//apple_ref/doc/uid/20001764-1019030" title="Create Files to Customize the Installation"></a><a name="//apple_ref/doc/uid/20001764-1019030-CACCBBHB" title="Create Files to Customize the Installation"></a><h2>Create Files to Customize the Installation</h2><p>You’ll need to create any text and image files desired to customize the installation. Depending on your requirements, as described in <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1011501">“Preparation,”</a></span> you may need some or all of the following:</p><ul class="ul"><li class="li"><p>a welcome statement</p></li><li class="li"><p>a Read Me file</p></li><li class="li"><p>a software license agreement</p></li><li class="li"><p>a background image for the installer window</p></li></ul><p>For information on how to create and use these files, see <span class="content_text"><a href="sd_modify_install_ui.html#//apple_ref/doc/uid/20001766-TPXREF2">“Customizing What Installer Shows to the User.”</a></span></p><div class="notebox"><a name="//apple_ref/doc/uid/20001764-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;You may also want to provide information that can help Installer find your previously installed software during future upgrades. If so, you’ll have to create a <code>TokenDefinitions.plist</code> file. For more information, see <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-CIAHIEAF">“Finding Previously Installed Software”</a></span></p></div><a name="//apple_ref/doc/uid/20001764-1017868" title="Create Script Files for Special Processing"></a><a name="//apple_ref/doc/uid/20001764-1017868-CACJBDAG" title="Create Script Files for Special Processing"></a><h2>Create Script Files for Special Processing</h2><p>You’ll need to create any script files (or other executables) you’ll use to perform special handling during the installation.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001764-DontLinkElementID_6" title="Important:"></a><p><strong>Important:</strong>&nbsp;You may be able to minimize your use of scripts, which present potential security problems, by using techniques described in <span class="content_text"><a href="sd_pkg_flags.html#//apple_ref/doc/uid/20001940-TPXREF3">“Examining and Modifying Property Lists”</a></span> and <span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-CIAHIEAF">“Finding Previously Installed Software.”</a></span></p><p></p></div><p>Depending on your requirements, as described in <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1011501">“Preparation,”</a></span> you may need some or all of the following:</p><ul class="ul"><li class="li"><p>an InstallationCheck file to check for required features of the installation system</p><p>For details, see <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-TPXREF6">“Checking the Installation With InstallationCheck.”</a></span></p></li><li class="li"><p>a VolumeCheck file to examine each mounted volume and determine whether it meets your required criteria</p><p>For details, see <span class="content_text"><a href="sd_volume_check_ref.html#//apple_ref/doc/uid/20001944-TPXREF9">“Checking the Installation Volume With VolumeCheck.”</a></span></p></li><li class="li"><p><code>preflight</code>, <code>postflight</code>, <code>preinstall</code>, <code>postinstall</code>, <code>preupgrade</code>, or <code>postupgrade</code> scripts to perform additional operations</p><p>For details, see <span class="content_text"><a href="sd_pre_post_processing.html#//apple_ref/doc/uid/20001945-TPXREF8">“Modifying an Installation With Scripts.”</a></span></p></li></ul><a name="//apple_ref/doc/uid/20001764-1019923" title="Create a Directory to Store Additional Installation Files"></a><a name="//apple_ref/doc/uid/20001764-1019923-TPXREF6" title="Create a Directory to Store Additional Installation Files"></a><h2>Create a Directory to Store Additional Installation Files</h2><p>You’ll have to create a directory to store the files you’ve created for customizing the installation process and performing special processing. This directory can have any reasonable name, but for this example, name it <code>Install_resources</code>, indicating it contains additional resources to be used by Installer during the installation process. Use the Resources field on the Resources pane to tell PackageMaker about this directory.</p><p>Once you have created the <code>Install_resources</code> directory, you should copy in the files you created in <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1019030">“Create Files to Customize the Installation”</a></span> and <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1017868">“Create Script Files for Special Processing.”</a></span></p><p>In some cases, you may want to create localized directories within the <code>Install_resources</code> directory. For details, see <span class="content_text"><a href="sd_modify_install_ui.html#//apple_ref/doc/uid/20001766-1028542">“Localizing the Welcome, Read Me, and License Files,”</a></span> <span class="content_text"><a href="sd_modify_install_ui.html#//apple_ref/doc/uid/20001766-1029147">“Additional Tips for Background Images,”</a></span> and <span class="content_text"><a href="sd_pkg_anatomy.html#//apple_ref/doc/uid/20001767-1020759">“A Complex Installation Package.”</a></span></p><a name="//apple_ref/doc/uid/20001764-1018763" title="Specify the Installation Destination"></a><a name="//apple_ref/doc/uid/20001764-1018763-CACDIHGE" title="Specify the Installation Destination"></a><h2>Specify the Installation Destination</h2><p>You’ll have to supply PackageMaker with a default destination for installing the software on the volume selected by the user. For example, you might specify a default location of <code>/Applications</code>. You supply this information in the Default Location field on the PackageMaker Info pane. Figure <span class="content_text">Figure 1</span> shows the Info pane with its default settings.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001764-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;For additional information on features listed on this pane, see <span class="content_text"><a href="sd_install_features.html#//apple_ref/doc/uid/20001763-1039447">“Restarting, Logging Out, or Shutting Down”</a></span> and <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-TPXREF2">“Authorization, File Ownership, and Permissions,”</a></span> as well as the PackageMaker Help and help tags in the application.</p></div><br/><div><a name="//apple_ref/doc/uid/20001764-1018784-CACJBEHB" title="Figure 1The PackageMaker Info pane, with default settings"></a><p><a name="//apple_ref/doc/uid/20001764-1018784" title="Figure 1The PackageMaker Info pane, with default settings"></a><strong>Figure 1&nbsp;&nbsp;</strong>The PackageMaker Info pane, with default settings</p><img src = "art/sd_default_info_pane.gif" alt = "The PackageMaker Info pane, with default settings" width="468" height="350"></div><br/><p>The following sections describe how to specify a fixed location, how to let the user specify the location, and how to specify the location for a package that will be part of a metapackage.</p><a name="//apple_ref/doc/uid/20001764-1029211" title="Installing in a Fixed Location"></a><a name="//apple_ref/doc/uid/20001764-1029211-TPXREF7" title="Installing in a Fixed Location"></a><h3>Installing in a Fixed Location</h3><p>To require that your software be installed in a fixed location, observe the following:</p><ul class="spaceabove"><li class="li"><p>If your package places items in more than one location (such as an application in <code>/Applications</code> and fonts in <code>/System/Library/Fonts</code>, you should set the default location to the highest enclosing directory (in this case, <code>/</code>). If your package places items in only one location, you can choose any default location.</p></li><li class="li"><p>Do not select the Relocatable checkbox shown in <span class="content_text">Figure 1</span>.</p></li><li class="li"><p>Place your software in a directory hierarchy within the <code>Package_contents</code> directory that is consistent with the default directory into which the software will be installed, such as in the example shown in <span class="content_text">Listing 1</span>.</p></li></ul><p>If you follow these recommendations, Installer will place your software only in the directory hierarchy you have specified and will not allow a user to choose a destination for the software. Installer assembles paths based on the mountpoint of the selected volume, plus the value of the default location, plus the paths in the structure in your <code>Package_contents</code> directory.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001764-DontLinkElementID_8" title="Important:"></a><p><strong>Important:</strong>&nbsp;If the directory structure in your <code>Package_contents</code> directory is not consistent with the default directory in which the software will be installed and the package is not relocatable, the installation will not succeed.</p><p></p></div><a name="//apple_ref/doc/uid/20001764-1020692" title="Letting the User Choose the Location"></a><a name="//apple_ref/doc/uid/20001764-1020692-TPXREF8" title="Letting the User Choose the Location"></a><h3>Letting the User Choose the Location</h3><p>To allow a user to choose where to install your software, there are two requirements:</p><ul class="spaceabove"><li class="li"><p>Select the Relocatable checkbox shown in <span class="content_text">Figure 1</span>.</p></li><li class="li"><p>Place all your software directly within the <code>Package_contents</code> directory.</p></li></ul><div class="importantbox"><a name="//apple_ref/doc/uid/20001764-DontLinkElementID_9" title="Important:"></a><p><strong>Important:</strong>&nbsp;To allow a user to choose where to install your software, you cannot put software into multiple locations, although you can specify a directory hierarchy in the package that can be installed, in its entirety, into an existing directory.</p><p></p></div><p>If you follow these two requirements, Installer will allow the user to choose where to install your software. Installer assembles paths based on the mountpoint of the selected volume, plus the location selected by the user, plus the paths in the structure in your <code>Package_contents</code> directory.</p><p>Note, however, that the user’s choice of location may be constrained in several other ways:</p><ul class="spaceabove"><li class="li"><p>You can require that the installation be on the root volume (the one with the running system) with the Root Volume Only checkbox shown in <span class="content_text">Figure 1</span>.</p></li><li class="li"><p>You can require that the user have root or administrator privileges with the Authorization Action pop-up menu shown in <span class="content_text">Figure 1</span>. If the user does not have the required privileges and cannot authenticate to receive authorization, the installation is canceled.</p></li><li class="li"><p>Your package can include an InstallationCheck script that checks for various system requirements before allowing an installation to proceed.</p></li><li class="li"><p>Your package may include a VolumeCheck script that checks each volume and disallows installation on any volume that doesn’t meet your criteria.</p></li></ul><a name="//apple_ref/doc/uid/20001764-1020776" title="Choosing the Location for a Metapackage"></a><a name="//apple_ref/doc/uid/20001764-1020776-TPXREF9" title="Choosing the Location for a Metapackage"></a><h3>Choosing the Location for a Metapackage</h3><p>When you combine individual packages in a metapackage, the user will be able to choose a destination if any of the individual packages is relocatable. If this is the case, the user will be able to choose only one destination for all relocatable packages they install, not separate destinations for each relocatable package; installed packages that are not relocatable will not be relocated. Note, however, that prior to Mac OS X version 10.3.4, relocation did not work reliably for metapackages.</p><a name="//apple_ref/doc/uid/20001764-1012136" title="Create a Package With PackageMaker"></a><a name="//apple_ref/doc/uid/20001764-1012136-CHDGFBCC" title="Create a Package With PackageMaker"></a><h2>Create a Package With PackageMaker</h2><p>When you launch PackageMaker, it automatically opens an untitled package editor window. You can also choose File > New > Single Package to open a new package editor window.</p><p>When you have filled in all the desired information, choose File > Create Package (or Command-K) to create an installation package for your software. For convenience, you may want to save the package in the same directory where you created your <code>Package_contents</code> and <code>Install_resources</code> directories.</p><p>If a package is lacking required information (for example, you forgot to specify the location of the software files to include in the package), PackageMaker displays a warning and will not create the package. On success, PackageMaker displays a message that the package was assembled without any problems. However, there may still be problems with the package—see <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1015807">“Test the Package”</a></span> for more information.</p><p>You should also save the package definition file for your package. You can give it the same name as your package file and store it in the same directory. For example, you might have <code>MyGreatSoftware.pkg</code> and <code>MyGreatSoftware.pmsp</code>. Double-clicking the latter opens a package editor window for the former, where you can make changes and create an updated package.</p><a name="//apple_ref/doc/uid/20001764-1030016" title="Modify the Package for Special Processing"></a><a name="//apple_ref/doc/uid/20001764-1030016-CACHEGEF" title="Modify the Package for Special Processing"></a><h2>Modify the Package for Special Processing</h2><p>There are currently some installation features that are not available through the PackageMaker user interface. To take advantage of these features, you will have to directly modify files within the package. For information on these features, and on how to modify files in the package, see:</p><ul class="simple"><li><p><span class="content_text"><a href="sd_modify_install_ui.html#//apple_ref/doc/uid/20001766-1028687">“Supplying a Background Image”</a></span></p></li><li><p><span class="content_text"><a href="sd_pkg_flags.html#//apple_ref/doc/uid/20001940-TPXREF3">“Examining and Modifying Property Lists”</a></span></p></li><li><p><span class="content_text"><a href="sd_pkg_flags.html#//apple_ref/doc/uid/20001940-1015695">“Other Keys You Might Want to Modify”</a></span></p></li><li><p><span class="content_text"><a href="sd_find_file.html#//apple_ref/doc/uid/20001941-CIAHIEAF">“Finding Previously Installed Software”</a></span></p></li><li><p><span class="content_text"><a href="sd_spec_install_req.html#//apple_ref/doc/uid/20001949-TPXREF4">“Specifying Installation Requirements”</a></span></p></li></ul><a name="//apple_ref/doc/uid/20001764-1015807" title="Test the Package"></a><a name="//apple_ref/doc/uid/20001764-1015807-TPXREF10" title="Test the Package"></a><h2>Test the Package</h2><p>When you have successfully created an installation package, you’ll naturally want to test it by attempting to install the software. If PackageMaker did not report any errors, the package should be valid, but there may still be problems, or modifications you’ll want to make to the package.</p><p>Double-clicking a package launches Installer. If Installer detects an invalid package, it displays an error message and stops the installation. This is an early and useful aid in debugging a package.</p><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/20001764-DontLinkElementID_10" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;When an installation is canceled during testing, Installer remains open with its current (invalid) state, so you should be sure to quit Installer before further testing. Otherwise, you can modify the package, test again, and see the same error because of the saved state.</p><p></p><div class="clear"></div></div><p>In addition to the testing information in the following sections, see <span class="content_text"><a href="sd_trouble_shooting.html#//apple_ref/doc/uid/20001946-TPXREF8">“Troubleshooting Packages and Installation.”</a></span></p><a name="//apple_ref/doc/uid/20001764-1021220" title="Viewing the Installer Log and Script Output"></a><a name="//apple_ref/doc/uid/20001764-1021220-CACCABGI" title="Viewing the Installer Log and Script Output"></a><h3>Viewing the Installer Log and Script Output</h3><p>Another important testing aid is the Installer Log window, in which Installer displays a log of various operations it performs. Even if an installation appears to complete successfully, there may be information in the Installer Log window revealing possible errors (such as permissions problems). And even when Installer displays an error alert, information in the log window may elaborate on the alert.</p><p>To open the log window, choose File > Show Log. The Installer Log window has buttons for printing and saving its information. In addition, the log window displays output from the installation script files described in <span class="content_text"><a href="sd_pre_post_processing.html#//apple_ref/doc/uid/20001945-TPXREF8">“Modifying an Installation With Scripts.”</a></span></p><p>Output for the InstallationCheck and VolumeCheck scripts (described in <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-TPXREF6">“Checking the Installation With InstallationCheck”</a></span><span class="content_text"><a href="sd_volume_check_ref.html#//apple_ref/doc/uid/20001944-TPXREF9">“Checking the Installation Volume With VolumeCheck”</a></span>) is directed to the Console window. The Console application is located in <code>/Applications/Utilities</code>.</p><p>Many of the previously mentioned scripts can halt execution by returning a non-zero value. When this happens, Installer will display an error message. However, you should again look for additional information in the appropriate places (the Installer Log window or Console window). In addition, if your scripts write progress or error information to a log file, you should check that file too.</p><a name="//apple_ref/doc/uid/20001764-1021154" title="Common Problems Found in Testing"></a><a name="//apple_ref/doc/uid/20001764-1021154-CHDFACBF" title="Common Problems Found in Testing"></a><h3>Common Problems Found in Testing</h3><p>Some of the common problems you may find when testing your package include the following:</p><ul class="spaceabove"><li class="li"><p>The software wasn’t installed where you expected.</p><p>See <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-1018763">“Specify the Installation Destination”</a></span></p></li><li class="li"><p>Installation halts with the message that a script or tool is not set executable and readable.</p><p>If you assemble a package with PackageMaker, it will automatically set correctly named scripts to be executable and readable. If you modify a package file directly, it’s your responsibility to ensure that the script file is both executable and readable.</p></li><li class="li"><p>Installation halts due to a permissions problem.</p><p>You may have specified an installation location for which the user doesn’t have sufficient permissions privileges, but you haven’t required Installer to request authorization. For more information, see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-TPXREF2">“Authorization, File Ownership, and Permissions”</a></span></p></li><li class="li"><p>A requested action didn’t occur, such as a request for authorization, or a restart on completion of the installation.</p><p>Open the package definition file (<code>.pmsp</code>) and verify that you did in fact specify the missing action. You can also examine the Installer Log and any script logs for clues as to what did actually happen.</p></li></ul>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_install_features.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_install_process.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_creating_package.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_creating_package.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_creating_package.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<html><head><title>Mac OS X
 Manual Page For msgcat(ntcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/ntcl/msgcat" title="Mac OS X
 Manual Page for msgcat(ntcl)"><a name="//apple_ref/doc/man/n/msgcat" title="Mac OS X
 Manual Page for msgcat(ntcl)"><!-- headerDoc=man; indexgroup=Section ntcl; uid="//apple_ref/doc/man/ntcl/msgcat"; name=msgcat(ntcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
msgcat(n)                                   Tcl Bundled Packages                                   msgcat(n)



____________________________________________________________________________________________________________

<b>NAME</b>
       msgcat - Tcl message catalog

<b>SYNOPSIS</b>
       <b>package</b> <b>require</b> <b>Tcl</b> <b>8.2</b>

       <b>package</b> <b>require</b> <b>msgcat</b> <b>1.3</b>

       <b>::msgcat::mc</b> <u>src-string</u> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <b>::msgcat::mcmax</b> <b>?</b><u>src-string</u> <u>src-string</u> <u>...</u>?

       <b>::msgcat::mclocale</b> ?<u>newLocale</u>?

       <b>::msgcat::mcpreferences</b>

       <b>::msgcat::mcload</b> <u>dirname</u>

       <b>::msgcat::mcset</b> <u>locale</u> <u>src-string</u> ?<u>translate-string</u>?

       <b>::msgcat::mcmset</b> <u>locale</u> <u>src-trans-list</u>

       <b>::msgcat::mcunknown</b> <u>locale</u> <u>src-string</u>
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       The  <b>msgcat</b>  package provides a set of functions that can be used to manage multi-lingual user inter-<font color="#ffffff" class="whiteout">faces.&nbsp;interfaces.</font>
       faces.  Text strings are defined in a ``message catalog'' which is independent from the  application,
       and which can be edited or localized without modifying the application source code.  New languages or
       locales are provided by adding a new file to the message catalog.

       Use of the message catalog is optional by any application or package, but is encouraged if the appli-<font color="#ffffff" class="whiteout">cation&nbsp;application</font>
       cation or package wishes to be enabled for multi-lingual applications.


<b>COMMANDS</b>
       <b>::msgcat::mc</b> <u>src-string</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
              Returns  a  translation  of  <u>src-string</u> according to the user's current locale.  If additional
              arguments past <u>src-string</u> are given, the <b>format</b> command is used to substitute  the  additional
              arguments in the translation of <u>src-string</u>.

              <b>::msgcat::mc</b>  will  search  the messages defined in the current namespace for a translation of
              <u>src-string</u>; if none is found, it will search in the parent of the current namespace, and so on
              until  it  reaches the global namespace.  If no translation string exists, <b>::msgcat::mcunknown</b>
              is called and the string returned from <b>::msgcat::mcunknown</b> is returned.

       <b>::msgcat::mc</b> is the main function used to localize an  application.   Instead  of  using  an  English
       string  directly, an application can pass the English string through <b>::msgcat::mc</b> and use the result.
       If an application is written for a single language in this fashion, then it is easy  to  add  support
       for additional languages later simply by defining new message catalog entries.

       <b>::msgcat::mcmax</b> <b>?</b><u>src-string</u> <u>src-string</u> <u>...</u>?
              Given  several  source  strings,  <b>::msgcat::mcmax</b> returns the length of the longest translated
              string.  This is useful when designing localized GUIs, which may require that all buttons, for
              example, be a fixed width (which will be the width of the widest button).

       <b>::msgcat::mclocale</b> ?<u>newLocale</u>?
              This  function  sets  the locale to <u>newLocale</u>.  If <u>newLocale</u> is omitted, the current locale is
              returned, otherwise the current locale is set to <u>newLocale</u>.  msgcat stores  and  compares  the
              locale  in a case-insensitive manner, and returns locales in lowercase.  The initial locale is
              determined by the locale specified in the user's environment.  See <b>LOCALE</b> <b>SPECIFICATION</b>  below
              for a description of the locale string format.

       <b>::msgcat::mcpreferences</b>
              Returns  an  ordered  list  of the locales preferred by the user, based on the user's language
              specification.  The list is ordered from most specific  to  least  preference.   The  list  is
              derived  from the current locale set in msgcat by <b>msgcat::mclocale</b>, and cannot be set indepen-<font color="#ffffff" class="whiteout">dently.&nbsp;independently.</font>
              dently.  For example, if the current locale is en_US_funky, then <b>msgcat::mcpreferences</b> returns
              {en_US_funky en_US en}.

       <b>::msgcat::mcload</b> <u>dirname</u>
              Searches  the specified directory for files that match the language specifications returned by
              <b>::msgcat::mcpreferences</b> (note that these are all lowercase), extended by  the  file  extension
              ``.msg''.   Each matching file is read in order, assuming a UTF-8 encoding.  The file contents
              are then evaluated as a Tcl script.  This means that Unicode characters may be present in  the
              message file either directly in their UTF-8 encoded form, or by use of the backslash-u quoting
              recognized by Tcl evaluation.  The number of message files which matched the specification and
              were loaded is returned.

       <b>::msgcat::mcset</b> <u>locale</u> <u>src-string</u> ?<u>translate-string</u>?
              Sets  the  translation for <u>src-string</u> to <u>translate-string</u> in the specified <u>locale</u> and the cur-<font color="#ffffff" class="whiteout">rent&nbsp;current</font>
              rent namespace.  If <u>translate-string</u> is not specified, <u>src-string</u> is used for both.  The func-<font color="#ffffff" class="whiteout">tion&nbsp;function</font>
              tion returns <u>translate-string</u>.

       <b>::msgcat::mcmset</b> <u>locale</u> <u>src-trans-list</u>
              Sets the translation for multiple source strings in <u>src-trans-list</u> in the specified <u>locale</u> and
              the current namespace.  <u>src-trans-list</u> must have an even number of elements and is in the form
              {<u>src-string</u> <u>translate-string</u> ?<u>src-string</u> <u>translate-string</u> <u>...</u>?} <b>msgcat::mcmset</b> can be signifi-<font color="#ffffff" class="whiteout">cantly&nbsp;significantly</font>
              cantly faster than multiple invocations of <b>msgcat::mcset</b>. The function returns the  number  of
              translations set.

       <b>::msgcat::mcunknown</b> <u>locale</u> <u>src-string</u>
              This  routine  is  called by <b>::msgcat::mc</b> in the case when a translation for <u>src-string</u> is not
              defined in the current locale.  The default action is to return  <u>src-string</u>.   This  procedure
              can  be  redefined  by  the  application,  for  example to log error messages for each unknown
              string.  The <b>::msgcat::mcunknown</b> procedure is invoked at the same stack context as the call to
              <b>::msgcat::mc</b>.   The  return  value  of <b>::msgcat::mcunknown</b> is used as the return value for the
              call to <b>::msgcat::mc</b>.


<b>LOCALE</b> <b>SPECIFICATION</b>
       The locale is specified to <b>msgcat</b> by a locale string passed to <b>::msgcat::mclocale</b>.  The locale string
       consists  of  a  language  code, an optional country code, and an optional system-specific code, each
       separated by ``_''.  The country and language codes are specified in standards ISO-639 and  ISO-3166.
       For example, the locale ``en'' specifies English and ``en_US'' specifies U.S. English.

       When  the  msgcat package is first loaded, the locale is initialized according to the user's environ-<font color="#ffffff" class="whiteout">ment.&nbsp;environment.</font>
       ment.  The variables <b>env(LC_ALL)</b>, <b>env(LC_MESSAGES)</b>, and <b>env(LANG)</b> are examined in order.   The  first
       of  them  to  have  a  non-empty  value is used to determine the initial locale.  The value is parsed
       according to the XPG4 pattern
              language[_country][.codeset][@modifier]
       to extract its parts.  The initial locale is then set by calling <b>msgcat::mclocale</b> with the argument
              language[_country][_modifier]
       On Windows, if none of those environment variables is set, msgcat  will  attempt  to  extract  locale
       information  from  the registry.  If all these attempts to discover an initial locale from the user's
       environment fail, msgcat defaults to an initial locale of ``C''.

       When a locale is specified by the user, a ``best match'' search is performed during  string  transla-<font color="#ffffff" class="whiteout">tion.&nbsp;translation.</font>
       tion.   For  example,  if  a  user specifies en_GB_Funky, the locales ``en_GB_Funky'', ``en_GB'', and
       ``en'' are searched in order until a matching translation string is found.  If no translation  string
       is available, then <b>::msgcat::unknown</b> is called.


<b>NAMESPACES</b> <b>AND</b> <b>MESSAGE</b> <b>CATALOGS</b>
       Strings  stored  in  the  message  catalog  are stored relative to the namespace from which they were
       added.  This allows multiple packages to use the same strings without fear of collisions  with  other
       packages.  It also allows the source string to be shorter and less prone to typographical error.

       For example, executing the code
              mcset en hello "hello from ::"
              namespace eval foo {mcset en hello "hello from ::foo"}
              puts [mc hello]
              namespace eval foo {puts [mc hello]}
       will print
              hello from ::
              hello from ::foo

       When  searching  for  a  translation  of a message, the message catalog will search first the current
       namespace, then the parent of the current namespace, and so on until the global namespace is reached.
       This allows child namespaces to "inherit" messages from their parent namespace.

       For example, executing (in the ``en'' locale) the code
              mcset en m1 ":: message1"
              mcset en m2 ":: message2"
              mcset en m3 ":: message3"
              namespace eval ::foo {
                  mcset en m2 "::foo message2"
                  mcset en m3 "::foo message3"
              }
              namespace eval ::foo::bar {
                  mcset en m3 "::foo::bar message3"
              }
              puts "[mc m1]; [mc m2]; [mc m3]"
              namespace eval ::foo {puts "[mc m1]; [mc m2]; [mc m3]"}
              namespace eval ::foo::bar {puts "[mc m1]; [mc m2]; [mc m3]"}
       will print
              :: message1; :: message2; :: message3
              :: message1; ::foo message2; ::foo message3
              :: message1; ::foo message2; ::foo::bar message3


<b>LOCATION</b> <b>AND</b> <b>FORMAT</b> <b>OF</b> <b>MESSAGE</b> <b>FILES</b>
       Message files can be located in any directory, subject to the following conditions:

       [1]    All message files for a package are in the same directory.

       [2]    The  message file name is a msgcat locale specifier (all lowercase) followed by ``.msg''.  For
              example:
              es.msg    -- spanish
              en_gb.msg -- United Kingdom English

       [3]    The file contains a series of calls to <b>mcset</b> and <b>mcmset</b>,  setting  the  necessary  translation
              strings  for  the language, likely enclosed in a <b>namespace</b> <b>eval</b> so that all source strings are
              tied to the namespace of the package. For example, a short <b>es.msg</b> might contain:
              namespace eval ::mypackage {
                  ::msgcat::mcset es "Free Beer!" "Cerveza Gracias!"
              }


<b>RECOMMENDED</b> <b>MESSAGE</b> <b>SETUP</b> <b>FOR</b> <b>PACKAGES</b>
       If a package is installed into a subdirectory of the <b>tcl_pkgPath</b> and loaded via <b>package</b> <b>require</b>,  the
       following procedure is recommended.

       [1]    During package installation, create a subdirectory <b>msgs</b> under your package directory.

       [2]    Copy your *.msg files into that directory.

       [3]     Add the following command to your package initialization script:
              # load language files, stored in msgs subdirectory
              ::msgcat::mcload [file join [file dirname [info script]] msgs]


<b>POSITIONAL</b> <b>CODES</b> <b>FOR</b> <b>FORMAT</b> <b>AND</b> <b>SCAN</b> <b>COMMANDS</b>
       It  is possible that a message string used as an argument to <b>format</b> might have positionally dependent
       parameters that might need to be repositioned.  For example, it might be syntactically  desirable  to
       rearrange the sentence structure while translating.
              format "We produced %d units in location %s" $num $city
              format "In location %s we produced %d units" $city $num

       This can be handled by using the positional parameters:
              format "We produced %1\$d units in location %2\$s" $num $city
              format "In location %2\$s we produced %1\$d units" $num $city

       Similarly,  positional  parameters  can  be  used  with <b>scan</b> to extract values from internationalized
       strings.


<b>CREDITS</b>
       The message catalog code was developed by Mark Harrison.


<b>SEE</b> <b>ALSO</b>
       <a href="format.ntcl.html#//apple_ref/doc/man/n/format">format(n)</a>, <a href="scan.ntcl.html#//apple_ref/doc/man/n/scan">scan(n)</a>, <a href="namespace.ntcl.html#//apple_ref/doc/man/n/namespace">namespace(n)</a>, <a href="package.ntcl.html#//apple_ref/doc/man/n/package">package(n)</a>


<b>KEYWORDS</b>
       internationalization, i18n, localization, l10n, message, text, translation



msgcat                                               1.3                                           msgcat(n)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/mann/msgcat.ntcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/mann/msgcat.ntcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/mann/msgcat.ntcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><meta name="keywords" content="OpenRFPerm"><meta name="Description" content="Technical Note TB19: This note corrects an error in the description of the Resource Manager routine OpenRFPerm foundin Inside Macintosh Volume IV."><title>Technical Note TB19: OpenRFPerm: What your mother never told you</title>                                       <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Mar 28, 1988 - Apr 1, 1988"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002770" title="OpenRFPerm: What your mother never told you"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB19</div>
<div id="pageheadsub">OpenRFPerm: What your mother never told you</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This note corrects an error in the description of the Resource Manager routine<code>OpenRFPerm</code> found in <i>Inside Macintosh Volume IV</i></p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Apr 01 1988]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><H2>Introduction</h2><P>On page IV-17 in the Resource Manager chapter of <i>Inside Macintosh VolumeIV</i> it states, </p><p>"<code>OpenRFPerm</code>, like <code>OpenResFile</code>, will not open the specifiedfile twice; it simply returns the reference number already assigned to thefile. In other words, <code>OpenRFPerm</code>  cannot be used to open a secondaccess path to a resource file..."</p><p><b>This</b> <b>statement</b> <b>is</b> <b>incorrect.</b> <code>OpenRFPerm</code>behaves exactly as described if an application attempts to open a second accesspath, <b>with</b> <b>write</b> <b>access</b>, to a resource file withoutMultiFinder. With MultiFinder, however, if the second attempt comes from adifferent application than the one that originally opened the file<code>OpenRFPerm</code> <b>will</b> <b>not</b> return the reference number alreadyassigned to the file, instead it will return -1 and <code>ResError</code> will beset to <code>opWrErr</code> (-49). In fact in similar circumstances withMultiFinder, <code>OpenResFile</code> behaves the same way, returning -1 andsetting <code>ResError</code> to -49.</p><p>Note, however, that with or without MultiFinder, <code>OpenRFPerm</code><b>will</b> create multiple, unique, read-only access paths to a resource file.Using this feature is not safe and should be avoided since if a resource fileis opened twice, once with read-write permission and once with read-onlypermission then two copies of the resource map will exist in memory. If one ofthe resources in the file is changed and written to disk then the two maps willbecome inconsistent and the second access path will see what it thinks is atrashed resource file.</p><p>If you must use this technique for read-only access, only call<code>OpenRFPerm</code> when your application is ready to read information from thefile and close the file immediately afterwards. Otherwise you risk having theresource file change out from under your application.</p><P><A HREF="#top">Back to top</A></p><a name = "References"></a><h2>References</h2><P>The Resource Manager</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_19.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_19.html%3Fid%3DDTS10002770-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_19.html%3Fid%3DDTS10002770-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_19.html%3Fid%3DDTS10002770-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
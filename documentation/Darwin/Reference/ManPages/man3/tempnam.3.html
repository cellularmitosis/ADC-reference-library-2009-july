<html><head><title>Mac OS X
 Manual Page For tempnam(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/tempnam" title="Mac OS X
 Manual Page for tempnam(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/tempnam"; name=tempnam(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
TMPFILE(3)               BSD Library Functions Manual               <!-- a -->TMPFILE(3)<!-- /a -->

<b>NAME</b>
     <b>tempnam</b>, <b>tmpfile</b>, <b>tmpnam</b> -- temporary file routines

<b>LIBRARY</b>
     Standard C Library (libc, -lc)

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;stdio.h&gt;</b>

     <u>FILE</u> <u>*</u>
     <b>tmpfile</b>(<u>void</u>);

     <u>char</u> <u>*</u>
     <b>tmpnam</b>(<u>char</u> <u>*s</u>);

     <u>char</u> <u>*</u>
     <b>tempnam</b>(<u>const</u> <u>char</u> <u>*dir</u>, <u>const</u> <u>char</u> <u>*pfx</u>);

<b>DESCRIPTION</b>
     The <b>tmpfile</b>() function returns a pointer to a stream associated with a file descriptor returned by the
     routine <a href="mkstemp.3.html#//apple_ref/doc/man/3/mkstemp">mkstemp(3)</a>.  The created file is unlinked before <b>tmpfile</b>() returns, causing the file to be
     automatically deleted when the last reference to it is closed.  The file is opened with the access
     value `w+'.  If the environment variable TMPDIR is defined, the file is created in the specified direc-<font color="#ffffff" class="whiteout">tory.&nbsp;directory.</font>
     tory.  The default location, if TMPDIR is not set, is <u>/tmp</u>.

     The <b>tmpnam</b>() function returns a pointer to a file name, in the P_tmpdir directory, which did not refer-<font color="#ffffff" class="whiteout">ence&nbsp;reference</font>
     ence an existing file at some indeterminate point in the past.  P_tmpdir is defined in the include file
     &lt;<u>stdio.h&gt;</u>.  If the argument <u>s</u> is non-NULL, the file name is copied to the buffer it references.  Other-<font color="#ffffff" class="whiteout">wise,&nbsp;Otherwise,</font>
     wise, the file name is copied to a static buffer.  In either case, <b>tmpnam</b>() returns a pointer to the
     file name.

     The buffer referenced by <u>s</u> is expected to be at least L_tmpnam bytes in length.  L_tmpnam is defined in
     the include file &lt;<u>stdio.h&gt;</u>.

     The <b>tempnam</b>() function is similar to <b>tmpnam</b>(), but provides the ability to specify the directory which
     will contain the temporary file and the file name prefix.

     The environment variable TMPDIR (if set), the argument <u>dir</u> (if non-NULL), the directory P_tmpdir, and
     the directory <u>/tmp</u> are tried, in the listed order, as directories in which to store the temporary file.

     The argument <u>pfx</u>, if non-NULL, is used to specify a file name prefix, which will be the first part of
     the created file name.  The <b>tempnam</b>() function allocates memory in which to store the file name; the
     returned pointer may be used as a subsequent argument to <a href="free.3.html#//apple_ref/doc/man/3/free">free(3)</a>.

<b>RETURN</b> <b>VALUES</b>
     The <b>tmpfile</b>() function returns a pointer to an open file stream on success, and a NULL pointer on
     error.

     The <b>tmpnam</b>() and <b>tempfile</b>() functions return a pointer to a file name on success, and a NULL pointer on
     error.

<b>ERRORS</b>
     The <b>tmpfile</b>() function may fail and set the global variable <u>errno</u> for any of the errors specified for
     the library functions <a href="fdopen.3.html#//apple_ref/doc/man/3/fdopen">fdopen(3)</a> or <a href="mkstemp.3.html#//apple_ref/doc/man/3/mkstemp">mkstemp(3)</a>.

     The <b>tmpnam</b>() function may fail and set <u>errno</u> for any of the errors specified for the library function
     <a href="mktemp.3.html#//apple_ref/doc/man/3/mktemp">mktemp(3)</a>.

     The <b>tempnam</b>() function may fail and set <u>errno</u> for any of the errors specified for the library functions
     <a href="malloc.3.html#//apple_ref/doc/man/3/malloc">malloc(3)</a> or <a href="mktemp.3.html#//apple_ref/doc/man/3/mktemp">mktemp(3)</a>.

<b>SECURITY</b> <b>CONSIDERATIONS</b>
     The <b>tmpnam</b>() and <b>tempnam</b>() functions are susceptible to a race condition occurring between the selec-<font color="#ffffff" class="whiteout">tion&nbsp;selection</font>
     tion of the file name and the creation of the file, which allows malicious users to potentially over-<font color="#ffffff" class="whiteout">write&nbsp;overwrite</font>
     write arbitrary files in the system, depending on the level of privilege of the running program.  Addi-<font color="#ffffff" class="whiteout">tionally,&nbsp;Additionally,</font>
     tionally, there is no means by which file permissions may be specified.  It is strongly suggested that
     <a href="mkstemp.3.html#//apple_ref/doc/man/3/mkstemp">mkstemp(3)</a> be used in place of these functions.  (See the FSA.)

<b>COMPATIBILITY</b>
     These interfaces are provided from System V and ANSI compatibility only.

     Most historic implementations of these functions provide only a limited number of possible temporary
     file names (usually 26) before file names will start being recycled.  System V implementations of these
     functions (and of <a href="mktemp.3.html#//apple_ref/doc/man/3/mktemp">mktemp(3)</a>) use the <a href="../man2/access.2.html#//apple_ref/doc/man/2/access">access(2)</a> system call to determine whether or not the temporary
     file may be created.  This has obvious ramifications for setuid or setgid programs, complicating the
     portable use of these interfaces in such programs.

     The <b>tmpfile</b>() interface should not be used in software expected to be used on other systems if there is
     any possibility that the user does not wish the temporary file to be publicly readable and writable.

<b>SEE</b> <b>ALSO</b>
     <a href="mkstemp.3.html#//apple_ref/doc/man/3/mkstemp">mkstemp(3)</a>, <a href="mktemp.3.html#//apple_ref/doc/man/3/mktemp">mktemp(3)</a>

<b>STANDARDS</b>
     The <b>tmpfile</b>() and <b>tmpnam</b>() functions conform to ISO/IEC 9899:1990 (``ISO C90'').

BSD                            November 17, 1993                           BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/tempnam.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/tempnam.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/tempnam.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

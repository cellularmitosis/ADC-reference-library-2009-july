<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Handling International Character Sets with EOF</TITLE></HEAD><BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../index.html" target="_top">Documentation</a> <b>></b> <a href="../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.c.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.e.html"><img src="next.gif" border="0" alt="Next"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606143"> </A><A NAME="17967"> </A>Handling International Character Sets with EOF</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606144"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606145"> </A>Describes how to configure Enterprise Objects Framework (EOF) to handle international character sets with Oracle, Sybase, and Informix databases.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606146"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=616712"> </A>When using databases such as Oracle, Sybase, or Informix, you can configure EOF to handle the character set used in the database. If you don't configure it, your application may read and write incorrect characters from the database and display them incorrectly. For example, an unconfigured application will display &quot;il _tait une fois...&quot; instead of  &quot;il &eacute;tait une fois&quot;. Only strings with extended characters (ASCII code greater than 127) are affected.</P><P CLASS="Body"><A NAME="pgfId=616734"> </A>You can configure the character set to be used with EOF by adding information to the connection dictionary of your EOModel file under two keys.</P><P CLASS="Body"><A NAME="pgfId=616844"> </A>	The first key is <TT CLASS="Code">databaseEncoding</TT>. This key tells the foundation classes which encoding to use when it builds strings from char * strings. The possible values for this key can be found in the NSString class documentation in the paragraph about string encoding.</P><P CLASS="Body"><A NAME="pgfId=606152"> </A>	The name of the second key depends on the type of database. It tells the database client library what character set to use for sending or retrieving strings. For Oracle, the key name is <TT CLASS="Code">NLS_LANG</TT> and for Sybase it is <TT CLASS="Code">LC_ALL</TT>. For Informix you must specify two keys: <TT CLASS="Code">DB_LOCALE</TT> and <TT CLASS="Code">CLIENT_LOCALE</TT>.</P><P CLASS="Body"><A NAME="pgfId=606153"> </A>You can add these keys by using the model inspector inside EOModeler.</P><P CLASS="Body"><A NAME="pgfId=606155"> </A>The following are some examples of connection dictionaries</P><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=609644"> </A>Oracle<EM CLASS="Emphasis"> (Continued)</EM></H4><PRE CLASS="Code"><A NAME="pgfId=609620"> </A>databaseEncoding = &quot;ISO Latin-1&quot;; <A NAME="pgfId=622408"> </A>NLS_LANG = &quot;FRENCH_FRANCE.WE8ISO8859P1&quot;;</PRE><P CLASS="Body"><A NAME="pgfId=617707"> </A>.</P></DIV><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=609646"> </A>Sybase<EM CLASS="Emphasis"> (Continued)</EM></H4><PRE CLASS="Code"><A NAME="pgfId=609625"> </A>databaseEncoding = NEXTSTEP; <A NAME="pgfId=622425"> </A>LC_ALL = &quot;iso_1&quot;;</PRE></DIV><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=609648"> </A>Informix</H4><PRE CLASS="Code"><A NAME="pgfId=609630"> </A>databaseEncoding = &quot;ISO Latin-1&quot;; <A NAME="pgfId=622434"> </A>DB_LOCALE = &quot;en_us.8859-1&quot;; <A NAME="pgfId=622443"> </A>CLIENT_LOCALE = &quot;en_us.8859-1&quot;;</PRE><P CLASS="Body"><A NAME="pgfId=617713"> </A></P><P CLASS="Body"><A NAME="pgfId=606166"> </A>Refer to your database documentation to determine the character sets available in your configuration and the names of the environment variables.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606167"> </A>When to Configure</H3><P CLASS="Body"><A NAME="pgfId=606168"> </A>Your application will sometimes handle character sets correctly even if you haven't set the connection dictionary values because when no entries are found in the connection dictionary, EOF uses the environment variables defined in the system. However, it is best to set the values in the connection dictionary to avoid potential problems. For example, moving your application to another computer with different environment variables may cause it to fail.</P><P CLASS="Body"><A NAME="pgfId=606169"> </A>You should also configure the connection dictionary if your application uses a database shared with non-EOF applications. This guarantees that your data will be read and written correctly by those applications also.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606170"> </A>When the Connection Dictionary Values Are Used</H3><P CLASS="Body"><A NAME="pgfId=606171"> </A>The entries you specified in your EOModel file are used the first time EOF connects to the database. </P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606172"> </A>Databases With Mixed Encodings</H3><P CLASS="Body"><A NAME="pgfId=606173"> </A>Sometimes a database contains mixed encodings. This generally happens when different applications running on different platforms insert or modify values in a database. </P><P CLASS="Body"><A NAME="pgfId=606174"> </A>One solution to this problem is to use a custom value class to try to figure out and decode the characters at fetch time. You can supply a class with a factory method that takes bytes and a length as arguments. This custom class can try to figure out the correct character set and then create and return the correct string. The class-and-methods specification is done inside EOModeler by selecting the internal data type as Custom in the Attribute inspector, and filling all appropriate fields.</P><P CLASS="Body"><A NAME="pgfId=606175"> </A>Note: The custom value class must be written in Objective-C.</P></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606176"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606177"> </A><A HREF="ProgrammingTopics.c.html#34921" CLASS="XRef">Localizing a WebObjects Application</A></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606178"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606179"> </A>	How can I display strings from my database containing international characters?</LI><LI CLASS="Bulleted"><A NAME="pgfId=617750"> </A>Why are accentuated character strings incorrectly displayed in my interface?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606180"> </A>	Why can't other applications read data created from an EOF application?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606181"> </A>	Which property entries are available for handling character inside EOF?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606182"> </A>	How can EOF work with a database containing mixed encodings?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606183"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606184"> </A>Localization</LI><LI CLASS="Bulleted"><A NAME="pgfId=617751"> </A>Character</LI><LI CLASS="Bulleted"><A NAME="pgfId=606185"> </A>Connection</LI><LI CLASS="Bulleted"><A NAME="pgfId=622484"> </A>Dictionary</LI><LI CLASS="Bulleted"><A NAME="pgfId=606186"> </A>Oracle</LI><LI CLASS="Bulleted"><A NAME="pgfId=606187"> </A>Sybase</LI><LI CLASS="Bulleted"><A NAME="pgfId=606188"> </A>Informix</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606189"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606190"> </A>10 July 1998. St&eacute;phane Lunati. First Draft.<BR>26 July 1998. St&eacute;phane Lunati. Added databases and mixed encodings.<BR>18 November 1998. Clif Liu. Second Draft.</P></DIV><hr alt="">&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.c.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.e.html"><img src="next.gif" border="0" alt="Next"></A><!-- start of footer --><!--#include file="footer" --><!-- end of footer --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
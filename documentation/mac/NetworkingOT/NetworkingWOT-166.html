<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTSndUData</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING166></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-165.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-167.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-127.html"><B>Chapter 22 - Endpoints Reference</B></A> / <A HREF="NetworkingWOT-146.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-165.html"><B>Functions for Connectionless Transactionless Endpoints</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING166-0></A>
<H3><A NAME=MARKER-9-172></A>OTSndUData</H3>
 Sends data using a connectionless transactionless endpoint.<P>
<A NAME=HEADING166-2></A>
<H5>C INTERFACE</H5>
<PRE>
<A NAME=MARKER-11-173></A>OSStatus OTSndUData(EndpointRef ref,
                     TUnitData* udata);
</PRE>
<A NAME=HEADING166-4></A>
<H5>C++ INTERFACE</H5>
<PRE>
<A NAME=MARKER-12-174></A>OSStatus TEndpoint::SndUData(TUnitData* udata);
</PRE>
<A NAME=HEADING166-6></A>
<H5>PARAMETERS</H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The endpoint reference of the endpoint sending the data.<P>
<DT><CODE>udata</CODE>
<DD> A pointer to a <A HREF=NetworkingWOT-373.html#MARKER-9-38><CODE>TUnitData</CODE></A> structure that specifies the data to be sent, its destination, and any options for this send.<P>
<DT>
<DD> The <CODE>udata-&gt;addr.buf</CODE> field is a pointer to a buffer that contains the address to which the data is sent. You must initialize the buffer, and set the <CODE>udata-&gt;addr.len </CODE>field to the size of the address.<P>
<DT>
<DD> The <CODE>udata-&gt;opt.buf</CODE> field is a pointer to a buffer that contains option information. Store option information in the buffer and set the <CODE>udata-&gt;opt.len</CODE> field to the size of the options. If you do not want to specify any options, set this field to 0.<P>
<DT>
<DD> The <CODE>udata-&gt;udata.buf</CODE> field is a pointer to a buffer that contains data to be sent. Set the <CODE>udata-&gt;udata.len</CODE> field to the size of the data.<P>
<DT><I>function result</I>
<DD> An error code. See Discussion.
</DL>
<A NAME=HEADING166-13></A>
<H5>DISCUSSION</H5>
 The <CODE>OTSndUData</CODE> function sends data to the address specified by the <CODE>udata-&gt;addr</CODE> field of the <CODE>udata</CODE> parameter. If the endpoint does not support sending 0 bytes or if the amount of data exceeds the TSDU size for the endpoint, the function returns with the result <CODE>kOTBadDataErr</CODE>.<P>
 If the endpoint is in synchronous blocking mode, the <CODE>OTSndUData</CODE> function returns when the send is complete. If flow-control restrictions prevent its sending the data, it retries the operation until it is able to send it.<P>
 If the endpoint is in nonblocking or asynchronous mode, the <CODE>OTSndUData</CODE> function returns a <CODE>kOTFlowErr</CODE> result if flow-control restrictions prevent the data from being sent. When the endpoint provider is able to send the data, it sends your notifier function, a <CODE>T_GODATA</CODE> event. You can then call the <CODE>OTSndUData</CODE> function from your notifier to send the data. You can also retrieve this event by polling the endpoint using the <A HREF=NetworkingWOT-156.html#MARKER-9-143><CODE>OTLook</CODE></A> function.<P>
 The next table shows how the endpoint's modes of operation and blocking status affects the behavior of the <CODE>OTSndUData</CODE> function.<P>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>&nbsp;<TH>Blocking<TH>Nonblocking<TR>
<TD>Synchronous<TD>The function returns when the provider lifts flow-control restrictions.<TD>The function returns immediately.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result is never returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TR>
<TD>Asynchronous&nbsp;&nbsp;<TD>The function returns immediately.<TD>The function returns immediately.<TR>
<TD>&nbsp;<TD>The <CODE>kOTFlowErr</CODE> result might be returned.<TD>The <CODE>kOTFlowErr</CODE> result might be returned.</TABLE>
<P>
<A NAME=HEADING166-18></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Some endpoint providers are not able to detect immediately whether you specified incorrect address or option information. Because of this, the provider calls your notifier function when it detects the error, passing the <CODE>T_UDERR</CODE> event code for the <CODE>code</CODE> parameter to advise you that an error has occurred. You can determine the cause of this event by calling the <A HREF=NetworkingWOT-167.html#MARKER-9-175><CODE>OTRcvUDErr</CODE></A> function and examining the value of the <CODE>uderr-&gt;error</CODE> parameter. It is important that you call the <CODE>OTRcvUDErr</CODE> function even if you are not interested in examining the cause of the error. Failing to do this leaves the endpoint in a state where it cannot do other sends, nor deallocate memory reserved for internal buffers associated with the send.<P>
 The <CODE>XTI_SNDLOWAT</CODE> option allows endpoints that support it to negotiate the minimum number of bytes that must have accumulated in the endpoint's internal send buffer before they are sent. See <A HREF=NetworkingWOT-37.html#MARKER-9-21>"Option Management"</A> for information on setting this option.<P>
<A NAME=HEADING166-21></A>
<H5>SEE ALSO</H5>
 The <A HREF=NetworkingWOT-168.html#MARKER-9-178><CODE>OTRcvUData</CODE></A> function.<P>
 <A HREF=NetworkingWOT-414.html#MARKER-9-27>"AppleTalk Reference"</A>.<P>
 <A HREF=NetworkingWOT-27.html#MARKER-9-12>Table 4-4</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-165.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-167.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Providing Help Balloons for Static Windows (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING150></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-149.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-151.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-138.html"><B>Chapter 3 - Help Manager</B></A> / <A HREF="MoreToolbox-143.html"><B>Using the Help Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING150-0></A>
<H2><A NAME=MARKER-9-276></A><A NAME=MARKER-21-277></A>Providing Help Balloons for Static Windows</H2>
 <A NAME=MARKER-9-120></A><A NAME=MARKER-9-192></A><A NAME=MARKER-2-255></A>To provide help balloons for the static windows of your application without modifying its code, create a resource of type <CODE>'hwin'</CODE> (window help) and additional resources of type <CODE>'hrct'</CODE> (rectangle help) or <CODE>'hdlg'</CODE> (dialog-item help). With these resources, the Help Manager automatically tracks the cursor and displays and removes help balloons as the cursor moves into and out of the hot rectangles associated with these resources.<P>
 The <CODE>'hwin'</CODE> resource allows you to associate <CODE>'hrct'</CODE> and <CODE>'hdlg'</CODE> resources with your static windows. You use the <CODE>'hrct'</CODE> and <CODE>'hdlg'</CODE> resources to define help balloons for the individual objects within your windows. While the Help Manager uses the display rectangles defined in the item list resource as the hot rectangles for <CODE>'hdlg'</CODE> resources, you can specify your own hot rectangles for alert boxes and dialog boxes and other static windows by using <CODE>'hrct'</CODE> resources.<P>
<DL>
<DT><B>Note</B>
<DD>BalloonWriter gives nonprogrammers an easy, intuitive way to create help balloons for static windows and dialog and alert boxes. BalloonWriter creates <CODE>'hdlg'</CODE>, <CODE>'hwin'</CODE>, and <CODE>'hrct'</CODE> resources as appropriate and places them in the resource file of your application; BalloonWriter likewise creates and stores <CODE>'STR '</CODE>, <CODE>'STR#'</CODE>, and <CODE>'TEXT'</CODE> resources that contain the help messages authored by nonprogramming writers.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 You use an <CODE>'hrct'</CODE> resource to specify tip coordinates, hot rectangles, balloon definition functions, variation codes, and help messages for areas within a static window.<P>
 As explained in <A HREF=MoreToolbox-148.html#MARKER-9-227>"Providing Help Balloons for Items in Dialog Boxes and Alert Boxes" on page 3-47</A>, you use the <CODE>'hdlg'</CODE> resource to specify the tip, alternate rectangle, and help messages for items in an alert box or dialog box. <A HREF=MoreToolbox-148.html#MARKER-9-263>"Adding a Help Item to an Item List Resource" on page 3-57</A> describes how to associate either an <CODE>'hdlg'</CODE> or an <BR><CODE>'hrct'</CODE> resource with an alert box or a dialog box by adding an item of type <CODE>HelpItem</CODE> to the box's item list resource. This section describes how you can instead treat your dialog boxes or alert boxes as static windows and use an <CODE>'hwin'</CODE> resource instead of <CODE>HelpItem</CODE> items to associate <CODE>'hdlg'</CODE> and <CODE>'hrct'</CODE> resources with the boxes.<A NAME=MARKER-2-128></A><A NAME=MARKER-2-103></A><P>
 <A NAME=MARKER-9-99></A>The <CODE>'hwin'</CODE> resource identifies windows by their titles or by their <CODE>windowKind</CODE> values. You can list all of your windows within one <CODE>'hwin'</CODE> resource, or you can create separate <CODE>'hwin'</CODE> resources for your separate windows. (You'll probably find it easier to maintain your window help if you create only one <CODE>'hwin'</CODE> resource, but, as described later in this section, you must create separate <CODE>'hwin'</CODE> resources for windows that require different options. For example, one window may be matched to its <CODE>'hwin'</CODE> resource by a string <I>anywhere</I> in the window's title, and another window may be matched to its <CODE>'hwin'</CODE> resource only by the <I>exact</I> string of the window's title.) An <CODE>'hwin'</CODE> resource contains <BR>the resource ID (or IDs) of one or more <CODE>'hrct'</CODE> or <CODE>'hdlg'</CODE> resources. With an <CODE>'hwin'</CODE> resource, you can use both <CODE>'hrct'</CODE> and <CODE>'hdlg'</CODE> resources for various parts of the same window.<P>
 To use an <CODE>'hwin'</CODE> resource, the window's window record must specify either a title <BR>or a <CODE>windowKind</CODE> value that adequately distinguishes it from other windows. <BR>Within an <CODE>'hwin'</CODE> resource, you could identify the Verb Tenses window shown in <BR><A HREF=MoreToolbox-151.html#MARKER-9-318>Figure 3-20 on page 3-67</A> by its title, and you could identify the palette window <BR>in <A HREF=MoreToolbox-151.html#MARKER-9-307>Figure 3-19 on page 3-65</A> by its <CODE>windowKind</CODE> value.<P>
 The chapter "Window Manager" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> describes the <CODE>windowKind</CODE> field of the window record. Note that <CODE>windowKind</CODE> values of 0, 1, and 3 through 7 are reserved by system software and that dialog boxes or alert boxes must have a value of 2. Because your dialog boxes and alert boxes must have a <CODE>windowKind</CODE> value of 2, you can use this value to define only one <CODE>'hwin'</CODE> resource for all untitled dialog boxes and alert boxes. You may find it difficult--using <CODE>'hwin'</CODE>, <CODE>'hrct'</CODE>, and <CODE>'hdlg'</CODE> resources alone--to provide help balloons for untitled dialog and alert boxes. However, you can use an <CODE>'hwin'</CODE> resource to associate generic help for the common objects of all your untitled dialog boxes and alert boxes, and you can use the <CODE>HMSetDialogResID</CODE> function to provide help for the unique objects among them. <BR>The <CODE>HMSetDialogResID</CODE> function is explained on <A HREF=MoreToolbox-182.html#MARKER-9-492>page 3-110</A>.<A NAME=MARKER-2-284></A><P>
 <A NAME=MARKER-9-111></A>You describe the tip, a rectangle, and help messages for each object in static windows using either <CODE>'hrct'</CODE> or <CODE>'hdlg'</CODE> resources. As shown here, an <CODE>'hrct'</CODE> resource consists of two types of components: a header component and a hot-rectangle component. You use <B>hot-rectangle components</B> to specify the hot rectangles within the window and the help messages for each hot rectangle. (For a description of <CODE>'hdlg'</CODE> resources, see <A HREF=MoreToolbox-148.html#MARKER-9-227>"Providing Help Balloons for Items in Dialog Boxes and Alert Boxes" beginning on page 3-47</A>.)<A NAME=MARKER-2-100></A>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Component<TH>Element<TR>
<TD rowspan=4>Header<TD>Help Manager version<TR>
<TD>Options<TR>
<TD>Balloon definition function<TR>
<TD>Variation code<TR>
<TD rowspan=4>First hot rectangle<TD>Identifier for help message<TR>
<TD>Tip's coordinates<TR>
<TD>Hot rectangle coordinates<TR>
<TD>Help message for hot rectangle<TR>
<TD rowspan=4>Next hot rectangle<TD>(Same as for first hot rectangle)<TR>
<TD>.<TR>
<TD>.<TR>
<TD>.<A NAME=MARKER-2-143></A><TR>
<TD>Last hot rectangle<TD>(Same as for first hot rectangle)</TABLE>
<P>
<A NAME=HEADING150-10></A>
<H3>Specifying Header Information for the 'hrct' Resource</H3>
 As with the other help resources, specify the <CODE>HelpMgrVersion</CODE> constant for the first element of the header component of the <CODE>'hrct'</CODE> resource. For the second element, specify a constant (normally, <CODE>hmDefaultOptions</CODE>) or the sum of several constants' values from the following list. (<A HREF=MoreToolbox-146.html#MARKER-9-146>"Specifying Options in Help Resources" beginning on page 3-22</A> describes these options.)<A NAME=MARKER-2-239></A><P>
<PRE>
CONST hmDefaultOptions     = 0;  {use defaults}
      hmUseSubID           = 1;  {use subrange resource IDs }
                                 { for owned resources}
      hmAbsoluteCoords     = 2;  {ignore coords of window }
                                 { origin and treat upper-left }
                                 { corner of window as 0,0}
      hmSaveBitsNoWindow   = 4;  {don't create window; save }
                                 { bits; no update event}
      hmSaveBitsWindow     = 8;  {save bits behind window }
                                 { and generate update event}
</PRE>
 Specify the balloon definition function and the variation code (both typically 0) in the third and fourth elements, respectively, of the header component. (The balloon definition function and the variation code are described in detail in <A HREF=MoreToolbox-147.html#MARKER-9-171>"Specifying Header Information for the 'hmnu' Resource" on page 3-29</A>.)<P>
<A NAME=HEADING150-14></A>
<H3><A NAME=MARKER-9-288></A>Specifying Help for Rectangles in Windows</H3>
 Following the header component, use hot-rectangle components to specify tip coordinates, hot rectangles, and help messages for all the areas in the window that would benefit from having help balloons.<P>
 For the first element of each hot-rectangle component, specify the format that the help messages take. As with the other help resources, specify the format using one of these identifiers: <CODE>HMStringItem</CODE>, <CODE>HMSTRResItem</CODE>, <CODE>HMStringResItem</CODE>, <CODE>HMPictItem</CODE>, <CODE>HMTEResItem</CODE>, or <CODE>HMSkipItem</CODE>, described in <A HREF=MoreToolbox-145.html#MARKER-9-122>"Specifying the Format for Help Messages" on page 3-21</A>.<P>
 Use the second element of the hot-rectangle component to specify the coordinates (local to the window) of the balloon tip. Use the third element to specify the coordinates <BR>(local to the window) of the hot rectangle. Use the fourth element to specify your help message, as either a text string or a resource ID.  <A NAME=MARKER-2-251></A> <P>
 In a hot-rectangle component, you specify the tip, hot rectangle, and help message for every applicable area in the window. As explained in <A HREF=MoreToolbox-148.html#MARKER-9-263>"Adding a Help Item to an Item List Resource" on page 3-57</A>, you can associate an <CODE>'hrct'</CODE> resource with an alert box or a dialog box by adding an item of type <CODE>HelpItem</CODE> to the box's item list resource. For windows, you create an <CODE>'hwin'</CODE> resource that contains the resource ID of this <CODE>'hrct'</CODE> resource and that associates the <CODE>'hrct'</CODE> resource with the window. In either case, the Help Manager automatically tracks the cursor and displays and removes help balloons as the user moves the cursor into and out of the hot rectangles defined in this <CODE>'hrct'</CODE> resource.<P>
 If you need to supply a help balloon for an area within a larger area that needs a different help balloon, create <CODE>'hrct'</CODE> resources for both the inner and outer areas and specify their areas as hot rectangles. In your resource file, list the <CODE>'hrct'</CODE> resource <BR>for the inner area before the <CODE>'hrct'</CODE> resource for the outer area. Then, when the cursor is in the inner hot rectangle, the Help Manager scans its <CODE>'hrct'</CODE> resource first and displays its help balloon instead of the help balloon for the outer hot rectangle. When the cursor moves from the inner hot rectangle to the outer, the Help Manager removes the inner area's help balloon and displays the balloon for the outer hot rectangle.<P>
 <A NAME=MARKER-9-22></A>As previously explained, you can create an <CODE>'hdlg'</CODE> resource to specify the tips, alternate rectangles, balloon definitions, variation codes, and help messages for items in an item list resource, and you can use an <CODE>'hwin'</CODE> resource to associate that <CODE>'hdlg'</CODE> resource with a dialog box or alert box. When help is enabled and your application calls the Dialog Manager routine <CODE>ModalDialog</CODE>, <CODE>IsDialogEvent</CODE>, <CODE>Alert</CODE>, <CODE>NoteAlert</CODE>, <CODE>CautionAlert</CODE>, or <CODE>StopAlert</CODE>, the Help Manager automatically tracks the cursor and displays and removes help balloons for items specified in the <CODE>'hdlg'</CODE> resource.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-149.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-151.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

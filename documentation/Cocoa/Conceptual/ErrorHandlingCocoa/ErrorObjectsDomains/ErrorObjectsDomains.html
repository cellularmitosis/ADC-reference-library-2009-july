<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Error Handling Programming Guide For Cocoa: Error Objects, Domains, and Codes</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Error Objects, Domains, and Codes"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001806-CH202" title="Error Objects, Domains, and Codes"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../ErrorHandling/ErrorHandling.html#//apple_ref/doc/uid/TP40001806-CH201-SW1">Error Handling Programming Guide For Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ErrorHandling/ErrorHandling.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ErrorRespondRecover/ErrorRespondRecover.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001806-CH202-CJBGAIBJ" title="Error Objects, Domains, and Codes"></a><h1>Error Objects, Domains, and Codes</h1><p><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_71"></a>Cocoa programs use NSError objects to convey information about runtime errors that users need to be informed about. In most cases, a program displays this error information in a dialog or sheet. But it may also interpret the information and either ask the user to attempt to recover from the error or attempt to correct the error on its own. </p><p>The core attributes of an NSError object—or, simply, an error object—are an error domain, a domain-specific error code, and a “user info” dictionary containing objects related to the error, most significantly description and recovery strings. This chapter explains the reason for error objects, describes their attributes, and discusses how you use them in Cocoa code.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ErrorObjectsDomains.html#//apple_ref/doc/uid/TP40001806-CH202-BBCBECJD">Why Have Error Objects?</a>
				
			<br/>
			
        
			
			
				<a href="ErrorObjectsDomains.html#//apple_ref/doc/uid/TP40001806-CH202-SW1">Error Domains</a>
				
			<br/>
			
        
			
			
				<a href="ErrorObjectsDomains.html#//apple_ref/doc/uid/TP40001806-CH202-SW2">Error Codes</a>
				
			<br/>
			
        
			
			
				<a href="ErrorObjectsDomains.html#//apple_ref/doc/uid/TP40001806-CH202-SW3">The User Info Dictionary</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001806-CH202-BBCBECJD" title="Why Have Error Objects?"></a><h2>Why Have Error Objects?</h2><p>Because they are objects, instances of the NSError<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_72"></a> class have several advantages over simple error codes and error strings. They encapsulate several pieces of error information at once, including localized error strings of various kinds. NSError objects can also be archived and copied, and they can be passed around in an application and modified. And although NSError is not an abstract class (and thus can be used directly) you can extend the NSError class<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_73"></a> through subclassing.</p><p>Because of the notion of layered error domains, NSError objects can embed errors from underlying subsystems and thus provide more detailed and nuanced information about an error. Error objects also provide a mechanism for error recovery by holding a reference to an object designated as the recovery attempter for the error.</p><a name="//apple_ref/doc/uid/TP40001806-CH202-SW1" title="Error Domains"></a><h2>Error Domains</h2><p>For largely historical reasons, errors codes in Mac OS X are segregated into domains<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_74"></a>. For example, Carbon error codes<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_75"></a>, which are typed as <code>OSStatus</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_76"></a>, have their origin in versions of the Macintosh operating system predating Mac OS X. On the other hand, POSIX error codes<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_77"></a> derive from the various POSIX-conforming “flavors” of UNIX, such as BSD. The Foundation framework declares in <code>NSError.h</code> the following string constants for the four major error domains:</p><ul class="simple"><li><p><code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSMachErrorDomain" target="_top">NSMachErrorDomain</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_78"></a></p></li><li><p><code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSPOSIXErrorDomain" target="_top">NSPOSIXErrorDomain</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_79"></a></p></li><li><p><code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOSStatusErrorDomain" target="_top">NSOSStatusErrorDomain</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_80"></a></p></li><li><p><code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSCocoaErrorDomain" target="_top">NSCocoaErrorDomain</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_81"></a></p></li></ul><p>The above sequence of domain constants indicates the general layering of the domains, with the Mach error domain at the lowest layer. You get the domain of an error by sending an NSError object a <code>domain</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_82"></a> message.</p><p>In addition to the four major domains, there are error domains that are specific to frameworks or even to groups of classes or individual classes. For example, the Web Kit framework has its own domain for errors in its Objective-C implementation, <code><a href="../../../Reference/WebKit/Miscellaneous/WebKit_Constants/Reference/reference.html#//apple_ref/doc/c_ref/WebKitErrorDomain" target="_top">WebKitErrorDomain</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_83"></a>. Within the Foundation framework, the URL classes have their own error domain (<code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSURLErrorDomain" target="_top">NSURLErrorDomain</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_84"></a>) as do the XML classes (<code><a href="../../../Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSXMLParserErrorDomain" target="_top">NSXMLParserErrorDomain</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_85"></a>). The NSStream class itself defines two error domains, one for SSL errors and the other for SOCKS errors.</p><p>The Cocoa error domain<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_86"></a> (<code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSCocoaErrorDomain" target="_top">NSCocoaErrorDomain</a></code>) includes all error codes for the Cocoa frameworks—except, of course, for error codes in class-specific domains of those frameworks. These frameworks include not only Foundation and Application Kit, but Core Data and potentially other Objective-C frameworks. (Error domains within the Cocoa frameworks that are separate from the Cocoa error domain were defined before the latter was introduced.)</p><p>Domains<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_87"></a> serve several useful purposes. They give Cocoa programs a way to identify the Mac OS X subsystem that is detecting an error. They also help to prevent collisions between error codes from different subsystems with the same numeric value. In addition, domains allow for a causal relationship between error codes based on the layering of subsystems; for example, an error in the <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSOSStatusErrorDomain" target="_top">NSOSStatusErrorDomain</a></code> may have an underlying error in the <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSMachErrorDomain" target="_top">NSMachErrorDomain</a></code>.</p><p>You can create your own error domains and error codes for use in your own frameworks, or even in your own applications. It is recommended that the string constant for the domain be of the form <code>com.</code><em>company</em><code>.</code><em>framework_or_app</em><code>.ErrorDomain</code>. </p><a name="//apple_ref/doc/uid/TP40001806-CH202-SW2" title="Error Codes"></a><h2>Error Codes</h2><p>An error code<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_88"></a> identifies a particular error in a particular domain. It is a signed integer assigned as the value of a program symbol. You get the error code by sending an NSError object a <code>code</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_89"></a> message. As listed in <span class="content_text">Table 1-1</span>, error codes are declared and documented in one or more header files for each major domain.</p><a name="//apple_ref/doc/uid/TP40001806-CH202-BBCIGHEC" title="Table 1-1Header files for error codes in major domains"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Header files for error codes in major domains</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Domain</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Header file</p></th></tr><tr><td  scope="row"><p>Mach</p></td><td ><p><code>/usr/include/mach/kern_return.h</code></p></td></tr><tr><td  scope="row"><p>POSIX</p></td><td ><p><code>/usr/include/sys/errno.h</code></p></td></tr><tr><td  scope="row"><p>Carbon (<code>OSStatus</code>)</p></td><td ><p><code>/System/Library/Frameworks/CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacErrors.h</code></p></td></tr><tr><td  scope="row"><p>Cocoa</p></td><td ><p>See <span class="content_text">Table 1-2</span>.</p></td></tr></table></div><p><span class="content_text">Table 1-2</span> lists the frameworks and header files where error codes in the Cocoa domain are currently declared.</p><a name="//apple_ref/doc/uid/TP40001806-CH202-CJBHHIAA" title="Table 1-2"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong></caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Framework/Header</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>&lt;Foundation/FoundationErrors.h></code></p></td><td ><p>Generic Foundation error codes</p></td></tr><tr><td  scope="row"><p><code>&lt;AppKit/AppKitErrors.h></code></p></td><td ><p>Generic Application Kit error codes</p></td></tr><tr><td  scope="row"><p><code>&lt;CoreData/CoreDataErrors.h></code></p></td><td ><p>Core Data error codes</p></td></tr></table></div><p>To give an idea of how you might test for and act upon errors, let’s say you want to test for underlying POSIX errors during an operation that writes to a file. (Underlying errors are explained in <span class="content_text"><a href="ErrorObjectsDomains.html#//apple_ref/doc/uid/TP40001806-CH202-CJBDCIJJ">“Underlying Error.”</a></span>) If you consulted the POSIX error codes declared in <code>/usr/include/sys/errno.h</code>, you would see a list similar to <span class="content_text">Listing 1-1</span>.</p><a name="//apple_ref/doc/uid/TP40001806-CH202-CJBEBJIG" title="Listing 1-1Part of the POSIX error-code declarations (errno.h)"></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Part of the POSIX error-code declarations <code>(errno.h</code>)</p><div class="codesample"><table><tr><td scope="row"><pre>#define EPERM       1       /* Operation not permitted */<span></span></pre></td></tr><tr><td scope="row"><pre>#define ENOENT      2       /* No such file or directory */<span></span></pre></td></tr><tr><td scope="row"><pre>#define ESRCH       3       /* No such process */<span></span></pre></td></tr><tr><td scope="row"><pre>#define EINTR       4       /* Interrupted system call */<span></span></pre></td></tr><tr><td scope="row"><pre>#define EIO         5       /* Input/output error */<span></span></pre></td></tr><tr><td scope="row"><pre>#define ENXIO       6       /* Device not configured */<span></span></pre></td></tr><tr><td scope="row"><pre>#define E2BIG       7       /* Argument list too long */<span></span></pre></td></tr><tr><td scope="row"><pre>#define ENOEXEC     8       /* Exec format error */<span></span></pre></td></tr><tr><td scope="row"><pre>#define EBADF       9       /* Bad file descriptor */<span></span></pre></td></tr><tr><td scope="row"><pre>#define ECHILD      10      /* No child processes */<span></span></pre></td></tr><tr><td scope="row"><pre>#define EDEADLK     11      /* Resource deadlock avoided */<span></span></pre></td></tr><tr><td scope="row"><pre>                            /* 11 was EAGAIN */<span></span></pre></td></tr><tr><td scope="row"><pre>#define ENOMEM      12      /* Cannot allocate memory */<span></span></pre></td></tr><tr><td scope="row"><pre>#define EACCES      13      /* Permission denied */<span></span></pre></td></tr><tr><td scope="row"><pre>#define EFAULT      14      /* Bad address *#H<span></span></pre></td></tr></table></div><p>You could choose the error conditions you want to test for and use them in code similar to that in <span class="content_text">Listing 1-2</span>. </p><a name="//apple_ref/doc/uid/TP40001806-CH202-CJBJIFFE" title="Listing 1-2Testing for particular error codes in a specific domain"></a><p class="codesample"><strong>Listing 1-2&nbsp;&nbsp;</strong>Testing for particular error codes in a specific domain</p><div class="codesample"><table><tr><td scope="row"><pre>// underError is underlying-error object of a Cocoa-domain error<span></span></pre></td></tr><tr><td scope="row"><pre>if ( [[underError domain] isEqualToString:NSPOSIXErrorDomain] ) {<span></span></pre></td></tr><tr><td scope="row"><pre>        switch([underError code]) {<span></span></pre></td></tr><tr><td scope="row"><pre>            case EIO:<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>                // handle POSIX I/O error<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>            case EACCES:<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>                // handle POSIX permissions error<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>        // etc.<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>You may declare you own error codes for use by your own applications or frameworks, but the error codes should belong to your own domain. You should never add error codes to an existing domain that you do not “own.”</p><a name="//apple_ref/doc/uid/TP40001806-CH202-SW3" title="The User Info Dictionary"></a><h2>The User Info Dictionary</h2><p>Every NSError object has a “user info” dictionary<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_90"></a> to hold error information beyond domain and code. You access this dictionary by sending a <code>userInfo</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_91"></a> message to an NSError object. The advantage of a NSDictionary<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_92"></a> over another kind of container object is that it is flexible; it can even carry custom information about an error. But all user info dictionaries contain (or can contain) several predefined string and object values related to an error.</p><a name="//apple_ref/doc/uid/TP40001806-CH202-SW4" title="Localized Error Information"></a><h3>Localized Error Information</h3><p>An important role for NSError objects is to contain error information<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_93"></a> that programs can display in an alert dialog or sheet. This information is usually stored in the user info dictionary as strings in several categories: description, failure reason, recovery suggestion, and recovery options. (See <span class="content_text"><a href="ErrorObjectsDomains.html#//apple_ref/doc/uid/TP40001806-CH202-BBCHIDHG">Figure 1-1</a></span> for the placement of these strings on an alert.) When you create an NSError object, you should insert localized strings into the dictionary, unless you want to compute them lazily.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001806-CH202-SW5" title="Note"></a><p><strong>Note:</strong>&nbsp;Don’t expect the user info dictionary of every error object to contain localized strings. A subclass of NSError, for example, could override <code>localizedDescription</code> to compose these strings on-the-fly from the error domain, code, and context instead of storing them.</p></div><p>You can usually access the localized information associated with an NSError object in one of two ways. You can send <code>objectForKey:</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_94"></a> to the user info dictionary, specifying the appropriate key. Or you can send a equivalent message to the NSError object. However, you should send the message rather than use the dictionary key to access a localized string. The error object might not store the string in the dictionary, instead choosing to compose it dynamically. The dictionary is designed to be a fallback mechanism, not the sole repository of error strings. Use the dictionary keys instead to store your own strings in the user info dictionary.</p><p>The following summaries include both the dictionary key and the method used to access the localized string:</p><dl class="termdef">	<dt>Error description<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_95"></a></dt><dd><p>The main description of the error, appearing in a larger, bold type face. It often includes the failure reason. If no error description is present in the user info dictionary, NSError either constructs one from the error domain and code or (when the domain is well-known , such as <code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSCocoaErrorDomain" target="_top">NSCocoaErrorDomain</a></code>), attempts to fetch a suitable string from a function or method within that domain. .</p><p>User info key: <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSLocalizedDescriptionKey" target="_top">NSLocalizedDescriptionKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_96"></a></p><p>Method: <code>localizedDescription</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_97"></a> (never returns <code>nil</code>)</p></dd><dt>Failure reason<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_98"></a></dt><dd><p>A brief sentence that explains the reason why the error occurred. It is typically part of the error description. Methods such as <code>presentError:</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_99"></a> do not automatically display the failure reason because it is already included in the error description. The failure reason is for clients that only want to display the reason for the failure.</p><p>User info key: <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSLocalizedFailureReasonErrorKey" target="_top">NSLocalizedFailureReasonErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_100"></a></p><p>Method: <code>localizedFailureReason</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_101"></a> (can return <code>nil</code>)</p><div class="noteboxdef"><a name="//apple_ref/doc/uid/TP40001806-CH202-SW6" title="Note"></a><p><strong>Note:</strong>&nbsp;An example can help to clarify the relationship between error description and failure reason. An error object has an error description of “File could not be saved because the disk is full.” The accompanying failure reason is “The disk is full.”</p></p></div></dd><dt>Recovery suggestion<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_102"></a></dt><dd><p>A secondary sentence that ideally tells users what they can do to recover from the error. It appears beneath the error description in a lighter type face. If the recovery suggestion refers to the buttons of the error alert, it should use the same titles as specified for recovery options (<code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSLocalizedRecoveryOptionsErrorKey" target="_top">NSLocalizedRecoveryOptionsErrorKey</a></code>). You may use this string as a purely informative message, supplementing the error description and failure reason.</p><p>User info key: <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSLocalizedRecoverySuggestionErrorKey" target="_top">NSLocalizedRecoverySuggestionErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_103"></a></p><p>Method: <code>localizedRecoverySuggestion</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_104"></a> (can return <code>nil</code>)</p></dd><dt>Recovery options<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_105"></a></dt><dd><p>An array of titles<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_106"></a> (as strings) for the buttons of the error alert. By default, alert sheets and dialogs for error messages have only the “OK” button for dismissing the alert. The first string in the array is the title of the rightmost button, the next string is the title of the button just to the left of the first, and so on. Note that if a recovery attempter is specified for the error object, the recovery-options array should contain more than one string. The recovery attempter accesses the recovery options in order to interpret user choices.</p><p>User info key: <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSLocalizedRecoveryOptionsErrorKey" target="_top">NSLocalizedRecoveryOptionsErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_107"></a></p><p>Method: <code>localizedRecoveryOptions</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_108"></a> (if returns <code>nil</code>, implies a single “OK button)</p></dd></dl><br/><div><a name="//apple_ref/doc/uid/TP40001806-CH202-BBCHIDHG" title="Figure 1-1The localized strings of an NSError object"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>The localized strings of an NSError object</p><img src = "../Art/error_description.gif" alt = "The localized strings of an NSError object" width="566" height="160"></div><br/><div class="notebox"><a name="//apple_ref/doc/uid/TP40001806-CH202-SW7" title="Note"></a><p><strong>Note:</strong>&nbsp;Beginning<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_109"></a> with Mac OS X version 10.4, you can use the <code>alertWithError:</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_110"></a>class method of NSAlert<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_111"></a> as a convenience for creating NSAlert objects to use when displaying alert dialogs or sheets. The method extracts the localized information from the passed-in NSError object for its message text, informative text, and button titles. You may also use the <code>presentError:</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_112"></a> message to display error alerts.</p></div><p>To internationalize<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_113"></a> your error strings, create a <code>.strings</code> file for each localization and place the file in an appropriately named <code>.lproj</code> subdirectory of your bundle’s <code>Resources</code> directory. Then use one of the <code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/doc/c_ref/NSLocalizedString" target="_top">NSLocalizedString</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_114"></a> macros to add localized strings to the user info dictionary of an NSError object. For more on internationalization and string localization, see <em><a href="../../../../MacOSX/Conceptual/BPInternational/index.html#//apple_ref/doc/uid/10000171i" target="_top">Internationalization Programming Topics</a></em>.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001806-CH202-SW8" title="Note"></a><p><strong>Note:</strong>&nbsp;For many error objects in the Cocoa error domain, the localization is performed on demand; in these cases, the localized values are not stored in the user info dictionary.</p></div><a name="//apple_ref/doc/uid/TP40001806-CH202-BBCJHJIG" title="The Recovery Attempter"></a><h3>The Recovery Attempter</h3><p>An NSError object’s user info dictionary can also contain a recovery attempter<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_115"></a>. A recovery attempter is an object that implements one or more methods of the NSErrorRecoveryAttempting informal protocol<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_116"></a>. In many cases, this is the same object that creates the NSError object, but it can be any other object that may know how to recover from a particular error.</p><p>If a recovery attempter has been specified for an NSError object, and multiple recovery options have also been specified, when the error alert is displayed and the user selects a recovery option, the recovery attempter is given a chance to recover from the error. You access the recovery attempter by sending <code>recoveryAttempter</code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_117"></a> to the NSError object. You can add an recovery attempter to the user info dictionary using the key <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSRecoveryAttempterErrorKey" target="_top">NSRecoveryAttempterErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_118"></a>.</p><p>For more on the recovery-attempter object and its role in error handling, see <span class="content_text"><a href="../ErrorRespondRecover/ErrorRespondRecover.html#//apple_ref/doc/uid/TP40001806-CH203-BAJCBIFC">“Error Responders and Error Recovery.”</a></span></p><a name="//apple_ref/doc/uid/TP40001806-CH202-CJBDCIJJ" title="Underlying Error"></a><h3>Underlying Error</h3><p>The user info dictionary can sometimes include another NSError object that represents an error in a subsystem underlying the error represented by the containing NSError. You can query this underlying error<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_119"></a> object to obtain more specific information about the cause of the error.</p><p>You access the underlying error object by using the <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSUnderlyingErrorKey" target="_top">NSUnderlyingErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_120"></a> dictionary key.</p><a name="//apple_ref/doc/uid/TP40001806-CH202-SW9" title="Domain-Specific Keys"></a><h3>Domain-Specific Keys</h3><p>Many of the various error domains specify keys<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_121"></a> for accessing particular items of information from the user info dictionary. This information supplements the other information in the error object. For example, the Cocoa domain defines the keys <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSStringEncodingErrorKey" target="_top">NSStringEncodingErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_122"></a>, <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLErrorKey" target="_top">NSURLErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_123"></a>, and <code><a href="../../../Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSFilePathErrorKey" target="_top">NSFilePathErrorKey</a></code><a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_124"></a>.</p><p>Check the header files or documentation of error domains to find out what domain-specific keys they declare.<a name="//apple_ref/doc/uid/TP40001806-CH202-DontLinkElementID_125"></a></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ErrorHandling/ErrorHandling.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ErrorRespondRecover/ErrorRespondRecover.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-03-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorObjectsDomains/ErrorObjectsDomains.html%3Fid%3DTP40001806-1.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorObjectsDomains/ErrorObjectsDomains.html%3Fid%3DTP40001806-1.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorObjectsDomains/ErrorObjectsDomains.html%3Fid%3DTP40001806-1.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Using the Standard File Package (IM: F)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING306></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Files-305.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-307.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Files-2.html"><B>Files</B></A> / <BR><DD><A HREF="Files-302.html"><B>Chapter 3 - Standard File Package</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING306-0></A>
<H1><A NAME=MARKER-9-66></A>Using the Standard File Package</H1>
 You use the Standard File Package to handle the user interface when the user must specify a file to be saved or opened. You typically call the Standard File Package after <BR>the user chooses Save, Save As, or Open from the File menu.<A NAME=MARKER-2-67></A><A NAME=MARKER-2-68></A><A NAME=MARKER-9-35></A><P>
 When saving a document, you call one of the <CODE>PutFile</CODE> procedures; when opening a document, you call one of the <CODE>GetFile</CODE> procedures. The Standard File Package in version 7.0 introduces two pairs of enhanced procedures:<A NAME=MARKER-2-70></A><P>
<UL>
<LI><CODE>StandardPutFile</CODE> and <CODE>StandardGetFile</CODE>, for presenting the standard interface
<LI><CODE>CustomPutFile</CODE> and <CODE>CustomGetFile</CODE>, for presenting a customized interface<P>
</UL>
 Before calling the enhanced Standard File Package procedures, verify that they are available by calling the <CODE>Gestalt</CODE> function with the <CODE>gestaltStandardFileAttr</CODE> selector. If <CODE>Gestalt</CODE> sets the <CODE>gestaltStandardFile58</CODE> bit in the reply, the four enhanced procedures are available.<A NAME=MARKER-2-71></A><P>
 If the enhanced procedures are not available, you need to use the original Standard File Package procedures that are available in all system software versions:<P>
<UL>
<LI><CODE>SFPutFile</CODE> and <CODE>SFGetFile</CODE>, for presenting the standard interface
<LI><CODE>SFPPutFile</CODE> and <CODE>SFPGetFile</CODE>, for presenting a customized interface<P>
</UL>
 This section focuses on the enhanced procedures introduced in system software <BR>version 7.0. If you need to use the original procedures, see <A HREF=Files-312.html#MARKER-9-212>"Using the Original Procedures" on page 3-40</A>. You can adapt most of the techniques shown in this section <BR>for use with the original procedures. In general, however, the original procedures are slightly harder to use and somewhat less powerful than their enhanced counterparts.<P>
 <A NAME=MARKER-9-602></A>All the enhanced procedures return the results of the dialog boxes in a new reply record, <CODE>StandardFileReply</CODE>.<P>
<PRE>
TYPE StandardFileReply =
   RECORD
      sfGood:        Boolean;    {TRUE if user did not cancel}
      sfReplacing:   Boolean;    {TRUE if replacing file with same name}
      sfType:        OSType;     {file type}
      sfFile:        FSSpec;     {selected file, folder, or volume}
      sfScript:      ScriptCode; {script of file, folder, or volume name}
      sfFlags:       Integer;    {Finder flags of selected item}
      sfIsFolder:    Boolean;    {selected item is a folder}
      sfIsVolume:    Boolean;    {selected item is a volume}
      sfReserved1:   LongInt;    {reserved}
      sfReserved2:   Integer;    {reserved}
   END;
</PRE>
 The reply record identifies selected files with a file system specification (<CODE>FSSpec</CODE>) record. You can pass the <CODE>FSSpec</CODE> record directly to the File Manager functions that recognize <CODE>FSSpec</CODE> records, such as <CODE>FSpOpenDF</CODE> or <CODE>FSpCreate</CODE>. The reply record also contains additional fields that support the Finder features introduced in system software <BR>version 7.0.<A NAME=MARKER-2-47></A><A NAME=MARKER-2-76></A><P>
 The <CODE>sfGood</CODE> field reports whether the reply record is valid--that is, whether your application can use the information in the other fields. The field is set to <CODE>TRUE</CODE> after the user clicks Save or Open, and to <CODE>FALSE</CODE> after the user clicks Cancel.<A NAME=MARKER-2-77></A><P>
 Your application needs to look primarily at the <CODE>sfFile</CODE> and <CODE>sfReplacing</CODE> fields when the <CODE>sfGood</CODE> field contains <CODE>TRUE</CODE>. The <CODE>sfFile</CODE> field contains a file system specification record that describes the selected file or folder. If the selected file is a stationery pad, the reply record describes the file itself, not a copy of the file.<A NAME=MARKER-2-78></A><P>
 The <CODE>sfReplacing</CODE> field reports whether a file to be saved replaces an existing file <BR>of the same name. This field is valid only after a call to the <CODE>StandardPutFile</CODE> or <CODE>CustomPutFile</CODE> procedure. Your application can rely on the value of this field instead of checking for and handling name conflicts itself.<A NAME=MARKER-2-79></A><P>
<DL>
<DT><B>Note</B>
<DD>See <A HREF=Files-315.html#MARKER-9-224>"Enhanced Standard File Reply Record" on page 3-42</A> for a complete description of the fields of the <CODE>StandardFileReply</CODE> record.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 The Standard File Package fills in the reply record and returns when the user completes one of its dialog boxes--either by selecting a file and clicking Save or Open, or by clicking Cancel. Your application checks the values in the reply record to see what action to take, if any. If the selected item is an alias for another item, the Standard File Package resolves the alias and places a file system specification record for the target in the <CODE>sfFile</CODE> field when the user completes the dialog box. (See the chapter "Finder Interface" of <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> for a description of aliases.)<A NAME=MARKER-9-86></A><A NAME=MARKER-2-176></A><A NAME=MARKER-2-82></A><A NAME=MARKER-2-83></A><A NAME=MARKER-2-202></A><P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Files-307.html#HEADING307-0">Presenting the Standard User Interface</A>
<DD>
<DT><A HREF="Files-308.html#HEADING308-0">Customizing the User Interface</A>
<DD>
<DT><A HREF="Files-309.html#HEADING309-0">Setting the Current Directory</A>
<DD>
<DT><A HREF="Files-310.html#HEADING310-0">Selecting a Directory</A>
<DD>
<DT><A HREF="Files-311.html#HEADING311-0">Selecting a Volume</A>
<DD>
<DT><A HREF="Files-312.html#HEADING312-0">Using the Original Procedures</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Files-305.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-307.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Files-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Web Services Programming Guide: Developing Web Service Applications</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Developing Web Service Applications"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001019-CH207" title="Developing Web Service Applications"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../InternetWeb/index.html#//apple_ref/doc/uid/TP30000440-TP30000469" target="_top">Internet &amp; Web</a> &gt; <a href="../../../InternetWeb/WebServices-date.html#//apple_ref/doc/uid/TP30000440-TP30000469-TP30000590" target="_top">Web Services</a> &gt; <a href="../About/About.html#//apple_ref/doc/uid/TP30001019-CH204-TPXREF101">WebObjects Web Services Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Security/Security.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DtoWS/DtoWS.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBCGFCI" title="Developing Web Service Applications"></a>
    <h1>Developing Web Service Applications</h1>
    
        <p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_120"></a>
            You can publish as Web service operations the public methods of any class that contains a no-argument constructor. Also, methods that correspond to document-style operations, must return an <code>org.w3c.dom.Document</code>
            . You can find documentation for these classes at <span class="content_text"><a href="http://xml.apache.org/axis" target="_blank">http://xml.apache.org/axis</a></span>
            , and <span class="content_text"><a href="http://www.w3.org" target="_blank">http://www.w3.org</a></span>
             respectively.</p>
        <p>This chapter contains the following sections:</p>
        <ul class="ul">
            <li class="li">
                <p>
                    <span class="content_text"><a href="Web_Services.html#//apple_ref/doc/uid/TP30001019-CH207-CJBIECBD">“Providing a Web Service”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="Web_Services.html#//apple_ref/doc/uid/TP30001019-CH207-TPXREF103">“Consuming a Web Service”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="Web_Services.html#//apple_ref/doc/uid/TP30001019-CH207-TPXREF104">“Using Sessions in Web Services”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="Web_Services.html#//apple_ref/doc/uid/TP30001019-CH207-CJBJGCJG">“Accessing the WOContext Object”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="Web_Services.html#//apple_ref/doc/uid/TP30001019-CH207-CJBBBCGI">“Web Service Deployment Descriptors”</a></span>
                </p>
            </li>
            <li class="li">
                <p>
                    <span class="content_text"><a href="Web_Services.html#//apple_ref/doc/uid/TP30001019-CH207-TPXREF105">“Adding Web Service Support to Existing Projects”</a></span>
                </p>
            </li>
        </ul>
    
    
        <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBIECBD" title="Providing a Web Service"></a>
            <h2>Providing a Web Service</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_121"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_122"></a>
                As a companion to this document, in <code>projects/Calculator</code>
                , you find the Calculator project. It's a simple WebObjects application project used to build an application that serves a Web service called Calculator. The service provides four operations: <code>add</code>
                , <code>subtract</code>
                , <code>multiply</code>
                , and <code>divide</code>
                . The operations take two parameters of type <code>double</code>
                 and return a value of type <code>double</code>
                . The <code>Calculator.java</code>
                 class, the workhorse of the Calculator Web service, is listed in <span class="content_text">Listing 3-1</span>
                .</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBBGGFC" title="Listing 3-1 Calculator.java class in Calculator project"></a>
                <p class="codesample"><strong>Listing 3-1&nbsp;&nbsp;</strong>
                    <code>Calculator.java</code>
                     class in Calculator project</p>
                <div class="codesample"><table><tr><td scope="row"><pre>public class Calculator extends Object {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public static double add(double addend1, double addend2) {<span></span></pre></td></tr><tr><td scope="row"><pre>        double sum = addend1 + addend2;<span></span></pre></td></tr><tr><td scope="row"><pre>        return sum;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public static double subtract(double minuend, double subtrahend) {<span></span></pre></td></tr><tr><td scope="row"><pre>        double difference = minuend - subtrahend;<span></span></pre></td></tr><tr><td scope="row"><pre>        return difference;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public static double multiply(double multiplicand1, double multiplicand2) {<span></span></pre></td></tr><tr><td scope="row"><pre>        double product = multiplicand1 * multiplicand2;<span></span></pre></td></tr><tr><td scope="row"><pre>        return product;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public static double divide(double dividend, double divisor) {<span></span></pre></td></tr><tr><td scope="row"><pre>        double quotient = dividend / divisor;<span></span></pre></td></tr><tr><td scope="row"><pre>        return quotient;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
            <p>To provide a Web service based on <code>Calculator.java</code>
                 the Application object registers <code>Calculator.java</code>
                 as a Web service with the following method invocation:</p>
            
                <div class="codesample"><table><tr><td scope="row"><pre>WOWebServiceRegistrar.registerWebService(Calculator.class, true);<span></span></pre></td></tr></table></div>
            
            <p>The WOWebServiceRegistrar<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_123"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_124"></a>
                 class (<code>com.webobjects.webservices.appserver</code>
                ) provides methods to register and unregister classes as Web services, set a security delegate, register XSLT (Extensible Stylesheet Language Transformations) scripts for operations, and so on.</p>
            <p>To become a Web service provider, build and run the Calculator application. To view the WSDL document for the Web service, point your Web browser to <code>http://localhost:4210/WebObjects/Calculator.woa/ws/Calculator?wsdl</code>
                .<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_125"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH207-TPXREF103" title="Consuming a Web Service"></a>
            <h2>Consuming a Web Service</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_126"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_127"></a>
                The companion project Calculator_Client, located in <code>project/Calculator_Client</code>
                , contains the source files used to create the Calculator_Client application, which consumes the Calculator Web service described in <span class="content_text"><a href="Web_Services.html#//apple_ref/doc/uid/TP30001019-CH207-CJBIECBD">“Providing a Web Service”</a></span>
                . Its main class is <code>CalculatorClient.java</code>
                , shown in <span class="content_text">Listing 3-2</span>
                .</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-TPXREF101" title="Listing 3-2 CalculatorClient.java class in Calculator_Client project"></a>
                <p class="codesample"><strong>Listing 3-2&nbsp;&nbsp;</strong>
                    <code>CalculatorClient.java</code>
                     class in Calculator_Client project</p>
                <div class="codesample"><table><tr><td scope="row"><pre>import java.net.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import java.util.Enumeration;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.webservices.client.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class CalculatorClient extends Object {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Object through which the Web service's operations are invoked.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    private WOWebServiceClient _serviceClient = null;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Address for the Web service's WSDL document.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    private String _service_address =<span></span></pre></td></tr><tr><td scope="row"><pre>        "http://localhost:4210/cgi-bin/WebObjects/Calculator.woa/ws/Calculator?wsdl";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public CalculatorClient() {<span></span></pre></td></tr><tr><td scope="row"><pre>        super();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains the Web service's operation names.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return the Web service's operation names.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public NSArray operations() {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSArray operations = (serviceClient().operationsDictionaryForService(serviceName())).allValues();<span></span></pre></td></tr><tr><td scope="row"><pre>        NSMutableArray operation_names = new NSMutableArray();<span></span></pre></td></tr><tr><td scope="row"><pre>        Enumeration operations_enumerator = operations.objectEnumerator();<span></span></pre></td></tr><tr><td scope="row"><pre>        while (operations_enumerator.hasMoreElements()) {<span></span></pre></td></tr><tr><td scope="row"><pre>            WOClientOperation operation = (WOClientOperation)operations_enumerator.nextElement();<span></span></pre></td></tr><tr><td scope="row"><pre>            operation_names.addObject((String)operation.name());<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return operation_names;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Invokes the Web service's operations.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @param operation      operation to invoke;<span></span></pre></td></tr><tr><td scope="row"><pre>     * @param arguments      argument list;<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return               value returned by the operation.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public Double invoke(String operation, Object[] arguments) {<span>// 1</span></pre></td></tr><tr><td scope="row"><pre>        Object result = serviceClient().invoke(serviceName(), operation, arguments);<span></span></pre></td></tr><tr><td scope="row"><pre>        return (Double)result;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains the Web service name.<span></span></pre></td></tr><tr><td scope="row"><pre>     * Normally one WSDL file describes one Web service,<span></span></pre></td></tr><tr><td scope="row"><pre>     * but it could describe one or more services.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return Web service name.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public String serviceName() {<span>// 2</span></pre></td></tr><tr><td scope="row"><pre>        return (String)serviceClient().serviceNames().objectAtIndex(0);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains an WOWebServiceClient through which service operations are invoked.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return Web service–client object.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    private WOWebServiceClient serviceClient() {<span></span></pre></td></tr><tr><td scope="row"><pre>        if (_serviceClient == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            _serviceClient = clientFromAddress(_service_address);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return _serviceClient;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains a Web service–client object through which<span></span></pre></td></tr><tr><td scope="row"><pre>     * service operations can be invoked.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return Web service–client object.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    private static WOWebServiceClient clientFromAddress(String address) {<span></span></pre></td></tr><tr><td scope="row"><pre>        WOWebServiceClient service_client = null;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Create the Web service's URL.<span></span></pre></td></tr><tr><td scope="row"><pre>        URL url;<span></span></pre></td></tr><tr><td scope="row"><pre>        try {<span></span></pre></td></tr><tr><td scope="row"><pre>            url = new URL(address);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        catch (MalformedURLException e) {<span></span></pre></td></tr><tr><td scope="row"><pre>            url = null;<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Get a service-client object.<span></span></pre></td></tr><tr><td scope="row"><pre>        service_client = new WOWebServiceClient(url);<span>// 3</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        return service_client;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
            <p>The following list highlights some aspects of <code>CalculatorClient.java</code>
                .</p>
            <ol class="ol">
                <li class="li">
                    <p>
                        <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_128"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_129"></a>
                        The <code>invoke</code>
                         method defines as parameters the operation name and its arguments. It uses the <code>invoke</code>
                         method of WOWebServiceClient to invoke the Web service operation.</p>
                </li>
                <li class="li">
                    <p>The <code>serviceName</code>
                         method returns the name of the first Web service in the list of Web services defined by the WSDL document used to create the WOWebServiceClient object. Most WSDL documents define one Web service, but a WSDL document can define more than one Web service.</p>
                </li>
                <li class="li">
                    <p>The WOWebServiceClient class (<code>com.webobjects.webservices.client</code>
                        ) provides a one-argument constructor that takes a URL (<code>java.net</code>
                        ) object that points to a WSDL document. Therefore, to create a WOWebServiceClient you must create a URL object from the URL (Uniform Resource Locator) of the appropriate WSDL document.<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_130"></a>
                        <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_131"></a>
                    </p>
                </li>
            </ol>
            <p>Build and run the Calculator_Client application. Your Web browser should show a page like the one shown in <span class="content_text">Figure 3-1</span>
                . If your Web browser didn't launch, launch it and connect to <code>http://localhost:4210/cgi-bin/WebObjects/Calculator_Client.woa</code>
                .<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_132"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_133"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_134"></a>
            </p>
            <br/><div><a name="//apple_ref/doc/uid/TP30001019-CH207-CJBDHFCB" title="Figure 3-1A possible user interface to the Calculator Web service"></a>
                <p><strong>Figure 3-1&nbsp;&nbsp;</strong>A possible user interface to the Calculator Web service</p>
                <img src = "../art/webwebcalculator.gif" alt = "A possible user interface to the Calculator Web service" width="270" height="176">
            </div><br/>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH207-TPXREF104" title="Using Sessions in Web Services"></a>
            <h2>Using Sessions in Web Services</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_135"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_136"></a>
                Using sessions during Web service consumption is simple. You get a session from one Web service and share it with other Web services served from the same application. For example, you can develop an application that provides several related Web services. A practical way to share information among the services is to store shared data in a session object.</p>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_137"></a>
                The Session project, in <code>projects/Session</code>
                , showcases a simple Web service application that provides two Web services: LogIn and AccessData. The LogIn service accepts user data and stores in a session. To give the AccessData service access to the information recorded by LogIn, its session is set to the one used by LogIn.</p>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_138"></a>
                The Session_Client project, in <code>projects/Session_Client</code>
                , implements a Web service client that consumes LogIn and AccessData. It sets user name and password properties through LogIn and retrieves them through AccessData. <span class="content_text">Listing 3-3</span>
                 shows the logic behind this process.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-TPXREF102" title="Listing 3-3Session_Client project&acirc;&#128;&#148;Application.java file"></a>
                <p class="codesample"><strong>Listing 3-3&nbsp;&nbsp;</strong>Session_Client project—<code>Application.java</code>
                     file</p>
                <div class="codesample"><table><tr><td scope="row"><pre>import com.webobjects.appserver.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.webservices.client.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class Application extends WOApplication {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public static void main(String argv[]) {<span></span></pre></td></tr><tr><td scope="row"><pre>        WOApplication.main(argv, Application.class);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public Application() {<span></span></pre></td></tr><tr><td scope="row"><pre>        super();<span></span></pre></td></tr><tr><td scope="row"><pre>        System.out.println("Welcome to " + this.name() + "!");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Create the service client used to consume<span></span></pre></td></tr><tr><td scope="row"><pre>        // both LogInService and AccessDataService.<span></span></pre></td></tr><tr><td scope="row"><pre>        SecurityClient securityClient = new SecurityClient();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Log in as Susana with the password anasus.<span></span></pre></td></tr><tr><td scope="row"><pre>        securityClient.logIn("Susana", "anasus");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Get session from LogInService.<span></span></pre></td></tr><tr><td scope="row"><pre>        WOWebService.SessionInfo sessionInfo = securityClient.logInSessionInfo();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Set AccessDataService's session to the one obtained from LogInService.<span></span></pre></td></tr><tr><td scope="row"><pre>        securityClient.setAccessDataSessionInfo(sessionInfo);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Get values of properties stored in session created by LogInService.<span></span></pre></td></tr><tr><td scope="row"><pre>        String userName = securityClient.userName();<span></span></pre></td></tr><tr><td scope="row"><pre>        String userPassword = securityClient.userPassword();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Print the properties' values.<span></span></pre></td></tr><tr><td scope="row"><pre>        System.out.println();<span></span></pre></td></tr><tr><td scope="row"><pre>        System.out.println("************************************************");<span></span></pre></td></tr><tr><td scope="row"><pre>        System.out.println("User name from AccessDataService: " + userName);<span></span></pre></td></tr><tr><td scope="row"><pre>        System.out.println("User password from AccessDataService: "  + userPassword);<span></span></pre></td></tr><tr><td scope="row"><pre>        System.out.println("************************************************");<span></span></pre></td></tr><tr><td scope="row"><pre>        System.out.println();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
            <p>
                <span class="content_text">Listing 3-4</span>
                 shows the SessionClient class in the Session_Client project.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-BCIEDBCA" title="Listing 3-4Session_Client project&acirc;&#128;&#148;SessionClient.java file"></a>
                <p class="codesample"><strong>Listing 3-4&nbsp;&nbsp;</strong>Session_Client project—<code>SessionClient.java</code>
                     file</p>
                <div class="codesample"><table><tr><td scope="row"><pre>import java.net.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.appserver.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.webservices.client.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Used to consume the LogIn and AccessData Web services.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>public class SecurityClient extends Object {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    private WOWebServiceClient _logInClient = null;<span></span></pre></td></tr><tr><td scope="row"><pre>    private WOWebServiceClient _accessDataClient = null;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    private final String LogInServiceAddress = "http://localhost:4220/cgi-bin/WebObjects/Security.woa/ws/LogIn?wsdl";<span></span></pre></td></tr><tr><td scope="row"><pre>    private final String AccessDataServiceAddress = "http://localhost:4220/cgi-bin/WebObjects/Security.woa/ws/AccessData?wsdl";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    private final String LogInService = "LogIn";<span></span></pre></td></tr><tr><td scope="row"><pre>    private final String AccessDataService = "AccessData";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public SecurityClient() {<span></span></pre></td></tr><tr><td scope="row"><pre>        super();<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Invokes the setUserInfo operation of the LogIn Web service.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public void logIn(String name, String password) {<span></span></pre></td></tr><tr><td scope="row"><pre>        Object[] arguments = { name, password };<span></span></pre></td></tr><tr><td scope="row"><pre>        logInClient().invoke(LogInService, "setUserInfo", arguments);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Invokes the userName operation of the AccessData Web service.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return user name stored in shared session object.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public String userName() {<span></span></pre></td></tr><tr><td scope="row"><pre>        Object result = accessDataClient().invoke(AccessDataService, "userName", null);<span></span></pre></td></tr><tr><td scope="row"><pre>        return (String)result;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Invokes the userPassword operation of the AccessData Web service.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return user password stored in shared session object.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public String userPassword() {<span></span></pre></td></tr><tr><td scope="row"><pre>        Object result = accessDataClient().invoke(AccessDataService, "userPassword", null);<span></span></pre></td></tr><tr><td scope="row"><pre>        return (String)result;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains a Web service client through which LogIn operations are invoked.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return a Web service client for LogIn.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    protected WOWebServiceClient logInClient() {<span></span></pre></td></tr><tr><td scope="row"><pre>        if (_logInClient == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            _logInClient = clientFromAddress(LogInServiceAddress);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return _logInClient;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains a Web service client through which AccessData operations are invoked.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return a Web service client for AccessData.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    protected WOWebServiceClient accessDataClient() {<span></span></pre></td></tr><tr><td scope="row"><pre>        if (_accessDataClient == null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            _accessDataClient = clientFromAddress(AccessDataServiceAddress);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return _accessDataClient;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains session information from LogInService.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return session information from LogInService.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public WOWebService.SessionInfo logInSessionInfo() {<span></span></pre></td></tr><tr><td scope="row"><pre>        return logInClient().sessionInfoForServiceNamed(LogInService);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Sets the session used by AccessDataService.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public void setAccessDataSessionInfo(WOWebService.SessionInfo sessionInfo) {<span></span></pre></td></tr><tr><td scope="row"><pre>        accessDataClient().setSessionInfoForServiceNamed(sessionInfo, AccessDataService);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains a Web service client through which<span></span></pre></td></tr><tr><td scope="row"><pre>     * service operations are invoked.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return Web service client object.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    private WOWebServiceClient clientFromAddress(String address) {<span></span></pre></td></tr><tr><td scope="row"><pre>        WOWebServiceClient service_client = null;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Create the Web service's URL.<span></span></pre></td></tr><tr><td scope="row"><pre>        URL url;<span></span></pre></td></tr><tr><td scope="row"><pre>        try {<span></span></pre></td></tr><tr><td scope="row"><pre>            url = new URL(address);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        catch (MalformedURLException e) {<span></span></pre></td></tr><tr><td scope="row"><pre>            url = null;<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        // Get a service-client object.<span></span></pre></td></tr><tr><td scope="row"><pre>        service_client = new WOWebServiceClient(url);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        return service_client;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
            <p>
                <span class="content_text">Listing 3-5</span>
                 shows the LogIn class in the Session project.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBFHFBD" title="Listing 3-5Session project&acirc;&#128;&#148;LogIn.java file"></a>
                <p class="codesample"><strong>Listing 3-5&nbsp;&nbsp;</strong>Session project—LogIn.java file</p>
                <div class="codesample"><table><tr><td scope="row"><pre>import org.apache.axis.MessageContext;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.appserver.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Implements the LogIn Web service.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>public class LogIn {<span></span></pre></td></tr><tr><td scope="row"><pre>    public static final String USER_NAME = "userName";<span></span></pre></td></tr><tr><td scope="row"><pre>    public static final String USER_PASSWORD = "userPassword";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Sets a user's name and password properties in a session.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public void setUserInfo(String userName, String userPassword) {<span></span></pre></td></tr><tr><td scope="row"><pre>        WOSession session = serviceSession();<span></span></pre></td></tr><tr><td scope="row"><pre>        session.setObjectForKey(userName, USER_NAME);<span></span></pre></td></tr><tr><td scope="row"><pre>        session.setObjectForKey(userPassword, USER_PASSWORD);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Retrieves the session from the current context.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return current context's session.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    private WOSession serviceSession() {<span></span></pre></td></tr><tr><td scope="row"><pre>        WOContext context = (WOContext)MessageContext.getCurrentContext().getProperty("com.webobjects.appserver.WOContext");<span></span></pre></td></tr><tr><td scope="row"><pre>        WOSession session = context.session();<span></span></pre></td></tr><tr><td scope="row"><pre>        return session;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
            <p>
                <span class="content_text">Listing 3-6</span>
                 shows the AccessData class in the Session project.<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_139"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_140"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_141"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_142"></a>
            </p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBDEHIA" title="Listing 3-6Session project&acirc;&#128;&#148;AccessData.java file"></a>
                <p class="codesample"><strong>Listing 3-6&nbsp;&nbsp;</strong>Session project—<code>AccessData.java</code>
                     file</p>
                <div class="codesample"><table><tr><td scope="row"><pre>import org.apache.axis.MessageContext;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.appserver.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>/**<span></span></pre></td></tr><tr><td scope="row"><pre> * Implements the AccessData Web service.<span></span></pre></td></tr><tr><td scope="row"><pre> */<span></span></pre></td></tr><tr><td scope="row"><pre>public class AccessData {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains the value of the USER_NAME property from the session.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return user name.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public String userName() {<span></span></pre></td></tr><tr><td scope="row"><pre>        String userName = null;<span></span></pre></td></tr><tr><td scope="row"><pre>        WOSession session = serviceSession();<span></span></pre></td></tr><tr><td scope="row"><pre>        if (session != null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            userName = (String)session.objectForKey(LogIn.USER_NAME);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return userName;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Obtains the value of the USER_PASSWORD property from the session.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return user password.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    public String userPassword() {<span></span></pre></td></tr><tr><td scope="row"><pre>        String userPassword = null;<span></span></pre></td></tr><tr><td scope="row"><pre>        WOSession session = serviceSession();<span></span></pre></td></tr><tr><td scope="row"><pre>        if (session != null) {<span></span></pre></td></tr><tr><td scope="row"><pre>            userPassword = (String)session.objectForKey(LogIn.USER_PASSWORD);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return userPassword;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    /**<span></span></pre></td></tr><tr><td scope="row"><pre>     * Retrieves the session from the current context.<span></span></pre></td></tr><tr><td scope="row"><pre>     * @return current context's session.<span></span></pre></td></tr><tr><td scope="row"><pre>     */<span></span></pre></td></tr><tr><td scope="row"><pre>    private WOSession serviceSession() {<span></span></pre></td></tr><tr><td scope="row"><pre>        WOContext context = (WOContext)MessageContext.getCurrentContext().getProperty(<span></span></pre></td></tr><tr><td scope="row"><pre>                                            "com.webobjects.appserver.WOContext");<span></span></pre></td></tr><tr><td scope="row"><pre>        WOSession session = context.session();<span></span></pre></td></tr><tr><td scope="row"><pre>        return session;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	
            
        
        <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBJGCJG" title="Accessing the WOContext Object"></a>
            <h2>Accessing the WOContext Object</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_143"></a>
                Sometimes you may need to access the context (<code>com.webobjects.appserver.WOContext</code>
                ) of an HTTP request. For example, you can use the WOContext object to store data you want to share between methods or classes as an operation is processed. To access the WOContext object associated with an operation's invocation, use the code in <span class="content_text">Listing 3-7</span>
                .<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_144"></a>
            </p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBBEJIA" title="Listing 3-7Accessing the WOContext object from a Web service class"></a>
                <p class="codesample"><strong>Listing 3-7&nbsp;&nbsp;</strong>Accessing the WOContext object from a Web service class</p>
                <div class="codesample"><table><tr><td scope="row"><pre>import com.webobjects.appserver.WOContext;<span></span></pre></td></tr><tr><td scope="row"><pre>import org.apache.axis.MessageContext;<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre>MessageContext message_context = MessageContext.getCurrentContext();<span></span></pre></td></tr><tr><td scope="row"><pre>WOContext context = (WOContext)message_context.getProperty("com.webobjects.appserver.WOContext");<span></span></pre></td></tr></table></div>	
            
        
        <a name="//apple_ref/doc/uid/TP30001019-CH207-TPXREF106" title="Adding Security to Web Services"></a>
            <h2>Adding Security to Web Services</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_145"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_146"></a>
                You can add security processing to Web services by creating a security delegate class that implements methods of the WOSecurityDelegate<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_147"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_148"></a>
                 interface in the <code>com.webobjects.webservices.support</code>
                 package. These methods are</p>
            <ul class="ul">
                <li class="li">
                    <p>
                        <code>processClientRequest</code>
                        : Invoked by consumer applications before sending a request to the provider.</p>
                </li>
                <li class="li">
                    <p>
                        <code>processClientResponse</code>
                        : Invoked by consumer applications before processing a response from the provider.</p>
                </li>
                <li class="li">
                    <p>
                        <code>processServerRequest</code>
                        : Invoked by provider applications before processing a request from a consumer.</p>
                </li>
                <li class="li">
                    <p>
                        <code>processServerResponse</code>
                        : Invoked by provider applications before sending a response to a consumer.</p>
                </li>
                <li class="li">
                    <p>
                        <code>onFaultClientRequest</code>
                        : Invoked by consumer applications when a processing exception occurs while generating a request.</p>
                </li>
                <li class="li">
                    <p>
                        <code>onFaultClientResponse</code>
                        : Invoked by consumer applications when a processing exception occurs while processing a server response.</p>
                </li>
                <li class="li">
                    <p>
                        <code>onFaultServerRequest</code>
                        : Invoked by provider applications when a processing exception occurs while processing a consumer request.</p>
                </li>
                <li class="li">
                    <p>
                        <code>onFaultServerResponse</code>
                        : Invoked by provider applications when a processing exception occurs while generating a response.</p>
                </li>
            </ul>
            <p>The projects Security<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_149"></a>
                 and Security_Client<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_150"></a>
                 in <code>projects/Security</code>
                 and <code>projects/Security_Client</code>
                , respectively, show how the methods of a security-delegate class are invoked before and after an operation is executed.<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_151"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_152"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBBBCGI" title="Web Service Deployment Descriptors"></a>
            <h2>Web Service Deployment Descriptors</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_153"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_154"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_155"></a>
                Under Axis, Web services are deployed using XML-based files known as Web service deployment descriptors (WSDD). The Resources group of Web service application projects contains one or two of these files, named <code>client.wsdd</code>
                 and <code>server.wsdd</code>
                . Application projects that only provide Web services have the <code>server.wsdd</code>
                 file, while projects that consume services contain both.</p>
            <p>
                <span class="content_text">Listing 3-8</span>
                 shows the <code>server.wsdd</code>
                 file of a Web service provider project.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBEEFCI" title="Listing 3-8The server.wsdd file of a Web service provider project"></a>
                <p class="codesample"><strong>Listing 3-8&nbsp;&nbsp;</strong>The <code>server.wsdd</code>
                     file of a Web service provider project</p>
                <div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;deployment<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns="http://xml.apache.org/axis/wsdd/"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:java="http://xml.apache.org/axis/wsdd/providers/java"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;globalConfiguration><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;parameter name="sendMultiRefs" value="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;parameter name="sendXsiTypes" value="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;parameter name="sendXMLDeclaration" value="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;requestFlow><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.webservices.support._private.WOSecurityHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.appserver._private.WOServerSessionHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/requestFlow><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;responseFlow><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.appserver._private.WOServerSessionHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.webservices.support._private.WOSecurityHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/responseFlow><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/globalConfiguration><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;handler name="URLMapper" type="java:org.apache.axis.handlers.http.URLMapper"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;handler name="HTTPActionHandler" type="java:org.apache.axis.handlers.http.HTTPActionHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;handler name="RPCDispatcher" type="java:org.apache.axis.providers.java.RPCProvider"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;handler name="MsgDispatcher" type="java:org.apache.axis.providers.java.MsgProvider"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;transport name="http"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;requestFlow><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="HTTPActionHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="URLMapper"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/requestFlow><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/transport><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/deployment><span></span></pre></td></tr></table></div>	
            
            <p>
                <span class="content_text">Listing 3-9</span>
                 shows the client.wsdd file of a Web service consumer project.</p>
            <a name="//apple_ref/doc/uid/TP30001019-CH207-CJBECFIG" title="Listing 3-9The client.wsdd file of a Web service consumer project"></a>
                <p class="codesample"><strong>Listing 3-9&nbsp;&nbsp;</strong>The <code>client.wsdd</code>
                     file of a Web service consumer project</p>
                <div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;deployment<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns="http://xml.apache.org/axis/wsdd/"<span></span></pre></td></tr><tr><td scope="row"><pre>    xmlns:java="http://xml.apache.org/axis/wsdd/providers/java"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;globalConfiguration><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;parameter name="sendMultiRefs" value="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;parameter name="sendXsiTypes" value="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;parameter name="sendXMLDeclaration" value="true"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;requestFlow><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.webservices.support._private.WOSecurityHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.webservices.client._private.WOClientSessionHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/requestFlow><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;responseFlow><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.webservices.client._private.WOClientSessionHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;handler type="java:com.webobjects.webservices.support._private.WOSecurityHandler"/><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/responseFlow><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/globalConfiguration><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;transport name="http" pivot="java:org.apache.axis.transport.http.HTTPSender"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;transport name="https" pivot="java:org.apache.axis.transport.http.HTTPSender"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;transport name="local" pivot="java:org.apache.axis.transport.local.LocalSender"/><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/deployment><span></span></pre></td></tr></table></div>	
            
            <p>You can edit the <code>server.wsdd</code>
                 and the <code>client.wsdd</code>
                 files to add handlers or to add Web services that have static WSDL documents. However, you must not remove any of the handlers defined in those files by default. Also, you should consult the Axis documentation before making any changes to the WSDD files.<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_156"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_157"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_158"></a>
            </p>
        
        <a name="//apple_ref/doc/uid/TP30001019-CH207-TPXREF105" title="Adding Web Service Support to Existing Projects"></a>
            <h2>Adding Web Service Support to Existing Projects</h2>
            <p>To add Web service–provider support to an existing project, you have to add the JavaWebServiceSupport<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_159"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_160"></a>
                 framework to it. To add Web service–client support, you need to add the JavaWebServiceSupport and JavaWebServiceClient<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_161"></a>
                <a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_162"></a>
                 frameworks. The frameworks are located in <code>/System/Library/Frameworks</code>
                 (<code>$NEXT_ROOT/Library/Frameworks</code>
                 on Windows).<a name="//apple_ref/doc/uid/TP30001019-CH207-DontLinkElementID_163"></a>
            </p>
        
    


        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Security/Security.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../DtoWS/DtoWS.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/Web_Services/Web_Services/Web_Services.html%3Fid%3DTP30001019-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/Web_Services/Web_Services/Web_Services.html%3Fid%3DTP30001019-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/Web_Services/Web_Services/Web_Services.html%3Fid%3DTP30001019-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>IOFilterScheme</title>
<meta http-equiv="Content-Type" content="text/html; charset=ascii">
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/Darwin/index.html#//apple_ref/doc/uid/TP30001281-TP30000422" target="_top">Darwin</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/kernel_fw_leo" target="_top">Kernel Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&#160;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<a name="//apple_ref/doc/class/IOFilterScheme" title="IOFilterScheme"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOFilterScheme">IOFilterScheme</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Inherits from:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<a href="../../../IOStorage_h/Classes/IOStorage/index.html#//apple_ref/cpp/cl/IOStorage" target="_top">IOStorage</a>
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOFilterScheme.h</a></div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>The common base class for all filter scheme
objects.
<!-- end abstract --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The IOFilterScheme class is the common base class for all filter scheme
objects.  It extends the IOStorage class by implementing the appropriate
open and close semantics for filter objects (standard semantics are act
as a relay for incoming opens, producing one outgoing open for each
incoming open).  It also implements the default read and write semantics,
which pass all reads and writes through to the provider media unprocessed.
For simple schemes, the default behavior is sufficient.  More complex
filter schemes such as RAID will want to do extra processing for reads
and writes.
<!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFilterScheme/handleClose/void/(IOService*,IOOptionBits)" target="_top">handleClose</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFilterScheme/handleIsOpen/bool/(constIOService*)" target="_top">handleIsOpen</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFilterScheme/handleOpen/bool/(IOService*,IOOptionBits,void*)" target="_top">handleOpen</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFilterScheme/read/void/(IOService*,UInt64,IOMemoryDescriptor*,IOStorageAttributes*,IOStorageCompletion*)" target="_top">read</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFilterScheme/synchronizeCache/IOReturn/(IOService*)" target="_top">synchronizeCache</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFilterScheme/write/void/(IOService*,UInt64,IOMemoryDescriptor*,IOStorageAttributes*,IOStorageCompletion*)" target="_top">write</a></tt></dt>
<dd></dd>
</dl>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFilterScheme/handleClose/void/(IOService*,IOOptionBits);   name=IOFilterScheme::handleClose --><a name="//apple_ref/cpp/instm/IOFilterScheme/handleClose/void/(IOService*,IOOptionBits)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleClose">handleClose</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">handleClose</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">client</span>,
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>client</code></dt>
<dd><p>Client requesting the close.</p></dd>
<dt><code>options</code></dt>
<dd><p>Options for the close.  Set to zero.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The handleClose method closes the client's access to this object.
</p>
<p>This implementation replaces the IOService definition of handleClose().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFilterScheme/handleIsOpen/bool/(constIOService*);   name=IOFilterScheme::handleIsOpen --><a name="//apple_ref/cpp/instm/IOFilterScheme/handleIsOpen/bool/(constIOService*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleIsOpen">handleIsOpen</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">handleIsOpen</span><!-- /a -->(
    <span class="keyword">const</span> <!-- a --><span class="var">IOService</span><!-- /a --> <span class="var">*</span> <!-- a --><span class="var">client</span><!-- /a -->) <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>client</code></dt>
<dd><p>Client to check the open state of.  Set to zero to check the open state
of all clients.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if the client was (or clients were) open, false otherwise.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The handleIsOpen method determines whether the specified client, or any
client if none is specified, presently has an open on this object.
</p>
<p>This implementation replaces the IOService definition of handleIsOpen().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFilterScheme/handleOpen/bool/(IOService*,IOOptionBits,void*);   name=IOFilterScheme::handleOpen --><a name="//apple_ref/cpp/instm/IOFilterScheme/handleOpen/bool/(IOService*,IOOptionBits,void*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleOpen">handleOpen</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">handleOpen</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">client</span>, 
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">access</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>client</code></dt>
<dd><p>Client requesting the open.</p></dd>
<dt><code>options</code></dt>
<dd><p>Options for the open.  Set to zero.</p></dd>
<dt><code>access</code></dt>
<dd><p>Access level for the open.  Set to kIOStorageAccessReader or
kIOStorageAccessReaderWriter.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if the open was successful, false otherwise.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The handleOpen method grants or denies permission to access this object
to an interested client.  The argument is an IOStorageAccess value that
specifies the level of access desired -- reader or reader-writer.
</p>
<p>This method can be invoked to upgrade or downgrade the access level for
an existing client as well.  The previous access level will prevail for
upgrades that fail, of course.   A downgrade should never fail.  If the
new access level should be the same as the old for a given client, this
method will do nothing and return success.  In all cases, one, singular
close-per-client is expected for all opens-per-client received.
</p>
<p>This implementation replaces the IOService definition of handleOpen().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFilterScheme/read/void/(IOService*,UInt64,IOMemoryDescriptor*,IOStorageAttributes*,IOStorageCompletion*);   name=IOFilterScheme::read --><a name="//apple_ref/cpp/instm/IOFilterScheme/read/void/(IOService*,UInt64,IOMemoryDescriptor*,IOStorageAttributes*,IOStorageCompletion*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="read">read</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">read</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">client</span>, 
    <!-- a --><span class="type">UInt64</span><!-- /a --> <span class="param">byteStart</span>, 
    <a href="../../../IOMemoryDescriptor_h/Classes/IOMemoryDescriptor/index.html#//apple_ref/cpp/cl/IOMemoryDescriptor" target="_top" class="type"><span class="type">IOMemoryDescriptor</span></a> <span class="type">*</span><span class="param">buffer</span>, 
    <a href="../../../IOStorage_h/index.html#//apple_ref/c/tag/IOStorageAttributes" target="_top" class="type"><span class="type">IOStorageAttributes</span></a> <span class="type">*</span><span class="param">attributes</span>, 
    <a href="../../../IOStorage_h/index.html#//apple_ref/c/tag/IOStorageCompletion" target="_top" class="type"><span class="type">IOStorageCompletion</span></a> <span class="type">*</span><span class="param">completion</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>client</code></dt>
<dd><p>Client requesting the read.</p></dd>
<dt><code>byteStart</code></dt>
<dd><p>Starting byte offset for the data transfer.</p></dd>
<dt><code>buffer</code></dt>
<dd><p>Buffer for the data transfer.  The size of the buffer implies the size of
the data transfer.</p></dd>
<dt><code>attributes</code></dt>
<dd><p>Attributes of the data transfer.  See IOStorageAttributes.  It is the
responsibility of the callee to maintain the information for the duration
of the data transfer, as necessary.</p></dd>
<dt><code>completion</code></dt>
<dd><p>Completion routine to call once the data transfer is complete.  It is the
responsibility of the callee to maintain the information for the duration
of the data transfer, as necessary.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Read data from the storage object at the specified byte offset into the
specified buffer, asynchronously.   When the read completes, the caller
will be notified via the specified completion action.
</p>
<p>The buffer will be retained for the duration of the read.
</p>
<p>For simple filter schemes, the default behavior is to simply pass the
read through to the provider media.  More complex filter schemes such
as RAID will need to do extra processing here.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFilterScheme/synchronizeCache/IOReturn/(IOService*);   name=IOFilterScheme::synchronizeCache --><a name="//apple_ref/cpp/instm/IOFilterScheme/synchronizeCache/IOReturn/(IOService*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="synchronizeCache">synchronizeCache</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">synchronizeCache</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">client</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>client</code></dt>
<dd><p>Client requesting the cache synchronization.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the status of the cache synchronization.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Flush the cached data in the storage object, if any, synchronously.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFilterScheme/write/void/(IOService*,UInt64,IOMemoryDescriptor*,IOStorageAttributes*,IOStorageCompletion*);   name=IOFilterScheme::write --><a name="//apple_ref/cpp/instm/IOFilterScheme/write/void/(IOService*,UInt64,IOMemoryDescriptor*,IOStorageAttributes*,IOStorageCompletion*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="write">write</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">write</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">client</span>, 
    <!-- a --><span class="type">UInt64</span><!-- /a --> <span class="param">byteStart</span>, 
    <a href="../../../IOMemoryDescriptor_h/Classes/IOMemoryDescriptor/index.html#//apple_ref/cpp/cl/IOMemoryDescriptor" target="_top" class="type"><span class="type">IOMemoryDescriptor</span></a> <span class="type">*</span><span class="param">buffer</span>, 
    <a href="../../../IOStorage_h/index.html#//apple_ref/c/tag/IOStorageAttributes" target="_top" class="type"><span class="type">IOStorageAttributes</span></a> <span class="type">*</span><span class="param">attributes</span>, 
    <a href="../../../IOStorage_h/index.html#//apple_ref/c/tag/IOStorageCompletion" target="_top" class="type"><span class="type">IOStorageCompletion</span></a> <span class="type">*</span><span class="param">completion</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>client</code></dt>
<dd><p>Client requesting the write.</p></dd>
<dt><code>byteStart</code></dt>
<dd><p>Starting byte offset for the data transfer.</p></dd>
<dt><code>buffer</code></dt>
<dd><p>Buffer for the data transfer.  The size of the buffer implies the size of
the data transfer.</p></dd>
<dt><code>attributes</code></dt>
<dd><p>Attributes of the data transfer.  See IOStorageAttributes.  It is the
responsibility of the callee to maintain the information for the duration
of the data transfer, as necessary.</p></dd>
<dt><code>completion</code></dt>
<dd><p>Completion routine to call once the data transfer is complete.  It is the
responsibility of the callee to maintain the information for the duration
of the data transfer, as necessary.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Write data into the storage object at the specified byte offset from the
specified buffer, asynchronously.   When the write completes, the caller
will be notified via the specified completion action.
</p>
<p>The buffer will be retained for the duration of the write.
</p>
<p>For simple filter schemes, the default behavior is to simply pass the
write through to the provider media. More complex filter schemes such
as RAID will need to do extra processing here.
<!-- end discussion -->
</p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOFilterScheme_h/Classes/IOFilterScheme/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOFilterScheme_h/Classes/IOFilterScheme/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOFilterScheme_h/Classes/IOFilterScheme/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&#160;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2008-12-19
</div>
<!-- headerDoc=cl; uid=//apple_ref/cpp/cl/IOFilterScheme;  name=IOFilterScheme--><a name="//apple_ref/cpp/cl/IOFilterScheme"></a>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Customizing the Default Error Behavior</TITLE></HEAD><BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../index.html" target="_top">Documentation</a> <b>></b> <a href="../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.3.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.5.html"><img src="next.gif" border="0" alt="Next"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606100"> </A><A NAME="27053"> </A>Customizing the Default Error Behavior</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606101"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606102"> </A>Describes how to replace the default WebObjects error page with more user-friendly pages.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=612611"> </A>Description</H2><P CLASS="Body"><A NAME="pgfId=612612"> </A>By default, WebObjects displays a standard error page in the browser when an application error occurs. This page provides useful debugging information, but generally shouldn't be seen by end users of the application. Most deployed sites use one or more custom error pages.</P><P CLASS="Body"><A NAME="pgfId=612704"> </A>Custom error pages can be provided in your application in two ways. The first way is to replace the default WOExceptionPage component. While this method requires no coding, it causes all WebObjects applications to display your custom page when an error occurs. Another way to provide custom error behavior is to override the exception handlers in the WOApplication class. Although this method requires some coding, it can display different error pages for different types of exceptions, and it does not affect the behavior of other WebObjects applications.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=612685"> </A>Replacing the WOExceptionPage Component</H3><P CLASS="Body"><A NAME="pgfId=612672"> </A>The default WebObjects error page is defined in <TT CLASS="Code">$NEXT_ROOT\Library\Frameworks\WOExtensions.framework\Resources\WOExceptionPage.wo</TT>. This component may be edited using WebObjects Builder. You should make a backup copy before you modify the default WebObjects error page.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=612673"> </A>Overriding the WOApplication Exception Handlers</H3><P CLASS="Body"><A NAME="pgfId=606109"> </A>The WOApplication class provides the following methods that you can override to show your own error page. These methods return a WOResponse object, which your code needs to provide. The example code shows how to override these exception handling methods and redirect WebObjects to different pages depending on the type of exceptions that occur.</P><TABLE BORDER="1" CELLPADDING="3"><B><CAPTION><P CLASS="TableTitle"><A NAME="pgfId=613175"> </A>WOApplication class methods</P></CAPTION></B><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="CellHeading"><A NAME="pgfId=613179"> </A>Method		 		Invoked</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="CellHeading"><A NAME="pgfId=613181"> </A>When</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613183"> </A><TT CLASS="Code">handleSessionCreationError</TT></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613185"> </A>The application needs to create a new session but cannot.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613187"> </A><TT CLASS="Code">handleSessionRestorationError</TT>		</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613189"> </A>The application receives a request from a session that has timed out.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613191"> </A><TT CLASS="Code">handlePageRestorationError</TT></P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613193"> </A>	The application tries to access an existing page but cannot. Usually, this occurs when the user has backtracked beyond the limit set by setPageCacheSize() and setPageRefreshOnBacktrackEnabled() is set to NO.</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613195"> </A><TT CLASS="Code">handleException</TT>	</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="CellBody"><A NAME="pgfId=613197"> </A>The application receives any exception.</P></TD></TR></TABLE><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=627516"> </A>Exception handler (Java)</H4><PRE CLASS="Code"><A NAME="pgfId=627517"> </A>public WOResponse handleException (java.lang.Throwable anException,<A NAME="pgfId=627520"> </A>    WOContext aContext) {<A NAME="pgfId=627535"> </A><A NAME="pgfId=627541"> </A>    WOComponent errorPage;<A NAME="pgfId=627550"> </A>    String exceptionDescription = anException.toString();<A NAME="pgfId=627555"> </A><A NAME="pgfId=627560"> </A>    if (exceptionDescription.indexOf(&quot;EOValidationException&quot;) &gt; -1) {<A NAME="pgfId=627565"> </A>        System.err.println (&quot;validation error&quot;);<A NAME="pgfId=627570"> </A>        errorPage = pageWithName(&quot;ValErrorPage&quot;,aContext);<A NAME="pgfId=627575"> </A>    } else {<A NAME="pgfId=627580"> </A>      System.err.println (&quot;error&quot; + exceptionDescription);<A NAME="pgfId=627584"> </A>      errorPage = pageWithName(&quot;ErrorPage&quot;,aContext);<A NAME="pgfId=627585"> </A>    }<A NAME="pgfId=627586"> </A>    WOResponse response = errorPage.generateResponse();<A NAME="pgfId=627587"> </A>    return response;<A NAME="pgfId=627593"> </A>}</PRE></DIV></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=627498"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606117"> </A><A HREF="ProgrammingTopics.3.html#14344" CLASS="XRef">Understanding the Default WebObjects Error Page</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=622960"> </A>WOApplication class specification in the <EM CLASS="Emphasis">WebObjects Framework Reference</EM></LI><LI CLASS="Bulleted"><A NAME="pgfId=622965"> </A>WOResponse class specification in the <EM CLASS="Emphasis">WebObjects Framework Reference</EM></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606119"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606120"> </A>	How do I change the default WebObjects error page?</LI><LI CLASS="Bulleted"><A NAME="pgfId=622970"> </A>How can I trap exceptions in a WebObjects application?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606121"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606122"> </A>Error</LI><LI CLASS="Bulleted"><A NAME="pgfId=606124"> </A>Exception</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606125"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=613534"> </A>22 July, 1998. John Malach. First Draft.</P><P CLASS="Body"><A NAME="pgfId=613523"> </A>15 July, 1998. Carmine Marino. Exception Handling Code.</P><P CLASS="Body"><A NAME="pgfId=612768"> </A>27 October, 1998. Clif Liu. Second Draft.</P></DIV><hr alt="">&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.3.html"><img src="previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.5.html"><img src="next.gif" border="0" alt="Next"></A><!-- start of footer --><!--#include file="footer" --><!-- end of footer --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
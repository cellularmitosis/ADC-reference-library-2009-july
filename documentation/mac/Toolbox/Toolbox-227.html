<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>NewCWindow(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING227></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-226.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-228.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-188.html"><B>Chapter 4 - Window Manager</B></A> / <A HREF="Toolbox-213.html"><B>Window Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-221.html"><B>Window Manager Routines</B></A> / <A HREF="Toolbox-224.html"><B>Creating Windows</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING227-0></A>
<H3><A NAME=MARKER-9-361></A>NewCWindow</H3>
 <A NAME=MARKER-11-362></A><A NAME=MARKER-2-363></A>You can use the <CODE>NewCWindow</CODE> function to create a window with a specified list of characteristics.<P>
<PRE>
FUNCTION NewCWindow (wStorage: Ptr; boundsRect: Rect;
                     title: Str255; visible: Boolean;
                     procID: Integer; behind: WindowPtr;
                     goAwayFlag: Boolean;
                     refCon: LongInt): WindowPtr;
</PRE>
<DL>
<DT>wStorage
<DD> A pointer to the window record. If you specify <CODE>NIL</CODE> as the value of <CODE>wStorage</CODE>, <CODE>NewCWindow</CODE> allocates the window record as a nonrelocatable object in the application heap. You can reduce the chances of heap fragmentation by allocating memory from a block of memory reserved for this purpose by your application and passing a pointer to it in the <CODE>wStorage</CODE> parameter.
<DT>boundsRect
<DD> A rectangle, in global coordinates, specifying the window's initial size and location. This parameter becomes the port rectangle of the window's graphics port. For the standard window types, the <CODE>boundsRect</CODE> field defines the content region of the window. The <CODE>NewCWindow</CODE> function places the origin of the local coordinate system at the upper-left corner of the port rectangle.
<DT><B>Note</B>
<DD>The <CODE>NewCWindow</CODE> function actually calls the QuickDraw procedure <CODE>OpenCPort</CODE> to create the graphics port. The bitmap, pen pattern, <BR>and other characteristics of the window's graphics port are the same <BR>as the default values set by <CODE>OpenCPort</CODE>, except for the character font, which is set to the application font instead of the system font. <EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
<DT><CODE>title</CODE>
<DD> A string that specifies the window's title.
<DT>
<DD> If the title is too long to fit in the title bar, the title is truncated. If the window has a close box, characters are truncated at the end of the title; if there's no close box, the title is centered and truncated at both ends.
<DT>
<DD> To suppress the title in a window with a title bar, pass an empty string, not <CODE>NIL</CODE>, in the <CODE>title</CODE> parameter.
<DT>visible
<DD> A Boolean value indicating visibility status: <CODE>TRUE</CODE> means that the Window Manager displays the window; <CODE>FALSE</CODE> means it does not.
<DT>
<DD> If the value of the <CODE>visible</CODE> parameter is <CODE>TRUE</CODE>, the Window Manager draws a new window as soon as the window exists. The Window Manager first calls the window definition function to draw the window frame. If the value of the <CODE>goAwayFlag</CODE> parameter is also <CODE>TRUE</CODE> and the window is frontmost (that is, if the value of the <CODE>behind</CODE> parameter is <CODE>Pointer(-1)</CODE>), the Window Manager instructs the window definition function to draw a close box in the window frame. After drawing the frame, the Window Manager generates an update event to trigger your application's drawing of the content region.
<DT>
<DD> When you create a window, you typically specify <CODE>FALSE</CODE> as the value of the <CODE>visible</CODE> parameter. When you're ready to display the window, you call the <CODE>ShowWindow</CODE> procedure, described on <A HREF=Toolbox-235.html#MARKER-9-388>page 4-80</A>.
<DT>procID
<DD> The window's definition ID, which specifies both the window definition function and the variation code within that definition function.
<DT>
<DD> The Window Manager supports nine standard window types, which <BR>are handled by two window definition functions. You can create windows of the standard types by specifying one of the window definition ID constants: 
</DL>
<PRE>
            CONST
               documentProc      = 0;  {standard document }
                                       { window, no zoom box}
               dBoxProc          = 1;  {alert box or modal }
                                       { dialog box}
               plainDBox         = 2;  {plain box}
               altDBoxProc       = 3;  {plain box with shadow}
               noGrowDocProc     = 4;  {movable window, }
                                       { no size box or zoom box}
               movableDBoxProc   = 5;  {movable modal dialog box}
               zoomDocProc       = 8;  {standard document window}
               zoomNoGrow        = 12; {zoomable, nonresizable }
                                       { window}
               rDocProc          = 16; {rounded-corner window}
</PRE>
<DL>
<DT>
<DD> For a description of the nine standard window types, see <A HREF=Toolbox-191.html#MARKER-9-26>"Types of Windows" beginning on page 4-8</A>.
<DT>
<DD> You can control the diameter of curvature of rounded-corner windows by adding an integer to the <CODE>rDocProc</CODE> constant, as described in <A HREF=Toolbox-293.html#MARKER-9-629>"The Window Resource" beginning on page 4-116</A>.
<DT><CODE>behind</CODE>
<DD> A pointer to the window that appears immediately in front of the new window on the desktop.
<DT>
<DD> To place a new window in front of all other windows on the desktop, specify a value of <CODE>Pointer(-1)</CODE>. When you place a new window in front of all others, <CODE>NewCWindow</CODE> removes highlighting from the previously active window, highlights the newly created window, and generates activate events that trigger your application's updating of both windows. Note that if you create an invisible window in front of all others on the desktop, the user sees no active window until you make the new window visible (or make another window active).
<DT>
<DD> To place a new window behind all other windows, specify a value of <CODE>NIL</CODE>.
<DT>goAwayFlag
<DD> A Boolean value that determines whether the window has a close box. If the value of <CODE>goAwayFlag</CODE> is <CODE>TRUE</CODE> and the window type supports a close box, the Window Manager draws a close box in the title bar and recognizes mouse clicks in the close region; if the value of <CODE>goAwayFlag</CODE> is <CODE>FALSE</CODE> or the window type does not support a close box, it does not. 
<DT>refCon
<DD> The window's reference constant, set and used only by your application. (See <A HREF=Toolbox-202.html#MARKER-9-133>"Managing Multiple Windows" beginning on page 4-23</A> for some suggested ways to use the <CODE>refCon</CODE> parameter.)
</DL>
<A NAME=HEADING227-23></A>
<H5>DESCRIPTION</H5>
 The <CODE>NewCWindow</CODE> function creates a window as specified by its parameters, adds it to the window list,  and returns a pointer to the newly created window record. You can use the returned window pointer to refer to this window in most Window Manager routines. If <CODE>NewCWindow</CODE> is unable to read the window definition function from the resource file, it returns <CODE>NIL</CODE>.<P>
 The <CODE>NewCWindow</CODE> function looks for a <CODE>'wctb'</CODE> resource with the same resource ID as the <CODE>'WIND'</CODE> resource. If it finds one, it uses the window color information in the <CODE>'wctb'</CODE> resource for coloring the window frame and highlighting.<P>
 If the window's definition function is not already in memory, <CODE>NewCWindow</CODE> reads it <BR>into memory and stores a handle to it in the window record. It allocates space for the structure and content regions of the window and asks the window definition function <BR>to calculate those regions.<P>
 Storing the characteristics of your windows as resources, especially window titles and window items, makes your application easier to localize.<P>
 The <CODE>NewCWindow</CODE> function creates a window in a color graphics port. Creating color windows whenever possible ensures that your windows appear on color monitors with whatever color options the user has selected. Before calling <CODE>GetNewCWindow</CODE>, verify that Color QuickDraw is available. Your application typically sets up its own set of global variables reflecting the system setup during initialization by calling the <CODE>Gestalt</CODE> function. <!--See the chapter <I><A HREF="../IMOverview/IMOverview-2.html">Inside Macintosh: Overview</A></I> for more information about establishing the local configuration.--><P>
 Note that the function <CODE>NewCWindow</CODE> returns a value of type <CODE>WindowPtr</CODE>, not <CODE>CWindowPtr</CODE>.<P>
<A NAME=HEADING227-30></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 If you let the Window Manager create the window record in your application's heap, <BR>call the <CODE>DisposeWindow</CODE> procedure to close the window and dispose of its window record. If you allocated the memory for the window record yourself and passed a <BR>pointer to <CODE>NewCWindow</CODE>, use the <CODE>CloseWindow</CODE> procedure to close the window and <BR>the <CODE>DisposePtr</CODE> procedure, documented in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I>, to dispose of the window record.<A NAME=MARKER-2-308></A><P>
<A NAME=HEADING227-32></A>
<H5>SEE ALSO</H5>
 For the procedures for closing a window and removing the structures from memory, see the descriptions of the <CODE>DisposeWindow</CODE> procedure on <A HREF=Toolbox-258.html#MARKER-9-489>page 4-97</A>, the <CODE>CloseWindow</CODE> procedure on <A HREF=Toolbox-257.html#MARKER-9-483>page 4-96</A>, and the <CODE>DisposePtr</CODE> procedure in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-226.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-228.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

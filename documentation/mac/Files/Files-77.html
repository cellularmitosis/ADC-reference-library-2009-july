<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Volume Searching (IM: F)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING77></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Files-76.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-78.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Files-2.html"><B>Files</B></A> / <BR><DD><A HREF="Files-72.html"><B>Chapter 2 - File Manager</B></A> / <A HREF="Files-73.html"><B>About the File Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING77-0></A>
<H2>Volume Searching</H2>
 The File Manager provides several routines that you can use to search a volume for files or directories having specific characteristics. For example, you can search for all files with modification dates of two days ago or less or all directories with the string "Temp" in their names.<P>
 In general, you should avoid searching entire volumes, because a search of large volumes can consume significant amounts of time. Suppose you are looking for a particular file (for example, a dictionary file against which your application needs to check the spelling of a document). In this case, you can save time and increase the chances of finding the correct file by storing and later resolving an alias record that describes the desired file. See the chapter "Alias Manager" in this book for details on using alias records.<P>
 Alternatively, suppose you need to find the location of a standard system directory, such as the Preferences folder or the Temporary Items folder. To perform this search most efficiently, you should use the <CODE>FindFolder</CODE> function. See the chapter "Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> for details.<P>
 In some cases, however, you do need to search volumes. For instance, a backup utility needs to search an entire volume to find which files and directories, if any, might need to be backed up. In these cases, you can choose either of two general search strategies: you can search the volume's catalog by calling the <CODE>PBCatSearch</CODE> function, or you can use a recursive, indexed search by calling the <CODE>PBGetCatInfo</CODE> function (see <A HREF=#MARKER-9-175>Table 2-2</A>).
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-175></A><B>Table 2-7 Routines for manipulating working directories</B><A NAME=MARKER-2-176></A></CAPTION>
<TH>Routine<TH>Description<TR>
<TD>PBCatSearch<TD>Search a volume's catalog file for files or directories.<TR>
<TD>PBGetCatInfo<TD>Get information about a single catalog file entry.</TABLE>
<P>
 Using the <CODE>PBCatSearch</CODE> function is the fastest and most reliable way to search the catalog file of an HFS volume for files and directories satisfying certain criteria. The <CODE>PBCatSearch</CODE> function returns a list of <CODE>FSSpec</CODE> records describing the files or directories that match the criteria specified by your application.<P>
 However, <CODE>PBCatSearch</CODE> is not available on all volumes or in all versions of the <BR>File Manager. See <A HREF=Files-90.html#MARKER-9-325>"Determining the Features of the File Manager" on page 2-32</A> <BR>for instructions on how to determine whether the system software and the target <BR>volume both support the <CODE>PBCatSearch</CODE> function.<P>
<DL>
<DT><B>Note</B>
<DD>The <CODE>PBCatSearch</CODE> function is available on all volumes that support the AppleTalk Filing Protocol (AFP) version 2.1. This includes volumes and directories shared using the file sharing software introduced in system software version 7.0 and using the AppleShare 3.0 file server software.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 In environments where <CODE>PBCatSearch</CODE> is not available, you'll need to do a search that recursively descends the directory hierarchy and reads through the catalog entries of all files and directories located in each directory in that hierarchy. You can do this by making indexed calls to the <CODE>PBGetCatInfo</CODE> function, which is supported by all system software versions and by all volumes. However, using this recursive, indexed search method is usually significantly slower than using the <CODE>PBCatSearch</CODE> function. (For example, a recursive, indexed search that takes over 6 minutes might take about 20 seconds using <CODE>PBCatSearch</CODE>.)<A NAME=MARKER-2-225></A><A NAME=MARKER-2-226></A><P>
 See <A HREF=Files-94.html#MARKER-9-355>"Searching a Volume"</A> beginning on <A HREF=Files-94.html#MARKER-9-355>page 2-38</A> for examples of using both <CODE>PBCatSearch</CODE> and <CODE>PBGetCatInfo</CODE> to search a volume for files and directories.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Files-76.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Files-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Files-390.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Files-78.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Files-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

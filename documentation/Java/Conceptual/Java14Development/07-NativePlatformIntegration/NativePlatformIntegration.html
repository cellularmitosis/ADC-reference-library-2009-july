<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Java Development Guide for Mac OS X: Mac OS X Integration for Java</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Mac OS X Integration for Java"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001909" title="Mac OS X Integration for Java"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000425" target="_top">Java</a> &gt; <a href="../index.html" target="_top">Java Development Guide for Mac OS X</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../03-JavaDeployment/JavaDeployment.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../04-JavaUIToolkits/JavaUIToolkits.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40001909-SW1" title="Mac OS X Integration for Java"></a><hr /><H1>Mac OS X Integration for Java</H1><p>The more your application fits in with the native environment, the less users have to learn unique behaviors to use your application. A great application looks and feels like an extension of the platform it runs on. This article discusses a few details that can help you make your application look and feel like it is an integral part of Mac OS X.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="NativePlatformIntegration.html#//apple_ref/doc/uid/TP40001909-211867-BCIBDHFJ">Making User Interface Decisions</a>
				
			<br/>
			
        
			
			
				<a href="NativePlatformIntegration.html#//apple_ref/doc/uid/TP40001909-212907-TPXREF140">Apple Events and AppleScript</a>
				
			<br/>
			
        
			
			
				<a href="NativePlatformIntegration.html#//apple_ref/doc/uid/TP40001909-212952-TPXREF134">System Properties</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001909-211867" title="Making User Interface Decisions"></a><a name="//apple_ref/doc/uid/TP40001909-211867-BCIBDHFJ" title="Making User Interface Decisions"></a><h2>Making User Interface Decisions</h2><p>Java SE cross-platform design demands a lot of flexibility from the user interface to accommodate multiple operating systems. The Aqua user interface, on the other hand, is streamlined to provide the absolute best user experience in Mac OS X. </p><p>This section aims to help you make the right user interface decisions, so that your Java application will look like a Mac OS X native application, and will perform almost as well as one, too. In fact, by following these same suggestions, your application can approach the look and performance of native applications on other platforms as well. The topics covered here represent just a small subset of design decision topics, but they are high-visibility issues that are often encountered in Java applications. The complete guidelines for the Aqua user interface can be found in<em><a href="../../../../UserExperience/Conceptual/AppleHIGuidelines/index.html#//apple_ref/doc/uid/20000957" target="_top">Apple Human Interface Guidelines</a></em>. For information on customization options for Swing components in the Aqua Look and Feel, see “<em><a href="../../../../../technotes/tn2007/tn2196.html#//apple_ref/doc/uid/DTS10004439" target="_top">New Control Styles available within J2SE 5.0 on Mac OS X 10.5</a></em>”.</p><a name="//apple_ref/doc/uid/TP40001909-211884" title="Working with Menus"></a><a name="//apple_ref/doc/uid/TP40001909-211884-TPXREF130" title="Working with Menus"></a><h3>Working with Menus</h3><p>The appearance and behavior of menu items varies across platforms. This section offers some techniques for improving how your Java menus are presented, and how they perform, specifically in Mac OS X.</p><a name="//apple_ref/doc/uid/TP40001909-211899" title="The Menu Bar"></a><a name="//apple_ref/doc/uid/TP40001909-211899-TPXREF145" title="The Menu Bar"></a><h4>The Menu Bar</h4><p>Removing menus from your windows and putting them in the menu bar is highly encouraged, but that approach does not perfectly emulate the native experience of Mac OS X menus. In Mac OS X, a native application’s menu bar is always visible when an application is the active application, whether or not any windows are currently open. In Java for Mac OS X, the menus in the menu bar are associated with a top-level frame, and the menus will disappear if the frame closes.</p><a name="//apple_ref/doc/uid/TP40001909-211936" title=" The Application Menu"></a><a name="//apple_ref/doc/uid/TP40001909-211936-TPXREF144" title=" The Application Menu"></a><h4> The Application Menu</h4><p>Any Java application that uses AWT/Swing or is packaged in a double-clickable application bundle is automatically launched with an application menu similar to native applications in Mac OS X. This application menu, by default, contains the full name of the main class as the title. This name can be changed using the <code>-Xdock:name</code> command-line property, or it can be set in the information property list file for your application as the <code>CFBundleName</code> value. For more on <code>Info.plist</code> files, see <span class="content_text"><a href="../03-JavaDeployment/JavaDeployment.html#//apple_ref/doc/uid/TP40001885-208677">“A Java Application’s Information Property List File.”</a></span> According to the Aqua guidelines, the name you specify for the application menu should be the simplest name of the application (generally no more than 16 characters) and should not include extraneous information like a company name. <span class="content_text">Figure 1</span> shows an application menu.</p><br/><div><a name="//apple_ref/doc/uid/TP40001909-211967-TPXREF115" title="Figure 1Application menu for a Java application in Mac OS X"></a><p><a name="//apple_ref/doc/uid/TP40001909-211967" title="Figure 1Application menu for a Java application in Mac OS X"></a><strong>Figure 1&nbsp;&nbsp;</strong>Application menu for a Java application in Mac OS X</p><img src = "../art/application_menu.jpg" alt = "Application menu for a Java application in Mac OS X" ></div><br/><p>The next step to customizing your application menu is to have your own handling code called when certain items in the application menu are chosen. Apple provides functionality for this in the<code> com.apple.eawt</code> package. The Application and ApplicationAdaptor classes provide a way to handle the Preferences, About, and Quit items.</p><p>For more information see <span class="content_text"><a href="http://developer.apple.com/documentation/Java/Reference/1.5.0/appledoc/api/index.html" target="_top">J2SE 5.0 Apple Extensions Reference</a></span>. Examples of how to use these can also be found in a default Java application project in Xcode. Just open a new project in Xcode by selecting Java Application from the Organizer window. The resulting project uses all of these handlers. For more on the Xcode Organizer, see <span class="content_text"><a href="../02-JavaDevTools/JavaDevTools.html#//apple_ref/doc/uid/TP40001884-SW3">“The Xcode Organizer.”</a></span></p><p>If your application is to be deployed on other platforms, where Preferences, Quit, and About are elsewhere on the menu bar (in a File or Edit menu, for example), you should make this placement conditional based on the host platform’s operating system. Conditional placement is preferable to just adding a second instance of each of these menu items for Mac OS X. This minor modification can go a long way to making your Java application feel more like a native application in Mac OS X.</p><a name="//apple_ref/doc/uid/TP40001909-212006" title=" The Window Menu"></a><a name="//apple_ref/doc/uid/TP40001909-212006-TPXREF143" title=" The Window Menu"></a><h4> The Window Menu</h4><p><em><a href="../../../../UserExperience/Conceptual/AppleHIGuidelines/index.html#//apple_ref/doc/uid/20000957" target="_top">Apple Human Interface Guidelines</a></em> suggests that all Mac OS X applications should provide a Window menu to keep track of all currently open windows. A Window menu should contain a list of windows, with a checkmark next to the active window. Selection of a given Window menu item should result in the corresponding window being brought to the front. New windows should be added to the menu, and closed windows should be removed. The ordering of the menu items is typically the order in which the windows are opened. <em><a href="../../../../UserExperience/Conceptual/AppleHIGuidelines/index.html#//apple_ref/doc/uid/20000957" target="_top">Apple Human Interface Guidelines</a></em> has more specific guidance on the Window menu.</p><a name="//apple_ref/doc/uid/TP40001909-212032" title=" Accelerators (Keyboard Shortcuts)"></a><a name="//apple_ref/doc/uid/TP40001909-212032-TPXREF131" title=" Accelerators (Keyboard Shortcuts)"></a><h4> Accelerators (Keyboard Shortcuts)</h4><p>Do not set menu item accelerators with an explicit <code>javax.swing.KeyStroke</code> specification. Modifier keys vary from platform to platform. Instead, use the <code>java.awt.Tookit.getMenuShortcutKeyMask</code> method to ask the system for the appropriate key rather than defining it yourself. </p><p>When calling this method, the current platform’s Toolkit implementation returns the proper mask for you. This single call checks for the current platform and then guesses which key is correct. For example, in the case of adding a Copy item to a menu, using <code>getMenuShortcutKeyMask</code> means that you can replace the complexity of <span class="content_text">Listing 1</span> with the simplicity of <span class="content_text">Listing 2</span>.</p><a name="//apple_ref/doc/uid/TP40001909-212072-TPXREF121" title="Listing 1Explicitly setting accelerators based on the host platform"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40001909-212072" title="Listing 1Explicitly setting accelerators based on the host platform"></a><strong>Listing 1&nbsp;&nbsp;</strong>Explicitly setting accelerators based on the host platform</p><div class="codesample"><table><tr><td scope="row"><pre>JMenuItem jmi = new JMenuItem("Copy");<span></span></pre></td></tr><tr><td scope="row"><pre>    String vers = System.getProperty("os.name").toLowerCase();<span></span></pre></td></tr><tr><td scope="row"><pre>    if (s.indexOf("windows") != -1) {<span></span></pre></td></tr><tr><td scope="row"><pre>       jmi.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, Event.CTRL_MASK));<span></span></pre></td></tr><tr><td scope="row"><pre>    } else if (s.indexOf("mac") != -1) {<span></span></pre></td></tr><tr><td scope="row"><pre>       jmi.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, Event.META_MASK));<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001909-212120-BCIEJCJI" title="Listing 2Using getMenuShortcutKeyMask to set modifier keys"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40001909-212120" title="Listing 2Using getMenuShortcutKeyMask to set modifier keys"></a><strong>Listing 2&nbsp;&nbsp;</strong>Using <code>getMenuShortcutKeyMask</code> to set modifier keys</p><div class="codesample"><table><tr><td scope="row"><pre>JMenuItem jmi = new JMenuItem("Copy");<span></span></pre></td></tr><tr><td scope="row"><pre>jmi.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C,<span></span></pre></td></tr><tr><td scope="row"><pre>    Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()));<span></span></pre></td></tr></table></div><p>The default modifier key in Mac OS X is the Command key. There may be additional modifier keys like Shift, Option, or Control, but the Command key is the primary key that alerts an application that a command, not regular input follows. When assigning keyboard shortcuts to items for menu items, make sure that you are not overriding any of the keyboard commands that Macintosh users are accustomed to. See <em><a href="../../../../UserExperience/Conceptual/AppleHIGuidelines/index.html#//apple_ref/doc/uid/20000957" target="_top">Apple Human Interface Guidelines</a></em> for the definitive list of the most common and reserved keyboard shortcuts (keyboard equivalents).</p><p>You should make your keyboard shortcuts conditional based on the current platform, because standard shortcuts vary across platforms.</p><a name="//apple_ref/doc/uid/TP40001909-212166" title="Mnemonics"></a><a name="//apple_ref/doc/uid/TP40001909-212166-TPXREF146" title="Mnemonics"></a><h4>Mnemonics</h4><p>The <code>JMenuItem</code> class inherits the concept of mnemonics from the <code>JAbstractButton</code> class. In the context of menus, mnemonics are shortcuts to menus and their contents, which are executed by using a modifier key in conjunction with a single letter. When you set a mnemonic in a menu item, Java underscores the mnemonic letter in the title of the <code>JMenuItem</code> or <code>JMenu</code> component when the Option key is held down. You are discouraged from using mnemonics in Mac OS X, because they violate the principles of <em><a href="../../../../UserExperience/Conceptual/AppleHIGuidelines/index.html#//apple_ref/doc/uid/20000957" target="_top">Apple Human Interface Guidelines</a></em>. If you are developing a Java application for multiple platforms and some of those platforms recommend the use of mnemonics, just include a single <code>setMnemonics()</code> method that is conditionally called (based on the platform) when constructing your interface.</p><p>How then do you get the functionality of mnemonics without using Java’s mnemonics? If you have defined a keystroke sequence in the <code>setAccelerator</code> method for a menu item, that key sequence is automatically entered into your menus. For example, <span class="content_text">Listing 3</span> sets an accelerator of Command-Shift-S for a Save As menu.</p><a name="//apple_ref/doc/uid/TP40001909-212278-BCIJDGFE" title="Listing 3Setting an accelerator"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40001909-212278" title="Listing 3Setting an accelerator"></a><strong>Listing 3&nbsp;&nbsp;</strong>Setting an accelerator</p><div class="codesample"><table><tr><td scope="row"><pre>JMenuItem saveAsItem = new JMenuItem("Save As...");<span></span></pre></td></tr><tr><td scope="row"><pre>    saveAsItem.setAccelerator(<span></span></pre></td></tr><tr><td scope="row"><pre>        KeyStroke.getKeyStroke(KeyEvent.VK_S, (java.awt.event.InputEvent.SHIFT_MASK | (Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()))));<span></span></pre></td></tr><tr><td scope="row"><pre>    saveAsItem.addActionListener(new ActionListener(  ) {<span></span></pre></td></tr><tr><td scope="row"><pre>      public void actionPerformed(ActionEvent e) { System.out.println("Save As...") ; }<span></span></pre></td></tr><tr><td scope="row"><pre>    });<span></span></pre></td></tr><tr><td scope="row"><pre>    fileMenu.add(saveAsItem);<span></span></pre></td></tr></table></div><p><span class="content_text">Figure 2</span> shows the result of this code, along with similar settings for the other items. Note that the symbols representing the Command and Shift keys are automatically included.</p><br/><div><a name="//apple_ref/doc/uid/TP40001909-212326-BCIFGGFC" title="Figure 2A File menu"></a><p><a name="//apple_ref/doc/uid/TP40001909-212326" title="Figure 2A File menu"></a><strong>Figure 2&nbsp;&nbsp;</strong>A File menu</p><img src = "../art/file_menu.jpg" alt = "A File menu" ></div><br/><p>In addition to accelerators, Mac OS X provides keyboard and assistive-device navigation to the menus. Preferences for these features are set in the Keyboard and Universal Access panes of System Preferences.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001909-SW3" title="Note"></a><p><strong>Note:</strong>&nbsp;Since the <code>ALT_MASK</code> modifier evaluates to the Option key on the Macintosh, Control-Alt masks set for Windows become Command-Option masks if you use <code>getMenuShortcutKeyMask</code> in conjunction with <code>ALT_MASK</code>.</p></div><a name="//apple_ref/doc/uid/TP40001909-212371" title="Menu Item Icons and Special Characters"></a><a name="//apple_ref/doc/uid/TP40001909-212371-TPXREF133" title="Menu Item Icons and Special Characters"></a><h4>Menu Item Icons and Special Characters</h4><p>Menu item icons are available and functional in Mac OS X, via Swing. They are not a standard part of the Aqua interface, although some applications do display them—most notably the Finder in the Go menu. You may want to consider applying these icons conditionally based on platform.</p><p>Aqua specifies a specific set of special characters to be used in menus. See the information on using special characters in menus in <em><a href="../../../../UserExperience/Conceptual/AppleHIGuidelines/index.html#//apple_ref/doc/uid/20000957" target="_top">Apple Human Interface Guidelines</a></em>.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001909-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;<code>KeyEvent.getKeyText()</code> returns the unicode characters of the Command (Meta), Option (Alt), Control, and Shift keys, not the textual descriptions of those keys.</p></div><a name="//apple_ref/doc/uid/TP40001909-212396" title=" Contextual Menus"></a><a name="//apple_ref/doc/uid/TP40001909-212396-TPXREF116" title=" Contextual Menus"></a><h4> Contextual Menus</h4><p>Contextual menus, which are called pop-up menus in Java, are fully supported. In Mac OS X, they are triggered by a Control-click or a right-click. Even though both clicks trigger a contextual menu, they are not the same mouse event. In Windows, the right mouse button is the standard trigger for contextual menus.</p><p>The different triggers present in Mac OS X could result in fragmented and conditional code. One important aspect of both triggers is shared—the mouse click. To ensure that your program is interpreting the proper contextual–menu trigger, it is again a good idea to ask the AWT to do the interpreting for you, with <code>java.awt.event.MouseEvent.isPopupTrigger</code>.</p><p>The method is defined in <code>java.awt.event.MouseEvent</code> because you need to activate the contextual menu through a <code>java.awt.event.MouseListener</code> on a given component when a mouse event on that component is detected. The important thing to determine is how and when to detect the proper event. In Mac OS X, the pop-up trigger is set on <code>MOUSE_PRESSED</code>. In Windows it is set on <code>MOUSE_RELEASED</code>. For portability, both cases should be considered.</p><a name="//apple_ref/doc/uid/TP40001909-212451-TPXREF122" title="Listing 4Detecting contextual-menu activation"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40001909-212451" title="Listing 4Detecting contextual-menu activation"></a><strong>Listing 4&nbsp;&nbsp;</strong>Detecting contextual-menu activation</p><div class="codesample"><table><tr><td scope="row"><pre>JLabel label = new JLabel("I have a pop-up menu!");<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>label.addMouseListener(new MouseAdapter(){<span></span></pre></td></tr><tr><td scope="row"><pre>    public void mousePressed(MouseEvent e) {<span></span></pre></td></tr><tr><td scope="row"><pre>       evaluatePopup(e);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void mouseReleased(MouseEvent e) {<span></span></pre></td></tr><tr><td scope="row"><pre>       evaluatePopup(e);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    private void evaluatePopup(MouseEvent e) {<span></span></pre></td></tr><tr><td scope="row"><pre>       if (e.isPopupTrigger()) {<span></span></pre></td></tr><tr><td scope="row"><pre>          // show the pop-up menu...<span></span></pre></td></tr><tr><td scope="row"><pre>       }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>});<span></span></pre></td></tr></table></div><p>Like the application menu, contextual menus can differ between platforms. You should make the layout of your contextual menus conditional based on the platform.</p><p>When designing contextual menus, keep in mind that a contextual menu should never be the only way a user can access something. Contextual menus provide convenient access to often-used commands associated with an item, not the primary or sole access.</p><a name="//apple_ref/doc/uid/TP40001909-212560" title="Designing for Component Layout, Size, and Color"></a><a name="//apple_ref/doc/uid/TP40001909-212560-TPXREF117" title="Designing for Component Layout, Size, and Color"></a><h3>Designing for Component Layout, Size, and Color</h3><p>There are several key concepts to keep mind when designing the components in your user interface.</p><a name="//apple_ref/doc/uid/TP40001909-212573" title="Laying Out and Sizing Components"></a><a name="//apple_ref/doc/uid/TP40001909-212573-TPXREF147" title="Laying Out and Sizing Components"></a><h4>Laying Out and Sizing Components</h4><p>Do not explicitly set the x and y coordinates of components when placing them; instead make use of layout managers. The layout managers use abstracted location constants and determine the exact placement of these controls for a specific environment. Layout managers take into account the preferred sizes of each individual component while maintaining their placement relative to one another within the container.</p><p>In general, do not set component sizes explicitly. Each look and feel has its own font styles and sizes. These font sizes affect the required size of the component containing the text. Moving explicitly sized components to a new look and feel with a larger font size can cause problems. The safest way to make your components a proper size in a portable manner is to change to or add another layout manager, or to set the component’s minimum and maximum size to its preferred size. The <code>setSize()</code> and <code>getPreferredSize()</code> methods are useful when following the latter approach.</p><p>You can create both small and miniature versions of Swing controls in Mac OS X by setting the <code>sizeVariant</code> client property. See <em><a href="../../../../../technotes/tn2007/tn2196.html#//apple_ref/doc/uid/DTS10004439" target="_top">New Control Styles available within J2SE 5.0 on Mac OS X 10.5</a></em> for more information.</p><a name="//apple_ref/doc/uid/TP40001909-212605" title=" Coloring Components"></a><a name="//apple_ref/doc/uid/TP40001909-212605-TPXREF126" title=" Coloring Components"></a><h4> Coloring Components</h4><p>Because a given look and feel tends to have universal coloring and styling for most, if not all of its controls, you may be tempted to create custom components that match the look and feel of standard user interface classes. This approach is perfectly legal, but adds maintenance and portability costs. It is easy to set an explicit color that you think works well with the current look and feel. Changing to a different look and feel, though, may surprise you with an occasional nonstandard component. To ensure that your custom control matches standard components, query the <code>UIManager</code> class for the desired colors. One example is a custom window object that contains some standard lightweight components but wants to paint its uncovered background to match that of the rest of the application’s containers and windows. To do this, you can call</p><div class="codesample"><table><tr><td scope="row"><pre>myPanel.setBackground(UIManager.getColor("window"))<span></span></pre></td></tr></table></div><p>This call returns the color appropriate for the current look and feel.</p><a name="//apple_ref/doc/uid/TP40001909-212646" title="Working with Windows and Dialogs"></a><a name="//apple_ref/doc/uid/TP40001909-212646-TPXREF127" title="Working with Windows and Dialogs"></a><h3>Working with Windows and Dialogs</h3><p>Mac OS X window coordinates and insets are compatible with the JDK. Window bounds refer to the outside of the window’s frame. The coordinates of the window put (0,0) at the top left of the title bar. The <code>getInsets</code> method returns the amount by which content needs to be inset in the window to avoid the window border. This should affect only applications that are performing precision positioning of windows, especially full-screen windows.</p><p>Windows behave differently in Mac OS X than they do on other platforms. For example, an application can be open without having any windows. Windows minimize to the Dock, and windows with variable content always have scroll bars. This section highlights the windows details you should be aware of and discusses how to deal with window behavior in Mac OS X.</p><a name="//apple_ref/doc/uid/TP40001909-212670" title=" Use of the Multiple Document Interface"></a><a name="//apple_ref/doc/uid/TP40001909-212670-TPXREF114" title=" Use of the Multiple Document Interface"></a><h4> Use of the Multiple Document Interface</h4><p>The multiple document interface (MDI) model of the <code>javax.swing.JDesktopPane</code> object can provide a confusing user experience in Mac OS X. Therefore when building applications for Mac OS X, try to avoid using this class. Windows minimized in a <code>JDesktopPane</code> object move around as the pane changes size. In <code>JDesktopPane</code>, windows minimize to the bottom of the pane while independent windows minimize to the Dock. Furthermore, the pane restricts users from moving windows where they want. They are forced to deal with two different scopes of windows, those within the pane and the pane itself. Normally, Mac OS X users interact with applications through numerous free-floating, independent windows and a single menu bar at the top of the screen. Users can intersperse these windows with other application windows (from the same application or other applications) anywhere they want in their view, which includes the entire desktop. Users are not visually constrained to one area of the screen when using a particular application.</p><a name="//apple_ref/doc/uid/TP40001909-212701" title="Windows with Scroll Bars"></a><a name="//apple_ref/doc/uid/TP40001909-212701-TPXREF118" title="Windows with Scroll Bars"></a><h4>Windows with Scroll Bars</h4><p>In Mac OS X, scrollable document windows display a scrollbar whether or not there is enough content in the window to require scrolling (the scroller itself appears only when the content exceeds a window’s viewable area). To mimic this behavior in Java applications, place your content inside a scroll pane (<code>JScrollPane</code>). You do this because a Swing <code>JFrame</code> object by default has no scroll bars, no matter how it is resized. When you use <code>JScrollPane</code>, make sure you set the scrollbar policy to always display scrollbars (to mimic Mac OS X), as shown in <span class="content_text">Listing 5</span>.</p><a name="//apple_ref/doc/uid/TP40001909-212720-TPXREF123" title="Listing 5Setting JScrollBar policies to be more like those of Aqua"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40001909-212720" title="Listing 5Setting JScrollBar policies to be more like those of Aqua"></a><strong>Listing 5&nbsp;&nbsp;</strong>Setting <code>JScrollBar</code> policies to be more like those of Aqua</p><div class="codesample"><table><tr><td scope="row"><pre>JScrollPane jsp = new JScrollPane();<span></span></pre></td></tr><tr><td scope="row"><pre>jsp.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);<span></span></pre></td></tr><tr><td scope="row"><pre>jsp.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);<span></span></pre></td></tr></table></div><p>When you are using a host platform other than Mac OS X, you may find that the <code>JScrollBar</code> default policy, <code>AS_NEEDED</code>, more closely resembles its native behavior.</p><a name="//apple_ref/doc/uid/TP40001909-212760" title=" File-Choosing Dialogs"></a><a name="//apple_ref/doc/uid/TP40001909-212760-TPXREF119" title=" File-Choosing Dialogs"></a><h4> File-Choosing Dialogs</h4><p>File-choosing dialogs in Java applications are of two main types: dialogs created with <code>java.awt.FileDialog</code> and those created with <code>javax.swing.JFileChooser</code>. Although each has its advantages, <code>java.awt.FileDialog</code> makes your applications behave more like a native Mac OS X application. This dialog, shown in <span class="content_text">Figure 3</span>, looks much like a Finder window in Mac OS X.</p><br/><div><a name="//apple_ref/doc/uid/TP40001909-213161-BCIHEBIJ" title="Figure 3Dialog created with java.awt.FileDialog"></a><p><a name="//apple_ref/doc/uid/TP40001909-213161" title="Figure 3Dialog created with java.awt.FileDialog"></a><strong>Figure 3&nbsp;&nbsp;</strong>Dialog created with <code>java.awt.FileDialog</code></p><img src = "../art/awtfilechooser.jpg" alt = "Dialog created with java.awt.FileDialog" ></div><br/><p>The Swing dialog, shown in <span class="content_text">Figure 4</span>, looks much less like a Mac OS X dialog.</p><br/><div><a name="//apple_ref/doc/uid/TP40001909-213178-BCIIEDBC" title="Figure 4Dialog created with javax.swing.JFileChooser"></a><p><a name="//apple_ref/doc/uid/TP40001909-213178" title="Figure 4Dialog created with javax.swing.JFileChooser"></a><strong>Figure 4&nbsp;&nbsp;</strong>Dialog created with <code>javax.swing.JFileChooser</code></p><img src = "../art/swingfilechooser.jpg" alt = "Dialog created with javax.swing.jFileChooser" ></div><br/><p>Unless you need the functional advantages of <code>JFileChooser</code>, use <code>FileDialog</code> instead.</p><p>When using <code>FileDialog</code>, you may want a user to select a directory instead of a file. In this case, use the <code>apple.awt.fileDialogForDirectories</code> property with the <code>setProperty.invoke()</code> method on your <code>FileDialog</code> instance.</p><a name="//apple_ref/doc/uid/TP40001909-212857" title="Window-Modified Indicator"></a><h4>Window-Modified Indicator</h4><p>In Mac OS X, when a document has unsaved changes, the window’s close button displays a dot. Adopting this same approach, that is, using a window-modified indicator, in your application makes it look more like a Mac OS X native application and so conform to user expectations.</p><p>To display an indicator that a window was modified, you need to use the Swing property <code>Window.documentModified</code>. It can be set on any subclass of <code>JComponent</code> that implements a top-level window using the <code>putClientProperty()</code> method. The value of the property is either <code>Boolean.TRUE</code> or <code>Boolean.FALSE</code>.</p><p>For more on using the window-modified indicator in your application, review <em><a href="../../../../../technotes/tn2007/tn2196.html#//apple_ref/doc/uid/DTS10004439" target="_top">New Control Styles available within J2SE 5.0 on Mac OS X 10.5</a></em>.</p><a name="//apple_ref/doc/uid/TP40001909-212907" title="Apple Events and AppleScript"></a><a name="//apple_ref/doc/uid/TP40001909-212907-TPXREF140" title="Apple Events and AppleScript"></a><h2>Apple Events and AppleScript</h2><p>Mac OS X uses Apple events for interprocess communication. Apple events are high-level semantic events that an application can send to itself or other applications. AppleScript allows you to script actions based on these events. Without including native code in your Java application you can nevertheless let users take some level of control of your application through AppleScript. To do so, implement the <code>Application</code> and <code>ApplicationAdaptor</code> classes available in the <code>com.apple.eawt</code> package. By implementing the event handlers in the ApplicationAdaptor class, your application can generate and handle basic events such as Print and Open. Information on these two classes is available in <span class="content_text"><a href="http://developer.apple.com/documentation/Java/Reference/1.5.0/appledoc/api/index.html" target="_top">J2SE 5.0 Apple Extensions Reference</a></span>.</p><p>Java SE 6 also enables you to invoke AppleScript with the <code>javax.script</code> API. <span class="content_text"><a href="NativePlatformIntegration.html#//apple_ref/doc/uid/TP40001909-SW2">Listing 6</a></span> provides a sample implementation of this functionality. Full documentation for the API can be found at <span class="content_text"><a href="http://java.sun.com/javase/6/docs/api/javax/script/package-summary.html" target="_blank">http://java.sun.com/javase/6/docs/api/javax/script/package-summary.html</a></span>.  </p><a name="//apple_ref/doc/uid/TP40001909-SW2" title="Listing 6Invoking AppleScript with the javax.script API"></a><p class="codesample"><strong>Listing 6&nbsp;&nbsp;</strong>Invoking AppleScript with the <code>javax.script</code> API</p><div class="codesample"><table><tr><td scope="row"><pre>public static void main(String[] args) throws Throwable {
    String script = "say \"Hello from Java\"";
    
    ScriptEngineManager mgr = new ScriptEngineManager();
    ScriptEngine engine = mgr.getEngineByName("AppleScript");
    engine.eval(script);
}
<span></span></pre></td></tr></table></div>	<p>For more on AppleScript, see <em><a href="../../../../../referencelibrary/GettingStarted/GS_AppleScript/index.html#//apple_ref/doc/uid/TP30001085" target="_top">Getting Started with AppleScript</a></em>.</p><a name="//apple_ref/doc/uid/TP40001909-212952" title="System Properties"></a><a name="//apple_ref/doc/uid/TP40001909-212952-TPXREF134" title="System Properties"></a><h2>System Properties</h2><p>There are many Mac OS X–specific system properties you can set to modify the behavior of your Java application. A complete list of supported Mac OS X system properties, including how to use them, is available in <span class="content_text"><a href="../../../Reference/Java_PropertiesRef/Articles/JavaSystemProperties.html#//apple_ref/doc/uid/TP40001975" target="_top">Java System Properties</a></span>.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../03-JavaDeployment/JavaDeployment.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../04-JavaUIToolkits/JavaUIToolkits.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Java/Conceptual/Java14Development/07-NativePlatformIntegration/NativePlatformIntegration.html%3Fid%3DTP30001142-5.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Java/Conceptual/Java14Development/07-NativePlatformIntegration/NativePlatformIntegration.html%3Fid%3DTP30001142-5.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Java/Conceptual/Java14Development/07-NativePlatformIntegration/NativePlatformIntegration.html%3Fid%3DTP30001142-5.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

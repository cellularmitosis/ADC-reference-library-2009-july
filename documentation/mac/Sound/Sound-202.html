<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Including Pronunciation Dictionaries  (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING202></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-201.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-203.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-187.html"><B>Chapter 4 - Speech Manager</B></A> / <A HREF="Sound-193.html"><B>Using the Speech Manager</B></A></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="../../../referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING202-0></A>
<H2><A NAME=MARKER-9-262></A>Including Pronunciation Dictionaries <A NAME=MARKER-2-32></A></H2>
 <A NAME=MARKER-2-878></A>No matter how sophisticated a speech synthesis system is, there will always be words that it does not automatically pronounce correctly. A clear instance of words that are often mispronounced is the class of proper nouns (names of people, place names, and so on). The Speech Manager supports pronunciation dictionaries which allow applications to override the default pronunciations of words. A <B>pronunciation dictionary</B> is a list of words along with their associated pronunciations stored in a resource of resource type <CODE>'dict'</CODE>.<A NAME=MARKER-2-14></A><A NAME=MARKER-2-13></A><A NAME=MARKER-2-267></A><P>
 The application is free to store dictionaries in either the resource fork or the data fork of a file. The application is responsible for loading the individual dictionaries into RAM and then passing a handle to the dictionary data to the Speech Manager. The initial release of the Speech Manager, however, does not include any routines that can add entries to dictionaries or manipulate them in other ways. The Speech Manager does include a routine, the <CODE>UseDictionary</CODE> function, that you can use to install one or more pronunciation dictionaries in a speech channel.<P>
  A multimedia application might store such a pronunciation dictionary resource in its own resource fork to specify the pronunciations of selected words used in a narration. A word-processing application, meanwhile, could allow a user to add words to a pronunciation dictionary stored in the resource fork of a text file. Or, a text-services application dedicated to speech generation might include large specialized dictionaries--for example, of medical terms--to specify pronunciation of words in particular subject areas. Because the Speech Manager allows your application to install as many pronunciation dictionaries as desired in a speech channel, it can use pronunciation dictionaries in one or more of these ways.<A NAME=MARKER-2-28></A><P>
<DL>
<DT><B>Note</B>
<DD>The Dictionary Manager, described in <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I>, cannot be used with pronunciation dictionaries. <EM></EM><A NAME=MARKER-2-269></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Whenever a speech synthesizer needs to determine the proper phonemic representation for a particular word, it first looks for the word in its pronunciation dictionaries. Pronunciation dictionary entries contain information that enables precise conversion between text and the correct phoneme codes, as described in <A HREF=Sound-201.html#MARKER-9-240>"Phonemic Representation of Speech" beginning on page 4-32</A>. Pronunciation dictionary entries also provide stress, intonation, and other information to help speech synthesizers produce more natural speech, as described in <A HREF=Sound-201.html#MARKER-9-255>"Prosodic Control Symbols" beginning on page 4-34</A>. Note that you cannot use punctuation marks (as described in <A HREF=Sound-201.html#MARKER-9-75>Table 4-5</A>) in pronunciation dictionaries.<A NAME=MARKER-2-270></A><P>
 A single pronunciation dictionary entry cannot be used to specify the pronunciation of an entire phrase, because the Speech Manager checks its pronunciation dictionary on a word-by-word basis. Thus, the textual portion of a pronunciation dictionary entry must not contain any spaces.<A NAME=MARKER-2-5></A><P>
 If the pronunciation dictionaries installed in a speech channel do not include an indication of how a word should be pronounced, then the Speech Manager uses its own pronunciation rules and internal dictionary to pronounce the words. In general, you need to create a dictionary only for unusual words that your application requires but the Speech Manager ordinarily pronounces incorrectly. You might also allow a user who is not pleased with the default pronunciation of a word to add the correct pronunciation to a pronunciation dictionary. You can create a dictionary using MPW Rez or another appropriate tool. See <A HREF=Sound-264.html#MARKER-9-563>"The Pronunciation Dictionary Resource" beginning on page 4-89</A> for a discussion of the format of the pronunciation dictionary resource and the meaning of it fields.<A NAME=MARKER-2-272></A><P>
 To install a pronunciation dictionary resource in a speech channel, you must read the resource into memory and pass it to the <CODE>UseDictionary</CODE> function. Because the <CODE>UseDictionary</CODE> function requires that you specify a speech channel, you might need to reinstall the dictionary whenever your application allocates a new speech channel or whenever it resets an existing speech channel. <A HREF=#MARKER-9-273>Listing 4-9</A> shows how you can use the <CODE>UseDictionary</CODE> function to install a pronunciation dictionary resource in a speech channel.<P>
<B>Listing 4-9  <A NAME=MARKER-9-273></A>Installing a pronunciation dictionary resource into a speech channel<A NAME=MARKER-2-274></A><A NAME=MARKER-2-275></A></B><P>
<PRE>
PROCEDURE MyUseDictionary (chan: SpeechChannel; resID: Integer);
VAR
   myDict:     Handle;                          {handle to dictionary data}
   myErr:      OSErr;
BEGIN
   myDict := GetResource('dict', resID);        {load the dictionary}
   IF (myDict &lt;&gt; NIL) AND (ResError = noErr) THEN
   BEGIN
      myErr := UseDictionary(chan, myDict);     {install the dictionary}
      IF myErr &lt;&gt; noErr THEN
         DoError(myErr);                        {respond to an error}
      ReleaseResource(myDict);                  {release the resource}
   END;
END;
</PRE>
 The <CODE>MyUseDictionary</CODE> procedure defined in <A HREF=#MARKER-9-273>Listing 4-9</A> attempts to find a resource of resource type <CODE>'dict'</CODE> with resource ID <CODE>resID</CODE> and uses the Resource Manager to read it into memory. If your application stores pronunciation dictionaries in the data fork of files, it can instead use analogous File Manager routines to read the data. If the data is read in correctly, <CODE>MyUseDictionary</CODE> calls the <CODE>UseDictionary</CODE> function to install the dictionary on the specified speech channel. Because the speech synthesizer copies all necessary data from the dictionary to its internal buffers, the application is free to release the memory occupied by the dictionary, as illustrated by the <CODE>ReleaseResource</CODE> call.<A NAME=MARKER-2-276></A><P>
 The pronunciation dictionary resource in <A HREF=#MARKER-9-277>Listing 4-10</A> consists of pronunciation dictionary entries in Rez format. Each entry specifies a word in textual format and its phonemic equivalent.<P>
<B>Listing 4-10  <A NAME=MARKER-9-277></A>A sample pronunciation dictionary resource</B><P>
<PRE>
resource 'dict' (1, &quot;TestDict&quot;) {
   smRoman, langEnglish, verUS, ThisSecond,
   {
      pron, {tx, &quot;ROOSEVELT&quot;,    ph, &quot;_1EHf_d1IY_1AAr&quot;},
      pron, {tx, &quot;CHELSEA&quot;,      ph, &quot;_C1EHls2IY&quot;},
      pron, {tx, &quot;AMHERST&quot;,      ph, &quot;_2UXmAXrst&quot;},
      pron, {tx, &quot;REDSOX&quot;,       ph, &quot;_r1EHd_s1AAks&quot;},
      pron, {tx, &quot;HALLOWEEN&quot;,    ph, &quot;_h1AAl2OW_w1IYn&quot;},
      pron, {tx, &quot;FELIX&quot;,        ph, &quot;_f1IYl2IHks_D2UX_k1AEt&quot;},
      pron, {tx, &quot;WEDNESDAY&quot;,    ph, &quot;_m1IHd_w1IYk&quot;},
   },
};
</PRE>
 Note that you are not restricted to using pronunciations similar to those of the words listed. Typically, however, pronunciation dictionaries contain entries for words that the Speech Manager pronounces unsatisfactorily.<P>
 Also, note that a pronunciation dictionary's entries need not be in any particular order. In particular, you should not assume that a pronunciation dictionary is in alphabetical order unless your application creates the dictionary and maintains that order.<A NAME=MARKER-2-133></A><P>
 The pronunciation dictionary resource header consists of nine fields, of which four must be explicitly defined in a Rez definition such as the one in <A HREF=#MARKER-9-277>Listing 4-10</A>. The first three of these fields specify the script, language, and region code of the language for which the pronunciation dictionary is designed. Note that you must create a separate pronunciation dictionary for each region, language, or script. The fourth field of a pronunciation dictionary is the date the pronunciation dictionary was last modified, in terms of seconds since midnight, January 1, 1904. In <A HREF=#MARKER-9-277>Listing 4-10</A>, it is assumed that the constant <CODE>ThisSecond</CODE> is defined to be such a date. For information on obtaining information about the current date in this format, see <I><A HREF="../OSUtilities/OSUtilities-2.html">Inside Macintosh: Operating System Utilities</A></I>.<A NAME=MARKER-2-279></A> <A NAME=MARKER-9-625></A><A NAME=MARKER-2-19></A><A NAME=MARKER-9-282></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-201.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-203.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

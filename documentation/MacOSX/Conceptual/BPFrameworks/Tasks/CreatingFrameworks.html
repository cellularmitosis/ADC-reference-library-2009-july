<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Framework Programming Guide: Creating a Framework</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating a Framework"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20002258" title="Creating a Framework"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../DeveloperTools/index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../../DeveloperTools/Xcode-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000557" target="_top">Xcode</a> &gt; <a href="../index.html" target="_top">Framework Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/CreationGuidelines.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="InitializingFrameworks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20002258-BAJDHDAF" title="Creating a Framework"></a><hr /><H1>Creating a Framework</H1><p>Once you decide that you need to create a framework for your code, you can do so easily with Xcode. As you add major versions to the framework, you also need to be able to maintain your projects. The following sections show you how perform both of these tasks.</p><p></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="CreatingFrameworks.html#//apple_ref/doc/uid/20002258-96881">Creating Your Framework</a>
				
			<br/>
			
        
			
			
				<a href="CreatingFrameworks.html#//apple_ref/doc/uid/20002258-106880-BAJJBIEF">Embedding a Private Framework in Your Application Bundle</a>
				
			<br/>
			
        
			
			
				<a href="CreatingFrameworks.html#//apple_ref/doc/uid/20002258-105712">Building Multiple Versions of a Framework</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20002258-96881" title="Creating Your Framework"></a><h2>Creating Your Framework</h2><p>From Xcode, choose File > New Project to create your project. Follow the prompts to select the type of framework you want and where you want to put your project directory.</p><p>The default templates that come with Xcode let you specify whether you want to create a Carbon or Cocoa framework. The type of framework you choose determines which default files are generated for you. If you do not want to include Carbon or Cocoa headers in your framework, you can remove any references to them after you create your project. </p><a name="//apple_ref/doc/uid/20002258-105982" title="Configuring Your Framework Project"></a><h3>Configuring Your Framework Project</h3><p>When you create a new framework, there are several configuration options you may want to modify. These options make it easier to distribute your framework to customers and guarantee its compatibility after future development cycles. <span class="content_text">Table 1</span> lists some of the options you should set for your framework.</p><a name="//apple_ref/doc/uid/20002258-106007-BAJDBABC" title="Table 1Framework configuration options"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20002258-106007" title="Table 1Framework configuration options"></a><strong>Table 1&nbsp;&nbsp;</strong>Framework configuration options</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Option</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p>Framework identifier</p></td><td ><p>A Java-style package identifier that uniquely identifies the framework to the system. You should always set this option. To set this option in Xcode 2.4, open an inspector window for your framework target, select the Properties tab, and modify the Identifier field.  </p></td></tr><tr><td  scope="row"><p>Framework version</p></td><td ><p>The current major revision of the framework. See <span class="content_text"><a href="../Concepts/VersionInformation.html#//apple_ref/doc/uid/20002255-97505">“Major Versions”</a></span> for more information. In Xcode 2.4, set this value for your framework target using the Framework Version build setting.  </p></td></tr><tr><td  scope="row"><p>Current version</p></td><td ><p>The current revision of the framework. In Xcode 2.4, set this value for your framework target using the Current Library Version build setting. See <span class="content_text"><a href="../Concepts/VersionInformation.html#//apple_ref/doc/uid/20002255-101531">“Minor Versions”</a></span> for more information.</p></td></tr><tr><td  scope="row"><p>Compatibility version</p></td><td ><p>The most recent revision of the framework that includes changes to the public interfaces. In Xcode 2.4, set this value for your framework target using the Compatibility Version build setting. See <span class="content_text"><a href="../Concepts/VersionInformation.html#//apple_ref/doc/uid/20002255-101531">“Minor Versions”</a></span> for more information.</p></td></tr><tr><td  scope="row"><p>Exported symbols</p></td><td ><p>The list of framework symbols you want to export to other programs. In Xcode 2.4, specify a file containing your exported symbols for your framework target using the Exported Symbols File build settings. To specify a file containing the symbols to hide, use the Unexported Symbols File build setting instead. See <span class="content_text"><a href="ExportingInterfaces.html#//apple_ref/doc/uid/20002260-BBCJICEC">“Exporting Your Framework Interface”</a></span> for more information.</p></td></tr><tr><td  scope="row"><p>Installation path</p></td><td ><p>The directory name in which your framework should ultimately be installed. In Xcode 2.4, set this value for your framework target using the Installation Directory build setting. See <span class="content_text"><a href="InstallingFrameworks.html#//apple_ref/doc/uid/20002261-BBCCFBJA">“Installing Your Framework”</a></span> for a list of standard locations.</p></td></tr><tr><td  scope="row"><p>Preferred address</p></td><td ><p>For frameworks being deployed in Mac OS X 10.3.9 and earlier, specify the preferred memory address to use for prebinding operations. This value is not needed when deploying a framework in 10.4 and later. See <span class="content_text"><a href="../Concepts/FrameworkBinding.html#//apple_ref/doc/uid/20002256-106894">“Frameworks and Prebinding”</a></span> for information on how to set the preferred address of a framework.</p></td></tr></table></div><a name="//apple_ref/doc/uid/20002258-106556" title="Testing Your Framework in Place"></a><h3>Testing Your Framework in Place</h3><p>When you build a framework, Xcode places it in the <code>build</code> subdirectory of your project directory by default. Although you can tell Xcode to install your framework in its final deployment location, during development you may want to leave it where it is. If you do, you may need to tell test applications where to find your framework.</p><p>If your framework project contains additional targets for test applications, then Xcode builds those applications in the same folder as your framework. Test applications built alongside your framework find that framework automatically because of their proximity to it. However, if you build your test applications into a different build directory, those applications may be unable to find your framework unless you tell them where to find it. </p><p>The usual way for an application to find a framework is to look in the standard locations (see <span class="content_text"><a href="InstallingFrameworks.html#//apple_ref/doc/uid/20002261-BBCCFBJA">“Installing Your Framework”</a></span>). However, you may not want to reinstall your framework every time you make changes to it. In that case, you can tell your test applications exactly where to find the framework using the <code>DYLD_FRAMEWORK_PATH</code> environment variable. Adding this variable to your executable tells <code>dyld</code> where to look for additional frameworks if it doesn’t find what it needs in the standard locations. The following steps show you how to set this variable in Xcode.</p><ol class="ol"><li class="li"><p>Open your application project in Xcode.</p></li><li class="li"><p>In the Groups &amp; Files pane, open the Executables group, select the executable to configure, open its Info window, and click Arguments.</p></li><li class="li"><p>Add an entry to the environment variables list.</p></li><li class="li"><p>Set the name of the environment variable to <code>DYLD_FRAMEWORK_PATH</code>.</p></li><li class="li"><p>Set the value of the variable to the full pathname of the directory containing your framework.</p><p>To specify multiple framework directories, separate the pathnames with a colon. For example, you could have a value such as the following value on this line: <code>/Users/lynn/MyFrameworks:/Volumes/Keylime/MyOtherFrameworks</code>. </p></li></ol><a name="//apple_ref/doc/uid/20002258-106880" title="Embedding a Private Framework in Your Application Bundle"></a><a name="//apple_ref/doc/uid/20002258-106880-BAJJBIEF" title="Embedding a Private Framework in Your Application Bundle"></a><h2>Embedding a Private Framework in Your Application Bundle</h2><p>If you need to distribute a private framework with an application, the preferred solution is to embed the framework in your application bundle. Embedding a framework inextricably links the framework to the application and ensures that the application always has the correct version of the framework needed to operate. Embedding the framework also makes it clear to other developers that they should not ever link to that framework. </p><div class="notebox"><a name="//apple_ref/doc/uid/20002258-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;If multiple applications must share a private framework, you should install the framework in one of the available <code>PrivateFrameworks</code> directories on the system rather than embed it in one (or all) of the applications. Sharing one framework allows for more efficient reuse of the framework’s dynamic library. For information about where to put shared private frameworks, see <span class="content_text"><a href="InstallingFrameworks.html#//apple_ref/doc/uid/20002261-97286">“Locations for Private Frameworks.”</a></span></p></div><p>To embed a framework in an application, there are several steps you must take:</p><ul class="ul"><li class="li"><p>You must configure the build phases of your application target to put the framework in the correct location.</p></li><li class="li"><p>You must configure the framework target’s installation directory, which tells the framework where it will live.</p></li><li class="li"><p>You must configure the application target so that it references the framework in its installation directory.</p></li></ul><p>It is possible to build and embed a framework in an application using a single Xcode project or multiple projects. Using a single Xcode project is somewhat easier because it requires less configuration to get both the framework and application to build. For multi-project setups, however, once the two projects are configured to build properly, the configuration steps for embedding the framework are essentially the same as those for a single Xcode project. </p><a name="//apple_ref/doc/uid/20002258-SW1" title="Using a Single Xcode Project For Both Targets"></a><h3>Using a Single Xcode Project For Both Targets</h3><p>Using a single Xcode project for both your application and framework target simplifies the required setup. Once you create your project, you simply add two targets to it: one for your application and one for your framework. (Because both targets reside in the same project, there are no problems finding source files from either target at build time.) After that, you simply configure your framework and application targets with the proper runtime information for embedding.</p><p>The configuration for your framework target involves telling it where it will be installed. The framework needs this information so that it can find the resources it needs. Because frameworks are typically installed in fixed locations, you normally specify the full path to the appropriate frameworks directory. When you embed a framework inside a bundle, however, the location of the framework is not fixed, so you have to use the <code>@executable_path</code> placeholder to let the framework know its location is relative to the current executable. </p><ol class="ol"><li class="li"><p>Open an inspector for your framework target and select the Build tab. </p></li><li class="li"><p>Set the value of the Installation Directory build setting to <code>@executable_path/../Frameworks</code>.  </p></li></ol><p>At build time, Xcode builds your framework and puts the results in the build directory. Before the application can use the framework, however, you must configure the application target as follows: </p><ul class="spaceabove"><li class="li"><p>You need to copy the framework into the application’s bundle. </p></li><li class="li"><p>You need to link the application against the framework.</p></li><li class="li"><p>You need to create a build dependency between the framework and application.</p></li></ul><p>The following steps show you how to configure your application target. </p><ol class="ol"><li class="li"><p>In the Group &amp; Files pane, open your application target to view its current build phases. </p></li><li class="li"><p>Drag your framework product (located in the Products folder) to the existing Link Binary With Libraries build phase of your application target.  This causes the application to link against your framework. </p></li><li class="li"><p>Add a new Copy Files Build Phase to the application target. (This phase will be used to install the framework in the application bundle.)</p></li><li class="li"><p>Select the new build phase and open an inspector window.</p></li><li class="li"><p>In the General tab of the inspector window, set the destination for the build phase to “Frameworks”.</p></li><li class="li"><p>Drag your framework product to the new build phase.</p></li><li class="li"><p>Select the application target again and open the inspector window.</p></li><li class="li"><p>In the General tab of the inspector window, add your framework as a dependency for the application. Adding this dependency causes Xcode to build the framework target before building the application target.</p></li></ol><p>The build dependency you establish in the application target causes the framework to be built before the application. This is important because it guarantees that a built version of your framework will be available to link against and to embed in the application. Because of this dependency, you can set the active target of your Xcode project to your application and leave it there. Building the application now builds the framework and copies it to the application bundle directory, creating the necessary linkage between the two. </p><a name="//apple_ref/doc/uid/20002258-DontLinkElementID_2" title="Using Separate Xcode Projects For Each Target"></a><h3>Using Separate Xcode Projects For Each Target</h3><p>If you already have separate Xcode projects for your framework and application, you can take advantage of Xcode’s cross-project references to embed the framework in your application. Cross-project references are a convenient way to create relationships between two separate Xcode projects. To set up a cross-project reference between your application and framework, you would do the following: </p><ol class="ol"><li class="li"><p>In your application project, choose Project > Add to Project and select your framework’s <code>.xcodeproj</code> file. Xcode adds the framework project and displays its products in the Groups &amp; Files pane of your application project.</p></li><li class="li"><p>Modify the Build Products Path setting for both the application and framework targets so that they use the same build directory. You need to modify each target in their original Xcode project file. </p></li><li class="li"><p>In your application project, modify the Header Search Paths setting of the application target by adding the directories containing any framework header files. </p></li></ol><p>Once you have configured your Xcode projects to build properly, you can proceed with the configuration steps needed to embed the framework in your application. The remaining configuration steps for the framework and application targets are identical to the ones described in <span class="content_text"><a href="CreatingFrameworks.html#//apple_ref/doc/uid/20002258-SW1">“Using a Single Xcode Project For Both Targets.”</a></span> Your framework’s installation directory must be configured to be relative to the executable path of the application. SImilarly, the application target must copy the framework to its bundle and set up the necessary linkage and dependencies. The only difference is that you must configure each target in its own Xcode project.</p><a name="//apple_ref/doc/uid/20002258-105712" title="Building Multiple Versions of a Framework"></a><h2>Building Multiple Versions of a Framework</h2><p>After the release of a framework, you should consider how to manage your Xcode project for future releases. When you update an existing framework, the type of changes you make determines the best way to proceed with your project files. For example, major changes may warrant the copying of your project files and the maintenance of separate projects, one for each major version. On the other hand, minor changes can be folded into your existing Xcode project. </p><a name="//apple_ref/doc/uid/20002258-97545" title="Updating the Minor Version"></a><h3>Updating the Minor Version</h3><p>If you are making minor changes to your framework, there is no need to create a new Xcode project for your framework. However, you should always update the “current version” and “compatibility version” values associated with your framework. These values make it possible for the dynamic linker to determine if linking a program to your framework is possible. </p><p>For more information on how to update the minor version information of your framework and on the types of changes that constitute a minor version update, see <span class="content_text"><a href="../Concepts/VersionInformation.html#//apple_ref/doc/uid/20002255-101531">“Minor Versions.”</a></span> </p><a name="//apple_ref/doc/uid/20002258-97422" title="Updating the Major Version"></a><h3>Updating the Major Version</h3><p>The process for updating the major version of a framework is more difficult than the process for minor versions. The recommended way to create a new major version is to make a duplicate version of your entire Xcode project folder and continue developing from there. The old project files should be archived and used to perform legacy builds. However, active development should continue with the new project. </p><p>Once you have a new project folder, you need to make several modifications to the Xcode project to identify the project as a major version. Select your framework target and open the Inspector window. In the Build pane, modify the following build options:</p><ul class="spaceabove"><li class="li"><p>Increment the value of the Framework Version build setting to the next sequential value.</p></li><li class="li"><p>Increment the value of the Current Library Version build setting.</p></li><li class="li"><p>Update the value of the Compatibility Version build setting to match the updated Current Library Version.</p></li><li class="li"><p>Update any build settings whose path information includes the framework major version designator. For example, if you have a Copy Files build phase based on the product directory, you may need to update that path. Or make sure the paths are specified using the framework’s <code>Current</code> symbolic link.</p></li><li class="li"><p>In the Properties pane of the framework target Info window, update the version number that gets stored in your framework’s information property list.</p></li></ul><p>Once you make the changes to your code, you can build the framework target. What you get is a new framework bundle containing only the new major version.</p><p>During installation, if a version of your framework does not already exist on the target system, have the installer copy your framework bundle over as is. However, if an existing version of the framework is present, have the installer copy the contents of your new framework directory to the old directory. Your installer script must replace symbolic links in the old framework bundle with ones that point to the new version of the framework. However, copying over the new major version should leave any old versions intact. This permits existing applications to continue running while newer versions use the updated framework.</p><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/20002258-DontLinkElementID_14" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;Do not attempt to build a new version of your framework over an existing framework bundle. Performing a clean build of your project deletes the entire contents of the bundle, including any legacy versions. It is much safer to maintain separate projects and copy the files over during installation.</p><p></p><div class="clear"></div></div><p>You may also want the installer to remove any header files or documentation for outdated versions of your framework. This step is optional and is left to your discretion. However, it is recommended to prevent developers from accidentally including an outdated set of header files, or viewing older documentation, during development.</p><p>For more information on major versions of frameworks, see <span class="content_text"><a href="../Concepts/VersionInformation.html#//apple_ref/doc/uid/20002255-97505">“Major Versions.”</a></span> </p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/CreationGuidelines.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="InitializingFrameworks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-11-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html%3Fid%3D10000183i-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html%3Fid%3D10000183i-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MacOSX/Conceptual/BPFrameworks/Tasks/CreatingFrameworks.html%3Fid%3D10000183i-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

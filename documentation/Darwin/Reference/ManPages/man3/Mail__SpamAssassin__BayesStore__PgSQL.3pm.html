<html><head><title>Mac OS X
 Manual Page For Mail::SpamAssassin::BayesStore::PgSQL(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/Mail::SpamAssassin::BayesStore::PgSQL" title="Mac OS X
 Manual Page for Mail::SpamAssassin::BayesStore::PgSQL(3pm)"><a name="//apple_ref/doc/man/3/Mail::SpamAssassin::BayesStore::PgSQL" title="Mac OS X
 Manual Page for Mail::SpamAssassin::BayesStore::PgSQL(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/Mail::SpamAssassin::BayesStore::PgSQL"; name=Mail::SpamAssassin::BayesStore::PgSQL(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Mail::SpamAssassin::BayesStore::PgSQLr Contributed Perl <!-- a -->Documenta::SpamAssassin::BayesStore::PgSQL(3)<!-- /a -->



<b>NAME</b>
       Mail::SpamAssassin::BayesStore::PgSQL - PostgreSQL Specific Bayesian Storage Module Implementation

<b>SYNOPSIS</b>
<b>DESCRIPTION</b>
       This module implementes a PostgresSQL specific bayesian storage module.

       It subclasses Mail::SpamAssassin::BayesStore::SQL and overrides any methods which makes SQL calls
       involving the token column.  Since PostgreSQL uses BYTEA for the token column type you must make sure
       that the DBD driver does the proper quoting.  You can accomplish this by binding the token column to
       a specific type.

<b>METHODS</b>
       <b>token_expiration</b>

       public instance (Integer, Integer,
                        Integer, Integer) token_expiration(\% $opts,
                                                           Integer $newdelta,
                                                           @ @vars)

       Description: This method performs the database specific expiration of tokens based on the passed in
       $newdelta and @vars.

       <b>seen_put</b>

       public (Boolean) seen_put (string $msgid, char $flag)

       Description: This method records $msgid as the type given by $flag.  $flag is one of two values 's'
       for spam and 'h' for ham.

       <b>seen_delete</b>

       public instance (Boolean) seen_delete (string $msgid)

       Description: This method removes $msgid from the database.

       <b>set_last_expire</b>

       public instance (Boolean) set_last_expire (Integer $time)

       Description: This method sets the last expire time.

       <b>set_running_expire_tok</b>

       public instance (String $time) set_running_expire_tok ()

       Description: This method sets the time that an expire starts running.

       <b>remove_running_expire_tok</b>

       public instance (Boolean) remove_running_expire_tok ()

       Description: This method removes the row in the database that indicates that and expire is currently
       running.

       <b>tok_get</b>

       public instance (Integer, Integer, Integer) tok_get (String $token)

       Description: This method retrieves a specificed token ($token) from the database and returns it's
       spam_count, ham_count and last access time.

       <b>tok_get_all</b>

       public instance (\@) tok_get (@ $tokens)

       Description: This method retrieves the specified tokens ($tokens) from storage and returns an array
       ref of arrays spam count, ham acount and last access time.

       <b>nspam_nham_change</b>

       public instance (Boolean) nspam_nham_change (Integer $num_spam,
                                                    Integer $num_ham)

       Description: This method updates the number of spam and the number of ham in the database.

       <b>tok_touch</b>

       public instance (Boolean) tok_touch (String $token,
                                            String $atime)

       Description: This method updates the given tokens ($token) atime.

       The assumption is that the token already exists in the database.

       <b>tok_touch_all</b>

       public instance (Boolean) tok_touch (\@ $tokens
                                            String $atime)

       Description: This method does a mass update of the given list of tokens $tokens, if the existing
       token atime is &lt; $atime.

       The assumption is that the tokens already exist in the database.

       We should never be touching more than N_SIGNIFICANT_TOKENS, so we can make some assumptions about how
       to handle the data (ie no need to batch like we do in tok_get_all)

       <b>cleanup</b>

       public instance (Boolean) cleanup ()

       Description: This method peroms any cleanup necessary before moving onto the next operation.

       <b>clear_database</b>

       public instance (Boolean) clear_database ()

       Description: This method deletes all records for a particular user.

       Callers should be aware that any errors returned by this method could causes the database to be
       inconsistent for the given user.

<b>Private</b> <b>Methods</b>
       <b>_connect_db</b>

       private instance (Boolean) _connect_db ()

       Description: This method connects to the SQL database.

       <b>_put_token</b>

       private instance (Boolean) _put_token (string $token,
                                              integer $spam_count,
                                              integer $ham_count,                            string $atime)

       Description: This method performs the work of either inserting or updating a token in the database.

       <b>_put_tokens</b>

       private instance (Boolean) _put_tokens (\% $token,
                                               integer $spam_count,
                                               integer $ham_count,                             string
       $atime)

       Description: This method performs the work of either inserting or updating tokens in the database.

       <b>_token_select_string</b>

       private instance (String) _token_select_string

       Description: This method returns the string to be used in SELECT statements to represent the token
       column.



perl v5.8.8                                      2007-04-03         Mail::SpamAssassin::BayesStore::PgSQL(3)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Mail__SpamAssassin__BayesStore__PgSQL.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Mail__SpamAssassin__BayesStore__PgSQL.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Mail__SpamAssassin__BayesStore__PgSQL.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

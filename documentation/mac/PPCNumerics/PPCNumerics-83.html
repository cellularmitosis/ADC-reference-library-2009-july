<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Converting Between Binary and Decimal Numbers(IM:PN)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<A NAME="HEADING83"></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCNumerics-82.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="PPCNumerics-84.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCNumerics-2.html"><B>PowerPC Numerics </B></A> / <A HREF="PPCNumerics-48.html"><B>Part 2 - The PowerPC Numerics C Implementation</B></A><BR><DD><A HREF="PPCNumerics-71.html"><B>Chapter 9 - Conversion Functions</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING83-0"></A>
<H1>Converting Between Binary and Decimal Numbers</H1>
 <A NAME="MARKER-2-30"></A><A NAME="MARKER-2-28"></A>MathLib provides two functions that let you manually convert between binary and decimal formats. 
<TABLE BORDER="0" CELLPADDING="3"><TD>dec2num<TD>Converts a decimal number to a binary number.<TR>
<TD>num2dec<TD>Converts a binary number to a decimal number.</TABLE>
<P>
 <A NAME="MARKER-2-29"></A>Conversions between binary floating-point numbers and decimal numbers use structures of type <CODE>decimal</CODE>. The <CODE>decimal</CODE> structure is defined in the header file <CODE>fp.h</CODE> as<P>
<PRE>
struct decimal 
{
   char sgn;
   char unused;
   short exp;
   struct 
   {
      unsigned char length;
      unsigned char text[SIGDIGLEN];
      unsigned char unused;
   } sig;
} decimal;
</PRE>
<DL>
<DT><CODE><A NAME="MARKER-9-24"></A>sgn</CODE>
<DD> The sign of the number (0 is positive, 1 is negative).
<DT><CODE><A NAME="MARKER-2-36"></A>exp</CODE>
<DD> The exponent of the number. The exponent is expressed as a power of 10.
<DT><CODE><A NAME="MARKER-2-4"></A>sig</CODE>
<DD> The significand. String <CODE>sig.text</CODE> contains the significand as a decimal integer in the form of a string, that is, with the string length in the zeroth byte (<CODE>sig.length</CODE>) and the initial character of the string in the first byte (<CODE>sig.text[0]</CODE> to <CODE>sig.text[SIGDIGLEN - 1]</CODE>). 
</DL>
 The value represented is<P>
 (<EM>-1)<CODE><SUP>sgn</SUP>sig10<SUP>exp</SUP></CODE></EM><P>
 For example, if <CODE>sgn</CODE> equals 1, <CODE>exp</CODE> equals <EM>-</EM>3, and <CODE>sig</CODE> equals "85" (string length <CODE>sig.length</CODE> equals 2, not shown), then the number represented is <EM>-</EM>0.085.<P>
<DL>
<DT><B>Note</B>
<DD>The maximum length of the string <CODE>sig</CODE> is implementation dependent. The limit is 36 characters. Also, the representations of 0 and 1 in the 16-bit word <CODE>sgn</CODE> are implementation dependent.<EM></EM><A NAME="MARKER-2-33"></A><A NAME="MARKER-2-34"></A><A NAME="MARKER-2-35"></A><A NAME="MARKER-2-37"></A>  <IMG ALIGN="BOTTOM" SRC="graphics/diamond.gif">
</DL>
 <A NAME="MARKER-9-63"></A>Conversions from binary to decimal use a decimal format structure to specify how the number should look in decimal. The <CODE>decform</CODE> structure is defined in the header file <CODE>fp.h</CODE> as<P>
<PRE>
struct decform 
{
   char style; /* FLOATDECIMAL or FIXEDDECIMAL */
   char unused;
   short digits;
} decform;
</PRE>
<DL>
<DT><CODE><A NAME="MARKER-2-68"></A>style</CODE>
<DD> The style of output. This field equals 0 (<CODE>FLOATDECIMAL</CODE>) for floating and 1 (<CODE>FIXEDDECIMAL</CODE>) for fixed. 
<DT><CODE><A NAME="MARKER-10-91"></A>digits</CODE>
<DD> The number of significant digits for the floating style and the number of digits to the right of the decimal point for the fixed style. (The value of <CODE>digits</CODE> may be negative if the style is fixed.) 
<DT><B>Note</B>
<DD>Formatting details, such as the representations of 0 and 1 in the 16-bit <CODE>style</CODE> word, are implementation dependent.<EM></EM>  <IMG ALIGN="BOTTOM" SRC="graphics/diamond.gif">
</DL>
 <A NAME="MARKER-2-40"></A>If the <CODE>style</CODE> field of the <CODE>decform</CODE> structure equals 0 (in C, <CODE>f.style == FLOATDECIMAL</CODE>), the output is formatted in floating style, with the <CODE>digits</CODE> field specifying the number of significant digits required. Output in floating style is represented in the following format; Table 9-8</A> defines its components.<P>
<PRE>
[- |    ]m[.nnn]e[+ | -]dddd
</PRE>
<TABLE>

<CAPTION><B><A NAME="MARKER-9-4">Table 9-8 Format of decimal output string in floating style</A> </CAPTION></B>
<TH>Component<TH>Description<TR>
<TD>
Minus sign (-) or space

<TD> Minus sign if sgn = 1; space if sgn = 0<TR>


<TD>
m 

<TD>Single digit, 0 only if value represented is 0<TR>
<TD>
Point (.)

<TD>Present if digits > 1<TR>
<TD>
nnn
<TD> String of digits; present if digits > 1<TR>
<TD>
e
<TD>
The letter e<TR>
<TD>Plus sign (+) or minus sign (-)<TD>Plus sign if exp <IMG BORDER="NONE" SRC="graphics/greaterthan.gif"> 0; minus sign if exp  0.<TR>
<TD>dddd<TD>One to four exponent digits</TABLE>


 <P>

 


 


 <P>
 <P>
 <A NAME="MARKER-9-12"></A>If the <CODE>style</CODE> field of the <CODE>decform</CODE> structure equals 1 (in C, <CODE>f.style == FIXEDDECIMAL</CODE>), the output is formatted in fixed style, with the <CODE>digits</CODE> field specifying the number of digits to follow the decimal point. All output in fixed style is represented in the following format; Table 9-9</A> defines its components.<P>
<PRE>
[-]mmm[.nnn]
</PRE>
<P>
<TABLE>
<CAPTION><B>Table 9-9 Format of decimal output string in fixed style</CAPTION></B>
<TH>Component<TH> Description<TR>
<TD>Minus sign (\xC7) <TD>Present if sgn = 1<TR>
<TD>mmm <TD>String of digits; at least one digit but no superfluous leading zeros<TR>
<TD>Point (.) <TD>Present if digits > 0<TR>
<TD>nnn <TD>String of digits of length equal to digits; present if digits > 0
</TABLE>
<P>
 Note that if <CODE>sgn</CODE> equals 0, then floating-style output begins with a space but fixed-style output does not.<A NAME="MARKER-2-26"></A><A NAME="MARKER-2-43"></A><A NAME="MARKER-2-35"></A><P>
 Double-double values being converted to decimal strings are first rounded to 113 bits (if they in fact span more than that number of bits in their significands) and then converted to the decimal string of the desired length.<A NAME="MARKER-2-46"></A><A NAME="MARKER-2-62"></A><P>
</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="PPCNumerics-82.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="PPCNumerics-84.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="PPCNumerics-3.html">&copy; Apple Computer, Inc.</A><BR>13 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

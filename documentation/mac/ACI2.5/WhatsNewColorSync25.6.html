<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">

<TITLE> Video Card Gamma</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">

<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- top image banner and para -->



<CENTER>
<P>   
<A HREF="WhatsNewColorSync25.5.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="WhatsNewColorSync25-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A>  <A HREF="WhatsNewColorSync25.7.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="WhatsNewColorSync25-2.html"><B>What's New in ColorSync 2.5</B></A> / </DL></FONT><P>
<HR>


<H1 CLASS="H1.Heading1">
<A NAME="pgfId=13949">
 </A>
<A NAME="12291">
 </A>
Video Card Gamma</H1>
<P CLASS="T1.Text1">
<A NAME="pgfId=13950">
 </A>
ColorSync now supports an optional profile tag for video card gamma. The tag specifies gamma information, stored either as a formula or in table format, to be loaded into the video card when the profile containing the tag is put into use. When you call the function <A HREF="WhatsNewColorSync25.a.html#40581" CLASS="XRef"><CODE>CMSetProfileByAVID</CODE></A>
 and specify a profile that contains a video card gamma tag, ColorSync will extract the tag from the profile and set the video card based on the tag. If you provide monitor calibration software, you should include the video card gamma tag in the profiles you create. See <A HREF="WhatsNewColorSync25.5.html#42339" CLASS="XRef">Monitor Calibration and Profiles</A>
 for more information on ColorSync's support for monitor calibration.</P>
<H4>IMPORTANT</H4>
<A NAME="pgfId=13960">
 </A>
The function <A HREF="WhatsNewColorSync25.a.html#pgfId=11164" CLASS="XRef"><CODE>CMSetSystemProfile</CODE></A> does not retrieve video card gamma data to set the video card. </P>

<H2>
<A NAME="pgfId=13964">
 </A>
Video Card Gamma Constants</h2>

<P CLASS="T1.Text1">
<A NAME="pgfId=13965">
 </A>
The following sections describe the constants you use to work with the video card gamma profile tag.</P>

<h3>
<A NAME="pgfId=13966">
 </A>
Video Card Gamma Tag</h3>

<P CLASS="T1.Text1">
<A NAME="pgfId=13967">
 </A>
When you create a tag to store video card gamma data in a profile, you use the <CODE>cmVideoCardGammaTag</CODE> constant to specify the tag.</P>

<PRE><A NAME="pgfId=13968"></A>enum
{
      ...,
      cmVideoCardGammaTag = FOUR_CHAR_CODE('vcgt')
};</P>
</PRE>

<h4>
<A NAME="pgfId=13969">
 </A>
Enumerator descriptions</h4>
<P CLASS="Fd.FieldDesc">
<A NAME="pgfId=13970">
 </A>

<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>cmVideoCardGammaTag</CODE>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
Constant for profile tag that specifies video card gamma information.</TABLE>

<A NAME="pgfId=13971">
 </A>
<h4>Video Card Gamma Tag Type</h4>

<P CLASS="T1.Text1">
<A NAME="pgfId=13972">
 </A>
You use the cmSigVideoCardGammaType constant to specify the signature type for a video card gamma tag. That is, you use this constant to set the typeDescriptor field of the <A HREF="WhatsNewColorSync25.6.html#17507" CLASS="XRef"><CODE>CMVideoCardGammaType</CODE></A>
 structure. There is currently only one type possible for a video card gamma tag.<P>
<PRE><A NAME="pgfId=13976"></A>enum
{
      cmSigVideoCardGammaType = FOUR_CHAR_CODE('vcgt')
};
</pre><h4><A NAME="pgfId=13977"></A>
Enumerator descriptions</h4>
<P CLASS="Fd.FieldDesc">
<A NAME="pgfId=13978">
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>cmSigVideoCardGammaType</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">Constant that specifies video card gamma type signature in a video card gamma profile tag.</table>


<A NAME="pgfId=13980">
 </A><A NAME="15163">
 </A>
<h4>Video Card Gamma Storage Type</h4>

<P CLASS="T1.Text1">
<A NAME="pgfId=13981">
 </A>
A video card gamma profile tag can store gamma data either as a formula or as a table of values. You use a storage type constant to specify which data storage type the tag uses.</P>


<h4>IMPORTANT</h4>
<A NAME="pgfId=13982">
 </A>
If the video card uses a different format than the format you specify, ColorSync will adapt the data you supply to match the format the card expects. 

<A NAME="pgfId=13986">
 </A>
<PRE>enum {
      cmVideoCardGammaTableType = 0,
      cmVideoCardGammaFormulaType = 1,
};</PRE>
<h4>
<A NAME="pgfId=13987">
 </A>
Enumerator descriptions</h4>
<P CLASS="Fd.FieldDesc">
<A NAME="pgfId=13988">
 </A>
<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>cmVideoCardGammaTableType</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The video card gamma data is stored in a table format. See <A HREF="WhatsNewColorSync25.6.html#37248" CLASS="XRef"><CODE>CMVideoCardGammaTable</code></A> for a description of the table format.

<A NAME="pgfId=13992">
 </A>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>cmVideoCardGammaFormulaType</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The video card gamma tag data is stored as a formula. See <A HREF="WhatsNewColorSync25.6.html#27866" CLASS="XRef"><CODE>CMVideoCardGammaFormula</CODE></A> for a description of the formula format.</table>

<A NAME="pgfId=13996">
 </A>
<h2>Video Card Gamma Data Types</h2>

<P CLASS="T1.Text1">
<A NAME="pgfId=13997">
 </A>
The following sections describe data types you use to work with the video card gamma profile tag.</P>
<h3>
<A NAME="pgfId=13999">
 </A>
<A NAME="17507">
 </A>
CMVideoCardGammaType</h3>
<P CLASS="T1.Text1">
<A NAME="pgfId=14000">
 </A>
The ColorSync Manager defines the <CODE>CMVideoCardGammaType</CODE>
 data structure to specify a video card gamma profile tag.</P>

<A NAME="pgfId=14001">
 </A>
<PRE>struct CMVideoCardGammaType
{
      OSType                 typeDescriptor;
      unsigned long          reserved;
      CMVideoCardGamma       gamma;
};
typedef struct CMVideoCardGammaType CMVideoCardGammaType;</PRE>



<H4>Field descriptions</h4>

<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>typeDescriptor</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">The signature type for a video card gamma tag. There is currently only one type possible, <CODE>cmSigVideoCardGammaType</CODE>.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>reserved</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
This field is reserved.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>gamma</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">A structure that specifies the video card gamma data for the profile tag, as described in <A HREF="WhatsNewColorSync25.6.html#10311" CLASS="XRef"><CODE>CMVideoCardGamma</CODE></A></table>


<A NAME="pgfId=14009">
 </A>
<A NAME="37248">
 </A>
<h3>CMVideoCardGammaTable</h3>
<P CLASS="T1.Text1">
<A NAME="pgfId=14010"></A>
The ColorSync Manager defines the <CODE>CMVideoCardGammaTable</CODE>
 data structure to specify video card gamma data in table format. You specify the number of channels, the number of entries per channel, and the size of each entry. The last field in the structure is an array of size one that serves as the start of the table data. The actual size of the array is equal to the number of channels times the number of entries times the size of each entry.</P>

<PRE><A NAME="pgfId=14011"></A>struct CMVideoCardGammaTable
{
      unsigned short       channels;
      unsigned short       entryCount;
      unsigned short       entrySize;
      char                 data[1];
};
typedef struct CMVideoCardGammaTable CMVideoCardGammaTable;</PRE>

<A NAME="pgfId=14012">
 </A>
<H4>Field descriptions</h4>

<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>channels</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
Number of gamma channels (1 or 3). If <CODE>channels</CODE>
 is set to 1 then the red, green, and blue lookup tables (LUTs) of the video card will be loaded with the same data. If <CODE>channels</CODE>
 is set to 3, then if the video card supports separate red, green, and blue LUTs, then the video card LUTs will be loaded with the data for the three channels from the <CODE>data</CODE>
 array.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>entryCount</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">Number of entries per channel (1-based). The number of entries must be greater than or equal to 2.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>entrySize</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">Size in bytes of each entry.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>data</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">Variable-sized array of data. The size of the data is equal to <CODE>channels</CODE></table>


<A NAME="pgfId=14017">
 </A>
<A NAME="27866">
 </A>
<h3>CMVideoCardGammaFormula</h3>
<P CLASS="T1.Text1">
<A NAME="pgfId=14018"></A>
The ColorSync Manager defines the <CODE>CMVideoCardGammaFormula</CODE>
 data structure to specify video card gamma data by providing three values each for red, blue and green gamma. The values represent the actual gamma, the minimum gamma, and the maximum gamma for each color. Specifying video gamma information by formula takes less space than specifying it with a table, but the results may be less precise.</P>

<A NAME="pgfId=14019">
 </A>
<PRE>struct CMVideoCardGammaFormula
 {
      Fixed         redGamma;
      Fixed         redMin;
      Fixed         redMax;
      Fixed         greenGamma;
      Fixed         greenMin;
      Fixed         greenMax;
      Fixed         blueGamma;
      Fixed         blueMin;
      Fixed         blueMax;
};</PRE>


<H4>Field descriptions</h4>

<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>redGamma
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The gamma value for red. It must be greater than 0.0.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>redMin</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The minimum gamma value for red. It must be greater than 0.0 and less than 1.0.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>redMax</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The maximum gamma value for red. It must be greater than 0.0 and less than 1.0.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>greenGamma</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The gamma value for green. It must be greater than 0.0.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>greenMin</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The minimum gamma value for green. It must be greater than 0.0 and less than 1.0.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>greenMax</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The maximum gamma value for green. It must be greater than 0.0 and less than 1.0.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>blueGamma</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The gamma value for blue. It must be greater than 0.0.</P>
<P CLASS="Fd.FieldDesc">
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>blueMin</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The minimum gamma value for blue. It must be greater than 0.0 and less than 1.0.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>blueMax</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
The maximum gamma value for blue. It must be greater than 0.0 and less than 1.0.</P></table>

<A NAME="pgfId=14030">
 </A>
<A NAME="10311">
 </A>
<h3>CMVideoCardGamma</h3>
<P CLASS="T1.Text1">
<A NAME="pgfId=14031">
 </A>
The ColorSync Manager defines the <CODE>CMVideoCardGamma</CODE>
 data structure to specify the video gamma data to store with a video gamma profile tag. The structure is a union that can store data in either table or formula format.</P>


<PRE><A NAME="pgfId=14032"> </A>struct CMVideoCardGamma
{
      unsigned long                tagType;
      union
      {
      CMVideoCardGammaTable        table;
      CMVideoCardGammaFormula      formula;
      }                            u;
};
typedef struct CMVideoCardGamma CMVideoCardGamma;</PRE><P>


<h4>Field descriptions</h4>

<TABLE><TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>tagType</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A <A HREF="WhatsNewColorSync25.6.html#15163" CLASS="XRef">Video Card Gamma Storage Type</A>
 constant that specifies the format of the data currently stored in the union. To determine the type of structure present in a specific instance of the <CODE>CMVideoCardGamma</CODE>
 structure, you test this union tag. When storing video card gamma data, you set <CODE>tagType</CODE>
 to a constant value that identifies the structure type.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>table</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A structure of type <CODE>CMVideoCardGammaTable</CODE>. If the <CODE>tagType</CODE> field has the value <CODE>cmVideoCardGammaTableType</CODE>, the <CODE>CMVideoCardGamma</CODE>  structure's union field should be treated as a table, as described in <A HREF="WhatsNewColorSync25.6.html#37248" CLASS="XRef"><CODE>CMVideoCardGammaTable</code></A>.</P>
<TR><TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP"><CODE>formula</code>
<TD COLSPAN="1" ROWSPAN="1" ALIGN="LEFT" VALIGN="TOP">
A structure of type <CODE>CMVideoCardGammaFormula</CODE>. If the <CODE>tagType</CODE> field has the value <CODE>cmVideoCardGammaFormulaType</CODE>, the <CODE>CMVideoCardGamma</CODE>
 structure's union field represents a formula, as described in <A HREF="WhatsNewColorSync25.6.html#27866" CLASS="XRef"><CODE>CMVideoCardGammaFormula</CODE></A>.</table>
<HR>

<CENTER>
<P>   
<A HREF="WhatsNewColorSync25.5.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="WhatsNewColorSync25-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A>  <A HREF="WhatsNewColorSync25.7.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>


<!-- bottom image banner and para -->

<!-- start of footer -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->

</BODY>
</HTML>

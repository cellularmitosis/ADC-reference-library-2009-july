<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Using the Resource Manager (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING16></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-15.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-17.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING16-0></A>
<H1><A NAME=MARKER-9-112></A>Using the Resource Manager</H1>
 You use the Resource Manager to perform operations on resources. To determine whether certain features of the Resource Manager are available (support for <CODE>FSSpec</CODE> records and partial resources), use the <CODE>Gestalt</CODE> function.<A NAME=MARKER-2-254></A><P>
 Two commonly used Resource Manager routines use a file system specification (<CODE>FSSpec</CODE>) record: the <CODE>FSpCreateResFile</CODE> procedure and the <CODE>FSpOpenResFile</CODE> function. These routines are available only in System 7 or later. Call the <BR><CODE>Gestalt</CODE> function with the <CODE>gestaltFSAttr</CODE> selector to determine whether the Resource Manager routines that use <CODE>FSSpec</CODE> records exist. If the bit indicated by the constant <CODE>gestaltHasFSSpecCalls</CODE> is set, then the routines are available.<A NAME=MARKER-2-25></A> <A NAME=MARKER-2-26></A><A NAME=MARKER-2-1></A><P>
<PRE>
CONST
   gestaltFSAttr           = 'fs  ';   {Gestalt selector for }
                                       { File Mgr attributes}
   gestaltHasFSSpecCalls   = 1;        {check this bit in the }
                                       { response parameter}
</PRE>
 In addition, the Resource Manager routines for reading and writing partial resources are available only in System 7 or later versions of system software. Use the <CODE>Gestalt</CODE> function to determine whether these features are available. Call the <CODE>Gestalt</CODE> function with the <CODE>gestaltResourceMgrAttr</CODE> selector to determine whether the routines for handling partial resources exist. If the bit indicated by the constant <CODE>gestaltPartialRsrcs</CODE> is set, then the Resource Manager routines for handling partial resources are available. For more information about the <CODE>Gestalt</CODE> function, see <I><A HREF="../OSUtilities/OSUtilities-2.html">Inside Macintosh: Operating System Utilities</A></I>.<P>
<PRE>
CONST
   gestaltResourceMgrAttr  = 'rsrc';   {Gestalt selector for }
                                       { Resource Mgr attributes}
   gestaltPartialRsrcs     = 0;        {check this bit in the }
                                       { response parameter}
</PRE>
 You can use the <CODE>ResError</CODE> function to retrieve errors that may result from calling Resource Manager routines. Resource Manager procedures do not report error information directly. Instead, after calling a Resource Manager procedure your application should call the <CODE>ResError</CODE> function to determine whether an error occurred. <P>
 Resource Manager functions usually return <CODE>NIL</CODE> or -1 as the function result when there's an error. For Resource Manager functions that return -1, your application can call the <CODE>ResError</CODE> function to determine the specific error that occurred. For Resource Manager functions that return handles, your application should always check whether the value of the returned handle is <CODE>NIL</CODE>. If it is, your application can use <CODE>ResError</CODE> to obtain specific information about the nature of the error. Note, however, that in some cases <CODE>ResError</CODE> returns <CODE>noErr</CODE> even though the value of the returned handle is <CODE>NIL</CODE>. <A NAME=MARKER-2-109></A> <A NAME=MARKER-2-5></A><P>
 The rest of this section describes how to create a resource using ResEdit or the Rez resource compiler. It then describes how to use Resource Manager routines to <P>
<UL>
<LI>get a handle to a resource and modify a purgeable resource safely
<LI>release and detach resources
<LI>create and open a resource fork
<LI>set the current resource file (the file whose resource fork the Resource Manager searches first)
<LI>read and manipulate resources
<LI>write resources
<LI>read and write partial resources<P>
</UL>
 For detailed descriptions of all Resource Manager routines, see <A HREF=MoreToolbox-24.html#MARKER-9-191>"Resource Manager Reference" beginning on page 1-36</A>. For information on writing data to a file's data fork, see <I><A HREF="../Files/Files-2.html">Inside Macintosh: Files</A></I>.<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="MoreToolbox-17.html#HEADING17-0">Creating a Resource</A>
<DD>
<DT><A HREF="MoreToolbox-18.html#HEADING18-0">Getting a Resource</A>
<DD>
<DT><A HREF="MoreToolbox-19.html#HEADING19-0">Releasing and Detaching Resources</A>
<DD>
<DT><A HREF="MoreToolbox-20.html#HEADING20-0">Opening a Resource Fork</A>
<DD>
<DT><A HREF="MoreToolbox-21.html#HEADING21-0">Reading and Manipulating Resources</A>
<DD>
<DT><A HREF="MoreToolbox-22.html#HEADING22-0">Writing Resources</A>
<DD>
<DT><A HREF="MoreToolbox-23.html#HEADING23-0">Working With Partial Resources</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-15.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-17.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

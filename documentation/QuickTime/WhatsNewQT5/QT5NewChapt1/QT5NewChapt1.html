<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime 5 (Legacy): What&amp;#8217;s New in QuickTime 5</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="What&amp;#8217;s New in QuickTime 5"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000936-CH1g" title="What&amp;#8217;s New in QuickTime 5"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../releasenotes/index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../../../../releasenotes/LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000872-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../releasenotes/LegacyTechnologies/idxQuickTime-date.html#//apple_ref/doc/uid/TP30000872-TP30000470-TP30000457" target="_top">QuickTime</a> &gt; <a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_1">QuickTime 5 (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_1" title="What&amp;#8217;s New in QuickTime 5"></a><h1><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF101" title="What&amp;#8217;s New in QuickTime 5"></a>What&#8217;s
New in QuickTime 5</h1><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_2" title="Important:"></a><p><strong>Important:</strong>&nbsp;The information in this document is obsolete and should not be used for new development.</p><p></p></div><p>Welcome to QuickTime 5. </p>
<p>This document provides a list of the changes, new features,
and enhanced capabilities in this release of QuickTime. If you are
a QuickTime API-level developer, content author, or Webmaster, you
should read this document.</p>
<p>QuickTime 5 is planned as a series of incremental releases. </p>
<ul class="ul"><li class="li"><p>This <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_15"></a>release is QuickTime 5.0.1. This
is the first general release of QuickTime 5 for Windows, Mac OS
8, and Mac OS 9. This release was preceded by a series of Public Previews. </p></li>
<li class="li"><p>A release of QuickTime 5 was included as part of the Mac OS
X CD (ver 10.0), and is part of that operating system. It is not
available as a separate download.</p></li>
<li class="li"><p>The current release was also preceded by QuickTime 5.0 RT,
which was included on a limited number of Mac-only CDs. The current
release (5.0.1) replaces QuickTime 5.0 RT.</p></li></ul>
<p>There are minor differences among these three software releases,
as explained in the section <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-102116">“Version Differences.”</a></span> </p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF110">Major Release</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF111">Using Gestalt to Get the QuickTime Version</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF112">Resources and Other Documentation</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF113">Summary of Changes and Enhancements</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF118">QuickTime Player Changes</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-BABGJAIE">Media Skins</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF129">Digital Video (DV) Codec Optimizations</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF134">Real-Time Effects Support</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF135">New Latency APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF143">Multiprocessor (MP) Support</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF146">New MP-Related Image Compression Manager APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF147">QuickTime VR Authoring Components Added</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF157">A New Installer for Downloading Third-Party Components</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF159">How to Package QuickTime Components on Mac OS X</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-BABDIEBH">AppleScript Changes and Additions</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF176">MPEG 1 Playback</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF177">Flash 4</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF180">kActionFlashTrackDoButtonActions</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF181">kOperandFlashTrackVariable</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF182">QT Events</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF183">Importing a Flash Movie</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF184">QuickTime Music Architecture (QTMA)</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-BABBCCAA">New QuickTime VR Cubic Engine</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF197">Nonstandard Cubes</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF198">Gamma Processing APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF203">Preferred Codec APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF204">Media Sharing Support</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF209">New &#8216;vdig&#8217; Flag Added</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF210">New Data Handler APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF216">API to Determine Whether QuickTime Can Open a File</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF217">New Plugin Features</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF223">New QTML function</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF224">QuickTime for Java</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF228">SMIL Changes</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF235">Enhancements to Effects</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF236">Streaming Client</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-BABIJJHA">Wired Actions</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-TPXREF256">XML Import</a>
				
			<br/>
			
        
			
			
				<a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-BABBCBAE">XML Event-Based Parsing</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000936-CH1g-125104" title="Major Release"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF110" title="Major Release"></a><h2>Major Release</h2>
<p>QuickTime 5 is the first major release of QuickTime since
the introduction of QuickTime 4.1. As such, this release includes
a number of new features and enhancements that affect end users,
authors, and application developers. </p>
<p>Some new features of QuickTime 5 apply to all three groups.
QuickTime 5 now supports new media formats, for example, including
Flash 4, DLS and Sound Font 2 audio files, and <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_16"></a>MPEG-1 playback on both Macintosh
and Windows computers, including real-time streaming of MPEG audio
and video. </p>
<p>End users will notice several new features, starting with
a new user interface for playing QuickTime movies, with new video
and audio controls. QuickTime Music (MIDI) playback can now be enhanced
using DLS or Sound Font 2 audio samples. Access to Shoutcast streams
is now available. Additionally, new &#8220;skip&#8221; protection provides improved
streaming playback. </p>
<p>Movie and Web authors will find a number of enhancements,
notably in AppleScript and QuickTime VR support, DV video compressor
enhancements, new HTML embed tags, SMIL enhancements, and improved
performance and quality of synthesis for the QuickTime Music Synthesizer.
The editing and authoring interface for QuickTime Pro has been improved,
adding menus and key commands for formerly &#8220;hidden&#8221; features.
In addition, authors now have the ability to create movies using
new media types, such as Flash 4, or MPEG-1 for Windows.</p>
<p>Perhaps most exciting for authors, however, is the introduction
of &#8220;<a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_17"></a>media skins&#8221; in QuickTime
5. Now you can customize the appearance and behavior of a movie
when played in QuickTime Player. A media skin allows you to control
the size and shape of the Player window and controls, as well as
the appearance, width, and shape of any frame. </p>
<p>Applications developers will find extended Java support, with
QuickTime for Java now included in a complete install of QuickTime
5. There are also new API functions, including a whole new broadcaster
API for sending streams using QuickTime client software on Macintosh
computers (it&#8217;s not just for servers anymore).</p>
<p>Notably for authors and developers, QuickTime 5 introduces
a new <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_18"></a>third-party
update mechanism designed to provide a registry of QuickTime components
on an Apple server, so that developers can include their components
in user downloads and QuickTime software updates on an as-needed,
just-in-time basis.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102079" title="Using Gestalt to Get the QuickTime Version"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF111" title="Using Gestalt to Get the QuickTime Version"></a><h2>Using Gestalt
to Get the QuickTime Version</h2><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_19"></a>
<p>As always, the standard way for Apple developers to determine
which version of QuickTime is installed is by calling the Macintosh
Toolbox API <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_20"></a>Gestalt</code> function
(this Mac OS function is included in QuickTime for Windows).</p>
<p><span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-126255">Listing 1-1</a></span> shows a code snippet that demonstrates how you can
check the version of QuickTime that is installed &#8211;&#8211; in this
case, QuickTime 5.0.1.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-126255" title="Listing 1-1Determining which version of QuickTime is installed by calling the Gestalt function. The version installed here is QuickTime 5.0.1."></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABEFJBG" title="Listing 1-1Determining which version of QuickTime is installed by calling the Gestalt function. The version installed here is QuickTime 5.0.1."></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Determining
which version of QuickTime is installed by calling the Gestalt function.
The version installed here is QuickTime 5.0.1.</p>
<div class="codesample"><table><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    /* check the version of QuickTime installed */<span></span></pre></td></tr><tr><td scope="row"><pre>    long version;<span></span></pre></td></tr><tr><td scope="row"><pre>    OSErr result;<span></span></pre></td></tr><tr><td scope="row"><pre>    result = Gestalt(gestaltQuickTime,&amp;version);<span></span></pre></td></tr><tr><td scope="row"><pre>    if ((result == noErr) &amp;&amp; (version &gt;= 0x05018000))<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        /* we have version 5.0.1! */<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102086" title="Resources and Other Documentation"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF112" title="Resources and Other Documentation"></a><h2>Resources and
Other Documentation</h2>
<p>This document is intended to supplement the information provided
in the QuickTime 4 API Reference and the QuickTime 4.1 delta documentation,
which is available online at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/documentation/quicktime/qtdevdocs/RM/newsframe.htm<span></span></pre></td></tr></table></div>
<p>For other QuickTime developer documentation, you should refer
to </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.apple.com/quicktime/developer/<span></span></pre></td></tr></table></div>
<p>For complete QuickTime API documentation, refer to </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/documentation/quicktime/qtdevdocs/RM/frameset.htm<span></span></pre></td></tr></table></div>
<p>Updates to the <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_21"></a>QuickTime
technical documentation Website are provided on a regular basis;
developers can also subscribe to various mailing lists for the latest
news and information. </p>
<p>To sign up for any of Apple&#8217;s Developer Programs, refer
to</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/membership/index.html<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112542" title="Summary of Changes and Enhancements"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF113" title="Summary of Changes and Enhancements"></a><h2>Summary of Changes
and Enhancements</h2>
<p>QuickTime 5.0.1 provides a number of new features and enhancements,
in addition to a several bug fixes. These new features and enhancements
are designed to extend QuickTime&#8217;s reach and capability as the
premier player and multimedia authoring technology for Macintosh
and Windows computers. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102092" title="Enhancements"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF114" title="Enhancements"></a><h3>Enhancements</h3>
<ul class="spaceabove"><li class="li"><p>Improved QuickTime Player application User Interface
(UI); new audio and video controls, as well as a new scrollable
Channel window and Get Movie Properties dialog (among other enhancements).
In the Pro (registered) version, there are now ordinary menu items
for commands such as &#8220;Add Scaled,&#8221; that were previously hidden
unless you pressed modifier keys, such as Shift, ctrl, alt, or Command.</p></li>
<li class="li"><p>The capability to customize the appearance of QuickTime Player
by adding a &#8220;<a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_22"></a>media skin&#8221;
to your movie. A media skin specifies the size and shape of the
window that the movie is displayed in, while also specifying which
part of the window is draggable. A QuickTime movie does not have
to be surrounded by a frame. No controls are displayed, except those
embedded in the movie using Flash tracks or wired sprites.</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_23"></a>Digital Video
(DV) codec optimizations, both compression and decompression, for improved
quality and performance on Power Macintosh G3 and Power Mac G4 computers. </p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_24"></a>Velocity Engine
(AltiVec) and multiprocessor support for DV codecs. </p></li>
<li class="li"><p>Inclusion of the <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_25"></a>QuickTime VR Flattener extension
as part of a Full Install of QuickTime, allowing export of VR panoramas
in fast-start format with a selectable preview image (or grid),
enhanced to support <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_26"></a>cubic
VR as well as cylindrical VR.</p></li>
<li class="li"><p>A <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_27"></a>VR exporter
that splits multinode VRs and generates HTML for URL linking, and
a VR exporter for object compression.</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_28"></a>Additions
to AppleScript, including a new suite of editing features and commands. These
features are useful for QuickTime authors who need to automate certain processes,
such as batch preparation of QuickTime movies to include copyright information,
hypertext links, or full-screen presentation.</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_29"></a>MP3 improvements,
including access to ID3v2 metadata. </p></li>
<li class="li"><p>Support for new <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_30"></a>SMIL
attributes, such as clip-begin, clip-end, and qt:fullscreen.</p></li>
<li class="li"><p>Support for new Travelling Matte effects and gradient wipes,
which are useful for application developers working in video and
movies. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102098" title="Changes to the Installer"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF115" title="Changes to the Installer"></a><h3>Changes to the
Installer</h3>
<ul class="spaceabove"><li class="li"><p>Addition of a new <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_31"></a>Third-party
QuickTime Component Downloader. This is designed to provide a registry
of QuickTime components on an Apple server from third-party developers
who want to include their components in user downloads and updates
on an as-needed basis. </p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_32"></a>The Installer
now recognizes previous installations of QuickTime for Java and
will now update them, even during a Full Install. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102104" title="Support for New Formats"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF116" title="Support for New Formats"></a><h3>Support for New
Formats</h3>
<ul class="spaceabove"><li class="li"><p>Support for <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_33"></a>MPEG 1 playback, both local and streaming
on Macintosh and Windows. </p></li>
<li class="li"><p>Introduction of a new QuickTime VR cubic playback engine. </p></li>
<li class="li"><p>Addition of <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_34"></a>Flash
4 support. </p></li>
<li class="li"><p>Changes and improvements to the QuickTime Music Synthesizer,
including support for industry-standard DLS (Downloadable Sound)
and Sound Font 2 formats. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102110" title="Other New Features"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF117" title="Other New Features"></a><h3>Other New Features</h3>
<ul class="spaceabove"><li class="li"><p>Additions and changes to QuickTime for Java &#8211;&#8211;
including support for a new idling mechanism. </p></li>
<li class="li"><p>New EMBED tag parameters and URL extensions. </p></li>
<li class="li"><p>New API functions, including a broadcasting API for Mac OS
that allows third-party developers to write broadcasting applications
or add broadcasting to existing applications. </p></li>
<li class="li"><p>Addition of new wired actions and operands. </p></li>
<li class="li"><p>A new MIME type (.qtl=application/quicktimeplayer) that allows
you to launch movies in QuickTime Player from a text link.</p></li>
<li class="li"><p>New XML importer allows you to embed QuickTime URLs in a small
text file.</p></li>
<li class="li"><p>New ability to render effects and transitions in real time
in DV format on Macintosh computers equipped with compatible hardware
accelerator cards.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102116" title="Version Differences"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABCAGEJ" title="Version Differences"></a><h3>Version Differences</h3>
<p>QuickTime 5 is currently available in three versions:</p>
<ul class="spaceabove"><li class="li"><p>QuickTime 5.0.1 for Mac OS 8, Mac OS 9, and Windows</p></li>
<li class="li"><p>QuickTime 5 for Mac OS X</p></li>
<li class="li"><p>QuickTime 5.0 RT for Mac OS 8 and Mac OS 9</p></li></ul>
<p>QuickTime 5.0.1 is the current release for Mac OS 8, Mac OS
9, and Windows. It replaces QuickTime 5.0 RT, which was distributed
only on CD for Macintosh computers. QuickTime 5.0 RT has essentially
the same feature set as QuickTime 5.0.1.</p>
<p>QuickTime 5 for Mac OS X does not currently support the following
features:</p>
<ul class="spaceabove"><li class="li"><p>Media skins</p></li>
<li class="li"><p>The complete set of broadcasting APIs </p></li>
<li class="li"><p>QuickTime VR authoring components </p></li>
<li class="li"><p>Hotpicks movie </p></li>
<li class="li"><p>The PictureViewer application (Mac OS X offers the Preview
application in its place). </p></li>
<li class="li"><p>The complete set of QuickTime Player AppleScript features</p></li></ul>
<p></p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112546" title="QuickTime Player Changes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF118" title="QuickTime Player Changes"></a><h2>QuickTime Player
Changes</h2>
<p>QuickTime 5 introduces a number of changes to the QuickTime
Player application, including changes to the <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_35"></a>User Interface (UI). The appearance
and behavior differ slightly for Mac OS X, Mac OS 9, and Windows.
Changes are described as follows: </p>
<ul class="ul"><li class="li"><p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_36"></a>Mac OS X version
of QuickTime Player, shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111911">Figure 1-1</a></span>, features the Aqua interface.
Clicking the top-left middle yellow &#8220;minimize&#8221; button moves
the Player into the dock. If a movie is playing, it continues to
play in the dock.</p></li>
<li class="li"><p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_37"></a>Mac OS 9 version
(<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111915">Figure 1-2</a></span>) features
the Platinum interface. Clicking the &#8220;minimize&#8221; box collapses
the Player window so that only the title bar is visible. This pauses
any playing movie.</p></li>
<li class="li"><p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_38"></a>Windows version
(<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111919">Figure 1-3</a></span>) is
similar in appearance to the Mac OS 9 version, but with the Windows
menu bar attached to the Player window, which is a change from previous
versions. It includes the standard Windows control and placement.
Clicking the &#8220;minimize&#8221; box puts an icon of the Player in the
Windows task bar.</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_39"></a>QuickTime
VR also has redesigned controls (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111935">Figure 1-7</a></span>), available on both Mac
OS 9 and Mac OS X. One significant change is the &#8220;show hotspots&#8221;
button, which now toggles between showing and hiding hotspots when
clicked (previously, it showed hotspots only while being clicked).
A new cubic playback engine is also provided in QuickTime 5, discussed
in the section <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112603">“New QuickTime VR Cubic Engine.”</a></span> This feature enables the
viewer to see all the way up and all the way down &#8211;&#8211; in effect,
all six faces of a cube &#8211;&#8211; by clicking in a VR panorama.</p></li></ul>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111911" title="Figure 1-1The Mac OS X version of QuickTime Player with Aqua user interface and some of the available QuickTime TV Channels"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBBIAC" title="Figure 1-1The Mac OS X version of QuickTime Player with Aqua user interface and some of the available QuickTime TV Channels"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>The Mac OS X version of QuickTime
Player with Aqua user interface and some of the available QuickTime
TV Channels</p><img src = "../art/01_010_qt5_osx_player.jpg" alt = "" ></div><br/>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111915" title="Figure 1-2The Mac OS 9 version of QuickTime Player with the Platinum user interface and QuickTime hot picks"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDACJF" title="Figure 1-2The Mac OS 9 version of QuickTime Player with the Platinum user interface and QuickTime hot picks"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>The Mac OS 9 version of QuickTime
Player with the Platinum user interface and QuickTime hot picks</p>
<img src = "../art/01_020_qt5_os9_player.jpg" alt = "" ></div><br/>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111919" title="Figure 1-3The Windows version of QuickTime Player with some of the available QuickTime TV Channels"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABCHJAJ" title="Figure 1-3The Windows version of QuickTime Player with some of the available QuickTime TV Channels"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>The Windows version of QuickTime Player
with some of the available QuickTime TV Channels</p>
<img src = "../art/01_030_qt5_oswin_player.jpg" alt = "" ></div><br/>
<p>A number of <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_40"></a>UI
changes are common to both Macintosh and Windows:</p>
<ul class="ul"><li class="li"><p>The Channel Drawer has been eliminated. Clicking
the QTV button switches to a new scrollable window in the Player&#8217;s
main display area, containing tabs for <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_41"></a>QuickTime TV channels and <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_42"></a>user Favorites. </p></li>
<li class="li"><p>A &#8220;hot picks&#8221; movie now opens as the default content of
QuickTime Player, if the application is launched without a selected
movie, and if the user is connected to the Internet when the application
opens. Note that there is no hot picks Tab. To bring up the hot
picks movie, a user must double-click the QuickTime logo in the
QuickTime TV channels window.</p></li>
<li class="li"><p>When the user rolls the mouse over an icon in the QuickTime
TV channels window or the Favorites window, the name of that channel
or favorite appears in the LCD area below. </p></li>
<li class="li"><p>The controls drawer has been eliminated from the Pro version
of QuickTime Player. The video controls are superimposed on the
main display area, while the audio controls appear in the timeline
controller area, and are accessed by the menu item Show/Hide Sound
Controls. The audio controls (Balance, Bass, and Treble) are shown
in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111923">Figure 1-4</a></span>. </p></li></ul>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111923" title="Figure 1-4The QuickTime 5 Player application with audio controls that you can Show/Hide from a menu item in the Player"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABJIHHJ" title="Figure 1-4The QuickTime 5 Player application with audio controls that you can Show/Hide from a menu item in the Player"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>The QuickTime 5 Player application
with audio controls that you can Show/Hide from a menu item in the
Player</p><img src = "../art/01_040_qt_5_w_sound.jpg" alt = "" ></div><br/>
<ul class="ul"><li class="li"><p>The step-forward and step-backward buttons that
were in the controls drawer are gone, but the left and right arrow
keys still perform these functions. To select and step simultaneously,
hold the shift key down while using the left or right arrow key. Holding
an arrow key down for more than 3 seconds causes it to go into &#8220;turbo&#8221;
mode, allowing you to rapidly select a long section of a movie.</p></li>
<li class="li"><p>There is a new <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_43"></a>Show
Movie Info item in the Windows menu. This opens a single window
containing summary information about the frontmost movie. The information displayed
includes some subset of the following:</p><ul class="nested"><li class="nested li"><p>Annotations
&#8211;&#8211; Information such as title and copyright</p></li>
<li class="nested li"><p>Source &#8211;&#8211; Filename or URL of the current movie</p></li>
<li class="nested li"><p>Format &#8211;&#8211; Data or compression format of each track, or
the track type</p></li>
<li class="nested li"><p>Data Size &#8211;&#8211; Size of the movie file</p></li>
<li class="nested li"><p>Data Rate &#8211;&#8211; Average data rate of the movie, or current
data rate if playing</p></li>
<li class="nested li"><p>Current Movie Time &#8211;&#8211; Current movie time in Hours:Minutes:Seconds.Thirtieths</p></li>
<li class="nested li"><p>Duration &#8211;&#8211; Duration of the movie in Hours:Minutes:Seconds.Thirtieths</p></li>
<li class="nested li"><p>Normal Size &#8211;&#8211; Unscaled height and width of the movie
in pixels</p></li>
<li class="nested li"><p>Current Size &#8211;&#8211; Current height and width of the movie
in pixels</p></li>
<li class="nested li"><p>Bitrate and Streaming Quality &#8211;&#8211; for Streaming movies</p></li></ul></li></ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_3" title="Note"></a><p><strong>Note:</strong>&nbsp;Not all movies
have all of these above settings. </p></div>
<ul class="ul"><li class="li"><p>The former Get Info dialog box has been renamed
Movie Properties, and is now available only when QuickTime Player
is registered (Pro version).</p></li>
<li class="li"><p>If the current movie contains a Chapter List, it now functions
as a pop-up menu in QuickTime Player, just as it does in the QuickTime
browser plugin.</p></li></ul>
<p>The Movie Properties dialog box and the Show Movie Info window
are shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111927">Figure 1-5</a></span> and <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111931">Figure 1-6</a></span>, respectively. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111927" title="Figure 1-5An example of the QuickTime 5 Movie Properties dialog. in Mac OS 9"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDDDAE" title="Figure 1-5An example of the QuickTime 5 Movie Properties dialog. in Mac OS 9"></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>An example of the QuickTime 5 Movie
Properties dialog. in Mac OS 9</p><img src = "../art/01_050_get_info_dialog.gif" alt = "" width="265" height="240"></div><br/>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111931" title="Figure 1-6An example of the QuickTime 5 Movie Info window in Mac OS X. The Inspector shows the characteristics of the frontmost window. "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBACBH" title="Figure 1-6An example of the QuickTime 5 Movie Info window in Mac OS X. The Inspector shows the characteristics of the frontmost window. "></a><p><strong>Figure 1-6&nbsp;&nbsp;</strong>An example of the QuickTime 5 Movie
Info window in Mac OS X. The Inspector shows the characteristics
of the frontmost window. </p><img src = "../art/01_060_qt5_movie_info.jpg" alt = "" ></div><br/>
<p>If you are streaming a QuickTime movie, the bitrate will also
appear in the Movie Info window shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111931">Figure 1-6</a></span>.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102128" title="QuickTime VR Controls"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF119" title="QuickTime VR Controls"></a><h3>QuickTime VR Controls</h3>
<p>When QuickTime Player displays a QuickTime VR movie, it provides
users with a set of controls to manipulate VR objects and panoramas.
A VR <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_44"></a>panorama
lets the user stand in a virtual reality space, such as the church
cathedral illustrated in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111935">Figure 1-7</a></span>, and explore immersively the dimensions of a full
360 panorama &#8211;&#8211; panning across, as well as zooming in and out
of the panorama. </p>
<p>In QuickTime 5, authors can create VR panoramas in which users
also have the ability to tilt up and down a full 180, so that you
can see the ceiling of the cathedral as well as the floor in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111935">Figure 1-7</a></span>. The
actual horizontal and vertical range is determined by the panorama itself.
To look left, right, up and down, you drag with the mouse across
the panorama.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111935" title="Figure 1-7QuickTime VR on Mac OS X, with various controls to view and manipulate QTVR panoramas"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABFCBBE" title="Figure 1-7QuickTime VR on Mac OS X, with various controls to view and manipulate QTVR panoramas"></a><p><strong>Figure 1-7&nbsp;&nbsp;</strong>QuickTime VR on Mac OS X, with various
controls to view and manipulate QTVR panoramas</p><img src = "../art/01_070_qt_inter_vr_l_02.jpg" alt = "" ></div><br/>
<p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_45"></a>In addition
to navigating a QuickTime VR movie by holding the mouse button down
and dragging inside the panorama, the user can manipulate the panorama
by clicking various buttons: </p>
<ul class="spaceabove"><li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_46"></a>A
go-back button. This allows the user to return to the previous node
(a single viewpoint in a panorama). Clicking this button restores
the previous static pan angle, tilt angle, and field of view. The
button is enabled only for multinode (multiple viewpoint) panoramas.</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_47"></a>A zoom-out
button. This allows the user to zoom out. Holding down the mouse
button while the cursor is over this control causes the field of
view of the displayed node to increase, thereby making the object
or panorama appear to move away from the viewer.</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_48"></a>A zoom-in button.
This allows the user to zoom in. Holding down the mouse button while
the cursor is over this control causes the field of view of the
displayed node to decrease, thereby making the object or panorama
appear to move toward the viewer.</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_49"></a>A
hot spot display button. This allows the user to highlight the visible
hot spots. A single click toggles hot spots on; another click toggles
hot spots off. This is a change in behavior from previous hotspot
buttons, which displayed hotspots only while the mouse button was
held down.</p></li></ul>
<p>In addition to these buttons, there is also a label display
area (not shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111935">Figure 1-7</a></span>) in which helpful information can be displayed. For
instance, when the cursor is over one of the buttons, the button&#8217;s
name appears in the label display area. Similarly, when the cursor is
over a hot spot, the hot spot&#8217;s name (if it has one) appears in
the label display area.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102134" title="New Player Application Capabilities"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF120" title="New Player Application Capabilities"></a><h3>New Player Application
Capabilities</h3>
<p>In addition to the user interface changes, QuickTime 5 introduces
new capabilities to the<a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_50"></a> QuickTime Player
application. These are described as follows: </p>
<ul class="spaceabove"><li class="li"><p>If a complete installation is performed, QuickTime
now includes the VR Flattener component. If a VR panorama is loaded
in QuickTime Player, and the VR Flattener component is installed,
the Export pop-up menu includes an item named Movie to Fast Start
QuickTime VR Movie. Choose this item to export the panorama as a
Fast Start VR movie with a preview. There will also be an item named
either &#8220;Movie to QuickTime VR Movie 1.x&#8221; or &#8220;Movie to QuickTime
VR Movie 2.x,&#8221; allowing you to convert your panorama from one
format to the other.</p></li>
<li class="li"><p>In addition to exposing many more of QuickTime Player&#8217;s
features to AppleScript in QuickTime 5 (see <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112587">“AppleScript Changes and Additions”</a></span> for
more information), the features of the Plugin Helper application
are now accessible through AppleScript extensions to QuickTime Player.
You still need to use Plugin Helper to set plugin attributes manually,
but you can use AppleScript and QuickTime Player to automate the
task.</p></li>
<li class="li"><p>It is now possible to attach a &#8220;<a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_51"></a>media skin&#8221; to a movie, which controls the
appearance and behavior of the QuickTime Player 5 application when
the movie is played. A media skin allows you to control the size
and shape of the Player window, as well as the color, width, and
texture of the frame (if any). It also eliminates the visible movie
controller or VR controller, allowing you to design your own controls
using wired sprites. This is discussed in more detail in the next
section, <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112550">“Media Skins.”</a></span> </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112550" title="Media Skins"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABGJAIE" title="Media Skins"></a><h2>Media Skins</h2>
<p>QuickTime Player normally displays movies in a rectangular
display area within a draggable window frame. The frame has a brushed-metal
appearance and rounded control buttons. The exact controls vary
depending on the movie&#8217;s controller type, with most movies having
the standard Movie Controller, and VR movies having the VR Controller. </p>
<p>If the movie&#8217;s controller is set to the None Controller,
QuickTime Player displays the movie in a very narrow frame with
no control buttons. This allows you to display a movie without controls,
or to create your own controls using a Flash track or wired sprites.</p>
<p>Until now, however, QuickTime Player always displayed your
movie in a rectangular display area surrounded by a frame of some
kind, with the frame providing a draggable area for the viewer to
relocate the movie on the desktop.</p>
<p>In QuickTime 5, you can customize the appearance of QuickTime
Player by adding a media skin to your movie. A media skin specifies
the size and shape of the window that the movie is displayed in.
A media skin also specifies which part of the window is draggable.
Your movie is not surrounded by a frame. No controls are displayed,
except those that you may have embedded in the movie using Flash
or wired sprites.</p>
<p>For example, suppose you&#8217;ve created a movie with a curved
frame and wired sprite controls, as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111939">Figure 1-8</a></span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111939" title="Figure 1-8A QuickTime movie with custom frame and wired sprite controls"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBFFHH" title="Figure 1-8A QuickTime movie with custom frame and wired sprite controls"></a><p><strong>Figure 1-8&nbsp;&nbsp;</strong>A QuickTime movie with custom frame
and wired sprite controls</p><img src = "../art/01_080_qtskins_l_10.jpg" alt = "" ></div><br/>
<p>Now suppose you want to add a media skin that specifies a
window the size and shape of your curved frame, and a draggable
area that corresponds to the frame itself.</p>
<p>If the movie is then played in QuickTime 5, your movie appears
in a curved window, as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111943">Figure 1-9</a></span>, with the areas that
you have specified acting as a draggable frame, as if you had created
a custom movie player application. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111943" title="Figure 1-9A skinned movie in QuickTime 5, which appears as if you had created a custom movie player application"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIFFJI" title="Figure 1-9A skinned movie in QuickTime 5, which appears as if you had created a custom movie player application"></a><p><strong>Figure 1-9&nbsp;&nbsp;</strong>A skinned movie in QuickTime 5, which
appears as if you had created a custom movie player application</p>
<img src = "../art/01_090_qtskins_l_11.jpg" alt = "" ></div><br/>
<p>Note that you don&#8217;t need to assign the None Controller to
a movie with a media skin (although you can). If the VR Controller
or Movie Controller is assigned to your movie, the controller&#8217;s
keyboard equivalents operate when your window is active, even though
the controller is not displayed. The space bar starts and stops
a linear movie, for example, while the shift key zooms in on a VR
panorama. You can disable this feature by assigning the None Controller.</p>
<p>Media skins have no effect when a movie is played by the QuickTime
browser plugin or other QuickTime-aware applications, such as Adobe
Acrobat. However, developers can modify their applications to recognize
movies that contain Media Skins, and to retrieve the shape information. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102140" title="Creating Media Skins"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIJDID" title="Creating Media Skins"></a><h3>Creating Media
Skins</h3>
<p>A <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_52"></a>media
skin can be added to a movie using a text editor, a graphics program
such as Adobe Photoshop, and QuickTime Player (Pro version).</p>
<p>In a typical case, you might want to replace QuickTime Player&#8217;s
brushed-metal frame with one of your own design, as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111947">Figure 1-10</a></span>. Here
are the steps that you would follow: </p>
<ol class="ol"><li class="li"><p>Create an image of your new frame using a graphics
program, or perhaps scan in a photo of an actual device. </p></li></ol>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111947" title="Figure 1-10A newly created frame with space for controls and movie playback that replaces QuickTime Player&amp;#8217;s brushed-metal frame"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABGCFAB" title="Figure 1-10A newly created frame with space for controls and movie playback that replaces QuickTime Player&amp;#8217;s brushed-metal frame"></a><p><strong>Figure 1-10&nbsp;&nbsp;</strong>A newly created frame with space
for controls and movie playback that replaces QuickTime Player&#8217;s
brushed-metal frame</p><img src = "../art/01_100_qtskins_l_12.jpg" alt = "" ></div><br/>
<ol class="ol"><li class="li"><p>Open this image in QuickTime Player and add it
to an existing movie as a background image, as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111951">Figure 1-11</a></span>. </p></li></ol>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111951" title="Figure 1-11A new frame image added to an existing QuickTime movie as a background image "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABGEAEI" title="Figure 1-11A new frame image added to an existing QuickTime movie as a background image "></a><p><strong>Figure 1-11&nbsp;&nbsp;</strong>A new frame image added to an existing
QuickTime movie as a background image </p><img src = "../art/01_110_qtskins_l_13.jpg" alt = "" ></div><br/>
<ol class="ol"><li class="li"><p>You would also typically create your own movie
controls, using Flash or wired sprites (and a wired sprite editor
such as LiveStage Pro or Adobe&#8217;s GoLive), and add these as a Flash
track or sprite track on top of your frame image, as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111955">Figure 1-12</a></span>. Call this <code>Framed.mov</code>.</p></li></ol>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111955" title="Figure 1-12Movie controls added as a Flash track or wired sprite track on top of your frame image"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABEECBB" title="Figure 1-12Movie controls added as a Flash track or wired sprite track on top of your frame image"></a><p><strong>Figure 1-12&nbsp;&nbsp;</strong>Movie controls added as a Flash track
or wired sprite track on top of your frame image</p>
<img src = "../art/01_120_qtskins_l_14.jpg" alt = "" ></div><br/>
<ol class="ol"><li class="li"><p>Create a mask image the size and shape of your
frame (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111959">Figure 1-13</a></span>). This image defines the window created when your
movie plays. The image should be black where you want your window,
and white elsewhere. The image can be a BMP, GIF, PICT, or any other
format that QuickTime understands. Call this <code>WinMask.pct</code>.</p></li></ol>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111959" title="Figure 1-13A mask image which is the size and shape of your frame"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABCBJFE" title="Figure 1-13A mask image which is the size and shape of your frame"></a><p><strong>Figure 1-13&nbsp;&nbsp;</strong>A mask image which is the size and
shape of your frame</p><img src = "../art/01_130_qtskins_l_15.gif" alt = "" width="583" height="449"></div><br/>
<ol class="ol"><li class="li"><p>Create a second mask image the size and shape
of the draggable part of your frame (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111963">Figure 1-14</a></span>). Typically, this would
be the same as your first mask, with white areas where your text,
video, and controls will appear. Again, this should be saved as
a black-and-white image in a format that QuickTime can display.
Call this <code>DragMask.pct</code>.</p></li></ol>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111963" title="Figure 1-14A second mask image which is the size and shape of the draggable part of your frame"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABEGAIG" title="Figure 1-14A second mask image which is the size and shape of the draggable part of your frame"></a><p><strong>Figure 1-14&nbsp;&nbsp;</strong>A second mask image which is the
size and shape of the draggable part of your frame</p>
<img src = "../art/01_140_qtskins_l_16.gif" alt = "" width="583" height="449"></div><br/>
<ol class="ol"><li class="li"><p>Using a text editor, create a small file with
the following syntax:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/x-qtskin&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;skin&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;movie src=&quot;Framed.mov&quot;/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;contentregion src=&quot;WinMask.pct&quot;/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dragregion src=&quot;DragMask.pct&quot;/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/skin&gt;<span></span></pre></td></tr></table></div></li>
<li class="li"><p>Save as plain text, with the <code>.mov</code> file
extension. Call this <code>SkinXML.mov</code>.</p></li>
<li class="li"><p>Open <code>SkinXML.mov</code> using
QuickTime Player. Save as a self-contained movie. Call this <code>Finished.mov</code>.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_4" title="Important:"></a><p><strong>Important:</strong>&nbsp;

Be sure to save your movie, in this case <code>Finished.mov</code>,
as a self-contained movie, and distribute the self-contained version,
not the XML text file. The XML text file is dependent on external
files and will not Fast Start over the Internet. The self-contained
version will Fast Start. </p><p></p></div></li></ol>
<p>You can now put <code>Finished.mov</code> on
a CD, email it to a friend, or embed a link to it in a  Web page.
You can target the link to open your movie in QuickTime Player using
the <code>EMBED</code> tag. For example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;EMBED SRC=&quot;poster.qtif&quot; TYPE=&quot;image/x-quicktime&quot; HEIGHT=120 WIDTH=160  HREF=&quot;Finished.mov&quot; TARGET=&quot;quicktimeplayer&quot; &gt;<span></span></pre></td></tr></table></div>
<p>This tag would embed a QuickTime image file named <code>poster.qtif</code> in
a Web page. If the viewer clicks the image, QuickTime will launch <code>Finished.mov</code> in
the QuickTime Player application. </p>
<p>To launch <code>Finished.mov</code> automatically,
without the viewer clicking anything, you add <code>AUTOHREF=&quot;true&quot;</code> to
the <code>EMBED</code> tag.</p>
<p>The example just given uses a static image as a custom frame,
but remember: a media skin just provides masks to use when displaying
your movie. Any visual media type can show through the masks, including
motion video and special effects, such as those possible with the
QuickTime cloud or fire effects. </p>
<p>Any part of your movie can be made into a draggable region.
However, tracks that respond to mouse events, such as VR panorama
tracks or wired sprite tracks, should not be covered by a drag mask
&#8212; the drag behavior prevents  mouse events from reaching underlying tracks.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102154" title="Current Limitations"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF121" title="Current Limitations"></a><h3>Current Limitations</h3>
<p>Currently, a movie can have only one skin track. You cannot
dynamically enable or disable skin tracks. The skin track&#8217;s masks
are stored in the movie file as 1-bit pixel depth PICTs and cannot
be changed dynamically. </p>
<p>Note that skins are not available in the current release of
Mac OS X. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102160" title="Adding Media Skins Using the QuickTime API"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABJJBCD" title="Adding Media Skins Using the QuickTime API"></a><h3>Adding Media Skins
Using the QuickTime API</h3><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_53"></a>
<p>You can also add a media skin to a movie programatically &#8211;&#8211;
for example, to enhance a movie editing application. </p>
<p>You could do this by mimicking the steps just described in
the section <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-102140">“Creating Media Skins.”</a></span> That is, you can generate a movie file,
a pair of black-and-white image files, and a small XML text file
that points to them, then call a movie importer to put them all
together, flatten and save.</p>
<p>But it&#8217;s simpler to add a media skin to a movie in memory
without going through an XML skin importer. The process is as follows:</p>
<ol class="ol"><li class="li"><p>Locate two black-and-white PICT files, or create
two PICT images in RAM, to act as a window region mask and a drag
region mask (You can use graphic importer and exporter components
to convert a BMP or GIF to a PICT). See <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111959">Figure 1-13</a></span> and <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111963">Figure 1-14</a></span> for
examples of these kinds of images.</p></li>
<li class="li"><p>Create a <code>PicHandle</code> that
points to each mask image.</p></li>
<li class="li"><p>Add a new track to the movie.</p></li>
<li class="li"><p>Add a media of type <code>'skin'</code> to
the new track.</p></li>
<li class="li"><p>Tell the media handler to put the masks in a public resource.</p></li>
<li class="li"><p>Flatten and save.</p></li></ol>
<p>The code snippet shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-126695">Listing 1-2</a></span> provides a general outline
of how you can add a media skin programmatically to a QuickTime
movie, and is intended primarily as a guide to the process &#8211;&#8211;
not as actual working code. </p>
<p><span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-126706">Listing 1-3</a></span>, however, is working code that walks you through
the various steps you need to follow in order to add media skins
programmatically to a QuickTime movie. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-126695" title="Listing 1-2A general outline of how you add a media skin to a QuickTime movie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIEEFD" title="Listing 1-2A general outline of how you add a media skin to a QuickTime movie"></a><p class="codesample"><strong>Listing 1-2&nbsp;&nbsp;</strong>A
general outline of how you add a media skin to a QuickTime movie</p>
<div class="codesample"><table><tr><td scope="row"><pre>//Adding a skin without using the importer<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Somehow create a picture handle:<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    PicHandle winRgnHndl = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    PicHandle dragRgnHndl = nil;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    winRgnHndl = MyMagicalCode();<span></span></pre></td></tr><tr><td scope="row"><pre>    dragRgnHndl = MyMagicalCode();<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // create a new track<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    theTrack = NewMovieTrack(myMovie, ((Fixed)movieBox.right) &lt;&lt;<span></span></pre></td></tr><tr><td scope="row"><pre>                            ((Fixed)16, movieBox.bottom) &lt;&lt; 16, 0);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // must have someplace for the sample data to go<span></span></pre></td></tr><tr><td scope="row"><pre>    // could use BeginMediaEdits, or...<span></span></pre></td></tr><tr><td scope="row"><pre>    // create a cool handle that the HandleDataHandler can deal with,<span></span></pre></td></tr><tr><td scope="row"><pre>    // so I can add this stuff in ram without needing a file<span></span></pre></td></tr><tr><td scope="row"><pre>    dataRef = NewHandleClear(5);<span></span></pre></td></tr><tr><td scope="row"><pre>    atomHeader[0] = EndianU32_NtoB(8);<span></span></pre></td></tr><tr><td scope="row"><pre>    atomHeader[1] = EndianU32_NtoB('data');<span></span></pre></td></tr><tr><td scope="row"><pre>    PtrAndHand(atomHeader, dataRef, 8);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // add a skin media structure to the movie track<span></span></pre></td></tr><tr><td scope="row"><pre>    theMedia = NewTrackMedia(theTrack, 'skin', movieTimeScale, dataRef,<span></span></pre></td></tr><tr><td scope="row"><pre>                             HandleDataHandlerSubType);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // retrieve media handler reference so we can call it<span></span></pre></td></tr><tr><td scope="row"><pre>    mh = GetMediaHandler(theMedia);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // tell the media handler to add the masks<span></span></pre></td></tr><tr><td scope="row"><pre>        // 'skcr' is skin content region<span></span></pre></td></tr><tr><td scope="row"><pre>        // 'skdr' is skin drag region<span></span></pre></td></tr><tr><td scope="row"><pre>        // final parameter is length -- set to 0 for an allocated handle<span></span></pre></td></tr><tr><td scope="row"><pre>    err = MediaSetPublicInfo(mh, 'skcr', winRgnHndl, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (err) goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    err = MediaSetPublicInfo(mh, 'skdr', dragRgnHndl, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (err) goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // dispose of the Handle when done<span></span></pre></td></tr><tr><td scope="row"><pre>    DisposeHandle(dataRef);<span></span></pre></td></tr><tr><td scope="row"><pre>    dataRef = nil<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-126706" title="Listing 1-3Adding media skins programmatically to a QuickTime movie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBIFIJ" title="Listing 1-3Adding media skins programmatically to a QuickTime movie"></a><p class="codesample"><strong>Listing 1-3&nbsp;&nbsp;</strong>Adding
media skins programmatically to a QuickTime movie</p>
<div class="codesample"><table><tr><td scope="row"><pre>OSErr QTSkin_AddSkinTrack (Movie theMovie){<span></span></pre></td></tr><tr><td scope="row"><pre>        Track myTrack = NULL; // the skin track<span></span></pre></td></tr><tr><td scope="row"><pre>        Media myMedia = NULL; // the skin track's media<span></span></pre></td></tr><tr><td scope="row"><pre>        Rect myRect;<span></span></pre></td></tr><tr><td scope="row"><pre>        MediaHandler myHandler = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>        PicHandle myContentPic = NULL; // window mask<span></span></pre></td></tr><tr><td scope="row"><pre>        PicHandle myDragPic = NULL; // drag mask<span></span></pre></td></tr><tr><td scope="row"><pre>        OSErr myErr = paramErr;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        if (theMovie == NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// elicit the two pictures we need from the user<span></span></pre></td></tr><tr><td scope="row"><pre>        myContentPic = QTSkin_GetPicHandleFromFile();<span></span></pre></td></tr><tr><td scope="row"><pre>        if (myContentPic == NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>        myDragPic = QTSkin_GetPicHandleFromFile();<span></span></pre></td></tr><tr><td scope="row"><pre>        if (myDragPic == NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// get the movie's dimensions<span></span></pre></td></tr><tr><td scope="row"><pre>        GetMovieBox(theMovie, &amp;myRect);<span></span></pre></td></tr><tr><td scope="row"><pre>        MacOffsetRect(&amp;myRect, -myRect.left, -myRect.top);<span></span></pre></td></tr><tr><td scope="row"><pre>// create the skin track and media<span></span></pre></td></tr><tr><td scope="row"><pre>        myTrack = NewMovieTrack(theMovie, FixRatio(myRect.right, 1),<span></span></pre></td></tr><tr><td scope="row"><pre>                                FixRatio(myRect.bottom, 1), kNoVolume);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (myTrack == NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        myMedia = NewTrackMedia(myTrack, FOUR_CHAR_CODE('skin'),<span></span></pre></td></tr><tr><td scope="row"><pre>                                GetMovieTimeScale(theMovie), NULL, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (myMedia == NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>// find a media handler that understands skins<span></span></pre></td></tr><tr><td scope="row"><pre>        myHandler = GetMediaHandler(myMedia);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (myHandler == NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// tell the media handler to add<span></span></pre></td></tr><tr><td scope="row"><pre>// the skin content picture<span></span></pre></td></tr><tr><td scope="row"><pre>        myErr = MediaSetPublicInfo(myHandler, FOUR_CHAR_CODE('skcr'),<span></span></pre></td></tr><tr><td scope="row"><pre>                                    (void *)myContentPic, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (myErr != noErr)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// now add the skin drag picture<span></span></pre></td></tr><tr><td scope="row"><pre>        myErr = MediaSetPublicInfo(myHandler, FOUR_CHAR_CODE('skdr'),<span></span></pre></td></tr><tr><td scope="row"><pre>                                    (void *)myDragPic, 0);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (myErr != noErr)<span></span></pre></td></tr><tr><td scope="row"><pre>            goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>// note: the last parameter passed to<span></span></pre></td></tr><tr><td scope="row"><pre>// MediaSetPublicInfo is the data size;<span></span></pre></td></tr><tr><td scope="row"><pre>// pass 0 for an allocated handle<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// add the media to the track<span></span></pre></td></tr><tr><td scope="row"><pre>        myErr = InsertMediaIntoTrack(myTrack, 0, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>                GetMediaDuration(myMedia), fixed1);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// skin tracks should be disabled...<span></span></pre></td></tr><tr><td scope="row"><pre>        SetTrackEnabled(myTrack, false);<span></span></pre></td></tr><tr><td scope="row"><pre>bail:<span></span></pre></td></tr><tr><td scope="row"><pre>    if (myContentPic != NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            KillPicture(myContentPic);<span></span></pre></td></tr><tr><td scope="row"><pre>    if (myDragPic != NULL)<span></span></pre></td></tr><tr><td scope="row"><pre>            KillPicture(myDragPic);<span></span></pre></td></tr><tr><td scope="row"><pre>    return(myErr);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102167" title="Adding Custom Media Skins with AppleScript"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF122" title="Adding Custom Media Skins with AppleScript"></a><h3>Adding Custom
Media Skins with AppleScript</h3>
<p>QuickTime 5 provides additional AppleScript support in the
QuickTime Player application, which is discussed in the section <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112587">“AppleScript Changes and Additions.”</a></span> The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_54"></a>QuickTime Player
scripting dictionary, for example, contains new commands and properties
that can be used to automate many movie-editing and playback tasks.</p>
<p>This section describes how you can create an AppleScript droplet
with a custom media skin (the code for this droplet is already supplied). <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_55"></a>Droplets are special AppleScript applications
that respond to files and folders dragged onto their icon. Each
droplet has properties and parameters that can be set by double-clicking
the droplet and clicking the &#8220;Set Prefs&#8221; button in the main
dialog. </p>
<br/><div><img src = "../art/01_140a_mediaskin_droplet.gif" alt = "image: ../art/01_140a_mediaskin_droplet.gif" width="148" height="58"></div><br/>
<p>In this example, the droplet automates the process of creating
a QuickTime movie with a media skin.</p>
<p>Refer to <code>&lt;http://www.apple.com/applescript/qtas5/qtas5p2.htm&gt;</code> for
a collection of <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_56"></a>example
scripts that are available in QuickTime 5.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102173" title="Media Skin Droplet"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF123" title="Media Skin Droplet"></a><h3>Media Skin Droplet</h3>
<p>The script of the media skin droplet assembles the components
of a media skin movie and saves the results as a self-contained
QuickTime movie file. This section describes how the script works
and the steps required to use the example files included with the
script. Note that this script only processes standard QuickTime
movie files of file type &#8220;MooV&#8221;.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102179" title="Creating the Media Skin Image Files"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF124" title="Creating the Media Skin Image Files"></a><h4>Creating the Media
Skin Image Files</h4>
<p>To create a custom media skin for your movies, you need to
create three specific image files:</p>
<ul class="spaceabove"><li class="li"><p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_57"></a>media
skin. This image (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111967">Figure 1-15</a></span>) will be the window in which the movie is played.
It can be of nearly any shape or size. </p></li></ul>
<p>In the example included with this script, there is a simple
media skin file that adds a standard border and title bar to the
movie. This image is designed to display a movie having a width
of 240 pixels and a height of 180 pixels. The blue region defines
the area to display the video content of the movie. </p>
<p>Note that the offset of the top left of the blue region is
6 pixels horizontally and 22 pixels vertically from the top left
of the media skin image. The script uses these measurements in order
to place the video track in the corrext position over the media
skin background. Note also that the size and offset info has been
overlaid on the media skin image.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111967" title="Figure 1-15The media skin image with size and offset information overlay"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABEGBCD" title="Figure 1-15The media skin image with size and offset information overlay"></a><p><strong>Figure 1-15&nbsp;&nbsp;</strong>The media skin image with size and
offset information overlay</p><img src = "../art/01_150_droplet_1.gif" alt = "" width="261" height="217"></div><br/>
<ul class="spaceabove"><li class="li"><p>The drag mask image. This image (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111971">Figure 1-16</a></span>) defines
the areas of the window that can be clicked by the user to drag
the window. The black regions of the image will be the clickable
areas of the finished window. In this example, the title bar and
sides of the movie will be the drag regions.</p></li></ul>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111971" title="Figure 1-16The drag mask image with black region specified as clickable areas"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDICFJ" title="Figure 1-16The drag mask image with black region specified as clickable areas"></a><p><strong>Figure 1-16&nbsp;&nbsp;</strong>The drag mask image with black region
specified as clickable areas</p><img src = "../art/01_160_droplet_2.gif" alt = "" width="264" height="216"></div><br/>
<ul class="spaceabove"><li class="li"><p>The window mask image. This image (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111975">Figure 1-17</a></span>) defines
the visible area of the media skin window. Black regions will be
visible to the user, white areas will be invisible. In this example,
the entire area defined by the media skin image will be visible. </p></li></ul>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111975" title="Figure 1-17The window mask image"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABEEIDH" title="Figure 1-17The window mask image"></a><p><strong>Figure 1-17&nbsp;&nbsp;</strong>The window mask image</p>
<img src = "../art/01_170_droplet_3.gif" alt = "" width="265" height="219"></div><br/>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102185" title="Transparent Overlay Media Skins"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF125" title="Transparent Overlay Media Skins"></a><h4>Transparent Overlay
Media Skins</h4>
<p>If you want the media skin to partially cover the source video,
you need to fill the area to be transparent with a solid color of
a specific RGB value, such as White, Black, %50 Gray, or 100% Blue. </p>
<p>In the following example image (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111979">Figure 1-18</a></span>), the QuickTime Q has
been filled with %50 Gray. The script preferences can be set to
adjust the track&#8217;s operation color and transfer mode for this
value, and the center of the Q image will become transparent when
the skinned movie is created.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111979" title="Figure 1-18The QuickTime Q filled with 50% gray"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIAJJC" title="Figure 1-18The QuickTime Q filled with 50% gray"></a><p><strong>Figure 1-18&nbsp;&nbsp;</strong>The QuickTime Q filled with 50% gray</p>
<img src = "../art/01_180_droplet_4.jpg" alt = "" ></div><br/>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102190" title="Setting the Script Preferences"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF126" title="Setting the Script Preferences"></a><h4>Setting the Script
Preferences</h4>
<p>The script droplet relies on preferences, set by the user,
to locate and manipulate the essential files. This particular script
is designed to look for the various image files in the same folder
as the droplet. If the essential image files are not in the same
folder as the script, the script will not execute.</p>
<p>You can make copies of this droplet to be placed in other
folders containing your various media skin files. You set the preferences
for each droplet to work with its neighbor files.</p>
<p>To set the preferences for the droplet, you double-click its
icon in the Finder to summon the status dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111983">Figure 1-19</a></span>). The
dialog shows the current settings for the various script preferences.
Click the &#8220;Set Prefs&#8221; button to set each of the script preferences.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111983" title="Figure 1-19The status dialog to set preferences"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIBAJE" title="Figure 1-19The status dialog to set preferences"></a><p><strong>Figure 1-19&nbsp;&nbsp;</strong>The status dialog to set preferences</p>
<img src = "../art/01_190_droplet_5.gif" alt = "" width="373" height="252"></div><br/>
<p>The first three preferences are for identifying the image
files to be used by the script when constructing the media skin
movie.</p>
<p>In the first dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111987">Figure 1-20</a></span>), enter the name of
the image file which will be used as the media skin background.
You may either enter the name in the input field or click the &#8220;Choose
File&#8221; button to locate the appropriate file. The script will then
place the name of the chosen file in the input field for you.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111987" title="Figure 1-20The name of the image file dialog"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDDDBJ" title="Figure 1-20The name of the image file dialog"></a><p><strong>Figure 1-20&nbsp;&nbsp;</strong>The name of the image file dialog</p>
<img src = "../art/01_200_droplet_6.gif" alt = "" width="371" height="140"></div><br/>
<p>After you have entered the name of the appropriate media skin
image file (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111991">Figure 1-21</a></span>), click the &#8220;OK&#8221; button to proceed.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111991" title="Figure 1-21Entering the name of the appropriate media skin image file"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABHEBEG" title="Figure 1-21Entering the name of the appropriate media skin image file"></a><p><strong>Figure 1-21&nbsp;&nbsp;</strong>Entering the name of the appropriate
media skin image file</p><img src = "../art/01_210_droplet_7.gif" alt = "" width="373" height="140"></div><br/>
<p>You repeat this process in the forthcoming dialogs for identifying
the window mask image and the drag mask image.</p>
<p>After inputting the names of the other files, two successive
dialogs appear, asking you to enter the offset to be used to position
the video track against the chosen media skin background. These
measurements depend on the design of your media skin. </p>
<p>In the first dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111995">Figure 1-22</a></span>), you enter the horizontal
offset (in pixels) from the left of the media skin image to the
left of the video display area.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111995" title="Figure 1-22The horizontal offset dialog"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABHHADJ" title="Figure 1-22The horizontal offset dialog"></a><p><strong>Figure 1-22&nbsp;&nbsp;</strong>The horizontal offset dialog</p>
<img src = "../art/01_220_droplet_8.gif" alt = "" width="372" height="124"></div><br/>
<p>In the second dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-111999">Figure 1-23</a></span>), you enter enter the
vertical offset (in pixels) from the top of the media skin image
to the top of the video display area.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-111999" title="Figure 1-23The vertical offset dialog"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABJCHGH" title="Figure 1-23The vertical offset dialog"></a><p><strong>Figure 1-23&nbsp;&nbsp;</strong>The vertical offset dialog</p>
<img src = "../art/01_230_droplet_9.gif" alt = "" width="376" height="126"></div><br/>
<p>The next dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112003">Figure 1-24</a></span>) determines if you want the media skin image to
be placed behind the source video or in front of the source video.
Media skin images placed over the source video must have areas of
a solid color that will be made transparent during the creation
of the skinned movie. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112003" title="Figure 1-24The dialog that asks if you want the media skin placed behind the source video or in front of it"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBBJHC" title="Figure 1-24The dialog that asks if you want the media skin placed behind the source video or in front of it"></a><p><strong>Figure 1-24&nbsp;&nbsp;</strong>The dialog that asks if you want
the media skin placed behind the source video or in front of it</p>
<img src = "../art/01_240_droplet_10.gif" alt = "" width="378" height="110"></div><br/>
<p>If you clicked the &#8220;Yes&#8221; button, a list dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112007">Figure 1-25</a></span>) appears
from which you can choose the color which the script will make transparent.
If your overlay color is not in the list, you may enter its RGB
values individually by clicking the &#8220;Other&#8221; button at the bottom
of the list dialog.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112007" title="Figure 1-25A list dialog that lets you choose the color that script makes transparent"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBJEGH" title="Figure 1-25A list dialog that lets you choose the color that script makes transparent"></a><p><strong>Figure 1-25&nbsp;&nbsp;</strong>A list dialog that lets you choose
the color that script makes transparent</p><img src = "../art/01_250_droplet_11.gif" alt = "" width="288" height="287"></div><br/>
<p>If you clicked the &#8220;Other&#8221; button, a series of three dialogs
will prompt you for each of the RGB values for the color to be made
transparent. Each color is specified as a list of individual Red,
Green, and Blue values: {Red value, Green value, Blue value}. Each individual
RGB color component is an integer between 0 and 65535, with 0 being
the minimum and 65535 being the maximun value. </p>
<p>For example, White is {65535, 65535, 65535}, Black is {0,
0, 0}, 100% Red is {65535, 0, 0}, 50% Gray is {32768, 32768, 32768},
etc. Note that the values you enter in these dialogs must exactly
match those of the area in the overlay image that is meant to be
transparent.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112011" title="Figure 1-26One of three dialogs that prompt you for each of the RGB values for the color to be made transparent, in this case the Red component"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF102" title="Figure 1-26One of three dialogs that prompt you for each of the RGB values for the color to be made transparent, in this case the Red component"></a><p><strong>Figure 1-26&nbsp;&nbsp;</strong>One of three dialogs that prompt
you for each of the RGB values for the color to be made transparent,
in this case the Red component</p><img src = "../art/01_260_droplet_12.gif" alt = "" width="376" height="174"></div><br/>
<p>The final two preference dialogs are for setting the playback
properties.</p>
<p>Click the &#8220;Yes&#8221; button if you want the movie to automatically
start playing when opened.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112015" title="Figure 1-27Preference dialog"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF103" title="Figure 1-27Preference dialog"></a><p><strong>Figure 1-27&nbsp;&nbsp;</strong>Preference dialog</p>
<img src = "../art/01_270_droplet_13.gif" alt = "" width="373" height="107"></div><br/>
<p>Click the &#8220;Yes&#8221; button if you want the movie to automatically
close when it has finished playing.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112019" title="Figure 1-28Another preference dialog"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF104" title="Figure 1-28Another preference dialog"></a><p><strong>Figure 1-28&nbsp;&nbsp;</strong>Another preference dialog</p>
<img src = "../art/01_280_droplet_14.gif" alt = "" width="376" height="125"></div><br/>
<p>After setting the property, the script will return to the
status dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112023">Figure 1-29</a></span>). Click the &#8220;Done&#8221; button to exit the script.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112023" title="Figure 1-29The status dialog"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBFCCJ" title="Figure 1-29The status dialog"></a><p><strong>Figure 1-29&nbsp;&nbsp;</strong>The status dialog</p>
<img src = "../art/01_290_droplet_15.gif" alt = "" width="373" height="255"></div><br/>
<p>If the media skin image is set to overlay, the operation color
name or value will be displayed in the status dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112027">Figure 1-30</a></span>).</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112027" title="Figure 1-30The color name or value displayed in the status dialog"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABHJBGB" title="Figure 1-30The color name or value displayed in the status dialog"></a><p><strong>Figure 1-30&nbsp;&nbsp;</strong>The color name or value displayed
in the status dialog</p><img src = "../art/01_300_droplet_16.gif" alt = "" width="376" height="267"></div><br/>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102195" title="Running the Script"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF127" title="Running the Script"></a><h3>Running the Script</h3>
<p>To use the script, you drag a movie file, or multiple files,
or folders of movie files onto the droplet. A dialog (<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112031">Figure 1-31</a></span>) appears
prompting you for the destination folder for the finished files.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112031" title="Figure 1-31Specifying the destination folder for finished files"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIDJHC" title="Figure 1-31Specifying the destination folder for finished files"></a><p><strong>Figure 1-31&nbsp;&nbsp;</strong>Specifying the destination folder
for finished files</p><img src = "../art/01_310_droplet_17.gif" alt = "" width="441" height="277"></div><br/>
<p>Once chosen, a media skin copy of each dragged-on movie is
created and placed into this folder. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102200" title="Completed Examples"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF128" title="Completed Examples"></a><h4>Completed Examples</h4>
<p><span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112035">Figure 1-32</a></span> (top) shows a completed example of a basic 240 x
180 skinned QuickTime movie, with standard border and title. In
this case, the airplane is shown flying diagonally from the lower
portion of the screen to the upper. <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112035">Figure 1-32</a></span> (bottom) shows a completed example
of a 144 x 108 overlaid skinned Q with the airplane flying inside
the Q. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112035" title="Figure 1-32Two examples of skinned movies, one (top) with a standard border and title bar, the other (bottom) with a QuickTime Q overlaid"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDADBF" title="Figure 1-32Two examples of skinned movies, one (top) with a standard border and title bar, the other (bottom) with a QuickTime Q overlaid"></a><p><strong>Figure 1-32&nbsp;&nbsp;</strong>Two examples of skinned movies, one
(top) with a standard border and title bar, the other (bottom) with
a QuickTime Q overlaid</p><img src = "../art/01_320_droplet_18.jpg" alt = "" ></div><br/>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112554" title="Digital Video (DV) Codec Optimizations"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF129" title="Digital Video (DV) Codec Optimizations"></a><h2>Digital Video
(DV) Codec Optimizations</h2>
<p>QuickTime 5 includes the following:</p>
<ul class="ul"><li class="li"><p>Digital video (DV) <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_58"></a>codec optimizations that are designed
to provide significant performance and quality improvements over
previous versions. </p></li>
<li class="li"><p>Support for optimized high-quality decompression on Power
Mac G3 and G4 computers. This support is designed: </p><ul class="nested">
<li class="nested li"><p>to improve speed for rendering in r408 and v408 formats.</p></li>
<li class="nested li"><p>to improve speed for playback to YUV accelerated windows.</p></li>
<li class="nested li"><p>to improve speed for high-quality, single field video.</p></li></ul></li>
<li class="li"><p>Improved quality compression in medium and best-quality cases
for Power Mac G3 and Power Mac G4 computers.</p></li>
<li class="li"><p>Improved quality of normal (low) quality decompression on
Power Mac G4 computers. </p></li></ul>
<p>These enhancements are aimed at developers and content authors
using tools such as video editing applications. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102205" title="High-Quality Decompression"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF130" title="High-Quality Decompression"></a><h3>High-Quality Decompression</h3>
<p>Both scalar and vector codec quality has been improved significantly
in this release. There are performance improvements as well. The
code is optimized in both scalar and vector codecs to pack pixels
directly to the output format, which provides a significant improvement
in performance for r408.</p>
<p>QuickTime 5 supports optimized single field decompression,
which improves performance for cases when the single field hint
(<code>hintsSingleField</code>) is
set. The vector codec now includes gamma correction when decompressing
to the screen. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102211" title="Improved Compression Quality and Performance"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF131" title="Improved Compression Quality and Performance"></a><h3>Improved Compression
Quality and Performance</h3>
<p>Overall, there is a significant improvement in both compression
quality and performance. Special attention has been paid to make
sure that existing DV content can be recompressed with few additional
artifacts. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102217" title="Improved Low-Quality Vector Decode"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF132" title="Improved Low-Quality Vector Decode"></a><h3>Improved Low-Quality
Vector Decode</h3>
<p>The quality of low-quality decode on vector machines (400
MHz or greater) has been improved, while also improving performance.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102223" title="Addition of Multiprocessor Support"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF133" title="Addition of Multiprocessor Support"></a><h3>Addition of Multiprocessor
Support</h3>
<p>Multiprocessor support has been enabled for vector decode
(i.e., high quality, low quality, playback and scrub/render). Multiprocessor
support has also been enabled for encode in the vector case. For
the actual DV operation, the results are nearly two times faster
on a two CPU computer than the same code running in non-multiprocessor
mode.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112558" title="Real-Time Effects Support"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF134" title="Real-Time Effects Support"></a><h2>Real-Time Effects
Support</h2>
<p>QuickTime 5 includes the following: </p>
<ul class="ul"><li class="li"><p>Support for real-time effects hardware (i.e.,
third-party video cards). </p></li>
<li class="li"><p>Support for codecs with hardware latency.</p></li>
<li class="li"><p>Improved support for third-party hardware effects.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112562" title="New Latency APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF135" title="New Latency APIs"></a><h2>New Latency APIs</h2>
<p>This section discusses the new latency APIs available in QuickTime
5. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102229" title="Overview"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF136" title="Overview"></a><h3>Overview</h3>
<p>QuickTime 5 has defined new APIs to retrieve the video and
sound latencies from Video Codecs and Sound Output Components.</p>
<p>The latency values are used to separately offset the timebases
of the video and/or sound media from that of the movie timebase.
The offsets are based on pipeline delays within the implementation
of the sound or video components.  For example, given some video hardware
that has several stages that will take five frames to go through
between the start of decompression and when the data is displayed,
the video codec should report a <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_59"></a>latency of five frames, so that QuickTime
will schedule the frames in advance. The codec is responsible for
reporting a latency that represents its accurate pipeline in order
to maintain audio and video synchronization.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102235" title="Usage"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF137" title="Usage"></a><h3>Usage</h3>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102241" title="Applications"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF138" title="Applications"></a><h4>Applications</h4>
<p>Some performance implications occur when dealing with implementations
that have latency. Notably, starting and stopping a movie requires
extra time since the media&#8217;s timebases will start before the movie
timebase. When latency is present, an application should avoid setting
the movies rate directly from positive to negative without going through
zero first, since otherwise the latency will not be correctly taken
into account (and video and sound will not be synchronized thereafter).</p>
<p>A limitation in the current implementation is that QuickTime
does not support mixing different video latencies between different
codecs. This limitation is within QuickTime and cannot be overcome
by the codecs. Applications should avoid creating movies that mix multiple
types of video codecs if the codecs have different latencies.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102246" title="Video Codecs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF139" title="Video Codecs"></a><h4>Video Codecs</h4>
<p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_60"></a>Video codecs
for a given hardware should report the actual latency time required
for the hardware. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102251" title="Sound Output Components"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF140" title="Sound Output Components"></a><h4>Sound Output Components</h4>
<p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_61"></a>Sound
Output Components for a given hardware should report the actual
latency time required for the hardware. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102256" title="Video Codec Latency API"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF141" title="Video Codec Latency API"></a><h3>Video Codec Latency
API</h3>
<p>The following API is used by QuickTime to retrieve the video
latency:</p>
<a name="//apple_ref/c/func/ImageCodecGetDecompressLatency" title="ImageCodecGetDecompressLatency"></a><a name="//apple_ref/doc/c_ref/ImageCodecGetDecompressLatency" title="ImageCodecGetDecompressLatency"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-ImageCodecGetDecompressLatency" title="ImageCodecGetDecompressLatency"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_62"></a><h3 class="tight">ImageCodecGetDecompressLatency</h3>
<p class="spaceabove">Retrieves the video latency from the specified video codec.</p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult ImageCodecGetDecompressLatency(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a>                                              ci, <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeRecord" target="_top">TimeRecord</a> * latency);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>Specifies the image compressor component for
the request. </p></dd>
<dt><em>latency</em></dt>
<dd><p>Pointer to a time record containing the latency
required for that codec.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>The following code snippet shows an example implementation
of this function:</p>
<div class="codesample"><table><tr><td scope="row"><pre>pascal ComponentResult myCodecGetDecompressLatency(myCodecGlobals *glob,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                    TimeRecord *latency)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSErr   result = paramErr;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Example setting 33 ms latency<span></span></pre></td></tr><tr><td scope="row"><pre>    if (latency != nil) {<span></span></pre></td></tr><tr><td scope="row"><pre>        latency-&gt;value.hi = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>        latency-&gt;value.lo = 33;             // latency value<span></span></pre></td></tr><tr><td scope="row"><pre>        latency-&gt;scale = 1000;              // 1 ms scale<span></span></pre></td></tr><tr><td scope="row"><pre>        latency-&gt;base = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>        result = noErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return result;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-136648" title="Sound Output Latency API "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF142" title="Sound Output Latency API "></a><h3>Sound Output Latency
API </h3>

<p>Retrieves the audio latency from the specified sound output
component.</p>
<p>The new selector <code>siOutputLatency</code> for
the <code>SoundComponentGetInfo</code> function
is used by QuickTime to retrieve the sound latency. (The <em>infoPtr</em> parameter
points to a time record.)</p>
<div class="codesample"><table><tr><td scope="row"><pre>#define siOutputLatency &#8216;olte&#8217;<span></span></pre></td></tr></table></div>
<p>The following code snippet shows an example implementation
of this selector:</p>
<div class="codesample"><table><tr><td scope="row"><pre>static pascal ComponentResult mySoundGetInfo(SoundComponentGlobalsPtr globals,  SoundSource sourceID, OSType selector, void *infoPtr)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    ComponentResult             result = noErr;<span></span></pre></td></tr><tr><td scope="row"><pre>    PrefStructPtr               prefsPtr;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    prefsPtr = *(globals-&gt;prefsHandle);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    switch (selector) {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>case siSampleSize:              // return current sample size<span></span></pre></td></tr><tr><td scope="row"><pre>            *((short *) infoPtr) = (short)prefsPtr-&gt;sampleSize;<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>case siOutputLatency:                                               // return  the sound output latency<span></span></pre></td></tr><tr><td scope="row"><pre>        // in this example, 25 ms<span></span></pre></td></tr><tr><td scope="row"><pre>if (infoPtr != nil) {<span></span></pre></td></tr><tr><td scope="row"><pre>                infoPtr-&gt;value.hi = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>                infoPtr-&gt;value.lo = 25;             // sound latency<span></span></pre></td></tr><tr><td scope="row"><pre>                infoPtr-&gt;scale = 1000;              // 1 ms scale<span></span></pre></td></tr><tr><td scope="row"><pre>                infoPtr-&gt;base = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>. . .<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112566" title="Multiprocessor (MP) Support"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF143" title="Multiprocessor (MP) Support"></a><h2>Multiprocessor
(MP) Support</h2>
<p>QuickTime 5 provides support for accelerating video compression
and decompression on multiprocessor computers, such as the Power
Mac G4 MP.</p>
<p>Image compressor and decompressor components must be revised
to take advantage of MP. There are two ways to approach this. If
the component is modified to split a single compression or decompression
operation into several MP tasks, this will improve performance for
all applications. Some algorithms are not easily divided into independent units
of work, however, so this is not always feasible. Alternatively,
components may be modified so that they are able to work asynchronously
and permit the application to continue working in the blue task
(the MP task on Mac OS 9) while work is in progress.</p>
<p>If the codec is not written to take advantage of MP, then
processing work will run in the application&#8217;s task, as illustrated
in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112039">Figure 1-33</a></span>. (On
Mac OS 9, this MP task is called the blue task.)</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112039" title="Figure 1-33If your codec doesn&amp;#8217;t take advantage of MP, processing work runs in the application&amp;#8217;s task. "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABEHFJD" title="Figure 1-33If your codec doesn&amp;#8217;t take advantage of MP, processing work runs in the application&amp;#8217;s task. "></a><p><strong>Figure 1-33&nbsp;&nbsp;</strong>If your codec doesn&#8217;t take advantage
of MP, processing work runs in the application&#8217;s task. </p>
<img src = "../art/01_330_mx_l_01.gif" alt = "" width="318" height="154"></div><br/>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;This diagram
is intended as a conceptual aid only. In reality, all tasks, including
the blue task, may migrate between processors as necessary. </p></div>
<p>Now suppose the codec is modified to create a number of MP
tasks and split each compression or decompression operation between
them. This is illustrated in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112043">Figure 1-34</a></span>. Assuming no other MP
tasks are running, the total time taken for the operation could
be decreased by a factor of up to the number of processors &#8211;&#8211;
for example, on a two-processor machine, the time taken could be
halved.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112043" title="Figure 1-34A codec that splits its work into multiple processes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDDHHJ" title="Figure 1-34A codec that splits its work into multiple processes"></a><p><strong>Figure 1-34&nbsp;&nbsp;</strong>A codec that splits its work into
multiple processes</p><img src = "../art/01_340_mx_l_02.gif" alt = "" width="318" height="154"></div><br/>
<p>The client application does not need to have been modified
to take advantage of such an accelerated component. As on a single-processor
computer, the compression or decompression request does not return
until after it is complete.</p>
<p>In QuickTime 5, the DV compressor and decompressor components
have been modified to divide their work between a number of processors
in this manner.</p>
<p>Some compression or decompression algorithms do not lend themselves
to such division. Often there may be major data dependencies between
sub-stages that mean that one step cannot be started until the previous
one is complete.</p>
<p>In such a case, the codec can often still be modified to support
multiprocessor computers by performing its work in a single MP task
while the application continues to execute in its own task. Rather
than accelerating a single operation, this increases the number
of operations that may be performed at once. In order to see an
overall performance improvement, the application must call asynchronous
versions of the compression or decompression APIs. This is illustrated
in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112047">Figure 1-35</a></span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112047" title="Figure 1-35A codec revised to support asynchronous mode of work "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDFGHJ" title="Figure 1-35A codec revised to support asynchronous mode of work "></a><p><strong>Figure 1-35&nbsp;&nbsp;</strong>A codec revised to support asynchronous
mode of work </p><img src = "../art/01_350_mx_l_03.gif" alt = "" width="318" height="154"></div><br/>
<p>When the operation is complete, the application&#8217;s asynchronous
completion routine is called. Completion routines are often called
at deferred task time, so they must be written with care not to
make any calls that might move or purge memory. (See Technote 1104, &#8220;Interrupt-Safe
Routines,&#8221; at <code>http://developer.apple.com/technotes/tn/tn1104.html</code> for more
information on this topic.)</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102285" title="Enabling Asynchronous MP Decompression Using the Base Decompressor"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF144" title="Enabling Asynchronous MP Decompression Using the Base Decompressor"></a><h3>Enabling Asynchronous
MP Decompression Using the Base Decompressor</h3>
<p>The Base Decompressor, which has been available since QuickTime
3.0, is designed to simplify the job of writing an Image Decompressor.
It deals with the job of managing asynchronous scheduled decompression,
manages the queue safely, and avoids synchronization issues.</p>
<p>In QuickTime 5, the Base Decompressor has been extended to
simplify making an image decompressor component able to perform
asynchronous decompression in a single MP task. The JPEG, H.263,
Cinepak, and Video decompressors use this mechanism to run asynchronously.
The H.263 compressor has been similarly modified to run asynchronously.</p>
<p>If you have a decompressor that uses the base codec, all you
need to do to support the asynchronous MP mode is to implement the <code>ImageCodecGetMPWorkFunction</code> function.</p>
<p>Your implementation should call your base decompressor instance&#8217;s <code>ImageCodecGetBaseMPWorkFunction</code> function,
and pass to it a UPP for your <code>DrawBand</code> function: </p>
<div class="codesample"><table><tr><td scope="row"><pre>pascal ComponentResult<span></span></pre></td></tr><tr><td scope="row"><pre>ExampleCDGetMPWorkFunction(<span></span></pre></td></tr><tr><td scope="row"><pre>                ExampleSubDecompressorGlobals *storage,<span></span></pre></td></tr><tr><td scope="row"><pre>                ComponentMPWorkFunctionUPP *workFunction, void **refCon)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if( 0 == storage-&gt;drawBandUPP )<span></span></pre></td></tr><tr><td scope="row"><pre>        storage-&gt;drawBandUPP =<span></span></pre></td></tr><tr><td scope="row"><pre>                        NewImageCodecMPDrawBandUPP( ExampleCDDrawBand);<span></span></pre></td></tr><tr><td scope="row"><pre>    return ImageCodecGetBaseMPWorkFunction(storage-&gt;delegateComponent,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        workFunction, refCon,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        storage-&gt;drawBandUPP, storage);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>If you implement the <code>ImageCodecGetMPWorkFunction</code> selector,
your <code>DrawBand</code> function
must be MP-safe. (MP safety is an even stricter condition than interrupt
safety. As well as not calling routines that may move or purge memory,
you may not make any calls which might cause 68K code to be executed.
Ideally, your <code>DrawBand</code> function
should not make any API calls whatsoever.)</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102291" title="Taking Advantage of Asynchronous MP Codecs in Your Application"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF145" title="Taking Advantage of Asynchronous MP Codecs in Your Application"></a><h3>Taking Advantage
of Asynchronous MP Codecs in Your Application</h3>
<p>QuickTime will automatically call a codec asynchronously when
you&#8217;re playing a movie. If your application calls the Image Compression
Manager directly to perform compression or decompression operations,
you can pass a completion routine to <code>CompressSequenceFrame</code> or <code>DecompressSequenceFrame/S/When</code> to
enable asynchronous operation. (If the codec does not support asynchronous
operation, the API will run synchronously but call your completion
routine before returning.)</p>
<p>If your application calls the Standard Compression component
to perform image compression, you&#8217;ll need to call a new API variant, <code>SCCompressSequenceFrameAsync</code>,
which is new with QuickTime 5 and supports completion routines.
While this is running, you should occasionally call <code>SCAsyncIdle</code> from
system task time. </p>
<p>Note that the H.263 compressor has been modified to run asynchronously
if requested. </p>
<a name="//apple_ref/c/func/SCCompressSequenceFrame" title="SCCompressSequenceFrame"></a><a name="//apple_ref/doc/c_ref/SCCompressSequenceFrame" title="SCCompressSequenceFrame"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-SCCompressSequenceFrame" title="SCCompressSequenceFrame"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_63"></a><h3 class="tight">SCCompressSequenceFrame</h3>
<p class="spaceabove">This function compresses a single frame in a sequence-compression
operation. You must call this function once for each frame in the
sequence, including the first frame.</p>
<p>This function is available in previous versions of
QuickTime.</p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult SCCompressSequenceFrame (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapHandle" target="_top">PixMapHandle</a> src,
   const <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Rect" target="_top">Rect</a> *srcRect,
   <!--a-->Handle<!--/a--> *data,
   long *dataSize, short
   *notSyncFlag);
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<a name="//apple_ref/c/func/SCCompressSequenceFrameAsync" title="SCCompressSequenceFrameAsync"></a><a name="//apple_ref/doc/c_ref/SCCompressSequenceFrameAsync" title="SCCompressSequenceFrameAsync"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-SCCompressSequenceFrameAsync" title="SCCompressSequenceFrameAsync"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_64"></a><h3 class="tight">SCCompressSequenceFrameAsync</h3>
<p class="spaceabove">This is an asynchronous variant of <code>SCCompressSequenceFrame</code> which
accepts a completion routine.</p>
<p class="spaceabove"><pre>
SCCompressSequenceFrameAsync (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapHandle" target="_top">PixMapHandle</a> src,
   const <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Rect" target="_top">Rect</a> * srcRect, <!--a-->Handle<!--/a-->
   * data, long * dataSize, short
   * notSyncFlag,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ICMCompletionProcRecordPtr" target="_top">ICMCompletionProcRecordPtr</a>
   asyncCompletionProc);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>If you pass a nil completion routine, this routine behaves
like <code>SCCompressSequenceFrame</code>.</p>
<p>While performing asynchronous compression with <code>SCCompressSequenceFrameAsync</code>,
you should occasionally call <code>SCAsyncIdle</code>.
This gives the standard compression component an opportunity to
restart its compression operation if it needs to force a key frame.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<a name="//apple_ref/c/func/SCAsyncIdle" title="SCAsyncIdle"></a><a name="//apple_ref/doc/c_ref/SCAsyncIdle" title="SCAsyncIdle"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-SCAsyncIdle" title="SCAsyncIdle"></a>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_65"></a><h3 class="tight">SCAsyncIdle</h3>

<p class="spaceabove"><pre>
SCAsyncIdle (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci);
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-116828" title="New MP-Related Image Compression Manager APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF146" title="New MP-Related Image Compression Manager APIs"></a><h2>New MP-Related
Image Compression Manager APIs</h2>
<p>The following new multiprocessor-related APIs, which are part
of the Image Compression Manager, have been introduced:</p>
<ul class="ul"><li class="li"><p>The functions <code>ICMSequenceSetInfo</code> and <code>ICMSequenceGetInfo</code>. </p></li>
<li class="li"><p>The constants <code>kICMSequenceTaskWeight</code> and <code>kICMSequenceTaskName</code>.</p></li>
<li class="li"><p>The <code>taskWeight</code> and <code>taskName</code> fields
of <code>CodecCompressParams</code> and <code>CodecDecompressParams</code>. </p></li></ul>
<p>The functions <code>ICMSequenceSetInfo</code> and <code>ICMSequenceGetInfo</code> are
general property-setters for compression and decompression sequences.
They provide support for two properties, <code>kICMSequenceTaskWeight</code> and <code>kICMSequenceTaskName</code>,
which allow ICM clients to request that multiprocessor tasks assisting
compression and decompression operations use specific task weights
and task names.</p>
<p>The task name has no performance impact, but it can be helpful
while debugging. </p>
<p>If your compressor or decompressor component creates MP tasks
and the <code>taskWeight</code> and/or <code>taskName</code> fields
of the <code>CodecCompressParams</code> or <code>CodecDecompressParams</code> structures
are nonzero, you should assign the MP tasks weights and/or names
using the <code>MPSetTaskWeight</code> and/or <code>MPSetTaskType</code> routines.</p>
<p>The <code>compressedDataSize</code> field
has also been added to the <code>CodecCompressParams</code> field.
This provides a safer way for asynchronous compressors to return
the size of the compressed frame data. (Previously, compressors
had to return the size in a field of the image description, which
can be an unlocked handle.)</p>
<p>Note that Apple&#8217;s multiprocessing APIs provide support for
both co-operatively scheduled tasks and preemptively scheduled tasks.
The APIs for preemptively tasks allow applications to create symmetrically
scheduled preemptive tasks that can be run on a single processor
machine, and will take full advantage of multiple processors when
they are installed.</p>
<p>For more information, refer to <code>http://developer.apple.com/macos/multiprocessing.html</code></p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112575" title="QuickTime VR Authoring Components Added"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF147" title="QuickTime VR Authoring Components Added"></a><h2>QuickTime VR
Authoring Components Added</h2>
<p>QuickTime 5 includes the addition of three QuickTime VR authoring
components. These are </p>
<ul class="ul"><li class="li"><p>A <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_66"></a>QTVR
Flattener, which is a movie export component that converts an existing QuickTime
VR single node movie into a new movie optimized for the Web. </p></li>
<li class="li"><p>A <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_67"></a>Multinode
Splitter, also a movie export component. </p></li>
<li class="li"><p>A <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_68"></a>QTVR
Object Movie Compressor, a movie export component. </p></li></ul>
<p>All three components are contained in the file QuickTime VR
Authoring and are installed if the user performs a Select All in
the Custom Install option. </p>
<p>As movie exporters, these authoring components can be demonstrated
using the QuickTime Player application, QuickTime Pro, or a custom
application by opening a QuickTime VR movie and then choosing Export
from the File menu. You can then choose the particular exporter
by selecting it from the Export: popup menu in the Export File Dialog.</p>
<p>Menu names that appear in the UI (subject to change) are:</p>
<ul class="ul"><li class="li"><p>Movie to Fast-Start QuickTime VR movie (the Flattener). </p><ul class="nested">
<li class="nested li"><p>Appears for all single node panorama and object movies. </p></li></ul></li>
<li class="li"><p>Movie to Separate Single-Node Movies (The Multinode Splitter). </p><ul class="nested">
<li class="nested li"><p>Appears only for 2.0 format multinode movies. </p></li></ul></li>
<li class="li"><p>Movie to QuickTime VR Object Movie (Object Movie Compressor). </p><ul class="nested">
<li class="nested li"><p>Appears only for 2.0 format object movies. </p></li></ul></li></ul>
<p>Once an Export method is selected, you can click the Options
button to bring up a dialog where you can choose options specific
to the given exporter.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102316" title="The QTVR Flattener"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF148" title="The QTVR Flattener"></a><h3>The QTVR Flattener</h3>
<p>The QTVR Flattener is a movie export component that converts
an existing QuickTime VR single node movie into a new movie that
is optimized for the Web. The flattener re-orders media samples;
and for panoramas the flattener creates a small preview of the panorama. When
viewed on the Web, this preview appears after 5% to 10% of the movie
data has been downloaded, allowing users to see a lower-resolution
version of the panorama before the full resolution version is available. </p>
<p>In QuickTime 5, this QTVR Flattener has been enhanced. There
is a new implementation of tile ranking that works with horizontal
and cubic panos, and also with two-dimensional tiling. The result
is that panoramas appear to come in faster. </p>
<p>To use the QTVR Flattener from your application, you first
create a <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_69"></a>QuickTime
VR movie, then open the QTVR Flattener component and call the <code>MovieExportToFile</code> routine,
as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-117229">Listing 1-4</a></span>.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-117229" title="Listing 1-4Using the QTVR flattener "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABHEGJC" title="Listing 1-4Using the QTVR flattener "></a><p class="codesample"><strong>Listing 1-4&nbsp;&nbsp;</strong>Using
the QTVR flattener </p>
<div class="codesample"><table><tr><td scope="row"><pre>ComponentDescription desc;<span></span></pre></td></tr><tr><td scope="row"><pre>Component flattener;<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentInstance qtvrExport = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>desc.componentType = MovieExportType;<span></span></pre></td></tr><tr><td scope="row"><pre>desc.componentSubType = MovieFileType;<span></span></pre></td></tr><tr><td scope="row"><pre>desc.componentManufacturer = kQTVRFlattenerManufacturer;<span></span></pre></td></tr><tr><td scope="row"><pre>desc.componentFlags = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>desc.componentFlagsMask = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>flattener = FindNextComponent(nil, &amp;desc);<span></span></pre></td></tr><tr><td scope="row"><pre>if (flattener) qtvrExport = OpenComponent (flattener);<span></span></pre></td></tr><tr><td scope="row"><pre>if (qtvrExport)<span></span></pre></td></tr><tr><td scope="row"><pre>    MovieExportToFile (qtvrExport, &amp;myFileSpec, myQTVRMovie, nil, 0, 0);<span></span></pre></td></tr></table></div>
<p>The code snippet shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-117229">Listing 1-4</a></span> creates a flattened
movie file specified by the <code>myFileSpec</code> parameter.
If your QuickTime VR movie is a panorama, the flattened movie file includes
a quarter size, blurred JPEG, compressed preview of the panorama
image.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_6" title="Note"></a><p><strong>Note:</strong>&nbsp;The constants <code>MovieExportType</code> and <code>MovieFileType</code> used
in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-117229">Listing 1-4</a></span> are
defined in the header files <code>QuickTimeComponents.h</code> and <code>Movies.h</code>, respectively,
and are defined as <code>'spit'</code> and <code>'MooV'</code>. </p></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;The various authoring
atom type constants can be found in the 5.0 version of <code>QuickTimeVRFormat.h</code>. </p></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102343" title="Presenting Users with the QTVR Flattener Dialog Box"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF149" title="Presenting Users with the QTVR Flattener Dialog Box"></a><h4>Presenting Users
with the QTVR Flattener Dialog Box</h4>
<p>You can present users with the QTVR Flattener&#8217;s own dialog
box. This allows users to choose options such as how to compress
the preview image or to select a separate preview image file. </p>
<p>To show the dialog box, use the following line of code:</p>
<div class="codesample"><table><tr><td scope="row"><pre>err = MovieExportDoUserDialog (qtvrExport, myQTVRMovie, nil, 0,                                  0, &amp;cancel);<span></span></pre></td></tr></table></div>
<p>If the user cancels the dialog box, then the Boolean cancel
is set to <code>true</code>.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102348" title="Communicating Directly with the Component"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF150" title="Communicating Directly with the Component"></a><h4>Communicating
Directly with the Component</h4>
<p>If you don&#8217;t want to present the user with the flattener&#8217;s
dialog box, you can communicate directly with the component by using
the <code>MovieExportSetSettingsFromAtomContainer</code> routine
as described next.</p>
<p>If you want to specify a preview image other than the default,
you need to create a special atom container and then call <code>MovieExportSetSettingsFromAtomContainer</code> before
calling <code>MovieExportToFile</code>.
You can specify how to compress the image, what resolution to use, and
you can even specify your own preview image file to be used. The
atom container you pass in can have various atoms that specify certain
export options. These atoms must all be children of a flattener
settings parent atom. </p>
<p>The preview resolution atom is a 16-bit, big-endian value
that allows you to specify the resolution of the preview image.
This value, which defaults to <code>kQTVRQuarterRes</code>,
indicates how much to reduce the preview image.</p>
<p>The blur preview atom is a Boolean value that indicates whether
to blur the image before compressing. Blurring usually results in
a much more highly compressed image. The default value is <code>true</code>.</p>
<p>The create preview atom is a Boolean value that indicates
whether a preview image should be created. The default value is <code>true</code>.</p>
<p>The import preview atom is a Boolean value that is used to
indicate that the preview image should be imported from an external
file rather than generated from the image in the panorama file itself.
This allows you to have any image you want as the preview for the panorama.
You can specify which file to use by also including the import specification atom,
which is an <code>FSSpec</code> data
structure that identifies the image file. If you do not include this
atom, then the flattener presents the user with a dialog box asking
the user to select a file. The default for import preview is <code>false.</code> If
an import file is used, the image is used at its natural size and
the resolution setting is ignored.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102354" title="Sample Atom Container for the QTVR Flattener"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF151" title="Sample Atom Container for the QTVR Flattener"></a><h4>Sample Atom Container
for the QTVR Flattener</h4>
<p>The sample code in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-117250">Listing 1-5</a></span> creates an <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_70"></a>atom container
and adds atoms to indicate an import preview file for the flattener
to use.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-117250" title="Listing 1-5Specifying a preview file for the flattener to use "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBEJBH" title="Listing 1-5Specifying a preview file for the flattener to use "></a><p class="codesample"><strong>Listing 1-5&nbsp;&nbsp;</strong>Specifying
a preview file for the flattener to use </p>
<div class="codesample"><table><tr><td scope="row"><pre>Boolean yes = true;<span></span></pre></td></tr><tr><td scope="row"><pre>QTAtomContainer exportData;<span></span></pre></td></tr><tr><td scope="row"><pre>QTAtom parent;<span></span></pre></td></tr><tr><td scope="row"><pre>err = QTNewAtomContainer(&amp;exportData);<span></span></pre></td></tr><tr><td scope="row"><pre>// create a parent for the other settings atoms<span></span></pre></td></tr><tr><td scope="row"><pre>err = QTInsertChild (exportData, kParentAtomIsContainer,<span></span></pre></td></tr><tr><td scope="row"><pre>            kQTVRFlattenerSettingsParentAtomType, 1, 0, 0, nil, &amp;parent);<span></span></pre></td></tr><tr><td scope="row"><pre>// Add child atom to indicate we want to import the preview from a file<span></span></pre></td></tr><tr><td scope="row"><pre>err = QTInsertChild (exportData, parent,<span></span></pre></td></tr><tr><td scope="row"><pre>                    kQTVRFlattenerCreatePreviewAtomType, 1, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>                    sizeof (yes), &amp;yes, nil);<span></span></pre></td></tr><tr><td scope="row"><pre>// Add child atom to tell which file to import<span></span></pre></td></tr><tr><td scope="row"><pre>err = QTInsertChild (exportData, parent,<span></span></pre></td></tr><tr><td scope="row"><pre>            kQTVRFlattenerImportPreviewAtomType, 1, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>            sizeof (previewSpec), &amp;previewSpec, nil);<span></span></pre></td></tr><tr><td scope="row"><pre>// Tell the export component<span></span></pre></td></tr><tr><td scope="row"><pre>MovieExportSetSettingsFromAtomContainer (qtvrExport, exportData);<span></span></pre></td></tr></table></div>
<p>Overriding the compression settings is a bit more complicated.
You need to open a standard image compression dialog component and
make calls to obtain an atom container that you can then pass to
the QTVR Flattener component.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-117281" title="Listing 1-6Overriding the compression settings "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF105" title="Listing 1-6Overriding the compression settings "></a><p class="codesample"><strong>Listing 1-6&nbsp;&nbsp;</strong>Overriding
the compression settings </p>
<div class="codesample"><table><tr><td scope="row"><pre>ComponentInstance sc;<span></span></pre></td></tr><tr><td scope="row"><pre>QTAtomContainer compressorData;<span></span></pre></td></tr><tr><td scope="row"><pre>SCSpatialSettings ss;<span></span></pre></td></tr><tr><td scope="row"><pre>sc =    OpenDefaultComponent(StandardCompressionType,StandardCompressionSubType);<span></span></pre></td></tr><tr><td scope="row"><pre>ss.codecType = kCinepakCodecType;<span></span></pre></td></tr><tr><td scope="row"><pre>ss.codec = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>ss.depth = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>ss.spatialQuality = codecHighQuality<span></span></pre></td></tr><tr><td scope="row"><pre>err = SCSetInfo(sc, scSpatialSettingsType, &amp;ss);<span></span></pre></td></tr><tr><td scope="row"><pre>err = SCGetSettingsAsAtomContainer(sc, &amp;compressorData);<span></span></pre></td></tr><tr><td scope="row"><pre>MovieExportSetSettingsFromAtomContainer (qtvrExport, compressorData);<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102360" title="The QTVR Multinode Splitter"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF152" title="The QTVR Multinode Splitter"></a><h3>The QTVR Multinode
Splitter</h3>
<p>The QTVR Splitter, a movie export component, takes a QTVR
version 2.x multinode movie and exports a set of single-node movies
with relative URL links to each other. </p>
<p>The QTVR Splitter works by changing all of the link hotspots
to URL hotspots, leaving any previously defined URL or undefined
(blob) hotspots unchanged. If the QTVR Flattener component is present,
the Splitter gives you the option of using it to add fast-start
data to the movies, including previews for panorama nodes. Additionally,
the Splitter will generate a text file with HTML embed tags for
each movie created.</p>
<p>When you display the movies&#8217; output by the Splitter using
the QuickTime Plugin, clicking the relative URL links opens the
other nodes in the browser window. When loaded in a frame, the Plugin
loads the new movies in the same frame. </p>
<p>When the user clicks a link which displays a multinode movie
split this way, the first thing to download is the hotspot track,
which is live immediately. Then any preview data is downloaded,
and finally the tiles download in and are placed over the background
grid or preview. The user can jump to another node at any time,
and only the nodes they visit are downloaded, unlike a multinode
movie, which does not allow navigation until the entire file has
downloaded, and therefore downloads all of the nodes, whether the
user visits them or not. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102366" title="Advantages of a Multinode Movie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF153" title="Advantages of a Multinode Movie"></a><h4>Advantages of
a Multinode Movie</h4>
<p>The one significant advantage of a multinode movie is that
when the user jumps to a new node the movie opens to the destination
view defined in the authoring process. This can be overcome by specifying
view angles in the embed tag (with a new page for each movie which
links to it), but the Splitter does not do this for you.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102372" title="Usage of the QTVR Splitter"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF154" title="Usage of the QTVR Splitter"></a><h4>Usage of the QTVR
Splitter</h4>
<p>As discussed, the QTVR Splitter is a movie export component.
When placed in your System Folder, any application that uses movie
exporters will have access to it. The instructions outlined here
use the QuickTime Player Pro application to demonstrate its usage.
You begin by creating a multinode movie, using a QuickTime VR tool.</p>
<p>To split the movie:</p>
<ol class="ol"><li class="li"><p>Open any QTVR version 2.0 or 2.1 multinode movie
in the QuickTime Player Pro application. Version 1.0 multinode movies
can be converted to version 2.1 using the QTVR Converter component,
which is part of the QuickTime VR Authoring Studio, or ConVRter
from Sumware, a third-party developer.</p></li>
<li class="li"><p>Choose Export... from the File menu. Choose Separate Single-node
movies from the popup menu at the bottom of the Export dialog. The
file name you specify here will be edited by the Splitter to assure
Internet compatibility. Spaces will be converted to underscores,
other dangerous characters will be removed, and the resulting name
will be truncated to allow the node number to be appended. Take
this into account in order to wind up with useful file names at
the end of the process.</p></li>
<li class="li"><p>Clicking the options... button opens the splitters settings
dialog. </p><ol class="ol"><li class="ol ol"><p>Generate HTML Embed tags: The splitter
will write out a text file including an embed tag for each movie
which can be copied and pasted into your HTML pages. Useful data
included are the sizes of the movies as well as all of the hotspots
and their URLs. Although the URLs are included in the movies, this
list can be helpful if you want to override a URL or provide one
for an undefined hotspot.</p></li>
<li class="ol ol"><p>Overwrite Files with matching names: Since the Splitter creates
names that are different from the name you specify in the dialog,
there is no &#8220;replace&#8221; confirmation. Leaving this box checked
allows the Splitter to overwrite files which have the same names
as those it is creating. Since these names are pretty unusual, the
chances are that the only files it will overwrite are those created
by it from the same source movie. Unchecking this box will cause
the Splitter to abort its operation if it runs into a file with
a matching name.</p></li>
<li class="ol ol"><p>Use QTVR Flattener: The Splitter will use the QTVR Flattener
to add fast-start data to the files exported, along with an optional
preview track for any panorama nodes. Clicking the options... button
will open the Flattener's settings dialog. If this is unchecked,
the movies will still be flattened, and will still download their
tiles, but not with the tile reordering or preview added by the
QTVR Flattener. </p></li></ol></li>
<li class="li"><p>Click OK and let the Splitter do its work.</p></li>
<li class="li"><p>Test the movies by dragging the first node into a browser
window.</p></li></ol>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102378" title="Displaying Movies in Web Pages"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF155" title="Displaying Movies in Web Pages"></a><h4>Displaying Movies
in Web Pages</h4>
<p>Now you put all of the movies in the same directory together.
Do not change any of the names. Even changing capitalization will
break the references. If you need different names, go back and repeat
the process with a different starting name.</p>
<p>There are a few ways to go about displaying the movie in your
Web pages. The simplest (and least attractive) approach is to put
a link to the first node in one of your pages:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;A href src=&quot;my_scene_node127.mov&quot;&gt;click to view the QTVR scene&quot;&lt;/a&gt;<span></span></pre></td></tr></table></div>
<p>This causes the Plugin to open the movie in an empty browser
window. Clicking any URL links loads the new movies in the same
place. </p>
<p>You can improve the user experience significantly by embedding
the movies in your pages:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;Embed src=&quot;my_scene_node127.mov&quot;...<span></span></pre></td></tr></table></div>
<p>You copy and paste the embed tags provided in the HTML file
written by the Splitter. In this case, the Plugin displays the movie
in place like a graphic. However, when you click a URL link the
new movie will be loaded in a blank window like the above case.</p>
<p>To remedy this, either override the URLs in the movies with
links to pages with the other nodes embedded in them (a bit of work),
or display the movies in a frame. </p>
<p>To load the movies in a frame, just use the first one as a
frame source (instead of an HTML source with it embedded):</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;frameset&gt;...<span></span></pre></td></tr></table></div>
<p>Now the movies will all load in that frame, providing a smooth
experience for the user.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102384" title="QuickTime VR Object Movie Compressor"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF156" title="QuickTime VR Object Movie Compressor"></a><h3>QuickTime VR Object
Movie Compressor</h3>
<p>The QuickTime VR Object Movie Compressor, a movie export component,
takes a multirow object movie and compresses frames in multidimensions
with the goal of making the file smaller. It includes the user settings
dialog box shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112051">Figure 1-36</a></span>. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112051" title="Figure 1-36The new QTVR Object Compression user Settings dialog box"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABFFCAB" title="Figure 1-36The new QTVR Object Compression user Settings dialog box"></a><p><strong>Figure 1-36&nbsp;&nbsp;</strong>The new QTVR Object Compression user
Settings dialog box</p><img src = "../art/01_360_qtvr_obj_dialog.jpg" alt = "" ></div><br/>
<p>The user settings for the QuickTime VR Object Movie Compressor
include:</p>
<ul class="spaceabove"><li class="li"><p>The Standard Compression Setting, which is set
by clicking on the Compression Setting button.</p></li>
<li class="li"><p>The target file size of the compressed VR object movie, which
is specified as:</p><div class="codesample"><table><tr><td scope="row"><pre>kQTVRObjExporterSettingsTargetSize = FOUR_CHAR_CODE('tsiz')<span></span></pre></td></tr></table></div></li>
<li class="li"><p>The Block Size Setting, which can also be set from a QT atom
container, controls the dimensions of the compression: </p>
<div class="codesample"><table><tr><td scope="row"><pre>    long: blockSize<span></span></pre></td></tr><tr><td scope="row"><pre>    type: &#8216;bsiz&#8217;<span></span></pre></td></tr><tr><td scope="row"><pre>    Valid Value: 1, 2, 3, 4 which correspond to the block size of<span></span></pre></td></tr><tr><td scope="row"><pre>                 1x1, 3x3, 5x5, 7x7<span></span></pre></td></tr></table></div></li></ul>
<p></p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112579" title="A New Installer for Downloading Third-Party Components"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF157" title="A New Installer for Downloading Third-Party Components"></a><h2>A New Installer
for Downloading Third-Party Components</h2>
<p>With QuickTime 5, Apple introduces a new third-party software
install mechanism, as shown in the dialog in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112055">Figure 1-37</a></span>. The goal of this new
mechanism is to provide support for automatically downloading third-party
components on an as-needed basis. For example, if a user opens a
movie that requires a particular third-party codec, QuickTime will
offer to download and install it. To accomplish this goal, Apple
will provide developers with a registry of QuickTime components
on an Apple server. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112055" title="Figure 1-37The new third-party install and update options for QuickTime users on Mac OS X"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABJJDEH" title="Figure 1-37The new third-party install and update options for QuickTime users on Mac OS X"></a><p><strong>Figure 1-37&nbsp;&nbsp;</strong>The new third-party install and update
options for QuickTime users on Mac OS X</p><img src = "../art/01_370_update.jpg" alt = "" ></div><br/>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_8" title="Note"></a><p><strong>Note:</strong>&nbsp;This is an opportunity
for third-party developers who have built components to include
those components in user downloads and updates of QuickTime. Apple
Developer Relations is currently administering this program, though
details have not yet been finalized. </p></div>
<p>While not all details have been finalized &#8211;&#8211; contact your
representative in Apple Developer Relations for the latest information
&#8211;&#8211; the process works tentatively as described in the next section. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102395" title="General Submission Requirements for Third-Party Components"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF158" title="General Submission Requirements for Third-Party Components"></a><h3>General Submission
Requirements for Third-Party Components</h3>
<p>If you wish to include your component in the third-party component
download mechanism, you need to follow certain guidelines and requirements.
These include</p>
<ol class="ol"><li class="li"><p>An End User license agreement for your component
(in the target language). The agreement should be in plain ASCII
text (no formatting), and will be displayed in a scrollable dialog
before installing your component. Line wrapping will be done by
the dialog, so hard carriage returns should be used sparingly. There
will be two buttons (&#8220;Agree&#8221;, &#8220;Disagree&#8221;) in the license
dialog. You can specify what verbs you want in these buttons. If
you do not specify, Apple will use appropriate verbs taken directly from
your license agreement.</p></li>
<li class="li"><p>A Macintosh (OS 8/9) QuickTime Component File. This component
file should have Macintosh file type of <code>'thng'</code> and
will be installed in the QuickTime Extensions folder in the Macintosh
System&#8217;s Extension folder. </p></li>
<li class="li"><p>A Macintosh (OS X) QuickTime Component File. This component
file (CFM or Mach-O format) should have a <code>.qtx</code> file
name extension and will be installed in the <code>/Library/QuickTime</code> folder.
It should be a traditional (not bundle-packaged) component file.</p></li>
<li class="li"><p>A Windows QuickTime Component File. This component file should
have a .qtx file name extension and will be installed in the QuickTime
folder inside the Windows System folder (&#8220;System32\QuickTime&#8221;
for Windows NT/2000, &#8220;System\QuickTime&#8221; for Windows 95/98/Millenium). </p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_9" title="Important:"></a><p><strong>Important:</strong>&nbsp;
Apple will only install a single component file per
platform (i.e., one file for Mac OS 9 or earlier, one file for Mac
OS X, and one file for Windows). If you have multiple components for
a single platform, you must build them into a single file. </p><p></p></div></li>
<li class="li"><p>Tests. You must provide Apple with test content files and
a test procedure that verifies your component has been installed
and works correctly. Apple will continue to use these tests as new
versions of QuickTime are shipped, so a reasonably thorough set
of test content will help ensure that your component continues to
work in the future.</p></li></ol>
<p>There is additional information that you may need to submit:</p>
<ol class="ol"><li class="li"><p>In the QuickTime Updater, your component will
be listed as a selectable item in the &#8220;Custom&#8221; dialog. You can
specify the component name you would like displayed there. You can
also specify a short description of your component that will be
displayed in the Item Description text box, if the user selects
your component name in the list. If you do not specify this information,
Apple will use your file name (minus the <code>.qtx</code> extension)
as the displayed component name, and make up a short description something
like &#8220;This component adds support for Your_Name_Here to QuickTime&#8221;. In
either case, Apple will add an approximate download size to the
description.</p></li>
<li class="li"><p>If your component is a Movie Importer or Graphics Importer,
you should have a<code> 'mime'</code> resource
in your component file that describes the file types, file extensions,
and MIME types that your importer can handle.</p></li></ol>
<p>This helps Apple download your component automatically when
a Web page with your content is viewed through QuickTime&#8217;s browser
plug-in.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112583" title="How to Package QuickTime Components on Mac OS X"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF159" title="How to Package QuickTime Components on Mac OS X"></a><h2>How to Package
QuickTime Components on Mac OS X</h2>
<p>This section discusses how you can package your QuickTime
software components on Mac OS X &#8211;&#8211; for example, if you are third-party
developer who needs to install components that you have either written
or developed. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102407" title="How and Where Your Component Gets Installed"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF160" title="How and Where Your Component Gets Installed"></a><h3>How and Where
Your Component Gets Installed</h3>
<p>There are two types of <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_71"></a>component executables on Mac
OS X: <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_72"></a>Code
Fragment Manager (CFM) and <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_73"></a>Mach-O.
You can also build a CFM component updated for Carbon that runs on
both Mac OS X and Mac OS 9. </p>
<p>Third-party components are typically stored in the <code>/Library/QuickTime</code> directory,
formerly known as the QuickTime Extensions folder. Programmatically,
you find this folder by calling FindFolder with the constant <code>kQuickTimeExtensionsFolderType</code>. </p>
<p>Both types of executables &#8211;&#8211; CFM and Mach-O &#8211;&#8211; can
be packaged in either one of two ways. </p>
<ol class="ol"><li class="li"><p>The &#8220;monolithic&#8221; way, i.e., where you have
a single file that has a resource fork and a data fork. The data
fork will contain the code and the resource fork will contain the <code>'thng'</code> resource
and any other resources that are required. In the case of CFM, they would
also contain the <code>'cfrg'</code> resource.
The binary could be a CFM executable or a Mach-O executable. Executables
that are packaged this way in the<code> /Library/QuickTime</code> directory
tend to have their file names ending in <code>.qtx</code> in
order to identify them. </p></li>
<li class="li"><p>The other way of packaging components is by means of bundle
(directory) packaging, which is typically used by plug-ins and applications.
(For more information about <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_74"></a>bundles,
refer to Inside Mac OS X: System Overview, Chapter 4, &#8220;Bundles,&#8221;
which is available for download at<code> http://developer.apple.com/documentation/MacOSX/Conceptual/SystemOverview/index.html.)</code></p></li></ol>
<p>As far as components are concerned, there are two important
differences between the regular plug-in bundle and the component
as a bundle. These have to do with the bundles&#8217; package info file
&#8211;&#8211; <code>PkgInfo</code> &#8211;&#8211;
which is an 8 byte file that&#8217;s effectively a type and creator for
the bundle, with the first 4 bytes being the type and the second
4 bytes being the creator. For example, Apple&#8217;s components all
have <code>'thngapp1'</code> in that
file. Similarly, in the Info.plist file within the bundle that&#8217;s
an XML property list, there is a key in the Info.plist file called <code>CFBundlePackageType</code>.
It should have the value <code>'thng'</code> to
identify this as a component. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102413" title="Localized and Non-Localized Resources"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF161" title="Localized and Non-Localized Resources"></a><h3>Localized and
Non-Localized Resources</h3><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_75"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_76"></a>
<p>Given that within a bundle the resources are stored in data
fork resource files separately from the executable, they can be
further split between localizable and non-localizable resources.
The <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_77"></a>'thng'</code> resources
are stored in the non-localized resource file. </p>
<p>In the case of a CFM executable, <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_78"></a>'cfrg'</code> resources
would also be in that file. Using it in a bundled package, you can
use the CF bundle APIs to gain access to pieces of this bundle programmatically,
without having to know the organization of a bundle. You can get
at resource files &#8211;&#8211; the Info.plist itself &#8211;&#8211; and actually
store things in the property list for use by your component. </p>
<p>The names of these bundled packages can be: </p>
<ul class="spaceabove"><li class="li"><p><code>example.qtx/</code></p></li>
<li class="li"><p><code>example.component/</code></p></li>
<li class="li"><p><code>example.bundle/</code></p></li></ul>
<p>The Component Manager will scan a directory looking for names
of these bundled packages. </p>
<p>Of the possible name choices available, Apple recommends that
you name your component with a <code>.qtx</code> extension.
This is preferred because it identifies the component as a QuickTime
component. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102421" title="Recommended Procedures"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF162" title="Recommended Procedures"></a><h3>Recommended Procedures</h3>
<p>There are several recommended procedures that you ought to
follow. In the case of a Mach-O bundle, you should only export the
component entry points. In fact, they must be exported. You should
link with a -bundle linker option to help control the name space. </p>
<p>When you are building a Mach-O executable, the <code>'thng'</code> resource
must specify the platform type as 5 and the code resource type as <code>'dlle'</code>.
Thus, you need to have an associated <code>'dlle'</code> resource
containing the component&#8217;s entry point name. </p>
<p>The other recommendation is that similar to other dynamically
loaded pieces of code, your component files should not contain global
variables. </p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_10" title="Note"></a><p><strong>Note:</strong>&nbsp;For more information
on building CFM and Mach-O QuickTime components for Mac OS X, refer
to Technote 2012 at <code>http://developer.apple.com/technotes/tn/tn2012.html</code>.
The Technote discusses in depth the changes that are required in
order to move existing QuickTime components to Mac OS X. </p></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112587" title="AppleScript Changes and Additions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDIEBH" title="AppleScript Changes and Additions"></a><h2>AppleScript Changes
and Additions</h2>
<p>QuickTime 5 introduces a number of new changes and additions,
designed to extend <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_79"></a>AppleScript support
in QuickTime Player. A suite of new editing features and commands, including
clipboard support, are introduced for the first time. Cut, copy,
and paste are among the new commands. The new <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_80"></a>editing
features and commands can be used to automate many movie-editing
and playback tasks. </p>
<p>Other AppleScript-supported features in this release are useful
for QuickTime authors or content creators who need to automate certain
processes, such as the <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_81"></a>batch preparation
of QuickTime movies. Using these features, you can do more sophisticated
types of processing. For example, you can tweak the settings of
a QuickTime movie before you actually perform an export, or export
them and then tweak the settings.</p>
<p>Refer to <code>&lt;http://www.apple.com/applescript/qtas5/qtas5p2.htm&gt;</code> for
a collection of example scripts available in QuickTime 5. These
include script applets, droplets, and compiled scripts, one of which
is explained in the section <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-102160">“Adding Media Skins Using the QuickTime API.”</a></span>
For more information concerning QuickTime Player scripting and AppleScript,
refer to the AppleScript website at <code>www.apple.com/applescript/.</code></p>
<p>This section describes the new features available to content
authors and creators in QuickTime 5. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102435" title="Additional Commands"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF163" title="Additional Commands"></a><h3>Additional Commands</h3>
<p>The following <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_82"></a>AppleScript commands
are new to QuickTime 5, and are accessible through clipboard or
Edit menu operations:</p>
<ul class="spaceabove"><li class="li"><p>add reference -- movie </p><ul class="simple-spaceabove">
<li><p>[scaled boolean] -- should added content be scaled
to the duration of current selection?</p></li></ul></li>
<li class="li"><p>clear reference -- movie </p></li>
<li class="li"><p>copy reference -- movie </p></li>
<li class="li"><p>cut reference -- movie</p></li>
<li class="li"><p>make (for creating an empty movie only)</p></li>
<li class="li"><p>open image sequence reference -- image file representing beginning
of image sequence </p><ul class="simple-spaceabove"><li><p>[frames per second
small real] -- the number of frames desired per second </p></li>
<li><p>[seconds per frame small real] -- the duration
of each frame in seconds</p></li></ul></li>
<li class="li"><p>paste reference -- movie</p></li>
<li class="li"><p>redo reference -- movie</p></li>
<li class="li"><p>trim reference -- movie</p></li>
<li class="li"><p>undo reference -- movie</p></li></ul>
<p>The standard AppleScript command:</p>
<ul class="spaceabove"><li class="li"><p>delete reference -- movie (for favorites and
tracks only)</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102441" title="Application Class Changes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF164" title="Application Class Changes"></a><h3>Application Class
Changes</h3>
<p>Additional application element:</p>
<ul class="spaceabove"><li class="li"><p>display by numeric index</p></li></ul>
<p>Updated application property:</p>
<ul class="spaceabove"><li class="li"><p>QuickTime connection speed 14.4 Modem/28.8/33.6
Modem/56K Modem/ ISDN/112K Dual ISDN/256 Kbps/384 Kbps/512 Kbps/768
Kbps/1 Mbps/T1/Intranet/LAN  [r/o] -- the current connection speed
(set in the QuickTime Control Panel)</p></li></ul>
<p>Additional application properties:</p>
<ul class="spaceabove"><li class="li"><p>ignore auto play boolean -- ignore requests to
auto-play movies upon opening?</p></li>
<li class="li"><p>ignore auto present boolean -- ignore requests to auto-present
movies upon opening?</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102447" title="Favorite Class Changes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF165" title="Favorite Class Changes"></a><h3>Favorite Class
Changes</h3>
<p>Addition of two elements:</p>
<ul class="spaceabove"><li class="li"><p>file by numeric index</p></li>
<li class="li"><p>internet location by numeric index</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102453" title="Movie Class Changes "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF166" title="Movie Class Changes "></a><h3>Movie Class Changes </h3>
<p>Additional movie properties. </p>
<p>Note that the following are runtime-only properties, taking
effect immediately when you set them:</p>
<ul class="spaceabove"><li class="li"><p>close when done</p></li>
<li class="li"><p>quit when done</p></li></ul>
<p>Some of the following are auto properties (persistent), i.e.,
they are saved with the movie. If you set them, they don&#8217;t take
effect until the next time you open the movie. </p>
<ul class="spaceabove"><li class="li"><p>auto close when done  boolean  -- will the movie
automatically close when done playing? (saved with movie)</p></li>
<li class="li"><p>auto play boolean  -- will the movie automatically start playing?
(saved with movie)</p></li>
<li class="li"><p>auto present  boolean  -- will the movie automatically start
presenting? (saved with movie)</p></li>
<li class="li"><p>auto quit when done  boolean  -- will the player automatically
quit when done playing? (saved with movie)</p></li>
<li class="li"><p>close when done  boolean  -- close when done playing? (not
saved with movie)</p></li>
<li class="li"><p>quit when done  boolean  -- quit the application when this
movie is done playing? (not saved with movie)</p></li>
<li class="li"><p>controller type  standard/qtvr/none  -- the type of controller
associated with the movie</p></li>
<li class="li"><p>live stream  boolean  [r/o]  -- is this a live streaming movie?</p></li>
<li class="li"><p>stored stream  boolean  [r/o]  -- is this a stored streaming
movie?</p></li>
<li class="li"><p>local playback  boolean  [r/o]  -- is this a local movie?</p></li>
<li class="li"><p>fast start  boolean  [r/o]  -- is this a fast-start movie?</p></li>
<li class="li"><p>max time loaded  integer  [r/o]  -- the amount of time loaded
in a fast start movie</p></li>
<li class="li"><p>preferred rate  small real  -- the preferred rate of the movie</p></li>
<li class="li"><p>presentation size  half/normal/double/screen/current  -- size
at which the movie will be presented</p></li>
<li class="li"><p>presentation mode  normal/slide show  -- mode in which the
movie will be presented</p></li>
<li class="li"><p>preview  'csel'  -- start time and end time of the movie preview</p></li>
<li class="li"><p>href  international text  [r/o]  -- the internet location
to open when clicking on the movie (overrides track hrefs)</p></li>
<li class="li"><p>plugin settings  list  [r/o]  -- the QuickTime Plugin settings
stored in the movie</p></li>
<li class="li"><p>saveable  boolean  -- can the movie be saved?</p></li>
<li class="li"><p>load state  integer  [r/o]  -- the current state of a fast-start
or streaming movie</p></li>
<li class="li"><p>streaming status code  small integer  [r/o]  -- the streaming
status code of the movie</p></li>
<li class="li"><p>streaming status message  international text  [r/o]  -- the
streaming status message of the movie</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102459" title="Track Class Changes "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF167" title="Track Class Changes "></a><h3>Track Class Changes </h3>
<p>Additional track element:</p>
<ul class="spaceabove"><li class="li"><p>annotation by numeric index, by name, by ID</p></li>
<li class="li"><p>frame by numeric index </p></li></ul>
<p>Additional properties. </p>
<p>The following is useful with any track:</p>
<ul class="spaceabove"><li class="li"><p>data format  international text  [r/o]  -- the
data format</p></li></ul>
<p>The following are useful with video tracks:</p>
<ul class="spaceabove"><li class="li"><p>transfer mode  dither copy/no dither copy/blend/transparent/straight
alpha/premul white alpha/premul black alpha/straight alpha blend/composition
 -- the transfer mode of the track</p></li>
<li class="li"><p>transfer mode  RGB color  -- the operation color of the track.
Note that not all transfer modes use this value. </p></li>
<li class="li"><p>high quality  boolean  -- is the track high quality?</p></li>
<li class="li"><p>single field  boolean  -- is the visual track single field?</p></li>
<li class="li"><p>preload  boolean  -- should the track be preloaded?</p></li>
<li class="li"><p>never purge  boolean  -- never purge the track?</p></li>
<li class="li"><p>data rate  integer  [r/o]  -- the data rate (bytes/sec) of
the track</p></li>
<li class="li"><p>video depth  small integer  [r/o]  -- the color depth of the
video</p></li>
<li class="li"><p>is video gray scale  boolean  [r/o]  -- is the video gray
scale?</p></li>
<li class="li"><p>href  international text  [r/o]  -- the internet location
to open when clicking on the track</p></li>
<li class="li"><p>chapterlist  track -- text track to use as chapter list for
this track</p></li>
<li class="li"><p>contents type class  -- the contents of the track. This is
useful for getting or setting chapter track contents all at once.
For example: set contents of chapter_track to {&quot;Chapter 1&quot;,
&quot;Chapter 2&quot;, &quot;Chapter 3&quot;}</p></li></ul>
<p>The following are useful with audio tracks:</p>
<ul class="spaceabove"><li class="li"><p>audio sample rate  small real  [r/o]  -- the
sample rate of the audio in kHz</p></li>
<li class="li"><p>audio channel count  small integer  [r/o]  -- the number of
channels in the audio</p></li>
<li class="li"><p>audio sample size  small integer  [r/o]  -- the size of uncompressed
audio samples in bits</p></li>
<li class="li"><p>is audio variable rate  boolean  [r/o]  -- is audio variable
bitrate?</p></li></ul>
<p>The following are useful with streaming tracks:</p>
<ul class="spaceabove"><li class="li"><p>streaming bit rate  small real  [r/o]  -- bit
rate in bits/second for all streams in track</p></li>
<li class="li"><p>streaming quality  small real  [r/o]  -- percent of packets
received for all streams in track</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102465" title="Additional Classes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF168" title="Additional Classes"></a><h3>Additional Classes</h3>
<p>Some Chapter class properties are now modifiable. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102471" title="Class chapter: A reference to a chapter in a QuickTime&amp;#x2122; movie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF169" title="Class chapter: A reference to a chapter in a QuickTime&amp;#x2122; movie"></a><h4>Class chapter:
A reference to a chapter in a QuickTime&#x2122; movie</h4>
<p>Plural form:</p>
<ul class="spaceabove"><li class="li"><p>chapters</p></li></ul>
<p>Properties:</p>
<ul class="spaceabove"><li class="li"><p>class  type class  [r/o]  -- the class</p></li>
<li class="li"><p>duration  integer  -- the duration of the chapter</p></li>
<li class="li"><p>index integer  [r/o]  -- the index of the chapter</p></li>
<li class="li"><p>name  international text -- the name of the chapter</p></li>
<li class="li"><p>time  integer -- the time at which the chapter starts</p></li>
<li class="li"><p>current chapter track  track  [r/o]  -- the currently active
chapter track (may differ by language)</p></li>
<li class="li"><p>current chapter  chapter  [r/o]  -- the chapter containing
the current time</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102477" title="Class stream: A stream within a streaming track"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF170" title="Class stream: A stream within a streaming track"></a><h4>Class stream:
A stream within a streaming track</h4>
<p>Properties:</p>
<ul class="spaceabove"><li class="li"><p>class  type class  [r/o]  -- the class</p></li>
<li class="li"><p>kind  string  [r/o]  -- the kind of media in the stream</p></li>
<li class="li"><p>video format  international text  [r/o]  -- the video format</p></li>
<li class="li"><p>video depth  small integer  [r/o]  -- the color depth of the
video</p></li>
<li class="li"><p>is video gray scale  boolean  [r/o]  -- is the video gray
scale?</p></li>
<li class="li"><p>audio compression  international text  [r/o]  -- the audio
compression</p></li>
<li class="li"><p>audio sample rate  small real  [r/o]  -- the sample rate of
the audio</p></li>
<li class="li"><p>audio channel count  small integer  [r/o]  -- the number of
channels in the audio</p></li>
<li class="li"><p>audio sample size  small integer  [r/o]  -- the size of decompressed
audio samples</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102483" title="Class display: A display device"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF171" title="Class display: A display device"></a><h4>Class display:
A display device</h4>
<p>Plural form:</p>
<ul class="spaceabove"><li class="li"><p>displays</p></li></ul>
<p>Properties:</p>
<ul class="spaceabove"><li class="li"><p>class type class [r/o]  -- the class</p></li>
<li class="li"><p>current depth  small integer  [r/o]  -- the current bit depth
of the display</p></li>
<li class="li"><p>dimensions  point  [r/o]  -- the dimensions of the display</p></li>
<li class="li"><p>main  boolean  [r/o]  -- is this the display with the menu
bar?</p></li>
<li class="li"><p>position  point  -- the position of the display</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102489" title="Class frame: A reference to a frame (sample) in a QuickTime movie track"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF172" title="Class frame: A reference to a frame (sample) in a QuickTime movie track"></a><h4>Class frame: A
reference to a frame (sample) in a QuickTime movie track</h4>
<p>The frame class is added as a synonym for chapter, but for
use with plain text tracks. It uses the contents property in place
of chapter name property.</p>
<p>Plural form:</p>
<ul class="spaceabove"><li class="li"><p>frames</p></li></ul>
<p>Properties:</p>
<ul class="spaceabove"><li class="li"><p>class  type class  [r/o]  -- the class</p></li>
<li class="li"><p>contents  type class  -- the contents of the frame</p></li>
<li class="li"><p>duration  integer  -- the duration of the frame</p></li>
<li class="li"><p>index  integer  [r/o]  -- the index of the frame</p></li>
<li class="li"><p>time  integer  -- the time at which the frame starts</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102495" title="Class text frame: A reference to a text frame in a QuickTime text track"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF173" title="Class text frame: A reference to a text frame in a QuickTime text track"></a><h4>Class text frame:
A reference to a text frame in a QuickTime text track</h4>
<p>Plural form:</p>
<ul class="spaceabove"><li class="li"><p>text frames</p></li></ul>
<p>Properties:</p>
<ul class="spaceabove"><li class="li"><p>antialias  boolean  -- anti-alias text against
background</p></li>
<li class="li"><p>class  type class  [r/o]  -- the class</p></li>
<li class="li"><p>background color  RGB color  -- the background color of the
text frame</p></li>
<li class="li"><p>default font  string  -- the name of the default font</p></li>
<li class="li"><p>default font size  integer  -- the default font size of the
text frame</p></li>
<li class="li"><p>default font styles  list  -- the default font styles of the
text frame</p></li>
<li class="li"><p>dimensions  point  -- the dimensions of the text frame</p></li>
<li class="li"><p>foreground color  RGB color  -- the foreground color of the
text frame</p></li>
<li class="li"><p>justification  left/right/center  -- the justification of
the text frame</p></li>
<li class="li"><p>keyed  boolean  -- render text over background</p></li>
<li class="li"><p>position  point  -- the position of the text frame</p></li></ul>
<p>For example, you can set text frame properties this way:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    tell text frame 1<span></span></pre></td></tr><tr><td scope="row"><pre>        set background color to {2345, 34563, 324}<span></span></pre></td></tr><tr><td scope="row"><pre>        set foreground color to {0, 0, 0}<span></span></pre></td></tr><tr><td scope="row"><pre>        set justification to left<span></span></pre></td></tr><tr><td scope="row"><pre>        set default font to &quot;times&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        set default font size to 18<span></span></pre></td></tr><tr><td scope="row"><pre>        set default font styles to {bold, italic}<span></span></pre></td></tr><tr><td scope="row"><pre>    end tell<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102501" title="Export Event Changes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF174" title="Export Event Changes"></a><h3>Export Event Changes</h3>
<p>Export events have new options. Both &quot;can export&quot;
and &quot;export&quot; take a &quot;considering only&quot; property,
which restricts the kind of exporter used. The &quot;export&quot;
event now takes a &quot;replacing&quot; parameter, which indicates
that any existing destination file be deleted before the export
is performed.</p>
<ul class="spaceabove"><li class="li"><p>can export: Determine if a movie or track can
be exported to the desired type</p><ul class="nested"><li class="nested li"><p>can export
 reference  -- the movie or track to export as  AVI/BMP/DV stream/FLC/hinted
movie/image sequence/picture/QuickTime movie/AIFF/System 7 sound/wave/MuLaw/standard
MIDI/text file  -- the desired file type</p></li>
<li class="nested li"><p>[considering only  video/sound/text/base/streaming/MPEG/MPEG
Audio/MPEG Video/music/timecode/sprite/Flash/tween/3D/QuickTime
VR/VR panorama/VR object]  -- considering only data of this type
within the movie</p></li></ul><p>    Result:   boolean
 -- is the export supported</p></li>
<li class="li"><p>export: Export a movie or track to a file</p><p>    export
 reference  -- the movie or track to export</p><p>       
to  alias  -- the destination file as  AVI/BMP/DV stream/FLC/hinted
movie/image sequence/picture/QuickTime movie/AIFF/System 7 sound/wave/MuLaw/standard
MIDI/text file  -- the desired file type</p><p>        [using
 default settings/most recent settings]  -- the export</p></li>
<li class="li"><p>settings to use</p><p>        [using settings preset  string]
 -- the name of the export settings</p></li>
<li class="li"><p>preset to use</p><p>        [considering only  video/sound/text/base/streaming/MPEG/MPEG
Audio/MPEG Video/music/timecode/sprite/Flash/tween/3D/QuickTime
VR/VRpanorama/VR object]  -- considering only media of this type
within the movie </p><ul class="nested"><li class="nested li"><p>[replacing  boolean]
 -- should the original file be deleted first?</p></li></ul></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-123838" title="Other Changes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF175" title="Other Changes"></a><h3>Other Changes</h3>
<p>Application favorite elements can now be created:</p>
<ul class="spaceabove"><li class="li"><p>make favorite with data &quot;rtsp://video.hil.no/rtv/videoklipp_ISDN_S.mov&quot;</p></li>
<li class="li"><p>make favorite with data alias &quot;Mac OS 9:Media BU:1984.mov&quot;</p></li></ul>
<p>Movie track elements can now be created to ease chapter track
creation:</p>
<ul class="spaceabove"><li class="li"><p>make new track at first movie with data {&quot;Chapter
1&quot;, &quot;Chapter 2&quot;, &quot;Chapter 3&quot;}</p></li>
<li class="li"><p>make new track at first movie with data alias &quot;Media:ChapterTrack.txt&quot;</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112591" title="MPEG 1 Playback"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF176" title="MPEG 1 Playback"></a><h2>MPEG 1 Playback</h2>
<p>QuickTime 5 includes support for the following: </p>
<ul class="ul"><li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_83"></a>MPEG
1 playback, both local and streaming on Macintosh and Windows computers. </p></li>
<li class="li"><p>Layer 1 and 2 audio support. </p></li>
<li class="li"><p>Support for RTP packing for streaming (RFC 2250). </p></li>
<li class="li"><p>Support for elementary and muxed streams. </p></li>
<li class="li"><p>Enabling of frame-accurate access and effects compositing. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112595" title="Flash 4 "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF177" title="Flash 4 "></a><h2>Flash 4 </h2>
<p>QuickTime 5 includes support for the interactive playback
of SWF 4.0 files by extending the existing SWF importer and the
Flash media handler. This support is compatible with SWF 3.0 files
supported in QuickTime 4.x.</p>
<p>Major new features of <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_84"></a>Flash 4 include the following: </p>
<ul class="ul"><li class="li"><p>Text input through text fields. </p></li>
<li class="li"><p>New Actions such as Set Property, Set Variable, If, Loop,
etc.</p></li>
<li class="li"><p>Action expressions. </p></li>
<li class="li"><p>Dragging graphics. </p></li></ul>
<p>The following new wired actions and an operand targeting a
Flash track are added. These allow you to access data in a Flash
track from wired actions. </p>
<ul class="ul"><li class="li"><p><code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_85"></a>kActionFlashTrackSetFlashVariable</code></p></li>
<li class="li"><p><code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_86"></a>kActionFlashTrackDoButtonActions</code></p></li>
<li class="li"><p><code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_87"></a>kOperandFlashTrackVariable</code></p></li></ul>
<p>Two new QT events, <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_88"></a>kQTEventKey</code> and <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_89"></a>kQTEventMouseMoved</code>,
are added to support keyboard input and mouse events in the Flash
media handler. In addition, the <code>QTEventRecord</code> structure
is extended to accommodate additional parameters for those events.</p>
<p>For more details of Flash 4 features, consult the appropriate
Flash documentation available from Macromedia at <code>http://www.macromedia.com/software/flash/</code>. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102512" title="New Wired Actions and Operands"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF178" title="New Wired Actions and Operands"></a><h3>New Wired Actions
and Operands</h3>
<p>These new wired actions and new operand let you target a Flash
track and access data in a Flash track from wired actions. For more
information on other new wired actions and operands in QuickTime
5, refer to the section <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112653">“Wired Actions.”</a></span> </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102518" title="kActionFlashTrackSetFlashVariable"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF179" title="kActionFlashTrackSetFlashVariable"></a><h4>kActionFlashTrackSetFlashVariable</h4>
<p>Sets the specified Flash action variable to a value. Parameters
are:</p>
<dl class="termdef">	<dt><i class="mono">path(cstring)</em></dt>
<dd><p> Specifies the path to the Flash button to which the
variable is attached. </p></dd>
<dt><i class="mono">name(cstring)</em></dt>
<dd><p> Specifies the name of the Flash variable.</p></dd>
<dt><i class="mono">value(cstring)</em></dt>
<dd><p> Specifies the new value of the Flash variable.</p></dd>
<dt><i class="mono">updateFocus(Boolean)</em></dt>
<dd><p>True if the focus is to be changed.</p></dd></dl>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102524" title="kActionFlashTrackDoButtonActions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF180" title="kActionFlashTrackDoButtonActions"></a><h2>kActionFlashTrackDoButtonActions</h2>
<p>Performs action(s) attached to the specified button.</p>
<dl class="termdef">	<dt><i class="mono">Path(cstring)</em></dt>
<dd><p> Specifies the path to the button to which the action
is attached. </p></dd>
<dt><i class="mono">ButtonID(long) The ID
of the button. </em></dt>
<dd></dd>
<dt><i class="mono">Transition(long) </em></dt>
<dd><p>Sends a mouse transition message to the object
and whatever Flash actions are associated with that transition on
the object that should be performed. The values are specific Flash
transition constants. </p></dd></dl>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102530" title="kOperandFlashTrackVariable"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF181" title="kOperandFlashTrackVariable"></a><h2>kOperandFlashTrackVariable</h2>
<p>Returns the value of the specified Flash action variable.
Parameters are: </p>
<dl class="termdef">	<dt><i class="mono">path(cstring) </em></dt>
<dd><p>Specifies the path to the Flash button to which the
variable is attached. </p></dd>
<dt><i class="mono">name(cstring) The name
of the Flash variable.</em></dt>
<dd></dd></dl>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102536" title="QT Events"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF182" title="QT Events"></a><h2>QT Events</h2>
<p>The first new QT Event is</p>
<div class="codesample"><table><tr><td scope="row"><pre>kQTEventKey= FOUR_CHAR_CODE('key ')<span></span></pre></td></tr></table></div>
<p>The key event parameters are as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    qtevent.param1: key<span></span></pre></td></tr><tr><td scope="row"><pre>    qtevent.param2: modifiers<span></span></pre></td></tr><tr><td scope="row"><pre>    qtEvent.param3: scanCode<span></span></pre></td></tr></table></div>
<p>The second new QT Event is</p>
<div class="codesample"><table><tr><td scope="row"><pre>kQTEventMouseMoved = FOUR_CHAR_CODE('move'),<span></span></pre></td></tr></table></div>
<p>which indicates that the mouse has moved. There are no parameters
other than the location.</p>
<p>The new version 2 format of the QT Event record is shown next:</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTEventRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    long        version;    /* version is 2 for the new format */<span></span></pre></td></tr><tr><td scope="row"><pre>    OSType      eventType;<span></span></pre></td></tr><tr><td scope="row"><pre>    Point       where;<span></span></pre></td></tr><tr><td scope="row"><pre>    long        flags;<span></span></pre></td></tr><tr><td scope="row"><pre>    long        payloadRefcon; /* fields from here down only present<span></span></pre></td></tr><tr><td scope="row"><pre>                                if version &gt;= 2*/<span></span></pre></td></tr><tr><td scope="row"><pre>    long        param1;<span></span></pre></td></tr><tr><td scope="row"><pre>    long        param2;<span></span></pre></td></tr><tr><td scope="row"><pre>    long        param3;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>Note that the value of the version field indicates the format
of the record. If it is 2, then the record is in the new format.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102541" title="Importing a Flash Movie "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF183" title="Importing a Flash Movie "></a><h2>Importing a Flash
Movie </h2>
<p>The Flash importer sets the following settings by default
in order to simulate the playback experience in the Flash player.
This should work for most of the time, but it may be necessary to
change some of them to suit your needs. It is recommended to review
these options before you save your imported Flash movie as a QuickTime
movie.</p>
<ul class="ul"><li class="li"><p>The Auto Play flag is on, meaning the movie will
play as soon as it is opened (same as in QuickTime 4).</p></li>
<li class="li"><p>The Loop flag is on, meaning the movie will play repeatedly
(same as in QuickTime 4).</p></li>
<li class="li"><p>The Play All Frames is on in QuickTime Player. With this option
on, QuickTime Player renders every frame of the Flash movie with
the rate of the movie set to zero (same as in QuickTime 4).</p></li></ul>
<p>Also, if the Flash movie contains &#8220;streaming sound&#8221; (Macromedia&#8217;s
term for running sound as opposed to short sound triggered by an
event), the Flash media handler drops frames in order to catch up
with the sound playback, even if the Play All Frame is on (new to
QuickTime 5.)</p>
<p>Apple has addressed the issue of having multiple Flash tracks
with text fields. The effects of the change are:</p>
<ul class="ul"><li class="li"><p>You can navigate through text fields not only
in a single Flash track, which you can do now. </p></li>
<li class="li"><p>In addition, if you have more than one Flash tracks with a
text field, hitting the Tab key will take you to the next Flash
track instead of rotating over to the first field in the same track.
Shift-tab works as well but goes backward.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112599" title="QuickTime Music Architecture (QTMA)"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF184" title="QuickTime Music Architecture (QTMA)"></a><h2>QuickTime Music
Architecture (QTMA)</h2>
<p>The following enhancements and support for new formats in <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_90"></a>QTMA are included in QuickTime
5. Some of the known issues and limitations are also discussed in
this section. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102547" title="Improved QuickTime Music Synthesizer"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF185" title="Improved QuickTime Music Synthesizer"></a><h3>Improved QuickTime
Music Synthesizer</h3>
<p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_91"></a>QuickTime
Music Synthesizer, whose performance and quality of synthesis rendering has
been enhanced in QuickTime 5, will support the following new formats:</p>
<ul class="spaceabove"><li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_92"></a>Downloadable Sounds (DLS),
an industry standard which is used by MPEG-4. </p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_93"></a>Sound Font
2 (SF2). </p></li></ul>
<p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_94"></a>DLS is a sample bank format
that describes to the QuickTime Music Synthesizer that you have
a particular sample that responds to a particular instrument number
that should be used for a range of keys and for a range of velocities,
and describes the envelope characteristics of attack, decay, sustain,
and release. </p>
<p>For developers, the API for the new QuickTime Music Synthesizer
engine is unchanged from the existing API. The note allocator component
is still used to access the synthesizer.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102553" title="New Reverb to Improve Sound Quality"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF186" title="New Reverb to Improve Sound Quality"></a><h3>New Reverb to
Improve Sound Quality</h3><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_95"></a>
<p>Along with a new synthesis engine, QuickTime 5 provides a
new reverb algorithm that improves the quality of the sounds. </p>
<p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_96"></a>polyphony available
to the QuickTime Music Synthesizer is dependent on the type of computer
it runs on. The CPU power of the computer is going to determine
how much work the synthesizer can get done and that, in turn, will
determine the polyphony. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102561" title="Updated Music Control Panel "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF187" title="Updated Music Control Panel "></a><h3>Updated Music
Control Panel </h3>
<p>The Music control panel has been updated to automatically
scan the QuickTime Extensions directory for either Sound Font 2
or DLS files. These appear in the list of &#8220;synthesizers&#8221; available
to QuickTime, and the user can choose one of these sounds banks as
the default bank to use to play back QuickTime Music content, if
a specific sound has not been assigned in the movie.</p>
<p>Bear in mind that many QTMA movies assume a GeneralMIDI-compliant
synthesizer, so generally a user should ensure that the default
sample set is a GM-compliant sample set. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102567" title="Other Improvements"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF188" title="Other Improvements"></a><h3>Other Improvements</h3>
<p>There are a number of improvements to QTMA in this release.
These include</p>
<ul class="spaceabove"><li class="li"><p>Export to AIFF now respects mono/stereo, bit
depth, and sampling rate options, whereas previously these were
ignored. </p></li>
<li class="li"><p>Synth initialization has been much improved (custom sub-allocator). </p></li>
<li class="li"><p>Playback of music movies should start soon after the user
clicks Play. </p></li>
<li class="li"><p>Improved Sound Font support, so that more files are now parsed
correctly.</p></li>
<li class="li"><p>MIDI Channel information is typically lost when importing
and exporting MIDI files. This has been a longstanding issue with
QTMA. This has now been addressed in this release.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102573" title="Some Limitations of Sound Font 2 and DLS Files"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF189" title="Some Limitations of Sound Font 2 and DLS Files"></a><h3>Some Limitations
of Sound Font 2 and DLS Files</h3>
<p>Developers have been asking: How does QuickTime deal with
large SF2 files? Does it load samples dynamically as they are needed
by a MIDI track? What practical limits are there on SF2 size?</p>
<p>In response: Sound Font 2 and DLS samples are loaded only
on an as-needed basis. There are practical limits on SF2 files,
depending on how the file is laid out and how many of the samples
in the file are used for a particular playback situation. Apart
from memory availability, the size of the files (and even the size
of the samples) are not an issue. If the memory is available, QTMA
will use it.</p>
<p>There are some known limitations on both SF2 and DLS files,
however. </p>
<ol class="ol"><li class="li"><p>Both formats have an internal name field for
the entire sound bank. This should be set by the author of these
files to be a meaningful name unique to that set.</p></li></ol>
<p>QTMA uses this field as a way of identifying which sample
bank is used if you assign an instrument to that bank. This is also
the name that is used in the Instrument Picker dialog to allow users
to assign parts (read MIDI Channels) of a music file to different
sound banks. </p>
<ol class="ol"><li class="li"><p>Any use of the LSB as a way of selecting banks
of sounds is not supported. This is only an option in DLS files.
(SF2 files only supply the MSB for bank selects.)</p></li></ol>
<p>For instance: (DLS only)</p>
<p>Bank-MSB    Bank-LSB    Patch Number</p>
<p>     0                        1                      1</p>
<p>     0                        2                      1</p>
<p>will result in the first patch being selected in both situations,
as QTMA will only match on</p>
<p>Bank-MSB    Patch Number</p>
<p>     0                           1</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102579" title="Assigning Custom Sound Banks to Movies"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF190" title="Assigning Custom Sound Banks to Movies"></a><h3>Assigning Custom
Sound Banks to Movies</h3><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_97"></a>
<p>In general, music movies are made by importing a <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_98"></a>MIDI file into a QuickTime movie. During
the import, no specific assignment of a part (or MIDI Channel) is
assigned to an instrument. Thus, when a movie is played back, the
default synthesizer that the user has selected in the <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_99"></a>QTMA Control Panel
is used to render the parts of the movie.</p>
<p>Using <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_100"></a>QuickTime
Player Pro, however, an author can assign particular synthesizers
as well as different sound banks to a movie. To accomplish this,
you follow these steps:</p>
<ol class="ol"><li class="li"><p>Open the Movie and choose &#8220;Get Movie Properties&#8221;
from the &#8220;Movie&#8221; Menu. </p></li>
<li class="li"><p>When the dialog appears, choose the &#8220;Music Track&#8221; item
in the top left pop-up menu. </p></li>
<li class="li"><p>In the top right pop-up menu, choose the &#8220;Instruments&#8221;
item. </p></li></ol>
<p>You now see a displayed all the parts found in this music
track. Each part is signified by the name of the instrument used
to render that part.</p>
<ol class="ol"><li class="li"><p>Double-click the instrument that you want to
change. A dialog appears called the &#8220;Instrument Picker&#8221;, which
shows you a list of the currently available sound banks and synthesizers. </p></li>
<li class="li"><p>You can choose a new sound bank with the top menu item. It
will read &#8220;Default Synthesizer&#8221; initially.</p></li></ol>
<p>Once you choose the sound bank you want to use for that part,
you can choose the instrument from the sound bank you wish to use.</p>
<p>If you save the movie, the assigned sound bank is used during
playback. Bear in mind that this sound bank will be searched for
when you next open that movie, and should be present for the movie
to be played back correctly.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112603" title="New QuickTime VR Cubic Engine"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBCCAA" title="New QuickTime VR Cubic Engine"></a><h2>New QuickTime
VR Cubic Engine</h2>
<p>The QuickTime 5 release incorporates a new QuickTime VR cubic
playback engine, which is discussed in this section. </p>
<p>A new type of QuickTime VR panorama is introduced in QuickTime
5 &#8211;&#8211; the <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_101"></a>cubic panorama.
This new type is represented by six faces of a cube, thus enabling
the viewer to see all the way up and all the way down. </p>
<p>Note that <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_102"></a>QuickTime VR cubic playback
is backward compatible, i.e., cubic VRs will play in earlier versions
of QuickTime as panoramas, with some distortion.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_11" title="Note"></a><p><strong>Note:</strong>&nbsp;The following
API calls (in <code>QuickTimeVR.h</code>),
when used with cubes, are not supported in the QuickTime 5 release: <code>QTVRSetBackBufferImagingProc</code> and <code>QTVRRefreshBackBuffer</code>.
If you use either of these calls, they will return an error for
cubes. </p></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102597" title="Panorama Flags Superseded by the panoType Field"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF191" title="Panorama Flags Superseded by the panoType Field"></a><h3>Panorama Flags
Superseded by the panoType Field</h3>
<dl class="termdef">	<dt><code>flags</code></dt>
<dd><p>A set of panorama flags. <code>kQTVRPanoFlagHorizontal</code> has
been superseded by the <code>panoType</code> field.
It is only used when the <code>panoType</code> field
is <code>nil</code> to indicate a
horizontally-oriented cylindrical panorama (for backwards compatibility with
QuickTime 4). </p></dd>
<dt><code>panoType</code></dt>
<dd><p>An <code>OSType</code> describing
the type of panorama. Types supported are </p></dd>
<dt><code>    </code></dt>
<dd><p><code>kQTVRHorizontalCylinder</code> </p></dd>
<dt>       </dt>
<dd><p><code>kQTVRVerticalCylinder</code> </p></dd>
<dt>        </dt>
<dd><p><code>kQTVRCube</code></p></dd>
<dt><code>reserved2</code></dt>
<dd><p>Reserved. This field must be 0.</p></dd></dl>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102601" title="Panorama Image Track"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF192" title="Panorama Image Track"></a><h3>Panorama Image
Track</h3>
<p>The actual panoramic image for a panoramic node is contained
in a <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_103"></a>panorama
image track, which is a standard QuickTime video track. The track
reference to this track is stored in the <code>imageRefTrackIndex</code> field
of the panorama sample atom.</p>
<p>Previous versions of QuickTime VR required the original panoramic
image to be rotated 90 degrees counterclockwise. This orientation
was changed in QuickTime 5 to allow either rotated (the previous
requirement) or non-rotated tiles (the preferred orientation).</p>
<p>The rotated image is diced into smaller frames, and each diced
frame is then compressed and added to the video track as a video
sample, as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112059">Figure 1-38</a></span>. Frames can be compressed using any spatial compressor;
however, temporal compression is not allowed for panoramic image
tracks.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112059" title="Figure 1-38Creating an image track for a panorama"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABHACFA" title="Figure 1-38Creating an image track for a panorama"></a><p><strong>Figure 1-38&nbsp;&nbsp;</strong>Creating an image track for a panorama</p>
<img src = "../art/01_380_qtvr_ls_05.gif" alt = "" width="436" height="566"></div><br/>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_12" title="Note"></a><p><strong>Note:</strong>&nbsp;<span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112059">Figure 1-38</a></span> illustrates
that as the pan angle increases, the tile number increases. </p></div>
<p>QuickTime 5 does not require the original panoramic image
to be rotated 90 degrees counterclockwise, as was the case in previous
versions of QuickTime VR. The rotated image is still diced into
smaller frames, and each diced frame is then compressed and added
to the video track as a video sample, as shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112063">Figure 1-39</a></span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-112063" title="Figure 1-39Creating an image track for a panorama, with the image track oriented horizontally"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABDBCJA" title="Figure 1-39Creating an image track for a panorama, with the image track oriented horizontally"></a><p><strong>Figure 1-39&nbsp;&nbsp;</strong>Creating an image track for a panorama,
with the image track oriented horizontally</p><img src = "../art/01_390_qt_l_214.gif" alt = "" width="522" height="417"></div><br/>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;As shown in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112063">Figure 1-39</a></span>, the
opposite of the previous behavior is exhibited: as the pan angle
increases, the tile number decreases. </p></div>
<p>In QuickTime 5, a panorama sample atom (which contains information
about a single panorama) contains the <code>panoType</code> field,
which indicates whether the diced panoramic image is oriented horizontally
or vertically.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102620" title="Changes to Cylindrical Panoramas"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF193" title="Changes to Cylindrical Panoramas"></a><h4>Changes to Cylindrical
Panoramas</h4>
<p>The primary change to <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_104"></a>cylindrical panoramas in QuickTime
VR is that the panorama, as stored in the image track of the movie,
can be oriented horizontally. This means that the panorama does
not need to be rotated 90 degrees counterclockwise, as required previously. </p>
<p>To indicate a horizontal orientation, the field in the <code>VRPanoSampleAtom</code> data
structure formerly called <code>reserved1</code> has
been renamed <code>panoType</code>.
Its type is <code>OSType</code>. The <code>panoType</code> for a
horizontally oriented cylinder is <code>kQTVRHorizontalCylinder</code> (<code>'hcyl'</code>),
while a vertical cylinder is <code>kQTVRVerticalCylinder</code> (<code>'vcyl'</code>).
For compatibility with older QuickTime VR files, when the <code>panoType</code> field
is <code>nil</code>, then a cylinder
is assumed, with the low order bit of the flags field set to 1 to
indicate if the cylinder is horizontal and 0 if the cylinder is
vertical.</p>
<p>One consequence of reorienting the panorama horizontally is
that, when the panorama is divided into separate tiles, the order
of the samples in the file is now the reverse of what it was for
vertical cylinders. Since vertical cylinders were rotated 90 degrees counterclockwise,
the first tile added to the image track was the right-most tile
in the panorama. For unrotated horizontal cylinders, the first tile
added to the image track is the left-most tile in the panorama.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102626" title="New Cubic Panorama "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF194" title="New Cubic Panorama "></a><h3>New Cubic Panorama </h3>
<p>A new type of panorama, the cubic panorama, is introduced
in QuickTime 5. The cubic panorama in its simplest form is represented
by six faces of a cube, thus enabling the viewer to see all the
way up and all the way down. The file format and the cubic rendering engine
actually allow for more complicated representations, such as special
types of cubes with elongated sides or cube faces made up of separate
tiles. Atoms that describe the orientation of each face allow for
these nonstandard representations. If these atoms are not present,
then the simplest representation is assumed. The following describes
this simplest cubic representation: a cube with six square sides.</p>
<p>Tracks in a cubic movie are laid out as they are for cylindrical
panoramas. This includes a QTVR track, a panorama track, and an
image track. Optionally, there may also be a hot spot track and
a fast-start preview track. The image, hot spot, and preview tracks
are all standard QuickTime video tracks. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102632" title="Image Tracks in Cubic Nodes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF195" title="Image Tracks in Cubic Nodes"></a><h4>Image Tracks in
Cubic Nodes</h4>
<p>For a <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_105"></a>cubic node
the image track contains six samples that correspond to the six
square faces of the cube. The same applies to hot spot and preview
tracks. The following diagram shows how the order of samples in
the track corresponds to the orientation of the cube faces.</p>
<br/><div><img src = "../art/01_390b_qt_l_218.gif" alt = "image: ../art/01_390b_qt_l_218.gif" width="165" height="143"></div><br/>
<br/><div><img src = "../art/01_390a_qt_l_217.gif" alt = "image: ../art/01_390a_qt_l_217.gif" width="471" height="54"></div><br/>
<p>Note that by default the frames are oriented horizontally.
However, arbitrary orientations (90 degrees clockwise, 90 degrees
counterclockwise, upside down, and diamond shaped) can be used if
specified with the <code>'cufa'</code> atom.
Still, the greatest rendering speed is used with horizontally oriented
tiles. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-117685" title="Panorama Tracks in Cubic Nodes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF196" title="Panorama Tracks in Cubic Nodes"></a><h3>Panorama Tracks
in Cubic Nodes</h3>
<p>The media sample for a panorama track contains the pano sample
atom container. For cubes, some of the fields in the pano sample
data atom have special values, which provide compatibility back
to earlier versions of QuickTime VR. The cubic projection engine ignores
these fields. They allow one to view cubic movies in older versions
of QuickTime using the cylindrical engine, although the view will
be somewhat incorrect, and the top and bottom faces will not be
visible. The special values are shown in Table 1-1.</p><a name="//apple_ref/doc/uid/TP40000936-CH1g-117994" title="Table 1-1Fields and their special values as represented in the pano sample data atom, providing backward compatibility to earlier versions of QuickTime VR "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF106" title="Table 1-1Fields and their special values as represented in the pano sample data atom, providing backward compatibility to earlier versions of QuickTime VR "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Fields and their special values as
represented in the pano sample data atom, providing backward compatibility
to earlier versions of QuickTime VR </caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th>
</tr>


<tr>
<td  scope="row"><p><code>imageNumFramesX </code></p></td>
<td ><p>4</p></td>
</tr>
<tr>
<td  scope="row"><p><code>imageNumFramesY</code></p></td>
<td ><p>1</p></td>
</tr>
<tr>
<td  scope="row"><p><code>imageSizeX</code></p></td>
<td ><p>frame width * 4</p></td>
</tr>
<tr>
<td  scope="row"><p><code>imageSizeY</code></p></td>
<td ><p>frame height</p></td>
</tr>
<tr>
<td  scope="row"><p><code>minPan</code></p></td>
<td ><p>0.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>maxPan</code></p></td>
<td ><p>360.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>minTilt</code></p></td>
<td ><p>-45.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>maxTilt</code></p></td>
<td ><p>45.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>minFieldOfView</code></p></td>
<td ><p>5.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>maxFieldOfView</code></p></td>
<td ><p>90.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>flags</code></p></td>
<td ><p>1</p></td>
</tr>

</table></div>
<p>A 1 value in the flags field tells QuickTime VR that the frames
are not rotated. QuickTime VR treats this as a four-frame horizontal
cylinder. The <code>panoType</code> field
(formerly <code>reserved1</code>) must
be set to <code>kQTVRCube </code>(<code>'cube'</code>)
so that QuickTime 5 can recognize this panorama as a cube.</p>
<p>Since certain of the viewing fields in the pano sample data
atom are being used for backward compatibility, a new atom must
be added to indicate the proper viewing parameters for the cubic
image. This atom is the cubic view atom (atom type <code>'cuvw'</code>).
The data structure of the cubic view atom is as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTVRCubicViewAtom {<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 minPan;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 maxPan;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 minTilt;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 maxTilt;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 minFieldOfView;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 maxFieldOfView;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 defaultPan;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 defaultTilt;<span></span></pre></td></tr><tr><td scope="row"><pre>    Float32 defaultFieldOfView;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTVRCubicViewAtomQTVRCubicViewAtom;<span></span></pre></td></tr></table></div>
<p>The fields are filled in as desired for the cubic image. This
atom is ignored by older versions of QuickTime VR. Typical values
for the <code>min</code> and <code>max</code> fields
are shown in Table 1-2. </p><a name="//apple_ref/doc/uid/TP40000936-CH1g-118193" title="Table 1-2Values for min and max fields "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF107" title="Table 1-2Values for min and max fields "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong>Values for min and max fields </caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th>
</tr>


<tr>
<td  scope="row"><p><code>minPan </code></p></td>
<td ><p>0.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>maxPan</code></p></td>
<td ><p>360.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>minTilt </code></p></td>
<td ><p>-90.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>maxTilt</code></p></td>
<td ><p>90.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>minFieldOfView </code></p></td>
<td ><p>5.0</p></td>
</tr>
<tr>
<td  scope="row"><p><code>maxFieldOfView</code></p></td>
<td ><p>120.0</p></td>
</tr>

</table></div>
<p>You add the cubic view atom to the pano sample atom container
(after adding the pano sample data atom). Then use <code>AddMediaSample</code> to
add the atom container to the panorama track.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102644" title="Nonstandard Cubes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF197" title="Nonstandard Cubes"></a><h2>Nonstandard Cubes</h2>
<p>Although the default representation for a cubic panorama is
six square faces of a cube, it is possible to depart from this standard
representation. When doing so, a new atom must be added to the pano
sample atom container. The atom type is <code>'cufa'</code>.
The atom is an array of data structures of type <code>QTVRCubicFaceData</code>.
Each entry in the array describes one face of whatever polyhedron
is being defined. <code>QTVRCubicFaceData</code> is
defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTVRCubicFaceData {<span></span></pre></td></tr><tr><td scope="row"><pre>    float orientation[4]; //see Table 3<span></span></pre></td></tr><tr><td scope="row"><pre>    float center[2]; // see Figure 23<span></span></pre></td></tr><tr><td scope="row"><pre>    float aspect; // 1.0<span></span></pre></td></tr><tr><td scope="row"><pre>    float skew; // set to 0<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTVRCubicFaceDataQTVRCubicFaceData;<span></span></pre></td></tr></table></div>
<p>The mathematical explanation of these data structures is beyond
the scope of this document but will be described in a separate Apple
Technote at<code> http://developer.apple.com/technotes/index.html</code>. Table
1-3 shows what values QuickTime uses for the default representation
of six square sides. </p>
<p>The values shown in Table 1-3 will work, since quaternions
can be multiplied by -1 and still represent the same orientation.
However, it is standard practice to make the largest, and then the
first element be positive. </p><a name="//apple_ref/doc/uid/TP40000936-CH1g-118719" title="Table 1-3Values used for representing six square sides"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF108" title="Table 1-3Values used for representing six square sides"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-3&nbsp;&nbsp;</strong>Values used for representing six square
sides</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>       Orientation (quaternion)</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Center</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Aspect</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Skew</p></th>
</tr>
<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>w</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>x</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>y</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>z</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>x</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>y</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p></p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p></p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p></p></th>
</tr>


<tr>
<td  scope="row"><p>+1</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>1</p></td>
<td ><p>0</p></td>
<td ><p># front</p></td>
</tr>
<tr>
<td  scope="row"><p>+.5</p></td>
<td ><p>0</p></td>
<td ><p>-.5</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>1</p></td>
<td ><p>0</p></td>
<td ><p># right</p></td>
</tr>
<tr>
<td  scope="row"><p>0</p></td>
<td ><p>0</p></td>
<td ><p>1</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>1</p></td>
<td ><p>0</p></td>
<td ><p># back</p></td>
</tr>
<tr>
<td  scope="row"><p>+.5</p></td>
<td ><p>0</p></td>
<td ><p>+.5</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>1</p></td>
<td ><p>0</p></td>
<td ><p># left</p></td>
</tr>
<tr>
<td  scope="row"><p>+.5</p></td>
<td ><p>+.5</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>1</p></td>
<td ><p>0</p></td>
<td ><p># top</p></td>
</tr>
<tr>
<td  scope="row"><p>+.5</p></td>
<td ><p>-.5</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>0</p></td>
<td ><p>1</p></td>
<td ><p>0</p></td>
<td ><p># bottom</p></td>
</tr>

</table></div>
<p><span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-118747">Figure 1-40</a></span> shows QTVR cubic values in 2 x 2 and 3 x 3 matrices.
These values are represented in a resolution-independent format.
In particular, the co-ordinates for the center are in units of one-half
of the image height, specifically (height - 1)/2. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000936-CH1g-118747" title="Figure 1-40QTVR cubic values"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABJDAHI" title="Figure 1-40QTVR cubic values"></a><p><strong>Figure 1-40&nbsp;&nbsp;</strong>QTVR cubic values</p>
<img src = "../art/01_400_qtpp3_l_01.gif" alt = "" width="496" height="171"></div><br/>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112607" title="Gamma Processing APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF198" title="Gamma Processing APIs"></a><h2>Gamma Processing
APIs</h2>
<p>QuickTime has defined new APIs to handle <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_106"></a>gamma processing when compressing
or decompressing to and from PixMaps using certain codecs.</p>
<p>The Macintosh has defined the standard gamma response of PixMaps
as 1.8, while Windows display cards typically have a gamma response
of 2.5 for bitmaps. In contrast, standard television based video
has a gamma response of 2.2. For further details, refer to <code>&lt;http://www.inforamp.net/~poynton/GammaFAQ.html&gt;</code>.</p>
<p>By default, codecs such as the Apple DV codec convert from
gamma 2.2 to 1.8 when decompressing from DV to RGB in order to maintain
the apparent gamma of the image when displayed on the Mac display
or for processing in Mac RGB space. Similarly, the reverse conversion
is done when compressing from RGB to DV.</p>
<p>However, linear processing of effects in Mac-RGB with gamma
1.8 does not create a linear effect when viewed again on a video
display at gamma 2.2. To allow for this, the following APIs are
designed so that applications can control the gamma conversion during compression
and decompression for processing such as rendering video effects.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102650" title="Usage"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF199" title="Usage"></a><h3>Usage</h3>
<p>An application will want to use the Gamma APIs in order to
specify the gamma of a PixMap that it will compress or to request
and verify the gamma of a PixMap that it decompresses.</p>
<p>In compression, it is sufficient to set the gamma of the PixMap
using either <code>QTSetPixMapPtrGammaLevel</code> or <code>QTSetPixMapHandleGammaLevel</code>.
Codecs will use this value when compressing the PixMap.</p>
<p>In decompression, the application can either request a gamma
via <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_107"></a>QTSetPixMapPtrRequestedGammaLevel</code> or <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_108"></a>QTSetPixMapHandleRequestedGammaLevel</code>.
The application can either request a specific gamma value, or the
platform default or the native source gamma. Calling <code>QTGetPixMapPtrGammaLevel</code> or <code>QTGetPixMapHandleGammaLevel</code> after decompressing
will return the actual gamma level of the decompressed data. During decompression,
the requested gamma level of a PixMap does not change, which means that
the same PixMap can have different gamma levels after different
sources are decompressed. Applications should always check the gamma
level after decompressing if they use either of the two requested
gamma level APIs.</p>
<p>Codecs need to pay attention to the gamma level of the source
buffer when compressing. Some compressed data (such as DV) is stored
only with one gamma level (DV - 2.2) and the gamma is explicit for
that format. These codecs should check the source gamma level and
perform gamma correction when compressing as necessary.</p>
<p>Others, such as JPEG, could have different gamma levels depending
on the source value, and can store the gamma value of the compressed
data in a <code>'gama'</code> or <code>'colr'</code> ImageDescription
extension without needing to convert the image.</p>
<p>In decompression, Codecs need to store the source and destination
gamma levels received via <code>ImageCodecRequestGammaLevel</code> and
correct the gamma based on the ratio of the two values.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102656" title="PixMap APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF200" title="PixMap APIs"></a><h3>PixMap APIs</h3>
<p>The following APIs can be used to access gamma information
stored as PixMap extensions.</p>
<a name="//apple_ref/c/func/QTGetPixMapPtrGammaLevel" title="QTGetPixMapPtrGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTGetPixMapPtrGammaLevel" title="QTGetPixMapPtrGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTGetPixMapPtrGammaLevel" title="QTGetPixMapPtrGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_109"></a><h3 class="tight">QTGetPixMapPtrGammaLevel</h3>
<p class="spaceabove">Retrieves the current PixMap&#8217;s gamma level.</p>
<p class="spaceabove"><pre>
<a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> QTGetPixMapPtrGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapPtr" target="_top">PixMapPtr</a> pm );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm</em></dt>
<dd><p>Pointer to the PixMap.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function returns the gamma level previously set (or default)
in the PixMap pointed to by <code>pm</code>.
A typical usage would be to retrieve the gamma level of a PixMap
after a codec decompresses into the PixMap.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/QTSetPixMapPtrGammaLevel" title="QTSetPixMapPtrGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTSetPixMapPtrGammaLevel" title="QTSetPixMapPtrGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTSetPixMapPtrGammaLevel" title="QTSetPixMapPtrGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_110"></a><h3 class="tight">QTSetPixMapPtrGammaLevel</h3>
<p class="spaceabove">Sets the gamma level of a PixMap.</p>
<p class="spaceabove"><pre>
OSErr QTSetPixMapPtrGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapPtr" target="_top">PixMapPtr</a> pm, <a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> gammaLevel );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm </em></dt>
<dd><p>Pointer to the PixMap.</p></dd>
<dt><em>gammaLevel</em></dt>
<dd><p>Desired gamma level.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function sets the gamma level of a PixMap <code>pm</code> to <code>gammaLevel</code>.
It does not convert the contents of the PixMap. A typical usage
would be to set the gamma level of a PixMap before compressing it
so that the codec knows if it needs to do additional gamma correcting
when compressing.</p>
<p>Valid values for <code>requestedGammaLevel</code> can
be a specific gamma value or one of two defined constants:</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<dl class="termdef">	<dt><i class="mono">kQTUsePlatformDefaultGammaLevel</em></dt>
<dd><p>				Default gamma of the platform (Mac: 1.8, Windows:
2.5). </p></dd>
<dt><i class="mono">kQTUseSourceGammaLevel</em></dt>
<dd><p>Leave the data in the gamma level of the source data
rather than converting.</p></dd>
<dt><i class="mono">kQTCCIR601VideoGammaLevel</em></dt>
<dd><p>Gamma 2.2 for ITU-R BT.601 based video.</p></dd></dl>
<a name="//apple_ref/c/func/QTGetPixMapHandleGammaLevel" title="QTGetPixMapHandleGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTGetPixMapHandleGammaLevel" title="QTGetPixMapHandleGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTGetPixMapHandleGammaLevel" title="QTGetPixMapHandleGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_111"></a><h3 class="tight">QTGetPixMapHandleGammaLevel</h3>
<p class="spaceabove">Retrieves the current PixMap&#8217;s gamma level.</p>
<p class="spaceabove"><pre>
<a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> QTGetPixMapHandleGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapHandle" target="_top">PixMapHandle</a> pm );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm</em></dt>
<dd><p>Handle to the PixMap.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function returns the gamma level previously set (or default)
in the PixMap pointed to by <code>pm</code>.
A typical usage would be to retrieve the gamma level of a PixMap
after a codec decompresses into the PixMap.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/QTSetPixMapHandleGammaLevel" title="QTSetPixMapHandleGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTSetPixMapHandleGammaLevel" title="QTSetPixMapHandleGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTSetPixMapHandleGammaLevel" title="QTSetPixMapHandleGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_112"></a><h3 class="tight">QTSetPixMapHandleGammaLevel</h3>
<p class="spaceabove">Sets the gamma level of a PixMap.</p>
<p class="spaceabove"><pre>
OSErr QTSetPixMapHandleGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapHandle" target="_top">PixMapHandle</a> pm, <a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> gammaLevel );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm </em></dt>
<dd><p>Handle to the PixMap.</p></dd>
<dt><em>gammaLevel</em></dt>
<dd><p>Desired gamma level.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function sets the gamma level of a PixMap <code>pm</code> to <code>gammaLevel</code>.
It does not convert the contents of the PixMap. A typical usage
would be to set the gamma level of a PixMap before compressing it
so that the codec knows if it needs to do additional gamma correcting
when compressing.</p>
<p>Valid values for <code>requestedGammaLevel</code> can
be a specific gamma value or one of two defined constants:</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<dl class="termdef">	<dt><i class="mono">kQTUsePlatformDefaultGammaLevel</em></dt>
<dd><p>				Default gamma of the platform (Mac: 1.8, Windows:
2.5)</p></dd>
<dt><i class="mono">kQTUseSourceGammaLevel</em></dt>
<dd><p>Leave the data in the gamma level of the source data
rather than converting.</p></dd>
<dt><i class="mono">kQTCCIR601VideoGammaLevel</em></dt>
<dd><p>Gamma 2.2 for ITU-R BT.601 based video.</p></dd></dl>
<a name="//apple_ref/c/func/QTGetPixMapPtrRequestedGammaLevel" title="QTGetPixMapPtrRequestedGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTGetPixMapPtrRequestedGammaLevel" title="QTGetPixMapPtrRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTGetPixMapPtrRequestedGammaLevel" title="QTGetPixMapPtrRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_113"></a><h3 class="tight">QTGetPixMapPtrRequestedGammaLevel</h3>
<p class="spaceabove">Retrieves the current PixMap&#8217;s requested gamma level.</p>
<p class="spaceabove"><pre>
<a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> QTGetPixMapPtrRequestedGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapPtr" target="_top">PixMapPtr</a> pm );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm</em></dt>
<dd><p>Pointer to the PixMap.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function returns the requested gamma level previously
set (or default) in the PixMap pointed to by <code>pm</code>.
The requested gamma level is used to control what gamma conversion
is attempted when decompressing to the PixMap. The requested gamma
level may differ from the actual gamma level depending on the compressed
data and the capabilities of the codecs involved.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/QTSetPixMapPtrRequestedGammaLevel" title="QTSetPixMapPtrRequestedGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTSetPixMapPtrRequestedGammaLevel" title="QTSetPixMapPtrRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTSetPixMapPtrRequestedGammaLevel" title="QTSetPixMapPtrRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_114"></a><h3 class="tight">QTSetPixMapPtrRequestedGammaLevel</h3>
<p class="spaceabove">Sets the requested gamma level of a PixMap.</p>
<p class="spaceabove"><pre>
OSErr QTSetPixMapPtrGammaLevel(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapPtr" target="_top">PixMapPtr</a> pm, <a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> requestedGammaLevel);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm </em></dt>
<dd><p>Pointer to the PixMap.</p></dd>
<dt><em>requestedGammaLevel</em></dt>
<dd><p>	 Desired gamma level.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function sets the requested gamma level of a PixMap <code>pm</code> to <code>requestedGammaLevel</code>.
It does not convert the contents of the PixMap. A typical usage
would be to set the requested gamma level of a PixMap before decompressing
so that the codec knows what gamma correction is necessary when
decompressing into the PixMap. The resulting gamma level can then
be found by calling <code>QTGetPixMapPtrGammaLevel</code>.</p>
<p>Valid values for <code>requestedGammaLevel</code> can
be a specific gamma value or one of two defined constants:</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<dl class="termdef">	<dt><i class="mono">kQTUsePlatformDefaultGammaLevel</em></dt>
<dd><p>				Default gamma of the platform (Mac: 1.8, Windows:
2.5)</p></dd>
<dt><i class="mono">kQTUseSourceGammaLevel</em></dt>
<dd><p>Leave the data in the gamma level of the source data
rather than converting.</p></dd>
<dt><i class="mono">kQTCCIR601VideoGammaLevel</em></dt>
<dd><p>Gamma 2.2 for ITU-R BT.601 based video.</p></dd></dl>
<a name="//apple_ref/c/func/QTGetPixMapHandleRequestedGammaLevel" title="QTGetPixMapHandleRequestedGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTGetPixMapHandleRequestedGammaLevel" title="QTGetPixMapHandleRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTGetPixMapHandleRequestedGammaLevel" title="QTGetPixMapHandleRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_115"></a><h3 class="tight">QTGetPixMapHandleRequestedGammaLevel</h3>
<p class="spaceabove">Retrieves the current PixMap&#8217;s requested gamma level.</p>
<p class="spaceabove"><pre>
<a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> QTGetPixMapHandleRequestedGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapHandle" target="_top">PixMapHandle</a> pm );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm</em></dt>
<dd><p>Handle to the PixMap.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function returns the requested gamma level previously
set (or default) in the PixMap <code>pm</code>.
The requested gamma level is used to control what gamma conversion
is attempted when decompressing to the PixMap. The requested gamma
level may differ from the actual gamma level depending on the compressed
data and the capabilities of the codecs involved.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/QTSetPixMapHandleRequestedGammaLevel" title="QTSetPixMapHandleRequestedGammaLevel"></a><a name="//apple_ref/doc/c_ref/QTSetPixMapHandleRequestedGammaLevel" title="QTSetPixMapHandleRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTSetPixMapHandleRequestedGammaLevel" title="QTSetPixMapHandleRequestedGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_116"></a><h3 class="tight">QTSetPixMapHandleRequestedGammaLevel</h3>
<p class="spaceabove">Sets the requested gamma level of a PixMap.</p>
<p class="spaceabove"><pre>
OSErrQTSetPixMapHandleRequestedGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/PixMapHandle" target="_top">PixMapHandle</a> pm, <a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a>  requestedGammaLevel );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>pm </em></dt>
<dd><p>Handle to the PixMap.</p></dd>
<dt><em>requestedGammaLevel</em></dt>
<dd><p>Desired gamma level.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This function sets the requested gamma level of a PixMap <code>pm</code> to <code>requestedGammaLevel</code>.
It does not convert the contents of the PixMap. A typical usage
would be to set the requested gamma level of a PixMap before decompressing
so that the codec knows what gamma correction is necessary when
decompressing into the PixMap. The resulting gamma level can then
be found by calling <code>QTGetPixMapHandleGammaLevel</code>.</p>
<p>Valid values for <code>requestedGammaLevel</code> can
be a specific gamma value or one of two predefined constants:</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<dl class="termdef">	<dt><i class="mono">kQTUsePlatformDefaultGammaLevel</em></dt>
<dd><p>				Default gamma of the platform (Mac: 1.8, Windows:
2.5)</p></dd>
<dt><i class="mono">kQTUseSourceGammaLevel</em></dt>
<dd><p>Leave the data in the gamma level of the source data
rather than converting.</p></dd>
<dt><i class="mono">kQTCCIR601VideoGammaLevel</em></dt>
<dd><p>Gamma 2.2 for ITU-R BT.601 based video.</p></dd></dl>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-123890" title="Codec APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF201" title="Codec APIs"></a><h3>Codec APIs</h3>
<p>The following APIs are defined for codecs to support gamma
conversion</p>
<a name="//apple_ref/c/func/ImageCodecRequestGammaLevel" title="ImageCodecRequestGammaLevel"></a><a name="//apple_ref/doc/c_ref/ImageCodecRequestGammaLevel" title="ImageCodecRequestGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-ImageCodecRequestGammaLevel" title="ImageCodecRequestGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_117"></a><h3 class="tight">ImageCodecRequestGammaLevel</h3>
<p class="spaceabove">Requests the codec to convert from source to destination
gamma levels.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecRequestGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci, <a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a>  srcGammaLevel, <a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a> dstGammaLevel, long *codecCanMatch )
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>Instance of the codec component.</p></dd>
<dt><em>srcGammaLevel</em></dt>
<dd><p>Gamma level to convert from.</p></dd>
<dt><em>dstGammaLevel</em></dt>
<dd><p>Gamma level to convert to.</p></dd>
<dt><em>codecCanMatch</em></dt>
<dd><p>Indicates if the conversion from <code>srcGammaLevel</code> to <code>dstGammaLevel</code> is supported.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This call tells the codec what the gamma of the source buffer
and destination PixMap are so that the codec can try to convert
between the two gammas when decompressing. </p>
<p>This call may be made several times as the ICM sets up a gamma
conversion chain. The last value takes precedent for future scheduled
frames.</p>
<p>The call may also occur while frames are already scheduled,
indicating that conditions have changed. The new request is effective
on frames that are scheduled after the call is made. Frames previously
scheduled should continue to use the previously requested gamma
conversion values.</p>
<p>Proper gamma conversion is accomplished by normalizing source
data to black and white points to 0 to 1 and raising the result
by the ratio of the <code>srcGammaLevel</code> divided
by <code>dstGammaLevel</code>. The
most accurate correction is done in RGB space, but a visual approximation
can be done by raising the luma component alone.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<a name="//apple_ref/c/func/ImageCodecGetSourceDataGammaLevel" title="ImageCodecGetSourceDataGammaLevel"></a><a name="//apple_ref/doc/c_ref/ImageCodecGetSourceDataGammaLevel" title="ImageCodecGetSourceDataGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-ImageCodecGetSourceDataGammaLevel" title="ImageCodecGetSourceDataGammaLevel"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_118"></a><h3 class="tight">ImageCodecGetSourceDataGammaLevel</h3>
<p class="spaceabove">Requests the native gamma of the compressed data, if any.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecGetSourceDataGammaLevel( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci, <a href="../../../Carbon/Reference/Mathematical_al_Utilities/Reference/reference.html#//apple_ref/doc/c_ref/Fixed" target="_top">Fixed</a>  *sourceDataGammaLevel )
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>Instance of the codec component.</p></dd>
<dt><em>sourceDataGammaLevel</em></dt>
<dd><p>Return the native gamma level of the compressed
data.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This call asks the codec what the native gamma of the source
data is. The ICM uses this information to determine what gamma correction
is necessary. Return 0 to indicate the default gamma of the platform.</p>
<p>Example: The Apple DV Codec returns 2.2 to this call.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-124223" title="Default Gamma of Custom Pixel Formats"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF202" title="Default Gamma of Custom Pixel Formats"></a><h3>Default Gamma
of Custom Pixel Formats</h3>
<p>Third-party developers can specify the default gamma for PixMaps
using custom pixel formats by setting the <code>defaultGammaLevel</code> field
in the <code>ICMPixelFormatInfo</code> structure.
This structure can be registered by calling <code>ICMSetPixelFormatInfo</code> when
the codec opens.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112611" title="Preferred Codec APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF203" title="Preferred Codec APIs"></a><h2>Preferred Codec
APIs</h2><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_119"></a>
<p>QuickTime has added two new APIs that help applications specify
the codec or effects components that they prefer to use when playing
a movie. This supplements the normal behavior of relying on performance
and compatibility as the criteria for choosing the codecs to be
used.</p>
<p>Applications can use these APIs to access components that
all work together as a set (for example, decompressors and effects
all working on the same hardware).</p>
<p>Third-party codec providers no longer need to use decompression
speed as the only way to have their codecs used in preference &#8211;&#8211;
the application is now able to specify the ones it prefers. Note
that applications that don&#8217;t use these APIs will continue to rely
on the normal behavior of the ICM.</p>
<a name="//apple_ref/c/func/MediaSetUserPreferredCodecs" title="MediaSetUserPreferredCodecs"></a><a name="//apple_ref/doc/c_ref/MediaSetUserPreferredCodecs" title="MediaSetUserPreferredCodecs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-MediaSetUserPreferredCodecs" title="MediaSetUserPreferredCodecs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_120"></a><h3 class="tight">MediaSetUserPreferredCodecs</h3>
<p class="spaceabove">Requests that a media handler favor specified codec components
when selecting components with which to play media.  </p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult MediaSetUserPreferredCodecs( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,  <!--a-->CodecComponentHandle<!--/a--> userPreferredCodecs );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>Specifies your connection to the media handler
component. You can call the Movie Toolbox routine <code>GetMediaHandler</code> to
obtain a connection to the media handler component for a track's
media.</p></dd>
<dt><em>userPreferredCodecs</em></dt>
<dd><p>A handle containing component identifiers.
The media handler component will make its own copy of this handle.
Pass nil to invalidate the standing request without substituting
another.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This method does not guarantee that the specified components
will be used; other factors may take precedence. Components that
are preferred may not be used if they can&#8217;t be part of the chain
required to play the media (for example, don&#8217;t handle the pixel
format, or the video output, and so on).</p>
<p>The components should be specified in order from most preferred
to least preferred.  </p>
<p>Errors:</p>
<ul class="ul"><li class="li"><p><code>noErr</code></p></li>
<li class="li"><p><code>memFullErr</code></p></li>
<li class="li"><p><code>badComponentSelector</code>				The
media handler component does not support this call.</p></li></ul>
<p>Example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>CodecComponentHandle userPreferredCodecs = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentDescription cd = { decompressorComponentType,<span></span></pre></td></tr><tr><td scope="row"><pre>                            myPreferredCodecType,<span></span></pre></td></tr><tr><td scope="row"><pre>                            myPreferredCodecManufacturer,<span></span></pre></td></tr><tr><td scope="row"><pre>                            0, 0 };<span></span></pre></td></tr><tr><td scope="row"><pre>CodecComponent      c = FindNextComponent( 0, &amp;cd );<span></span></pre></td></tr><tr><td scope="row"><pre>MediaHandler        myMedia;<span></span></pre></td></tr><tr><td scope="row"><pre>OSErr               err;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>PtrToHand( &amp;c, (Handle*)&amp;userPreferredCodecs, sizeof(c) );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>myMedia = GetMediaHandler( GetTrackMedia( track ) );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>err = MediaSetUserPreferredCodecs( myMedia, userPreferredCodecs );<span></span></pre></td></tr><tr><td scope="row"><pre>DisposeHandle( (Handle)userPreferredCodecs );<span></span></pre></td></tr></table></div><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/c/func/MediaGetUserPreferredCodecs" title="MediaGetUserPreferredCodecs"></a><a name="//apple_ref/doc/c_ref/MediaGetUserPreferredCodecs" title="MediaGetUserPreferredCodecs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-MediaGetUserPreferredCodecs" title="MediaGetUserPreferredCodecs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_121"></a><h3 class="tight">MediaGetUserPreferredCodecs</h3>
<p class="spaceabove">Retrieves the list of components last passed to the media
handler with <code>MediaSetUserPreferredCodecs</code>.</p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult MediaGetUserPreferredCodecs( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,  <!--a-->CodecComponentHandle<!--/a--> *userPreferredCodecs );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>Specifies your connection to the media handler
component. You can call the Movie Toolbox routine <code>GetMediaHandler</code> to
obtain a connection to the media handler component for a track's
media.</p></dd>
<dt><em>userPreferredCodecs</em></dt>
<dd><p>Points to a variable of type <code>CodecComponentHandle</code>.
If the media handler currently has a preferred component list, it
will copy that list into a new handle and store the new handle in
this variable. The caller must dispose this handle. If the media
handler does not currently have a preferred component list, it will
store nil in this variable.  </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>Errors:</p>
<ul class="ul"><li class="li"><p><code>noErr</code></p></li>
<li class="li"><p><code>memFullErr</code></p></li>
<li class="li"><p><code>paramErr</code></p></li>
<li class="li"><p><code>badComponentSelector</code>			The
media handler component does not support this call.</p></li></ul><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112616" title="Media Sharing Support"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF204" title="Media Sharing Support"></a><h2>Media Sharing
Support</h2>
<p>The Movie Toolbox now supports the construction of new Tracks
that share the underlying media sample tables with another Track
in the same movie. </p>
<p>To construct such a &#8220;cloned&#8221; Track, you can use the new
API <code>AddClonedTrackToMovie</code>, which
is discussed next. </p>
<a name="//apple_ref/c/func/AddClonedTrackToMovie" title="AddClonedTrackToMovie"></a><a name="//apple_ref/doc/c_ref/AddClonedTrackToMovie" title="AddClonedTrackToMovie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-AddClonedTrackToMovie" title="AddClonedTrackToMovie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_122"></a><h3 class="tight">AddClonedTrackToMovie</h3>
<p class="spaceabove">Used to construct cloned tracks. </p>
<p class="spaceabove"><pre>
OSErr AddClonedTrackToMovie( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Track" target="_top">Track</a> sourceTrack, <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> destinationMovie,
long flags, <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Track" target="_top">Track</a> *newTrack);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>sourceTrack </em></dt>
<dd><p>Indicates the Track to be cloned. This is
the source of the sample table once the cloned Track is constructed.</p></dd>
<dt><em>destinationMovie</em></dt>
<dd><p>Indicates the Movie where the cloned
Track should be created. Currently, this Movie must be the same
Movie containing the <code>sourceTrack</code> Track. </p></dd>
<dt><em>flags</em></dt>
<dd><p>A set of flags determining how cloning
should be performed.</p><dl class="termdef">	
<dt><code>kQTCloneShareSamples</code> =
1</dt>
<dd><p>This flag indicates that you want to share the
sample table between the source and clone tracks. If you don&#8217;t
pass this flag, the <code>AddClonedTrackToMovie</code> call
will fail currently.</p></dd>
<dt><code>kQTCloneDontCopyEdits</code> =
2</dt>
<dd><p>By default, the edit list is copied from the source
track to the cloned track. Use this flag to leave the clone track&#8217;s
edit list empty.</p></dd></dl></dd>
<dt><em>newTrack</em></dt>
<dd><p>The address of storage where a reference to
the newly constructed Track is returned. If the function fails,
this storage is set to nil.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_123"></a>AddClonedTrackToMovie
function is similar to the <code>AddEmptyTrackToMovie</code> function,
in that you can create a new Track and Media compatible with the
Track specified by the <code>sourceTrack</code> parameter.
The function returns appropriate errors.</p>
<p>Most QuickTime developers should never need to call this API. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-124258" title="How To Find All Clone Tracks in a Movie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF205" title="How To Find All Clone Tracks in a Movie"></a><h3>How To Find All
Clone Tracks in a Movie</h3>
<p>A clone Track maintains a track reference of type<code> </code>'<code>csrc</code>' (&#8220;clone
source&#8221;) to the Track owning the sample table. In order to find
all clone Tracks in a Movie and their master tracks, you can use
code similar to the following:</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-124285" title="Listing 1-7Finding all clone tracks in a movie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF109" title="Listing 1-7Finding all clone tracks in a movie"></a><p class="codesample"><strong>Listing 1-7&nbsp;&nbsp;</strong>Finding
all clone tracks in a movie</p>
<div class="codesample"><table><tr><td scope="row"><pre>long trackCount, trackIndex;<span></span></pre></td></tr><tr><td scope="row"><pre>Track currentTrack, masterTrack;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>trackCount = GetMovieTrackCount(theMovie);<span></span></pre></td></tr><tr><td scope="row"><pre>for (trackIndex = 1; trackIndex &lt;= trackCount; trackIndex++)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    currentTrack = GetMovieIndTrack(theMovie, trackIndex);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    masterTrack = GetTrackReference(currentTrack, &#8216;csrc&#8217;, 1);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (masterTrack != nil) {<span></span></pre></td></tr><tr><td scope="row"><pre>    // currentTrack is a clone track<span></span></pre></td></tr><tr><td scope="row"><pre>    // masterTrack owns the sample table for currentTrack<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>Because a Track may be cloned multiple times, there may be
more than one clone Track with the same master Track.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-124317" title="Notes and Issues"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF206" title="Notes and Issues"></a><h3>Notes and Issues</h3>
<p>In its initial implementation, you should be aware of the
following issues in using <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_124"></a>AddClonedTrackToMovie. These
limitations will be relaxed in time.</p>
<ul class="spaceabove"><li class="li"><p>The source and cloned Tracks must be in the same
Movie.</p></li>
<li class="li"><p>Only sample table sharing is supported. Always include <code>kQTCloneShareSamples</code> in
the flags to <code>AddClonedTrackToMovie</code>.</p></li>
<li class="li"><p>A movie containing cloned tracks can be stored in a public
movie resource while preserving the cloning relationships. </p></li>
<li class="li"><p>Note that movies containing cloned tracks will fail to open
in earlier versions of QuickTime because of changes in the public
movie format.</p></li>
<li class="li"><p>Flattening a movie containing clone tracks works. However,
the data sharing is not preserved in the flattening process. Each
track&#8217;s referenced media data is written to disk just as it would
be with independent tracks. </p></li>
<li class="li"><p>Editing of clone Tracks is limited to Track-level edit list
operations. These include: <code>InsertEmptyTrackSegment</code>, <code>InsertTrackSegment</code>, <code>InsertMediaIntoTrack</code>, <code>DeleteTrackSegment</code>,
and <code>ScaleTrackSegment</code>.
Movie-level editing operations such as <code>AddMovieSelection</code>, <code>CutMovieSelection</code>,
and <code>InsertMovieSegment</code> will
give undefined results. Track level, media-related editing on non-clone
tracks should work.</p></li>
<li class="li"><p>Attempting to modify the sample table of a clone track using
operations such as <code>AddMediaSample</code>, <code>AddSampleDescription</code> will
return the new error <code>cannotModifyMediaErr</code> (=
-2161). Such changes to the Track owning the sample table, however,
is allowed and these modifications will propagate to clone tracks.</p></li>
<li class="li"><p>Exporting should work, unless the exporter depends upon movie
segment based editing operations. QuickTime&#8217;s exporters typically
use <code>PutMovieIntoHandle</code> and <code>NewMovieFromHandle</code> when
they need to make temporary movies.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-124463" title="New APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF207" title="New APIs"></a><h3>New APIs</h3>
<p>The following APIs have been added to the Movie Toolbox and
the Media Handler API:</p>
<a name="//apple_ref/c/func/SetMovieVideoOutput" title="SetMovieVideoOutput"></a><a name="//apple_ref/doc/c_ref/SetMovieVideoOutput" title="SetMovieVideoOutput"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-SetMovieVideoOutput" title="SetMovieVideoOutput"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_125"></a><h3 class="tight">SetMovieVideoOutput</h3>
<p class="spaceabove">Indicates to the ICM the video output component being
used with the given movie. </p>
<p class="spaceabove"><pre>
void SetMovieVideoOutput(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie, <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> vout)
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>Indicates the movie in use.</p></dd>
<dt><em>vout</em></dt>
<dd><p>Indicates the video output component instance.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>As soon as you turn on the echo port on any video output component,
you should make this call to SetMovieVideoOutput, so the ICM keeps
track of the video output in use. Set the <code>vout</code> parameter
to nil as soon as the video out component is no longer in use. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-124881" title="New Media Handler API"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF208" title="New Media Handler API"></a><h3>New Media Handler
API</h3>
<p>The following Media Handler API has been added to QuickTime
5:</p>
<a name="//apple_ref/c/func/MediaEmptySampleCache" title="MediaEmptySampleCache"></a><a name="//apple_ref/doc/c_ref/MediaEmptySampleCache" title="MediaEmptySampleCache"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-MediaEmptySampleCache" title="MediaEmptySampleCache"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_126"></a><h3 class="tight">MediaEmptySampleCache</h3>
<p class="spaceabove">Empties any sample data that the media handler has cached.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaEmptySampleCache(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh, long sampleNum, long  sampleCount)
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>Indicates the media handler.</p></dd>
<dt><em>sampleNum</em></dt>
<dd><p>Indicates the first sample to empty.</p></dd>
<dt><em>sampleCount</em></dt>
<dd><p>Indicates the number of samples, starting
from -1. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This is an optional media handler call. You tell the media
to empty any sample data which could have been cached, starting
from <code>sampleNum</code> and for <code>sampleCount</code> samples.
Setting <code>sampleCount</code> to
-1 means all samples after and including <code>sampleNum</code>.</p>
<p>Most developers will not need to make this call.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102813" title="New &amp;#8216;vdig&amp;#8217; Flag Added"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF209" title="New &amp;#8216;vdig&amp;#8217; Flag Added"></a><h2>New &#8216;vdig&#8217;
Flag Added</h2>
<p>The following new video digitizer flag has been added:</p>
<div class="codesample"><table><tr><td scope="row"><pre>digiOutDoesNotNeedCopyOfCompressData<span></span></pre></td></tr></table></div>
<p>This may be returned by the video digitizer from <code>VDGetCurrentFlags</code>.
When the video digitizer sets this flag, the sequence grabber does
not make any copies of compressed data coming from a video digitizer
during recording. This allows specific hardware to perform direct
disk I/O without the need of a custom data handler. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112620" title="New Data Handler APIs"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF210" title="New Data Handler APIs"></a><h2>New Data Handler
APIs</h2>
<p>QuickTime 5 includes the addition of new data handler APIs
&#8211;&#8211; <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_127"></a>DataHGetFileTypeOrdering</code> and <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_128"></a>DataHGetMIMETypeAsync</code>,
discussed in this section. </p>
<p>The <code>DataHGetFileTypeOrdering </code>call
allows for returning a list defining the order that file type-related
information should be considered (for example, file type, file extension, MIME
type) by a client. This allows a data handler such the URL data
handler to indicate that MIME type information is more useful than,
say, filename extension or Mac OS file type. </p>
<p>The <code>DataHGetMIMETypeAsync</code> call
has been introduced in order to remove synchronous blocks from QuickTime&#8217;s
movie opening code. </p>
<p>QuickTime 5 also introduces a Pointer data handler, which
supports references to data in memory. </p>
<a name="//apple_ref/c/func/DataHGetFileTypeOrdering" title="DataHGetFileTypeOrdering"></a><a name="//apple_ref/doc/c_ref/DataHGetFileTypeOrdering" title="DataHGetFileTypeOrdering"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DataHGetFileTypeOrdering" title="DataHGetFileTypeOrdering"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_129"></a><h3 class="tight">DataHGetFileTypeOrdering</h3>
<p class="spaceabove">Returns a handle of OSTypes which defines a preferred
ordering for file typing information.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> DataHGetFileTypeOrdering(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh,
<a href="../../Reference/QTRef_DataComponents/Reference/reference.html#//apple_ref/doc/c_ref/DataHFileTypeOrderingHandle" target="_top">DataHFileTypeOrderingHandle</a> * orderingListHandle);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>dh</em></dt>
<dd><p>the data handler</p></dd>
<dt><em>orderlingListHandle</em></dt>
<dd><p>The OSTypes in the list can have one of these
values:</p><div class="codesample"><table><tr><td scope="row"><pre>// Types for DataHGetFileTypeOrdering<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kDataHFileTypeMacOSFileType= 'ftyp',<span></span></pre></td></tr><tr><td scope="row"><pre>    kDataHFileTypeExtension= 'fext',<span></span></pre></td></tr><tr><td scope="row"><pre>    kDataHFileTypeMIME= 'mime'<span></span></pre></td></tr><tr><td scope="row"><pre> };<span></span></pre></td></tr></table></div></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This is a new optional data handler component API that allows
for returning a handle of OSTypes. The returned handle may only
contain a subset of the currently defined types (i.e., Mac OS file
type, extension, MIME type) to limit the consideration to reasonable
types. For example, a Mac OS file type isn&#8217;t meaningful if a data
handler doesn&#8217;t know it. </p>
<p>Before making a call to <code>DataHGetFileTypeOrdering</code>,
the client should have opened the data handler and called <code>DataHSetDataRef</code> or <code>DataHSetDataRefWithAnchor</code>.
This allows the data handler to return a different ordering based
on the particular file. This might allow for a data handler to vary
its ordering based on the location of the file. For example, on
the Mac OS, it might use extensions only on foreign volumes. For
other volumes, it might use a Mac OS file type followed by a file
extension.</p>
<p>If the data handler has not set the data reference, it can
either choose to return an error, or a reasonable default ordering
list.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-GetMovieImporterForDataRef(Updated)" title="GetMovieImporterForDataRef (Updated)"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_130"></a><h3 class="tight">GetMovieImporterForDataRef (Updated)</h3>
<p class="spaceabove">The <code>GetMovieImporterForDataRef</code> function
has been updated to call <code>DataHGetMIMETypeAsync</code> if
instructed to do so. There is a new flag <code>kGetMovieImporterUseAsyncCalls</code> that
the client can pass to indicate this behavior. If <code>GetMovieImporterForDataRef</code> is
allowed to use async calls, it should return <code>notEnoughDataErr</code> if
it would block. Without this flag, the call may block.</p>
<p class="spaceabove"><pre></pre></p>
<a name="//apple_ref/c/func/DataHGetMIMETypeAsync" title="DataHGetMIMETypeAsync"></a><a name="//apple_ref/doc/c_ref/DataHGetMIMETypeAsync" title="DataHGetMIMETypeAsync"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DataHGetMIMETypeAsync" title="DataHGetMIMETypeAsync"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_131"></a><h3 class="tight">DataHGetMIMETypeAsync</h3>
<p class="spaceabove">Accommodates asynchronous discovery of a HTTP/FTP connection&#8217;s
MIME type. </p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult DataHGetMIMETypeAsync(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh, <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a>
   mimeType, <a href="../../Reference/QTRef_DataComponents/Reference/reference.html#//apple_ref/doc/c_ref/DataHCompletionUPP" target="_top">DataHCompletionUPP</a>
   completionRtn, long refCon);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The <code>DataHGetMIMETypeAsync</code> call
removes synchronous blocks from QuickTime&#8217;s movie opening code. <code>DataHGetMIMEType</code>,
the only call available before, will block if the data is not available
yet and will continue blocking until either the information becomes
available or the operation times out in 60 seconds. If it times
out, it returns the error notEnoughDataErr.</p>
<p>The semantics of usage are the same as the already-available <code>DataHGetFileTypeAsync</code> call. With
each call, a pointer to the value to be updated is passed to the
routine. For <code>DataHGetMIMEType</code>,
it is a pointer to a Str255 that will hold the MIME type when (if)
it becomes available. The <code>completionRtn</code> is
a standard DataHCompletion proc that is called when either the data
becomes available or there is a failure (timeout, <code>DataHFinishData()</code> called
with cancel). The <code>refCon</code> value
is passed to the completion routine. The pointer will not be updated
until the completion routine fires.</p>
<p>If a completion routine is not specified, however, the call
will return immediately. If the MIME type is known, it will update <code>mimeType</code> and
return <code>noErr</code>. If the
information is not known yet, the error <code>notEnoughDataErr</code> will
be returned. This allows non-blocking calls to be made to <code>DataHGetMIMETypeAsync</code>.
If it returns another error, that indicates some other failure.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<a name="//apple_ref/c/func/QTGetMIMETypeInfo" title="QTGetMIMETypeInfo"></a><a name="//apple_ref/doc/c_ref/QTGetMIMETypeInfo" title="QTGetMIMETypeInfo"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTGetMIMETypeInfo" title="QTGetMIMETypeInfo"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_132"></a><h3 class="tight">QTGetMIMETypeInfo</h3>
<p class="spaceabove">Allows information to be retrieved about a particular
MIME type. The type of information is specified by a selector. </p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> OSErr QTGetMIMETypeInfo ( const char * mimeStringStart, short
   mimeStringLength, <!--a-->OSType<!--/a--> infoSelector,
   void *infoDataPtr, long *infoDataSize );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mimeStringStart</em></dt>
<dd><p>pointer to the first character of a string
holding the MIME type.</p></dd>
<dt><em>mimeStringLength</em></dt>
<dd><p>number of characters in the MIME type string.
(With <code>mimeStringStart</code>,
this allows references to Pascal, C, and non-delimited string buffers
to be passed with euqal abandon.)</p></dd>
<dt><em>infoSelector</em></dt>
<dd><p>type of information being requested.
Two selectors are defined:</p><dl class="termdef">	
<dt>kQTGetMIMETypeInfoIsQuickTimeMovieType
= 'moov'</dt>
<dd><p>Corresponds to a MIME type for a QuickTime movie.
The current check is against <code>&quot;video/quicktime&quot;</code> and <code>&quot;application/x-quicktimeplayer&quot;</code> but
can be extended in the future. The info is a pointer to a Boolean.</p></dd>
<dt>kQTGetMIMETypeInfoIsQuickTimeMovieType</dt>
<dd><p>Useful in trying to determine an importer, this
returns false for <code>&quot;application/octet-stream&quot;</code>,
a MIME type which often indicates a poorly configured server. This
allows the MIME check to be bypassed for obviously bogus MIME type information.
The info is a pointer to a Boolean.</p></dd></dl></dd>
<dt><em>infoDataPtr</em></dt>
<dd><p>pointer to the value to be updated.</p></dd>
<dt><em>infoDataSize</em></dt>
<dd><p>on input, the size of the data being expected;
on output, the siaze of the data being retrieved. (In all current
cases these will hold the same size. In general, this approach allows
some sanity checking on the size of the info data buffer passed.)</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-122661" title="Pointer Data Handler"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF211" title="Pointer Data Handler"></a><h3>Pointer Data Handler</h3>
<p>The Pointer data handler adds to the complement of other QuickTime
data handlers. Like the Handle Data Handler, the Pointer data handler
supports references to data in memory; unlike the Handle data handler,
the Pointer data handler does not require that data reside within
a block allocated by the Macintosh Memory Manager. You just specify
the memory address of the data and its length, and the Pointer data
handler will do the rest.</p>
<p>The Pointer data handler allows you to submit data for use
by QuickTime via direct memory address. However, it does not eliminate
the use of handles in QuickTime&#8217;s data handler API. Data references
themselves are still stored in handles on which QuickTime will call <code>GetHandleSize</code>.
The API also requires that ancillary pieces of information about data
references, such as their names and MIME types, are passed to QuickTime
in handle blocks, not pointer blocks.</p>
<p>A pointer data ref record has the following definition:</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct PointerDataRefRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void        *data;<span></span></pre></td></tr><tr><td scope="row"><pre>    Size        dataLength;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef PointerDataRefRecord *PointerDataRefPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef PointerDataRefPtr *PointerDataRef;<span></span></pre></td></tr></table></div>
<p>The code snippet in <span class="content_text"><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-122742">Listing 1-8</a></span> shows you how you can open media at a specific memory address
as a QuickTime movie. The snippet does not include error checking. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-122742" title="Listing 1-8Opening media at a specific memory address as a QuickTime movie"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABHEHBA" title="Listing 1-8Opening media at a specific memory address as a QuickTime movie"></a><p class="codesample"><strong>Listing 1-8&nbsp;&nbsp;</strong>Opening
media at a specific memory address as a QuickTime movie</p>
<div class="codesample"><table><tr><td scope="row"><pre>     Str255 mimeTypePascalStr;<span></span></pre></td></tr><tr><td scope="row"><pre>     Str255 namePascalStr;<span></span></pre></td></tr><tr><td scope="row"><pre>     Handle dataRefXtnsnHndl;<span></span></pre></td></tr><tr><td scope="row"><pre>     ComponentInstance dataHandler;<span></span></pre></td></tr><tr><td scope="row"><pre>     PointerDataRef dataref =<span></span></pre></td></tr><tr><td scope="row"><pre>                (PointerDataRef)NewHandle(sizeof(PointerDataRefRecord));<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>     (**dataref).data = myPointerToSomeMedia;<span></span></pre></td></tr><tr><td scope="row"><pre>     (**dataref).dataLength = theLengthOfTheMedia;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>     osstat = OpenADataHandler(dataRef, PointerDataHandlerSubType, nil,<span></span></pre></td></tr><tr><td scope="row"><pre>                            (OSType)0, nil, kDataHCanRead, &amp;dataHandler);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>     // mix in the the mime type of the media<span></span></pre></td></tr><tr><td scope="row"><pre>     osstat = PtrToHand(mimeTypePascalStr, &amp;dataRefXtnsnHndl,<span></span></pre></td></tr><tr><td scope="row"><pre>                        mimeTypePascalStr[0]+1);<span></span></pre></td></tr><tr><td scope="row"><pre>     osstat = DataHSetDataRefExtension(dataHandler, dataRefXtnsnHndl,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        kDataRefExtensionMIMEType);<span></span></pre></td></tr><tr><td scope="row"><pre>     DisposeHandle(dataRefXtnsnHndl);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>     // mix in the name of the media<span></span></pre></td></tr><tr><td scope="row"><pre>     osstat = PtrToHand(namePascalStr, &amp;dataRefXtnsnHndl, namePascalStr<span></span></pre></td></tr><tr><td scope="row"><pre>                        [0]+1);<span></span></pre></td></tr><tr><td scope="row"><pre>     osstat = DataHSetDataRefExtension(dataHandler, dataRefXtnsnHndl,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        kDataRefExtensionFileName);<span></span></pre></td></tr><tr><td scope="row"><pre>     DisposeHandle(dataRefXtnsnHndl);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>     // don't need our data handler instance anymore<span></span></pre></td></tr><tr><td scope="row"><pre>     CloseComponent(dataHandler);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>     // make a movie<span></span></pre></td></tr><tr><td scope="row"><pre>     osstat = NewMovieFromDataRef(&amp;newMovie, newMovieActive +<span></span></pre></td></tr><tr><td scope="row"><pre>                                    newMovieIdleImportOK +<span></span></pre></td></tr><tr><td scope="row"><pre>                                    newMovieAsyncOK, &amp;newResID, dataref,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    PointerDataHandlerSubType);<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-122756" title="New Load State Defined"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF212" title="New Load State Defined"></a><h3>New Load State
Defined</h3>
<p>QuickTime 5 introduces a new load state, defined for the call <code>GetMovieLoadState</code>,
between <code>kMovieLoadStatePlayable</code> and <code>kMovieLoadStateComplete</code> called <code>kMovieLoadStatePlaythroughOK</code>.
This value will be returned after the movie has become playable,
as soon as QuickTime calculates that the download would complete
before the playback would complete. As previously, when a download
completes, <code>GetMovieLoadState</code> returns <code>kMovieLoadStateComplete</code>. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-122811" title="Autoplay and the Movie Toolbox"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF213" title="Autoplay and the Movie Toolbox"></a><h3>Autoplay and the
Movie Toolbox</h3>
<p><code>mcActionAutoPlay</code> is
a new movie controller action introduced in QuickTime 5 that enables you
to start a QuickTime movie playing automatically as soon as there
is a sufficient amount of data available to play it to completion.
This mirrors behavior previously available only in the QuickTime
Plugin. </p>
<p><code>mcActionAutoPlay</code> enables
support for a feature such as QuickTime Player&#8217;s autoplay, which
allows you to automatically begin playback of a movie as soon as
it is appropriate. If it is a movie that is being transferred via
HTTP, for example, it won&#8217;t start to play until QuickTime calculates
that the download would complete before the playback would complete. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-122850" title="New Media Type Supported"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF214" title="New Media Type Supported"></a><h3>New Media Type
Supported</h3>
<p>A new media type is introduced in QuickTime 5. The GSM Importer,
a new movie importer defined by the file extension <code>.gsm</code>,
the file type <code>'GSM '</code>,
and the MIME type <code>audio/x-gsm</code>,
is used to handle new media configurations specified by the QuickTime
Plugin and the control panel in QuickTime 5. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-122875" title="Encoding GSM Audio"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF215" title="Encoding GSM Audio"></a><h4>Encoding GSM Audio</h4>
<p>QuickTime does not encode GSM audio, so you have to use another
tool if you want to create <code>*.gsm</code> files.
MacGSM is a useful tool and available at <code>&lt;http://w3com.com/m2com/#MacGSM&gt;</code>.
When using MacGSM to encode, you start with a <code>*.au</code> file
that is encoded at 16 bits - 8 kHz - mono with 2:1 uLaw compression.
The 8 kHz mono setting in the QuickTime movie export dialog for
Sound to uLaw exports correctly for this purpose. Then, you drop your <code>*.au</code> file
onto MacGSM while holding down the option key. MacGSM will create
a <code>*.au.gsm</code> file that
you can then open with QuickTime via the new GSM movie importer. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112624" title="API to Determine Whether QuickTime Can Open a File"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF216" title="API to Determine Whether QuickTime Can Open a File"></a><h2>API to Determine
Whether QuickTime Can Open a File</h2>
<p>QuickTime 5 includes the addition of two new functions &#8211;&#8211; <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_133"></a>CanQuickTimeOpenFile
and <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_134"></a>CanQuickTimeOpenDataRef,
discussed in this section. The CanQuickTimeOpenFile call determines
whether QuickTime can open a given file or, in general, files of
a given type. The CanQuickTimeOpenDataRef call is similar to <code>CanQuickTimeOpenFile</code> except
that it uses a data reference instead of a file.</p>
<p>The input flags for <code>CanQuickTimeOpenFile</code> and <code>CanQuickTimeOpenFileDataRef</code> are
defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTDontUseDataToFindImporter = 1L &lt;&lt; 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTDontLookForMovieImporterIfGraphicsImporterFound = 1L &lt;&lt; 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTAllowOpeningStillImagesAsMovies = 1L &lt;&lt; 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTAllowImportersThatWouldCreateNewFile = 1L &lt;&lt; 3,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTAllowAggressiveImporters = 1L &lt;&lt; 4<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<a name="//apple_ref/c/func/CanQuickTimeOpenFile" title="CanQuickTimeOpenFile"></a><a name="//apple_ref/doc/c_ref/CanQuickTimeOpenFile" title="CanQuickTimeOpenFile"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-CanQuickTimeOpenFile" title="CanQuickTimeOpenFile"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_135"></a><h3 class="tight">CanQuickTimeOpenFile</h3>
<p class="spaceabove">Determines whether the file could be opened using a graphics
importer or opened in place as a movie.</p>
<p class="spaceabove"><pre>
<a href="QT5NewChapt1.html#//apple_ref/doc/c_ref/CanQuickTimeOpenFile">CanQuickTimeOpenFile</a>  (<a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/FSSpecPtr" target="_top">FSSpecPtr</a>     fileSpec,
   <!--a-->OSType<!--/a-->        fileType,
   <!--a-->OSType<!--/a-->        fileNameExtension,
   <!--a-->Boolean<!--/a--> *     outCanOpenWithGraphicsImporter,
   <!--a-->Boolean<!--/a--> *     outCanOpenAsMovie,
   <!--a-->Boolean<!--/a--> *     outPreferGraphicsImporter,
   UInt32        inFlags);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>fileSpec </em></dt>
<dd><p>Points to an FSSpec identifying the file in
question. If you just want to ask about a particular file type and/or
file name suffix in general, pass NULL.</p></dd>
<dt><em>fileType</em></dt>
<dd><p>Contains the file type if already known, or
0 if not known. If <code>fileSpec</code> is provided
and <code>fileType</code> is 0, QuickTime
will call the File Manager to determine the file type. If you pass
NULL in fileSpec and 0 in <code>fileNameExtension</code>,
you must pass a file type here.</p></dd>
<dt><em>fileNameExtension</em></dt>
<dd><p>Contains the file name suffix if already
known, or 0 if not known. The file name suffix should be encoded
as an uppercase four-character-code with trailing spaces; for instance,
the suffix &quot;.png&quot; should be encoded as<code> 'PNG'</code>, or
0x504e4720. If <code>fileSpec</code> is
provided and <code>fileNameExtension</code> is
0, QuickTime will examine <code>fileSpec</code> to
determine the file name suffix. If you pass NULL in <code>fileSpec</code> and
0 in <code>fileType</code>, you must
pass a file name suffix here.</p></dd>
<dt><em>outCanOpenWithGraphicsImporter</em></dt>
<dd><p>Points to a boolean which will be set
to true if the file can be opened using a graphics importer and
false otherwise. If you do not want this information, pass NULL.</p></dd>
<dt><em>outCanOpenAsMovie</em></dt>
<dd><p>Points to a boolean which will be set
to true if the file can be opened as a movie and false otherwise.
If you do not want this information, pass NULL.</p></dd>
<dt><em>outPreferGraphicsImporter</em></dt>
<dd><p>Points to a boolean which will be set
to true if the file can be opened using a graphics importer and
opened as a movie, but, all other things being equal, QuickTime
recommends using a graphics importer. For example, QuickTime would
recommend using a graphics importer for single-frame GIF files and
opening as a movie for multiple-frame GIF files.</p><p>If
you do not want this information, pass NULL.</p><p>Passing
a non-NULL pointer disables the <code>kQTDontUseDataToFindImporter</code> and <code>kQTDontLookForMovieImporterIfGraphicsImporterFound</code> flags,
if set.</p></dd>
<dt><em>inFlags</em></dt>
<dd><p>Specifies flags which modify search behavior.
Pass 0 for default behavior.</p><p>Flags available are:</p><p><code>kQTDontUseDataToFindImporter</code></p><p>Tells
QuickTime not to use the data in the file to help in the search.
This will speed up the search, especially in cases where a negative
result is returned, but it will cause QuickTime to report that it
can not open files which aren&#8217;t identified by a recognized file
type or file name suffix.</p><dl class="termdef">	
<dt><code>kQTDontLookForMovieImporterIfGraphicsImporterFound</code></dt>
<dd><p>Tells QuickTime to short-circuit its search as
soon as it finds one way to open the file. Pass this flag if you
want to know whether a file can be opened with a graphics importer
or as a movie, but you don&#8217;t care which.</p></dd>
<dt><code>kQTAllowOpeningStillImagesAsMovies</code></dt>
<dd><p>Tells QuickTime to consider opening still images
as movies. If this flag is set, if a file can be opened using a
graphics importer QuickTime will automatically say it can be opened as
a movie.</p></dd>
<dt><code>kQTAllowImportersThatWouldCreateNewFile</code></dt>
<dd><p>Tells QuickTime to include importers which would
create new files. If this flag is clear, QuickTime only includes importers
which can import in place without needing to create new files.</p></dd>
<dt><code>kQTAllowAggressiveImporters</code></dt>
<dd><p>Tells QuickTime to include movie importers for
file types like PICT and TEXT which aren&#8217;t traditionally thought
of as movies.</p><p>If this flag is clear, QuickTime excludes
these movie importers.</p></dd></dl></dd></dl>
<h5 class="tight">Return Value</h5>
<p>The possible error
codes are <code>paramErr</code> and <code>memFullErr</code>.</p>
<h5 class="tight">Discussion</h5>
<p><code>CanQuickTimeOpenFile</code> determines
whether QuickTime can open a given file or, in general, files of
a given type.</p>
<p>You should pass NULL in parameters that do not interest you,
since that will allow QuickTime to perform a faster search.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/CanQuickTimeOpenDataRef" title="CanQuickTimeOpenDataRef"></a><a name="//apple_ref/doc/c_ref/CanQuickTimeOpenDataRef" title="CanQuickTimeOpenDataRef"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-CanQuickTimeOpenDataRef" title="CanQuickTimeOpenDataRef"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_136"></a><h3 class="tight">CanQuickTimeOpenDataRef</h3>
<p class="spaceabove">Determines whether the data reference could be opened
using a graphics importer or opened in place as a movie.</p>
<p class="spaceabove"><pre>
CanQuickTimeOpenDataRef (<!--a-->Handle<!--/a-->      dataRef,
   <!--a-->OSType<!--/a-->      dataRefType,
   <!--a-->Boolean<!--/a--> *   outCanOpenWithGraphicsImporter,
   <!--a-->Boolean<!--/a--> *   outCanOpenAsMovie,
   <!--a-->Boolean<!--/a--> *   outPreferGraphicsImporter,
   UInt32      inFlags);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Similar to <code>CanQuickTimeOpenFile</code> except
that it uses a data reference instead of a file.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112628" title="New Plugin Features"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF217" title="New Plugin Features"></a><h2>New Plugin Features</h2>
<p>QuickTime 5 includes changes and additions to the browser
Plugin. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102888" title="New Embed Tag Parameters"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF218" title="New Embed Tag Parameters"></a><h3>New Embed Tag
Parameters</h3>
<p>The QuickTime browser plugin accepts two new <code>EMBED</code> tag
parameters and a new URL extension that allows you to specify a
set of <code>EMBED</code> tag parameters
as part of a URL.</p>
<p><code>EMBED</code> tag parameters
are normally specified in HTML code as part of the <code>EMBED</code> tag. However,
parameter values can also be stored inside a movie &#8211;&#8211; typically
by an application such as Plugin Helper. And some parameters, such
as <code>AUTOPLAY</code>, can also
have their value set by user preferences.</p>
<p>This makes it possible to specify different settings for the
same parameter in different places. You could set <code>AUTOPLAY=True</code> in
your HTML, for example, while embedding <code>AUTOPLAY=False</code> in
the movie using Plugin Helper. QuickTime resolves any such conflicts by
giving first priority to HTML, next priority to settings embedded
using Plugin Helper, and last priority to settings specified by
user preferences. </p>
<p>As each parameter&#8217;s value is set by one of these methods,
it is flagged to prevent its value from being overridden by a lower
priority method. Unflagged parameters can still be set, allowing
all methods to operate as long as none conflict.</p>
<p>The <code>EMBED</code> tag parameter
settings can change when one movie replaces another, through the
use of the <code>QTNEXT</code> or <code>HREF</code> parameter,
for example, or through the action of an HREF track or a VR hotspot. </p>
<p>When one movie replaces another as specified in the <code>QTNEXT</code> parameter,
the new movie inherits its parameter values from the current movie.
Any values set in the HTML or embedded in the first movie are flagged,
and take precedence over any values embedded in the new movie or
the user preferences.</p>
<p>When one movie replaces another as specified in the <code>HREF</code> parameter,
or as the result of an HREF Track action or a VR hotspot, the <code>EMBED</code> tag
parameters are all reset to their default values. They are not flagged,
however, so the defaults can be overridden by embedding the desired
settings in the new movie.</p>
<p>The new <code>EMBED</code> tag
parameters and URL extensions introduced in QuickTime 5 give you more
control over these behaviors. You can now specify a set of explicit
parameter values as part of a URL, instead of having to embed them
in the new movie. You can also specify whether a new movie should
inherit the current settings, and whether the current settings may
be overridden (by settings embedded in the new movie or by the user
preferences).</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102894" title="New URL Extensions "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF219" title="New URL Extensions "></a><h3>New URL Extensions
</h3><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_137"></a>
<p>Some <code>EMBED</code> tag
parameters, such as <code>HREF</code>, <code>HOTSPOT</code>,
and <code>QTNEXT</code>, allow you
to specify a URL. The QuickTime plugin can also parse URLs from
HREF Tracks or text tracks inside a movie. A QuickTime URL extension
allows these URLs to include a target, specified as part of the
URL, using the syntax <code>&quot;&lt;URL&gt; T&lt;target&gt;&quot;</code>.
Note that the URL and the target specification are surrounded separately
by angle brackets, and that quotes surround the URL and the extension
jointly.</p>
<p>QuickTime 5 introduces a new URL extension that allows you
to specify a separate set of <code>EMBED</code> tag
parameters for each movie as part of the URL. This is easier and
more flexible than having to embed settings in a movie using Plugin
Helper, and it can be accomplished automatically at the HTML level
by any script that can output a text file. The syntax is:</p>
<p><code>&quot;&lt;URL&gt; T&lt;Target&gt; E&lt;ParamA=Value
ParamB=Value ... &gt;&quot;</code></p>
<p>For example, this code:</p>
<p><code>&lt; EMBED SRC=Movie1.mov HEIGHT=256
WIDTH=320 CONTROLLER=False
HREF=&quot;&lt;Movie2.mov&gt; T&lt;myself&gt; E&lt;CONTROLLER=True
AUTOPLAY=True&gt;&quot; &gt;</code></p>
<p>uses HTML <code>EMBED</code> tag
parameters to tell the QuickTime plugin to play <code>Movie1.mov</code> with
no controller, leaving the <code>AUTOPLAY</code> parameter
unspecified (controlled by user preferences). If the viewer clicks
inside the display area of the movie, the <code>HREF</code> parameter
tells the plugin to load <code>Movie2.mov</code>.
The URL extensions <code>T&lt;&gt;</code> and <code>E&lt;&gt;</code> tell
the plugin to replace the current movie (<code>T&lt;myself&gt;</code>),
and set <code>AUTOPLAY=True</code> and <code>CONTROLLER=True </code>(<code>E&lt;AUTOPLAY=True</code> <code>CONTROLLER=True&gt;</code>).</p>
<p>Again, note that the URL itself is surrounded by angle brackets,
and that a set of quotes surrounds the URL and all extensions.</p>
<p>Parameter values set using this method take precedence over
any values embedded in the new movie using Plugin Helper or set
by user preferences. You can change this using the new <code>AllowEmbedTagOverrides</code> parameter.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102902" title="SaveEmbedTags"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF220" title="SaveEmbedTags"></a><h3>SaveEmbedTags</h3>
<p>You can tell the QuickTime browser plugin to apply the current
parameter values to a new movie by setting <code>SaveEmbedTags=True</code>.
This causes a movie specified in an <code>HREF</code> parameter, for
example, to behave like a movie loaded using the <code>QTNEXT</code> parameter
&#8212; it inherits the current parameter values instead of being reset
to the default values.</p>
<p>Example:</p>
<p><code>&lt;EMBED SRC=ClickMe.mov HEIGHT=240
WIDTH=320 
AUTOPLAY=True CONTROLLER=False LOOP=True
HREF=YouClickedIt.mov TARGET=myself SAVEEMBEDTAGS=True &gt;</code></p>
<p>This example would cause the plugin to autoplay <code>ClickMe.mov</code> in
an endless loop with no controller. If the viewer clicked inside
the movie&#8217;s display area, the plugin would load <code>YouClickedIt.mov</code>,
which would also autoplay in a loop with no controller.</p>
<p>Like the values inherited through use of the <code>QTNEXT</code> parameter,
the parameter values set using this method take precedence over
any values embedded in the new movie using Plugin Helper or set
by user preferences. You can change this using the new <code>AllowEmbedTagOverrides</code> parameter.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102908" title="AllowEmbedTagOverrides"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF221" title="AllowEmbedTagOverrides"></a><h3>AllowEmbedTagOverrides</h3>
<p>Setting the <code>AllowEmbedTagOverrides</code> parameter
allows you to control whether the current parameter settings can
be overridden by lower priority methods. This parameter can be set within
your HTML or by embedding the parameter value in a movie, or both.</p>
<p>By default, <code>EMBED</code> tag
parameter values set in HTML have higher priority than values embedded
in a movie, which in turn take priority over user preferences. Similarly,
when a movie inherits parameter values (because of the <code>QTNEXT</code> or <code>SaveEmbedTags</code> parameters), these
inherited values take precedence over any values embedded in the
movie itself, or specified by user preferences.</p>
<p>If you set <code>AllowEmbedTagOverrides=True</code> in
your HTML, however, the current settings can be overridden by settings
embedded in a movie using Plugin Helper, which in turn can be overridden
by user preferences.</p>
<p>Bear in mind that this affects only parameters whose value
you explicitly set. If you do not set a parameter&#8217;s value in your
HTML, for example, that parameter can always be set by Plugin Helper
or by the user preferences.</p>
<p>You would normally set <code>AllowEmbedTagOverrides=True</code> in
your HTML to allow settings embedded in a new movie to take precedence
over the current settings.</p>
<p>For example, when a new movie is specified by the <code>QTNEXT</code> parameter,
or when the <code>SaveEmbedTags</code> parameter
is set <code>true</code>, the new
movie inherits the current parameter settings, and these settings
take precedence over settings embedded in the new movie. By setting <code>AllowEmbedTagOverrides</code> to <code>true</code>,
you can cause the new movie to inherit the current settings as default
values, but override them with any settings embedded in the new movie.</p>
<p>Example:</p>
<p><code>&lt;EMBED SRC=ClickMe.mov HEIGHT=240
WIDTH=320 
CONTROLLER=False HREF=YouClickedIt.mov TARGET=myself SaveEmbedTags=True AllowEmbedTagOverrides=True
&gt;</code></p>
<p>In this example, when the viewer clicks in the display area
of <code>ClickMe.mov</code>, the plugin
loads <code>YouClickedIt.mov</code>.
Because <code>SaveEmbedTags</code> is
set <code>True</code>, the new movie
inherits the parameter values set in the HTML (<code>CONTROLLER=False</code>)
as well as any parameter settings embedded in <code>ClickMe.mov</code>,
but because <code>AllowEmbedTagOverrides</code> is
also true, these act as defaults that can be overriden by any settings
embedded in <code>YouClickedIt.mov</code>,
which could, for example, set <code>CONTROLLER=True.</code></p>
<p>Note that when <code>AllowEmbedTagOverrides=True</code>,
the <code>AUTOPLAY</code> parameter
is controlled by the user&#8217;s QuickTime Settings control panel.
If you set <code>AllowEmbedTagOverrides=True</code> in
your HTML, and you want to control the <code>AUTOPLAY</code> parameter,
you need to set <code>AllowEmbedTagOverrides=False</code> inside
the new movie using a tool such as Plugin Helper. Otherwise, your
setting will be overriden by the user&#8217;s preferences.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102914" title="New Debug Tool Added to Plugin "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF222" title="New Debug Tool Added to Plugin "></a><h3>New Debug Tool
Added to Plugin </h3>
<p>QuickTime 5 adds a new tool to the Plugin that will help debug
wired movies. The tool, which is simple and easy to use, is intended
for QuickTime developers who are working specifically with wired
movies. It works in this manner:</p>
<p>When the plug-in finds a media key named <code>QTPIShowDebugMessages</code> with
the value &#8220;alert,&#8221; it puts up a dialog whenever it gets a sprite
debug message. If the value is &#8220;debugger,&#8221; it drops into the
low-level debuggeer (MacsBug or whatever is installed on your machine).</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112633" title="New QTML function"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF223" title="New QTML function"></a><h2>New QTML function</h2>
<p>The QuickTime Media Layer includes a new function, <code>QTGetAliasInfo</code>,
discussed in this section. </p>
<a name="//apple_ref/c/func/QTGetAliasInfo" title="QTGetAliasInfo"></a><a name="//apple_ref/doc/c_ref/QTGetAliasInfo" title="QTGetAliasInfo"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-QTGetAliasInfo" title="QTGetAliasInfo"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_138"></a><h3 class="tight">QTGetAliasInfo</h3>
<p class="spaceabove">Retrieves information from an alias record without actually
resolving the record; used to retrieve the name of the target, the
names of the target&#8217;s parent directories, the name of the target&#8217;s
volume, or its zone or server name.</p>
<p class="spaceabove"><pre>
OSErr QTGetAliasInfo(
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/AliasHandle" target="_top">AliasHandle</a> alias,     // input: alias record handle
   <a href="../../../Carbon/Reference/Alias_Manager/Reference/reference.html#//apple_ref/doc/c_ref/AliasInfoType" target="_top">AliasInfoType</a> index,   // input: index specifying requested info
   char *outBuf,          // output: returned info (<!--a-->C<!--/a-->-string)
   long bufLen,           // input: length of outBuf
   long *outLen,          // output: length of returned info (includes
   <!--a-->trailing<!--/a--> nul)
   unsigned long flags ); // reserved. Must be 0.
asiZoneName = -3
asiServerName = -2
asiVolumeName = -1
asiAliasName = 0
asiParentName = 1
</pre></p>
<h5 class="tight">Discussion</h5>
<p>The <code>QTGetAliasInfo</code> function
offers an alternative to <code>GetAliasInfo</code> and
provides more consistent behavior cross platform. It returns C strings
of potentially unlimited length. If you pass in a nil <code>outBuf</code>,
or a <code>bufLen</code> that isn&#8217;t
long enough, this routine will return an error, and write the actual
needed length to <code>*outLen</code>.
So, you could make one call to this API with nil <code>outBuf</code>,
then allocate your buffer, and call it again with an appropriate
length buffer.</p>
<p>Note that <code>asiZoneName</code> will
always return an empty string on Windows. <code>asiServerName</code> will also
return an empty string in the usual case of a drive-letter-based
path. But sometimes these aliases refer to paths like <code>&quot;\\www.mypage.com\dropboxes\Bob
Jones\sample.mov&quot;</code>, instead of a drive-letter
based path. In those cases, <code>asiServerName</code> will
return <code>&quot;www.mypage.com&quot;</code>,
and <code>asiVolumeName</code> will
return <code>dropboxes</code>.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112637" title="QuickTime for Java"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF224" title="QuickTime for Java"></a><h2>QuickTime for
Java</h2>
<p><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_139"></a>QuickTime
for Java APIs have been updated to match the latest QuickTime 5
APIs, Toolbox calls, and headers. </p>
<p>QuickTime for Java includes the addition of a new <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_140"></a>idling
mechanism for time-based callbacks, as well as other new services
and classes, discussed in this section. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102926" title="Idling Mechanism Re-Worked"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF225" title="Idling Mechanism Re-Worked"></a><h3>Idling Mechanism
Re-Worked</h3>
<p>The way in which time-based callbacks work in QuickTime for
Java has been re-engineered. These callbacks are now triggered off
interrupts or very high priority native threads, in the case of
Mac OS X and Windows, rather than as previously triggered explicitly
by QuickTime for Java calls to <code>MoviesTask</code>,
which meant that QuickTime for Java had to create idling threads
in order to make the callbacks fire. </p>
<p>Timing callbacks are used in the QuickTime for Java compositing
services, like the Compositor Class, and are used to render frames
when you set the rate of the Compositor to a rate that is not equal
to zero. This gives QuickTime for Java much better performance because
the callbacks are delivered executing Java code much closer to when
they should be. This also means that you don't have to have an idling
thread running in order to have these callbacks fire in the first
place. If your application is using the time callbacks themselves,
you don&#8217;t have to instantiate any sort of idling mechanism, as
you would have done in the past. These callbacks will just fire
when the time conditions are met. This results in a much more responsive
system. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102932" title="Support for New Services"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF226" title="Support for New Services"></a><h3>Support for New
Services</h3>
<p>QuickTime for Java also provides support for a number of new
QuickTime services, including </p>
<ul class="spaceabove"><li class="li"><p>The <code><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-102983">Broadcasting APIs</a></code>that are new in QuickTime 5 (see the <code>quicktime.streaming</code> package).
These classes will only work on the Mac OS because that feature
is only supported by QuickTime on Mac OS.</p></li>
<li class="li"><p>APIs for<code><a href="QT5NewChapt1.html#//apple_ref/doc/uid/TP40000936-CH1g-112661">XML Event-Based Parsing</a></code> that are also new with QuickTime 5 (see
the <code>quicktime.std.qtcomponents</code> package).</p></li>
<li class="li"><p>Enhanced API support for Sound Manager services. Asynchronous
recording is now supported. SndChannels can be instantiated with
a callback, enabling asynchronous playback, use of the <code>soundCmd</code> (like <code>bufferCmd</code>).
SndChannels can also be queried for equalization settings, and Spectral
Data, including a new EQ component in QuickTime 5 that allows up
to 64 bands of spectral data to be obtained. </p></li></ul>
<p>In response to requests from developers, the <code>QTFilter</code> and <code>QTTransition</code> classes
now support movies, compositors as sources, as well as still images. </p>
<p>There are, in addition, a number of minor enhancements and
bug fixes in this release.</p>
<p>The JavaDoc for all of these new APIs in QuickTime for Java
can be perused at:</p>
<p>http://developer.apple.com/quicktime/qtjava</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102938" title="QTDrawing Listener and Notification Services"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF227" title="QTDrawing Listener and Notification Services"></a><h3>QTDrawing Listener
and Notification Services</h3>
<p>Two new classes have been added to QuickTime for Java that
provide notification services for DynamicImage classes upon completion
of drawing operations. For notification of drawing operations, the <code>DrawingNotifier</code> interface
is used, and the <code>DrawingListener</code> interface
is used to register interest in drawing complete notifications.</p>
<p>Several QTJ classes were modified to use the <code>DrawingNotifier</code> interface: <code>MoviePlayer</code>, <code>MoviePresenter</code>, <code>QTEffectPresenter</code>,
and <code>SWCompositor</code>. These
classes provide a method <code>addDrawingListener()</code> that
you may call to register your class.</p>
<p>Once your class that implements the <code>DrawingListener</code> interface
is registered, you will get called whenever a drawing operation
occurs on the Notifier object. This is useful, for example, if you
want to know when a frame has been rendered in a Movie.</p>
<p>To make a class that uses the <code>DrawingListener</code> interface,
you need to do the following:</p>
<div class="codesample"><table><tr><td scope="row"><pre>public class MyListener implements DrawingListener {<span></span></pre></td></tr><tr><td scope="row"><pre>    public void drawingComplete (QTDrawable drawable) {<span></span></pre></td></tr><tr><td scope="row"><pre>        // do something cool when notification is received<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>And then register your class with the component:</p>
<div class="codesample"><table><tr><td scope="row"><pre>MyListener listener = new MyListener();<span></span></pre></td></tr><tr><td scope="row"><pre>    // register MyListener w/ SWCompositor<span></span></pre></td></tr><tr><td scope="row"><pre>theCompositor.addDrawingListener (listener);<span></span></pre></td></tr></table></div>
<p>When you no longer want to receive drawing notifications,
call <code>removeDrawingListener()</code> with
your <code>DrawingListener</code> object
from the component you are no longer interested in.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112641" title="SMIL Changes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF228" title="SMIL Changes"></a><h2>SMIL Changes</h2>
<p>The current release of QuickTime 5 includes the addition of
a number of new Synchronized Multimedia Integration Language (<a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_141"></a>SMIL) attributes, discussed
in this section. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102944" title="New SMIL Attributes"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF229" title="New SMIL Attributes"></a><h3>New SMIL Attributes</h3>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102950" title="Support for &amp;#8220;qt:preroll&amp;#8221;"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF230" title="Support for &amp;#8220;qt:preroll&amp;#8221;"></a><h4>Support for &#8220;qt:preroll&#8221;</h4>
<p>The SMIL attribute, <code>&quot;qt:preroll&quot;</code>,
accepts an integer representing the number of seconds to open and
prepare to play an embedded movie. The attribute can be added to
any media object; the default remains 15 seconds.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102955" title="Support for begin-clip and end-clip "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF231" title="Support for begin-clip and end-clip "></a><h4>Support for begin-clip
and end-clip </h4>
<p>The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_142"></a>begin-clip
and <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_143"></a>end-clip attributes
are now supported for media elements. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102961" title="Support for &amp;quot;qt:fullscreen&amp;quot; "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF232" title="Support for &amp;quot;qt:fullscreen&amp;quot; "></a><h4>Support for &quot;qt:fullscreen&quot; </h4>
<p><code>&quot;qt:fullscreen&quot;</code> can
be set in the SMIL header; it accepts one of the following values: </p>
<div class="codesample"><table><tr><td scope="row"><pre>qt:fullscreen=&quot;fullscreen_false&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>qt:fullscreen=&quot;fullscreen_normal&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>qt:fullscreen=&quot;fullscreen_double&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>qt:fullscreen=&quot;fullscreen_half&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>qt:fullscreen=&quot;fullscreen_full&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>qt:fullscreen=&quot;fullscreen_current&quot;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102966" title="URLs Used with &amp;#8220;qt: next&amp;#8221; Attribute"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF233" title="URLs Used with &amp;#8220;qt: next&amp;#8221; Attribute"></a><h4>URLs Used with
&#8220;qt: next&#8221; Attribute</h4>
<p>Relative URLs now work with qtnext user data and with the <code>&quot;qt:next&quot;</code> attribute
of SMIL documents. Therefore, the following now works:</p>
<p><code>&lt;smil
xmlns:qt=&quot;http://www.mywebsite.com/quicktime/resources/smilextensions&quot;
qt:next=&quot;in_the_same_directory_as_this_document.mov&quot;&gt;
.
.
.
&lt;/smil&gt;</code></p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102972" title="URL Resolution"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF234" title="URL Resolution"></a><h3>URL Resolution</h3>
<p>In QuickTime 5, SMIL and HTML documents can now use BASE URLs
that point to directories. For example: </p>
<div class="codesample"><table><tr><td scope="row"><pre>file:///mydrive/dir1/dir2/lookhere/<span></span></pre></td></tr></table></div>
<p>SMIL and HTML documents can also use BASE URLs that point
to dummy entries, as long as their parent directories are valid.
For example: </p>
<div class="codesample"><table><tr><td scope="row"><pre>file:///mydrive/dir1/dir2/lookhere/bogus.html<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;This was true
in QuickTime 4.1 for HTTP and ftp URLs and is now also true for
file URLs. </p></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112645" title="Enhancements to Effects "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF235" title="Enhancements to Effects "></a><h2>Enhancements
to Effects </h2>
<p>A new effect has been added to QuickTime 5 &#8211;&#8211; the Travelling
Matte. The <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_144"></a>Travelling
Matte, a common type of <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_145"></a>effect used in video and
movie work, is a matte shot where the matte changes from frame to
frame to conform to the action in a scene.</p>
<p>Notably, this is the first three source effect introduced
in QuickTime. The effect behaves, in general, similar to a <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_146"></a>gradient wipe, which
was already available to developers in previous versions of QuickTime.
In both the travelling matte and gradient wipe cases, there is a
&#8220;matte&#8221; which controls whether source A, or source B, or a blend
between the two appears. The exception is that in the gradient wipe
case this is a still image, where in the travelling matte case it
is another video track. That&#8217;s the &#8220;travelling&#8221; part of it. Developers
who are building video applications should find this effect useful
because it is an effect that can have more than two inputs. </p>
<p>The parameters for travelling mattes support a normal matte,
as well as a matte that&#8217;s inverted. Typically, you&#8217;d have, for
example, black as source A and white as source B, so you might have
pulled the matte &#8211;&#8211; &#8220;pulling the matte&#8221; is a technical term,
i.e., how you get the matte from the source material &#8211;&#8211; with
a piece of software that got you the inverse. The parameters support
inverted, and treating the matte as a moving gradient. </p>
<p>QuickTime 5 also includes changes to the gradient wipe effect.
These changes are, essentially, to support the parameter <code>softness</code>,
so that the effect gives you a smoother transition from one source
to the other. This means that it will be more useful to developers. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112649" title="Streaming Client"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF236" title="Streaming Client"></a><h2>Streaming Client</h2>
<p>QuickTime 5 introduces new broadcasting APIs that allow third-party
developers to write broadcasting applications, or to add broadcasting
to their existing applications. This section discusses some of the
features, capabilities, and usage of these broadcasting APIs. </p>
<p>Note that these APIs have not been finalized as of this writing.
If you are interested in participating in a QuickTime seeding program
and providing feedback on the APIs, please send email to <code>qtswfeedback@apple.com.</code> For
preliminary documentation on these APIs and how you can create a
broadcast from a live source, refer to </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/documentation/quicktime/qtdevdocs/RM/frameset.htm<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102983" title="Broadcasting APIs "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIIHAD" title="Broadcasting APIs "></a><h3>Broadcasting APIs </h3>
<p>The new QuickTime broadcasting APIs are designed to allow
you to create standards-compliant RTP broadcasts. This means that
non-QuickTime clients can play back your broadcasts. The new APIs
comprise part of the <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_147"></a>QTSPresentation</code> API
related to broadcasting and the <code><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_148"></a>QTSSourcer</code> component
API. (Note that these new broadcasting APIs currently work only
on the Mac OS, with a limited set provided on Mac OS X.) </p>
<p>Basic broadcasting support of the following is included in
the QuickTime 5 release:</p>
<ul class="spaceabove"><li class="li"><p>Audio and video streams from the Sequence Grabber. </p></li>
<li class="li"><p>Stored movies, i.e., audio and video. </p></li>
<li class="li"><p>Text and URLs. </p></li>
<li class="li"><p>Configuration settings with dialogs and info selectors. </p></li>
<li class="li"><p>The ability to broadcast for extended periods of time without
restarting. </p></li>
<li class="li"><p>The ability to broadcast data from different sources (sourcer
components). </p></li></ul>
<p>The QuickTime-supplied sourcers in this release include: </p>
<ul class="spaceabove"><li class="li"><p>Sequence Grabber (audio and video only). </p></li>
<li class="li"><p>Precompressed media, i.e., sourcer that takes a sample description
and sample data. </p></li>
<li class="li"><p>Stored movies. </p></li>
<li class="li"><p>The ability to dynamically switch sourcers, e.g., dynamically
switch from a live feed to a stored movie. </p></li>
<li class="li"><p>Reporting of basic statistics, e.g., number of connected users
or network stats. </p></li></ul>
<p>Broadcasting with these new APIs is straightforward enough.
The process works as follows: When you&#8217;re broadcasting, QuickTime
uses the Sequence Grabber to source the media as the default. If
you want to generate your own data, your application can create
a sample description, with a piece of data, and an accompanying
timestamp. Then you call the new broadcast APIs and the data will
be broadcast. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112653" title="Wired Actions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABIJJHA" title="Wired Actions"></a><h2>Wired Actions</h2>
<p>QuickTime 5 introduces a number of new wired actions and operands,
which are described in this section. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102989" title="New Wired Actions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF237" title="New Wired Actions"></a><h3>New Wired Actions</h3>
<p>The following new wired actions have been added in QuickTime
5: </p>
<ul class="spaceabove"><li class="li"><p>General </p></li>
<li class="li"><p>Send App Message</p></li>
<li class="li"><p>Flash </p></li>
<li class="li"><p>Text </p></li>
<li class="li"><p>QTLists</p></li>
<li class="li"><p>Track</p></li>
<li class="li"><p>QTVR</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-102995" title="General Wired Actions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF238" title="General Wired Actions"></a><h4>General Wired
Actions</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kActionLoadComponent = 6161, /* (ComponentDescription handlerDesc) */<span></span></pre></td></tr></table></div>
<p>Allows a script to make sure that a component is available
by using this call, and then later calling <code>kOperandComponentVersion</code> to
verify that it loaded. This helps with managing component downloads.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionSetFocus = 6162, /* [(TargetAtoms theObject)] */<span></span></pre></td></tr></table></div>
<p>Sets the current focus. QuickTime supports Flash text edit
characters, text tracks, and sprites. The sprite objects and text
tracks may be targeted in the normal way.  Flash edit characters
can be targeted in a similar way to sprites, but only the text character
object ID is supported with this release. The following defines
are available:</p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kTargetObjectName = FOUR_CHAR_CODE('obna'), /* (PString objectName) */<span></span></pre></td></tr><tr><td scope="row"><pre>    kTargetObjectID  = FOUR_CHAR_CODE('obid'),  /* (QTAtomID objectID) */<span></span></pre></td></tr><tr><td scope="row"><pre>    kTargetObjectIndex  = FOUR_CHAR_CODE('obin') /* (short objectIndex) */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>kActionDontPassKeyEvent = 6163, /* no params */<span></span></pre></td></tr></table></div>
<p>This is for key event handlers to notify the controller that
they have handled the event &#8211;&#8211; don&#8217;t pass up the chain. </p>
<p>The best example of usage of this wired action is in a sprite <code>keyEvent</code> handler.
When the sprite is using the arrow keys for movement, you can use
this action to tell the controller not to pass the arrow keys up
the chain. Otherwise, the controller may use the keys to change
the time, sound level, and so on.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103001" title="Send App Message"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF239" title="Send App Message"></a><h4>Send App Message</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kActionSendAppMessage = 6160,        /* (long appMessageID) */<span></span></pre></td></tr></table></div>
<p>This allows you to send a wired movie message to a host application
like QuickTime Player. </p>
<p>The application message can be one of the following defines:</p>
<div class="codesample"><table><tr><td scope="row"><pre>kQTAppMessageSoftwareChanged = 1,       /* notification to app that<span></span></pre></td></tr><tr><td scope="row"><pre>                                        installed QuickTime<span></span></pre></td></tr><tr><td scope="row"><pre>                                        software has been updated*/<span></span></pre></td></tr><tr><td scope="row"><pre>kQTAppMessageWindowCloseRequested = 3,  /* request for app to close<span></span></pre></td></tr><tr><td scope="row"><pre>                                        window containing<span></span></pre></td></tr><tr><td scope="row"><pre>                                        movie controller*/<span></span></pre></td></tr><tr><td scope="row"><pre>kQTAppMessageExitFullScreenRequested = 4/* request for app to turn off<span></span></pre></td></tr><tr><td scope="row"><pre>                                        full screen mode if active*/<span></span></pre></td></tr><tr><td scope="row"><pre>kQTAppMessageEnterFullScreenRequested = 6<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103007" title="Flash Wired Actions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF240" title="Flash Wired Actions"></a><h4>Flash Wired Actions</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kActionFlashTrackSetFlashVariable = 10245, /* (C string path, C string name, C  string<span></span></pre></td></tr><tr><td scope="row"><pre>                                            value, Boolean updateFocus) */<span></span></pre></td></tr></table></div>
<p>Sets a Flash variable to the value.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionFlashTrackDoButtonActions = 10246,/* (C string path, long buttonID, long<span></span></pre></td></tr><tr><td scope="row"><pre>                                            transition) */<span></span></pre></td></tr></table></div>
<p>Sends a message to a Flash button to perform a transition.
This causes whatever Flash or QuickTime action associated with the
button to perform.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103013" title="Text Wired Actions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF241" title="Text Wired Actions"></a><h4>Text Wired Actions</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackPasteText = 12288,/* (C string theText, long startSelection, long<span></span></pre></td></tr><tr><td scope="row"><pre>                                        endSelection ) */<span></span></pre></td></tr></table></div>
<p>Replaces a selection in the text track with <code>theText</code>. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetTextBox = 12291,/* (short left, short top, short right,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    short bottom) */<span></span></pre></td></tr></table></div>
<p>Changes the <code>textBox</code> of
text track to the passed in size. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetTextStyle = 12292,/* (Handle textStyle) */<span></span></pre></td></tr></table></div>
<p>Changes text track style - a TextStyle record. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetSelection = 12293,/* (long startSelection, long endSelection )  */<span></span></pre></td></tr></table></div>
<p>Sets the text track selection. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetBackgroundColor = 12294,/* (ModifierTrackGraphicsModeRecord<span></span></pre></td></tr><tr><td scope="row"><pre>                                                backgroundColor ) */<span></span></pre></td></tr></table></div>
<p>Sets the text track background color. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetForegroundColor = 12295,/* (ModifierTrackGraphicsModeRecord<span></span></pre></td></tr><tr><td scope="row"><pre>                                            foregroundColor ) */<span></span></pre></td></tr></table></div>
<p>Sets the text color. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetFace = 12296,/* (long fontFace ) */<span></span></pre></td></tr></table></div>
<p>Sets the text face (style) of all text. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetFont = 12297,/* (long fontID ) */<span></span></pre></td></tr></table></div>
<p>Sets the text font of all text. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetSize = 12298,/* (long fontSize ) */<span></span></pre></td></tr></table></div>
<p>Sets the text size of all text. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetAlignment = 12299,/* (short alignment ) */<span></span></pre></td></tr></table></div>
<p>Sets the text alignment as in:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    teJustLeft                  = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    teJustCenter                = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    teJustRight                 = -1,<span></span></pre></td></tr><tr><td scope="row"><pre>    teForceLeft                 = -2, /* new names for the<span></span></pre></td></tr><tr><td scope="row"><pre>                                 Justification (word alignment) styles */<span></span></pre></td></tr><tr><td scope="row"><pre>    teFlushDefault              = 0, /*flush according to the line<span></span></pre></td></tr><tr><td scope="row"><pre>                                 direction */<span></span></pre></td></tr><tr><td scope="row"><pre>    teCenter                    = 1, /*center justify (word alignment) */<span></span></pre></td></tr><tr><td scope="row"><pre>    teFlushRight                = -1,/*flush right for all scripts */<span></span></pre></td></tr><tr><td scope="row"><pre>kActionTextTrackSetHilite = 12300,/* (long startHighlight, long endHighlight,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    ModifierTrackGraphicsModeRecord  highlightColor ) */<span></span></pre></td></tr></table></div>
<p>Highlights from the <code>startHighlight</code> offset
to the <code>endHighlight</code> offset. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetDropShadow = 12301,/* (Point dropShadow, short transparency ) */<span></span></pre></td></tr></table></div>
<p>Sets the drop shadow parameters. This only works if <code>displayFlags</code> has
been set with <code>dfDropShadow</code>. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetDisplayFlags = 12302,/* (long flags ) */<span></span></pre></td></tr></table></div>
<p>Sets the text display flags as in:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    dfDontDisplay               = 1 &lt;&lt; 0,   /* Don't display the text*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfDontAutoScale             = 1 &lt;&lt; 1,   /* Don't scale text as track bounds  grows<span></span></pre></td></tr><tr><td scope="row"><pre>                                                or shrinks*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfClipToTextBox             = 1 &lt;&lt; 2,   /* Clip update to the textbox*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfUseMovieBGColor           = 1 &lt;&lt; 3,   /* Set text background to movie's<span></span></pre></td></tr><tr><td scope="row"><pre>                                                background color*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfShrinkTextBoxToFit        = 1 &lt;&lt; 4,   /* Compute minimum box to fit the  sample*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfScrollIn                  = 1 &lt;&lt; 5,   /* Scroll text in until last of text  is in<span></span></pre></td></tr><tr><td scope="row"><pre>                                                view */<span></span></pre></td></tr><tr><td scope="row"><pre>    dfScrollOut                 = 1 &lt;&lt; 6,   /* Scroll text out until last of text  is<span></span></pre></td></tr><tr><td scope="row"><pre>                                            gone (if both set, scroll in then  out)*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfHorizScroll               = 1 &lt;&lt; 7,   /* Scroll text horizontally  (otherwise it's<span></span></pre></td></tr><tr><td scope="row"><pre>                                                vertical)*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfReverseScroll             = 1 &lt;&lt; 8,   /* vert: scroll down rather than up;  horiz:<span></span></pre></td></tr><tr><td scope="row"><pre>                                            scroll backwards (justfication  dependent)*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfContinuousScroll          = 1 &lt;&lt; 9,   * new samples cause previous samples  to<span></span></pre></td></tr><tr><td scope="row"><pre>                                            scroll out */<span></span></pre></td></tr><tr><td scope="row"><pre>    dfFlowHoriz                 = 1 &lt;&lt; 10,  /* horiz scroll text flows in textbox<span></span></pre></td></tr><tr><td scope="row"><pre>                                                rather than extend to right */<span></span></pre></td></tr><tr><td scope="row"><pre>    dfContinuousKaraoke         = 1 &lt;&lt; 11,  /* ignore begin offset, hilite  everything<span></span></pre></td></tr><tr><td scope="row"><pre>                                                up to the end offset(karaoke)*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfDropShadow                = 1 &lt;&lt; 12,  /* display text with a drop shadow */<span></span></pre></td></tr><tr><td scope="row"><pre>    dfAntiAlias                 = 1 &lt;&lt; 13,  /* attempt to display text anti  aliased*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfKeyedText                 = 1 &lt;&lt; 14,  /* key the text over background*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfInverseHilite             = 1 &lt;&lt; 15,  /* Use inverse hiliting rather than  using<span></span></pre></td></tr><tr><td scope="row"><pre>                                                hilite color*/<span></span></pre></td></tr><tr><td scope="row"><pre>    dfTextColorHilite           = 1 &lt;&lt; 16   /* changes text color in place of<span></span></pre></td></tr><tr><td scope="row"><pre>                                                hiliting. */<span></span></pre></td></tr><tr><td scope="row"><pre>kActionTextTrackSetScroll = 12303,/* (long delay ) */<span></span></pre></td></tr></table></div>
<p>Sets the time delay for start of the scroll. This only works
when scroll flags are set in <code>displayFlags</code>. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackRelativeScroll = 12304,/* (short deltaX, short deltaY ) */<span></span></pre></td></tr></table></div>
<p>Scrolls the text in the text box by the delta amounts. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackFindText = 12305,/* (long flags, Str255 theText,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    ModifierTrackGraphicsModeRecord  highlightColor ) */<span></span></pre></td></tr></table></div>
<p>Finds text in the track. Similar in operation to <code>TextMediaFindNextText</code> since
this is what it uses. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetHyperTextFace = 12306,/* (short index, long fontFace ) */<span></span></pre></td></tr></table></div>
<p>Sets the text face (style) of the indexed hypertext. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetHyperTextColor = 12307,/* (short index,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    ModifierTrackGraphicsModeRecord  highlightColor ) */<span></span></pre></td></tr></table></div>
<p>Sets the text color of the indexed hypertext. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackKeyEntry = 12308,/* (short character ) */<span></span></pre></td></tr></table></div>
<p>Replaces the selection with the character. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackSetEditable = 12310,/* (short editState) */<span></span></pre></td></tr></table></div>
<p>Controls the key entry state of the text track: </p>
<div class="codesample"><table><tr><td scope="row"><pre>    #define kKeyEntryDisabled       0<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kKeyEntryDirect         1<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kKeyEntryScript         2<span></span></pre></td></tr></table></div>
<p><code>kKeyEntryDisabled</code> is
default. </p>
<p>If <code>kKeyEntryDirect</code> is
on, then key events are passed directly to the text track. </p>
<p>If <code>kKeyEntryScript</code> is
on, then scripted mouse and key events are allowed. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTextTrackMouseDown = 12309,/* no params */<span></span></pre></td></tr></table></div>
<p>Passes the mouse click to the text track, which allows for
selecting text or an insertion point when <code>kKeyEntryScript</code> is
turned on. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103019" title="QTLists "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF242" title="QTLists "></a><h4>QTLists </h4>
<p>QTLists are hierarchical data structures stored in movies
or tracks. Any movie or track can have a qtlist. QTLists resemble
XML, with elements than can have child elements or values, as well
as attributes. A set of wired actions and operands provide access
to manipulate these lists and exchange them with servers via XML.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionListSetFromURL = 13317       /* (C string url, C string targetParentPath )  */<span></span></pre></td></tr></table></div>
<p>This allows the scripter to use an XML file to initialize
a list. Note that this is a synchronous action while kActionListServerQuery
is an asynchronous method of loading lists. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionListAddElement = 13312,/* (C string parentPath, short atIndex, C string<span></span></pre></td></tr><tr><td scope="row"><pre>                                newElementName) */<span></span></pre></td></tr></table></div>
<p>Adds the element to the target list. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionListRemoveElements = 13313,/* (C string parentPath, short startIndex, short<span></span></pre></td></tr><tr><td scope="row"><pre>                                        endIndex) */<span></span></pre></td></tr></table></div>
<p>Removes the element from the target list. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionListSetElementValue = 13314,/* (C string elementPath, C string valueString)  */<span></span></pre></td></tr></table></div>
<p>Sets the list element value. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionListPasteFromXML = 13315,/* (C string xml, C string targetParentPath, short<span></span></pre></td></tr><tr><td scope="row"><pre>                                    startIndex) */<span></span></pre></td></tr></table></div>
<p>Pastes an XML-formatted list into the target list at <code>startIndex</code>. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionListSetMatchingFromXML = 13316/* (C string xml, C string targetParentPath)  */<span></span></pre></td></tr></table></div>
<p>Replaces the matching element values in the target list.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionListServerQuery = 13319 /* (C string url, C string keyValuePairs, long flags,  C<span></span></pre></td></tr><tr><td scope="row"><pre>                                string parentPath) */<span></span></pre></td></tr></table></div>
<p>This provides a versatile method for sending and receiving
data from a server. Note that this is an asynchronous method of
loading data, and that the returned data will be available in the
local &#8220;event.list&#8221; of the <code>ListReceived</code> event. </p>
<p>If the <code>keyValuePairs</code> string
is non nil, it is appended first after the URL. The following flags are
then in play:</p>
<div class="codesample"><table><tr><td scope="row"><pre>enum    {<span></span></pre></td></tr><tr><td scope="row"><pre>    kListQuerySendListAsXML             = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    kListQuerySendListAsKeyValuePairs   = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kListQueryWantCallback              = 4,<span></span></pre></td></tr><tr><td scope="row"><pre>    kListQueryDebugTrace                = 8<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>If <code>kListQuerySendListAsXML</code> or <code>kListQuerySendListAsKeyValuePairs</code> are
on, then the list target is used in the manner selected, and appended
to the URL. The key value pairs are appended in the following way:
 </p>
<div class="codesample"><table><tr><td scope="row"><pre>url?key1=one&amp;key2=two&amp;key3=three.<span></span></pre></td></tr></table></div>
<p>XML is appended as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>url?qtlist=&lt;qtlist&gt;&lt;key1&gt;one&lt;/key1&gt;&lt;key2&gt;two&lt;/key2&gt;&lt;key3&gt;three&lt;/key3&gt;&lt;/qtlist&gt;<span></span></pre></td></tr></table></div>
<p>or</p>
<div class="codesample"><table><tr><td scope="row"><pre>url?user=joe&amp;qtlist=&lt;qtlist&gt;&lt;key1&gt;one&lt;/key1&gt;&lt;key2&gt;two&lt;/key2&gt;&lt;key3&gt;three&lt;/key3&gt;&lt;/ qtlist&gt;<span></span></pre></td></tr></table></div>
<p><code>kListQueryWantCallback</code> indicates
whether a list received event is wanted to receive data from the
server.</p>
<p><code>kListQueryDebugTrace</code> is
added for authoring. This triggers a <code>kActionDebugStr</code>,
so that the application can see what URL was actually sent.</p>
<p>As with <code>kActionListExchangeLists</code>,
the URL is encoded before delivery.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103025" title="Track Wired Actions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF243" title="Track Wired Actions"></a><h4>Track Wired Actions</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTrackSetIdleFrequency = 2056, /* (long frequency) */<span></span></pre></td></tr></table></div>
<p>Allows changing the idle frequency, i.e., the time between
successive calls to idle handlers, of sprite and text tracks. The
range is from -1 to max unsigned long. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionTrackSetBassTreble = 2057, /* (short base, short treble) */<span></span></pre></td></tr></table></div>
<p>Sets the bass and treble on sound tracks. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103031" title="QTVR Wired Actions"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF244" title="QTVR Wired Actions"></a><h4>QTVR Wired Actions</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kActionQTVREnableHotSpot = 4101, /* long ID, Boolean enable */<span></span></pre></td></tr></table></div>
<p>Enables or disables a QuickTime VR hot spot by ID. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionQTVRShowHotSpots = 4102, /* Boolean show */<span></span></pre></td></tr></table></div>
<p>Tells the QuickTime VR controller to show/hide all hots spots,
same as clicking on the button in the controller. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionQTVRTranslateObject  = 4103, /* float xMove, float yMove *<span></span></pre></td></tr></table></div>
<p>Moves a QuickTime VR object in the direction specified by
the parameters. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103037" title="New Wired Operands"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF245" title="New Wired Operands"></a><h3>New Wired Operands</h3>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103043" title="General "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF246" title="General "></a><h4>General </h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandEventParameter = 26,        /* short index */<span></span></pre></td></tr></table></div>
<p>Allows key and mouse event handlers to get parameters of the
triggered event. </p>
<p>For the mouse: </p>
<div class="codesample"><table><tr><td scope="row"><pre>        1 : where.h<span></span></pre></td></tr><tr><td scope="row"><pre>        2 : where.v<span></span></pre></td></tr><tr><td scope="row"><pre>        3 : modifiers<span></span></pre></td></tr></table></div>
<p>For the key: </p>
<div class="codesample"><table><tr><td scope="row"><pre>        1 : where.h<span></span></pre></td></tr><tr><td scope="row"><pre>        2 : where.v<span></span></pre></td></tr><tr><td scope="row"><pre>        3 : modifiers<span></span></pre></td></tr><tr><td scope="row"><pre>        4 : key<span></span></pre></td></tr><tr><td scope="row"><pre>        5 : scancode<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandFreeMemory = 27,<span></span></pre></td></tr></table></div>
<p>Returns the amount of memory free in the application heap. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandNetworkStatus = 28,<span></span></pre></td></tr></table></div>
<p>Returns the status code of the network connection:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    kQTNetworkStatusNoNetwork   = -2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTNetworkStatusUncertain   = -1,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTNetworkStatusNotConnected = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTNetworkStatusConnected   = 1<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103048" title="Movie Property"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF247" title="Movie Property"></a><h4>Movie Property</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieDuration = 1029,<span></span></pre></td></tr></table></div>
<p>Returns the duration of the target movie in movie time scale
units. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieTimeScale = 1030,<span></span></pre></td></tr></table></div>
<p>Returns the timescale of the target movie. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieWidth = 1031,<span></span></pre></td></tr></table></div>
<p>Returns the current width of the target movie. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieHeight = 1032,<span></span></pre></td></tr></table></div>
<p>Returns the current height of the target movie. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieLoadState = 1033,<span></span></pre></td></tr></table></div>
<p>Returns the load state of the target movie. &lt;0 indicates
an error. </p>
<div class="codesample"><table><tr><td scope="row"><pre>    kMovieLoadStateLoading      = 1000,     kMovieLoadStatePlayable     = 10000,     kMovieLoadStatePlaythroughOK = 20000,     kMovieLoadStateComplete     = 100000L<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandMovieTrackCount = 1034,<span></span></pre></td></tr></table></div>
<p>Returns the track count of the target movie. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103054" title="Track Property"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF248" title="Track Property"></a><h4>Track Property</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackWidth = 2052,<span></span></pre></td></tr></table></div>
<p>Returns the current width of the target track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackHeight = 2053,<span></span></pre></td></tr></table></div>
<p>Returns the current height of the target track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackDuration = 2054,<span></span></pre></td></tr></table></div>
<p>Returns the duration of the target track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackBass = 2058,<span></span></pre></td></tr></table></div>
<p>Gets the track&#8217;s bass value. The target should be a sound
track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackTreble = 2059,<span></span></pre></td></tr></table></div>
<p>Gets the track&#8217;s treble value. The target should be a sound
track. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103060" title="Sprite Track"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF249" title="Sprite Track"></a><h4>Sprite Track</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandSpriteTrackSpriteIDAtPoint = 3094,/* short x, short y */<span></span></pre></td></tr></table></div>
<p>Returns the ID of the sprite that would be hit at the point
where a mouse click occurred in the target sprite. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103066" title="Text"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF250" title="Text"></a><h4>Text</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackEditable = 6144,<span></span></pre></td></tr></table></div>
<p>Returns the current key entry state of the target text track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackCopyText = 6145,/* long startSelection, long endSelection */<span></span></pre></td></tr></table></div>
<p>Returns the selection range as a string of the target text
track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackStartSelection = 6146,<span></span></pre></td></tr></table></div>
<p>Returns the current starting selection point of the target
text track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackEndSelection = 6147,<span></span></pre></td></tr></table></div>
<p>Returns the current ending selection point of the target text
track. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackTextBoxLeft = 6148,<span></span></pre></td></tr></table></div>
<p>Returns the left edge of the text box of target text track
in text track coordinates. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackTextBoxTop = 6149,<span></span></pre></td></tr></table></div>
<p>Returns the top edge of the text box of target text track
in text track coordinates. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackTextBoxRight = 6150,<span></span></pre></td></tr></table></div>
<p>Returns the right edge of the text box of target text track
in text track coordinates. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTextTrackTextBoxBottom = 6151,<span></span></pre></td></tr></table></div>
<p>Returns the bottom edge of the text box of the target text
track in text track coordinates. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103072" title="QTLists"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF251" title="QTLists"></a><h4>QTLists</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandListCountElements = 7168,/* (C string parentPath) */<span></span></pre></td></tr></table></div>
<p>Returns the number of elements in the target list. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandListGetElementPathByIndex = 7169,/* (C string parentPath, short index) */<span></span></pre></td></tr></table></div>
<p>Returns the name string of the element found a <code>parentPath</code> and
the index of the target list. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandListGetElementValue = 7170,/* (C string elementPath) */<span></span></pre></td></tr></table></div>
<p>Returns the value of the element at <code>elementPath</code> of
the target list. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandListCopyToXML = 7171,       /* (C string parentPath, short startIndex,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    short endIndex) */<span></span></pre></td></tr></table></div>
<p>Returns the selection of the target list as a XML-formatted
string. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103078" title="Math"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF252" title="Math"></a><h4>Math</h4>
<p>Note that the following math functions map directly to standard
math functions, with the exception of kOperandDegreesToRadians and
kOperandRadiansToDegrees, which are specific to QuickTime VR. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandSin                 = 8192,         /* float x  */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandCos                 = 8193,         /* float x  */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandTan                 = 8194,         /* float x  */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandATan                = 8195,         /* float x  */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandATan2               = 8196,         /* float y, float x */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandDegreesToRadians    = 8197,         /* float x */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandRadiansToDegrees    = 8198,         /* float x */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandSquareRoot          = 8199,         /* float x */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandExponent            = 8200,         /* float x */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandLog                 = 8201,         /* float x */<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103084" title="Flash"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF253" title="Flash"></a><h4>Flash</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandFlashTrackVariable = 9216/* [CString path, CString name] */<span></span></pre></td></tr></table></div>
<p>Returns the value of the Flash variable in the target Flash
track. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103090" title="General"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF254" title="General"></a><h4>General</h4>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandSystemVersion = 30<span></span></pre></td></tr></table></div>
<p>This operand returns the Macintosh version. On Mac OS 9.04,
for example, this would be hexidecimal 904, a 32-bit number converted
to a float. On Windows, it currently returns 0. The high half has
several flags in it: the bit that&#8217;s set if you&#8217;re on Windows
9x and another bit that&#8217;s set if you&#8217;re on Windows NT. The defines,
which are in <code>Movies.h</code>,
are as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>/* flags for kOperandSystemVersion*/<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kSystemIsWindows9x = 0x00010000,<span></span></pre></td></tr><tr><td scope="row"><pre>    kSystemIsWindowsNT = 0x00020000<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandMovieIsActive = 1035<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandStringLength = 10240,    /* (C string text) */<span></span></pre></td></tr><tr><td scope="row"><pre>kOperandStringCompare = 10241,    /* (C string aText, C string bText, Boolean                                      caseSensitive, Boolan diacSensitive) */<span></span></pre></td></tr></table></div>
<p>Returns 0 for false, non-zero for true, indicating if the
text is equivalent.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandStringSubString = 10242,    /* (C string text, long offset, long length) */<span></span></pre></td></tr></table></div>
<p>Returns substring of text starting at 0-based offset 'offset'
for length 'length'.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandStringConcat = 10243     /* (C string aText, C string bText) */<span></span></pre></td></tr></table></div>
<p>Returns string produced by concatenating aText with bText. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandQuickTimeVersionRegistered<span></span></pre></td></tr></table></div>
<p>This allows the scripter to verify that the executing QuickTime
has been registered. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieName = 1036,<span></span></pre></td></tr></table></div>
<p>Gets the target movie name, if any, stored in the user data
as type <code>'plug'</code> with data<code> "moviename=theActualMovieName"</code> or
the name the app has defined for the movie. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieID = 1037,<span></span></pre></td></tr></table></div>
<p>Gets the target movie name, if any, stored in the user data
as type <code>'plug'</code> with data <code>&quot;pmovieid=##&quot;</code>. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackName = 2055,<span></span></pre></td></tr></table></div>
<p>Gets the target track name stored in track user data as type
'name'. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackID = 2056,<span></span></pre></td></tr></table></div>
<p>Gets the target track ID. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandTrackIdleFrequency  = 2057,<span></span></pre></td></tr></table></div>
<p>Gets the target track&#8217;s current idle frequency &#8211;&#8211; only
sprite and text tracks are currently supported. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandSpriteName = 3095,<span></span></pre></td></tr></table></div>
<p>Gets the target sprite name. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandQTVRHotSpotsVisible = 4100,<span></span></pre></td></tr></table></div>
<p>Returns whether the QuickTime VR controller is displaying
the hot spots. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandQTVRViewCenterH = 4101,<span></span></pre></td></tr></table></div>
<p>Returns the view centerH of an QuickTime VR object controller. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandQTVRViewCenterV = 4102,<span></span></pre></td></tr></table></div>
<p>Returns the view centerH of an QuickTime VR object controller. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103096" title="Keyboard Focus"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF255" title="Keyboard Focus"></a><h4>Keyboard Focus</h4>
<p>Keyboard focus allows QuickTime 5 users to tab and click between
editable fields and the movie controller. Editable fields are those
that support key events &#8211;&#8211; for example, the edit text characters
in Flash 4 content, text and sprite tracks (both of which are new withQuickTime
5).</p>
<p>To help QuickTime arbitrate focus when the Tab key is entered,
a new media property has been defined: </p>
<div class="codesample"><table><tr><td scope="row"><pre>enum    {<span></span></pre></td></tr><tr><td scope="row"><pre>    kTrackFocusCanEditFlag   = 'kedt' // Boolean<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>QuickTime will search for the next track that has this flag
turned on. QuickTime will then query the track to see if it really
wants focus. For example, a Flash track may not have any edit text
characters, and therefore not want the focus.  Once a track is found,
it is assigned focus, and it determines how this is to be shown
to the user. If no track is found, then the focus is returned to
the movie controller.</p>
<p>QuickTime is making the following assumptions: </p>
<ul class="spaceabove"><li class="li"><p>Flash media defaults to true in the absense of
the above property.</p></li>
<li class="li"><p>Text media defaults to false.</p></li>
<li class="li"><p>Sprite media defaults to false.</p></li></ul>
<p>The major change from QuickTime 5 Public Preview releases
is that the Text track needs to have the above property turned on
as well as having the <code>hasActions</code> flag
turned on for direct keyboard entry.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandCanHaveFocus = 5124, /* [(TargetAtoms theObject)] */<span></span></pre></td></tr></table></div>
<p>Does the track/object allow focus?</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandHasFocus = 5125, /* [(TargetAtoms theObject)] */<span></span></pre></td></tr></table></div>
<p>Does the track/object have focus?</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112657" title="XML Import "></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF256" title="XML Import "></a><h2>XML Import </h2>
<p>QuickTime 5 introduces support for opening XML documents and
importing them as movies &#8211;&#8211; without relying on their extension.
The syntax is:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/smil&quot;?&gt;<span></span></pre></td></tr></table></div>
<p>where <code>application/smil</code> is
replaced with the mime type for the XML document. You can verify
this by using a SMIL script. You rename the file to end with <code>.mov</code> and
add the above two lines to the top of the document, and then Save
As with the <code>.mov </code>extension.
The two lines are followed by the XML document&#8217;s content. </p>
<p>Note that the lines must be present in order for the code
to work correctly, and both lines must be at the very top of the
document. Note also that you can&#8217;t have extra lines in between
the two lines. </p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103102" title="New QuickTime Media Links XML Importer"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF257" title="New QuickTime Media Links XML Importer"></a><h3>New QuickTime
Media Links XML Importer</h3><a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_149"></a>
<p>QuickTime 5 introduces support for a new XML importer &#8211;&#8211;
QuickTime Media Links. This is a small XML file that has similar
attributes to the embed tag in HTML used for the plugin, but targets
QuickTime Player instead of the plugin. This section discusses the supported
attributes and values, and how to create the file.</p>
<p>To test the new QuickTime Media Links XML importer, you create
a text file with the following two lines at the top of the file:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/x-quicktime-media-link&quot;?&gt;<span></span></pre></td></tr></table></div>
<p>Next, you add the embed tag itself:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;embed src=&quot;http://somewhere.com/Movies/test.mov&quot; /&gt;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-103110" title="Supported Attributes and Values"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-TPXREF258" title="Supported Attributes and Values"></a><h4>Supported Attributes
and Values</h4>
<p>The following attributes and values are currently supported:</p>
<div class="codesample"><table><tr><td scope="row"><pre> autoplay - true/false<span></span></pre></td></tr><tr><td scope="row"><pre> controller - true/false<span></span></pre></td></tr><tr><td scope="row"><pre> fullscreen - normal/double/half/current/full<span></span></pre></td></tr><tr><td scope="row"><pre> href - url<span></span></pre></td></tr><tr><td scope="row"><pre> kioskmode - true/false<span></span></pre></td></tr><tr><td scope="row"><pre> loop - true/false/palindrome<span></span></pre></td></tr><tr><td scope="row"><pre> movieid - integer<span></span></pre></td></tr><tr><td scope="row"><pre> moviename - string<span></span></pre></td></tr><tr><td scope="row"><pre> playeveryframe - true/false<span></span></pre></td></tr><tr><td scope="row"><pre> qtnext - url<span></span></pre></td></tr><tr><td scope="row"><pre> quitwhendone - true/false<span></span></pre></td></tr><tr><td scope="row"><pre> src - url (required)<span></span></pre></td></tr><tr><td scope="row"><pre> type - mime type<span></span></pre></td></tr><tr><td scope="row"><pre> volume - 0 (mute) - 100 (max)<span></span></pre></td></tr></table></div>
<p>Note the following: </p>
<ul class="spaceabove"><li class="li"><p>The <code>qtnext</code> attribute
only supports one URL (unlike the plugin). </p></li>
<li class="li"><p>All attributes require values (unlike the plugin). Thus, the
following is valid:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;embed src=&quot;http://somewhere.com/Movies/test.mov&quot; autoplay=&quot;true&quot; /&gt;<span></span></pre></td></tr></table></div></li></ul>
<p>while this (although valid in HTML) is not:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;embed src=&quot;http://somewhere.com/Movies/test.mov&quot; autoplay /&gt;<span></span></pre></td></tr></table></div>
<p>Only a subset of the possible attributes, however, need to
be specified at once.</p>
<p>Support for the XML importer is packaged in a movie importer
(<code>'eat '</code> component) and
is designed to work in any QuickTime-aware application. However,
there is currently no file type or file extension associated with
this type. Instead, the importer is found by using the MIME type
when embedded in a XML movie. The MIME type is found in the line:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/x-quicktime-reference&quot;?&gt;<span></span></pre></td></tr></table></div>
<p>The purpose of this embed format is to serve as a text link
that can be opened in QuickTime Player. Currently, the text link
format (<code>.qtl</code>) is configured
by the MIME settings panel to be specially routed to QuickTime Player
and is never seen by the plug-in.</p>
<p>This format allows QuickTime Player to basically open the
reference file and then set the appropriate attributes. There is
no movie media involved as there is with SMIL.</p>
<p>The format can be used to author a movie with the specified
options. Thus, in order to create a movie with the fullscreen and
autoplay options set, you could create a file like the following,
import it, and then save the resulting movie self-contained:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/x-quicktime-media-link&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;embed src=&quot;http://somewhere.com/Movies/test.mov&quot;  autoplay=&quot;true&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>            fullscreen=&quot;double&quot;/&gt;<span></span></pre></td></tr></table></div>
<p>Keep in mind that this is XML, and not HTML. Don&#8217;t forget
the trailing <code>&quot;/&gt;&quot;</code> in
the embed line.</p>
<a name="//apple_ref/doc/uid/TP40000936-CH1g-112661" title="XML Event-Based Parsing"></a><a name="//apple_ref/doc/uid/TP40000936-CH1g-BABBCBAE" title="XML Event-Based Parsing"></a><h2>XML Event-Based
Parsing</h2>
<p>QuickTime 5 now includes an <a name="//apple_ref/doc/uid/TP40000936-CH1g-DontLinkElementID_150"></a>XML parsing component. In addition
to tree-based XML parsing, it supports event-based XML parsing.
This is supported through callbacks to the client. </p>
<p>Event-based parsing uses much less memory than the tree-based
parser. Basically, it does a callback anytime something interesting
happens. To invoke this, you pass the <code>xmlParseFlagEventParseOnly</code> flag
to <code>XMLParseDataRef()</code> or <code>XMLParseFile()</code>.
The <code>XMLDoc</code> parameter
should be set to NULL in this case. The handlers (which need not
all be set) are defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>ComponentResult startDocumentHandler(long refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentResult endDocumentHandler(long refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentResult startElementHandler(const char *name, const char **atts,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    long refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentResult endElementHandler(const char *name, long refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentResult charDataHandler(const char *charData, long refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentResult commentHandler(const char *comment, long refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentResult preprocessHandler(const char *name, const char **atts,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    long refcon);<span></span></pre></td></tr></table></div>
<p>The following APIs set the callbacks along with the common
refcon shared among the callbacks:</p>
<div class="codesample"><table><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetEventParseRefCon(ComponentInstance<span></span></pre></td></tr><tr><td scope="row"><pre>                                        aParser, long refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetStartDocumentHandler(ComponentInstance<span></span></pre></td></tr><tr><td scope="row"><pre>                                        aParser, StartDocumentHandlerUPP<span></span></pre></td></tr><tr><td scope="row"><pre>                                        startDocument);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetEndDocumentHandler(ComponentInstance<span></span></pre></td></tr><tr><td scope="row"><pre>                        aParser, EndDocumentHandlerUPP endDocument);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetStartElementHandler(ComponentInstance<span></span></pre></td></tr><tr><td scope="row"><pre>                        aParser, StartElementHandlerUPP startElement);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetEndElementHandler(ComponentInstance<span></span></pre></td></tr><tr><td scope="row"><pre>                            aParser, EndElementHandlerUPP endElement);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetCharDataHandler(ComponentInstance<span></span></pre></td></tr><tr><td scope="row"><pre>                            aParser, CharDataHandlerUPP charData);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetPreprocessInstructionHandler(ComponentInstance  aParser,<span></span></pre></td></tr><tr><td scope="row"><pre>                                PreprocessInstructionHandlerUPP<span></span></pre></td></tr><tr><td scope="row"><pre>                                preprocessInstruction);<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult XMLParseSetCommentHandler(ComponentInstance<span></span></pre></td></tr><tr><td scope="row"><pre>                                aParser, CommentHandlerUPP comment);<span></span></pre></td></tr></table></div>
<p>It is the client&#8217;s responsibility to create and free any
UPPs it sets. Also, the <code>atts</code> parameter returned
in the start element and preprocess handlers is a character string
array that contains the attribute name followed by the attribute
value. The list ends with a null terminator.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2001 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2001-10-01<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/WhatsNewQT5/QT5NewChapt1/QT5NewChapt1.html%3Fid%3DTP40000936-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/WhatsNewQT5/QT5NewChapt1/QT5NewChapt1.html%3Fid%3DTP40000936-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/WhatsNewQT5/QT5NewChapt1/QT5NewChapt1.html%3Fid%3DTP40000936-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
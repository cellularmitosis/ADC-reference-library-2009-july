<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>DatePicker - /MyWindowController.m</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/Cocoa/index.html">Cocoa</a> &gt; <a href="../../samplecode/Cocoa/idxUserExperience-date.html">User Experience</a> &gt; <A HREF="javascript:location.replace('index.html');">DatePicker</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->


	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">DatePicker</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/MyWindowController.m</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/main.m</option>
<option value="listing2.html">/MyWindowController.h</option>
<option value="listing3.html">/MyWindowController.m</option></select>
				</p>
				</form>
				<p><strong><a href="DatePicker.zip">Download Sample</a></strong> (&#147;DatePicker.zip&#148;, 43.4K)<BR>
<strong><a href="DatePicker.dmg">Download Sample</a></strong> (&#147;DatePicker.dmg&#148;, 102.0K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*

File: MyWindowController.m

Abstract: Source file for this sample's main NSWindowController.

Version: 1.0

Disclaimer: IMPORTANT:  This Apple software is supplied to you by Apple
Computer, Inc. (&quot;Apple&quot;) in consideration of your agreement to the
following terms, and your use, installation, modification or
redistribution of this Apple software constitutes acceptance of these
terms.  If you do not agree with these terms, please do not use,
install, modify or redistribute this Apple software.

In consideration of your agreement to abide by the following terms, and
subject to these terms, Apple grants you a personal, non-exclusive
license, under Apple's copyrights in this original Apple software (the
&quot;Apple Software&quot;), to use, reproduce, modify and redistribute the Apple
Software, with or without modifications, in source and/or binary forms;
provided that if you redistribute the Apple Software in its entirety and
without modifications, you must retain this notice and the following
text and disclaimers in all such redistributions of the Apple Software. 
Neither the name, trademarks, service marks or logos of Apple Computer,
Inc. may be used to endorse or promote products derived from the Apple
Software without specific prior written permission from Apple.  Except
as expressly stated in this notice, no other rights or licenses, express
or implied, are granted by Apple herein, including but not limited to
any patent rights that may be infringed by your derivative works or by
other works in which the Apple Software may be incorporated.

The Apple Software is provided by Apple on an &quot;AS IS&quot; basis.  APPLE
MAKES NO WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION
THE IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE, REGARDING THE APPLE SOFTWARE OR ITS USE AND
OPERATION ALONE OR IN COMBINATION WITH YOUR PRODUCTS.

IN NO EVENT SHALL APPLE BE LIABLE FOR ANY SPECIAL, INDIRECT, INCIDENTAL
OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) ARISING IN ANY WAY OUT OF THE USE, REPRODUCTION,
MODIFICATION AND/OR DISTRIBUTION OF THE APPLE SOFTWARE, HOWEVER CAUSED
AND WHETHER UNDER THEORY OF CONTRACT, TORT (INCLUDING NEGLIGENCE),
STRICT LIABILITY OR OTHERWISE, EVEN IF APPLE HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.

Copyright &copy; 2006-2007 Apple Inc., All Rights Reserved

*/

#import &quot;MyWindowController.h&quot;

@implementation MyWindowController


// -------------------------------------------------------------------------------
//  awakeFromNib:
// -------------------------------------------------------------------------------
- (void)awakeFromNib
{
  // based our date formatter on CFDateFormatter: allows more configurability and better localization
  [NSDateFormatter setDefaultFormatterBehavior:NSDateFormatterBehavior10_4];
  
  [self setupDatePickerControl:NSClockAndCalendarDatePickerStyle];
  
  // setup the initial NSDatePickerElementFlags since we are using picker style: NSClockAndCalendarDatePickerStyle
  NSDatePickerElementFlags flags = 0;
  flags |= NSYearMonthDatePickerElementFlag;
    flags |= NSYearMonthDayDatePickerElementFlag;
  flags |= NSEraDatePickerElementFlag;  
  flags |= NSHourMinuteDatePickerElementFlag;
    flags |= NSHourMinuteSecondDatePickerElementFlag;
  flags |= NSTimeZoneDatePickerElementFlag;
  [datePickerControl setDatePickerElements: flags];
  
  [[datePickerModeRadios cellWithTag: 1] setEnabled:NO];  // not currently implemened in 10.4.x and earlier
      
  [minDatePicker setDateValue:[NSDate date]];
  [maxDatePicker setDateValue:[NSDate distantFuture]];
    
  [self updateControls];  // force update of all UI elements and the picker itself
}

// -------------------------------------------------------------------------------
//  applicationShouldTerminateAfterLastWindowClosed:sender
//
//  NSApplication delegate method placed here so the sample conveniently quits
//  after we close the window.
// -------------------------------------------------------------------------------
- (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication*)sender
{
  return YES;
}

// -------------------------------------------------------------------------------
//  setupDatePickerControl:pickerStyle
//
//  Delete and re-create a new NSDatePicker
// -------------------------------------------------------------------------------
- (void)setupDatePickerControl:(NSDatePickerStyle)pickerStyle
{
  // we need to re-create the picker control (due to a resize bug when switching between styles)
  if (datePickerControl != NULL)  // hide and release the previous date picker, if any
  {
    [datePickerControl setHidden:YES];
    [datePickerControl setNeedsDisplay:YES];
    [datePickerControl release];
    datePickerControl = nil;
  }
  
  NSRect frame = [datePickerPlaceHolder frame];
  shrinkGrowFactor = frame.size.height - 30;
  
  // create the date picker control if not created already
  if (datePickerControl == nil)
    datePickerControl = [[NSDatePicker alloc] initWithFrame:frame];

  [datePickerControl setFrameOrigin:NSMakePoint(1,0)];  // nudge the control placement a little
  
  [datePickerControl setDatePickerStyle: pickerStyle];  // set our desired picker style
  
  [datePickerPlaceHolder addSubview:datePickerControl];  // embed into our placeholder
  [datePickerControl setDrawsBackground:YES];
  [datePickerControl setBezeled:YES];
  [datePickerControl setBordered:NO];
  [datePickerControl setEnabled:YES];
  
  [datePickerControl setTextColor: [textColorWell color]];
  [datePickerControl setBackgroundColor: [backColorWell color]];
  
  // always set the date/time to TODAY
  // note that our delete override might block this...
  [datePickerControl setDateValue: [NSDate date]];  
  
  [datePickerControl setNeedsDisplay:YES];
  [self updateControls];  // force update of all UI elements and the picker itself
  
  // synch the picker style popup with the new style change
  [pickerStylePopup selectItemWithTag:pickerStyle];
  
  // we want to be the cell's delegate to catch date validation
  [datePickerControl setDelegate:self];
  // or we can set us as the delegate to its cell like so:
  //    [[datePickerControl cell] setDelegate:self];
  
  // we want to respond to date/time changes
  [datePickerControl setAction:@selector(datePickerAction:)];
}

// -------------------------------------------------------------------------------
//  updateDateResult:
// -------------------------------------------------------------------------------
- (void)updateDateResult
{
  NSDate* theDate = [datePickerControl dateValue];
  if (theDate)
  {
    NSDateFormatter* formatter = [[[NSDateFormatter alloc] init] autorelease];
    
    /* some examples:
    [formatter setDateStyle:NSDateFormatterNoStyle];    // &lt;no date displayed&gt;
    [formatter setDateStyle:NSDateFormatterMediumStyle];  // Jan 24, 1984
    [formatter setDateStyle:NSDateFormatterShortStyle];    // 1/24/84
    [formatter setDateStyle:NSDateFormatterLongStyle];    // January 24, 1984
    [formatter setDateStyle:NSDateFormatterFullStyle];    // Tuesday, January 24, 1984
    
    [formatter setTimeStyle:NSDateFormatterNoStyle];    // &lt;no time displayed&gt;
    [formatter setTimeStyle:NSDateFormatterShortStyle];    // 2:44 PM
    [formatter setTimeStyle:NSDateFormatterMediumStyle];  // 2:44:55 PM
    [formatter setTimeStyle:NSDateFormatterLongStyle];    // 2:44:55 PM PDT
    [formatter setTimeStyle:NSDateFormatterFullStyle];    // 2:44:55 PM PDT
    */
        
    NSString* formattedDateString;

    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterNoStyle];
    formattedDateString = [formatter stringFromDate:theDate];
    [dateResult1 setStringValue: formattedDateString];
    
    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    formattedDateString = [formatter stringFromDate:theDate];
    [dateResult2 setStringValue: formattedDateString];
    
    [formatter setDateStyle:NSDateFormatterMediumStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    formattedDateString = [formatter stringFromDate:theDate];
    [dateResult3 setStringValue: formattedDateString];
    
    [formatter setDateStyle:NSDateFormatterLongStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    formattedDateString = [formatter stringFromDate:theDate];
    [dateResult4 setStringValue: formattedDateString];
    
    [formatter setDateStyle:NSDateFormatterFullStyle];
    [formatter setTimeStyle:NSDateFormatterFullStyle];
    formattedDateString = [formatter stringFromDate:theDate];
    [dateResult5 setStringValue: formattedDateString];
  }
}

// -------------------------------------------------------------------------------
//  updateControls:
//
//  Force update of all UI elements and the picker itself.
// -------------------------------------------------------------------------------
- (void)updateControls
{
  [datePickerControl setNeedsDisplay: YES];  // force it to update
  
  [self updateDatePickerMode];
  [self updateDateTimeElementFlags];
  [self updateDateResult];
}


#pragma mark - NSDATEPICKER

// -------------------------------------------------------------------------------
//  setPickerStyle:sender:
//
//  User chose a different picker style from the Picker Style popup.
// -------------------------------------------------------------------------------
- (IBAction)setPickerStyle:(id)sender
{
  int tag = [[sender selectedCell] tag];
  
  NSRect windowFrame = [[self window] frame];
  NSRect boxFrame = [outerBox frame];
  
  [datePickerControl setHidden: YES];

  if (tag == NSClockAndCalendarDatePickerStyle)
  {
    // for this picker style, we need to grow the window to make room
    
    windowFrame.size.height += shrinkGrowFactor;
    windowFrame.origin.y -= shrinkGrowFactor;
    
    boxFrame.size.height += shrinkGrowFactor;
    [outerBox setFrame: boxFrame];
    
    [[self window] setFrame:windowFrame display:YES animate:YES];
    
    [datePickerControl setDatePickerStyle: NSClockAndCalendarDatePickerStyle];  // set our desired picker style
    
    // shows these last
    [dateResult1 setHidden: NO];
    [dateResult2 setHidden: NO];
    [dateResult3 setHidden: NO];
    [dateResult4 setHidden: NO];
  }
  else
  {
    NSDatePickerStyle currentPickerStyle = [datePickerControl datePickerStyle];
    
    // shrink the window only if the current style is &quot;clock and calendar&quot;
    if (currentPickerStyle == NSClockAndCalendarDatePickerStyle)
    {
      // hide these first
      [dateResult1 setHidden: YES];
      [dateResult2 setHidden: YES];
      [dateResult3 setHidden: YES];
      [dateResult4 setHidden: YES];
      
      windowFrame.size.height -= shrinkGrowFactor;
      windowFrame.origin.y += shrinkGrowFactor;
      
      boxFrame.size.height -= shrinkGrowFactor;
      [outerBox setFrame: boxFrame];
      
      [[self window] setFrame:windowFrame display:YES animate:YES];
    }
    
    [self setupDatePickerControl: tag];  // set our desired picker style
  }
  
  [datePickerControl setHidden: NO];
  
  [self updateControls];  // force update of all UI elements and the picker itself
}

// -------------------------------------------------------------------------------
//  setFontSize:
//
//  User chose a different control font size from the Font Size popup.
// -------------------------------------------------------------------------------
- (IBAction)setFontSize:(id)sender
{
  int tag = [[sender selectedCell] tag];
  switch (tag)
  {
    case NSMiniControlSize:
      [[datePickerControl cell] setControlSize:NSMiniControlSize];
      [[datePickerControl cell] setFont:[NSFont systemFontOfSize:9.0]];
      break;
      
    case NSSmallControlSize:
      [[datePickerControl cell] setControlSize:NSSmallControlSize];
      [[datePickerControl cell] setFont:[NSFont systemFontOfSize:11.0]];
      break;
      
    case NSRegularControlSize:
      [[datePickerControl cell] setControlSize:NSRegularControlSize];
      [[datePickerControl cell] setFont:[NSFont systemFontOfSize:13.0]];
      break;
  }
}

// -------------------------------------------------------------------------------
//  datePickerAction:sender:
//
//  The user interacted with the date picker control so update the date/time examples.
// -------------------------------------------------------------------------------
- (IBAction)datePickerAction:(id)sender
{
  [self updateDateResult];
}

// -------------------------------------------------------------------------------
//  dateOverrideAction:sender:
//
//  The user checked/unchecked the &quot;Date Override&quot; checkbox - which in effect
//  turns on or off the delegate method to override the date.
// -------------------------------------------------------------------------------
- (IBAction)dateOverrideAction:(id)sender
{
  BOOL checked = [[sender selectedCell] state];
  if (checked)
  {
    [datePickerControl setDelegate: self];
  }
  else
  {
    [datePickerControl setDelegate: nil];
  }
  
  [datePickerControl setDateValue: [NSDate date]];  // force the delete &quot;datePickerCell&quot; to be called
}

// -------------------------------------------------------------------------------
//  datePickerCell:aDatePickerCell:proposedDateValue:proposedTimeInterval
//
//  Delegate to NSDatePickerCell
// -------------------------------------------------------------------------------
- (void)datePickerCell:(NSDatePickerCell*)aDatePickerCell validateProposedDateValue:(NSDate**)proposedDateValue timeInterval:(NSTimeInterval*)proposedTimeInterval
{  
  MyWindowController* controller = [aDatePickerCell delegate];
  
  if ((controller == self) &amp;&amp; (aDatePickerCell == [datePickerControl cell]))
  {
    // override the date and time?
    if ([[overrideDateCheck cell] state])
    {
      // override the date using the user specified date
      *proposedDateValue = [overrideDate dateValue];
    }
  }
}


#pragma mark - APPEARANCE

// -------------------------------------------------------------------------------
//  setDrawsBackground:sender:
//
//  The user checked/unchecked the &quot;Draws Background&quot; checkbox.
// -------------------------------------------------------------------------------
- (IBAction)setDrawsBackground:(id)sender
{
  NSButton* checkbox = sender;
  [datePickerControl setDrawsBackground: [checkbox state]];
}

// -------------------------------------------------------------------------------
//  setBackgroundColor:sender:
//
//  The user chose a different background color from the &quot;Back Color&quot; color well.
// -------------------------------------------------------------------------------
- (IBAction)setBackgroundColor:(id)sender
{
  NSColor* newColor = [sender color];
  [datePickerControl setBackgroundColor: newColor];
}

// -------------------------------------------------------------------------------
//  setTextColor:sender:
//
//  The user chose a different text color from the &quot;Text Color&quot; color well.
// -------------------------------------------------------------------------------
- (IBAction)setTextColor:(id)sender
{
  NSColor* newColor = [sender color];
  [datePickerControl setTextColor: newColor];
}

// -------------------------------------------------------------------------------
//  setBezeled:sender:
//
//  The user checked/unchecked the &quot;Bezeled&quot; checkbox.  
// -------------------------------------------------------------------------------
- (IBAction)setBezeled:(id)sender
{
  NSButton* checkbox = sender;
  [datePickerControl setBezeled: [checkbox state]];
}

// -------------------------------------------------------------------------------
//  setBordered:sender:
//
//  The user checked/unchecked the &quot;Bordered&quot; checkbox.  
// -------------------------------------------------------------------------------
- (IBAction)setBordered:(id)sender
{
  NSButton* checkbox = sender;
  [datePickerControl setBordered: [checkbox state]];
}


#pragma mark - DATE TIME ELEMENTS

// date/time element popup selections:
enum
{
    kNSHourMinuteDatePickerElementFlag = 0,
  kNSHourMinuteSecondDatePickerElementFlag,
    kNSTimeZoneDatePickerElementFlag,

    kNSYearMonthDatePickerElementFlag = 0,
    kNSYearMonthDayDatePickerElementFlag,
    kNSEraDatePickerElementFlag
};

// -------------------------------------------------------------------------------
//  setDateElementFlags:sender:
//
//  The user checked/unchecked one of the &quot;Date Element&quot; checkboxes.
// -------------------------------------------------------------------------------
- (IBAction)setDateElementFlags:(id)sender
{
  int tag = [[sender selectedCell] tag];
  NSDatePickerElementFlags flags = [datePickerControl datePickerElements];
  
  BOOL checked = [[sender selectedCell] state];
  
  switch (tag)
  {
    case kNSYearMonthDatePickerElementFlag:
      if (checked)
        flags |= NSYearMonthDatePickerElementFlag;
      else
        flags ^= NSYearMonthDatePickerElementFlag;
      break;

    case kNSYearMonthDayDatePickerElementFlag:
      if (checked)
        flags |= NSYearMonthDayDatePickerElementFlag;
      else
        flags ^= NSYearMonthDayDatePickerElementFlag;
      break;

    case kNSEraDatePickerElementFlag:
      if (checked)
        flags |= NSEraDatePickerElementFlag;
      else
        flags ^= NSEraDatePickerElementFlag;
      break;
  }
  [datePickerControl setDatePickerElements: flags];
  
  [self updateControls];  // force update of all UI elements and the picker itself
}

// -------------------------------------------------------------------------------
//  setTimeElementFlags:sender:
//
//  The user checked/unchecked one of the &quot;Time Element&quot; checkboxes.
// -------------------------------------------------------------------------------
- (IBAction)setTimeElementFlags:(id)sender
{
  int tag = [[sender selectedCell] tag];
  NSDatePickerElementFlags flags = [datePickerControl datePickerElements];
  
  BOOL checked = [[sender selectedCell] state];
  
  switch (tag)
  {
    case kNSHourMinuteDatePickerElementFlag:
      if (checked)
        flags |= NSHourMinuteDatePickerElementFlag;
      else
        flags ^= NSHourMinuteDatePickerElementFlag;
      break;
      
    case kNSHourMinuteSecondDatePickerElementFlag:
      if (checked)
        flags |= NSHourMinuteSecondDatePickerElementFlag;
      else
        flags ^= NSHourMinuteSecondDatePickerElementFlag;
      break;
      
    case kNSTimeZoneDatePickerElementFlag:
      if (checked)
        flags |= NSTimeZoneDatePickerElementFlag;
      else
        flags ^= NSTimeZoneDatePickerElementFlag;
      break;
  }
  [datePickerControl setDatePickerElements: flags];
  
  [self updateControls];  // force update of all UI elements and the picker itself
}

// -------------------------------------------------------------------------------
//  updateDateTimeElementFlags:
//
//  Updates our checkboxes to reflect the current control flags
// -------------------------------------------------------------------------------
- (void)updateDateTimeElementFlags
{
  NSDatePickerElementFlags elementFlags = [datePickerControl datePickerElements];
  
  // time elements
  if ((elementFlags &amp; NSHourMinuteDatePickerElementFlag) != 0)
    [timeElementChecks selectCellWithTag: 0];
  if ((elementFlags &amp; NSHourMinuteSecondDatePickerElementFlag) != 0)
    [timeElementChecks selectCellWithTag: 1];
  if ((elementFlags &amp; NSTimeZoneDatePickerElementFlag) != 0)
    [timeElementChecks selectCellWithTag: 2];
  
  // date elements
  if ((elementFlags &amp; NSYearMonthDatePickerElementFlag) != 0)
    [dateElementChecks selectCellWithTag: 0];
  if ((elementFlags &amp; NSYearMonthDayDatePickerElementFlag) != 0)
    [dateElementChecks selectCellWithTag: 1];
  if ((elementFlags &amp; NSEraDatePickerElementFlag) != 0)
    [dateElementChecks selectCellWithTag: 2];
}


#pragma mark - PICKER MIN MAX DATE

// -------------------------------------------------------------------------------
//  setMinDate:sender:
//
//  User wants to set the minimum date for the picker.
// -------------------------------------------------------------------------------
- (IBAction)setMinDate:(id)sender
{
  [datePickerControl setMinDate: [minDatePicker dateValue]];
  [setMinDateButton setEnabled: NO];
  [clearMinDateButton setEnabled: YES];    
}

// -------------------------------------------------------------------------------
//  setMaxDate:sender:
//
//  User wants to set the maximum date for the picker.
// -------------------------------------------------------------------------------
- (IBAction)setMaxDate:(id)sender
{
  [datePickerControl setMaxDate: [maxDatePicker dateValue]];
  [setMaxDateButton setEnabled: NO];
  [clearMaxDateButton setEnabled: YES];
}

// -------------------------------------------------------------------------------
//  clearMinDate:sender:
//
//  User wants to &quot;clear&quot; the minimum date for the picker.
// -------------------------------------------------------------------------------
- (IBAction)clearMinDate:(id)sender
{
  [datePickerControl setMinDate:[NSDate distantPast]];
  [clearMinDateButton setEnabled: NO];
  [setMinDateButton setEnabled: YES];
}

// -------------------------------------------------------------------------------
//  clearMaxDate:sender:
//
//  User wants to &quot;clear&quot; the maximum date for the picker.
// -------------------------------------------------------------------------------
- (IBAction)clearMaxDate:(id)sender
{
  [datePickerControl setMaxDate:[NSDate distantFuture]];
  [clearMaxDateButton setEnabled: NO];
  [setMaxDateButton setEnabled: YES];
}


#pragma mark - PICKER MODE

enum
{
  kSingleDateMode = 0,
  kRangeDateMode
};

// -------------------------------------------------------------------------------
//  setDatePickerMode:sender:
//
//  User wants to change the &quot;Date Picker Mode&quot;.
// -------------------------------------------------------------------------------
- (IBAction)setDatePickerMode:(id)sender
{
  switch ([[sender selectedCell] tag])
  {
    case kSingleDateMode:
    {
      [datePickerControl setDatePickerMode:NSSingleDateMode];
      break;
    }
    case kRangeDateMode:
    {
      [datePickerControl setDatePickerMode:NSRangeDateMode];
      break;
    }
  }
  
  [self updateControls];  // force update of all UI elements and the picker itself
}

// -------------------------------------------------------------------------------
//  updateDatePickerMode:
//
//  Used to update the NSDatePicker's NSDatePickerMode attributes.
// -------------------------------------------------------------------------------
-(void)updateDatePickerMode
{
  NSDatePickerMode mode = [datePickerControl datePickerMode];
  switch (mode)
  {
    case NSSingleDateMode:
    {
      [datePickerModeRadios selectCellWithTag: 0];
      
      // interval value not applicable:
      [secondsRangeEdit setEnabled: NO];
      [secondsRangeEditLabel setTextColor: [NSColor lightGrayColor]];
      
      [datePickerControl setTimeInterval: 0];
      break;
    }
      
    case NSRangeDateMode:
    {
      [datePickerModeRadios selectCellWithTag: 1];
      
      // interval value applies:
      [secondsRangeEdit setEnabled: YES];
      [secondsRangeEditLabel setTextColor: [NSColor blackColor]];
      
      // set the date range by start date (here we use the current date in the date picker control), and time interval (in seconds)
      NSString* secsStr = [secondsRangeEdit stringValue];
      int numSeconds = [secsStr intValue];
      [datePickerControl setTimeInterval: numSeconds];
      break;
    }
  }
}

// -------------------------------------------------------------------------------
//  textDidEndEditing:notification
//
//  The user finished editing the time interval (in seconds).
//
//  This controller is a delegate to the NSTextField: number of seconds (for the date range),
//  so here we get notified when the user has finished editing the seconds range,
//  then we update the date picker control.
//
//
//  NOTE: don't use &quot;textDidEndEditing&quot; because NSTextField is not NSText, rather is a subclass
//  of NSControl, so use the delegate methods from NSControl.
// -------------------------------------------------------------------------------
-(void)controlTextDidEndEditing:(NSNotification*)notification
{
  [self updateDatePickerMode];  // force update of the date picker control
}

@end
</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/DatePicker/listing3.html%3Fid%3DDTS10004134-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/DatePicker/listing3.html%3Fid%3DDTS10004134-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/DatePicker/listing3.html%3Fid%3DDTS10004134-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Passing Data From a JSP Pageto a Component</title>		</HEAD>	<body bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Creating_a__Application.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="Using_WebOb__a_JSP_Page.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF107"></a><h2><font face="Lucida Grande,Helvetica,Arial">Passing Data From a JSP Pageto a Component</font></h2><!-- apple_doc: pageHeadingEnd --><p>In this section, you'll expand the JSP_Example project toinclude</p><ul><li>a new componentcalled FavoriteFood</font></li><li>a JSP page, called DiningWell, that uses the Hello and FavoriteFoodcomponents to generate its output</font></li></ul><p>The FavoriteFood component contains two attributes: <code>visitorName</code> and <code>favoriteFood</code>. Whenthe DiningWell workhorse servlet receives a request, it passes twostrings to the FavoriteFood component. The FavoriteFood componentthen uses those string to render its HTML code.</p><ol><li>Using a texteditor, create a file with the following contents:<pre>&lt;%-- DiningWell.jsp --%&gt;&lt;%@ taglib uri=&quot;/WOtaglib&quot; prefix=&quot;wo&quot; %&gt;&lt;HTML&gt;&lt;HEAD&gt;    &lt;TITLE&gt;Using Two Components&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;    &lt;wo:component className=&quot;Hello&quot;&gt;    &lt;/wo:component&gt;    &lt;P&gt;&lt;P&gt;    &lt;wo:component className=&quot;FavoriteFood&quot; bodyContentOnly=&quot;true&quot;&gt;        &lt;wo:binding key=&quot;visitorName&quot; value='&lt;%= &quot;Worf&quot; %&gt;' /&gt;        &lt;wo:binding key=&quot;favoriteFood&quot; value='&lt;%= &quot;gagh&quot; %&gt;' /&gt;    &lt;/wo:component&gt;&lt;/BODY&gt;&lt;/HTML&gt; </pre><p>Notethat in this case the <code>bodyContentOnly</code> attributeof the <code>&lt;wo:component&gt;</code> tagis set to <code>true</code> (thisis the default, so you don't need to specify a value for it).This allows you to define the FavoriteFood component as "Fulldocument" (the default setting in WebObjects Builder) insteadof "Partial document." This way, the component can be viewedas a Web page on its own and as a component within a JSP page.</p><p>Forfaster processing, you can set the <code>bodyContentOnly</code> attributeto <code>false</code> if you are certainthat the component only includes the <code>&lt;BODY&gt;</code> tagand not the <code>&lt;HTML&gt;</code> tag.</p></font></li><li>Save the file as <code>DiningWell.jsp</code> inthe <code>JSP_Example/Servlet Resources/jsp</code> directory.</font></li><li>In Project Builder, create a component called FavoriteFood(make sure you assign it to the Application Server target).</font></li><li>Edit the component using WebObjects Builder so that it lookslike  <a href="#BBCIDCEB">Figure 3-4</a>. Make sure to add accessor methods to the <code>visitorName</code> and <code>favoriteFood</code> Stringkeys.<br><a name = "BBCIDCEB"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure3-4 The DiningWell component in WebObjectsBuilder</font></b></p> <img src = "../art/favorite_food_wo.gif" alt = "[image: ../art/favorite_food_wo.gif]"><p>Whenyou're done <code>FavoriteFood.java</code> shouldlook like  <a href="#BBCFDJEF">Listing 3-1</a>.</p><a name = "BBCFDJEF"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing 3-1 FavoriteFood.java</font></b></p><pre>import com.webobjects.foundation.*;import com.webobjects.appserver.*;import com.webobjects.eocontrol.*;import com.webobjects.eoaccess.*;public class FavoriteFood extends WOComponent {    protected String visitorName;    protected String favoriteFood;    public FavoriteFood(WOContext context) {        super(context);    }        public String visitorName() {        return visitorName;    }    public void setVisitorName(String newVisitorName) {        visitorName = newVisitorName;    }        public String favoriteFood() {        return favoriteFood;    }    public void setFavoriteFood(String newFavoriteFood) {        favoriteFood = newFavoriteFood;    }}</pre></font></li><li>Make sure the FavoriteFood component is set to "Full document"(see  <a href="Creating_a__Application.html#BBCJAEHF" target = "content">"Creating a JSP-Based Application"</a> for details).</font></li><li>Build the project and, if you're using Tomcat 3.2.3, restartyour servlet container.</font></li></ol><p>If you're using Tomcat, you can view the new page in yourbrowser with this URL</p><pre>http://localhost:8080/JSP_Example/jsp/DiningWell.jsp</pre><p>The Web page should look like  <a href="#BBCJGGBA">Figure 3-5</a>.</p><br><a name = "BBCJGGBA"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure3-5 The output of DiningWell.jsp</font></b></p> <img src = "../art/dining_well_jsp.gif" alt = "[image: ../art/dining_well_jsp.gif]"><p>This is the HTML code your Web browser receives:</p><pre>&lt;HTML&gt;&lt;HEAD&gt;    &lt;TITLE&gt;What to eat?&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;    Hello, World!    &lt;P&gt;&lt;P&gt;    Worf's favorite food is gagh.&lt;/BODY&gt;&lt;/HTML&gt; </pre><br>    <br><a href="Creating_a__Application.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="Using_WebOb__a_JSP_Page.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated January 3, 2002)</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
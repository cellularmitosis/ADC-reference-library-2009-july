<html><head><title>Mac OS X
 Manual Page For s_server(1ssl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1ssl/s_server" title="Mac OS X
 Manual Page for s_server(1ssl)"><a name="//apple_ref/doc/man/1/s_server" title="Mac OS X
 Manual Page for s_server(1ssl)"><!-- headerDoc=man; indexgroup=Section 1ssl; uid="//apple_ref/doc/man/1ssl/s_server"; name=s_server(1ssl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
S_SERVER(1)                                        OpenSSL                                       S_SERVER(1)



<b>NAME</b>
       s_server - SSL/TLS server program

<b>SYNOPSIS</b>
       <b>openssl</b> <b>s_server</b> [<b>-accept</b> <b>port</b>] [<b>-context</b> <b>id</b>] [<b>-verify</b> <b>depth</b>] [<b>-Verify</b> <b>depth</b>] [<b>-cert</b> <b>filename</b>] [<b>-key</b>
       <b>keyfile</b>] [<b>-dcert</b> <b>filename</b>] [<b>-dkey</b> <b>keyfile</b>] [<b>-dhparam</b> <b>filename</b>] [<b>-nbio</b>] [<b>-nbio_test</b>] [<b>-crlf</b>] [<b>-debug</b>]
       [<b>-msg</b>] [<b>-state</b>] [<b>-CApath</b> <b>directory</b>] [<b>-CAfile</b> <b>filename</b>] [<b>-nocert</b>] [<b>-cipher</b> <b>cipherlist</b>] [<b>-quiet</b>]
       [<b>-no_tmp_rsa</b>] [<b>-ssl2</b>] [<b>-ssl3</b>] [<b>-tls1</b>] [<b>-no_ssl2</b>] [<b>-no_ssl3</b>] [<b>-no_tls1</b>] [<b>-no_dhe</b>] [<b>-bugs</b>] [<b>-hack</b>]
       [<b>-www</b>] [<b>-WWW</b>] [<b>-HTTP</b>] [<b>-engine</b> <b>id</b>] [<b>-id_prefix</b> <b>arg</b>] [<b>-rand</b> <!-- a --><b>file(s)</b><!-- /a --><b></b>]

<b>DESCRIPTION</b>
       The <b>s_server</b> command implements a generic SSL/TLS server which listens for connections on a given
       port using SSL/TLS.

<b>OPTIONS</b>
       <b>-accept</b> <b>port</b>
           the TCP port to listen on for connections. If not specified 4433 is used.

       <b>-context</b> <b>id</b>
           sets the SSL context id. It can be given any string value. If this option is not present a
           default value will be used.

       <b>-cert</b> <b>certname</b>
           The certificate to use, most servers cipher suites require the use of a certificate and some
           require a certificate with a certain public key type: for example the DSS cipher suites require a
           certificate containing a DSS (DSA) key. If not specified then the filename "server.pem" will be
           used.

       <b>-key</b> <b>keyfile</b>
           The private key to use. If not specified then the certificate file will be used.

       <b>-dcert</b> <b>filename</b>, <b>-dkey</b> <b>keyname</b>
           specify an additional certificate and private key, these behave in the same manner as the <b>-cert</b>
           and <b>-key</b> options except there is no default if they are not specified (no additional certificate
           and key is used). As noted above some cipher suites require a certificate containing a key of a
           certain type. Some cipher suites need a certificate carrying an RSA key and some a DSS (DSA) key.
           By using RSA and DSS certificates and keys a server can support clients which only support RSA or
           DSS cipher suites by using an appropriate certificate.

       <b>-nocert</b>
           if this option is set then no certificate is used. This restricts the cipher suites available to
           the anonymous ones (currently just anonymous DH).

       <b>-dhparam</b> <b>filename</b>
           the DH parameter file to use. The ephemeral DH cipher suites generate keys using a set of DH
           parameters. If not specified then an attempt is made to load the parameters from the server
           certificate file. If this fails then a static set of parameters hard coded into the s_server
           program will be used.

       <b>-no_dhe</b>
           if this option is set then no DH parameters will be loaded effectively disabling the ephemeral DH
           cipher suites.

       <b>-no_tmp_rsa</b>
           certain export cipher suites sometimes use a temporary RSA key, this option disables temporary
           RSA key generation.

       <b>-verify</b> <b>depth</b>, <b>-Verify</b> <b>depth</b>
           The verify depth to use. This specifies the maximum length of the client certificate chain and
           makes the server request a certificate from the client. With the <b>-verify</b> option a certificate is
           requested but the client does not have to send one, with the <b>-Verify</b> option the client must
           supply a certificate or an error occurs.

       <b>-CApath</b> <b>directory</b>
           The directory to use for client certificate verification. This directory must be in "hash
           format", see <b>verify</b> for more information. These are also used when building the server
           certificate chain.

       <b>-CAfile</b> <b>file</b>
           A file containing trusted certificates to use during client authentication and to use when
           attempting to build the server certificate chain. The list is also used in the list of acceptable
           client CAs passed to the client when a certificate is requested.

       <b>-state</b>
           prints out the SSL session states.

       <b>-debug</b>
           print extensive debugging information including a hex dump of all traffic.

       <b>-msg</b>
           show all protocol messages with hex dump.

       <b>-nbio_test</b>
           tests non blocking I/O

       <b>-nbio</b>
           turns on non blocking I/O

       <b>-crlf</b>
           this option translated a line feed from the terminal into CR+LF.

       <b>-quiet</b>
           inhibit printing of session and certificate information.

       <b>-ssl2</b>, <b>-ssl3</b>, <b>-tls1</b>, <b>-no_ssl2</b>, <b>-no_ssl3</b>, <b>-no_tls1</b>
           these options disable the use of certain SSL or TLS protocols. By default the initial handshake
           uses a method which should be compatible with all servers and permit them to use SSL v3, SSL v2
           or TLS as appropriate.

       <b>-bugs</b>
           there are several known bug in SSL and TLS implementations. Adding this option enables various
           workarounds.

       <b>-hack</b>
           this option enables a further workaround for some some early Netscape SSL code (?).

       <b>-cipher</b> <b>cipherlist</b>
           this allows the cipher list used by the server to be modified.  When the client sends a list of
           supported ciphers the first client cipher also included in the server list is used. Because the
           client specifies the preference order, the order of the server cipherlist irrelevant. See the
           <b>ciphers</b> command for more information.

       <b>-www</b>
           sends a status message back to the client when it connects. This includes lots of information
           about the ciphers used and various session parameters.  The output is in HTML format so this
           option will normally be used with a web browser.

       <b>-WWW</b>
           emulates a simple web server. Pages will be resolved relative to the current directory, for
           example if the URL https://myhost/page.html is requested the file ./page.html will be loaded.

       <b>-HTTP</b>
           emulates a simple web server. Pages will be resolved relative to the current directory, for
           example if the URL https://myhost/page.html is requested the file ./page.html will be loaded. The
           files loaded are assumed to contain a complete and correct HTTP response (lines that are part of
           the HTTP response line and headers must end with CRLF).

       <b>-engine</b> <b>id</b>
           specifying an engine (by it's unique <b>id</b> string) will cause <b>s_server</b> to attempt to obtain a
           functional reference to the specified engine, thus initialising it if needed. The engine will
           then be set as the default for all available algorithms.

       <b>-id_prefix</b> <b>arg</b>
           generate SSL/TLS session IDs prefixed by <b>arg</b>. This is mostly useful for testing any SSL/TLS code
           (eg. proxies) that wish to deal with multiple servers, when each of which might be generating a
           unique range of session IDs (eg. with a certain prefix).

       <b>-rand</b> <!-- a --><b>file(s)</b><!-- /a --><b></b>
           a file or files containing random data used to seed the random number generator, or an EGD socket
           (see <a href="../man3/RAND_egd.3ssl.html#//apple_ref/doc/man/3/RAND_egd"><u>RAND</u><b>_</b><u>egd</u>(3)</a>).  Multiple files can be specified separated by a OS-dependent character.  The
           separator is <b>;</b> for MS-Windows, <b>,</b> for OpenVMS, and <b>:</b> for all others.

<b>CONNECTED</b> <b>COMMANDS</b>
       If a connection request is established with an SSL client and neither the <b>-www</b> nor the <b>-WWW</b> option
       has been used then normally any data received from the client is displayed and any key presses will
       be sent to the client.

       Certain single letter commands are also recognized which perform special operations: these are listed
       below.

       <b>q</b>   end the current SSL connection but still accept new connections.

       <b>Q</b>   end the current SSL connection and exit.

       <b>r</b>   renegotiate the SSL session.

       <b>R</b>   renegotiate the SSL session and request a client certificate.

       <b>P</b>   send some plain text down the underlying TCP connection: this should cause the client to
           disconnect due to a protocol violation.

       <b>S</b>   print out some session cache status information.

<b>NOTES</b>
       <b>s_server</b> can be used to debug SSL clients. To accept connections from a web browser the command:

        openssl s_server -accept 443 -www

       can be used for example.

       Most web browsers (in particular Netscape and MSIE) only support RSA cipher suites, so they cannot
       connect to servers which don't use a certificate carrying an RSA key or a version of OpenSSL with RSA
       disabled.

       Although specifying an empty list of CAs when requesting a client certificate is strictly speaking a
       protocol violation, some SSL clients interpret this to mean any CA is acceptable. This is useful for
       debugging purposes.

       The session parameters can printed out using the <b>sess_id</b> program.

<b>BUGS</b>
       Because this program has a lot of options and also because some of the techniques used are rather
       old, the C source of s_server is rather hard to read and not a model of how things should be done. A
       typical SSL server program would be much simpler.

       The output of common ciphers is wrong: it just gives the list of ciphers that OpenSSL recognizes and
       the client supports.

       There should be a way for the <b>s_server</b> program to print out details of any unknown cipher suites a
       client says it supports.

<b>SEE</b> <b>ALSO</b>
       <a href="sess_id.1ssl.html#//apple_ref/doc/man/1/sess_id"><u>sess</u><b>_</b><u>id</u>(1)</a>, <a href="s_client.1ssl.html#//apple_ref/doc/man/1/s_client"><u>s</u><b>_</b><u>client</u>(1)</a>, <a href="ciphers.1ssl.html#//apple_ref/doc/man/1/ciphers"><u>ciphers</u>(1)</a>



0.9.7l                                           2003-03-20                                      S_SERVER(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/s_server.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/s_server.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/s_server.1ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

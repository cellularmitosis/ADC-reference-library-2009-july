<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Control and Cell Programming Topics for Cocoa: Using the System Control Tint</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using the System Control Tint"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20002180" title="Using the System Control Tint"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="index.html" target="_top">Control and Cell Programming Topics for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="Tasks/SubclassingNSControl.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20002180-BCIBFAHH" title="Using the System Control Tint"></a><hr /><H1>Using the System Control Tint</H1><p>Mac OS X allows a user to set the color used in the display of windows, menus and controls using the Appearance pane in System Preferences. This color is referred to as the control tint. User interface elements provided by the Application Kit automatically modify their appearance based on the current control tint.</p><p>Custom controls and other aspects of your application's user interface can also use the control tint as shown in <span class="content_text">Figure 1</span>. </p><br/><div><a name="//apple_ref/doc/uid/20002180-134908-BBCCBABI" title="Figure 1Examples of control tint aware custom control cells"></a><p><a name="//apple_ref/doc/uid/20002180-134908" title="Figure 1Examples of control tint aware custom control cells"></a><strong>Figure 1&nbsp;&nbsp;</strong>Examples of control tint aware custom control cells</p><img src = "Art/customcontroltint.gif" alt = "Examples of control tint aware custom control cells" width="325" height="163"></div><br/><p></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="SystemTintAware.html#//apple_ref/doc/uid/20002180-134699">Getting the System Control Tint and Color</a>
				
			<br/>
			
        
			
			
				<a href="SystemTintAware.html#//apple_ref/doc/uid/20002180-133831">Interaction with Views and Images</a>
				
			<br/>
			
        
			
			
				<a href="SystemTintAware.html#//apple_ref/doc/uid/20002180-134022">Interaction with NSCell Subclasses</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20002180-134699" title="Getting the System Control Tint and Color"></a><h2>Getting the System Control Tint and Color</h2><p>You can get the current system-wide control tint using the NSColor class method <code>currentControlTint</code>. This method returns an <code><a href="../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/doc/c_ref/NSControlTint" target="_top">NSControlTint</a></code> that represents the currently selected appearance color. Currently <code><a href="../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/doc/c_ref/NSBlueControlTint" target="_top">NSBlueControlTint</a></code> or <code><a href="../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/doc/c_ref/NSGraphiteControlTint" target="_top">NSGraphiteControlTint</a></code> are the possible return values representing the Aqua and Graphite appearances respectively.</p><p>Having determined the current <code><a href="../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/doc/c_ref/NSControlTint" target="_top">NSControlTint</a></code> value, you can now get the corresponding color using the <code><a href="../../Reference/ApplicationKit/Classes/NSColor_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSColor" target="_top">NSColor</a></code> class method <code>colorForControlTint:</code>.</p><p>An application can detect when the user changes the system-wide appearance setting, by registering as an observer of the <code><a href="../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/doc/c_ref/NSControlTintDidChangeNotification" target="_top">NSControlTintDidChangeNotification</a></code> notification. </p><a name="//apple_ref/doc/uid/20002180-133831" title="Interaction with Views and Images"></a><h2>Interaction with Views and Images</h2><p>Your application may want to modify the appearance of the contents of a NSView subclass, or change the type of image used by an NSControl subclass in response to the system-wide appearance being changed. To do this your application must register for the <code><a href="../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/doc/c_ref/NSControlTintDidChangeNotification" target="_top">NSControlTintDidChangeNotification</a></code>, update the appropriate elements, and redraw the view.</p><p>The example in <span class="content_text">Listing 1</span> demonstrates how to determine the current control tint and change the image displayed in an NSButton and an NSImageView. The object that implements this method has previously been registered as an observer of the <code><a href="../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/doc/c_ref/NSControlTintDidChangeNotification" target="_top">NSControlTintDidChangeNotification</a></code> notification, with this method as the selector.</p><a name="//apple_ref/doc/uid/20002180-133897-BBCGDFAE" title="Listing 1Example that sets the contents of an NSButton and NSImageView using the currentControlTint"></a><p class="codesample"><a name="//apple_ref/doc/uid/20002180-133897" title="Listing 1Example that sets the contents of an NSButton and NSImageView using the currentControlTint"></a><strong>Listing 1&nbsp;&nbsp;</strong>Example that sets the contents of an NSButton and NSImageView using the currentControlTint</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)systemTintChangedNotification:(NSNotification *)notification;<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *tintImageName;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // compare the result of [NSColor currentControlTint]<span></span></pre></td></tr><tr><td scope="row"><pre>    // with the supported tint values, defaulting to Aqua<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([NSColor currentControlTint] == NSGraphiteControlTint)<span></span></pre></td></tr><tr><td scope="row"><pre>        tintImageName=@"GraphiteImage";<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>        tintImageName=@"AquaImage";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [exampleButton setImage:[NSImage imageNamed:tintImageName]];<span></span></pre></td></tr><tr><td scope="row"><pre>    [exampleImageView setImage:[NSImage imageNamed:tintImageName]];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20002180-134022" title="Interaction with NSCell Subclasses"></a><h2>Interaction with NSCell Subclasses</h2><p>When the system-wide appearance is changed, any NSCell objects are automatically redrawn. It is the responsibility of an NSCell subclass to determine the current control tint as part of its implementation of <code>drawWithFrame:inView:</code>. </p><p>The example in <span class="content_text">Listing 2</span> demonstrates how to implement a tint-aware <code>drawWithFrame:inView:</code> method. It determines if the cell is using the system-wide appearance tint, or if its tint has been set explicitly and the appropriate image is then selected for display. The appropriate control tint color is also determined for drawing the clock's hands.</p><a name="//apple_ref/doc/uid/20002180-134064-BBCGDEED" title="Listing 2Example of a tint-aware NSCell drawWithFrame:inView: implementation"></a><p class="codesample"><a name="//apple_ref/doc/uid/20002180-134064" title="Listing 2Example of a tint-aware NSCell drawWithFrame:inView: implementation"></a><strong>Listing 2&nbsp;&nbsp;</strong>Example of a tint-aware NSCell drawWithFrame:inView: implementation</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)drawWithFrame:(NSRect)cellFrame<span></span></pre></td></tr><tr><td scope="row"><pre>               inView:(NSView *)controlView<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    // if we're not the front window, we'll resort to using the<span></span></pre></td></tr><tr><td scope="row"><pre>    // special NSClearControlTint value<span></span></pre></td></tr><tr><td scope="row"><pre>    NSControlTint currentTint;<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([[controlView window] isKeyWindow])<span></span></pre></td></tr><tr><td scope="row"><pre>        currentTint = [self controlTint];<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>        currentTint= NSClearControlTint;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // If the NSCell's control tint has been overridden<span></span></pre></td></tr><tr><td scope="row"><pre>    // using the setControlTint: method we should use<span></span></pre></td></tr><tr><td scope="row"><pre>    // the value returned by [self controlTint] as this<span></span></pre></td></tr><tr><td scope="row"><pre>    // controls authoritative tint. If the tint is<span></span></pre></td></tr><tr><td scope="row"><pre>    // NSDefaultControlTint then this cell should use the<span></span></pre></td></tr><tr><td scope="row"><pre>    // system-wise appearance value, and we use the value<span></span></pre></td></tr><tr><td scope="row"><pre>    // returned by the NSColor +currentControlTint method.<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([self controlTint] == NSDefaultControlTint)<span></span></pre></td></tr><tr><td scope="row"><pre>        currentTint=[NSColor currentControlTint];<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>        currentTint=[self controlTint];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // and change the image used in drawing according to<span></span></pre></td></tr><tr><td scope="row"><pre>    // the currentTint<span></span></pre></td></tr><tr><td scope="row"><pre>    // Use the Aqua image as the default image<span></span></pre></td></tr><tr><td scope="row"><pre>    NSImage *clockFaceImage;<span></span></pre></td></tr><tr><td scope="row"><pre>    switch (currentTint) {<span></span></pre></td></tr><tr><td scope="row"><pre>        case NSGraphiteControlTint:<span></span></pre></td></tr><tr><td scope="row"><pre>            clockFaceImage = [NSImage imageNamed: @"ClockFace-Graphite"];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case NSClearControlTint:<span></span></pre></td></tr><tr><td scope="row"><pre>            clockFaceImage = [NSImage imageNamed: @"ClockFace-Clear"];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case NSBlueControlTint:<span></span></pre></td></tr><tr><td scope="row"><pre>        default:<span></span></pre></td></tr><tr><td scope="row"><pre>            clockFaceImage = [NSImage imageNamed: @"ClockFace-Aqua"];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    float clockRadius = MIN(NSHeight(cellFrame), NSWidth(cellFrame));<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Draw the clock face (draw it flipped<span></span></pre></td></tr><tr><td scope="row"><pre>    // if we are in a flipped view, like NSMatrix).<span></span></pre></td></tr><tr><td scope="row"><pre>    [clockFaceImage setFlipped:[controlView isFlipped]];<span></span></pre></td></tr><tr><td scope="row"><pre>    [clockFaceImage drawInRect:NSMakeRect(NSMinX(cellFrame),<span></span></pre></td></tr><tr><td scope="row"><pre>                                          NSMinY(cellFrame),<span></span></pre></td></tr><tr><td scope="row"><pre>                                          clockRadius,clockRadius)<span></span></pre></td></tr><tr><td scope="row"><pre>                      fromRect:NSMakeRect(0,0,<span></span></pre></td></tr><tr><td scope="row"><pre>                                          [clockFaceImage size].width,<span></span></pre></td></tr><tr><td scope="row"><pre>                                          [clockFaceImage size].height)<span></span></pre></td></tr><tr><td scope="row"><pre>                     operation:NSCompositeSourceOver<span></span></pre></td></tr><tr><td scope="row"><pre>                      fraction:1.0];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // get the color for the currentTint and use it for<span></span></pre></td></tr><tr><td scope="row"><pre>    // drawing the hands on the clock face<span></span></pre></td></tr><tr><td scope="row"><pre>    NSColor *tintColor=[NSColor colorForControlTint:currentTint];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Draw the clock hour and minute hands.<span></span></pre></td></tr><tr><td scope="row"><pre>    [self drawClockHandsForTime:time<span></span></pre></td></tr><tr><td scope="row"><pre>                      withFrame:cellFrame<span></span></pre></td></tr><tr><td scope="row"><pre>                         inView:controlView<span></span></pre></td></tr><tr><td scope="row"><pre>                     usingColor:tintColor];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="Tasks/SubclassingNSControl.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/ControlCell/SystemTintAware.html%3Fid%3D10000015i-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/ControlCell/SystemTintAware.html%3Fid%3D10000015i-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/ControlCell/SystemTintAware.html%3Fid%3D10000015i-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

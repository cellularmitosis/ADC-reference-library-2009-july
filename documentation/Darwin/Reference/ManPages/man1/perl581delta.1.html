<html><head><title>Mac OS X
 Manual Page For perl581delta(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/perl581delta" title="Mac OS X
 Manual Page for perl581delta(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/perl581delta"; name=perl581delta(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
PERL581DELTA(1)                       Perl Programmers Reference Guide                       PERL581DELTA(1)



<b>NAME</b>
       perl581delta - what is new for perl v5.8.1

<b>DESCRIPTION</b>
       This document describes differences between the 5.8.0 release and the 5.8.1 release.

       If you are upgrading from an earlier release such as 5.6.1, first read the perl58delta, which
       describes differences between 5.6.0 and 5.8.0.

       In case you are wondering about 5.6.1, it was bug-fix-wise rather identical to the development
       release 5.7.1.  Confused?  This timeline hopefully helps a bit: it lists the new major releases,
       their maintenance releases, and the development releases.

                 New     Maintenance  Development

                 5.6.0                             2000-Mar-22
                                      5.7.0        2000-Sep-02
                         5.6.1                     2001-Apr-08
                                      5.7.1        2001-Apr-09
                                      5.7.2        2001-Jul-13
                                      5.7.3        2002-Mar-05
                 5.8.0                             2002-Jul-18
                         5.8.1                     2003-Sep-25

<b>Incompatible</b> <b>Changes</b>
       <b>Hash</b> <b>Randomisation</b>

       Mainly due to security reasons, the "random ordering" of hashes has been made even more random.  Pre-<font color="#ffffff" class="whiteout">viously&nbsp;Previously</font>
       viously while the order of hash elements from <u>keys()</u>, <u>values()</u>, and <u>each()</u> was essentially random, it
       was still repeatable.  Now, however, the order varies between different runs of Perl.

       <b>Perl</b> <b>has</b> <b>never</b> <b>guaranteed</b> <b>any</b> <b>ordering</b> <b>of</b> <b>the</b> <b>hash</b> <b>keys</b>, and the ordering has already changed several
       times during the lifetime of Perl 5.  Also, the ordering of hash keys has always been, and continues
       to be, affected by the insertion order.

       The added randomness may affect applications.

       One possible scenario is when output of an application has included hash data.  For example, if you
       have used the Data::Dumper module to dump data into different files, and then compared the files to
       see whether the data has changed, now you will have false positives since the order in which hashes
       are dumped will vary.  In general the cure is to sort the keys (or the values); in particular for
       Data::Dumper to use the "Sortkeys" option.  If some particular order is really important, use tied
       hashes: for example the Tie::IxHash module which by default preserves the order in which the hash
       elements were added.

       More subtle problem is reliance on the order of "global destruction".  That is what happens at the
       end of execution: Perl destroys all data structures, including user data.  If your destructors (the
       DESTROY subroutines) have assumed any particular ordering to the global destruction, there might be
       problems ahead.  For example, in a destructor of one object you cannot assume that objects of any
       other class are still available, unless you hold a reference to them.  If the environment variable
       PERL_DESTRUCT_LEVEL is set to a non-zero value, or if Perl is exiting a spawned thread, it will also
       destruct the ordinary references and the symbol tables that are no longer in use.  You can't call a
       class method or an ordinary function on a class that has been collected that way.

       The hash randomisation is certain to reveal hidden assumptions about some particular ordering of hash
       elements, and outright bugs: it revealed a few bugs in the Perl core and core modules.

       To disable the hash randomisation in runtime, set the environment variable PERL_HASH_SEED to 0 (zero)
       before running Perl (for more information see "PERL_HASH_SEED" in perlrun), or to disable the feature
       completely in compile time, compile with "-DNO_HASH_SEED" (see <u>INSTALL</u>).

       See "Algorithmic Complexity Attacks" in perlsec for the original rationale behind this change.

       <b>UTF-8</b> <b>On</b> <b>Filehandles</b> <b>No</b> <b>Longer</b> <b>Activated</b> <b>By</b> <b>Locale</b>

       In Perl 5.8.0 all filehandles, including the standard filehandles, were implicitly set to be in Uni-<font color="#ffffff" class="whiteout">code&nbsp;Unicode</font>
       code UTF-8 if the locale settings indicated the use of UTF-8.  This feature caused too many problems,
       so the feature was turned off and redesigned: see "Core Enhancements".

       <b>Single-number</b> <b>v-strings</b> <b>are</b> <b>no</b> <b>longer</b> <b>v-strings</b> <b>before</b> <b>"=&gt;"</b>

       The version strings or v-strings (see "Version Strings" in perldata) feature introduced in Perl 5.6.0
       has been a source of some confusion-- especially when the user did not want to use it, but Perl
       thought it knew better.  Especially troublesome has been the feature that before a "=&gt;" a version
       string (a "v" followed by digits) has been interpreted as a v-string instead of a string literal.  In
       other words:

               %h = ( v65 =&gt; 42 );

       has meant since Perl 5.6.0

               %h = ( 'A' =&gt; 42 );

       (at least in platforms of ASCII progeny)  Perl 5.8.1 restores the more natural interpretation

               %h = ( 'v65' =&gt; 42 );

       The multi-number v-strings like v65.66 and 65.66.67 still continue to be v-strings in Perl 5.8.

       <b>(Win32)</b> <b>The</b> <b>-C</b> <b>Switch</b> <b>Has</b> <b>Been</b> <b>Repurposed</b>

       The -C switch has changed in an incompatible way.  The old semantics of this switch only made sense
       in Win32 and only in the "use utf8" universe in 5.6.x releases, and do not make sense for the Unicode
       implementation in 5.8.0.  Since this switch could not have been used by anyone, it has been repur-<font color="#ffffff" class="whiteout">posed.&nbsp;repurposed.</font>
       posed.  The behavior that this switch enabled in 5.6.x releases may be supported in a transparent,
       data-dependent fashion in a future release.

       For the new life of this switch, see "UTF-8 no longer default under UTF-8 locales", and "-C" in perl-<font color="#ffffff" class="whiteout">run.&nbsp;perlrun.</font>
       run.

       <b>(Win32)</b> <b>The</b> <b>/d</b> <b>Switch</b> <b>Of</b> <b>cmd.exe</b>

       Perl 5.8.1 uses the /d switch when running the cmd.exe shell internally for <u>system()</u>, backticks, and
       when opening pipes to external programs.  The extra switch disables the execution of AutoRun commands
       from the registry, which is generally considered undesirable when running external programs.  If you
       wish to retain compatibility with the older behavior, set PERL5SHELL in your environment to "cmd
       /x/c".

<b>Core</b> <b>Enhancements</b>
       <b>UTF-8</b> <b>no</b> <b>longer</b> <b>default</b> <b>under</b> <b>UTF-8</b> <b>locales</b>

       In Perl 5.8.0 many Unicode features were introduced.   One of them was found to be of more nuisance
       than benefit: the automagic (and silent) "UTF-8-ification" of filehandles, including the standard
       filehandles, if the user's locale settings indicated use of UTF-8.

       For example, if you had "en_US.UTF-8" as your locale, your STDIN and STDOUT were automatically
       "UTF-8", in other words an implicit binmode(..., ":utf8") was made.  This meant that trying to print,
       say, <u>chr</u>(0xff), ended up printing the bytes 0xc3 0xbf.  Hardly what you had in mind unless you were
       aware of this feature of Perl 5.8.0.  The problem is that the vast majority of people weren't: for
       example in RedHat releases 8 and 9 the <b>default</b> locale setting is UTF-8, so all RedHat users got UTF-8
       filehandles, whether they wanted it or not.  The pain was intensified by the Unicode implementation
       of Perl 5.8.0 (still) having nasty bugs, especially related to the use of s/// and tr///.  (Bugs that
       have been fixed in 5.8.1)

       Therefore a decision was made to backtrack the feature and change it from implicit silent default to
       explicit conscious option.  The new Perl command line option "-C" and its counterpart environment
       variable PERL_UNICODE can now be used to control how Perl and Unicode interact at interfaces like I/O
       and for example the command line arguments.  See "-C" in perlrun and "PERL_UNICODE" in perlrun for
       more information.

       <b>Unsafe</b> <b>signals</b> <b>again</b> <b>available</b>

       In Perl 5.8.0 the so-called "safe signals" were introduced.  This means that Perl no longer handles
       signals immediately but instead "between opcodes", when it is safe to do so.  The earlier immediate
       handling easily could corrupt the internal state of Perl, resulting in mysterious crashes.

       However, the new safer model has its problems too.  Because now an opcode, a basic unit of Perl exe-<font color="#ffffff" class="whiteout">cution,&nbsp;execution,</font>
       cution, is never interrupted but instead let to run to completion, certain operations that can take a
       long time now really do take a long time.  For example, certain network operations have their own
       blocking and timeout mechanisms, and being able to interrupt them immediately would be nice.

       Therefore perl 5.8.1 introduces a "backdoor" to restore the pre-5.8.0 (pre-5.7.3, really) signal be-<font color="#ffffff" class="whiteout">haviour.&nbsp;behaviour.</font>
       haviour.  Just set the environment variable PERL_SIGNALS to "unsafe", and the old immediate (and
       unsafe) signal handling behaviour returns.  See "PERL_SIGNALS" in perlrun and "Deferred Signals (Safe
       Signals)" in perlipc.

       In completely unrelated news, you can now use safe signals with POSIX::SigAction.  See "POSIX::SigAc-<font color="#ffffff" class="whiteout">tion"&nbsp;"POSIX::SigAction"</font>
       tion" in POSIX.

       <b>Tied</b> <b>Arrays</b> <b>with</b> <b>Negative</b> <b>Array</b> <b>Indices</b>

       Formerly, the indices passed to "FETCH", "STORE", "EXISTS", and "DELETE" methods in tied array class
       were always non-negative.  If the actual argument was negative, Perl would call FETCHSIZE implicitly
       and add the result to the index before passing the result to the tied array method.  This behaviour
       is now optional.  If the tied array class contains a package variable named $NEGATIVE_INDICES which
       is set to a true value, negative values will be passed to "FETCH", "STORE", "EXISTS", and "DELETE"
       unchanged.

       <b>local</b> <b>${$x}</b>

       The syntaxes

               local ${$x}
               local @{$x}
               local %{$x}

       now do localise variables, given that the $x is a valid variable name.

       <b>Unicode</b> <b>Character</b> <b>Database</b> <b>4.0.0</b>

       The copy of the Unicode Character Database included in Perl 5.8 has been updated to 4.0.0 from 3.2.0.
       This means for example that the Unicode character properties are as in Unicode 4.0.0.

       <b>Deprecation</b> <b>Warnings</b>

       There is one new feature deprecation.  Perl 5.8.0 forgot to add some deprecation warnings, these
       warnings have now been added.  Finally, a reminder of an impending feature removal.

       <u>(Reminder)</u> <u>Pseudo-hashes</u> <u>are</u> <u>deprecated</u> <u>(really)</u>

       Pseudo-hashes were deprecated in Perl 5.8.0 and will be removed in Perl 5.10.0, see perl58delta for
       details.  Each attempt to access pseudo-hashes will trigger the warning "Pseudo-hashes are depre-<font color="#ffffff" class="whiteout">cated".&nbsp;deprecated".</font>
       cated".  If you really want to continue using pseudo-hashes but not to see the deprecation warnings,
       use:

           no warnings 'deprecated';

       Or you can continue to use the fields pragma, but please don't expect the data structures to be pseu-<font color="#ffffff" class="whiteout">dohashes&nbsp;pseudohashes</font>
       dohashes any more.

       <u>(Reminder)</u> <u>5.005-style</u> <u>threads</u> <u>are</u> <u>deprecated</u> <u>(really)</u>

       5.005-style threads (activated by "use Thread;") were deprecated in Perl 5.8.0 and will be removed
       after Perl 5.8, see perl58delta for details.  Each 5.005-style thread creation will trigger the warn-<font color="#ffffff" class="whiteout">ing&nbsp;warning</font>
       ing "5.005 threads are deprecated".  If you really want to continue using the 5.005 threads but not
       to see the deprecation warnings, use:

           no warnings 'deprecated';

       <u>(Reminder)</u> <u>The</u> <u>$*</u> <u>variable</u> <u>is</u> <u>deprecated</u> <u>(really)</u>

       The $* variable controlling multi-line matching has been deprecated and will be removed after 5.8.
       The variable has been deprecated for a long time, and a deprecation warning "Use of $* is deprecated"
       is given, now the variable will just finally be removed.  The functionality has been supplanted by
       the "/s" and "/m" modifiers on pattern matching.  If you really want to continue using the $*-vari-<font color="#ffffff" class="whiteout">able&nbsp;$*-variable</font>
       able but not to see the deprecation warnings, use:

           no warnings 'deprecated';

       <b>Miscellaneous</b> <b>Enhancements</b>

       "map" in void context is no longer expensive. "map" is now context aware, and will not construct a
       list if called in void context.

       If a socket gets closed by the server while printing to it, the client now gets a SIGPIPE.  While
       this new feature was not planned, it fell naturally out of PerlIO changes, and is to be considered an
       accidental feature.

       PerlIO::get_layers(FH) returns the names of the PerlIO layers active on a filehandle.

       PerlIO::via layers can now have an optional UTF8 method to indicate whether the layer wants to
       "auto-:utf8" the stream.

       <u>utf8::is</u><b>_</b><u>utf8()</u> has been added as a quick way to test whether a scalar is encoded internally in UTF-8
       (Unicode).

<b>Modules</b> <b>and</b> <b>Pragmata</b>
       <b>Updated</b> <b>Modules</b> <b>And</b> <b>Pragmata</b>

       The following modules and pragmata have been updated since Perl 5.8.0:

       base
       B::Bytecode
           In much better shape than it used to be.  Still far from perfect, but maybe worth a try.

       B::Concise
       B::Deparse
       Benchmark
           An optional feature, ":hireswallclock", now allows for high resolution wall clock times (uses
           Time::HiRes).

       ByteLoader
           See B::Bytecode.

       bytes
           Now has bytes::substr.

       CGI
       charnames
           One can now have custom character name aliases.

       CPAN
           There is now a simple command line frontend to the CPAN.pm module called <u>cpan</u>.

       Data::Dumper
           A new option, Pair, allows choosing the separator between hash keys and values.

       DB_File
       Devel::PPPort
       Digest::MD5
       Encode
           Significant updates on the encoding pragma functionality (tr/// and the DATA filehandle, for-<font color="#ffffff" class="whiteout">mats).&nbsp;formats).</font>
           mats).

           If a filehandle has been marked as to have an encoding, unmappable characters are detected
           already during input, not later (when the corrupted data is being used).

           The ISO 8859-6 conversion table has been corrected (the 0x30..0x39 erroneously mapped to
           U+0660..U+0669, instead of U+0030..U+0039).  The GSM 03.38 conversion did not handle escape
           sequences correctly.  The UTF-7 encoding has been added (making Encode feature-complete with Uni-<font color="#ffffff" class="whiteout">code::String).&nbsp;Unicode::String).</font>
           code::String).

       fields
       libnet
       Math::BigInt
           A lot of bugs have been fixed since v1.60, the version included in Perl v5.8.0. Especially note-<font color="#ffffff" class="whiteout">worthy&nbsp;noteworthy</font>
           worthy are the bug in Calc that caused div and mod to fail for some large values, and the fixes
           to the handling of bad inputs.

           Some new features were added, e.g. the <u>broot()</u> method, you can now pass parameters to <u>config()</u> to
           change some settings at runtime, and it is now possible to trap the creation of NaN and infinity.

           As usual, some optimizations took place and made the math overall a tad faster. In some cases,
           quite a lot faster, actually. Especially alternative libraries like Math::BigInt::GMP benefit
           from this. In addition, a lot of the quite clunky routines like <u>fsqrt()</u> and <u>flog()</u> are now much
           much faster.

       MIME::Base64
       NEXT
           Diamond inheritance now works.

       Net::Ping
       PerlIO::scalar
           Reading from non-string scalars (like the special variables, see perlvar) now works.

       podlators
       Pod::LaTeX
       PodParsers
       Pod::Perldoc
           Complete rewrite.  As a side-effect, no longer refuses to startup when run by root.

       Scalar::Util
           New utilities: refaddr, isvstring, looks_like_number, set_prototype.

       Storable
           Can now store code references (via B::Deparse, so not foolproof).

       strict
           Earlier versions of the strict pragma did not check the parameters implicitly passed to its
           "import" (use) and "unimport" (no) routine.  This caused the false idiom such as:

                   use strict qw(@ISA);
                   @ISA = qw(Foo);

           This however (probably) raised the false expectation that the strict refs, vars and subs were
           being enforced (and that @ISA was somehow "declared").  But the strict refs, vars, and subs are
           <b>not</b> enforced when using this false idiom.

           Starting from Perl 5.8.1, the above <b>will</b> cause an error to be raised.  This may cause programs
           which used to execute seemingly correctly without warnings and errors to fail when run under
           5.8.1.  This happens because

                   use strict qw(@ISA);

           will now fail with the error:

                   Unknown 'strict' <!-- a -->tag(s)<!-- /a --> '@ISA'

           The remedy to this problem is to replace this code with the correct idiom:

                   use strict;
                   use vars qw(@ISA);
                   @ISA = qw(Foo);

       Term::ANSIcolor
       Test::Harness
           Now much more picky about extra or missing output from test scripts.

       Test::More
       Test::Simple
       Text::Balanced
       Time::HiRes
           Use of <u>nanosleep()</u>, if available, allows mixing subsecond sleeps with alarms.

       threads
           Several fixes, for example for <u>join()</u> problems and memory leaks.  In some platforms (like Linux)
           that use glibc the minimum memory footprint of one ithread has been reduced by several hundred
           kilobytes.

       threads::shared
           Many memory leaks have been fixed.

       Unicode::Collate
       Unicode::Normalize
       Win32::GetFolderPath
       Win32::GetOSVersion
           Now returns extra information.

<b>Utility</b> <b>Changes</b>
       The "h2xs" utility now produces a more modern layout: <u>Foo-Bar/lib/Foo/Bar.pm</u> instead of
       <u>Foo/Bar/Bar.pm</u>.  Also, the boilerplate test is now called <u>t/Foo-Bar.t</u> instead of <u>t/1.t</u>.

       The Perl debugger (<u>lib/perl5db.pl</u>) has now been extensively documented and bugs found while document-<font color="#ffffff" class="whiteout">ing&nbsp;documenting</font>
       ing have been fixed.

       "perldoc" has been rewritten from scratch to be more robust and featureful.

       "perlcc -B" works now at least somewhat better, while "perlcc -c" is rather more broken.  (The Perl
       compiler suite as a whole continues to be experimental.)

<b>New</b> <b>Documentation</b>
       perl573delta has been added to list the differences between the (now quite obsolete) development
       releases 5.7.2 and 5.7.3.

       perl58delta has been added: it is the perldelta of 5.8.0, detailing the differences between 5.6.0 and
       5.8.0.

       perlartistic has been added: it is the Artistic License in pod format, making it easier for modules
       to refer to it.

       perlcheat has been added: it is a Perl cheat sheet.

       perlgpl has been added: it is the GNU General Public License in pod format, making it easier for mod-<font color="#ffffff" class="whiteout">ules&nbsp;modules</font>
       ules to refer to it.

       perlmacosx has been added to tell about the installation and use of Perl in Mac OS X.

       perlos400 has been added to tell about the installation and use of Perl in OS/400 PASE.

       perlreref has been added: it is a regular expressions quick reference.

<b>Installation</b> <b>and</b> <b>Configuration</b> <b>Improvements</b>
       The UNIX standard Perl location, <u>/usr/bin/perl</u>, is no longer overwritten by default if it exists.
       This change was very prudent because so many UNIX vendors already provide a <u>/usr/bin/perl</u>, but simul-<font color="#ffffff" class="whiteout">taneously&nbsp;simultaneously</font>
       taneously many system utilities may depend on that exact version of Perl, so better not to overwrite
       it.

       One can now specify installation directories for site and vendor man and HTML pages, and site and
       vendor scripts.  See <u>INSTALL</u>.

       One can now specify a destination directory for Perl installation by specifying the DESTDIR variable
       for "make install".  (This feature is slightly different from the previous "Configure -Dinstallpre-<font color="#ffffff" class="whiteout">fix=...".)&nbsp;-Dinstallprefix=...".)</font>
       fix=...".)  See <u>INSTALL</u>.

       gcc versions 3.x introduced a new warning that caused a lot of noise during Perl compilation: "gcc
       -Ialreadyknowndirectory (warning: changing search order)".  This warning has now been avoided by Con-<font color="#ffffff" class="whiteout">figure&nbsp;Configure</font>
       figure weeding out such directories before the compilation.

       One can now build subsets of Perl core modules by using the Configure flags "-Dnoextensions=..." and
       "-Donlyextensions=...", see <u>INSTALL</u>.

       <b>Platform-specific</b> <b>enhancements</b>

       In Cygwin Perl can now be built with threads ("Configure -Duseithreads").  This works with both Cyg-<font color="#ffffff" class="whiteout">win&nbsp;Cygwin</font>
       win 1.3.22 and Cygwin 1.5.3.

       In newer FreeBSD releases Perl 5.8.0 compilation failed because of trying to use <u>malloc.h</u>, which in
       FreeBSD is just a dummy file, and a fatal error to even try to use.  Now <u>malloc.h</u> is not used.

       Perl is now known to build also in Hitachi HI-UXMPP.

       Perl is now known to build again in LynxOS.

       Mac OS X now installs with Perl version number embedded in installation directory names for easier
       upgrading of user-compiled Perl, and the installation directories in general are more standard.  In
       other words, the default installation no longer breaks the Apple-provided Perl.  On the other hand,
       with "Configure -Dprefix=/usr" you can now really replace the Apple-supplied Perl (<b>please</b> <b>be</b> <b>care</b>-<font color="#ffffff" class="whiteout">ful).&nbsp;careful).</font>
       <b>ful</b>).

       Mac OS X now builds Perl statically by default.  This change was done mainly for faster startup
       times.  The Apple-provided Perl is still dynamically linked and shared, and you can enable the
       sharedness for your own Perl builds by "Configure -Duseshrplib".

       Perl has been ported to IBM's OS/400 PASE environment.  The best way to build a Perl for PASE is to
       use an AIX host as a cross-compilation environment.  See README.os400.

       Yet another cross-compilation option has been added: now Perl builds on OpenZaurus, an Linux distri-<font color="#ffffff" class="whiteout">bution&nbsp;distribution</font>
       bution based on Mandrake + Embedix for the Sharp Zaurus PDA.  See the Cross/README file.

       Tru64 when using gcc 3 drops the optimisation for <u>toke.c</u> to "-O2" because of gigantic memory use with
       the default "-O3".

       Tru64 can now build Perl with the newer Berkeley DBs.

       Building Perl on WinCE has been much enhanced, see <u>README.ce</u> and <u>README.perlce</u>.

<b>Selected</b> <b>Bug</b> <b>Fixes</b>
       <b>Closures,</b> <b>eval</b> <b>and</b> <b>lexicals</b>

       There have been many fixes in the area of anonymous subs, lexicals and closures.  Although this means
       that Perl is now more "correct", it is possible that some existing code will break that happens to
       rely on the faulty behaviour.  In practice this is unlikely unless your code contains a very complex
       nesting of anonymous subs, evals and lexicals.

       <b>Generic</b> <b>fixes</b>

       If an input filehandle is marked ":utf8" and Perl sees illegal UTF-8 coming in when doing "&lt;FH&gt;", if
       warnings are enabled a warning is immediately given - instead of being silent about it and Perl being
       unhappy about the broken data later.  (The ":encoding(utf8)" layer also works the same way.)

       binmode(SOCKET, ":utf8") only worked on the input side, not on the output side of the socket.  Now it
       works both ways.

       For threaded Perls certain system database functions like <u>getpwent()</u> and <u>getgrent()</u> now grow their
       result buffer dynamically, instead of failing.  This means that at sites with lots of users and
       groups the functions no longer fail by returning only partial results.

       Perl 5.8.0 had accidentally broken the capability for users to define their own uppercase&lt;-&gt;lowercase
       Unicode mappings (as advertised by the Camel).  This feature has been fixed and is also documented
       better.

       In 5.8.0 this

               $some_unicode .= &lt;FH&gt;;

       didn't work correctly but instead corrupted the data.  This has now been fixed.

       Tied methods like FETCH etc. may now safely access tied values, i.e.  resulting in a recursive call
       to FETCH etc.  Remember to break the recursion, though.

       At startup Perl blocks the SIGFPE signal away since there isn't much Perl can do about it.  Previ-<font color="#ffffff" class="whiteout">ously&nbsp;Previously</font>
       ously this blocking was in effect also for programs executed from within Perl.  Now Perl restores the
       original SIGFPE handling routine, whatever it was, before running external programs.

       Linenumbers in Perl scripts may now be greater than 65536, or 2**16.  (Perl scripts have always been
       able to be larger than that, it's just that the linenumber for reported errors and warnings have
       "wrapped around".)  While scripts that large usually indicate a need to rethink your code a bit, such
       Perl scripts do exist, for example as results from generated code.  Now linenumbers can go all the
       way to 4294967296, or 2**32.

       <b>Platform-specific</b> <b>fixes</b>

       Linux

          Setting $0 works again (with certain limitations that Perl cannot do much about: see "$0" in per-<font color="#ffffff" class="whiteout">lvar)&nbsp;perlvar)</font>
           lvar)

       HP-UX

          Setting $0 now works.

       VMS

          Configuration now tests for the presence of "poll()", and IO::Poll now uses the vendor-supplied
           function if detected.

          A rare access violation at Perl start-up could occur if the Perl image was installed with privi-<font color="#ffffff" class="whiteout">leges&nbsp;privileges</font>
           leges or if there was an identifier with the subsystem attribute set in the process's rightslist.
           Either of these circumstances triggered tainting code that contained a pointer bug.  The faulty
           pointer arithmetic has been fixed.

          The length limit on values (not keys) in the %ENV hash has been raised from 255 bytes to 32640
           bytes (except when the PERL_ENV_TABLES setting overrides the default use of logical names for
           %ENV).  If it is necessary to access these long values from outside Perl, be aware that they are
           implemented using search list logical names that store the value in pieces, each 255-byte piece
           (up to 128 of them) being an element in the search list. When doing a lookup in %ENV from within
           Perl, the elements are combined into a single value.  The existing VMS-specific ability to access
           individual elements of a search list logical name via the $ENV{'foo;N'} syntax (where N is the
           search list index) is unimpaired.

          The piping implementation now uses local rather than global DCL symbols for inter-process commu-<font color="#ffffff" class="whiteout">nication.&nbsp;communication.</font>
           nication.

          File::Find could become confused when navigating to a relative directory whose name collided with
           a logical name.  This problem has been corrected by adding directory syntax to relative path
           names, thus preventing logical name translation.

       Win32

          A memory leak in the <u>fork()</u> emulation has been fixed.

          The return value of the <u>ioctl()</u> built-in function was accidentally broken in 5.8.0.  This has
           been corrected.

          The internal message loop executed by perl during blocking operations sometimes interfered with
           messages that were external to Perl.  This often resulted in blocking operations terminating pre-<font color="#ffffff" class="whiteout">maturely&nbsp;prematurely</font>
           maturely or returning incorrect results, when Perl was executing under environments that could
           generate Windows messages.  This has been corrected.

          Pipes and sockets are now automatically in binary mode.

          The four-argument form of <u>select()</u> did not preserve $! (errno) properly when there were errors in
           the underlying call.  This is now fixed.

          The "CR CR LF" problem of has been fixed, binmode(FH, ":crlf") is now effectively a no-op.

<b>New</b> <b>or</b> <b>Changed</b> <b>Diagnostics</b>
       All the warnings related to <u>pack()</u> and <u>unpack()</u> were made more informative and consistent.

       <b>Changed</b> <b>"A</b> <b>thread</b> <b>exited</b> <b>while</b> <b>%d</b> <b>threads</b> <b>were</b> <b>running"</b>

       The old version

           A thread exited while %d other threads were still running

       was misleading because the "other" included also the thread giving the warning.

       <b>Removed</b> <b>"Attempt</b> <b>to</b> <b>clear</b> <b>a</b> <b>restricted</b> <b>hash"</b>

       It is not illegal to clear a restricted hash, so the warning was removed.

       <b>New</b> <b>"Illegal</b> <b>declaration</b> <b>of</b> <b>anonymous</b> <b>subroutine"</b>

       You must specify the block of code for "sub".

       <b>Changed</b> <b>"Invalid</b> <b>range</b> <b>"%s"</b> <b>in</b> <b>transliteration</b> <b>operator"</b>

       The old version

           Invalid [] range "%s" in transliteration operator

       was simply wrong because there are no "[] ranges" in tr///.

       <b>New</b> <b>"Missing</b> <b>control</b> <b>char</b> <b>name</b> <b>in</b> <b>\c"</b>

       Self-explanatory.

       <b>New</b> <b>"Newline</b> <b>in</b> <b>left-justified</b> <b>string</b> <b>for</b> <b>%s"</b>

       The padding spaces would appear after the newline, which is probably not what you had in mind.

       <b>New</b> <b>"Possible</b> <b>precedence</b> <b>problem</b> <b>on</b> <b>bitwise</b> <b>%c</b> <b>operator"</b>

       If you think this

           $x &amp; $y == 0

       tests whether the bitwise AND of $x and $y is zero, you will like this warning.

       <b>New</b> <b>"Pseudo-hashes</b> <b>are</b> <b>deprecated"</b>

       This warning should have been already in 5.8.0, since they are.

       <b>New</b> <b>"</b><u>read()</u> <b>on</b> <b>%s</b> <u>filehandle</u> <u>%s"</u>

       You cannot <u>read()</u> (or <u>sysread()</u>) from a closed or unopened filehandle.

       <b>New</b> <b>"5.005</b> <b>threads</b> <b>are</b> <b>deprecated"</b>

       This warning should have been already in 5.8.0, since they are.

       <b>New</b> <b>"Tied</b> <b>variable</b> <b>freed</b> <b>while</b> <b>still</b> <b>in</b> <b>use"</b>

       Something pulled the plug on a live tied variable, Perl plays safe by bailing out.

       <b>New</b> <b>"To%s:</b> <b>illegal</b> <b>mapping</b> <b>'%s'"</b>

       An illegal user-defined Unicode casemapping was specified.

       <b>New</b> <b>"Use</b> <b>of</b> <b>freed</b> <b>value</b> <b>in</b> <b>iteration"</b>

       Something modified the values being iterated over.  This is not good.

<b>Changed</b> <b>Internals</b>
       These news matter to you only if you either write XS code or like to know about or hack Perl inter-<font color="#ffffff" class="whiteout">nals&nbsp;internals</font>
       nals (using Devel::Peek or any of the "B::" modules counts), or like to run Perl with the "-D"
       option.

       The embedding examples of perlembed have been reviewed to be uptodate and consistent: for example,
       the correct use of <u>PERL</u><b>_</b><u>SYS</u><b>_</b><u>INIT3()</u> and <u>PERL</u><b>_</b><u>SYS</u><b>_</b><u>TERM()</u>.

       Extensive reworking of the pad code (the code responsible for lexical variables) has been conducted
       by Dave Mitchell.

       Extensive work on the v-strings by John Peacock.

       UTF-8 length and position cache: to speed up the handling of Unicode (UTF-8) scalars, a cache was
       introduced.  Potential problems exist if an extension bypasses the official APIs and directly modi-<font color="#ffffff" class="whiteout">fies&nbsp;modifies</font>
       fies the PV of an SV: the UTF-8 cache does not get cleared as it should.

       APIs obsoleted in Perl 5.8.0, like sv_2pv, sv_catpvn, sv_catsv, sv_setsv, are again available.

       Certain Perl core C APIs like cxinc and regatom are no longer available at all to code outside the
       Perl core of the Perl core extensions.  This is intentional.  They never should have been available
       with the shorter names, and if you application depends on them, you should (be ashamed and) contact
       perl5-porters to discuss what are the proper APIs.

       Certain Perl core C APIs like "Perl_list" are no longer available without their "Perl_" prefix.  If
       your XS module stops working because some functions cannot be found, in many cases a simple fix is to
       add the "Perl_" prefix to the function and the thread context "aTHX_" as the first argument of the
       function call.  This is also how it should always have been done: letting the Perl_-less forms to
       leak from the core was an accident.  For cleaner embedding you can also force this for all APIs by
       defining at compile time the cpp define PERL_NO_SHORT_NAMES.

       <u>Perl</u><b>_</b><u>save</u><b>_</b><u>bool()</u> has been added.

       Regexp objects (those created with "qr") now have S-magic rather than R-magic.  This fixed regexps of
       the form /...(??{...;$x})/ to no longer ignore changes made to $x.  The S-magic avoids dropping the
       caching optimization and making (??{...}) constructs obscenely slow (and consequently useless).  See
       also "Magic Variables" in perlguts.  Regexp::Copy was affected by this change.

       The Perl internal debugging macros <u>DEBUG()</u> and <u>DEB()</u> have been renamed to <u>PERL</u><b>_</b><u>DEBUG()</u> and <u>PERL</u><b>_</b><u>DEB()</u>
       to avoid namespace conflicts.

       "-DL" removed (the leaktest had been broken and unsupported for years, use alternative debugging mal-<font color="#ffffff" class="whiteout">locs&nbsp;mallocs</font>
       locs or tools like valgrind and Purify).

       Verbose modifier "v" added for "-DXv" and "-Dsv", see perlrun.

<b>New</b> <b>Tests</b>
       In Perl 5.8.0 there were about 69000 separate tests in about 700 test files, in Perl 5.8.1 there are
       about 77000 separate tests in about 780 test files.  The exact numbers depend on the Perl configura-<font color="#ffffff" class="whiteout">tion&nbsp;configuration</font>
       tion and on the operating system platform.

<b>Known</b> <b>Problems</b>
       The hash randomisation mentioned in "Incompatible Changes" is definitely problematic: it will wake
       dormant bugs and shake out bad assumptions.

       If you want to use mod_perl 2.x with Perl 5.8.1, you will need mod_perl-1.99_10 or higher.  Earlier
       versions of mod_perl 2.x do not work with the randomised hashes.  (mod_perl 1.x works fine.)  You
       will also need Apache::Test 1.04 or higher.

       Many of the rarer platforms that worked 100% or pretty close to it with perl 5.8.0 have been left a
       little bit untended since their maintainers have been otherwise busy lately, and therefore there will
       be more failures on those platforms.  Such platforms include Mac OS Classic, IBM z/OS (and other
       EBCDIC platforms), and NetWare.  The most common Perl platforms (Unix and Unix-like, Microsoft plat-<font color="#ffffff" class="whiteout">forms,&nbsp;platforms,</font>
       forms, and VMS) have large enough testing and expert population that they are doing well.

       <b>Tied</b> <b>hashes</b> <b>in</b> <b>scalar</b> <b>context</b>

       Tied hashes do not currently return anything useful in scalar context, for example when used as
       boolean tests:

               if (%tied_hash) { ... }

       The current nonsensical behaviour is always to return false, regardless of whether the hash is empty
       or has elements.

       The root cause is that there is no interface for the implementors of tied hashes to implement the be-<font color="#ffffff" class="whiteout">haviour&nbsp;behaviour</font>
       haviour of a hash in scalar context.

       <b>Net::Ping</b> <b>450_service</b> <b>and</b> <b>510_ping_udp</b> <b>failures</b>

       The subtests 9 and 18 of lib/Net/Ping/t/450_service.t, and the subtest 2 of
       lib/Net/Ping/t/510_ping_udp.t might fail if you have an unusual networking setup.  For example in the
       latter case the test is trying to send a UDP ping to the IP address 127.0.0.1.

       <b>B::C</b>

       The C-generating compiler backend B::C (the frontend being "perlcc -c") is even more broken than it
       used to be because of the extensive lexical variable changes.  (The good news is that B::Bytecode and
       ByteLoader are better than they used to be.)

<b>Platform</b> <b>Specific</b> <b>Problems</b>
       <b>EBCDIC</b> <b>Platforms</b>

       IBM z/OS and other EBCDIC platforms continue to be problematic regarding Unicode support.  Many Uni-<font color="#ffffff" class="whiteout">code&nbsp;Unicode</font>
       code tests are skipped when they really should be fixed.

       <b>Cygwin</b> <b>1.5</b> <b>problems</b>

       In Cygwin 1.5 the <u>io/tell</u> and <u>op/sysio</u> tests have failures for some yet unknown reason.  In 1.5.5 the
       threads tests stress_cv, stress_re, and stress_string are failing unless the environment variable
       PERLIO is set to "perlio" (which makes also the io/tell failure go away).

       Perl 5.8.1 does build and work well with Cygwin 1.3: with (uname -a) "CYGWIN_NT-5.0 ...
       1.3.22(0.78/3/2) 2003-03-18 09:20 i686 ..."  a 100% "make test"  was achieved with "Configure -des
       -Duseithreads".

       <b>HP-UX:</b> <b>HP</b> <b>cc</b> <b>warnings</b> <b>about</b> <b>sendfile</b> <b>and</b> <b>sendpath</b>

       With certain HP C compiler releases (e.g. B.11.11.02) you will get many warnings like this (lines
       wrapped for easier reading):

         cc: "/usr/include/sys/socket.h", line 504: warning 562:
           Redeclaration of "sendfile" with a different storage class specifier:
             "sendfile" will have internal linkage.
         cc: "/usr/include/sys/socket.h", line 505: warning 562:
           Redeclaration of "sendpath" with a different storage class specifier:
             "sendpath" will have internal linkage.

       The warnings show up both during the build of Perl and during certain lib/ExtUtils tests that invoke
       the C compiler.  The warning, however, is not serious and can be ignored.

       <b>IRIX:</b> <b>t/uni/tr_7jis.t</b> <b>falsely</b> <b>failing</b>

       The test t/uni/tr_7jis.t is known to report failure under 'make test' or the test harness with cer-<font color="#ffffff" class="whiteout">tain&nbsp;certain</font>
       tain releases of IRIX (at least IRIX 6.5 and MIPSpro Compilers Version 7.3.1.1m), but if run manually
       the test fully passes.

       <b>Mac</b> <b>OS</b> <b>X:</b> <b>no</b> <b>usemymalloc</b>

       The Perl malloc ("-Dusemymalloc") does not work at all in Mac OS X.  This is not that serious,
       though, since the native malloc works just fine.

       <b>Tru64:</b> <b>No</b> <b>threaded</b> <b>builds</b> <b>with</b> <b>GNU</b> <b>cc</b> <b>(gcc)</b>

       In the latest Tru64 releases (e.g. v5.1B or later) gcc cannot be used to compile a threaded Perl
       (-Duseithreads) because the system "&lt;pthread.h&gt;" file doesn't know about gcc.

       <b>Win32:</b> <b>sysopen,</b> <b>sysread,</b> <b>syswrite</b>

       As of the 5.8.0 release, <u>sysopen()</u>/<u>sysread()</u>/<u>syswrite()</u> do not behave like they used to in 5.6.1 and
       earlier with respect to "text" mode.  These built-ins now always operate in "binary" mode (even if
       <u>sysopen()</u> was passed the O_TEXT flag, or if <u>binmode()</u> was used on the file handle).  Note that this
       issue should only make a difference for disk files, as sockets and pipes have always been in "binary"
       mode in the Windows port.  As this behavior is currently considered a bug, compatible behavior may be
       re-introduced in a future release.  Until then, the use of <u>sysopen()</u>, <u>sysread()</u> and <u>syswrite()</u> is not
       supported for "text" mode operations.

<b>Future</b> <b>Directions</b>
       The following things <b>might</b> happen in future.  The first publicly available releases having these
       characteristics will be the developer releases Perl 5.9.x, culminating in the Perl 5.10.0 release.
       These are our best guesses at the moment: we reserve the right to rethink.

          PerlIO will become The Default.  Currently (in Perl 5.8.x) the stdio library is still used if
           Perl thinks it can use certain tricks to make stdio go <b>really</b> fast.  For future releases our goal
           is to make PerlIO go even faster.

          A new feature called <u>assertions</u> will be available.  This means that one can have code called
           assertions sprinkled in the code: usually they are optimised away, but they can be enabled with
           the "-A" option.

          A new operator "//" (defined-or) will be available.  This means that one will be able to say

               $a // $b

           instead of

              defined $a ? $a : $b

           and

              $c //= $d;

           instead of

              $c = $d unless defined $c;

           The operator will have the same precedence and associativity as "||".  A source code patch
           against the Perl 5.8.1 sources will be available in CPAN as
           <u>authors/id/H/HM/HMBRAND/dor-5.8.1.diff</u>.

          "unpack()" will default to unpacking the $_.

          Various Copy-On-Write techniques will be investigated in hopes of speeding up Perl.

          CPANPLUS, Inline, and Module::Build will become core modules.

          The ability to write true lexically scoped pragmas will be introduced.

          Work will continue on the bytecompiler and byteloader.

          v-strings as they currently exist are scheduled to be deprecated.  The v-less form (1.2.3) will
           become a "version object" when used with "use", "require", and $VERSION.  $^V will also be a
           "version object" so the printf("%vd",...) construct will no longer be needed.  The v-ful version
           (v1.2.3) will become obsolete.  The equivalence of strings and v-strings (e.g.  that currently
           5.8.0 is equal to "\5\8\0") will go away.  <b>There</b> <b>may</b> <b>be</b> <b>no</b> <b>deprecation</b> <b>warning</b> <b>for</b> <b>v-strings</b>,
           though: it is quite hard to detect when v-strings are being used safely, and when they are not.

          5.005 Threads Will Be Removed

          The $* Variable Will Be Removed (it was deprecated a long time ago)

          Pseudohashes Will Be Removed

<b>Reporting</b> <b>Bugs</b>
       If you find what you think is a bug, you might check the articles recently posted to the
       comp.lang.perl.misc newsgroup and the perl bug database at <a href="http://bugs.perl.org/">http://bugs.perl.org/</a> .  There may also be
       information at <a href="http://www.perl.com/">http://www.perl.com/</a> , the Perl Home Page.

       If you believe you have an unreported bug, please run the <b>perlbug</b> program included with your release.
       Be sure to trim your bug down to a tiny but sufficient test case.  Your bug report, along with the
       output of "perl -V", will be sent off to perlbug@perl.org to be analysed by the Perl porting team.
       You can browse and search the Perl 5 bugs at <a href="http://bugs.perl.org/">http://bugs.perl.org/</a>

<b>SEE</b> <b>ALSO</b>
       The <u>Changes</u> file for exhaustive details on what changed.

       The <u>INSTALL</u> file for how to build Perl.

       The <u>README</u> file for general stuff.

       The <u>Artistic</u> and <u>Copying</u> files for copyright information.



perl v5.8.8                                      2006-01-07                                  PERL581DELTA(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/perl581delta.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/perl581delta.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/perl581delta.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> ATA_QRelease</TITLE></HEAD><BODY BGCOLOR="#ffffff"><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b>	<a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> <a href="../../devicemgrs.html">Device Managers and Drivers</a>	<b>&gt;</b> <a href="../ata.html" target="_top">ATA Devices</a>	<b>&gt;</b> ATA Device Software Guide		</font></td>	</tr>	</table><br><!-- end of path --><DIV><!-- top navigation --><P><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.2d.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.2f.html"><img src="images/next.gif" border="0"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=881"> </A>ATA_QRelease</H3><P CLASS="T0.Text0"><A NAME="pgfId=884"> </A>The <TT CLASS="cv">ATA_QRelease</TT> function releases the frozen I/O queue of the selected device. <A NAME="marker=882"> </A><A NAME="marker=883"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=885"> </A>When the ATA Manager detects an I/O error and the <TT CLASS="cv">QLockOnError</TT> bit of the parameter block is set for the request, the ATA Manager freezes the queue for the selected device. No pending or new requests are processed or receive status until the queue is released through the <TT CLASS="cv">ATA_QRelease</TT> function. Only those requests with  the <TT CLASS="cv">Immediate</TT> bit set in the <TT CLASS="cv">ATAFlags</TT> field of the <TT CLASS="cv">ataPBHdr</TT> parameter block are processed. Consequently, for the ATA I/O queue release command to be processed, it must be issued with the <TT CLASS="cv">Immediate</TT> bit set in the parameter block. An ATA I/O queue release command issued while the queue isn't frozen returns the <TT CLASS="cv">noErr</TT> status. </P><P CLASS="T1.Text1"><A NAME="pgfId=886"> </A>The manager function code for the <TT CLASS="cv">ATA_QRelease</TT> function is $04. </P><P CLASS="T1.Text1"><A NAME="pgfId=887"> </A>The parameter block associated with this function is defined below:</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=14264"> </A>struct&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ataQRelease&nbsp;&nbsp;&nbsp;&nbsp;/* ATA QRelease structure */<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;ataPBHdr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* ataPBHdr parameter block */<BR>&nbsp;&nbsp;&nbsp;&nbsp;UInt16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reserved[24];<BR>}&nbsp;&nbsp;&nbsp;ataQRelease;</CODE><h4>Field descriptions</h4><dl compact><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14266"> </A><TT CLASS="cv">ataPBHdr</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=895"> </A>See the definition of the <TT CLASS="cv"><A HREF="ATA.26.html#20961" CLASS="XRef">ataPBHdr</TT> structure</A>. </DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=14275"> </A><TT CLASS="cv">Reserved[24]</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=896"> </A>Reserved. All reserved fields should be set to 0.</DD></DL COMPACT><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=897"> </A>RESULT CODES</H5><P CLASS="T0.Text0"><A NAME="pgfId=901"> </A>See <A HREF="ATA.3a.html#37212" CLASS="XRef">Table&nbsp;A-1</A> for possible result codes returned by the ATA Manager.</P></DIV><HR>&#169 1999 Apple Computer, Inc. &#151; (Last Updated 9 Mar 99) <P><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.2d.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.2f.html"><img src="images/next.gif" border="0"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script></a><!-- end Show/Hide frames --></P><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A QTMTB54: How do I count the frames in an MPEG movie?</title><meta name="keywords" content="Mac OS 8 QuickTime GetMovieNextInterestingTime counting frames in an MPEG movie"><meta name="Description" content="Technical Q&amp;A QTMTB54: Q&amp;A discusses the movie toolbox functionGetMovieNextInterestingTime, explains how to employ it, alongwith the flag nextTimeStep, to count distinct frame timesin MPEG media tracks, among others, and describes tweeningeffects and how they can impaxt the neccesity for frame count."><meta name="categories" content="QuickTime Movie Toolbox"><meta name="week-posted" content="Aug 30, 1999 - Sep 3, 1999"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002024" title="How do I count the frames in an MPEG movie?"></a> <!-- white background --><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/QuickTime/index.html">QuickTime</a> &gt; <a href="../../technicalqas/QuickTime/idxMovieBasics-date.html">Movie Basics</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QTMTB54</div>
<div id="pageheadsub">How do I count the frames in an MPEG movie?</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER>			<!-- -->						<!-- Document Body --><table cellspacing="0" cellpadding="0" border="0" WIDTH="600"><tr><td align="left" scope="row"><hr width=500 align=center>        <p id=p2> Q: I'm using the Movie Toolbox function <CODE>GetMovieNextInterestingTime</CODE>           with QuickTime 6 to count the frames in an MPEG movie but it does not           seem to work. The first call to this function just returns a sample           time of zero and a duration which is equal to the duration of the movie.           Do I have to write special code for MPEG movie tracks? </p>        <p id=p4> A: <CODE>GetMovieNextInterestingTime</CODE> works for all kinds           of tracks. However, you should avoid using the <CODE>nextTimeMediaSample</CODE>           flag when searching for frames, because some media types store many           frames in a single media sample (for example, MPEG and Flash do this).           If you are searching for distinct frame times, pass the <CODE>nextTimeStep</CODE>           flag to <CODE>GetMovieNextInterestingTime</CODE>.</p>        <p id=p4><br>          Also, for MPEG media there is a bug (r. 3236091) in QuickTime 6 which           requires you to first task the movie before calling <CODE>GetMovieNextInterestingTime</CODE>           to count the frames in this manner. Here's a code snippet showing how           it's done:</p>        <p id=p4>&nbsp;</p>        <table border=0 cellpadding=4 width=550>          <tr>            <td bgcolor="#E6E6E6">               <pre>#include &lt;QuickTime/QuickTime.h&gt;long GetFrameCount (Movie theMovie) {      long        frameCount = 0;    TimeValue   curMovieTime;        if (theMovie == NULL) goto bail;            // due to a bug in QuickTime 6 we            // must task the movie first      MoviesTask( theMovie, 0 );        curMovieTime = 0;    while( curMovieTime &gt;= 0 )        {        GetMovieNextInterestingTime(theMovie,                                    nextTimeStep,                                    0, NULL,                                    curMovieTime,                                    fixed1,                                    &amp;curMovieTime,                                    NULL );        frameCount++;     }        // there's an extra time step at the end    // of the movie    frameCount--;bail:    return(frameCount);}</pre>            </td>          </tr>          <tr>            <td scope="row">               <p><b>Listing 1</b>. Counting the frames of an MPEG movie</p>            </td>          </tr>        </table>        <p id=p4> Be aware, also, that <B>tweening</B> can be used to describe           transformations that occur smoothly across a continuum of time rather           than at discrete moments. For example, a wipe effect between two video           sources will produce a distinct output image at every moment between           its start and end times. In such a situation, the question, &#147;How           many frames are there?&#148; isn't very helpful, since the honest answer           is: &#147;As many as you'd like.&#148;</p><!-- begin_date --><H4 ALIGN=center>[May 02, 2003]</H4><!-- end_date --></td></tr></table></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qtmtb/qtmtb54.html%3Fid%3DDTS10002024-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qtmtb/qtmtb54.html%3Fid%3DDTS10002024-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qtmtb/qtmtb54.html%3Fid%3DDTS10002024-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
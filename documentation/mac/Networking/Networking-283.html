<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of Ethernet, Token Ring, and FDDI(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING283></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-282.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-284.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-257.html"><B>Chapter 11 - Ethernet, Token Ring, and Fiber Distributed Data Interface</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING283-0></A>
<H1>Summary of Ethernet, Token Ring, and FDDI</H1>
<A NAME=HEADING283-1></A>
<H2>Pascal Summary</H2>
<A NAME=HEADING283-2></A>
<H3>Constants</H3>
<PRE>
CONST
{.ENET, .TOKN, and .FDDI driver values}
   catNetwork              = 4;           {spCategory for Ethernet NB card}
   typeEtherNet            = 1;           {spCType for Ethernet NB card}
   typeTokenRing           = 2;           {spCType for token ring NB card}
   typeFDDI                = 11;          {spCType for FDDI NB card}
{.ENET driver routine selectors}
   ENetSetGeneral          = 253;         {set to general transmission mode}
   ENetGetInfo             = 252;         {get info}
   ENetRdCancel            = 251;         {cancel read}
   ENetRead                = 250;         {read}
   ENetWrite               = 249;         {write}
   ENetDetachPH            = 248;         {detach protocol handler}
   ENetAttachPH            = 247;         {attach protocol handler}
   ENetAddMulti            = 246;         {add a multicast address}
   ENetDelMulti            = 245;         {delete a multicast address}
</PRE>
<A NAME=HEADING283-5></A>
<H3>Data Structures</H3>
<PRE>
TYPE EParamBlock = 
      PACKED RECORD
         qLink:         QElemPtr;         {reserved}
         qType:         Integer;          {reserved}
         ioTrap:        Integer;          {reserved}
         ioCmdAddr:     Ptr;              {reserved}
         ioCompletion:  ProcPtr;          {completion routine}
         ioResult:      OSErr;            {result code}
         ioNamePtr:     StringPtr;        {reserved}
         ioVRefNum:     Integer;          {reserved}
         ioRefNum:      Integer;          {driver reference number}
         csCode:        Integer;          {primary command code}
      CASE Integer OF
         ENetWrite, ENetAttachPH, ENetDetachPH, ENetRead, ENetRdCancel,
            ENetGetInfo, ENetSetGeneral:
            (
            eProtType:     Integer;       {Ethernet protocol type}
            ePointer:      Ptr;           {pointer; use depends on }
                                          { function}
            eBuffSize:     Integer;       {buffer size}
            eDataSize:     Integer;       {number of bytes read}
            );
         ENetAddMulti,ENetDelMulti:
            (
            eMultiAddr:    ARRAY[0..5] OF Char; {multicast address}
            )
         END;

EParamBlkPtr = ^EParamBlock;
</PRE>
<A NAME=HEADING283-8></A>
<H3>Routines</H3>
<A NAME=HEADING283-9></A>
<H4>Attaching and Detaching an Ethernet Protocol Handler</H4>
<PRE>
FUNCTION EAttachPH(thePBptr: EParamBlkPtr; async: Boolean): OSErr;
FUNCTION EDetachPH(thePBptr: EParamBlkPtr; async: Boolean): OSErr;
</PRE>
<A NAME=HEADING283-12></A>
<H4>Writing and Reading Ethernet Packets</H4>
<PRE>
FUNCTION EWrite(thePBptr: EParamBlkPtr; async: Boolean): OSErr;
FUNCTION ERead(thePBptr: EParamBlkPtr; async: Boolean):OSErr;
FUNCTION ERdCancel (thePBptr: EParamBlkPtr; async: Boolean): OSErr;
</PRE>
<A NAME=HEADING283-16></A>
<H4>Obtaining Information About the Ethernet Driver and Switching Its Mode </H4>
<PRE>
FUNCTION EGetInfo(thePBptr: EParamBlkPtr; async: Boolean): OSErr;
FUNCTION ESetGeneral(thePBptr: EParamBlkPtr; async: Boolean): OSErr;
</PRE>
<A NAME=HEADING283-19></A>
<H4>Adding and Removing Ethernet Multicast Addresses</H4>
<PRE>
FUNCTION EAddMulti(thePBptr: EParamBlkPtr; async: Boolean): OSErr;
FUNCTION EDelMulti(thePBptr: EParamBlkPtr; async: Boolean): OSErr;
</PRE>
<A NAME=HEADING283-22></A>
<H2>C Summary</H2>
<A NAME=HEADING283-23></A>
<H3>Constants</H3>
<PRE>
enum {
   ENetSetGeneral    = 253,         /*set &quot;general&quot; mode*/
   ENetGetInfo       = 252,         /*get info*/
   ENetRdCancel      = 251,         /*cancel read*/
   ENetRead          = 250,         /*read*/
   ENetWrite         = 249,         /*write*/
   ENetDetachPH      = 248,         /*detach protocol handler*/
   ENetAttachPH      = 247,         /*attach protocol handler*/
   ENetAddMulti      = 246,         /*add a multicast address*/
   ENetDelMulti      = 245,         /*delete a multicast address*/
};
</PRE>
<A NAME=HEADING283-25></A>
<H3>Data Types</H3>
<PRE>
#define EParamHeader \
   QElem       *qLink;              /*reserved*/\
   short       qType;               /*reserved*/\
   short       ioTrap;              /*reserved*/\
   Ptr         ioCmdAddr;           /*reserved*/\
   ProcPtr     ioCompletion;        /*completion routine*/\
   OSErr       ioResult;            /*result code*/\
   StringPtr   ioNamePtr;           /*reserved*/\
   short       ioVRefNum;           /*reserved*/\
   short       ioRefNum;            /*driver reference number*/\
   short       csCode;              /*call command code*/

struct EParamMisc1 {
   EParamHeader                     /*general EParams*/
   short       eProtType;           /*Ethernet protocol type*/
   Ptr         ePointer;
   short       eBuffSize;           /*buffer size*/
   short       eDataSize;           /*number of bytes read*/
};
</PRE>
<DL>
<DT><B>Note</B>
<DD>The C interface file contains the following structure type definition, which is incorrect. A corrected version follows it.<EM></EM>   <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<PRE>
typedef struct EParamMisc1 EParamMisc1;

struct EParamMisc2 {
   EParamMisc1 EParms1;
   char  eMultiAddr[6];             /*multicast address*/
};
</PRE>
<DL>
<DT><B>Note</B>
<DD>The following structure type definition is a correction to the <BR>preceding structure that may exist in the interface file. You should declare the following struct in your application instead of relying <BR>on the interface file.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<PRE>
typedef struct {
      EParamHeader
      char eMultiAddr[5];           /*multicast address*/
}EParamMisc2;
typedef struct EParamMisc2 EParamMisc2;
union EParamBlock {
   EParamMisc1 EParms1;
   EParamMisc2 EParms2;
};
typedef union EParamBlock EParamBlock;
typedef EParamBlock *EParamBlkPtr;
</PRE>
<A NAME=HEADING283-35></A>
<H3>Routines</H3>
<A NAME=HEADING283-36></A>
<H4>Attaching and Detaching an Ethernet Protocol Handler</H4>
<PRE>
pascal OSErr EAttachPH(EParamBlkPtr thePBptr, Boolean async);
pascal OSErr EDetachPH(EParamBlkPtr thePBptr, Boolean async); 
</PRE>
<A NAME=HEADING283-39></A>
<H4>Writing and Reading Ethernet Packets</H4>
<PRE>
pascal OSErr EWrite(EParamBlkPtr thePBptr, Boolean async);
pascal OSErr ERead(EParamBlkPtr thePBptr, Boolean async);
pascal OSErr ERdCancel(EParamBlkPtr thePBptr, Boolean async); 
</PRE>
<A NAME=HEADING283-43></A>
<H4>Obtaining Information About the Ethernet Driver and Switching Its Mode </H4>
<PRE>
pascal OSErr EGetInfo(EParamBlkPtr thePBptr, Boolean async);
pascal OSErr ESetGeneral(EParamBlkPtr thePBptr, Boolean async);
</PRE>
<A NAME=HEADING283-46></A>
<H4>Adding and Removing Ethernet Multicast Addresses</H4>
<PRE>
pascal OSErr EAddMulti(EParamBlkPtr thePBptr, Boolean async);
pascal OSErr EDelMulti(EParamBlkPtr thePBptr, Boolean async); 
</PRE>
<A NAME=HEADING283-49></A>
<H2>Assembly-Language Summary</H2>
<A NAME=HEADING283-50></A>
<H3>Constants</H3>
<PRE>
ENetSetGeneral    EQU     253       ;set to general transmission mode
ENetGetInfo       EQU     252       ;get info
ENetRdCancel      EQU     251       ;cancel read
ENetRead          EQU     250       ;read
ENetWrite         EQU     249       ;write
ENetDetachPH      EQU     248       ;detach protocol handler
ENetAttachPH      EQU     247       ;attach protocol handler
ENetAddMulti      EQU     246       ;add a multicast address
ENetDelMulti      EQU     245       ;delete a multicast address
</PRE>
<A NAME=HEADING283-52></A>
<H3>Data Structures</H3>
<A NAME=HEADING283-53></A>
<H4>EParamBlock Parameter Block
<TABLE BORDER="0" CELLPADDING=3><TD>16<TD>ioResult<TD>word<TD>result code<TR>
<TD>26<TD>csCode<TD>word<TD>routine selected<TR>
<TD>28<TD>eMultiAddr<TD>6 bytes<TD>multicast address<TR>
<TD>28<TD>eProtType<TD>word<TD>Ethernet protocol type<TR>
<TD>30<TD>ePointer<TD>long<TD>pointer<TR>
<TD>34<TD>eBuffSize<TD>word<TD>size of buffer<TR>
<TD>36<TD>eDataSize<TD>word<TD>number of bytes read</TABLE>
 </H4>
<A NAME=HEADING283-54></A>
<H2>Result Codes
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>eMultiErr<TD>-91<TD>Address not found<TR>
<TD>eLenErr<TD>-92<TD>Packet too large or first entry of the write-data structure did not contain the full 14-byte header<TR>
<TD>LAPProtErr<TD>-94<TD>No protocol handler is attached<TR>
<TD>excessCollsns<TD>-95<TD>Hardware error<TR>
<TD>memFullErr<TD>-108<TD>Insufficient memory in heap<TR>
<TD>cbNotFound<TD>-1102<TD><CODE>ERead</CODE> not active<TR>
<TD>reqAborted<TD>-1105<TD><CODE>ERdCancel</CODE> or <CODE>EDetachPH</CODE> function called<TR>
<TD>buf2SmallErr<TD>-3101<TD>Packet too large for buffer; partial data returned</TABLE>
</H2>
 <P>
</BLOCKQUOTE><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-282.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-284.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

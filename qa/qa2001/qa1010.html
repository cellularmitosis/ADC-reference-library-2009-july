<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A QA1010: SyncCGContextOriginWithPort</title><meta name="keywords" content="SyncCGContextOriginWithPort, Core Graphics, QuickDraw, CGrafPort,CGContext"><meta name="Description" content="Technical Q&amp;A QA1010: This Q&amp;A describes how to use SyncCGContextOriginWithPort."><meta name="categories" content="Core Graphics and QuickDraw"><meta name="week-posted" content="Apr 9, 2001 - Apr 13, 2001"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001566" title="SyncCGContextOriginWithPort"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/GraphicsImaging/index.html">Graphics & Imaging</a> &gt; <a href="../../technicalqas/GraphicsImaging/idxQuartz-date.html">Quartz</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QA1010</div>
<div id="pageheadsub">SyncCGContextOriginWithPort</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600> <TR> <td align="left"><!-- begin_content --><hr width=500 align=center>                  <P id=p2>Q:      What is <CODE>SyncCGContextOriginWithPort</CODE> and why do I need it?</p>                  <P id=p4>A:      The Core Graphics coordinate space is defined differently      than that of QuickDraw.  In QuickDraw, the origin is at the      upper left of the <CODE>CGrafPort</CODE> and the positive y-axis points      down.  Core Graphics, on the other hand, defines the origin      to be the bottom left corner of the <CODE>CGContext</CODE> and the positive      y-axis points up.</p><P id=p4>      <CODE>SyncCGContextOriginWithPort</CODE> is a convenience function that      moves the <CODE>CGContext</CODE> origin from the bottom left to adjust for any      calls to <CODE>SetOrigin</CODE> for the port.</p>                  <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>//  Create the CGContext from a given QD portCGContextRef context;Rect portRect;OSStatus err = CreateCGContextForPort( qdPort, &amp;context );if ( noErr == err ){    //  Adjust for any SetOrigin calls on qdPort    SyncCGContextOriginWithPort( context, qdPort );    //  Move the CG origin to the upper left of the port    GetPortBounds( qdPort, &amp;portRect );    CGContextTranslateCTM( context, 0, (float)(portRect.bottom - portRect.top) );    //  Flip the y axis so that positive Y points down    //    Note that this will cause text drawn with Core Graphics    //  to draw upside down    CGContextScaleCTM( context, 1.0, -1.0 );    //  The CG coordinate space now matches the QD coordinate space    //  ...    //  Do your CG drawing here    //  ...    //  Release the context now that we are done with it    CGContextRelease( context );}//  Back to normal QuickDraw drawing</pre></TD></TR><TR><td align="left"><P><B>Listing 1</B>.       Setting up the Core Graphics Context</P></TD></TR></TABLE></CENTER><BR><BR><P id=p4>      Note that <CODE>SyncCGContextOriginWithPort</CODE> does not flip the y-axis      for you or move the origin from the bottom left to the upper left.      Therefore you either need to account for the difference      in your drawing code or call the code in Listing 1 to move the origin      and flip the y-axis for all subsequent Core Graphics drawing operations      on that context.</p>          <hr width=500 align=center> <!-- begin_date --><H4 ALIGN=center>[Apr 11 2001]</H4><!-- end_date --></TD> </TR> </TABLE></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2001/qa1010.html%3Fid%3DDTS10001566-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2001/qa1010.html%3Fid%3DDTS10001566-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2001/qa1010.html%3Fid%3DDTS10001566-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
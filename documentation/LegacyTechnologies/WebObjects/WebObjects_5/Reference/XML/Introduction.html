<html>	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="GoLive CyberStudio 3">		<title>Introduction</title>	</head>	<body bgcolor="white">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html" target="_top">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path -->		<a href="XMLTOC.html"><img src="Art/up.gif" border="0" alt="Table of Contents"></a> <br>		<h1><font color="#000066">XML </font></h1>		<p><br>		<blockquote>			<b>Package: </b>com.webobjects.appserver.xml</blockquote>		<p>		<hr size="4">		<br>		<h2>Introduction</h2>		<p>The XML framework consists of two main classes-WOXMLCoder and WOXMLDecoder-which can encode and decode objects as XML. These classes can be used to archive and unarchive object data, or to parse and/or generate XML obtained from or destined for an external source (such as the World Wide Web). When working with such &quot;foreign&quot; XML, you describe the XML elements and properties and their mapping to objects in an XML-format &quot;mapping model&quot; that you can create with either a text editor or an XML editor.</p>		<p>The mapping model provides greater control over the decoding process and is typically used when you are encoding and decoding XML that is destined for, or originates from, an external source. When the WOXMLCoder and WOXMLDecoder are used as an archiving mechanism, the mapping model is usually not necessary. See <a href="#BAAJGIAH">&quot;The Format of the Mapping Model&quot; (page 4)</a> for more information on the contents and structure of the mapping model.</p>		<p>When archiving and unarchiving custom objects using the WOXMLCoder and WOXMLDecoder without a mapping model, your custom classes need to:</p>		<ul>			<li>implement the single method declared in the WOXMLCoding interface (your implementation of this method is where you encode the custom class's instance variables) 			<li>implement the single-argument constructor described in the WOXMLDecoder class introduction 		</ul>		<p>You don't need to do the above if the object you are archiving and unarchiving-as well as any encapsulated objects-are an instance of String, Number (or a subclass, providing that the subclass doesn't add any new instance variables), NSArray, NSDictionary, NSDate, NSData, or EOEnterpriseObject (or a subclass, providing that all instance variables are either attributes or relationships). You also don't need to implement the above if you are working with a mapping model.</p>		<p>Exceptions raised by the underlying SAX parser are, for simplicity's sake, wrapped in a WOXMLException object, greatly reducing the number of exceptions your code needs to catch.</p>		<p><br>		<a name="BAAJGIAH"></a>		<h2>The Format of the Mapping Model</h2>		<p>The mapping model is a text file-created manually with a text editor or an XML editor-that consists of one or more entity elements, each of which can enclose zero or more property elements, all enclosed within a single model element.</p>		<p>The following is a simple mapping model:</p>		<pre><blockquote>&lt;model&gt;    &lt;entity name=&quot;Command&quot; xmlTag=&quot;command&quot;&gt;        &lt;property name=&quot;qty&quot; xmlTag=&quot;quantity&quot; attribute=&quot;YES&quot;/&gt;        &lt;property name=&quot;movie&quot; xmlTag=&quot;movie&quot;/&gt;        &lt;property name=&quot;customer&quot; xmlTag=&quot;customer&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;MyMovie&quot; xmlTag=&quot;movie&quot;&gt;        &lt;property name=&quot;title&quot; xmlTag=&quot;name&quot; attribute=&quot;YES&quot;/&gt;        &lt;property name=&quot;dateReleased&quot; xmlTag=&quot;date&quot;&gt;        &lt;property name=&quot;roles&quot; xmlTag=&quot;role&quot;&gt;        &lt;property name=&quot;category&quot; xmlTag=&quot;cat&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;com.webobjects.eocontrol.EOGenericRecord&quot; xmlTag=&quot;role&quot;&gt;        &lt;property name=&quot;roleName&quot; xmlTag=&quot;name&quot; attribute=&quot;YES&quot;/&gt;    &lt;/entity&gt;&lt;/model&gt;</blockquote></pre>		<p><br>		<p>When creating a mapping model, be aware that mappings must be unique for a given property when decoding (that is, you cannot have two mappings for the same property). The same applies for XML tags when encoding: you cannot have two mappings for the same XML tag.</p>		<p><br>		<h3>The &quot;model&quot; Tag</h3>		<p>The model tag has no attributes. </p>		<p><br>		<h3>The &quot;entity&quot; Tag</h3>		<p>The entity tag has two required attributes and a number of optional ones:</p>		<p>name=<em>property</em> (required) The name of the property on the key-value coding side (the name of the object, attribute, or dictionary key to which the XML data is to be mapped). xmlTag=<em>tag</em> (required) The XML tag. unmappedTagsKey=<em>key</em> (optional) The name of the property on the key-value coding side to be used when, while parsing the XML for the entity, a tag is encountered for which there is no specified mapping in the mapping model. ignoreUnmappedTags=<code>&quot;YES&quot; | &quot;NO&quot;</code> (optional) &quot;YES&quot; causes a WOXMLException to be thrown if <code>unmappedTagsKey</code> isn't specified and, while parsing the XML for the entity, a tag is encountered for which there is no specified mapping in the mapping model. Note that an exception isn't thrown if the object being decoded is an NSDictionary. contentsKey=<em>key</em> 		<p>(optional) The property name to be used for text enclosed by the XML element being parsed. For example, if the mapping model contained the following:</p>		<pre><blockquote>...&lt;entity name=&quot;com.webobjects.foundation.NSMutableDictionary&quot; xmlTag=&quot;text&quot; contentsKey=&quot;contents&quot;/ &gt;...</blockquote></pre>		<p><br>		<p>And if the following was encountered while parsing XML:</p>		<pre><blockquote>&lt;text&gt;Hello, &lt;b&gt;World!&lt;/b&gt;&lt;/text&gt;</blockquote></pre>		<p><br>		<p>An NSMutableDictionary object would be created with a single key-value pair: the key &quot;contents&quot; would have as its value an array containing two elements: the string &quot;Hello, &quot; and a dictionary with a single key-value pair: the key &quot;b&quot; would have as its value the string &quot;World&quot;.</p>		<p><br>		<h3>The &quot;property&quot; Tag</h3>		<p>Within an entity element, you can have zero or more property elements. The property tag also has two required attributes and a number that are optional:</p>		<p>name=<em>property</em> (required) The name of the property on the key-value coding side (the name of the object, attribute, or dictionary key to which the XML data is to be mapped). xmlTag=<em>tag</em> (required) The XML tag. attribute=<code>&quot;YES&quot; | &quot;NO&quot;</code> 		<p>(optional) Used during encoding, &quot;YES&quot; causes a given property &quot;a&quot; to be encoded like:</p>		<pre><blockquote>&lt;foo a=&quot;someValue&quot;&gt; .. &lt;/foo&gt;</blockquote></pre>		<p><br>		<p>instead of:</p>		<pre><blockquote>&lt;foo&gt; &lt;a&gt;someValue&lt;/a&gt; .. &lt;/foo&gt;</blockquote></pre>		<p><br>		forceList=<code>&quot;YES&quot; | &quot;NO&quot;</code> 		<p>(optional) Used for decoding only. &quot;YES&quot; causes a single enclosed element to be decoded as an NSMutableArray with a single object of the appropriate type.</p>		<p>Decoding an XML structure like the following:</p>		<pre><blockquote>&lt;foo&gt;    &lt;a&gt;value1&lt;/a&gt;    &lt;a&gt;value2&lt;/a&gt;&lt;/foo&gt;</blockquote></pre>		<p><br>		<p>results in a key-value coding call with key <code>&quot;foo&quot;</code> and value an NSMutableArray containing the two &quot;&lt;a&gt;&quot; elements. When there is only a single enclosed element, as in this example:</p>		<pre><blockquote>&lt;foo&gt;    &lt;a&gt;some Value&lt;/a&gt;&lt;/foo&gt;</blockquote></pre>		<p><br>		<p>decoding will result in a key-value coding call with key <code>&quot;foo&quot;</code> and value an object of type &quot;a&quot;. <code>forceList</code> alters this default behavior, causing the value in this instance to be an NSMutableArray containing a single object of type &quot;a&quot;.</p>		<p>codeBasedOn=<code>&quot;TAG&quot;</code> (optional) The WOXMLCoder normally uses the value of the property's name attribute as the key during key-value coding. This is the desired behavior in most situations since the name attribute typically indicates the name of an instance variable in a custom class. When working with NSDictionary objects, however, you may instead want to use the value of the xmlTag attribute as the key. To do this, specify codeBasedOn=<code>&quot;TAG&quot;</code> in the property's list of attributes. reportEmptyValues=<code>&quot;YES&quot; | &quot;NO&quot;</code> (optional) When an empty element is encountered while decoding XML (for instance, <code>&lt;myElement&gt;&lt;/myElement&gt;</code>), the WOXMLDecoder normally creates an empty NSDictionary object. Setting reportEmptyValues to &quot;NO&quot; prevents this empty object from being created. outputTags=<code>&quot;class&quot;</code> | <code>&quot;property&quot;</code> | <code>&quot;both&quot;</code> | <code>&quot;neither&quot;</code> 		<p>(optional) Used when encoding, this attribute specifies which XML tag specified in the mapping model should be output for the given property. &quot;property&quot;, the default, specifies that the property's XML tag should be output. &quot;class&quot; specifies that the XML tag associated with the property's enclosing class should be output instead. &quot;both&quot; indicates that both the property and the class tags should be output, and &quot;neither&quot; indicates that neither XML tag should be placed in the XML.</p>		<p>To illustrate the use of the outputTags attribute, the following mapping model could be used to produce HTML tags from an NSMutableDictionary object:</p>		<pre><blockquote>&lt;model&gt;    &lt;entity name=&quot;com.webobjects.foundation.NSMutableDictionary&quot;  xmlTag=&quot;text&quot;&gt;        &lt;property name=&quot;p&quot; xmlTag=&quot;ignore&quot; outputTags=&quot;neither&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;Paragraph&quot;  xmlTag=&quot;p&quot;&gt;        &lt;property name=&quot;text.contents&quot; xmlTag=&quot;text&quot;  outputTags=&quot;class&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;ItemList&quot;  xmlTag=&quot;ul&quot;&gt;        &lt;property name=&quot;contents&quot; xmlTag=&quot;li&quot; outputTags=&quot;both&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;Item&quot;  xmlTag=&quot;item&quot;&gt;        &lt;property name=&quot;contents&quot; xmlTag=&quot;ignore&quot; outputTags=&quot;class&quot;/&gt;    &lt;/entity&gt;    &lt;entity name=&quot;LineBreak&quot;  xmlTag=&quot;br&quot;/&gt;    &lt;entity name=&quot;ExternalLink&quot;  xmlTag=&quot;a&quot;&gt;        &lt;property name=&quot;url&quot; xmlTag=&quot;href&quot; attribute=&quot;YES&quot;/&gt;                &lt;property name=&quot;anchorText&quot; xmlTag=&quot;ignore&quot; outputTags=&quot;neither&quot;/&gt;            &lt;/entity&gt;&lt;/model&gt;</blockquote></pre>		<p><br>		<p>&copy; 2001 Apple Computer, Inc. (Last Published April 15, 2001)</p>		<p><br>		<a href="XMLTOC.html"><img src="Art/up.gif" border="0" alt="Table of Contents"></a> <!-- start of footer -->		<!--#include virtual="/includes/framesetfooter" -->		<!-- end of footer -->	</body></html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note QD08: Old-Style Colors</title><meta name="keywords" content="Mac OS 8 Colors eight old style limitations reset foreground"><meta name="Description" content="Technical Note QD08: This Technical Note covers limitationsof the original Macintosh color model (eight-color) thatInside Macintosh Volume I, page I-173, QuickDraw, does notdocument. It includes the correct values for the constantsof each color, the bit definitions of each of the constants,and the color bit correlations for each color.">                                       <meta name="categories" content="QuickDraw"><meta name="week-posted" content="Sep 25, 1989 - Oct 6, 1989"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002721" title="Old-Style Colors"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxUserExperience-date.html">User Experience</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/UserExperience/index.html" target="_blank">Reference Library > User Experience</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note QD08</div>
<div id="pageheadsub">Old-Style Colors</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#Section2">Limitations</A><BR><BR><A HREF="#Section3">What Works</A><BR><BR><A HREF="#Section4">What Do Those Constants Mean Anyway?</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id="introtext">This Technical Note covers limitations of the original Macintosh color model (eight-color) that <i>Inside Macintosh</i> Volume I, page I-173, QuickDraw, does not document.   </p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1989]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><p>QuickDraw has always been able to deal with color, just on a very limitedbasis. Most applications have not made use of this feature, since ColorQuickDraw-based Macintosh computers come with a better color model. There are,however, a few nice features that come with the old-style color model. With theold-style colors, it is easy to print color on an ImageWriter with a colorribbon. Another advantage is that developers do not have to write special-casecode depending on whether or not a machine has Color QuickDraw.</p><p>Now that you are ready to convert to the old-style colors, there are a fewthings you should know about that do not work with old-style colors. This Notecovers the limitations of using old-style colors, as well as the best ways towork around these limitations.</p><a name="Section2"></a><P><A HREF="#top">Back to top</A></p><H2>Limitations</h2><p>The most obvious limitation is that of only eight colors: black, white, red,green, blue, cyan, yellow, and magenta. This limitation is a problem only ifyou want to produce a color-intensive application; if this describes yourapplication, then you need not read any further in this Note.</p><p>The next limitation is that off-screen buffers are not very useful. You candraw into off-screen buffers, but there is no way to get the colors back fromthe buffer. This leads into the next limitation, which is that<code>_CopyBits</code> cannot copy more than one color at a time.</p><p>When you call <code>_CopyBits</code> from an off-screen buffer to your window, youneed to set the forecolor to the color you want to copy before calling<code>_CopyBits</code> (for example, to copy a red object, call<code>_ForeColor(redColor)</code>). Now when you copy the object, you can copy onlyone color. If you copy different colored objects at one time, then you have aproblem. The result of a multicolored copy is that all objects copy in the samecolor, that of the foreground.</p><p>It is possible to work with an off-screen buffer and the old-style colors, butit requires a lot of extra work. Unless the objects are really complex, then itis probably easier to just draw the objects directly into your window.</p><p>One other limitation does exist. Consider the following code sample. One wouldassume that this sample would work at all times.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    SetPort (myPort);    savedFG := myPort^.fgColor;    ForeColor (redColor);            {or any other color}    {...drawing takes place here...}    ForeColor (savedFG);</pre>	</TD></TR></TABLE></CENTER><p>Surprise. It does not always work. The saved value for the <code>fgColor</code>field of the <code>grafPort</code> is not a classic QuickDraw color if the<code>grafPort</code> is actually a <code>cGrafPort</code>. If dealing with a<code>cGrafPort</code>, the <code>fgColor</code> field actually contains the foregroundcolor's entry in the color table, so the second call to <code>_ForeColor</code>really messes things up.</p><p>The proper way to set and reset the foreground color with classic QuickDraw's<code>_ForeColor</code> call is as follows:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    SetPort (myPort);    savedFG := myPort^.fgColor;    ForeColor (redColor);            {or any other color}    {...drawing takes place here...}    myPort^.fgColor := savedFG;      {Manually stuff the old fgColor back.}    If (32BQD = TRUE) Then           {32BQD is a flag that is made and set by}        PortChanged (myPort);        {the application; to set it, the application}                                     {needs to check _Gestalt for 32-Bit QuickDraw.}</pre>	</TD></TR></TABLE></CENTER><p>This Note also applies to the routine <code>_BackColor</code>.</p><a name="Section3"></a><P><A HREF="#top">Back to top</A></p><H2>What Works</h2><p>The easiest way to work with these limited colors is to use pictures. When youdraw the images, you should draw into a picture. Then when you want to draw theimages into your window or to a printer, call <code>_DrawPicture</code>. Pictureswork well with the old-style colors, and you don't need to worry about makingsure that the forecolor is current when you draw into your window.</p><p>Once you have the picture, you can use it to draw into the screen or to theprinter port. You can also set the <code>WindowRecord</code>s <code>windowPic</code> toequal your <code>PictureHandle</code> so updates are handled by the Window Manager.</p><a name="Section4"></a><P><A HREF="#top">Back to top</A></p><H2>What Do Those Constants Mean Anyway?</h2><p>The correct values are</p><p><code>blackColor = 33</code></p><p><code>whiteColor = 30</code></p><p><code>redColor    = 205</code></p><p><code>greenColor = 341</code></p><p><code>blueColor = 409</code></p><p><code>cyanColor = 273</code></p><p><code>magentaColor = 137</code></p><p><code>yellowColor = 69</code></p><p>The following discussion is theoretical and was based on the color constantsfor the MPW 3.1 interfaces. Well, those interfaces were wrong as far as the color constants. The discussion will be kept here to prove once and for all that Macintosh programming sometimes is arbitrary and not logical. On the other hand, the information about the color bits is correct.</p><p>Each of the constants contains 9 bits of information, and each bit has aspecial meaning. Figure 1 illustrates the meaning of each of the bits, whileTable 1 shows how each of the color constants fills in the appropriate bits.</p><p align=center><img src="images/qd_08_001.gif" alt="Figure 1" width=256 height=144></p><p align=center><b>Figure 1</b>. Bit Definitions</p><p align=center><b>Table 1</b>. Color-Bit Correlation</p><p><img src="images/qd_08_002.gif" alt="Table 1" width=408 height=139></p><P><A HREF="#top">Back to top</A></p><a name="References"></a><h2>References</h2><p><i>Inside Macintosh</i>, Volume I, page I-173, QuickDraw</p><P>Technical Note M.IM.Copybits--<A HREF = "qd_21.html">Of Time and Space and _CopyBits</a></p>         <a name="Downloads"></a>         <P><A HREF="#top">Back to top</A></p><H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (112K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/qd_08.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/qd/qd_08.html%3Fid%3DDTS10002721-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/qd/qd_08.html%3Fid%3DDTS10002721-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/qd/qd_08.html%3Fid%3DDTS10002721-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
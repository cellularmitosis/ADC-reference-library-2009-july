<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Application Menu and Pop-up List Programming Topics for Cocoa: Enabling Menu Items</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Enabling Menu Items"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20000261" title="Enabling Menu Items"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="../index.html" target="_top">Application Menu and Pop-up List Programming Topics for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="MenuItemStates.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="RemovingMenu.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20000261-BAJBFGED" title="Enabling Menu Items"></a><hr /><H1>Enabling Menu Items</H1><p>By default, every time a user event occurs, <code>NSMenu</code> automatically enables and disables each visible menu item. You can also force a menu to update using <code>NSMenu</code>’s <code>update</code> method. </p><p>There are two ways to enable menus:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="EnablingMenuItems.html#//apple_ref/doc/uid/20000261-74653">“Automatic Menu Enabling”</a></span>:  <code>NSMenu</code> updates every menu item whenever a user event occurs. A menu item is enabled if <code>NSMenu</code> can find an appropriate object that responds to the menu item’s action. If you want a menu item to remain disabled even though an object responds to the menu item’s action, define a <code>validateMenuItem:</code> method for that object.</p></li><li class="li"><p><span class="content_text"><a href="EnablingMenuItems.html#//apple_ref/doc/uid/20000261-74276">“Manual Menu Enabling”</a></span>: You use <code>setEnabled:</code> to enable or disable every menu item individually.</p></li></ul><p>To choose a system, use <code>NSMenu</code>’s <code>setAutoenablesItems:</code> with an argument of <code><a href="../../../Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/YES" target="_top">YES</a></code> (for automatic menu enabling) or <code><a href="../../../Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/NO" target="_top">NO</a></code> (for manual menu enabling). Automatic menu enabling is on by default.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="EnablingMenuItems.html#//apple_ref/doc/uid/20000261-74653-BAJBGJHB">Automatic Menu Enabling</a>
				
			<br/>
			
        
			
			
				<a href="EnablingMenuItems.html#//apple_ref/doc/uid/20000261-74276-BAJECHDJ">Manual Menu Enabling</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20000261-74653" title="Automatic Menu Enabling"></a><a name="//apple_ref/doc/uid/20000261-74653-BAJBGJHB" title="Automatic Menu Enabling"></a><h2>Automatic Menu Enabling</h2><p>When you use automatic menu enabling, <code>NSMenu</code> updates the status of every menu item whenever a user event occurs. To update the status of a menu item, <code>NSMenu</code> first determines the target of the item then determines whether the target implements <code><a href="../../../Reference/ApplicationKit/Protocols/NSMenuValidation_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/validateMenuItem:" target="_top">validateMenuItem:</a></code> or <code><a href="../../../Reference/ApplicationKit/Protocols/NSUserInterfaceValidations_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSUserInterfaceValidations/validateUserInterfaceItem:" target="_top">validateUserInterfaceItem:</a></code> (in that order). In more detail:</p><ul class="ul"><li class="li"><p>If the menu item’s target is set, then <code>NSMenu</code> first checks to see if that object implements the item’s action method. If it does not, then the item is disabled. If the target does implement the item’s action method, <code>NSMenu</code> first checks to see if that object implements <code>validateMenuItem:</code> or  <code>validateUserInterfaceItem:</code> method. If it does not, then the menu item is enabled. If it does, then the enabled status of the menu item is determined by the return value of the method.</p></li><li class="li"><p>If the menu item’s target is not set (that is, if it is <code>nil</code>—typically if the menu item is connected to First Responder) and the <code>NSMenu</code> object is not a contextual menu, then <code>NSMenu</code> uses the responder chain (described in <span class="content_text"><!--a target="_top" -->About the Responder Chain<!--/a--></span>) to determine the target. If there is no object in the responder chain that implements the item’s action, the item is disabled.</p><p>If there is an object in the responder chain that implements the item’s action, <code>NSMenu</code> then checks to see if that object implements the <code>validateMenuItem:</code> or<code>validateUserInterfaceItem:</code> method. If it does not, then the menu item is enabled. If it does, then the enabled status of the menu item is determined by the return value of the method. </p></li><li class="li"><p>If the menu item’s target is not set and the <code>NSMenu</code> object <em>is</em> a contextual menu, <code>NSMenu</code> goes through the same steps as before but the search order for the responder chain is different:</p><ol class="ol"><li class="li"><p>The responder chain for the window in which the view that triggered the context menu resides, starting with the view.</p></li><li class="li"><p>The window itself.</p></li><li class="li"><p>The window’s delegate.</p></li><li class="li"><p>The <code>NSApplication</code> object.</p></li><li class="li"><p>The <code>NSApplication</code> object’s delegate.</p></li></ol></li></ul><a name="//apple_ref/doc/uid/20000261-DontLinkElementID_1" title="Implementing validation"></a><h3>Implementing validation</h3><p>As noted above, before it is displayed a menu item checks to see if its target implements <code>validateMenuItem:</code> or  <code>validateUserInterfaceItem:</code>. If it does, then the enabled status of the menu item is determined by the return value of the method. You can therefore conditionally enable or disable a menu item by implementing either of these methods in the menu’s target (see <span class="content_text"><a href="EnablingMenuItems.html#//apple_ref/doc/uid/20000261-SW1">“Choosing validateMenuItem: or validateUserInterfaceItem:”</a></span> to determine which is the most appropriate). The implementation strategy is the same whichever you choose:</p><ol class="ol"><li class="li"><p>To decide whether or not an item should be enabled, you need to know what it will do if the user selects it. You typically first therefore check to see what <em>action</em> is associated with the item (you need to test for each of the actions you’re interested in).</p><p>Checking the action rather than, say, the title makes sure that: (a) your code works with different localizations and is robust against changes in the title due to changes in the user interface, and (b) you avoid the fragility of having to remember to use the same tag for each user interface element that invokes the same method on the target. (In the case of <code>validateUserInterfaceItem:</code>, you can only check the action or the tag.) </p></li><li class="li"><p>If the action is something you’re interested in, then return a Boolean value appropriate for the current context. </p></li><li class="li"><p>If the action is not something you’re interested in, then either:</p><ol class="ol"><li class="ol ol"><p>If your superclass implements the validation method (for example, <code>NSDocument</code> and <code>NSObjectController</code> implement <code>validateUserInterfaceItem:</code>, and <code>NSObjectController</code> implements <code>validateMenuItem:</code>), invoke super’s implementation; otherwise</p></li><li class="ol ol"><p>Return a default value (typically <code>YES</code>).</p></li></ol></li></ol><p>The following example illustrates the implementation of <code>validateUserInterfaceItem:</code> in a subclass of <code>NSDocument</code>.</p><div class="codesample"><table><tr><td scope="row"><pre>- (BOOL)validateUserInterfaceItem:(id &lt;NSValidatedUserInterfaceItem>)anItem<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    SEL theAction = [anItem action];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (theAction == @selector(copy:))<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        if ( /* there is a current selection and it is copyable */ )<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>            return YES;<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    } else if (theAction == @selector(paste:))<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        if ( /* there is a something on the pasteboard we can use and<span></span></pre></td></tr><tr><td scope="row"><pre>                the user interface is in a configuration in which it makes sense to paste */ )<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>            return YES;<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    } else<span></span></pre></td></tr><tr><td scope="row"><pre>        /* check for other relevant actions ... */<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    // subclass of NSDocument, so invoke super's implementation<span></span></pre></td></tr><tr><td scope="row"><pre>    return [super validateUserInterfaceItem:anItem];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20000261-SW1" title="Choosing validateMenuItem: or validateUserInterfaceItem:"></a><h3>Choosing validateMenuItem: or validateUserInterfaceItem:</h3><p>In general, you should use <code>validateUserInterfaceItem:</code> instead of <code>validateMenuItem:</code> since the former will also work for toolbar items which have the same target and action. If, however, there is additional work that you want to do that is specific to a menu item, use <code>validateMenuItem:</code>—for example, <code>validateMenuItem:</code> is also a good place to toggle titles or set state on menu items to make sure they're always correct.</p><p>Here is an example of using <code>validateUserInterfaceItem:</code> to override automatic enabling. If your application has a Copy menu item that sends the <code>copy:</code> action message to the first responder, that menu item is automatically enabled any time an object that responds to <code>copy:</code>, such as an <code>NSText</code> object, is the first responder of the key or main window. If you create a class whose instances might become the first responder, and which doesn’t support copying of everything it allows the user to select, you should implement <code>validateUserInterfaceItem:</code> in that class. <code>validateUserInterfaceItem:</code> should then return <code><a href="../../../Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/NO" target="_top">NO</a></code> if items that can’t be copied are selected (or if no items are selected) and <code><a href="../../../Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/YES" target="_top">YES</a></code> if all items in the selection can be copied. By implementing <code>validateUserInterfaceItem:</code>:, you can have the Copy menu item disabled even though the target object does implement the <code>copy:</code> method. If a class never permits copying, then you simply omit an implementation of <code>copy:</code> in that class, and the Copy menu item is disabled automatically whenever an instance of that class is the first responder.</p><a name="//apple_ref/doc/uid/20000261-74276" title="Manual Menu Enabling"></a><a name="//apple_ref/doc/uid/20000261-74276-BAJECHDJ" title="Manual Menu Enabling"></a><h2>Manual Menu Enabling</h2><p>When you use manual menu enabling, you use <code>setEnabled:</code> to enable or disable every menu item individually. None of the menu items, even those controlled by Application Kit classes like <code>NSTextView</code>, are updated automatically.</p><p>To turn on manual menu enabling, use <code>NSMenu</code>’s <code>setAutoenablesItems:</code> with an argument of <code><a href="../../../Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/c_ref/NO" target="_top">NO</a></code>.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20000261-DontLinkElementID_12" title="Important:"></a><p><strong>Important:</strong>&nbsp;If you send a <code>setEnabled:</code> message when automatic updating is on, other objects might undo what you have done after another user event occurs. Hence you can never be sure that the menu item will remain the way you set it.</p><p></p></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="MenuItemStates.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="RemovingMenu.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2001, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-06-26<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html%3Fid%3D10000032i-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html%3Fid%3D10000032i-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/MenuList/Articles/EnablingMenuItems.html%3Fid%3D10000032i-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

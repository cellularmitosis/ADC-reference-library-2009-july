<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTTransferProviderOwnership </TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING103></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-102.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-104.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-97.html"><B>Chapter 21 - Providers Reference</B></A> / <A HREF="NetworkingWOT-101.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-102.html"><B>Opening and Closing Providers</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING103-0></A>
<H3><A NAME=MARKER-9-60></A>OTTransferProviderOwnership<A NAME=MARKER-13-61></A> </H3>
 Transfers a provider's ownership to a new client.<P>
<A NAME=HEADING103-2></A>
<H5>C INTERFACE </H5>
<PRE>
<A NAME=MARKER-0-95></A>ProviderRef OTTransferProviderOwnership(
                     ProviderRef ref,
                     OTClient prevOwner,
                     OSStatus* errPtr);
</PRE>
<A NAME=HEADING103-4></A>
<H5>C++ INTERFACE </H5>
<PRE>
<A NAME=MARKER-12-63></A>ProviderRef TProvider::OTTransferProviderOwnership(
                     OSStatus* errPtr);
</PRE>
<A NAME=HEADING103-6></A>
<H5>PARAMETERS </H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The provider reference for the provider to be transferred.
<DT>prevOwner
<DD> The previous owner of the provider.
<DT><CODE>errPtr</CODE>
<DD> A pointer to a result code.
<DT><I>function result</I>
<DD> A new provider reference that replaces the original.
</DL>
<A NAME=HEADING103-11></A>
<H5>DISCUSSION</H5>
 The <CODE>OTTransferProviderOwnership</CODE> function transfers the ownership of the provider indicated by the <CODE>ref</CODE> parameter from whoever created the provider, specified by the <CODE>prevOwner</CODE> parameter, to the current Open Transport client. The new owner must obtain the client ID and the provider <CODE>ref</CODE> from the current owner before calling this function. You must use this function whenever some other entity (typically a shared library) opens an endpoint on behalf of the client.<P>
 Under Open Transport, a provider allocates a small amount of memory from the client's heap. In addition, Open Transport automatically cleans up behind clients that call the <CODE>CloseOpenTransport</CODE> function. If a shared library creates a provider on your behalf and that shared library subsequently unloads while you are still using the provider, two things will happen: The memory for the provider is no longer valid, and the provider is closed. By using the <CODE>OTTransferProviderOwnership</CODE> function, you can gain ownership of the provider. Once you do, Open Transport allocates a new provider reference in your memory pool and the provider is marked as belonging to the calling client. The old provider reference is then invalid and should not be used. <P>
<A NAME=HEADING103-14></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 When installing a notifier for a provider, Open Transport assumes that the <CODE>OTNotifyProcPtr</CODE> pointer is in the same architecture as the call being made. After transferring ownership, remove any already installed notifiers and install your own, unless you are sure that the provider's existing notifier is of the correct architecture and makes sense for you <P>
<DL>
<DT><B>WARNING</B>
<DD>If you do not use the <CODE>OTTransferProviderOwnership</CODE> function, it is vital that the provider be closed under the same architecture that opened the provider.    <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING103-17></A>
<H5>SEE ALSO</H5>
 The <A HREF=NetworkingWOT-104.html#MARKER-9-65><CODE>OTWhoAmI</CODE></A> function.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-102.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-104.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>KeyTranslate(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING78></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-77.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-79.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A> / <A HREF="Toolbox-43.html"><B>Event Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-49.html"><B>Event Manager Routines</B></A> / <A HREF="Toolbox-76.html"><B>Reading the Keyboard</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING78-0></A>
<H3>KeyTranslate</H3>
 <A NAME=MARKER-2-412></A><A NAME=MARKER-2-3></A><A NAME=MARKER-2-7></A>You can use the <CODE>KeyTranslate</CODE> function to convert a virtual key code to a character code based on a <CODE>'KCHR'</CODE> resource. The <CODE>KeyTranslate</CODE> function is also available as the <CODE>KeyTrans</CODE> function.<P>
<PRE>
FUNCTION KeyTranslate (transData: Ptr; keycode: Integer; 
                        VAR state: LongInt): LongInt;
</PRE>
<DL>
<DT><CODE>transData</CODE>
<DD> A pointer to the '<CODE>KCHR</CODE>' resource that you want the <CODE>KeyTranslate</CODE> function to use when converting the key code to a character code.
<DT><CODE>keycode</CODE>
<DD> A 16-bit value that your application should set so that bits 0-6 contain the virtual key code and bit 7 contains either 1 to indicate an up stroke or 0 to indicate a down stroke of the key. Bits 8-15 have the same interpretation as the high byte of the <CODE>modifiers</CODE> field of the event record and should be set according to the needs of your application. 
<DT><CODE>state</CODE>
<DD> A value that your application should set to 0 the first time it calls <CODE>KeyTranslate</CODE> or any time your application calls <CODE>KeyTranslate</CODE> with a different <CODE>'KCHR'</CODE> resource. Thereafter, your application should pass the same value for the <CODE>state</CODE> parameter as <CODE>KeyTranslate</CODE> returned in the previous call. 
</DL>
<A NAME=HEADING78-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>KeyTranslate</CODE> function returns a 32-bit value that gives the character code for the virtual key code specified by the <CODE>keycode</CODE> parameter. <A HREF=#MARKER-9-465>Figure 2-17</A> shows the structure of the 32-bit number that <CODE>KeyTranslate</CODE> returns.<P>
<B>Figure 2-17  <A NAME=MARKER-9-465></A>Structure of the <CODE>KeyTranslate</CODE> function result</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/Figure_1-17_EV-14.jpg"><P>
 The <CODE>KeyTranslate</CODE> function returns the values that correspond to one or possibly two characters that are generated by the specified virtual key code. For example, a given virtual key code might correspond to an alphabetic character with a separate accent character. For example, when the user presses Option-E followed by N, you can map this through the <CODE>KeyTranslate</CODE> function using the U.S. <CODE>'KCHR'</CODE> resource to produce \xA5n, which <CODE>KeyTranslate</CODE> returns as two characters in the bytes labeled Character code 1 and Character code 2. If <CODE>KeyTranslate</CODE> returns only one character code, it is always in the byte labeled Character code 2. However, your application should always check both bytes labeled Character code 1 and Character code 2 in <A HREF=#MARKER-9-465>Figure 2-17</A> for possible values that map to the virtual key code.<P>
<A NAME=HEADING78-11></A>
<H5>SEE ALSO</H5>
 For additional information on the <CODE>'KCHR'</CODE> resource and the <CODE>KeyTranslate</CODE> function, see <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I>.<A NAME=MARKER-2-268></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-77.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-79.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

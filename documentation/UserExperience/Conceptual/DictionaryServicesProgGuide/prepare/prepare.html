<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Dictionary Services Programming Guide: Creating Dictionaries</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating Dictionaries"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40006152-CH3" title="Creating Dictionaries"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000437" target="_top">User Experience</a> &gt; <a href="../../../TextFonts-date.html#//apple_ref/doc/uid/TP30000440-TP30000437-TP30000461" target="_top">Text &amp; Fonts</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40006152-CH1-DontLinkElementID_23">Dictionary Services Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../schema/schema.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../access/access.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40006152-CH3-SW7" title="Creating Dictionaries"></a><h1>Creating Dictionaries</h1><p>Prior to  building a dictionary, you need to create your dictionary source file, prepare a style sheet, edit the property list file, and add any resources needed by your dictionary. This chapter explains how to perform these tasks, provides instructions for building your dictionary, and shows a few simple examples. You’ll also find out how to create a Japanese dictionary, set up preferences, and add front and back matter.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_6">Preparing Source Data and Building a Dictionary</a>
				
			<br/>
			
        
			
			
				<a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_9">A One-Word Dictionary Example</a>
				
			<br/>
			
        
			
			
				<a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_10">An Acronym Dictionary Example</a>
				
			<br/>
			
        
			
			
				<a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_11">Adding Front and Back Matter to a Dictionary</a>
				
			<br/>
			
        
			
			
				<a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_12">Setting Up Preferences for a Dictionary</a>
				
			<br/>
			
        
			
			
				<a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW8">Creating a Japanese Dictionary</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_6" title="Preparing Source Data and Building a Dictionary"></a><h2>Preparing Source Data and Building a Dictionary</h2><p>Before you start preparing your source data, copy the  <code>project_template</code>  folder from the development kit to the directory that you use for code development. Then, follow the instructions described in the following sections:</p><ol class="ol"><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW1">“Preparing Dictionary Contents”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW2">“Editing the Property List File”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW3">“Adding Resources Needed by Your Dictionary”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW4">“Preparing the Makefile”</a></span></p></li></ol><a name="//apple_ref/doc/uid/TP40006152-CH3-SW1" title="Preparing Dictionary Contents"></a><h3>Preparing Dictionary Contents</h3><p>Take a look at the <code>MyDictionary.xml</code> file provided in the project template.  Your dictionary should follow this form, using UTF-8 encoding. You can change the file name to something other than <code>MyDictionary</code>, but if you change the name, you must edit the <code>DICT_SRC_PATH</code> variable in the makefile.</p><p><span class="content_text"><a href="../schema/schema.html#//apple_ref/doc/uid/TP40006152-CH4-SW1">“Dictionary User Interface and Markup”</a></span> ) describes the XML schema you should use to develop a dictionary. The schema uses the RELAX NG schema language, which is described on this website:</p><p><span class="content_text"><a href="http://www.relaxng.org/" target="_blank">http://www.relaxng.org/</a></span></p><p>You should validate your dictionary source prior to building a new dictionary You can use RELAX NG validators programs, which are available from this website:</p><p><span class="content_text"><a href="http://www.relaxng.org/#validators" target="_blank">http://www.relaxng.org/#validators</a></span></p><p>You can also validate XML using jing  as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>$ java -jar &lt;path to jing.jar> &lt;schema definition> &lt;XML to validate><span></span></pre></td></tr></table></div><p>From the project_template folder, with jing located in ../jing/, the command line is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>$ java -jar ../jing/bin/jing.jar ../documents/DictionarySchema/AppleDictionarySchema.rng MyDictionary.xml<span></span></pre></td></tr></table></div><p>For more information on jing, see: </p><p><span class="content_text"><a href="http://www.thaiopensource.com/relaxng/jing.html" target="_blank">http://www.thaiopensource.com/relaxng/jing.html</a></span></p><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_7" title="Preparing a Style Sheet"></a><h3>Preparing a Style Sheet</h3><p>You can prepare a style sheet to use for the contents of the dictionary by editing the <code>MyDictionary.css</code> file provided with the project template. If you change the name of this css file, you need to edit the <code>CSS_PATH</code> variable in the makefile.</p><p>You should minimally edit the style sheet.  The Dictionary application and the Dictionary window control use their own style definitions to ensure that the contents fit the display. For best results, do not specify an absolute font or font size.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-SW2" title="Editing the Property List File"></a><h3>Editing the Property List File</h3><p>The property list file for a dictionary is an an XML text file. The project template contains an example file—<code>MyInfo.plist</code>—whose contents are shown in <span class="content_text">Listing 2-1</span>. You can edit this file so that it contains entries appropriate for your dictionary. <span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW6">Table 2-1</a></span> explains the values that you need to provide for your dictionary.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_25" title="Note"></a><p><strong>Note:</strong>&nbsp;The property list cannot use binary format. If you need to, you can convert a binary property list file to an XML text file using the <code>plutil</code> command.</p></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW5" title="Listing 2-1An example of a property list file for a dictionary"></a><p class="codesample"><strong>Listing 2-1&nbsp;&nbsp;</strong>An example of a property list file for a dictionary</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>CFBundleDevelopmentRegion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>English&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;key>CFBundleDisplayName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>My Dictionary&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;key>CFBundleIdentifier&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>com.apple.dictionary.MySample&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;key>CFBundleName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>MyDictionary&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;key>CFBundleShortVersionString&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>1.0&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;key>DCSDictionaryCopyright&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>Copyright (c) Apple Computer, Inc.&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;key>DCSDictionaryManufacturerName&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>Apple Computer, Inc.&lt;/string><span></span></pre></td></tr></table></div><p>If you change the name of the property list file, you must edit the <code>PLIST_PATH</code> variable in the makefile.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-SW6" title="Table 2-1Keys and values for the dictionary property list file"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-1&nbsp;&nbsp;</strong>Keys and values for the dictionary property list file</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>CFBundleDevelopmentRegion</code></p></td><td ><p>A region</p></td></tr><tr><td  scope="row"><p><code>CFBundleDisplayName</code></p></td><td ><p>The full display name of the dictionary. The default is to use the file system name.</p></td></tr><tr><td  scope="row"><p><code>CFBundleIdentifier</code></p></td><td ><p>The identifier of the dictionary bundle; specify a unique ID.</p></td></tr><tr><td  scope="row"><p><code>CFBundleName</code></p></td><td ><p>The short display name of the dictionary.</p></td></tr><tr><td  scope="row"><p><code>CFBundleShortVersionString</code></p></td><td ><p>The version of the dictionary.</p></td></tr><tr><td  scope="row"><p><code>DCSDictionaryCopyright</code></p></td><td ><p>The copyright notice of the dictionary.</p></td></tr><tr><td  scope="row"><p><code>DCSDictionaryManufacturerName</code></p></td><td ><p>The manufacturer name of the dictionary.</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW3" title="Adding Resources Needed by Your Dictionary"></a><h3>Adding Resources Needed by Your Dictionary</h3><p>You must place any resources (for example, images) that your dictionary needs in the  OtherResources folder in the <code>project_template</code> folder. When you build the dictionary, the resources are copied into the built dictionary.</p><p>For example, if your dictionary uses an image file name <code>test.png</code>, you need to place it in the following location:</p><p><code>project_template/OtherResources/Images/test.png</code></p><p>The Images folder is copied into the dictionary. When the dictionary needs the image, it uses to the relative path—<code>Images/test.png</code>—which is written to the XML file during the build process.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-SW4" title="Preparing the Makefile"></a><h3>Preparing the Makefile</h3><p>Name your dictionary and then edit the <code>DICT_NAME</code> variable in the makefile. This name is used as the folder name for the dictionary. For example, when <code>DICT_NAME = "My Dictionary"</code>, the built dictionary is <code>My Dictionary.dictionary</code>. </p><p>If you change the location of the Dictionary Development Kit from /<code>Developer/Extras/Dictionary Development Kit</code>, you must modify the <code>DICT_BUILD_TOOL_DIR</code> variable in the makefile to reflect the change.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_8" title="Building the Dictionary"></a><h3>Building the Dictionary</h3><p>To build your dictionary, follow these steps:</p><ol class="ol"><li class="li"><p>Launch the Terminal application.</p></li><li class="li"><p>Use the <code>cd</code> command to change to the appropriate location: </p><p><code>/Developer/Extras/Dictionary Development Kit</code></p></li><li class="li"><p>Enter <code>make</code>.</p></li><li class="li"><p>After the make process finishes successfully, type make install to copy the new dictionary to:</p><p><code>~/Library/Dictionaries/</code></p></li></ol><p>After running the <code>make install</code> command, you can delete all the intermediate files in the objects folder. In the Terminal window, enter make clean to remove the objects folder.</p><p>Now you can launch the Dictionary application and test your new dictionary.</p><p>As you can see from looking at the makefile, the building process uses a script <code>build_dict.sh</code>, located in <code>/Developer/Extras/Dictionary Development Kit/bin</code>. This script takes 4 arguments—<code>dictionary_name</code>, <code>dictionary_source_path</code>, <code>StyleSheet_path</code>, and <code>InfoPlist_path</code>. It builds a new directory in the <code>/objects</code> folder.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_9" title="A One-Word Dictionary Example"></a><h2>A One-Word Dictionary Example</h2><p><span class="content_text">“Yomi”</span> shows a simple example of a dictionary that contains an entry for the word <em>make</em>. It looks like <span class="content_text">Figure 1-1</span> when opened using  the Dictionary application.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-SW9" title="Listing 2-2A one-word dictionary"></a><p class="codesample"><strong>Listing 2-2&nbsp;&nbsp;</strong>A one-word dictionary</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;d:dictionary xmlns="http://www.w3.org/1999/xhtml" xmlns:d="http://www.apple.com/DTDs/DictionaryService-1.0.rng"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;d:entry id="make_1"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="make" d:title="make"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="makes" d:title="makes (make)"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="made" d:title="made (make)"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="making" d:title="making (make)"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;h1>make&lt;/h1>&lt;span class="syntax">| māk |&lt;/span><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;div><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;ol><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;li><span></span></pre></td></tr><tr><td scope="row"><pre>                Form by putting parts together or combining substances; construct; create; produce<span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;span d:priority="2"> : &lt;i>Mother made her a beautiful dress&lt;/i><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;/span><span></span></pre></td></tr><tr><td scope="row"><pre>                .<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/li><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;li><span></span></pre></td></tr><tr><td scope="row"><pre>                Cause to be or become<span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;span d:priority="2"> : &lt;i>The news made me happy&lt;/i><span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;/span><span></span></pre></td></tr><tr><td scope="row"><pre>                .<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/li><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/ol><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;div d:parental-control="1" d:priority="2"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;h3>PHRASES&lt;/h3><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;div id="make_it">&lt;b>make it&lt;/b> : succeed in something; survive.&lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;h4>&lt;a href="x-dictionary:r:make_up_ones_mind">&lt;b>make up one's mind&lt;/b>&lt;/a>&lt;/h4><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:dictionary><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_10" title="An Acronym Dictionary Example"></a><h2>An Acronym Dictionary Example</h2><p><span class="content_text">Listing 2-3</span> shows how to tag the following content to create an acronym dictionary.</p><ul class="ul"><li class="li"><p>LDAP, Lightweight Directory Access Protocol</p></li><li class="li"><p>MIDI, Musical Instrument Digital Interface</p></li><li class="li"><p>XML, Extensible Markup Language</p></li></ul><a name="//apple_ref/doc/uid/TP40006152-CH3-SW10" title="Listing 2-3An acronym dictionary"></a><p class="codesample"><strong>Listing 2-3&nbsp;&nbsp;</strong>An acronym dictionary</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;d:dictionary xmlns="http://www.w3.org/1999/xhtml" xmlns:d="http://www.apple.com/DTDs/DictionaryService-1.0.rng"><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;d:entry id="ldap"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="LDAP" d:title="LDAP"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;h1>LDAP&lt;/h1><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;p>Lightweight Directory Access Protocol&lt;/p><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;d:entry id="midi"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="MIDI" d:title="MIDI"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;h1>MIDI&lt;/h1><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;p>Musical Instrument Digital Interface&lt;/p><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;d:entry id="xml"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="XML" d:title="XML"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;h1>XML&lt;/h1><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;p>Extensible Markup Language&lt;/p><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:dictionary><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_11" title="Adding Front and Back Matter to a Dictionary"></a><h2>Adding Front and Back Matter to a Dictionary</h2><p>You can add front and back matter to a dictionary by following these steps:</p><ol class="ol"><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW18">“Prepare an Entry for the Front and Back Matter”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW19">“Modify the Info.plist File”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW20">“Add an Index Entry (Optional)”</a></span></p></li></ol><p>You can view the front and back matter for a dictionary using the Dictionary application. In the Go menu, choose Front/Back Matter.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-SW18" title="Prepare an Entry for the Front and Back Matter"></a><h3>Prepare an Entry for the Front and Back Matter</h3><p>In the XML file for the dictionary, you need to specify a front-back matter entry using an <code>id</code> attribute whose value is set to <code>front_back_matter</code> as shown in the following simple example:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;d:entry id="front_back_matter" d:title="Front/Back Matter"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;h1>&lt;b>My Dictionary&lt;/b>&lt;/h1><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;h2>Front/Back Matter&lt;/h2><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;p><span></span></pre></td></tr><tr><td scope="row"><pre>        This is a front matter page of the sample dictionary.&lt;br/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/p><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW19" title="Modify the Info.plist File"></a><h3>Modify the Info.plist File</h3><p>You must modify the property list for the dictionary by adding the <code>DCSDictionaryFrontMatterReferenceID</code> key to the <code>Info.plist</code> file. The associated value is a string that specifies the <code>id</code> value you used in the XML file. The following shows the string used in <span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW18">“Prepare an Entry for the Front and Back Matter.”</a></span></p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>DCSDictionaryFrontMatterReferenceID&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;string>front_back_matter&lt;/string><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW20" title="Add an Index Entry (Optional)"></a><h3>Add an Index Entry (Optional)</h3><p>This example does not use a <code>&lt;d:index></code> element, which means that the page won’t show up in a search. If you want the front and back matter to show in a search, add the<code>&lt;d:index></code> element. Otherwise, users can view the front and back matters by choosing Go > Front/Back Matter from within the Dictionary application.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_12" title="Setting Up Preferences for a Dictionary"></a><h2>Setting Up Preferences for a Dictionary</h2><p>You have the option to set up preferences for a dictionary.  Users access the preferences settings from within the Dictionary application by choosing Dictionary > Preferences. For example, the New Oxford American Dictionary provided with Mac OS X v10.5 allows users to choose from among three phonetic notations—U.S. English (Diacritical), U.S. English (IPA), or British English (IPA).  </p><p>This section shows how you can set up preferences for your dictionary. You can find the files associated with this example in the Dictionary Development Kit located in:</p><p><code>/Developer/Extras/Dictionary Development Kit/samples/</code></p><p>To implement dictionary-specific preferences, follow these steps:</p><ol class="ol"><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW14">“Modify the Dictionary Contents Appropriately.”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW15">“Prepare an XSLT File to Apply to Dictionary Entries.”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW16">“Implement  the Preferences User interface.”</a></span></p></li><li class="li"><p><span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW17">“Modify  the Info.plist File.”</a></span> </p></li></ol><a name="//apple_ref/doc/uid/TP40006152-CH3-SW14" title="Modify the Dictionary Contents Appropriately"></a><h3>Modify the Dictionary Contents Appropriately</h3><p>You need to modify the contents to support the preferences that you set up. For example, if you want to allow the user to choose from among three phonetic notations, you need to provide the three phonetic notations for each entry in our dictionary. The following example shows three phonetic notations for the word <code>make</code>. </p><div class="codesample"><table><tr><td scope="row"><pre>&lt;d:entry id="make_1" d:title="make"><span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;h1>make&lt;/h1><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;span class="syntax"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;span d:pr="US">| māk |&lt;/span><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;span d:pr="US_IPA">| meɪk |&lt;/span><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;span d:pr="UK_IPA">| meɪk |&lt;/span><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/span><span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr></table></div><p>Note that the XML does not specify which phonetic notation to show. You’ll do that in the next section by creating an XSLT file.</p><a name="//apple_ref/doc/uid/TP40006152-CH3-SW15" title="Prepare an XSLT File to Apply to Dictionary Entries"></a><h3>Prepare an XSLT File to Apply to Dictionary Entries</h3><p>The XSLT files contains instructions that Dictionary Services applies to each entry before displaying the it.  In this example, you need to provide instructions to remove the unused phonetic notation.  For this, use the <code>$pronunciation</code> variable, which is a global variable supply by the Dictionary application, as shown in the following example.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_26" title="Note"></a><p><strong>Note:</strong>&nbsp;You need to place the XSLT file in the Other Resources folder of your dictionary project.</p></div><div class="codesample"><table><tr><td scope="row"><pre>&lt;xsl:template match="*[@d:pr='US']"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;xsl:if test="$pronunciation = '0'"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;xsl:apply-templates select="@*|node()" /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/xsl:if><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/xsl:template><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;xsl:template match="*[@d:pr='IPA']"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;xsl:if test="$pronunciation = '1'"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;xsl:apply-templates select="@*|node()" /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/xsl:if><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;xsl:if test="$pronunciation = '2'"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;xsl:apply-templates select="@*|node()" /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/xsl:if><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/xsl:template><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;xsl:template match="*[@d:pr='US_IPA']"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;xsl:if test="$pronunciation = '1'"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;xsl:apply-templates select="@*|node()" /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/xsl:if><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/xsl:template><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;xsl:template match="*[@d:pr='UK_IPA']"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;xsl:if test="$pronunciation = '2'"><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;xsl:apply-templates select="@*|node()" /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/xsl:copy><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/xsl:if><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/xsl:template><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW16" title="Implement  the Preferences User interface"></a><h3>Implement  the Preferences User interface</h3><p>You need to provide an XHTML file that specifies the user interface to present in the Dictionary Preferences window in the Dictionary application. The following example shows how to set up preferences for phonetic notation. The user will see three choices displayed as radio buttons. After making a selection, Dictionary Services saves the it and passes the selection to the XSLT instructions. The  instructions are then applied to the dictionary entries.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_27" title="Note"></a><p><strong>Note:</strong>&nbsp;You need to place the XHTML file in the Other Resources folder of your dictionary project.</p></div><div class="codesample"><table><tr><td scope="row"><pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;head><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;meta http-equiv="content-type" content="text/html; charset=UTF-8" /><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/head><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;body><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;div id="copyright">&lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;hr /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;div class="query"><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input type="hidden" name="version" value="1" /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;div class="query"><span></span></pre></td></tr><tr><td scope="row"><pre>            Pronunciation:&lt;br /><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input type="radio" name="pronunciation" value="0">US English (Diacritical)&lt;/input>&lt;br /><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input type="radio" name="pronunciation" value="1">US English (IPA)&lt;/input>&lt;br /><span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;input type="radio" name="pronunciation" value="2">British English (IPA)&lt;/input>&lt;br /><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;/div><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/body><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/html><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW17" title="Modify  the Info.plist File"></a><h3>Modify  the Info.plist File</h3><p>You must add keys to the <code>Info.plist</code> file to indication that the dictionary has its own preferences.  The values for this example are shown in the following property list entry. You need to change the values to ones that are appropriate for your dictionary. The values expected for each of the keys are shown in <span class="content_text"><a href="prepare.html#//apple_ref/doc/uid/TP40006152-CH3-SW12">Table 2-2</a></span>.</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;key>DCSDictionaryDefaultPrefs&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>pronunciation&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>0&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>version&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>1&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key>DCSDictionaryPrefsHTML&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string>MyDictionary_prefs.html&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key>DCSDictionaryXSL&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string>MyDictionary.xsl&lt;/string><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW12" title="Table 2-2Values for dictionary preferences keys"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-2&nbsp;&nbsp;</strong>Values for dictionary preferences keys</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th></tr><tr><td  scope="row"><p><code>DCSDictionaryDefaultPrefs</code></p></td><td ><p>None. This key specifies that key-value pairs for the default values follow.</p></td></tr><tr><td  scope="row"><p><code>DCSDictionaryPrefsHTML</code></p></td><td ><p>The XHTML file name</p></td></tr><tr><td  scope="row"><p><code>DCSDictionaryXSL</code></p></td><td ><p>The XSLT file name</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40006152-CH3-SW8" title="Creating a Japanese Dictionary"></a><h2>Creating a Japanese Dictionary</h2><p>The Japanese language has multiple character classes—Hiragana, Katakana, and Kanji.  Because of this, Japanese words often have multiple representations. Kanji uses ideographic characters; Hiragana and Katakana use phonograms.  (Foreign words are often represented using Katakana.  Roman characters also are used.)  A Kanji word has its Yomi that represents its reading. Hiragana or Katakana usually describe Yomi.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40006152-CH3-DontLinkElementID_28" title="Note"></a><p><strong>Note:</strong>&nbsp;<strong>Yomi</strong> means the reading of a character, word, phrase, or sentence. For example, the  word "漢字" has "かんじ" as its Yomi.</p></div><p>Entries in many Japanese word dictionaries are sorted by Yomi.  In such dictionaries, the user enters Yomi to search for words.  Using Yomi for Hiragana and Katakana is not an issue because these are phonograms, and there aren’t many of them.  But for Kanji, it is an issue because the same Yomi can represent different Kanji. For example the Yomi "かい" represents many words: 会, 界, 貝, 解, 階, 回, 介, ...下位, 甲斐, ...</p><p>A user who searches for "かい" gets these results:</p><ul class="simple"><li><p>かい 【会】</p></li><li><p>かい 【界】</p></li><li><p>かい 【貝】</p></li><li><p>かい 【解】</p></li><li><p>かい 【階】</p></li><li><p>かい 【回】</p></li><li><p>かい 【介】</p></li><li><p>...</p></li><li><p>かい 【下位】</p></li><li><p>かい 【甲斐】</p></li><li><p>...</p></li></ul><p>The user can choose the appropriate entry using the additional Kanji part.</p><p>If the search word is "くふう", the results are:</p><ul class="simple"><li><p>くふう 【工夫】</p></li><li><p>くふう 【句風】</p></li></ul><p> Here are search results for “工夫" .  The Yomi くふう and こうふ are added to choose appropriate entry.</p><ul class="simple"><li><p>工夫 【くふう】</p></li><li><p>工夫 【こうふ】</p></li></ul><p>You need to mark Yomi content in your Japanese dictionary using the <code>d:yomi</code> attribute. The Dictionary application displays the <code>d:title</code> and <code>d:yomi</code> in the appropriate order in the search results list.  When the user searches using Hiragana, the Yomi appears before the Kanji.  When the user searches using Kanji, the Yomi is added.</p><p>For the  words in a Japanese dictionary that have multiple representations, the value associated with the <code>d:title</code> element can be different from the value associated with the <code>d:value</code> element. To ensure that users can find what they search for, use the <code>d:yomi</code> attribute with the <code>d:index</code> element.</p><p>In a Japanese dictionary, a Kanji entry has both Kanji and Yomi as its <code>d:value</code> attribute of the <code>d:index</code> element.  The <code>d:title</code> markup in its ordinary form is:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;d:entry ... d:title="工夫"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="くふう" d:title="工夫"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="工夫" d:title="工夫"/><span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr></table></div><p>You can add Yomi using the  <code>d:yomi</code> attribute as shown:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;d:entry ... d:title="工夫"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="くふう" d:title="工夫" d:yomi="くふう"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="工夫" d:title="工夫" d:yomi="くふう"/><span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr><tr><td scope="row"><pre>&lt;d:entry ... d:title="工夫"><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="こうふ" d:title="工夫" d:yomi="こうふ"/><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;d:index d:value="工夫" d:title="工夫" d:yomi="こうふ"/><span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/d:entry><span></span></pre></td></tr></table></div><p>The Dictionary application uses <code>d:yomi</code> and <code>d:title</code> to add supplementary information either for searching by Yomi or searching by Kanji.  You can omit <code>d:title</code>  when it has the same value as <code>d:value</code>.</p><p>The Dictionary Development Kit contains the source for a sample Japanese dictionary (see <code>/Developer/Extras/Dictionary Development Kit/samples/</code>). The dictionary contains entries for various cases, including the following:</p><ul class="ul"><li class="li"><p>A word that is written using multiple, mixed character classes.</p></li><li class="li"><p>A foreign word that has both Katakana and Roman representations.</p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../schema/schema.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../access/access.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-05-30<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/UserExperience/Conceptual/DictionaryServicesProgGuide/prepare/prepare.html%3Fid%3DTP40006152-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/UserExperience/Conceptual/DictionaryServicesProgGuide/prepare/prepare.html%3Fid%3DTP40006152-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/UserExperience/Conceptual/DictionaryServicesProgGuide/prepare/prepare.html%3Fid%3DTP40006152-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
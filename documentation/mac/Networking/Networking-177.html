<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>BuildBDS(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING177></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-176.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-178.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-143.html"><B>Chapter 6 - AppleTalk Transaction Protocol (ATP)</B></A> / <A HREF="Networking-153.html"><B>ATP Reference</B></A><BR><DL><DD><A HREF="Networking-158.html"><B>Routines</B></A> / <A HREF="Networking-176.html"><B>Building a Buffer Data Structure</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING177-0></A>
<H3><A NAME=MARKER-9-264></A>BuildBDS</H3>
 <A NAME=MARKER-11-265></A><A NAME=MARKER-2-25></A>From the buffer that you supply, the <A NAME=MARKER-2-43></A><CODE>BuildBDS</CODE> function creates a buffer data structure (BDS) to be used to hold data for ATP functions that send and receive response data.<P>
<PRE>
FUNCTION BuildBDS (buffPtr: Ptr; bdsPtr: Ptr; 
                  buffSize: Integer): Integer;
</PRE>
<DL>
<DT><CODE>buffPtr</CODE>
<DD> A pointer to a data buffer. 
<DT><CODE>buffSize</CODE>
<DD> The length in bytes of the buffer data structure. 
</DL>
<A NAME=HEADING177-5></A>
<H5>DESCRIPTION</H5>
 The <CODE>PSendResponse</CODE>, <CODE>PSendRequest</CODE>, and <CODE>PNSendRequest</CODE> functions require a buffer data structure of a specific format to be used to hold the response data. You can use the <CODE>BuildBDS</CODE> function to create this data structure, or you can build it yourself from Pascal. <P>
 The <CODE>BuildBDS</CODE> function creates a buffer data structure consisting of an array of elements--one for each response packet--to be used to hold response data. You pass <BR>this function a pointer to the memory to be used for this buffer and the size in bytes <BR>of the memory. You should allocate enough memory to hold the response data that <BR>you are either sending or receiving. Because an entire response message cannot exceed 4624 bytes, the amount of memory that you allocate for this data structure should not exceed this size.<P>
 <CODE>BuildBDS</CODE> creates up to eight elements for a buffer data structure. If you provide the maximum space of 4624 bytes, <CODE>BuildBDS</CODE> returns eight elements; if the response message is shorter and you specify fewer bytes, <CODE>BuildBDS</CODE> returns the equivalent number of elements. <CODE>BuildBDS</CODE> returns as a function result the number of buffer data structure elements that it creates. For more information about the BDS data structure, <BR>see <A HREF=Networking-155.html#MARKER-9-108>"The Buffer Data Structure" on page 6-20</A>.<P>
<A NAME=HEADING177-9></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>paramErr<TD>-50<TD>Version number is too high</TABLE>
</H5>
<A NAME=HEADING177-10></A>
<H5>SEE ALSO</H5>
 See <A HREF=Networking-168.html#MARKER-9-208>"PSendResponse" on page 6-34</A>, <A HREF=Networking-160.html#MARKER-9-141>"PSendRequest" on page 6-24</A>, and <A HREF=Networking-161.html#MARKER-9-161>"PNSendRequest" on page 6-27</A> for more information about the functions that <BR>require a buffer data <A NAME=MARKER-2-67></A>structure. <A NAME=MARKER-2-16></A><A NAME=MARKER-2-4></A><A NAME=MARKER-2-129></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-176.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-178.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

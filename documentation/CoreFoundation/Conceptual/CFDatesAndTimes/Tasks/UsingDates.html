<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Dates and Times Programming Guide for Core Foundation: Using Dates</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using Dates"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001141" title="Using Dates"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000421" target="_top">Core Foundation</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000421-TP30000445" target="_top">Data Management</a> &gt; <a href="../index.html" target="_top">Dates and Times Programming Guide for Core Foundation</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/TimeZones.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20001141-DontLinkElementID_7" title="Using Dates"></a><hr /><H1><a name="//apple_ref/doc/uid/20001141-CJBEHAAG" title="Using Dates"></a>Using Dates</H1>

<p>This task contains examples on creating, comparing, and converting
dates. <span class="content_text"><a href="UsingDates.html#//apple_ref/doc/uid/20001141-100969">Listing 1</a></span> shows you how to get the current absolute time and
convert it into a CFDate object. </p>
<a name="//apple_ref/doc/uid/20001141-DontLinkElementID_8" title="Listing 1Creating a CFDate object"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001141-100969" title="Listing 1Creating a CFDate object"></a><strong>Listing 1&nbsp;&nbsp;</strong>Creating
a CFDate object</p>
<div class="codesample"><table><tr><td scope="row"><pre>CFAbsoluteTime      absTime;<span></span></pre></td></tr><tr><td scope="row"><pre>CFDateRef           aCFDate;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>absTime = CFAbsoluteTimeGetCurrent();<span></span></pre></td></tr><tr><td scope="row"><pre>aCFDate = CFDateCreate(kCFAllocatorDefault, absTime);<span></span></pre></td></tr></table></div>
<p>To compare two dates, use the compare function <code>CFDateCompare</code> as
shown in <span class="content_text"><a href="UsingDates.html#//apple_ref/doc/uid/20001141-101020">Listing 2</a></span>.</p>
<a name="//apple_ref/doc/uid/20001141-DontLinkElementID_9" title="Listing 2Comparing two CFDate objects"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001141-101020" title="Listing 2Comparing two CFDate objects"></a><strong>Listing 2&nbsp;&nbsp;</strong>Comparing
two CFDate objects</p>
<div class="codesample"><table><tr><td scope="row"><pre>// Standard Core Foundation comparison result.<span></span></pre></td></tr><tr><td scope="row"><pre>CFComparisonResult result;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Create two CFDates from absolute time.<span></span></pre></td></tr><tr><td scope="row"><pre>date1 = CFDateCreate(kCFAllocatorDefault, CFAbsoluteTimeGetCurrent());<span></span></pre></td></tr><tr><td scope="row"><pre>date2 = CFDateCreate(kCFAllocatorDefault, CFAbsoluteTimeGetCurrent());<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Pass NULL for the context param.<span></span></pre></td></tr><tr><td scope="row"><pre>result = CFDateCompare(date1, date2, NULL);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>switch (result) {<span></span></pre></td></tr><tr><td scope="row"><pre>    case kCFCompareLessThan:<span></span></pre></td></tr><tr><td scope="row"><pre>        printf(&quot;date1 is before date2!\n&quot;);<span></span></pre></td></tr><tr><td scope="row"><pre>        break;<span></span></pre></td></tr><tr><td scope="row"><pre>    case kCFCompareEqualTo:<span></span></pre></td></tr><tr><td scope="row"><pre>        printf(&quot;date1 is the same as date2!\n&quot;);<span></span></pre></td></tr><tr><td scope="row"><pre>        break;<span></span></pre></td></tr><tr><td scope="row"><pre>    case kCFCompareGreaterThan:<span></span></pre></td></tr><tr><td scope="row"><pre>        printf(&quot;date1 is after date2!\n&quot;);<span></span></pre></td></tr><tr><td scope="row"><pre>        break;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div>
<p>The <code>CFDateCompare</code> function
performs exact comparisons, which means it detects sub-second differences
between dates. You might want to compare dates with a less fine granularity.
For example, you might want to consider two dates equal if they
are within one minute of each other. This can be accomplished by
simply converting the CFDates to absolute time and comparing the
two floating-point values using your fuzziness factor. To compare
Gregorian units like month or week, you can convert both CFDates
to CFGregorianDate and compare the appropriate fields. Converting
absolute time to and from Gregorian dates is quite simple. <span class="content_text"><a href="UsingDates.html#//apple_ref/doc/uid/20001141-101156">Listing 3</a></span> demonstrates
how to do this.</p>
<a name="//apple_ref/doc/uid/20001141-DontLinkElementID_10" title="Listing 3Working with Gregorian dates"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001141-101156" title="Listing 3Working with Gregorian dates"></a><strong>Listing 3&nbsp;&nbsp;</strong>Working
with Gregorian dates</p>
<div class="codesample"><table><tr><td scope="row"><pre>Boolean             status;<span></span></pre></td></tr><tr><td scope="row"><pre>CFGregorianDate     gregDate;<span></span></pre></td></tr><tr><td scope="row"><pre>CFAbsoluteTime      absTime;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Construct a Gregorian date.<span></span></pre></td></tr><tr><td scope="row"><pre>gregDate.year = 1999;<span></span></pre></td></tr><tr><td scope="row"><pre>gregDate.month = 11;<span></span></pre></td></tr><tr><td scope="row"><pre>gregDate.day = 23;<span></span></pre></td></tr><tr><td scope="row"><pre>gregDate.hour = 17;<span></span></pre></td></tr><tr><td scope="row"><pre>gregDate.minute = 33;<span></span></pre></td></tr><tr><td scope="row"><pre>gregDate.second = 22.7;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Check the validity of the date.<span></span></pre></td></tr><tr><td scope="row"><pre>status = CFGregorianDateIsValid(gregDate, kCFGregorianAllUnits);<span></span></pre></td></tr><tr><td scope="row"><pre>printf(&quot;Is my Gregorian date valid? %d\n&quot;, status);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Convert the Gregorian date to absolute time.<span></span></pre></td></tr><tr><td scope="row"><pre>absTime = CFGregorianDateGetAbsoluteTime(gregDate, NULL);<span></span></pre></td></tr><tr><td scope="row"><pre>printf(&quot;The Absolute Time from a Gregorian date is: %d\n&quot;, absTime);<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/TimeZones.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-08-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/CoreFoundation/Conceptual/CFDatesAndTimes/Tasks/UsingDates.html%3Fid%3D10000125i-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/CoreFoundation/Conceptual/CFDatesAndTimes/Tasks/UsingDates.html%3Fid%3D10000125i-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/CoreFoundation/Conceptual/CFDatesAndTimes/Tasks/UsingDates.html%3Fid%3D10000125i-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Compatibility </TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="images/space.gif" width="6" height="12"></b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> PowerBook G3 Series 1999		</font></td>	</tr>	</table><!-- end of path --><hr></DIV><H1 CLASS="H3.Heading3"><A NAME="pgfId=3339"> </A><A NAME="27176"> </A>Compatibility <A NAME="marker=3338"> </A></H1><P CLASS="T1.Text1"><A NAME="pgfId=3340"> </A>A Mac OS ROM image that is in write-protected RAM will appear to be a ROM to all MacOS software and applications. Because the image of the Mac OS ROM in RAM appears to be a ROM, the ROM-in-RAM approach is completely compatible with all application and system software.</P><P CLASS="T1.Text1"><A NAME="pgfId=3341"> </A>The Mac OS ROM image is kept in a file in the System Folder on the specified boot device. In order to avoid problems with localizing the name, the file is located by file type instead of by name.</P><P CLASS="T1.Text1"><A NAME="pgfId=3342"> </A>In order for Open Firmware to retrieve the Mac OS ROM image file, it must be able to read the selected boot device. If the Mac OS ROM image file is on a partition that is on a RAID, encrypted, striped, or otherwise non-standard device, Open Firmware must be able to read from these devices in order to boot the Mac OS. Two possible solutions to this problem are to have a standard partition available on the device that contains the Mac OS ROM image file, or to provide Open Firmware methods to read the file.<A NAME="marker=3343"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3344"> </A>The main incompatibility that ROM-in-RAM approach introduces is that memory is not mapped one-to-one, as it has been for previous PCI-based Macs. Software that assumes the logical and physical addresses are the same will fail, even when virtual memory is not on. Well-behaved software--that is, software that always calls the <TT CLASS="cv">LogicalToPhysical</TT> or <TT CLASS="cv">PrepareMemoryForIO</TT> functions when it needs a physical memory address--will continue to work.<A NAME="marker=3345"> </A><A NAME="marker=4856"> </A> <A NAME="marker=3346"> </A><A NAME="marker=3347"> </A></P><DIV><BLOCKQUOTE><H4 CLASS="ImportantHead"><A NAME="pgfId=15151"> </A>IMPORTANT</H4><P CLASS="I.Important"><A NAME="pgfId=4150"> </A>Designers of DMA device drivers should refer to <I CLASS="italics">Designing PCI Cards and Drivers for Power Macintosh Computers</I> for information about using the <TT CLASS="cv">PrepareMemoryForIO</TT> function to set up mapping for physical and logical addresses. The relevant section is on pages 219-229. For device drivers running with the NewWorld software, the sentence on page 227 that says &quot;Certain DMA transactions require both mapping tables&quot; should be interpreted to mean &quot;All DMA transactions...&quot; </P></BLOCKQUOTE></DIV><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 29 April  99)<P><A HREF="101_.5c.html"><img src="images/up.gif" border="0" alt="Up"></A> <A HREF="101_.62.html"><img src="images/previous.gif" border="0" alt="Previous"></A> <A HREF="101_.64.html"><img src="images/next.gif" border="0" alt="Next"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script><!-- end Show/Hide frames --></a><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
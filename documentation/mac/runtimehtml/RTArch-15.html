<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Overview</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING15></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="RTArch-14.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-16.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="RTArch-2.html"><B>Mac OS Runtime Architectures</B></A> / <BR><DD><A HREF="RTArch-14.html"><B>Chapter 1 - CFM-Based Runtime Architecture</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING15-0></A>
<H1>Overview</H1>
 <A NAME=MARKER-2-28></A>In the CFM-based architecture, a fragment is the basic unit of executable code and its associated data. All fragments share fundamental properties such as basic structure and method of addressing code and data. The major advantage of a fragment-based architecture is that a fragment can easily access code or data contained in another fragment. For example, a fragment can import routines or data items from another fragment or export them for another fragment's use. In addition, fragments that export items may be shared among multiple clients. <P>
<DL>
<DT><B>Note</B>
<DD>The term fragment is not intended to suggest that the block of code and data is in any way either small, detached, or incomplete. Fragments can be of virtually any size, and they are complete, executable entities. The term fragment was chosen to avoid confusion with the terms already used in Inside Macintosh volumes to describe executable code (such as component and module).<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 The Code Fragment Manager handles fragment preparation<B>,</B> which involves bringing a fragment into memory and making it ready for execution. Fragments can be grouped by use into applications and shared libraries, but fundamentally the Code Fragment Manager treats them alike. <P>
 <A NAME=MARKER-2-22></A>Fragment-based applications are launched from the Finder. Typically they have a user interface and use event-driven programming to control their execution. <P>
 <A NAME=MARKER-2-23></A>A <B>shared library,</B> however, is a fragment that exports code and data for use by other fragments. Unlike a traditional static library, which the linker includes in the application during the build process, a shared library remains a separate entity. For a shared library, the linker inserts a reference to an imported function or data item into the client fragment. When the fragment is prepared, the Code Fragment Manager creates incarnations of the shared libraries required by the fragment and binds all references to imported code and data to addresses in the appropriate libraries. A shared library is stored independently of the fragment that uses it and can therefore be shared among multiple clients.<P>
<DL>
<DT><B>Note</B>
<DD>Shared libraries are sometimes referred to as dynamically linked libraries (DLLs), since the application and the externally referenced code or data are linked together dynamically when the application launches.<EM></EM><EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 <A NAME=MARKER-2-24></A>Using a shared library offers many benefits based on the fact that its code is not directly linked into one or more fragments but exists as a separate entity that multiple fragments can address at runtime. If you are developing several CFM-based applications that have parts of their source code in common, you should consider packaging all the common code into a shared library. <P>
 Here are some ways to take advantage of shared libraries:<P>
<UL>
<LI>An application framework can be packaged as a shared library. This potentially saves a good deal of disk space because that library resides only once on disk--where it can be addressed by multiple applications--rather than being linked physically into numerous applications. 
<LI>System functions and tools, such as OpenDoc, can be packaged as shared libraries. 
<LI>Updates and bug fixes for a single library can be released without the need to recompile and send copies of all the applications that use the library.<P>
</UL>
 Shared libraries come in two basic forms:<P>
<UL>
<LI><B>I</B><A NAME=MARKER-2-25></A><B>mport libraries.</B> These contain code and data that your application requires to run. The Code Fragment Manager automatically prepares these libraries at runtime. Import libraries do not occupy application memory but are stored separately. 
<LI><B><A NAME=MARKER-2-26></A>Plug-ins.</B> These are libraries that provide optional services, such as a spelling checker for a word processor. The application must make explicit calls to the Code Fragment Manager to prepare these libraries and must then find the symbols associated with the libraries. Plug-ins are sometimes referred to as drop-in additions or extensions.<P>
</UL>
<DL>
<DT><B>Note</B>
<DD><A NAME=MARKER-2-27></A>Although the terms are similar, shared library and import library are not interchangeable. An import library is a shared library, but a shared library is not necessarily an import library.<EM></EM><A NAME=MARKER-2-35></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 In the CFM-based runtime architecture, the Code Fragment Manager handles the manipulation of fragments. Some of its functions include<P>
<UL>
<LI>mapping fragments into memory and releasing them when no longer needed
<LI>resolving references to symbols imported from other fragments
<LI>providing support for special initialization and termination routines<P>
</UL>
 Fragments can be shared within a process or between two or more processes. A <A NAME=MARKER-2-29></A>process defines the scope of an independently-running program. Typically each process contains a separate application and any related plug-ins. <P>
 The physical incarnation of a fragment within a process is called a connection<B>.</B> A fragment may have several unique connections, each local to a particular process. Each connection is assigned a <A NAME=MARKER-2-30></A>connection ID. For more information on how the Code Fragment Manager groups connections into functional programs, see <A HREF=RTArch-16.html#MARKER-9-33>"Closures" (page 1-6)</A>.<P>
 <A NAME=MARKER-2-31></A>Fragments are physically stored in containers<B>,</B> which can be any kind of storage area accessible by the Code Fragment Manager. For example, in System 7 the system software import library <CODE>InterfaceLib</CODE> is stored in the ROM of a PowerPC-based Macintosh computer. Other import libraries are typically stored in files of type <CODE><A NAME=MARKER-2-32></A>'shlb'</CODE>. Fragments containing executable code are usually stored in the data fork of a file, although it is possible to store a fragment as a resource in the resource fork. For more information about container storage, see <A HREF=RTArch-24.html#MARKER-9-69>"Fragment Storage" (page 1-24)</A>, and <A HREF=RTArch-89.html#MARKER-9-32>Chapter 8, "PEF Structure."</A><P>
<HR>
<center>
<A HREF="RTArch-14.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-16.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="RTArch-3.html">&copy; Apple Computer, Inc.</A><br>11 MARCH 1997<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 


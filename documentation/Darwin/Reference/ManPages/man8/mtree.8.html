<html><head><title>Mac OS X
 Manual Page For mtree(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/mtree" title="Mac OS X
 Manual Page for mtree(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/mtree"; name=mtree(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MTREE(8)                  BSD System Manager's Manual                 MTREE(8)

<b>NAME</b>
     <b>mtree</b> -- map a directory hierarchy

<b>SYNOPSIS</b>
     <b>mtree</b> [<b>-LPUcdeinqruxw</b>] [<b>-f</b> <u>spec</u>] [<b>-f</b> <u>spec</u>] [<b>-K</b> <u>keywords</u>] [<b>-k</b> <u>keywords</u>] [<b>-p</b> <u>path</u>] [<b>-s</b> <u>seed</u>]
           [<b>-X</b> <u>exclude-list</u>]

<b>DESCRIPTION</b>
     The <b>mtree</b> utility compares the file hierarchy rooted in the current directory against a specification
     read from the standard input.  Messages are written to the standard output for any files whose charac-<font color="#ffffff" class="whiteout">teristics&nbsp;characteristics</font>
     teristics do not match the specifications, or which are missing from either the file hierarchy or the
     specification.

     The options are as follows:

     <b>-c</b>    Print a specification for the file hierarchy to the standard output.

     <b>-d</b>    Ignore everything except directory type files.

     <b>-e</b>    Do not complain about files that are in the file hierarchy, but not in the specification.

     <b>-f</b> <u>file</u>
           Read the specification from <u>file</u>, instead of from the standard input.

           If this option is specified twice, the two specifications are compared with each other, rather
           than to the file hierarchy.  The specifications be sorted like output generated using <b>-c</b>.  The
           output format in this case is somewhat remniscent of <a href="../man1/comm.1.html#//apple_ref/doc/man/1/comm">comm(1)</a>, having "in first spec only", "in
           second spec only", and "different" columns, prefixed by zero, one and two TAB characters respec-<font color="#ffffff" class="whiteout">tively.&nbsp;respectively.</font>
           tively.  Each entry in the "different" column occupies two lines, one from each specification.

     <b>-i</b>    Indent the output 4 spaces each time a directory level is descended when create a specification
           with the <b>-c</b> option.  This does not affect either the /set statements or the comment before each
           directory.  It does however affect the comment before the close of each directory.

     <b>-K</b> <u>keywords</u>
           Add the specified (whitespace or comma separated) <u>keywords</u> to the current set of keywords.

     <b>-k</b> <u>keywords</u>
           Use the ``type'' keyword plus the specified (whitespace or comma separated) <u>keywords</u> instead of
           the current set of keywords.

     <b>-L</b>    Follow all symbolic links in the file hierarchy.

     <b>-n</b>    Do not emit pathname comments when creating a specification.  Normally a comment is emitted
           before each directory and before the close of that directory when using the <b>-c</b> option.

     <b>-P</b>    Do not follow symbolic links in the file hierarchy, instead consider the symbolic link itself in
           any comparisons.  This is the default.

     <b>-p</b> <u>path</u>
           Use the file hierarchy rooted in <u>path</u>, instead of the current directory.

     <b>-q</b>    Quiet mode.  Do not complain when a ``missing'' directory cannot be created because it already
           exists.  This occurs when the directory is a symbolic link.

     <b>-r</b>    Remove any files in the file hierarchy that are not described in the specification.

     <b>-s</b> <u>seed</u>
           Display a single checksum to the standard error output that represents all of the files for which
           the keyword <b>cksum</b> was specified.  The checksum is seeded with the specified value.

     <b>-U</b>    Modify the owner, group, permissions, and modification time of existing files to match the speci-<font color="#ffffff" class="whiteout">fication&nbsp;specification</font>
           fication and create any missing directories or symbolic links.  User, group and permissions must
           all be specified for missing directories to be created.  Corrected mismatches are not considered
           errors.

     <b>-u</b>    Same as <b>-U</b> except a status of 2 is returned if the file hierarchy did not match the specifica-<font color="#ffffff" class="whiteout">tion.&nbsp;specification.</font>
           tion.

     <b>-w</b>    Make some error conditions non-fatal warnings.

     <b>-X</b> <u>exclude-list</u>
           The specified file contains <a href="../man3/fnmatch.3.html#//apple_ref/doc/man/3/fnmatch">fnmatch(3)</a> patterns matching files to be excluded from the specifica-<font color="#ffffff" class="whiteout">tion,&nbsp;specification,</font>
           tion, one to a line.  If the pattern contains a `/' character, it will be matched against entire
           pathnames (relative to the starting directory); otherwise, it will be matched against basenames
           only.  No comments are allowed in the <u>exclude-list</u> file.

     <b>-x</b>    Do not descend below mount points in the file hierarchy.

     Specifications are mostly composed of ``keywords'', i.e., strings that specify values relating to
     files.  No keywords have default values, and if a keyword has no value set, no checks based on it are
     performed.

     Currently supported keywords are as follows:

     <b>cksum</b>       The checksum of the file using the default algorithm specified by the <a href="../man1/cksum.1.html#//apple_ref/doc/man/1/cksum">cksum(1)</a> utility.

     <b>flags</b>       The file flags as a symbolic name.  See <a href="../man1/chflags.1.html#//apple_ref/doc/man/1/chflags">chflags(1)</a> for information on these names.  If no
                 flags are to be set the string ``none'' may be used to override the current default.

     <b>ignore</b>      Ignore any file hierarchy below this file.

     <b>gid</b>         The file group as a numeric value.

     <b>gname</b>       The file group as a symbolic name.

     <b>md5digest</b>   The MD5 message digest of the file.

     <b>sha1digest</b>  The FIPS 160-1 (``SHA-1'') message digest of the file.

     <b>ripemd160digest</b>
                 The RIPEMD160 message digest of the file.

     <b>mode</b>        The current file's permissions as a numeric (octal) or symbolic value.

     <b>nlink</b>       The number of hard links the file is expected to have.

     <b>nochange</b>    Make sure this file or directory exists but otherwise ignore all attributes.

     <b>uid</b>         The file owner as a numeric value.

     <b>uname</b>       The file owner as a symbolic name.

     <b>size</b>        The size, in bytes, of the file.

     <b>link</b>        The file the symbolic link is expected to reference.

     <b>time</b>        The last modification time of the file.

     <b>type</b>        The type of the file; may be set to any one of the following:

                 <b>block</b>       block special device
                 <b>char</b>        character special device
                 <b>dir</b>         directory
                 <b>fifo</b>        fifo
                 <b>file</b>        regular file
                 <b>link</b>        symbolic link
                 <b>socket</b>      socket

     The default set of keywords are <b>flags</b>, <b>gid</b>, <b>mode</b>, <b>nlink</b>, <b>size</b>, <b>link</b>, <b>time</b>, and <b>uid</b>.

     There are four types of lines in a specification.

     The first type of line sets a global value for a keyword, and consists of the string ``/set'' followed
     by whitespace, followed by sets of keyword/value pairs, separated by whitespace.  Keyword/value pairs
     consist of a keyword, followed by an equals sign (``=''), followed by a value, without whitespace char-<font color="#ffffff" class="whiteout">acters.&nbsp;characters.</font>
     acters.  Once a keyword has been set, its value remains unchanged until either reset or unset.

     The second type of line unsets keywords and consists of the string ``/unset'', followed by whitespace,
     followed by one or more keywords, separated by whitespace.

     The third type of line is a file specification and consists of a file name, followed by whitespace,
     followed by zero or more whitespace separated keyword/value pairs.  The file name may be preceded by
     whitespace characters.  The file name may contain any of the standard file name matching characters
     (``['', ``]'', ``?'' or ``*''), in which case files in the hierarchy will be associated with the first
     pattern that they match.

     Each of the keyword/value pairs consist of a keyword, followed by an equals sign (``=''), followed by
     the keyword's value, without whitespace characters.  These values override, without changing, the
     global value of the corresponding keyword.

     All paths are relative.  Specifying a directory will cause subsequent files to be searched for in that
     directory hierarchy.  Which brings us to the last type of line in a specification: a line containing
     only the string ``<u>..</u>'' causes the current directory path to ascend one level.

     Empty lines and lines whose first non-whitespace character is a hash mark (``#'') are ignored.

     The <b>mtree</b> utility exits with a status of 0 on success, 1 if any error occurred, and 2 if the file hier-<font color="#ffffff" class="whiteout">archy&nbsp;hierarchy</font>
     archy did not match the specification.  A status of 2 is converted to a status of 0 if the <b>-U</b> option is
     used.

<b>FILES</b>
     /etc/mtree  system specification directory

<b>EXIT</b> <b>STATUS</b>
     The <b>mtree</b> utility exits 0 on success, and &gt;0 if an error occurs.

<b>EXAMPLES</b>
     The <b>-d</b> and <b>-u</b> options can be used in combination to create directory hierarchies for distributions and
     other such things; the files in <u>/etc/mtree</u> were used to create almost all directories in this FreeBSD
     distribution.

<b>SEE</b> <b>ALSO</b>
     <a href="../man1/chflags.1.html#//apple_ref/doc/man/1/chflags">chflags(1)</a>, <a href="../man1/chgrp.1.html#//apple_ref/doc/man/1/chgrp">chgrp(1)</a>, <a href="../man1/chmod.1.html#//apple_ref/doc/man/1/chmod">chmod(1)</a>, <a href="../man1/cksum.1.html#//apple_ref/doc/man/1/cksum">cksum(1)</a>, <a href="../man1/md5.1.html#//apple_ref/doc/man/1/md5">md5(1)</a>, <a href="../man2/stat.2.html#//apple_ref/doc/man/2/stat">stat(2)</a>, <a href="../man3/fts.3.html#//apple_ref/doc/man/3/fts">fts(3)</a>, <a href="../man3/md5.3ssl.html#//apple_ref/doc/man/3/md5">md5(3)</a>, <a href="chown.8.html#//apple_ref/doc/man/8/chown">chown(8)</a>

<b>HISTORY</b>
     The <b>mtree</b> utility appeared in 4.3BSD-Reno.  The MD5 digest capability was added in FreeBSD 2.1, in
     response to the widespread use of programs which can spoof <a href="../man1/cksum.1.html#//apple_ref/doc/man/1/cksum">cksum(1)</a>.  The SHA-1 and RIPEMD160 digests
     were added in FreeBSD 4.0, as new attacks have demonstrated weaknesses in MD5.  Support for file flags
     was added in FreeBSD 4.0, and mostly comes from NetBSD.

BSD                             March 29, 2005                             BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/mtree.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/mtree.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/mtree.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

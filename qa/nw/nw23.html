<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A NW23: PSetSelfSend in Classic AppleTalk vs. Open Transport AppleTalk</title><meta name="keywords" content="Mac OS 8 Open Transport AppleTalk Classic PSetSelfSend"><meta name="Description" content="Technical Q&amp;A NW23: Q&amp;A describes the relationship betweenPSetSelfSend in Classic AppleTalk and Open Transport AppleTalk,and provides a code snippet showing how to change the PSetSelfSendvariable in Open Transport."><meta name="categories" content="Networking"><meta name="week-posted" content="May 13, 1996 - May 17, 1996"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001435" title="PSetSelfSend in Classic AppleTalk vs. Open Transport AppleTalk"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/Networking/index.html">Networking</a> &gt; <a href="../../technicalqas/Networking/idxCarbon-date.html">Carbon</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A NW23</div>
<div id="pageheadsub">PSetSelfSend in Classic AppleTalk vs. Open Transport AppleTalk</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->						<!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600><TR> <td align="left"><hr width=500 align=center><p id = p2>Q:  What's the relationship between the classic AppleTalk <code>PSetSelfSend</code> call andOpen Transport AppleTalk?</p><p id=p4>A:  In version 1.1, Open Transport AppleTalk shares a "self send" variable withclassic AppleTalk, i.e., if you set the variable using the classic<code>PSetSelfSend</code>, the effects are seen by native clients, and vice versa.</p><p id=p4>If you're using OT native interfaces, you can change the variable using anioctl call, as shown in the snippet below.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>enum {    kATalkFullSelfSend        = MIOC_CMD(MIOC_ATALK, 47)};static OSStatus OTSetSelfSend(EndpointRef ep, Boolean enable_self_send){  OSStatus result;  result = OTIoctl(ep, kATalkFullSelfSend, (void *) enable_self_send);  if (result &gt; noErr) {    result = noErr;  }  return result;}</pre>	</TD></TR></TABLE></CENTER><p id=p4>Note that, like the <code>PSetSelfSend</code> call, the <code>ioctl</code> returns the previous value ofthe self send variable as either 0 (it was previously disabled) or 1 (it waspreviously enabled). As in classic AppleTalk, it's rarely appropriate torestore the value of self send when you're done, so the code above maps bothresults to <code>noErr</code>.</p><p id=p4>The self send value is a <code>Boolean</code>, not a counter. For example, if the followingsequence happens:</p><ol><li>self send starts out <code>false</code></li><li>client A sets self send to <code>true</code>, is returned <code>false</code> as the previous value</li><li>client B sets self send to <code>true</code>, is returned <code>true</code> as the previous value</li><li>client A quits, "restoring" self send to <code>false</code></li></ol><p id=p4>then client B is left with self send set to <code>false</code>.</p><p id=p4>For this reason, the standard practice is to set self send if you need it andnot attempt to restore it. Because many clients follow this convention, it'simportant that your program work even if self send is true.</p><p id=p4>Future versions of OT will most probably have self send always on for OT nativeclients and loop-back packets will be filtered out only for classic clients if<code>PSetSelfSend</code> wasn't called.</p></td></tr></table></center><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[May 14 1996]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/nw/nw23.html%3Fid%3DDTS10001435-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/nw/nw23.html%3Fid%3DDTS10001435-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/nw/nw23.html%3Fid%3DDTS10001435-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --><hr width=500 align=center> </BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>CCL Modem Scripting Guide: CCL Script Syntax</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="CCL Script Syntax"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40005464-CH9" title="CCL Script Syntax"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP40003576" target="_top">Hardware &amp; Drivers</a> &gt; <a href="../../../Serial-date.html#//apple_ref/doc/uid/TP30000440-TP40003576-TP30001045" target="_top">Serial</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40005464-CH1-DontLinkElementID_67">CCL Modem Scripting Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ScriptBasics/ScriptBasics.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ExternalVariableStorage/ExternalVariableStorage.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_66" title="CCL Script Syntax"></a><h1>CCL Script Syntax</h1><p>A modem script is a set of instructions that tells a computer how to interact with a modem so that calls can be initiated and received. To establish a connection, a script typically configures and then connects the modem. To terminate a connection, the script disconnects the modem by hanging up and then restores the modem settings that were in effect before the call.</p><p>Each type of modem used with Mac OS X requires a modem script. Many scripts are provided with Mac OS X. (See <span class="content_text"><a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40005464-CH1-SW1">“Available Modem Scripts”</a></span> in the Introduction of this document for more information.)</p><p>If no script is provided for your modem, you must write one using Communication Command Language (CCL), a programming language that configures and controls your modem. This section describes the basic elements and structure of a CCL file. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_37">CCL Commands</a>
				
			<br/>
			
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_38">Comments</a>
				
			<br/>
			
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_39">Capitalization</a>
				
			<br/>
			
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_40">Labels</a>
				
			<br/>
			
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_41">String Formats</a>
				
			<br/>
			
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-SW1">Variable Strings (varStrings)</a>
				
			<br/>
			
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_42">Match Strings</a>
				
			<br/>
			
        
			
			
				<a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_43">Script Size</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_37" title="CCL Commands"></a><h2>CCL Commands</h2><p>Each line of CCL code consists of one instruction that is made up of a command and its parameters, if any. Modem commands are used as parameters of CCL commands. For example, the command <code>write "ATDT^1\13"</code> includes the following:</p><ul class="ul"><li class="li"><p>a CCL command, <code>write</code></p></li><li class="li"><p>a modem command, <code>ATDT</code></p></li><li class="li"><p>a modem command parameter, <code>^1\13</code></p></li></ul><p>This command tells the CCL interpreter to send to the modem the modem command <code>ATDT</code> followed by variable string #1, and a carriage return (ASCII code 13).</p><p>The CCL interpreter reads scripts from left to right and from top to bottom. It reads straight through, from beginning to end, unless you tell it otherwise (for example, by using the <code>JUMP</code> command).</p><p>For a complete list of commands and their usage, see <span class="content_text"><a href="../CCLCommands/CCLCommands.html#//apple_ref/doc/uid/TP40005464-CH4-SW1">“CCL Command Reference.”</a></span></p><a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_38" title="Comments"></a><h2>Comments</h2><p>You can insert explanatory comments into your script. To enter a comment, start the line with an exclamation point (<code>!</code>).</p><p>You may also want to use a blank comment line to make your script more readable; to do so, type an exclamation point with no text and press Return.</p><a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_39" title="Capitalization"></a><h2>Capitalization</h2><p>The CCL interpreter is not case sensitive. Therefore, <code>@LABEL 1</code>, <code>@Label 1</code>, <code>@label 1</code>, and <code>@laBel 1</code> are all valid (and equivalent) instructions.</p><a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_40" title="Labels"></a><h2>Labels</h2><p>Labels are used to mark locations in the script. Other script commands, such as <code>JUMP</code>, transfer control to locations in the script marked by the <code>@LABEL</code> command. For instance, <code>JUMP 13</code> tells the CCL interpreter to jump to label 13 and start executing the commands after the <code>@LABEL 13</code> command. A script may use up to 128 labels, numbered 1–128.</p><a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_41" title="String Formats"></a><h2>String Formats</h2><p>To delimit a string in CCL code, you can use single quotation marks (<code>'</code>) or double quotation marks (<code>"</code>). If you do not start the string with a single or double quotation mark, any of the following characters determines the end of the string: space, return, tab, comma, or semicolon.</p><p>CCL strings may include references to variable strings. See <span class="content_text"><a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-SW1">“Variable Strings (varStrings)”</a></span> later in this chapter for details.</p><p>CCL strings may include nonprinting characters such as null, tab, and return. To support these nonprinting characters, the CCL interpreter recognizes two special characters: the backslash (<code>\</code>) and the caret (<code>^</code>).</p><p>The backslash is a quote character. You can use the backslash to include a nonprinting character by specifying the decimal representation of the ASCII character (decimal numbers 00 to 99 are valid) or to explicitly include the backslash or caret character in a string.</p><p>The caret is a variable delimiter character. You can use it to insert a variable string or an ASK string into another string. (For details, see <span class="content_text"><a href="CCLScriptSyntax.html#//apple_ref/doc/uid/TP40005464-CH9-SW1">“Variable Strings (varStrings)”</a></span> later in this chapter.)</p><p>Here are some examples of how the backslash and caret are used:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>String</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Result</p></th></tr><tr><td  scope="row"><p><code>\13</code></p></td><td ><p>inserts a carriage return (0x0D) into the string</p></td></tr><tr><td  scope="row"><p><code>\00</code></p></td><td ><p>inserts the null character (0x00) into the string</p></td></tr><tr><td  scope="row"><p><code>\\</code></p></td><td ><p>inserts the backslash (\) character (0x5C) into the string</p></td></tr><tr><td  scope="row"><p><code>\^</code></p></td><td ><p>inserts the caret (^) character (0x5E) into the string</p></td></tr><tr><td  scope="row"><p><code>^1</code></p></td><td ><p>inserts variable string 1 into the string</p></td></tr><tr><td  scope="row"><p><code>^*</code></p></td><td ><p>inserts the ASK string into the string</p></td></tr></table></div><p>Here are some string examples:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>String contents</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Printed Output</p></th></tr><tr><td  scope="row"><code>'this is a test'</code></td><td ><code>this is a test</code></td></tr><tr><td  scope="row"><code>thisisatest</code></td><td ><code>thisisatest</code></td></tr><tr><td  scope="row"><code>"this is a test"</code></td><td ><code>this is a test</code></td></tr><tr><td  scope="row"><code>this is a test</code></td><td ><code>this</code></td></tr><tr><td  scope="row"><code>"this \34\73\83\34 a test"</code></td><td ><code>this "IS" a test</code></td></tr><tr><td  scope="row"><code>"ATDT^1"</code></td><td ><code>ATDT555-1212</code>(if variable string 1 is 555-1212)</td></tr></table></div><a name="//apple_ref/doc/uid/TP40005464-CH9-SW1" title="Variable Strings (varStrings)"></a><h2>Variable Strings (varStrings)</h2><p>CCL strings may include references to variable strings, which are strings passed to the script as parameters. Most of these values are provided by Mac OS X based on user-specified parameters.</p>
<p>Mac OS X uses the following variable strings:</p>
<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Variable String</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Contents</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Values</p></th></tr>
<tr><td  scope="row"><p><code>varString1</code></p></td><td >
<p>The complete dial string (the telephone number to dial, with the necessary prefixes and suffixes).</p></td><td ></td></tr>
<tr><td  scope="row"><p><code>varString2</code></p></td><td >
	<p>The modem speaker flag:</p></td><td ><ul class="simple">
		<li><p><code>0</code>—Speaker off.</p></li>
		<li><p><code>1</code>—Speaker on.</p></li></ul></td></tr>

<tr><td  scope="row"><p><code>varString3</code></p></td><td >
	<p>The tone/pulse dialing selector:</p></td><td ><ul class="simple">
		<li><p><code>T</code>—Tone dialing.</p></li>
		<li><p><code>P</code>—Pulse dialing.</p></li></ul></td></tr>

<tr><td  scope="row"><p><code>varString4</code></p></td><td >
	<p>The modem error correction flag:</p></td><td ><ul class="simple">
		<li><p><code>0</code>—Script should not try to use modem  error correction.</p></li>
		<li><p><code>1</code>—Script should try to use modem error correction.</p></li>
		<li><p><code>2</code>—Script should try to establish MNP10  error correction.</p></li></ul></td></tr>

<tr><td  scope="row"><p><code>varString5</code></p></td><td >
	<p>Reserved for future use.</p></td><td ><p></p></td></tr>
<tr><td  scope="row"><p><code>varString6</code></p></td><td >
	<p>The dialing mode flag:</p></td><td ><ul class="simple">
		<li><p><code>0</code>—Normal dialing.</p></li>
		<li><p><code>1</code>—Blind dialing (that is, have the modem begin  dialing without confirmation of dial tone  detection).</p></li>
		<li><p><code>2</code>—Manual dialing (that is, have the script assume  that the user has already picked up the phone and dialed the remote number).</p></li></ul></td></tr>
<tr><td  scope="row"><p><code>varString7</code>–<code>varString9</code></p></td><td >
	<p>Variable strings 7–9 break a long dial string into shorter strings for use with modems that can accept only a limited command string size. They are automatically generated by Mac OS X.</p></td><td ><p>The variables <code>varString7</code>, <code>varString8</code>, and <code>varString9</code> contain the contents of <code>varString1</code> divided into shorter pieces. Each of these strings is limited to 40 characters in length. Additional characters that will not fit into <code>varString7</code> spill over automatically into <code>varString8</code>, and so on.</p><p>If one or more of these three variables are unused, the empty variables contain a blank string (ASCII <code>20</code> hex). See <span class="content_text"><a href="../ExternalVariableStorage/ExternalVariableStorage.html#//apple_ref/doc/uid/TP40005464-CH7-SW1">“About mlts Resource Storage”</a></span> for legacy information about these strings.</p></td></tr>
<tr><td  scope="row"><p><code>varString27</code>–<code>varString30</code></p></td><td >
	<p>Defined in the information property list in your CCL script bundle. See <span class="content_text"><a href="../ExternalVariableStorage/ExternalVariableStorage.html#//apple_ref/doc/uid/TP40005464-CH7-SW2">“CCL Bundles and Property Lists”</a></span> for information.</p></td><td ><p></p></td></tr>
</table></div>
<p>All eight variable strings are passed to the script when it is running in originate mode. The modem speaker flag (<code>varString2</code>) and the error correction flag (<code>varString4</code>) are passed to the script when it is running in answer mode.</p>
<a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_42" title="Match Strings"></a><h2>Match Strings</h2><p>The CCL interpreter has a buffer that can hold up to 32 strings loaded by the <code>MATCHSTR</code> command. The <code>MATCHCLR</code> command erases the contents of the buffer. The <code>MATCHREAD</code> command reads input from the modem or other communication device and compares the input to the strings currently in the buffer. If a match is found in the specified time, execution continues at the label associated with that match string.</p><p>A recommended strategy for sending commands to the modem is as follows:</p><ul class="ul"><li class="li"><p>Use <code>MATCHCLR</code> to clear all match strings.</p></li><li class="li"><p>Use <code>MATCHSTR</code> to load match strings with appropriate responses.</p></li><li class="li"><p>Use <code>WRITE</code> to send commands to the modem.</p></li><li class="li"><p>Use <code>MATCHREAD</code> to check for defined modem responses. If an appropriate response is received, branch as defined by the corresponding <code>MATCHSTR</code> command.</p></li><li class="li"><p>Use <code>SETTRIES</code>, <code>INCTRIES</code>, and <code>IFTRIES</code> to loop a few times.</p></li><li class="li"><p>If an appropriate response is not received, branch to exit or to alternate code as defined by the <code>MATCHREAD</code> command.</p></li></ul><a name="//apple_ref/doc/uid/TP40005464-CH9-DontLinkElementID_43" title="Script Size"></a><h2>Script Size</h2><p>Scripts may be a maximum of 32000 bytes. This is large enough for relatively complex dial scripts. However, if your script is too large, you may be able to make it small enough by minimizing the number and length of comments.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ScriptBasics/ScriptBasics.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ExternalVariableStorage/ExternalVariableStorage.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-06-28<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/HardwareDrivers/Reference/CCLScriptingRef/CCLScriptSyntax/CCLScriptSyntax.html%3Fid%3DTP40005464-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/HardwareDrivers/Reference/CCLScriptingRef/CCLScriptSyntax/CCLScriptSyntax.html%3Fid%3DTP40005464-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/HardwareDrivers/Reference/CCLScriptingRef/CCLScriptSyntax/CCLScriptSyntax.html%3Fid%3DTP40005464-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
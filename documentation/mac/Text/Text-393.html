<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>CharacterType(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING393></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-392.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-394.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-354.html"><B>Chapter 6 - Script Manager</B></A> / <A HREF="Text-365.html"><B>Script Manager Reference</B></A><BR><DL><DD><A HREF="Text-375.html"><B>Routines</B></A> / <A HREF="Text-391.html"><B>Analyzing Characters</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING393-0></A>
<H3><A NAME=MARKER-9-954></A>CharacterType</H3>
 <A NAME=MARKER-2-955></A>The <CODE>CharacterType</CODE> function returns a variety of information about the character represented by a given byte, including its type, class, orientation, direction, case, and size (in bytes).<P>
<PRE>
FUNCTION CharacterType (textBuf: Ptr; textOffset: Integer; 
                        script: ScriptCode): Integer;
</PRE>
<DL>
<DT><CODE>textBuf</CODE>
<DD> A<CODE> </CODE>pointer to a text buffer containing the character to be examined.
<DT><CODE>textOffset</CODE>
<DD> <BR>The offset to the location of the character to be examined. (It can be an offset to either the first or the second byte of a 2-byte character.) Offset is in bytes; the first byte of the first character has an offset of 0.
<DT><CODE>script</CODE>
<DD> A value that specifies the script system the byte belongs to. Constants for all defined script codes are listed on <A HREF=Text-367.html#MARKER-9-788>page 6-52</A>. To specify the font script, pass <CODE>smCurrentScript</CODE> in this parameter. 
</DL>
<A NAME=HEADING393-6></A>
<H5>DESCRIPTION</H5>
 <A NAME=MARKER-2-956></A>The <CODE>CharacterType</CODE> return value is an integer bit field that provides information about the requested character. The field has the following format:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Bit range<TH>Name<TH>Explanation<TR>
<TD>0-3<TD>Type<TD>Character types<TR>
<TD>4-7<TD>&nbsp;<TD>(reserved)<TR>
<TD>8-11<TD>Class<TD>Character classes ( = subtypes)<TR>
<TD>12<TD>Orientation<TD>Horizontal or vertical<TR>
<TD>13<TD>Direction<TD>Left or right<A HREF="#FOOTNOTE-6">[6]</A><TR>
<TD>14<TD>Case<TD>Uppercase or lowercase<TR>
<TD>15<TD>Size<TD>1-byte or 2-byte</TABLE>
<P>
 The Script Manager defines the recognized character types, character classes, and character modifiers (bits 12-15), with constants to describe them. All of the constants are listed and described in the section <A HREF=Text-362.html#MARKER-9-698>"Getting Character-Type Information" beginning on page 6-28</A>.<P>
 The Script Manager also defines a set of masks with which you can isolate each of the fields in the <CODE>CharacterType</CODE> return value. If you perform an <CODE>AND</CODE> operation with the <CODE>CharacterType</CODE> result and the mask for a particular field, you select only the bits in that field. Once you've done that, you can test the result, using the constants that represent the possible results.<P>
 <A NAME=MARKER-2-957></A>The <CODE>CharacterType</CODE> field masks are the following:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Mask<TH>Hex. value<TH>Explanation<TR>
<TD><A NAME=MARKER-2-285></A>smcTypeMask<TD>$000F<TD>Character-type mask<TR>
<TD><A NAME=MARKER-2-286></A>smcReserved<TD>$00F0<TD>(reserved)<TR>
<TD><A NAME=MARKER-2-287></A>smcClassMask<TD>$0F00<TD>Character-class mask<TR>
<TD><A NAME=MARKER-2-288></A>smcOrientationMask<TD>$1000<TD>Character orientation (2-byte scripts)<TR>
<TD><A NAME=MARKER-2-289></A>smcRightMask<TD>$2000<TD>Writing direction (bidirectional scripts) <BR>Main character set or subset (2-byte scripts)<TR>
<TD><A NAME=MARKER-2-290></A>smcUpperMask<TD>$4000<TD>Uppercase or lowercase<TR>
<TD><A NAME=MARKER-2-291></A>smcDoubleMask<TD>$8000<TD>Size (1 or 2 bytes)</TABLE>
<P>
 <A NAME=MARKER-2-958></A>The character type of the character in question is the result of performing an <CODE>AND</CODE> operation with <CODE>smcTypeMask</CODE> and the <CODE>CharacterType</CODE> result. Constants for the defined character types are listed on <A HREF=Text-362.html#MARKER-9-703>page 6-28</A>.<P>
 <A NAME=MARKER-2-959></A>The character class of the character in question is the result of performing an <CODE>AND</CODE> operation with <CODE>smcClassMask</CODE> and the <CODE>CharacterType</CODE> result. Character classes can be considered as subtypes of character types. Constants for the defined character classes are listed on <A HREF=Text-362.html#MARKER-9-705>page 6-29</A>.<P>
 <A NAME=MARKER-2-960></A>The orientation of the character in question is the result of performing an <CODE>AND</CODE> operation with <CODE>smcOrientationMask</CODE> and the <CODE>CharacterType</CODE> result. The orientation value can be either <CODE>smCharHorizontal</CODE> or <CODE>smCharVertical</CODE>.<P>
 <A NAME=MARKER-2-961></A>The direction of the character in question is the result of performing an <CODE>AND</CODE> operation with <CODE>smcRightMask</CODE> and the <CODE>CharacterType</CODE> result. The direction value can be either smCharLeft (left-to-right) or smCharRight (right-to-left).<P>
 <A NAME=MARKER-2-962></A>The case of the character in question is the result of performing an <CODE>AND</CODE> operation with <CODE>smcUpperMask</CODE> and the <CODE>CharacterType</CODE> result. The case value can be either smCharLower or smCharUpper.<P>
 <A NAME=MARKER-2-963></A>The size of the character in question is the result of performing an <CODE>AND</CODE> operation with <CODE>smcDoubleMask</CODE> and the <CODE>CharacterType</CODE> result. The size value can be either smChar1byte or smChar2byte.<P>
<DL>
<DT><B>Note</B>
<DD><CODE>CharacterType</CODE> calls <CODE>CharacterByteType</CODE> to determine whether the byte at <CODE>textOffset</CODE> is a 1-byte character or the first byte or second byte of a 2-byte character. The larger the text buffer, the longer <CODE>CharacterByteType</CODE> takes to execute. To be most efficient, place the pointer <CODE>textBuf</CODE> at the beginning of the character of interest before calling <CODE>CharacterType</CODE>. (If you want to be compatible with older versions of <CODE>CharacterType</CODE>, also set <CODE>textOffset</CODE> to 1, rather than 0, for 2-byte characters.)<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=HEADING393-18></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 <CODE>CharacterType</CODE> may move memory; your application should not call this function at interrupt time.<P>
 If you specify <CODE>smCurrentScript</CODE> for the <CODE>script</CODE> parameter, <CODE>CharacterType</CODE> always assumes that the text in the buffer belongs to the font script. It is unaffected by the state of the font force flag or the international resources selection flag.<P>
 For 1-byte script systems, the character-type tables are in the string-manipulation (<CODE>'itl2'</CODE>) resource. For 2-byte script systems, they are in the encoding/rendering (<CODE>'itl5'</CODE>) resource. If the appropriate resource does not include these tables, <CODE>CharacterType</CODE> exits without doing anything.<P>
 Some Roman fonts (for example, Symbol) substitute other characters for the standard characters in the Standard Roman character set. Since the Roman script system <CODE>CharacterType</CODE> function assumes the Standard Roman character set, it may return inappropriate results for nonstandard characters.<P>
 In versions of system software earlier than 7.0, the <CODE>textOffset</CODE> parameter to the <CODE>CharacterType</CODE> function must point to the second byte of a 2-byte character.<P>
<A NAME=HEADING393-24></A>
<H5>RESULT CODES</H5>
 The complete set of <CODE>CharacterType</CODE> return values is found in the section <A HREF=Text-362.html#MARKER-9-698>"Getting Character-Type Information" beginning on page 6-28</A>.<A NAME=MARKER-2-964></A><P>
<HR>

<A NAME="FOOTNOTE-6">[6] In 2-byte script systems, bit 13 indicates whether or not the character is part of the main character set (not a user-defined character).
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-392.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-394.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

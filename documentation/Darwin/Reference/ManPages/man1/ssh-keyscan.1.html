<html><head><title>Mac OS X
 Manual Page For ssh-keyscan(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/ssh-keyscan" title="Mac OS X
 Manual Page for ssh-keyscan(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/ssh-keyscan"; name=ssh-keyscan(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
SSH-KEYSCAN(1)            BSD General Commands Manual           SSH-KEYSCAN(1)

<b>NAME</b>
     <b>ssh-keyscan</b> -- gather ssh public keys

<b>SYNOPSIS</b>
     <b>ssh-keyscan</b> [<b>-46Hv</b>] [<b>-f</b> <u>file</u>] [<b>-p</b> <u>port</u>] [<b>-T</b> <u>timeout</u>] [<b>-t</b> <u>type</u>] [<u>host</u> | <u>addrlist</u> <u>namelist</u>] [<u>...</u>]

<b>DESCRIPTION</b>
     <b>ssh-keyscan</b> is a utility for gathering the public ssh host keys of a number of hosts.  It was designed
     to aid in building and verifying <u>ssh</u><b>_</b><u>known</u><b>_</b><u>hosts</u> files.  <b>ssh-keyscan</b> provides a minimal interface suit-<font color="#ffffff" class="whiteout">able&nbsp;suitable</font>
     able for use by shell and perl scripts.

     <b>ssh-keyscan</b> uses non-blocking socket I/O to contact as many hosts as possible in parallel, so it is
     very efficient.  The keys from a domain of 1,000 hosts can be collected in tens of seconds, even when
     some of those hosts are down or do not run ssh.  For scanning, one does not need login access to the
     machines that are being scanned, nor does the scanning process involve any encryption.

     The options are as follows:

     <b>-4</b>      Forces <b>ssh-keyscan</b> to use IPv4 addresses only.

     <b>-6</b>      Forces <b>ssh-keyscan</b> to use IPv6 addresses only.

     <b>-f</b> <u>file</u>
             Read hosts or <u>addrlist</u> <u>namelist</u> pairs from this file, one per line.  If <u>-</u> is supplied instead
             of a filename, <b>ssh-keyscan</b> will read hosts or <u>addrlist</u> <u>namelist</u> pairs from the standard input.

     <b>-H</b>      Hash all hostnames and addresses in the output.  Hashed names may be used normally by <b>ssh</b> and
             <b>sshd</b>, but they do not reveal identifying information should the file's contents be disclosed.

     <b>-p</b> <u>port</u>
             Port to connect to on the remote host.

     <b>-T</b> <u>timeout</u>
             Set the timeout for connection attempts.  If <u>timeout</u> seconds have elapsed since a connection
             was initiated to a host or since the last time anything was read from that host, then the con-<font color="#ffffff" class="whiteout">nection&nbsp;connection</font>
             nection is closed and the host in question considered unavailable.  Default is 5 seconds.

     <b>-t</b> <u>type</u>
             Specifies the type of the key to fetch from the scanned hosts.  The possible values are
             ``rsa1'' for protocol version 1 and ``rsa'' or ``dsa'' for protocol version 2.  Multiple values
             may be specified by separating them with commas.  The default is ``rsa1''.

     <b>-v</b>      Verbose mode.  Causes <b>ssh-keyscan</b> to print debugging messages about its progress.

<b>SECURITY</b>
     If an ssh_known_hosts file is constructed using <b>ssh-keyscan</b> without verifying the keys, users will be
     vulnerable to <u>man</u> <u>in</u> <u>the</u> <u>middle</u> attacks.  On the other hand, if the security model allows such a risk,
     <b>ssh-keyscan</b> can help in the detection of tampered keyfiles or man in the middle attacks which have
     begun after the ssh_known_hosts file was created.

<b>FILES</b>
     <u>Input</u> <u>format:</u>

     1.2.3.4,1.2.4.4 name.my.domain,name,n.my.domain,n,1.2.3.4,1.2.4.4

     <u>Output</u> <u>format</u> <u>for</u> <u>rsa1</u> <u>keys:</u>

     host-or-namelist bits exponent modulus

     <u>Output</u> <u>format</u> <u>for</u> <u>rsa</u> <u>and</u> <u>dsa</u> <u>keys:</u>

     host-or-namelist keytype base64-encoded-key

     Where <u>keytype</u> is either ``ssh-rsa'' or ``ssh-dss''.

     <u>/etc/ssh</u><b>_</b><u>known</u><b>_</b><u>hosts</u>

<b>EXAMPLES</b>
     Print the <u>rsa1</u> host key for machine <u>hostname</u>:

     $ ssh-keyscan hostname

     Find all hosts from the file <u>ssh</u><b>_</b><u>hosts</u> which have new or different keys from those in the sorted file
     <u>ssh</u><b>_</b><u>known</u><b>_</b><u>hosts</u>:

     $ ssh-keyscan -t rsa,dsa -f ssh_hosts | \
             sort -u - ssh_known_hosts | diff ssh_known_hosts -<font color="#ffffff" class="whiteout">SEE&nbsp;ssh_known_hostsSEE</font>

<b>SEE</b> <b>ALSO</b>
     <a href="ssh.1.html#//apple_ref/doc/man/1/ssh">ssh(1)</a>, <a href="../man8/sshd.8.html#//apple_ref/doc/man/8/sshd">sshd(8)</a>

<b>AUTHORS</b>
     David Mazieres &lt;dm@lcs.mit.edu&gt; wrote the initial version, and Wayne Davison
     &lt;wayned@users.sourceforge.net&gt; added support for protocol version 2.

<b>BUGS</b>
     It generates "Connection closed by remote host" messages on the consoles of all the machines it scans
     if the server is older than version 2.9.  This is because it opens a connection to the ssh port, reads
     the public key, and drops the connection as soon as it gets the key.

BSD                             January 1, 1996                            BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/ssh-keyscan.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/ssh-keyscan.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/ssh-keyscan.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

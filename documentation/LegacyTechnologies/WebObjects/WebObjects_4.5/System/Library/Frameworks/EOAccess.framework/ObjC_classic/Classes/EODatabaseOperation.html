<HTML>		<HEAD>		<TITLE>			EODatabaseOperation		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>EOAccess Reference</font><br><br><!--end of path --><a href="../EOAccessTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <BR><h1><FONT COLOR=\"#000066\"><a name="//apple_ref/occ/cl/EODatabaseOperation">EODatabaseOperation</a></FONT></h1><br><blockquote><b>Inheritsfrom: </b> NSObject</blockquote><blockquote><b>Conforms to: </b> NSObject<BR>(NSObject)</blockquote><blockquote><b>Declared in: </b> EOAccess/EODatabaseOperation.h<BR></blockquote><br><br><HR SIZE=4><br><h2>Class Description</h2><hr><p>An EODatabaseOperation object represents an operation-insert,update, or delete-to perform on an enterprise object and all thenecessary information required to perform the operation. You don't ordinarilycreate instances of EODatabaseOperation; rather, the Framework automaticallycreates an EODatabaseOperation object for each new, updated, ordeleted object in an EOEditingContext. An EODatabaseContext objectanalyzes a set of database operations and maps each operation toone or more adaptor operations. The adaptor operations are thenperformed by an EOAdaptorChannel object. You generally interactwith EODatabaseOperation objects only if you need to specify theorder in which a set of operations are carried out (see the descriptionfor the EODatabaseContext delegate method  <a frame= "conv" href="../Protocols/EODatabaseContextDelegate.html#//apple_ref/occ/intfm/EODatabaseContext Delegate/databaseContext:willOrderAdaptorOperationsFromDatabaseOperations:">databaseContext:willOrderAdaptorOperationsFromDatabaseOperations:</a>).</p><p>An EODatabaseOperation specifies an enterprise object (called"object") on which the operation is performed, the EOGlobalIDfor the object, and the object's entity. In addition, the databaseoperation has a snapshot containing the last known database valuesfor the object and a <b>newRow</b> dictionaryof new or updated values to save in the database.</p><br><br><br><h2>Constants</h2><hr><p>In <tt>EODatabaseOperation.h</tt>, EOAccess definestwo enumeration types, <code>EOAdaptorOperator</code> and <code>EODatabaseOperator</code>,to identify the primitive database operation represented by an EOAdaptorOperationobject or an EODatabaseOperation object. Their constants are:</p><br><table border = \"1\"><tr><td scope="row"><b>EOAdaptorOperation Operators</b></td><td><b>EODatabaseOperation Operators</b></td></tr><tr><td scope="row"><a name = "CJFFIHIE"><tt>EOAdaptorLockOperator</tt></a></td><td><tt>EODatabaseNothingOperator</tt></td></tr><tr><td scope="row"><a name = "CJFJDGBI"><tt>EOAdaptorInsertOperator</tt></a></td><td><tt>EODatabaseInsertOperator</tt></td></tr><tr><td scope="row"><a name = "CJFGEIJB"><tt>EOAdaptorUpdateOperator</tt></a></td><td><tt>EODatabaseUpdateOperator</tt></td></tr><tr><td scope="row"><a name = "CJFCCEAD"><tt>EOAdaptorDeleteOperator</tt></a></td><td><tt>EODatabaseDeleteOperator</tt></td></tr><tr><td scope="row"><a name = "CJFDFHAF"><tt>EOAdaptorStoredProcedureOperator</tt></a></td><td>&nbsp;</td></tr></table><br><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Creating a new EODatabaseOperation</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a></dd></dl><dl><dt>Accessing the globalID object</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/globalID">- globalID</a></dd></dl><dl><dt>Accessing the object</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/object">- object</a></dd></dl><dl><dt>Accessing the entity</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/entity">- entity</a></dd></dl><dl><dt>Accessing the operator</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">- setDatabaseOperator:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/databaseOperator">- databaseOperator</a></dd></dl><dl><dt>Accessing the databasesnapshot</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/setDBSnapshot:">- setDBSnapshot:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">- dbSnapshot</a></dd></dl><dl><dt>Accessing the row</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/setNewRow:">- setNewRow:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/newRow">- newRow</a></dd></dl><dl><dt>Accessing the adaptoroperations</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">- addAdaptorOperation:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:">- removeAdaptorOperation:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">- adaptorOperations</a></dd></dl><dl><dt>Comparing new row andsnapshot values</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/rowDiffs">- rowDiffs</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/rowDiffsForAttributes:">- rowDiffsForAttributes:</a></dd></dl><dl><dt>Working with to-manysnapshots</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/recordToManySnapshot:relationshipName:">- recordToManySnapshot:relationshipName:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/toManySnapshots">- toManySnapshots</a></dd></dl></blockquote><BR><BR><h2>Instance Methods</h2><hr><a name = "adaptorOperations"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">adaptorOperations</a></h3></a><p><code>- (NSArray *)<b>adaptorOperations</b></code></p>Returns the EOAdaptorOperation objects thatneed to be performed to carry out the operation represented by thereceiver.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">- addAdaptorOperation:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:">- removeAdaptorOperation:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "addAdaptorOperation_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">addAdaptorOperation:</a></h3></a><p><code>- (void)<b>addAdaptorOperation:</b>(EOAdaptorOperation*)<em>adaptorOperation</em></code></p>Adds <em>adaptorOperation</em> tothe receiver's list of adaptor operations. Raises an exceptionif <em>adaptorOperation</em> is nil.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">- adaptorOperations</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:">- removeAdaptorOperation:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "databaseOperator"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/databaseOperator">databaseOperator</a></h3></a><p><code>- (EODatabaseOperator)<b>databaseOperator</b></code></p>Returns the receiver's database operator.<hr WIDTH=25% ALIGN=LEFT><a name = "dbSnapshot"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">dbSnapshot</a></h3></a><p><code>- (NSDictionary *)<b>dbSnapshot</b></code></p>Returns the database snapshot for the receiver'senterprise object. The snapshot contains the last known databasevalues for the enterprise<b> </b>object. The dictionaryreturned from this method will be empty if the receiver's objecthas just been inserted into an EOEditingContext and has not yetbeen saved in persistent storage. For more information on EOEditingContexts,see the EOEditingContext class specification in the EOControl framework.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">- setDatabaseOperator:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "entity"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/entity">entity</a></h3></a><p><code>- (EOEntity *)<b>entity</b></code></p>Returns the entity that corresponds to the receiver'senterprise object.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "globalID"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/globalID">globalID</a></h3></a><p><code>- (EOGlobalID *)<b>globalID</b></code></p>Returns the EOGlobalID object that correspondsto the receiver's enterprise object.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "initWithGlobalID_object_entity_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">initWithGlobalID:object:entity:</a></h3></a><p><code>- <b>initWithGlobalID:</b>(EOGlobalID*)<b>globalID object:</b>(id)<em>object</em><b>entity:</b>(EOEntity *)<em>entity</em></code></p>The designated initializer, this method initializesa new EODatabaseOperation instance. Sets the enterprise object towhich the operation will be applied, the object's global ID, andthe object's entity. Returns <b>self</b>.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/object">- object</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/entity">- entity</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "newRow"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/newRow">newRow</a></h3></a><p><code>- (NSMutableDictionary *)<b>newRow</b></code></p>Returns a dictionary representation of the receiver'senterprise object. In addition to all the properties of the enterpriseobject that are stored in the database, the dictionary containsvalues for the non-derived attribute's of the enterprise object'sentity that aren't visible in the enterprise object. For example,primary and foreign keys aren't ordinarily properties of an enterpriseobject but are attributes of the object's entity.<p>The <b>newRow</b> dictionaryis initialized with the values in the receiver's snapshot. Newor updated values are added to the <b>newRow</b> dictionary(replacing out-of-date values) as the Framework maps changes in theobject to an operation.</p><hr WIDTH=25% ALIGN=LEFT><a name = "object"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/object">object</a></h3></a><p><code>- (id)<b>object</b></code></p>Returns the receiver's enterprise object.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "CJFDBABC"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/primaryKeyDiffs">primaryKeyDiffs</a></h3></a><p><code>- (NSDictionary *)<b>primaryKeyDiffs</b></code></p>Returns a dictionary that contains any primarykey values in  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/newRow">newRow</a> thatare different from those in the  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">dbSnapshot</a>. Returns nil if the receiverdoesn't have EODatabaseUpdateOperator set as its database operator.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">- setDatabaseOperator:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/newRow">- newRow</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "recordToManySnapshots_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/recordToManySnapshot:relationshipName:">recordToManySnapshot:relationshipName:</a></h3></a><p><code>- (void)<b>recordToManySnapshot:</b>(NSArray*)<em>globalIDs</em><b>relationshipName:</b>(NSString *)<em>name</em></code></p>Records the objects in <em>globalIDs</em>. <em>globalIDs</em> isan array of the globalIDs that identify the objects at the destinationof the to-many relationship named <em>name</em>; <em>name</em> isa property of the receiver's enterprise object.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/toManySnapshots">- toManySnapshots</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "removeAdaptorOperation_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:">removeAdaptorOperation:</a></h3></a><p><code>- (void)<b>removeAdaptorOperation:</b>(EOAdaptorOperation*)<em>adaptorOperation</em></code></p>Removes <em>adaptorOperation</em> fromthe receiver's list of adaptor operations.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">- adaptorOperations</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">- addAdaptorOperation:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "rowDiffs"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/rowDiffs">rowDiffs</a></h3></a><p><code>- (NSDictionary *)<b>rowDiffs</b></code></p>Returns values in the receiver's  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/newRow">newRow</a> dictionarythat are different than the corresponding values in its  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">dbSnapshot</a>. Thedictionary returned from this method contains the new values fromthe enterprise object.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/primaryKeyDiffs">- primaryKeyDiffs</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "rowDiffsForAttributes_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/rowDiffsForAttributes:">rowDiffsForAttributes:</a></h3></a><p><code>- (NSDictionary *)<b>rowDiffsForAttributes:</b>(NSArray*)<em>attributes</em></code></p>For the EOAttribute objects in <em>attributes</em>,this method returns values in the receiver's  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/newRow">newRow</a> dictionary that are differentthan the corresponding values in its  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">dbSnapshot</a>. The dictionary returnedcontains the new values from the enterprise object.<hr WIDTH=25% ALIGN=LEFT><a name = "setDatabaseOperator_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">setDatabaseOperator:</a></h3></a><p><code>- (void)<b>setDatabaseOperator:</b>(EODatabaseOperator)<em>databaseOperator</em></code></p>Sets the receiver's database operator. <em>databaseOperator</em> canbe one of the following:<ul><li>EODatabaseNothingOperator</li><li>EODatabaseInsertOperator</li><li>EODatabaseUpdateOperator</li><li>EODatabaseDeleteOperator</li></ul><hr WIDTH=25% ALIGN=LEFT><a name = "setDBSnapshot_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/setDBSnapshot:">setDBSnapshot:</a></h3></a><p><code>- (void)<b>setDBSnapshot:</b>(NSDictionary*)<em>dbSnapshot</em></code></p>Sets the snapshot for the receiver's enterpriseobject. If the object has just been inserted into an an EOEditingContext(EOControl), it won't have a snapshot. In this case, <em>dbSnapshot</em> shouldbe an empty dictionary.<hr WIDTH=25% ALIGN=LEFT><a name = "setNewRow_"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/setNewRow:">setNewRow:</a></h3></a><p><code>- (void)<b>setNewRow:</b>(NSMutableDictionary*)<em>newRow</em></code></p>Sets the dictionary representation of the receiver'senterprise object. <em>newRow</em> shouldcontain values for all the properties of the enterprise object thatare stored in the database and for the non-derived attribute'sof the enterprise object's entity that aren't visible in theenterprise object. <p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/databaseOperator">- databaseOperator</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "toManySnapshots"><BR><h3><a name="//apple_ref/occ/instm/EODatabaseOperation/toManySnapshots">toManySnapshots</a></h3></a><p><code>- (NSDictionary *)<b>toManySnapshots</b></code></p>Returns the NSDictionary containing the snapshotsfor the to-many relationships of the receiver's enterprise object.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EODatabaseOperation/recordToManySnapshot:relationshipName:">- recordToManySnapshot:relationshipName:</a></p><hr WIDTH=25% ALIGN=LEFT><BR><br><a href="../EOAccessTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Carbon Porting Guide (Legacy): Introduction to Carbon Porting Guide</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Introduction to Carbon Porting Guide"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000991-CH201" title="Introduction to Carbon Porting Guide"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Carbon-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000494" target="_top">Carbon</a> &gt; <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF101">Carbon Porting Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../cpg_prepstruct/cpg_prep_struct.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF101" title="Introduction to Carbon Porting Guide"></a><h1>Introduction to Carbon Porting Guide</h1>
<!-- This template is being used for both PDF and HTML. -->
<!-- TopicBook.pm currently relies on the element name bmini_toc. -->

    <h4>Contents:</h4>
    
    <p class="blockquote">

        
			
        
			
            
                <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF102">What Is Carbon?</a>
                
            <br/>
            
        
			
            
                <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF103">What Are the Benefits of Carbon?</a>
                
            <br/>
            
        
			
            
                <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF104">What Is in Carbon Today?</a>
                
            <br/>
            
        
			
            
                <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF105">What’s Not in Carbon?</a>
                
            <br/>
            
        
			
            
                <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF106">How Does Carbon Work?</a>
                
            <br/>
            
        
			
            
                <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF107">Carbon and the Mac OS Application Model</a>
                
            <br/>
            
        
			
            
                <a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-TPXREF119">Additional Information and Feedback</a>
                
            <br/>
            
        

    </p><br/>

<div class="importantbox"><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_3" title="Important:"></a><p><strong>Important:</strong>&nbsp;The information in this document is obsolete and should not be used for new development.</p><p></p></div><p>The Carbon Porting Guide is intended to help experienced Macintosh developers convert existing Mac OS applications into Carbon applications that can run on Mac OS X as well as Mac OS 8 and 9. It contains detailed information about how to adapt and build your application using the Carbon API as well as step-by-step examples of the porting process. </p><p>To make the Carbon transition as smooth as possible, you should also be familiar with the following documents before beginning your port:</p><ul class="ul"><li class="li"><p><em>Inside Mac OS X: System Overview</em>. This document contains in-depth discussions of Mac OS X features and architecture. It also contains more detailed information about some topics discussed in this document. </p></li><li class="li"><p><em>Inside Mac OS X: Aqua Human Interface Guidelines</em>. This document provides the human interface guidelines for the Mac OS X user interface. </p></li></ul><p>This chapter introduces Carbon and provides an overview of the changes you’ll need to be aware of as you convert your application.</p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF102" title="What Is Carbon?"></a><h2>What Is Carbon?</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_69"></a>Carbon is the set of programming interfaces derived from earlier Mac OS APIs that can run on Mac OS X. Some of these APIs have been modified or extended to take advantage of Mac OS X features such as preemptive multitasking and protected memory. </p><p>In addition to being able to run on Mac OS X, Carbon applications built for Mac OS X can also run on Mac OS 8 and 9 when the CarbonLib system extension is installed. (As always, you should test for the existence of specific features before using them.)</p><p>Carbon includes about 70 percent of the existing Mac OS APIs, covering about 95 percent of the functions used by applications. Because it includes most of the functions you rely on today, converting to Carbon is a straightforward process. Apple provides tools and documentation to help you determine the changes you will need to make in your source code, as well as the header files and libraries necessary to build a Carbon application. </p><p>Mac OS X brings important new features and enhancements that developers have asked for, and Carbon allows you to take advantage of them while preserving your investment in Mac OS source code. As Apple moves the Mac OS forward, Carbon ensures you won’t be left behind.</p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF103" title="What Are the Benefits of Carbon?"></a><h2>What Are the Benefits of Carbon?</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_70"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_71"></a>Carbon applications gain these benefits when running under Mac OS X:</p><ul class="ul"><li class="li"><p>Greater stability. Protected address spaces help prevent errant applications from crashing the system or other applications.</p></li><li class="li"><p>Improved responsiveness. Each application is guaranteed processing time through preemptive multitasking, resulting in a more responsive user experience.</p></li><li class="li"><p>Dynamic resource allocation. More efficient use of system resources, including the elimination of fixed size heaps, means your application can allocate memory and other shared resources based on actual needs rather than predetermined values. Each application can access up to 4GB of potential addressable memory. </p></li><li class="li"><p>Aqua look and feel. Apple’s newest user interface is available only to applications that run natively on Mac OS X. </p></li></ul><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF104" title="What Is in Carbon Today?"></a><h2>What Is in Carbon Today?</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_72"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_73"></a>The Carbon programming interface consists of the following types of APIs:</p><ul class="ul"><li class="li"><p>Classic Mac OS APIs that can run unchanged on Mac OS X. These comprise the majority of the APIs in your current application. </p></li><li class="li"><p>Classic Mac OS APIs that have been modified to work on Mac OS X. For example, to operate properly in a preemptively-scheduled environment, a function may now require an additional parameter to specify the context (or process) to which it belongs. </p></li><li class="li"><p>New APIs that can run on both Mac OS X and Mac OS 8 and 9. For example, Core Foundation and the Carbon Event Manager provide additional benefits for Carbon applications but are not required for porting. </p></li><li class="li"><p>New APIs that are available only on Mac OS X. </p></li></ul><p>Currently, the Classic Mac OS APIs make up the largest proportion of Carbon APIs, as shown in <span class="content_text"><a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-BBGDGIID">Figure I-1</a></span>. However, as Carbon evolves to take advantage of new features in Mac OS X, new Mac OS X-specific APIs will be added that enhance its capabilities. </p><br/><div><a name="//apple_ref/doc/uid/TP30000991-CH201-BBGDGIID" title="Figure I-1Current and future composition of the Carbon API "></a><p><strong>Figure I-1&nbsp;&nbsp;</strong>Current and future composition of the Carbon API </p><img src = "../Art/cpg02.gif" alt = "Current and future composition of the Carbon API" width="322" height="135"></div><br/><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF105" title="What&acirc;&#128;&#153;s Not in Carbon?"></a><h2>What’s Not in Carbon?</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_74"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_75"></a>If Carbon does not support a Classic Mac OS function, it is generally for one of the following reasons:</p><ul class="ul"><li class="li"><p>The function performs actions that are illegal or make no sense in Mac OS X. For example, functions that are 68K-specific, or functions that allocate memory in the system heap (Mac OS X has no concept of a system heap). </p></li><li class="li"><p>The function directly accesses hardware. The Carbon environment was designed to be fully abstracted from hardware, so such functions are not allowed. </p></li><li class="li"><p>The function was there for legacy purposes only, and has more modern replacements (for example, File Manager functions that use working directories). </p></li></ul><p>In addition, certain Classic Mac OS programming practices are no longer allowed:</p><ul class="ul"><li class="li"><p>No 68K code allowed. All Carbon code must be PowerPC-based. </p></li><li class="li"><p>No trap table access. The trap table and Patch Manager are 68K-specific. </p></li><li class="li"><p>Limited access to data structure fields. See <span class="content_text"><a href="cpg_intro_struct.html#//apple_ref/doc/uid/TP30000991-CH201-BBGCFECG">“Data Structure Access.”</a></span></p></li></ul><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF106" title="How Does Carbon Work?"></a><h2>How Does Carbon Work?</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_76"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_77"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_78"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_79"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_80"></a>Carbon lets you create one executable file that can run on both Mac OS X and Mac OS 8 and 9. You accomplish this by linking your application with a single stub library, <code>CarbonLibStub</code>, at build time. At runtime your application links with the appropriate Carbon implementation stored as shared libraries (sometimes referred to as DLLs). </p><p>On Mac OS X, your application links dynamically to the Carbon framework, which is a hierarchy of libraries and resources that contains the implementation of Carbon.</p><p>On Mac OS 8 and 9, the Carbon implementation is stored as a system extension named <code>CarbonLib</code>. This library contains two types of elements:</p><ul class="ul"><li class="li"><p>Implementations of all functions specific to Carbon. </p></li><li class="li"><p>Exports of functions currently available in system software. For example, calls to a Menu Manager function available in both Carbon and Mac OS 8 and 9 will merely call through to the implementation in InterfaceLib. </p></li></ul><p><span class="content_text">Figure I-2</span> shows Carbon functions called on Mac OS X and Mac OS 8 and 9. </p><br/><div><a name="//apple_ref/doc/uid/TP30000991-CH201-BBGBEFJJ" title="Figure I-2Calling Carbon functions on Mac OS X and Mac OS 8 and 9"></a><p><strong>Figure I-2&nbsp;&nbsp;</strong>Calling Carbon functions on Mac OS X and Mac OS 8 and 9</p><img src = "../Art/cpg01.gif" alt = "Calling Carbon functions on Mac OS X and Mac OS 8 and 9" width="359" height="212"></div><br/><p>In general, for a pure Carbon application, the only library you should link against is <code>CarbonLib</code>. See <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-BABCCFCC">“Linking to Non-Carbon-Compliant Code”</a></span> for special cases where you may need to link to other libraries. </p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF107" title="Carbon and the Mac OS Application Model"></a><h2>Carbon and the Mac OS Application Model</h2><p>The Mac OS application model remains fundamentally unchanged in Carbon. Carbon applications employ system services in essentially the same manner for both Mac OS 8 and 9 and Mac OS X. But because Mac OS 8 and 9 and Mac OS X are built on different architectures, there will be slight differences in the way your application uses some system services. This section highlights the most important changes you need to be aware of. <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-TPXREF101">“Preparing Your Code for Carbon”</a></span> provides more detailed information on each of these subjects.</p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF108" title="Preemptive Scheduling and Application Threading"></a><h3>Preemptive Scheduling and Application Threading</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_81"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_82"></a>In Mac OS X, each Carbon application is scheduled preemptively against other Carbon applications. For calls to most low-level operating system services, Mac OS X also supports preemptive threading within an application. Because most Human Interface Toolbox functions are not reentrant, however, a multithreaded application will initially be able to call these functions only from cooperatively scheduled threads. Thread-based preemptive access to all system services—including the Human Interface Toolbox—is an important future direction for the Mac OS. </p><p>In both Mac OS 8 and 9 and Mac OS X, you can use the Multiprocessing Services API to create preemptively scheduled tasks.</p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF109" title="Separate Application Address Spaces"></a><h3>Separate Application Address Spaces</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_83"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_84"></a>In Mac OS X, each Carbon application runs in its own protected address space. An application can’t reference memory locations—or corrupt another application’s data—outside of its assigned address space. This separation of address spaces increases the reliability of the user’s system, but it may require small programming changes to applications that use zones, system memory, or temporary memory. For example, temporary memory allocations in Mac OS X will be allocated in the application’s address space, and Apple will define new functions for sharing memory between applications. <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-TPXREF119">“Manage Memory Efficiently”</a></span> provides more detailed information about memory management for Carbon applications.</p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF110" title="Virtual Memory"></a><h3>Virtual Memory</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_85"></a>Mac OS X uses a dynamic and highly efficient virtual memory system that is always enabled. Your Carbon application must therefore assume that virtual memory is turned on at all times. In addition, the Mac OS X virtual memory system introduces a number of changes to the addressing model that are discussed in <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-TPXREF119">“Manage Memory Efficiently.”</a></span></p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF111" title="Resources"></a><h3>Resources</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_86"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_87"></a>Mac OS X supports traditional Resource Manager resources, but you should consider moving resources to the data fork of your application and accessing them using Core Foundation CFBundle APIs instead. Doing so will ensure that this information will not be lost if your application is copied by a method that does not recognize resource forks.  See <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-BABCBBGJ">“Move Resources to Data Fork–Based Files”</a></span> and <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-BABBFHIH">“Consider Using Bundles”</a></span> for more information.</p><p>Note that you can no longer store executable code in resources. See <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-BABBGIHA">“Move Custom Definition Procedures Out of Resources”</a></span> for more information. </p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF112" title="Code Fragments and the Code Fragment Manager"></a><h3>Code Fragments and the Code Fragment Manager</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_88"></a>Carbon fully supports the Code Fragment Manager, and the Mac OS X runtime environment supports code compiled into code fragments. For Mac OS X, however, all code fragments must contain only native PowerPC code. In addition, resource-based fragments are no longer allowed. </p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF113" title="Mixed Mode Manager"></a><h3>Mixed Mode Manager</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_89"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_90"></a>While the Mixed Mode Manager is no longer needed to handle calls between PowerPC and 68K code, there may be instances where it must handle calls between CFM-based code and Mach-O code (the native executable format on Mac OS X). In any case, you must replace the macros for creating and disposing routine descriptors with new Carbon functions for creating, invoking, and disposing universal procedure pointers (UPPs). See <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-BABEAGGI">“Replace Macro Calls to the Mixed Mode Manager With UPP Accessor Functions”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF114" title="Printing"></a><h3>Printing</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_91"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_92"></a>Carbon introduces a new Printing Manager that allows applications to print on Mac OS 9 using current printer drivers and on Mac OS X using new printer drivers. The functions and data types defined by the Carbon Printing Manager are contained in the header files <code>PMApplication.h</code>, <code>PMCore.h</code>, and <code>PMDefinitions.h</code>. Documentation for the Carbon Printing Manager is provided with the Mac OS X Developer Tools CD and at the following website:</p><p><span class="content_text"><a href="../../../../../documentation/Carbon/Reference/CarbonPrintingManager_Ref/" target="_top">http://developer.apple.com/documentation/Carbon/Reference/CarbonPrintingManager_Ref/</a></span></p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF115" title="Control Panels"></a><h3>Control Panels</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_93"></a>Carbon does not support control panels. If possible, you should package your control panel as an application. </p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF116" title="The Trap Table"></a><h3>The Trap Table</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_94"></a>The trap table is a 68K-specific mechanism for dispatching calls to Mac OS Toolbox functions. Because Mac OS X does not support 68K code, the Trap Manager is unavailable in Carbon, and your application should not dispatch calls through the trap table. Likewise, the Patch Manager is unsupported in Carbon, and your application should not attempt to patch the trap table or any operating system entry points. If your application relies on patches, please tell us why, so that we can help you remove this dependency.</p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF117" title="Standard and Custom Definition Procedures"></a><h3>Standard and Custom Definition Procedures</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_95"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_96"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_97"></a>Carbon supports the standard Mac OS definition procedures (also known as defprocs) for such human interface elements as windows, menus, and controls. Custom definition procedures are also supported (as long as they are compiled as PowerPC code), but there are new procedures for creating and packaging them. These new functions are discussed in <span class="content_text"><a href="../cpg_prepstruct/cpg_prep_struct.html#//apple_ref/doc/uid/TP30000991-CH202-BABBGIHA">“Move Custom Definition Procedures Out of Resources”</a></span> and <span class="content_text"><a href="../cpg_apdx_func/cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-BABCFEGG">“Custom Definition Procedures.”</a></span></p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF118" title="Application-Defined Functions"></a><h3>Application-Defined Functions</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_98"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_99"></a>Carbon supports most Mac OS application-defined (callback) functions. Mac OS X fully supports callback functions within an application’s address space. In Carbon, callback functions use native PowerPC conventions instead of 68K conventions, but Carbon doesn’t change these function definitions. As usual you should pass universal procedure pointers when specifying your callback functions. </p><a name="//apple_ref/doc/uid/TP30000991-CH201-BBGCFECG" title="Data Structure Access"></a><h3>Data Structure Access</h3><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_100"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_101"></a>So that future versions of Mac OS can support access to all system services through preemptive threads, Carbon limits direct application access to some Mac OS data structures. Carbon allows three levels of data structure access, depending on which is appropriate for a given structure:</p><ul class="spaceabove"><li class="li"><p>Direct access—your application can read from and write to the data structure without restriction.</p></li><li class="li"><p>Direct access with notification—your application can read from and write to the data structure, but after modifying the structure your application must call a function to notify the operating system that the structure has been changed.</p></li><li class="li"><p>Indirect access—your application has no direct access to the data structure. Instead, your application can obtain and set values in the structure only by using accessor functions. Structures of this type are said to be “opaque” because their contents are not visible to applications.</p></li></ul><p>Opaque data structures and the functions for using them are discussed in <span class="content_text"><a href="../cpg_apdx_func/cpg_apdx_funcs.html#//apple_ref/doc/uid/TP30000991-CH206-BAACHCEC">“Functions for Accessing Opaque Data Structures.”</a></span></p><a name="//apple_ref/doc/uid/TP30000991-CH201-TPXREF119" title="Additional Information and Feedback"></a><h2>Additional Information and Feedback</h2><p><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_102"></a><a name="//apple_ref/doc/uid/TP30000991-CH201-DontLinkElementID_103"></a>Apple is working hard to deliver the features and performance you expect from Carbon. You can keep abreast of current developments by visiting the Carbon website at </p><p><span class="content_text"><a href="http://developer.apple.com/carbon/index.html" target="_top">http://developer.apple.com/carbon/index.html</a></span></p><p>where you’ll find the complete Carbon Specification, preliminary documentation, and links to other useful information. </p><p>If you have comments or suggestions about Carbon, please send them to <code>carbon@apple.com</code>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../cpg_prepstruct/cpg_prep_struct.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2002-12-01<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/carbon_porting_guide/cpg_intro_struct/cpg_intro_struct.html%3Fid%3DTP30000991-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/carbon_porting_guide/cpg_intro_struct/cpg_intro_struct.html%3Fid%3DTP30000991-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/carbon_porting_guide/cpg_intro_struct/cpg_intro_struct.html%3Fid%3DTP30000991-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
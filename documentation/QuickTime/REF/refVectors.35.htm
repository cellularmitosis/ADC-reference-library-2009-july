<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Creating a Vector Data Stream</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="refVectors.34.htm">Previous</A> | <A HREF="refVectors.1.htm">Chapter Contents</A> | <A HREF="refVectors.htm">Chapter Top</A> | <A HREF="refVectors.36.htm">Next</A> | <!-- QTnavbar end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=35095"> </A>Creating a Vector Data Stream</H1><P CLASS="T1.Text1"><A NAME="pgfId=35350"> </A><A HREF="refVectors.35.htm#17376" CLASS="XRef">Listing&nbsp;2</A> shows how to create a vector data stream for a single path. The path has four on-curve points and two off-curve points. These points specify two curves and one straight line, as shown in <A HREF="refVectors.35.htm#21966" CLASS="XRef">Figure 58</A>. In addition to an atom for the path, the data stream includes an atom that specifies the fill type of subsequent paths in stream. </P><P CLASS="L.Listing"><A NAME="pgfId=13540"> </A>Listing&nbsp;2 <A NAME="17376"> </A>vector data stream for a single path</P><CODE CLASS="Cv.Code"><A NAME="pgfId=43558"> </A>ComponentInstance vectorCodec;<BR>Handle streamH;<BR>Handle pathH;<BR>gxPoint points[6];<BR>Boolean isOnCurve[6];<BR>int i;<BR>long value;<BR><BR>/* open the vector codec component */<BR>OpenADefaultComponent (decompressorComponentType,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kVectorCodecType, &amp;vectorCodec);<BR><BR>/* create a new vector data stream */<BR>CurveCreateVectorStream (vectorCodec, streamH);<BR>value=gxOpenFrameFill;<BR><BR>/* add an atom to the vector data stream that specifies that <BR>&nbsp;&nbsp;&nbsp;subsequent paths are to be drawn with open frame fill */<BR>CurveAddAtomToVectorStream (ci, kCurveFillTypeAtom, sizeof(long),<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;value, streamH);<BR><BR>/* specify the points for the path and whether each one is <BR>&nbsp;&nbsp;&nbsp;on the path */<BR>points[0].x = ff(50);<BR>points[0].y = ff(100);<BR>isOnCurve[0] = TRUE;<BR>points[1].x = ff(0);<BR>points[1].y = ff(75);<BR>isOnCurve[1] = FALSE;<BR>points[2].x = ff(50);<BR>points[2].y = ff(50);<BR>isOnCurve[2] = TRUE;<BR>points[3].x = ff(150);<BR>points[3].y = ff(50);<BR>isOnCurve[3] = TRUE;<BR>points[4].x = ff(200);<BR>points[4].y = ff(75);<BR>isOnCurve[4] = FALSE;<BR>points[5].x = ff(150);<BR>points[5].y = ff(100);<BR>isOnCurve[5] = TRUE;<BR><BR>/* create the path and add the points to it */<BR>CurveNewPath (vectorCodec, &amp;pathH);<BR>for (i = 0; i &lt;= 5; i++)<BR>&nbsp;&nbsp;&nbsp;&nbsp;CurveInsertPointIntoPath (vectorCodec, &amp;points[i], pathH,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1, i, isOnCurve[i]);<BR><BR>/* add the path to the vector data stream */<BR>CurveAddPathAtomToVectorStream (vectorCodec, pathH, streamH);<BR><BR>/* mark the end of the vector data stream by adding a <BR>&nbsp;&nbsp;&nbsp;kCurveEndAtom atom to the stream */<BR>CurveAddZeroAtomToVectorStream (vectorCodec, streamH);<BR><BR>/* use the vector codec here to decompress and display the vector data */<BR><BR>/* dispose of stream and path handles when done */<BR>DisposeHandle (streamH);<BR>DisposeHandle (pathH);<BR></CODE><P CLASS="Fg.Figure"><A NAME="pgfId=35540"> </A>Figure 58	<A NAME="21966"> </A>A path with six points</P><DIV><IMG SRC="GR2-L-29.gif"><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="refVectors.34.htm">Previous</A> | <A HREF="refVectors.1.htm">Chapter Contents</A> | <A HREF="refVectors.htm">Chapter Top</A> | <A HREF="refVectors.36.htm">Next</A> | <!-- QTnavbar end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
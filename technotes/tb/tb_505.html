<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TB505: Component Manager Q&amp;As</title>                                       <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Apr 26, 1993 - May 7, 1993"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002794" title="Component Manager Q&As"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB505</div>
<div id="pageheadsub">Component Manager Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <A HREF = "../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[May 01 1993]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>SetComponentInstanceA5 used for custom heap</h2><p>What's the correct usage of <code>SetComponentInstanceA5</code>? My component will beregistered globally but the individual instances should use the application'sstorage. The Component Manager chapter says that <code>SetComponentInstanceA5</code> isusually called in the open request for a connection. If so, where and how doyou get the A5 value of the application to set in the <code>SetComponentInstanceA5</code>call?</p><p>The Component Manager <code>SetComponentInstanceA5</code> (or <code>GetComponentInstanceA5</code>) callis used primarily in cases where you might want to set a custom A5 world foryour component. In the case that you're using the client's A5 world (default),you don't have to do anything. In fact, A5 will be set to your client's heapfor you automatically by the Component Manager. You can call NewHandle in youropen routine and it will create a handle in your client's heap. This is yourcomponent instances private storage. So, the answer to your question is thatyou don't have to call <code>SetComponentInstanceA5</code> unless you have a custom heap.</p><p>However, if you use public globals that you want all component instances to beable to access, you may want to switch to the system zone, allocate the globalrecord with <code>NewHandle</code>, and then switch back to the previous zone. The reasonyou'd want to do this is that you wouldn't want the public globals to disappearif the non-system's heap is disposed of. The reference to public globals isusually stored in the component's refcon.</p><P><A HREF="#top">Back to top</A></p><h2>RegisterComponentResource and 'thng' resource</h2><P>Date Written:   2/17/93</p><P>Last reviewed: 5/28/93</p><p>I'm using the Component Manager to write my own color picker, and I'm trying toregister the component from my own application using <code>RegisterComponentResource</code>.The resource fork of the application includes the appropriate resources withthe appropriate ID numbers such as <code>'thng'</code> and <code>'cpkr'</code>, but the registeroperation fails and I get a null pointer in return. Any suggestions why?</p><p>The documentation is somewhat obscure on this, but what you need to pass to<code>RegisterComponentResource</code> is the <code>'thng'</code> resource. Depending on what you'redoing, you may want to pass a value of 1 in the global parameter, to make yourcomponent available to other applications. The following code accomplishes whatyou want:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>Component RegisterPicker (short pickerID){    Component    aComponent = 0L;    /* prepare for failure */    ComponentResource    **CmpHdl;    CmpHdl = (ComponentResource **) GetResource ('thng', pickerID);    if (CmpHdl)                /* make sure you got the resource */        aComponent = RegisterComponentResource (CmpHdl, 0);    return ( aComponent );</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></p><h2>Component Manager and multiple segments</h2><P>Date Written:   2/10/93</p><P>Last reviewed: 7/2/93</p><p>How does the Component Manager handle multiple segments?</p><p>The Component Manager doesn't automatically support multiple code segments. Infact, it assumes that all the code is in one segment. The <code>'thng'</code> resourceallows you to specify one segment. Therefore, if you load other code segmentsfrom your main segment, they should be loaded and locked in the system heap.There are several ways you can do this; the register routine probably is thebest place to do it. Since the register routine is called only once atregistration time, this allows your component to completely load the remainingcode segments into the system heap. Components should ensure that A5 (or A4) isset appropriately before any intersegment calls. For more information, see"Managing Component Registration" in issue 15 of <i>develop.</i></p><P><A HREF="#top">Back to top</A></p><h2>Typecasting a component for use within OpenComponentResFile</h2><P>Date Written:  1/20/93</p><P>Last reviewed:  4/26/93</p><p>How can I typecast a component instance so that it can be used within<code>OpenComponentResFile</code>?</p><p>When the Component data type is needed from within a component, you can castthe component instance to type Component and everything will work as expected,as shown below:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>pascal ComponentResult SomeComponentRoutine(ComponentInstance self){    short        return_val;    . . .    if ( return_val = OpenComponentResFile((Component)self) &lt;= 0 )    {        // Error code here    }    . . .</pre>	</TD></TR></TABLE></CENTER><p><code>DrawTextCodec</code> on the QuickTime 1.5 CD demonstrates the use of various callssuch as <code>GetComponentRefcon</code> and <code>OpenComponentResFile</code> from within a component.It's also located on the Developer CD Series disc, Tool Chest edition.</p><P><A HREF="#top">Back to top</A></p><h2>Component Manager is part of System 7.1</h2><P>Date Written:  1/21/93</p><P>Last reviewed:  7/2/93</p><p>Is the Component Manager bundled with QuickTime? In other words, will the usersof the application I'm designing have to buy QuickTime in order to get theComponent Manager?</p><p>The Component Manager was first introduced as part of the QuickTime 1.0 systemextension. This makes the presence of QuickTime a requirement for systemsoftware versions earlier than System 7.1. The Component Manager is now part ofSystem 7.1, giving the extended functionality to any Macintosh applicationrunning on System 7.1 regardless of the presence of QuickTime.</p><P><A HREF="#top">Back to top</A></p><h2>Component Manager documentation</h2><P>Date Written:  1/21/93</p><P>Last reviewed:  4/1/93</p><p>Where can I find documentation on the Component Manager?</p><p>Presently, the only documentation for the Component Manager is Chapter 4 in the<i>QuickTime Developer's Guide</i> <i>1.0.</i> There will be documentation onthe Component Manager in the new <i>Inside Macintosh</i> in the future.</p><p>There's also an article called "Techniques for Writing and DebuggingComponents" in issue 12 of <i>develop.</i> This article gives you some criteriaon whether to write a component and the advantages of using a component. Bestof all, there's an accompanying sample code (Dev CD Feb.93:Periodicals:develop:develop 12 code) for implementing a sample mathcomponent.</p><P><A HREF="#top">Back to top</A></p><h2>QuickTime Components.p interface conflict</h2><P>Date Written:  11/30/92</p><P>Last reviewed:  3/1/93</p><p>When I try to compile the Components.p include file from the QuickTime 1.5 CD,I get "unsatisfied forward reference" error messages. Can you advise?</p><p>A declaration conflict in the c header files is causing the problem. Until theComponents.p file is updated, replace the following declarations:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>Component = ^privateComponentRecord;ComponentInstance = ^privateComponentInstanceRecord;withComponent = ^ComponentRecordComponentRecord = RECORD                  data: ARRAY[0..0] OF LONGINT;                  END;ComponentInstance = ^ComponentInstanceRecord;ComponentInstanceRecord = RECORD                          data: ARRAY[0..0] OF LONGINT;</pre>	</TD></TR></TABLE></CENTER><BR><br><br>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (44K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_505.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_505.html%3Fid%3DDTS10002794-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_505.html%3Fid%3DDTS10002794-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_505.html%3Fid%3DDTS10002794-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
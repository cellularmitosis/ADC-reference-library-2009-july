<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>QTimadecompression - /source/SetupDBHeader.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/QuickTime/index.html">QuickTime</a> &gt; <a href="../../samplecode/QuickTime/idxMusicAudio-date.html">Audio</a> &gt; <A HREF="javascript:location.replace('index.html');">QTimadecompression</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/QuickTime/idxMusicAudio-date.html" target="_blank">QuickTime > Audio</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">QTimadecompression</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/source/SetupDBHeader.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/headers/DBFF_Errors.h</option>
<option value="listing2.html">/headers/Defines.h</option>
<option value="listing3.html">/headers/SetupDBHeader.h</option>
<option value="listing4.html">/headers/SoundStruct.h</option>
<option value="listing5.html">/headers/WAVE.h</option>
<option value="listing6.html">/source/IMADecompression.c</option>
<option value="listing7.html">/source/SetupDBHeader.c</option>
<option value="listing8.html">/source/WAVE.c</option></select>
				</p>
				</form>
				<p><strong><a href="QTimadecompression.zip">Download Sample</a></strong> (&#147;QTimadecompression.zip&#148;, 21.7K)<BR>
<strong><a href="QTimadecompression.dmg">Download Sample</a></strong> (&#147;QTimadecompression.dmg&#148;, 78.6K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/***  Apple Macintosh Developer Technical Support****  Routine demonstrating how to set up the DoubleBufferHeader for SndPlayDoubleBuffer.****  by Mark Cookson, Apple Developer Technical Support****  File:  SetupDBHeader.c****  Copyright &copy;1996 Apple Computer, Inc.**  All rights reserved.****  You may incorporate this sample code into your applications without**  restriction, though the sample code has been provided &quot;AS IS&quot; and the**  responsibility for its operation is 100% yours.  However, what you are**  not permitted to do is to redistribute the source as &quot;Apple Sample**  Code&quot; after having made changes. If you're going to re-distribute the**  source, we require that you make it clear in the source that the code**  was descended from Apple Sample Code, but that you've made changes.*/#include &quot;SetupDBHeader.h&quot;/*  Purpose:    This sets up the fields of the SndDoubleBufferHeader          structure.          This sets the value of the compFactor variable so that          you can tell if the sound is compressed, and if so by          how much (this is used for proper buffer sizing).  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr  SetupDBHeader  (SoundInfoPtr theSoundInfo,            Fixed sampleRate,            short sampleSize,            short numChannels,            short compressionID,            long compressionType)/*-----------------------------------------------------------------------*/{  CompressionInfo      compInfo;  OSErr          err          = noErr;  err = GetCompressionInfo(compressionID, compressionType, numChannels, sampleSize, &amp;compInfo);  theSoundInfo-&gt;doubleHeader.dbhNumChannels    = numChannels;  theSoundInfo-&gt;doubleHeader.dbhSampleSize    = compInfo.bytesPerSample * kBitsPerByte;  theSoundInfo-&gt;doubleHeader.dbhCompressionID    = compInfo.compressionID;  theSoundInfo-&gt;doubleHeader.dbhPacketSize    = compInfo.bytesPerPacket;  theSoundInfo-&gt;doubleHeader.dbhSampleRate    = sampleRate;  theSoundInfo-&gt;doubleHeader.dbhFormat      = compInfo.format;  theSoundInfo-&gt;bytesPerFrame            = compInfo.bytesPerFrame;  switch (compressionType) {    case NoneType:    case kOffsetBinary:    case kTwosComplement:      theSoundInfo-&gt;compFactor = kNoCompression;      break;    case kULawCompression:    case kCDXA2Compression:      theSoundInfo-&gt;compFactor = kCompressByTwo;      break;    case kMACE3Compression:      theSoundInfo-&gt;compFactor = kCompressByThree;      break;    case kIMACompression:    case kCDXA4Compression:    case 'ADPM':      theSoundInfo-&gt;compFactor = kCompressByFour;      break;    case kMACE6Compression:      theSoundInfo-&gt;compFactor = kCompressBySix;      break;    default:      DebugPrint (&quot;\pUnknown compression type, assuming 1:1 compression&quot;);      theSoundInfo-&gt;compFactor = kNoCompression;      break;  }  return err;}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/QTimadecompression/listing7.html%3Fid%3DDTS10000912-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/QTimadecompression/listing7.html%3Fid%3DDTS10000912-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/QTimadecompression/listing7.html%3Fid%3DDTS10000912-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
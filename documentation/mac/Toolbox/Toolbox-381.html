<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Providing Items for Alert and Dialog Boxes(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING381></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-380.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-382.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-370.html"><B>Chapter 6 - Dialog Manager</B></A> / <A HREF="Toolbox-378.html"><B>Using the Dialog Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING381-0></A>
<H2><A NAME=MARKER-9-123></A>Providing Items for Alert and Dialog Boxes</H2>
 <A NAME=MARKER-2-124></A>You use an item list (<CODE>'DITL'</CODE>) resource to store information about all the items (text, controls, icons, or pictures) in an alert or dialog box. As described in <A HREF=Toolbox-379.html#MARKER-9-89>"Creating Alert Sounds and Alert Boxes" beginning on page 6-17</A> and <A HREF=Toolbox-380.html#MARKER-9-111>"Creating Dialog Boxes" beginning on page 6-22</A>, you specify the resource ID of the item list resource in the alert (<CODE>'ALRT'</CODE>) resource or dialog (<CODE>'DLOG'</CODE>) resource. <P>
 Within an item list resource for an alert box or a dialog box, you specify its static text, buttons, and the resource IDs of icons and QuickDraw pictures. In addition, you can specify checkboxes, radio buttons, editable text, and the resource IDs of other types of controls (such as pop-up menus) in an item list resource for a dialog box.<P>
 <A HREF=#MARKER-9-126>Figure 6-13</A> shows an example of an alert box displayed by the SurfWriter application when the user chooses the About command from the Apple menu. To display its own icon in the upper-left corner of the alert box, the application uses the <CODE>Alert</CODE> function. An alert resource with resource ID 128 is passed in a parameter to the <CODE>Alert</CODE> function. <BR>The alert resource in turn specifies an item list resource with resource ID 128. The item list resource specifies an OK button, some static text, and an icon, whose resource ID is 128. (It's customary to assign the same resource ID to the item list resource and to either its alert resource or dialog resource, but it's not necessary to do so.)<P>
 In this example, when the user chooses the About command, the SurfWriter application uses the <CODE>Alert</CODE> function to display the alert.<P>
<PRE>
itemHit := Alert(kAboutBoxID, @MyEventFilter);
</PRE>
 The <CODE>Alert</CODE> function in this example displays the alert box defined by the alert resource represented by the <CODE>kAboutBoxID</CODE> resource ID. As explained in <A HREF=Toolbox-385.html#MARKER-9-323>"Responding to Events in Alert Boxes" beginning on page 6-81</A>, the <CODE>Alert</CODE> function handles most user actions while the alert box is displayed. When the user clicks any button in an alert box, <CODE>Alert</CODE> removes the alert box and returns to your application the item number of the selected button. The application-defined function <CODE>MyEventFilter</CODE> that is pointed to in this example allows background applications to receive update events for their windows.<P>
 <A HREF=#MARKER-9-127>Listing 6-5</A> shows the resources, in Rez input format, that the <CODE>Alert</CODE> function uses to display the alert box shown in <A HREF=#MARKER-9-126>Figure 6-13</A>.<A NAME=MARKER-2-125></A><P>
<B>Figure 6-13  <A NAME=MARKER-9-126></A>Relationship of various resources to an alert box</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-SL-20.jpg"><P>
<B>Listing 6-5  <A NAME=MARKER-9-127></A>Rez input for providing an alert box with items</B><P>
<PRE>
# define kAboutBoxID 128      /*resource ID for About SurfWriter alert box*/
# define kAboutBoxDITL 128          /*resource ID for item list*/
# define kSurfWriterIconID 128      /*resource ID for 'ICON' resource*/
# define kSurfWriterColorIconID 128 /*resource ID for 'cicn' resource*/
# define kAboutBoxHelp 128          /*resource ID for 'hdlg' resource*/

resource 'ALRT' (kAboutBoxID, purgeable) {   /*About SurfWriter alert box*/
   {40, 40, 156, 309},           /*rectangle for alert box*/
   kAboutBoxDITL,                /*use item list resource with ID 128*/
   {  /*identical alert stage responses*/
      OK, visible, silent,
      OK, visible, silent,
      OK, visible, silent,
      OK, visible, silent,
   },
   alertPositionMainScreen    /*display on the main screen*/
};


resource 'DITL' (kAboutBoxDITL, purgeable) { /*items for About SW alert box*/
      /*ITEM NO. 1*/
   {  {86, 201, 106, 259},    /*display rectangle for item*/
      Button {                /*the item is a button*/
            enabled,          /*enable item to return click*/
            &quot;OK&quot;              /*title for button is &quot;OK&quot;*/
      },
      /*ITEM NO. 2*/
      {10, 20, 42, 52},       /*display rectangle for item*/
      Icon {                  /*the item is an icon*/
            disabled,         /*don't return clicks on this item*/
            kSurfWriterIconID /*use 'ICON' &amp; 'cicn' resources */
                              /* with resource IDs of 128*/
      },
      /*ITEM NO. 3*/
      {10, 78, 74, 259},      /*display rectangle for the item*/
      StaticText {            /*the item is static text*/
            disabled,         /*don't return clicks on this item*/
            &quot;SurfWriter 3.0\n&quot;/*text string to display*/
            &quot;A Swell Text Processor \n\n &quot;
            &quot;&#169;My Company, Inc. 1992&quot;
      },
      /*ITEM NO. 4*/
      {0, 0, 0, 0},           /*help items get an empty rectangle*/
      HelpItem {              /*invisible item for reading in help balloons*/
            disabled,         /*don't return clicks on this item*/
            HMScanhdlg        /*scan resource type 'hdlg' for help balloons*/
            {kAboutBoxHelp}   /*get 'hdlg' with resource ID 128*/
      }
   }
};
data 'ICON' (kSurfWriterIconID, purgeable)      {
      /*icon data for black-and-white icon for About SurfWriter goes here*/
};
data 'cicn' (kSurfWriterColorIconID, purgeable)       {
      /*icon data for color icon for About SurfWriter goes here*/
};
</PRE>
 Items are usually referred to by their positions in the item list resource. For example, the <CODE>Alert</CODE> function returns 1 when the user clicks the OK button in the alert box created in <BR><A HREF=#MARKER-9-127>Listing 6-5</A>. The Dialog Manager returns 1 because the OK button is the first item in the list. (Responding to the item numbers returned by <CODE>Alert</CODE> and other Dialog Manager functions is explained in <A HREF=Toolbox-385.html#MARKER-9-295>"Handling Events in Alert and Dialog Boxes" beginning on page 6-77</A>.) Similarly, when you use a Dialog Manager routine to manipulate an item, you specify it by its <B>item number,</B> an integer that corresponds to an item's position in its item list resource. <A NAME=MARKER-2-372></A><P>
<DL>
<DT><B>IMPORTANT</B>
<DD>Item list resources should always be marked as purgeable.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 The Dialog Manager also calls the Resource Manager to read in any individual items <BR>as necessary.<P>
 When you create a dialog box or an alert box, the Dialog Manager creates a <I>dialog record.</I> The Dialog Manager then reads in the item list resource and stores a handle to it in the <CODE>items</CODE> field of the dialog record. Because the Dialog Manager always makes a copy of the item list resource and uses that copy, several independent dialog boxes may share <BR>the same item list resource. As explained in <A HREF=Toolbox-382.html#MARKER-9-209>"Adding Items to an Existing Dialog Box" beginning on page 6-46</A>, you can use the <CODE>AppendDITL</CODE> and <CODE>ShortenDITL</CODE> procedures <BR>to modify or customize copies of a shared item list resource for use in individual <BR>dialog boxes.<P>
 As an alternative to using a dialog resource, you can read in a dialog's item list resource directly and then pass a handle to it along with other information to <CODE>NewDialog</CODE>, which creates the dialog box. Remember, however, that it is easier to localize your application if you use a dialog resource and the <CODE>GetNewDialog</CODE> function.<P>
 An item list resource contains the following information for each item:<P>
<UL>
<LI>a display rectangle<A NAME=MARKER-2-373></A>
<LI>the type of item (as described in the next section)
<LI>a constant (either <CODE>enabled</CODE> or <CODE>disabled</CODE>) that instructs the Dialog Manager whether to report events for that item<A NAME=MARKER-2-130></A>
<LI>either a text string or a resource ID, as appropriate for the type of item<P>
</UL>
 The <B>display rectangle</B> determines the size and location of the item. Specify the display rectangle in coordinates local to the alert or dialog box. For example, in <A HREF=#MARKER-9-127>Listing 6-5</A> the first item is displayed in a rectangle specified by the coordinates (86,201,106,259), which place the item in the lower-right corner of this alert box. More information about display rectangles and their placement is provided in <A HREF=#MARKER-9-147>"Display Rectangles" beginning on page 6-30</A>.<A NAME=MARKER-2-19></A><P>
 <A NAME=MARKER-2-132></A><A NAME=MARKER-9-589></A><A NAME=MARKER-2-134></A><A NAME=MARKER-2-135></A><A NAME=MARKER-2-136></A><A NAME=MARKER-2-137></A><A NAME=MARKER-2-138></A><A NAME=MARKER-2-139></A><A NAME=MARKER-2-37></A>In an item list resource, you can specify controls, text, icons, pictures, and other items that you define. In <A HREF=#MARKER-9-127>Listing 6-5</A>, the first item's type is specified by the <CODE>Button</CODE> constant. Item types and their constants are described in the next section.<P>
 For each item in the item list resource, you must also instruct the Dialog Manager whether to report to your application when the item is clicked. In <A HREF=#MARKER-9-127>Listing 6-5</A>, the first item is enabled, because the <CODE>enabled</CODE> constant is specified. <A HREF=#MARKER-9-156>"Enabled and Disabled Items" on page 6-33</A> explains when and how to enable items.<P>
 Depending on the type of item in the list, you usually provide a text string or a resource ID for the item. In <A HREF=#MARKER-9-127>Listing 6-5</A>, the string <CODE>OK</CODE> is specified as the button title for the first item. <A HREF=#MARKER-9-159>"Resource IDs for Items" beginning on page 6-33</A> explains what titles and resources are appropriate for the various item types.<P>
 The information that you provide in an item list resource is described more fully in the next several sections.<P>
<A NAME=HEADING381-27></A>
<H3>Item Types</H3>
 <A NAME=MARKER-2-141></A>The following list shows the types of items you can include in alert and dialog boxes and the constants for specifying them in a Rez input file.
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Description<TR>
<TD>Button<TD>A button control<A NAME=MARKER-2-107></A><TR>
<TD>CheckBox<TD>A checkbox control (use in dialog boxes only)<A NAME=MARKER-9-108></A><TR>
<TD>Control<TD>A control defined in a <CODE>'CNTL'</CODE> resource file (use in dialog <BR>boxes only)<A NAME=MARKER-21-109></A><TR>
<TD>EditText<TD>An editable text item (use in dialog boxes only)<A NAME=MARKER-2-111></A><TR>
<TD>HelpItem<TD>An invisible item that makes the Help Manager associate help balloons with the other items defined in the item list<A NAME=MARKER-2-4></A> resource<TR>
<TD>Icon<TD>An icon whose black-and-white version is stored in an <CODE>'ICON'</CODE> resource and whose color version is stored in a <CODE>'cicn'</CODE> resource <BR>with the same resource ID as the <CODE>'ICON'</CODE> resource<A NAME=MARKER-2-9></A><TR>
<TD>Picture<TD>A QuickDraw picture stored in a <CODE>'PICT'</CODE> resource<A NAME=MARKER-2-1></A><TR>
<TD>RadioButton<TD>A radio button control (use in dialog boxes only)<TR>
<TD>StaticText<TD>Static text; that is, text that cannot be edited<A NAME=MARKER-2-110></A><TR>
<TD>UserItem<TD>An application-defined item (use in dialog boxes only)<A NAME=MARKER-2-12></A></TABLE>
<P>
 The chapter "Help Manager" in <I><A HREF="../MoreToolbox/MoreToolbox-2.html">Inside Macintosh: More Macintosh Toolbox</A></I> describes how to create and use items of type <CODE>HelpItem</CODE> to provide help balloons for your alert and dialog boxes. When you specify a help item, make it the last item in the list, as shown in <A HREF=#MARKER-9-127>Listing 6-5 on page 6-25</A>.<P>
 The chapter "Finder Interface" in this book describes icon (<CODE>'ICON'</CODE>) resources and color icon (<CODE>'cicn'</CODE>) resources. <I>Inside Macintosh: Imaging</I> describes <CODE>'PICT'</CODE> resources.<P>
 The chapter "Control Manager" in this book describes how to create a control with <BR>a <CODE>'CNTL'</CODE> resource. Pop-up menus are easily implemented as controls. <A HREF=#MARKER-9-182>"Pop-Up Menus as Items" beginning on page 6-38</A> illustrates how to include pop-up menus in your <BR>dialog boxes.<P>
 Be aware that alert boxes should contain only buttons (which the user clicks to dismiss the alert box), static text, icons, and pictures. If you need to present other items, you should create a dialog box.<P>
 The first item in an alert box's item list resource should be the OK button; if a Cancel button is necessary, it should be the second item. The Dialog Manager provides these constants for the first two item numbers:<A NAME=MARKER-9-566></A><P>
<PRE>
CONST ok       = 1;
      cancel   = 2;
</PRE>
 <A NAME=MARKER-2-26></A>As described in <A HREF=Toolbox-379.html#MARKER-9-89>"Creating Alert Sounds and Alert Boxes" beginning on page 6-17</A>, you define within the alert resource whether the OK or the Cancel button is the default button for each alert stage. The Dialog Manager automatically draws a bold outline around the button that you specify and, if the user presses the Return key or Enter key, the Dialog Manager responds--or your event filter function should respond--as if the default button were clicked. (<A HREF=Toolbox-385.html#MARKER-9-340>"Writing an Event Filter Function for Alert and Modal Dialog Boxes" beginning on page 6-86</A> describes event filter functions.)<P>
 <A NAME=MARKER-2-382></A>The Dialog Manager does not draw a bold outline around the default button for dialog boxes. <A HREF=Toolbox-383.html#MARKER-9-223>"Using an Application-Defined Item to Draw the Bold Outline for a Default Button" beginning on page 6-50</A> shows how your application can outline the default button in a dialog box. You should normally give every dialog box a default button--that is, one whose action is invoked when the user presses the Return or Enter key. <A HREF=Toolbox-385.html#MARKER-9-340>"Writing an Event Filter Function for Alert and Modal Dialog Boxes" beginning on page 6-86</A> shows how to test for these key-down events and respond as if the user had clicked the default button. If you don't provide your own event filter function, the Dialog Manager treats the first item in an item list resource as the default button. That is, although the Dialog Manager doesn't draw a bold outline around the button in a dialog box, the Dialog Manager does return its item number to your application when the user presses the Return or Enter key.<P>
 Don't set a default button to perform a dangerous action--for example, one that causes <BR>a loss of user data. If none of the possible actions is safe, don't display a default border around any button and provide an event filter function that ignores the Return and Enter keys. This protects users from accidentally damaging their work by pressing Return or Enter out of habit. However, you should try to design a safe action that the user can invoke with a default button, such as a Save button. <A HREF=#MARKER-9-145>Figure 6-14</A> illustrates an alert box that provides a default button for a safe action.<P>
<B>Figure 6-14  <A NAME=MARKER-9-145></A>A safe default button in an alert box</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-SL-21.jpg"><P>
 Provide a Cancel button whenever you can, and in your event filter function, map the Command-period key combination and the Esc (Escape) key to the Cancel button.<P>
 Don't display a bold outline around any button if you use the Return key in editable text items, because using the same key for two different purposes confuses users and makes the interface less predictable.<A NAME=MARKER-2-571></A><P>
<A NAME=HEADING381-42></A>
<H3><A NAME=MARKER-9-147></A>Display Rectangles</H3>
 <A NAME=MARKER-2-572></A>As previously mentioned, the display rectangle determines the location of an item within an alert box or a dialog box. Use the alert or dialog box's local coordinates to specify the display rectangle.<P>
 For controls, the display rectangle becomes the control's enclosing rectangle. To match <BR>a control's enclosing rectangle to its display rectangle, specify an enclosing rectangle <BR>in the control resource that is identical to the one you specify for the display rectangle in the item list resource. (The control resource is described in the chapter "Control Manager" in this book.)<P>
<DL>
<DT><B>Note</B>
<DD>Note that, when an item is a control defined in a control (<CODE>'CNTL'</CODE>)<DFN> resource, the rectangle added to the update region is the rectangle defined in the </DFN>control<DFN> resource</DFN>, not the display rectangle defined in <BR>the item list resource.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 For an editable text item, the display rectangle becomes the TextEdit destination rectangle and its view rectangle. Word wrapping occurs within display rectangles that are large enough to contain multiple lines of text, and the text is clipped if there's more than will fit in the rectangle. The Dialog Manager uses the QuickDraw procedure <CODE>FrameRect</CODE> to draw a rectangle three pixels outside the display rectangle. For more detailed information about TextEdit, see the chapter "TextEdit" in <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I>.<P>
 For a static text item, the Dialog Manager draws the text within the display rectangle just as it draws editable text items, except that the Dialog Manager doesn't draw a frame rectangle outside the display rectangle.<P>
 For an icon or a QuickDraw picture larger than its display rectangle, the Dialog Manager scales the icon or picture to fit the display rectangle. <P>
 Although the procedure for an application-defined item can draw outside the item's display rectangle, this is not recommended, because if the Dialog Manager receives <BR>an update event involving an area outside the display rectangle but inside the area where you draw your application-defined item, the Dialog Manager won't call your draw procedure.<P>
<DL>
<DT><B>Note</B>
<DD>A click anywhere in the display rectangle is considered a click in that item. If display rectangles overlap, a click in the overlapping area <BR>is considered a click in whichever item appears first in the item list resource.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 You should display items in functional and consistent locations, both within your application and across all applications that you develop. In alert boxes and in most dialog boxes, place the OK button in the lower-right corner and place the Cancel <BR>button to its left. <A HREF=#MARKER-9-149>Figure 6-15</A> shows the recommended location of buttons and text <BR>in an alert box. <P>
<B>Figure 6-15  <A NAME=MARKER-9-149></A>The consistent spacing of buttons and text in an alert box</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-SL-22.jpg"><P>
 Generally, you should use distances of 13 and 23 white pixels to separate the items in dialog boxes and alert boxes. (When separating the default button from the window edges and other items, don't count the pixels that make up its bold outline.) However, be aware that the Window Manager adds 3 white pixels inside the window frame when it draws alert boxes and modal dialog boxes. Therefore, specify display rectangle locations as follows when you use tools like Rez and ResEdit:<P>
<UL>
<LI>Place the display rectangle for the lower-right button 10 pixels from the right edge and 10 pixels from the bottom edge of the alert or modal dialog box; align the display rectangles for other bottommost and rightmost items with this button.
<LI>Place the display rectangle for the upper-left icon (or similar item) 10 pixels from the top edge and 20 pixels from the left of the alert or modal dialog box; align the display rectangles for other topmost and leftmost items with this item. The Dialog Manager automatically places the caution, note, and stop alert icons in this position when you use the <CODE>CautionAlert</CODE>, <CODE>NoteAlert</CODE>, and <CODE>StopAlert</CODE> functions. When you use the <CODE>Alert</CODE> function, you must specify the icon and the location.
<LI>Place the other elements in the alert or modal dialog box 13 or 23 pixels apart, as shown in <A HREF=#MARKER-9-149>Figure 6-15</A>.<P>
</UL>
 For example, the rectangle for the alert box in <A HREF=#MARKER-9-149>Figure 6-15</A> has a specified height of <BR>85 pixels. The display rectangle for the Save button has a bottom coordinate of 75, and the display rectangle for the static text item has a top coordinate of 10. The Window Manager adds 3 white pixels at the top of the alert box and 3 pixels at the bottom, so <BR>the alert box contains 13 white pixels below the Save button and 13 white pixels above the static text display rectangle. <A HREF=#MARKER-9-150>Listing 6-6</A> shows how the locations for these display rectangles are specified in a Rez input file. <P>
<B>Listing 6-6  <A NAME=MARKER-9-150></A>Rez input for consistent spacing of display rectangles</B><P>
<PRE>
resource 'DITL' (200, purgeable) {
   {  {55, 288, 75, 348},  Button      {enabled, &quot;Save&quot;},
      {55, 215, 75, 275},  Button      {enabled, &quot;Cancel&quot;},
      {55, 72,  75, 156},  Button      {enabled, &quot;Don't Save&quot;},
      {10, 75,  42, 348},  StaticText  {disabled,
         &quot;Save changes to the SurfWriter document "^0" before&quot;
         &quot; closing?&quot;}
   }
};
</PRE>
 When specifying display rectangle locations for items in movable modal and modeless dialog boxes, use the full distance of either 13 or 23 pixels to separate items from the window edges. For example, if the items in <A HREF=#MARKER-9-149>Figure 6-15</A> were placed in a modeless dialog box, the top coordinate of the Save button's display rectangle should be 52 instead of 55, and its bottom coordinate would be 72 instead of 75.<P>
 As explained in the previous section, the default button can be any button; its assignment is secondary to the consistent placement of buttons. This rule keeps the OK button and the Cancel button consistently placed. Otherwise, the buttons would keep changing location depending on the default choice.<P>
 <A NAME=MARKER-2-211></A>The Western reader's eye tends to move from the upper-left area of the alert or dialog box to the lower-right area. For Western versions of your software, use the upper-left area for elements (such as the alert icon) that convey the initial impression that you want to make. Place the buttons that a user clicks in the lower-right area.<P>
 The alignment of the items in an alert box or a dialog box may vary with localization. Although in Roman script systems these items are generally aligned left to right, items <BR>in Arabic or Hebrew script systems should generally be aligned right to left, because Arabic and Hebrew are written from right to left. The TextEdit procedure <CODE>TESetJust</CODE>, described in the chapter "TextEdit" in <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I>, controls the alignment of interface elements.<A NAME=MARKER-2-137></A><P>
 When line alignment is right to left, as in Hebrew and Arabic, the Control Manager transposes checkboxes--and radio buttons--and their titles. That is, checkboxes and radio buttons appear to the right of the text instead of to the left, as in Roman script systems. Therefore, when you create checkboxes, radio buttons, and static text items <BR>that need to align, make sure that their display rectangles are the same size. <P>
 The dialog box at the top of <A HREF=#MARKER-9-153>Figure 6-16</A> shows several checkboxes and radio buttons with display rectangles of different sizes. The next dialog box in the figure illustrates what happens to the alignment of these items after the Control Manager transposes <BR>the controls with their titles.<P>
 The bottom two dialog boxes in <A HREF=#MARKER-9-153>Figure 6-16</A> illustrate how the Control Manager displays properly sized items when transposing the controls with their titles.<P>
<B>Figure 6-16  <A NAME=MARKER-9-153></A>Incorrectly and correctly sized display rectangles for alternate script systems<A NAME=MARKER-2-221></A><A NAME=MARKER-2-155></A></B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-SL-23.jpg"><P>
<A NAME=HEADING381-70></A>
<H3><A NAME=MARKER-9-156></A>Enabled and Disabled Items</H3>
 <A NAME=MARKER-9-567></A>For each item in an item list resource, include one of these two constants to specify in a Rez input file whether the Dialog Manager should inform your application of events involving that item:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Description<TR>
<TD>enabled<TD>Informs your application about events involving this item<TR>
<TD>disabled<TD>Doesn't inform your application about events involving this item</TABLE>
<P>
 Generally, you should enable only controls. In particular, you should enable buttons, radio buttons, and checkboxes so that your application knows when they've been clicked. You typically disable editable text and static text items. You normally disable editable text items because you use the Dialog Manager function <CODE>GetDialogItemText</CODE> to read the information in the items only after the user clicks the OK button. (<A HREF=Toolbox-382.html#MARKER-9-206>Listing 6-12 on page 6-45</A> illustrates how to use the <CODE>GetDialogItemText</CODE> function for this purpose.) You should use static text items only for providing information; users don't expect to click them. Likewise, you typically disable icons and pictures that merely provide information; if you use an icon or a picture as a buttonlike control to receive input, however, you must enable it. If you create an application-defined item such as a moving indicator to display information, you typically disable it. If you create an application- defined item such as a buttonlike control to receive input, you must enable it.<P>
 Don't confuse disabling an item with using the Control Manager procedure <CODE>HiliteControl</CODE> to make a control inactive. When you don't want the Control Manager to respond to clicks in a control, you make it <I>inactive</I>; when you don't want the Dialog Manager to report clicks in a control, you make it <I>disabled</I>.<P>
 The Control Manager displays an inactive control in a way (dimmed, for example) that shows it's inactive, whereas the Dialog Manager makes no visual distinction between a disabled item and an enabled item. <A HREF=#MARKER-9-161>Figure 6-17</A> shows the difference between an inactive and an active control. The Control Manager procedure <CODE>HiliteControl</CODE> has been used to dim the inactive Eject button. If a user clicks this button, the Control Manager does not respond. However, when a user clicks the active Desktop button, the Control Manager inverts the button for 8 ticks.<P>
 Buttons and other controls are generally enabled, and disabling them does not alter their appearance; the enabled radio button in <A HREF=#MARKER-9-161>Figure 6-17</A> would appear the same if it were disabled. Because the static text reading "Save this document as" in <A HREF=#MARKER-9-161>Figure 6-17</A> is not <BR>a control, the application doesn't need to respond clicks in the text. Therefore, the application has disabled it; however, the static text would have the same appearance <BR>if the application were to enable it.<A NAME=MARKER-2-112></A><P>
<A NAME=HEADING381-76></A>
<H3><A NAME=MARKER-9-159></A>Resource IDs for Items</H3>
 <A NAME=MARKER-2-160></A>The final element for an item in an item list resource is usually either a text string or a resource ID. The choice depends on the type of item.<P>
<B>Figure 6-17  <A NAME=MARKER-9-161></A>Inactive controls and disabled items</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-SL-24.gif"><P>
 Provide a resource ID for icons, QuickDraw pictures, and controls other than buttons, checkboxes, and radio buttons. For an icon, provide the ID of an <CODE>'ICON'</CODE> resource; for <BR>a QuickDraw picture, the ID of a <CODE>'PICT' </CODE>resource; and for a control (including a pop- up menu), the ID of a <CODE>'CNTL'</CODE> resource. In <A HREF=#MARKER-9-127>Listing 6-5 on page 6-25</A>, the resource ID of 128 specifies which <CODE>'ICON'</CODE> (and <CODE>'cicn'</CODE>) resources to use for the second item in the item list resource.<P>
 For a button, checkbox, radio button, static text item, and editable text item, supply a text string as the final element for the item in its item list resource. The next several sections provide guidelines for the text that you should provide.<P>
 For your own application-defined items, supply neither a title nor a resource ID. <BR><A HREF=Toolbox-383.html#MARKER-9-226>Listing 6-15 on page 6-51</A> shows an item list resource that includes an application- defined item.<P>
<A NAME=HEADING381-83></A>
<H3><A NAME=MARKER-9-162></A>Titles for Buttons, Checkboxes, and Radio Buttons</H3>
 <A NAME=MARKER-2-581></A>For a button, checkbox, or radio button, provide a text string for the control's title as the final element for the item when you specify it in the item list. In <A HREF=#MARKER-9-127>Listing 6-5 on page 6-25</A>, the string <CODE>OK</CODE> specifies the button title for the first item in the item list resource.<P>
 <A NAME=MARKER-21-140></A><A NAME=MARKER-21-649></A>Use book-title capitalization for these items. In general, this means that you capitalize one-word titles and, in multiple-word titles, words of four or more letters. Usually you don't capitalize words such as <I>in, an,</I> or <I>and.</I> The rules for capitalization of titles appear in the <I>Apple Publications Style Guide,</I> which is available from APDA.<P>
 As explained in the chapter "Control Manager" in this book, the title of a checkbox should reflect two clearly opposite states, because a checkbox should allow the user to turn a particular setting either on or off. The opposites should be expressed in an equal sense in either state. If you can't devise a checkbox title that clearly implies its opposite state, you might be better off using radio buttons. With radio buttons, you can use two titles, thereby clarifying the states. Radio buttons should represent related, but not necessarily opposite, choices. Give each radio button a title consisting of a word or a phrase that identifies what the button does. Remember that, as described in the chapter "Control Manager" in this book, the radio buttons in a group are mutually exclusive: only one button in that group can be on at one time.<P>
 Whenever possible, title a button with a verb describing the action that the button performs. A user typically reads the text in an alert box or a dialog box until it becomes familiar and then relies on visual cues, such as button titles or positions, to respond. Buttons such as Save, Quit, or Erase Disk allow users to identify and click the correct button quickly. These titles are often more clear and precise than OK, Yes, and No. If the action can't be condensed into a word or two, OK and Cancel or Yes and No may serve the purpose. If you use these generic titles, be sure to phrase the wording in the dialog box so that the action the button initiates is clear. <A HREF=#MARKER-9-166>Figure 6-18</A> shows a dialog box with appropriate OK and Cancel buttons.<P>
<B>Figure 6-18  <A NAME=MARKER-9-166></A>A dialog box with OK and Cancel buttons</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-33.jpg"><P>
 Cancel means "dismiss this operation with no side effects." It does not mean "I've read this dialog box" or "stop what you're doing regardless." When users click the Cancel button in your alert boxes, modal dialog boxes, and movable modal dialog boxes, your application should revoke any actions it took since displaying the alert or dialog box and then remove the box. <P>
 Your application should not remove a modeless dialog box when the user clicks a button; rather, you should remove the dialog box when the user clicks its close box or chooses Close from the File menu while the modeless dialog box is active.<P>
 When it is impossible to return to the state that existed before an operation began, don't use a Cancel button. You can use Stop or OK, which are useful in different situations. A Stop button may leave the results of a partially complete task intact, whereas a Cancel button always returns the application and its documents to their previous state. Use OK for a button that closes the alert box, modal dialog box, or movable modal dialog box and accepts any changes made while the dialog box was displayed. <P>
 Because of the difficulty in revoking the last action invoked from a modeless dialog box, these dialog boxes typically don't have Cancel buttons, although they may have Stop buttons. For example, the movable modal dialog box shown in <A HREF=#MARKER-9-167>Figure 6-19</A> uses a Stop button; clicking the button halts the current file copy operation but leaves intact the copies that were previously made. <P>
<B>Figure 6-19  <A NAME=MARKER-9-167></A>A movable modal dialog box with a Stop button</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-27.jpg"><P>
 In an alert box that requires confirmation, use a button title that describes the result of accepting the message in the alert box. For example, if an alert box asks "Revert to the last saved version of the document," use a Revert button rather than an OK button. Try to use a verb in the button title; as in the Revert button in <A HREF=#MARKER-9-168>Figure 6-20</A>, use the same verb that you use in your alert message. <P>
<B>Figure 6-20  <A NAME=MARKER-9-168></A>An alert box with a Revert button</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-28.jpg"><P>
 If the alert box presents the user with a situation in which no alternative actions are available, give the box a single button that's titled OK. You should interpret the user's clicking this button to mean "I've read the alert box."<P>
 A modal dialog box usually cuts the user off from the task. That is, when making choices in a modal dialog box, the user can't see the area of the document that changes. The user sees the changes only after dismissing the dialog box. If the changes aren't appropriate, then the user has to repeat the entire operation. To provide better feedback to the user, you need to give the user a way to see what the changes will be. Therefore, any selection made in a modal dialog box should immediately update the document contents, or you should provide a sample area in the dialog box that reflects how the user's selections will change the document. In the case of immediate document updating, the OK button means "accept this change" and the Cancel button means "undo all changes made through this dialog box." <P>
 The Dialog Manager displays button titles (as well as all other control titles) in the system font. To make it easier to localize your application, you should not change <BR>the font.<A NAME=MARKER-2-477></A><A NAME=MARKER-2-478></A><P>
<A NAME=HEADING381-102></A>
<H3><A NAME=MARKER-9-171></A>Text Strings for Static Text and Editable Text Items</H3>
 For an editable text item, if you want the item to display only a blinking cursor, specify an empty string as the item's final element in the item list resource or specify a string if you want to display some default text.<P>
 For a static text item, supply a text string as its final element when you specify it in the item list resource. In the third item in <A HREF=#MARKER-9-127>Listing 6-5</A>, the text string <CODE>SurfWriter 3.0 <BR>\nA Swell Text Processor \n\n&#169;My Company, Inc. 1992</CODE> specifies the alert box's message.<P>
 <A NAME=MARKER-2-172></A>Whenever you provide static text items in alert and dialog boxes, ensure that the messages make sense to the user. Use simple, nontechnical language and don't provide system-oriented information to which the user can't respond.<P>
 Whenever applicable, state the name of the document or application in your alert or dialog box. For example, the alert box in <A HREF=#MARKER-9-168>Figure 6-20 on page 6-35</A> shows both the name of the application (SurfWriter) and the name of the document (My Window). This kind of message helps users who are working with several documents or applications at once <BR>to make decisions about each one individually. <A HREF=Toolbox-382.html#MARKER-9-197>"Changing Static Text" beginning on page 6-42</A> describes how to use the <CODE>ParamText</CODE> procedure to supply the names of document windows to your alert and dialog boxes dynamically.<P>
 Use icons and pictures whenever possible. Images can describe some error situations better than words, and familiar icons help users distinguish their alternatives better. However, because experience has shown that it is nearly impossible to create icons that are comprehensible or inoffensive across all international markets, you should be prepared to localize any icons or pictures you use. See the chapter "Icons" in <I>Macintosh Human Interface Guidelines</I> for more information about creating appropriate icons.<A NAME=MARKER-2-173></A><P>
 For your static text items, it's generally better to be polite than abrupt, even if it <BR>means lengthening your message. Your message should be helpful, and it may offer constructive suggestions, but it should not appear to give orders. Its focus should be <BR>to help the user perform the task, not to give an interesting but academic description <BR>of the task itself.<P>
 <A NAME=MARKER-2-174></A>When you localize your application for use with other languages, the text may become longer or shorter. Translated text is often 50 percent longer than U.S. English text. You may need to resize your display rectangles and your alert and dialog boxes to accommodate the translated text.<P>
 By default, the Dialog Manager displays static text items in the system font. To make it easier to localize your application, you should not change the font. Do not use a smaller font, such as 9-point Geneva; some script systems such as KanjiTalk require 12-point fonts. You will save yourself future localization effort by leaving all the text in your alert and dialog boxes in the system script.<A NAME=MARKER-2-175></A><P>
 In alert boxes, try to include information that tells the user how to resolve the problem at hand. Never refer the user to external documentation for further clarification.<P>
 Stop alerts typically report errors to the user. A good error message explains what <BR>went wrong, why it went wrong, and what the user can do about it. Express this information in the user's vocabulary, not in your programming vocabulary. <BR><A HREF=#MARKER-9-176>Figure 6-21</A> shows an example of a very poor alert message--the information is expressed in the programmer's vocabulary, and the user is offered no clue about <BR>how to remedy the problem.<P>
<B>Figure 6-21  <A NAME=MARKER-9-176></A>An obscure and useless alert message</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-30.jpg"><P>
 <A HREF=#MARKER-9-177>Figure 6-22</A> shows a somewhat better alert message. Although the vocabulary is less technical, no remedy to the problem is offered.<P>
<B>Figure 6-22  <A NAME=MARKER-9-177></A>A less obscure alert message</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-31.jpg"><P>
 <A HREF=#MARKER-9-178>Figure 6-23</A> illustrates a good alert message. The message is specific, it's expressed in nontechnical terms, it explains why the error occurred, and it suggests a solution to <BR>the problem.<P>
<B>Figure 6-23  <A NAME=MARKER-9-178></A>A clear and helpful alert message</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-32.jpg"><P>
 The best way to make an alert message understandable is to think carefully through the error condition itself. Can the application handle this without an error? Is the message specific enough so that the user can fix the situation? What are the recommended solutions? <A NAME=MARKER-2-179></A><A NAME=MARKER-2-180></A><A NAME=MARKER-2-181></A><P>
<A NAME=HEADING381-122></A>
<H3><A NAME=MARKER-9-182></A>Pop-Up Menus as Items</H3>
 <A NAME=MARKER-2-183></A>You can use pop-up menus to present the user with a list of mutually exclusive choices in a dialog box. <A HREF=#MARKER-9-185>Figure 6-24</A> illustrates a typical use of pop-up menus in a dialog box. As explained in the chapter "Control Manager" in this book, pop-up menus are especially useful as an alternative to radio buttons when the user must make one choice from a list of many or set a specific value, or when you must present a variable list of choices. The pop-up menu in <A HREF=#MARKER-9-185>Figure 6-24</A> allows the application to present a choice of modem speeds that vary according to the modem type in the user's computer.<A NAME=MARKER-2-184></A><P>
<B>Figure 6-24  <A NAME=MARKER-9-185></A>A pop-up menu in a dialog box</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-S-33.jpg"><P>
 In System 7, pop-up menus are implemented as controls. To display a pop-up menu in a dialog box, you<P>
<UL>
<LI>define specific features of the pop-up menu in a control that uses the standard pop-up control definition function (described in the chapter "Control Manager" in this book)
<LI>define the menu items of a pop-up menu just as you define items in other menus (using <CODE>GetMenu</CODE> or <CODE>NewMenu</CODE>, as described in the chapter "Menu Manager" in <BR>this book)
<LI>specify the pop-up menu in the dialog box's item list resource<P>
</UL>
 <A NAME=MARKER-2-186></A>Using the pop-up control definition function, the Dialog Manager automatically draws the pop-up box and its drop shadow, inserts the text into the pop-up box, draws a downward-pointing triangle, and draws the pop-up menu's title. When the user moves the cursor to a pop-up menu and presses the mouse button, the pop-up control definition function highlights the pop-up menu title, displays the pop-up menu, and handles all user interaction until the user releases the mouse button. When the user releases the mouse button, the pop-up control definition function closes the pop-up box, draws the user's choice in the pop-up box (or restores the previous item if the user doesn't make a new choice), and removes the highlighting from the pop-up menu title. The control definition function then sets the value of the control to the item selected by the user. Your application can use the Control Manager function <CODE>GetControlValue</CODE> <BR>to get the number of the currently selected item. <A NAME=MARKER-2-187></A><P>
 The modal dialog box shown in <A HREF=#MARKER-9-185>Figure 6-24</A> is created by defining a dialog resource that describes the dialog box and by defining an item list resource that describes the dialog items, including a control whose <CODE>'CNTL'</CODE> resource uses the standard pop-up control definition function. <A HREF=#MARKER-9-188>Listing 6-7</A> shows the dialog resource and item list resource for this modal dialog box.<P>
<B>Listing 6-7  <A NAME=MARKER-9-188></A><A NAME=MARKER-9-189></A>Rez input for a dialog resource and an item list resource for a dialog box that includes a pop-up menu</B><P>
<PRE>
resource 'DLOG' (kModemDialog, purgeable) {
   {62, 184, 216, 416}, dBoxProc, visible, noGoAway, 0x0,
   kModemDialogDITL, &quot;&quot;, alertPositionMainScreen
};
resource 'DITL' (kModemDialogDITL, purgeable) {
   {  {123, 152, 144, 222},   Button      {enabled, &quot;OK&quot;},
      {123, 69, 144, 139},    Button      {enabled, &quot;Cancel&quot;},
      {13, 70, 33, 204},      StaticText  {enabled, &quot;Modem Setup&quot;},
      {41, 23, 61, 64},       StaticText  {enabled, &quot;Port:&quot;},
      {41, 67, 59, 186},      RadioButton {enabled, &quot;Modem Port&quot;},
      {59, 67, 77, 186},      RadioButton {enabled, &quot;Printer Port&quot;},
      {90,18,109,198},        Control     {disabled, kPopUpCNTL},
      {123, 152, 144, 222},   UserItem    {disabled}  /*outline OK button*/
      {0,0,0,0},              HelpItem    {disabled, HMScanhdlg{kModemHelp}}
                                                      /*Balloon Help*/
   }
};
</PRE>
 <A HREF=#MARKER-9-190>Listing 6-8</A> shows the <CODE>'CNTL'</CODE> and <CODE>'MENU'</CODE> resources for the Speed pop-up menu shown in <A HREF=#MARKER-9-185>Figure 6-24</A>. Notice that the display rectangle specified for the control in the item list resource is the same as the enclosing rectangle specified in the control resource. See the chapter "Control Manager" in this book for a complete description of how to specify values for a pop-up menu's control resource.<P>
<B>Listing 6-8  <A NAME=MARKER-9-190></A>Rez input for a control resource and a menu resource for a pop-up menu</B><P>
<PRE>
resource 'CNTL' (kPopUpCNTL, preload, purgeable) {
   {90, 18, 109, 198},  /*enclosing rectangle of control*/
   popupTitleLeftJust,  /*title position*/
   visible,             /*make control visible*/ 
   50,                  /*pixel width of title*/
   kPopUpMenu,          /*'MENU' resource ID*/
   popupMenuCDEFProc,   /*pop-up control definition ID*/ 
   0,                   /*reference value*/
   &quot;Speed:&quot;             /*control title*/
};
resource 'MENU' (kPopUpMenu, preload, purgeable) {
   mPopUp, textMenuProc,
   0b1111111111111111111111111111111,
   enabled, &quot;Speed&quot;,
   {
      &quot;300 bps&quot;,     noicon, nokey, nomark, plain;
      &quot;1200 bps&quot;,    noicon, nokey, nomark, plain;
      &quot;2400 bps&quot;,    noicon, nokey, nomark, plain;
      &quot;9600 bps&quot;,    noicon, nokey, nomark, plain;
      &quot;19200 bps&quot;,   noicon, nokey, nomark, plain
   }
};
</PRE>
<A NAME=HEADING381-137></A>
<H3>Keyboard Navigation Among Items</H3>
 <A NAME=MARKER-2-191></A>Your dialog boxes may have several items, such as editable text items and scrolling lists, that can accept input from the keyboard. You need to give users a visual cue indicating which item is currently accepting input from the keyboard. Each item type has its own distinct indicator. The Dialog Manager automatically displays a blinking cursor in an editable text item to indicate that it is accepting keyboard input. You can also use the <CODE>SelectDialogItemText</CODE> procedure (explained on <A HREF=Toolbox-420.html#MARKER-9-526>page 6-131</A>) to indicate a selected text range within an editable text item.<P>
 When a scrolling list is accepting keyboard input, you should indicate it by a rectangular border of two black pixels, separated from the list by one pixel of white space. In <BR><A HREF=Toolbox-382.html#MARKER-9-196>Figure 6-25</A>, the AppleTalk Zones scrolling list is the item currently accepting keyboard input in the Chooser dialog box. See the chapter "List Manager" in <I>Inside Macintosh: <BR>More Macintosh Toolbox</I> for details about creating lists in dialog boxes.<P>
 Because all typing goes to the active window, there should be only one active area and only one indicator at any time. If only one element in a dialog box can accept keyboard input and that element is a scrolling list, it's not necessary to place a border around it. <P>
 The Dialog Manager automatically handles mouse-down events and keyboard events <BR>for the Tab key. Thus, the user can select any item that accepts keyboard input by clicking the desired item or by pressing the Tab key to cycle through the available items. When the user presses the Tab key, the Dialog Manager accepts the changes made to the current item and selects the next item--as listed in the item list--that accepts keyboard input. When the user clicks another item, the Dialog Manager accepts the changes made to the current item and selects the newly clicked item.<A NAME=MARKER-2-192></A><A NAME=MARKER-2-193></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-380.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-382.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Getting and Setting Sound Input Device Information (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.9.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.6.htm">Section top</A> | <A target="doc" HREF="imsoundinput.b.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=653"> </A><A NAME="20620"> </A>Getting and Setting Sound Input Device Information<A NAME="marker=149"> </A></H1><P CLASS="T0.Text0"><A NAME="pgfId=659"> </A><A NAME="marker=515"> </A>You can get information about a specific sound input device and alter a sound input&nbsp;device's settings by calling the functions <TT CLASS="cv">SPBGetDeviceInfo</TT> and <TT CLASS="cv">SPBSetDeviceInfo</TT>. These functions accept <B CLASS="bold">sound input device information selectors</B> that determine which information you need or want to change. The selectors currently available are defined by constants of type <TT CLASS="cv">OSType</TT>.<A NAME="marker=150"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1396"> </A>Here is a list of the selectors that all sound input device drivers must support. For complete details on all the selectors described in this section, see <A target="doc" HREF="imsoundinput.13.htm#14520" CLASS="XRef">&quot;Sound Input Device Information Selectors&quot;</A>.</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=13520"> </A>CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;siAsync&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'asyn';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{asynchronous capability}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siChannelAvailable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'chav';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of channels available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siCompressionAvailable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'cmav';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{compression types available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siCompressionFactor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'cmfa';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{current compression factor}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siCompressionType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'comp';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{compression type}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siContinuous&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'cont';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{continuous recording}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siDeviceBufferInfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'dbin';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{size of interrupt buffer}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siDeviceConnected&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'dcon';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{input device connection status}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siDeviceIcon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'icon';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{input device icon}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siDeviceName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'name';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{input device name}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siLevelMeterOnOff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'lmet';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{level meter state}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siNumberChannels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'chan';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{current number of channels}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siRecordingQuality&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'qual';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{recording quality}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siSampleRate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'srat';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{current sample rate}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siSampleRateAvailable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'srav';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample rates available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siSampleSizeAvailable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'ssav';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{sample sizes available}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siSampleSize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'ssiz';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{current sample size}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siTwosComplementOnOff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'twos';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{two's complement state}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=1134"> </A><A NAME="marker=5397"> </A>The Sound Input Manager defines several selectors that specifically help it interact with sound input device drivers. Your application should not use any of these selectors, but if you are implementing a sound input device driver, you need to support these selectors. They are:</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=13524"> </A>CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;siCloseDriver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'clos';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{release driver}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siInitializeDriver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'init';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{initialize driver}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siPauseRecording&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'paus';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pause recording}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siUserInterruptProc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'user';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{set sound input interrupt routine}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=1133"> </A><A NAME="marker=5403"> </A>Finally, there are a number of sound input device information selectors that sound input device drivers can optionally support. If you are writing an application, you can use these selectors to interact with a sound input device driver, but you should be aware that some drivers might not support all of them. To determine if a driver supports one of these selectors, you can use the <TT CLASS="cv">SPBGetDeviceInfo</TT> function. If no errors are returned, then the selector is supported when using the <TT CLASS="cv">SPBGetDeviceInfo</TT> and the <TT CLASS="cv">SPBSetDeviceInfo</TT> functions.</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=13528"> </A>CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;siActiveChannels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'chac';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{channels active}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siActiveLevels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'lmac';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{levels active}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siAGCOnOff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'agc ';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{automatic gain control state}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siCompressionHeader&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'cmhd';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{get compression header}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siCompressionNames&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'cnam';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{return compression type names}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siInputGain&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'gain';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{input gain level}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siInputSource&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'sour';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{input source selector}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siInputSourceNames&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'snam';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{input source names}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siOptionsDialog&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'optd';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{display options dialog box}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siPlayThruOnOff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'plth';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{play-through state}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siStereoInputGain&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'sgai';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{stereo input gain level}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siVoxRecordInfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'voxr';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{VOX record parameters}<BR>&nbsp;&nbsp;&nbsp;&nbsp;siVoxStopInfo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 'voxs';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{VOX stop parameters}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=661"> </A><A NAME="marker=5409"> </A>The format of the relevant data (either returned by the Sound Input Manager or provided by you) depends on the selector you provide. For example, if you want to&nbsp;determine the name of some sound input device, you can pass to the <TT CLASS="cv">SPBGetDeviceInfo</TT> function the <TT CLASS="cv">siDeviceName</TT> selector and a pointer to a 256-byte&nbsp;buffer. If the <TT CLASS="cv">SPBGetDeviceInfo</TT> function can get the information, it fills that&nbsp;buffer with the name of the specified sound input device. <A target="doc" HREF="imsoundinput.a.htm#15336" CLASS="XRef">Listing&nbsp;43</A> illustrates one&nbsp;way you can determine the name of a particular sound input device.</P><P CLASS="L.Listing"><A NAME="pgfId=662"> </A>Listing&nbsp;43 <A NAME="15336"> </A>Determining the name of a sound input device</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=13532"> </A>FUNCTION MyGetDeviceName (myRefNum: LongInt; VAR dName: Str255): OSErr;<BR>BEGIN<BR>&nbsp;&nbsp;&nbsp;&nbsp;MyGetDeviceName := SPBGetDeviceInfo(myRefNum, siDeviceName, Ptr(@dName));<BR>END;<BR></CODE><P CLASS="Note"><A NAME="pgfId=617"> </A><A NAME="marker=5415"> </A>You can get the name and icon of all connected sound input devices without using sound input information selectors by using the <TT CLASS="cv">SPBGetIndexedDevice</TT> function, which is described on <A target="doc" HREF="imsoundinput.1c.htm#29688" CLASS="XRef">[link]</A>. </P><P CLASS="T1.Text1"><A NAME="pgfId=618"> </A>Some selectors cause the <TT CLASS="cv">SPBGetDeviceInfo</TT> function to return data of other types. <A target="doc" HREF="imsoundinput.a.htm#29990" CLASS="XRef">Listing&nbsp;44</A> illustrates how to determine the number of channels, the sample rate, the sample size, and the compression type currently in use by a given sound input device. (The procedure defined in <A target="doc" HREF="imsoundinput.a.htm#29990" CLASS="XRef">Listing&nbsp;44</A> is called in the procedure defined in <A target="doc" HREF="imsoundinput.7.htm#14131" CLASS="XRef">Listing&nbsp;42</A>.)</P><P CLASS="L.Listing"><A NAME="pgfId=666"> </A>Listing&nbsp;44 <A NAME="29990"> </A>Determining some sound input device settings</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=13536"> </A>PROCEDURE MyGetDeviceSettings (myRefNum: LongInt; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR numChannels: Integer; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR sampleRate: Fixed; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR sampleSize: Integer; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR compressionType: OSType);<BR>VAR<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr;<BR>BEGIN<BR>&nbsp;&nbsp;&nbsp;&nbsp;{Get number of active channels.}<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr := SPBGetDeviceInfo (myRefNum, siNumberChannels, Ptr(@numChannels));<BR>&nbsp;&nbsp;&nbsp;&nbsp;{Get sample rate.}<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr := SPBGetDeviceInfo(myRefNum, siSampleRate, Ptr(@sampleRate));<BR>&nbsp;&nbsp;&nbsp;&nbsp;{Get sample size.}<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr := SPBGetDeviceInfo(myRefNum, siSampleSize, Ptr(@sampleSize));<BR>&nbsp;&nbsp;&nbsp;&nbsp;{Get compression type.}<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr := SPBGetDeviceInfo(myRefNum, siCompressionType, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr(@compressionType));<BR>END;<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=669"> </A><A NAME="marker=5421"> </A>All of the selectors that return a handle allocate the memory for that handle in the current heap zone; you are responsible for disposing of that handle when you are done with it, and you should verify that there is enough memory for such a handle before calling the selector.<A NAME="marker=148"> </A><A NAME="marker=522"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.9.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.6.htm">Section top</A> | <A target="doc" HREF="imsoundinput.b.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
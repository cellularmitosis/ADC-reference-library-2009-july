<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>SoundSprocketTest - /TS3TestHiLevel.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGames-date.html">Games</a> &gt; <A HREF="javascript:location.replace('index.html');">SoundSprocketTest</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Games/index.html" target="_blank">Reference Library > Games</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">SoundSprocketTest</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/TS3TestHiLevel.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/TS3Events.c</option>
<option value="listing2.html">/TS3Events.h</option>
<option value="listing3.html">/TS3Main.c</option>
<option value="listing4.html">/TS3Main.h</option>
<option value="listing5.html">/TS3Menu.c</option>
<option value="listing6.html">/TS3Menu.h</option>
<option value="listing7.html">/TS3Message.c</option>
<option value="listing8.html">/TS3Message.h</option>
<option value="listing9.html">/TS3Resource.h</option>
<option value="listing10.html">/TS3Sound.c</option>
<option value="listing11.html">/TS3Sound.h</option>
<option value="listing12.html">/TS3TestAPI.c</option>
<option value="listing13.html">/TS3TestAPI.h</option>
<option value="listing14.html">/TS3TestHiLevel.c</option>
<option value="listing15.html">/TS3TestHiLevel.h</option>
<option value="listing16.html">/TS3TestLoLevel.c</option>
<option value="listing17.html">/TS3TestLoLevel.h</option>
<option value="listing18.html">/TS3Utils.c</option>
<option value="listing19.html">/TS3Utils.h</option>
<option value="listing20.html">/TS3Window.c</option>
<option value="listing21.html">/TS3Window.h</option></select>
				</p>
				</form>
				<p><strong><a href="SoundSprocketTest.zip">Download Sample</a></strong> (&#147;SoundSprocketTest.zip&#148;, 96.8K)<BR>
<strong><a href="SoundSprocketTest.dmg">Download Sample</a></strong> (&#147;SoundSprocketTest.dmg&#148;, 163.5K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/* *  File:    TS3TestHiLevel.c * *  Copyright &copy; 1996 Apple Computer, Inc. */#include &lt;assert.h&gt;#include &lt;math.h&gt;#include &lt;string.h&gt;#include &lt;Dialogs.h&gt;#include &lt;Fonts.h&gt;#include &lt;Menus.h&gt;#include &lt;Timer.h&gt;#include &lt;fp.h&gt;#include &lt;QD3D.h&gt;#include &lt;QD3DMath.h&gt;#include &quot;TS3Menu.h&quot;#include &quot;TS3Message.h&quot;#include &quot;TS3Resource.h&quot;#include &quot;TS3Sound.h&quot;#include &quot;TS3TestHiLevel.h&quot;#include &quot;TS3Utils.h&quot;#include &quot;TS3Window.h&quot;#include &quot;SoundSprocket.h&quot;typedef struct TTestHiLevelData {  float      duration;    TQ3Vector3D    listenerTranslate1;  TQ3Vector3D    listenerTranslate2;  Boolean      listenerTranslateRange;    TQ3Vector3D    listenerRotationAxis1;  TQ3Vector3D    listenerRotationAxis2;  Boolean      listenerRotationAxisRange;    float      listenerRotationAngle1;  float      listenerRotationAngle2;  Boolean      listenerRotationAngleRange;    TQ3Vector3D    listenerScale1;  TQ3Vector3D    listenerScale2;  Boolean      listenerScaleRange;    TQ3Vector3D    listenerPosition1;  TQ3Vector3D    listenerPosition2;  Boolean      listenerPositionRange;    TQ3Vector3D    listenerOrientation1;  TQ3Vector3D    listenerOrientation2;  Boolean      listenerOrientationRange;    TQ3Vector3D    listenerUpVector1;  TQ3Vector3D    listenerUpVector2;  Boolean      listenerUpVectorRange;    TQ3Vector3D    listenerVelocity1;  TQ3Vector3D    listenerVelocity2;  Boolean      listenerVelocityRange;    UInt32      medium;    float      humidity1;  float      humidity2;  Boolean      humidityRange;    float      roomSize1;  float      roomSize2;  Boolean      roomSizeRange;    float      roomReflectivity1;  float      roomReflectivity2;  Boolean      roomReflectivityRange;    float      reverbAttenuation1;  float      reverbAttenuation2;  Boolean      reverbAttenuationRange;    UInt32      cpuLoad1;  UInt32      cpuLoad2;  Boolean      cpuLoadRange;    TQ3Vector3D    sourceTranslate1;  TQ3Vector3D    sourceTranslate2;  Boolean      sourceTranslateRange;    TQ3Vector3D    sourceRotationAxis1;  TQ3Vector3D    sourceRotationAxis2;  Boolean      sourceRotationAxisRange;    float      sourceRotationAngle1;  float      sourceRotationAngle2;  Boolean      sourceRotationAngleRange;    TQ3Vector3D    sourceScale1;  TQ3Vector3D    sourceScale2;  Boolean      sourceScaleRange;    TQ3Vector3D    sourcePosition1;  TQ3Vector3D    sourcePosition2;  Boolean      sourcePositionRange;    TQ3Vector3D    sourceOrientation1;  TQ3Vector3D    sourceOrientation2;  Boolean      sourceOrientationRange;    TQ3Vector3D    sourceUpVector1;  TQ3Vector3D    sourceUpVector2;  Boolean      sourceUpVectorRange;    TQ3Vector3D    sourceVelocity1;  TQ3Vector3D    sourceVelocity2;  Boolean      sourceVelocityRange;    UInt32      sourceMode;    float      referenceDistance1;  float      referenceDistance2;  Boolean      referenceDistanceRange;    float      length1;  float      length2;  Boolean      lengthRange;    float      width1;  float      width2;  Boolean      widthRange;    float      height1;  float      height2;  Boolean      heightRange;    float      coneAngleDeg1;  float      coneAngleDeg2;  Boolean      coneAngleDegRange;    float      coneAttenuation1;  float      coneAttenuation2;  Boolean      coneAttenuationRange;    float      coneAngleCos1;  float      coneAngleCos2;} TTestHiLevelData;static MenuHandle        gTestHiLevelPresetMenu      = NULL;static DialogPtr        gTestHiLevelDialog        = NULL;static UserItemUPP        gTestHiLevelProgressUserItem  = NULL;static UInt32          gTestHiLevelCPULoadLimit;static TTestHiLevelData      gTestHiLevelData;static Boolean          gTestHiLevelUpdate        = true;static SSpListenerReference    gTestHiLevelListener      = NULL;static SSpSourceReference    gTestHiLevelSource        = NULL;static UnsignedWide        gTestHiLevelCycleStart;static float          gTestHiLevelInterpolant      = 0.0;static TQ3Vector3D        gTestHiLevelListenerActual    = {-1.23456, -1.23456, -1.23456};static TQ3Vector3D        gTestHiLevelSourceActual    = {-1.23456, -1.23456, -1.23456};static WindowMethodPtr TestHiLevel_MetaHandler(  WindowMethod    inMethod);static void TestHiLevel_GetSleep(  WindowPtr      inWindow,  UInt32*        outSleep);static void TestHiLevel_ConsumeEvent(  WindowPtr      inWindow,  const EventRecord*  inEvent,  Boolean*      outConsumed);static void TestHiLevel_Update(  WindowPtr      inWindow);static void TestHiLevel_Activate(  WindowPtr      inWindow);static void TestHiLevel_Deactivate(  WindowPtr      inWindow);static pascal void TestHiLevel_ProgressUserItem(  DialogPtr      inDialog,  short        inItem);static void TestHiLevel_Interpolate(  void);static float TestHiLevel_InterpolateFloat(  float        inWhere,  float        inVal0,  float        inVal1,  Boolean        inIsRange);static void TestHiLevel_InterpolateVector3D(  float        inWhere,  const TQ3Vector3D*  inVal0,  const TQ3Vector3D*  inVal1,  Boolean        inIsRange,  TQ3Vector3D*    outResult);static void TestHiLevel_InterpolateNormalVector3D(  float        inWhere,  const TQ3Vector3D*  inVal0,  const TQ3Vector3D*  inVal1,  Boolean        inIsRange,  TQ3Vector3D*    outResult);static void TestHiLevel_DeriveData(  void);static void TestHiLevel_SetDialogFields(  void);static void TestHiLevel_GetDialogFields(  void);/* ============================================================================= *    TestHiLevel_Init (external) * *  Initializes our thing. * ========================================================================== */void TestHiLevel_Init(  void){  OSStatus      err;  TEHandle      textEdit;  FontInfo      fontInfo;  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  Str255        str;  short         fNum;      // Make sure we didn't mess up the dialog items  assert(kHiLevelItem_COUNT == kHiLevelItem_ExpectedCOUNT);    // Grab the maximum CPU load limit value  gTestHiLevelCPULoadLimit = 999;  err = SSpGetCPULoadLimit(&amp;gTestHiLevelCPULoadLimit);  Message_CheckError(err, &quot;TestHiLevel_Init&quot;, &quot;SSpGetCPULoadLimit&quot;);    //* TODO: Read in gTestHiLevelData from preferences    // Set up our listener and source  err = SSpListener_New(&amp;gTestHiLevelListener);  Message_CheckError(err, &quot;TestHiLevel_Init&quot;, &quot;SSpListener_New&quot;);    assert(gTestHiLevelListener != NULL);    err = SSpSource_New(&amp;gTestHiLevelSource);  Message_CheckError(err, &quot;TestHiLevel_Init&quot;, &quot;SSpSource_New&quot;);    assert(gTestHiLevelSource != NULL);    // Grab the menu  gTestHiLevelPresetMenu = GetMenu(kMenuID_HiLevelPreset);    // Grab the dialog  gTestHiLevelDialog = GetNewDialog(kDlogID_HiLevel, NULL, (WindowPtr) -1);  assert(gTestHiLevelDialog != NULL);    SetPort(gTestHiLevelDialog);  GetFNum(&quot;\pGeneva&quot;, &amp;fNum);  TextFont(fNum);  TextSize(10);    // Fix up the line height  GetFontInfo(&amp;fontInfo);    textEdit = ((DialogPeek) gTestHiLevelDialog)-&gt;textH;    (*textEdit)-&gt;lineHeight = fontInfo.ascent+fontInfo.descent+fontInfo.leading;  (*textEdit)-&gt;fontAscent = fontInfo.ascent;    // Set up our method table  Window_New(gTestHiLevelDialog, TestHiLevel_MetaHandler);    // Do the user items  GetDialogItem(gTestHiLevelDialog, kHiLevelItem_UpdateHilite, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetDialogItem(gTestHiLevelDialog, kHiLevelItem_UpdateHilite, itemType, (Handle) Utils_GetOKUserItemProc(), &amp;itemBounds);    gTestHiLevelProgressUserItem = NewUserItemProc(TestHiLevel_ProgressUserItem);  assert(gTestHiLevelProgressUserItem != NULL);    GetDialogItem(gTestHiLevelDialog, kHiLevelItem_Progress, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetDialogItem(gTestHiLevelDialog, kHiLevelItem_Progress, itemType, (Handle) gTestHiLevelProgressUserItem, &amp;itemBounds);    // Show the quality limit  sprintf((char*) str, &quot;x[0..%ld]&quot;, gTestHiLevelCPULoadLimit);  str[0] = strlen((char*) str)-1;    GetDialogItem(gTestHiLevelDialog, kHiLevelItem_CPULoadUnits, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetDialogItemText(itemHandle, str);    // Set the initial field values  TestHiLevel_Preset(1);    // Select the first field  SelectDialogItemText(gTestHiLevelDialog, kHiLevelItem_Duration, 0, 32767);    // Show the dialog  ShowWindow(gTestHiLevelDialog);    // Initialize our cycle timer  Microseconds(&amp;gTestHiLevelCycleStart);}/* ============================================================================= *    TestHiLevel_Exit (external) * *  Cleans up. * ========================================================================== */void TestHiLevel_Exit(  void){  //* TODO: Save gTestHiLevel to preferences    if (gTestHiLevelDialog != NULL)  {    DisposeDialog(gTestHiLevelDialog);    gTestHiLevelDialog = NULL;  }    if (gTestHiLevelProgressUserItem != NULL)  {    DisposeRoutineDescriptor(gTestHiLevelProgressUserItem);    gTestHiLevelProgressUserItem = NULL;  }    if (gTestHiLevelListener != NULL)  {    SSpListener_Dispose(gTestHiLevelListener);    gTestHiLevelListener = NULL;  }    if (gTestHiLevelSource != NULL)  {    SSpSource_Dispose(gTestHiLevelSource);    gTestHiLevelSource = NULL;  }}/* ============================================================================= *    TestHiLevel_MetaHandler (internal) * *  Returns the method function pointer that corresponds to the given ID. * ========================================================================== */WindowMethodPtr TestHiLevel_MetaHandler(  WindowMethod    inMethod){  WindowMethodPtr    result;    result = NULL;    switch (inMethod)  {    case kWindowMethod_GetSleep:      result = (WindowMethodPtr) TestHiLevel_GetSleep;    break;        case kWindowMethod_ConsumeEvent:      result = (WindowMethodPtr) TestHiLevel_ConsumeEvent;    break;        case kWindowMethod_Update:      result = (WindowMethodPtr) TestHiLevel_Update;    break;        case kWindowMethod_Activate:      result = (WindowMethodPtr) TestHiLevel_Activate;    break;        case kWindowMethod_Deactivate:      result = (WindowMethodPtr) TestHiLevel_Deactivate;    break;  }    return result;}/* ============================================================================= *    TestHiLevel_GetSleep (internal) * *  Returns the sleep time to pass to WaitNextEvent when we're in front. * ========================================================================== */void TestHiLevel_GetSleep(  WindowPtr      inWindow,  UInt32*        outSleep){  #pragma unused (inWindow)  assert(outSleep != NULL);    *outSleep = 0;}/* ============================================================================= *    TestHiLevel_ConsumeEvent (internal) * *  Called for each event when this is the front window. * ========================================================================== */void TestHiLevel_ConsumeEvent(  WindowPtr      inWindow,  const EventRecord*  inEvent,  Boolean*      outConsumed){  #pragma unused (inWindow)  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  ControlHandle    updateButton;  Boolean        consumed;  Boolean        passToDialog;  WindowPtr      window;  short        item;  unsigned long    timeout;  UnsignedWide    now;    assert(inEvent != NULL);  assert(outConsumed != NULL);    consumed = false;  passToDialog = true;    // We want to handle some events ourself  switch (inEvent-&gt;what)  {    case keyDown:    case autoKey:      passToDialog = false;            if (inEvent-&gt;modifiers &amp; cmdKey)      {        if (inEvent-&gt;what != autoKey)        {          switch (inEvent-&gt;message &amp; charCodeMask)          {            case '.':              // anything here?            break;          }        }      }      else      {        switch (inEvent-&gt;message &amp; charCodeMask)        {          case 0x08:  // backspace          case 0x09:  // tab          case 0x1C:  // cursor left          case 0x1D:  // cursor right          case 0x1E:  // cursor up          case 0x1F:  // cursor down          case ' ':          case '.':          case '-':          case '0':          case '1':          case '2':          case '3':          case '4':          case '5':          case '6':          case '7':          case '8':          case '9':            // Pass it to the dialog            passToDialog = true;          break;                    case 0x03:  // enter          case 0x0D:  // return            if (inEvent-&gt;what != autoKey)            {              // Update button equivalent              GetDialogItem(gTestHiLevelDialog, kHiLevelItem_Update, &amp;itemType, &amp;itemHandle, &amp;itemBounds);              updateButton = (ControlHandle) itemHandle;                            if ((*updateButton)-&gt;contrlHilite == 0)              {                HiliteControl(updateButton, 1);                                timeout = TickCount()+6;                while (TickCount() &lt; timeout) /* wait */;                                HiliteControl(updateButton, 0);                                TestHiLevel_GetDialogFields();                                consumed = true;              }            }          break;                    default:            SysBeep(10);            consumed = true;        }      }    break;        case activateEvt:      // We need to look at the activate event here because it is      // consumed by IsDialogEvent/DialogSelect below and so never      // gets to the window stuff      window = (WindowPtr) inEvent-&gt;message;            if (inEvent-&gt;modifiers &amp; activeFlag)      {        Window_Activate(window);      }      else      {        Window_Deactivate(window);      }    break;        case nullEvent:      // Find where we are in the cycle (0 is start, 1 is end)      Microseconds(&amp;now);      gTestHiLevelInterpolant = Utils_Interval(&amp;gTestHiLevelCycleStart, &amp;now) / gTestHiLevelData.duration;            switch (Menu_GetInterpolation())      {        case kInterpolationItem_Sinusoidal:          gTestHiLevelInterpolant = 0.5*sinf(gTestHiLevelInterpolant * pi * 2.0) + 0.5;        break;                case kInterpolationItem_Triangular:          gTestHiLevelInterpolant = 2.0*fmodf(gTestHiLevelInterpolant, 1.0);                    if (gTestHiLevelInterpolant &gt; 1.0)          {            gTestHiLevelInterpolant = 2.0-gTestHiLevelInterpolant;          }        break;                case kInterpolationItem_Sawtooth:          gTestHiLevelInterpolant = fmodf(2.0*gTestHiLevelInterpolant, 1.0);        break;      }            TestHiLevel_Interpolate();    break;  }    // Do dialog stuff  if (passToDialog)  {    consumed = IsDialogEvent(inEvent);    if (consumed)    {      if (DialogSelect(inEvent, &amp;window, &amp;item))      {        switch (item)        {          case kHiLevelItem_Update:            TestHiLevel_GetDialogFields();          break;        }      }    }  }    // Return the result  *outConsumed = consumed;}/* ============================================================================= *    TestHiLevel_Update (internal) * *  Updates the contents of the window. * ========================================================================== */void TestHiLevel_Update(  WindowPtr      inWindow){  DrawDialog(inWindow);}/* ============================================================================= *    TestHiLevel_Activate (internal) * *  Handles window activation. * ========================================================================== */void TestHiLevel_Activate(  WindowPtr      inWindow){  #pragma unused (inWindow)  InsertMenu(gTestHiLevelPresetMenu, 0);  DrawMenuBar();}/* ============================================================================= *    TestHiLevel_Deactivate (internal) * *  Handles window deactivation. * ========================================================================== */void TestHiLevel_Deactivate(  WindowPtr      inWindow){  #pragma unused (inWindow)  DeleteMenu(kMenuID_HiLevelPreset);  DrawMenuBar();}/* ============================================================================= *    TestHiLevel_ProgressUserItem (internal) * *  Draws the user item used for progress bar, based on gTestHiLevelInterpolant. * ========================================================================== */pascal void TestHiLevel_ProgressUserItem(  DialogPtr      inDialog,  short        inItem){  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  short        size;  Rect        leftWhite;  Rect        rightWhite;  Rect        indicator;    GetDialogItem(inDialog, inItem, &amp;itemType, &amp;itemHandle, &amp;itemBounds);    FrameRect(&amp;itemBounds);    InsetRect(&amp;itemBounds, 1, 1);  size = itemBounds.bottom-itemBounds.top;    indicator = itemBounds;  indicator.left = itemBounds.left + (long) (gTestHiLevelInterpolant*(itemBounds.right-itemBounds.left-size) + 0.5);  indicator.right = indicator.left+size;    leftWhite = itemBounds;  leftWhite.right = indicator.left;    rightWhite = itemBounds;  rightWhite.left = indicator.right;    FrameRect(&amp;indicator);    InsetRect(&amp;indicator, 1, 1);  FillRect(&amp;indicator, &amp;qd.gray);    EraseRect(&amp;leftWhite);  EraseRect(&amp;rightWhite);}/* ============================================================================= *    TestHiLevel_Interpolate (internal) * *  Changes the sound channel to the correct values for the point between *  zero and one determined by gTestHiLevelInterpolant. * ========================================================================== */void TestHiLevel_Interpolate(  void){  OSStatus      err;  TQ3Vector3D      v0;  TQ3Vector3D      v1;  TQ3Vector3D      v2;  TQ3Point3D      origin = {0.0, 0.0, 0.0};  TQ3Matrix4x4    m0;  TQ3Matrix4x4    m1;  TQ3Matrix4x4    m2;  TQ3Matrix4x4    m;  SSpLocalizationData  snd3DInfo;    if (gTestHiLevelUpdate              ||    gTestHiLevelData.listenerTranslateRange    ||    gTestHiLevelData.listenerRotationAxisRange  ||    gTestHiLevelData.listenerRotationAngleRange  ||    gTestHiLevelData.listenerScaleRange)  {    TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.listenerTranslate1,        &amp;gTestHiLevelData.listenerTranslate2,        gTestHiLevelData.listenerTranslateRange,        &amp;v0);        TestHiLevel_InterpolateNormalVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.listenerRotationAxis1,        &amp;gTestHiLevelData.listenerRotationAxis2,        gTestHiLevelData.listenerRotationAxisRange,        &amp;v1);        TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.listenerScale1,        &amp;gTestHiLevelData.listenerScale2,        gTestHiLevelData.listenerScaleRange,        &amp;v2);        Q3Matrix4x4_SetTranslate(        &amp;m0,        v0.x,        v0.y,        v0.z);        Q3Matrix4x4_SetRotateAboutAxis(        &amp;m1,        &amp;origin,        &amp;v1,        Q3Math_DegreesToRadians(TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.listenerRotationAngle1,            gTestHiLevelData.listenerRotationAngle2,            gTestHiLevelData.listenerRotationAngleRange)));        Q3Matrix4x4_SetScale(        &amp;m2,        v2.x,        v2.y,        v2.z);        Q3Matrix4x4_Multiply(        &amp;m0,        &amp;m1,        &amp;m);        Q3Matrix4x4_Multiply(        &amp;m,        &amp;m2,        &amp;m);        err = SSpListener_SetTransform(gTestHiLevelListener, &amp;m);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_SetTransform&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.listenerPositionRange)  {    TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.listenerPosition1,        &amp;gTestHiLevelData.listenerPosition2,        gTestHiLevelData.listenerPositionRange,        &amp;v0);        err = SSpListener_SetPosition(gTestHiLevelListener, (const TQ3Point3D*) &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_SetPosition&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.listenerOrientationRange)  {    TestHiLevel_InterpolateNormalVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.listenerOrientation1,        &amp;gTestHiLevelData.listenerOrientation2,        gTestHiLevelData.listenerOrientationRange,        &amp;v0);        err = SSpListener_SetOrientation(gTestHiLevelListener, &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_SetOrientation&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.listenerUpVectorRange)  {    TestHiLevel_InterpolateNormalVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.listenerUpVector1,        &amp;gTestHiLevelData.listenerUpVector2,        gTestHiLevelData.listenerUpVectorRange,        &amp;v0);        err = SSpListener_SetUpVector(gTestHiLevelListener, &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_SetUpVector&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.listenerVelocityRange)  {    TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.listenerVelocity1,        &amp;gTestHiLevelData.listenerVelocity2,        gTestHiLevelData.listenerVelocityRange,        &amp;v0);        err = SSpListener_SetVelocity(gTestHiLevelListener, &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_SetVelocity&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.humidityRange)  {    err = SSpListener_SetMedium(        gTestHiLevelListener,        gTestHiLevelData.medium,        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.humidity1,            gTestHiLevelData.humidity2,            gTestHiLevelData.humidityRange));        Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_SetMedium&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.roomSizeRange        ||    gTestHiLevelData.roomReflectivityRange    ||    gTestHiLevelData.reverbAttenuationRange)  {    err = SSpListener_SetReverb(        gTestHiLevelListener,        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.roomSize1,            gTestHiLevelData.roomSize2,            gTestHiLevelData.roomSizeRange),        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.roomReflectivity1,            gTestHiLevelData.roomReflectivity2,            gTestHiLevelData.roomReflectivityRange),        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.reverbAttenuation1,            gTestHiLevelData.reverbAttenuation2,            gTestHiLevelData.reverbAttenuationRange));        Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_SetReverb&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.cpuLoadRange)  {    err = SSpSource_SetCPULoad(        gTestHiLevelSource,        (UInt32) (TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            (float) gTestHiLevelData.cpuLoad1,            (float) gTestHiLevelData.cpuLoad2,            gTestHiLevelData.cpuLoadRange) + 0.5));        Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SetSourceCPULoad&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.sourceTranslateRange    ||    gTestHiLevelData.sourceRotationAxisRange  ||    gTestHiLevelData.sourceRotationAngleRange  ||    gTestHiLevelData.sourceScaleRange)  {    TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.sourceTranslate1,        &amp;gTestHiLevelData.sourceTranslate2,        gTestHiLevelData.sourceTranslateRange,        &amp;v0);        TestHiLevel_InterpolateNormalVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.sourceRotationAxis1,        &amp;gTestHiLevelData.sourceRotationAxis2,        gTestHiLevelData.sourceRotationAxisRange,        &amp;v1);        TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.sourceScale1,        &amp;gTestHiLevelData.sourceScale2,        gTestHiLevelData.sourceScaleRange,        &amp;v2);        Q3Matrix4x4_SetTranslate(        &amp;m0,        v0.x,        v0.y,        v0.z);        Q3Matrix4x4_SetRotateAboutAxis(        &amp;m1,        &amp;origin,        &amp;v1,        Q3Math_DegreesToRadians(TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.sourceRotationAngle1,            gTestHiLevelData.sourceRotationAngle2,            gTestHiLevelData.sourceRotationAngleRange)));        Q3Matrix4x4_SetScale(        &amp;m2,        v2.x,        v2.y,        v2.z);        Q3Matrix4x4_Multiply(        &amp;m0,        &amp;m1,        &amp;m);        Q3Matrix4x4_Multiply(        &amp;m,        &amp;m2,        &amp;m);        err = SSpSource_SetTransform(gTestHiLevelSource, &amp;m);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetTransform&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.sourcePositionRange)  {    TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.sourcePosition1,        &amp;gTestHiLevelData.sourcePosition2,        gTestHiLevelData.sourcePositionRange,        &amp;v0);        err = SSpSource_SetPosition(gTestHiLevelSource, (const TQ3Point3D*) &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetPosition&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.sourceOrientationRange)  {    TestHiLevel_InterpolateNormalVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.sourceOrientation1,        &amp;gTestHiLevelData.sourceOrientation2,        gTestHiLevelData.sourceOrientationRange,        &amp;v0);        err = SSpSource_SetOrientation(gTestHiLevelSource, &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetOrientation&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.sourceUpVectorRange)  {    TestHiLevel_InterpolateNormalVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.sourceUpVector1,        &amp;gTestHiLevelData.sourceUpVector2,        gTestHiLevelData.sourceUpVectorRange,        &amp;v0);        err = SSpSource_SetUpVector(gTestHiLevelSource, &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetUpVector&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.sourceVelocityRange)  {    TestHiLevel_InterpolateVector3D(        gTestHiLevelInterpolant,        &amp;gTestHiLevelData.sourceVelocity1,        &amp;gTestHiLevelData.sourceVelocity2,        gTestHiLevelData.sourceVelocityRange,        &amp;v0);        err = SSpSource_SetVelocity(gTestHiLevelSource, &amp;v0);    Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetVelocity&quot;);  }    if (gTestHiLevelUpdate)  {    err = SSpSource_SetMode(        gTestHiLevelSource,        gTestHiLevelData.sourceMode);        Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetMode&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.referenceDistanceRange)  {    err = SSpSource_SetReferenceDistance(        gTestHiLevelSource,        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.referenceDistance1,            gTestHiLevelData.referenceDistance2,            gTestHiLevelData.referenceDistanceRange));        Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetReferenceDistance&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.lengthRange        ||    gTestHiLevelData.widthRange          ||    gTestHiLevelData.heightRange)  {    err = SSpSource_SetSize(        gTestHiLevelSource,        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.length1,            gTestHiLevelData.length2,            gTestHiLevelData.lengthRange),        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.width1,            gTestHiLevelData.width2,            gTestHiLevelData.widthRange),        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.height1,            gTestHiLevelData.height2,            gTestHiLevelData.heightRange));        Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetSize&quot;);  }    if (gTestHiLevelUpdate              ||    gTestHiLevelData.coneAngleDegRange      ||    gTestHiLevelData.coneAttenuationRange)  {    err = SSpSource_SetAngularAttenuation(        gTestHiLevelSource,        Q3Math_DegreesToRadians(TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.coneAngleDeg1,            gTestHiLevelData.coneAngleDeg2,            gTestHiLevelData.coneAngleDegRange)),        TestHiLevel_InterpolateFloat(            gTestHiLevelInterpolant,            gTestHiLevelData.coneAttenuation1,            gTestHiLevelData.coneAttenuation2,            gTestHiLevelData.coneAttenuationRange));        Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_SetAngularAttenuation&quot;);  }    // Make the filter changes  err = SSpSource_CalcLocalization(gTestHiLevelSource, gTestHiLevelListener, &amp;snd3DInfo);  Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_CalcLocalization&quot;);    Sound_Set3DInfo(&amp;snd3DInfo);    // Update the progress bar  SetPort(gTestHiLevelDialog);  TestHiLevel_ProgressUserItem(gTestHiLevelDialog, kHiLevelItem_Progress);    // Show the actual velocities  err = SSpListener_GetActualVelocity(gTestHiLevelListener, &amp;v0);  Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpListener_GetActualVelocity&quot;);    if (gTestHiLevelListenerActual.x != v0.x ||    gTestHiLevelListenerActual.y != v0.y ||    gTestHiLevelListenerActual.z != v0.z)  {    gTestHiLevelListenerActual = v0;        Utils_SetVector3DField(        gTestHiLevelDialog,        kHiLevelItem_ListenerActualVelocity,        &amp;gTestHiLevelListenerActual,        true);  }    err = SSpSource_GetActualVelocity(gTestHiLevelSource, &amp;v0);  Message_CheckError(err, &quot;TestHiLevel_Interpolate&quot;, &quot;SSpSource_GetActualVelocity&quot;);    if (gTestHiLevelSourceActual.x != v0.x ||    gTestHiLevelSourceActual.y != v0.y ||    gTestHiLevelSourceActual.z != v0.z)  {    gTestHiLevelSourceActual = v0;        Utils_SetVector3DField(        gTestHiLevelDialog,        kHiLevelItem_SourceActualVelocity,        &amp;gTestHiLevelSourceActual,        true);  }    // Done  gTestHiLevelUpdate = false;}/* ============================================================================= *    TestHiLevel_InterpolateFloat (internal) * *  Linear interpolation.  When inWhere is zero, inVal0 is returned.  When it *  is one, inVal1 is returned.  In between is linear.  If inIsRange is false *  then we ignore inVal1 and always return inVal0. * ========================================================================== */float TestHiLevel_InterpolateFloat(  float        inWhere,  float        inVal0,  float        inVal1,  Boolean        inIsRange){  float        result;    if (inIsRange)  {    result = inWhere*(inVal1-inVal0) + inVal0;  }  else  {    result = inVal0;  }    return result;}/* ============================================================================= *    TestHiLevel_InterpolateVector3D (internal) * *  Linear interpolation on vectors. * ========================================================================== */static void TestHiLevel_InterpolateVector3D(  float        inWhere,  const TQ3Vector3D*  inVal0,  const TQ3Vector3D*  inVal1,  Boolean        inIsRange,  TQ3Vector3D*    outResult){  if (inIsRange)  {    outResult-&gt;x = TestHiLevel_InterpolateFloat(inWhere, inVal0-&gt;x, inVal1-&gt;x, true);    outResult-&gt;y = TestHiLevel_InterpolateFloat(inWhere, inVal0-&gt;y, inVal1-&gt;y, true);    outResult-&gt;z = TestHiLevel_InterpolateFloat(inWhere, inVal0-&gt;z, inVal1-&gt;z, true);  }  else  {    *outResult = *inVal0;  }}/* ============================================================================= *    TestHiLevel_InterpolateNormalVector3D (internal) * *  Interpolation on unit-length vectors. * *  NOTE:  We could do a better job of this, e. g. spherical interpolation, *      but why bother? * ========================================================================== */static void TestHiLevel_InterpolateNormalVector3D(  float        inWhere,  const TQ3Vector3D*  inVal0,  const TQ3Vector3D*  inVal1,  Boolean        inIsRange,  TQ3Vector3D*    outResult){  float        scale;    TestHiLevel_InterpolateVector3D(inWhere, inVal0, inVal1, inIsRange, outResult);    scale = outResult-&gt;x*outResult-&gt;x +      outResult-&gt;y*outResult-&gt;y +      outResult-&gt;z*outResult-&gt;z;    if (scale &gt; 0.001)  {    scale = 1.0/sqrtf(scale);        outResult-&gt;x *= scale;    outResult-&gt;y *= scale;    outResult-&gt;z *= scale;  }}/* ============================================================================= *    TestHiLevel_DeriveData (internal) * *  Compute the derived fields in gTestHiLevelData. * ========================================================================== */void TestHiLevel_DeriveData(  void){  gTestHiLevelData.coneAngleCos1 = cosf(0.5*(pi/180.0)*gTestHiLevelData.coneAngleDeg1);  gTestHiLevelData.coneAngleCos2 = cosf(0.5*(pi/180.0)*gTestHiLevelData.coneAngleDeg2);    //* FOR THE NON-RANGE VALUES, SET THEM IN THE SOURCE AND LISTENER}/* ============================================================================= *    TestHiLevel_SetDialogFields (internal) * *  Changes the dialog's fields to reflect gTestHiLevelData. * ========================================================================== */void TestHiLevel_SetDialogFields(  void){  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  short        value;    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Duration,      gTestHiLevelData.duration,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerTranslate1,      &amp;gTestHiLevelData.listenerTranslate1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerTranslate2,      &amp;gTestHiLevelData.listenerTranslate2,      gTestHiLevelData.listenerTranslateRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAxis1,      &amp;gTestHiLevelData.listenerRotationAxis1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAxis2,      &amp;gTestHiLevelData.listenerRotationAxis2,      gTestHiLevelData.listenerRotationAxisRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAngle1,      gTestHiLevelData.listenerRotationAngle1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAngle2,      gTestHiLevelData.listenerRotationAngle2,      gTestHiLevelData.listenerRotationAngleRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerScale1,      &amp;gTestHiLevelData.listenerScale1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerScale2,      &amp;gTestHiLevelData.listenerScale2,      gTestHiLevelData.listenerScaleRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerPosition1,      &amp;gTestHiLevelData.listenerPosition1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerPosition2,      &amp;gTestHiLevelData.listenerPosition2,      gTestHiLevelData.listenerPositionRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerOrientation1,      &amp;gTestHiLevelData.listenerOrientation1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerOrientation2,      &amp;gTestHiLevelData.listenerOrientation2,      gTestHiLevelData.listenerOrientationRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerUpVector1,      &amp;gTestHiLevelData.listenerUpVector1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerUpVector2,      &amp;gTestHiLevelData.listenerUpVector2,      gTestHiLevelData.listenerUpVectorRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerVelocity1,      &amp;gTestHiLevelData.listenerVelocity1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerVelocity2,      &amp;gTestHiLevelData.listenerVelocity2,      gTestHiLevelData.listenerVelocityRange);    GetDialogItem(gTestHiLevelDialog, kHiLevelItem_Medium, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetControlValue((ControlHandle) itemHandle,      (gTestHiLevelData.medium == kSSpMedium_Water)          ? kMediumItem_Water          : kMediumItem_Air);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Humidity1,      gTestHiLevelData.humidity1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Humidity2,      gTestHiLevelData.humidity2,      gTestHiLevelData.humidityRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomSize1,      gTestHiLevelData.roomSize1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomSize2,      gTestHiLevelData.roomSize2,      gTestHiLevelData.roomSizeRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomReflectivity1,      gTestHiLevelData.roomReflectivity1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomReflectivity2,      gTestHiLevelData.roomReflectivity2,      gTestHiLevelData.roomReflectivityRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReverbAttenuation1,      gTestHiLevelData.reverbAttenuation1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReverbAttenuation2,      gTestHiLevelData.reverbAttenuation2,      gTestHiLevelData.reverbAttenuationRange);    Utils_SetUInt32Field(      gTestHiLevelDialog,      kHiLevelItem_CPULoad1,      gTestHiLevelData.cpuLoad1,      true);    Utils_SetUInt32Field(      gTestHiLevelDialog,      kHiLevelItem_CPULoad2,      gTestHiLevelData.cpuLoad2,      gTestHiLevelData.cpuLoadRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceTranslate1,      &amp;gTestHiLevelData.sourceTranslate1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceTranslate2,      &amp;gTestHiLevelData.sourceTranslate2,      gTestHiLevelData.sourceTranslateRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAxis1,      &amp;gTestHiLevelData.sourceRotationAxis1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAxis2,      &amp;gTestHiLevelData.sourceRotationAxis2,      gTestHiLevelData.sourceRotationAxisRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAngle1,      gTestHiLevelData.sourceRotationAngle1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAngle2,      gTestHiLevelData.sourceRotationAngle2,      gTestHiLevelData.sourceRotationAngleRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceScale1,      &amp;gTestHiLevelData.sourceScale1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceScale2,      &amp;gTestHiLevelData.sourceScale2,      gTestHiLevelData.sourceScaleRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourcePosition1,      &amp;gTestHiLevelData.sourcePosition1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourcePosition2,      &amp;gTestHiLevelData.sourcePosition2,      gTestHiLevelData.sourcePositionRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceOrientation1,      &amp;gTestHiLevelData.sourceOrientation1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceOrientation2,      &amp;gTestHiLevelData.sourceOrientation2,      gTestHiLevelData.sourceOrientationRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceUpVector1,      &amp;gTestHiLevelData.sourceUpVector1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceUpVector2,      &amp;gTestHiLevelData.sourceUpVector2,      gTestHiLevelData.sourceUpVectorRange);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceVelocity1,      &amp;gTestHiLevelData.sourceVelocity1,      true);    Utils_SetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceVelocity2,      &amp;gTestHiLevelData.sourceVelocity2,      gTestHiLevelData.sourceVelocityRange);    value = kSourceModeItem_Unfiltered;  switch (gTestHiLevelData.sourceMode)  {    case kSSpSourceMode_Localized:      value = kSourceModeItem_Localized;    break;        case kSSpSourceMode_Ambient:      value = kSourceModeItem_Ambient;    break;        case kSSpSourceMode_Binaural:      value = kSourceModeItem_Binaural;    break;  }    GetDialogItem(gTestHiLevelDialog, kHiLevelItem_SourceMode, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  SetControlValue((ControlHandle) itemHandle, value);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReferenceDistance1,      gTestHiLevelData.referenceDistance1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReferenceDistance2,      gTestHiLevelData.referenceDistance2,      gTestHiLevelData.referenceDistanceRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Length1,      gTestHiLevelData.length1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Length2,      gTestHiLevelData.length2,      gTestHiLevelData.lengthRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Width1,      gTestHiLevelData.width1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Width2,      gTestHiLevelData.width2,      gTestHiLevelData.widthRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Height1,      gTestHiLevelData.height1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Height2,      gTestHiLevelData.height2,      gTestHiLevelData.heightRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAngleDeg1,      gTestHiLevelData.coneAngleDeg1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAngleDeg2,      gTestHiLevelData.coneAngleDeg2,      gTestHiLevelData.coneAngleDegRange);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAttenuation1,      gTestHiLevelData.coneAttenuation1,      true);    Utils_SetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAttenuation2,      gTestHiLevelData.coneAttenuation2,      gTestHiLevelData.coneAttenuationRange);}/* ============================================================================= *    TestHiLevel_GetDialogFields (internal) * *  Grabs the contents of the dialog fields and puts them into gTestHiLevelData. * ========================================================================== */void TestHiLevel_GetDialogFields(  void){  const float      small = 0.000001;  const float      big = 10000000.0;  short        itemType;  Handle        itemHandle;  Rect        itemBounds;  TTestHiLevelData  data;  short        badItem;    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Duration,      &amp;data.duration,      NULL,      small,      big))  {    badItem = kHiLevelItem_Duration;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerTranslate1,      &amp;data.listenerTranslate1,      NULL))  {    badItem = kHiLevelItem_ListenerTranslate1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerTranslate2,      &amp;data.listenerTranslate2,      &amp;data.listenerTranslateRange))  {    badItem = kHiLevelItem_ListenerTranslate2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAxis1,      &amp;data.listenerRotationAxis1,      NULL))  {    badItem = kHiLevelItem_ListenerRotationAxis1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAxis2,      &amp;data.listenerRotationAxis2,      &amp;data.listenerRotationAxisRange))  {    badItem = kHiLevelItem_ListenerRotationAxis2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAngle1,      &amp;data.listenerRotationAngle1,      NULL,      -big,      big))  {    badItem = kHiLevelItem_ListenerRotationAngle1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ListenerRotationAngle2,      &amp;data.listenerRotationAngle2,      &amp;data.listenerRotationAngleRange,      -big,      big))  {    badItem = kHiLevelItem_ListenerRotationAngle2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerScale1,      &amp;data.listenerScale1,      NULL))  {    badItem = kHiLevelItem_ListenerScale1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerScale2,      &amp;data.listenerScale2,      &amp;data.listenerScaleRange))  {    badItem = kHiLevelItem_ListenerScale2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerPosition1,      &amp;data.listenerPosition1,      NULL))  {    badItem = kHiLevelItem_ListenerPosition1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerPosition2,      &amp;data.listenerPosition2,      &amp;data.listenerPositionRange))  {    badItem = kHiLevelItem_ListenerPosition2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerOrientation1,      &amp;data.listenerOrientation1,      NULL))  {    badItem = kHiLevelItem_ListenerOrientation1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerOrientation2,      &amp;data.listenerOrientation2,      &amp;data.listenerOrientationRange))  {    badItem = kHiLevelItem_ListenerOrientation2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerUpVector1,      &amp;data.listenerUpVector1,      NULL))  {    badItem = kHiLevelItem_ListenerUpVector1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerUpVector2,      &amp;data.listenerUpVector2,      &amp;data.listenerUpVectorRange))  {    badItem = kHiLevelItem_ListenerUpVector2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerVelocity1,      &amp;data.listenerVelocity1,      NULL))  {    badItem = kHiLevelItem_ListenerVelocity1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_ListenerVelocity2,      &amp;data.listenerVelocity2,      &amp;data.listenerVelocityRange))  {    badItem = kHiLevelItem_ListenerVelocity2;    goto bail;  }    GetDialogItem(gTestHiLevelDialog, kHiLevelItem_Medium, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  switch (GetControlValue((ControlHandle) itemHandle))  {    case kMediumItem_Air:      data.medium = kSSpMedium_Air;    break;        case kMediumItem_Water:      data.medium = kSSpMedium_Water;    break;        default:      assert(0);  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Humidity1,      &amp;data.humidity1,      NULL,      0.0,      100.0))  {    badItem = kHiLevelItem_Humidity1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Humidity2,      &amp;data.humidity2,      &amp;data.humidityRange,      0.0,      100.0))  {    badItem = kHiLevelItem_Humidity2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomSize1,      &amp;data.roomSize1,      NULL,      0.0,      big))  {    badItem = kHiLevelItem_RoomSize1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomSize2,      &amp;data.roomSize2,      &amp;data.roomSizeRange,      0.0,      big))  {    badItem = kHiLevelItem_RoomSize2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomReflectivity1,      &amp;data.roomReflectivity1,      NULL,      -big,      -small))  {    badItem = kHiLevelItem_RoomReflectivity1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_RoomReflectivity2,      &amp;data.roomReflectivity2,      &amp;data.roomReflectivityRange,      -big,      -small))  {    badItem = kHiLevelItem_RoomReflectivity2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReverbAttenuation1,      &amp;data.reverbAttenuation1,      NULL,      -big,      big))  {    badItem = kHiLevelItem_ReverbAttenuation1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReverbAttenuation2,      &amp;data.reverbAttenuation2,      &amp;data.reverbAttenuationRange,      -big,      big))  {    badItem = kHiLevelItem_ReverbAttenuation2;    goto bail;  }    if (!Utils_GetUInt32Field(      gTestHiLevelDialog,      kHiLevelItem_CPULoad1,      &amp;data.cpuLoad1,      NULL,      0,      gTestHiLevelCPULoadLimit))  {    badItem = kHiLevelItem_CPULoad1;    goto bail;  }    if (!Utils_GetUInt32Field(      gTestHiLevelDialog,      kHiLevelItem_CPULoad2,      &amp;data.cpuLoad2,      &amp;data.cpuLoadRange,      0,      gTestHiLevelCPULoadLimit))  {    badItem = kHiLevelItem_CPULoad2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceTranslate1,      &amp;data.sourceTranslate1,      NULL))  {    badItem = kHiLevelItem_SourceTranslate1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceTranslate2,      &amp;data.sourceTranslate2,      &amp;data.sourceTranslateRange))  {    badItem = kHiLevelItem_SourceTranslate2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAxis1,      &amp;data.sourceRotationAxis1,      NULL))  {    badItem = kHiLevelItem_SourceRotationAxis1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAxis2,      &amp;data.sourceRotationAxis2,      &amp;data.sourceRotationAxisRange))  {    badItem = kHiLevelItem_SourceRotationAxis2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAngle1,      &amp;data.sourceRotationAngle1,      NULL,      -big,      big))  {    badItem = kHiLevelItem_SourceRotationAngle1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_SourceRotationAngle2,      &amp;data.sourceRotationAngle2,      &amp;data.sourceRotationAngleRange,      -big,      big))  {    badItem = kHiLevelItem_SourceRotationAngle2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceScale1,      &amp;data.sourceScale1,      NULL))  {    badItem = kHiLevelItem_SourceScale1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceScale2,      &amp;data.sourceScale2,      &amp;data.sourceScaleRange))  {    badItem = kHiLevelItem_SourceScale2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourcePosition1,      &amp;data.sourcePosition1,      NULL))  {    badItem = kHiLevelItem_SourcePosition1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourcePosition2,      &amp;data.sourcePosition2,      &amp;data.sourcePositionRange))  {    badItem = kHiLevelItem_SourcePosition2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceOrientation1,      &amp;data.sourceOrientation1,      NULL))  {    badItem = kHiLevelItem_SourceOrientation1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceOrientation2,      &amp;data.sourceOrientation2,      &amp;data.sourceOrientationRange))  {    badItem = kHiLevelItem_SourceOrientation2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceUpVector1,      &amp;data.sourceUpVector1,      NULL))  {    badItem = kHiLevelItem_SourceUpVector1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceUpVector2,      &amp;data.sourceUpVector2,      &amp;data.sourceUpVectorRange))  {    badItem = kHiLevelItem_SourceUpVector2;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceVelocity1,      &amp;data.sourceVelocity1,      NULL))  {    badItem = kHiLevelItem_SourceVelocity1;    goto bail;  }    if (!Utils_GetVector3DField(      gTestHiLevelDialog,      kHiLevelItem_SourceVelocity2,      &amp;data.sourceVelocity2,      &amp;data.sourceVelocityRange))  {    badItem = kHiLevelItem_SourceVelocity2;    goto bail;  }    GetDialogItem(gTestHiLevelDialog, kHiLevelItem_SourceMode, &amp;itemType, &amp;itemHandle, &amp;itemBounds);  switch (GetControlValue((ControlHandle) itemHandle))  {    case kSourceModeItem_Unfiltered:      data.sourceMode = kSSpSourceMode_Unfiltered;    break;        case kSourceModeItem_Localized:      data.sourceMode = kSSpSourceMode_Localized;    break;        case kSourceModeItem_Ambient:      data.sourceMode = kSSpSourceMode_Ambient;    break;        case kSourceModeItem_Binaural:      data.sourceMode = kSSpSourceMode_Binaural;    break;        default:      assert(0);  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReferenceDistance1,      &amp;data.referenceDistance1,      NULL,      small,      big))  {    badItem = kHiLevelItem_ReferenceDistance1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ReferenceDistance2,      &amp;data.referenceDistance2,      &amp;data.referenceDistanceRange,      small,      big))  {    badItem = kHiLevelItem_ReferenceDistance2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Length1,      &amp;data.length1,      NULL,      -big,      0.0))  {    badItem = kHiLevelItem_Length1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Length2,      &amp;data.length2,      &amp;data.lengthRange,      0.0,      big))  {    badItem = kHiLevelItem_Length2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Width1,      &amp;data.width1,      NULL,      0.0,      big))  {    badItem = kHiLevelItem_Width1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Width2,      &amp;data.width2,      &amp;data.widthRange,      0.0,      big))  {    badItem = kHiLevelItem_Width2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Height1,      &amp;data.height1,      NULL,      0.0,      big))  {    badItem = kHiLevelItem_Height1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_Height2,      &amp;data.height2,      &amp;data.heightRange,      0.0,      big))  {    badItem = kHiLevelItem_Height2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAngleDeg1,      &amp;data.coneAngleDeg1,      NULL,      0.0,      360.0))  {    badItem = kHiLevelItem_ConeAngleDeg1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAngleDeg2,      &amp;data.coneAngleDeg2,      &amp;data.coneAngleDegRange,      0.0,      360.0))  {    badItem = kHiLevelItem_ConeAngleDeg2;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAttenuation1,      &amp;data.coneAttenuation1,      NULL,      -big,      big))  {    badItem = kHiLevelItem_ConeAttenuation1;    goto bail;  }    if (!Utils_GetFloatField(      gTestHiLevelDialog,      kHiLevelItem_ConeAttenuation2,      &amp;data.coneAttenuation2,      &amp;data.coneAttenuationRange,      -big,      big))  {    badItem = kHiLevelItem_ConeAttenuation2;    goto bail;  }    // All fields are good -- finish up  gTestHiLevelData = data;  TestHiLevel_DeriveData();    TestHiLevel_SetDialogFields();    gTestHiLevelUpdate = true;    return;    // Error exitbail:  SelectDialogItemText(gTestHiLevelDialog, badItem, 0, 32767);  StopAlert(kAlrtID_BadField, NULL);}/* ============================================================================= *    TestHiLevel_Preset (external) * *  Updates the fields to the chosen preset value. * ========================================================================== */void TestHiLevel_Preset(  UInt32      index){  TTestHiLevelData preset[] = {    { /* nothing for index zero */ 0 },    { /* Left-Right Ahead */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  0.0, 0.0, false,        /* roomReflectivity      */  -10.0, 0.0, false,        /* reverbAttenuation    */  -15.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {1.0, 0.0, -10.0}, {1.0, 0.0, 10.0}, true,        /* sourceOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  0.0, 0.0, false,        /* width          */  0.0, 0.0, false,        /* height          */  0.0, 0.0, false,        /* coneAngleDeg        */  0.0, 0.0, false,        /* coneAttenuation      */  0.0, 0.0, false    },    { /* Front-Back Above */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  0.0, 0.0, false,        /* roomReflectivity      */  -10.0, 0.0, false,        /* reverbAttenuation    */  -15.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {10.0, 1.0, 0.0}, {-10.0, 1.0, 0.0}, true,        /* sourceOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  0.0, 0.0, false,        /* width          */  0.0, 0.0, false,        /* height          */  0.0, 0.0, false,        /* coneAngleDeg        */  0.0, 0.0, false,        /* coneAttenuation      */  0.0, 0.0, false    },    { /* Up-Down Ahead */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  0.0, 0.0, false,        /* roomReflectivity      */  -10.0, 0.0, false,        /* reverbAttenuation    */  -15.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {1.0, -10.0, 0.0}, {1.0, 10.0, 0.0}, true,        /* sourceOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  0.0, 0.0, false,        /* width          */  0.0, 0.0, false,        /* height          */  0.0, 0.0, false,        /* coneAngleDeg        */  0.0, 0.0, false,        /* coneAttenuation      */  0.0, 0.0, false    },    { /* dividing line */ 0 },    { /* Reverb \xD1 Living Room */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  10.0, 0.0, false,        /* roomReflectivity      */  -20.0, 0.0, false,        /* reverbAttenuation    */  0.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {2.0, 0.0, 0.0}, {10.0, 0.0, 0.0}, true,        /* sourceOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  0.0, 0.0, false,        /* width          */  0.0, 0.0, false,        /* height          */  0.0, 0.0, false,        /* coneAngleDeg        */  0.0, 0.0, false,        /* coneAttenuation      */  0.0, 0.0, false    },    { /* Reverb \xD1 Cave */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  100.0, 0.0, false,        /* roomReflectivity      */  -40.0, 0.0, false,        /* reverbAttenuation    */  20.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {2.0, 0.0, 0.0}, {10.0, 0.0, 0.0}, true,        /* sourceOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  0.0, 0.0, false,        /* width          */  0.0, 0.0, false,        /* height          */  0.0, 0.0, false,        /* coneAngleDeg        */  0.0, 0.0, false,        /* coneAttenuation      */  0.0, 0.0, false    },    { /* Reverb \xD1 Stadium */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  250.0, 0.0, false,        /* roomReflectivity      */  -15.0, 0.0, false,        /* reverbAttenuation    */  -5.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {2.0, 0.0, 0.0}, {10.0, 0.0, 0.0}, true,        /* sourceOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  0.0, 0.0, false,        /* width          */  0.0, 0.0, false,        /* height          */  0.0, 0.0, false,        /* coneAngleDeg        */  0.0, 0.0, false,        /* coneAttenuation      */  0.0, 0.0, false    },    { /* dividing line */ 0 },    { /* Searchlight */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  0.0, 0.0, false,        /* roomReflectivity      */  -10.0, 0.0, false,        /* reverbAttenuation    */  -15.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceOrientation    */  {-0.1, 0.0, -1.0}, {-0.1, 0.0, 1.0}, true,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  0.0, 0.0, false,        /* width          */  0.0, 0.0, false,        /* height          */  0.0, 0.0, false,        /* coneAngleDeg        */  180.0, 0.0, false,        /* coneAttenuation      */  -20.0, 0.0, false    },    { /* dividing line */ 0 },    { /* Box Left-Right Ahead */        /* duration          */  4.0,        /* listenerTranslate    */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerRotationAngle  */  0.0, 0.0, false,        /* listenerScale      */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* listenerPosition      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* listenerVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpMedium_Air,        /* humidity          */  0.0, 0.0, false,        /* roomSize          */  0.0, 0.0, false,        /* roomReflectivity      */  -10.0, 0.0, false,        /* reverbAttenuation    */  -15.0, 0.0, false,        /* cpuLoad          */  0, 0, false,        /* sourceTranslate      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAxis    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceRotationAngle    */  0.0, 0.0, false,        /* sourceScale        */  {1.0, 1.0, 1.0}, {0.0, 0.0, 0.0}, false,        /* sourcePosition      */  {2.0, 0.0, -10.0}, {2.0, 0.0, 10.0}, true,        /* sourceOrientation    */  {1.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceUpVector      */  {0.0, 1.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* sourceVelocity      */  {0.0, 0.0, 0.0}, {0.0, 0.0, 0.0}, false,        /* medium          */  kSSpSourceMode_Localized,        /* referenceDistance    */  1.0, 0.0, false,        /* length          */  1.0, 0.0, false,        /* width          */  1.0, 0.0, false,        /* height          */  1.0, 0.0, false,        /* coneAngleDeg        */  0.0, 0.0, false,        /* coneAttenuation      */  0.0, 0.0, false    },  };    gTestHiLevelData = preset[index];    TestHiLevel_DeriveData();  TestHiLevel_SetDialogFields();    gTestHiLevelUpdate = true;}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/SoundSprocketTest/listing14.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/SoundSprocketTest/listing14.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/SoundSprocketTest/listing14.html%3Fid%3DDTS10000060-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Evaluating Expressions Without Widest Need(IM:PN)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING22></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCNumerics-21.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-23.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCNumerics-2.html"><B>PowerPC Numerics </B></A> / <A HREF="PPCNumerics-9.html"><B>Part 1 - The PowerPC Numerics Environment</B></A><BR><DD><A HREF="PPCNumerics-20.html"><B>Chapter 3 - Expression Evaluation</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING22-0></A>
<H1>Evaluating Expressions Without Widest Need</H1>
 <I><A NAME=MARKER-2-5></A></I>Without widest-need evaluation, a complex expression is considered as a series of <B>simple expressions</B> (expressions with only one floating-point operation), and the evaluation format of each simple expression is determined separately. The evaluation format of a simple expression is either its <B>semantic type</B> (the widest format used for its operands) or the minimum evaluation format, whichever is wider. For example, consider the operation<A NAME=MARKER-9-72></A><P>
<PRE>
s * d
</PRE>
 where <I>s</I> is a single-format variable and <I>d</I> is a double-format variable. The operation's semantic type is double because double is the widest format used for an operand. If the minimum format is defined to be single, the operation is evaluated in double precision because double is wider than single. If the minimum format is double-double, double-double precision is used because double-double is wider than double. Evaluating this operation in double-double precision means that the values of both variables will be converted to double-double format before the multiplication is performed and that double-double format will be used for temporary storage of the result.<P>
 <A NAME=MARKER-2-16></A>This expression evaluation method applies only to floating-point operations subject to the <B>usual arithmetic conversions</B> (automatic conversions performed in the C programming language). The following operations are subject to the usual arithmetic conversions:<P>
<UL>
<LI>arithmetic operations
<LI>comparison operations<A NAME=MARKER-2-16></A><P>
</UL>
 The following operations are <I>not</I> subject to the usual arithmetic conversions:<P>
<UL>
<LI>assignment
<LI>assignment of actual function arguments to formal function parameters
<LI>explicit conversions to different data types (for example, casts in C)<I></I><P>
</UL>
 For example, consider the C expression <P>
<PRE>
dd + (d = s * s)
</PRE>
 where <I>dd</I> denotes a double-double format variable or number, <I>d</I> is double format, <I>s</I> is single format, and the minimum evaluation format is double. Without widest-need evaluation, this expression is treated as three simple expressions:<P>
<UL>
<LI><I>s</I> <CODE>*</CODE> <I>s</I> 
<LI><I>d</I> assigned the result of <I>s</I> <CODE>*</CODE> <I>s</I> 
<LI><I>dd</I> <CODE>+</CODE> the result of <I>d</I> <CODE>=</CODE> <I>s</I> <CODE>*</CODE> <I>s</I> <P>
</UL>
 The semantic type of the first simple expression (<I>s</I> <CODE>*</CODE> <I>s</I>) is single, which is narrower than the minimum evaluation format, so it will be evaluated in double. The values of both of its operands are converted to double format and are then multiplied to produce a double result. The next simple expression is an assignment operation, which is not subject to the usual arithmetic conversions so the expression evaluation method does not apply. It produces a double format result also. Then, the last simple expression is considered. Its semantic type is double-double, so that will be the evaluation format. The result of the assignment is converted to double-double format, then added to the double-double variable. <A HREF=#MARKER-9-10>Figure 3-1</A> illustrates this process.<P>
<B>Figure 3-1  <A NAME=MARKER-9-10></A>Evaluating complex expressions without widest need<I><A NAME=MARKER-2-33></A></I></B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/PPCN-L-33.jpg"><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="PPCNumerics-21.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCNumerics-23.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="PPCNumerics-3.html">&copy; Apple Computer, Inc.</A><br>13 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

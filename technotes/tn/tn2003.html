<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN2003: Moving Your Code to Mac OS X</title>	<meta name="keywords" content="have creator list relevant keywords here">	<meta name="Description" content="Technical Note TN2003: have creator write a brief descriptionhere."><meta name="categories" content="System Releases, Runtime Architecture, Platforms and Tools, Overview and Operating System"><meta name="week-posted" content="Oct 2, 2000 - Oct 6, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10003042" title="Moving Your Code to Mac OS X"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/Carbon/index.html">Carbon</a> &gt; <a href="../../technicalnotes/Carbon/idxRuntimeArchitecture-date.html">Runtime Architecture</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN2003</div>
<div id="pageheadsub">Moving Your Code to Mac OS X</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">         <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">  <td background="images/tnmenubody.gif" width=300 align=left>      <span id="menutitle">          CONTENTS           <BR>          <br>      </span>  </td>                </tr>                <tr bgcolor="#e6e6e6">  <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext"><a href="#overview">								Overview</a>						</p>						<p id="menutext2">							<a href="#overview_carb">								Carbon							</a>							<br>							<a href="#overview_bin">								CFM &amp; Mach-O							</a>							<br>							<a href="#overview_pack">								Mac&nbsp;OS&nbsp;9 Packages &amp; Mac&nbsp;OS&nbsp;X Bundles							</a>							<br>							<a href="#overview_task">								Preemption &amp; Multitasking							</a>							<br>							<a href="#overview_file">								File Organization							</a>							<br>							<a href="#overview_share">								Sharing code							</a>							<br>							<a href="#apps_boa">								Background-only Applications							</a>							<br>							<a href="#apps_shmem">								Shared Memory							</a>							<br>							<a href="#apps_ipc">								Process to Process Communications							</a>							<br>						</p>						<p id="menutext">							<a href="#ue_title">								User Experience							</a>						</p>						<p id="menutext2">							<a href="#ue_aqua">								Aqua User Interface							</a>							<br>							<a href="#ue_help">								Apple Help							</a>							<br>						</p>						<p id="menutext">							<a href="#CustomCode">								Custom Code Resources							</a>						</p>						<p id="menutext2">							<a href="#custom_controls">								Custom Controls (CDEFs)							</a>							<br>							<a href="#custom_lists">								Custom List Definitions (LDEFs)							</a>							<br>							<a href="#custom_menus">								Custom Menus (MDEFs)							</a>							<br>							<a href="#custom_windows">								Custom Windows (WDEFs)							</a>							<br>						</p>						<p id="menutext">							<a href="#cpext">								System Extensions &amp; Control Panels							</a>						</p>						<p id="menutext2">							<a href="#cpext_adb">								ADB Patching							</a>							<br>							<a href="#gadgets_cmm">								Contextual Menu Modules							</a>							<br>							<a href="#cpext_drivers">								Drivers use I/O Kit							</a>							<br>							<a href="#cpext_filter">								jGNEFilter							</a>							<br>							<a href="#cpext_patch">								Patching Traps							</a>							<br>						</p>						<p id="menutext">							<a href="#gadgets">								Special Issues							</a>						</p>						<p id="menutext2">							<a href="#apps_code_base">								Backwards-Compilable Coding for Applications							</a>							<br>							<a href="#custom_code_base">								Backwards Compilable Coding for xDEFs							</a>							<br>							<a href="#gadgets_dbw">								Double-Buffered Windows							</a>							<br>							<a href="#gadgets_folders">								Special Folders and File Permissions							</a>							<br>						</p>						<p id="menutext">							<a href="#code_changes">								Common Coding Changes							</a>						</p>						<p id="menutext2">							<a href="#code_structs">								Opaque Structures							</a>							<br>							<a href="#code_resources">								Code Resources							</a>							<br>							<a href="#quickdraw_globals">								QuickDraw Globals							</a>							<br>							<a href="#the_scrap_manager">								The Scrap Manager							</a>							<br>						</p>						<p id="menutext">							<a href="#qlut">								Quick Lookup Table							</a>							<br><A HREF="#Downloads">Downloadables</A></P> <!-- end_toc -->                  </td>                </tr>                 <tr>  <td width=300 align=left scope="row">      <img src="images/tnmenubottom.gif" alt="" width=300 height=16>  </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left>     <!-- begin_intro_text --><p id="introtext">This Technical Note describes how to move existing applications to Mac&nbsp;OS&nbsp;X and where equivalent functionality found in existing applications and other software can be implemented in Mac&nbsp;OS&nbsp;X.</p><p id="introtext">Included in this discussion is a section describing techniques developers can employ in their source base to allow them to compile their applications for both pre-Carbon and Carbon execution environments. This is a useful strategy for developers who must both keep their products up to date with current technology and continue to support customers with legacy equipment. </p><p id="introtext">A quick lookup table is provided at the end of this document that allows for quick access to information related to various technologies. </p><p id="introtext">				This Technical Note is directed at application developers who have existing software designed for use with System&nbsp;7, Mac&nbsp;OS&nbsp;8, or Mac&nbsp;OS&nbsp;9 that must also work with Mac&nbsp;OS&nbsp;X. 			</p>			<!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Oct 5 2000]</h3><!-- end_date -->                </TD>             </TR>          </TABLE><!-- end_header_box --> <BR><BR><hr width=500 align=center><BR><BR><!-- begin_content --><A NAME="overview"></A><h2>Overview</h2>	    <p>This section provides a general overview of important high-           level concepts that must be considered when moving your applications           to Mac&nbsp;OS&nbsp;X.<BR>          <A NAME="overview_carb"></A> </P>	<h3>Carbon</h3>		<p>It will be possible for existing applications to run in Mac&nbsp;OS&nbsp;X	inside of the Classic environment.  But, these applications will	not be able to take full advantage of the features provided by Mac&nbsp;OS&nbsp;X	until they have been re-compiled as Carbon applications.</P>		<p>Carbon is Apple's new API set for Mac OS applications and it is a	subset of selected APIs that were previously offered in	Mac OS 9 together with a rich new set of APIs.</P>		<p>For more information about the Carbon APIs, please refer to the	online Carbon documentation at the address:<BR>	<a href="http://developer.apple.com/carbon/">http://developer.apple.com/carbon/</a>.	</P>	<P><a href="#top">Back to top</a></p><BR>	 	 	 	<A NAME="overview_bin"></A>	<h3>CFM &amp; Mach-O</h3>		<p>Mac&nbsp;OS&nbsp;X supports two runtime models, CFM and Mach-O.  Because neither	Mac&nbsp;OS&nbsp;8 nor Mac&nbsp;OS&nbsp;9 	supports the Mach-O runtime model, a single binary application capable 	of running on both Mac&nbsp;OS&nbsp;X and Mac&nbsp;OS&nbsp;8/9 must be compiled as a CFM application. 	Conversely, applications needing direct access to mach kernel, or BSD services, will 	either have to build as Mach-O binaries or adopt a <CODE>CFBundle</CODE> strategy to call the 	underlying Mach-O compiled routines.</P>		<p>For more information about the Mac&nbsp;OS&nbsp;X runtime model, please refer to the	<a href="../../documentation/macosx/Essentials/devessentials.html">Mac&nbsp;OS&nbsp;X System Overview</a>	book.</P>		<p> <a href="#top">Back to top</a> </p><br>	 	<A NAME="overview_pack"></A>	<h3>Mac&nbsp;OS&nbsp;9 Packages &amp; Mac&nbsp;OS&nbsp;X Bundles</h3>		<p>In Mac&nbsp;OS&nbsp;X, both the Mac&nbsp;OS&nbsp;9 package format and	the new Mac&nbsp;OS&nbsp;X bundle format are used to provide the	folder-as-object user interface in the Desktop application.  Using this	packaging method, a folder containing a number of file system objects	behaves as if it were a single file in the Desktop application's windows.	Documentation for the new Mac&nbsp;OS&nbsp;X bundle format can be found in the	Mac&nbsp;OS&nbsp;X system overview.  This document can be obtained at the	address:<Br>	<a href="../../documentation/macosx/macosx.html">http://developer.apple.com/documentation/macosx/macosx.html</A></P>		<p>The Mac&nbsp;OS&nbsp;9 package format is described in Technical Note 1188,	"Packages in Mac&nbsp;OS&nbsp;9" located at the address 	<a href="tn1188.html">http://developer.apple.com/technotes/tn/tn1188.html</a>,	and the Mac&nbsp;OS&nbsp;X bundle format is described in the Mac&nbsp;OS&nbsp;X	System Overview book.</P>		<p>As both the Mac&nbsp;OS&nbsp;9 package model and the Mac&nbsp;OS&nbsp;X bundle format	use folders, it is possible to format a folder that is both a Mac&nbsp;OS&nbsp;9	package and a Mac&nbsp;OS&nbsp;X bundle.  Such a folder should adhere to the	Mac&nbsp;OS&nbsp;X bundle specification, but Mac&nbsp;OS&nbsp;9 files should be located	in a sub directory with the ":Contents:MacOSClassic:" sub-folder.</P>		<p> <a href="#top">Back to top</a> </p><br>			 	<A NAME="overview_task"></A>	<h3>Preemption &amp; Multitasking</h3>		<p>The older "polling for events" model imposed by <CODE>WaitNextEvent</CODE> is	no longer necessary under Mac&nbsp;OS&nbsp;X.  Carbon and Cocoa applications	running in Mac&nbsp;OS&nbsp;X can use the new Carbon Event model that will	allow or more efficient use of processor time.  With Carbon Events,	the event model has changed: instead of your application polling	for events to discover changing conditions it must respond to, your	application is called upon as events you wish to respond to arise.</P>		<p>As well, Carbon provides a suite of Multiprocessing APIs you can	use for creating your own symmetrically scheduled preemptive tasks	(At the time of this writing, not all of the Carbon APIs can be	called from preemptive tasks.  See the Multiprocessing API documentation	for more information).</P>		<p>Documentation for Carbon Events can be found in the Carbon SDK,	and documentation for Apple's Multiprocessing APIs can be found	in the Multiprocessing SDK.</P>		<p> <a href="#top">Back to top</a> </p><br>			 	<A NAME="overview_file"></A>	<h3>File Organization</h3>		<p>Mac&nbsp;OS&nbsp;X and Carbon are designed to operate on single-forked files 	with filename extensions, as well as traditional Mac OS dual-forked files 	containing a type and creator.</P>		<p> <a href="#top">Back to top</a> </p><br>	 	<A NAME="overview_share"></A>	<h3>Sharing Code</h3>		<p>The Code Fragment Manager is fully implemented in Mac&nbsp;OS&nbsp;X's Carbon	APIs.  As well, Mac&nbsp;OS&nbsp;X implements a new method for sharing code called	<I>frameworks</I>.  Frameworks are libraries packaged in Mac&nbsp;OS&nbsp;X bundles. Frameworks	are essentially shared libraries packaged along with the headers that are related	to the software in that shared code.</P>		<p>Frameworks are described in the Mac&nbsp;OS&nbsp;X System Overview book.</P>		<p> <a href="#top">Back to top</a> </p><br>	 		 	<A NAME="apps_boa"></A>	<h3>Background-only Applications</h3>		<p>Background-only applications are fully supported.  Furthermore, in many cases,	it may be desirable to implement background-only applications as Mach-O	executables for better access to system resources (so they function as	daemon processes).</P>		<p> <a href="#top">Back to top</a> </p><br>	 	 	 	<A NAME="apps_shmem"></A>	<h3>Shared Memory</h3>		<p>Using shared memory areas for communications between applications	will is possible for applications running in the Mac&nbsp;OS&nbsp;X	environment; however, as Mac&nbsp;OS&nbsp;X uses separate protected memory	partitions for each application, additional work is required to implement	sharing memory between applications.  </P>		<p><B>NOTE:</B> Carbon applications also have access to the Core Foundation	notification facilities for sending small-event type notifications	between processes.  Additionally, Carbon applications compiled as Mac&nbsp;OS&nbsp;X	Mach-O binaries have access to the BSD APIs for sharing memory.</P>		<p> <a href="#top">Back to top</a> </p><br>		 	<A NAME="apps_ipc"></A>	<h3>Process to Process Communications</h3>		<p>The PPC ToolBox is not available to Carbon applications.  Here, 	equivalent functionality is provided by the Apple Event Manager.	Any code that uses the PPC ToolBox should be changed so it uses the	Apple Event Manager instead.</P>		<p><B>NOTE:</B>  Carbon applications also have access to the Core Foundation	notification facilities for sending small event type notifications	between processes.  And, Carbon applications compiled as Mac&nbsp;OS&nbsp;X	Mach-O binaries have access to the Mach-O style messaging.</P>	<p> <a href="#top">Back to top</a> </p><br>		<hr width=500 align=center>        <A NAME="ue_title"></A>         <h2>User Experience</h2>         	<p>The Macintosh has always been known as being easier, friendlier, and more	consistent to use and Mac OS X takes this standard to a whole new level with	a refined and enhanced user interface - Aqua. Users, and reviewers, will	expect your application to take full advantage of Aqua and one of the best	ways to accomplish this is for you to adhere to the new Aqua Human Interface	Guidelines.</P>		    <A NAME="ue_aqua"></A>         <h3>Aqua User Interface</h3>			<p>If your application has been compiled as a Carbon application and it uses	standard system controls and Appearance Manager routines for drawing its	user interface, then your application will be able to display the Aqua user	interface when running on Mac&nbsp;OS&nbsp;X.</P>		<p>As you move your application to Mac OS X, take the time to refresh your	product's interface. Doing so will allow you to deliver an awesome user	experience which will help differentiate your product and make you stand out	from the crowd.</P>	<p>For more information about adopting Aqua in your applications, please refer	to the Adopting Aqua documentation that can be found at the address: 	<a href="../../documentation/macosx/">http://developer.apple.com/documentation/macosx/</a>.</P>	<p> <a href="#top">Back to top</a> </p><br>			 	<A NAME="ue_help"></A>	<h3>Apple Help</h3>	<p>Delivering your help content to users in a consistent and compelling manner	is a key part of a well designed user experience within your product. The	best way to achieve this is by using Apple Help, the HTML-based Help system	for Mac&nbsp;OS&nbsp;X applications.</P>		<p>AppleGuide and Balloon Help are no longer supported and Apple Help is the	only help solution for Mac&nbsp;OS&nbsp;X. Apple Help is based on HTML 3.2, allowing	you to author you content using popular 3rd party web authoring products,	and also builds on many of Apple's core technologies like QuickTime,	AppleScript, URL Access, Internet Config, VTwin, HTML Rendering Library and	Carbon.</P>	<p>For more information about using Apple Help, refer to	the <a href="../../documentation/Carbon/HumanInterfaceToolbox/AppleHelp/applehelp.html">Apple Help Documentation Page</a>,	the <a href="../../qa/indexes/hs-a.html">Apple Help Technical Q&amp;As</a>,	and the 	<a href="http://developer.apple.com/macos/help.html">Apple Help Technology Page</a>.</P>	<p> <a href="#top">Back to top</a> </p><br>	<hr width=500 align=center>        <A NAME="CustomCode"></A>         <h2>Custom Code Resources</h2>         	<p>Custom code resources are no longer used by Carbon applications.	In their place, your application must use new APIs for creating custom	controls, custom windows, custom menus, and custom lists.  These new	APIs are discussed below.</P>		    <A NAME="custom_controls"></A>         <h3>Custom Controls (CDEFs)</h3>		<p>Custom control definition procedures are no longer compiled into	separate stand-alone code resources.  Under Carbon, the control definition	procedure should be compiled into your application and you should	use the <CODE>CreateCustomControl</CODE> routine to create controls	that use the custom definition procedure.</P>		<p>Normally, since the control definition routine you pass to	<CODE>CreateCustomControl</CODE> uses the same calling conventions	as the older as the CDEF routine, moving your code to Carbon will	simply involve re-compiling the code resource into your application	and switching to using the <CODE>CreateCustomControl</CODE> routine	when creating controls that use the custom drawing method.</P>		<p>Developers interested in maintaining a cross-compilable Carbon/pre-Carbon	source base can use the method outlined below in the	<a href="#custom_code_base">Backwards Compilable Coding for xDEFs</a>	section.</P>	<p> <a href="#top">Back to top</a> </p><br>	 	<A NAME="custom_lists"></A>	<h3>Custom List Definitions (LDEFs)</h3>		<p>Custom list definitions now use the <CODE>CreateCustomList</CODE> API.	In many cases, though, it may be desirable to use the new Data Browser	control in places where the list manager was used in the past.  The	Data Browser control is available to Carbon applications in both	Mac&nbsp;OS&nbsp;9 and Mac&nbsp;OS&nbsp;X.</P>		<p> <a href="#top">Back to top</a> </p><br>	 	<A NAME="custom_menus"></A>	<h3>Custom Menus (MDEFs)</h3>		<p>Custom menus now use the <CODE>CreateCustomMenu</CODE> API.</P>		<p> <a href="#top">Back to top</a> </p><br>	 	<A NAME="custom_windows"></A>	<h3>Custom Windows (WDEFs)</h3>		<p>Custom windows now use the <CODE>CreateCustomWindow</CODE> API.  It is no longer	necessary to store window definition procedures in separate	code resources.  Listings  1 and 2	illustrate how to implement a window definition routine and how	to create a window that uses it.</P>		<CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=525> <TR> <td bgcolor="#e6e6e6" align=left><pre>    static pascal long SimpleFrameDef(short varCode, WindowRef window,                                      short message, long param)    {    #pragma unused( varCode )        switch ( message )        {            case kWindowMsgGetFeatures:                *(OptionBits*) param = kWindowCanGetWindowRegion                                       | kWindowDefSupportsColorGrafPort;                return 1;            case kWindowMsgGetRegion:            {                GetWindowRegionRec* rgnRec  = (GetWindowRegionRec*) param;                if ( rgnRec-&gt;regionCode == kWindowContentRgn                     || rgnRec-&gt;regionCode == kWindowStructureRgn )                {                    Rect portBounds;                    GetWindowBounds( window, kWindowGlobalPortRgn,                                     &amp;portBounds );                    RectRgn( rgnRec-&gt;winRgn, &amp;portBounds );                    if ( rgnRec-&gt;regionCode == kWindowStructureRgn )                        InsetRgn( rgnRec-&gt;winRgn, -1, -1 );                }                return noErr;            }            case kWindowMsgDraw:            {                Rect portBounds;                GetWindowBounds( window, kWindowGlobalPortRgn, &amp;portBounds );                InsetRect( &amp;portBounds, -1, -1 );                FrameRect( &amp;portBounds );                break;            }            case kWindowMsgHitTest:                return wInContent;            default:                break;        }        return 0;    }</pre>	</TD> </TR>	<TR> <td align="left"><span id="bodytext">	<B>Listing 1</B>.  Code listing for a window definition routine.</span>	</TD> </TR>	</TABLE></CENTER><p>Using the window definition routine shown in Listing 1, you cancreate a new window that uses the definition by calling the<CODE>CreateCustomWindow</CODE> routine.  An example illustratinghow this can be done is shown in Listing 2.</P>	<CENTER><TABLE BORDER=0 CELLPADDING=4 width=500 > <TR> <td bgcolor="#e6e6e6" align=left><pre>    WindowDefSpec   defSpec;    WindowRef       floater;    defSpec.defType = kWindowDefProcPtr;    defSpec.u.defProc = NewWindowDefUPP( SimpleFrameDef );    SetRect( &amp;bounds, 10, 60, 200, 200 );    CreateCustomWindow( &amp;defSpec, kFloatingWindowClass,                        kWindowStandardFloatingAttributes,                        &amp;bounds, &amp;floater );    ShowWindow( floater );</pre>	</TD> </TR>	<TR> <td align="left"><span id="bodytext">	<B>Listing 2</B>.  Code listing illustrating how to create a window	that uses the window definition procedure defined in Listing 1.</span>	</TD> </TR>		</TABLE></CENTER>		<p> <a href="#top">Back to top</a> </p><br>	<hr width=500 align=center>        <A NAME="cpext"></A>         <h2>System Extensions &amp; Control Panels</h2>         	<p>System Extensions &amp; Control Panels should be implemented as	applications in Mac&nbsp;OS&nbsp;X.  In Mac&nbsp;OS&nbsp;9, they should be implemented	as APPE- and APPC-type applications.  The following provides an overview	of some facilities commonly used by System Extensions &amp; Control Panels	and their status in Mac&nbsp;OS&nbsp;X.</P>	    <A NAME="cpext_adb"></A>         <h3>ADB Patching</h3>		<p>The ADB Manager is not supported in Mac&nbsp;OS&nbsp;X.</P>		<p> <a href="#top">Back to top</a> </p><br>	 	 	<A NAME="gadgets_cmm"></A>	<p>Contextual Menu Modules</p>		<p>Contextual Menu Modules (CMM) are supported in Mac&nbsp;OS&nbsp;X; however,	the older SOM object format is not used.  For the system to load	your CMM, it must be saved as a CFM plug-in in the Contextual Menu Items	subfolder. (The exact location of this folder can be determined by calling	<CODE>FindFolder</CODE> with the <CODE>kContextualMenuItemsFolderType</CODE>	selector.)</P>		<p> <a href="#top">Back to top</a> </p><br>		 	<A NAME="cpext_drivers"></A>	<h3>Drivers use I/O Kit</h3>		<p>The older Mac OS device driver APIs documented in <CITE>Inside Macintosh:Devices	and Drivers</CITE> is no longer supported.  Developers interested in creating	drivers for use in Mac&nbsp;OS&nbsp;X must use the new device driver APIs.	Currently these APIs are available as a part of the Mac&nbsp;OS&nbsp;X	developer tools installation (relevant headers can be found in the IOKit and Kernel	frameworks).  <BR><BR>	For information about Mac OS X driver development, consult the I/O Kit documentation either on the Mac OS X installation at /Developer/Documentation/Kernel or the Mac OS X Developer Documentation Web site <a href="../../documentation/macosx/">http://developer.apple.com/documentation/macosx/</a>.<BR><BR>Also, the I/O Kit source code is available for download from Apple's Darwin public source Web site<a href="http://www.publicsource.apple.com">http://www.publicsource.apple.com</a>. The projectscontaining I/O Kit are xnu (containing the kernel) and IOKitUser (containing IOKitLib).		</P>		<p> <a href="#top">Back to top</a> </p><br>	 	<A NAME="cpext_filter"></A>	<h3>jGNEFilter</h3>		<p>The <CODE>jGNEFilter</CODE> is not supported in Mac&nbsp;OS&nbsp;X.</P>		<p> <a href="#top">Back to top</a> </p><br>	 	<A NAME="cpext_patch"></A>	<h3>Patching Traps</h3>		<p>Mac&nbsp;OS&nbsp;X does not contain a trap table.</P>		<p> <a href="#top">Back to top</a> </p><br>	<hr width=500 align=center>        <A NAME="gadgets"></A>         <h2>Special Issues</h2>         	<p>Other special issues to consider when moving your product	to Mac&nbsp;OS&nbsp;X are discussed in this section.</P>			    <A NAME="apps_code_base"></A>         <h3>Backwards-Compilable Coding for Applications</h3>		<p>It is possible to maintain a backwards-compatible code	base that can be compiled for either Carbon or pre-Carbon	environments.  This section is intended for developers who	would like to support customers using pre-Carbon systems	while at the same time keeping their source base up to	date with the latest Carbon headers.</P>		<p>To compile for pre-Carbon execution, use	the following steps:</P>	<UL>		<LI>Make sure you are using Universal&nbsp;Interfaces&nbsp;3.3.2 or later.		The most recent version of the Universal&nbsp;Interfaces can be		found at the address <a href="http://developer.apple.com/sdk/">http://developer.apple.com/sdk/index.html</a>.<BR><BR></LI>				<LI>Set the compile time symbols <CODE>OPAQUE_TOOLBOX_STRUCTS</CODE> and		to <CODE>ACCESSOR_CALLS_ARE_FUNCTIONS</CODE> to equal one (1).<BR><BR></LI>				<LI>Link with CarbonAccessors.o and whatever other libraries you require.<BR><BR></LI>				<LI>Use the compile time variable <CODE>TARGET_API_MAC_CARBON</CODE> to control		compilation of Carbon specific parts of your program.<BR></LI>	</UL>		<CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left>	<P><B>IMPORTANT</B><BR>	While <CODE>CarbonAccessors.o</CODE> will allow you to maintain a source	base for your product that can be compiled as either a <CODE>CarbonLib</CODE> application	or as an <CODE>InterfaceLib</CODE> application, it does not allow <CODE>InterfaceLib</CODE>	applications to use any of the routines that are only available in <CODE>CarbonLib</CODE>.	If you have any problems using <CODE>CarbonAccessors.o</CODE>, please bring them to our	attention using Apple's bug reporting web page at	<a href="http://developer.apple.com/bugreporter/index.html">http://developer.apple.com/bugreporter/index.html</a>.</P>	</TD> </TR>	</TABLE></CENTER>	<BR>		<p>And then to compile your application as a Carbon application, use the following	steps:</P>	<UL>		<LI>Make sure you are using Universal&nbsp;Interfaces&nbsp;3.3.2 or later.<BR><BR></LI>				<LI>Set the compile time symbol <CODE>TARGET_API_MAC_CARBON</CODE>		equal one (1).<BR><BR></LI>				<LI>Link with CarbonLib and whatever other libraries you require.<BR><BR></LI>				<LI>Use the compile time variable <CODE>TARGET_API_MAC_CARBON</CODE> to control		compilation of Carbon specific parts of your program.<BR><BR></LI>				<LI>Include a 'carb'&nbsp;ID=0 resource in the application's resource fork.<BR><BR></LI>	</UL>		<p>In most cases, the minimal requirements for creating a Carbon and pre-Carbon	compilable source base for your application will involve adding the	conditional statements shown in listing 3 to your program's <CODE>main</CODE>	routine.  </P>		<CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>#if ! TARGET_API_MAC_CARBON#ifndef __MWERKS__QDGlobals qd; /* QuickDraw globals */#endif#endifint main(void) {#if ! TARGET_API_MAC_CARBON    SetApplLimit(GetApplLimit());    MaxApplZone();    InitGraf(&amp;qd.thePort);    InitFonts();    InitWindows();    TEInit();    InitMenus();    InitDialogs(0);#endif    InitCursor();    . . .</pre>	</TD> </TR>		<TR> <td align="left"><span id="bodytext">	<B>Listing 3</B>.  Code listing illustrating some of the necessary	pre-processor time for creating a Carbon/pre-Carbon cross-compilable	application.</span>	</TD> </TR>	</TABLE></CENTER>		<BR><BR>		<p>In the majority of cases, once an application has been Carbonized and	the above compile time structures have been included in the application,	it will be possible to compile the application as a pre-Carbon application	for System&nbsp;7 through System&nbsp;8, a CFM Carbon application for	System&nbsp;8.1, Mac&nbsp;OS&nbsp;9.x and Mac&nbsp;OS&nbsp;X, and as a	Mach-O Carbon application for Mac&nbsp;OS&nbsp;X.  Be aware, though,	APIs provided in the Carbon interfaces will only be available if they	are implemented in the environment where the application is running.</P>		<p>The code shown in listing 3 represents the minimum compiler exclusions	for cross compilable Carbon/pre-Carbon code.  Depending on what parts	of the operating system your application uses there may be additional	places where additional compilation exclusions must be placed in your	source files.  The most obvious places are as follows:</P>		<UL>		<LI>The initialization statements, as shown in listing 3.<BR><BR></LI>				<LI>Calls to <CODE>SystemClick</CODE>.<BR><BR></LI>				<LI>Calls related to managing the Apple menu such		as <CODE>OpenDeskAcc</CODE> and <CODE>AddResMenu</CODE> (In Carbon		applications, the Apple menu is managed for you).<BR><BR></LI>				<LI>Places where you use custom code resources such as CDEFs, LDEFs,		WDEFs, et cetera.  A technique for maintaining cross-Carbon compilable		code is presented in the <a href="#custom_code_base">Backwards-Compilable		Coding for xDEFs</a> section in the <a href="#CustomCode">Custom Code		Resources</a> section.<BR>          </LI>	</UL>	         <p> <a href="#top">Back to top</a> </p><br>        <A NAME="custom_code_base"></A>         <h3>Backwards-Compilable Coding for xDEFs</h3>        <p>It is possible to maintain a backwards-compatible code           base that creates and uses custom definition procedures. This section           provides a LDEF sample illustrating how to do this.</P>        <p>For Carbon applications, definition routines are stored           in the application's executable. They are not stored as separate code           resources as they were in previous system versions. In this example,           the definition routine is stored in the application's code for both           the pre-Carbon build and the Carbon build. In the pre-Carbon build,           instead of storing the code for the definition routine in the code resource,           the code resource contains a single jump instruction that jumps to the           routine stored in the application. Listing 4 shows a C declaration that           illustrates the format of the jump instruction saved in the code resource           and Figure 1 illustrates how this resource should appear in a ResEdit           window.</P>        <BR>        <CENTER>          <TABLE BORDER=0 CELLPADDING=4 width=500>            <TR>               <td bgcolor="#e6e6e6" align=left>                 <pre>#if ! TARGET_API_MAC_CARBON#define kPatchResID 128#define kPatchResTYPE 'LDEF'#pragma options align=mac68ktypedef struct {    short jmpabs;       /* 4EF9 */    ListDefUPP theUPP;  /* 00000000 */} **PatchResource;#pragma options align=reset#endif</pre>              </TD>            </TR>            <TR>               <td align="left"><span id="bodytext"> <B>Listing 4</B>. Type definition used                 for accessing the LDEF resource.</span> </TD>            </TR>          </TABLE>        </CENTER>        <BR>        <p>When your application is compiled as a Carbon application,           this resource will be ignored. And, as the space it occupies is negligible,           there is no harm in leaving it in your resource fork.</P>        <BR>        <CENTER>          <img src="images/tn2003_001.gif" align=bottom alt="RsrcLDEF" width=287 height=187> <BR>          <span id="bodytext"> <B>Figure 1</B>. The contents of the LDEF resource           as displayed in a ResEdit window.</span>        </CENTER>        <BR>        <p>Inside of your application, provide the code for the           definition routine itself. In most cases, prototypes for these routines           have not changed in Carbon so no special compile time switches are required           in the definition procedure itself.</P>        <p>Listing 5 illustrates how one would go about using a           custom list definition compiled using this method. In Mac&nbsp;OS&nbsp;9,           the code resource is set up to point to the definition procedure defined           inside of the application and the list is created using the older <CODE>LNew</CODE>           routine. When the application is compiled as a Carbon application, it           does not use the <CODE>LDEF</CODE> resource. Instead, it provides a           reference to the list definition procedure in a call to <CODE>CreateCustomList</CODE>.</P>        <BR>        <CENTER>          <TABLE BORDER=0 CELLPADDING=4 width=500>            <TR>               <td bgcolor="#e6e6e6" align=left>                 <pre>    /* the list definition procedure */static pascal void HListDataLDEF(short lMessage,    Boolean lSelect, Rect* lRect, Cell lCell, short lDataOffset,    short lDataLen, ListHandle lHandle) {    . . .}    . . .    ListHandle theList; /* storage for the list */    . . .#if TARGET_API_MAC_CARBON        /* Carbon applications use the CreateCustomList API */    ListDefSpec theSpec;    theSpec.defType = kListDefUserProcType;    theSpec.u.userProc = NewListDefProc(HListDataLDEF);    CreateCustomList(bounds, &amp;dataBounds, cSize, &amp;theSpec,        theWindow, true, hasGrow, false, true, &amp;theList);#else        /* pre-Carbon applications set the address in the LDEF        to a routine descriptor referring to their list        definition routine. */    PatchResource gLDEFrsrc;    gLDEFrsrc = (PatchResource) GetResource(kPatchResTYPE, kPatchResID);    (**gLDEFrsrc).theUPP = NewListDefProc(HListDataLDEF);    theList = LNew(bounds, &amp;dataBounds, cSize, kPatchResID,        theWindow, true, hasGrow, false, true);#endif</pre>              </TD>            </TR>            <TR>               <td align="left"><span id="bodytext"> <B>Listing 5</B>. Creating a list that                 uses a custom list definition routine.</span> </TD>            </TR>          </TABLE>        </CENTER>        <BR>        <p> <a href="#top">Back to top</a> </p><br>        <A NAME="gadgets_dbw"></A>         <h3>Double-Buffered Windows</h3>        <p>The screen in Mac&nbsp;OS&nbsp;X is double-buffered for           you. For normal drawing and responding to update events, you will not           have to do any special drawing. However, in some circumstances it may           be necessary for you to ask the system explicitly to draw the contents           of your window to the display. Listing 6 illustrates how this can be           done.</P>        <CENTER>          <TABLE BORDER=0 CELLPADDING=4 width=500>            <TR>               <td bgcolor="#e6e6e6" align=left>                 <pre>    CGrafPtr thePort;    WindowPtr theWindow;    thePort = GetWindowPort(theWindow);        /* flush the entire port */    if (QDIsPortBuffered(thePort))        QDFlushPortBuffer(thePort, NULL);        /* flush part of the port */    if (QDIsPortBuffered(thePort)) {        RgnHandle theRgn;        theRgn = NewRgn();            /* local port coordinates */        SetRectRgn(theRgn, 10, 10, 100, 30);        QDFlushPortBuffer(thePort, theRgn);        DisposeRgn(theRgn);    }</pre>              </TD>            </TR>            <TR>               <td align="left"><span id="bodytext"> <B>Listing 6</B>. Flushing a window's grafport's                 contents to the screen.</span> </TD>            </TR>          </TABLE>        </CENTER>                        		<BR>		<CENTER>		<TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left>               <P><B>IMPORTANT</B><BR>               Items that are drawn in a Carbon window will only be auto-flushed to               the screen if the application directly or indirectly calls the event               loop (RunApplicationEventLoop, WaitNextEvent, GetNextEvent,               TrackMouseLocation, et al.).<BR><BR>				If your application is trying to update a window without calling				the event loop (for example, drawing items in a splash window during program				startup), then it is				your application's responsibility to make sure items drawn in				the window are flushed to the screen (by calling QDFlushPortBuffer).</P>  		</TD> </TR> </TABLE>		</CENTER>		<BR>		<BR>                         <BR>        <p> <a href="#top">Back to top</a> </p><br>        <A NAME="gadgets_folders"></A>         <h3>Special Folders and File Permissions</h3>        <p>The <CODE>FindFolder</CODE> routine is fully supported           under Mac&nbsp;OS&nbsp;X and it should be used to locate special folders           designated by the system. As there may be dramatic differences between           the locations of some of these folders in Mac&nbsp;OS&nbsp;X relative           to their location in previous system releases, the volume and directory           information returned by <CODE>FindFolder</CODE> is now the only supported           way to discover a special folder's location.</P>        <p>Developers should be aware that different users may have           different file access permission for files located in these special           directories. For information about how to ensure your application will           be able to operate under these conditions, please refer to the Multiple           Users Info Kit located at the address:<BR>          <A HREF="ftp://ftp.apple.com/developer/Technical_Documentation/MultipleUsers_Info_Kit_R3/">ftp://ftp.apple.com/developer/Technical_Documentation/MultipleUsers_Info_Kit_R3/</A>.</P>        <p> <a href="#top">Back to top</a> </p><br>        <hr width=500 align=center>        <A NAME="code_changes"></A>         <h2>Common Coding Changes</h2>        <p>This section discusses the common changes that must be           made in an application when moving it to Carbon.</P>        <A NAME="code_structs"></A>         <h3>Opaque Structures</h3>        <p>Most toolbox structures are now opaque. This means it           is no longer possible to access them directly and they can only be accessed           by way of accessor routines.</P>        <p> <a href="#top">Back to top</a> </p><br>        <A NAME="code_resources"></A>         <h3>Code Resources</h3>        <p>Custom Code Resources such as CDEFs, WDEFs, and LDEFs           are no longer used. There are new mechanisms in place that allow you           to implement these features. Ways of using these mechanisms are described           in the <a href="#CustomCode">Custom Code Resources</a> section.</P>        <p> <a href="#top">Back to top</a> </p><br>        <A NAME="quickdraw_globals"></A>         <h3>QuickDraw Globals</h3>        <p>QuickDraw global variables are no longer accessed using           structure references. Instead, when you access these globals you must           use accessor routines.</P>        <CENTER>          <TABLE BORDER=0 CELLPADDING=4 width=500>            <TR>               <td bgcolor="#e6e6e6" align=left>                 <pre>    long GetQDGlobalsRandomSeed(void);    BitMap * GetQDGlobalsScreenBits(BitMap *screenBits);    Cursor *GetQDGlobalsArrow(Cursor *arrow);    Pattern *GetQDGlobalsDarkGray(Pattern *dkGray);    Pattern *GetQDGlobalsLightGray(Pattern *ltGray);    Pattern *GetQDGlobalsGray(Pattern *gray);    Pattern *GetQDGlobalsBlack(Pattern *black);    Pattern *GetQDGlobalsWhite(Pattern *white);    CGrafPtr GetQDGlobalsThePort(void);    void SetQDGlobalsRandomSeed(long randomSeed);    void SetQDGlobalsArrow(const Cursor *arrow);</pre>              </TD>            </TR>            <TR>               <td align="left"><span id="bodytext"> <B>Listing 8</B>. New QuickDraw globals                 accessor routines.</span> </TD>            </TR>          </TABLE>        </CENTER>        <p> <a href="#top">Back to top</a> </p><br>        <A NAME="the_scrap_manager"></A>         <h3>The Scrap Manager</h3>        <p>The Scrap Manager APIs have been expanded to provide           enhanced functionality. One of the most interesting features of the           new Scrap Manager is the ability for an application to specify promised           flavors that it does not need to provide until a client application           requests the data for the promised scrap flavor. Obviously, this allows           applications to offer a richer selection of scrap types without incurring           additional processing requirements.</P>        <p> <a href="#top">Back to top</a> </p><br>        <hr width=500 align=center>        <A NAME="qlut"></A>         <h2>Quick Lookup Table</h2>        <p>The table provided in this section map provides information           about where to look for pre-existing Mac OS APIs or the functionality           provided by those APIs in Mac OS X. Items marked as supported are provided           as Carbon APIs unless marked otherwise.</P>	<BR>	<CENTER><TABLE BORDER=1 CELLPADDING=1 width=500>	<tr>	<td width=160 align=left scope="row">		<span id="bodytext">			<b>				Mac&nbsp;OS&nbsp;7/8/9 technology</b></span>	</td>	<td width=300 align=left>		<span id="bodytext">			<b>				Where to find similar functionality in Mac&nbsp;OS&nbsp;X</b></span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Alias Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			The Alias Manager is supported under Carbon. See the Alias Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Alias_Manager.html">				Carbon Specification			</a>			for details. 		</span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Appearance Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Continue using the Appearance Manager in Carbon. When doing so you'll get the new Aqua look for free. See the Appearance Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Appearance_Manager.html">				Carbon Specification			</a>			for details. 		</span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Apple Event Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Fully supported. Can be used to send Apple events between Classic, Cocoa, and Carbon. Can no longer be used for sending events to remote machines. See the Apple Event Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Apple_Event_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Apple Filing Protocol (AFP)</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Developers using the 			<code>				PBControl			</code>			or 			<code>				NAFPCommand			</code>			calls to send AFP packets to an AppleShare Server who wish to access these services in Mac&nbsp;OS&nbsp;X will have to revise their products to use the new AFP APIs provided by the 			<code>				AppleShareClientCore			</code>			framework. This framework is available for both Carbon and Cocoa applications compiled as Mach-O binaries. The AFP Datastream APIs defined in 			<code>				AppleShareClientCore/afpDataStream.h			</code>			provide the same functionality as the older APIs.			<br>			<br></span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Apple Game Sprockets</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Look for equivalent functionality in other managers. See the Apple Game Sprockets 			<a href="../../documentation/Carbon/CarbonSpecification/Game_Sprockets.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Apple Guide</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. Developers should move their help facilities to Help Viewer Help Books. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Apple Help Viewer</span>	</td>	<td width=300 align=left>		<span id="bodytext">The Apple Help Viewer is still supported.</span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Apple Shared Library Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Apple Type Services for Unicode</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the ATSUI 			<a href="../../documentation/Carbon/CarbonSpecification/Apple_Type__ode_Imaging.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			AppleScript</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Fully supported. See the Open Scripting Architecture 			<a href="../../documentation/Carbon/CarbonSpecification/Open_Script_rchitecture.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			AppleShare</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Use the new AFP APIs provided by the 			<code>				AppleShareClientCore			</code>			framework.</span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Code Fragment Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the Code Fragment Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Code_Fragment_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Collection Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			The Collection Manager is supported under Carbon. See the Component Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Collection_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			ColorSync Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Fully supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Communications Toolbox</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Component Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Fully supported. See the Component Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Component_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Contextual Menu Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. SOM CMMs are no longer supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Control Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Control Panels</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. Use applications instead. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Control Strip</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Put them in the dock. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Cursor Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Cursor utilities are fully supported in Mac OS X. In addition, it is no longer necessary for developers to display their own custom animated tasks while an application is waiting for a lengthy operation to complete. Mac OS X will automatically display the animated spinning rainbow disk cursor whenever the frontmost task is blocked. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Date, Time, and Measurement Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Fully supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Dialog Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. Some routines have been removed. See the Dialog Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Dialog_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Disk Initialization Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. Now done using the Desktop (a.k.a., Finder). </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Display Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the Display Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Display_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Drag Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the Drag Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Drag_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Edition Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Event Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. 			<br>			<br>			A new event model has been introduced called "Carbon Events." Some documentation can be found on the CarbonLib SDK. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Exception Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			File Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			The File Manager is supported under Carbon; however, some parts of the File Manager's API have been removed. Specifically, the concept of "Working&nbsp;Directory" is no longer supported under Carbon. Instead of using working directories, applications should always refer to file system entities and should use explicit name, volume, and directory IDs. 			<br>			<br>			It is suggested that developers begin using the new HFS Plus API's for accessing the file system. See the 			<a href="../../documentation/macos8/Files/FileManager/filemanager.html">				File Manager documentation			</a>			for more information about the new HFS Plus API's. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			File System Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			The File System Manager is no longer supported under Carbon or Mac&nbsp;OS&nbsp;X. For this functionality in Mac&nbsp;OS&nbsp;X, you must implement Virtual File System (VFS) plugin Mach-O extension. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Find By Content / Sherlock</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Finder Interface</span>	</td>	<td width=300 align=left>		<span id="bodytext">			In Mac&nbsp;OS&nbsp;X, the application that provides user interaction with the file system is called the Desktop. This application replaces the functionality of the Finder application shipping with previous system releases.			<br>			<br>			Traditional Finder resources and information are recognized by the Desktop application. Moreover, the Desktop recognizes Mac&nbsp;OS&nbsp;9 packages.			<br>			<br>			Mac&nbsp;OS&nbsp;X includes a richer application bundling scheme that is documented in the Mac&nbsp;OS&nbsp;X System Overview book. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Folder Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Locations for special folders maintained by the system may be dramatically different when your application is running in Mac&nbsp;OS&nbsp;X; hence, it is essential that your application rely on both the volume reference number and directory ID returned by 			<code>				FindFolder			</code>			when identifying the locations of these special folders. 			<br>			<br>			It is also important that your application recognize the fact that access permissions for files located in these folders may vary from user to user. For more information and references to further documentation, please refer to the 			<a href="#gadgets_folders">				Special Folders and File Permissions			</a>			section of this technical note. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Font Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			FontSync</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Gestalt Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Help Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Balloon Manager has been replaced with help tags. Carbon applications will use this new Apple Help API, defined in MacHelp.h. See the Apple Help 			<a href="../../documentation/Carbon/CarbonSpecification/Help_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			HTML Rendering Library</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Fully supported under Carbon. See the HTML Rendering Library 			<a href="../../documentation/Carbon/CarbonSpecification/HTML_Rendering_Library.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Icon Services and Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Imaging (ATSUI)</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Installer</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. There is a new installer mechanism for Mac&nbsp;OS&nbsp;X. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Interfaces &amp; Libraries</span>	</td>	<td width=300 align=left>		<span id="bodytext">			3.3.2. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			List Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. New data browser control is now available, making it easier to display lists with a consistent "look."</span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Locales </span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported.</span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Location Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Low Memory Accessors</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Accessor functions are now the only way to access low-memory globals. Attempting to access low-memory globals in some other way may result in an addressing error. 			<br>			<br>			Many of these have been dropped. See the Low-Memory Accessors 			<a href="../../documentation/Carbon/CarbonSpecification/Low_Memory_Accessors.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Mac OS USB</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			MacApp</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Being ported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Macintosh Programmer's Workshop (MPW)</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Can be used in the Classic environment. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			MacsBug</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Can be used in the Classic environment. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Mathematical and Logical Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			MathLib's functionality is exported from CarbonLib. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Memory Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. Some changes in how memory is handled. Most notably application's heap space can grow dynamically and is no longer fixed. (Carbon and Cocoa apps only.) See the Memory Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Memory_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Menu Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Mixed Mode Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			MRJ</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. Should be Java 1.2 or later. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Multilingual Text Editor </span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Multiprocessing Services</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Multiple Users</span>	</td>	<td width=300 align=left>		<span id="bodytext">			APIs associated with Multiple Users are not supported. However, the concept of user levels and login levels are supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Navigation Services</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Network Services Location (NSL) Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Notification Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the Notification Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Notification_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Offscreen Graphics Worlds</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the QuickDraw Manager 			<a href="../../documentation/Carbon/CarbonSpecification/QuickDraw_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Open Transport</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. Some APIs have been removed. See the Open Transport 			<a href="../../documentation/Carbon/CarbonSpecification/Open_Transport.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Open GL</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Package Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Palette Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the Palette Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Palette_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			PCI Driver Development Kit</span>	</td>	<td width=300 align=left>		<span id="bodytext">			See IOKit. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Picture Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			PPC Toolbox</span>	</td>	<td width=300 align=left>		<span id="bodytext">			The PPC Toolbox is not implemented in Carbon. Instead, you should use the Apple Event Manager for sending information between processes. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Printing Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			New API for the printing manager. Current docs are on the Carbon SDK. See the Printing Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Printing_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Process Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Queue Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			QuickDraw</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. Cannot used Quartz from CFM applications, but you can if you recompile them as Mach-O binaries. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			QuickDraw 3D</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			QuickDraw Text</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			QuickTime</span>	</td>	<td width=300 align=left>		<span id="bodytext">			The QuickTime APIs are provided in CarbonLib. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			ResEdit</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Works in Classic. Can crash with certain operations. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Resource Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. See the Resource Manager 			<a href="../../documentation/Carbon/CarbonSpecification/Resource_Manager.html">				Carbon Specification			</a>			for details. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Scrap Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported, but with new APIs. Documented in the Carbon SDK. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Script Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Shutdown Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. Applications requiring this functionality should use the 			<code>				kAEQuitApplication			</code>			event instead. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Sound Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Speech Recognition Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Speech Synthesis Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported.</span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Start Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. There are no extensions, so extension loading order is not important. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Telephone Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Text Encoding Conversion Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Text Services Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Text Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			TextEdit</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Thread Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Time Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Translation Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Trap Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Unicode Utilities</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			URL Access Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Vertical Retrace Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. Use the Time Manager instead. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Virtual Memory Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Not supported. </span>	</td></tr><tr>	<td width=160 align=left scope="row">		<span id="bodytext">			Window Manager</span>	</td>	<td width=300 align=left>		<span id="bodytext">			Supported. </span>	</td></tr>	</TABLE></CENTER>        <p> <a href="#top">Back to top</a> </p><br><A NAME="Downloads"></A><H2>Downloadables</H2>         <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left> <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat"></P></TD> <td align="left"> <P>Acrobat version of this Note (200K)</P> </TD><td width=60 align=left> <P><A HREF="pdf/tn2003.pdf">Download</A></P></TD> </TR> </TABLE><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn2003.html%3Fid%3DDTS10003042-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn2003.html%3Fid%3DDTS10003042-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn2003.html%3Fid%3DDTS10003042-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
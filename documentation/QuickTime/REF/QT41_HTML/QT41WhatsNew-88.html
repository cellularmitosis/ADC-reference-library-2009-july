<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><head><script language="JavaScript" src="../../frametest.js"></script><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><!-- Link line removed --><TITLE> New Sound Manager APIs </TITLE><script language=javascript> window.parent.focus(); </script></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="QT41WhatsNew-87.html">Previous</A> | <A HREF="QT41WhatsNew-1.html">Chapter Contents</A> | <A HREF="QT41WhatsNew.html">Chapter Top</A> | <A HREF="QT41WhatsNew-89.html">Next</A> |</P><!-- QTnavbar end --><H1 CLASS="H1-Heading1"><A NAME="pgfId-31442"></A>New Sound Manager APIs </H1><P CLASS="T1-Text1"><A NAME="pgfId-31444"></A>In addition to two new <TT>SoundManagerGetInfo</TT> and <TT>SoundManagerSetInfo</TT> calls, there is a new Sound Converter API in QuickTime 4.1, which is discussed in the next section. Note that this new API is now the recommended way to use the Sound Converter.</P><DIV><H3><A NAME="pgfId-47503"></A>SoundManagerGetInfo</H3><TT><A NAME="pgfId-55603"></A>pascal OSErr<BR>SoundManagerGetInfo(OSType selector, void* infoPtr);</TT><P CLASS="T1-Text1"><A NAME="pgfId-47423"></A>This routine retrieves global information about the Sound Manaager.</P><P CLASS="T1-Text1"><A NAME="pgfId-47425"></A>Defined selectors:</P><DL COMPACT><DL COMPACT><DT CLASS="DT2-DefinitionTerm2"><A NAME="pgfId-55605"></A><TT>siSupportedExtendedFlags</TT></DT><DD CLASS="DD2-DefinitionDef2"><P><DD CLASS="DD2-DefinitionDef2Cont"><A NAME="pgfId-47493"></A>Retrieves which flags are supported in Extended sound data structures in an unsigned long.</DD><P></DL COMPACT></DL COMPACT></DIV><DIV><H3><A NAME="pgfId-47494"></A>SoundManagerSetInfo</H3><TT><A NAME="pgfId-55620"></A>pascal OSErr<BR>SoundManagerSetInfo(OSType selector, void* infoPtr);</TT><P CLASS="T1-Text1"><A NAME="pgfId-47433"></A>This routine sets global information about the Sound Manager.</P><P CLASS="T1-Text1"><A NAME="pgfId-47435"></A>Defined selectors: none</P></DIV><DIV><H3><A NAME="pgfId-38945"></A>SoundConverterFillBuffer</H3><P CLASS="T1-Text1"><A NAME="pgfId-38327"></A>Provides an alternative method for converting data using the Sound Converter, which is both more predictable and more flexible than the <TT>SoundConverterConvertBuffer</TT> mechanism. The <TT>SoundConverterFillBuffer</TT> function can return any Sound Manager error.</P><CODE CLASS="RD-RoutineDeclare"><A NAME="pgfId-55624"></A>pascal&nbsp;OSErr&nbsp;&nbsp;&nbsp;&nbsp;SoundConverterFillBuffer(&nbsp;SoundConverter&nbsp;sc,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SoundConverterFillBufferDataUPP&nbsp;&nbsp;fillBufferDataUPP,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void*&nbsp;fillBufferDataRefCon,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void*&nbsp;outputBuffer,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long&nbsp;outputBufferByteSize,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long*&nbsp;bytesWritten,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long*&nbsp;framesWritten,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned&nbsp;long*&nbsp;outputFlags<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</TT><DL COMPACT><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55626"></A><TT>sc </TT></DT><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-31448"></A>The Sound Converter context to work with (created with <TT>SoundConverterOpen</TT>).</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55635"></A><TT>fillBufferDataUPP</TT></DT><DD CLASS="DD-DefinitionDef"><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-38363"></A>A UPP that points to a routine that can provide data to the Sound Converter.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55644"></A><TT>fillBufferDataRefCon</TT></DT><DD CLASS="DD-DefinitionDef"><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-38372"></A>This value is passed to the <TT>SoundConverterFillBufferDataUPP</TT>. It can be used for any purpose the client wishes.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55653"></A><TT>outputBuffer</TT></DT><DD CLASS="DD-DefinitionDef"><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-31455"></A>The buffer to write the data into.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55662"></A><TT>outputBufferByteSize</TT></DT><DD CLASS="DD-DefinitionDef"><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-31457"></A>The size of <TT>outputBuffer</TT> in bytes. No more than this amount will ever be written during a single call to <TT>SoundConverterFillBuffer</TT>.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55671"></A><TT>bytesWritten</TT></DT><DD CLASS="DD-DefinitionDef"><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-31459"></A>Upon completion, the number of bytes that were written into <TT>outBuffer</TT>.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55680"></A><TT>framesWritten</TT></DT><DD CLASS="DD-DefinitionDef"><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-31461"></A>Upon completion, the number of sample frames written into <TT>outBuffer</TT>.</DD><P><DT CLASS="DT-DefinitionTerm"><A NAME="pgfId-55689"></A><TT>outputFlags</TT> </DT><DD CLASS="DD-DefinitionDef"><A NAME="pgfId-31462"></A>&nbsp;</DD><P><DD CLASS="DD-DefinitionDefCont"><A NAME="pgfId-31463"></A>Upon completion, a set of bit flags that indicate the state of the conversion. These are the currently defined flags:</DD><P><DL COMPACT><DT CLASS="DT2-DefinitionTerm2"><A NAME="pgfId-55698"></A><TT>kSoundConverterDidntFillBuffer</TT></DT><DD CLASS="DD2-DefinitionDef2"><P><DD CLASS="DD2-DefinitionDef2Cont"><A NAME="pgfId-31465"></A>Set if the converter didn't completely fill the output buffer.</DD><P><DT CLASS="DT2-DefinitionTerm2"><A NAME="pgfId-55707"></A><TT>kSoundConverterHasLeftOverData</TT></DT><P><DD CLASS="DD2-DefinitionDef2"><DD CLASS="DD2-DefinitionDef2Cont"><A NAME="pgfId-31467"></A>Set if the converter still has more data to deliver. This indicates that more calls to <TT>SoundConvertFillBuffer</TT> should be made to complete the conversion.  A caveat: If this flag is not set, it doesn't indicate there is necessarily more data in the pipeline. These are advisor flags only: they don't guarantee any internal data. You need to keep track of your data. </DD><P></DL COMPACT></DL COMPACT></DIV><H4><A HREF="QT41WhatsNew-89.html" CLASS="Hypertext">Working with SoundConverterFillBuffer</A></H4><H4><A HREF="QT41WhatsNew-90.html" CLASS="Hypertext">Writing the SoundConverterFillBufferData Routine</A></H4><hr>&#169; 2000 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="QT41WhatsNew-87.html">Previous</A> | <A HREF="QT41WhatsNew-1.html">Chapter Contents</A> | <A HREF="QT41WhatsNew.html">Chapter Top</A> | <A HREF="QT41WhatsNew-89.html">Next</A> |</P><!-- QTnavbar end --></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>RGetResource (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING54></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-53.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-55.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-9.html"><B>Chapter 1 - Resource Manager</B></A> / <A HREF="MoreToolbox-24.html"><B>Resource Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-30.html"><B>Resource Manager Routines</B></A> / <A HREF="MoreToolbox-49.html"><B>Reading Resources Into Memory</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING54-0></A>
<H3><A NAME=MARKER-9-301></A>RGetResource</H3>
 <A NAME=MARKER-11-302></A><A NAME=MARKER-2-303></A>You can use the <CODE>RGetResource</CODE> function to get resource data for a resource and include ROM-resident system resources in the Resource Manager's search of resource maps.<P>
<PRE>
FUNCTION RGetResource (theType: ResType; theID: Integer): Handle;
</PRE>
<DL>
<DT><CODE>theType</CODE>
<DD> A resource type.
<DT><CODE>theID</CODE>
<DD> An integer that uniquely identifies a resource of the specified type.
</DL>
<A NAME=HEADING54-5></A>
<H5>DESCRIPTION</H5>
 The <CODE>RGetResource</CODE> function searches the resource maps in memory for the resource specified by the parameters <CODE>theType</CODE> and <CODE>theID</CODE>. The resource maps in memory, which represent all open resource forks, are arranged as a linked list. The <CODE>RGetResource</CODE> function first uses <CODE>GetResource</CODE> to search this list. The <CODE>GetResource</CODE> function starts with the current resource file and progresses through the list in order (that is, in reverse chronological order in which the resource forks were opened) until it finds the resource's entry in one of the resource maps. If <CODE>GetResource</CODE> doesn't find the specified resource in its search of the resource maps of open resource forks (which includes the System file's resource fork), <CODE>RGetResource</CODE> sets the global variable <CODE>RomMapInsert</CODE> to <CODE>TRUE</CODE>, then calls <CODE>GetResource</CODE> again. In response, <CODE>GetResource</CODE> performs the same search, but this time it looks in the resource map of the ROM-resident resources before searching the resource map of the System file. <P>
 If <CODE>RGetResource</CODE> finds the specified resource entry in one of the resource maps and the entry contains a valid handle, the function returns that handle. If the entry contains a handle whose value is <CODE>NIL</CODE>, and if you haven't called <CODE>SetResLoad</CODE> with the <CODE>load</CODE> parameter set to <CODE>FALSE</CODE>, <CODE>RGetResource</CODE> attempts to read the resource into memory.<P>
 If it can't find the resource data, <CODE>RGetResource</CODE> returns <CODE>NIL</CODE>, and <CODE>ResError</CODE> returns the result code <CODE>resNotFound</CODE>. The <CODE>RGetResource</CODE> function also returns <CODE>NIL</CODE> if the resource data to be read into memory won't fit, in which case <CODE>ResError</CODE> returns an appropriate Memory Manager result code. If you call <CODE>RGetResource</CODE> with a resource type that can't be found in any of the resource maps of the open resource forks, the function returns <CODE>NIL</CODE>, but <CODE>ResError</CODE> returns the result code <CODE>noErr</CODE>. You should always check that the value of the returned handle is not <CODE>NIL</CODE>.<P>
<A NAME=HEADING54-9></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>RGetResource</CODE> function may move or purge memory blocks in the application heap. Your application should not call this function at interrupt time.<P>
<A NAME=HEADING54-11></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>resNotFound<TD>-192<TD>Resource not found</TABLE>
</H5>
<A NAME=HEADING54-12></A>
<H5>SEE ALSO</H5>
 To check for errors, call the <CODE>ResError</CODE> function as described on <A HREF=MoreToolbox-35.html#MARKER-9-220>page 1-47</A>.<P>
 For more information, see <A HREF=MoreToolbox-106.html#MARKER-9-523>"Inserting the ROM Resource Map" beginning on page 1-128</A>.<P>
 For a description of the <CODE>UseResFile</CODE> procedure, see <A HREF=MoreToolbox-47.html#MARKER-9-273>page 1-65</A>. The <CODE>SetResLoad</CODE> procedure is described next.<A NAME=MARKER-2-304></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-53.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-55.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

<html><head><title>Mac OS X
 Manual Page For tops(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/tops" title="Mac OS X
 Manual Page for tops(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/tops"; name=tops(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
TOPS(1)                                                                                              TOPS(1)



<b>NAME</b>
       tops - perform in-place substitutions on code.

<b>SYNOPSIS</b>
       <b>tops</b>  [<b>-help</b>] [<b>-verbose</b>] [<b>-nocontext</b>] [<b>-nofileinfo</b>] [<b>-semiverbose</b>)] [<b>-dont</b>] (<b>-scriptfile</b> <u>script</u><b>_</b><u>name</u>)
       | (<b>find</b> <b>"</b><u>search</u><b>_</b><u>pattern</u><b>"</b> [<b>where</b> <b>("</b><u>symbol</u><b>"</b>...<b>)</b> <b>isOneOf</b> <b>{("</b><u>match</u><b>"</b>...<b>)</b>...<b>}</b>] ...) | (<b>replace</b> <b>"</b><u>search</u><b>_</b><u>pat</u>-<font color="#ffffff" class="whiteout">tern"&nbsp;"search_pattern"</font>
       <u>tern</u><b>"</b>  <b>with</b>  <b>"</b><u>replacement</u><b>_</b><u>pattern</u><b>"</b>  | <b>same</b> [<b>where</b> <b>("</b><u>symbol</u><b>"</b>...<b>)</b> <b>isOneOf</b> <b>{("</b><u>match</u><b>"</b>...<b>)</b>...<b>}</b>]... [<b>within</b>
       <b>("</b><u>symbol</u><b>")</b> <b>{</b>...<b>}</b>]... [<b>error</b>  <b>"</b><u>message</u><b>"</b>]  [<b>warning</b>  <b>"</b><u>message</u><b>"</b>])  |  (  <b>replacemethod</b>  <b>"</b><u>selector</u><b>"</b>  <b>with</b>
       <b>"</b><u>new</u><b>_</b><u>selector</u><b>"{</b>  [<b>replace</b>  <b>"</b><u>symbol</u><b>"</b>  <b>with</b>  <b>"</b><u>symbol</u><b>_</b><u>replacement</u><b>"</b>]...   <b>}</b>  [<b>where</b> <b>("</b><u>symbol</u><b>"</b>...<b>)</b> <b>isOneOf</b>
       <b>{("</b><u>match</u><b>"</b> ...<b>)</b>...<b>}</b>]... [<b>within</b> <b>("</b><u>symbol</u><b>")</b> <b>{</b>...<b>}</b>]... [<b>error</b> <b>"</b><u>message</u><b>"</b>] [<b>warning</b> <b>"</b><u>message</u><b>"</b>] )  [<b>-class</b>-<font color="#ffffff" class="whiteout">file&nbsp;[-classfile</font>
       <b>file</b> <u>classfile</u>] [<u>filename</u> ...]

<b>DESCRIPTION</b>
       <b>tops</b> is a tool that performs in-place substitutions on source files according to a set of rules. Each
       tops rule describes a particular translation. For example, one tops rule might  specify  that  occur-<font color="#ffffff" class="whiteout">rences&nbsp;occurrences</font>
       rences  of  the token 'Application' should be converted to 'NSApplication'. In tops syntax, this rule
       will appear as:

       replace "Application" with "NSApplication"

<b>OPTIONS</b>
       <b>-help</b>  Displays the tops syntax line.

       <b>-verbose</b>
              Prints out the source code lines that are being changed by the command.

       <b>-nocontext</b>
              Instead of printing the whole source code line that is being changed or  searched  for,  shows
              only the portion of the line that has the change.

       <b>-nofileinfo</b>
              Does not print the file name and line number information in verbose messages.

       <b>-semiverbose</b>
              Shows how much of the file has been processed.

       <b>-dont</b>  Shows what changes would be made to the source code without actually performing the changes.

       <b>-scriptfile</b> <u>script</u><b>_</b><u>name</u>
              Specifies  the  script file containing the rules that tops will apply to your code. The script
              file can contain three types of rules: <b>find</b>, <b>replace</b>, and <b>replacemethod</b>. It also  can  contain
              C-style comments, /* ... */.

       <b>find</b> <b>"</b><u>search</u><b>_</b><u>pattern</u><b>"</b>
              Locates  all  occurrences  of  <u>search</u><b>_</b><u>pattern</u>  in the file. <u>search</u><b>_</b><u>pattern</u> can contain literal
              strings and tokens in angle brackets, as described below.

       <b>where</b> <b>("</b><u>symbol</u><b>"</b>...<b>)</b> <b>isOneOf</b> <b>{("</b><u>match</u><b>"</b>...<b>)</b>...<b>}</b>
              When <u>search</u><b>_</b><u>pattern</u> contains tokens in angle brackets, further refines what the  token  speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
              fied by <u>symbol</u> should match.

       <b>replace</b> <b>"</b><u>search</u><b>_</b><u>pattern</u><b>"</b> <b>with</b> <b>"</b><u>replacement</u><b>_</b><u>pattern</u><b>"</b> | <b>same</b>
              Replaces all occurrences of <u>search</u><b>_</b><u>pattern</u> in the file with <u>replacement</u><b>_</b><u>pattern</u>. <b>same</b> replaces
              <u>search</u><b>_</b><u>pattern</u> with itself. You usually use <b>same</b> when you want to print out an error or  warn-<font color="#ffffff" class="whiteout">ing&nbsp;warning</font>
              ing message instead of replacing the code.

       <b>within</b> <b>("</b><u>symbol</u><b>")</b> <b>{</b>...<b>}</b>
              Specifies  further  conversions  within  one  of the tokens specified in <u>search</u><b>_</b><u>pattern</u>. <b>find</b>,
              <b>replace</b>, and <b>replacemethod</b> rules can appear within the angle brackets.

       <b>error</b> <b>"</b><u>message</u><b>"</b>
              Generates an <b>#error</b> message located at <u>search</u><b>_</b><u>pattern</u>.

       <b>warning</b> <b>"</b><u>message</u><b>"</b>
              Generates a <b>#warning</b> message located at <u>search</u><b>_</b><u>pattern</u>.

       <b>replacemethod</b> <b>"</b><u>selector</u><b>"</b> <b>with</b> <b>"</b><u>new</u><b>_</b><u>selector</u><b>"</b>
              Replaces all invocations, declarations, implementations, and <b>@selector</b> expressions  using  the
              method <u>selector</u> with <u>new</u><b>_</b><u>selector</u>.

       <b>-classfile</b> <u>classfile</u>
              Specifies a file that describes the class hierarchy used by the files being processed.

       <u>filename</u> ...
              Specifies the source <!-- a -->file(s)<!-- /a --> you want to convert. You can specify more than one filename, sep-<font color="#ffffff" class="whiteout">arated&nbsp;separated</font>
              arated by spaces. The files are converted in place; no backups are  created.  If  no  file  is
              specified, the tops commands are performed on standard input.

       The  simplest  search  pattern is a literal string, such as "Application". Within the search pattern,
       you can define tokens that specify a particular syntax element rather  than  a  literal  string.  The
       tokens have the form:

       <b>&lt;</b><u>type</u> <u>label</u><b>&gt;</b>

       where:

       <u>type</u>   Specifies the type of syntax element the token can match with.

       <u>label</u>  Is a unique label that you assign to the token.

       <u>type</u> can be one of the following:

       <b>a</b>      Matches any sequence of tokens.

       <b>b</b>      Matches  any  balanced sequence of tokens, that is, a sequence of tokens within parentheses or
              curly braces.

       <b>e</b>      Matches any expression. This is the default.

       <b>s</b>      Matches any string.

       <b>t</b>      Matches any one token.

       <b>w</b>      Matches white space, including comments.

       In a <b>replacemethod</b> rule, three subtokens are defined for each token you specify in the selector.  For
       each  token <b>&lt;foo&gt;</b> in the selector, <b>replacemethod</b> defines the following. The Examples section shows an
       example of using one of these.

       <b>&lt;foo_arg&gt;</b>
              Represents the tokens in the invocation of the method, that is, what is supplied for  the  foo
              argument.

       <b>&lt;foo_type&gt;</b>
              Represents the type for foo that appears in the declaration.

       <b>&lt;foo_param&gt;</b>
              Represents the parameter in the declaration.

       <b>replacemethod</b> also defines the following labels:

       <b>&lt;implementation&gt;</b>
              Represents the body of the method implementation (not including curly braces).

       <b>&lt;receiver&gt;</b>
              Represents the receiver of the message.

       <b>&lt;call&gt;</b> Represents the entire method invocation (including the square brackets).

<b>EXAMPLES</b>
       The  following  is a typical <b>tops</b> command invocation. The script file MyRules.tops contains the <b>find</b>,
       <b>replace</b>, and <b>replacemethod</b> rules that are performed on the files in  MyProjectDir.  The  <b>-semiverbose</b>
       option means that name of the file being processed and the progress of the command will be printed to
       standard output.

              tops -semiverbose -scriptfile MyRules.tops MyProjectDir/*.[hm]

       The following is a typical rule that a tops script file would contain. The rule  renames  the  method
       <b>removeRowAt:andFree:</b>  to <b>removeRow:andRelease:</b> in all invocations, declarations, implementations, and
       <b>@selector</b> expressions.

              replacemethod "removeRowAt:andFree:" with "removeRow:andRelease:"

       The following rule marks all calls to the function <b>NXGetNamedObject()</b> with the  error  message.  <b>same</b>
       means  replace  this  function  with itself. <b>NXGetNamedObject()</b> will still appear in the file, but it
       will be marked by the error message. <b>&lt;b</b> <b>args&gt;</b> specifies to replace all of the  arguments  in  between
       the parentheses as well.

              replace "NXGetNamedObject(&lt;b args&gt;)" with same
                  error  "ApplicationConversion:  NXGetNamedObject() is obsolete. Replace with nib file out-<font color="#ffffff" class="whiteout">lets."&nbsp;outlets."</font>
              lets."

       The following rule renames the method in all occurrences, and swaps the second and third argument  in
       all invocations and declarations.

              replacemethod  "browser:fillMatrix:&lt;2&gt;inColumn:&lt;3&gt;" with "browser:createRowsForColumn:&lt;3&gt;inMa-<font color="#ffffff" class="whiteout">trix:&lt;2&gt;"&nbsp;"browser:createRowsForColumn:&lt;3&gt;inMatrix:&lt;2&gt;"</font>
              trix:&lt;2&gt;"

       The following rule renames the method in all occurrences. In the invocations, it reverses  the  value
       specified for the flag argument.

              replacemethod "myMethod:&lt;flag&gt;" with "myNewMethod:&lt;flag&gt;"
                  { replace "&lt;flag_arg&gt;" with "!&lt;flag_arg&gt;" }

       The  following  rule  renames  the method <b>initContent:style:backing:buttonMask:defer:</b> to <b>initWithCon</b>-<font color="#ffffff" class="whiteout">tentRect:styleMask:backing:defer:&nbsp;initWithContentRect:styleMask:backing:defer:</font>
       <b>tentRect:styleMask:backing:defer:</b> in all occurrences. In the declarations of this method, it  changes
       the  type  for  the  style  argument  to  be <b>unsigned</b> <b>int</b> and the type for the backing argument to be
       NSBackingStoreType.

              replacemethod "&lt;old&gt;" with "&lt;new&gt;" {
                  replace "&lt;style_type&gt;" with "(unsigned int)"
                  replace "&lt;backing_type&gt;" with "(NSBackingStoreType)"
                  }
                  where ("&lt;old&gt;", "&lt;new&gt;") isOneOf {      ("initContent:style:&lt;style&gt; backing:&lt;backing&gt; but-<font color="#ffffff" class="whiteout">tonMask:&lt;bmask&gt;&nbsp;buttonMask:&lt;bmask&gt;</font>
              tonMask:&lt;bmask&gt;    defer:&lt;flag&gt;",   "initWithContentRect:styleMask:&lt;style&gt;   backing:&lt;backing&gt;
              defer:&lt;flag&gt;"),
                  }

       The following rule renames  the  method  <b>minFrameWidth:forStyle:buttonMask:</b>  to  <b>minFrameWidthWithTi</b>-<font color="#ffffff" class="whiteout">tle:styleMask:&nbsp;minFrameWidthWithTitle:styleMask:</font>
       <b>tle:styleMask:</b>  in  all occurrences. Within invocations of this method, it changes the style argument
       to be the logical OR of the previous style argument and the previous  button  mask  argument.  Within
       method declarations, it changes the type for the style argument to be <b>unsigned</b> <b>int</b>. Within the imple-<font color="#ffffff" class="whiteout">mentation&nbsp;implementation</font>
       mentation of this method, it changes all uses of the button mask argument to the style argument.

              replacemethod "minFrameWidth:forStyle:&lt;style&gt; buttonMask:&lt;bmask&gt;"  with  "minFrameWidthWithTi-<font color="#ffffff" class="whiteout">tle:styleMask:&lt;style&gt;"&nbsp;"minFrameWidthWithTitle:styleMask:&lt;style&gt;"</font>
              tle:styleMask:&lt;style&gt;" {
                  replace "&lt;style_arg&gt;" with "&lt;style_arg&gt;|&lt;bmask_arg&gt;"
                  replace "&lt;style_type&gt;" with "(unsigned int)"
                  }
                  within ("&lt;implementation") {      replace "&lt;bmask_param&gt;" "&lt;style_param&gt;"
                  }




Apple Computer, Inc.                           March 14, 1995                                        TOPS(1)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/tops.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/tops.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/tops.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

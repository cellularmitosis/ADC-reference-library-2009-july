<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Movie Basics: Locating Tracks, Saving Movies, and Modifying Movie Properties</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Locating Tracks, Saving Movies, and Modifying Movie Properties"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties" title="Locating Tracks, Saving Movies, and Modifying Movie Properties"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../MovieBasics-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000545" target="_top">Movie Basics</a> &gt; <a href="../A-Intro/1Introduction.html#//apple_ref/doc/uid/TP40000908-IntroductiontoQuickTimeMovieBasics-DontLinkElementID_83">QuickTime Movie Basics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../I-Chapter/9TimecodeMediaHandle.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../K-Chapter/11MatrixFunctions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-SW1" title="Locating Tracks, Saving Movies, and Modifying Movie Properties"></a>
<h1>Locating Tracks, Saving Movies, and Modifying Movie Properties</h1>

<p>The Movie Toolbox provides a set of functions that help your application locate a movie&#8217;s tracks and media structures. This chapter describes these functions and how to use them. In addition, the chapter discusses functions you can use to save movies, capture and restore the edit state of a movie, and modify movie properties. A later section of the chapter discusses support for progressive downloads.</p>
<p>The Movie Toolbox identifies a movie&#8217;s tracks in two ways. First, every track in a movie has a unique ID value. This ID value is unique throughout the life of a movie, even after it has been saved. That is, no two tracks of a movie ever have the same ID, and no ID&#160;value is ever reused. Second, a movie&#8217;s current tracks may be identified by their index value. Index values always range from 1 to the number of tracks in the movie. Track indexes provide a convenient way to access each track of a movie.</p>
<p>There are several functions that allow you to find a movie&#8217;s tracks. You can use the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMovieTrackCount" target="_top">GetMovieTrackCount</a></code> function to determine the number of tracks in a movie. Use the&#160;<code>GetMovieTrack</code> function to obtain the track identifier for a specific track, given its ID. The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMovieIndTrack" target="_top">GetMovieIndTrack</a></code> function lets you obtain a track&#8217;s identifier, given its track index.</p>
<p>You can obtain a track&#8217;s ID value given its track identifier by calling the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackID" target="_top">GetTrackID</a></code> function.</p>
<p>You can determine the movie that contains a track by calling the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackMovie" target="_top">GetTrackMovie</a></code> function.</p>
<p>The <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetTrackMedia" target="_top">GetTrackMedia</a></code> function enables you to find a track&#8217;s media. Conversely, you can find the track that uses a media by calling the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaTrack" target="_top">GetMediaTrack</a></code> function.</p>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_56">Saving Movies</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_57">Time Base Callback Functions</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_58">Creating and Disposing of Time Bases</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_59">Working with Movie Time</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_60">Working With Movie User Data</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_61">The Time Structure</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_62">The Fixed-Point and Fixed-Rectangle Structures</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_63">Media Handler Support</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_64">Data Handler Components</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_65">Support for Progressive Downloads</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_66">Displaying a Progressively Downloaded Movie</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_68">Handling Media Sample References</a>
				
			<br/>
			
        
			
			
				<a href="10LocatingTracksSavin.html#//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_69">Manipulating Media Input Maps</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_56" title="Saving Movies"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-SavingMovies" title="Saving Movies"></a>Saving Movies</h2>
<p>The Movie Toolbox provides a set of high-level functions for storing movies within files. These files have a file type of <code>'MooV'</code> and a resource type of <code><!--a target="_top" -->'moov'<!--/a--></code>. Your application can gain access to existing movies with either the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromFile" target="_top">NewMovieFromFile</a></code> function or the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromDataFork" target="_top">NewMovieFromDataFork</a></code> function. Once you have loaded the movie, your application uses the functions that are described in this section to save any changes you have made to the movie.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/AddMovieResource" target="_top">AddMovieResource</a></code> function to add a new movie resource to a movie file. Your application can use this function to save a movie that it created using the functions. You can use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/UpdateMovieResource" target="_top">UpdateMovieResource</a></code> function to replace an existing movie resource in a movie file. You can remove a movie resource by calling the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/RemoveMovieResource" target="_top">RemoveMovieResource</a></code> function.</p>
<p>The movie resources that your application creates with the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/AddMovieResource" target="_top">AddMovieResource</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/UpdateMovieResource" target="_top">UpdateMovieResource</a></code> functions may contain references to movie data. These references identify the data that constitute the movie. However, the movie data can be stored outside of the movie file. If you want to create a movie file that contains all of its movie data, use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovie" target="_top">FlattenMovie</a></code> or <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovieData" target="_top">FlattenMovieData</a></code> function. These functions can also be used to store the movie data in the movie file&#8217;s data fork, or to interleave the media data to optimize performance.</p>
<p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/PutMovieIntoHandle" target="_top">PutMovieIntoHandle</a></code> function places a QuickTime movie into a handle. You can then convert the movie into specialized data formats.</p>
<p>The <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/HasMovieChanged" target="_top">HasMovieChanged</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/ClearMovieChanged" target="_top">ClearMovieChanged</a></code> functions allow your application to work with the movie changed flag that is maintained by the Movie Toolbox. You can use this flag to determine whether a movie has been changed.</p>
<p>The movie changed flag indicates whether you have changed the movie. Such actions as editing the movie, adding samples to a media, or changing a data reference cause the flag to indicate that the movie has changed. There are several operations that the movie changed flag does not reflect, including changing the volume, rate, or time settings for the movie. These settings change frequently when a movie is played. Your application must monitor these settings itself.</p>
<p>The Movie Toolbox also supplies functions for storing and retrieving movies that are stored in the data fork of a file. These functions provide robust data reference resolution and improve low memory performance. The <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/NewMovieFromDataFork" target="_top">NewMovieFromDataFork</a></code> function enables you to retrieve a movie that is stored anywhere in the data fork of a file. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/PutMovieIntoDataFork" target="_top">PutMovieIntoDataFork</a></code> function to store an atom version of a specified movie in the data fork of a file.</p>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_57" title="Time Base Callback Functions"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-TimeBaseCallbackFunctions" title="Time Base Callback Functions"></a>Time Base Callback Functions</h2>
<p>If your application uses QuickTime time bases, it may define callback functions that are associated with a specific time base. Your application can then use these callback functions to perform activities that are triggered by temporal events, such as a certain time being reached or a specified rate being achieved. The time base functions of the Movie Toolbox interact with clock components to schedule the invocation of these callback functions; clock components are responsible for invoking the callback function at its scheduled time. Your application can use the functions described in this section to establish your own callback function and to schedule callback events.</p>
<p>You can define three types of callback events. These types are distinguished by the nature of the temporal event that triggers the Movie Toolbox to call your function. The three types are</p>
<ul class="ul">
<li class="li"><p>events that are triggered at a specified time</p></li>
<li class="li"><p>events that are triggered when the rate reaches a specified value</p></li>
<li class="li"><p>events that are triggered when the time value of a time base changes by an amount different from the time base&#8217;s rate</p></li>
</ul>
<p>You specify a callback event&#8217;s type when you define the callback event, using the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewCallBack" target="_top">NewCallBack</a></code> function.</p>
<p>You specify whether your event can occur at interrupt time when you define the callback&#160;event, using the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewCallBack" target="_top">NewCallBack</a></code> function. Your function is called closer to the triggering event at interrupt time, but it is subject to all the restrictions of interrupt functions (for example, your callback function cannot cause memory to be moved). If your function is not called at interrupt time, you are free of these restrictions; however, your function may be called later, because the invocation is delayed to avoid interrupt time.</p>
<p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewCallBack" target="_top">NewCallBack</a></code> function allocates the memory to support a callback event. When you are done with the callback event, you dispose of it by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeCallBack" target="_top">DisposeCallBack</a></code> function.</p>
<p>You schedule a callback event by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/CallMeWhen" target="_top">CallMeWhen</a></code> function. Call <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/CancelCallBack" target="_top">CancelCallBack</a></code> function to unschedule a callback event.</p>
<p>You can retrieve the time base of a callback event by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetCallBackTimeBase" target="_top">GetCallBackTimeBase</a></code> function. You can obtain the type of a callback event by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetCallBackType" target="_top">GetCallBackType</a></code> function.</p>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_58" title="Creating and Disposing of Time Bases"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-CreatingandDisposingofTimeBases" title="Creating and Disposing of Time Bases"></a>Creating and Disposing of Time Bases</h2>
<p>This section discusses the Movie Toolbox functions your application can use to create and dispose of time bases.</p>
<p>The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/NewTimeBase" target="_top">NewTimeBase</a></code> function lets you create a new time base. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/DisposeTimeBase" target="_top">DisposeTimeBase</a></code> function to dispose of a time base once you are finished with it.</p>
<p>Time bases rely on either a clock component or another time base for their time source. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseMasterTimeBase" target="_top">SetTimeBaseMasterTimeBase</a></code> function to cause one time base to be based on another time base. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseMasterTimeBase" target="_top">GetTimeBaseMasterTimeBase</a></code> allows you to determine the master time base of a given time base.</p>
<p>You can assign a clock component to a time base; that clock then acts as the master clock for the time base. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseMasterClock" target="_top">SetTimeBaseMasterClock</a></code> function to assign a clock component to a time base. The <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetTimeBaseMasterClock" target="_top">GetTimeBaseMasterClock</a></code> function enables you to determine the clock component that is assigned to a time base. You can change the offset between a time base and its time source by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetTimeBaseZero" target="_top">SetTimeBaseZero</a></code> function.</p>
<p>You can set the time source of a movie by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMasterTimeBase" target="_top">SetMovieMasterTimeBase</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieMasterClock" target="_top">SetMovieMasterClock</a></code> functions.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_107" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
Although most time base functions can be used at interrupt time, several of the Movie Toolbox functions cannot. Consult the documentation for each function in the <em>QuickTime</em> <em>API</em> <em>Reference.</em> </p>
</div>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_59" title="Working with Movie Time"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-WorkingwithMovieTime" title="Working with Movie Time"></a>Working with Movie Time</h2>
<p>Every QuickTime movie has its own time base. A movie&#8217;s time base allows all the tracks that make up the movie to be synchronized when the movie is played. The Movie Toolbox provides a number of functions that allow your application to determine and establish the time parameters of a movie. This section discusses those functions. Later sections in this chapter discuss the Movie Toolbox functions that allow you to work with the time parameters of tracks and media structures.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTimeBase" target="_top">GetMovieTimeBase</a></code> function to retrieve the time base for a movie.</p>
<p>You can work with a movie&#8217;s current time by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTime" target="_top">GetMovieTime</a></code>, <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTime" target="_top">SetMovieTime</a></code>, and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTimeValue" target="_top">SetMovieTimeValue</a></code> functions.</p>
<p>You can work with a movie&#8217;s time scale by calling the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieTimeScale" target="_top">GetMovieTimeScale</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieTimeScale" target="_top">SetMovieTimeScale</a></code> functions.</p>
<p>The Movie Toolbox can calculate the total duration of a movie. You can use the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieDuration" target="_top">GetMovieDuration</a></code> function to retrieve a movie&#8217;s duration.</p>
<p>Your application can call the <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/GetMovieRate" target="_top">GetMovieRate</a></code> and <code><a href="../../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/c/func/SetMovieRate" target="_top">SetMovieRate</a></code> to work with a movie&#8217;s playback rate.</p>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_60" title="Working With Movie User Data"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-WorkingWithMovieUserData" title="Working With Movie User Data"></a>Working With Movie User Data</h2>
<p>Each movie, track, and media can contain a user data list, which your application can use in any way you want. A <strong>user</strong> <strong>data</strong> <strong>list</strong> contains all the user data for a movie, track, or media. Each user data list may contain one or more <strong>user</strong> <strong>data</strong> <strong>items.</strong></p>
<p>All QuickTime user data items share several attributes. First, each user data item carries a type identifier. This type is similar to a Resource Manager resource type, and is stored in a long integer. Apple has reserved all lowercase user data type values. You are free to create user data type values using uppercase letters. Apple recommends using type values that begin with the copyright symbol to specify user data items that store text data.</p>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_61" title="The Time Structure"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-TheTimeStructure" title="The Time Structure"></a>The Time Structure</h2>
<p>The Movie Toolbox provides a number of functions that allow you to work with time specifications. Many of these functions require that you place a time specification in a data structure called a<em>time</em> <em>structure.</em> The time structure allows you to fully describe a time specification. The <code><!--a target="_top" -->TimeRecord<!--/a--></code> data type defines the format of a time structure.</p>

<div class="codesample"><table><tr><td scope="row"><pre>struct TimeRecord<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CompTimeValue&#160;&#160;&#160;&#160;&#160;&#160;&#160;value;&#160;&#160;&#160;&#160;&#160;&#160;/* time value (duration or absolute) */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;TimeScale &#160;&#160;&#160;    &#160;&#160;&#160;scale;&#160;&#160;&#160;&#160;&#160;&#160;/* units per second */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;TimeBase &#160;&#160;&#160;&#160;&#160;    &#160;&#160;base;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* reference to the time base */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct TimeRecord TimeRecord;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>value</code></p></td>
<td ><p>Contains the time value. The time value defines either a duration or an absolute time by specifying the corresponding number of units of time. For durations, this is the number of time units in the period. For an absolute time, this is the number of time units since the beginning of the time coordinate system. The unit for this value is defined by the scale field. The time value is expressed as a <code>CompTimeValue</code> data type, which is a 64-bit integer quantity. This 64-bit quantity consists of two 32-bit integers, and it is defined by the <code>Int64</code> data type, which is described next in this section.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>scale</code></p></td>
<td ><p>Contains the time scale. This field specifies the number of units of time that pass each second. If you specify a value of 0, the time base uses its natural time scale.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>base</code></p></td>
<td ><p>Contains a reference to the time base. You obtain a time base by calling the Movie Toolbox's <code>GetMovieTimeBase</code> or <code>NewTimeBase</code> functions.</p></td>
</tr>

</table></div>
<p>If the time structure defines a duration, set this field to <code>nil</code>. Otherwise, this field must refer to a valid time base.</p>
<p>You specify the time value in a time structure in a 64-bit integer value as follows:</p>

<div class="codesample"><table><tr><td scope="row"><pre>typedef Int64 CompTimeValue;<span></span></pre></td></tr></table></div>

<p>The Movie Toolbox uses this format so that extremely large time values can be represented. The <code>Int64</code> data type defines the format of these signed 64-bit integers.</p>

<div class="codesample"><table><tr><td scope="row"><pre>struct Int64<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long hi;&#160;&#160;&#160;&#160;/* high-order 32 bits-value field in time structure */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long lo;&#160;&#160;&#160;&#160;/* low-order 32 bits-value field in time structure */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct Int64 Int64;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>hi</code></p></td>
<td ><p>Contains the high-order 32 bits of the value. The high-order bit represents the sign of the 64-bit integer.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>lo</code></p></td>
<td ><p>Contains the low-order 32 bits of the value.</p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_62" title="The Fixed-Point and Fixed-Rectangle Structures"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-TheFixedPointandFixedRectangleStructures" title="The Fixed-Point and Fixed-Rectangle Structures"></a>The Fixed-Point and Fixed-Rectangle Structures</h2>
<p>The Movie Toolbox matrix functions provide two mechanisms for specifying points and rectangles. Some of the functions work with standard QuickDraw points and rectangles, which use integer values to identify coordinates. Others, such as the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TransformFixedRect" target="_top">TransformFixedRect</a></code> function, work with points and rectangles whose coordinates are expressed as fixed-point numbers. By using fixed-point numbers in these points and rectangles, the Movie Toolbox can support a greater degree of precision when defining graphic objects.</p>
<p>The <code><!--a target="_top" -->FixedPoint<!--/a--></code> data type defines a <strong>fixed</strong> <strong>point.</strong> The <code><!--a target="_top" -->FixedRect<!--/a--></code> data type defines a <strong>fixed</strong> <strong>rectangle.</strong> Note that both of these structures define the x coordinate before the y coordinate. This is different from the standard QuickDraw structures.</p>

<div class="codesample"><table><tr><td scope="row"><pre>struct FixedPoint<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed x;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* point's x coordinate as fixed-point number */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed y;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* point's y coordinate as fixed-point number */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct FixedPoint FixedPoint;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>x</code></p></td>
<td ><p>Defines the point's x coordinate as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>y</code></p></td>
<td ><p>Defines the point's y coordinate as a fixed-point number.</p></td>
</tr>

</table></div>

<div class="codesample"><table><tr><td scope="row"><pre>struct FixedRect<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed left;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* x coordinate of upper-left corner */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed top;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* y coordinate of upper-left corner */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed right;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* x coordinate of lower-right corner */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed bottom;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* y coordinate of lower-right corner */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct FixedRect FixedRect;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>left</code></p></td>
<td ><p>Defines the x coordinate of the upper-left corner of the rectangle as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>top</code></p></td>
<td ><p>Defines the y coordinate of the upper-left corner of the rectangle as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>right</code></p></td>
<td ><p>Defines the x coordinate of the lower-right corner of the rectangle as a fixed-point number.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>bottom</code></p></td>
<td ><p>Defines the y coordinate of the lower-right corner of the rectangle as a fixed-point number.</p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_63" title="Media Handler Support"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-MediaHandlerSupport" title="Media Handler Support"></a>Media Handler Support</h2>
<p>The video, base, and tween media handlers support sending their data to other tracks. Text data can also be sent, but none of the media handlers currently receive it. The sound, music and 3D media handlers do not support sending their data to other tracks.</p>
<p>Not all media handlers support all input types. Media handlers can decide which input types to support. Table 9-1 lists the input types supported by each Apple-supplied media handler.</p>
<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_108" title="Table 9-1Input types supported by Apple-supplied media handlers"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 9-1&nbsp;&nbsp;</strong>Input types supported by Apple-supplied media handlers</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Input type</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Video</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Text</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Sound</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>MPEG</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Music</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Sprite</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Timecode</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>3D</p></th>
</tr>


<tr>
<td  scope="row"><p>Matrix</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
</tr>
<tr>
<td  scope="row"><p>Graphics mode</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
</tr>
<tr>
<td  scope="row"><p>Clip</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
</tr>
<tr>
<td  scope="row"><p>Volume</p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p>&#160;</p></td>
</tr>
<tr>
<td  scope="row"><p>Balance</p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p>&#160;</p></td>
</tr>
<tr>
<td  scope="row"><p>Sprite image</p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
</tr>
<tr>
<td  scope="row"><p>3D sound</p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p>x</p></td>
<td ><p> </p></td>
<td ><p> </p></td>
<td ><p> </p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_64" title="Data Handler Components"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DataHandlerComponents" title="Data Handler Components"></a>Data Handler Components</h2>
<p>QuickTime introduced a memory-based data handler. This data handler component works with movie data that is stored in memory (referenced by a handle) instead of in a file. This data handler has a component subtype value of</p>

<div class="codesample"><table><tr><td scope="row"><pre>HandleDataHandlerSubType ('hndl')<span></span></pre></td></tr></table></div>

<p>To create a movie that uses the handle data handler, set the data reference type to <code>HandleDataHandlerSubType</code> when you call the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/NewTrackMedia" target="_top">NewTrackMedia</a></code> function. Note that the movie data in memory is not automatically saved with the movie. If you want to save the data that is in memory, use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovie" target="_top">FlattenMovie</a></code> or <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/InsertTrackSegment" target="_top">InsertTrackSegment</a></code> functions to copy the data from memory to a file. Note that there is a special flag for <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/FlattenMovie" target="_top">FlattenMovie</a></code> and data handlers.</p>
<p>The handle data handler does not use aliases as its data reference, and therefore does not use alias handles. Rather, it uses 4-byte memory handles as its data reference. The data reference contains the actual handle that stores the needed data. If you pass a handle value of <code>nilMovie</code> Data Types, the data handler allocates and manages the handle for you. If you pass a handle value other than <code>nilMovie</code> Data Types, the data handler uses your handle. It is then your responsibility to manage the handle and dispose of it when appropriate. Note that a single handle may be shared by several data handler components. Whenever new data is added, the data handler resizes the handle to accommodate new data.</p>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_65" title="Support for Progressive Downloads"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-SupportforProgressiveDownloads" title="Support for Progressive Downloads"></a>Support for Progressive Downloads</h2>
<p>The QuickTime Movie Toolbox includes support for progressive downloads, which allow part of a movie to be displayed before all of its data has been received over a network or other slow link.</p>
<p>Applications that use the movie controller component provided by Apple automatically get support for progressive downloads. Applications that do not use the standard movie controller can use the two high-level functions for progressive downloads, <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/QTMovieNeedsTimeTable" target="_top">QTMovieNeedsTimeTable</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetMaxLoadedTimeInMovie" target="_top">GetMaxLoadedTimeInMovie</a></code>, to determine whether a movie is being progressively downloaded and, if so, to see how much of it has already been downloaded. Finally, the few applications that need even more control over progressive downloads, such as control over individual tracks or media, can use one or both of the low-level functions for progressive downloads, <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/MakeTrackTimeTable" target="_top">MakeTrackTimeTable</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/MakeMediaTimeTable" target="_top">MakeMediaTimeTable</a></code>.</p>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_66" title="Displaying a Progressively Downloaded Movie"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DisplayingaProgressivelyDownloadedMovie" title="Displaying a Progressively Downloaded Movie"></a>Displaying a Progressively Downloaded Movie</h2>
<p>Listing&#160;9-1 illustrates how to use the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/QTMovieNeedsTimeTable" target="_top">QTMovieNeedsTimeTable</a></code> function, to find out if a movie if being progressively downloaded, and the <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/GetMaxLoadedTimeInMovie" target="_top">GetMaxLoadedTimeInMovie</a></code> function, to find out how much of the movie has been downloaded.</p>
<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_109" title="Listing 9-1Displaying a progressively downloaded movie"></a>
<p class="codesample"><strong>Listing 9-1&nbsp;&nbsp;</strong>Displaying a progressively downloaded movie</p>
<div class="codesample"><table><tr><td scope="row"><pre>WindowPtr&#160;&#160;&#160;movieWindow;<span></span></pre></td></tr><tr><td scope="row"><pre>Movie&#160;&#160;&#160;&#160;&#160;&#160;&#160;theMovie;<span></span></pre></td></tr><tr><td scope="row"><pre>Boolean&#160;&#160;&#160;&#160;&#160;needsTimeTable;<span></span></pre></td></tr><tr><td scope="row"><pre>TimeValue&#160;&#160;&#160;loadedTime = -1;<span></span></pre></td></tr><tr><td scope="row"><pre>err = GetDisplayedMovie (&#38;movieWindow, &#38;theMovie);<span></span></pre></td></tr><tr><td scope="row"><pre>err = QTMovieNeedsTimeTable (theMovie, &#38;needsTimeTable);<span></span></pre></td></tr><tr><td scope="row"><pre>if (needsTimeTable)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;err = GetMaxLoadedTimeInMovie (theMovie, &#38;loadedTime);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;// Display the movie up to the current end<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_67" title="Low-Level Routines"></a>
<h3><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-LowLevelRoutines" title="Low-Level Routines"></a>Low-Level Routines</h3>
<p>Some applications may need more control over progressive downloads, such as control over individual tracks or media, than is possible with the high-level functions for progressive downloads. These applications can use one or both of the low-level functions for progressive downloads described in this section, <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/MakeTrackTimeTable" target="_top">MakeTrackTimeTable</a></code> and <code><a href="../../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/c/func/MakeMediaTimeTable" target="_top">MakeMediaTimeTable</a></code>.</p>


<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_68" title="Handling Media Sample References"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-HandlingMediaSampleReferences" title="Handling Media Sample References"></a>Handling Media Sample References</h2>
<p>You could always use <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaSampleReference" target="_top">GetMediaSampleReference</a></code> to access samples in a movie one at a time. QuickTime introduced <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaSampleReferences" target="_top">GetMediaSampleReferences</a></code> <code></code> (note that this is the plural form of the <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaSampleReference" target="_top">GetMediaSampleReference</a></code> function), which you can use to obtain information about groups of samples. QuickTime also introduced <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/AddMediaSampleReferences" target="_top">AddMediaSampleReferences</a></code>, which you can use to work with groups of samples that have already been added to a movie.</p>

<a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-DontLinkElementID_69" title="Manipulating Media Input Maps"></a>
<h2><a name="//apple_ref/doc/uid/TP40000908-LocatingTracksSavingMoviesandModifyingMovieProperties-ManipulatingMediaInputMaps" title="Manipulating Media Input Maps"></a>Manipulating Media Input Maps</h2>
<p>The Movie Toolbox contains two functions for maintaining media input maps: <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/GetMediaInputMap" target="_top">GetMediaInputMap</a></code> and <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/SetMediaInputMap" target="_top">SetMediaInputMap</a></code>.</p>
<p>Each track has particular attributes such as size, position, and volume associated with it. The media input map of that track describes where the variable parameters are stored so that modifier tracks know where to send their data. When a track is copied, its input map is also copied. <code><a href="../../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/c/func/CopyTrackSettings" target="_top">CopyTrackSettings</a></code> also transfers the media input map.</p>




        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../I-Chapter/9TimecodeMediaHandle.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../K-Chapter/11MatrixFunctions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-01-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/RM/MovieBasics/MTEditing/J-Chapter/10LocatingTracksSavin.html%3Fid%3DTP40000908-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/RM/MovieBasics/MTEditing/J-Chapter/10LocatingTracksSavin.html%3Fid%3DTP40000908-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/RM/MovieBasics/MTEditing/J-Chapter/10LocatingTracksSavin.html%3Fid%3DTP40000908-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
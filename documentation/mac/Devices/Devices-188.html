<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SCSIRegisterBus(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING188></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-187.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-189.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-151.html"><B>Chapter 4 - SCSI Manager 4.3</B></A> / <A HREF="Devices-156.html"><B>SCSI Manager 4.3 Reference</B></A><BR><DL><DD><A HREF="Devices-171.html"><B>SCSI Manager 4.3 Functions</B></A> / <A HREF="Devices-187.html"><B>SIM Support Functions</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING188-0></A>
<H3>SCSIRegisterBus</H3>
 <A NAME=MARKER-2-218></A>You use the <CODE>SCSIRegisterBus</CODE> function to register a SIM and HBA for use with the XPT.<P>
<PRE>
OSErr SCSIRegisterBus(SIMInitInfo *SIMinfoPtr);
</PRE>
<DL>
<DT><CODE>SIMinfoPtr</CODE>
<DD>  A pointer to a SIM initialization record, which is described on <A HREF=Devices-170.html#MARKER-9-173>page 4-36</A>.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD><symbol><--<Default \xB6 Font><EM></EM><TD>SIMstaticPtr<TD>UInt8 *<TD>A pointer to the allocated static storage.<TR>
<TD><symbol>--><Default \xB6 Font><EM></EM><TD>staticSize<TD>SInt32<TD>The amount of memory requested for static storage.<TR>
<TD><symbol>--><Default \xB6 Font><EM></EM><TD>SIMInit<TD>SIMInitProc<TD>A pointer to the <CODE>SIMInit</CODE> function.<TR>
<TD><symbol>--><Default \xB6 Font><EM></EM><TD>SIMAction<TD>SIMActionProc<TD>A pointer to the <CODE>SIMAction</CODE> function.<TR>
<TD><symbol>--><Default \xB6 Font><EM></EM><TD>SIMInterruptPoll<TD>InterruptPollProc<TD>A pointer to the <CODE>SIMInterruptPoll</CODE> function.<TR>
<TD><symbol>--><Default \xB6 Font><EM></EM><TD>NewOldCall<TD>SIMActionProc<TD>A pointer to the <CODE>NewOldCall</CODE> function.<TR>
<TD><symbol>--><Default \xB6 Font><EM></EM><TD>ioPBSize<TD>UInt16<TD>The SCSI I/O parameter block size for this SIM.<TR>
<TD><symbol>--><Default \xB6 Font><EM></EM><TD>oldCallCapable<TD>Boolean<TD>Set to <CODE>true</CODE> if the SIM emulates original SCSI Manager functions.<TR>
<TD><symbol><--<Default \xB6 Font><EM></EM><TD>EnteringSIM<TD>SCSIProc<TD>A pointer to the <CODE>EnteringSIM</CODE> function.<TR>
<TD><symbol><--<Default \xB6 Font><EM></EM><TD>ExitingSIM<TD>SCSIProc<TD>A pointer to the <CODE>ExitingSIM</CODE> function.<TR>
<TD><symbol><--<Default \xB6 Font><EM></EM><TD>MakeCallback<TD>MakeCallbackProc<TD>A pointer to the <CODE>MakeCallback</CODE> function.<TR>
<TD><symbol><--<Default \xB6 Font><EM></EM><TD>busID<TD>UInt16<TD>The bus number assigned to this SIM/HBA.</TABLE>
</B><P>
<A NAME=HEADING188-5></A>
<H5>DESCRIPTION</H5>
 You use the SIM initialization record to specify the characteristics of the HBA, the SIM's function entry points, and the number of bytes required for static data storage (global variables). The XPT returns a pointer to the allocated storage and a bus number that identifies the bus in all future transactions. In addition, the XPT returns pointers to the <CODE>EnteringSIM</CODE>, <CODE>ExitingSIM</CODE>, and <CODE>MakeCallback</CODE> functions.<P>
 Before assigning a bus number, the XPT calls the SIM's <CODE>SIMInit</CODE> function, which instructs the SIM to initialize itself. If the <CODE>SIMInit</CODE> function returns <CODE>noErr</CODE>, the XPT assigns a bus number and returns from the <CODE>SCSIRegisterBus</CODE> function. At this point the SIM is installed and should be ready to accept requests.<P>
<A NAME=HEADING188-8></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>SCSIRegisterBus</CODE> function may move memory; you should not call it at interrupt time.<P>
<A NAME=HEADING188-10></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>scsiTooManyBuses<TD>-7888<TD>SIM registration failed because the XPT registry is full</TABLE>
</H5>
<A NAME=HEADING188-11></A>
<H5>SEE ALSO</H5>
 See <A HREF=Devices-155.html#MARKER-9-56>"Writing a SCSI Interface Module," beginning on page 4-15</A>, for more information about using this function.<A NAME=MARKER-2-63></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-187.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-189.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

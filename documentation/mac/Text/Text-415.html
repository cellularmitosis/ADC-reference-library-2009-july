<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>About Text Service Components(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING415></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-414.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-416.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-409.html"><B>Chapter 7 - Text Services Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING415-0></A>
<H1><A NAME=MARKER-9-96></A><A NAME=MARKER-2-97></A>About Text Service Components</H1>
 Text service components are components as defined and used by the Component Manager. They have a specific structure, interface, and manner of execution. For more information on components, see the chapter "Component Manager" in <I><A HREF="../MoreToolbox/MoreToolbox-2.html">Inside Macintosh: More Macintosh Toolbox</A></I>. This section briefly describes the component description record, a data structure associated with a text service component.<P>
 <A NAME=MARKER-9-98></A>The <I>component description record,</I> maintained by the Component Manager for each registered component, identifies the characteristics of the component, including the nature of services provided by the component and the manufacturer of the component. It is filled out by the text service component at initialization.<P>
 <A NAME=MARKER-2-56></A>The <CODE>ComponentDescription</CODE> data type defines the format of the component description record:<P>
<PRE>
TYPE ComponentDescription = 
   RECORD
      componentType:       OSType;  {command set ID}
      componentSubType:    OSType;  {specifies flavor}
      componentManufacturer:
                           OSType;  {vendor ID}
      componentFlags:      OSType;  {control flags}
      componentFlagsMask:  OSType;  {mask for control flags}
   END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><A NAME=MARKER-9-100></A><A NAME=MARKER-2-60></A><CODE>componentType</CODE>
<DD> For text service components, <A NAME=MARKER-2-67></A>this field contains the interface type. The <B>interface type</B> specifies the set of Apple events and component commands associated with the text service component. Currently, all text service components have the same interface type, <CODE>kTextService</CODE>, whose associated 4-character tag is <A NAME=MARKER-2-68></A><CODE>'tsvc'</CODE>. To obtain a list of all available text service components, a client application can specify the value <CODE>kTextServices</CODE> in the <CODE>componentType</CODE> field when calling the Component Manager routine <CODE>GetServiceList</CODE>.
<DT><A NAME=MARKER-2-59></A><CODE>componentSubType</CODE>
<DD> For text service components, this field contains the text service component type. The<A NAME=MARKER-2-69></A> <B>text service component type</B> specifies the function and optionally a set of additional routines and data structures associated with that particular kind of text service component. Currently, only one text service component type is defined, <A NAME=MARKER-2-58></A><CODE>'inpm'</CODE>, specifying an inline input method.
<DT><A NAME=MARKER-2-73></A><CODE>componentManufacturer</CODE>
<DD> The identification number of the manufacturer of this particular text service component.
<DT><A NAME=MARKER-2-81></A><CODE>componentFlags</CODE>
<DD> Four bytes that contain component-specific information. See <BR><A HREF=#MARKER-9-111>Figure 7-8</A>:
<DT>
<DD> <A NAME=MARKER-2-389></A>Bits 0-7 contain the language code (as unsigned 8 bits).
<DT>
<DD> Bits 8-14 contain the script code (as unsigned 7 bits).
<DT>
<DD> <A NAME=MARKER-2-390></A>Bit 15 indicates whether the text service component takes active events. When bit 15 = 1, the text service component is interactive and accepts user events. When bit 15 = 0, the text service component is not interactive--that is, it only supplies batch services.
<DT>
<DD> Apple has reserved bits 16-23, so text services must set them to 0.
<DT>
<DD> The Component Manager defines bits 24-31.
</DL>
<B>Figure 7-8  <A NAME=MARKER-9-111></A>The format of the <CODE>componentFlags</CODE> field of the component description record</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/TSM-03.jpg">
<DL>
<DT><A NAME=MARKER-2-275></A><CODE>componentFlagsMask</CODE>
<DD> Four bytes that contain values used to affect the <CODE>componentFlags</CODE> field. This field should be 0 in the component description record for any text service component.
</DL>
 For example, an input method for the Japanese script system might assign the following values to the <CODE>componentType</CODE>, <CODE>componentSubType</CODE>, and <CODE>componentFlags</CODE> fields of component description record.<P>
<PRE>
cd: ComponentDescription;
cd.componentType     := kTextService;        {'tsvc'}
cd.componentSubType  := kInputMethodService; {'inpm'}
cd.componentFlags    := $0000810B;  {Japanese script &amp; language }
                                    { --takes user events}
</PRE>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-414.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-416.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

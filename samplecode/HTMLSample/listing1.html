<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>HTMLSample - /AboutBox.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/Carbon/index.html">Carbon</a> &gt; <a href="../../samplecode/Carbon/idxUserExperience-date.html">User Experience</a> &gt; <A HREF="javascript:location.replace('index.html');">HTMLSample</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxUserExperience-date.html" target="_blank">Carbon > User Experience</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">HTMLSample</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/AboutBox.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/AboutBox.c</option>
<option value="listing2.html">/AboutBox.h</option>
<option value="listing3.html">/CIconButtons.c</option>
<option value="listing4.html">/CIconButtons.h</option>
<option value="listing5.html">/CWDefines.h</option>
<option value="listing6.html">/debugf.c</option>
<option value="listing7.html">/debugf.h</option>
<option value="listing8.html">/History.c</option>
<option value="listing9.html">/History.h</option>
<option value="listing10.html">/HTMLSample Help/buttons.html</option>
<option value="listing11.html">/HTMLSample Help/index.html</option>
<option value="listing12.html">/HTMLSample Pages/docs/display.html</option>
<option value="listing13.html">/HTMLSample Pages/docs/drawing.html</option>
<option value="listing14.html">/HTMLSample Pages/docs/generalroutines.html</option>
<option value="listing15.html">/HTMLSample Pages/docs/index.html</option>
<option value="listing16.html">/HTMLSample Pages/docs/intro.html</option>
<option value="listing17.html">/HTMLSample Pages/docs/types.html</option>
<option value="listing18.html">/HTMLSample Pages/docs/userdefined.html</option>
<option value="listing19.html">/HTMLSample Pages/docs/utilities.html</option>
<option value="listing20.html">/HTMLSample Pages/error.html</option>
<option value="listing21.html">/HTMLSample Pages/index.html</option>
<option value="listing22.html">/HTMLSample.c</option>
<option value="listing23.html">/HTMLSample.h</option>
<option value="listing24.html">/HTMLSample.r</option>
<option value="listing25.html">/RenderingWindow.c</option>
<option value="listing26.html">/RenderingWindow.h</option>
<option value="listing27.html">/SampleUtils.c</option>
<option value="listing28.html">/SampleUtils.h</option></select>
				</p>
				</form>
				<p><strong><a href="HTMLSample.zip">Download Sample</a></strong> (&#147;HTMLSample.zip&#148;, 279.4K)<BR>
<strong><a href="HTMLSample.dmg">Download Sample</a></strong> (&#147;HTMLSample.dmg&#148;, 330.4K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  file AboutBox.c    Description:  This file contains the routines used to manage the about box window  displayed when the user chooses 'About HTMLSample...' from the file menu.    HTMLSample is an application illustrating how to use the new  HTMLRenderingLib services found in Mac OS 9. HTMLRenderingLib  is Apple's light-weight HTML rendering engine capable of  displaying HTML files.  by John Montbriand, 1999.  Copyright: &copy; 1999 by Apple Computer, Inc.  all rights reserved.    Disclaimer:  You may incorporate this sample code into your applications without  restriction, though the sample code has been provided &quot;AS IS&quot; and the  responsibility for its operation is 100% yours.  However, what you are  not permitted to do is to redistribute the source as &quot;DSC Sample Code&quot;  after having made changes. If you're going to re-distribute the source,  we require that you make it clear in the source that the code was  descended from Apple Sample Code, but that you've made changes.    Change History (most recent first):  10/16/99 created by John Montbriand*/#include &quot;AboutBox.h&quot;#ifdef __APPLE_CC__#include &lt;Carbon/Carbon.h&gt;#else#include &lt;Carbon.h&gt;#endif#include &lt;StdDef.h&gt;#include &lt;string.h&gt;enum {  kAboutBoxWindowID = 129, /* WIND resource ID for the about box. */  kMaxAboutBoxHeight = 380 /* maximum about box window height */};  /* resource type and ID for the about box's contents */enum {  kHTMLResourceType = 'HTML',  kAboutBoxHTMLID = 128};  /* variables used by the about box.  there is only    one about box, so these are allocated as globals */WindowPtr gAboutBox = NULL;HRReference gAboutRenderer = NULL;/* IsAboutBox returns true if the window pointer  in the aboutBox parameter is not NULL and  points to the about box. */Boolean IsAboutBox(WindowPtr aboutBox) {  return (aboutBox == gAboutBox &amp;&amp; aboutBox != NULL);}/* OpenAboutBox opens the about box window and returns  a pointer to the window in *aboutBox.  There can only  be one about box open at a time, so if the about box is  already open, then this routine brings it to the front  by calling SelectWindow before returning a pointer to  it. */OSStatus OpenAboutBox(WindowPtr *aboutBox) {  OSStatus err;  if (gAboutBox != NULL) {      /* already showing??? bring it to the front. */    SelectWindow(gAboutBox);  } else {    Point theSize;    Handle text;    Rect aboutboxbounds;    gAboutBox = NULL;    gAboutRenderer = NULL;      /* get the window */    gAboutBox = GetNewCWindow(kAboutBoxWindowID, NULL, (WindowPtr)(-1));    if (gAboutBox == NULL) { err = resNotFound; goto bail; }      /* allocate a new rendering object */    err = HRNewReference(&amp;gAboutRenderer, kHRRendererHTML32Type, GetWindowPort(gAboutBox));    if (err != noErr) goto bail;      /* we don't have a grow box in this window */    err = HRSetGrowboxCutout(gAboutRenderer, false);    if (err != noErr) goto bail;      /* we only want a vertical scroll bar */    err = HRSetScrollbarState(gAboutRenderer, eHRScrollbarOff, eHRScrollbarAuto);    if (err != noErr) goto bail;      /* set the bounds for the rendering object */    SetPortWindowPort(gAboutBox);    GetPortBounds(GetWindowPort(gAboutBox), &amp;aboutboxbounds);    err = HRSetRenderingRect(gAboutRenderer, &amp;aboutboxbounds);    if (err != noErr) goto bail;      /* get the HTML data we want to draw in the window */    text = GetResource(kHTMLResourceType, kAboutBoxHTMLID);    if (text == NULL) { err = resNotFound; goto bail; }      /* put the data into the rendering object */    MoveHHi(text);    HLock(text);    err = HRGoToPtr(gAboutRenderer, *text, GetHandleSize(text), false, false);    HUnlock(text);    if (err != noErr) goto bail;      /* find out the 'best' rectangle for displaying the data */    err = HRGetRenderedImageSize(gAboutRenderer, &amp;theSize);    if (err != noErr) goto bail;      /* adjust the window's size, constraining it by the      maximum size */    if (theSize.v &gt; kMaxAboutBoxHeight) theSize.v = kMaxAboutBoxHeight;    SizeWindow(gAboutBox, theSize.h+16, theSize.v, false);    SetPortWindowPort(gAboutBox);      /* adjust the rendering object's size to the window's size */    err = HRSetRenderingRect(gAboutRenderer, &amp;aboutboxbounds);    if (err != noErr) goto bail;      /* show the window */    ShowWindow(gAboutBox);  }    /* done, return the window pointer */  *aboutBox = gAboutBox;  return noErr;bail:  if (gAboutRenderer != NULL) { HRDisposeReference(gAboutRenderer); gAboutRenderer = NULL; }  if (gAboutBox) { DisposeWindow(gAboutBox); gAboutBox = NULL; }  return err;}/* AboutBoxCloseWindow closes the about box window.   this routine deallocates any structures allocated  by the OpenAboutBox. */void AboutBoxCloseWindow(WindowPtr aboutBox) {  if (IsAboutBox(aboutBox)) {     HRDisposeReference(gAboutRenderer);    gAboutRenderer = NULL;    DisposeWindow(gAboutBox);    gAboutBox = NULL;  }}/* EnsureAboutBoxIsClosed closes the about box window  if it is open.  If it is not open then this routine does  nothing. */void EnsureAboutBoxIsClosed(void) {  if (gAboutBox != NULL)     AboutBoxCloseWindow(gAboutBox);}/* AboutBoxUpdate should be called for update events  directed at the about box window.  It calls  BeginUpdate and EndUpdate and does all of the  drawing required to refresh the about box window. */void AboutBoxUpdate(WindowPtr aboutBox) {  if (IsAboutBox(aboutBox)) {    RgnHandle windowVisibleRgn;    GetPortVisibleRegion(GetWindowPort(aboutBox), (windowVisibleRgn = NewRgn()));    SetPortWindowPort(gAboutBox);    BeginUpdate(gAboutBox);    HRDraw(gAboutRenderer, windowVisibleRgn);    EndUpdate(gAboutBox);    DisposeRgn(windowVisibleRgn);  }}/* AboutBoxActivate should be called for activate events  directed at the about box window. */void AboutBoxActivate(WindowPtr aboutBox, Boolean activate) {  if (IsAboutBox(aboutBox)) {    SetPortWindowPort(gAboutBox);    if (activate)      HRActivate(gAboutRenderer);    else HRDeactivate(gAboutRenderer);  }}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/HTMLSample/listing1.html%3Fid%3DDTS10000579-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/HTMLSample/listing1.html%3Fid%3DDTS10000579-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/HTMLSample/listing1.html%3Fid%3DDTS10000579-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Flattening Shapes With GraphicsBug(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING317></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-316.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-318.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-306.html"><B>Chapter 7 - QuickDraw GX Stream Format</B></A> / <A HREF="GXEnvironment-316.html"><B>Using QuickDraw GX Stream Format</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING317-0></A>
<H2><A NAME=MARKER-9-93></A>Flattening Shapes With GraphicsBug</H2>
 <A NAME=MARKER-2-94></A>GraphicsBug is not just a QuickDraw GX debugging tool. It also allows you to evaluate the data at specific memory locations. You can use GraphicsBug to look at the data describing a QuickDraw GX shape both before and after you invoke the <CODE>GXFlattenShape</CODE> function. This allows you to compare the original data and the stream format after the <CODE>GXFlattenShape</CODE> function has been called. <P>
 For more information concerning GraphicsBug, see the chapter "QuickDraw GX Debugging " in this book.<P>
 You can use GraphicsBug to analyze a data stream by using the following procedure:<P>
<OL>
<LI>Create a QuickDraw GX shape.
<LI>Use the GraphicsBug heap dump <CODE>HD</CODE> command to determine the memory location of the QuickDraw GX shape to be flattened. 
<LI>Copy the memory location of the shape to the clipboard. 
<LI>Type <CODE>FL</CODE> and paste the memory address. The command line should look like this:<P>
</OL>
<PRE>
fl &lt;memory address&gt;
For example: fl 41d788
</PRE>
<OL>
<LI>The command <CODE>FL</CODE> applies <CODE>the</CODE> <CODE>GXFlattenShape</CODE> function to the shape located at the specified memory address. This results in a flattened shape. An annotated version of the QuickDraw GX data stream appears in the GraphicsBug window. GraphicsBug does not alter the graphics memory in any way.<P>
</OL>
 To create a flattened file, you can use the command <P>
<PRE>
fl &lt;memory address&gt; &quot;filename&quot;
</PRE>
 To view the contents of a file, such as a print file generated by printing a document, you can use the command <P>
<PRE>
uf &quot;filename&quot;
</PRE>
 To view the stream associated with a particular page of a document, you can use the command <P>
<PRE>
uf &lt;page number&gt; &quot;filename&quot; 
</PRE>
 Here are some guidelines for using GraphicsBug to analyze data streams:<P>
<UL>
<LI>The data in parentheses in the GraphicsBug window are the compressed byte codes that were generated when the original shape was flattened. The data not in parenthesis is GraphicsBug's brief annotation of the data stream. The annotation usually describes the shape data in its original format. The data in parentheses always relates to the immediately previous data that is not in parentheses.
<LI>Sometimes GraphicsBug will not give the name of the font. This is because GraphicsBug reads only the information contained in memory. GraphicsBug cannot make a call to get the information. If GraphicsBug is used to flatten shapes that were generated by a client call, the required data will always already be in memory and will therefore be available. In this case, the GraphicsBug annotation will always provide the name of the font.
<LI>If part of an object is compressed and another part of the object is not compressed, GraphicsBug reports that there is "no compression."
<LI>Bracketed numbers are references. When <CODE>gxSetData</CODE> or <CODE>gxSetReference</CODE> opcodes are encountered, they can't generate pointers to other objects. They have to generate references. The first object is given reference 1. Subsequent objects are given references 2, 3, and so on.<P>
</UL>
 <A HREF=#MARKER-9-95>Listing 7-2</A> shows an example of the information provided by GraphicsBug for a flattened line. <P>
<B>Listing 7-2  <A NAME=MARKER-9-95></A>A GraphicsBug annotation of the data stream of a flattened shape</B><P>
<PRE>
fl 0c79090
owners            1) 
newObject; size: #2 (03) 
headerType; byte compression (80) 
version == 1.0; flags == fontListFlatten | fontGlyphsFlatten 
(01 03) 
newObject; size: #6 (07) [1] 
fontNameType; no compression (2f) 
(04 02 01 01 00 00) 
</PRE>
 <A HREF=#MARKER-9-95>Listing 7-2</A> shows only the beginning of a data stream. For more examples of GraphicsBug annotation of flattened shape data streams, see the next section. <A NAME=MARKER-2-96></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-316.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-318.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

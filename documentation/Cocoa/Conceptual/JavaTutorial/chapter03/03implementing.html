<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Tutorial for Java Programmers (Legacy): Implementing Currency Converter</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Implementing Currency Converter"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001111-CH206" title="Implementing Currency Converter"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Cocoa-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000495" target="_top">Cocoa</a> &gt; <a href="../chapter01/01introduction.html#//apple_ref/doc/uid/TP30001111-CH203-SW2">Cocoa Tutorial for Java Programmers (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../chapter02/02creating.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../chapter04/04building.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The Java API for Cocoa is deprecated in Mac OS X version 10.4 and later. You should use the Objective-C API instead. For a tutorial on using Cocoa with Objective-C, see <em><a href="../../ObjCTutorial/index.html#//apple_ref/doc/uid/TP40000863" target="_top">Cocoa Application Tutorial</a></em>.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001111-CH206-SW4" title="Implementing Currency Converter"></a><h1><a name="//apple_ref/doc/uid/TP30001111-CH206-TPXREF101" title="Implementing Currency Converter"></a>Implementing Currency Converter</h1><p>In <span class="content_text"><a href="../chapter02/02creating.html#//apple_ref/doc/uid/TP30001111-CH205-SW13">Creating the Currency Converter Project and User Interface</a></span>, you created the skeleton and the interface for the Currency Converter application. This chapter guides you through defining the custom behavior of the application and in the process teaches you the final steps essential to implementing a Cocoa application.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="03implementing.html#//apple_ref/doc/uid/TP30001111-CH206-TPXREF121">Generate the Source Files</a>
				
			<br/>
			
        
			
			
				<a href="03implementing.html#//apple_ref/doc/uid/TP30001111-CH206-TPXREF122">Place the Implementation Files in the Appropriate Group</a>
				
			<br/>
			
        
			
			
				<a href="03implementing.html#//apple_ref/doc/uid/TP30001111-CH206-TPXREF124">Implement the Currency Converter Classes</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001111-CH206-TPXREF121" title="Generate the Source Files"></a><h2>Generate the Source Files</h2><p>To generate the source files for the Currency Converter application:</p><ol class="ol"><li class="li"><p>In the Classes pane in the nib file window, select the ConverterController class.</p></li><li class="li"><p>Choose Classes > Create Files for ConverterController.</p></li><li class="li"><p>Make sure <code>ConverterController.java</code> in “Create files” and Currency Converter in “Insert into targets” are selected.</p><p>If Currency Converter in “Insert into targets” is not selected, you may not have saved the nib file earlier. Save the file and go to step 2.</p><div class="item_figure"><img src = "../art/files_creating.gif" alt = "image: ../art/files_creating.gif" width="470" height="383"></div></li><li class="li"><p>Click Choose.</p></li><li class="li"><p>Repeat steps 1 through 4 for the Converter class.</p></li><li class="li"><p>Save the nib file.</p></li></ol><p>Quit Interface Builder.</p><a name="//apple_ref/doc/uid/TP30001111-CH206-TPXREF122" title="Place the Implementation Files in the Appropriate Group"></a><h2>Place the Implementation Files in the Appropriate Group</h2><p>When Interface Builder adds the <code>.java</code> files to the Currency Converter project, it puts them into the main Groups &amp; Files list. Although this location is perfectly acceptable—the build system doesn’t care where the files are—they are classes of your project and should be organized accordingly. To put these files in the Classes subgroup:</p><ol class="ol"><li class="li"><p>In the project window in Xcode, select the two files in the project group in the Groups &amp; Files list.</p></li><li class="li"><p>Drag the files to the Classes group.</p><div class="item_figure"><img src = "../art/project_group_classes.gif" alt = "image: ../art/project_group_classes.gif" width="699" height="414"></div></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH206-TPXREF124" title="Implement the Currency Converter Classes"></a><h2>Implement the Currency Converter Classes</h2><p>The Converter class needs a method to perform the conversion computation. To add this method to <code>Converter.java</code>:</p><ol class="ol"><li class="li"><p>In the Groups &amp; Files list in the project window, select the Classes group.</p></li><li class="li"><p>In the detail view, double-click <code>Converter.java</code>. Xcode opens the file in an editor window.</p></li><li class="li"><p>Insert the tagged lines in <span class="content_text">Listing 2-1</span> into the <code>Converter.java</code> file.</p></li></ol><a name="//apple_ref/doc/uid/TP30001111-CH206-SW1" title="Listing 2-1Implementation of the Converter class"></a><p class="codesample"><strong>Listing 2-1&nbsp;&nbsp;</strong>Implementation of the Converter class</p><div class="codesample"><table><tr><td scope="row"><pre>/* Converter */<span></span></pre></td></tr><tr><td scope="row"><pre>import com.apple.cocoa.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.apple.cocoa.application.*;<span></span></pre></td></tr><tr><td scope="row"><pre>public class Converter {<span></span></pre></td></tr><tr><td scope="row"><pre>    public float convertDollars(float dollars, float rate) {       // 1<span></span></pre></td></tr><tr><td scope="row"><pre>        return dollars * rate;                                     // 2<span></span></pre></td></tr><tr><td scope="row"><pre>    }                                                              // 3<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The <code>convertDollars</code> method multiplies the two arguments and returns the result.</p><p>Now, update the empty implementation of the <code>convert</code> method in <code>ConverterController.java</code> that Interface Builder generated for you by changing or adding the tagged lines in <span class="content_text">Listing 2-2</span> to the file.</p><a name="//apple_ref/doc/uid/TP30001111-CH206-SW3" title="Listing 2-2Implementation of the ConverterController class"></a><p class="codesample"><strong>Listing 2-2&nbsp;&nbsp;</strong>Implementation of the ConverterController class</p><div class="codesample"><table><tr><td scope="row"><pre>import com.apple.cocoa.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.apple.cocoa.application.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class ConverterController {<span></span></pre></td></tr><tr><td scope="row"><pre>    public NSTextField amountField; /* IBOutlet */<span></span></pre></td></tr><tr><td scope="row"><pre>    public Converter converter; /* IBOutlet */                     // 1<span></span></pre></td></tr><tr><td scope="row"><pre>    public NSTextField dollarField; /* IBOutlet */<span></span></pre></td></tr><tr><td scope="row"><pre>    public NSTextField rateField; /* IBOutlet */<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public void convert(Object sender) { /* IBAction */<span></span></pre></td></tr><tr><td scope="row"><pre>        float dollars, rate, amount;                               // 2<span></span></pre></td></tr><tr><td scope="row"><pre>        dollars = dollarField.floatValue();                        // 3<span></span></pre></td></tr><tr><td scope="row"><pre>        rate = rateField.floatValue();                             // 4<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        amount = converter.convertDollars(dollars, rate);          // 5<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        amountField.setFloatValue(amount);                         // 6<span></span></pre></td></tr><tr><td scope="row"><pre>        rateField.selectText(this);                                // 7<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Notice that line 1 changes the type of the <code>converter</code> instance variable from <code>Object</code> to <code>Converter</code>. This is possible here because the Converter class is now defined in the project (when the ConverterController class was defined in Interface Builder, the Converter class didn’t exist). You could have also done this by explicitly setting the type of the <code>converter</code> outlet to Converter within Interface Builder after defining the Converter class. This is an important step because leaving <code>converter</code>’s type as <code>Object</code>  prevents the program from accessing the methods that the Converter class implements. (The Objective-C language doesn’t have this limitation.)</p><p>The <code>convert</code> method does the following:</p><ul class="ul"><li class="li"><p>Gets the floating-point values typed into the Exchange Rate and Dollars to Convert text fields (lines 3 and 4).</p></li><li class="li"><p>Invokes the <code>convertDollars</code> method and stores the result (line 5).</p></li><li class="li"><p>Uses <code>setFloatValue</code> to write the returned value in the Amount in Other Currency text field (line (line 6).</p></li><li class="li"><p>Invokes <code>selectText</code> on the rate field (line 7). This selects any text in the text field or, if there is no text, places the insertion point so the user can enter text into the text field.</p></li></ul><p>You’ve now completed the implementation of Currency Converter. Are you surprised how little code you had to write, given that your application now has a fully functional converting system and a beautiful Aqua user interface? <span class="content_text"><a href="../chapter04/04building.html#//apple_ref/doc/uid/TP30001111-CH207-SW2">Building Currency Converter</a></span> shows how to build and run the application.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../chapter02/02creating.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../chapter04/04building.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-10-03<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/JavaTutorial/chapter03/03implementing.html%3Fid%3DTP30001111-4.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/JavaTutorial/chapter03/03implementing.html%3Fid%3DTP30001111-4.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/JavaTutorial/chapter03/03implementing.html%3Fid%3DTP30001111-4.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
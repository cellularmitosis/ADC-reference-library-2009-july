<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>CMGetPS2ColorRendering(IM: ACI Ref)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING302></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACIReference-301.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-303.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACIReference-2.html"><B>Advanced Color Imaging Reference</B></A> / <BR><DD><A HREF="ACIReference-154.html"><B>Chapter 3 - ColorSync Manager Reference for Applications and Device Drivers</B></A> / <A HREF="ACIReference-218.html"><B>ColorSync Manager Functions</B></A><BR><DL><DD><A HREF="ACIReference-299.html"><B>PostScript Color-Matching Support Functions</B></A> / <A HREF="ACIReference-282.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING302-0></A>
<H3><A NAME=MARKER-11-462></A>CMGetPS2ColorRendering</H3>
 Obtains the color rendering dictionary (CRD) element data usable as the parameter to the PostScript <CODE>setColorRendering</CODE> operator, which specifies the PostScript color rendering dictionary to use for the following graphics data.<P>
<PRE>
pascal CMError CMGetPS2ColorRendering (
CMProfileRef srcProf, 
CMProfileRef dstProf,
unsigned long flags, 
CMFlattenUPP proc,
void *refCon,
Boolean *preferredCMMnotfound);
</PRE>
<DL>
<DT><CODE>srcProf</CODE>
<DD> A profile reference to a profile that supplies the rendering intent for the CRD.
<DT><CODE>dstProf</CODE>
<DD> A profile reference to a profile from which to extract the CRD data.
<DT><CODE>flags</CODE>
<DD> If the value of <CODE>flags</CODE> is equal to <CODE>cmPS8bit</CODE>, the generated PostScript will utilize 8-bit encoding whenever possible to achieve higher data compaction. If the value of <CODE>flags</CODE> is <I>not</I> equal to <CODE>cmPS8bit</CODE>, the generated data will be 7-bit safe, in either ASCII or ASCII base-85 encoding.
<DT><CODE>proc</CODE>
<DD> A pointer to a callback flatten function to perform the data transfer. For information, see the <CODE>MyColorSyncDataTransfer</CODE> function <A HREF=ACIReference-309.html#MARKER-9-471>(page 3-167)</A>. 
<DT><CODE>refCon</CODE>
<DD> A reference constant for application data passed as a parameter to calls to the <CODE>MyColorSyncDataTransfer</CODE> function. 
<DT><CODE>preferredCMMnotfound</CODE>
<DD> A pointer to a Boolean value indicating whether the preferred CMM was found. On output, has the value <CODE>true</CODE> if the CMM corresponding to profile was not available or if it was unable to perform the function and the default Apple CMM was used. Otherwise, has the value <CODE>false</CODE>.
<DT><I>function result</I>
<DD> A result code of type CMError. See <A HREF=ACIReference-313.html#MARKER-9-479>"Result Codes" (page 3-174)</A> for a list of ColorSync-specific result codes.
</DL>
<A NAME=HEADING302-10></A>
<H5>DISCUSSION</H5>
 The CMGetPS2ColorRendering function obtains CRD data from the profile specified by the <CODE>dstProf</CODE> parameter. To be valid, the parameter must specify an output profile with at most four components. The CMM uses the rendering intent from the profile specified by the <CODE>srcProf</CODE> parameter to determine which of the PostScript tags (<CODE>ps2CR0Tag</CODE>, <CODE>ps2CR1Tag</CODE>, <CODE>ps2CR2Tag</CODE>, or <CODE>ps2CR3Tag</CODE>) to use in creating the CRD. If none of these tags exists in the profile, the CMM creates the CRD from one of the multidimensional table tags (<CODE>cmAToB0</CODE>, <CODE>cmAToB1</CODE>, or <CODE>cmAToB2</CODE>), again chosen according to the rendering intent of the profile specified by the <CODE>srcProf</CODE> parameter.<P>
 This function is dispatched to the CMM component specified by the destination profile. If the designated CMM is not available or the CMM does not implement this function, the ColorSync Manager dispatches this function to the default Apple CMM. <P>
 The CMM obtains the PostScript data and passes it to your low-level data transfer procedure, specified by the <CODE>proc</CODE> parameter. The CMM converts the data into a PostScript stream and calls your procedure as many times as necessary to transfer the data to it. Typically, the low-level data transfer function returns this data to the calling application or device driver to pass to a PostScript printer.<P>
<A NAME=HEADING302-14></A>
<H5>SEE ALSO</H5>
 Before your application or device driver sends the CRD to the printer, it can call the <CODE>CMGetPS2ColorRenderingVMSize</CODE> function <A HREF=ACIReference-303.html#MARKER-9-464>(page 3-163)</A> to determine the virtual memory size of the CRD. <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACIReference-301.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-303.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACIReference-3.html">&copy; Apple Computer, Inc.</A><br>11 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN1137: Disabling Interrupts on the Traditional Mac OS</title>       <meta name="keywords" content="Mac OS 8 disabling interrupts alternatives 68K PowerPC  InterruptDisableLib  DriverServicesLib">    <meta name="Description" content="Technical Note TN1137: This Technical Note describes howto disable interrupts on the traditional Mac OS. It alsoincludes a long discussion of why you should not disableinterrupts, and outlines other system services that you canuse to avoid  disabling interrupts."><meta name="categories" content="Devices"><meta name="week-posted" content="Jul 27, 1998 - Aug 7, 1998"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002976" title="Disabling Interrupts on the Traditional Mac OS"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1137</div>
<div id="pageheadsub">Disabling Interrupts on the Traditional Mac OS</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box -->         <table width="600" cellpadding="0" cellspacing="0" border="0">     <tr><td width=300 valign="top" align=left scope="row">    <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>        </tr>        <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left>       <span id="menutitle">CONTENTS   <br>  <br>       </span>   </td>        </tr>        <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left>       <!-- begin_toc --><p id="menutext"><A HREF = "#Introduction">Introduction</A><BR><BR><A HREF = "#Rationale">Rationale</A><BR><BR><A HREF = "#BackgroundMaterial">BackgroundMaterial</A><BR><BR><A HREF = "#UsingInterruptDisableLib">Using<CODE>InterruptDisableLib</CODE></A><BR><BR><A HREF = "#Avoidance">Avoidance</A><BR><BR><A HREF = "#References">References</A><BR><BR><A HREF = "#Downloads">Downloadables</A></p><!-- end_toc --></td>        </tr>        <tr>   <td width=300 align=left scope="row">       <img src="images/tnmenubottom.gif" alt="" width=300 height=16>   </td>        </tr>    </table></td><td width=300 valign="top" align=left>            <!-- begin_intro_text -->               <P id = "introtext">This Technote         describes how to disable interrupts on the traditional Mac         OS. It also includes a long discussion of why you         <STRONG>should not disable interrupts</STRONG>, and outlines         other system services that you can use to avoid disabling         interrupts.</P>         <P id = "introtext">This Note is directed at developers who are buildingkernel-level software, such as device drivers, orapplication software that makes heavy use of Mac OS"interrupt time." In general, application developers shouldnot need to disable interrupts.</p><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Aug 31 1998]</h3><!-- end_date -->                </TD>             </TR>          </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content -->         <P><A NAME="Introduction"></A></P>                  <H2>Introduction</H2>                  <P>DTS recommends that third-party developers avoid         disabling interrupts on Mac OS, although we recognize that         there are circumstances for which disabling interrupts is         the only solution. The purpose of this Note is to highlight         the possible alternatives to disabling interrupts and -- if         you decide that none of these meet your needs -- to minimize         errors when performing this tricky task. This note should         <B>not</B> be construed as an encouragement to disable         interrupts needlessly.</P>                  <P>The note is broken up into four sections:</P>                  <UL>            <LI>The first section, "Rationale," describes why we take            this position on disabling interrupts.</li>                        <LI>The second section, "Background Material," describes            how the traditional Mac OS interrupt architecture works,            including how interrupts are handled through the emulator            on PowerPC-based computers. If you're familiar with the            680x0 interrupt architecture, you may want to skip this            section.</li>                        <LI>The third section, "Using            <CODE>InterruptDisableLib</CODE>," describes the            interrupt mask manipulation library which accompanies            this note.</li>                        <LI>The final section, "Alternatives," describes the many            alternatives to disabling interrupts that already exist            in the Mac OS. You should read this section to see if            your task is amenable to any of these alternatives.</li>         </UL>      <BR><P><A HREF="#top">Back to top</A></P>         <A NAME="Rationale"></A>                  <H2>Rationale</H2>                  <P>Why is DTS so against disabling interrupts? It is         because:</P>                  <UL>            <LI>it's harmful for the system as a whole;</li>                        <LI>it slows down your code; and</li>                        <LI>it can often be avoided using existing system            functionality.</li>         </UL>                  <P>This section will explore each area in turn.</P>                  <H3>Latency</H3>                  <P>Disabling interrupts increases the interrupt latency of         the system. This is bad for system functions, like Sound         Manager, that require good interrupt latency in order to         operate correctly. While somewhat long in the tooth, DTS         Technote HW 16 <a href="../hw/hw_16.html">"I Was a         Teenaged DMA Junkie"</A> describes some background on this         issue.</P>                  <H3>Performance Penalty</H3>                  <P>As described in the following section, there is no way to         disable interrupts quickly on Mac OS. If you're running         PowerPC code, you have to take a Mixed Mode Manager switch         in order to disable interrupts. If you're building 680x0         software, it's possible that your code will be run on a real         680x0 microprocessor with         virtual memory enabled, in which case the modification of         the SR register is a privileged operation which the system         must emulate for you. Both of these represent a performance         penalty.</P>                  <H3>Avoidability</H3>                  <P>The Mac OS provides many <A HREF = "#Avoidance">low-level         primitives that you can use to avoid disabling         interrupts</A>. While it's true that many of these routines         eventually do disable interrupts, using them saves you some         effort and allows Apple to improve the system "behind your         back."</p><BR><P><A HREF="#top">Back to top</A></P><A NAME="BackgroundMaterial"></A>                  <H2>Background Material</H2>                  <P>This section describes the traditional Mac OS interrupt         architecture, which is modeled directly after the interrupt         architecture on the 680x0         microprocessors. If you're already familiar with the 680x0 interrupt architecture, you may         want to skip this section.</P>         <A NAME="About680x0InterruptLevels"></A> <H3>About 680x0 Interrupt Levels</H3>                  <P>The 680x0 SR register         contains a three bit field that determines the current         interrupt <STRONG>mask</STRONG>, a value from 0 to 7. If the         priority of an incoming interrupt (the interrupt's         <STRONG>level</STRONG>) is greater than the current         interrupt mask, the 680x0 (or         the emulated 680x0, if you're         running on a PowerPC-based computer) will raise the         interrupt mask to that level and service the interrupt.</P>                  <P>The following table summarizes the common uses for the         various interrupt levels:</P>                  <TABLE BORDER=1>            <TR>               <td width=97 align=left>                  <P><B>Interrupt Level</B></p>               </TD><td width=357 align=left>                  <P><B>Typical Usage</B></p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>0</p>               </TD><td width=357 align=left>                  <P>Normal application-level code</p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>1</p>               </TD><td width=357 align=left>                  <P>ADB</p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>2</p>               </TD><td width=357 align=left>                  <P>SCC, NuBus, PCI</p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>3</p>               </TD><td width=357 align=left>                  <P>Built-in Ethernet</p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>4</p>               </TD><td width=357 align=left>                  <P>Logic board DMA channel interrupts</p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>5</p>               </TD><td width=357 align=left>                  <P>na</p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>6</p>               </TD><td width=357 align=left>                  <P>na</p>               </TD></TR>            <TR>               <td width=97 align=left>                  <P ALIGN=CENTER>7</p>               </TD><td width=357 align=left>                  <P>Non-Maskable Interrupts (NMI), usually                  programmer's switch</p>               </TD></TR>         </TABLE>                          <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Important:</B><BR>                  The above table is for illustrative purposes only.                  Unless you have intimate knowledge of the hardware                  on which you're running, you should not explicitly                  use interrupt masks other than 7, which disable all                  maskable interrupts.</P></TD></TR></TABLE></CENTER><BR><BR>                            <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>                  In general, an interrupt mask of <I>X</I> will                  disable all interrupts levels <I>X</I> and below.                  However NMIs are never masked, even when the interrupt mask is <I>7</I>.</P></TD></TR></TABLE></CENTER><BR><BR>                  <P>The 680x0 SR register is a         privileged register; it can only be accessed from code         running in 680x0 supervisor         mode. When you access the SR register from user mode, the         680x0 takes a privilege         violation exception. The traditional Mac OS catches this         exception and emulates the offending instruction. So, apart         from the slow down caused by the exception, you can ignore         this restriction and access the SR register from any 680x0         software.</P>                  <P>For more information on SR register emulation, consult         Technote 1094 <A HREF = "tn1094.html">"Virtual Memory         Application Compatibility"</A>.</P>                  <H3>Interrupt Levels on a PowerPC</H3>                  <P>The raw PowerPC processor only has a single-interrupt-state bit:         interrupts are either masked or they aren't. The interrupt         mask bit is a privileged bit, so you must be running the         native PowerPC processor in native supervisor mode to be         able to access it. However, Mac OS runs all PowerPC code         (except the nanokernel, see the next section) in user mode,         so you cannot access the PowerPC interrupt mask bit from         PowerPC code.</P>                  <H3><A NAME="PPCInterruptArchitecture"></A>Mac OS Interrupt Architecture on PowerPC</H3>                  <P>As described above, the 680x0 and PowerPC microprocessors         have quite different interrupt architectures. One of the key         features of the Mac OS interrupt architecture on         PowerPC-based computers is that it emulates the         680x0 interrupt architecture. This is         necessary because a significant quantity of code (both in         the traditional Mac OS and third party) needs to disable         interrupts, including selectively masking interrupts at a         specific level.</P>                  <P>For example, consider the traditional Mac OS serial         driver. As serial interrupts occur at level 2, the serial         driver interrupt handler knows that, as long as it keeps the         interrupt mask at 2 or higher, no other serial interrupt can         occur. Many drivers use this assumption to provide concurrency         control for their global data structures.</P>         <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>                  The above is an example only. On modern Mac OS                  computers, serial interrupts do not necessarily                  occur at interrupt level 2. See                  <A HREF = "#About680x0InterruptLevels">About 680x0 Interrupt Levels</A>                  for details.</P></TD></TR></TABLE></CENTER><BR><BR>                  <P>So, for compatibility purposes, all interrupts on Power         Macintosh computers are prioritized as if they were on a         680x0-based computer. When         external hardware interrupts the PowerPC processor, the         interrupt is initially serviced by the         <STRONG>nanokernel</STRONG>, which takes one of two actions         depending on the state of the machine:</P>         <OL><LI>If the machine is currently running 680x0 software (by means of the<STRONG>emulator</STRONG>), the nanokernel signals theemulator that an interrupt of a specific priority hasoccurred and returns from the external interrupt handler.The next time the emulator finishes executing a 680x0 instruction (or basic block in the case of the Dynamic Recompiling emulator), itnotices this interrupt. If the interrupt level is notmasked, the emulator services it in the traditionalfashion, by building a 680x0exception frame and calling the 680x0 interrupt handler throughthe vector pointed to be the 680x0 Vector Base Register (VBR).</li>                        <LI>If, on the other hand, the machine is currently            running PowerPC code, it switches back to the emulator            context and takes a special exception to handle the            interrupt.</li>         </OL>                  <P>The emulator executes 680x0         instructions atomically with respect to interrupts, as they         were in the original 680x0         processors. This preserves the atomicity implied in 680x0 interrupt-handling code. The         dynamic recompiling emulator may check for interrupts with         less granularity due to the larger sections of native code         it builds.</P>                  <P>In summary, on a Power Macintosh, all interrupts are         routed by the nanokernel through the emulator for servicing         to achieve faithful emulation of 680x0 interrupts levels and to keep         680x0 instructions indivisible.         </P>                  <H3>Theoretical Background for         <CODE>InterruptDisableLib</CODE></H3>                  <P>The above discussion yields two important consequences.         First, native PowerPC code cannot access the native PowerPC         interrupt mask because it's in a privileged register.         Second, disabling interrupts from 680x0 software will effectively         disable all the interrupts on the machine, because all         interrupts are routed through the emulator. These two facts         combine to yield the following result:</P>                  <BLOCKQUOTE><P><STRONG>The only way to disable interrupts on         Mac OS is to modify the interrupt mask in the 680x0         SR register. This is true even if your program is compiled for          PowerPC.</STRONG></P></BLOCKQUOTE>                  <P>For this reason, code that wants to disable interrupts         must contain two code paths. The 680x0 code path can modify the SR         register directly. The PowerPC code path must use the         "MixedMode.h" routine <CODE>CallUniversalProc</CODE> to call         680x0 code that modifies the SR         register.</P>         <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>                                    In normal circumstances, CFM-68K code acts exactly                  like CFM-PPC code: it must use Mixed Mode Manager                  to call any classic 68K code. However, when                  disabling interrupts, the CFM-68K code can take the                  same code path as the classic 680x0. Unlike CFM-PPC code,                  CFM-68K code can access the 680x0 SR register directly,                  and doing so avoids Mixed Mode Manager switches.</P></TD></TR></TABLE></CENTER><BR><BR><BR><P><A HREF="#top">Back to top</A></P>         <A NAME="UsingInterruptDisableLib"></A>                  <H2>Using <CODE>InterruptDisableLib</CODE></H2>                  <P>A code sample called <CODE>InterruptDisableLib</CODE> is provided for         you as an attachment to this technote. The code uses the         technique discussed in the previous section to provide         easy-to-use control over the 680x0 interrupt mask from classic         68K, PowerPC, and CFM-68K code. The code is structured as a         complete library which you can drop in to your project, with         C and Pascal interfaces, and a C implementation.</P>                  <P>The library was compiled and tested using the Metrowerks         CodeWarrior Pro C and Pascal compilers; however, you should         be able to use the source with any C, C++, or Pascal         compiler. To use it in your project, you need to take the         following steps:</P>                  <OL>            <LI>Add the "InterruptDisableLib.c" file to your program.            If you're using an integrated development environment            that supports C code, you will be able to add it directly            to your project. Otherwise you may need to compile it            separately and add it as an object file.</li>                        <LI>Include the appropriate interface file. For C/C++            programmers, you should include "InterruptDisableLib.h".            Pascal programmers should use "InterruptDisableLib.p".</li>                        <LI>When you need to disable interrupts, do so using:</li>            </OL><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>oldMask = SetInterruptMask(7);&nbsp;// Interrupts are now disabled, do your stuff!&nbsp;(void) SetInterruptMask(oldMask);&nbsp;</pre></TD></TR></TABLE></CENTER><BR><BR>                  <H3>Library Reference</H3>                  <P>The library contains but two entry points:</P>        <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>extern pascal UInt16 GetInterruptMask(void);extern pascal UInt16 SetInterruptMask(UInt16 newMask);</pre></TD></TR></TABLE></CENTER><BR><BR>                                <P>The <CODE>GetInterruptMask</CODE> function returns the         current 680x0 interrupt mask as         a value from 0 to 7. The <CODE>SetInterruptMask</CODE>         function sets the current 680x0         interrupt mask as a value from 0 to 7. It also returns the         prior interrupt mask.</P>                  <H3><A NAME="Gotchas"></A>Gotchas</H3>                  <P>This section contains some important rules. Rules must         sometimes be broken, but you should think very carefully         before breaking these!</P>                  <UL>            <LI>Never never never use the            <CODE>GetInterruptMask</CODE> function to determine            whether your code is running at "interrupt time." There            are numerous ways a Mac OS computer can have interrupts            enabled (an interrupt mask of 0) but still be running at            "interrupt time." These include VBLs, Deferred Tasks, and            PCI Secondary Interrupts.</li>                        <LI>Never lower the interrupt mask inside an interrupt            handler. For example, if your interrupt handler is            entered with the interrupt mask set to 2, never lower the            mask below that. The reason? A hardware driver may have            set the interrupt mask to 1 to prevent it being            reentered. If your interrupt happens at level 2, and then            you lower the interrupt mask to 0, you will allow            interrupts that the other driver is not expecting.</li>                        <LI>Always restore the old interrupt mask. Never assume            that you're running with a particular interrupt mask, and            restore that mask by explicitly setting it. Always save            the old mask and restore it when you're done.</li>         </UL>    <BR><P><A HREF="#top">Back to top</A></P>         <A NAME="Avoidance"></A>                  <H2>Avoidance</H2>                  <P>Before disabling interrupts, you should investigate the         following system services to see if you can use them         instead.</P>                  <H3>OS Utilities</H3>                  <P>The ancestors of all atomic operations on the Mac OS are         the         <a href="http://developer.apple.com/documentation/mac/OSUtilities/OSUtilities-147.html">OS         Utilities</A> routines <CODE>Enqueue</CODE> and         <CODE>Dequeue</CODE>. These routines are available on all         Mac OS computers and provide simple atomic queue         manipulation. They are, however, implemented as 680x0 code, so using them will cause         a Mixed Mode Manager switch.</P>                  <H3>Deferred Tasks</H3>                  <P>If you place all your critical sections in deferred         tasks, you can take advantage of the         <a href="http://developer.apple.com/documentation/mac/Processes/Processes-120.html">Deferred         Task Manager's</A> guarantee that all deferred tasks are         serialized.</P>                  <H3>Open Transport Utilities</H3>                  <P><a href="http://developer.apple.com/dev/opentransport/">Open Transport</A> provides         a plethora of kernel-level services, including the following         interrupt safe constructs:</P>                  <UL>            <LI>LIFO queues</li>                        <LI>atomic bit and arithmetic operations</li>                        <LI>atomic compare and swap</li>                        <LI>Open Transport deferred tasks</li>                        <LI><CODE>OTGate</CODE> (provides critical section            support)</li>                        <LI>memory allocation</li>         </UL>                  <P>All of these OT primitives are implemented completely in         native code on the PowerPC.</P>                  <H3><CODE>DriverServicesLib</CODE></H3>                  <P>If you're writing a PCI device driver,         <A HREF = "ftp://ftp.apple.com/devworld/Technical_Documentation/PCI_Information/Designing_PCI_Cards_-_Driv.sit"><code>DriverServicesLib</code></A>         provides myriad low-level queue manipulation and atomic         operations.</P>                  <P>The <CODE>DriverServicesLib</CODE> queue manipulation routines are         similar to the OS Utilities routines except that they have         fast-code paths that avoid         Mixed Mode Manager switches when adding to an empty queue or         removing from a one-element queue.</P>                  <H3>680x0 Atomic Instructions</H3>                  <P>As described         <A HREF = "#PPCInterruptArchitecture">above</A>, 680x0 instructions remain atomic even         when emulated on the Power Macintosh. Thus, run-of-the-mill         680x0 instructions like         <CODE>addq</CODE> and <CODE>bset</CODE> are all atomic         operations on both 680x0- and         PowerPC-based computers.</P>                  <H3>PowerPC Atomic Instructions</H3>                  <P>The PowerPC processor contains two special instructions,         Load Reserved (<CODE>lwarx</CODE>) and Store Conditional         (<CODE>stwcx</CODE>), which you can use to implement atomic         operations. Most compilers provide access to these         instructions via intrinsic functions.</P>         <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Important:</B><BR>                  DTS recommends that developers avoid using the                  PowerPC Load Reserved and Store Conditional                  instructions. There are two reasons for this.                  Firstly, these instructions are inherently                  processor-specific and reduce the portability of                  your code. Secondly, the behavior of these                  instructions varies between PowerPC CPU types.                  Accommodating all these variations is tricky. These                  instructions do not provide much utility beyond                  that provided by the Open Transport and                  <code>DriverServicesLib</code> atomic routines, and Apple                  ensures that these atomic routines are updated to                  do the right thing in all cases.</p></TD></TR></TABLE></CENTER><BR><BR><BR><P><A HREF="#top">Back to top</A></P>         <A NAME="Summary"></A>                  <H2>Summary</H2>                  <P>DTS recommends that developers avoid disabling         interrupts. Mac OS provides many         <A HREF = "#Avoidance">alternatives</A> to disabling         interrupts. If none of these alternatives meet your needs,         you can disable interrupts by setting the interrupt mask in         the 680x0 SR register. To do         this from PowerPC code, you must call 680x0 software using Mixed Mode         Manager. If you do this, you should use the code from         <A HREF = "#UsingInterruptDisableLib"><CODE>InterruptDisableLib</CODE></A>         to prevent common mistakes, and make sure you read the         <A HREF = "#Gotchas">list of caveats</A> in this Technote.</P><BR><P><A HREF="#top">Back to top</A></P><a name="References"></a><H2>References</H2>            <p>Technote HW 16 <a href="../hw/hw_16.html">"I            Was a Teenaged DMA Junkie"</A></p>                        <p>Technote 1094 <A HREF = "tn1094.html">"Virtual Memory            Application Compatibility"</A> discusses the SR            instruction emulation done by the Virtual Memory Manager            on 680x0-based computers.</p>                        <p><A HREF = "http://www.mot.com/SPS/PowerPC/teksupport/teklibrary/manuals/pem32b.pdf">PowerPC            Microprocessor Family: The Programming Environments For            32-Bit Microprocessors</A> discusses the native PowerPC            interrupt model.</p>                        <p><A HREF = "http://www.mot.com/SPS/HPESD/aesop/68k/68kprm.pdf">M68000            Family Programmer's Reference Manual</A> discusses the            680x0 interrupt model.</p>                        <p><a href="http://developer.apple.com/documentation/mac/PPCSoftware/PPCSoftware-2.html">Inside            Macintosh: PowerPC System Software</A>, Chapter 2            <a href="http://developer.apple.com/documentation/mac/PPCSoftware/PPCSoftware-17.html">Mixed            Mode Manager</A></p>                        <p><a href="http://developer.apple.com/documentation/mac/OSUtilities/OSUtilities-2.html">Inside            Macintosh: Operating System Utilities</A>, Chapter 6            <a href="http://developer.apple.com/documentation/mac/OSUtilities/OSUtilities-147.html">Queue            Utilities</A></p>                        <p><a href="http://developer.apple.com/documentation/mac/Processes/Processes-2.html">Inside            Macintosh: Processes</A>, Chapter 6            <a href="http://developer.apple.com/documentation/mac/Processes/Processes-120.html">Deferred            Task Manager</A></p>                        <p>See the <a href="http://developer.apple.com/dev/opentransport/">Open Transport            web page</A> for references to Open Transport technical            documentation.</p>                        <p><A HREF = "ftp://ftp.apple.com/devworld/Technical_Documentation/PCI_Information/Designing_PCI_Cards_-_Driv.sit">Designing            PCI Cards and Drivers for Power Macintosh Computers</A></p>               <BR><P><A HREF="#top">Back to top</A></P>        <A NAME="Downloads"></A>         <h2>Downloadables</h2>        <center><TABLE BORDER=0 CELLPADDING=3 WIDTH="600">         <TR>             <td width=50 align=left>               <P ALIGN=center><img src="images/acrobatsmall.gif" align=middle alt="Acrobat" width=22 height=23></P>            </TD>            <td align="left">               <p>Acrobat version of this Note (72K).</P>            </TD>            <td width=60 align=left>               <p><A HREF="pdf/tn1137.pdf">Download</A></P>            </TD>          </TR>                              <TR>             <td width=50 align=left>               <P ALIGN=center><img src="images/bluebook.gif" width=22 height=23 align=bottom alt="Bluebook"></P>            </TD>            <td align="left">               <p>Binhexed Routine InterruptDisableLib (179K).</P>            </TD>            <td width=60 align=left>               <p><A HREF = "downloads/tn1137.1.hqx">Download</A></P>            </TD>          </TR>            </table></center><BR><BR><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1137.html%3Fid%3DDTS10002976-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1137.html%3Fid%3DDTS10002976-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1137.html%3Fid%3DDTS10002976-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
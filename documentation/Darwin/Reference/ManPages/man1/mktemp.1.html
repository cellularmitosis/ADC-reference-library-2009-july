<html><head><title>Mac OS X
 Manual Page For mktemp(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/mktemp" title="Mac OS X
 Manual Page for mktemp(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/mktemp"; name=mktemp(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MKTEMP(1)                 BSD General Commands Manual                MKTEMP(1)

<b>NAME</b>
     <b>mktemp</b> -- make temporary file name (unique)

<b>SYNOPSIS</b>
     <b>mktemp</b> [<b>-d</b>] [<b>-q</b>] [<b>-t</b> <u>prefix</u>] [<b>-u</b>] <u>template</u> <u>...</u>
     <b>mktemp</b> [<b>-d</b>] [<b>-q</b>] [<b>-u</b>] <b>-t</b> <u>prefix</u>

<b>DESCRIPTION</b>
     The <b>mktemp</b> utility takes each of the given file name templates and overwrites a portion of it to create
     a file name.  This file name is unique and suitable for use by the application.  The template may be
     any file name with some number of `Xs' appended to it, for example <u>/tmp/temp.XXXX</u>.  The trailing `Xs'
     are replaced with the current process number and/or a unique letter combination.  The number of unique
     file names <b>mktemp</b> can return depends on the number of `Xs' provided; six `Xs' will result in <b>mktemp</b>
     testing roughly 26 ** 6 combinations.

     If <b>mktemp</b> can successfully generate a unique file name, the file is created with mode 0600 (unless the
     <b>-u</b> flag is given) and the filename is printed to standard output.

     If the <b>-t</b> <u>prefix</u> option is given, <b>mktemp</b> will generate an template string based on the <u>prefix</u> and the
     TMPDIR environment variable if set.  The default location if TMPDIR is not set is <u>/tmp</u>.  Care should be
     taken to ensure that it is appropriate to use an environment variable potentially supplied by the user.

     Any number of temporary files may be created in a single invocation, including one based on the inter-<font color="#ffffff" class="whiteout">nal&nbsp;internal</font>
     nal template resulting from the <b>-t</b> flag.

     <b>Mktemp</b> is provided to allow shell scripts to safely use temporary files.  Traditionally, many shell
     scripts take the name of the program with the pid as a suffix and use that as a temporary file name.
     This kind of naming scheme is predictable and the race condition it creates is easy for an attacker to
     win.  A safer, though still inferior, approach is to make a temporary directory using the same naming
     scheme.  While this does allow one to guarantee that a temporary file will not be subverted, it still
     allows a simple denial of service attack.  For these reasons it is suggested that <b>mktemp</b> be used
     instead.

<b>OPTIONS</b>
     The available options are as follows:

     <b>-d</b>      Make a directory instead of a file.

     <b>-q</b>      Fail silently if an error occurs.  This is useful if a script does not want error output to go
             to standard error.

     <b>-t</b> <u>prefix</u>
             Generate a template (using the supplied <u>prefix</u> and TMPDIR if set) to create a filename tem-<font color="#ffffff" class="whiteout">plate.&nbsp;template.</font>
             plate.

     <b>-u</b>      Operate in ``unsafe'' mode.  The temp file will be unlinked before <b>mktemp</b> exits.  This is
             slightly better than <a href="../man3/mktemp.3.html#//apple_ref/doc/man/3/mktemp">mktemp(3)</a> but still introduces a race condition.  Use of this option is
             not encouraged.

<b>DIAGNOSTICS</b>
     The <b>mktemp</b> utility exits 0 on success, and 1 if an error occurs.

<b>EXAMPLES</b>
     The following <a href="sh.1.html#//apple_ref/doc/man/1/sh">sh(1)</a> fragment illustrates a simple use of <b>mktemp</b> where the script should quit if it can-<font color="#ffffff" class="whiteout">not&nbsp;cannot</font>
     not get a safe temporary file.

           tempfoo=`basename $0`
           TMPFILE=`mktemp /tmp/${tempfoo}.XXXXXX` || exit 1
           echo "program output" &gt;&gt; $TMPFILE

     To allow the use of $TMPDIR:

           tempfoo=`basename $0`
           TMPFILE=`mktemp -t ${tempfoo}` || exit 1
           echo "program output" &gt;&gt; $TMPFILE

     In this case, we want the script to catch the error itself.

           tempfoo=`basename $0`
           TMPFILE=`mktemp -q /tmp/${tempfoo}.XXXXXX`
           if [ $? -ne 0 ]; then
                   echo "$0: Can't create temp file, exiting..."
                   exit 1
           fi

<b>SEE</b> <b>ALSO</b>
     <a href="../man3/mkdtemp.3.html#//apple_ref/doc/man/3/mkdtemp">mkdtemp(3)</a>, <a href="../man3/mkstemp.3.html#//apple_ref/doc/man/3/mkstemp">mkstemp(3)</a>, <a href="../man3/mktemp.3.html#//apple_ref/doc/man/3/mktemp">mktemp(3)</a>, <a href="../man7/environ.7.html#//apple_ref/doc/man/7/environ">environ(7)</a>

<b>HISTORY</b>
     A <b>mktemp</b> utility appeared in OpenBSD 2.1.  This implementation was written independently based on the
     OpenBSD man page, and first appeared in FreeBSD 2.2.7.  This man page is taken from OpenBSD

BSD                            November 20, 1996                           BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/mktemp.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/mktemp.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/mktemp.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

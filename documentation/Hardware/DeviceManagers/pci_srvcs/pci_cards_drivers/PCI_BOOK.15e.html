<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> SetProcessorCacheMode11</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.158.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.15d.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.15f.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3833"> </A><A NAME="16060"> </A>SetProcessorCacheMode</H1><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=18920"> </A>OSStatus SetProcessorCacheMode(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AddressSpaceID theAddressSpace,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *theBase,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ByteCount theLength,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProcessorCacheMode theMode);</CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18924"> </A><TT CLASS="cv">--&gt; theAddressSpace</TT><A NAME="&lt;cv&gt;SetProcessorCacheMode&lt;n&gt; function"> </A></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3837"> </A> Address space ID of address space.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18937"> </A><TT CLASS="cv">--&gt; theBase</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3838"> </A>Pointer to the starting address in address space.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18946"> </A><TT CLASS="cv">--&gt; theLength</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3839"> </A>Length of address range, in bytes.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18955"> </A><TT CLASS="cv">--&gt; theMode</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3840"> </A>Cache mode to be set, as defined in <TT CLASS="cv">ProcessorCacheMode</TT>.</DD></DL COMPACT><CODE CLASS="Cv.Code"><A NAME="pgfId=18966"> </A>typedef unsigned long ProcessorCacheMode;<BR>enum {<BR>&nbsp;&nbsp;&nbsp;&nbsp;kProcessorCacheModeDefault&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kProcessorCacheModeInhibited&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 1,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kProcessorCacheModeWriteThrough&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 2,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kProcessorCacheModeCopyBack&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 3<BR>};</CODE><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3842"> </A>DESCRIPTION</H5><P CLASS="T1.Text1"><A NAME="pgfId=3843"> </A>The <TT CLASS="cv">SetProcessorCacheMode</TT> function sets the cache mode of a specified range of address space. The <TT CLASS="cv">theAddressSpace</TT> parameter specifies the address space containing the logical ranges to be set. Current versions of the Mac&nbsp;OS provide only one address space, which it automatically passes to native drivers through <TT CLASS="cv">DoDriverIO</TT>. In general, a driver should always pass the address space it received as a parameter to its <TT CLASS="cv">DoDriverIO</TT> routine in this field. Otherwise, the address space must be specified as <TT CLASS="cv">kCurrentAddressSpaceID</TT>.</P><P CLASS="T1.Text1"><A NAME="pgfId=3844"> </A>In early versions of the PCI-based Mac&nbsp;OS, <TT CLASS="cv">SetProcessorCacheMode</TT> can be used on only one card in any given 256 MB segment of the effective address space above 0x7FFF FFFF. For example, if two PCI cards were configured at addresses 0x8001 2000 and 0x8034 5000, <TT CLASS="cv">SetProcessorCacheMode</TT> could set the cache mode of only one card's address space. However, it could also set the mode of a card at 0xA001 0000, because that card's space lies in a different 256 MB segment of the system's effective address space. This restriction will be relaxed in future versions of Mac&nbsp;OS.</P></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3845"> </A>EXECUTION CONTEXT</H5><P CLASS="T1.Text1"><A NAME="pgfId=3846"> </A><TT CLASS="cv">SetProcessorCacheMode</TT> may be called only from task level, not from secondary or hardware interrupt level.</P></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3860"> </A>RESULT CODES</H5><TABLE border=1 cellpadding=3><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=3849"> </A>noErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3851"> </A>0</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3853"> </A>No error</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=3855"> </A>paramErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3857"> </A>-50</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3859"> </A>Bad parameter</FONT></TD></TR></TABLE></DIV><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.158.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.15d.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.15f.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
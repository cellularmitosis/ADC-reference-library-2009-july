<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Adjusting Speech Attributes (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING197></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-196.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-198.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-187.html"><B>Chapter 4 - Speech Manager</B></A> / <A HREF="Sound-193.html"><B>Using the Speech Manager</B></A></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="../../../referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING197-0></A>
<H2><A NAME=MARKER-9-156></A>Adjusting Speech Attributes</H2>
 <A NAME=MARKER-2-614></A><A NAME=MARKER-9-619></A><A NAME=MARKER-2-199></A>Speech attributes are settings defined for a class of voices or for all voices that affect the quality of speech produced by the Speech Manager. In general, an application should not try to second-guess the developers of a voice or synthesizer by arbitrarily setting a speech attribute. However, there are some cases in which you would want to adjust the rate of speech (how many words per minute are spoken) or the speech pitch (the listener's subjective interpretation of speech's average frequency). <A HREF=#MARKER-9-160>Listing 4-4</A> shows how to adjust the speech pitch and speech rate of a particular channel.<P>
<B>Listing 4-4  <A NAME=MARKER-9-160></A>Changing the speech rate and pitch<A NAME=MARKER-2-161></A></B><P>
<PRE>
FUNCTION MyAdjustSpeechAttributes: OSErr;
VAR
   myErr:      OSErr;
   myErr2:     OSErr;
   myPitch:    Fixed;
   myRate:     Fixed;
   myStr:      Str255;
BEGIN
   myStr := 'This is the old pitch and rate.';
   myErr := NewSpeechChannel(NIL, gChannel);    {allocate a channel}
   IF myErr = noErr THEN
   BEGIN                                        {speak a string}
      myErr := SpeakText(gChannel, @myStr[1], Length(myStr));
      WHILE (SpeechBusy &lt;&gt; 0) DO                {wait for speech to finish}
      BEGIN
      END;
      {Find the current speech pitch.}
      myErr := GetSpeechPitch(gChannel, @myPitch);
      myPitch := myPitch * 2;                         {double the pitch}
      IF myErr = noErr THEN
         myErr := SetSpeechPitch(gChannel, myPitch);  {change the pitch}

      {Find the current speech rate.}
      IF myErr = noErr THEN
         myErr := GetSpeechRate(gChannel, @myRate);
      myRate := myRate * 2;                           {double the rate}
      IF myErr = noErr THEN
         myErr := SetSpeechRate(gChannel, myRate);    {change the rate}
      {Speak a string with new attributes.}
      myStr := 'This is the new pitch and rate.';
      myErr := SpeakText(gChannel, @myStr[1], Length(myStr));
      WHILE (SpeechBusy &lt;&gt; 0) DO          {wait for speech to finish}
      BEGIN
      END;
      {Dispose of the speech channel.}
      IF gChannel &lt;&gt; NIL THEN
         myErr2 := DisposeSpeechChannel(gChannel);
   END;
   IF myErr = noErr THEN
      MyAdjustSpeechAttributes := myErr2
   ELSE
      MyAdjustSpeechAttributes := myErr;
END;
</PRE>
 The <CODE>MyAdjustSpeechAttributes</CODE> function first allocates a speech channel, as demonstrated previously. Then the MyAdjustSpeechAttributes function speaks a string to demonstrate the default speech rate and pitch for the default system voice. After the speech synthesis is finished, MyAdjustSpeechAttributes calls the <CODE>GetSpeechPitch</CODE> function with a valid speech channel and a pointer to a fixed-point value in which the value of the current speech pitch is returned. Then MyAdjustSpeechAttributes doubles the value of the speech pitch by multiplying and passes the new value to the <CODE>SetSpeechPitch</CODE> function.<P>
 MyAdjustSpeechAttributes repeats this sequence to determine the speech rate using the <CODE>GetSpeechRate</CODE> function, doubles the rate, and sets a new speech rate by passing the new rate value to the <CODE>SetSpeechRate</CODE> function. Next, MyAdjustSpeechAttributes calls <CODE>SpeakText</CODE> again to demonstrate the new speech pitch and rate. Creating a loop with the <CODE>SpeechBusy</CODE> function allows the synthesizer to finish speaking its text, and then MyAdjustSpeechAttributes disposes of the active channel.<A NAME=MARKER-2-162></A><P>
 When you set a rate value, each synthesizer may or may not be able to support that exact value. A synthesizer will attempt to set the value you specify, but it may substitute a value that it can support that is the closest it can come to your value. Don't be alarmed if <CODE>GetSpeechRate</CODE> returns a value other than the one you thought you set. The value returned is the closest value to the one set that the synthesizer is capable of reproducing.<A NAME=MARKER-2-163></A><A NAME=MARKER-2-164></A><A NAME=MARKER-2-165></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-196.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-198.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

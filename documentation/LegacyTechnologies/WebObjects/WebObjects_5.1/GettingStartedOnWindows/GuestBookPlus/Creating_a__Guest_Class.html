<HTML>		<HEAD>        <title>Creatinga Custom Guest Class</title>		</HEAD>	<BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Duplicating_Your_Project.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Keeping_Tra_iple_Guests.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF102"></a><h2><font face="Helvetica,Arial,Lucida Grande">Creatinga Custom Guest Class</font></h2><!-- apple_doc: pageHeadingEnd --><p><font face="Times">In  <a sector="mod" href="../GuestBook/iCreating_a__ion_Project.html" target="_top">"Creating a WebObjects Application Project"</a>,you created individual variables to store a guest's name, e-mailaddress, and comments. When keeping track of multiple guests, it's moreuseful to encapsulate all the data for a guest as a single entity.You'll do this by creating a Java class that contains the datafor a single guest.</font></p><ol><p><li>In ProjectBuilder's browser, select Classes in the first column. </li></p><p><li>Choose File &gt; New in Project.<P><img src = "../Art/pbnewclass.gif" alt = "[image: ../Art/pbnewclass.gif]"></li></p><p><li>Type Guest.java as the name of the file. </li></p><p><li>Click OK. <p>The newly created file contains a skeletonfor a class called Guest.</p></li></p><p><li>Modify the code so it looks like this:<pre>// Guest.java created by ...import com.webobjects.foundation.*; import com.webobjects.eocontrol.*;import com.webobjects.eoaccess.* import com.webobjects.appserver.*;public class Guest extends Object {     protected String guestName;     protected String email;     protected String comments;    Guest() {         guestName = "";         email = "";         comments = "";     }}</pre><p>Aclass stores information in its <em>instance variables</em> (alsoreferred to as <em>data members</em>). Here you'redeclaring three instance variables for Guest: <code>guestName</code>, <code>email</code>,and <code>comments</code>. Note thatthese declarations are the same as those that appeared in the codefor <code>Main.java</code> when youadded the three variables using WebObjects Builder. In WebObjects,a component is also a class, specifically a subclass of the class WOComponent.</p><p>Javaclasses require a <em>constructor</em> to initializean instance (or <em>object</em>) of a particular class wheneverone is created. A constructor has the same name as the class andreturns no value.</p><p>Whenever your application createsa new Guest object, its instance variables are initialized withempty strings. (If you prefer, you can use different strings forthese initial values.)</p></li></p><p><li>Save <code>Guest.java</code> bychoosing Save from the File menu. <p>Saving the file lets WebObjectsBuilder know about your newly created Guest class.</p></li></p></ol><a name = "TPXREF103"></a><h3><font face="Helvetica,Arial,Lucida Grande">Bindingthe Class's Instance Variables to the Form Elements</font></h3><p><font face="Times">In  <a sector="mod" href="../GuestBook/iCreating_a__ion_Project.html" target="_top">"Creating a WebObjects Application Project"</a>,you bound the input elements to variables in Main's code. Nowyou'll modify the bindings to use the class you just created.</font></p><ol><p><li>Select WebComponents in the first column of the browser.</li></p><p><li>Double-click <code>Main.wo</code> inthe second column of the browser to open the component in WebObjectsBuilder.</li></p><p><li>Using the Add Key panel, add a variable called <code>currentGuest</code> toyour component and specify its type as Guest. (Note that you cannow choose Guest from the Type combo box.) <p>An entry for <code>currentGuest</code> appearsin the object browser. Notice the "&gt;" symbol to the rightof its name. This means that there is additional data to be displayedin the second column. </p></li></p><p><li>Select <code>currentGuest</code> inthe object browser.<p>The second column displays the three fieldsof <code>currentGuest</code>, as determinedby the definition of its class, Guest.</p></li></p><p><li>Make a connection from <code>guestName</code> inthe second column of the object browser (next to <code>currentGuest</code>)to the Name text field (press the mouse button down on the variable, dragto the element, and release the mouse button), and click <code>value</code> inthe pop-up menu.<p>This time, when the pop-up menu appears, thereis a dot next to the <code>value</code> attribute becauseyou bound it in the first tutorial. </p></li></p><p><li>Bind the other two input elements to <code>currentGuest.email</code> and <code>currentGuest.comments</code>.</li></p></ol><a name = "TPXREF104"></a><h3><font face="Helvetica,Arial,Lucida Grande">Creatinga Table to Display the Output</font></h3><p><font face="Times">In the first chapter, you created three WOString elementsto display the information the guest entered. In this tutorial,you'll create a different type of element, an HTML table, to displaythe information. In later tasks, you'll display data for multipleusers in the table.</font></p><ol><p><li>Delete theWOString elements below the horizontal line in the Main component, becauseyou'll be replacing them with a table. Select the WOString elementsand choose Cut from the Edit menu to delete them.</li></p><p><li>Click the <img src = "../Art/table.gif" alt = "[image: ../Art/table.gif]"> button.<p>TheNew Table panel appears. On the right is the Preview pane, whichdisplays what your table will look like.</p><P><img src = "../Art/tablepanel.gif" alt = "[image: ../Art/tablepanel.gif]"></li></p><p><li>In the Columns field, type 3 and press Tab. A third columnappears in the preview pane.</li></p><p><li>In the Border field, enter 1 and press Tab. A border appearsaround the table in the preview pane.</li></p><p><li>Click "First row cells are header cells (&lt;TH&gt;)".The top row text becomes bold in the preview pane.</li></p><p><li>Click OK. The table appears in your page.</li></p><p><li>Select the upper-left cell of the table by clicking it.</li></p><p><li>Change the text in the cell to Name.</li></p><p><li>Open the Inspector if it is not already open.<p>The Inspectorpresents a number of modifiable settings that apply to the tablecell you've selected.</p><P><img src = "../Art/tableinspector.gif" alt = "[image: ../Art/tableinspector.gif]"></li></p><p><li>Select pixels from the Width pop-up list. Enter 150 in theWidth field and press Tab.<p>The width of the column is set to150 pixels.</p></li></p><p><li>Click in the component window, then press Tab.<p>PressingTab when editing a table causes the contents of the next cell tothe right to be selected (or the first cell of the next row if inthe rightmost column). Pressing Shift-Tab moves in the oppositedirection through the table.</p></li></p><p><li>Repeat steps 8 through 11 for the second and third cells ofthe top row. Label the middle column E-mail and set its width to150 pixels. Label the third column Comments and leave its widthunset. (The comments field takes up the remainder of the width ofthe table.)<br><table border = "0" BGCOLOR="#E6E6E6"><tr><td scope="row"><p><b>Note: </b> Itisn't necessary to adjust the height of the columns-if leftunset, they'll expand at runtime to accommodate the size of thetext being displayed. </p></td></tr></table><br></li></p></ol><a name = "TPXREF105"></a><h3><font face="Helvetica,Arial,Lucida Grande">AddingDynamic Elements to Table Cells</font></h3><p><font face="Times">Tables and cells are static HTML elements, so you can'tbind them to variables or methods. To display dynamic informationin cells, you add dynamic elements, such as WOStrings, to the cells. </font></p><ol><p><li>Select thefirst cell on the second row of the table and clear its contents.</li></p><p><li>Click <img src = "../Art/wostring.gif" alt = "[image: ../Art/wostring.gif]"> toadd a WOString to the cell.</li></p><p><li>Press the Tab key.<p>The contents of the next cell to theright are selected. </p></li></p><p><li>Repeat steps 2 and 3 for the other two cells in the secondrow. </li></p></ol><a name = "TPXREF106"></a><h3><font face="Helvetica,Arial,Lucida Grande">Bindingthe Dynamic Elements in the Table</font></h3><ol><p><li>Make a connectionfrom <code>currentGuest.guestName</code> inthe object browser to the center of the WOString in the first columnto bind its <code>value</code> attribute. </li></p><p><li>Similarly, bind <code>currentGuest.email</code> and <code>currentGuest.comments</code> tothe WOStrings in the second and third columns.<p>The table shouldnow look like this: </p><P><img src = "../Art/tablestrings.gif" alt = "[image: ../Art/tablestrings.gif]"></li></p><p><li>Save the Main component.</li></p></ol><a name = "TPXREF107"></a><h3><font face="Helvetica,Arial,Lucida Grande">Creatingthe Guest Object</font></h3><p><font face="Times">Earlier in this chapter, you created a Java class of typeGuest and wrote a constructor for it. You also added a variableof that class, <code>currentGuest</code>,to the Main component. However, adding a variable to the componentdoesn't actually create a new Guest object; you need to createone explicitly at some point in your code. </font></p><p><font face="Times">You'll create the Guest object in the constructor methodfor your component. This method is called when the component isfirst created; that is, the first time the user accesses the component. </font></p><ol><p><li>Choose ViewSource File from the pull-down list at the bottom of the window.<p>ProjectBuilder becomes active and displays the code for <code>Main.java</code>.Notice the following declaration that was added to your code whenyou added the <code>currentGuest</code> variable:</p><pre>    protected Guest currentGuest; </pre></li></p><p><li>Delete the declarations of <code>guestName</code>, <code>email</code>,and <code>comments</code> since youaren't using them anymore.</li></p><p><li>Add the constructor method inside the Main class definition: <pre>    public Main(WOContext context) {         super(context);         currentGuest = new Guest();     }</pre><p>The firststatement calls the constructor of Main's superclass (which is <code>com.webobjects.appserver.WOComponent</code>).The second statement allocates a new empty Guest object and callsGuest's constructor to initialize its instance variables. </p></li></p><p><li>Save <code>Main.java</code>.</li></p><p><li>Build and run your application.<p>The application shouldwork similarly to that in the first chapter, except that the guest's datais displayed in a table at the bottom of the page instead of asplain text.</p><P><img src = "../Art/plustable.gif" alt = "[image: ../Art/plustable.gif]"></li></p></ol><p><font face="Times">At this point, your application still handles informationfrom a single guest only; in  <a href="Keeping_Tra_iple_Guests.html#TPXREF108" target = "_right">"Keeping Track of Multiple Guests"</a>,you'll modify the application so that it can keep track of multipleguests. </font></p>    <br><a href="Duplicating_Your_Project.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Keeping_Tra_iple_Guests.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<p><font face="Geneva,Helvetica,Arial" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>dspOptions(IM:N)</Title>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING125></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-124.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-126.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-98.html"><B>Chapter 5 - AppleTalk Data Stream Protocol (ADSP) </B></A> / <A HREF="Networking-115.html"><B>ADSP Reference</B></A><BR><DL><DD><A HREF="Networking-122.html"><B>Routines</B></A> / <A HREF="Networking-123.html"><B>Establishing and Terminating an ADSP Connection</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING125-0></A>
<H3>dspOptions <A NAME=MARKER-2-31></A></H3>
 The <CODE>dspOptions</CODE> routine allows you to set values for several parameters that affect <BR>the behavior of the local connection end. You use the <CODE>PBControl</CODE> function to call the <CODE>dspOptions</CODE> routine. See <A HREF=Networking-122.html#MARKER-9-273>"Routines" on page 5-43</A> for a description of the <CODE>PBControl</CODE> function. <P>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The function result. <TR>
<TD>--><TD>ioCRefNum<TD>Integer<TD>The driver reference number.<TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>dspOptions</CODE> for this function.<TR>
<TD>--><TD>ccbRefNum<TD>Integer<TD>The CCB reference number.<TR>
<TD>--><TD>sendBlocking<TD>Integer<TD>The send-blocking threshold.<TR>
<TD>--><TD>badSeqMax<TD>Byte<TD>The threshold to send retransmit advice.<TR>
<TD>--><TD>useCheckSum<TD>Byte<TD>A DDP checksum flag<EM>.<A NAME=MARKER-2-4></A></EM></TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-13-305></A>csCode</CODE>
<DD> The routine selector, always equal to <CODE>dspOption</CODE>s for this routine.<A NAME=MARKER-2-40></A>
<DT><CODE>ccbRefNum</CODE>
<DD> The connection control block (CCB) reference number that the <CODE>dspInit</CODE> routine returned.
<DT><CODE>sendBlocking</CODE>
<DD> The maximum number of bytes that may accumulate in the send queue before ADSP sends a packet to the remote connection end. ADSP sends a packet before the maximum number of bytes accumulates if the period specified by the send timer expires, if <BR>you execute the <CODE>dspWrite</CODE> routine with the flush parameter set <BR>to 1, or if a connection event requires that the local connection end send an acknowledgment packet to the remote connection end.<A NAME=MARKER-2-177></A>
<DT>
<DD> You can set the <CODE>sendBlocking</CODE> parameter to any value from <BR>1 byte to the maximum size of a packet (572 bytes). If you set the <CODE>sendBlocking</CODE> parameter to 0, the current value for this parameter is not changed. The default value for the <CODE>sendBlocking</CODE> parameter is 16 bytes.
<DT><CODE>badSeqMax</CODE>
<DD> The maximum number of out-of-sequence data packets that the local connection end can receive before requesting the remote connection end to retransmit the missing data. Because a connection end does not acknowledge the receipt of a data packet received out of sequence, the retransmit timer of the remote connection end will expire eventually and the connection end will retransmit the data. The <CODE>badSeqMax</CODE> parameter allows you to cause the data to be retransmitted before the retransmit timer of the remote connection end has expired.<A NAME=MARKER-2-39></A>
<DT>
<DD> You can set the <CODE>badSeqMax</CODE> parameter to any value from 1 to 255. <BR>If you set the <CODE>badSeqMax</CODE> parameter to 0, the current value for <BR>this parameter is not changed. The default value for the <CODE>badSeqMax</CODE> parameter is 3.
<DT><CODE>useCheckSum</CODE>
<DD> A flag specifying whether DDP should compute a checksum and include it in each packet that it sends to the remote connection end. Set this parameter to 1 if you want DDP to use checksums or to 0 <BR>if you do not want DDP to use checksums. The default value for <CODE>useCheckSum</CODE> is 0.<A NAME=MARKER-2-68></A>
<DT>
<DD> ADSP cannot include a checksum in a packet that has a short DDP header--that is, a packet being sent over LocalTalk to a remote socket that is on the same cable as the local socket. Note that the <CODE>useCheckSum</CODE> parameter affects only whether ADSP includes a checksum in a packet that it is sending. If ADSP receives a packet that includes a checksum, it validates the checksum regardless of the setting of the <CODE>useCheckSum</CODE> parameter.<A NAME=MARKER-2-313></A> 
</DL>
<A NAME=HEADING125-11></A>
<H5>DESCRIPTION</H5>
 The <CODE>dspOptions</CODE> routine lets you set values that determine the behavior of a connection end, such as the blocking factor, which is maximum number of bytes that should accumulate in the connection end's send queue before ADSP sends a packet to the remote connection end, the maximum number of out-of-sequence packets received by the connection end before ADSP sends a request for the missing packets, and whether or not DDP should use checksums for all the packets that it transmits. You can set the options for any established connection end, whether or not the connection end is open. <P>
<A NAME=HEADING125-13></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>dspOptions</CODE> routine from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>dspOptions</CODE> in the <CODE>csCode</CODE> field of the parameter block. <P>
<A NAME=HEADING125-15></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>errRefNum<TD>-1280<TD>Bad connection reference number</TABLE>
</H5>
<A NAME=HEADING125-16></A>
<H5>SEE ALSO</H5>
 Use the <CODE>dspInit</CODE> routine, described on <A HREF=Networking-124.html#MARKER-9-280>page 5-45</A>, to return the connection control block (CCB) reference number.<A NAME=MARKER-2-314></A> <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-124.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-126.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Creating a Draw Context</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="H2.Heading2"><A NAME="pgfId=5781"> </A>Creating a Draw Context</H1><P CLASS="T1.Text1"><A NAME="pgfId=3906"> </A><A NAME="marker=3905"> </A>A draw context contains information that is specific to a particular type of window system, such as the extent of the pane to draw into and the method of clearing the window. You need to create a draw context and add it to a view in order to render a model. <A HREF="qd3dintroduction.e.htm#36411" CLASS="XRef">Listing&nbsp;7</A> illustrates how to create a draw context for drawing into Macintosh windows.</P><P CLASS="L.Listing"><A NAME="pgfId=3911"> </A>Listing&nbsp;7<A NAME="36411"> </A>Creating a Macintosh draw context</P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=11079"> </A>TQ3DrawContextObject MyNewDrawContext (WindowPtr theWindow)<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3DrawContextObject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myDrawContext;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3DrawContextData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myDrawContextData;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3MacDrawContextData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myMacDrawContextData;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3ColorARGB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myClearColor;<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Set the background color.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;Q3ColorARGB_Set(&amp;myClearColor, 1.0, 0.6, 0.9, 0.9);<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Fill in draw context data.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;myDrawContextData.clearImageMethod = kQ3ClearMethodWithColor;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myDrawContextData.clearImageColor = myClearColor;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myDrawContextData.paneState = kQ3False;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myDrawContextData.maskState = kQ3False;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myDrawContextData.doubleBufferState = kQ3True;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Fill in Macintosh-specific draw context data.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;myMacDrawContextData.drawContextData = myDrawContextData;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myMacDrawContextData.window = (CWindowPtr) theWindow;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myMacDrawContextData.library = kQ3Mac2DLibraryNone;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myMacDrawContextData.viewPort = NULL;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myMacDrawContextData.grafPort = NULL;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;/*Create draw context.*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;myDrawContext = Q3MacDrawContext_New(&amp;myMacDrawContextData);<BR>&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;return (myDrawContext);<BR>}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3915"> </A><A NAME="marker=11081"> </A>Essentially, <TT CLASS="cv">MyNewDrawContext</TT> just fills in the fields of a <TT CLASS="cv">TQ3MacDrawContextData</TT> structure and calls <TT CLASS="cv">Q3MacDrawContext_New</TT> to create a new Macintosh draw context.<A NAME="marker=3916"> </A></P><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
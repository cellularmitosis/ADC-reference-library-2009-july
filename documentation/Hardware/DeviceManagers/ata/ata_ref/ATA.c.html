<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Open Routine2</TITLE></HEAD><BODY BGCOLOR="#ffffff"><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b>	<a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> <a href="../../devicemgrs.html">Device Managers and Drivers</a>	<b>&gt;</b> <a href="../ata.html" target="_top">ATA Devices</a>	<b>&gt;</b> ATA Device Software Guide		</font></td>	</tr>	</table><br><!-- end of path --><DIV><!-- top navigation --><P><A HREF="ATA.b.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.b.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.d.html"><img src="images/next.gif" border="0"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=321"> </A>Open Routine</H3><P CLASS="T0.Text0"><A NAME="pgfId=322"> </A>The <TT CLASS="cv">open</TT> routine is used by the ATA Manager to open the ATA driver on an ATA device. The ATA disk driver requires a physical drive ID from the ATA Manager, and is called by the ATA Manager after the driver is loaded from the drive media. An open call to the ATA disk driver returns a result of <TT CLASS="cv">openErr</TT> if it has not been opened previously, and returns a result of <TT CLASS="cv">noErr</TT> and does not reopen if it is already open. <A NAME="marker=323"> </A><A NAME="marker=324"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1841"> </A>The <TT CLASS="cv">open</TT> routine can be used to get the reference number for the ATA driver. However, the <TT CLASS="cv">OpenDriver</TT> system call, which is documented in Inside Macintosh, is the preferred method for obtaining the driver reference number for a specified driver. </P><P CLASS="T1.Text1"><A NAME="pgfId=325"> </A>When opened, the ATA disk driver initializes itself for the drive specified and registers itself with the ATA Manager. The driver installs itself in the system Unit Table and installs a system Drive Queue entry for each file system partition (volume) found on the drive media. After opening, the ATA disk driver is able to respond to all other Close, Prime, Status, and Control calls.</P><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=351"> </A>RESULT CODES</H5><TABLE BORDER=1 CELLPADDING=3><TR><TD VALIGN="TOP"><P CLASS="MLCv.MLCode"><A NAME="pgfId=328"> </A><TT><CODE>noErr</CODE></TT></P></TD><TD VALIGN="TOP"><FONT CLASS="MLR.RtAlign"><A NAME="pgfId=330"> </A>0</FONT></TD><TD VALIGN="TOP"><FONT CLASS="ML.ColsList"><A NAME="pgfId=332"> </A>Successful completion, no error occurred</FONT></TD></TR><TR><TD VALIGN="TOP"><P CLASS="MLCv.MLCode"><A NAME="pgfId=334"> </A><TT><CODE>openErr</CODE></TT></P></TD><TD VALIGN="TOP"><FONT CLASS="MLR.RtAlign"><A NAME="pgfId=336"> </A>-23</FONT></TD><TD VALIGN="TOP"><FONT CLASS="ML.ColsList"><A NAME="pgfId=338"> </A>Could not open the driver</FONT></TD></TR><TR><TD VALIGN="TOP"><P CLASS="MLCv.MLCode"><A NAME="pgfId=340"> </A><TT><CODE>DRVRCantAllocate</CODE></TT></P></TD><TD VALIGN="TOP"><FONT CLASS="MLR.RtAlign"><A NAME="pgfId=342"> </A>-1793</FONT></TD><TD VALIGN="TOP"><FONT CLASS="ML.ColsList"><A NAME="pgfId=344"> </A>Global memory allocation error</FONT></TD></TR><TR><TD VALIGN="TOP"><P CLASS="MLCv.MLCode"><A NAME="pgfId=346"> </A><TT><CODE>ATABufFail</CODE></TT></P></TD><TD VALIGN="TOP"><FONT CLASS="MLR.RtAlign"><A NAME="pgfId=348"> </A>-1796</FONT></TD><TD VALIGN="TOP"><FONT CLASS="ML.ColsList"><A NAME="pgfId=350"> </A>Device buffer test failed</FONT></TD></TR></TABLE></DIV><HR>&#169 1999 Apple Computer, Inc. &#151; (Last Updated 9 Mar 99) <P><A HREF="ATA.b.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.b.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.d.html"><img src="images/next.gif" border="0"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script></a><!-- end Show/Hide frames --></P><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>OTAckSends</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING114></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-113.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-115.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-97.html"><B>Chapter 21 - Providers Reference</B></A> / <A HREF="NetworkingWOT-101.html"><B>Functions</B></A><BR><DL><DD><A HREF="NetworkingWOT-106.html"><B>Controlling a Provider's Modes of Operation</B></A> / </DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING114-0></A>
<H3><A NAME=MARKER-13-101></A><A NAME=MARKER-9-102></A>OTAckSends</H3>
 Specifies that a provider not make an internal copy of data being sent. <P>
<A NAME=HEADING114-2></A>
<H5>C INTERFACE </H5>
<PRE>
<A NAME=MARKER-0-95></A>OSStatus OTAckSends(ProviderRef ref);
</PRE>
<A NAME=HEADING114-4></A>
<H5>C++ INTERFACE </H5>
<PRE>
<A NAME=MARKER-12-104></A>OSStatus TProvider::AckSends();
</PRE>
<A NAME=HEADING114-6></A>
<H5>PARAMETERS </H5>
<DL>
<DT><CODE>ref</CODE>
<DD> The provider reference of the provider that is sending data.
<DT><I>function result</I>
<DD> An error code. See <A HREF=NetworkingWOT-479.html#MARKER-9-72>Appendix B</A> for more information.
</DL>
<A NAME=HEADING114-9></A>
<H5>DISCUSSION</H5>
 By default, providers make an internal copy of data before sending it and they do not acknowledge sends. If you use the <CODE>OTAckSends</CODE> function to specify that the provider acknowledge sends and you call a function that sends data, the provider does not copy the data before sending it. Instead, it reads data directly from your buffer while sending. For this reason, you must not change the contents of your buffer until the provider is no longer using it. The provider lets you know that it has finished using the buffer by calling your notifier function and passing the <CODE>T_MEMORYRELEASED</CODE> event code for the <CODE>code</CODE> parameter, a pointer to the buffer that was sent in the <CODE>cookie</CODE> parameter, and the size of the buffer in the <CODE>result</CODE> parameter. The <CODE>T_MEMORYRELEASED</CODE> event is not serialized with other notification events and will re-enter your notifier function.<P>
 If you have not installed a notifier function for the provider, this function returns the <CODE>kOTAccessErr</CODE> result. If a send is currently outstanding on the provider, from a call to the <CODE>OTSnd</CODE>, <CODE>OTSndUData</CODE>, <CODE>OTSndUReply</CODE>, <CODE>OTSndURequest</CODE>, <CODE>OTSndReply</CODE>, or <CODE>OTSndRequest</CODE> functions, the <CODE>OTAckSends</CODE> function returns a <CODE>kOTChangeStateErr</CODE> message.<P>
 Although you must wait for a <CODE>T_MEMORYRELEASED</CODE> event before you touch the buffer containing the data being sent, you do not have to wait for a <CODE>T_MEMORYRELEASED</CODE> event to send more data. You can continue to process data normally, sending data until you get a flow error and then resuming sends when you receive the <CODE>T_GODATA</CODE> event. <P>
<DL>
<DT><B>WARNING</B>
<DD>You need to be sure there are no outstanding <CODE>T_MEMORYRELEASED</CODE> events for a provider before you close the provider. Otherwise, Open Transport attempts to deliver the event to a provider that no longer exists, with unpredictable results, such as crashing the system.   <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 To find out a provider's current send-acknowledgment mode, call the <A HREF=NetworkingWOT-116.html#MARKER-9-110><CODE>OTIsAckingSends</CODE></A> function.<P>
 The send-acknowledgment mode of a provider is ignored by mapper providers, AppleTalk service providers, and TCP/IP service providers.<P>
<A NAME=HEADING114-16></A>
<H5>COMPLETION EVENT CODES</H5>
 <CODE>T_MEMORYRELEASED</CODE><P>
<A NAME=HEADING114-18></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Because of the complexity of handling flow control, Open Transport performance suffers when the acknowledge sends option is used with noncontiguous data, such as when you pass an <CODE>OTData</CODE> structure to the <CODE>OTSnd</CODE> function. It is best to use this option with contiguous data or with <CODE>OTData</CODE> structures whose last element is large.<P>
<A NAME=HEADING114-20></A>
<H5>SEE ALSO</H5>
 The <A HREF=NetworkingWOT-115.html#MARKER-9-106><CODE>OTDontAckSends</CODE></A> function.<P>
 <A HREF=NetworkingWOT-25.html#MARKER-9-67>"Setting a Provider's Send-Acknowledgment Status"</A>.<P>
 See the chapter <A HREF=NetworkingWOT-46.html#MARKER-0-46>"Advanced Topics"</A> for more information about acknowledging sends.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-113.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-115.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

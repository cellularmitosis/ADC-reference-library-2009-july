<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Writing a Sound Input Device Driver (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.a.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.6.htm">Section top</A> | <A target="doc" HREF="imsoundinput.c.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=644"> </A><A NAME="26409"> </A>Writing a Sound Input Device Driver<A NAME="marker=349"> </A></H1><P CLASS="T0.Text0"><A NAME="pgfId=614"> </A><A NAME="marker=364"> </A>This section describes what you need to do when you do write a sound input device driver. If you write a sound input device driver, you should set the <TT CLASS="cv">drvrFlags</TT> field of the sound input device driver's header to indicate that the driver can handle Status, Control, and Read requests. The driver header should also indicate that the driver needs to be locked.<A NAME="marker=80"> </A></P><P CLASS="I.Important"><A NAME="pgfId=1187"> </A>You don't need to write a device driver to use sound input capabilities. </P><P CLASS="T1.Text1"><A NAME="pgfId=1120"> </A>After you create a device driver, you must write an extension that installs it. Before your&nbsp;extension installs the driver, it should pass the <TT CLASS="cv">Gestalt</TT> function the <TT CLASS="cv">gestaltSoundAttr</TT> attribute selector and inspect the <TT CLASS="cv">gestaltSoundIOMgrPresent</TT> bit to determine if the sound input routines are available. If so, the extension should install the sound input device driver into the unit table just as any other driver must be&nbsp;installed.<A NAME="marker=81"> </A><A NAME="marker=82"> </A><A NAME="marker=83"> </A><A NAME="marker=86"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1121"> </A>After installing the driver, the extension must then make an Open request to the driver, so that the driver can perform any necessary initialization. In particular, the driver might set the <TT CLASS="cv">dCtlStorage</TT> field of the device control entry to a pointer or a handle to a block in the system heap containing all of the variables that it might need. Finally, the device driver signs into the Sound Input Manager by calling the <TT CLASS="cv">SPBSignInDevice</TT> function.<A NAME="marker=87"> </A><A NAME="marker=92"> </A><A NAME="marker=93"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=620"> </A>Once signed in, a driver can receive Status, Control, and Read requests from the Sound&nbsp;Input Manager. On entry, the A0 register contains a pointer to a standard Device&nbsp;Manager parameter block, and the A1 register contains a pointer to the device&nbsp;control entry. For more information on using registers in a device driver, see&nbsp;<I CLASS="italics">Inside&nbsp;Macintosh: Devices</I>.<A NAME="marker=330"> </A></P><H2 CLASS="H3.Heading3TOC"><A target="doc" HREF="imsoundinput.c.htm#pgfId=1123" CLASS="Hypertext">Responding to Status and Control Requests</A></H2><H2 CLASS="H3.Heading3TOC"><A target="doc" HREF="imsoundinput.d.htm#pgfId=1122" CLASS="Hypertext">Responding to Read Requests</A></H2><H2 CLASS="H3.Heading3TOC"><A target="doc" HREF="imsoundinput.e.htm#pgfId=1751" CLASS="Hypertext">Supporting Stereo Recording</A></H2><H2 CLASS="H3.Heading3TOC"><A target="doc" HREF="imsoundinput.f.htm#pgfId=1087" CLASS="Hypertext">Supporting Continuous Recording</A></H2><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.a.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.6.htm">Section top</A> | <A target="doc" HREF="imsoundinput.c.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
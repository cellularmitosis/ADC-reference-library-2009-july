<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Java Client Programming Guide (Legacy): Using Custom Views in Nib Files</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using Custom Views in Nib Files"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001017-CH315" title="Using Custom Views in Nib Files"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30001017-CH297-TP1">WebObjects Java Client Programming Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../T7MixingStaticAndDyn/T7MixingStaticAndDyn.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../T11ImageViews/T11ImageViews.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001017-CH315-TP1" title="Using Custom Views in Nib Files"></a><h1>Using Custom Views in Nib Files</h1><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_838"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_839"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_840"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_841"></a><p>The Java Client interfaces you can build in Interface Builder support only a subset of all the standard Swing components. However, by using custom views in interface files, you can use any Swing component or custom components you write. This chapter describes how to use custom views in interface files and then provides some examples of custom view components.</p><p>You can use the nib file you built in <span class="content_text"><a href="../NonDirectJavaClient/NonDirectJavaClient.html#//apple_ref/doc/uid/TP30001017-CH304-TP1">“Nondirect Java Client Development”</a></span> for the exercises in this chapter.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="T8CustomViews.html#//apple_ref/doc/uid/TP30001017-CH315-CEGEDJJH">Custom Views</a>
				
			<br/>
			
        
			
			
				<a href="T8CustomViews.html#//apple_ref/doc/uid/TP30001017-CH315-TPXREF36">Make EOImageView Accept Clicks</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001017-CH315-CEGEDJJH" title="Custom Views"></a><h2>Custom Views</h2><p><strong>Problem:</strong> You want to add an unsupported view in an interface file such as <code>javax.swing.JProgressBar</code>.</p><p><strong>Solution:</strong> Place a custom view object and connect it to an outlet in File’s Owner.</p><p>In an Interface Builder file, place a custom view object in the main window. You can find this object in the Containers palette<a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_842"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_843"></a>. <span class="content_text">Figure 18-1</span> shows this palette and a custom view placed in the main window.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGHFEEG" title="Figure 18-1Custom view object in window"></a><p><strong>Figure 18-1&nbsp;&nbsp;</strong>Custom view object in window</p><img src = "../Art/placecustomview.gif" alt = "Custom view object in window" width="546" height="285"></div><br/><p>Next, you need to assign the custom view to an NSView subclass. Before you can do this, you need to create an NSView subclass. Switch to the Classes pane in the nib file window and enter <code>NSView</code> in the Search field as shown in <span class="content_text">Figure 18-2</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGCIEHH" title="Figure 18-2Find NSView in class hierarchy"></a><p><strong>Figure 18-2&nbsp;&nbsp;</strong>Find NSView in class hierarchy</p><img src = "../Art/searchnsview.gif" alt = "Find NSView in class hierarchy" width="359" height="194"></div><br/><p>Select NSView if it is not already selected and press Return to subclass it. In the Info window, select Java as the language for the subclass. Then, provide a fully qualified name for the subclass. If the view represents a Swing class such as JProgressBar, use <code>javax.swing.JProgressBar</code> as shown in <span class="content_text">Figure 18-3</span>. If the view represents a custom Swing subclass, specify the fully qualified name of that subclass.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGCIJFJ" title="Figure 18-3Name the custom view class"></a><p><strong>Figure 18-3&nbsp;&nbsp;</strong>Name the custom view class</p><img src = "../Art/namecustomview2.gif" alt = "Name the custom view class" width="598" height="306"></div><br/><p>Next, you need to associate the custom view you placed in the window with the new NSView subclass. Select the custom view widget in the main window and bring up the Attributes pane of the Info window. Select <code>javax.swing.JProgressBar</code>, as shown in <span class="content_text">Figure 18-4</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGCBHFD" title="Figure 18-4Associate custom view with NSView subclass"></a><p><strong>Figure 18-4&nbsp;&nbsp;</strong>Associate custom view with NSView subclass</p><img src = "../Art/selectnsviewsubclass.gif" alt = "Associate custom view with NSView subclass" width="301" height="323"></div><br/><p>The name in the custom view should then change to the name of the new class, as shown in <span class="content_text">Figure 18-5</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGFABCA" title="Figure 18-5Custom view as NSView subclass"></a><p><strong>Figure 18-5&nbsp;&nbsp;</strong>Custom view as NSView subclass</p><img src = "../Art/customviewnamechange.gif" alt = "Custom view as NSView subclass" width="377" height="268"></div><br/><p>Now you need to add an outlet to the interface file’s File’s Owner<a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_844"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_845"></a> object for the custom view. This gives you programmatic access to the widget in the nib file’s controller class, which allows you to query and change the widget’s attributes. In the Classes pane of the nib file window, view the class hierarchy vertically and disclose the list starting with <code>java.lang.Object</code> as far as you can, as shown in <span class="content_text">Figure 18-6</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGFAAAI" title="Figure 18-6File&acirc;&#128;&#153;s Owner class"></a><p><strong>Figure 18-6&nbsp;&nbsp;</strong>File’s Owner class</p><img src = "../Art/filesownerclass.gif" alt = "File’s Owner class" width="361" height="200"></div><br/><p>Select the last class in the hierarchy and bring up the Info window. Add an outlet<a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_846"></a> to the class called <code>customViewOutlet</code>, as shown in <span class="content_text">Figure 18-7</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGGHFJE" title="Figure 18-7Add outlet to interface file"></a><p><strong>Figure 18-7&nbsp;&nbsp;</strong>Add outlet to interface file</p><img src = "../Art/addoutlet.gif" alt = "Add outlet to interface file" width="321" height="343"></div><br/><p>Next, you need to connect<a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_847"></a> the custom view to the outlet you just created. Switch to the Instances pane of the nib file window and Control-drag from File’s Owner to the custom view in the main window as shown in <span class="content_text">Figure 18-8</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGFDJFH" title="Figure 18-8Connect new outlet to custom view"></a><p><strong>Figure 18-8&nbsp;&nbsp;</strong>Connect new outlet to custom view</p><img src = "../Art/connectcustomview.gif" alt = "Connect new outlet to custom view" width="326" height="467"></div><br/><p>Then in the Connections pane of the Info window, select <code>customViewOutlet</code> and click Connect. The Connections pane of the Info window for File’s Owner should now appear as shown in <span class="content_text">Figure 18-9</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30001017-CH315-CEGGGCHB" title="Figure 18-9File&acirc;&#128;&#153;s Owner attributes"></a><p><strong>Figure 18-9&nbsp;&nbsp;</strong>File’s Owner attributes</p><img src = "../Art/showinfoafterconnection.gif" alt = "File’s Owner attributes" width="279" height="299"></div><br/><p>Save the interface file and open its controller class (<code>.java</code> file) in Project Builder. Add an instance variable<a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_848"></a> for the outlet you added:</p><div class="codesample"><table><tr><td scope="row"><pre>public JProgressBar customViewOutlet;<span></span></pre></td></tr></table></div><p>You now have a JProgressBar widget in your interface file. You can set its value by invoking <code>customViewOutlet.setValue(int value)</code> in the controller class. However, don’t attempt to invoke methods on the widget in the interface controller’s constructors as it may not be initialized at that point. Rather, override <code>controllerDidLoadArchive</code><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_849"></a> as described<a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_850"></a> in <span class="content_text"><a href="../T11ImageViews/T11ImageViews.html#//apple_ref/doc/uid/TP30001017-CH316-BIHIFADB">“Loading the Image”</a></span> or check to see if the component is initialized by invoking <code>isComponentPrepared</code><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_851"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_852"></a>.</p><a name="//apple_ref/doc/uid/TP30001017-CH315-TPXREF36" title="Make EOImageView Accept Clicks"></a><h2>Make EOImageView Accept Clicks</h2><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_853"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_854"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_855"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_856"></a><a name="//apple_ref/doc/uid/TP30001017-CH315-DontLinkElementID_857"></a><p>You can apply what you learned in the last section to extend the power of the user interface components supplied by the <code>com.webobjects.eointerface.swing</code> package. This section describes how to extend the EOImageView class to support mouse clicks.</p><p><strong>Problem:</strong> The class <code>com.webobjects.eointerface.swing.EOImageView</code> does not support mouse clicks.</p><p><strong>Solution:</strong> Subclass EOImageView and provide custom view outlets in an Interface Builder nib file or write a rule to use the subclass in certain controllers.</p><p>To make an EOImageView object respond to mouse clicks, you need to subclass MouseAdaptor within an EOImageView subclass. Add a file to your project named <code>CustomImageViewController</code>. Paste this code into it:</p><div class="codesample"><table><tr><td scope="row"><pre>package com.mycompany.myapp;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>import java.awt.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import javax.swing.event.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eointerface.swing.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.eogeneration.*;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class CustomImageViewController extends EOImageView {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public CustomImageViewController() {<span></span></pre></td></tr><tr><td scope="row"><pre>        super();<span></span></pre></td></tr><tr><td scope="row"><pre>        this.addMouseListener(new OpenRecord());<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    class OpenRecord extends MouseInputAdapter {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        public void mouseClicked(MouseEvent e) {<span></span></pre></td></tr><tr><td scope="row"><pre>            NSLog.out.appendln("image clicked");<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>To use this custom class in an interface file, you subclass NSView as described in <span class="content_text"><a href="T8CustomViews.html#//apple_ref/doc/uid/TP30001017-CH315-CEGEDJJH">“Custom Views”</a></span> and name the subclass <code>com.mycompany.myapp.CustomImageViewController</code>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../T7MixingStaticAndDyn/T7MixingStaticAndDyn.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../T11ImageViews/T11ImageViews.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-08-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/DesktopApplications/T8CustomViews/T8CustomViews.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/DesktopApplications/T8CustomViews/T8CustomViews.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/DesktopApplications/T8CustomViews/T8CustomViews.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
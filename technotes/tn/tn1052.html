<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 03-24-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN1052: QuickDraw GX ConicLibrary.c in Detail: Description and Derivations</title>    <meta name="keywords" content="Mac OS 8 QuickDraw GX ConicLibrary.c lamdba curves DrawConic NewConic">    <meta name="Description" content="Technical Note TN1052:  This Technical Note discusses ConicLibrary.cfrom the QuickDraw GX Libraries. This Note is intended forMacintosh QuickDraw GX developers who want to approximateellipses and hyperbolas with paths. These, with parabolas(gxCurves), form the familty of curves called conics."><meta name="categories" content="QuickDraw GX"><meta name="week-posted" content="May 27, 1996 - Jun 7, 1996"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002893" title="QuickDraw GX ConicLibrary.c in Detail: Description and Derivations"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/index.html" target="_blank">Reference Library > Graphics & Imaging</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1052</div>
<div id="pageheadsub">QuickDraw GX ConicLibrary.c in Detail: Description and Derivations</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"> <!-- begin_header_box --> <table width="600" cellpadding="0" cellspacing="0" border="0">	<tr>		<td width=300 valign="top" align=left scope="row">			<table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>				</tr>				<tr bgcolor="#e6e6e6">					<td background="images/tnmenubody.gif" width=300 align=left><span id="menutitle">							CONTENTS     <BR>    <BR>						</span>					</td>				</tr>				<tr bgcolor="#e6e6e6">					<td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->						<p id="menutext"><A HREF = "#RTFToC1">About the GX Libraries</a><br><br><A HREF = "#RTFToC2">Using ConicLibrary.c</a><br><br><A HREF = "#RTFToC3">The Theory behind ConicLibrary.c</a><br><br><A HREF = "#Summary">Summary</a><br><br><A HREF = "#References">References</a><br><br><A HREF="#Downloads">Downloadables</A></p>			<!-- end_toc --> 								</td>				</tr>				<tr>					<td width=300 align=left scope="row">						<img src="images/tnmenubottom.gif" alt="" width=300 height=16>					</td>				</tr>			</table>		</td>		<td width=300 valign="top" align=left>			<!-- begin_intro_text -->     <CENTER><TABLE BORDER=0 WIDTH=250><TR><td bgcolor="#E6E6E6" align=left>   <P id = "introtext"><B>Important for all Apple Printing and Graphics Developers:</B></p><P id = "introtext">The information in this Technote is still relevant up to and including <A HREF = "tn1090.html">Mac OS 7.6</A> with QuickDraw GX 1.1.5. Beginning with the release of Mac OS 8.0, however, Apple plans to deliver a system which incorporates QuickDraw GX graphics and typography <B>only</B>. QuickDraw GX printer drivers and GX printing extensions will <B>not</B> be supported in Mac OS 8.0 or in future Mac OS releases. Apple's goal is to simplify the user experience of printing by unifying the Macintosh graphic and printing architectures and standardizing on the classic PrintingManager. </P>        </TD></TR></TABLE></CENTER>    <P id = "introtext">This Technote discusses ConicLibrary.c from the QuickDraw GX Libraries.</p><P id = "introtext">This Note is intended for Macintosh QuickDraw GX developers who want toapproximate ellipses and hyperbolas with paths. These, with parabolas(<code>gxCurves</code>), form the family of curves called conics.</p><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [June 1 1996]</h3><!-- end_date -->                </TD>             </TR>          </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center>          <BR><BR> <!-- begin_content --><a name = "RTFToC1"></a><h2>About the GX Libraries</h2><P>For better or worse, the development of QuickDraw GX took seven years fromconception to initial release. During that time, there were many requests forfeature enhancements and interface improvements that, if implemented, mighthave taken seven more years to complete. As it turns out, some of theseenhancements could readily be built on existing services, but there was no timeto test or document these services with the rigor required to make them fullypart of the released system.</p><P>The GX Libraries fill this gap by providing services built on top of the restof QuickDraw GX in source form. This Technote and others document theseservices. Since GX libraries are provided as source, it is reasonable fordevelopers to modify them to meet their specific needs. Care was taken for thelibraries not to depend on the implementation details of QuickDraw GX so thatfuture versions should not invalidate them, in original or modified form.</p><P>The libraries are likely to evolve to take advantage of improved algorithms, aswell as new Macintosh or QuickDraw GX services. If you modify one for yourapplication's specific needs, it's worth occasionally reviewing the GX libraryprovided by Apple to stay synchronized with any improvements.</p><h3>What is in ConicLibrary.c?</h3><P>The GX Library, ConicLibrary.c, generates conics, a family of curves thatinclude circles, ellipses, parabolas and hyperbolas. It was written by MichaelReed (the guy behind GX Fonts and TrueType) from a math paper derived by RobertJohnson, the GX resident mathematics professor.</p><P><A HREF="#top">Back to top</A></P><a name = "RTFToC2"></a><h2>Using ConicLibrary.c</h2><h3>A Conic is a gxCurve, Almost</h3><P>ConicLibrary.c uses the conic struct: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>struct conic {    gxPoint a;    gxPoint b;    gxPoint c;    Fixed lambda;};</pre>	</TD></TR></TABLE></CENTER><P>This is nearly the same as the <code>gxCurve</code> struct; it differs only by theadditional lambda parameter. (Mike was a math major, too.) The lambda specifiesthe curvature. If the curvature is equal to one, the conic is a parabola, andis identical to a <code>gxCurve</code> (also known as a quadratic B&eacute;zier) with thesame three points, as illustrated in Figure 1.</p><P>In Figure 1, as lambda decreases, the curve approaches the line frompoint a to point c. All of these curves are elliptical arcs. When lambda hitszero, the curve has become a line from point a to point c.</p><P>As lambda increases, the curve approaches point b. These curves are hyperbolas.Once lambda gets big enough, the curve approximates two line segments: one frompoint a to point b, and another from point b to point c.</p><P align = center><img src="images/tn1052_003.gif" alt="" width=181 height=132><BR><b>Figure 1: </b> A Quadratic Rational Spline with Vertices (a,b,c)</p><P>One reasonable use of the<code>ConicLibrary</code> provides a graphics application with a means to change the amountof curvature defined by a quadratic B&eacute;zier, a segment of a <code>gxPath</code>. Toincrease the curvature, increase lambda.</p><h3>Conic Functions</h3><P>Before we get into what the various values for lambda do, let's take a look atthe conic library functions.</p><h4>NewConic</h4><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>gxShape NewConic(const conic *curve);</pre>	</TD></TR></TABLE></CENTER><P><code>NewConic</code> creates a path which approximates the conic. It subdivides theoriginal conic into a pair of conics, recursively, until the <code>gxCurve</code> describedby the smaller conic has a sufficiently small error. The error is set by thedefault path's shape error, which is initially 1.0. You can set it to a largeror smaller error with: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>GXSetShapeCurveError(GXGetDefaultShape(gxPathType), errorValue); </pre>	</TD></TR></TABLE></CENTER>  <h4>DrawConic</h4>  <CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>void DrawConic(const conic *curve, gxShapeFill fill);</pre>	</TD></TR></TABLE></CENTER><P><code>DrawConic</code> creates the path shape, draws it with the specified fill, and throwsit away. The fill can be any <code>gxShapeFill</code> value that works with a path;<code>gxOpenFrameFill</code> is the most common choice.</p><h4>SetConic</h4><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>void SetConic(gxShape target, const conic *curve);</pre>	</TD></TR></TABLE></CENTER><P>This replaces the geometry in an existing shape with a path that approximatesthe conic.</p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>It is not necessary to understand lambda in mathematical terms. Its usefulness for ConicLibrary.c can be summarized by the following: increasing lambda increases curvature, while decreasing lambda decreases the curvature.</p></TD></TR></TABLE></CENTER><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR> These functions are orthogonal to other GX Graphics primitives, such as points,lines, polygons and paths, and other libraries, such as cubics, arcs, ovals androunded rectangles. You can rely on functions of the form NewX, SetX and DrawXfor any geometry supported by QuickDraw GX.</p></TD></TR></TABLE></CENTER><BR><P><A HREF="#top">Back to top</A></P><a name = "RTFToC3"></a><h2>The Theory behind ConicLibrary.c</h2><P>In the discussion that follows, several liberties are taken. Since the readeris assumed to be a programmer, not a mathematician, most of the equations thatfollow are in C++ rather than in mathematical notation. The non-existentstructs <code>fPoint</code>, <code>fCurve</code> and <code>fConic</code> are introduced, to make the code easier toread. They are defined as: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>struct fPoint {    float x;    float y;};struct fCurve {    fPoint first;    fPoint control;    fPoint last;};struct fConic {    fPoint a;    fPoint b;    fPoint c;    float lambda;};</pre>	</TD></TR></TABLE></CENTER><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR> My apologies to the mathematicians of the world for bastardizing concepts, tothe C programmers of the world for using C++, and to the GX Engineers for usingnot using Fixed.</p></TD></TR></TABLE></CENTER><BR><P>There are (at least) two ways of describing conics. First, the ones that use x and y in equations you vaguely remember from high school: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>circle:        x<sup>2</sup> + y<sup>2</sup> = 0parabola:     x = y<sup>2</sup>hyperbola:    x<sup>2</sup> -  y<sup>2</sup> = 1ellipse:    x<sup>2</sup>/a + y<sup>2</sup>/b = 0</pre>	</TD></TR></TABLE></CENTER><P>We're going to mostly ignore these, except to note that they can all begeneralized by: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>conic:    ax<sup>2</sup> + bx + cy<sup>2</sup> + dy + exy + f = 0</pre>	</TD></TR></TABLE></CENTER><P>This looks suspiciously like the equation describing a parabola (with the right values of a, b, c, d, e and f) != a <code>gxCurve</code>; and it is. Let's see how.</p><h3>Describing a Curve</h3><P>The general conic equation asserts that any equation of order 2 in x and ydescribes a conic. A conic, in turn, is described as a plane section of a pairof cones, stacked point to point. Slicing these cones reveals the familiarcircles, ellipses, parabolas and hyperbolas.</p><P>There's another  way to describe a parabola: as a parametric equation. Aparametric equation (at least as they are going to be described here) describesx and y in terms of two equations as a third parameter, t, varies from zero toone. The equation for a second order parametric equation is: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    x = at<sup>2</sup> + bt + c    y = dt<sup>2</sup> + et + f</pre>	</TD></TR></TABLE></CENTER><P>It's easy to see how this describes at least a non-rotated parabola; setting aor d to zero allows specifying an xy equation where either x or y is squared.More importantly for computers, it's easy to turn this equation into a forwarddifferencing algorithm that allows approximating the curve as a series of lineswith computations no more complicated than adds and shifts.</p><P>If the curve described by these equations is limited by t starting at zero andending at one, then the curve begins at (c, f) and ends at (a + b + c, d + e +f). Plugging in 0.5 for t yields the curve's midpoint; i.e., x = a/4 + b/2 + c.It is convenient to be able to define a curve by where it starts and ends; allthat's missing is some additional information that describes <i>how</i> itcurves. A <code>gxCurve</code> describes a parabolic segment in terms of three controlpoints, named first, control and last. We can describe those points in terms oftheir parametric parameters: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>first = ccontrol = b/2 + clast = a + b + c</pre>	</TD></TR></TABLE></CENTER><P>The control point is formed by intersecting the tangent lines at the start andend of the curve. We can express the mid point in terms of first, control andlast by: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>mid = a/4 + b/2 + c = c/4 + b/4 + c/2+ (a + b + c)/4 = first/4 +control/2 + last/4</pre>	</TD></TR></TABLE></CENTER><P>Solving for a, b and c results in: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>a = first - 2 * control + lastb = control * 2 - first * 2c = first</pre>	</TD></TR></TABLE></CENTER><P>By substituting the above equations, we can specify a pair of parametricequations that describe a curve, given three points: (C++ code begins here: )</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    void CurveXY(const fCurve&amp; cu, floa&amp; x, float&amp; y, const float t)    {        x = (cu.first.x - 2 * cu.control.x + cu.last.x) * t * t +            2 * (cu.control.x - cu.first.x) * t + cu.first.x;        y = (cu.first.y - 2 * cu.control.y + cu.last.y) * t * t +            2 * (cu.control.y - cu.first.y) * t + cu.first.y;    }</pre>	</TD></TR></TABLE></CENTER><P>We can regroup the terms to reference the points' ordinates once: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    void CurveXY(const fCurve&amp; cu, float&amp; x, float&amp; y, const float t)    {        x = cu.first.x  * ( 1 - t) *            (1 - t) + 2 * cu.control.x * t * (1 - t) + cu.last.x * t * t;        y = cu.first.y  * ( 1 - t) *            (1 - t) + 2 * cu.control.y * t * (1 - t) + cu.last.y * t * t;    }</pre>	</TD></TR></TABLE></CENTER><P>Thus, the mid point of the curve is computed to be: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    if ( t == 0.5) {    // optimize !        x  = cu.first.x/4 + cu.control.x/2 + cu.last.x/4;        y  = cu.first.y/4 + cu.control.y/2 + cu.last.y/4;    }</pre>	</TD></TR></TABLE></CENTER><P>Perspective geometry tells us that putting the points that describe a <code>gxCurve</code>or a <code>gxPath</code> through a <code>gxMapping</code> is accurate only if the gxMapping is affine;that is, it contains scaling, skewing, rotation and translation, but noperspective. If a <code>gxMapping</code> is a perspective transformation, then a parabolabecomes either a hyperbolic or elliptical segment. If any conic is sent througha perspective transformation, the result is another conic.</p><P>In Technote <A HREF = "tn1051.html">1051 - Understanding Conic Splines</a>, we learn that the parametric form for conics canbe represented by sending the parametric equation for a quadraticB&eacute;zier through a perspective transformation: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>void FindConicXY(const fConic&amp; con, float&amp; x, float&amp; y, const float t){    x =    (con.a.x  * ( 1 - t) * (1 - t) +         2 * con.lambda * con.b.x * t * (1 - t) + con.c.x * t * t) /        (1 + 2 * (con.lambda -1) * t * (1 - t));    y = (con.a.y  * ( 1 - t) * (1 - t) +         2 * lambda * con.b.y * t * (1 - t) + con.c.y * t * t) /        (1 + 2 * (con.lambda -1) * t * (1 - t));}</pre>	</TD></TR></TABLE></CENTER><P>Note that if we plug in 1.0 for con.lambda, the denominator becomes equal to1.0;  the numerator becomes identical to the <code>CurveXY</code> function derived above.</p><P>The mid-point for any conic simplifies to: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    if ( t == 0.5) {    // optimize !        x = (con.a.x/2 + con.lambda * con.b.x + con.c.x/2) / (con.lambda + 1);        y = (con.a.y/2 + con.lambda * con.b.y + con.c.y/2) / (con.lambda + 1);    }</pre>	</TD></TR></TABLE></CENTER><P>If lambda equals 1, then this becomes: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    if (t == 0.5 &amp;&amp; con.lambda == 1) {    // further optimize !        x = con.a.x/4 + con.b.x/2 + con.c.x/4;        y = con.a.y/4 + con.b.y/2 + con.c.y/4;    }</pre>	</TD></TR></TABLE></CENTER><P>which is identical to the equation for a <code>gxCurve</code> or parabola that we derivedabove.</p><P>In summary, what do we know?</p><ul><li>A second order parametric equation describes a parabolic segment.</li><li>By adding a weighted divisor, conics can also be described by a parametricequation.</li><li>If the weight in the conic equation is set to 1, the result is a parabolicsegment.</li></ul><P>Without any proof, it's worth knowing that if lambda is greater than 1, theconic equation describes a hyperbolic segment; if lambda is less than one, itdescribes an elliptical or circular segment.</p><h3>Computing Lambda</h3><P>Now let's determine the appropriate lambda value for a circular arc. Here's thedecidedly GX-centric approach we'll take: </p><ol type="a">	<li>Construct a pair of lines perpendicular to the tangents at the arc's ends.</li>	<li>Define the circle's center to be the intersection of these lines.</li>	<li>Rotate one of these lines to the mid-angle to define the arc's mid-point.</li>	<li>Use the arc's mid-point to define the arc's lambda value.</li></ol><P>So you can try this on your own, we'll code this as legitimate fixed-pointcode.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>#include &lt;GraphicsLibraries.h&gt;#include &lt;assert.h&gt;void FindCircularLambda(conic&amp; arc){// we need a value for lambda that makes the midPoint equi-distant from// the circle center. First, we need to find where the hypothetical// center is. There are many ways to find the circle center; the way// we'll choose has a GX flavor; we'll construct two radius lines and// find where they intersect.// start with the arc tangents from the end points to the control point    gxLine first = {{arc.a.x, arc.a.y}, {arc.b.x, arc.b.y}};    gxLine second = {{arc.c.x, arc.c.y}, {arc.b.x, arc.b.y}};    gxShape line1 = GXNewLine(&amp;first);    gxShape line2 = GXNewLine(&amp;second);// these lines need to be rotated towards the circle's center.// knowing the arc direction helps.    gxShape arcShape = GXNewCurve((gxCurve*) &amp;arc);    Boolean direction  = (GXGetShapeDirection(arcShape, 1) &lt;&lt; 1) - 1;        // -1 counter, 1 clockwise    GXDisposeShape(arcShape);// if the curve is clockwise, rotate the first 90 degrees clockwise and// the second 90 degrees counter-clockwise    GXRotateShape(line1, direction * ff(90), arc.a.x, arc.a.y);    GXRotateShape(line2, -direction * ff(90), arc.c.x, arc.c.y);//  while these lines don't touch, make them bigger    while (GXTouchesShape(line1, line2) == false) {        GXScaleShape(line1, ff(2), ff(2), first.first.x, first.first.y);        GXScaleShape(line2, ff(2), ff(2),second.first.x, second.first.y);    }// now that they touch, find their intersection (line2 becomes a// gxPoint).    GXIntersectShape(line2, line1);    gxPoint center;    GXGetPoint(line2, &amp;center);// we'll use the tangents to describe the span of the arc.    gxPoint point1 = {arc.a.x - center.x, arc.a.y - center.y};    gxPoint point2 = {arc.c.x - center.x, arc.c.y - center.y};    gxPolar pole1, pole2;    PointToPolar(&amp;point1, &amp;pole1);    PointToPolar(&amp;point2, &amp;pole2);// now we can rotate the first line so the starting point is at the// arc's mid point    GXRotateShape(line1, pole2.angle - pole1.angle &gt;&gt; 1, center.x,                    center.y);    gxPoint mid;    GXGetShapePoints(line1, 1, 1, &amp;mid);// given: mid.x = (arc.a.x/2 + lambda * arc.b.x + arc.c.x/2)/(lambda + 1)// then: 2* mid.x * (lambda + 1) = arc.a.x + 2 * lambda * arc.b.x +          arc.c.x// then: lambda * 2 * (mid.x - arc.b.x) = arc.a.x + arc.c.x - 2  * mid.x// then:    Fixed lambda = FixedDivide(arc.a.x + arc.c.x - 2 * mid.x, 2 * (mid.x          - arc.b.x));    Fixed lambda2 = FixedDivide(arc.a.y + arc.c.y - 2 * mid.y, 2 *          (mid.y - arc.b.y));    Fixed error = lambda - lambda2;    if (error &lt; 0) error = - error;    assert(error &lt; 4);    // error should be small !    arc.lambda = lambda + lambda2 &gt;&gt; 1;    // return average of two}</pre>	</TD></TR></TABLE></CENTER><P>For this example to work, the arc b point must be equidistant from the a and cpoints. For example: </p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    conic arc = {{0, 0}, {ff(125), ff(0)}, {ff(200), ff(100)}};    FindCircularLambda(arc);    DrawConic(&amp;arc);</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></P><a name = "Summary"></a><h2>Summary</h2><P>GX Libraries have a wealth of information and show how to use QuickDraw GX tosolve real problems. The Conic Library shows how to use GX to construct pathsthat approximate conics, given three control points and a weight.</p><h3>Reference Material</h3><P>There are several different directions that conics can be taken. It's possiblethat a future version of GX will directly support conics in all of itsprimitive operations. Until then, it is straight-forward to take theinformation presented here, forget all of it, and read Technote <A HREF = "tn1051.html">1051 - Understanding ConicSplines</a>  instead to derive the code to transform conics throughgeneral gxMappings.</p><P>Another possible line of development is to adopt the general xy form equationfor conics to use with GX. Foley and Van Damm's venerable <i>ComputerGraphics</i> (2nd edition) from Addison-Wesley presents code for scanconverting conics in their general form.</p><P>There are also a number of Internet resources to explore conics further.Listing them here will likely produce references that quickly grow out of date,but you might try linking to http://www.geom.umn.edu/apps/conics/ orhttp://www.bham.ac.uk/mathwise/syl3_2.htm.</p><P><A HREF="#top">Back to top</A></P><a name="References"></a><h2>References</h2><p>Technote <A HREF = "tn1051.html">1051 - Understanding ConicSplines</a></p><p>MacOS SDK CD, Development Kits (Disc 1): QuickDraw GX: Programming Stuff: GXLibraries: </p><p><i>Inside Macintosh: QuickDraw GX Objects</i></p><p><i>Inside Macintosh: QuickDraw GX Environment and Utilities</i></p><P><A HREF="#top">Back to top</A></P>         <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (76K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tn1052.pdf">Download</A></P>               </TD>            </TR></TABLE><P><A HREF="#top">Back to top</A></P></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1052.html%3Fid%3DDTS10002893-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1052.html%3Fid%3DDTS10002893-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1052.html%3Fid%3DDTS10002893-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 03-24-01 --><!--Includes revisions to code listings--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="Stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN2020: Browser Plugins in Mac OS X</title><meta name="keywords" content="browser world wide web www plugin plug-in plug in"><meta name="Description" content="Technical Note TN2020: A description of changes in the formatof web browser plugins for Mac OS X."><meta name="categories" content="Runtime Architecture, Platforms and Tools, Processes, Networking, Overview and Operating System"><meta name="week-posted" content="May 28, 2001 - Jun 1, 2001"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10003058" title="Browser Plugins in Mac OS X"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/AppleApplications/index.html">Apple Applications</a> &gt; <a href="../../technicalnotes/AppleApplications/idxSafari-date.html">Safari</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN2020</div>
<div id="pageheadsub">Browser Plugins in Mac OS X</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext">                   <A HREF="#overview">Overview</A><BR>                  <BR>                  <A HREF="#RequiredChanges">Required changes from Earlier Versions of Mac&nbsp;OS</A><BR>                  <BR>                  <A HREF="#OtherDifferences">Other differences</A><BR>                  <BR>                  <A HREF="#References">References</A><BR>                  <BR>                  <A HREF="#Downloads">Downloadables</A></p>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>		<td width=300 valign="top" align=left>	<!-- begin_intro_text --><p id="introtext">This document describes the unique features of browser plug-ins forMac OS X. You should read this document if you are:<BR><BR>- writing a browser for Mac OS X<BR>- porting a browser to Mac OS X<BR>- writing a browser plug-in for Mac OS X<BR>- porting a browser plug-in to Mac OS X</P><p id="introtext">This document assumes that you already know how to create aNetscape-style browser plug-in, and how to create a CFM library forthe Mac OS X.</P><!-- end_intro_text --><!-- begin_date --> <h3>&nbsp;[May 31 2001]</h3><!-- end_date -->                </TD>             </TR>          </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR>          <!-- begin_content --><A NAME=overview></A><H2>Overview</H2><P>Browser plug-ins for Mac OS X follow the same basic plug-in architecturefor traditional Mac OS that was introduced by Netscape. A browser plug-in isimplemented as a CFM (Code Fragment Manager) library; all callsbetween the browser and the plug-in assume CFM-calling conventions.All calls between the browser and plug-in are made using simple<CODE>ProcPtr</CODE>s instead of <CODE>UPP</CODE>s.</P><P><A HREF="#top">Back to top</A></P><BR><BR><A NAME=RequiredChanges></A><H2>Required changes from Earlier Versions of Mac&nbsp;OS</H2><P>Browser plug-ins for Mac&nbsp;OS&nbsp;X are similar to browser plug-ins for Mac&nbsp;OS 7, 8and 9 with the following differences:</P><UL><LI>Carbon plug-ins must link to <CODE>CarbonLib</CODE> instead of <CODE>InterfaceLib</CODE>,<CODE>QuickTimeLib</CODE>, et cetera.<BR><BR></LI><LI>All Carbon plug-ins must have a <CODE>'carb'</CODE> resource with an ID of zero (thisresource need not contain any data).<BR><BR></LI><LI>The main entry point of the plug-in should be a function "<CODE>main</CODE>"instead of a routine descriptor "<CODE>mainRD</CODE>" (There are no routinedescriptors in Carbon on Mac&nbsp;OS&nbsp;X).<BR><BR></LI><LI>All calls between the plug-in and the browser use simple <CODE>ProcPtr</CODE>srather than <CODE>UPP</CODE>s.<BR><BR></LI><LI>A Carbon plug-in's file type should be <CODE>'BRPL'</CODE> instead of <CODE>'NSPL'</CODE>.This change is designed to prevent already shipping <CODE>InterfaceLib</CODE>browsers and installers from finding and attempting to use carbonizedplug-ins.</LI></UL><P><A HREF="#top">Back to top</A></P><BR><BR><A NAME=OtherDifferences></A><H2>Other differences</H2><P>A plug-in can be a simple CFM library, but may also be built as apackage, or as a packaged data-fork-only file. Packaged data-fork-only plug-ins are encouraged since they can be installed on non-HFS filesystems.On traditional Mac&nbsp;OS, many browsers will look for plug-ins in adirectory adjacent to the browser as well as in the System Folder's"Internet Plug-Ins" folder. On Mac&nbsp;OS&nbsp;X plug-ins should only be placed inthe /Library/ Internet Plug-Ins directory. The location of thedirectory can be determined programmatically with <CODE>FindFolder</CODE>,specifying <CODE>kLocalDomain</CODE> (-32765) for the <CODE>vRefNum</CODE> and<CODE>kInternetPlugInFolderType</CODE> (<CODE>'&#131;net'</CODE>) for the folder type.</P><P><A HREF="#top">Back to top</A></P><BR><BR><A NAME=References></A><H2>References</H2><P>See Apple Technical Note TN2003 for general information about Carbonizingyour code, <A HREF="tn2003.html">http://developer.apple.com/technotes/tn/tn2003.html</A>. For moreinformation about how to write a browser plug-in for traditional Macbrowser plug-in information, see Netscape's plug-in documentationat the address <A HREF="http://developer.netscape.com/docs/manuals/communicator/plugin/index.htm">http://developer.netscape.com/docs/manuals/communicator/plugin/index.htm</A>.</P><P><A HREF="#top">Back to top</A></P><BR><BR>                        <A NAME=Downloads></A><H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR><td width=50 align=left><P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P></TD><td align="left"><P>Acrobat version of this Note (44K)</P></TD><td width=60 align=left><P><A HREF="pdf/tn2020.pdf">Download</A></P></TD></TR></TABLE><P><A HREF="#top">Back to top</A></P><BR><BR></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn2020.html%3Fid%3DDTS10003058-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn2020.html%3Fid%3DDTS10003058-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn2020.html%3Fid%3DDTS10003058-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
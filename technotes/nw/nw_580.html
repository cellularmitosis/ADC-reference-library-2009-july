<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note NW580: Token Ring Q&amp;As</title><meta name="keywords" content=""><meta name="Description" content="Technical Note NW580: ">    <meta name="categories" content="Networking"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002585" title="Token Ring Q&As"></a><a name="top"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxNetworking-date.html">Networking</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Networking/index.html" target="_blank">Reference Library > Networking</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note NW580</div>
<div id="pageheadsub">Token Ring Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext">					<a href="#Section1">NetCopy procedure replaces TokenTalk CopyNuBus</a><BR><BR>					<a href="#Section2">TokenTalk LLCBadList and LLCTruncated</a><BR><BR>										<a href="#Section3">How to get burned-in &amp; locally administered Token Ring addresses</a><BR><BR>					<a href="#Section4">TokenRing NB 4/16 Card and "promiscuous" mode support</a><BR><BR>					<a href="#Section5">TokenTalk maximum transmit buffer size</a><BR><BR>										<a href="#Downloads">Downloadables</a></p>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <a href="../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1990]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR><!-- begin_content --><a name="Section1"></a><h2>NetCopy procedure replaces TokenTalk CopyNuBus</h2><p>Date Written:  9/23/92</p><p>Last reviewed:  6/14/93</p><p>The TokenTalk Programmer's Guide describes a routine called <code>CopyNuBus</code>. Thisroutine is not in the IPCGlue.o file dated 3/4/92 that I got off a DeveloperCD. Has this routine been replaced by something else, and if so, what is thecalling sequence of the new routine?</p><p>The TokenTalk Programmer's Guide hasn't been updated to reflect the fact thatthe <code>CopyNuBus</code> routine has been replaced by the more robust <code>NetCopy</code> procedure.The prototype for the <code>NetCopy</code> routine is:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>short NetCopy(tid_type srcTID,              void *srcAddress,              tid_type dstTID,              void *dstAddress,              unsigned long bytecount);</pre>	</TD></TR></TABLE></CENTER><p>Note the addition of the source and the destination TIDs. <code>NetCopy</code> will copyfrom a source virtual address to a target virtual address and is a safe way tomove data across the NuBus. Both the source and destination virtual addressescan be paged out to disk in a VM environment. <code>NetCopy</code> will cause these pages tobe brought back into memory before the copy is performed. A result of zero isreturned if <code>NetCopy</code> is successful.</p><p>This information comes from the A/ROSE Programmer's Guide. You should get acopy of this guide and referring to it regarding A/ROSE programming questionsinstead of referencing the TokenTalk Programmer's Guide. A/ROSE has been a fastevolving piece of software. Always refer to the latest Developer CD for thelatest revision.</p><P><A HREF="#top">Back to top</A></P><a name="Section2"></a><h2>TokenTalk LLCBadList and LLCTruncated</h2><p>Date Written:  9/24/91</p><p>Last reviewed:  6/14/93</p><p>When a list-directed receive is queued to TokenTalk's implementation of LogicalLink Control (LLC) with a total data size less than the active frame size,<code>LLCBadList</code> is returned when the receive completes. If a nonlist-directedreceive is used, and the buffer size is less than a frame size, <code>LLCTruncated</code> isreturned. Why aren't the same error codes (<code>LLCTruncated</code>) returned as thecondition is the same?</p><p>The <code>LLCBadList</code> error results because of an undocumented limitation imposed onthe number of lists allowed in a list-directed receive. It's likely that you'vespecified a list array with greater than eight elements. When the list ispassed to <code>LLCReceive</code>, a check is made on the list array if one is used. If morethan eight elements are in the list, the <code>LLCBadList</code> error is returnedimmediately with no processing of the incoming data.</p><p>On the other hand, if a nonlist-directed receive is used, the <code>LLCReceive</code> callis queued into the task list. The present TokenTalk LLC implementation doesn'tsupport partial reads of large data frames, so if it turns out that the buffersize is smaller than the frame size, only the information that fits into thebuffer is returned. The remaining information is discarded. The error condition<code>LLCTruncated</code> is returned to indicate that this event occurred.</p><P><A HREF="#top">Back to top</A></P><a name="Section3"></a><h2>How to get burned-in &amp; locally administered Token Ring addresses</h2><p>Date Written:  12/11/91</p><p>Last reviewed:  12/12/91</p><p>How can I read the "burned-in" address from the TokenTalk NB card? How aboutfor the locally administered address?</p><p>To access the burned-in address, use the <code>TTGetDefaultParms</code> selector whencalling the <code>TTUtil</code> function pointer. On return, the record structure, <code>TRInit</code>,will contain the value of the "burned-in" address in the field <code>NodeAddr</code>. Usethe <code>TTGetBootParms</code> selector to obtain the equivalent information from theTokenTalk Prefs file, that information which has been locally set.</p><p>Note the following #defines to include in your TTUtil.h header file:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>#define  TTGetDefaultParms  10  /* Return default TRInit parameters */#define  TTGetBootParms  11 /* Return TRInit parameters to use on next boot *//* *  The TTGetDefaultParms and TTGetBootParms returns a pointer to the * parameter structure, or zero if no parameters could be returned. The * parameter structure returned should be released by the caller by calling * DisposPtr when done.</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></P><a name="Section4"></a><h2>TokenRing NB 4/16 Card and "promiscuous" mode support</h2><p>Date Written:  12/6/91</p><p>Last reviewed:  6/14/93</p><p>Can the IBM chipset which is on Apple's new TokenRing NB 4/16 Card beprogrammed to go into "promiscuous" mode? I would like to write a Snifferapplication which runs on the new card.</p><p>At present, the present design of the IBM mini-card is such that the chipsetcannot be programmed to run in promiscuous mode.  A request has been submittedto IBM to allow the chipset to be placed into this mode.  There is no date asto when such functionality will become available.</p><P><A HREF="#top">Back to top</A></P><a name="Section5"></a><h2>TokenTalk maximum transmit buffer size</h2><p>Date Written:  12/19/91</p><p>Last reviewed:  6/14/93</p><p>In reviewing the 'llcp' resource for the new TokenTalk 4/16 NuBus card, Inoticed that the maximum receive frames size has been changed to 0x1170 or 4464bytes. If this is correct, what is the maximum transmit size (used to be 1509bytes)?</p><p>The change is for real. It was implemented at the request of developers likeyourself. The change affects all Apple's TokenTalk products provided thatTokenTalk Prep 2.4 is present.</p><p>The maximum transmit buffer size depends on the 'llcp' resource in theTokenTalk Prep or (TokenTalk Prefs file if one is available). Within the 'llcp'resource is a buffer size value used to initialize the size of thereceive/transmit buffers. For file versions 2.2 and earlier, the factory limitwas 1509 bytes. For TokenTalk Prep version 2.4, the buffer size is set to 4464bytes.</p><P><A NAME=Downloads></A></P>                  <P><A HREF="#top">Back to top</A></P><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (52K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/nw_580.pdf">Download</A></P>               </TD>            </TR>                     </TABLE>         <BR>         <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/nw/nw_580.html%3Fid%3DDTS10002585-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/nw/nw_580.html%3Fid%3DDTS10002585-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/nw/nw_580.html%3Fid%3DDTS10002585-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note NW07: Avoid Use of Network Events</title><meta name="keywords" content=""><meta name="Description" content="Technical Note NW07: ">                                       <meta name="categories" content="Networking"><meta name="week-posted" content="Jun 29, 1987 - Jul 3, 1987"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002549" title="Avoid Use of Network Events"></a><a name="top"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxNetworking-date.html">Networking</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Networking/index.html" target="_blank">Reference Library > Networking</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note NW07</div>
<div id="pageheadsub">Avoid Use of Network Events</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->					<p id="menutext">					<a href="#Section1">What are network events?</a><BR><BR><a href="#Section2">Why not use network events?</a><BR><BR><a href="#Section3">How can I tell that my calls have completed without<BR> using network events?</a><BR><BR> <a href="#References">References</a><BR><BR><a href="#Downloads">Downloadables</a></p>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">Future System software enhancements will not support network events. This notegives hints on weaning your application from the use of network events.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Jul 01 1987]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR><!-- begin_content --><a name="Section1"></a><h2>What are network events?</h2><p>When the Event Manager was designed, an event number was reserved for futuresupport of "network events". Later, when the AppleTalk Pascal Interfaces werewritten, a completion routine was created that, when an asynchronous AppleTalkoperation finished, would post an event using <code>networkEvt</code> in the<code>evtNum</code> field.</p><p>Only the AppleTalk Pascal Interfaces generate network events. Assembly-languageusers of the AppleTalk drivers (and those who called the AppleTalk driversdirectly from high-level languages, using <code>PBControl</code> calls) eitherprovide a completion routine of their own, or poll the <code>ioResult</code> fieldof the parameter block passed with the call (when <code>ioResult</code> becamenegative or zero, the call is complete).</p><P><A HREF="#top">Back to top</A></P><a name="Section2"></a><h2>Why not use network events?</h2><p>In some cases, network events can be lost. If the Event Manager finds that thequeue is full while posting an event, it discards the oldest event. In asituation (such as a server) where multiple asynchronous ATP requests maycomplete at once, there is a chance that events may be dropped off the end ofthe queue. This is more likely if the same machine is also handlinguser-interface events (like key presses and mouse actions).</p><p>Also, in developing improvements to our operating system, it has becomeapparent that to continue support of network events, we would have tocompromise future enhancements to our system. So, future versions of theMacintosh operating system may ignore network events instead of passing them tothe application.</p><P><A HREF="#top">Back to top</A></P><a name="Section3"></a><h2>How can I tell that my calls have completed without using network events?</h2><p>As described on page II-275 of <i>Inside Macintosh</i>, you can poll the<code>abResult</code> field of the call's <code>ABusRecord</code>; when this valuebecomes negative or zero, the call has completed. You can do this in your mainevent loop.</p><p>With this technique, you can ignore any network events returned by<code>GetNextEvent</code>, since the AppleTalk Pascal Interfaces will be postingevents anyway. If your application starts enough asynchronous operations, it'spossible that their network events will cause other non-network events to belost. To prevent this, you should call <code>FlushEvents(networkMask,0)</code>frequently to purge any accumulated network events from the event queue.</p><p>You may also consider using the new preferred high-level interface calls; seeM.NW.AppleTalk for more information.</p>                                      <P><A HREF="#top">Back to top</A></P><a name="References"></a><h2>References</h2><P>AppleTalk Manager</p><p><A HREF = "nw_05.html">M.NW.AppleTalk</a></p>                                      <P><A HREF="#top">Back to top</A></P>         <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (36K)</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/nw_07.pdf">Download</A></P>               </TD>            </TR>                     </TABLE>         <BR>         <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/nw/nw_07.html%3Fid%3DDTS10002549-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/nw/nw_07.html%3Fid%3DDTS10002549-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/nw/nw_07.html%3Fid%3DDTS10002549-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
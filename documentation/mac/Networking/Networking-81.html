<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PRemoveName(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING81></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-80.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-82.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-61.html"><B>Chapter 3 - Name-Binding Protocol (NBP)</B></A> / <A HREF="Networking-66.html"><B>NBP Reference</B></A><BR><DL><DD><A HREF="Networking-72.html"><B>Routines</B></A> / <A HREF="Networking-76.html"><B>Handling Name and Address Requests</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING81-0></A>
<H3><A NAME=MARKER-9-164></A>PRemoveName</H3>
 <A NAME=MARKER-11-165></A>The <A NAME=MARKER-2-80></A><CODE>PRemoveName</CODE> function removes a previously registered name from the NBP <BR>names table. <P>
<PRE>
FUNCTION PRemoveName (thePBptr: MPPPBPtr; async: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE>thePBptr</CODE>
<DD> A pointer to an MPP parameter block.
<DT><CODE>async</CODE>
<DD> A Boolean that specifies whether the function should be executed asynchronously or synchronously. Specify <CODE>TRUE</CODE> for asynchronous execution.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The function result.<TR>
<TD>--><TD>ioRefNum<TD>Integer<TD>The .MPP driver reference number. <TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>removeName</CODE>. <TR>
<TD>--><TD>entityPtr<TD>Ptr<TD>A pointer to an entity name.</TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-82></A>ioCompletion</CODE>
<DD> A pointer to a completion routine that you can provide. When you execute a function asynchronously, the .MPP driver calls your completion routine when it completes execution of the function if you specify a pointer to the routine as the value of this field. Specify <CODE>NIL</CODE> for this field if you do not wish to provide a completion routine. If you execute a function synchronously, the .MPP driver ignores the <CODE>ioCompletion</CODE> field. For information about completion routines, see the chapter "Introduction to AppleTalk" in this book. 
<DT><CODE>ioResult</CODE>
<DD> The result of the function. When you execute the function asynchro-<BR>nously, the function sets this field to 1 and returns a function <BR>result of <CODE>noErr</CODE> as soon as the function begins execution. When <BR>the function completes execution, it sets the <CODE>ioResult</CODE> field to the actual result code.
<DT><CODE>ioRefNum</CODE>
<DD> The .MPP driver reference number. The MPW interface fills in <BR>this field. 
<DT><CODE>csCode</CODE>
<DD> The command code of the .MPP command to be executed. The MPW interface fills in this field.
<DT><CODE>entityPtr</CODE>
<DD> A pointer to the name of the network-visible entity that you wish <BR>to remove from the names table. The name must be in the format shown in <A HREF=Networking-65.html#MARKER-9-51>Figure 3-5 on page 3-11</A>. You cannot use any wildcard characters in the name. 
</DL>
<A NAME=HEADING81-11></A>
<H5>DESCRIPTION</H5>
 When you close a socket or terminate an application or process that you registered in the NBP names table as a network-visible entity, you must use the <CODE>PRemoveName</CODE> function to remove the name from the names table. <P>
 To remove the names table entry, you assign to the <CODE>entityPtr</CODE> field of the parameter block a pointer to a fully qualified entity name. The entity name is a packed array of Pascal strings. Because the object, type, and zone names in this format are of arbitrary length, you cannot create this record in Pascal (which requires you to declare the length of character strings when you define the record). You can use the <CODE>NBPSetEntity</CODE> procedure to create this record, or you can provide <CODE>PRemoveName</CODE> with a pointer to the names table entry record that you used to register the name.<P>
<A NAME=HEADING81-14></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Memory used for the buffer containing the entity name belongs to the <CODE>PRemoveName</CODE> function until the function completes execution and must be nonrelocatable. After you remove the names table entry, you can reuse the memory or release it. <P>
<A NAME=HEADING81-16></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>PRemoveName</CODE> function from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>removeName</CODE> in the <CODE>csCode</CODE> field of the parameter block. To execute the <CODE>_Control</CODE> trap asynchronously, include the value <CODE>,ASYNC</CODE> in the operand field. To execute this function from assembly language, you must also specify the driver reference number. <P>
<A NAME=HEADING81-18></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>nbpNotFound<TD>-1028<TD>Name not found<TR>
<TD>reqAborted<TD>-1105<TD>Request canceled</TABLE>
</H5>
<A NAME=HEADING81-19></A>
<H5>SEE ALSO</H5>
 To create an entity name record of the form required by the <CODE>PRemoveName</CODE> function, use <A NAME=MARKER-2-68></A>the <CODE>NBPSetEntity</CODE> procedure, described on <A HREF=Networking-77.html#MARKER-9-125>page 3-27</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-80.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-82.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Sound Informational Selectors (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Mac OS Sound</I><P>| <A target="doc" HREF="tp_snd33_snd33add.1d.htm">Previous</A> | <A target="doc" HREF="tp_snd33_snd33add.1.htm">Chapter Contents</A> | <A target="doc" HREF="tp_snd33_snd33add.htm">Chapter Top</A> | <A target="doc" HREF="tp_snd33_snd33add.1f.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H1.Heading1"><A NAME="pgfId=18594"> </A>Sound Informational Selectors</H1><P CLASS="T1.Text1"><A NAME="pgfId=18595"> </A>The following are new sound informational selectors added since the release of Sound Manager 3.0. These selectors are used to obtain information and control the sound environment using the <TT CLASS="cv">GetSoundOutputInfo, SetSoundOutputInfo, SndGetInfo, SndSetInfo, or SPBGetDeviceInfo, </TT>and <TT CLASS="cv">SPBSetDeviceInfo</TT> routines.</P><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18597"> </A><A NAME="marker=18596"> </A>siHardwareBusy</H3><P CLASS="T1.Text1"><A NAME="pgfId=18598"> </A>This selector is used by all input and output devices, and returns the state of the hardware--typically, whether or not hardware interrupts are active. For input devices, the <TT CLASS="cv">infoData</TT> parameter points to a short word. For output devices, the <TT CLASS="cv">infoPtr</TT> is a short word containing the value. </P><P CLASS="T1.Text1"><A NAME="pgfId=18599"> </A>A value of 0 represents that the hardware is not busy, while a value of 1 represents busy. This selector is only supported by the get calls, since it does not make sense to &quot;set&quot; a device busy.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83955"> </A>short hwBusy;<BR>err = GetSoundOutputInfo(nil, siHardwareBusy, &amp;hwBusy);<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18602"> </A><A NAME="marker=18601"> </A>siHardwareFormat </H3><P CLASS="T1.Text1"><A NAME="pgfId=18603"> </A>The <TT CLASS="cv">siHardwareFormat</TT> selector has been added for output devices. Use this selector with the <TT CLASS="cv">GetSoundOutputInfo</TT> and <TT CLASS="cv">SndGetInfo</TT> routines. It returns a <TT CLASS="cv">SoundComponentData</TT> structure of the format used by the output hardware device.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83959"> </A>SoundComponentData outputFormat;<BR><BR>err = GetSoundOutputInfo(nil, siHardwareFormat, &amp;outputFormat);<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18606"> </A><A NAME="marker=18605"> </A>siHardwareMute 	</H3><P CLASS="T1.Text1"><A NAME="pgfId=18607"> </A>This output selector was previously defined, but should be documented and implemented as returning the mute state of all sources that can be heard. For example, Power Macintosh computers have a speaker and headphone source. If no headphones are plugged in, then return the mute state of the speakers. If headphones are inserted, then return the mute state of both (e.g. <TT CLASS="cv">siHardwareMute</TT> is muted when both speakers and headphones are muted). The idea is if the user has sources that can be heard and all are muted, then the hardware has been muted. If any one of the sources can be heard, then the hardware is not muted.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83963"> </A>short hwMuted;<BR><BR>err = GetSoundOutputInfo(nil, siHardwareMute, &amp;hwMuted);<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18610"> </A><A NAME="marker=18609"> </A>siHardwareVolume</H3><P CLASS="T1.Text1"><A NAME="pgfId=18611"> </A>This output selector was previously defined, but should be documented and implemented as returning the volume of the device that can be heard. For example, Power Macintosh computers can have the speaker and the headphones both be audible to the user. </P><P CLASS="T1.Text1"><A NAME="pgfId=18612"> </A>In this case, return the loudest volume setting. If both the speaker and the headphones are muted, then again return the loudest setting. If one is muted and the other is audible, then return the volume of the audible source.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83967"> </A>unsigned long hwVolume;<BR><BR>err = GetSoundOutputInfo(nil, siHardwareVolume, &amp;hwVolume);<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18615"> </A><A NAME="marker=18614"> </A>siPreMixerSoundComponent</H3><P CLASS="T1.Text1"><A NAME="pgfId=18616"> </A>This selector is used to install a given sound component into the component chain. The given component will be installed just before the mixer component. This sound component can access the audio stream and modify the data prior to its being sent to the mixer. An example of its use is shown as follows by installing the Sound Sprockets sound localizer.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83971"> </A>SoundComponentLink soundLink;<BR><BR>soundLink.description.componentType = kSoundEffectsType;<BR>soundLink.description.componentSubType = kSSpLocalizationSubType;<BR>soundLink.description.componentManufacturer = kAnyComponentManufacturer;<BR>soundLink.description.componentFlags = 0;<BR>soundLink.description.componentFlagsMask = kAnyComponentFlagsMask;<BR>soundLink.mixerID = nil;<BR>soundLink.linkID = nil;<BR><BR>err = SndSetInfo(chan, siPreMixerSoundComponent, &amp;soundLink);<BR>// configure the localization settings<BR>// and send them to the sound component<BR><BR>err = SndSetInfo(chan, siSSpLocalization, &amp;localizationSettings);<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18619"> </A><A NAME="marker=18618"> </A>siSetupCDAudio</H3><P CLASS="T1.Text1"><A NAME="pgfId=18620"> </A>This selector is only used by input devices that have special requirements in order to hear the audio from the CD player. For example, currently the 840AV and Power Macintosh computers require the user to open the Sound control panel, select the Inputs panel, and then open the Options dialog. From here they have to select the CD Input and also check the Play-Through option. The new <TT CLASS="cv">siSetupCDAudio</TT> avoids this troublesome operation by setting up the input device to allow you to hear audio CDs from the audio CD player.</P><P CLASS="T1.Text1"><A NAME="pgfId=18621"> </A>The <TT CLASS="cv">infoData</TT> parameter points to a short word. A value of 1 means to set up the hardware (for example, set input source to CD and turn on Play-Through). A value of 0 means to return the input hardware to some initial state, either the default settings or the settings prior to setting up for the CD audio. Any other value is an error. </P><P CLASS="T1.Text1"><A NAME="pgfId=18622"> </A>If the input device had no special needs for CD audio (for exmaple, the audio is heard regardless of the input hardware settings), then the selector is not supported and it returns an error. The <TT CLASS="cv">SPBGetDeviceInfo</TT> routine should return a 1 or 0 value, depending on its current setting. If the input source is the CD and Play-Through, if required, is on, then return the value of 1. This should happen even if nothing ever requested setting up for CD audio. It should return the state of the actual condition of the input hardware.</P></DIV><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Mac OS Sound</I><P>| <A target="doc" HREF="tp_snd33_snd33add.1d.htm">Previous</A> | <A target="doc" HREF="tp_snd33_snd33add.1.htm">Chapter Contents</A> | <A target="doc" HREF="tp_snd33_snd33add.htm">Chapter Top</A> | <A target="doc" HREF="tp_snd33_snd33add.1f.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
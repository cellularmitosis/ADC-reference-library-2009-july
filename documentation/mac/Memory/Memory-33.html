<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>HPurge (IM: M)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING33></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Memory-32.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-34.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Memory-2.html"><B>Memory</B></A> / <BR><DD><A HREF="Memory-9.html"><B>Chapter 1 - Introduction to Memory Management</B></A> / <A HREF="Memory-13.html"><B>Memory Management Reference</B></A><BR><DL><DD><A HREF="Memory-14.html"><B>Memory Management Routines</B></A> / <A HREF="Memory-28.html"><B>Setting the Properties of Relocatable Blocks</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING33-0></A>
<H3><A NAME=MARKER-11-323></A>HPurge<A NAME=MARKER-2-366></A><A NAME=MARKER-2-367></A></H3>
 You can use the <CODE>HPurge</CODE> procedure to mark a relocatable block so that it can be purged if a memory request cannot be fulfilled after compaction.<P>
<PRE>
PROCEDURE HPurge (h: Handle);
</PRE>
<DL>
<DT><CODE>h</CODE>
<DD> A handle to a relocatable block.
</DL>
<A NAME=HEADING33-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>HPurge</CODE> procedure makes the relocatable block to which <CODE>h</CODE> is a handle purgeable. If the block is already purgeable, <CODE>HPurge</CODE> does nothing.<P>
 The Memory Manager might purge the block when it needs to purge the heap zone containing the block to satisfy a memory request. A direct call to the <CODE>PurgeMem</CODE> procedure or the <CODE>MaxMem</CODE> function would also purge blocks marked as purgeable.<P>
 Once you mark a relocatable block as purgeable, you should make sure that handles to the block are not empty before you access the block. If they are empty, you must reallocate space for the block and recopy the block's data from another source, such as a resource file, before using the information in the block.<P>
 If the block to which <CODE>h</CODE> is a handle is locked, <CODE>HPurge</CODE> does not unlock the block but does mark it as purgeable. If you later call <CODE>HUnlock</CODE> on <CODE>h</CODE>, the block is subject to purging.<P>
<A NAME=HEADING33-9></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The registers on entry and exit for <CODE>HPurge</CODE> are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN = LEFT colspan=2>Registers on entry<TR>
<TD>A0<TD>Handle to make purgeable</TABLE>

<TABLE BORDER="0" CELLPADDING=3><TH ALIGN = LEFT colspan=2>Registers on exit<TR>
<TD>D0<TD>Result code</TABLE>
<P>
<A NAME=HEADING33-11></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>nilHandleErr<TD>-109<TD><CODE>NIL</CODE> master pointer<TR>
<TD>memWZErr<TD>-111<TD>Attempt to operate on a free block</TABLE>
</H5>
<A NAME=HEADING33-12></A>
<H5>SEE ALSO</H5>
 If the Memory Manager has purged a block, you can reallocate space for it by using the <CODE>ReallocateHandle</CODE> procedure, described on <A HREF=Memory-96.html#MARKER-9-356>page 1-68</A>.<P>
 You can immediately free the space taken by a handle without disposing of it by calling <CODE>EmptyHandle</CODE>. This procedure, described on <A HREF=Memory-36.html#MARKER-9-380>page 1-67</A>, does not require that the block be purgeable.<A NAME=MARKER-2-8></A><A NAME=MARKER-2-9></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Memory-32.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-34.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Memory-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

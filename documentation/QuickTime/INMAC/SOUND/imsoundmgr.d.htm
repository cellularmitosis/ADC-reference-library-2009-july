<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Initializing Sound Channels (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.c.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.b.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.e.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H3.Heading3"><A NAME="pgfId=3339"> </A><A NAME="27921"> </A>Initializing Sound Channels<A NAME="marker=698"> </A></H1><P CLASS="T0.Text0"><A NAME="pgfId=3340"> </A><A NAME="marker=1264"> </A>When you first create a sound channel with <TT CLASS="cv">SndNewChannel</TT>, you can request that the channel have certain characteristics as specified by a sound channel initialization parameter. For example, to indicate that you want to allocate a channel capable of producing stereo sound, you might use the following code:<A NAME="marker=1263"> </A></P><CODE CLASS="Cv.Code"><A NAME="pgfId=9687"> </A>myErr := SndNewChannel(mySndChan, sampledSynth, initStereo, NIL);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3342"> </A>These are the currently recognized constants for the sound channel initialization parameter.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=9691"> </A>CONST<BR>&nbsp;&nbsp;&nbsp;&nbsp;initChanLeft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0002;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{left stereo channel}<BR>&nbsp;&nbsp;&nbsp;&nbsp;initChanRight&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0003;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{right stereo channel}<BR>&nbsp;&nbsp;&nbsp;&nbsp;waveInitChannel0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0004;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{wave-table channel 0}<BR>&nbsp;&nbsp;&nbsp;&nbsp;waveInitChannel1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0005;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{wave-table channel 1}<BR>&nbsp;&nbsp;&nbsp;&nbsp;waveInitChanne12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0006;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{wave-table channel 2}<BR>&nbsp;&nbsp;&nbsp;&nbsp;waveInitChannel3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0007;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{wave-table channel 3}<BR>&nbsp;&nbsp;&nbsp;&nbsp;initMono&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0080;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{monophonic channel}<BR>&nbsp;&nbsp;&nbsp;&nbsp;initStereo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $00C0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{stereo channel}<BR>&nbsp;&nbsp;&nbsp;&nbsp;initMACE3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0300;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{3:1 compression}<BR>&nbsp;&nbsp;&nbsp;&nbsp;initMACE6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0400;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{6:1 compression}<BR>&nbsp;&nbsp;&nbsp;&nbsp;initNoInterp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0004;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{no linear interpolation}<BR>&nbsp;&nbsp;&nbsp;&nbsp;initNoDrop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $0008;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{no drop-sample conversion}<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=2115"> </A>See <A target="doc" HREF="imsoundmgr.3a.htm#34708" CLASS="XRef">&quot;Channel Initialization Parameters&quot;</A> for a complete description of these constants.</P><P CLASS="Note"><A NAME="pgfId=1996"> </A>Some Macintosh computers play <I CLASS="italics">only</I> the left channel of stereo sounds out the internal speaker. Other machines (for example, the Macintosh SE/30 and Macintosh IIsi) mix both channels together before sending a signal to the internal speaker. You can use the <TT CLASS="cv">Gestalt</TT> function to determine if a particular machine mixes both left and right channels to the internal speaker. All Macintosh computers except the Macintosh SE and the Macintosh Plus, however, play stereo signals out the headphone jack.  </P><P CLASS="T1.Text1"><A NAME="pgfId=3359"> </A>The initialization parameters are additive. To initialize a channel for stereo sound with no linear interpolation, simply pass an initialization parameter that is the sum of the desired characteristics, as follows:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=9695"> </A>myErr := SndNewChannel(mySndChan, sampledSynth, <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initStereo+initNoInterp, NIL);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3361"> </A><A NAME="marker=9697"> </A>A call to <TT CLASS="cv">SndNewChannel</TT> is really only a request that the Sound Manager open a channel having the desired characteristics. It is possible that the parameters requested are not available. In that case, <TT CLASS="cv">SndNewChannel</TT> returns a <TT CLASS="cv">notEnoughHardwareErr</TT> error. In general, you should pass 0 as the third parameter to <TT CLASS="cv">SndNewChannel</TT> unless you know exactly what kind of sound is to be played.</P><P CLASS="T1.Text1"><A NAME="pgfId=3363"> </A>You can alter certain initialization parameters, even while a channel is actively playing a sound, by issuing the <TT CLASS="cv">reInitCmd</TT> command. For example, you can change the output channel from left to right, as shown in <A target="doc" HREF="imsoundmgr.d.htm#29292" CLASS="XRef">Listing 1-12</A>.<A NAME="marker=1280"> </A><A NAME="marker=1281"> </A></P><P CLASS="L.Listing"><A NAME="pgfId=3364"> </A>Listing&nbsp;12 <A NAME="29292"> </A>Reinitializing a sound channel</P><CODE CLASS="Cv.Code"><A NAME="pgfId=9701"> </A>VAR<BR>&nbsp;&nbsp;&nbsp;&nbsp;mySndCmd:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SndCommand;<BR>&nbsp;&nbsp;&nbsp;&nbsp;mySndChan:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SndChannelPtr;<BR>&nbsp;&nbsp;&nbsp;&nbsp;myErr: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr;<BR>.<BR>.<BR>.<BR>mySndCmd.cmd := reInitCmd;<BR>mySndCmd.param1 := 0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{unused}<BR>mySndCmd.param2 := initChanRight;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{new init parameter}<BR>myErr := SndDoImmediate(mySndChan, mySndCmd);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3365"> </A><A NAME="marker=9703"> </A>The <TT CLASS="cv">reInitCmd</TT> command accepts the <TT CLASS="cv">initNoInterp</TT> constant to toggle <A NAME="marker=16"> </A><B CLASS="bold">linear interpolation</B> on and off; it should be used with noncompressed sounds only. If an noncompressed sound is playing when you send a <TT CLASS="cv">reInitCmd</TT> command with this constant, linear interpolation begins immediately. You can also pass <TT CLASS="cv">initMono</TT>, <TT CLASS="cv">initChanLeft</TT>, or <TT CLASS="cv">initChanRight</TT> to pan to both channels, to the left channel, or to the right channel. This affects only monophonic sounds. The Sound Manager remembers the settings you pass and applies them to all further sounds played on that channel.<A NAME="marker=699"> </A><A NAME="marker=813"> </A><A NAME="marker=812"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.c.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.b.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.e.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
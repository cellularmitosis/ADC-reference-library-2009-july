<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>SignatureToApp - /MoreFiles Bits/CHeaders/FileCopy.h</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/Carbon/index.html">Carbon</a> &gt; <a href="../../samplecode/Carbon/idxFileManagement-date.html">File Management</a> &gt; <A HREF="javascript:location.replace('index.html');">SignatureToApp</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxFileManagement-date.html" target="_blank">Carbon > File Management</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">SignatureToApp</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/MoreFiles Bits/CHeaders/FileCopy.h</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/CarbonPrefix.h</option>
<option value="listing2.html">/Launch.c</option>
<option value="listing3.html">/MoreFiles Bits/CHeaders/DirectoryCopy.h</option>
<option value="listing4.html">/MoreFiles Bits/CHeaders/FileCopy.h</option>
<option value="listing5.html">/MoreFiles Bits/CHeaders/FSpCompat.h</option>
<option value="listing6.html">/MoreFiles Bits/CHeaders/FullPath.h</option>
<option value="listing7.html">/MoreFiles Bits/CHeaders/IterateDirectory.h</option>
<option value="listing8.html">/MoreFiles Bits/CHeaders/MoreDesktopMgr.h</option>
<option value="listing9.html">/MoreFiles Bits/CHeaders/MoreFiles.h</option>
<option value="listing10.html">/MoreFiles Bits/CHeaders/MoreFilesExtras.h</option>
<option value="listing11.html">/MoreFiles Bits/CHeaders/Search.h</option>
<option value="listing12.html">/MoreFiles Bits/Sources/MoreDesktopMgr.c</option>
<option value="listing13.html">/MoreFiles Bits/Sources/MoreFiles.c</option>
<option value="listing14.html">/MoreFiles Bits/Sources/MoreFilesExtras.c</option>
<option value="listing15.html">/MoreFiles Bits/Sources/Optimization.h</option>
<option value="listing16.html">/MoreFiles Bits/Sources/OptimizationEnd.h</option>
<option value="listing17.html">/MoreFiles Bits/Sources/Search.c</option>
<option value="listing18.html">/SignatureToApp.c</option>
<option value="listing19.html">/SignatureToApp.h</option>
<option value="listing20.html">/Standard.r</option></select>
				</p>
				</form>
				<p><strong><a href="SignatureToApp.zip">Download Sample</a></strong> (&#147;SignatureToApp.zip&#148;, 188.2K)<BR>
<strong><a href="SignatureToApp.dmg">Download Sample</a></strong> (&#147;SignatureToApp.dmg&#148;, 267.3K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*     File:       FileCopy.h      Contains:   A robust, general purpose file copy routine.      Version:    Technology: MoreFiles                 Release:    1.5.2      Copyright:  &copy; 1992-2001 by Apple Computer, Inc., all rights reserved.      Bugs?:      For bug reports, consult the following page on                 the World Wide Web:                      http://developer.apple.com/bugreporter/ *//*    You may incorporate this sample code into your applications without    restriction, though the sample code has been provided &quot;AS IS&quot; and the    responsibility for its operation is 100% yours.  However, what you are    not permitted to do is to redistribute the source as &quot;DSC Sample Code&quot;    after having made changes. If you're going to re-distribute the source,    we require that you make it clear in the source that the code was    descended from Apple Sample Code, but that you've made changes.*/#ifndef __FILECOPY__#define __FILECOPY__#ifndef __MACTYPES__#include &lt;MacTypes.h&gt;#endif#ifndef __FILES__#include &lt;Files.h&gt;#endif#include &quot;Optimization.h&quot;#if PRAGMA_ONCE#pragma once#endif#ifdef __cplusplusextern &quot;C&quot; {#endif#if PRAGMA_IMPORT#pragma import on#endif#if PRAGMA_STRUCT_ALIGN    #pragma options align=mac68k#elif PRAGMA_STRUCT_PACKPUSH    #pragma pack(push, 2)#elif PRAGMA_STRUCT_PACK    #pragma pack(2)#endif/*****************************************************************************/EXTERN_API( OSErr )FileCopy(  short              srcVRefNum,  long               srcDirID,  ConstStr255Param   srcName,  short              dstVRefNum,  long               dstDirID,  ConstStr255Param   dstPathname,  ConstStr255Param   copyName,  void *             copyBufferPtr,  long               copyBufferSize,  Boolean            preflight);/*    The FileCopy function duplicates a file and optionally renames it.    Since the PBHCopyFile routine is only available on some    AFP server volumes under specific conditions, this routine    either uses PBHCopyFile, or does all of the work PBHCopyFile    does.  The srcVRefNum, srcDirID and srcName are used to    determine the location of the file to copy.  The dstVRefNum    dstDirID and dstPathname are used to determine the location of    the destination directory.  If copyName &lt;&gt; NIL, then it points    to the name of the new file.  If copyBufferPtr &lt;&gt; NIL, it    points to a buffer of copyBufferSize that is used to copy    the file's data.  The larger the supplied buffer, the    faster the copy.  If copyBufferPtr = NIL, then this routine    allocates a buffer in the application heap. If you pass a    copy buffer to this routine, make its size a multiple of 512    ($200) bytes for optimum performance.        srcVRefNum      input:  Source volume specification.    srcDirID        input:  Source directory ID.    srcName         input:  Source file name.    dstVRefNum      input:  Destination volume specification.    dstDirID        input:  Destination directory ID.    dstPathname     input:  Pointer to destination directory name, or                            nil when dstDirID specifies a directory.    copyName        input:  Points to the new file name if the file is                            to be renamed or nil if the file isn't to                            be renamed.    copyBufferPtr   input:  Points to a buffer of copyBufferSize that                            is used the i/o buffer for the copy or                            nil if you want FileCopy to allocate its                            own buffer in the application heap.    copyBufferSize  input:  The size of the buffer pointed to                            by copyBufferPtr.    preflight       input:  If true, FileCopy makes sure there are enough                            allocation blocks on the destination volume to                            hold both the data and resource forks before                            starting the copy.        Result Codes        noErr               0       No error        readErr             \xD019     Driver does not respond to read requests        writErr             \xD020     Driver does not respond to write requests        badUnitErr          \xD021     Driver reference number does not                                    match unit table        unitEmptyErr        \xD022     Driver reference number specifies a                                    nil handle in unit table        abortErr            \xD027     Request aborted by KillIO        notOpenErr          \xD028     Driver not open        dskFulErr           -34     Destination volume is full        nsvErr              -35     No such volume        ioErr               -36     I/O error        bdNamErr            -37     Bad filename        tmfoErr             -42     Too many files open        fnfErr              -43     Source file not found, or destination                                    directory does not exist        wPrErr              -44     Volume locked by hardware        fLckdErr            -45     File is locked        vLckdErr            -46     Destination volume is read-only        fBsyErr             -47     The source or destination file could                                    not be opened with the correct access                                    modes        dupFNErr            -48     Destination file already exists        opWrErr             -49     File already open for writing        paramErr            -50     No default volume or function not                                    supported by volume        permErr             -54     File is already open and cannot be opened using specified deny modes        memFullErr          -108    Copy buffer could not be allocated        dirNFErr            -120    Directory not found or incomplete pathname        wrgVolTypErr        -123    Function not supported by volume        afpAccessDenied     -5000   User does not have the correct access        afpDenyConflict     -5006   The source or destination file could                                    not be opened with the correct access                                    modes        afpObjectTypeErr    -5025   Source is a directory, directory not found                                    or incomplete pathname        __________        Also see:   FSpFileCopy, DirectoryCopy, FSpDirectoryCopy*//*****************************************************************************/EXTERN_API( OSErr )FSpFileCopy(  const FSSpec *     srcSpec,  const FSSpec *     dstSpec,  ConstStr255Param   copyName,  void *             copyBufferPtr,  long               copyBufferSize,  Boolean            preflight);/*    The FSpFileCopy function duplicates a file and optionally renames it.    Since the PBHCopyFile routine is only available on some    AFP server volumes under specific conditions, this routine    either uses PBHCopyFile, or does all of the work PBHCopyFile    does.  The srcSpec is used to    determine the location of the file to copy.  The dstSpec is    used to determine the location of the    destination directory.  If copyName &lt;&gt; NIL, then it points    to the name of the new file.  If copyBufferPtr &lt;&gt; NIL, it    points to a buffer of copyBufferSize that is used to copy    the file's data.  The larger the supplied buffer, the    faster the copy.  If copyBufferPtr = NIL, then this routine    allocates a buffer in the application heap. If you pass a    copy buffer to this routine, make its size a multiple of 512    ($200) bytes for optimum performance.        srcSpec         input:  An FSSpec record specifying the source file.    dstSpec         input:  An FSSpec record specifying the destination                            directory.    copyName        input:  Points to the new file name if the file is                            to be renamed or nil if the file isn't to                            be renamed.    copyBufferPtr   input:  Points to a buffer of copyBufferSize that                            is used the i/o buffer for the copy or                            nil if you want FileCopy to allocate its                            own buffer in the application heap.    copyBufferSize  input:  The size of the buffer pointed to                            by copyBufferPtr.    preflight       input:  If true, FSpFileCopy makes sure there are                            enough allocation blocks on the destination                            volume to hold both the data and resource forks                            before starting the copy.        Result Codes        noErr               0       No error        readErr             \xD019     Driver does not respond to read requests        writErr             \xD020     Driver does not respond to write requests        badUnitErr          \xD021     Driver reference number does not                                    match unit table        unitEmptyErr        \xD022     Driver reference number specifies a                                    nil handle in unit table        abortErr            \xD027     Request aborted by KillIO        notOpenErr          \xD028     Driver not open        dskFulErr           -34     Destination volume is full        nsvErr              -35     No such volume        ioErr               -36     I/O error        bdNamErr            -37     Bad filename        tmfoErr             -42     Too many files open        fnfErr              -43     Source file not found, or destination                                    directory does not exist        wPrErr              -44     Volume locked by hardware        fLckdErr            -45     File is locked        vLckdErr            -46     Destination volume is read-only        fBsyErr             -47     The source or destination file could                                    not be opened with the correct access                                    modes        dupFNErr            -48     Destination file already exists        opWrErr             -49     File already open for writing        paramErr            -50     No default volume or function not                                    supported by volume        permErr             -54     File is already open and cannot be opened using specified deny modes        memFullErr          -108    Copy buffer could not be allocated        dirNFErr            -120    Directory not found or incomplete pathname        wrgVolTypErr        -123    Function not supported by volume        afpAccessDenied     -5000   User does not have the correct access        afpDenyConflict     -5006   The source or destination file could                                    not be opened with the correct access                                    modes        afpObjectTypeErr    -5025   Source is a directory, directory not found                                    or incomplete pathname        __________        Also see:   FileCopy, DirectoryCopy, FSpDirectoryCopy*//*****************************************************************************/#include &quot;OptimizationEnd.h&quot;#if PRAGMA_STRUCT_ALIGN    #pragma options align=reset#elif PRAGMA_STRUCT_PACKPUSH    #pragma pack(pop)#elif PRAGMA_STRUCT_PACK    #pragma pack()#endif#ifdef PRAGMA_IMPORT_OFF#pragma import off#elif PRAGMA_IMPORT#pragma import reset#endif#ifdef __cplusplus}#endif#endif /* __FILECOPY__ */</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/SignatureToApp/listing4.html%3Fid%3DDTS10000755-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/SignatureToApp/listing4.html%3Fid%3DDTS10000755-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/SignatureToApp/listing4.html%3Fid%3DDTS10000755-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
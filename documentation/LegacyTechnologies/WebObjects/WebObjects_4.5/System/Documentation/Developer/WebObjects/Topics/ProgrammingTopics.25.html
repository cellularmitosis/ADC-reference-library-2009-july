<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Deleting with the Adaptor Sublayer</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.24.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.26.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606100"> </A><A NAME="24751"> </A>Deleting with the Adaptor Sublayer</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606101"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606102"> </A>Describes how to delete a row from the database using the adaptor sublayer.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606103"> </A>Description</H2><P CLASS="Body-Text"><A NAME="pgfId=621058"> </A>There are three ways to delete a row into the database with the adaptor sublayer. You can use raw SQL employing the adaptor channel's <TT CLASS="Code">evaluateExpression</TT> method, the adaptor channel's deleteRowDescribedByQualifier method, or a stored procedure.</P><P CLASS="Body"><A NAME="pgfId=621059"> </A>In this topic we describe how to delete a row using the deleteRowDescribedByQualifier method. This method eliminates the overhead associated with snapshots, uniquing, and fault creation. Furthermore, the source code does not depend on the particular database you use. </P><P CLASS="Body"><A NAME="pgfId=621112"> </A>If you are working with an editing context and deleting using the adaptor sublayer at the same time, EOF does not realize that an objected has been deleted. You need to synchronize any enterprise objects with the changes to the database. </P><P CLASS="Body"><A NAME="pgfId=621061"> </A>To delete a row using the adaptor channel's deleteRowDescribedByQualifier method, you need to provide</P><UL><LI CLASS="Bulleted"><A NAME="pgfId=621062"> </A>An EOModel mapping entities to database tables.</LI><LI CLASS="Bulleted"><A NAME="pgfId=621064"> </A>An adaptor channel that is connected to the database. (See the programming topics <A HREF="ProgrammingTopics.30.html#27044" CLASS="XRef">Accessing Adaptor Sublayer Objects</A>, <A HREF="ProgrammingTopics.31.html#17565" CLASS="XRef">Creating Adaptor Sublayer Objects and Connecting Them to the Server</A>, and <A HREF="ProgrammingTopics.33.html#24267" CLASS="XRef">Accessing Schema Information from the Database Server</A> for more information about getting an adaptor channel.</LI><LI CLASS="Bulleted"><A NAME="pgfId=621074"> </A>The name of the entity from which you wish to delete, for example, &quot;<TT CLASS="Code">Movie</TT>&quot;.</LI><LI CLASS="Bulleted"><A NAME="pgfId=621403"> </A>An EOQualifier specifying which row to delete. See the programming topic <A HREF="ProgrammingTopics.1d.html#21221" CLASS="XRef">Creating EOQualifiers Programmatically</A> for more information about creating qualifiers.</LI></UL><P CLASS="Body"><A NAME="pgfId=621405"> </A>The following code deletes a row using the adaptor sublayer.</P><PRE CLASS="Code"><A NAME="pgfId=621406"> </A>EOAdaptorChannel myAdaptorChannel; // assume exists<A NAME="pgfId=620860"> </A>String modelName = &quot;movies&quot;;<A NAME="pgfId=621175"> </A>String entityName = &quot;Movie&quot;;<A NAME="pgfId=620865"> </A><A NAME="pgfId=621218"> </A>EOQualifier myQualifier = EOQualifier.qualifierWithQualifierFormat<A NAME="pgfId=621229"> </A>    (&quot;title = 'EOF III: The Multithreading'&quot;);<A NAME="pgfId=621272"> </A><A NAME="pgfId=621281"> </A>EOModel myModel = EOModelGroup.defaultGroup().modelNamed(modelName)<A NAME="pgfId=621273"> </A>EOEntity myEntity = myModel.entityNamed(entityName);<A NAME="pgfId=621274"> </A><A NAME="pgfId=620868"> </A>// delete row<A NAME="pgfId=620869"> </A>myAdaptorChannel.openChannel();<A NAME="pgfId=620870"> </A>myAdaptorChannel.deleteRowsDescribedByQualifier(myQualifier,myEntity);<A NAME="pgfId=620872"> </A>myAdaptorChannel.closeChannel();	</PRE><P CLASS="Body"><A NAME="pgfId=621308"> </A>The code first creates the qualifier that identifies the row you wish to delete.</P><P CLASS="Body"><A NAME="pgfId=621309"> </A>The code then finds the EOModel corresponding to the model name in the default model group. The default model group, accessed using <TT CLASS="Code">EOModelGroup.defaultGroup()</TT> is a collection of EOModel objects corresponding to the models in the project's Resources suitcase. If you already have the EOModel, you don't need this step. Next, the code determines the EOEntity corresponding to the given entity name from the EOModel.</P><P CLASS="Body"><A NAME="pgfId=620920"> </A>Before performing deleteRowsDescribedByQualifier with the adaptor channel, the code establishes a connection to the database using the <TT CLASS="Code">openChannel</TT> method. The <TT CLASS="Code">closeChannel</TT> method invocation disconnects the channel from the database.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=621385"> </A>Deleting Multiple Rows</H3><P CLASS="Body"><A NAME="pgfId=621414"> </A>The deleteRowDescribedByQualifier method deletes a single row from the database. If the qualifier matches more than one row, the method deletes the matching rows and raises an exception. If you need to delete more than one row, use the deleteRowsDescribedByQualifier which will not raise an exception when multiple rows match the qualifier. This method also returns the number of rows that were deleted.</P></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=621326"> </A>Deletion Failures</H3><P CLASS="Body"><A NAME="pgfId=621327"> </A>The deletion can fail for the following reasons:</P><UL><LI CLASS="Bulleted"><A NAME="pgfId=615367"> </A>	The user logged on to the database does not have permission to delete the row.</LI><LI CLASS="Bulleted"><A NAME="pgfId=621334"> </A>The EOAdaptorChannel is in an invalid state for inserting, for example, a fetch is in progress. To test if a fetch is in progress, use the adaptor channel's <TT CLASS="Code">isFetchInProgress</TT> method.</LI></UL></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606141"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606142"> </A><A HREF="ProgrammingTopics.30.html#27044" CLASS="XRef">Accessing Adaptor Sublayer Objects</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=620968"> </A><A HREF="ProgrammingTopics.31.html#17565" CLASS="XRef">Creating Adaptor Sublayer Objects and Connecting Them to the Server</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=620943"> </A><A HREF="ProgrammingTopics.33.html#24267" CLASS="XRef">Accessing Schema Information from the Database Server</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=620761"> </A><A HREF="ProgrammingTopics.24.html#36344" CLASS="XRef">Inserting with the Adaptor Sublayer</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=606143"> </A><A HREF="ProgrammingTopics.27.html#10154" CLASS="XRef">Updating with the Adaptor Sublayer</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=615417"> </A><A HREF="ProgrammingTopics.32.html#35319" CLASS="XRef">Executing Arbitrary SQL Statements</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=616312"> </A>EOQualifier class specification in the <EM CLASS="Emphasis">Enterprise Objects Framework Reference</EM></LI><LI CLASS="Bulleted"><A NAME="pgfId=616317"> </A>EOAdaptor class specification in the <EM CLASS="Emphasis">Enterprise Objects Framework Reference</EM></LI><LI CLASS="Bulleted"><A NAME="pgfId=616322"> </A>EOAdaptorContext class specification in the <EM CLASS="Emphasis">Enterprise Objects Framework Reference</EM></LI><LI CLASS="Bulleted"><A NAME="pgfId=616327"> </A>EOAdaptorChannel class specification in the <EM CLASS="Emphasis">Enterprise Objects Framework Reference</EM></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606144"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606145"> </A>	How do I delete an object using the adaptor sublayer?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606146"> </A>	How do I delete an array of objects described by a qualifier?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606147"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606148"> </A>Delete Row</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606149"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606150"> </A>22 July, 1998. Seejo Pylappan. First Draft.</P><P CLASS="Body"><A NAME="pgfId=621039"> </A>13 November, 1998. Clif Liu. Second Draft.</P><P CLASS="Body"><A NAME="pgfId=621044"> </A>16 March, 1999. Clif Liu. Third Draft.</P><PRE CLASS="Code"><A NAME="pgfId=602450"> </A></PRE></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.24.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.26.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
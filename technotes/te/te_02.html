<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TE02: Font Family Numbers</title>                                       <meta name="categories" content="Text"><meta name="week-posted" content="Jul 31, 1989 - Aug 4, 1989"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002810" title="Font Family Numbers"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxTextFonts-date.html">Text & Fonts</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/TextFonts/index.html" target="_blank">Reference Library > Text & Fonts</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TE02</div>
<div id="pageheadsub">Font Family Numbers</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#Section2">A Brief History of Fonts Resources and Font Family IDs</A><BR><BR><A HREF="#Section3">Scripts and their Ranges</A><BR><BR><A HREF="#Section4">Breakdown of the Roman Script Range</A><BR><BR><A HREF="#Section5">The History of Font Registration</A><BR><BR><A HREF="#Section6">Ask For It by Name</A><BR><BR><A HREF="#Section7">Notes on the Location of Font Resources</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Changes">Change History</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note discusses the range of numbers available for identifyingfont families, how they are allocated among script systems, and what numbersshould be used for fonts that were designed to be used as a tool in anapplication.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Mar 01 1991]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><p>The <code>txFont</code> field in a <code>GrafPort</code> record is a signed word.  Thismeans that there are 32,768 positive numbers that can be used to identify fontfamilies (0 through 32,767).  Currently these numbers are broken into groupsand assigned to different script interface systems.  Apple has also created apseudo-script called <code>smUninterp</code>.  This pseudo-script provides a rangeof numbers that can be used to identify fonts that are used as tools in anapplication.  An example of this is the font used by MacPaintreg. for itspalette symbols.</p><P><A HREF="#top">Back to top</A></p><a name="Section2"></a><h2>A Brief History of Fonts Resources and Font Family IDs</h2><p>There are, as of System 7.0, four types of resource for storing font data andfont family information:   <code>'FONT'</code>, <code>'NFNT'</code>, <code>'FOND'</code>,and <code>'sfnt'</code>.</p><p>When the Macintosh was first introduced, all font data was stored in the<code>'FONT'</code> resource. Fonts with the same typeface but different sizes weregrouped together into families by storing a unique family ID in bits 7-14 ofthe font's resource ID and the font's point size in bits 0-6.  The family wasnamed by including a <code>'FONT'</code> resource with a point size of zero.  Thismethod is documented in <i>Inside Macintosh</i>, I-234, The Font Manager.  Adisadvantage of this system was that, since the font family ID had to fit intoeight bits, the range of numbers available was only 0-255;  0-127 were reservedfor Apple, and 128-255 were available for third-party developers.</p><p>With the arrival of the 128K ROMs came two new resources, <code>'NFNT'</code> and<code>'FOND'</code>, which are documented in Inside Macintosh Volume IV, chapter 5,The Font Manager.  The <code>'NFNT'</code> has the same internal format as the old<code>'FONT'</code> resource, but may use any resource ID, since it is associatedto its family not by its resource ID, but rather by a table in a new resource,the <code>'FOND'</code>.  The <code>'FOND'</code>, which stores size-independent familyinformation, contains a family name and a font association table (<i>InsideMacintosh</i>, IV-39) with entries for each <code>'FONT'</code> or <code>'NFNT'</code>resource in its family.  Each font association table entry includes a word tohold a specific font's point size, a word for its style, and a word for itsassociated <code>'FONT'</code> or <code>'NFNT'</code> resource ID.  Since font familieswere now identified by a <code>'FOND'</code> ID, not by eight bits in a<code>'FONT'</code> ID, the range of font family IDs was expanded to 0 through32,767.</p><p>The addition of outline font support saw the introduction of the 'sfnt'resource, whose internal format differs substantially from the older font dataresources (<code>'FONT'</code> and <code>'NFNT'</code>) and is documented in <i>TheTrueType Font Format Specification</i>, APDA catalog number M0825LL/A.  As withthe <code>'FONT'</code> and <code>'NFNT'</code> resource types, the 'sfnt' is groupedinto a font family by an entry in the font association table of the<code>'FOND'</code>;  such an entry always has a listed point size of zero.</p><P><A HREF="#top">Back to top</A></p><a name="Section3"></a><h2>Scripts and their Ranges</h2><p>As stated in the introduction, each script interface system that can run on theMacintosh has a range of font family IDs assigned to it.  A script's range canbe calculated (see <A HREF = "te_05.html">Macintosh Technical Note #242, "Fonts and the ScriptManager"</a>), but a table of scripts, their script IDs, and the range of fontfamily IDs assigned to each script are provided in this Note.</p><P align=center><img src="images/te_02_001.gif" alt="font family id table" width=328 height=440></p><ul type="disc">	<li>Font family IDs 0 to 1 are reserved.  The system always maps the correct system font to font 0 and the correct application font to font 1.  On a Roman system, Chicago is the system font and Geneva is the application font. Obviously this is not true on the Kanji system or any other non-Roman script interface system (see <A HREF = "te_05.html">Technical Note #242, Fonts and the Script Manager</a> for more details on how various script systems map fonts to font family 0).</li></ul><a name="Section4"></a><P><A HREF="#top">Back to top</A></p><h2>Breakdown of the Roman Script Range</h2><p>The 16,384 IDs available for Roman systems are further delimited as follows:</p><p>0 to 255    Font families which are named in the method described in <i>InsideMacintosh</i>, Volume 1, The Font Manager.  These IDs should no longer be used.Please note that Apple's system fonts (e.g., Chicago, Geneva, New York, etc.)will always retain their old IDs.  Also note that IDs 0 and 1 are especiallyinviolate, as the system has the right to map any font family from any scriptsystem to these IDs.</p><P>256 to 1023    Reserved numbers.  These numbers should be thought of as reservedspace that the Font/DA Mover can use to resolve past and future font IDconflicts.  Numbers in this range should not be used as a font family'soriginal ID.</p><P>1024 to 16382    Commercial fonts.  A particular Roman font family should alwaysfall somewhere in this range, though its exact position may vary, or be alteredduring the copying of fonts, to avoid conflict with other families.</p><P>16383    <b>Reserved</b>.  This number should not be used.</p><p>On non-Roman script systems, the system font in that script will be ID 0.  Onsuch systems, Chicago is mapped to 16383 rather than 0;  the system softwarewill always look at 16383 rather than 0 for Chicago in these cases.</p><p>Developers who use a font as a method of storing symbols which are used in apalette, or store a font in the resource fork of their application for someother special purpose, should use numbers in the range 32,256-32,767.  Thisrange is not associated with any script.</p><a name="Section5"></a><P><A HREF="#top">Back to top</A></p><h2>The History of Font Registration</h2><p>Obviously, there are a lot more font family IDs available for Roman systemsthan for any other.  This situation is fortunate, because there are a lot morefonts designed and sold for Roman languages than for any other.  In fact, todaythere are many more fonts than unique font family IDs, and so many families maybe using the same ID, causing potential conflicts among them.</p><p>In an attempt to alleviate the <code>'FOND'</code> ID conflict problem, MacintoshDeveloper Technical Support implemented a font registration program in early1989.  The registration program provided ID numbers only to those font familieswhich were entirely composed of <code>'NFNT'</code> resources.  Families whichconsisted of <code>'FONT'</code> resources <b>and</b> <code>'NFNT'</code> resourceswere not registered.</p><p>As of late 1990, all free font family IDs had been registered, so any new fontfamilies created after that time must share their ID with a registered family;Developer Technical Support no longer registers family IDs.</p><a name="Section6"></a><P><A HREF="#top">Back to top</A></p><h2>Ask For It by Name</h2><p>The paucity of unique 'FOND' IDs is not as catastrophic as it sounds.  SinceApril 2, 1988 (See <A HREF = "te_04.html">Macintosh Technical Note #191, "Font Names"</a>), Apple Computerhas recommended that developers make all references to font families by name,not number.  With that document's description of how to store font informationby name in applications and documents, the only remaining major hurdle to'FOND' ID independence was that the 'PICT' resource still identified fonts byfamily number;  with System 6.0.5, however, a new 'PICT' opcode was added toallow 'PICT's to reference font data by 'FOND' name.</p><p>As of this writing, nearly all major applications identify families by name,and since Font/DA Mover and System 7.0 renumber conflicting families whencopying fonts, there should never be confusion except when using newer fonts onold software which references by number.</p><a name="Section7"></a><P><A HREF="#top">Back to top</A></p><h2>Notes on the Location of Font Resources</h2><p>Certain restrictions apply when storing font resources in an application'sresource fork.  Due to the order of preference with which the font managerlooks for font resources, you should make sure your application font does notuse the same name as any system font resource.  Otherwise, the system mayunexpectedly or intermittently choose the system's version of the font overyours, particularly under System 7.</p><p>Fonts should <b>never</b> be stored in a document's resource fork.  If youclose a font-laden document, the system will retain references to memory whichwas deallocated when the document closed;  the system could then alter memoryat those locations and corrupt the heap.  In addition, System 7 does notsupport the storing of fonts in document resources.  Note that HyperCard stacks<b>are</b> documents.  If you feel that your stack loses all its artistic meritwithout a certain font, you should license it for distribution in a suitcasefile and let the users install it in their systems.</p><p>Fonts are <b>proprietary</b>;  to include unlicensed fonts with yourapplication violates copyright laws.  Contact a font developer for permissionbefore releasing its fonts with your software.</p><P><A HREF="#top">Back to top</A></p><h2>References</h2><P><i>Inside Macintosh</i>, Volume I, The Font Manager</p><P><i>Inside Macintosh</i>, Volume IV, The Font Manager</p><P><i>Inside Macintosh</i>, Volume VI, The Font Manager</p><P><A HREF = "te_04.html">Technical Note M.IM.FontNames -- Font Names</a></p><P><A HREF = "te_05.html">Technical Note M.TE.FontsAndScripts -- Fonts and the Script Manager</a></p><P>The TrueType Font Format Specification, APDA catalog numberM0825LL/A.</p><p>MacPaint is a registered trademark of Claris Corporation.</p><P><A HREF="#top">Back to top</A></p><P><A NAME=changes></A></P>                  <H2>Change History</H2>                  <P>Add this section if there are changes. If you're writing         a new technote, then you can remove this section.</P>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH=544>            <TR>               <td width=100 align=left>                  <P ALIGN=center>01-August-1990</P>               </TD>               <td align="left">                  <P>Originally written.</P>               </TD>            </TR>            <TR>               <td width=100 align=left>                  <P ALIGN=center>01-March-1991</P>               </TD>               <td align="left">                  <P>Apple Computer no longer registers font familyID numbers;  this note has been altered to reflect the change in policy.  Also,the relationship of outline fonts to font families is discussed briefly.</P>               </TD>            </TR>         </TABLE>         <BR>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (176K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/te_02.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/te/te_02.html%3Fid%3DDTS10002810-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/te/te_02.html%3Fid%3DDTS10002810-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/te/te_02.html%3Fid%3DDTS10002810-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Device Manager Functions(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING21></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-20.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-22.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-10.html"><B>Chapter 1 - Device Manager</B></A> / <A HREF="Devices-17.html"><B>Device Manager Reference</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING21-0></A>
<H2><A NAME=MARKER-9-294></A>Device Manager Functions</H2>
 <A NAME=MARKER-2-176></A>This section describes the functions you use to<P>
<UL>
<LI>open and close device drivers
<LI>communicate with device drivers
<LI>control and monitor device drivers
<LI>write and install device drivers<P>
</UL>
 The low-level Device Manager functions described in this section (those that use the parameter block structure to pass information) provide two advantages over the corresponding high-level functions:<P>
<UL>
<LI>These functions can be executed asynchronously, returning control to your application before the operation is completed.
<LI>In most cases, these functions provide more extensive information or perform advanced operations.<P>
</UL>
 All of these functions exchange parameters with your application through a parameter block of type <CODE>ParamBlockRec</CODE>. When you call a low-level function, you pass the address of the parameter block to the function.<P>
 There are three versions of most low-level functions. The first takes two parameters: a pointer to the parameter block and a Boolean parameter that specifies whether the function is to execute asynchronously (<CODE>true</CODE>) or synchronously (<CODE>false</CODE>). For example, the first version of the low-level <CODE>PBRead</CODE> function has this declaration:<P>
<PRE>
pascal OSErr PBRead(ParmBlkPtr paramBlock, Boolean async); 
</PRE>
 The second version does not take a second parameter; instead, it adds the suffix <CODE>Sync</CODE> to the name of the function.<P>
<PRE>
pascal OSErr PBReadSync(ParmBlkPtr paramBlock);
</PRE>
 Similarly, the third version of the function does not take a second parameter; instead, it adds the suffix <CODE>Async</CODE> to the name of the function.<P>
<PRE>
pascal OSErr PBReadAsync(ParmBlkPtr paramBlock);
</PRE>
 Only the first version of each function is documented in this section. Note, however, that the second and third versions of these functions do not use the glue code that the first version uses and are therefore more efficient. See <A HREF=Devices-52.html#MARKER-9-401>"Summary of the Device Manager," beginning on page 1-91</A>, for a listing of all three versions of these functions. <P>
<DL>
<DT><B><A NAME=MARKER-9-296></A>Assembly-Language Note</B>
<DD>All Device Manager functions are synchronous by default. If you want a function to be executed asynchronously, set bit 10 of the trap word. To execute a function immediately, set bit 9 of the trap word. You can set these bits by appending the word <CODE>ASYNC</CODE> or <CODE>IMMED</CODE> as the second argument to the trap macro. For example:  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<PRE>
_Read, ASYNC
_Control, IMMED
</PRE>
<DL>
<DD><A NAME=MARKER-2-302></A><A NAME=MARKER-2-300></A>You can set or test bit 10 of a trap word using the global constant <CODE>asyncTrpBit</CODE>. You can set or test bit 9 of the trap word using the global constant <CODE>noQueueBit</CODE>.<A NAME=MARKER-2-105></A><A NAME=MARKER-2-300></A><A NAME=MARKER-9-160></A><A NAME=MARKER-2-302></A><EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
<DT><B>WARNING</B>
<DD>Never call any synchronous Device Manager function at interrupt time. This includes all of the high-level functions and the synchronous versions of the low-level functions. <BR><BR><A NAME=MARKER-2-203></A>A synchronous request at interrupt time may block other pending I/O requests. Because the device driver cannot begin processing the synchronous request until it completes the other requests in its queue, this situation can cause the Device Manager to loop indefinitely while it waits for the device driver to complete the synchronous request.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Devices-22.html#HEADING22-0">Opening and Closing Device Drivers</A>
<DD>
<DT><A HREF="Devices-30.html#HEADING30-0">Communicating With Device Drivers</A>
<DD>
<DT><A HREF="Devices-35.html#HEADING35-0">Controlling and Monitoring Device Drivers</A>
<DD>
<DT><A HREF="Devices-42.html#HEADING42-0">Writing and Installing Device Drivers</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-20.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-22.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

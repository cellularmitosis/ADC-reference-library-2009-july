<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Bindings Programming Topics: Troubleshooting Cocoa Bindings</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Troubleshooting Cocoa Bindings"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002148" title="Troubleshooting Cocoa Bindings"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../index.html" target="_top">Cocoa Bindings Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Articles/ControllerKey-ValueObservingCompliance.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40002148-BCICADHC" title="Troubleshooting Cocoa Bindings"></a><hr /><H1>Troubleshooting Cocoa Bindings</H1><p>Applications that use Cocoa bindings can provide a challenge when attempting to troubleshoot problems. This article outlines some of the common issues encountered in applications that use Cocoa bindings and provides clues as to correcting the problem.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182809">My collection controller isn’t displaying the current data</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182467">Changing the value in the user interface programmatically is not reflected in the model</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-DontLinkElementID_6">Changing the value of a model property programmatically is not reflected in the user interface</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182476">Binding to the incorrect key path</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182621">The bindings of my custom view are disabled in Interface Builder</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-181975">An uneditable/visible/disabled NSTextField becomes editable/hidden/enabled</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182420">Binding a control to a value that is an unsigned int causes an exception</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182694">The view bound to an NSTreeController is not displaying data</a>
				
			<br/>
			
        
			
			
				<a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182941">A table column containing NSPopUpButtonCell items is not sortable</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002148-182809" title="My collection controller isn&acirc;&#128;&#153;t displaying the current data"></a><h2>My collection controller isn’t displaying the current data</h2><p>This is typically due to your application modifying the collection content in a manner that is not key-value-observing compliant. Modifying an array using <code>addObject:</code> or <code>removeObject:</code> is not sufficient.</p><p>You must either implement the indexed accessors for the collection key in your model class, or ask the model for a key-value-observing aware collection proxy using one of the following methods:</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSMutableArray *)mutableArrayValueForKey:(NSString *)key<span></span></pre></td></tr><tr><td scope="row"><pre>- (NSMutableArray *)mutableArrayValueForKeyPath:(NSString *)keyPath<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (NSMutableSet *)mutableSetValueForKey:(NSString *)key<span></span></pre></td></tr><tr><td scope="row"><pre>- (NSMutableSet *)mutableSetValueForKeyPath:(NSString *)keyPath<span></span></pre></td></tr></table></div><p>These return collection proxy objects that you can then use with the NSMutableArray or NSMutableSet mutation methods, and the appropriate key-value observing notifications are sent.</p><p>You can also modify the contents through the collection controller using the methods described in <span class="content_text"><a href="CntrlContent.html#//apple_ref/doc/uid/TP40002147-183285">“Programmatically Modifying a Controller’s Contents.”</a></span></p><a name="//apple_ref/doc/uid/TP40002148-182467" title="Changing the value in the user interface programmatically is not reflected in the model"></a><h2>Changing the value in the user interface programmatically is not reflected in the model</h2><p>If you change the value of an item in the user interface programmatically, for example sending an NSTextField a <code>setStringValue:</code> message, the model is not updated with the new value.</p><p>This is the expected behavior. Instead you should change the model object using a key-value-observing compliant manner.</p><a name="//apple_ref/doc/uid/TP40002148-DontLinkElementID_6" title="Changing the value of a model property programmatically is not reflected in the user interface"></a><h2>Changing the value of a model property programmatically is not reflected in the user interface</h2><p>If changes made to a model value programmatically are not being reflected in the user interface, this typically indicates that the model object is not key-value-observing compliant for the property, or that you are modifying the value in a manner that is bypassing key-value observing. You should ensure that:</p><ul class="ul"><li class="li"><p>The model class has automatic key-value observing enabled or implements manual key-value observing for the property.</p></li><li class="li"><p>That you are changing the value using an accessor method, or using a key-value-coding compliant method. Changing the value of an instance variable directly does not provide key-value observing change notifications.</p></li><li class="li"><p>If your model property is a collection, that you're modifying the content in a key-value-observing compliant manner. See <span class="content_text"><a href="Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182809">“My collection controller isn’t displaying the current data”</a></span> for more information.</p></li></ul><a name="//apple_ref/doc/uid/TP40002148-182476" title="Binding to the incorrect key path"></a><h2>Binding to the incorrect key path</h2><p>A common source of problems when using bindings is that a binding is established to the wrong key path. It is easy to miss the debug messages in the run log or console when the application doesn’t behave as expected. </p><p>The following is an example of a debug message that is output to the run log or console:</p><div class="codesample"><table><tr><td scope="row"><pre>2005-05-10 03:53:29.764 VuesActivity[2216] *** NSRunLoop ignoring exception '[&lt;Member 0x379180> valueForUndefinedKey:]:<span></span></pre></td></tr><tr><td scope="row"><pre>this class is not key value coding-compliant for the key named.' that raised during posting of delayed perform<span></span></pre></td></tr><tr><td scope="row"><pre>with target 37f6d0 and selector 'invokeWithTarget:'<span></span></pre></td></tr></table></div><p>This message indicates that the instance of the Member class is not key-value-coding compliant for the key "named". In this case the error is that the correct Member key is in fact "name".</p><p>You can get more information about an error by setting the bindings debug level default. This can be done on the command line as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults write com.yourdomain.yourapplication NSBindingDebugLogLevel 1<span></span></pre></td></tr></table></div><p>You can also set the debugging level in Xcode:</p><ol class="ol"><li class="li"><p>Select the application executable in the Executables group.</p></li><li class="li"><p>Choose the Get Info menu item in the File menu.</p></li><li class="li"><p>Select the Arguments tab in the executables info panel.</p></li><li class="li"><p>Add <code>-NSBindingDebugLogLevel 1</code> to the “Arguments to be passed at launch” list.</p></li></ol><p>After setting the debug level default, the same problem that generated the above error message now generates the following error:</p><div class="codesample"><table><tr><td scope="row"><pre>2005-05-10 04:02:32.146 VuesActivity[2241] Cocoa Bindings: Error accessing value for key path selection.named<span></span></pre></td></tr><tr><td scope="row"><pre>of object &lt;NSArrayController: 0x349ba0>[object class: Member, number of selected objects: 1]<span></span></pre></td></tr><tr><td scope="row"><pre>(from bound object &lt;NSTextField: 0x344380>): [&lt;Member 0x37a660> valueForUndefinedKey:]: this class<span></span></pre></td></tr><tr><td scope="row"><pre>is not key value coding-compliant for the key named.<span></span></pre></td></tr></table></div><p>This provides more information that can aid you in tracking down which item in Interface Builder has been bound to the wrong key path. In this case it indicates that the binding is between an NSTextField and an NSArrayController with an object class of Member, using the <code>selection.named</code> key path.</p><p>With the binding debug level set to 1, any binding made to a non-existent key will cause a debug message to be printed to the console, even if the binding has disabled the “Raises For Not Applicable Keys” option.</p><p>Currently only a debug level of 1 is supported. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002148-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;The bindings error messages are logged after the exception is raised. If your application is set to break on [NSException raise] you will not see the error message in the run log or <code>gdb</code>. Be sure to check your <code>.gdbinit</code> file for a breakpoint if you still do not see the bindings error messages.</p></div><a name="//apple_ref/doc/uid/TP40002148-182621" title="The bindings of my custom view are disabled in Interface Builder"></a><h2>The bindings of my custom view are disabled in Interface Builder</h2><p>If you implement a subclass of NSView and create an Interface Builder palette for that subclass, your subclass’ implementation of <code>bind:toObject:withKeyPath:options:</code> must call the super implementation. If you don’t when you establish a binding in Interface Builder, the binding values disappear and the binding names become disabled and uneditable.</p><a name="//apple_ref/doc/uid/TP40002148-181975" title="An uneditable/visible/disabled NSTextField becomes editable/hidden/enabled"></a><h2>An uneditable/visible/disabled NSTextField becomes editable/hidden/enabled</h2><p>If you disable editing for an NSTextField in Interface Builder, and then establish a binding to it, you may find that the field then becomes editable when your application is running. This is typically due to the value binding having the “Conditionally Sets Editable” binding option enabled.</p><p>Similarly, if a control becomes hidden or enabled, you should check that the “Conditionally Sets Hidden” and “Conditionally Sets Enabled” options of the value binding have the expected settings.</p><a name="//apple_ref/doc/uid/TP40002148-182420" title="Binding a control to a value that is an unsigned int causes an exception"></a><h2>Binding a control to a value that is an unsigned int causes an exception</h2><p>Key-value coding handles the conversion of NSNumbers and NSValues to some well-known scalar and structure types, but unsigned int is not currently supported. In the context of bindings, you should consider transforming the value using an NSValueTransformer, or in the specific case of NSTextField, NSFormatter.</p><a name="//apple_ref/doc/uid/TP40002148-182694" title="The view bound to an NSTreeController is not displaying data"></a><h2>The view bound to an NSTreeController is not displaying data</h2><p>This is often caused because the NSTreeController’s children key path has not been set. You can verify that this is the cause by checking the console or run log for debug messages. See <span class="content_text"><a href="CntrlContent.html#//apple_ref/doc/uid/TP40002147-185041">“Traversing Tree Content with an NSTreeController”</a></span> for more information. </p><div class="codesample"><table><tr><td scope="row"><pre>2005-06-23 02:46:53.198 MyApplication[6777] Cocoa Bindings: Cannot perform operation if childrenKeyPath is nil.<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002148-182941" title="A table column containing NSPopUpButtonCell items is not sortable"></a><h2>A table column containing NSPopUpButtonCell items is not sortable</h2><p>Tableview columns that contain NSPopUpButtonCell, or any cell type other than NSTextField can’t be sorted if the cell’s selection is bound using the <code>selectedObject</code> or <code>selectedObjects</code> bindings. If the selection is bound to selectedValue, selectedTag or selectedIndex, the column is sortable.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Articles/ControllerKey-ValueObservingCompliance.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-03-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/CocoaBindings/Concepts/Troubleshooting.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/CocoaBindings/Concepts/Troubleshooting.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/CocoaBindings/Concepts/Troubleshooting.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<html><head>
<script language="JavaScript" src="../../../../../../../../../../frametest.js"></script>
<title>EODatabaseOperation</title></head>
<body bgcolor=#ffffff>

<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header -->

<!--start of path -->
<font face="Geneva,Helvetica,Arial" size="1">
<b>PATH<spacer type="horizontal" size="5">&nbsp;</b>
 <a href="../../../../../../../../../../webobjects.html" target="_top">WebObjects 4.0 Documentation</a> <b>&gt;</b>
 <a href="../frameset.html" target="_top">EOAccess Reference</a>
</font>
<br><br>
<!--end of path -->

<!-- start of navigation -->
<a href="EODatabaseDataSource.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="EOEntity.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<!-- end of navigation -->


<hr><br>
 
<h1><a name="//apple_ref/java/cl/EODatabaseOperation">EODatabaseOperation</a>
 <BR>
</h1>
<p><B>Inherits From:</B><BR>  
NSObject

<p><B>Inherits From:</B><BR>  
com.apple.yellow.eoaccess

<p><a name="227">
<hr width=50% align=left>
<h2>Class Description </h2>
</a>An EODatabaseOperation object represents an operation-insert, update, or delete-to perform on an enterprise object and all the necessary information required to perform the operation. You don't ordinarily create instances of EODatabaseOperation; rather, the Framework automatically creates an EODatabaseOperation object for each new, updated, or deleted object in an EOEditingContext. An EODatabaseContext object analyzes a set of database operations and maps each operation to one or more adaptor operations. The adaptor operations are then performed by an EOAdaptorChannel object. You generally interact with EODatabaseOperation objects only if you need to specify the order in which a set of operations are carried out (see the description for the EODatabaseContext delegate method <a href="../Protocols/EODatabaseContextDelegate.html#1087"><code>databaseContextWillOrderAdaptorOperationsFromDatabaseOperations</code></a>).<p>
An EODatabaseOperation specifies an enterprise object (called "object") on which the operation is performed, the EOGlobalID for the object, and the object's entity. In addition, the database operation has a snapshot containing the last known database values for the object and a <code>newRow</code> dictionary of new or updated values to save in the database. Finally, a database operation specifies one of the following operators (the type of operation represented by the database operation).<p>
<ul><li>DatabaseNothingOperator
<li>DatabaseInsertOperator
<li>DatabaseUpdateOperator
<li>DatabaseDeleteOperator
</ul><a name="234">
<hr width=50% align=left>
<h2>Method Types </h2>
</a><dl><dt>Constructors
<dl><dt><a href="EODatabaseOperation.html#7776">EODatabaseOperation</a>
</dl><dt>Accessing the global ID object
<dl><dt><a href="EODatabaseOperation.html#273">globalID</a>
</dl><dt>Accessing the object
<dl><dt><a href="EODatabaseOperation.html#286">object</a>
</dl><dt>Accessing the entity
<dl><dt><a href="EODatabaseOperation.html#269">entity</a>
</dl><dt>Accessing the operator
<dl><dt><a href="EODatabaseOperation.html#306">setDatabaseOperator</a>
<dt><a href="EODatabaseOperation.html#261">databaseOperator</a>
</dl><dt>Accessing the database snapshot
<dl><dt><a href="EODatabaseOperation.html#2681">setDBSnapshot</a>
<dt><a href="EODatabaseOperation.html#265">dbSnapshot</a>
</dl><dt>Accessing the row
<dl><dt><a href="EODatabaseOperation.html#310">setNewRow</a>
<dt><a href="EODatabaseOperation.html#281">newRow</a>
</dl><dt>Accessing the adaptor operations
<dl><dt><a href="EODatabaseOperation.html#257">addAdaptorOperation</a>
<dt><a href="EODatabaseOperation.html#223">removeAdaptorOperation</a>
<dt><a href="EODatabaseOperation.html#2354">adaptorOperations</a>
</dl><dt>Comparing new row and snapshot values
<dl><dt><a href="EODatabaseOperation.html#294">rowDiffs</a>
<dt><a href="EODatabaseOperation.html#298">rowDiffsForAttributes</a>
</dl><dt>Working with to-many snapshots
<dl><dt>recordToManySnapshotpublic void 
recordToManySnapshot(NSArray globalIDs, java.lang.String 
name)
<dt><a href="EODatabaseOperation.html#7030">toManySnapshots</a>
</dl></dl><a name="7774">
<hr width=50% align=left>
<h2>Constructors </h2>
</a><a name="7776">
<hr width=25% align=left>
<h3> EODatabaseOperation</h3>
</a>public <code>EODatabaseOperation</code>()<p>
public <code>EODatabaseOperation</code>(com.apple.yellow.eocontrol.EOGlobalID <em>aGlobalID</em>,<br>java.lang.Object <em>anObject</em>,<br>EOEntity <em>anEntity</em>)<p>
Creates and returns a new EODatabaseOperation object, setting the <a href="EODatabaseOperation.html#286"><code>object</code></a> to which the operation will be applied to <em>anObject</em>, <a href="EODatabaseOperation.html#273"><code>globalID</code></a> to <em>aGlobalID</em>, and <a href="EODatabaseOperation.html#269"><code>entity</code></a> to <em>anEntity</em>.<p>
<a name="2350">
<hr width=50% align=left>
<h2>Instance Methods </h2>
</a><a name="2354">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/adaptorOperations">adaptorOperations</a></h3>
</a>public NSArray <code>adaptorOperations</code>()<p>
Returns the EOAdaptorOperation objects that need to be performed to carry out the operation represented by the receiver.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#257"><code>addAdaptorOperation</code></a>, <a href="EODatabaseOperation.html#223"><code>removeAdaptorOperation</code></a>
<p><a name="257">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/addAdaptorOperation">addAdaptorOperation</a></h3>
</a>public void <code>addAdaptorOperation</code>(EOAdaptorOperation <em>adaptorOperation</em>)<p>
Adds <em>adaptorOperation</em> to the receiver's list of adaptor operations. Throws an exception if <em>adaptorOperation</em> is <code>null</code>.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2354"><code>adaptorOperations</code></a>, <a href="EODatabaseOperation.html#223"><code>removeAdaptorOperation</code></a>
<p><a name="261">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/databaseOperator">databaseOperator</a></h3>
</a>public int <code>databaseOperator()</code><p>
Returns the receiver's database operator.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#306"><code>setDatabaseOperator</code></a>
<p><a name="265">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/dbSnapshot">dbSnapshot</a></h3>
</a>public NSDictionary <code>dbSnapshot</code>()<p>
Returns the database snapshot for the receiver's enterprise object. The snapshot contains the last known database values for the enterprise<code> </code>object. The dictionary returned from this method will be empty if the receiver's object has just been inserted into an EOEditingContext and has not yet been saved in persistent storage. For more information on EOEditingContexts, see the EOEditingContext class specification in the EOControl framework.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2681"><code>setDBSnapshot</code></a>, <a href="EODatabaseOperation.html#306"><code>setDatabaseOperator</code></a>
<p><a name="269">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/entity">entity</a></h3>
</a>public EOEntity <code>entity</code>()<p>
Returns the entity that corresponds to the receiver's enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#7774">"Constructors"</a>
<p><a name="273">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/globalID">globalID</a></h3>
</a>public com.apple.yellow.eocontrol.EOGlobalID <code>globalID</code>()<p>
Returns the EOGlobalID object that corresponds to the receiver's enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#7774">"Constructors"</a>
<p><a name="281">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/newRow">newRow</a></h3>
</a>public NSMutableDictionary <code>newRow</code>()<p>
Returns a dictionary representation of the receiver's enterprise object. In addition to all the properties of the enterprise object that are stored in the database, the dictionary contains values for the non-derived attribute's of the enterprise object's entity that aren't visible in the enterprise object. For example, primary and foreign keys aren't ordinarily properties of an enterprise object but are attributes of the object's entity.<p>
The <code>newRow</code> dictionary is initialized with the values in the receiver's snapshot. New or updated values are added to the <code>newRow</code> dictionary (replacing out-of-date values) as the Framework maps changes in the object to an operation.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#310"><code>setNewRow</code></a>
<p><a name="286">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/object">object</a></h3>
</a>public java.lang.Object <code>object</code>()<p>
Returns the receiver's enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#7774">"Constructors"</a>
<p><a name="2103">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/primaryKeyDiffs">primaryKeyDiffs</a></h3>
</a>public NSDictionary <code>primaryKeyDiffs</code>()<p>
Returns a dictionary that contains any primary key values in <a href="EODatabaseOperation.html#281"><code>newRow</code></a> that are different from those in the <a href="EODatabaseOperation.html#265"><code>dbSnapshot</code></a>. Returns <code>null</code> if the receiver doesn't have EODatabaseUpdateOperator set as its database operator.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#306"><code>setDatabaseOperator</code></a>, <a href="EODatabaseOperation.html#281"><code>newRow</code></a>
<p><B>recordToManySnapshot </B>public void <code>recordToManySnapshot</code>(NSArray <em>globalIDs</em>,<br>java.lang.String <em>name</em>)<p>
Records the objects in <em>globalIDs</em>. <em>globalIDs</em> is an array of the globalIDs that identify the objects at the destination of the to-many relationship named <em>name</em>; <em>name</em> is a property of the receiver's enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#7030"><code>toManySnapshots</code></a>
<p><a name="223">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/removeAdaptorOperation">removeAdaptorOperation</a></h3>
</a>public void <code>removeAdaptorOperation</code>(EOAdaptorOperation <em>adaptorOperation</em>)<p>
Removes <em>adaptorOperation</em> from the receiver's list of adaptor operations.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2354"><code>adaptorOperations</code></a>, <a href="EODatabaseOperation.html#257"><code>addAdaptorOperation</code></a>
<p><a name="294">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/rowDiffs">rowDiffs</a></h3>
</a>public NSDictionary <code>rowDiffs</code>()<p>
Returns values in the receiver's <a href="EODatabaseOperation.html#281"><code>newRow</code></a> dictionary that are different than the corresponding values in its <a href="EODatabaseOperation.html#265"><code>dbSnapshot</code></a>. The dictionary returned from this method contains the new values from the enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2103"><code>primaryKeyDiffs</code></a>
<p><a name="298">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/rowDiffsForAttributes">rowDiffsForAttributes</a></h3>
</a>public NSDictionary <code>rowDiffsForAttributes</code>(NSArray <em>attributes</em>)<p>
For the EOAttribute objects in <em>attributes</em>, this method returns values in the receiver's <a href="EODatabaseOperation.html#281"><code>newRow</code></a> dictionary that are different than the corresponding values in its <a href="EODatabaseOperation.html#265"><code>dbSnapshot</code></a>. The dictionary returned contains the new values from the enterprise object.<p>
<a name="306">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/setDatabaseOperator">setDatabaseOperator</a></h3>
</a>public void <code>setDatabaseOperator</code>(int <em>databaseOperator</em>)<p>
Sets the receiver's database operator. <em>databaseOperator</em> can be one of the following:<p>
<ul><li>DatabaseNothingOperator
<li>DatabaseInsertOperator
<li>DatabaseUpdateOperator
<li>DatabaseDeleteOperator
</ul><B>See also: </B>  
<a href="EODatabaseOperation.html#261"><code>databaseOperator</code></a>
<p><a name="2681">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/setDBSnapshot">setDBSnapshot</a></h3>
</a>public void <code>setDBSnapshot</code>(NSDictionary <em>dbSnapshot</em>)<p>
Sets the snapshot for the receiver's enterprise object. If the object has just been inserted into an a com.apple.yellow.eocontrol.EOEditingContext, it won't have a snapshot. In this case, <em>dbSnapshot</em> should be an empty dictionary.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#265"><code>dbSnapshot</code></a>
<p><a name="310">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/setNewRow">setNewRow</a></h3>
</a>public void <code>setNewRow</code>(NSMutableDictionary <em>newRow</em>)<p>
Sets the dictionary representation of the receiver's enterprise object. <em>newRow</em> should contain values for all the properties of the enterprise object that are stored in the database and for the non-derived attribute's of the enterprise object's entity that aren't visible in the enterprise object. <p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#281"><code>newRow</code></a>, <a href="EODatabaseOperation.html#261"><code>databaseOperator</code></a>
<p><a name="7030">
<hr width=25% align=left>
<h3> <a name="//apple_ref/java/instm/EODatabaseOperation/toManySnapshots">toManySnapshots</a></h3>
</a>public NSDictionary <code>toManySnapshots</code>()<p>
Returns the NSDictionary containing the snapshots for the to-many relationships of the receiver's enterprise object.<p>
<B>See also: </B>  
<code>recordToManySnapshotpublic void recordToManySnapshot(NSArray globalIDs, 
java.lang.String name)</code>
<p><p>

<hr><br>
<a href="EODatabaseDataSource.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="EOEntity.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<hr><br>
 


<i>Copyright &#169; 1998, Apple Computer, Inc.   All rights
reserved.</i>

<!-- Last updated: 09/15/98 18:14:54 -->

</body>
</html>

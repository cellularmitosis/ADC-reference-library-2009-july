<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>dspCLInit(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING132></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-131.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-133.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-98.html"><B>Chapter 5 - AppleTalk Data Stream Protocol (ADSP) </B></A> / <A HREF="Networking-115.html"><B>ADSP Reference</B></A><BR><DL><DD><A HREF="Networking-122.html"><B>Routines</B></A> / <A HREF="Networking-131.html"><B>Establishing and Terminating an ADSP Connection Listener</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING132-0></A>
<H3>dspCLInit </H3>
 The <CODE>dspCLInit</CODE> routine establishes and initializes a connection listener. You use the <CODE>PBControl</CODE> function to call the <CODE>dspCLInit</CODE> routine. See <A HREF=Networking-122.html#MARKER-9-273>"Routines" on page 5-43</A> for a description of the <CODE>PBControl</CODE> function.<P>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD><A NAME=MARKER-2-160></A><--<TD>ioResult<TD>OSErr<TD>The function result. <TR>
<TD>--><TD>ioCRefNum<TD>Integer<TD>The driver reference number.<TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>dspCLInit</CODE> for this function.<TR>
<TD><--<TD>ccbRefNum<TD>Integer<TD>The CCB reference number.<TR>
<TD>--><TD>ccbPtr<TD>TPCCB<TD>A pointer to CCB.<TR>
<TD><-><TD>localSocket<TD>Byte<TD>The local DDP socket number.</TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE>csCode</CODE>
<DD> The routine selector, always equal to <CODE>dspCLInit</CODE> for this routine. 
<DT><CODE>ccbRefNum</CODE>
<DD> The connection control block (CCB) reference number. The <CODE>dspCLInit</CODE> routine returns this value.You must provide this number in all subsequent <CODE>dspCLListen</CODE> and <CODE>dspCLRemove</CODE> <BR>calls to this connection listener.
<DT><CODE>ccbPtr</CODE>
<DD> A pointer to the CCB that you allocated. The CCB is 242 bytes <BR>in size. 
<DT><CODE>localSocket</CODE> 
<DD> The number of the DDP socket that you want ADSP to use for this connection end. Specify 0 for this parameter to cause ADSP to assign the socket; in this case, ADSP returns the socket number when the <CODE>dspCLInit</CODE> routine completes execution.
</DL>
<A NAME=HEADING132-7></A>
<H5>DESCRIPTION</H5>
 The <CODE>dspCLInit</CODE> routine establishes a connection listener; that is, it assigns a specific socket for use by ADSP and initializes the variables that ADSP uses to maintain a connection listener. The <CODE>dspCLInit</CODE> routine does not cause the connection listener <BR>to listen for connection requests; you must follow the <CODE>dspCLInit</CODE> routine with the <CODE>dspCLListen</CODE> routine to activate the connection listener. <P>
 You must allocate a block of nonrelocatable memory for a CCB before you call the <CODE>dspCLInit</CODE> routine and pass a pointer to that CCB as the value of the <CODE>ccbPtr</CODE> parameter. See the section <A HREF=Networking-109.html#MARKER-9-146>"Creating and Using a Connection Control Block" on page 5-12</A> and the section <A HREF=Networking-117.html#MARKER-9-232>"The ADSP Connection Control Block Record" on page 5-35</A> for more information.<B></B><P>
<A NAME=HEADING132-10></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The connection control block for which you allocate memory belongs to ADSP until you explicitly remove the connection listener. You cannot release the memory for the CCB until after you eliminate the connection listener. <P>
<A NAME=HEADING132-12></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>dspCLInit</CODE> routine from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>dspCLInit</CODE> in the <CODE>csCode</CODE> field of the parameter block. <P>
<A NAME=HEADING132-14></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>ddpSktErr<TD>-91<TD>Error opening socket<A NAME=MARKER-2-16></A></TABLE>
</H5>
<A NAME=HEADING132-15></A>
<H5>SEE ALSO</H5>
 To establish a connection end that is not a connection listener, use the <CODE>dspInit</CODE> routine described on <A HREF=Networking-124.html#MARKER-9-280>page 5-45</A>. <P>
 To eliminate a connection listener, use the <CODE>dspCLRemove</CODE> routine, described on <A HREF=Networking-135.html#MARKER-9-407>page 5-68</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-131.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-133.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

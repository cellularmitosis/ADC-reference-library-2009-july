<html lang="en">
<head>
<title>i386 and x86-64 Options - Using the GNU Compiler Collection (GCC)</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Using the GNU Compiler Collection (GCC)">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Submodel-Options.html#Submodel-Options" title="Submodel Options">
<link rel="prev" href="Darwin-Options.html#Darwin-Options" title="Darwin Options">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
1999, 2000, 2001, 2002, 2003 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'' and ``Funding
Free Software'', the Front-Cover texts being (a) (see below), and with
the Back-Cover Texts being (b) (see below).  A copy of the license is
included in the section entitled ``GNU Free Documentation License''.

(a) The FSF's Front-Cover Text is:

     A GNU Manual

(b) The FSF's Back-Cover Text is:

     You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="i386-and-x86_002d64-Options"></a>Previous:&nbsp;<a rel="previous" accesskey="p" href="Darwin-Options.html#Darwin-Options">Darwin Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Submodel-Options.html#Submodel-Options">Submodel Options</a>
<hr><br>
</div>

<h4 class="subsection">3.17.3 Intel 386 and AMD x86-64 Options</h4>

<p><a name="index-i386-Options-733"></a><a name="index-x86_002d64-Options-734"></a><a name="index-Intel-386-Options-735"></a><a name="index-AMD-x86_002d64-Options-736"></a>
These <span class="samp">-m</span> options are defined for the i386 and x86-64 family of
computers:

     <dl>
<dt><code>-mcpu=</code><var>cpu-type</var><dd><a name="index-mcpu-737"></a>Tune to <var>cpu-type</var> everything applicable about the generated code, except
for the ABI and the set of available instructions.  The choices for
<var>cpu-type</var> are <span class="samp">i386</span>, <span class="samp">i486</span>, <span class="samp">i586</span>, <span class="samp">i686</span>,
<span class="samp">pentium</span>, <span class="samp">pentium-mmx</span>, <span class="samp">pentiumpro</span>, <span class="samp">pentium2</span>,
<span class="samp">pentium3</span>, <span class="samp">pentium4</span>, <span class="samp">k6</span>, <span class="samp">k6-2</span>, <span class="samp">k6-3</span>,
<span class="samp">athlon</span>, <span class="samp">athlon-tbird</span>, <span class="samp">athlon-4</span>, <span class="samp">athlon-xp</span>,
<span class="samp">athlon-mp</span>, <span class="samp">winchip-c6</span>, <span class="samp">winchip2</span> and <span class="samp">c3</span>.

     <p>While picking a specific <var>cpu-type</var> will schedule things appropriately
for that particular chip, the compiler will not generate any code that
does not run on the i386 without the <span class="option">-march=</span><var>cpu-type</var> option
being used.  <span class="samp">i586</span> is equivalent to <span class="samp">pentium</span> and <span class="samp">i686</span>
is equivalent to <span class="samp">pentiumpro</span>.  <span class="samp">k6</span> and <span class="samp">athlon</span> are the
AMD chips as opposed to the Intel ones.

     <br><dt><code>-march=</code><var>cpu-type</var><dd><a name="index-march-738"></a>Generate instructions for the machine type <var>cpu-type</var>.  The choices
for <var>cpu-type</var> are the same as for <span class="option">-mcpu</span>.  Moreover,
specifying <span class="option">-march=</span><var>cpu-type</var> implies <span class="option">-mcpu=</span><var>cpu-type</var>.

     <br><dt><code>-m386</code><dt><code>-m486</code><dt><code>-mpentium</code><dt><code>-mpentiumpro</code><dd><a name="index-m386-739"></a><a name="index-m486-740"></a><a name="index-mpentium-741"></a><a name="index-mpentiumpro-742"></a>These options are synonyms for <span class="option">-mcpu=i386</span>, <span class="option">-mcpu=i486</span>,
<span class="option">-mcpu=pentium</span>, and <span class="option">-mcpu=pentiumpro</span> respectively. 
These synonyms are deprecated.

     <br><dt><code>-mfpmath=</code><var>unit</var><dd><a name="index-march-743"></a>generate floating point arithmetics for selected unit <var>unit</var>.  the choices
for <var>unit</var> are:

          <dl>
<dt><span class="samp">387</span><dd>Use the standard 387 floating point coprocessor present majority of chips and
emulated otherwise.  Code compiled with this option will run almost everywhere. 
The temporary results are computed in 80bit precision instead of precision
specified by the type resulting in slightly different results compared to most
of other chips. See <span class="option">-ffloat-store</span> for more detailed description.

          <p>This is the default choice for i386 compiler.

          <br><dt><span class="samp">sse</span><dd>Use scalar floating point instructions present in the SSE instruction set. 
This instruction set is supported by Pentium3 and newer chips, in the AMD line
by Athlon-4, Athlon-xp and Athlon-mp chips.  The earlier version of SSE
instruction set supports only single precision arithmetics, thus the double and
extended precision arithmetics is still done using 387.  Later version, present
only in Pentium4 and the future AMD x86-64 chips supports double precision
arithmetics too.

          <p>For i387 you need to use <span class="option">-march=</span><var>cpu-type</var>, <span class="option">-msse</span> or
<span class="option">-msse2</span> switches to enable SSE extensions and make this option
effective.  For x86-64 compiler, these extensions are enabled by default.

          <p>The resulting code should be considerably faster in majority of cases and avoid
the numerical instability problems of 387 code, but may break some existing
code that expects temporaries to be 80bit.

          <p>This is the default choice for x86-64 compiler.

          <br><dt><span class="samp">sse,387</span><dd>Attempt to utilize both instruction sets at once.  This effectively double the
amount of available registers and on chips with separate execution units for
387 and SSE the execution resources too.  Use this option with care, as it is
still experimental, because gcc register allocator does not model separate
functional units well resulting in instable performance. 
</dl>

     <br><dt><code>-masm=</code><var>dialect</var><dd><a name="index-masm_003d_0040var_007bdialect_007d-744"></a>Output asm instructions using selected <var>dialect</var>. Supported choices are
<span class="samp">intel</span> or <span class="samp">att</span> (the default one).

     <br><dt><code>-mieee-fp</code><dt><code>-mno-ieee-fp</code><dd><a name="index-mieee_002dfp-745"></a><a name="index-mno_002dieee_002dfp-746"></a>Control whether or not the compiler uses IEEE floating point
comparisons.  These handle correctly the case where the result of a
comparison is unordered.

     <br><dt><code>-msoft-float</code><dd><a name="index-msoft_002dfloat-747"></a>Generate output containing library calls for floating point. 
<strong>Warning:</strong> the requisite libraries are not part of GCC. 
Normally the facilities of the machine's usual C compiler are used, but
this can't be done directly in cross-compilation.  You must make your
own arrangements to provide suitable library functions for
cross-compilation.

     <p>On machines where a function returns floating point results in the 80387
register stack, some floating point opcodes may be emitted even if
<span class="option">-msoft-float</span> is used.

     <br><dt><code>-mno-fp-ret-in-387</code><dd><a name="index-mno_002dfp_002dret_002din_002d387-748"></a>Do not use the FPU registers for return values of functions.

     <p>The usual calling convention has functions return values of types
<code>float</code> and <code>double</code> in an FPU register, even if there
is no FPU.  The idea is that the operating system should emulate
an FPU.

     <p>The option <span class="option">-mno-fp-ret-in-387</span> causes such values to be returned
in ordinary CPU registers instead.

     <br><dt><code>-mno-fancy-math-387</code><dd><a name="index-mno_002dfancy_002dmath_002d387-749"></a>Some 387 emulators do not support the <code>sin</code>, <code>cos</code> and
<code>sqrt</code> instructions for the 387.  Specify this option to avoid
generating those instructions.  This option is the default on FreeBSD,
OpenBSD and NetBSD.  This option is overridden when <span class="option">-march</span>
indicates that the target cpu will always have an FPU and so the
instruction will not need emulation.  As of revision 2.6.1, these
instructions are not generated unless you also use the
<span class="option">-funsafe-math-optimizations</span> switch.

     <br><dt><code>-malign-double</code><dt><code>-mno-align-double</code><dd><a name="index-malign_002ddouble-750"></a><a name="index-mno_002dalign_002ddouble-751"></a>Control whether GCC aligns <code>double</code>, <code>long double</code>, and
<code>long long</code> variables on a two word boundary or a one word
boundary.  Aligning <code>double</code> variables on a two word boundary will
produce code that runs somewhat faster on a <span class="samp">Pentium</span> at the
expense of more memory.

     <p><strong>Warning:</strong> if you use the <span class="option">-malign-double</span> switch,
structures containing the above types will be aligned differently than
the published application binary interface specifications for the 386
and will not be binary compatible with structures in code compiled
without that switch.

     <br><dt><code>-m128bit-long-double</code><dd><a name="index-m128bit_002dlong_002ddouble-752"></a>Control the size of <code>long double</code> type. i386 application binary interface
specify the size to be 12 bytes, while modern architectures (Pentium and newer)
prefer <code>long double</code> aligned to 8 or 16 byte boundary.  This is
impossible to reach with 12 byte long doubles in the array accesses.

     <p><strong>Warning:</strong> if you use the <span class="option">-m128bit-long-double</span> switch, the
structures and arrays containing <code>long double</code> will change their size as
well as function calling convention for function taking <code>long double</code>
will be modified.

     <br><dt><code>-m96bit-long-double</code><dd><a name="index-m96bit_002dlong_002ddouble-753"></a>Set the size of <code>long double</code> to 96 bits as required by the i386
application binary interface.  This is the default.

     <br><dt><code>-msvr3-shlib</code><dt><code>-mno-svr3-shlib</code><dd><a name="index-msvr3_002dshlib-754"></a><a name="index-mno_002dsvr3_002dshlib-755"></a>Control whether GCC places uninitialized local variables into the
<code>bss</code> or <code>data</code> segments.  <span class="option">-msvr3-shlib</span> places them
into <code>bss</code>.  These options are meaningful only on System V Release 3.

     <br><dt><code>-mrtd</code><dd><a name="index-mrtd-756"></a>Use a different function-calling convention, in which functions that
take a fixed number of arguments return with the <code>ret</code> <var>num</var>
instruction, which pops their arguments while returning.  This saves one
instruction in the caller since there is no need to pop the arguments
there.

     <p>You can specify that an individual function is called with this calling
sequence with the function attribute <span class="samp">stdcall</span>.  You can also
override the <span class="option">-mrtd</span> option by using the function attribute
<span class="samp">cdecl</span>.  See <a href="Function-Attributes.html#Function-Attributes">Function Attributes</a>.

     <p><strong>Warning:</strong> this calling convention is incompatible with the one
normally used on Unix, so you cannot use it if you need to call
libraries compiled with the Unix compiler.

     <p>Also, you must provide function prototypes for all functions that
take variable numbers of arguments (including <code>printf</code>);
otherwise incorrect code will be generated for calls to those
functions.

     <p>In addition, seriously incorrect code will result if you call a
function with too many arguments.  (Normally, extra arguments are
harmlessly ignored.)

     <br><dt><code>-mregparm=</code><var>num</var><dd><a name="index-mregparm-757"></a>Control how many registers are used to pass integer arguments.  By
default, no registers are used to pass arguments, and at most 3
registers can be used.  You can control this behavior for a specific
function by using the function attribute <span class="samp">regparm</span>. 
See <a href="Function-Attributes.html#Function-Attributes">Function Attributes</a>.

     <p><strong>Warning:</strong> if you use this switch, and
<var>num</var> is nonzero, then you must build all modules with the same
value, including any libraries.  This includes the system libraries and
startup modules.

     <br><dt><code>-mpreferred-stack-boundary=</code><var>num</var><dd><a name="index-mpreferred_002dstack_002dboundary-758"></a>Attempt to keep the stack boundary aligned to a 2 raised to <var>num</var>
byte boundary.  If <span class="option">-mpreferred-stack-boundary</span> is not specified,
the default is 4 (16 bytes or 128 bits), except when optimizing for code
size (<span class="option">-Os</span>), in which case the default is the minimum correct
alignment (4 bytes for x86, and 8 bytes for x86-64).

     <p>On Pentium and PentiumPro, <code>double</code> and <code>long double</code> values
should be aligned to an 8 byte boundary (see <span class="option">-malign-double</span>) or
suffer significant run time performance penalties.  On Pentium III, the
Streaming SIMD Extension (SSE) data type <code>__m128</code> suffers similar
penalties if it is not 16 byte aligned.

     <p>To ensure proper alignment of this values on the stack, the stack boundary
must be as aligned as that required by any value stored on the stack. 
Further, every function must be generated such that it keeps the stack
aligned.  Thus calling a function compiled with a higher preferred
stack boundary from a function compiled with a lower preferred stack
boundary will most likely misalign the stack.  It is recommended that
libraries that use callbacks always use the default setting.

     <p>This extra alignment does consume extra stack space, and generally
increases code size.  Code that is sensitive to stack space usage, such
as embedded systems and operating system kernels, may want to reduce the
preferred alignment to <span class="option">-mpreferred-stack-boundary=2</span>.

     <br><dt><code>-mmmx</code><dt><code>-mno-mmx</code><br><dt><code>-msse</code><dt><code>-mno-sse</code><br><dt><code>-msse2</code><dt><code>-mno-sse2</code><br><dt><code>-m3dnow</code><dt><code>-mno-3dnow</code><dd><a name="index-mmmx-759"></a><a name="index-mno_002dmmx-760"></a><a name="index-msse-761"></a><a name="index-mno_002dsse-762"></a><a name="index-m3dnow-763"></a><a name="index-mno_002d3dnow-764"></a>These switches enable or disable the use of built-in functions that allow
direct access to the MMX, SSE and 3Dnow extensions of the instruction set.

     <p>See <a href="X86-Built_002din-Functions.html#X86-Built_002din-Functions">X86 Built-in Functions</a>, for details of the functions enabled
and disabled by these switches.

     <p>To have SSE/SSE2 instructions generated automatically from floating-point
code, see <span class="option">-mfpmath=sse</span>.

     <br><dt><code>-mpush-args</code><dt><code>-mno-push-args</code><dd><a name="index-mpush_002dargs-765"></a><a name="index-mno_002dpush_002dargs-766"></a>Use PUSH operations to store outgoing parameters.  This method is shorter
and usually equally fast as method using SUB/MOV operations and is enabled
by default.  In some cases disabling it may improve performance because of
improved scheduling and reduced dependencies.

     <br><dt><code>-maccumulate-outgoing-args</code><dd><a name="index-maccumulate_002doutgoing_002dargs-767"></a>If enabled, the maximum amount of space required for outgoing arguments will be
computed in the function prologue.  This is faster on most modern CPUs
because of reduced dependencies, improved scheduling and reduced stack usage
when preferred stack boundary is not equal to 2.  The drawback is a notable
increase in code size.  This switch implies <span class="option">-mno-push-args</span>.

     <br><dt><code>-mthreads</code><dd><a name="index-mthreads-768"></a>Support thread-safe exception handling on <span class="samp">Mingw32</span>.  Code that relies
on thread-safe exception handling must compile and link all code with the
<span class="option">-mthreads</span> option.  When compiling, <span class="option">-mthreads</span> defines
<span class="option">-D_MT</span>; when linking, it links in a special thread helper library
<span class="option">-lmingwthrd</span> which cleans up per thread exception handling data.

     <br><dt><code>-mno-align-stringops</code><dd><a name="index-mno_002dalign_002dstringops-769"></a>Do not align destination of inlined string operations.  This switch reduces
code size and improves performance in case the destination is already aligned,
but gcc don't know about it.

     <br><dt><code>-minline-all-stringops</code><dd><a name="index-minline_002dall_002dstringops-770"></a>By default GCC inlines string operations only when destination is known to be
aligned at least to 4 byte boundary.  This enables more inlining, increase code
size, but may improve performance of code that depends on fast memcpy, strlen
and memset for short lengths.

     <br><dt><code>-momit-leaf-frame-pointer</code><dd><a name="index-momit_002dleaf_002dframe_002dpointer-771"></a>Don't keep the frame pointer in a register for leaf functions.  This
avoids the instructions to save, set up and restore frame pointers and
makes an extra register available in leaf functions.  The option
<span class="option">-fomit-frame-pointer</span> removes the frame pointer for all functions
which might make debugging harder. 
</dl>

   <p>These <span class="samp">-m</span> switches are supported in addition to the above
on AMD x86-64 processors in 64-bit environments.

     <dl>
<dt><code>-m32</code><dt><code>-m64</code><dd><a name="index-m32-772"></a><a name="index-m64-773"></a>Generate code for a 32-bit or 64-bit environment. 
The 32-bit environment sets int, long and pointer to 32 bits and
generates code that runs on any i386 system. 
The 64-bit environment sets int to 32 bits and long and pointer
to 64 bits and generates code for AMD's x86-64 architecture.

     <br><dt><code>-mno-red-zone</code><dd><a name="index-no_002dred_002dzone-774"></a>Do not use a so called red zone for x86-64 code.  The red zone is mandated
by the x86-64 ABI, it is a 128-byte area beyond the location of the
stack pointer that will not be modified by signal or interrupt handlers
and therefore can be used for temporary data without adjusting the stack
pointer.  The flag <span class="option">-mno-red-zone</span> disables this red zone.

     <br><dt><code>-mcmodel=small</code><dd><a name="index-mcmodel_003dsmall-775"></a>Generate code for the small code model: the program and its symbols must
be linked in the lower 2 GB of the address space.  Pointers are 64 bits. 
Programs can be statically or dynamically linked.  This is the default
code model.

     <br><dt><code>-mcmodel=kernel</code><dd><a name="index-mcmodel_003dkernel-776"></a>Generate code for the kernel code model.  The kernel runs in the
negative 2 GB of the address space. 
This model has to be used for Linux kernel code.

     <br><dt><code>-mcmodel=medium</code><dd><a name="index-mcmodel_003dmedium-777"></a>Generate code for the medium model: The program is linked in the lower 2
GB of the address space but symbols can be located anywhere in the
address space.  Programs can be statically or dynamically linked, but
building of shared libraries are not supported with the medium model.

     <br><dt><code>-mcmodel=large</code><dd><a name="index-mcmodel_003dlarge-778"></a>Generate code for the large model: This model makes no assumptions
about addresses and sizes of sections.  Currently GCC does not implement
this model. 
</dl>

<!-- APPLE LOCAL prune man page -->
</body></html>


<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Open Firmware User Interface Commands and Examples</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.60.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.63.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.65.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=3736"> </A><A NAME="34317"> </A>Open Firmware User Interface Commands and Examples</H1><P CLASS="T1.Text1"><A NAME="pgfId=3737"> </A>A short list of commands available through the Open Firmware user interface is shown in <A HREF="PCI_BOOK.64.html#15095" CLASS="XRef">Table&nbsp;5-9</A>. Included within some of the command descriptions are examples that further illustrate command usage. Note that several of the commands are combinations of commands that can be used separately. The Open Firmware IEEE 1275 specification defines all of the commands and keywords. </P><b><P CLASS="TbF.TblFull"><A NAME="pgfId=3747"> </A>Table&nbsp;5-9	<A NAME="15095"> </A>Commonly used Open Firmware user interface commands&nbsp;</P></b><TABLE border=1 cellpadding=3><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=3751"> </A>Commands</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=3753"> </A>Definition</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3755"> </A><TT CLASS="cv">assign-addresses</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3757"> </A>Emulates the regular Open Firmware startup process of querying the system for resource requirements and adding an <TT CLASS="cv">assigned-addresses</TT> property to the node that is the current package.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3759"> </A><TT CLASS="cv">boot</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3761"> </A>Performs the startup process, using the currently chosen device. </FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3763"> </A><TT CLASS="cv">ls</TT></FONT><FONT CLASS="TbT.TblText"><A NAME="pgfId=3764"> </A><TT CLASS="cv">dev / ls</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3766"> </A>List the children of the current node.</FONT><FONT CLASS="TbT.TblText"><A NAME="pgfId=3767"> </A>Selects the root node and lists its children recursively, effectively dumping a name view of the device tree. Press Control-S to stop the text from scrolling off the screen. Restart the scrolling with Control-Q. </FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3769"> </A><TT CLASS="cv">devalias</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3771"> </A>Show currently defined device aliases</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3773"> </A><TT CLASS="cv">dev &lt;</TT><I CLASS="italics">dev pathname</I><TT CLASS="cv">&gt;</TT></FONT><FONT CLASS="TbT.TblText"><A NAME="pgfId=3774"> </A><TT CLASS="cv"><BR>dev /bandit/gc .properties</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3776"> </A>Selects the specified device in pathname and makes it the current node.</FONT><FONT CLASS="TbT.TblText"><A NAME="pgfId=3777"> </A>Selects <TT CLASS="cv">gc</TT> (the node representing the Bandit ASIC, which controls many Macintosh I/O features) as the active package and displays its properties. Bandit is used in the first PCI-based Power Macintosh models but may not be present in future models. For an illustration of its position in the device tree, see <A HREF="PCI_BOOK.102.html#23624" CLASS="XRef">Listing&nbsp;10-1</A>.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3782"> </A>show-devs &lt;<I CLASS="italics">dev pathname</I>&gt;</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3784"> </A>Show devices beneath the device node specified in pathname.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3786"> </A><TT CLASS="cv">dl</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3788"> </A>Sets the terminal emulator for downloading Forth code to RAM. Press Control-D to end the downloading process.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3790"> </A><TT CLASS="cv">dump-device-tree</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3792"> </A>Lists properties and methods of all the device tree nodes.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3794"> </A><TT CLASS="cv">FFC00000 100 dump</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3796"> </A>Dumps 0x100 bytes from virtual address 0xFFC00000, if that address is currently mapped in.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3798"> </A><TT CLASS="cv">init-nvram</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3800"> </A>Resets data in NVRAM to default values.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3802"> </A><TT CLASS="cv">properties</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3804"> </A>Show the names and values of the current device node properties.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3806"> </A><TT CLASS="cv">make-properties</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3808"> </A>Emulates the regular Open Firmware startup process of querying the device's configuration space and adding the standard PCI properties to the node that is the current package.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3810"> </A><TT CLASS="cv">printenv</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3812"> </A>Shows the current environment and default settings of Open Firmware configuration variables stored in NVRAM.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3814"> </A><TT CLASS="cv">setenv </TT><I CLASS="italics">param val</I></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3816"> </A>Sets the current environment parameter to the specified value. The value set by <TT CLASS="cv">setenv</TT> persist across restarts. </FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4643"> </A><TT CLASS="cv">setenv auto-boot? <BR>false</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4645"> </A>Sets the environment variable <TT CLASS="cv">auto-boot?</TT> stored in NVRAM to <TT CLASS="cv">false</TT>. This causes the computer to invoke the Open Firmware user interface automatically after subsequent restarts.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4647"> </A><TT CLASS="cv">shut-down</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=4649"> </A>Powers down the computer.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3818"> </A><TT CLASS="cv">pwd</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3820"> </A>Displays the pathname of the current package.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3822"> </A><TT CLASS="cv">reset-all</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3824"> </A>Resets the target computer.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3826"> </A><TT CLASS="cv">see </TT><I CLASS="italics">word</I></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3828"> </A>Displays the Forth source code for the word entered.</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3838"> </A><TT CLASS="cv">words</TT></FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3840"> </A>Lists variables, constants, and methods of the active package (as in Forth, but in the scope of the current package only).</FONT></TD></TR></TABLE><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.60.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.63.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.65.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
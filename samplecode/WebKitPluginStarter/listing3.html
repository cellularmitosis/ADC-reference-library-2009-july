<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>WebKitPluginStarter - /ReadMe.txt</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/AppleApplications/index.html">Apple Applications</a> &gt; <a href="../../samplecode/AppleApplications/idxSafari-date.html">Safari</a> &gt; <A HREF="javascript:location.replace('index.html');">WebKitPluginStarter</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->


	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">WebKitPluginStarter</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/ReadMe.txt</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/PluginStarter.h</option>
<option value="listing2.html">/PluginStarter.m</option>
<option value="listing3.html">/ReadMe.txt</option>
<option value="listing4.html">/SpeedometerView.h</option>
<option value="listing5.html">/SpeedometerView.m</option>
<option value="listing6.html">/SpeedyCategories.h</option>
<option value="listing7.html">/SpeedyCategories.m</option>
<option value="listing8.html">/test.html</option></select>
				</p>
				</form>
				<p><strong><a href="WebKitPluginStarter.zip">Download Sample</a></strong> (&#147;WebKitPluginStarter.zip&#148;, 51.8K)<BR>
<strong><a href="WebKitPluginStarter.dmg">Download Sample</a></strong> (&#147;WebKitPluginStarter.dmg&#148;, 99.7K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">File: ReadMe.txt

Abstract: readme file for the WebKitPluginStarter sample.

Version: 1.0

Disclaimer: IMPORTANT:  This Apple software is supplied to you by 
Apple Inc. (&quot;Apple&quot;) in consideration of your agreement to the
following terms, and your use, installation, modification or
redistribution of this Apple software constitutes acceptance of these
terms.  If you do not agree with these terms, please do not use,
install, modify or redistribute this Apple software.

In consideration of your agreement to abide by the following terms, and
subject to these terms, Apple grants you a personal, non-exclusive
license, under Apple's copyrights in this original Apple software (the
&quot;Apple Software&quot;), to use, reproduce, modify and redistribute the Apple
Software, with or without modifications, in source and/or binary forms;
provided that if you redistribute the Apple Software in its entirety and
without modifications, you must retain this notice and the following
text and disclaimers in all such redistributions of the Apple Software. 
Neither the name, trademarks, service marks or logos of Apple Inc. 
may be used to endorse or promote products derived from the Apple
Software without specific prior written permission from Apple.  Except
as expressly stated in this notice, no other rights or licenses, express
or implied, are granted by Apple herein, including but not limited to
any patent rights that may be infringed by your derivative works or by
other works in which the Apple Software may be incorporated.

The Apple Software is provided by Apple on an &quot;AS IS&quot; basis.  APPLE
MAKES NO WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION
THE IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE, REGARDING THE APPLE SOFTWARE OR ITS USE AND
OPERATION ALONE OR IN COMBINATION WITH YOUR PRODUCTS.

IN NO EVENT SHALL APPLE BE LIABLE FOR ANY SPECIAL, INDIRECT, INCIDENTAL
OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
INTERRUPTION) ARISING IN ANY WAY OUT OF THE USE, REPRODUCTION,
MODIFICATION AND/OR DISTRIBUTION OF THE APPLE SOFTWARE, HOWEVER CAUSED
AND WHETHER UNDER THEORY OF CONTRACT, TORT (INCLUDING NEGLIGENCE),
STRICT LIABILITY OR OTHERWISE, EVEN IF APPLE HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.

Copyright (C) 2007 Apple Inc. All Rights Reserved.


This file details the steps involved in making this simple WebKit plug-in.  If
you're just getting started with a webkit plugin sample, these steps should be
sufficient to get your project on the road.  



1. Create a new project.
Create a new project in Xcode using the &quot;Cocoa Bundle&quot; template.




2. Add the WebKit framework to your project.
Turn down the &quot;Frameworks and Libraries&quot; group in the Groups &amp; Files area, and
then control-click (or right click) on the &quot;Linked Frameworks&quot; sub-group. 
Select &quot;Add &gt; Existing Frameworks...&quot; from the pop-up menu and add the
&quot;WebKit.framework&quot; (/System/Library/Frameworks/WebKit.framework) to the project.
 

NOTE: Be sure to add &quot;#import &lt;WebKit/WebKit.h&gt;&quot; to the beginning of any files
where you use the WebKit apis.




3. Add your plug-in's class files to the project.
Add your plug-in class files to the project.  control-click (or right click) on
the classes group in the Groups &amp; Files area and select &quot;Add &gt; New File...&quot; from
the pop-up menu.  Select the 'Objective-C class template and name the file
&quot;PluginStarter&quot; (or whatever you would like to call your principle class).




4. Identify your bundle as a WebKit plug-in.
To do that, change the CFBundlePackageType entry in your Info.plist file to the
value 'WBPL': 

  &lt;key&gt;CFBundlePackageType&lt;/key&gt;
  &lt;string&gt;WBPL&lt;/string&gt; 




5. Identify your plug-in's class for the bundle.
Identify the principal class used to define the functionality of your plug-in
by setting the NSPrincipalClass entry in your Info.plist to the name of the
class where you have implemented your plugInViewWithArguments:
WebPlugInViewFactory factory method.  In this sample, that will be our
&quot;PluginStarter&quot; class.

  &lt;key&gt;NSPrincipalClass&lt;/key&gt;
  &lt;string&gt;PluginStarter&lt;/string&gt;




6. Provide descriptive information about your plug-in.
Add a name and description for your plug-in by providing values for the
WebPluginName and WebPluginDescription keys in your Info.plist file.  These
names are used for displaying information about your plug-in to users.  In this
sample we have added the following entries:

  &lt;key&gt;WebPluginName&lt;/key&gt;
  &lt;string&gt;Simple Web Kit Plug-In&lt;/string&gt;
  &lt;key&gt;WebPluginDescription&lt;/key&gt;
  &lt;string&gt;A simple web kit plug-in example.&lt;/string&gt;




7. Identify the mime types your plug-in is capable of displaying.
You can provide any number of mime types or file name extensions.  In this
sample, we only provide one.


  &lt;key&gt;WebPluginMIMETypes&lt;/key&gt;
  &lt;dict&gt;
    &lt;key&gt;application/x-simplewebkitplugin&lt;/key&gt;
    &lt;dict&gt;
      &lt;key&gt;WebPluginExtensions&lt;/key&gt;
      &lt;array&gt;
        &lt;string&gt;swkp&lt;/string&gt;
      &lt;/array&gt;
      &lt;key&gt;WebPluginTypeDescription&lt;/key&gt;
      &lt;string&gt;Simple Web Kit Plug-In Data&lt;/string&gt;
    &lt;/dict&gt;
  &lt;/dict&gt;




8. Create the plug-in class.
Your plugin class should be a subclass of NSView and it should conform to the
WebPlugInViewFactory protocol.  In this sample, we have used the custom NSView
class called SpeedometerView from the SpeedometerView sample as our parent
class, and we have declared the PluginStarter class as conformant to the
WebPlugInViewFactory protocol.  Here is the declaration:

  @interface PluginStarter : SpeedometerView &lt;WebPlugInViewFactory&gt; {
    NSDictionary *pluginArguments;
  }
  
  + (NSView *)plugInViewWithArguments:(NSDictionary *)arguments;
  
  -(id) initWithArguments:(NSDictionary *)arguments;
  - (void) dealloc;
  
  @end
  
Items to note are:

- SimpleWebKitPlugin must be a descendant of NSView.  You can make your special
plugin class a subclass of any SubClass of NSView.  Here, we have used a custom
NSView from another sample as our parent class.

- SpeedometerView is a subclass of NSView.  It was taken directly from the
SpeedometerView view sample without modification to show that you can make any
custom NSView into a Cocoa WebKit plug-in using the steps outlined in this
sample.

- plugInViewWithArguments: is a class method required by the
WebPlugInViewFactory formal protocol for all webkit plugins.  We explicitly
declare the PluginStarter conformant to the WebPlugInViewFactory protocol so we
have an extra level of compiler checking to make sure our declarations are in
line with the requirements of that protocol.

- we have added an instance variable 'pluginArguments' where we can save away a
copy of the arguments we receive when our plugInViewWithArguments: method is
called.





9. Follow the steps in Technical Q&amp;A QA1500, &quot;Debugging a Web Kit Plug-in in
Xcode&quot; (http://developer.apple.com/qa/qa2006/qa1500.html) to set up your plugin
project for debugging with Xcode.




10. build and run the sample.  It will launch a new copy of Safari with the
plug-in loaded.  To test the sample, drag and drop the file test.html into the
Safari window.  The plug-in will be displayed in the web page.




Additional Information

Internet Plug-ins can be installed in the following locations:

To make the plug-in available to the current user only, install it here:

  ~/Library/Internet Plug-Ins/

To make the plug-in available to all users, install it here:

  /Library/Internet Plug-Ins/




Where to next?

This sample shows how to create a minimal WebKit plug-in that does some custom
drawing.  Other samples that build on top of the techniques illustrated in this
sample include the following samples:

(a) WebKitPluginWithJavaScript - shows how to call JavaScripts in the
containing page and how to call your plug-in from JavaScripts in the containing
page.

(b) WebKitPluginWithSimpleGUI - shows how your plug-in can display a GUI loaded
from a .nib file created in Interface Builder.




</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/WebKitPluginStarter/listing3.html%3Fid%3DDTS10004346-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/WebKitPluginStarter/listing3.html%3Fid%3DDTS10004346-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/WebKitPluginStarter/listing3.html%3Fid%3DDTS10004346-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
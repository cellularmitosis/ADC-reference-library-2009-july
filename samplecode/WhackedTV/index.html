<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>WhackedTV</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>
</head>

<!-- BEGIN BODY OPEN -->
<body><a name="//apple_ref/doc/uid/DTS10003727" title="WhackedTV"></a>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/Carbon/index.html">Carbon</a> &gt; <a href="../../samplecode/Carbon/idxQuickTime-date.html">QuickTime</a> &gt; 
			
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">WhackedTV</div></h1></td>
		</tr>

	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<p><strong>Version:</strong> 1.5</p>
				<p><strong>Posted:</strong> 2008-05-09</p>
				<p><strong>Build Requirements:</strong> Mac OS X 10.4</p>
				<p><strong>Runtime Requirements:</strong> QuickTime 7.  To insert Audio Effects into the recording chain, Mac OS X 10.4 Tiger is required.</p>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/README-WhackedTV.txt</option>
<option value="listing2.html">/Sources/Classes/DeviceChannelStrip.h</option>
<option value="listing3.html">/Sources/Classes/DeviceChannelStrip.mm</option>
<option value="listing4.html">/Sources/Classes/HorizontalMeteringView.h</option>
<option value="listing5.html">/Sources/Classes/HorizontalMeteringView.m</option>
<option value="listing6.html">/Sources/Classes/MeteringView.h</option>
<option value="listing7.html">/Sources/Classes/MeteringView.m</option>
<option value="listing8.html">/Sources/Classes/SeqGrab/SampleCIView.h</option>
<option value="listing9.html">/Sources/Classes/SeqGrab/SampleCIView.m</option>
<option value="listing10.html">/Sources/Classes/SeqGrab/SeqGrab.h</option>
<option value="listing11.html">/Sources/Classes/SeqGrab/SeqGrab.mm</option>
<option value="listing12.html">/Sources/Classes/SeqGrab/SGAudio.h</option>
<option value="listing13.html">/Sources/Classes/SeqGrab/SGAudio.mm</option>
<option value="listing14.html">/Sources/Classes/SeqGrab/SGChan.h</option>
<option value="listing15.html">/Sources/Classes/SeqGrab/SGChan.mm</option>
<option value="listing16.html">/Sources/Classes/SeqGrab/SGVideo.h</option>
<option value="listing17.html">/Sources/Classes/SeqGrab/SGVideo.mm</option>
<option value="listing18.html">/Sources/Classes/SGAudioSettings.h</option>
<option value="listing19.html">/Sources/Classes/SGAudioSettings.mm</option>
<option value="listing20.html">/Sources/Classes/Utility/NSOpaqueGrayRulerView.h</option>
<option value="listing21.html">/Sources/Classes/Utility/NSOpaqueGrayRulerView.m</option>
<option value="listing22.html">/Sources/Classes/WhackedTVController.h</option>
<option value="listing23.html">/Sources/Classes/WhackedTVController.m</option>
<option value="listing24.html">/Sources/main.m</option>
<option value="listing25.html">/Sources/WhackedDebugMacros.h</option></select>
				</p>
				</form>
				<p><strong><a href="WhackedTV.zip">Download Sample</a></strong> (&#147;WhackedTV.zip&#148;, 320.0K)<BR>
<strong><a href="WhackedTV.dmg">Download Sample</a></strong> (&#147;WhackedTV.dmg&#148;, 365.5K)</p>
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
				<h2>Description</h2>
				<p>WhackedTV is a replacement for the venerable Carbon HackTV.  It shows how to use the Sequence Grabber API's to capture movies from external video and audio sources, just as HackTV, but adds many important new features, including simultaneous capture from multiple SGChannel's, use of the new SGAudioChannel (including a sample Cocoa audio preferences user interface), video preview using ICMDecompressionSessions and OpenGL.</p>
				
				<h2>Document Revision History</h2>
				<table cellspacing="0" class="graybox" width="680">
					<tr>
						<th width="100">Date</th>
						<th width="580">Notes</th>
					</tr>
					<tr><td scope="row">2008-05-09</td><td>Fixed two bugs:
    (1) &quot;Select Output Format&quot; in the audio dialog failed with error -206 if the source audio were set to 20 or 24 bits on an Intel Mac.  The source format is 24-bits aligned low in 32-bits.  WhackedTV was setting this as the default output format.  But QuickTime movies can only contain packed samples.  Added a utility function to conform the output format for movie-safety.
    (2) Began preferring the kQTSGAudioPropertyID_CodecSpecificSettingsArray property to the kQTSGAudioPropertyID_MagicCookie property.  See QuickTimeComponents.h for an explanation of the differences between these properties, and why CodecSpecificSettingsArray should always be preferred over MagicCookie.</td></tr>

<tr><td scope="row">2008-01-18</td><td>Fixed a bug in SGAudioSettings.mm where multiple audio devices with the same name would only be listed once.</td></tr>

<tr><td scope="row">2007-08-14</td><td>Updated code for WhackedTV to 
1) demonstrate the .noindex technique for holding off Spotlight from prematurely indexing files being written by Sequence Grabber.  This avoids frame droppage.
2) demonstrate the newish GainScalarToDecibels property of SGAudioChannel.
3) clean up some of the threaded code (alert dialogs were being invoked from secondary threads).

</td></tr>

<tr><td scope="row">2007-03-09</td><td>Added better handling for notifications, including the use of an AutoreleasePool in the SGAudio listener callback, which may be called on non cocoa threads.</td></tr>

<tr><td scope="row">2005-07-22</td><td>Incorporated a workaround for a bug in the SGAudioChannel's kQTSGAudioPropertyID_SoundDescription SetProperty call.  This SetProperty call (as of QT 7.0.1) does not correctly clear the previously set output magic cookie, if one exists.  So if you choose an output format of AAC, then go to LPCM, the previous format's magic cookie confuses the SGAudioChannel, and it crashes the next time you preview or record.  This bug will be fixed in a future software update, but this revision of WhackedTV shows how to work around the problem by setting the output StreamFormat, ChannelLayout, and MagicCookie separately, rather than setting them in one shot with kQTSGAudioPropertyID_SoundDescription SetProperty.</td></tr>

<tr><td scope="row">2005-07-15</td><td>A Cocoa version of the venerable HackTV sample code, demonstrating usage of the Sequence Grabber API's</td></tr>

				</table>
				
			</td>
		</tr>
	</table>
	
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/WhackedTV/index.html%3Fid%3DDTS10003727-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/WhackedTV/index.html%3Fid%3DDTS10003727-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/WhackedTV/index.html%3Fid%3DDTS10003727-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
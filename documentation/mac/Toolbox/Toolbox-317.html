<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Control Record(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING317></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-316.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-318.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-297.html"><B>Chapter 5 - Control Manager</B></A> / <A HREF="Toolbox-315.html"><B>Control Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-316.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING317-0></A>
<H3><A NAME=MARKER-9-326></A>The Control Record</H3>
 <A NAME=MARKER-14-327></A><A NAME=MARKER-2-315></A>When you create a control, the Control Manager incorporates the information you specify (either in the control resource or in the parameters of the <CODE>NewControl</CODE> function) into a control record, which is a data structure of type <CODE>ControlRecord<DFN>. </DFN></CODE>The Control Manager functions you use for creating a control, <CODE>GetNewControl<DFN> and NewControl, </DFN></CODE>return a handle to a newly allocated control record. Thereafter, your application normally refers to the control by this handle, because most other Control Manager routines expect a control handle as their first parameter.<P>
 You can use Control Manager routines to determine and change several of the values in the control record, or you can access and change its fields yourself.<P>
<PRE>
TYPE ControlRecord =
PACKED RECORD
   nextControl:   ControlHandle; {next control}
   contrlOwner:   WindowPtr;     {control's window}
   contrlRect:    Rect;          {rectangle}
   contrlVis:     Byte;          {255 if visible}
   contrlHilite:  Byte;          {highlight state}
   contrlValue:   Integer;       {control's current setting}
   contrlMin:     Integer;       {control's minimum setting}
   contrlMax:     Integer;       {control's maximum setting}
   contrlDefProc: Handle;        {control definition function}
   contrlData:    Handle;        {data used by contrlDefProc}
   contrlAction:  ProcPtr;       {action procedure}
   contrlRfCon:   LongInt;       {control's reference value}
   contrlTitle:   Str255;        {control's title}
END;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>nextControl</CODE>
<DD> <A NAME=MARKER-2-329></A>A handle to the next control associated with this control's window. All the controls belonging to a given window are kept in a linked list, beginning in the <CODE>controlList</CODE> field of the window record and chained together through the <CODE>nextControl</CODE> fields of the individual control records. The end of the list is marked by a <CODE>NIL</CODE> value; as new controls are created, they're added to the beginning of the list.
<DT><CODE>contrlOwner</CODE>
<DD> <A NAME=MARKER-2-330></A>A pointer to the window to which this control belongs.
<DT><CODE>contrlRect</CODE>
<DD> <A NAME=MARKER-2-331></A>The rectangle that completely encloses the control, in the local coordinates of the control's window. You can use the <CODE>MoveControl</CODE> and <CODE>SizeControl</CODE> procedures to change the rectangle stored in this field.
<DT><CODE>contrlVis</CODE>
<DD> <A NAME=MARKER-2-332></A>The invisible/visible state for the control. When the value of this field is 0, the Control Manager does not draw the control (its state is invisible); when the value of this field is 255, the Control Manager draws the control (its state is visible). Note that even when a control is visible, it might still be obscured from sight by an overlapping window or some other object. You can use the <CODE>HideControl</CODE> procedure to change this field from visible to invisible, and you can use the <CODE>ShowControl</CODE> procedure to change this field from invisible to visible.
<DT><CODE>contrlHilite</CODE>
<DD> <A NAME=MARKER-2-333></A>Specifies whether and how the control is to be displayed, indicating whether it's active or inactive and, if active, whether it's selected. The value of 0 signifies an active control that is not selected. A value from 1 through 253 signifies a part code designating the part of <BR>the (active) control to highlight, indicating that the user is pressing the mouse button while the cursor is in that part. The value <BR>255 signifies that the control is to be made inactive and drawn accordingly. The <CODE>HiliteControl</CODE> procedure lets you change the value of this field.
<DT><CODE>contrlValue</CODE>
<DD> <A NAME=MARKER-2-334></A>The control's current setting. For buttons, checkboxes, and radio buttons, 0 means the control is off and 1 means it's on. For scroll bars and other sliders, <CODE>contrlValue</CODE> may take any value within the range specified in the <CODE>contrlMin</CODE> and <CODE>contrlMax</CODE> fields. For pop-up menus, this value is the item number of the menu item chosen by the user; if the user hasn't chosen a menu item, it is the item number of the first menu item. For other controls, you can use this field as you wish. You can use the <CODE>GetControlValue</CODE> function to determine the value of this field, and you can use the <CODE>SetControlValue</CODE> procedure to change the value of this field.
<DT><CODE>contrlMin</CODE>
<DD> <A NAME=MARKER-2-335></A>The control's minimum possible setting. For on-and-off controls--like checkboxes and radio buttons--this value should be 0 (meaning that the control is off). For scroll bars and other sliders, this can be any appropriate minimum value. For controls--like buttons--<BR>that don't retain a setting, this value should be 0. For pop-up menus, the Control Manager sets this field to 1. For other <BR>controls, you can use this field as you wish. You can use the <CODE>GetControlMinimum</CODE> function to determine the value of this field, and you can use the <CODE>SetControlMinimum</CODE> procedure to change the value of this field.
<DT><CODE>contrlMax</CODE>
<DD> <A NAME=MARKER-2-336></A>The control's maximum possible setting. For on-and-off controls like checkboxes and radio buttons, this value should be 1 (meaning that the control is on). For scroll bars and other sliders, this can be any appropriate maximum value. When you make the maximum setting of a scroll bar equal to its minimum setting, the control definition function automatically makes the scroll bar inactive. When you make the maximum setting exceed the minimum, the control definition function makes the scroll bar active again. For controls--like buttons--that don't retain a setting, this value should be 1. For pop-up menus, the Control Manager sets this value to the number of items in the menu. For other controls, you can use this field as you wish. You can use the <CODE>GetControlMaximum</CODE> function to determine the value of this field, and you can use the <CODE>SetControlMaximum</CODE> procedure to change the value of this field.
<DT><CODE>contrlDefProc</CODE>
<DD> <A NAME=MARKER-2-337></A>A handle to the control definition function for this type of <BR>control. When you create a control, you identify its type with <BR>a control definition ID, which is converted into a handle to the control definition function and stored in this field. Thereafter, <BR>the Control Manager uses this handle to access the definition function; you should never need to refer to this field directly.
<DT><B><B>Note</B></B>
<DD>In systems running in 24-bit mode, the high-order byte of the <CODE>contrlDefProc</CODE> field contains the variant, which the Control Manager gets from the control definition ID.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
<DT><CODE>contrlData</CODE>
<DD> Reserved for use by the control definition function, typically to hold additional information specific to a particular control type. For example, the control definition function for scroll bars uses this field for a handle to the region containing the scroll box. (If no more than 4 bytes of additional information are needed, the definition function may store the information directly in the <CODE>contrlData</CODE> field rather than using a handle.) The control definition function for pop-up menus uses this field to store a pop-up private data record, which is described on <A HREF=Toolbox-319.html#MARKER-9-353>page 5-70</A>.
<DT><CODE>contrlAction</CODE>
<DD> <A NAME=MARKER-2-339></A>A pointer to the control's action procedure, if any. The <CODE>TrackControl</CODE> function may call this procedure to respond to <BR>the user's dragging of the control, and this procedure responds <BR>by repeatedly performing some action as long as the user holds down the mouse button. See the description of <CODE>TrackControl</CODE> <BR>on <A HREF=Toolbox-332.html#MARKER-9-419>page 5-84</A> for more information about the action procedure. <BR>You can use the <CODE>GetControlAction</CODE> function to determine the current value of this field and the <CODE>SetControlAction</CODE> procedure to change it.
<DT><CODE>contrlRfCon</CODE>
<DD> <A NAME=MARKER-2-340></A>The control's reference value, which your application may use <BR>for any purpose. You can use the <CODE>GetControlReference</CODE> <BR>function to determine the current value of this field and the <CODE>SetControlReference<DFN> procedure to change it.</DFN></CODE>
<DT><CODE>contrlTitle</CODE>
<DD> <A NAME=MARKER-2-341></A>The control title, if any. You can use the <CODE>GetControlTitle</CODE> procedure to determine the current value of this field and the <CODE>SetControlTitle<DFN> procedure to change it.<A NAME=MARKER-2-342></A></DFN></CODE>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-316.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-318.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

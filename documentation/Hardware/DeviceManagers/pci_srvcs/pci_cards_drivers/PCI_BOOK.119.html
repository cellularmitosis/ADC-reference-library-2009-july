<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> RegistryEntryIterate10</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.116.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.118.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.11a.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3745"> </A><A NAME="22278"> </A>RegistryEntryIterate</H1><P CLASS="T1.Text1"><A NAME="pgfId=3746"> </A>One kind of iteration call, <TT CLASS="cv">RegistryEntryIterate</TT>, retrieves the next name entry in the Name Registry by moving in a specified direction.<A NAME="marker=6424"> </A></P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=17679"> </A>OSStatus RegistryEntryIterate(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RegEntryIter *cookie,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RegEntryIterationOp relationship,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RegEntryID *foundEntry,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Boolean *done);</CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=17683"> </A><TT CLASS="cv">--&gt; cookie</TT><A NAME="23836"> </A></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3750"> </A>Pointer to the iterator used by iterate and search routines.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=17693"> </A><TT CLASS="cv">--&gt; relationship</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3754"> </A> The iteration direction (values defined in <A HREF="PCI_BOOK.10d.html" CLASS="XRef">Data Structures and Constants</A>).</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=17703"> </A><TT CLASS="cv">&lt;-- foundEntry</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3755"> </A> Pointer to the ID of the next name entry found.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=17713"> </A><TT CLASS="cv">&lt;-- done</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3756"> </A>Pointer to the interation result. A value of <TT CLASS="cv">true</TT> means iteration is completed.</DD></DL COMPACT><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3757"> </A>DESCRIPTION</H5><P CLASS="T1.Text1"><A NAME="pgfId=3758"> </A><TT CLASS="cv">RegistryEntryIterate</TT> moves from entry to entry in the Name Registry, marking its position by changing the value of <TT CLASS="cv">cookie</TT>. The direction of movement is indicated by <TT CLASS="cv">relationship</TT>. <TT CLASS="cv">RegistryEntryIterate</TT> returns the <TT CLASS="cv">RegEntryID</TT> value that identifies the next name entry found in <TT CLASS="cv">foundEntry</TT>, or <TT CLASS="cv">true</TT> in <TT CLASS="cv">done</TT> if all name entries have been found.</P></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=5967"> </A>EXECUTION CONTEXT</H5><P CLASS="T1.Text1"><A NAME="pgfId=5968"> </A><TT CLASS="cv">RegistryEntryIterate</TT> may be called from any execution level.</P></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3772"> </A>RESULT CODES</H5><TABLE border=1 cellpadding=3><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=3761"> </A>noErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3763"> </A>0</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3765"> </A>No error</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=3767"> </A>paramErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3769"> </A>-50</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3771"> </A>Bad parameter</FONT></TD></TR></TABLE></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3773"> </A>CODE SAMPLE</H5><P CLASS="T1.Text1"><A NAME="pgfId=5784"> </A><A HREF="PCI_BOOK.119.html#26832" CLASS="XRef">Listing&nbsp;10-3</A> shows code using <TT CLASS="cv">RegistryEntryIterate</TT> and <TT CLASS="cv">RegistryEntryDelete</TT> that finds and removes all immediate child entries of a given parent entry. Deleting a name entry invalidates the iterator and <TT CLASS="cv">RegEntryID</TT> for that name entry. </P><P CLASS="L.Listing"><B><A NAME="pgfId=5786"> </A>Listing&nbsp;10-3	<A NAME="26832"> </A>Finding and removing child entries</B></P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=18839"> </A>OSStatus<BR>RemoveDevices(<BR>&nbsp;&nbsp;&nbsp;&nbsp;constRegEntryID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*parentEntry<BR>)<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegEntryID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entry;<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegEntryIter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cookie;<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegEntryIterationOp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterOp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;Boolean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done;<BR>&nbsp;&nbsp;&nbsp;&nbsp;OSStatus&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err = noErr;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;RegistryEntryIDInit(&amp;entry);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;err = RegistryEntryIterateCreate(&amp;cookie);<BR>&nbsp;&nbsp;&nbsp;&nbsp;if(err != noErr)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return err;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;/* Reset iterator to point to the parent entry */<BR>&nbsp;&nbsp;&nbsp;&nbsp;err = RegistryEntryIterateSet(&amp;cookie, parentEntry);<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;if (err == noErr) {<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Include just immediate chidren, not all descendants */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterOp=kRegIterChildren;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err=RegistryEntryIterate(&amp;cookie, iterOp, &amp;entry, &amp;done);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!done &amp;&amp; err == noErr) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err = RegistryEntryDelete(&amp;entry);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RegistryEntryIDDispose(&amp;entry);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterOp = kRegIterChildren;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} while (!done &amp;&amp; err == noErr);<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegistryEntryIterateDispose(&amp;cookie);<BR>&nbsp;&nbsp;&nbsp;&nbsp;returnerr;<BR>}</CODE></DIV><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.116.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.118.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.11a.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
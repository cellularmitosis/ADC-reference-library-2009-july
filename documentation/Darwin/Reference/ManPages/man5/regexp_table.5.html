<html><head><title>Mac OS X
 Manual Page For regexp_table(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/regexp_table" title="Mac OS X
 Manual Page for regexp_table(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/regexp_table"; name=regexp_table(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
REGEXP_TABLE(5)                                                                              REGEXP_TABLE(5)



<b>NAME</b>
       regexp_table - format of Postfix regular expression tables

<b>SYNOPSIS</b>
       <b>postmap</b> <b>-q</b> <b>"</b><u>string</u><b>"</b> <b>regexp:/etc/postfix/</b><u>filename</u>

       <b>postmap</b> <b>-q</b> <b>-</b> <b>regexp:/etc/postfix/</b><u>filename</u> &lt;<u>inputfile</u>

<b>DESCRIPTION</b>
       The  Postfix mail system uses optional tables for address rewriting, mail routing, or access control.
       These tables are usually in <b>dbm</b> or <b>db</b> format.

       Alternatively, lookup tables can be specified in POSIX regular expression form. In  this  case,  each
       input  is  compared  against  a  list of patterns. When a match is found, the corresponding result is
       returned and the search is terminated.

       To find out what types of lookup tables your Postfix system supports use the "<b>postconf</b> <b>-m</b>" command.

       To test lookup tables, use the "<b>postmap</b> <b>-q</b>" command as described in the SYNOPSIS above.

<b>COMPATIBILITY</b>
       With Postfix version 2.2 and earlier specify "<b>postmap</b> <b>-fq</b>" to query a table that contains case sensi-
       tive patterns. Patterns are case insensitive by default.

<b>TABLE</b> <b>FORMAT</b>
       The general form of a Postfix regular expression table is:

       <b>/</b><u>pattern</u><b>/</b><u>flags</u> <u>result</u>
              When <u>pattern</u> matches the input string, use the corresponding <u>result</u> value.

       <b>!/</b><u>pattern</u><b>/</b><u>flags</u> <u>result</u>
              When <u>pattern</u> does <b>not</b> match the input string, use the corresponding <u>result</u> value.

       <b>if</b> <b>/</b><u>pattern</u><b>/</b><u>flags</u>

       <b>endif</b>  Match  the  input  string  against the patterns between <b>if</b> and <b>endif</b>, if and only if that same
              input string also matches <u>pattern</u>. The <b>if</b>..<b>endif</b> can nest.

              Note: do not prepend whitespace to patterns inside <b>if</b>..<b>endif</b>.

              This feature is available in Postfix 2.1 and later.

       <b>if</b> <b>!/</b><u>pattern</u><b>/</b><u>flags</u>

       <b>endif</b>  Match the input string against the patterns between <b>if</b> and <b>endif</b>, if and  only  if  that  same
              input string does <b>not</b> match <u>pattern</u>. The <b>if</b>..<b>endif</b> can nest.

              Note: do not prepend whitespace to patterns inside <b>if</b>..<b>endif</b>.

              This feature is available in Postfix 2.1 and later.

       blank lines and comments
              Empty  lines  and  whitespace-only  lines are ignored, as are lines whose first non-whitespace
              character is a `#'.

       multi-line text
              A logical line starts with non-whitespace text. A line that starts with whitespace continues a
              logical line.

       Each  pattern  is a POSIX regular expression enclosed by a pair of delimiters. The regular expression
       syntax is documented in <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format"><b>re_format</b>(7)</a> with 4.4BSD, in <!-- a --><b>regex</b>(5)<!-- /a --> with  Solaris,  and  in  <!-- a --><b>regex</b>(7)<!-- /a -->  with
       Linux. Other systems may use other document names.

       The  expression  delimiter  can  be  any character, except whitespace or characters that have special
       meaning (traditionally the forward slash is used). The regular expression can contain whitespace.

       By default, matching is case-insensitive, and newlines are not treated  as  special  characters.  The
       behavior  is controlled by flags, which are toggled by appending one or more of the following charac-<font color="#ffffff" class="whiteout">ters&nbsp;characters</font>
       ters after the pattern:

       <b>i</b> (default: on)
              Toggles the case sensitivity flag. By default, matching is case insensitive.

       <b>x</b> (default: on)
              Toggles the extended expression syntax flag. By default, support for extended expression  syn-<font color="#ffffff" class="whiteout">tax&nbsp;syntax</font>
              tax is enabled.

       <b>m</b> (default: off)
              Toggle  the multi-line mode flag. When this flag is on, the <b>^</b> and <b>$</b> metacharacters match imme-<font color="#ffffff" class="whiteout">diately&nbsp;immediately</font>
              diately after and immediately before a newline character, respectively, in addition to  match-<font color="#ffffff" class="whiteout">ing&nbsp;matching</font>
              ing at the start and end of the input string.

<b>TABLE</b> <b>SEARCH</b> <b>ORDER</b>
       Patterns  are  applied  in the order as specified in the table, until a pattern is found that matches
       the input string.

       Each pattern is applied to the entire input string.  Depending on the application, that string is  an
       entire  client  hostname,  an  entire  client IP address, or an entire mail address.  Thus, no parent
       domain or parent network search is done, and <u>user@domain</u> mail addresses are not broken up into  their
       <u>user</u> and <u>domain</u> constituent parts, nor is <u>user+foo</u> broken up into <u>user</u> and <u>foo</u>.

<b>TEXT</b> <b>SUBSTITUTION</b>
       Substitution  of  substrings from the matched expression into the result string is possible using $1,
       $2, etc.; specify $$ to produce a $ character as output.  The macros in the result string may need to
       be written as ${n} or $(n) if they aren't followed by whitespace.

       Note:  since  negated  patterns  (those  preceded  by <b>!</b>) return a result when the expression does not
       match, substitutions are not available for negated patterns.

<b>EXAMPLE</b> <b>SMTPD</b> <b>ACCESS</b> <b>MAP</b>
       # Disallow sender-specified routing. This is a must if you relay mail
       # for other domains.
       /[%!@].*[%!@]/       550 Sender-specified routing rejected

       # Postmaster is OK, that way they can talk to us about how to fix
       # their problem.
       /^postmaster@/       OK

       # Protect your outgoing majordomo exploders
       if !/^owner-/
       /^(.*)-outgoing@(.*)$/   550 Use ${1}@${2} instead
       endif

<b>EXAMPLE</b> <b>HEADER</b> <b>FILTER</b> <b>MAP</b>
       # These were once common in junk mail.
       /^Subject: make money fast/     REJECT
       /^To: friend@public\.com/       REJECT

<b>EXAMPLE</b> <b>BODY</b> <b>FILTER</b> <b>MAP</b>
       # First skip over base 64 encoded text to save CPU cycles.
       ~^[[:alnum:]+/]{60,}$~          OK

       # Put your own body patterns here.

<b>SEE</b> <b>ALSO</b>
       <a href="../man1/postmap.1.html#//apple_ref/doc/man/1/postmap">postmap(1)</a>, Postfix lookup table manager
       <a href="pcre_table.5.html#//apple_ref/doc/man/5/pcre_table">pcre_table(5)</a>, format of PCRE tables
       <a href="cidr_table.5.html#//apple_ref/doc/man/5/cidr_table">cidr_table(5)</a>, format of CIDR tables

<b>README</b> <b>FILES</b>
       Use "<b>postconf</b> <b>readme_directory</b>" or "<b>postconf</b> <b>html_directory</b>" to locate this information.
       DATABASE_README, Postfix lookup table overview

<b>AUTHOR(S)</b>
       The regexp table lookup code was originally written by:
       LaMont Jones
       lamont@hp.com

       That code was based on the PCRE dictionary contributed by:
       Andrew McNamara
       andrewm@connect.com.au
       connect.com.au Pty. Ltd.
       Level 3, 213 Miller St
       North Sydney, NSW, Australia

       Adopted and adapted by:
       Wietse Venema
       IBM T.J. Watson Research
       P.O. Box 704
       Yorktown Heights, NY 10598, USA



                                                                                             REGEXP_TABLE(5)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/regexp_table.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/regexp_table.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/regexp_table.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<html><head><title>Mac OS X Developer Tools
 Manual Page For Tcl_MakeTcpClientChannel(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tcl_MakeTcpClientChannel" title="Mac OS X Developer Tools
 Manual Page for Tcl_MakeTcpClientChannel(3tcl)"><a name="//apple_ref/doc/man/3/Tcl_MakeTcpClientChannel" title="Mac OS X Developer Tools
 Manual Page for Tcl_MakeTcpClientChannel(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tcl_MakeTcpClientChannel"; name=Tcl_MakeTcpClientChannel(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tcl_OpenTcpClient(3)                       Tcl Library Procedures                       <a href="Tcl_OpenTcpClient.3tcl.html#//apple_ref/doc/man/3/Tcl_OpenTcpClient">Tcl_OpenTcpClient(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tcl_OpenTcpClient,  Tcl_MakeTcpClientChannel,  Tcl_OpenTcpServer  - procedures to open channels using
       TCP sockets

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Channel
       <b>Tcl_OpenTcpClient</b>(<u>interp,</u> <u>port,</u> <u>host,</u> <u>myaddr,</u> <u>myport,</u> <u>async</u>)

       Tcl_Channel
       <b>Tcl_MakeTcpClientChannel</b>(<u>sock</u>)

       Tcl_Channel
       <b>Tcl_OpenTcpServer</b>(<u>interp,</u> <u>port,</u> <u>myaddr,</u> <u>proc,</u> <u>clientData</u>)


<b>ARGUMENTS</b>
       Tcl_Interp        <u>*interp</u>            (in)      Tcl interpreter to use for error reporting.   If  non-<font color="#ffffff" class="whiteout">NULL&nbsp;nonNULL</font>
                                                      NULL  and an error occurs, an error message is left in
                                                      the interpreter's result.

       int               <u>port</u>               (in)      A port number to connect to as a client or  to  listen
                                                      on as a server.

       CONST char        <u>*host</u>              (in)      A  string  specifying  a  host name or address for the
                                                      remote end of the connection.

       int               <u>myport</u>             (in)      A port number for the client's end of the socket.   If
                                                      0, a port number is allocated at random.

       CONST char        <u>*myaddr</u>            (in)      A  string specifying the host name or address for net-<font color="#ffffff" class="whiteout">work&nbsp;network</font>
                                                      work interface to use for the local end of the connec-<font color="#ffffff" class="whiteout">tion.&nbsp;connection.</font>
                                                      tion.  If NULL, a default interface is chosen.

       int               <u>async</u>              (in)      If  nonzero,  the  client  socket  is  connected asyn-<font color="#ffffff" class="whiteout">chronously&nbsp;asynchronously</font>
                                                      chronously to the server.

       ClientData        <u>sock</u>               (in)      Platform-specific handle for client TCP socket.

       Tcl_TcpAcceptProc <u>*proc</u>              (in)      Pointer to a procedure to invoke each time a new  con-<font color="#ffffff" class="whiteout">nection&nbsp;connection</font>
                                                      nection is accepted via the socket.

       ClientData        <u>clientData</u>         (in)      Arbitrary one-word value to pass to <u>proc</u>.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       These  functions  are convenience procedures for creating channels that communicate over TCP sockets.
       The operations on a channel are described in the manual entry for <b>Tcl_OpenFileChannel</b>.


<b>TCL_OPENTCPCLIENT</b>
       <b>Tcl_OpenTcpClient</b> opens a client TCP socket connected to a <u>port</u> on a specific  <u>host</u>,  and  returns  a
       channel  that  can  be  used  to communicate with the server. The host to connect to can be specified
       either as a domain name style name (e.g. <b>www.sunlabs.com</b>), or as a string containing the alphanumeric
       representation  of  its four-byte address (e.g.  <b>127.0.0.1</b>). Use the string <b>localhost</b> to connect to a
       TCP socket on the host on which the function is invoked.

       The <u>myaddr</u> and <u>myport</u> arguments allow a client to specify an address for the local end of the connec-<font color="#ffffff" class="whiteout">tion.&nbsp;connection.</font>
       tion.   If  <u>myaddr</u>  is  NULL,  then an interface is chosen automatically by the operating system.  If
       <u>myport</u> is 0, then a port number is chosen at random by the operating system.

       If <u>async</u> is zero, the call to <b>Tcl_OpenTcpClient</b> returns only after the client socket has either  suc-<font color="#ffffff" class="whiteout">cessfully&nbsp;successfully</font>
       cessfully  connected  to the server, or the attempted connection has failed.  If <u>async</u> is nonzero the
       socket is connected asynchronously and the returned channel may not yet be connected  to  the  server
       when the call to <b>Tcl_OpenTcpClient</b> returns. If the channel is in blocking mode and an input or output
       operation is done on the channel before the connection is completed or  fails,  that  operation  will
       wait  until  the  connection either completes successfully or fails. If the channel is in nonblocking
       mode, the input or output operation will return immediately and a subsequent call to <b>Tcl_InputBlocked</b>
       on the channel will return nonzero.

       The  returned  channel  is opened for reading and writing.  If an error occurs in opening the socket,
       <b>Tcl_OpenTcpClient</b> returns NULL and records a POSIX error code that can be retrieved  with  <b>Tcl_GetEr</b>-<font color="#ffffff" class="whiteout">rno.&nbsp;Tcl_GetErrno.</font>
       <b>rno</b>.  In addition, if <u>interp</u> is non-NULL, an error message is left in the interpreter's result.

       The newly created channel is not registered in the supplied interpreter; to register it, use <b>Tcl_Reg</b>-<font color="#ffffff" class="whiteout">isterChannel.&nbsp;Tcl_RegisterChannel.</font>
       <b>isterChannel</b>.  If one of the standard channels, <b>stdin,</b> <b>stdout</b> or <b>stderr</b> was  previously  closed,  the
       act of creating the new channel also assigns it as a replacement for the standard channel.


<b>TCL_MAKETCPCLIENTCHANNEL</b>
       <b>Tcl_MakeTcpClientChannel</b>  creates  a  <b>Tcl_Channel</b> around an existing, platform specific, handle for a
       client TCP socket.

       The newly created channel is not registered in the supplied interpreter; to register it, use <b>Tcl_Reg</b>-<font color="#ffffff" class="whiteout">isterChannel.&nbsp;Tcl_RegisterChannel.</font>
       <b>isterChannel</b>.   If  one  of the standard channels, <b>stdin,</b> <b>stdout</b> or <b>stderr</b> was previously closed, the
       act of creating the new channel also assigns it as a replacement for the standard channel.


<b>TCL_OPENTCPSERVER</b>
       <b>Tcl_OpenTcpServer</b> opens a TCP socket on the local host on a specified <u>port</u> and  uses  the  Tcl  event
       mechanism  to  accept requests from clients to connect to it.  The <u>myaddr</u> argument specifies the net-<font color="#ffffff" class="whiteout">work&nbsp;network</font>
       work interface.  If <u>myaddr</u> is NULL the special address INADDR_ANY should be used to allow connections
       from  any  network  interface.  Each time a client connects to this socket, Tcl creates a channel for
       the new connection and invokes <u>proc</u> with information about the channel.  <u>Proc</u> must match the  follow-<font color="#ffffff" class="whiteout">ing&nbsp;following</font>
       ing prototype:
              typedef void Tcl_TcpAcceptProc(
                ClientData <u>clientData</u>,
                Tcl_Channel <u>channel</u>,
                char *<u>hostName</u>,
                int <u>port</u>);

       The  <u>clientData</u>  argument  will  be the same as the <u>clientData</u> argument to <b>Tcl_OpenTcpServer</b>, <u>channel</u>
       will be the handle for the new channel, <u>hostName</u> points to a string containing the name of the client
       host  making  the  connection,  and  <u>port</u>  will contain the client's port number.  The new channel is
       opened for both input and output.  If <u>proc</u> raises an error, the connection is  closed  automatically.
       <u>Proc</u> has no return value, but if it wishes to reject the connection it can close <u>channel</u>.

       <b>Tcl_OpenTcpServer</b>  normally  returns  a  pointer  to a channel representing the server socket.  If an
       error occurs, <b>Tcl_OpenTcpServer</b> returns NULL and records a POSIX error code  that  can  be  retrieved
       with  <b>Tcl_GetErrno</b>.   In  addition,  if  the interpreter is non-NULL, an error message is left in the
       interpreter's result.

       The channel returned by <b>Tcl_OpenTcpServer</b> cannot be used for either input or output.  It is simply  a
       handle  for the socket used to accept connections.  The caller can close the channel to shut down the
       server and disallow further connections from new clients.

       TCP  server  channels  operate  correctly  only  in  applications  that   dispatch   events   through
       <b>Tcl_DoOneEvent</b>  or through Tcl commands such as <b>vwait</b>; otherwise Tcl will never notice that a connec-<font color="#ffffff" class="whiteout">tion&nbsp;connection</font>
       tion request from a remote client is pending.

       The newly created channel is not registered in the supplied interpreter; to register it, use <b>Tcl_Reg</b>-<font color="#ffffff" class="whiteout">isterChannel.&nbsp;Tcl_RegisterChannel.</font>
       <b>isterChannel</b>.   If  one  of the standard channels, <b>stdin,</b> <b>stdout</b> or <b>stderr</b> was previously closed, the
       act of creating the new channel also assigns it as a replacement for the standard channel.


<b>PLATFORM</b> <b>ISSUES</b>                                                                                              |
       On Unix platforms, the socket handle is a Unix file descriptor as returned by the <b>socket</b> system call. |
       On  the Windows platform, the socket handle is a <b>SOCKET</b> as defined in the WinSock API.  On the Macin- |
       tosh platform, the socket handle is a <b>StreamPtr</b>.


<b>SEE</b> <b>ALSO</b>
       <a href="Tcl_OpenFileChannel.3tcl.html#//apple_ref/doc/man/3/Tcl_OpenFileChannel">Tcl_OpenFileChannel(3)</a>, <a href="Tcl_RegisterChannel.3tcl.html#//apple_ref/doc/man/3/Tcl_RegisterChannel">Tcl_RegisterChannel(3)</a>, <a href="../mann/vwait.ntcl.html#//apple_ref/doc/man/n/vwait">vwait(n)</a>


<b>KEYWORDS</b>
       client, server, TCP



Tcl                                                  8.0                                <a href="Tcl_OpenTcpClient.3tcl.html#//apple_ref/doc/man/3/Tcl_OpenTcpClient">Tcl_OpenTcpClient(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_MakeTcpClientChannel.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_MakeTcpClientChannel.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_MakeTcpClientChannel.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

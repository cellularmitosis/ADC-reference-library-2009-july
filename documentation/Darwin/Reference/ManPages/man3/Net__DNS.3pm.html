<html><head><title>Mac OS X
 Manual Page For Net::DNS(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/Net::DNS" title="Mac OS X
 Manual Page for Net::DNS(3pm)"><a name="//apple_ref/doc/man/3/Net::DNS" title="Mac OS X
 Manual Page for Net::DNS(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/Net::DNS"; name=Net::DNS(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Net::DNS(3)                          User Contributed Perl Documentation                         Net::DNS(3)



<b>NAME</b>
       Net::DNS - Perl interface to the DNS resolver

<b>SYNOPSIS</b>
       "use Net::DNS;"

<b>DESCRIPTION</b>
       Net::DNS is a collection of Perl modules that act as a Domain Name System (DNS) resolver.  It allows
       the programmer to perform DNS queries that are beyond the capabilities of "gethostbyname" and
       "gethostbyaddr".

       The programmer should be somewhat familiar with the format of a DNS packet and its various sections.
       See RFC 1035 or <u>DNS</u> <u>and</u> <u>BIND</u> (Albitz &amp; Liu) for details.

       <b>Resolver</b> <b>Objects</b>

       A resolver object is an instance of the Net::DNS::Resolver class. A program can have multiple
       resolver objects, each maintaining its own state information such as the nameservers to be queried,
       whether recursion is desired, etc.

       <b>Packet</b> <b>Objects</b>

       Net::DNS::Resolver queries return Net::DNS::Packet objects.  Packet objects have five sections:

         The header section, a Net::DNS::Header object.

         The question section, a list of Net::DNS::Question objects.

         The answer section, a list of Net::DNS::RR objects.

         The authority section, a list of Net::DNS::RR objects.

         The additional section, a list of Net::DNS::RR objects.

       <b>Update</b> <b>Objects</b>

       The Net::DNS::Update package is a subclass of Net::DNS::Packet for creating packet objects to be used
       in dynamic updates.

       <b>Header</b> <b>Objects</b>

       Net::DNS::Header objects represent the header section of a DNS packet.

       <b>Question</b> <b>Objects</b>

       Net::DNS::Question objects represent the question section of a DNS packet.

       <b>RR</b> <b>Objects</b>

       Net::DNS::RR is the base class for DNS resource record (RR) objects in the answer, authority, and
       additional sections of a DNS packet.

       Don't assume that RR objects will be of the type you requested -- always check an RR object's type
       before calling any of its methods.

<b>METHODS</b>
       See the manual pages listed above for other class-specific methods.

       <b>version</b>

           print Net::DNS-&gt;version, "\n";

       Returns the version of Net::DNS.

       <b>mx</b>

           # Use a default resolver -- can't get an error string this way.
           use Net::DNS;
           my @mx = mx("example.com");

           # Use your own resolver object.
           use Net::DNS;
           my $res = Net::DNS::Resolver-&gt;new;
           my  @mx = mx($res, "example.com");

       Returns a list of Net::DNS::RR::MX objects representing the MX records for the specified name; the
       list will be sorted by preference. Returns an empty list if the query failed or no MX records were
       found.

       This method does not look up A records -- it only performs MX queries.

       See "EXAMPLES" for a more complete example.

       <b>yxrrset</b>

       Use this method to add an "RRset exists" prerequisite to a dynamic update packet.  There are two
       forms, value-independent and value-dependent:

           # RRset exists (value-independent)
           $update-&gt;push(pre =&gt; yxrrset("host.example.com A"));

       Meaning:  At least one RR with the specified name and type must exist.

           # RRset exists (value-dependent)
           $packet-&gt;push(pre =&gt; yxrrset("host.example.com A 10.1.2.3"));

       Meaning:  At least one RR with the specified name and type must exist and must have matching data.

       Returns a "Net::DNS::RR" object or "undef" if the object couldn't be created.

       <b>nxrrset</b>

       Use this method to add an "RRset does not exist" prerequisite to a dynamic update packet.

           $packet-&gt;push(pre =&gt; nxrrset("host.example.com A"));

       Meaning:  No RRs with the specified name and type can exist.

       Returns a "Net::DNS::RR" object or "undef" if the object couldn't be created.

       <b>yxdomain</b>

       Use this method to add a "name is in use" prerequisite to a dynamic update packet.

           $packet-&gt;push(pre =&gt; yxdomain("host.example.com"));

       Meaning:  At least one RR with the specified name must exist.

       Returns a "Net::DNS::RR" object or "undef" if the object couldn't be created.

       <b>nxdomain</b>

       Use this method to add a "name is not in use" prerequisite to a dynamic update packet.

           $packet-&gt;push(pre =&gt; nxdomain("host.example.com"));

       Meaning:  No RR with the specified name can exist.

       Returns a "Net::DNS::RR" object or "undef" if the object couldn't be created.

       <b>rr_add</b>

       Use this method to add RRs to a zone.

           $packet-&gt;push(update =&gt; rr_add("host.example.com A 10.1.2.3"));

       Meaning:  Add this RR to the zone.

       RR objects created by this method should be added to the "update" section of a dynamic update packet.
       The TTL defaults to 86400 seconds (24 hours) if not specified.

       Returns a "Net::DNS::RR" object or "undef" if the object couldn't be created.

       <b>rr_del</b>

       Use this method to delete RRs from a zone.  There are three forms: delete an RRset, delete all
       RRsets, and delete an RR.

           # Delete an RRset.
           $packet-&gt;push(update =&gt; rr_del("host.example.com A"));

       Meaning:  Delete all RRs having the specified name and type.

           # Delete all RRsets.
           $packet-&gt;push(update =&gt; rr_del("host.example.com"));

       Meaning:  Delete all RRs having the specified name.

           # Delete an RR.
           $packet-&gt;push(update =&gt; rr_del("host.example.com A 10.1.2.3"));

       Meaning:  Delete all RRs having the specified name, type, and data.

       RR objects created by this method should be added to the "update" section of a dynamic update packet.

       Returns a "Net::DNS::RR" object or "undef" if the object couldn't be created.

       <b>Sorting</b> <b>of</b> <b>RR</b> <b>arrays</b>

       As of version 0.55 there is functionality to help you sort RR arrays. '<u>rrsort()</u>' is the function that
       is available to do the sorting. In most cases rrsort will give you the answer that you want but you
       can specify your own sorting method by using the Net::DNS::RR::FOO-&gt;<u>set</u><b>_</b><u>rrsort</u><b>_</b><u>func()</u> class method.
       See Net::DNS::RR for details.

       <u>rrsort()</u>

          use Net::DNS qw(rrsort);

          my @prioritysorted=rrsort("SRV","priority",@rr_array);

       <u>rrsort()</u> selects all RRs from the input array that are of the type that are defined in the first
       argument. Those RRs are sorted based on the attribute that is specified as second argument.

       There are a number of RRs for which the sorting function is specifically defined for certain
       attributes.  If such sorting function is defined in the code (it can be set or overwritten using the
       <u>set</u><b>_</b><u>rrsort</u><b>_</b><u>func()</u> class method) that function is used.

       For instance:
          my @prioritysorted=rrsort("SRV","priority",@rr_array); returns the SRV records sorted from lowest
       to heighest priority and for equal priorities from heighes to lowes weight.

       If the function does not exist then a numerical sort on the attribute value is performed.
          my @portsorted=rrsort("SRV","port",@rr_array);

       If the attribute does not exist for a certain RR than the RRs are sorted on string comparrisson of
       the rdata.

       If the attribute is not defined than either the default_sort function will be defined or "Canonical
       sorting" (as defined by DNSSEC) will be used.

       <u>rrsort()</u> returns a sorted array with only elements of the specified RR type or undef.

       <u>rrsort()</u> returns undef when arguments are incorrect.

<b>EXAMPLES</b>
       The following examples show how to use the "Net::DNS" modules.  See the other manual pages and the
       demo scripts included with the source code for additional examples.

       See the "Net::DNS::Update" manual page for an example of performing dynamic updates.

       <b>Look</b> <b>up</b> <b>a</b> <b>host's</b> <b>addresses.</b>

         use Net::DNS;
         my $res   = Net::DNS::Resolver-&gt;new;
         my $query = $res-&gt;search("host.example.com");

         if ($query) {
             foreach my $rr ($query-&gt;answer) {
                 next unless $rr-&gt;type eq "A";
                 print $rr-&gt;address, "\n";
             }
         } else {
             warn "query failed: ", $res-&gt;errorstring, "\n";
         }

       <b>Find</b> <b>the</b> <b>nameservers</b> <b>for</b> <b>a</b> <b>domain.</b>

         use Net::DNS;
         my $res   = Net::DNS::Resolver-&gt;new;
         my $query = $res-&gt;query("example.com", "NS");

         if ($query) {
             foreach $rr (grep { $_-&gt;type eq 'NS' } $query-&gt;answer) {
                 print $rr-&gt;nsdname, "\n";
             }
         }
         else {
             warn "query failed: ", $res-&gt;errorstring, "\n";
         }

       <b>Find</b> <b>the</b> <b>MX</b> <b>records</b> <b>for</b> <b>a</b> <b>domain.</b>

         use Net::DNS;
         my $name = "example.com";
         my $res  = Net::DNS::Resolver-&gt;new;
         my @mx   = mx($res, $name);

         if (@mx) {
             foreach $rr (@mx) {
                 print $rr-&gt;preference, " ", $rr-&gt;exchange, "\n";
             }
         } else {
             warn "Can't find MX records for $name: ", $res-&gt;errorstring, "\n";
         }

       <b>Print</b> <b>a</b> <b>domain's</b> <b>SOA</b> <b>record</b> <b>in</b> <b>zone</b> <b>file</b> <b>format.</b>

         use Net::DNS;
         my $res   = Net::DNS::Resolver-&gt;new;
         my $query = $res-&gt;query("example.com", "SOA");

         if ($query) {
             ($query-&gt;answer)[0]-&gt;print;
         } else {
             print "query failed: ", $res-&gt;errorstring, "\n";
         }

       <b>Perform</b> <b>a</b> <b>zone</b> <b>transfer</b> <b>and</b> <b>print</b> <b>all</b> <b>the</b> <b>records.</b>

         use Net::DNS;
         my $res  = Net::DNS::Resolver-&gt;new;
         $res-&gt;nameservers("ns.example.com");

         my @zone = $res-&gt;axfr("example.com");

         foreach $rr (@zone) {
             $rr-&gt;print;
         }

       <b>Perform</b> <b>a</b> <b>background</b> <b>query</b> <b>and</b> <b>do</b> <b>some</b> <b>other</b> <b>work</b> <b>while</b> <b>waiting</b> <b>for</b> <b>the</b> <b>answer.</b>

         use Net::DNS;
         my $res    = Net::DNS::Resolver-&gt;new;
         my $socket = $res-&gt;bgsend("host.example.com");

         until ($res-&gt;bgisready($socket)) {
             # do some work here while waiting for the answer
             # ...and some more here
         }

         my $packet = $res-&gt;bgread($socket);
         $packet-&gt;print;

       <b>Send</b> <b>a</b> <b>background</b> <b>query</b> <b>and</b> <b>use</b> <b>select</b> <b>to</b> <b>determine</b> <b>when</b> <b>the</b> <b>answer</b> <b>has</b> <b>arrived.</b>

         use Net::DNS;
         use IO::Select;

         my $timeout = 5;
         my $res     = Net::DNS::Resolver-&gt;new;
         my $bgsock  = $res-&gt;bgsend("host.example.com");
         my $sel     = IO::Select-&gt;new($bgsock);

         # Add more sockets to $sel if desired.
         my @ready = $sel-&gt;can_read($timeout);
         if (@ready) {
             foreach my $sock (@ready) {
                 if ($sock == $bgsock) {
                     my $packet = $res-&gt;bgread($bgsock);
                     $packet-&gt;print;
                     $bgsock = undef;
                 }
                 # Check for the other sockets.
                 $sel-&gt;remove($sock);
                 $sock = undef;
             }
         } else {
             warn "timed out after $timeout seconds\n";
         }

<b>BUGS</b>
       "Net::DNS" is slow.

       For other items to be fixed, please see the TODO file included with the source distribution.

<b>COPYRIGHT</b>
       Copyright (c) 1997-2002 Michael Fuhr.  Portions Copyright (c) 2002-2004 Chris Reinhardt.  Portions
       Copyright (c) 2005 Olaf Kolkman (RIPE NCC) Portions Copyright (c) 2006 Olaf Kolkman (NLnet Labs)

       All rights reserved.  This program is free software; you may redistribute it and/or modify it under
       the same terms as Perl itself.

<b>AUTHOR</b> <b>INFORMATION</b>
       Net::DNS is currently maintained at NLnet Labs (www.nlnetlabs.nl) by:
               Olaf Kolkman      olaf@net-dns.org

       Between 2002 and 2004 Net::DNS was maintained by:
              Chris Reinhardt

       Net::DNS was created by:      Michael Fuhr      mike@fuhr.org

       For more information see:
           <a href="http://www.net-dns.org/">http://www.net-dns.org/</a>

       Stay tuned and syncicate:
           <a href="http://www.net-dns.org/blog/">http://www.net-dns.org/blog/</a>

<b>SEE</b> <b>ALSO</b>
       <a href="../man1/perl.1.html#//apple_ref/doc/man/1/perl"><u>perl</u>(1)</a>, Net::DNS::Resolver, Net::DNS::Packet, Net::DNS::Update, Net::DNS::Header,
       Net::DNS::Question, Net::DNS::RR, RFC 1035, <u>DNS</u> <u>and</u> <u>BIND</u> by Paul Albitz &amp; Cricket Liu



perl v5.8.8                                      2007-06-21                                      Net::DNS(3)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Net__DNS.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Net__DNS.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Net__DNS.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

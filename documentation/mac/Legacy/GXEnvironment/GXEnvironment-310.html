<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Operation Opcode Byte(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING310></A>

<!-- start of header  -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<CENTER>
<A HREF="GXEnvironment-309.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-311.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-306.html"><B>Chapter 7 - QuickDraw GX Stream Format</B></A> / <A HREF="GXEnvironment-307.html"><B>About QuickDraw GX Stream Format</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING310-0></A>
<H2><B><A NAME=MARKER-9-38></A></B>Operation Opcode Byte</H2>
 <A NAME=MARKER-2-39></A><B>The first byte of a header or object is always an operation opcode byte. The operation opcode byte contains both an operation opcode and the size in bytes of the record that follows for the current object. The operation opcode either defines a new object, adds data to the current default object, or references a previous object. The record length in bytes includes the data type opcode byte and any data that may follow for the current object. </B><A HREF=#MARKER-9-40>Figure 7-3</A> shows the format of the operation opcode byte.<P>
<B>Figure 7-3  <A NAME=MARKER-9-40></A>The format of the operation opcode byte</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/EU-L-27.jpg"><p>
 The operation opcode and record size are always in the same stream format. This enables a reader of the data stream to skip over parts of the data stream that are not understood. <P>
<A NAME=HEADING310-5></A>
<H3>Operation Opcode</H3>
 Bits 6 and 7 of the operation opcode byte are the operation opcode. <A HREF=#MARKER-9-6>Table 7-1</A> summarizes the 2-bit operation opcodes from the <CODE>gxGraphicsOperationOpcode</CODE> enumeration.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-6></A><B>Table 7-1 Operation opcodes</B></CAPTION>
<TH>Type<TH>Value<TH>Description<TR>
<TD><CODE>gxNewObjectOpcode</CODE><TD>0x00<TD> This opcode type defines a new object.<TR>
<TD><CODE>gxSetDataOpcode</CODE><TD>0x40<TD>This opcode type adds data to the current object.<TR>
<TD><CODE>gxSetDefaultOpcode</CODE><TD>0x80<TD>This opcode type replaces the current default with a previously defined object by specifying its reference number. <TR>
<TD><CODE>gxReservedOpcode</CODE><TD>0xC0<TD>This opcode type is not currently defined and is reserved for future use.<A NAME=MARKER-2-311></A></TABLE>
<P>
<A NAME=HEADING310-7></A>
<H3><A NAME=MARKER-9-41></A>Record Size</H3>
 The record size defines the number of bytes required to define the header or object record, not including the operation opcode byte. It is always 1 or larger. The record size is given in either bits 0 through 5 of the operation opcode byte or within the bytes that follow the operations opcode byte. <P>
 If the record size is larger than the value that can be represented in bits 0 through 5, larger than 63, then a 0 appears in these 6 bits and the next byte in the data stream may contain the record size. <P>
 If the record size is larger than the value that can be represented in the next byte, larger than 255, then a 0 appears in this byte and the next word in the stream may contain the record size. <P>
 If the record size is larger than the value that can be represented in the next word, larger than 65,535, then a 0 appears in this word and the next long in the stream contains the record size. A long can accommodate a record size up to 4,294,967,295 bytes.<P>
 <A HREF=#MARKER-9-42>Figure 7-4</A> shows the operation opcode byte on the left and the subsequent bytes in which the record size is stored in 6-bits, a byte, a <CODE>word</CODE>, or a <CODE>long</CODE>. The data stream continues proceeds from left to right.<P>
<B>Figure 7-4  <A NAME=MARKER-9-42></A>Data format of the record size</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/EU-L-82.gif"><p>
 An example of a bit stream in which a long was required to accommodate a record size of 404 bytes is described in the section <A HREF=GXEnvironment-318.html#MARKER-9-124>"Analyzing a Flattened Bitmap Shape" beginning on page 7-81</A>. <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-309.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-311.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

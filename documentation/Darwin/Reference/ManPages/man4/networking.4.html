<html><head><title>Mac OS X
 Manual Page For networking(4)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/4/networking" title="Mac OS X
 Manual Page for networking(4)"><!-- headerDoc=man; indexgroup=Section 4; uid="//apple_ref/doc/man/4/networking"; name=networking(4) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
NETINTRO(4)              BSD Kernel Interfaces Manual              <!-- a -->NETINTRO(4)<!-- /a -->

<b>NAME</b>
     <b>networking</b> -- introduction to networking facilities

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;sys/socket.h&gt;</b>
     <b>#include</b> <b>&lt;net/route.h&gt;</b>
     <b>#include</b> <b>&lt;net/if.h&gt;</b>

<b>DESCRIPTION</b>
     This section is a general introduction to the networking facilities available in the system.  Documen-<font color="#ffffff" class="whiteout">tation&nbsp;Documentation</font>
     tation in this part of section 4 is broken up into three areas: <u>protocol</u> <u>families</u> (domains), <u>protocols</u>,
     and <u>network</u> <u>interfaces</u>.

     All network protocols are associated with a specific <u>protocol</u> <u>family</u>.  A protocol family provides basic
     services to the protocol implementation to allow it to function within a specific network environment.
     These services may include packet fragmentation and reassembly, routing, addressing, and basic trans-<font color="#ffffff" class="whiteout">port.&nbsp;transport.</font>
     port.  A protocol family may support multiple methods of addressing, though the current protocol imple-<font color="#ffffff" class="whiteout">mentations&nbsp;implementations</font>
     mentations do not.  A protocol family is normally comprised of a number of protocols, one per <a href="../man2/socket.2.html#//apple_ref/doc/man/2/socket">socket(2)</a>
     type.  It is not required that a protocol family support all socket types.  A protocol family may con-<font color="#ffffff" class="whiteout">tain&nbsp;contain</font>
     tain multiple protocols supporting the same socket abstraction.

     A protocol supports one of the socket abstractions detailed in <a href="../man2/socket.2.html#//apple_ref/doc/man/2/socket">socket(2)</a>.  A specific protocol may be
     accessed either by creating a socket of the appropriate type and protocol family, or by requesting the
     protocol explicitly when creating a socket.  Protocols normally accept only one type of address format,
     usually determined by the addressing structure inherent in the design of the protocol family/network
     architecture.  Certain semantics of the basic socket abstractions are protocol specific.  All protocols
     are expected to support the basic model for their particular socket type, but may, in addition, provide
     non-standard facilities or extensions to a mechanism.  For example, a protocol supporting the
     SOCK_STREAM abstraction may allow more than one byte of out-of-band data to be transmitted per out-of-<font color="#ffffff" class="whiteout">band&nbsp;out-ofband</font>
     band message.

     A network interface is similar to a device interface.  Network interfaces comprise the lowest layer of
     the networking subsystem, interacting with the actual transport hardware.  An interface may support one
     or more protocol families and/or address formats.  The SYNOPSIS section of each network interface entry
     gives a sample specification of the related drivers for use in providing a system description to the
     <!-- a -->config(8)<!-- /a --> program.  The DIAGNOSTICS section lists messages which may appear on the console and/or in
     the system error log, <u>/var/log/messages</u> (see <a href="../man8/syslogd.8.html#//apple_ref/doc/man/8/syslogd">syslogd(8)</a>), due to errors in device operation.

<b>PROTOCOLS</b>
     The system currently supports the Internet protocols, the Xerox Network Systems(tm) protocols, and some
     of the ISO OSI protocols.  Raw socket interfaces are provided to the IP protocol layer of the Internet,
     and to the IDP protocol of Xerox NS.  Consult the appropriate manual pages in this section for more
     information regarding the support for each protocol family.

<b>ADDRESSING</b>
     Associated with each protocol family is an address format.  All network address adhere to a general
     structure, called a sockaddr, described below. However, each protocol imposes finer and more specific
     structure, generally renaming the variant, which is discussed in the protocol family manual page
     alluded to above.

               struct sockaddr {
                   u_char  sa_len;
                   u_char  sa_family;
                   char    sa_data[14];
           };

     The field <u>sa</u><b>_</b><u>len</u> contains the total length of the of the structure, which may exceed 16 bytes.  The
     following address values for <u>sa</u><b>_</b><u>family</u> are known to the system (and additional formats are defined for
     possible future implementation):

     #define    AF_UNIX      1    /* local to host (pipes) */
     #define    AF_INET      2    /* internetwork: UDP, TCP, etc. */
     #define    AF_NS        6    /* Xerox NS protocols */
     #define    AF_CCITT     10   /* CCITT protocols, X.25 etc */
     #define    AF_HYLINK    15   /* NSC Hyperchannel */
     #define    AF_ISO       18   /* ISO protocols */

<b>ROUTING</b>
     Mac OS X provides some packet routing facilities.  The kernel maintains a routing information database,
     which is used in selecting the appropriate network interface when transmitting packets.

     A user process (or possibly multiple co-operating processes) maintains this database by sending mes-<font color="#ffffff" class="whiteout">sages&nbsp;messages</font>
     sages over a special kind of socket.  This supplants fixed size <a href="../man2/ioctl.2.html#//apple_ref/doc/man/2/ioctl">ioctl(2)</a> used in earlier releases.

     This facility is described in <a href="route.4.html#//apple_ref/doc/man/4/route">route(4)</a>.

<b>INTERFACES</b>
     Each network interface in a system corresponds to a path through which messages may be sent and
     received.  A network interface usually has a hardware device associated with it, though certain inter-<font color="#ffffff" class="whiteout">faces&nbsp;interfaces</font>
     faces such as the loopback interface, <a href="lo.4.html#//apple_ref/doc/man/4/lo">lo(4)</a>, do not.

     The following ioctl calls may be used to manipulate network interfaces.  The ioctl is made on a socket
     (typically of type SOCK_DGRAM) in the desired domain.  Most of the requests supported in earlier
     releases take an <u>ifreq</u> structure as its parameter.  This structure has the form

     struct  ifreq {
     #define    IFNAMSIZ    16
         char    ifr_name[IFNAMSIZ];         /* if name, e.g. "en0" */
         union {
             struct    sockaddr ifru_addr;
             struct    sockaddr ifru_dstaddr;
             struct    sockaddr ifru_broadaddr;
             short     ifru_flags;
             int       ifru_metric;
             caddr_t   ifru_data;
         } ifr_ifru;
     #define ifr_addr      ifr_ifru.ifru_addr    /* address */
     #define ifr_dstaddr   ifr_ifru.ifru_dstaddr /* other end of p-to-p link */
     #define ifr_broadaddr ifr_ifru.ifru_broadaddr /* broadcast address */
     #define ifr_flags     ifr_ifru.ifru_flags   /* flags */
     #define ifr_metric    ifr_ifru.ifru_metric  /* metric */
     #define ifr_data      ifr_ifru.ifru_data    /* for use by interface */
     };

     Calls which are now deprecated are:

     SIOCSIFADDR     Set interface address for protocol family.  Following the address assignment, the
                     ``initialization'' routine for the interface is called.

     SIOCSIFDSTADDR  Set point to point address for protocol family and interface.

     SIOCSIFBRDADDR  Set broadcast address for protocol family and interface.

     Ioctl requests to obtain addresses and requests both to set and retrieve other data are still fully
     supported and use the <u>ifreq</u> structure:

     SIOCGIFADDR     Get interface address for protocol family.

     SIOCGIFDSTADDR  Get point to point address for protocol family and interface.

     SIOCGIFBRDADDR  Get broadcast address for protocol family and interface.

     SIOCSIFFLAGS    Set interface flags field.  If the interface is marked down, any processes currently
                     routing packets through the interface are notified; some interfaces may be reset so
                     that incoming packets are no longer received.  When marked up again, the interface is
                     reinitialized.

     SIOCGIFFLAGS    Get interface flags.

     SIOCSIFMETRIC   Set interface routing metric.  The metric is used only by user-level routers.

     SIOCGIFMETRIC   Get interface metric.

     There are two requests that make use of a new structure:

     SIOCAIFADDR     An interface may have more than one address associated with it in some protocols.  This
                     request provides a means to add additional addresses (or modify characteristics of the
                     primary address if the default address for the address family is specified).  Rather
                     than making separate calls to set destination or broadcast addresses, or network masks
                     (now an integral feature of multiple protocols) a separate structure is used to specify
                     all three facets simultaneously (see below).  One would use a slightly tailored version
                     of this struct specific to each family (replacing each sockaddr by one of the family-<font color="#ffffff" class="whiteout">specific&nbsp;familyspecific</font>
                     specific type).  Where the sockaddr itself is larger than the default size, one needs
                     to modify the ioctl identifier itself to include the total size, as described in ioctl.

     SIOCDIFADDR     This requests deletes the specified address from the list associated with an interface.
                     It also uses the <u>if</u><b>_</b><u>aliasreq</u> structure to allow for the possibility of protocols allow-<font color="#ffffff" class="whiteout">ing&nbsp;allowing</font>
                     ing multiple masks or destination addresses, and also adopts the convention that speci-<font color="#ffffff" class="whiteout">fication&nbsp;specification</font>
                     fication of the default address means to delete the first address for the interface
                     belonging to the address family in which the original socket was opened.

     SIOCGIFCONF     Get interface configuration list.  This request takes an <u>ifconf</u> structure (see below)
                     as a value-result parameter.  The <u>ifc</u><b>_</b><u>len</u> field should be initially set to the size of
                     the buffer pointed to by <u>ifc</u><b>_</b><u>buf</u>.  On return it will contain the length, in bytes, of
                     the configuration list.

     /*
     * Structure used in SIOCAIFADDR request.
     */
     struct ifaliasreq {
             char    ifra_name[IFNAMSIZ];   /* if name, e.g. "en0" */
             struct  sockaddr        ifra_addr;
             struct  sockaddr        ifra_broadaddr;
             struct  sockaddr        ifra_mask;
     };

     /*
     * Structure used in SIOCGIFCONF request.
     * Used to retrieve interface configuration
     * for machine (useful for programs which
     * must know all networks accessible).
     */
     struct ifconf {
         int   ifc_len;              /* size of associated buffer */
         union {
             caddr_t    ifcu_buf;
             struct     ifreq *ifcu_req;
         } ifc_ifcu;
     #define ifc_buf ifc_ifcu.ifcu_buf /* buffer address */
     #define ifc_req ifc_ifcu.ifcu_req /* array of structures returned */
     };

<b>SEE</b> <b>ALSO</b>
     <a href="../man2/ioctl.2.html#//apple_ref/doc/man/2/ioctl">ioctl(2)</a>, <a href="../man2/socket.2.html#//apple_ref/doc/man/2/socket">socket(2)</a>, <!-- a -->intro(4)<!-- /a -->, <a href="../man5/config.5ssl.html#//apple_ref/doc/man/5/config">config(5)</a>, <a href="../man8/routed.8.html#//apple_ref/doc/man/8/routed">routed(8)</a>

<b>HISTORY</b>
     The <b>netintro</b> manual appeared in 4.3BSD-Tahoe.

4.2 Berkeley Distribution      November 30, 1993     4.2 Berkeley Distribution
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man4/networking.4.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man4/networking.4.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man4/networking.4.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

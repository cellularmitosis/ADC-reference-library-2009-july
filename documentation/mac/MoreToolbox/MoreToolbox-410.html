<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Declaring the File Types Your Application Can Open (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING410></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-409.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-411.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-402.html"><B>Chapter 7 - Translation Manager</B></A> / <A HREF="MoreToolbox-408.html"><B>Using the Translation Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING410-0></A>
<H2><A NAME=MARKER-9-86></A>Declaring the File Types Your Application Can Open<A NAME=MARKER-2-3></A></H2>
 <A NAME=MARKER-2-90></A>In system software versions 7.0 and later, the Finder determines which types of files your application can open by inspecting the resources of type <CODE>'FREF'</CODE> whose resource IDs are listed in your application's bundle (that is, your application's resource of type <CODE>'BNDL'</CODE>). The Finder uses this information to determine which file types can be drop-launched on your application. All file types in the <CODE>'FREF'</CODE> resources listed in your application's bundle, regardless of whether they have associated icons, are considered droppable on your application.<A NAME=MARKER-2-89></A><P>
<DL>
<DT><B>Note</B>
<DD>See the chapter "Finder Interface" in <I><A HREF="../Toolbox/Toolbox-2.html">Inside Macintosh: Macintosh Toolbox Essentials</A></I> for a complete description of resources of types <CODE>'FREF'</CODE> and <CODE>'BNDL'</CODE>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 In some cases, however, your application might include <CODE>'FREF'</CODE> resources for file types that you don't want the user to open. For example, your application might use non-document files such as dictionaries and help files. Even though these files should have icons and hence deserve <CODE>'FREF'</CODE> resources, their contents should not be displayed to the user. Similarly, your application might read data from preferences files; this data is intended to be used internally by the application, not opened by the user as a document.<P>
 <A NAME=MARKER-2-77></A><A NAME=MARKER-2-390></A>Because the list of file types your application can open may be different from the list of types that have icons, the Translation Manager defines a new resource of type <CODE>'open'</CODE>. The <B>open resource</B> declares which file types your application can open as documents (and hence can be dropped onto your application). <A HREF=#MARKER-9-92>Listing 7-2</A> shows a sample resource of type <CODE>'open'</CODE>, in Rez input format.<P>
<B>Listing 7-2  <A NAME=MARKER-9-92></A>A sample resource of type <CODE>'open'</CODE></B><P>
<PRE>
/*open resource for TeachText*/
resource 'open' (128)
{
   'ttxt', { 'ttro', 'PICT', 'TEXT' }
};
</PRE>
 An open resource consists of an application signature followed by a list of file types. It indicates that the specified application can open files whose types occur in the list. For example, TeachText can open documents created in its own private format, <CODE>'ttro'</CODE>, as well as documents of file type <CODE>'PICT'</CODE> and <CODE>'TEXT'</CODE>. If Macintosh Easy Open is available, the Finder allows the user to drop documents of those types onto the application. In addition, if any translation extensions are installed, all documents that can be translated to one of the specified types can also be dropped on the application. So, if a translation extension exists that can translate documents from type <CODE>'SURF'</CODE> to type <CODE>'ttro'</CODE>, the user can drop SurfWriter documents onto TeachText.<P>
 You should list file types in your open resource in order of decreasing preference. If the Translation Manager has to choose between multiple file types as the destination file type for a translation, it chooses the file type that occurs earliest in the list.<P>
 The open resource is also used by the routine <CODE>StandardOpenDialog</CODE> to determine which documents should be listed in the file-opening dialog box. See <A HREF=MoreToolbox-412.html#MARKER-9-109>"Using File-Opening Dialog Boxes" on page 7-15</A> for details on <CODE>StandardOpenDialog</CODE>.<A NAME=MARKER-2-91></A><P>
<DL>
<DT><B>IMPORTANT</B>
<DD>If you use the <CODE>StandardOpenDialog</CODE> function, the open resource in your application should have resource ID 128.<EM></EM><A NAME=MARKER-9-391></A>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 Your application might need to determine dynamically which types of files it can open (perhaps by inspecting which filters are available in a certain folder). If so, you cannot list those file types statically in an open resource. Instead, you can write a simple translation extension to generate a list of openable file types at runtime. See <A HREF=MoreToolbox-420.html#MARKER-9-182>"Writing Application Translation Extensions" beginning on page 7-35</A> for details.<A NAME=MARKER-9-115></A><A NAME=MARKER-2-124></A><A NAME=MARKER-9-13></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-409.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-411.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

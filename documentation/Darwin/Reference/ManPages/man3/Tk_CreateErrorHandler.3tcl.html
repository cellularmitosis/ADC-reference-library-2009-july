<html><head><title>Mac OS X
 Manual Page For Tk_CreateErrorHandler(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tk_CreateErrorHandler" title="Mac OS X
 Manual Page for Tk_CreateErrorHandler(3tcl)"><a name="//apple_ref/doc/man/3/Tk_CreateErrorHandler" title="Mac OS X
 Manual Page for Tk_CreateErrorHandler(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tk_CreateErrorHandler"; name=Tk_CreateErrorHandler(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tk_CreateErrorHandler(3)                    Tk Library Procedures                   Tk_CreateErrorHandler(3)



____________________________________________________________________________________________________________

<b>NAME</b>
       Tk_CreateErrorHandler, Tk_DeleteErrorHandler - handle X protocol errors

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       Tk_ErrorHandler
       <b>Tk_CreateErrorHandler</b>(<u>display,</u> <u>error,</u> <u>request,</u> <u>minor,</u> <u>proc,</u> <u>clientData</u>)

       <b>Tk_DeleteErrorHandler</b>(<u>handler</u>)

<b>ARGUMENTS</b>
       Display           <u>*display</u>     (in)      Display whose errors are to be handled.

       int               <u>error</u>        (in)      Match  only  error  events with this value in the <u>error</u><b>_</b><u>code</u>
                                                field.  If -1, then match any <u>error</u><b>_</b><u>code</u> value.

       int               <u>request</u>      (in)      Match only error events with this value in the  <u>request</u><b>_</b><u>code</u>
                                                field.  If -1, then match any <u>request</u><b>_</b><u>code</u> value.

       int               <u>minor</u>        (in)      Match  only  error  events with this value in the <u>minor</u><b>_</b><u>code</u>
                                                field.  If -1, then match any <u>minor</u><b>_</b><u>code</u> value.

       Tk_ErrorProc      <u>*proc</u>        (in)      Procedure to invoke whenever an error event is received  for
                                                <u>display</u>  and  matches <u>error</u>, <u>request</u>, and <u>minor</u>.  NULL means
                                                ignore any matching errors.

       ClientData        <u>clientData</u>   (in)      Arbitrary one-word value to pass to <u>proc</u>.

       Tk_ErrorHandler   <u>handler</u>      (in)      Token for error handler to delete (return value from a  pre-<font color="#ffffff" class="whiteout">vious&nbsp;previous</font>
                                                vious call to <b>Tk_CreateErrorHandler</b>).
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       <b>Tk_CreateErrorHandler</b> arranges for a particular procedure (<u>proc</u>) to be called whenever certain proto-<font color="#ffffff" class="whiteout">col&nbsp;protocol</font>
       col errors occur on a particular display (<u>display</u>).  Protocol errors occur when  the  X  protocol  is
       used  incorrectly, such as attempting to map a window that doesn't exist.  See the Xlib documentation
       for <b>XSetErrorHandler</b> for more information on the kinds of errors that can  occur.   For  <u>proc</u>  to  be
       invoked to handle a particular error, five things must occur:

       [1]    The error must pertain to <u>display</u>.

       [2]    Either  the  <u>error</u>  argument to <b>Tk_CreateErrorHandler</b> must have been -1, or the <u>error</u> argument
              must match the <u>error</u><b>_</b><u>code</u> field from the error event.

       [3]    Either the <u>request</u> argument to <b>Tk_CreateErrorHandler</b> must have been -1, or the  <u>request</u>  argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
              ment must match the <u>request</u><b>_</b><u>code</u> field from the error event.

       [4]    Either  the  <u>minor</u>  argument to <b>Tk_CreateErrorHandler</b> must have been -1, or the <u>minor</u> argument
              must match the <u>minor</u><b>_</b><u>code</u> field from the error event.

       [5]    The protocol request to which the error pertains must have been  made  when  the  handler  was
              active (see below for more information).

       <u>Proc</u> should have arguments and result that match the following type:
              typedef int Tk_ErrorProc(
                ClientData <u>clientData</u>,
                XErrorEvent *<u>errEventPtr</u>);
       The <u>clientData</u> parameter to <u>proc</u> is a copy of the <u>clientData</u> argument given to <b>Tcl_CreateErrorHandler</b>
       when the callback was created.  Typically, <u>clientData</u> points to a data structure containing  applica-<font color="#ffffff" class="whiteout">tion-specific&nbsp;application-specific</font>
       tion-specific  information  that is needed to deal with the error.  <u>ErrEventPtr</u> is a pointer to the X
       error event.  The procedure <u>proc</u> should return an integer value.  If it returns 0 it means that  <u>proc</u>
       handled  the  error  completely  and  there is no need to take any other action for the error.  If it
       returns non-zero it means <u>proc</u> was unable to handle the error.

       If a value of NULL is specified for <u>proc</u>, all matching errors will be ignored:  this will produce the
       same result as if a procedure had been specified that always returns 0.

       If  more  than  more than one handler matches a particular error, then they are invoked in turn.  The
       handlers will be invoked in reverse order of creation:  most recently declared handler first.  If any
       handler  returns  0,  then subsequent (older) handlers will not be invoked.  If no handler returns 0,
       then Tk invokes X'es default error handler, which prints an error message and aborts the program.  If
       you  wish  to have a default handler that deals with errors that no other handler can deal with, then
       declare it first.

       The X documentation states that ``the error handler should not call any functions (directly or  indi-<font color="#ffffff" class="whiteout">rectly)&nbsp;indirectly)</font>
       rectly)  on  the  display  that will generate protocol requests or that will look for input events.''
       This restriction applies to handlers declared by <b>Tk_CreateErrorHandler</b>; disobey it at your own  risk.

       <b>Tk_DeleteErrorHandler</b>  may be called to delete a previously-created error handler.  The <u>handler</u> argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
       ment identifies the error handler, and should be a value returned  by  a  previous  call  to  <b>Tk_Cre</b>-<font color="#ffffff" class="whiteout">ateEventHandler.&nbsp;Tk_CreateEventHandler.</font>
       <b>ateEventHandler</b>.

       A  particular  error handler applies to errors resulting from protocol requests generated between the
       call to <b>Tk_CreateErrorHandler</b> and the call to <b>Tk_DeleteErrorHandler</b>.  However, the actual callback to
       <u>proc</u>  may  not  occur  until after the <b>Tk_DeleteErrorHandler</b> call, due to buffering in the client and
       server.  If an error event pertains to a protocol request made just before calling <b>Tk_DeleteErrorHan</b>-<font color="#ffffff" class="whiteout">dler,&nbsp;Tk_DeleteErrorHandler,</font>
       <b>dler</b>,  then  the error event may not have been processed before the <b>Tk_DeleteErrorHandler</b> call.  When
       this situation arises, Tk will save information about the handler and invoke the handler's <u>proc</u> later
       when  the  error event finally arrives.  If an application wishes to delete an error handler and know
       for certain that all relevant errors have been processed, it should first call  <b>Tk_DeleteErrorHandler</b>
       and then call <b>XSync</b>;  this will flush out any buffered requests and errors, but will result in a per-<font color="#ffffff" class="whiteout">formance&nbsp;performance</font>
       formance penalty because it requires communication to and from the X server.  After the <b>XSync</b> call Tk
       is guaranteed not to call any error handlers deleted before the <b>XSync</b> call.

       For  the  Tk  error  handling mechanism to work properly, it is essential that application code never
       calls <b>XSetErrorHandler</b> directly; applications should use only <b>Tk_CreateErrorHandler</b>.


<b>KEYWORDS</b>
       callback, error, event, handler



Tk                                                                                  Tk_CreateErrorHandler(3)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tk_CreateErrorHandler.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tk_CreateErrorHandler.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tk_CreateErrorHandler.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Creating a MacApp Application (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING18></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-17.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-19.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <BR><DD><A HREF="MacAppProgGuide-14.html"><B>Chapter 1 - MacApp Overview</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING18-0></A>
<H1><A NAME=MARKER-2-40></A>Creating a MacApp Application</H1>
 <A NAME=MARKER-2-26></A>One common way to create a MacApp application is to start with one of the sample applications distributed with MacApp and modify its code. The Skeleton application is supplied specifically for this purpose. Adding incremental changes to a working application makes it easier to track down any errors that occur as you add new features.<P>
 To create your own application, you generally need to complete these steps:<P>
<UL>
<LI>Define subclasses of key MacApp classes.
<LI>Define resources to specify application menus.
<LI>Define one or more view hierarchies to display the application's data.
<LI>Write a <CODE>main</CODE> routine to initialize MacApp, create an application object, and run the application.<P>
</UL>
 These steps are described in the sections that follow.<P>
<A NAME=HEADING18-8></A>
<H2>Defining Subclasses of Key MacApp Classes</H2>
 The MacApp class library and the sample applications supplied with MacApp provide many predefined object classes. An application can use any of these classes. As a rule, you will always define subclasses of the following MacApp classes:<P>
<UL>
<LI><B><A NAME=MARKER-2-42></A>TApplication.</B> You define a subclass of <CODE>TApplication</CODE> and override the <CODE>DoMakeDocument</CODE> method to create the kind of documents your application requires.
<LI><B><A NAME=MARKER-10-1></A>TCommand.</B> MacApp supplies several subclasses of <CODE>TCommand</CODE> to perform specific operations. You define additional subclasses to perform operations in your application.
<LI><B><A NAME=MARKER-2-44></A>TDocument.</B> MacApp supplies several kinds of document classes. Since every application specifies its own data, you define a subclass of a MacApp document class to handle your specific data. You override the <CODE>DoMakeViews</CODE> method to create a window and views to display the document's data.
<LI><B><A NAME=MARKER-2-45></A>TView.</B> Most applications define one or more subclasses of <CODE>TView</CODE> to display data or get user input. You may also need to define a subclass of <CODE>TWindow</CODE>, a subclass of <CODE>TView</CODE> that implements standard Macintosh window behavior.<P>
</UL>
 The Skeleton sample application implements simple subclasses of <CODE>TApplication</CODE>, <CODE>TCommand</CODE>, <CODE>TFileBasedDocument</CODE> (a subclass of <CODE>TDocument</CODE>), and <CODE>Tview </CODE>that your application can build on.<P>
<A NAME=HEADING18-15></A>
<H2><A NAME=MARKER-9-46></A>Defining Resources to Specify Application Menus</H2>
 A <B><A NAME=MARKER-2-47></A>resource definition</B> is a text description of a resource that matches the resource format defined by its resource type.<P>
 In MacApp, you use resource definitions to specify the menus for an application. You define an <CODE>'MBAR'</CODE> resource to specify the menus that appear in the application's menu bar and a <CODE>'CMNU'</CODE> resource to specify the menu commands that appear in a specific menu. The <CODE>'CMNU'</CODE> resource associates a command number with each menu item. For example, MacApp associates the command number <CODE>cNew</CODE> with the New menu command from the File menu. You define similar command numbers for menus you create.<P>
 A resource compiler such as Rez converts <CODE>'MBAR'</CODE> and <CODE>'CMNU'</CODE> resource definitions into compiled resources that become part of the application. <A HREF=#MARKER-9-48>Figure 1-2</A> shows how this process works to create the File menu.<P>
<B>Figure 1-2  <A NAME=MARKER-9-48></A>Specifying menus in MacApp</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/MacApp_PG-L-037.gif"><P>
 When the application is launched, these resources determine the application's menus. (For more information on how to use these resources in your application, see <A HREF=MacAppProgGuide-86.html#MARKER-9-29>"Working With Menu Resources," beginning on page 300</A>.)<P>
<A NAME=HEADING18-22></A>
<H2><A NAME=MARKER-9-49></A>Defining a View Hierarchy to Display the Application's Data</H2>
 A <I>view</I> is an object instantiated from <CODE>TView</CODE> or a subclass of <CODE>TView</CODE>. A window object in MacApp is also a view because the <CODE>TWindow</CODE> class is a subclass of <CODE>TView</CODE>.<P>
 MacApp uses a <B><A NAME=MARKER-2-50></A><A NAME=MARKER-2-51></A>view hierarchy</B>, which is a series of related views that may include a window, to display data. Each view in the hierarchy, except for the window, has a superview. A view is drawn on top of and within the boundaries of its superview.<P>
 <A HREF=MacAppProgGuide-18.html#MARKER-9-50>Figure 1-3</A> shows a MacApp window with a simple view hierarchy.<P>
<B>Figure 1-3  <A NAME=MARKER-9-50></A>A view hierarchy in MacApp</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/MacApp_PG-L-022.gif"><P>
 You can use a view editor application such as Ad Lib<SUP>TM</SUP> (available from Apple Computer) to create and edit complex view hierarchies in a graphical environment. The resulting view hierarchies can be stored as text resource definitions or as compiled resources. Compiled <CODE>'View'</CODE> resources are included in the application. MacApp provides a global object, called <CODE><A NAME=MARKER-2-53></A>gViewServer</CODE>, with methods the application can call to create a view hierarchy from a view resource. For more information on views and view hierarchies, see <A HREF=MacAppProgGuide-63.html#MARKER-9-19>Chapter 8, "Displaying, Manipulating, and Printing Data,"</A> and <A HREF=MacAppProgGuide-100.html#MARKER-9-19>Chapter 17, "Working With Views."</A><P>
<A NAME=HEADING18-29></A>
<H2>Writing a Main Routine</H2>
 Your application must include a <CODE>main</CODE> routine that initializes MacApp, creates an application object, and runs the application. The <CODE>main</CODE> routine is written by you and performs these operations:<P>
<UL>
<LI>It must call <CODE><A NAME=MARKER-2-54></A>InitUMacApp</CODE>, a macro which<P>
<UL>
<LI>makes sure the application can run on the current machine, and that all hardware and software features the application requires are available
<LI>initializes Macintosh Toolbox managers that most applications use
<LI>initializes MacApp's core features
<LI>creates various manager objects to provide services to the application<P>
</UL>
<LI>It may initialize additional MacApp units that weren't initialized when <CODE>InitUMacApp</CODE> was called.
<LI>It may initialize additional units created by the developer. This process may include registering developer-defined view classes to ensure that code for those classes is included by the linker.
<LI>It must create and initialize an application object, then call its <CODE>Run</CODE> method to run the application.<P>
</UL>
 For a full description of how to initialize MacApp and run your application, see <A HREF=MacAppProgGuide-33.html#MARKER-9-19>Chapter 4, "Launching and Terminating an Application."</A> The sample applications distributed with MacApp provide examples of several different implementations for the <CODE>main</CODE> routine. For example, the Calc application displays a startup screen during its launch sequence.<P>
 After executing the <CODE>main</CODE> routine, your application is up and running, ready to process any events it receives. Event processing is described in the next section.<A NAME=MARKER-2-55></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-17.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-19.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>OpenCPort (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING213></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-212.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-214.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-197.html"><B>Chapter 4 - Color QuickDraw</B></A> / <A HREF="QuickDraw-200.html"><B>Color QuickDraw Reference</B></A><BR><DL><DD><A HREF="QuickDraw-211.html"><B>Color QuickDraw Routines</B></A> / <A HREF="QuickDraw-212.html"><B>Opening and Closing Color Graphics Ports</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING213-0></A>
<H3><A NAME=MARKER-9-337></A>OpenCPort</H3>
 <A NAME=MARKER-11-339></A><A NAME=MARKER-11-339></A><A NAME=MARKER-2-290></A>The <CODE>OpenCPort</CODE> procedure allocates space for and initializes a color graphics port. The Window Manager calls <CODE>OpenCPort</CODE> for every color window that it creates, and the <CODE>NewGWorld</CODE> procedure calls <CODE>OpenCPort</CODE> for every offscreen graphics world that it creates on a Color QuickDraw computer.<P>
<PRE>
PROCEDURE OpenCPort (port: CGrafPtr);
</PRE>
<DL>
<DT><CODE>port</CODE> 
<DD> A pointer to a <CODE>CGrafPort</CODE> record.
</DL>
<A NAME=HEADING213-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>OpenCPort</CODE> procedure is analogous to <CODE>OpenPort</CODE> (described in the chapter "Basic QuickDraw"), except that <CODE>OpenCPort</CODE> opens a <CODE>CGrafPort</CODE> record instead of a <CODE>GrafPort</CODE> record. The <CODE>OpenCPort</CODE> procedure is called by the Window Manager's <CODE>NewCWindow</CODE> and <CODE>GetNewCWindow</CODE> procedures, as well as by the Dialog Manager when the appropriate color resources are present. The <CODE>OpenCPort</CODE> procedure allocates storage for all the structures in the <CODE>CGrafPort</CODE> record, and then calls <CODE>InitCPort</CODE> to initialize them. The <CODE>InitCPort</CODE> procedure does not allocate a color table for the <CODE>PixMap</CODE> record for the color graphics port; instead, <CODE>InitCPort</CODE> copies the handle to the current device's CLUT into the <CODE>PixMap</CODE> record. The initial values for the <CODE>CGrafPort</CODE> record are shown in <A HREF=#MARKER-9-6>Table 4-3</A>.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-6></A>Initial values in the <CODE>CGrafPort</CODE> record (Continued)</CAPTION>
<TH>Field<TH>Data type<TH>Initial setting<TR>
<TD>device<TD>Integer<TD>0 (the screen)<TR>
<TD>portPixMap<TD>PixMapHandle<TD>Handle to the port's <CODE>PixMap</CODE> record<TR>
<TD>portVersion<TD>Integer<TD>$C000<TR>
<TD>grafVars<TD>Handle<TD>Handle to a <CODE>GrafVars</CODE> record where black is assigned to the <CODE>rgbOpColor</CODE> field, the default highlight color is assigned to the <CODE>rgbHiliteColor</CODE> field, and all other fields are set to 0<TR>
<TD>chExtra<TD>Integer<TD>0<TR>
<TD>pnLocHFrac<TD>Integer<TD>The value in this field represents the low word of a <CODE>Fixed</CODE> number; in decimal, its initial value is 0.5.<TR>
<TD>portRect<TD>Rect<TD><CODE>screenBits.bounds</CODE> (boundary for entire main screen)<TR>
<TD>visRgn<TD>RgnHandle<TD>Handle to a rectangular region coincident with <CODE>screenBits.bounds</CODE> <TR>
<TD>clipRgn<TD>RgnHandle<TD>Handle to the rectangular region (-32768,-32768,32767,32767)<TR>
<TD>bkPixPat<TD>Pattern<TD>White<TR>
<TD>rgbFgColor<TD>RGBColor<TD>Black<TR>
<TD>rgbBkColor<TD>RGBColor<TD>White<TR>
<TD>pnLoc<TD>Point<TD>(0,0)<TR>
<TD>pnSize<TD>Point<TD>(1,1)<TR>
<TD>pnMode<TD>Integer<TD>patCopy<TR>
<TD>pnPixPat<TD>PixPatHandle<TD>Black<TR>
<TD>fillPixPat<TD>PixPatHandle<TD>Black<TR>
<TD>pnVis<TD>Integer<TD>0 (visible)<TR>
<TD>txFont<TD>Integer<TD>0 (system font)<TR>
<TD>txFace<TD>Style<TD>Plain<TR>
<TD>txMode<TD>Integer<TD>srcOr<TR>
<TD>txSize<TD>Integer<TD>0 (system font size)<TR>
<TD>spExtra<TD>Fixed<TD>0<TR>
<TD>fgColor<TD>LongInt<TD>blackColor<TR>
<TD>bkColor<TD>LongInt<TD>whiteColor<TR>
<TD>colrBit<TD>Integer<TD>0<TR>
<TD>patStretch<TD>Integer<TD>0<TR>
<TD>picSave<TD>Handle<TD>NIL<TR>
<TD>rgnSave<TD>Handle<TD>NIL<TR>
<TD>polySave<TD>Handle<TD>NIL<TR>
<TD>grafProcs<TD>CQDProcsPtr<TD>NIL</TABLE>
<P>
 The additional structures allocated are the <CODE>portPixMap</CODE>, <CODE>pnPixPat</CODE>, <CODE>fillPixPat</CODE>, <CODE>bkPixPat</CODE>, and <CODE>grafVars</CODE> handles, as well as the fields of the <CODE>GrafVars</CODE> record. <P>
<A NAME=HEADING213-7></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The <CODE>OpenCPort</CODE> procedure may move or purge memory blocks in the application heap. Your application should not call this procedure at interrupt time.<A NAME=MARKER-2-499></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-212.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-214.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

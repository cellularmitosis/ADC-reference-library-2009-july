<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A SND15: Capturing Speech Manager Output</title>  <meta name="keywords" content="Mac OS 8 capturing speech synthesis manager output component"><meta name="Description" content="Technical Q&amp;A SND15: Q&amp;A details how to capture the outputfrom the Speech Synthesis Manager so that it can be savedto a file. Q&amp;A does this by giving the url to a sample soundoutput component, telling you how the Component Manager handlescomponent registration and by giving some sample code thatshows how to install and use a component with the SpeechSynthesis Manager."><meta name="categories" content="Sound"><meta name="week-posted" content="May 18, 1998 - May 22, 1998"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002182" title="Capturing Speech Manager Output"></a> <!-- white background --><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/MusicAudio/index.html">Audio</a> &gt; <a href="../../technicalqas/MusicAudio/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/MusicAudio/idxCarbon-date.html" target="_blank">Audio > Carbon</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A SND15</div>
<div id="pageheadsub">Capturing Speech Manager Output</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER>			<!-- -->						<!-- Document Body --><table cellspacing="0" cellpadding="0" border="0" WIDTH="600"><tr><td align="left" scope="row"><FONT SIZE="+4">Q</FONT> Is it possible to capture the output fromthe Speech Synthesis Manager so I can save it to a file or modifyit?<BR><BR><FONT SIZE="+4">A</FONT> There is no direct provision in the SpeechSynthesis Manager for doing this; however, it is possible if you arewilling to do it in a roundabout fashion.<P>The Speech Synthesis Manager, via the <CODE>soSoundOutput</CODE>selector, has the ability to direct speech to any arbitrary soundoutput device. Because the Speech Synthesis Manager speaks bycreating buffers of speech and then playing those buffers via theSound Manager, it can use the Sound Manager's ability to <a href="../../documentation/mac/Sound/Sound-97.html#HEADING97-0" target="_blank">directsounds to a specific sound output component.</A></P><P>This feature was designed so that the Speech Synthesis Managercould speak over the phone, but it is not limited to just talkingover the phone. If you create a sound output component that saves thesounds played to it (either to memory or to a file), you can have theSpeech Synthesis Manager speak to this sound output component and useit to capture the Speech Synthesis Manager's output.  From here, you cando whatever you want with the captured sound.</P><P>A DTS sample called <a href="../../samplecode/Sample_Code/Sound.htm" target="_blank">AIFF-Writer</A>is a sample sound output component that saves whatever sound isplayed through it to an AIFF file, so this is a good starting pointfor the sound output component.</P><P>The <a href="../../documentation/mac/MoreToolbox/MoreToolbox-333.html#HEADING333-0" target="_blank">ComponentManager</A> allows you to register a component from any resourcefile. Normally components are in separate files placed in theExtensions folder, but this is not a requirement. For instance, yourcomponent can reside in your application's resource fork rather thanin a separate file. Furthermore, the Component Manager allows you toregister a component locally so that it is available only to yourapplication and the Mac OS. This ability allows for the stealthy useof the AIFF-Writer component (or any other component). The user doesnot ever have to know that you have installed your custom version ofthe AIFF-Writer component. You can install it, select it, use it, andunregister it--all without the user ever knowing that anythinginteresting happened.</P><TABLE BORDER=0>   <TR>      <td bgcolor="#FFFF99" align=left>         <P>Note: The installation of your custom sound output         component does not affect the normal playing of sounds from         your application or any other application. Only sounds that         are specifically directed to your custom sound output         component will play through it.</P>      </TD>   </TR></TABLE><BR><TABLE BORDER=0>   <TR>      <td bgcolor="#FFFF99" align=left>         <P>Note: When sounds are being played to your custom sound         output device component, they are not heard (because they are         not going to the default sound output component). If you         want them to be heard, you will have to play the sound         twice, once to the default sound output device (so it can be         heard), and once to your custom output device (so it can be         captured). The Sound Manager will allow you to play a sound         simultaneously to multiple different output components, so         playing the sound twice does not require any extra time.</P>      </TD>   </TR></TABLE><P>Here is some sample code that shows how to install and use yourcustom sound output component with the Speech Synthesis Manager:</P><TABLE BORDER=0>   <TR>      <td bgcolor="#CCCCCC" align=left>         <pre>    OSErr                   theErr              = noErr;    ComponentDescription    writerOutputDev;    Component               theWriterComponent  = 0;    SpeechChannel           theWriterSpeechChan = nil;    // Load the AIFF-Writer component resources from our resource fork    numCompsReg = RegisterComponentResourceFile (CurResFile(), 0);    writerOutputDev.componentType = kSoundOutputDeviceType;    writerOutputDev.componentSubType = 'AIFW';    writerOutputDev.componentManufacturer = kAppleManufacturer;    writerOutputDev.componentFlags = 0;    writerOutputDev.componentFlagsMask = 0;    // Find AIFF-Writer's component instance    theWriterComponent = FindNextComponent (0, &amp;writerOutputDev);    theErr = NewSpeechChannel (nil, &amp;theWriterSpeechChan);    if (theErr != noErr)        return theErr;    // Change output device to talk through AIFF-Writer    theErr = SetSpeechInfo (theWriterSpeechChan, soSoundOutput, &amp;theWriterComponent);</pre>      </TD>   </TR></TABLE><H2><FONT COLOR="#AF0000">Further References</FONT></H2><TABLE BORDER=0 WIDTH=498>   <TR>      <td bgcolor="#FFFF99" align=left>         <UL>            <LI><a href="../../documentation/mac/Sound/Sound-2.html" target="_blank">Inside            Macintosh: Sound</A></LI>                        <LI><a href="../../documentation/mac/Sound/Sound-187.html#HEADING187-0" target="_blank">Inside            Macintosh: Sound, Chapter 4 - Speech Manager</A></LI>                        <LI><a href="../../documentation/mac/MoreToolbox/MoreToolbox-333.html#HEADING333-0" target="_blank">Inside            Macintosh: More Macintosh Toolbox, Chapter 6 - Component            Manager</A></LI>                        <LI><a href="../../documentation/quicktime/qtdevdocs/RM/frameset.htm" target="_blank">QuickTime            3.0 Documentation</A></LI>         </UL>      </TD>   </TR></TABLE><BR><!-- begin_date --><H4 ALIGN=center>[May 18 1998]</H4><!-- end_date --></td></tr></table></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/snd/snd15.html%3Fid%3DDTS10002182-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/snd/snd15.html%3Fid%3DDTS10002182-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/snd/snd15.html%3Fid%3DDTS10002182-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Control and Cell Programming Topics for Cocoa: Manipulating Cells and Controls</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Manipulating Cells and Controls"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002338" title="Manipulating Cells and Controls"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="../index.html" target="_top">Control and Cell Programming Topics for Cocoa</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/CellStates.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Tasks/ValidatingControlEntries.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40002338-SW2" title="Manipulating Cells and Controls"></a><hr /><H1>Manipulating Cells and Controls</H1><p>This article contains miscellaneous tips and examples for manipulating cells and controls. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ManipulateCellControl.html#//apple_ref/doc/uid/TP40002338-SW4">Setting the Size of a Cell or Control</a>
				
			<br/>
			
        
			
			
				<a href="ManipulateCellControl.html#//apple_ref/doc/uid/TP40002338-SW5">Drawing a Focus Ring Inside a Cell's Bounds</a>
				
			<br/>
			
        
			
			
				<a href="ManipulateCellControl.html#//apple_ref/doc/uid/TP40002338-SW7">Positioning an Image Within a Cell</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002338-SW4" title="Setting the Size of a Cell or Control"></a><h2>Setting the Size of a Cell or Control</h2><p>To set the size of a cell (and any enclosing single-cell control) to an optimum size conforming with the human interface guidelines, do the following:</p><ol class="ol"><li class="li"><p>If the cell contains text, set the font of the text to be consistent with one of the three standard sizes: regular, small, and mini. To do this use the NSFont class method <code><a href="../../../Reference/ApplicationKit/Classes/NSFont_Class/Reference/Reference.html#//apple_ref/occ/clm/NSFont/systemFontSizeForControlSize:" target="_top">systemFontSizeForControlSize:</a></code>. The argument to this method is an <code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/c/tdef/NSControlSize" target="_top">NSControlSize</a></code> constant declared by the NSControl class.</p><div class="codesample"><table><tr><td scope="row"><pre>float fontSize = [NSFont systemFontSizeForControlSize:NSMiniControlSize];<span></span></pre></td></tr><tr><td scope="row"><pre>NSCell *theCell = [theControl cell];<span></span></pre></td></tr><tr><td scope="row"><pre>NSFont *theFont = [NSFont fontWithName:[[theCell font] fontName] size:fontSize];<span></span></pre></td></tr><tr><td scope="row"><pre>[theCell setFont:theFont];<span></span></pre></td></tr></table></div></li><li class="li"><p>Set the control size to the same size as given for the font size, using the same constant. Use the NSControl <code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/setControlSize:" target="_top">setControlSize:</a></code> method.</p><div class="codesample"><table><tr><td scope="row"><pre>[theCell setControlSize:NSMiniControlSize];<span></span></pre></td></tr></table></div></li><li class="li"><p>Finally, send <code><a href="../../../Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/sizeToFit" target="_top">sizeToFit</a></code> to the control to trim the extra width. </p><div class="codesample"><table><tr><td scope="row"><pre>[theControl sizeToFit];<span></span></pre></td></tr></table></div></li></ol><a name="//apple_ref/doc/uid/TP40002338-SW5" title="Drawing a Focus Ring Inside a Cell&#39;s Bounds"></a><h2>Drawing a Focus Ring Inside a Cell's Bounds</h2><p>The <code><a href="../../../Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/func/NSSetFocusRingStyle" target="_top">NSSetFocusRingStyle</a></code> sets the style that a focus ring will be drawn in the next time you fill a bezier path. It takes a constant of type of <code><a href="../../../Reference/ApplicationKit/Miscellaneous/AppKit_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSFocusRingPlacement" target="_top">NSFocusRingPlacement</a></code> to tell the Application Kit to draw the focus ring over an image, under text, or (when neither text or image is a consideration) around a shape. You can use this function with a constant of <code><a href="../../../Reference/ApplicationKit/Miscellaneous/AppKit_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSFocusRingOnly" target="_top">NSFocusRingOnly</a></code> to draw a focus ring just inside a cell's bounds.</p><p><span class="content_text"><a href="ManipulateCellControl.html#//apple_ref/doc/uid/TP40002338-SW1">Listing 1</a></span> shows how you draw such a focus ring. It requires you to override the NSCell <code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/drawWithFrame:inView:" target="_top">drawWithFrame:inView:</a></code>. In this method, if the cell is supposed to draw evidence of first-responder status, set the rectangle for the focus ring, call <code><a href="../../../Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/c/func/NSSetFocusRingStyle" target="_top">NSSetFocusRingStyle</a></code> with an argument of <code><a href="../../../Reference/ApplicationKit/Miscellaneous/AppKit_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/NSFocusRingOnly" target="_top">NSFocusRingOnly</a></code>, and then create and fill a bezier path defining that rectangle. Filling in this case simply draws the ring. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002338-SW6" title="Note"></a><p><strong>Note:</strong>&nbsp;This technique requires you to subclass a cell class. See "<span class="content_text"><a href="../Tasks/SubclassingNSCell.html#//apple_ref/doc/uid/20000728-SW2">“Subclassing NSCell”</a></span>" for information.</p></div><a name="//apple_ref/doc/uid/TP40002338-SW1" title="Listing 1Drawing a focus ring just inside a cell&#39;s bounds"></a><p class="codesample"><strong>Listing 1&nbsp;&nbsp;</strong>Drawing a focus ring just inside a cell's bounds</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView {<span></span></pre></td></tr><tr><td scope="row"><pre>    // other stuff might happen here<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([self showsFirstResponder]) {<span></span></pre></td></tr><tr><td scope="row"><pre>         // showsFirstResponder is set for us by the NSControl that is drawing  us.<span></span></pre></td></tr><tr><td scope="row"><pre>        NSRect focusRingFrame = cellFrame;<span></span></pre></td></tr><tr><td scope="row"><pre>        focusRingFrame.size.height -= 2.0;<span></span></pre></td></tr><tr><td scope="row"><pre>        [NSGraphicsContext saveGraphicsState];<span></span></pre></td></tr><tr><td scope="row"><pre>        NSSetFocusRingStyle(NSFocusRingOnly);<span></span></pre></td></tr><tr><td scope="row"><pre>        [[NSBezierPath bezierPathWithRect: NSInsetRect(focusRingFrame,4,4)] fill];<span></span></pre></td></tr><tr><td scope="row"><pre>        [NSGraphicsContext restoreGraphicsState];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>     // other stuff might happen here<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002338-SW7" title="Positioning an Image Within a Cell"></a><h2>Positioning an Image Within a Cell</h2><p>If a cell is to display an image instead of (or in addition to) text, you can affect the placement of the image within the cell by overridding the <code><a href="../../../Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/imageRectForBounds:" target="_top">imageRectForBounds:</a></code> method, which is declared by both the NSCell and NSMenuItemCell classes. This method returns the rectangle the cell's image is drawn in, which is usually a rectangle slightly offset from the cell's bounds. <span class="content_text"><a href="ManipulateCellControl.html#//apple_ref/doc/uid/TP40002338-SW3">Listing 2</a></span> gives an example.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002338-SW8" title="Note"></a><p><strong>Note:</strong>&nbsp;This technique requires you to subclass a cell class. See "<span class="content_text"><a href="../Tasks/SubclassingNSCell.html#//apple_ref/doc/uid/20000728-SW2">“Subclassing NSCell”</a></span>" for information.</p></div><a name="//apple_ref/doc/uid/TP40002338-SW3" title="Listing 2Centering an image in its cell"></a><p class="codesample"><strong>Listing 2&nbsp;&nbsp;</strong>Centering an image in its cell</p><div class="codesample"><table><a name="//apple_ref/doc/uid/20000728-SW1"></a><tr><td scope="row"><pre>- (NSRect) imageRectForBounds:(NSRect)theBounds {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSRect r = theBounds;<span></span></pre></td></tr><tr><td scope="row"><pre>    // get size. If no image, result of method returning NSSize is undefined so assume NSZeroSize<span></span></pre></td></tr><tr><td scope="row"><pre>    NSSize imageSize = [self image] != nil ? [[self image] size] : NSZeroSize;<span></span></pre></td></tr><tr><td scope="row"><pre>    r.origin.x = floor((r.size.width/2)  - (imageSize.width/2)  + 0.5);<span></span></pre></td></tr><tr><td scope="row"><pre>    r.origin.y = floor((r.size.height/2) - (imageSize.height/2) + 0.5);<span></span></pre></td></tr><tr><td scope="row"><pre>    r.size     = imageSize;<span></span></pre></td></tr><tr><td scope="row"><pre>    return r;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>In this example, the cell centers the image in the cell. Note that it rounds the return values to the nearest pixel to avoid blurring that drawing with partial pixel offsets may cause. The code also sets the size field of the returned rectangle to the size of the image so that it is correctly drawn in the rectangle (assuming the NSImage object uses <code><a href="../../../Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/occ/instm/NSImage/drawInRect:fromRect:operation:fraction:" target="_top">drawInRect:fromRect:operation:fraction:</a></code> for drawing and not <code><a href="../../../Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/occ/instm/NSImage/compositeToPoint:operation:" target="_top">compositeToPoint:operation:</a></code>).</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/CellStates.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Tasks/ValidatingControlEntries.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/ControlCell/Articles/ManipulateCellControl.html%3Fid%3D10000015i-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/ControlCell/Articles/ManipulateCellControl.html%3Fid%3D10000015i-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/ControlCell/Articles/ManipulateCellControl.html%3Fid%3D10000015i-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

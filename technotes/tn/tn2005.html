<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html>	<!-- Template 01-05-01 -->	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="generator" content="Adobe GoLive 4">		<title>Technical Note TN2005: SimpleCocoaApp: An Overview</title>		<meta name="keywords" content="Cocoa Objective-C Project Builder ProjectBuilder User Interface">		<meta name="Description" content="Technical Note TN2005: A high level overview of the stepsrequired to build a simple Cocoa application.">		<link rel="stylesheet" href="../../adcstyle.css" type="text/css">		<link rel="stylesheet" href="../../style.css" type="text/css">	<meta name="categories" content="Cocoa, Human Interface Toolbox, Platforms and Tools, Overview and Operating System"><meta name="week-posted" content="Oct 23, 2000 - Oct 27, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></head>	<body bgcolor="white"><a name="//apple_ref/doc/uid/DTS10003044" title="SimpleCocoaApp: An Overview"></a>		<a name="top"></a><!-- top_of_header_marker_comment -->		<!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCocoa-date.html">Cocoa</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Cocoa/idxDesignGuidelines-date.html" target="_blank">Cocoa > Design Guidelines</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information -->		<!-- bottom_of_header_marker_comment -->		<!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN2005</div>
<div id="pageheadsub">SimpleCocoaApp: An Overview</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->		</p>		<center>			<p>			<table border="0" cellspacing="1" width="600">				<tr>					<td align="left" scope="row"><!-- begin_header_box -->						<table width="600" cellpadding="0" cellspacing="0" border="0">							<tr>								<td width=300 valign="top" align=left>									<table border="0" width="300" cellpadding="0" cellspacing="0">										<tr>											<td width=300 align=left><img src="images/tnmenutop.gif" align="bottom" width=300 height=7></td>										</tr>										<tr bgcolor="#e6e6e6">											<td background="images/tnmenubody.gif" width=300 align=left><span id="menutitle">CONTENTS<br>												<br>												</span></td>										</tr>										<tr bgcolor="#e6e6e6">											<td background="images/tnmenubody.gif" width=300 align=left><!-- begin_toc -->												<p id="menutext"><a href="#Section1">What Is SimpleCocoaApp? </a><br>												<br>												<a href="#Section2">Setting things up in Interface Builder </a><br>												<br>												<a href="#Section3">Main.m </a><br>												<br>												<a href="#Section4">The Hello1 and Hello2 Objects </a><br>												<br>												<a href="#Section5">The HelloController Object </a><br>												<br>												<a href="#Summary">Summary </a><br>												<br>												<a href="#references">Online Documentation </a><br>												<br>												<a href="#Downloads">Downloadables </a></p>												<p><!-- end_toc -->											</td>										</tr>										<tr>											<td width=300 align=left scope="row"><img src="images/tnmenubottom.gif" width=300 height=16></td>										</tr>									</table>								</td>								<td width=300 valign="top" align=left><!-- begin_intro_text -->									<p id="introtext">This Technote takes a look at the SimpleCocoaApp code sample and uses it as a jumping off point for discussing Cocoa programming tips and principles. You are encouraged to download the SimpleCocoaApp sample from <a href="http://developer.apple.com/samplecode/Sample_Code/Cocoa/SimpleCocoaApp.htm">here</a> and study the source code directly, in conjunction with this Technote. While not everything that SimpleCocoaApp does would be found in every application, all of it has applications somewhere.</p>									<p id="introtext">While this technote is geared towards the relative beginner at Cocoa, it does assume some basic knowledge of <a href="http://developer.apple.com/documentation/Cocoa/ObjectiveC/ObjC.pdf">Objective-C</a>, <a href="http://developer.apple.com/tools/projectbuilder/">Project Builder</a>, and Interface Builder. Links to additional Cocoa documentation are listed at the end of this technote. The goal here is to help open your horizons by simply demonstrating some of the power of the application development system and APIs. Hopefully, a few previously fuzzy concepts will be made more clear, and you will be inspired to explore the world of Cocoa.</p>									<p><!-- end_intro_text -->									<!-- begin_date -->									</p>									<h3>&nbsp;Updated: [Jan 21 2002]</h3>									<p><!-- end_date -->								</td>							</tr>						</table>						<!-- end_header_box -->						<br>						<br>						<hr width=500 align=center>						<br>						<br>						<!-- begin_content -->						<a name="Section1"></a>						<h2>What Is SimpleCocoaApp?</h2>						<p>SimpleCocoaApp is a really simple application. No, really. SimpleCocoaApp consists of less than 20 lines of code, but that is all it takes to get a whole truckload of features. This application admittedly doesn't do very much useful work, but it does handle radio buttons, Pop-Up menus, the Help menu, window processing, button clicks, text field input, and an About Box. Here's a screen shot of the application in action (see figure 1):</p>						<center>							<p>							<table border="0" cellpadding="0" width="480">								<tr>									<td align="left" scope="row"><img src="images/tn2005_001.jpg" alt="A Simple Cabon App" width=533 height=481><br>										<p><b>Figure 1</b> Shows the main window of SimpleCocoaApp.&nbsp;</td>								</tr>							</table>							</p>						</center>						<p>SimpleCocoaApp uses three main objects, instantiated (created) from three different custom classes:</p>						<ul>							<li>Hello1: Contains implementations of the methods <code>-message1:</code>, <code>-message2:</code>, and <code>-message3:</code>							<li>Hello2: Contains different implementations of <code>-message1:</code>, <code>-message2:</code>, and <code>-message3:</code>							<li>HelloController: Handles the data interaction between the GUI and the Hello objects, as well as displaying the ReadMe help file in response to a &quot;SimpleCocoaApp Help&quot; selection from the Help menu. It's usually good to have a &quot;controller&quot; object to manage the interaction between your view (GUI) and your model (the actual data objects; Hello objects in this case). This is known as the model-view-controller design paradigm.						</ul>						<p>Here's how the different objects interact:</p>						<p>Most controls in Cocoa have a <i>target</i> object associated with them, which is sent an <i>action message</i> (a message is similar to a method call) when the control is triggered. How the control looks on the screen and functions as a widget is handled by the Cocoa infrastructure, so that all <u>you</u> have to implement are the target objects and their action messages. Such is the case here.</p>						<ul>							<li>When one of the radio buttons is selected, an action message is sent automatically to the radio button's target (HelloController), which then changes the action message for the &quot;Say Hello...&quot; button to <code>-message1:</code>, <code>-message2:</code>, or <code>-message3:</code>.							<li>When a menu item in the pop-up menu is selected, an action message is sent to the pop-up menu's target (also HelloController), which then changes the &quot;Say Hello...&quot; button's target to a different &quot;Hello&quot; object (Hello1 or Hello2).							<li>When you click the &quot;Say Hello...&quot; button, it sends an action message (chosen by the radio buttons) to its target (chosen by the pop-up menu), which simply displays an alert (using the text in the &quot;My Message...&quot; text field if message #3 has been chosen).						</ul>						<p>Now let's explore the process of writing this application.</p>						<p><a href="#top">Back to top</a></p>						<p><br>						<br>						<a name="Section2"></a></p>						<h2>Setting Things Up in Interface Builder</h2>						<p>After creating a new Cocoa application in Project Builder, typically the first thing you will do is open MainMenu.nib to design your user interface and classes in Interface Builder. Since SimpleCocoaApp has already been written for you, you can simply double-click the Project Builder .pbproj file to open the project and then double-click MainMenu.nib in the left-hand-side file list. In MainMenu.nib, you will find the Hello1, Hello2, and HelloController classes under the Classes tab in the nib window, and the instances of Hello1, Hello2, HelloController and MyWindow under the Instances tab. The first step taken in SimpleCocoaApp was to create the Hello1, Hello2, and HelloController custom classes (by hitting return while a class like NSObject was selected under the Classes tab). Further steps included instantiating instances of these custom classes, and dragging controls/views into place on the window (MyWindow in this case). Apple encourages developers to adopt Aqua user interface guidelines for a consistent user experience; a link to further documentation can be found at the end of this technote. Once you've reached this stage in <i>your </i>application, you will want to connect up UI and your custom classes so they can send each other messages and tell each other to do things (grab values, set values, change behavior, whatever). This is done <b>graphically here in Interface Builder, so there is often no need to do any of it in code. </b>Instantiated objects are connected in two main ways in Interface Builder:</p>						<ol>							<li>Any object (and controls in particular) can have an <i>outlet</i>, which is an instance variable pointing to some other object. Often it is useful to have your program's controller object have outlets to various user interface elements, so that it can tell them to change their state, etc.							<li>Controls have a special way they can connect to other objects: they can assign an object to be the <i>target</i> of the control, and a particular method inside that object to be the <i>action</i> that gets called when the control is triggered.						</ol>						<p>To establish either of these connections, you control-click on the object that will be the source of messages, and drag the cursor to the object that will be the destination of the messages. This creates a gray line between the two objects. Then you can navigate the outlets and actions in the inspector, and click &quot;Connect&quot; to establish the connection. You will find that establishing outlet connections involves dragging one way, and establishing target-action connections involves dragging back the other way between objects. The key thing to remember is to <i>always control-drag in the direction that messages will flow.</i></p>						<p>&nbsp;</p>						<p>For example, in Figure 2 you can see that we are connecting an outlet called &quot;messageTextField&quot; in the instantiated Hello1 object to the NSTextField object that will hold the text to display for Hello1's <code>-message3:</code> method. We do this by control-dragging <i>from</i> the Hello1 object <i>to</i> the NSTextField. This is because when the program executes, the Hello1 object will send messages to the text field.</p>						<center>							<p>							<table border="0" cellpadding="0" width="480">								<tr>									<td align="left" scope="row"><img src="images/tn2005_002.jpg" alt="Hello1 and the NSTextField" width=566 height=356><br>										<p><b>Figure 2</b>. shows the establishment of an outlet connection between Hello1 and the NSTextField.&nbsp;</td>								</tr>							</table>							</p>						</center>						<p><br>						</p>						<p>On the other hand, Figure 3 shows us setting up the target-action connection for the &quot;Say Hello...&quot; button. Since the button will send the action message to its target when the button is clicked, we can see that messages flow from button to target, and thus we control-drag from the button to Hello1. Then we choose the action &quot;message1:&quot; and click &quot;Connect&quot; in the inspector.</p>						<center>							<p>							<table border="0" cellpadding="0" width="480">								<tr>									<td align="left" scope="row"><img src="images/tn2005_003.jpg" alt="Target-action connection" width=565 height=377 border=0 align="middle"><br>										<p><b>Figure 3</b>. shows the establishment of a target-action connection between the &quot;Say Hello...&quot; button and Hello1.&nbsp;</td>								</tr>							</table>							</p>						</center>						<p><br>						</p>						<p>Though it takes time to graphically setup the user interface, in the long run it saves time over trying to accomplish the same thing in pure source code. A this point, hitting Command-R (Test Interface in the File menu) will run a great deal of the user-interface portion of the application, without any code. Controls will work, buttons will click (though no actions wired to your custom code objects will be called), menus will appear, and so on. <b>All this is the functionality you get for free in Cocoa without writing one line of code!</b></p>						<p>The final step to take before turning to the source code is to create skeleton header/source files for your custom classes by control-clicking on them in the &quot;Classes&quot; tab and choosing &quot;Create Files...&quot;. Then, with the user interface designed, the custom objects instantiated, and the connections all made, we can turn to the source code for SimpleCocoaApp that implements our custom functionality.</p>						<p><a href="#top">Back to top</a></p>						<p><br>						<a name="Section3"></a></p>						<h2>Main.m</h2>						<p><br>						<br>						</p>						<center>							<p>							<table border="0" width="550">								<tr>									<td bgcolor="#e6e6e6" align=left scope="row">										<pre>int main(int argc, const char *argv[]) {    return NSApplicationMain(argc, argv);}</pre>									</td>								</tr>							</table>							</p>						</center>						<p><br>						<br>						</p>						<p><b>Listing 1</b>. short and sweet!</p>						<div align="left">							<p>As can be seen in Listing 1, nothing much goes in <code>main()</code> - you generally will just leave it like so. It simply jump-starts NSApplication, which runs the rest of the application, event loop and all. It is worth pointing out here that while all the code for SimpleCocoaApp has been written using Objective-C, you can also use Java to write your Cocoa applications - most of the objects/method names are the same.</p>						</div>						<p><a href="#top">Back to top</a></p>						<p><br>						<br>						<a name="Section4"></a></p>						<h2>The Hello1 and Hello2 Objects</h2>						<p>The Hello1 and Hello2 classes are virtually identical, the only difference being in the identifying title string placed on the dialog they present. The description here of Hello1 applies equally to Hello2 - the point of having the two classes is to demonstrate how to switch a control's target on the fly, so that only at runtime can you know for sure what lines of code will be executed when the &quot;Say Hello...&quot; button is pressed.</p>						<p>We turn now to Hello1.m, the implementation file for the Hello1 class. Although a class skeleton with empty methods can be easily generated by Interface Builder, it is up to the programmer to write the method implementations. Hello1 has three methods to implement: <code>-message1:</code>, <code>-message2:</code>, and <code>-message3:</code>.</p>						<p><br>						<br>						</p>						<center>							<p>							<table border="0" width="550">								<tr>									<td bgcolor="#e6e6e6" align=left scope="row">										<pre>- (IBAction)message1:(id)sender{    //Use a standard alert to display the message    NSRunAlertPanel(@&quot;Message1, Hello1&quot;,@&quot;Hello, Cocoa!&quot;,        @&quot;OK&quot;,NULL,NULL);}</pre>									</td>								</tr>							</table>							</p>						</center>						<p><br>						<br>						</p>						<p><b>Listing 2</b>. -message1: and -message2: are both implemented like so.</p>						<p><code>NSRunAlertPanel() </code>(see Listing 2 above) presents the user with an alert box, and its parameters enable us to configure it. The first parameter is the alert title, the second is the alert message, and the next three represent up to three buttons in the alert. Passing NULL to a button parameter removes that button from the alert. Though we do not care about a return value from <code>NSRunAlertPanel()</code> here, it is important to note that it does indeed return an integer (for which there are predefined constants) representing which button was pressed.</p>						<p><br>						<br>						</p>						<center>							<p>							<table border="0" width="550">								<tr>									<td bgcolor="#e6e6e6" align=left scope="row">										<pre>- (IBAction)message3:(id)sender{    //Use a standard alert to display the text    //in the messageTextField NSTextField    NSRunAlertPanel(@&quot;Message3, Hello1&quot;,        [messageTextField stringValue],@&quot;OK&quot;,NULL,NULL);</pre>									</td>								</tr>							</table>							</p>						</center>						<p><br>						<br>						}</p>						<p><b>Listing 3</b>. -message3: is a little more clever than the other two message routines.</p>						<p>In Listing 3 above, <code>-message3:</code> doesn't have <code>NSRunAlertPanel()</code> display a hard-coded line of text, but instead the contents of the NSTextField that the <code>messageTextField</code> instance variable points to. As part of the SimpleCocoaApp design, we connected the <code>messageTextField</code> outlet to the NSTextField control in Interface Builder, so that we could pull the value of the NSTextField like we are doing here. The <code>-stringValue</code> method returns the contents of an NSTextField as an NSString.&nbsp;</p>						<p><a href="#top">Back to top</a></p>						<p><br>						<br>						<a name="Section5"></a></p>						<h2>The HelloController Object</h2>						<p>HelloController is the real &quot;brains&quot; class behind SimpleCocoaApp. It does whatever processing is needed when the app starts up, it handles switching action messages and targets, and makes sure that help is displayed properly. It does all this in two short methods.</p>						<p><br>						</p>						<p><br>						<br>						</p>						<center>							<p>							<table border="0" width="550">								<tr>									<td bgcolor="#e6e6e6" align=left scope="row">										<pre>- (IBAction)switchMessage:(id)sender{    //sender is the NSMatrix containing the radio buttons.    //We ask the sender for which row (radio button) is    //selected and add one to compensate for counting from zero.    int which=[sender selectedRow]+1;    //We now set our NSButton's action to be the message    //corresponding to the radio button selection.    //+[NSString stringWithFormat:...] is used to concatenate    //&quot;message&quot; and the message number.    //NSSelectorFromString converts the message name string    //to an actual message structure that Objective-C can use.    [helloButton setAction:NSSelectorFromString([NSString        stringWithFormat:@&quot;%@%d:&quot;,@&quot;message&quot;,which])];}</pre>									</td>								</tr>							</table>							</p>						</center>						<p><br>						<br>						</p>						<p><b>Listing 4</b>. - switchMessage: is called when the user picks a different message to display by clicking a different radio button.</p>						<p>The really important line in Listing 4 above is the last one. <code>+stringWithFormat:</code> takes a <code>printf</code>-style format string and a parameter list, generating a string in a manner similar in concept to C's <code>sprintf</code> routine. We pass the result from that to the <code>NSSelectorFromString()</code> function, which as its name implies, converts a string to a &quot;selector,&quot; a method's full name/identifier (i.e. &quot;method:withParameter1:parameter2:parameter3:&quot;). That selector is then passed to <code>helloButton</code>'s -<code>setAction</code> method, changing the action called by <code>helloButton</code> when it is clicked.</p>						<p><br>						<br>						</p>						<center>							<p>							<table border="0" width="550">								<tr>									<td bgcolor="#e6e6e6" align=left scope="row">										<pre>- (IBAction)switchObject:(id)sender{    //sender is the NSPopUpMenu containing Hello object choices.    //We ask the sender for which menu item is selected and add one    //to compensate for counting from zero.    int which=[sender indexOfSelectedItem]+1;    //Based on which menu item is selected, we set the target    //(the receiving object)    //of the helloButton to point to either hello1 or hello2.    if (which==1)    [helloButton setTarget:hello1];    else    [helloButton setTarget:hello2];}</pre>									</td>								</tr>							</table>							</p>						</center>						<p><br>						<br>						</p>						<p><b>Listing 5</b>. -switchObject: is called when the user picks a different object to receive messages using the PopUp menu.</p>						<p><code>helloButton</code> is an outlet (wired up in Interface Builder) that points to the &quot;Say Hello...&quot; NSButton on the window. Here we invoke the setTarget method to change the button's target to either hello1 or hello2, depending upon which object was chosen in the pop-up menu. Thus, when the button is pressed in the future, the new target will be sent the action message.</p>						<p><br>						</p>						<p>So that is all the source code.  But what is powering the Help menu for SimpleCocoaApp?  Where is the code for that? It turns out that with Cocoa you don't need any code to do it!  By putting your html help files in the Resources folder in the application bundle, setting the &quot;AppleTitle&quot; html metatag to list the title of your &quot;help book,&quot; and tweaking your Info.plist file (that goes automatically in the app bundle and is editable from Project Builder), you can get automatic Help Menu support - Help Viewer will be launched at the appropriate time, and your help book (merely an html file titled &quot;ReadMe.html&quot; in this case) will be opened.</p>						<p><br>						</p>						<p><a href="#top">Back to top</a></p>						<p><br>						<br>						<a name="Summary"></a></p>						<h2>Summary</h2>						<p>All in all, about 10 lines of source code - and look at all the functionality you get! The real challenge for you the developer going on from here is to learn as much of the Cocoa frameworks as possible, so that you don't reimplement something yourself which is already done for you by Cocoa. Below are some links to documentation and the sample code this technote is based on.</p>						<p><br>						<br>						</p>						<p><a href="#top">Back to top</a></p>						<p><br>						<a name="references"></a></p>						<h2>Online Documentation</h2>						<p><a href="http://developer.apple.com/documentation/macosx/">Mac OS X Developer Documentation (as well as Adopting Aqua documentation)</a></p>						<p><a href="http://developer.apple.com/documentation/Cocoa/CocoaTopics.html">Cocoa Developer Documentation</a></p>						<p><a href="http://developer.apple.com/documentation/DeveloperTools/devtools.html">Developer Tools</a></p>						<p><a href="http://developer.apple.com/documentation/Cocoa/ObjectiveC/ObjC.pdf">Objective-C Manual</a></p>						<p><a href="http://developer.apple.com/tools/projectbuilder/">Project Builder</a></p>						<p><br>						</p>						<p><a href="#top">Back to top</a></p>						<p><br>						</p>						<p><a name="Downloads"></a></p>						<h2>Downloadables</h2>						<p>						<table border="0" cellpadding="3" width="100%">							<tr>								<td width=50 align=left scope="row">									<center>										<img src="images/acrobatsmall.gif" width=22 height=23 align="middle" alt="Acrobat"></center>								</td>								<td align="left">Acrobat version of this Note (392K).</td>								<td width=60 align=left><a href="pdf/tn2005.pdf">Download</a></td>							</tr>							<tr>								<td width=50 align=left scope="row">									<center>										<img src="images/bluebook.gif" width=22 height=23 align="bottom" alt="Bluebook gif"></center>								</td>								<td align="left">Stuffed SimpleCocoaApp sample code (size in bytes, size in K)</td>								<td width=60 align=left><a href="http://developer.apple.com/samplecode/Sample_Code/Cocoa/SimpleCocoaApp.htm">Download</a></td>							</tr>						</table>						<br>						</p>						<p><a href="#top">Back to top</a></td>				</tr>			</table>			</p>		</center>		<p><!-- end_content -->		<!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn2005.html%3Fid%3DDTS10003044-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn2005.html%3Fid%3DDTS10003044-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn2005.html%3Fid%3DDTS10003044-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information -->	</body></html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>NewColorDialog(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING403></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-402.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-404.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-370.html"><B>Chapter 6 - Dialog Manager</B></A> / <A HREF="Toolbox-386.html"><B>Dialog Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-389.html"><B>Dialog Manager Routines</B></A> / <A HREF="Toolbox-401.html"><B>Creating and Disposing of Dialog Boxes</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING403-0></A>
<H3><A NAME=MARKER-9-443></A>NewColorDialog</H3>
 <A NAME=MARKER-11-444></A><A NAME=MARKER-2-445></A>To create a dialog box, you can use the <CODE>NewColorDialog</CODE> function, which returns a pointer to a color graphics port. Generally, you should instead use <CODE>GetNewDialog</CODE> to create a dialog box, because <CODE>GetNewDialog</CODE> takes information about the dialog box from a dialog resource in a resource file. (Like window resources, dialog resources isolate descriptive information from your application code for ease of modification or translation to other languages.) The <CODE>NewColorDialog</CODE> function is also available as the <BR><CODE>NewCDialog</CODE> function.<P>
<PRE>
FUNCTION NewColorDialog (dStorage: Ptr; boundsRect: Rect; 
                         title: Str255; visible: Boolean;
                         procID: Integer; behind: WindowPtr;
                         goAwayFlag: Boolean; refCon: LongInt; 
                         items: Handle): CDialogPtr;
</PRE>
<DL>
<DT><CODE>dStorage</CODE>
<DD> A pointer to the memory for the dialog record. If you set this parameter to <CODE>NIL</CODE> for modal dialog boxes and movable modal dialog boxes, the Dialog Manager allocates memory for them on your application heap. For a modeless dialog box, however, you should allocate your own memory <BR>as you would for a window--otherwise, your heap could become fragmented.
<DT><CODE>boundsRect</CODE>
<DD> A rectangle, given in global coordinates, that determines the size and position of the dialog box; these coordinates specify the upper-left and lower-right corners of the dialog box.
<DT><CODE>title</CODE>
<DD> A text string used for the title of a modeless or movable modal dialog <BR>box. You can specify an empty string (not <CODE>NIL</CODE>) for a title bar that contains no text.
<DT><CODE>visible</CODE>
<DD> A flag that specifies whether the dialog box should be drawn on the screen immediately. If you set this parameter to <CODE>FALSE</CODE>, the dialog box is not drawn until your application uses the Window Manager procedure <CODE>ShowWindow</CODE> to display it.
<DT><CODE><A NAME=MARKER-13-446></A><A NAME=MARKER-13-447></A><A NAME=MARKER-13-448></A>procID</CODE>
<DD> The window definition ID for the type of dialog box. Use the <CODE>dBoxProc</CODE> constant to specify modal dialog boxes, the <CODE>noGrowDocProc</CODE> constant to specify modeless dialog boxes, and the <CODE>movableDBoxProc</CODE> constant to specify movable modal dialog boxes.<A NAME=MARKER-2-449></A>
<DT><CODE>behind</CODE>
<DD> A pointer to the window behind which the dialog box is to be placed on the desktop. Always set this parameter to the window pointer <CODE>Pointer(-1)</CODE> to bring the dialog box in front of all other windows.
<DT><CODE>goAwayFlag</CODE>
<DD> A flag to specify whether a modeless dialog box should have a close box in its title bar when the dialog box is active. If you set this parameter to <CODE>TRUE</CODE>, the dialog window has a close box in its title bar when the window is active; only modeless dialog boxes should have close boxes.
<DT><CODE>refCon</CODE>
<DD> A value that the Dialog Manager uses to set the <CODE>refCon</CODE> field of the dialog box's window record. Your application may store any value here for any purpose. For example, your application can store a number that represents a dialog box type, or it can store a handle to a record that maintains state information about the dialog box. You <BR>can use the Window Manager procedure <CODE>SetWRefCon</CODE> at any time to change this value in the dialog record for a dialog box, and you can use the <CODE>GetWRefCon</CODE> function to determine its current value.
<DT><CODE>items</CODE>
<DD> A handle to an item list resource for the dialog box. You can get the handle by calling the Resource Manager function <CODE>GetResource</CODE> to read the item list resource into memory. Use the Memory Manager procedure <CODE>HNoPurge</CODE> to make the handle unpurgeable while you use it or use the Operating System utility function <CODE>HandToHand</CODE> to make a copy of the handle and use the copy.
</DL>
<A NAME=HEADING403-12></A>
<H5>DESCRIPTION</H5>
 The <CODE>NewColorDialog</CODE> function creates a dialog box as specified by its parameters <BR>and returns a pointer to a color graphics port for the new dialog box. The first eight parameters (<CODE>dStorage</CODE> through <CODE>refCon</CODE>) are passed to the Window Manager function <CODE>NewCWindow</CODE>, which creates the dialog box. You can use this pointer with Window Manager or QuickDraw routines to manipulate the dialog box. <P>
 The Dialog Manager uses the default window colors for the dialog box. By using the system's default colors, you ensure that your application's interface is consistent with that of the Finder and other applications. However, if you absolutely feel compelled to break from this consistency, you can use the Window Manager procedure <CODE>SetWinColor</CODE> to use your own dialog color table resource that specifies colors other than the default colors. Be aware, however, that nonstandard colors in your alert and dialog boxes may initially confuse your users. <P>
 The Window Manager creates an auxiliary window record for the color dialog box. You <BR>can access this record with the Window Manager function <CODE>GetAuxWin</CODE>. (The <CODE>dialogCItemhandle</CODE> field of the auxiliary window record points to the dialog box's item color table resource.) If the dialog box's content color isn't white, it's a good idea <BR>to call <CODE>NewColorDialog</CODE> with the <CODE>visible</CODE> flag set to <CODE>FALSE</CODE>. After the color table <BR>and color item list resource are installed, use the Window Manager procedure <CODE>ShowWindow</CODE> to display the dialog box if it's the frontmost window. If the dialog box <BR>is a modeless dialog box that is not in front, use the Window Manager procedure <CODE>ShowHide</CODE> to display it.<P>
 When specifying the size and position of the dialog box in the <CODE>boundsRect</CODE> parameter, you should generally try to center dialog boxes between the left and right margins of the screen or the window where the user is working, whichever is more appropriate. Also ensure that the tops of dialog boxes (including the title bars of modeless and movable modal dialog boxes) lie below the menu bar when you position them on the main screen. You can use the Menu Manager function <CODE>GetMBarHeight</CODE> to determine the height of <BR>the menu bar.<P>
<A NAME=HEADING403-17></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 For modal dialog boxes, the Dialog Manager function <CODE>ModalDialog</CODE> traps all events. This prevents your event loop from receiving activate events for your windows. Thus, if one of your application's windows is active when you use <CODE>NewColorDialog</CODE> to create <BR>a modal dialog box, you must explicitly deactivate that window before displaying the modal dialog box.<P>
 If you ever need to display a dialog box while your application is running in the background or is otherwise invisible to the user, you should use the Notification Manager <BR>to post a notification to the user. The Notification Manager automatically displays an alert box containing whatever message you specify; you do not need to use the Dialog Manager to create the alert box yourself.<P>
 Note that the Notification Manager provides a one-way communications path from <BR>your application to the user. There is no provision for carrying information back from <BR>the user to your application while it is in the background (although it is possible for <BR>your application to determine if the notification was received). If you need to solicit information from the user, use the Notification Manager to inform the user to bring <BR>your application to the foreground, where the user can then respond to the dialog box that your application presents.<P>
 The <CODE>NewColorDialog</CODE> function generates an update event for the entire window contents. Thus, with the exception of controls, items aren't drawn immediately. The Dialog Manager calls the Control Manager to draw controls, and the Control Manager draws them immediately. So that the controls won't be drawn twice, the Dialog Manager calls the Window Manager procedure <CODE>ValidRect</CODE> for the enclosing rectangle of each control. If you find that there is too great a lag between the drawing of controls and the drawing of other items, try making the dialog box initially invisible and then calling the Window Manager procedure <CODE>ShowWindow</CODE> to show it.<P>
<A NAME=HEADING403-22></A>
<H5>SEE ALSO</H5>
 Window Manager routines are described in the chapter "Window Manager" in this book. The Notification Manager is described in the chapter "Notification Manager" in <I>Inside Macintosh: Processes.</I> See <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I> for a description of <CODE>HNoPurge</CODE>. See <I><A HREF="../OSUtilities/OSUtilities-2.html">Inside Macintosh: Operating System Utilities</A></I> for a description of <CODE>HandToHand</CODE>.<P>
 <A HREF=Toolbox-384.html#MARKER-9-257>"Adjusting Menus for Modal Dialog Boxes" beginning on page 6-68</A> and <A HREF=Toolbox-384.html#MARKER-9-280>"Adjusting Menus for Movable Modal and Modeless Dialog Boxes" on page 6-73</A> discuss menu bar adjustment when your application displays dialog boxes. See <A HREF=Toolbox-381.html#MARKER-9-162>"Titles for Buttons, Checkboxes, and Radio Buttons" beginning on page 6-37</A> and <A HREF=Toolbox-381.html#MARKER-9-171>"Text Strings for Static Text and Editable Text Items" beginning on page 6-40</A> for recommendations about messages and control titles in dialog boxes. The <CODE>GetResource</CODE> function is described in the chapter "Resource Manager" of <I>Inside Macintosh: More Macintosh Toolbox.</I><A NAME=MARKER-2-450></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-402.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-404.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

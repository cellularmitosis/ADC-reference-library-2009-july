<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Trap Manager (IM: U)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING169></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="OSUtilities-168.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="OSUtilities-170.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="OSUtilities-2.html"><B>Operating System Utilities</B></A> / </DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING169-0></A>
<H1>Chapter 8 - Trap Manager</H1>
 <A NAME=MARKER-2-3></A>This chapter describes how your application can use the Trap Manager to augment or override an existing system software routine.<P>
 Although this chapter describes patching in some depth, you should rarely, if ever, find a need to use patches in an application. The primary purposes of patches, as their name suggests, are to fix problems and augment routines in ROM code.<P>
 To use this chapter, you should have some knowledge of assembly language. For information about the instruction sets of microprocessors in the Motorola MC680x0 family, see the appropriate user's manual, for example, the <I>MC68020 32-Bit Microprocessor User's Manual</I>.<P>
 This chapter describes how the Trap Manager works and then shows how you can use the Trap Manger to<P>
<UL>
<LI>check for the availability of a system software routine
<LI>alter the behavior of a system software routine<P>
</UL>
<HR>
<B>Chapter </B><B>Contents</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-0">About the Trap Manager</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-10">Trap Dispatch Tables</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-15">Process for Accessing System Software Routines</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-20">Patches and System Software Routines </A>
<DD>
<DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-27">Daisy Chain of Patches</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-31">Head Patch (Normal Patch)</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-33">Tail Patch</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-36">Come-From Patch (Used Only by Apple)</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-43">Patch for One Application</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-46">Patch for All Applications</A>
<DD>
</DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-48">A-Line Instructions</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-58">A-Line Instructions for Operating System Routines</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-71">Calling Conventions for Register-Based Routines</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-76">Parameter-Passing Conventions for Operating System Routines</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-79">Function Results</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-83">Flag Bits</A>
<DD>
</DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-90">A-Line Instructions for Toolbox Routines</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-105">Calling Conventions for Stack-Based Routines</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-115">Parameter-Passing Conventions for Toolbox Routines</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-121">Function Results</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-129">The Auto-Pop Bit</A>
<DD>
</DL>
<DT><A HREF="OSUtilities-170.html#HEADING170-133">About Trap Macros</A>
<DD>
<DT><A HREF="OSUtilities-170.html#HEADING170-136">About Routine Selectors</A>
<DD>
</DL>
<DT><A HREF="OSUtilities-171.html#HEADING171-0">Using the Trap Manager</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-171.html#HEADING171-5">Determining If a System Software Routine is Available</A>
<DD>
<DT><A HREF="OSUtilities-171.html#HEADING171-16">Patching a System Software Routine</A>
<DD>
</DL>
<DT><A HREF="OSUtilities-172.html#HEADING172-0">Trap Manager Reference</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-173.html#HEADING173-0">Routines</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-174.html#HEADING174-0">Accessing Addresses From the Trap Dispatch Tables</A>
<DD>
<DT><A HREF="OSUtilities-178.html#HEADING178-0">Installing Patch Addresses Into the Trap Dispatch Tables</A>
<DD>
<DT><A HREF="OSUtilities-182.html#HEADING182-0">Detecting Unimplemented System Software Routines</A>
<DD>
<DT><A HREF="OSUtilities-184.html#HEADING184-0">Manipulating One Trap Dispatch Table (Obsolete Routines)</A>
<DD>
</DL>
</DL>
<DT><A HREF="OSUtilities-187.html#HEADING187-0">Summary of the Trap Manager</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-187.html#HEADING187-1">Pascal Summary</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-187.html#HEADING187-2">Constants</A>
<DD>
<DT><A HREF="OSUtilities-187.html#HEADING187-5">Data Types</A>
<DD>
<DT><A HREF="OSUtilities-187.html#HEADING187-7">Routines</A>
<DD>
</DL>
<DT><A HREF="OSUtilities-187.html#HEADING187-26">C Summary</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-187.html#HEADING187-27">Constants</A>
<DD>
<DT><A HREF="OSUtilities-187.html#HEADING187-31">Data Types</A>
<DD>
<DT><A HREF="OSUtilities-187.html#HEADING187-33">Routines</A>
<DD>
</DL>
<DT><A HREF="OSUtilities-187.html#HEADING187-58">Assembly-Language Summary</A>
<DD>
<DL>
<DT><A HREF="OSUtilities-187.html#HEADING187-59">Constants</A>
<DD>
<DT><A HREF="OSUtilities-187.html#HEADING187-61">Trap Macros</A>
<DD>
</DL>
</DL>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="OSUtilities-168.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="OSUtilities-170.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="OSUtilities-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

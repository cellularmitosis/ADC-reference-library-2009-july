<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Using the Standard Sound Dialog Component</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="refStdSoundComp.4.htm">Previous</A> | <A HREF="refStdSoundComp.1.htm">Chapter Contents</A> | <A HREF="refStdSoundComp.htm">Chapter Top</A> | <A HREF="refStdSoundComp.6.htm">Next</A> | <!-- QTnavbar end --><H1 CLASS="H1.Heading1"><A NAME="pgfId=3596"> </A>Using the Standard Sound Dialog Component</H1><P CLASS="T1.Text1"><A NAME="pgfId=3597"> </A>To work with the standard sound dialog component, it is necessary to open a connection to the component using the Component Manager. An example of how to do this is shown in <A HREF="refStdSoundComp.5.htm#16221" CLASS="XRef">Listing&nbsp;1</A>.</P><P CLASS="L.Listing"><A NAME="pgfId=3602"> </A>Listing&nbsp;1 <A NAME="16221"> </A>Opening a connection to the standard sound dialog  component</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7196"> </A>ComponentInstance ci;<BR>ci = OpenDefaultComponent(StandardCompressionType,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StandardCompressionSubTypeSound);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3604"> </A>After obtaining a connection to the standard sound dialog  component, it may be appropriate to configure the dialog box to present a reasonable set of values. This is done with <TT CLASS="cv">SCSetInfo</TT> as shown in <A HREF="refStdSoundComp.5.htm#33855" CLASS="XRef">Listing&nbsp;2</A>. This example sets the sample rate to 32000 Hz, the sample size to 8 bits, the channel count to 1, and the compression format to MACE 6:1. If <TT CLASS="cv">SCSetInfo</TT> is not called for a given parameter, that parameter defaults to an appropriate value.</P><P CLASS="L.Listing"><A NAME="pgfId=3605"> </A>Listing&nbsp;2 <A NAME="33855"> </A>Setting initial values for the dialog box</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7200"> </A>UnsignedFixed &nbsp;&nbsp;rate;<BR>short &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sSize, cCount;<BR>OSType &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compType;<BR>rate = FixRatio(32000, 1);<BR>SCSetInfo(ci, scSoundSampleRateType, &amp;rate);<BR>sSize = 8;<BR>SCSetInfo(ci, scSoundSampleSizeType, &amp;sSize);<BR>cCount = 1;<BR>SCSetInfo(ci, scSoundChannelCountType, &amp;cCount);<BR>compType = kMACE6Compression;<BR>SCSetInfo(ci, scSoundCompressionType, &amp;compType);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3607"> </A>It is sometimes necessary to restrict the list of compression types appearing in the compression menu. For example, some clients may not support generation of compressed data. The standard sound dialog component allows the client to provide a list of compression types that should be displayed. In the example in <A HREF="refStdSoundComp.5.htm#19845" CLASS="XRef">Listing&nbsp;3</A>, all compression types except for uncompressed are eliminated from the list.</P><P CLASS="L.Listing"><A NAME="pgfId=3608"> </A>Listing&nbsp;3 <A NAME="19845"> </A>Restricting the list of compression types</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7204"> </A>Handle compressionTypeList;<BR>compressionTypeList = NewHandle(sizeof(OSType));<BR>**(OSType **)compressionTypeList = kRawCodecType;<BR>SCSetInfo(ci, scCompressionListType, &amp;compressionTypeList);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3610"> </A>To display the dialog box, use <TT CLASS="cv">SCRequestImageSettings</TT> as shown in <A HREF="refStdSoundComp.5.htm#34070" CLASS="XRef">Listing&nbsp;4</A>. If the user cancels the dialog box, <TT CLASS="cv">userCanceledErr</TT> is returned.</P><P CLASS="L.Listing"><A NAME="pgfId=3611"> </A>Listing&nbsp;4 <A NAME="34070"> </A>Displaying the dialog box</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7208"> </A>OSErr err;<BR>err = SCRequestImageSettings(ci);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3613"> </A>After the dialog box has been displayed, the settings can be retrieved using the <TT CLASS="cv">SCGetInfo</TT> call with the appropriate selectors. The example in <A HREF="refStdSoundComp.5.htm#16456" CLASS="XRef">Listing&nbsp;5</A> shows how to retrieve the selected sample rate, sample size, compression format, and number of channels.</P><P CLASS="L.Listing"><A NAME="pgfId=3614"> </A>Listing&nbsp;5 <A NAME="16456"> </A>Retrieving settings from the dialog box</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7212"> </A>UnsignedFixed &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rate;<BR>short &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sSize, cCount;<BR>OSType &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compType;<BR></CODE><CODE CLASS="Cv.Code"><A NAME="pgfId=7216"> </A><BR>SCGetInfo(ci, scSoundSampleRateType, &amp;rate);<BR>SCGetInfo(ci, scSoundSampleSizeType, &amp;sSize);<BR>SCGetInfo(ci, scSoundChannelCountType, &amp;cCount);<BR>SCGetInfo(ci, scSoundCompressionType, &amp;compType);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3617"> </A>It is also possible to retrieve all of the current settings in a single handle, as shown in the next example. This can be convenient when saving user settings:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7220"> </A>Handle h;<BR>SCGetInfo(ci, scSettingsStateType, &amp;h);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3619"> </A>Once the settings have been retrieved in the handle, they can be restored using <TT CLASS="cv">SCSetInfo</TT>, as follows:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7224"> </A>SCSetInfo(ci, scSettingsStateType, &amp;h);<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=3621"> </A>When you are finished with the standard sound dialog component, close the connection to the component as follows:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=7228"> </A>CloseComponent(ci);<BR></CODE><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: QuickTime Reference</I><P>| <A HREF="refStdSoundComp.4.htm">Previous</A> | <A HREF="refStdSoundComp.1.htm">Chapter Contents</A> | <A HREF="refStdSoundComp.htm">Chapter Top</A> | <A HREF="refStdSoundComp.6.htm">Next</A> | <!-- QTnavbar end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
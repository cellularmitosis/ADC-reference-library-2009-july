<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>StringToFormatRec(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING348></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-347.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-349.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-279.html"><B>Chapter 5 - Text Utilities</B></A> / <A HREF="Text-292.html"><B>Text Utilities Reference</B></A><BR><DL><DD><A HREF="Text-299.html"><B>Routines</B></A> / <A HREF="Text-347.html"><B>Using Number Format Specification Strings for International Number Formatting</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING348-0></A>
<H3><A NAME=MARKER-2-315></A>StringToFormatRec</H3>
 The <CODE>StringToFormatRec</CODE> function creates a number format specification string record from a number format specification string that you supply in a Pascal string.<P>
<PRE>
FUNCTION StringToFormatRec(inString: Str255;
               partsTable: NumberParts;
               VAR outString: NumFormatStringRec): FormatStatus;
</PRE>
<DL>
<DT><CODE>inString</CODE>
<DD> A Pascal string that contains the number formatting specification.
<DT><CODE>partsTable</CODE>
<DD> A record usually obtained from the tokens (<CODE>'itl4'</CODE>) resource that shows the correspondence between generic number part separators (tokens) and their localized version (for example, a thousand separator is a comma in the United States and a decimal point in France).
<DT><CODE>outString</CODE>
<DD> On output, this <CODE>NumFormatStringRec</CODE> record contains the values that form the internal representation of the format specification. The format of the data in this record is private.
</DL>
<A NAME=HEADING348-6></A>
<H5>DESCRIPTION</H5>
 <CODE>StringToFormatRec</CODE> converts a number format specification string into the internal representation contained in a number format string record. It uses information in the current script's tokens resource to determine the components of the number. <CODE>StringToFormatRec</CODE> checks the validity both of the input format string and of the number parts table (since this table can be programmed by the application). <CODE>StringToFormatRec</CODE> ignores spurious characters.<P>
 The <CODE>inString</CODE> parameter contains a number format specification string that specifies how numbers appear. This string contains up to three specifications, separated by semicolons. The positive number format is specified first, the negative number format is second, and the zero number format is last. If the string contains only one part, that is the format of all three types of numbers. If the string contains two parts, the first part is the format for positive and zero number values, and the second part is the format for negative numbers. The syntax for the number format specification strings is described in detail in <A HREF=Text-291.html#MARKER-9-241>"Using Number Format Specification Strings,"</A> which begins on <A HREF=Text-291.html#MARKER-9-241>page 5-39</A>.<P>
 <CODE>StringToFormatRec</CODE> returns a value of type <CODE>FormatStatus</CODE> that denotes the confidence level for the conversion that it performed. The low byte of the <CODE>FormatStatus</CODE> value is of type <CODE>FormatResultType</CODE>, the values of which are described in <A HREF=Text-291.html#MARKER-9-15>Table 5-6</A> on <A HREF=Text-291.html#MARKER-9-15>page 5-38</A>.<A NAME=MARKER-2-904></A><P>
<DL>
<DT><B>IMPORTANT</B>
<DD>Be sure to cast the result of <CODE>StringToFormatRec</CODE> to a type <CODE>FormatResultType</CODE> before working with it.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING348-11></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 <CODE>StringToFormatRec</CODE> may move memory; your application should not call this function at interrupt time.<P>
<A NAME=HEADING348-13></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>StringToFormatRec</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_ScriptUtil<TD>$820C FFEC</TABLE>
<P>
<A NAME=HEADING348-15></A>
<H5>SEE ALSO</H5>
 For comprehensive details on the number parts table, see the appendix "International Resources" in this book.<P>
 To obtain a handle to the number parts table from a tokens resource, use the <CODE>GetIntlResourceTable</CODE> procedure, which is described in the chapter "Script Manager" in this book.<A NAME=MARKER-2-316></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-347.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-349.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

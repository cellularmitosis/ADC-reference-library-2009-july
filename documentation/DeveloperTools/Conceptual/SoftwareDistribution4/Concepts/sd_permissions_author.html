<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Distribution Legacy Guide (Legacy): Authorization, File Ownership, and Permissions</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Authorization, File Ownership, and Permissions"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001769" title="Authorization, File Ownership, and Permissions"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../index.html" target="_top">Software Distribution Legacy Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_mpkg_anatomy.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_pkg_flags.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001769-TPXREF2" title="Authorization, File Ownership, and Permissions"></a><hr /><H1>Authorization, File Ownership, and Permissions</H1><p>This section describes how permissions are set for files and directories during installation with PackageMaker and Installer. It also describes how to specify authorization requirements, and when the user will be required to authenticate.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1038436-TPXREF2">File Ownership</a>
				
			<br/>
			
        
			
			
				<a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1038750-TPXREF3">File Permissions</a>
				
			<br/>
			
        
			
			
				<a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040759-TPXREF31">Setting File Ownership and Permissions</a>
				
			<br/>
			
        
			
			
				<a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1041427-CFAEDIAE">Obtaining Owner and Group Information</a>
				
			<br/>
			
        
			
			
				<a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040506-CIHBBCHG">Authorization for an Installation</a>
				
			<br/>
			
        
			
			
				<a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1038342-TPXREF4">Choosing an Authorization Setting</a>
				
			<br/>
			
        
			
			
				<a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1038293-CFAJJJEH">Things to Look Out For</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001769-1038436" title="File Ownership"></a><a name="//apple_ref/doc/uid/20001769-1038436-TPXREF2" title="File Ownership"></a><h2>File Ownership</h2><p>By default, if no authorization is required, the files that Installer places on a user’s computer are owned by the user doing the installation. If authorization is required, the files are owned by the owner specified in the files archive within the package, regardless of the user and password supplied to complete the authentication. So if your software requires authorization, make sure all of the files and directories have the desired owner and group when you set up a directory structure prior to creating a package. See <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040759">“Setting File Ownership and Permissions”</a></span> for suggestions on how to do this.</p><p>Authorization and authentication are described in <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040506">“Authorization for an Installation.”</a></span></p><a name="//apple_ref/doc/uid/20001769-1038750" title="File Permissions"></a><a name="//apple_ref/doc/uid/20001769-1038750-TPXREF3" title="File Permissions"></a><h2>File Permissions</h2><p>By default, the files and directories that Installer places on a user’s computer have the permissions specified in the package’s archive. You can override the default permission settings for installed directories (but not files) by selecting the Overwrite Permissions option in the PackageMaker Info pane. This instructs Installer to use the permissions of directories in the package to modify the permissions of any identically named directories found on the installation volume.</p><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_44" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;Use this option with care. If the installation sets the permissions of files in the root directory incorrectly, the installation of the package could render the target computer unusable. For related information, see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1038293">“Things to Look Out For.”</a></span></p><p></p><div class="clear"></div></div><p>To elaborate on how permissions are set for installed files and directories:</p><ul class="ul"><li class="li"><p>All installed files get their permissions from the package’s file archive.</p></li><li class="li"><p>All installed directories that don’t already exist on the target volume get their permissions from the package’s file archive.</p></li><li class="li"><p>All directories that already exist on the target volume keep their current permissions, <em>unless</em> the package specifies the Overwrite Permissions option.</p></li><li class="li"><p>In some cases, setting the desired permissions may require authorization. You can request authorization as described in <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040506">“Authorization for an Installation.”</a></span></p></li></ul><p>In general, when you set up a directory structure for your software prior to creating a package, make sure all of the permissions are set as you want them when installed. See <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040759">“Setting File Ownership and Permissions”</a></span> for suggestions on how to do this.</p><a name="//apple_ref/doc/uid/20001769-1040759" title="Setting File Ownership and Permissions"></a><a name="//apple_ref/doc/uid/20001769-1040759-TPXREF31" title="Setting File Ownership and Permissions"></a><h2>Setting File Ownership and Permissions</h2><p>For the majority of installations, which install a relocatable application, you can do the following:</p><ol class="ol"><li class="li"><p>Set the Default Location (in the PackageMaker Info pane) to <code>/Applications</code>. </p><div class="notebox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_45" title="Note"></a><p><strong>Note:</strong>&nbsp;It’s a good idea to always specify as much directory structure as you can in the default location and as little as possible in your package.</p></div></li><li class="li"><p>Set permissions for the directories and executable files in the package to a value of 775 (full access for owner and group, read and execute access for others).</p><p>Set permissions for non-executable files to 664 (read and write access for owner and group and read-only access for others).</p><div class="notebox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_46" title="Note"></a><p><strong>Note:</strong>&nbsp;These are suggestions. In some cases (such as for a daemon or specialized software) you may know that files in a package require other permissions. Whatever permissions you set, be sure to perform test installations with the package before distributing it.</p></div></li><li class="li"><p>Set an appropriate owner and group for the packaged files and directories. You can read more about how to get this information in <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1041427">“Obtaining Owner and Group Information.”</a></span></p><p>For example, applications often are owned by <code>root</code> and have a group of <code>admin</code>.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_47" title="Note"></a><p><strong>Note:</strong>&nbsp;For an application whose owner is displayed as <code>root</code> in a Terminal window (as in <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1042694-CFAJGDCD">Listing 1</a></span>), the owner is shown as “System” instead when you choose File > Get Info in the Finder.</p></div><p>System software, such as a kernel extension (or KEXT), is owned by <code>root</code> and has a group of <code>wheel</code>.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_48" title="Important:"></a><p><strong>Important:</strong>&nbsp;This step is particularly important if your package requires authorization. If so, do not use your own owner and group settings, unless you truly want the installed files on the users system to have those settings. For more information, see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1030476">“File Ownership Issues Can Cause Problems.”</a></span></p><p></p></div></li><li class="li"><p>Set the Authorization Action pop-up to Admin Authorization (also in the PackageMaker Info pane). See <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1038171-CIHIFADD">Table 1</a></span> for information about possible settings.</p></li></ol><p>If your installation is not relocatable, you can do the following:</p><ol class="ol"><li class="li"><p>Set the Default Location to the full path in which to place the software.</p></li><li class="li"><p>Set the required permissions for the installation location.</p></li><li class="li"><p>Set an appropriate owner and group for the packaged files and directories, as described in the previous steps.</p></li><li class="li"><p>Set the Authorization Action pop-up to Admin Authorization or Root Authorization, as appropriate.</p></li></ol><a name="//apple_ref/doc/uid/20001769-1041427" title="Obtaining Owner and Group Information"></a><a name="//apple_ref/doc/uid/20001769-1041427-CFAEDIAE" title="Obtaining Owner and Group Information"></a><h2>Obtaining Owner and Group Information</h2><p><span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-TPXREF2">“Authorization, File Ownership, and Permissions”</a></span> explains why, if your software requires authorization, you should make sure all of the files and directories have the desired owner and group when you set up a directory structure prior to creating a package. And <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1030476">“File Ownership Issues Can Cause Problems”</a></span> describes what can go wrong if you don’t follow that advice. So how do you determine which owner and group to use?</p><p>If your software will be installed in a known destination, such as <code>/Applications</code>, you can examine the owner and group for files and directories already installed in that location. An easy way to do this is to open a Terminal window and display the information using a command such as the <code>ls</code> command. For example, you could type <code>cd /Applications; ls -l</code> (and press Return) to change location to the Applications directory and list all the files it contains, along with their permissions, owner, group, and other information.</p><p>When you do this, you should see that many files have an owner of <code>root</code> and a group of <code>admin</code>. These are values you can use for an application you place in that location. Some files and directories may be owned by the current user (which is probably you), but you don’t want to be the owner when these files are installed from your package (unless you’re packaging software just to install on your own computer).</p><p>Similarly, if you list the files in <code>/System/Library/Frameworks</code>, you’ll see frameworks with owner <code>root</code> and group <code>wheel</code>.</p><p>Sometimes owner, group, and permission information can be damaged or inadvertently changed, so when you check, you may see odd values. To make sure you are seeing the correct values, you can take one of several steps before you check owner and group information:</p><ul class="ul"><li class="li"><p>Do a clean install of Mac OS X.</p></li><li class="li"><p>Use the Repair Disk Permissions command in the Disk Utility application (located in <code>/Applications/Utilties</code>).</p></li></ul><p>There is also another way to check the owner and group information for a destination, if the directory is part of a system installation—you can examine information from the receipt that was created when Mac OS X was installed. For example, you could use the <code>lsbom</code> command (located in <code>/usr/bin</code>) to check the <code>.bom</code> file in the receipt file <code>Library/Receipts/BaseSystem.pkg</code>. You might use the following format for the command:</p><p><code>lsbom -p MUGsf /Library/Receipts/BaseSystem.pkg/Contents/Archive.bom</code></p><p><span class="content_text">Listing 1</span> shows the first few lines of output from running this command. For information on the <code>lsbom</code> flags used in this example, type <code>man lsbom</code> in a Terminal widow.</p><a name="//apple_ref/doc/uid/20001769-1042694-CFAJGDCD" title="Listing 1Output from lsbom command"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001769-1042694" title="Listing 1Output from lsbom command"></a><strong>Listing 1&nbsp;&nbsp;</strong>Output from lsbom command</p><div class="codesample"><table><tr><td scope="row"><pre>drwxrwxr-t  root admin      .<span></span></pre></td></tr><tr><td scope="row"><pre>drwxrwxr-x  root admin      ./Developer<span></span></pre></td></tr><tr><td scope="row"><pre>drwxrwxr-x  root admin      ./Developer/Applications<span></span></pre></td></tr><tr><td scope="row"><pre>drwxrwxr-x  root admin      ./Developer/Applications/Xcode.app<span></span></pre></td></tr><tr><td scope="row"><pre>drwxrwxr-x  root admin      ./Developer/Applications/Xcode.app/Contents<span></span></pre></td></tr><tr><td scope="row"><pre>-rw-rw-r--  root admin 13199./Developer/Applications/Xcode.app/Contents/Info.plist<span></span></pre></td></tr><tr><td scope="row"><pre>drwxrwxr-x  root admin      ./Developer/Applications/Xcode.app/Contents/MacOS<span></span></pre></td></tr><tr><td scope="row"><pre>-rwxrwxr-x  root admin 103072./Developer/Applications/Xcode.app/Contents/MacOS/Xcode<span></span></pre></td></tr><tr><td scope="row"><pre>-rw-rw-r--  root admin   8  ./Developer/Applications/Xcode.app/Contents/PkgInfo<span></span></pre></td></tr><tr><td scope="row"><pre>drwxrwxr-x  root admin      ./Developer/Applications/Xcode.app/Contents/Plug<span></span></pre></td></tr></table></div>	<p>You can also use the <code>grep</code> command to search through all the receipt files in <code>/Library/Receipts</code> for packages that have installed into a particular directory. For example, if you wanted to know which receipts recorded an installation into the <code>/usr/share</code> directory, you could type the following in Terminal:</p><p><code>grep -rs /usr/share /Library/Receipts</code></p><p><span class="content_text">Listing 2</span> shows the first few lines of output from running this command.</p><a name="//apple_ref/doc/uid/20001769-1042752-CFAGJJDE" title="Listing 2Output from grep command"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001769-1042752" title="Listing 2Output from grep command"></a><strong>Listing 2&nbsp;&nbsp;</strong>Output from grep command</p><div class="codesample"><table><tr><td scope="row"><pre>Binary file /Library/Receipts/AdditionalSpeechVoices.pkg/Contents/Archive.bom matches<span></span></pre></td></tr><tr><td scope="row"><pre>Binary file /Library/Receipts/AirPortSW.pkg/Contents/Archive.bom matches<span></span></pre></td></tr><tr><td scope="row"><pre>Binary file /Library/Receipts/Apr2004XcodeToolsExtras.pkg/Contents/Archive.bom matches<span></span></pre></td></tr><tr><td scope="row"><pre>Binary file /Library/Receipts/AsianLanguagesSupport.pkg/Contents/Archive.bom matches<span></span></pre></td></tr><tr><td scope="row"><pre>Binary file /Library/Receipts/BaseSystem.pkg/Contents/Archive.bom matches<span></span></pre></td></tr><tr><td scope="row"><pre>Binary file /Library/Receipts/BluetoothUpdate1.5.pkg/Contents/Archive.bom matches<span></span></pre></td></tr><tr><td scope="row"><pre>Binary file /Library/Receipts/BluetoothUpdate141.pkg/Contents/Archive.bom matches<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/20001769-1040506" title="Authorization for an Installation"></a><a name="//apple_ref/doc/uid/20001769-1040506-CIHBBCHG" title="Authorization for an Installation"></a><h2>Authorization for an Installation</h2><p>Installing a package or metapackage may result in actions that require root or administrator privileges, such as copying files into a <code>root</code>-owned directory or copying files that have root permission.</p><ul class="ul"><li class="li"><p>If the user performing the installation has the required privileges, no authorization is necessary.</p></li><li class="li"><p>If the user does not have the required privileges and the package is not set up to request authorization, the installation fails and displays a dialog that it cannot proceed.</p></li><li class="li"><p>If the user does not have the required privileges and the package <em>is</em> set up to request authorization, Installer displays an authentication dialog as the first step of the installation.</p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_49" title="Note"></a><p><strong>Note:</strong>&nbsp;Authorization is the act of granting a right or privilege, and authentication is the act of verifying the identity of the user. Authorization uses authentication as part of its process.</p></div><p>Recall that if no authorization is required, the files that Installer places on a user’s computer are owned by the user doing the installation. If authorization <em>is</em> required, the files are owned by the owner specified in the files archive within the package, regardless of the user and password supplied to complete the authentication.</p><p>You specify an authorization level for a package using the Authorization Action pop-up menu in the PackageMaker Info pane. The available choices are Root Authorization, Admin Authorization, and No Authorization Required. The user is prompted for authorization (through an authentication dialog) only when the requested authorization is higher than the user’s current authorization at installation time. <span class="content_text">Table 1</span> shows the possible permissions, settings, and outcomes.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_50" title="Important:"></a><p><strong>Important:</strong>&nbsp;Even if a package specifies root authorization, a user can authenticate by supplying the administrator password and can then install the software.</p><p></p></div><a name="//apple_ref/doc/uid/20001769-1038171-CIHIFADD" title="Table 1Possible permissions, authorization action settings, and results"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20001769-1038171" title="Table 1Possible permissions, authorization action settings, and results"></a><strong>Table 1&nbsp;&nbsp;</strong>Possible permissions, authorization action settings, and results</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>User logged in as</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Authorization action specified by package</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Privileges Used</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Result</p></th></tr><tr><td  scope="row"><p>Root</p></td><td ><p>(any)</p></td><td ><p>Root</p></td><td ><p>Authorization not required</p></td></tr><tr><td  scope="row"><p>Administrator</p></td><td ><p>Root Authorization</p></td><td ><p>Root</p></td><td ><p>Prompt for authorization</p></td></tr><tr><td  scope="row"><p>Administrator</p></td><td ><p>Admin Authorization</p></td><td ><p>Administrator</p></td><td ><p>Authorization not required</p></td></tr><tr><td  scope="row"><p>Administrator</p></td><td ><p>No Authorization Required</p></td><td ><p>Administrator</p></td><td ><p>Authorization not required</p></td></tr><tr><td  scope="row"><p>Regular user</p></td><td ><p>Root Authorization</p></td><td ><p>Root</p></td><td ><p>Prompt for authorization</p></td></tr><tr><td  scope="row"><p>Regular user</p></td><td ><p>Admin Authorization</p></td><td ><p>Administrator</p></td><td ><p>Prompt for authorization</p></td></tr><tr><td  scope="row"><p>Regular user</p></td><td ><p>No Authorization Required</p></td><td ><p>Logged-in user</p></td><td ><p>Authorization not required</p></td></tr></table></div><p>A metapackage requires authorization if any of its enclosed packages requires it; otherwise, a metapackage does not require authorization. A metapackage requires the highest authorization required by any enclosed package; it also requires the highest restart action of any enclosed package.</p><a name="//apple_ref/doc/uid/20001769-1038342" title="Choosing an Authorization Setting"></a><a name="//apple_ref/doc/uid/20001769-1038342-TPXREF4" title="Choosing an Authorization Setting"></a><h2>Choosing an Authorization Setting</h2><p>In general, choose an authorization setting that is the same or higher than the permissions of the files in the package and the specified destination for installing them. Authorization should be set to <code>root</code> if any component needs to be set to <code>root</code>.</p><p>In specific situations, your package should request root or administrator privileges:</p><ul class="ul"><li class="li"><p>The package contains files that will be installed in a system-level location, such as <code>/System</code>, <code>/usr</code>, <code>/bin</code>, and so on; for example, KEXTs (kernel extensions) reside in <code>/System/Library/Extensions</code>.</p></li><li class="li"><p>The package contains files that will be installed with root or administrator permissions; see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040759">“Setting File Ownership and Permissions”</a></span> for related information.</p></li></ul><p>If your package is relocatable, a user can attempt to install the software in any location (unless you’ve also specified Root Volume Only). Therefore, set an Authorization level that makes sense for your software. (Relocatable and Root Volume Only are options you set in the PackageMaker Info pane.)</p><div class="notebox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_51" title="Note"></a><p><strong>Note:</strong>&nbsp;It is not recommended that you use the scripts described in <span class="content_text"><a href="sd_pre_post_processing.html#//apple_ref/doc/uid/20001945-TPXREF8">“Modifying an Installation With Scripts”</a></span> to modify file permissions.</p></div><a name="//apple_ref/doc/uid/20001769-1038293" title="Things to Look Out For"></a><a name="//apple_ref/doc/uid/20001769-1038293-CFAJJJEH" title="Things to Look Out For"></a><h2>Things to Look Out For</h2><p>The following are some installation issues to be aware of.</p><a name="//apple_ref/doc/uid/20001769-1028787" title="Installing Can Change Permissions of a User&acirc;&#128;&#153;s Directories"></a><a name="//apple_ref/doc/uid/20001769-1028787-TPXREF3" title="Installing Can Change Permissions of a User&acirc;&#128;&#153;s Directories"></a><h3>Installing Can Change Permissions of a User’s Directories</h3><p>Suppose you want to create a package to install a utility in <code>/Applications/Utilities</code>, a directory that typically exists on all boot volumes. Further, suppose that in creating the package, the utility application resides in the directory <code>Package_contents/Applications/Utilities</code>, which has permissions settings of 750 (full access for owner, read and execute access for group, and no access for others), and you specify a default installation location of <code>/</code>.</p><p>If you select the Overwrite Permissions checkbox in the PackageMaker Info pane, Installer uses the permissions of directories in the package to modify the permissions of any identically named directories found on the installation volume. This may result in an error if your package does not require authorization (see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1038342">“Restrictive Permissions Can Cause an Installation to Fail.”</a></span></p><p>Even if your packages does require authorization, you may still have a problem. After installation, the user’s <code>/Applications/Utilities</code> directory has permissions of 750. If the directory previously had a more (or less) permissive setting, the user may be confused and unhappy when the directory can no longer be accessed in the same way as before.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001769-DontLinkElementID_52" title="Note"></a><p><strong>Note:</strong>&nbsp;The Overwrite Permissions checkbox might more accurately be titled Overwrite Existing Directory Permissions, because it affects only directories, not files.</p></div><p>This suggests you should select the Overwrite Permissions checkbox only if you are certain that you know better than the user what the directory permissions should be. One such example might be if you are doing net installations in an educational environment.</p><a name="//apple_ref/doc/uid/20001769-1029386" title="Installing Can Convert Symbolic Links to Actual Directories"></a><a name="//apple_ref/doc/uid/20001769-1029386-CFAHBFHC" title="Installing Can Convert Symbolic Links to Actual Directories"></a><h3>Installing Can Convert Symbolic Links to Actual Directories</h3><p>Again, suppose your package installs a utility application in <code>/Applications/Utilities</code>, a directory that typically exists on all boot volumes. In this scenario, suppose the user has replaced <code>Utilities</code> with a symbolic link (alias) to a <code>Utilities</code> directory on a different drive.</p><p>By default, Installer replaces links with directories, which again is likely to confuse (and annoy) the user, since it will “orphan” whatever the symbolic link points to. In this case, the user would end up with a <code>Utilities</code> directory containing just your utility, while their original <code>Utilities</code> directory has been set adrift.</p><p>PackageMaker currently has no user interface option to control how Installer handles symbolic links. However, there is a way you can change the default behavior so that Installer follows symbolic directory links, rather than replaces them. To do so, you edit the <code>Info.plist</code> file for the package and set the value for the <code>IFPkgFlagFollowLinks</code> key to Yes. For more information on making these kinds of changes, see <span class="content_text"><a href="sd_pkg_flags.html#//apple_ref/doc/uid/20001940-TPXREF3">“Examining and Modifying Property Lists.”</a></span></p><a name="//apple_ref/doc/uid/20001769-1029895" title="Restrictive Permissions Can Cause an Installation to Fail"></a><a name="//apple_ref/doc/uid/20001769-1029895-TPXREF4" title="Restrictive Permissions Can Cause an Installation to Fail"></a><h3>Restrictive Permissions Can Cause an Installation to Fail</h3><p>Suppose you set the permissions to a restrictive value. If you do not set the Authorization Action pop-up (in the PackageMaker Info pane) to require root or administrator authorization for the package, the installation may fail for a user who isn’t logged in with high enough permissions.</p><a name="//apple_ref/doc/uid/20001769-1030476" title="File Ownership Issues Can Cause Problems"></a><a name="//apple_ref/doc/uid/20001769-1030476-TPXREF5" title="File Ownership Issues Can Cause Problems"></a><h3>File Ownership Issues Can Cause Problems</h3><p>Suppose your package installs a framework in <code>/System/Library/Frameworks</code>, which has an owner of <code>root</code>. Suppose the <code>Frameworks</code> directory you use to create your package has you (<code>jbob3</code>) as the owner. You set the package to request root authorization so that it can be installed in the <code>Frameworks</code> directory.</p><p>Because the user is authorized as <code>root</code>, the Installer is also <code>root</code> and can install files using owner <code>jbob3</code>. This translates to some user ID number that is likely to be of little value to the current user. And in fact, the user may experience serious problems, as the system may not be able to function properly because it doesn’t own files it expects to own.</p><p>You can minimize problems of this nature by following the advice provided in <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-1040759">“Setting File Ownership and Permissions.”</a></span></p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_mpkg_anatomy.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_pkg_flags.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_permissions_author.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_permissions_author.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_permissions_author.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Aspects of the New Approach</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><A HREF="PowerBook-102.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="PowerBook-102.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="PowerBook-104.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><TABLE border="0" cellpadding="0" cellspacing="2" width="432">          <TR>        <TD><FONT face="Geneva,Helvetica,Arial" size="1">        <B>PATH<IMG src="images/space.gif" width="6" height="12"></B><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->         <B>></B> PowerBook Developer Note                </FONT></TD>        </TR>        </TABLE><BR><hr></DIV><H1 CLASS="H2-Heading2"><A NAME="pgfId-5092"></A>Aspects of the New Approach</H1><P CLASS="T1-Text1"><A NAME="pgfId-5093"></A>Some aspects of the ROM-in-RAM approach are apparent in the operation of the system. </P><P CLASS="T1-Text1"><A NAME="pgfId-5418"></A><A HREF="PowerBook-103.html#23107" CLASS="XRef">RAM Footprint</A></P><P CLASS="T1-Text1"><A NAME="pgfId-5423"></A><A HREF="PowerBook-103.html#40373" CLASS="XRef">Startup Disk Control Panel</A></P><P CLASS="T1-Text1"><A NAME="pgfId-5444"></A><A HREF="PowerBook-103.html#21744" CLASS="XRef">Memory Mapping</A></P><DIV><H2 CLASS="H3nb-Heading3"><A NAME="pgfId-5447"></A><A NAME="23107"></A>RAM Footprint<A NAME="marker-5446"></A></H2><P CLASS="T1-Text1"><A NAME="pgfId-5096"></A>The PowerBook computer has its Mac OS ROM image stored in RAM. The area of RAM that contains the Mac OS ROM image is excluded from the available memory space and is marked as read-only. This removes approximately 3 megabytes of RAM from availability for other uses. In effect, a system with 64 megabytes of RAM appears to have only 61 megabytes available. </P></DIV><DIV><H2 CLASS="H3nb-Heading3"><A NAME="pgfId-5097"></A><A NAME="40373"></A>Startup Disk Control Panel<A NAME="marker-6256"></A></H2><P CLASS="T1-Text1"><A NAME="pgfId-5098"></A>Setting the startup device from the Startup Disk control panel makes the changes to the boot process that are needed for the ROM-in-RAM approach. The Startup Disk control panel sets the Open Firmware's boot-device configuration variable by modifying the Open Firmware NV-RAM partition that contains the Open Firmware's configuration variables. </P><DIV><blockquote><p><b><A NAME="pgfId-18993"></A>IMPORTANT</b></p><P CLASS="I-Important"><A NAME="pgfId-5099"></A>The previous API for controlling the startup device selection, using <TT CLASS="cv">_GetDefaultStartup</TT> and<TT CLASS="cv"> _SetDefaultStartup</TT>, is not effective on computers that use the ROM-in-RAM approach.  </P></blockquote></DIV></DIV><DIV><H2 CLASS="H3nb-Heading3"><A NAME="pgfId-5108"></A><A NAME="21744"></A>Memory Mapping<A NAME="marker-5107"></A></H2><P CLASS="T1-Text1"><A NAME="pgfId-5109"></A>With the ROM-in-RAM approach, memory is not mapped one-to-one as it has been for previous PCI-based Macs. This could be a compatibility issue with some software. Software that assumes the logical and physical addresses are the same will fail, even when virtual memory is not on. Well-behaved software--that is, software that always calls the <TT CLASS="cv">LogicalToPhysical</TT> or <TT CLASS="cv">PrepareMemoryForIO</TT> functions when it needs a physical memory address--will continue to work. <A NAME="marker-6258"></A><A NAME="marker-6442"></A></P><P CLASS="T1-Text1"><A NAME="pgfId-6156"></A>For more information see Technical Q&amp;A DV 33, <I CLASS="italics">PrepareMemoryForIO for the New World</I>, available on Apple's technote website at </P><P CLASS="T1-Text1"><A NAME="pgfId-6196"></A><a href="http://developer.apple.com/qa/dv/dv33.html" CLASS="URL" target="_top">http://developer.apple.com/qa/dv/dv33.html</A></P></DIV><HR>&#169 1999-2000 Apple Computer, Inc. (Last Updated 15 February 00)<P><A HREF="PowerBook-102.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="PowerBook-102.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="PowerBook-104.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
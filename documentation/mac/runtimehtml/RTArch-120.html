<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Increasing Global Data Size</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING120></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="RTArch-119.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-121.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="RTArch-2.html"><B>Mac OS Runtime Architectures</B></A> / <BR><DD><A HREF="RTArch-115.html"><B>Chapter 10 - Classic 68K Runtime Architecture</B></A> / <A HREF="RTArch-119.html"><B>Bypassing MC68000 Addressing Limitations</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING120-0></A>
<H2><A NAME=MARKER-9-47></A>Increasing Global Data Size</H2>
 To permit your application to use more than 32 KB of global data, you have the following options:<P>
<UL>
<LI>Use the <CODE>-model farData </CODE>option when you compile C files that reference far data. See <A HREF=RTArch-125.html#MARKER-9-60>"Expanding Global Data and the Jump Table" (page 10-19)</A> for additional information.
<LI>Implement 32-bit references in assembly language when necessary. <P>
</UL>
 When linking files compiled with the <CODE>-model farData</CODE> option, ILink sorts data modules into near and far groups by default, placing all 16-bit referenced global data as close to A5 as possible and all 32-bit referenced data farther away. Thus, any data with a 16-bit reference is forced to within 32 KB of A5 if possible.<A NAME=MARKER-2-48></A><P>
 If you are using assembly language, you must explicitly code 32-bit references when you want to avoid fixing a data module to within 32 KB of A5. For the MC68000, you could write something like this:<P>
<PRE>
            IMPORT   LONGDATA:DATA
            MOVE.L   indirect(PC),D0   ; [4/7/9 clocks]offset -&gt; scratch 
                                       ; register
            MOVE.x   (A5,D0.L),dest    ; [ea: 3/6/7 clocks]access var
                                       ; (PEA,etc.)
            ...
indirect:   DC.L     LONGDATA;         ;  32-bit offset of data
</PRE>
 In code that is intended to run only on a 68020 microprocessor, you can do this:<P>
<PRE>
            MACHINE     MC68020
            IMPORT      LONGDATA:DATA
            MOVE.x      ((LONGDATA).L,A5),dest; move to destination
                                             ; (or PEA)
                                             ; [ea: 11/15/25 clocks]
</PRE>
 The 68020 code, while smaller, runs more slowly than the 68000 code shown above if you ignore the possible impact of the temporary register required (11 versus 7 clock cycles best case, 15 versus 13 clocks cache case, and 25 versus 16 clocks worst case). Also note that the operand addressing mode shown in the last instruction uses normal 68000 syntax; it does not, in this instance, represent far model syntax.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="RTArch-119.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-121.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="RTArch-3.html">&copy; Apple Computer, Inc.</A><br>11 MARCH 1997<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

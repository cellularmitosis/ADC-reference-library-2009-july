<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>iMovie Plug-ins (Legacy): iMovie Plug-ins</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="iMovie Plug-ins"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000848" title="iMovie Plug-ins"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30001281-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../../reference/LegacyTechnologies/idxAppleApplications-date.html#//apple_ref/doc/uid/TP30001281-TP30000470-TP30000900" target="_top">Apple Applications</a> &gt; <a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-DontLinkElementID_1">iMovie Plug-ins (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30000848-DontLinkElementID_1" title="iMovie Plug-ins"></a><h1><a name="//apple_ref/doc/uid/TP30000848-BBHCFJBI" title="iMovie Plug-ins"></a>iMovie Plug-ins</h1>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP30000848-DontLinkElementID_2" title="Important:"></a><p><strong>Important:</strong>&nbsp;The information in this document is obsolete and should not be used for new development.</p><p></p></div><p>In addition to the basic movie editing capabilities such as cutting, adding, and rearranging frames, iMovie provides access to a number of enhancements such as titles, effects, and transitions. For example, in the Titles pane, the user can enter title text and pick from various title treatments, as shown below.</p>
<br/><div><img src = "../art/imovie_titles01.jpg" alt = "image: ../art/imovie_titles01.jpg" ></div><br/>
<p>These enhancements are provided by plug-ins that use the plug-in architecture built into iMovie. For example, as shown in the figure above, the user might enter a movie title and select Flying Words. Clicking Preview would then cause iMovie to start the Flying Titles plug-in, which would then render the title frames in the iMovie monitor.</p>
<p>These enhancements are provided by plug-ins that use the plug-in architecture built into iMovie. For example, as shown in figure 1, the user might enter a movie title and select Flying Words. Clicking Preview would then cause iMovie to start the Flying Titles plug-in, which would then render the title frames in the iMovie monitor.</p>
<p>iMovie provides support for plug-ins as well as an application programming interface (API) that allows you to write your own plug-ins. The plug-in architecture allows you to take advantage of the built-in user interface elements such as directional buttons common to many plug-ins, and it allows you to add UI elements required by your plug-in.</p>
<p>At startup, iMovie finds and loads all valid plug-ins. After successfully loading a plug-in, iMovie communicates with it only when necessary. This communication starts when the user selects a service from the menu in the Titles, Transitions, or Effects pane .</p>
<p>From the perspective of the plug-in, this communication typically takes place during a session that includes three phases: initialization, processing, and termination. There can be multiple instances of a single plug-in (for example, rendering instances, in-line proxies in the iMovie that can be ”played through”, and preview instances). All three phases are performed for each plug-in instance.</p>
<p>Note that you can attach data to the instance pointer using the API, but be very careful about GLOBAL data because of re-entrancy issues (several instances may start before any of them finish).</p>
<p>The following sections provide details of how you write a plug-in to communicate properly with iMovie.</p>

<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-BBHJAIIB">Plug-in Overview</a>
				
			<br/>
			
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-BBHCBBCC">Loading plug-ins</a>
				
			<br/>
			
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-BBHHDCBE">Initialization Phase</a>
				
			<br/>
			
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-BBHHCJHH">Processing Phase</a>
				
			<br/>
			
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-TPXREF111">Termination phase</a>
				
			<br/>
			
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-TPXREF112">Title Plug-ins</a>
				
			<br/>
			
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-TPXREF117">Transition Plug-ins</a>
				
			<br/>
			
        
			
			
				<a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-TPXREF119">Effect Plug-ins</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000848-13898" title="Plug-in Overview"></a><a name="//apple_ref/doc/uid/TP30000848-BBHJAIIB" title="Plug-in Overview"></a><h2>Plug-in Overview</h2>
<p>A plug-in must be a bundle or shared library with a single entry point, which should be compiled as main. The main entry prototype is <code>HYPluginMainProcPtr</code>:</p>
<a name="//apple_ref/doc/uid/TP30000848-66993" title="Listing 1-1Main entry prototype"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF102" title="Listing 1-1Main entry prototype"></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Main entry prototype</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef HYPluginResult (*HYPluginMainProcPtr) (short which, HYPluginParams  *params);<span></span></pre></td></tr></table></div>
<p>iMovie passes the plug-in a selector in the selector field of the <code>HYPluginParams</code> structure. The plug-in must then perform the appropriate action for that selector. Three selectors of particular note are <code>kPlugInitialize</code>, <code>kPlugDoFrame</code>, and <code>kPlugTerminate</code>, which correspond respectively to the initialization, processing, and termination phases introduced above.</p>
<p>The <code>which</code> parameter identifies the item the user has chosen by name from the menu. Menu name functionality is described in detail in the section <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-13903">“Loading plug-ins.”</a></span></p>
<p>iMovie creates an opaque pointer, <code>HYPluginInstance</code>, that it uses to track the plug-in. If, for example, the user has created several simultaneously rendering effects based on a single plug-in, iMovie uses the <code>HYPluginInstance</code> to differentiate between the plug-in instances rendering those effects. The <code>HYPluginInstance</code> may be passed to the plug-in. The plug-in is expected to preserve it unchanged and possibly to return it in some of the API calls.</p>
<p></p>
<a name="//apple_ref/doc/uid/TP30000848-13903" title="Loading plug-ins"></a><a name="//apple_ref/doc/uid/TP30000848-BBHCBBCC" title="Loading plug-ins"></a><h2>Loading plug-ins</h2>
<p>When iMovie starts, it looks in the <code>iMovie Plugins</code> folder for plug-in bundles or files, as identified by their creator, <code>'Hway'</code> and type:</p>
<ul class="ul"><li class="li"><p><code>'titl'</code>, for title plug-ins</p></li>
<li class="li"><p><code>'trans'</code>, for transition plug-ins</p></li>
<li class="li"><p><code>'filt'</code>, for effects plug-ins</p></li></ul>
<p>Constants for these creator and type values are as follows:</p>
<ul class="simple"><li><p><code><!--a  -->kPluginFileCreator<!--/a--></code>	
<code>' Hway'</code></p></li>
<li><p><code><!--a  -->kPluginTitleFileType<!--/a--></code>		
<code>'titl'</code></p></li>
<li><p><code><!--a  -->kPluginTransitionFileType<!--/a--></code>		
<code>'tran'</code></p></li>
<li><p><code><!--a  -->kPluginFilterFileType<!--/a--></code>		
<code>'fltr'</code></p></li></ul>
<p>When your plug-in is identified by its type and creator, it must check its compatibility with the current version of iMovie. If it is not compatible, it must return an error code, upon receipt of which, iMovie will discontinue loading the plug-in. For further version information, see the section <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-66696">“API Release Versions.”</a></span></p>
<p>If the plug-in reports itself to be compatible, it must pass iMovie a string with one or more menu names to be presented in the menus to identify the services your plug-in can provide for the user. The name string is in <code>KResMenuNames</code>, a STR# resource with ID 16000.</p>
<p>Note that the ability to use multiple names allows you to provide multiple services within a single plug-in. If your plug-in takes advantage of this facility, it must be able to recognize any of its names and perform the service associated with that name.</p>
<p>As part of the calling sequence, the index of the selected menu name in the STR# resource is passed to the plug-in in the which parameter. The plug-in uses this index to identify and perform the appropriate service. For example, the services Flying Letters and Flying Words, shown in the menu in figure 1, are provided by the Flying Titles plug-in. These two services, then, correspond to indexes of 0, and 1, and the menu names for those services are retrieved from the STR# resource using those resource indices.</p>
<p>A STR# resource of ID 18000, identified by the constant <code><!--a  -->kResGroupNames<!--/a--></code>, must be created to provide for group names, to allow the future possibility of grouping related menu names into sub-menus. Although group names are not currently used, it is recommended that your plug-in provide this string. For example, you might want to provide a short version of your company name.</p>
<p>A STR# resource of ID 15000, identified by the constant <code><!--a  -->kResProgrammerNames<!--/a--></code>, must be created to allow for a file to be associated with the specific plug-in servicethat created it.  See <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-13917">“Processing Phase”</a></span>for more detail.</p>
<a name="//apple_ref/doc/uid/TP30000848-52410" title="Initialization Phase"></a><a name="//apple_ref/doc/uid/TP30000848-BBHHDCBE" title="Initialization Phase"></a><h2>Initialization Phase</h2>
<p>Much of the communication between iMovie and your plug-in during the initialization phase is accomplished by passing settings information in a predefined <em>HYPluginGetInfo</em> structure. See <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-59895">“The HYPluginGetInfo Data Structure,”</a></span> for more detail on this structure.</p>
<p>When the user selects a service from the menu in the Titles, Transitions, or Effects pane, iMovie calls the plug-in with the kPlugGetInfo selector. It is assumed that the plug-in has set the information in the HYPluginGetInfo data structure identified by HYPluginParams.getInfo. If, for some reason, the plug-in cannot run, it can return an error code and/or fill in 0 for the framesToBeRendered field of the HYPluginGetInfo structure. </p>
<p>A plug-in informs iMovie as to what type it is by setting HYPluginGetInfo.pluginType to one of the type constants shown in <span class="content_text">Table 1-1</span>.</p>
<a name="//apple_ref/doc/uid/TP30000848-53112" title="Table 1-1Valid plug-in type constants"></a><a name="//apple_ref/doc/uid/TP30000848-BIHDHFFD" title="Table 1-1Valid plug-in type constants"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Valid plug-in type constants</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Constant name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><code><!--a  -->kPluginUnknownType<!--/a--></code></p></td>
<td ><p>Value: 0. Default value—no valid plug-in available.</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginTitleType<!--/a--></code></p></td>
<td ><p>Value: 101. A title plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginFilterType<!--/a--></code></p></td>
<td ><p>An effect plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginTransitionBetweenType<!--/a--></code></p></td>
<td ><p>A transition performed between two clips</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginTransitionBeforeType<!--/a--></code></p></td>
<td ><p>A transition performed before the current clip</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginTransitionAfterType<!--/a--></code></p></td>
<td ><p>A transition performed after the current clip</p></td>
</tr>

</table></div>
<p>A transition is considered to be one of three types: before, between, or after. A between-type transition, the most common type, is displayed between two clips. An example of a before-type transition is a fade-in; it is displayed before the clip it fades in (and doesn’t require another clip in front of it). A fade-out is an example of an after-type transition.</p>
<p>iMovie then calls the plug-in with the <code><!--a  -->kPlugInitialize<!--/a--></code> selector. At this time the plug-in should set up any required data structures. The plug-in can attach arbitrary data to the HYPluginParams structure using the pointer in that structure’s clientData field. That pointer is then returned with each subsequent call. The plug-in is responsible for destroying such data during the termination phase of the session.</p>
<a name="//apple_ref/doc/uid/TP30000848-59516" title="Enabling User Interface Elements"></a><a name="//apple_ref/doc/uid/TP30000848-BBHCCBEG" title="Enabling User Interface Elements"></a><h3>Enabling User Interface Elements</h3>
<p>Part of the initialization phase is to set the default state of the user interface (UI) elements in the plug-in pane. The plug-in sets plug-in choice flags (<em>HYPluginGetInfo.pluginFlags</em>) to specify user interface elements to be enabled to accept user data, settings, and selections. Plug-in choice flags applicable to the Title, Transition, and Effects panes are shown in <span class="content_text">Table 1-2</span>. (Flags for UI elements specific to a plug-in type are described below in a section for that plug-in type.)</p><a name="//apple_ref/doc/uid/TP30000848-59528" title="Table 1-2Plug-in choice flag constants"></a><a name="//apple_ref/doc/uid/TP30000848-BIHGGCJH" title="Table 1-2Plug-in choice flag constants"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong>Plug-in choice flag constants</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Constant name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><code><!--a  -->kPluginChoiceVertical<!--/a--></code></p></td>
<td ><p>Value: <code>1L</code>. Enable up and down buttons</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginChoiceHorizontal<!--/a--></code></p></td>
<td ><p>Value: <code>2L</code>. Enable left and right buttons</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginChoiceSpeed<!--/a--></code></p></td>
<td ><p>Value: <code>4L</code>. Enable speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginChoiceAll<!--/a--></code></p></td>
<td ><p>Value: <code>7L</code>. Enable up, down, left, right buttons and speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->PLUGIN_COMBO_VERTICAL<!--/a--></code></p></td>
<td ><p>Value: <code>5L</code>. Enable up, down buttons and speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->PLUGIN_COMBO_HORIZONTAL<!--/a--></code></p></td>
<td ><p>Value: <code>6L</code>. Enable left, right buttons and speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->PLUGIN_COMBO_NOMOTION<!--/a--></code></p></td>
<td ><p></p></td>
</tr>
<tr>
<td  scope="row"><p><code><!--a  -->kPluginChoiceXYLocation<!--/a--></code></p></td>
<td ><p>Value: <code>1024L</code>. Enable X,Y coordinate selection.</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000848-59661" title="Directional Arrows"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF108" title="Directional Arrows"></a><h4>Directional Arrows</h4>
<p>The arrows in the directional button cluster on the left side in the Title, Transition, and Effects panes are enabled using the vertical and horizontal plug-in choice flags listed in <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-59528">Table 1-2</a></span>. They can be ORed together to achieve the desired combinations.</p>
<a name="//apple_ref/doc/uid/TP30000848-59675" title="X,Y Location"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF109" title="X,Y Location"></a><h4>X,Y Location</h4>
<p>If the plug-in enables the XYLocation flag, the iMovie small preview rectangle provides a cross-hair that the user can drag to specify an XY location. This feature was introduced in iMovie 2.1.1 and is ignored by prior versions</p>
<a name="//apple_ref/doc/uid/TP30000848-13917" title="Processing Phase"></a><a name="//apple_ref/doc/uid/TP30000848-BBHHCJHH" title="Processing Phase"></a><h2>Processing Phase</h2>
<p>The processing phase is when the plug-in does most of its work. iMovie controls the processing phase through a loop that calls the plug-in as many times as necessary, as specified by the value of <em>HYPluginGetInfo.framesToBeRendered</em>. These calls are made with the <code><!--a  -->kPlugDoFrame<!--/a--></code> selector, and with each call <em>HYPluginParams.renderFrame</em> is updated. The value of the first frame in the movie,  <em>HYPluginParams.startFrame</em>, is expressed in global frame numbers. The value of <em>renderFrame</em> is a zero-based index relative to startFrame. This approach allows the plug-in to request frames relative to the current frame using the callbacks (for example, the previous frame would be <em>renderFrame</em>-1. The value of <em>HYPluginParams.frameCount</em> gives the plug-in the total number of frames to render. Thus, <em>renderFrame</em> can range from <code>0</code> to <em>frameCount</em>.</p>
<p>The plug-in can call back into iMovie using a variety of procedures that are provided through the <em>HYPluginParams.procs</em> pointer. These include procedures for drawing, working with frames, clips, and movies, and so forth. Memory allocation should be done through these procedure pointers, so that iMovie can keep track of plug-in memory use. See the HYPluginProcs.h header file for the details and prototypes.</p>
<a name="//apple_ref/doc/uid/TP30000848-59709" title="Drawing"></a><a name="//apple_ref/doc/uid/TP30000848-BBHFGIEC" title="Drawing"></a><h3>Drawing</h3>
<p>With each <code><!--a  -->kPlugDoFrame<!--/a--></code> call, iMovie passes a pointer (in <em>HYPluginParams.frame</em>) to a gWorld that contains the current (uncompressed) frame of video. The plug-in performs its service and draws into the gWorld before returning. For example, an effect might use the <code><!--a-->GetFrame<!--/a--></code> callback to get the pixels for its starting frame, perform its calculations, and then draw into the gWorld before returning. In the less complicated example of a title, for which only the current frame is of interest, the plug-in might simply compute the X,Y location based on the frame number, and draw some text into the gWorld.</p>
<p>It is important to note that the plug-in may be asked to draw in an arbitrary GWorld with a rectangle. Consequently, the scale of text is not fixed, but should be computed relative to the size of the rectangle. For example, the plug-in may be called to preview its results in the large video window, in a small preview window, or even in a thumbnail during rendering. The plug-in must also not assume that the rectangle passed starts at 0,0</p>
<p>Any frame may be drawn at any time; the plug-in must be able to draw frame N without having drawn frame N-1. This is so that arrow keys may be used to go forward and back in Preview mode, for example.</p>
<p>The plug-in can call <code><!--a-->GetFrame<!--/a--></code> with arbitrary frame numbers relative to startFrame, but the requested frames may or may not exist. </p>
<p>iMovie creates an opaque pointer, <em>HYFrameCookie</em>, to keep track of a frame as it goes to and from the plug-in. The plug-in is expected to preserve this pointer unchanged and possibly to return it in some of the API calls.</p>
<a name="//apple_ref/doc/uid/TP30000848-59776" title="Working With Clips"></a><a name="//apple_ref/doc/uid/TP30000848-BBHJDFGA" title="Working With Clips"></a><h3>Working With Clips</h3>
<p>iMovie passes back the <em>HYPluginClipInfo</em> structure when the plug-in makes the <code><!--a-->GetClipInfo<!--/a--></code> callback. This structure allows the plug-in to determine settings for a clip such as the clip name, its audio volume, and whether it has a fade-in or fade-out. The plug-in can change some  of such settings and then pass them back in with <code><!--a-->SetClipInfo<!--/a--></code>.</p>
<p>The <em>HY2PluginClipInfo</em> structure was introduced in iMovie version 2.0 to extend <em>HYPluginClipInfo</em>. This structure contains settings for reverse play, frame speed, and length (in frames) of a fade-in or fade-out. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000848-DontLinkElementID_3" title="Note"></a><p><strong>Note:</strong>&nbsp;There is currently no reliable way for the plug-in to find another whole clip.</p></div>
<a name="//apple_ref/doc/uid/TP30000848-59841" title="Working With Thumbnails"></a><a name="//apple_ref/doc/uid/TP30000848-BBHDDDGA" title="Working With Thumbnails"></a><h3>Working With Thumbnails</h3>
<p>The plug-in should set <em>HYPluginGetInfo.bestThumbOffset</em> to specify which frame is to be used for a thumbnail. Consider, for example, a title that scrolls on-screen; the first frame would contain no visible text. One simple approach might be to set <em>bestThumbOffset</em> to the middle frame (derived from <em>HYPluginGetInfo.frameCount</em>).</p>
<a name="//apple_ref/doc/uid/TP30000848-59876" title="Working With Saved Files"></a><a name="//apple_ref/doc/uid/TP30000848-BBHGEIAF" title="Working With Saved Files"></a><h3>Working With Saved Files</h3>
<p>The plug-in must specify a programmer name (as described above in the section “Initialization Phase”) to allow iMovie to associate the plug-in with a rendered file (title, transition, filter) created by that plug-in. These names are stored in the iMovie project file and are also loaded into the record stored in the menu so the application can select the proper plug-in if the user selects an existing rendered file.</p>
<a name="//apple_ref/doc/uid/TP30000848-59895" title="The HYPluginGetInfo Data Structure"></a><a name="//apple_ref/doc/uid/TP30000848-BBHFCFBC" title="The HYPluginGetInfo Data Structure"></a><h3>The HYPluginGetInfo Data Structure</h3>
<p>The plug-in provides setup information to iMovie primarily through the HYPluginGetInfo data structure, which includes the fields shown in <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-59907">Table 1-3</a></span>.</p><a name="//apple_ref/doc/uid/TP30000848-59907" title="Table 1-3Fields in HYPluginGetInfo "></a><a name="//apple_ref/doc/uid/TP30000848-BIHDJDAG" title="Table 1-3Fields in HYPluginGetInfo "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-3&nbsp;&nbsp;</strong>Fields in HYPluginGetInfo </caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field Name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><em>pluginType</em></p></td>
<td ><p>Either a transition or a title</p></td>
</tr>
<tr>
<td  scope="row"><p><em>titleType</em></p></td>
<td ><p>Either single-pair, multi-pair, or block</p></td>
</tr>
<tr>
<td  scope="row"><p><em>pluginFlags</em></p></td>
<td ><p>Settings for speed, direction, font, color, etc.</p></td>
</tr>
<tr>
<td  scope="row"><p><em>framesToBeRendered</em></p></td>
<td ><p>Plug-in returns to iMovie based on settings in UI</p></td>
</tr>
<tr>
<td  scope="row"><p><em>takeFromClipBefore</em></p></td>
<td ><p>Frames to be taken from previous clip for rendering</p></td>
</tr>
<tr>
<td  scope="row"><p><em>takeFromClipAfter</em></p></td>
<td ><p>Frames to be taken from next clip for rendering</p></td>
</tr>
<tr>
<td  scope="row"><p><em>minSpeedFrames</em></p></td>
<td ><p>Left endpoint of Speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>maxSpeedFrames</em></p></td>
<td ><p>Right endpoint of Speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>mustTakeFromSingleClips</em></p></td>
<td ><p>Allow/disallow consuming frames of multiple clips</p></td>
</tr>
<tr>
<td  scope="row"><p><em>bestThumbOffset</em></p></td>
<td ><p>Best frame for making thumbnail</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultColor</em></p></td>
<td ><p>For when color choice is not supported</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultDirection</em></p></td>
<td ><p>Default direction (up, down, left, right)</p></td>
</tr>
<tr>
<td  scope="row"><p><em>justify</em></p></td>
<td ><p>Justification for current direction settings</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultFontNum</em></p></td>
<td ><p>Default font</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultFontSize</em></p></td>
<td ><p>Not currently used</p></td>
</tr>

</table></div>
<p>The size of this structure is fixed. The functionality of the structure has been extended through the addition of the <code><!--a-->HY2PluginGetInfo<!--/a--></code> for version 2 of the API (as shown in <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-81833">Table 1-4</a></span>), <code><!--a-->HY3PluginGetInfo<!--/a--></code> for version 3 of the API, as shown in <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-60252">Table 1-5</a></span>, and the <code><!--a-->HY4PluginGetInfo<!--/a--></code> for version 4 of the API, as shown in <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-81804">Table 1-6</a></span>. This approach allows existing plug-ins to continue to work without limiting the access of newer plug-ins to new features.</p><a name="//apple_ref/doc/uid/TP30000848-81833" title="Table 1-4Fields in HY2PluginGetInfo (Corresponds to version 2 of the iMovie API.)"></a><a name="//apple_ref/doc/uid/TP30000848-BIHEFCCA" title="Table 1-4Fields in HY2PluginGetInfo (Corresponds to version 2 of the iMovie API.)"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-4&nbsp;&nbsp;</strong>Fields in HY2PluginGetInfo (Corresponds to version 2 of the iMovie API.)</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><em>group</em></p></td>
<td ><p>Group name (128 characters maximum)</p></td>
</tr>
<tr>
<td  scope="row"><p><em>filterSliders</em>[]</p></td>
<td ><p>Structures for effect-related sliders (currently, a maximum of 3)</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultFadeInFrames</em></p></td>
<td ><p>Default number of frames over which to ease in an effect</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultFadeOutFrames</em></p></td>
<td ><p>Default number of frames over which to ease out an effect</p></td>
</tr>
<tr>
<td  scope="row"><p><em>minHangFrames</em></p></td>
<td ><p>Left endpoint of Pause slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>maxHangFrames</em></p></td>
<td ><p>Right endpoint of Pause slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultFontSizeScale</em></p></td>
<td ><p>From 0.0 to 1.0. (See note, below.)</p></td>
</tr>
<tr>
<td  scope="row"><p><em>selectedFrames</em></p></td>
<td ><p>Number of frames selected for an effect</p></td>
</tr>
<tr>
<td  scope="row"><p><em>speedFrames</em></p></td>
<td ><p>Plug-in returns to iMovie based on user’s choices</p></td>
</tr>
<tr>
<td  scope="row"><p><em>hangFrames</em></p></td>
<td ><p>Plug-in returns to iMovie based on user’s choices</p></td>
</tr>
<tr>
<td  scope="row"><p><em>baseMemoryNeeded</em></p></td>
<td ><p>Amount ofRAM allocated during initialization phase</p></td>
</tr>

</table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP30000848-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;The value of <em>defaultFontSizeScale</em> represents the value of the <em>TitleFontSize</em> slider, not the actual scale factor. The plug-in must interpret this value in terms of actual font size.</p></div><a name="//apple_ref/doc/uid/TP30000848-60252" title="Table 1-5Fields in HY3PluginGetInfo (Corresponds to version 3 of the iMovie API.)"></a><a name="//apple_ref/doc/uid/TP30000848-BIHIIECI" title="Table 1-5Fields in HY3PluginGetInfo (Corresponds to version 3 of the iMovie API.)"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-5&nbsp;&nbsp;</strong>Fields in HY3PluginGetInfo (Corresponds to version 3 of the iMovie API.)</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><em>defaultX</em></p></td>
<td ><p>Starting value on X axis</p></td>
</tr>
<tr>
<td  scope="row"><p><em>defaultY</em></p></td>
<td ><p>Starting value on Y axis</p></td>
</tr>
<tr>
<td  scope="row"><p><em>userX</em></p></td>
<td ><p>User-selectedvalue on X axis</p></td>
</tr>
<tr>
<td  scope="row"><p><em>userY</em></p></td>
<td ><p>User-selected value on Y axis</p></td>
</tr>
<tr>
<td  scope="row"><p><em>fileInfo</em></p></td>
<td ><p>FSSpec of user-selected file</p></td>
</tr>
<tr>
<td  scope="row"><p><em>buttonTitle</em></p></td>
<td ><p>31-character title of custom button</p></td>
</tr>

</table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP30000848-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;The X and Y values are coordinates in a 640 by 480 DV frame.</p></div><a name="//apple_ref/doc/uid/TP30000848-81804" title="Table 1-6Fields in HY4PluginGetInfo (Corresponds to version 4 of the iMovie API.)"></a><a name="//apple_ref/doc/uid/TP30000848-BIHEFHFH" title="Table 1-6Fields in HY4PluginGetInfo (Corresponds to version 4 of the iMovie API.)"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-6&nbsp;&nbsp;</strong>Fields in HY4PluginGetInfo (Corresponds to version 4 of the iMovie API.)</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><em>titleSliders</em></p></td>
<td ><p>Array of title slider information</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000848-64869" title="Video Standards: PAL versus NTSC"></a><a name="//apple_ref/doc/uid/TP30000848-BBHJAFDI" title="Video Standards: PAL versus NTSC"></a><h3>Video Standards: PAL versus NTSC</h3>
<p>Constants are defined in <code>HYRefDigitalVideoStandard</code> to differentiate between PAL and NTSC video streams: <code><!--a  -->kRefNTSCStandard<!--/a--></code>, and <code><!--a  -->kRefPALStandard<!--/a--></code> (as well as <code><!--a  -->kRefUnknownStandard<!--/a--></code>). The plug-in can use either one, but cannot mix them within a project. </p>
<a name="//apple_ref/doc/uid/TP30000848-64829" title="Video Compression Quality"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF110" title="Video Compression Quality"></a><h3>Video Compression Quality</h3>
<p>The DV standard calls for only a single quality level in compressed form, but DV can be decompressed into lower quality (faster) or higher quality (better) video. A plug-in might, for example, drive a small preview at lower quality to improve performance. <code>HYRefDVQuality</code> provides three constants used by some API calls to ask for different quality levels: <code><!--a  -->kDVLowQuality<!--/a--></code>, <code><!--a  -->kDVHighQuality<!--/a--></code>, <code>kDVHighQualitySingleField</code>.</p>
<a name="//apple_ref/doc/uid/TP30000848-66696" title="API Release Versions"></a><a name="//apple_ref/doc/uid/TP30000848-BIHEJJJF" title="API Release Versions"></a><h3>API Release Versions</h3>
<p>Extensions of the iMovie API have been designed so that all released versions of the iMovie API are backward and forward compatible. A plug-in should be able to claim to be built against version 1 of the interface, and adjust at runtime for changes in the API.</p>
<p>To enable this degree of flexibility, iMovie does not enforce version compatibility; the plug-in must determine whether it can run in a given version of iMovie. To this end, iMovie defines several version number constants (shown in <span class="content_text">Table 1-7</span>), and it passes its version down to the plug-in.</p><a name="//apple_ref/doc/uid/TP30000848-81637" title="Table 1-7iMovie application and API version designations"></a><a name="//apple_ref/doc/uid/TP30000848-BIHHEGAJ" title="Table 1-7iMovie application and API version designations"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-7&nbsp;&nbsp;</strong>iMovie application and API version designations</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>iMovie</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>API</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Constant</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th>
</tr>


<tr>
<td  scope="row"><p>1.0</p></td>
<td ><p>1</p></td>
<td ><p><code><!--a  -->kPluginInterfaceVersion1<!--/a--></code></p></td>
<td ><p><code><!--a  -->1<!--/a--></code></p></td>
</tr>
<tr>
<td  scope="row"><p>2.0</p></td>
<td ><p>2</p></td>
<td ><p><code><!--a  -->kPluginInterfaceVersion2<!--/a--></code></p><p><code><!--a  -->kPluginInterfaceLastVersion<!--/a--></code></p></td>
<td ><p><code><!--a  -->2<!--/a--></code></p><p><code><!--a  -->2<!--/a--></code></p></td>
</tr>
<tr>
<td  scope="row"><p>2.1.1</p></td>
<td ><p>3</p></td>
<td ><p><code><!--a  -->kPluginInterfaceVersion<!--/a--></code></p><p><code><!--a  -->kPluginInterfaceVersionString<!--/a--></code></p></td>
<td ><p><code><!--a  -->3<!--/a--></code></p><p><code><!--a  -->3.0<!--/a--></code></p></td>
</tr>
<tr>
<td  scope="row"><p>3.0.1</p></td>
<td ><p>4</p></td>
<td ><p><code><!--a  -->kPluginInterfaceVersion4<!--/a--></code></p><p><code><!--a  -->kPluginInterfaceLastVersion<!--/a--></code></p><p><code><!--a  -->kPluginInterfaceVersion<!--/a--></code></p><p><code><!--a  -->kPluginInterfaceVersionString<!--/a--></code></p></td>
<td ><p><code><!--a  -->4<!--/a--></code></p><p><code><!--a  -->3<!--/a--></code></p><p><code><!--a  -->4<!--/a--></code></p><p><code><!--a  -->4.0<!--/a--></code></p></td>
</tr>

</table></div>
<p>In case of a version mismatch, the application can return one of two error codes: <code><!--a  -->kPluginAppIsTooOld<!--/a--></code> or <code><!--a  -->kPluginAppIsTooNew<!--/a--></code>. In either case, the plug-in won’t load.</p>
<a name="//apple_ref/doc/uid/TP30000848-64370" title="Termination phase"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF111" title="Termination phase"></a><h2>Termination phase</h2>
<p>The termination phase begins when iMovie passes in the <code><!--a  -->kPlugTerminate<!--/a--></code> selector for the plug-in instance. At this point it is assumed that the plug-in has completed all of its processing for this instance. The plug-in should perform all necessary clean-up and return the appropriate result code.</p>
<a name="//apple_ref/doc/uid/TP30000848-64387" title="Result Codes"></a><a name="//apple_ref/doc/uid/TP30000848-BBHHIGDD" title="Result Codes"></a><h3>Result Codes</h3>
<p><span class="content_text">Table 1-8</span> lists the result codes (defined in <code>HYPluginResult</code>) that the plug-in can return, or that might be returned to the plug-in by many of the API procedures.</p><a name="//apple_ref/doc/uid/TP30000848-64403" title="Table 1-8Result codes in iMovie"></a><a name="//apple_ref/doc/uid/TP30000848-BIHHIJGG" title="Table 1-8Result codes in iMovie"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-8&nbsp;&nbsp;</strong>Result codes in iMovie</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Result code</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Returned by</p></th>
</tr>


<tr>
<td  scope="row"><p><em>kPluginOK</em></p></td>
<td ><p>Value: 0. Operation completed successfully.</p></td>
<td ><p>iMovie, plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginFinished</em></p></td>
<td ><p>Operation terminated unsuccessfully</p></td>
<td ><p>iMovie, plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginBadParams</em></p></td>
<td ><p>One or more parameters received were invalid</p></td>
<td ><p>iMovie, plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginOutOfMemory</em></p></td>
<td ><p>Plug-in couldn’t get necessary RAM</p></td>
<td ><p>iMovie</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginOutOfDiskSpace</em></p></td>
<td ><p>Target disk doesn’t have room to write a file</p></td>
<td ><p>iMovie</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginFailed</em></p></td>
<td ><p>Operation terminated unsuccessfully</p></td>
<td ><p>plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginCantGetNeededFrame</em></p></td>
<td ><p>Plug-in couldn’t obtain a frame required for its service</p></td>
<td ><p>plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginUnimplemented</em></p></td>
<td ><p>Selected service does not exist</p></td>
<td ><p>iMovie</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginTryAgainLater</em></p></td>
<td ><p>Selected service is not currently available</p></td>
<td ><p>iMovie, plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginAppIsTooOld</em></p></td>
<td ><p>Plug-in incompatible with older iMovie</p></td>
<td ><p>plug-in</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginAppIsTooNew</em></p></td>
<td ><p>iMovie incompatible with older plug-in</p></td>
<td ><p>plug-in</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000848-63620" title="Title Plug-ins"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF112" title="Title Plug-ins"></a><h2>Title Plug-ins</h2>
<p>A title plug-in identifies itself as such to iMovie by setting <em>HYPluginGetInfo.pluginType</em> to <code><!--a  -->kPluginTitleType<!--/a--></code>. It then further identifies itself by setting <em>HYPluginGetInfo.titleType</em> to cause the UI in iMovie to adjust to provide field editors for one text pair (a title string and subtitle string), multiple text pairs, or a block of text. The following values are valid: <code><!--a  -->kTitleUnknown<!--/a--></code> (value 1), <code><!--a  -->kTitleSingleTextPair<!--/a--></code>, <code><!--a  -->kTitleMultiTextPair<!--/a--></code>, <code><!--a  -->kTitleTextBlock<!--/a--></code>.</p>
<p>When a plug-in calls <code><!--a-->GetTitleInfo()<!--/a--></code> to ask iMovie for information about a title, iMovie returns an <em>HYPluginTitlePair</em> structure that represents the text of a title pair (a title and subtitle string):</p>
<a name="//apple_ref/doc/uid/TP30000848-67006" title="Listing 1-2HYPluginTitlePair structure"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF103" title="Listing 1-2HYPluginTitlePair structure"></a><p class="codesample"><strong>Listing 1-2&nbsp;&nbsp;</strong>HYPluginTitlePair structure</p>
<div class="codesample"><table><tr><td scope="row"><pre>    typedef struct _HYPluginTitlePair {<span></span></pre></td></tr><tr><td scope="row"><pre>        char *title;<span></span></pre></td></tr><tr><td scope="row"><pre>        char *subTitle;<span></span></pre></td></tr><tr><td scope="row"><pre>    } HYPluginTitlePair;<span></span></pre></td></tr></table></div>
<p>This structure may be NULL if both the title and subtitle are empty.</p>
<a name="//apple_ref/doc/uid/TP30000848-63707" title="Enabling User Interface Elements"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF113" title="Enabling User Interface Elements"></a><h3>Enabling User Interface Elements</h3>
<p>A title plug-in sets plug-in choice flags (<em>HYPluginGetInfo.pluginFlags</em>) to specify user interface elements to be enabled to accept user data, settings, and selections. Plug-in choice flags applicable to the Title pane are shown in <span class="content_text">Table 1-9</span>.</p><a name="//apple_ref/doc/uid/TP30000848-63719" title="Table 1-9Ttile pane plug-in choice flag constants"></a><a name="//apple_ref/doc/uid/TP30000848-BIHIEADG" title="Table 1-9Ttile pane plug-in choice flag constants"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-9&nbsp;&nbsp;</strong>Ttile pane plug-in choice flag constants</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Constant name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><em>kTitleChoiceSize</em></p></td>
<td ><p>Value <code>8L</code>. Enable font size slider.</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kTitleChoiceFont</em></p></td>
<td ><p>Value <code>16L</code>. Enable font popup menu.</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kTitleChoiceHangTime</em></p></td>
<td ><p>Value <code>32L</code>. Enable pause slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>TITLE_COMBO_STANDARD</em></p></td>
<td ><p>Enable up, down, left, right buttons; font popup menu; and speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>TITLE_COMBO_VERTICAL</em></p></td>
<td ><p>Enable up and down buttons, font popup menu, and speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>TITLE_COMBO_HORIZONTAL</em></p></td>
<td ><p>Enable left and right buttons, font popup menu, and speed slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kTitleChoiceNoScaling</em></p></td>
<td ><p>Value <code>64L</code>. Changes automatic scaling of frames from 720 x 480 pixels to 640 x 480 pixels. This should be used only for very specific situations.</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kTitleChoiceAll</em></p></td>
<td ><p>Value 127L. Enable all title-related UI elements</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP30000848-63841" title="Obtaining User&acirc;&#128;&#153;s Direction Choice"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF114" title="Obtaining User&acirc;&#128;&#153;s Direction Choice"></a><h3>Obtaining User’s Direction Choice</h3>
<p>The <em>HYPluginDirection</em> enumeration defines five values for the user-selected direction:</p>
<ul class="spaceabove"><li class="li"><p><code><!--a  -->kPluginDirectionNone<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionUp<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionDown<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionLeft<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionRight<!--/a--></code></p></li></ul>
<p>For example, if the user clicks the right arrow, iMovie provides <code><!--a  -->kPluginDirectionRight<!--/a--></code> value in <em>HYPluginTitleInfo.direction</em>. The plug-in can also supply <em>HYPluginGetInfo.defaultDirection</em> to iMovie so it can set up the arrow to the desired default when the plug-in is initially chosen.</p>
<a name="//apple_ref/doc/uid/TP30000848-63925" title="Justifying Text"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF115" title="Justifying Text"></a><h3>Justifying Text</h3>
<p>To align the text in the text edit box, the plug-in sets <em>HYPluginGetInfo.justify</em> to one of the following values:</p>
<ul class="spaceabove"><li class="li"><p><code><!--a  -->kTitleJustCenter<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kTitleJustLeft<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kTitleJustRight<!--/a--></code></p></li></ul>
<p>The default value is <code><!--a  -->kTitleJustLeft<!--/a--></code>.</p>
<p>This setting is currently used only in the block style of text plug-in, so, for example, if the plug-in right-justifies the text when the <code><!--a  -->kPluginDirectionRight<!--/a--></code> direction is chosen, setting <em>HYPluginGetInfo.justify</em> to <code><!--a  -->kTItleJustRight<!--/a--></code> causes the user’s editing to be in a right-justified text block. This approach is used, for example, in the Music Video plug-in.</p>
<a name="//apple_ref/doc/uid/TP30000848-64015" title="The HYPluginTitleInfo Structure"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF116" title="The HYPluginTitleInfo Structure"></a><h3>The HYPluginTitleInfo Structure</h3>
<p>The <em>HYPluginTitleInfo </em> structure is passed back when you call the <code><!--a-->GetTitleInfo<!--/a--></code> callback. It provides a wealth of information about the text entered by the user, the options chosen in the Titles panel, and so forth. Note that some fields are valid only for certain types of plug-ins. For example, if <em>HYPluginGetInfo.pluginType</em> is <code><!--a  -->kPluginTitleType<!--/a--></code> and <em>HYPluginGetInfo.titleType</em> is <code><!--a  -->kTitleSingleTextPair<!--/a--></code>, then the <em>blockLen</em> and <em>textBlock</em> fields are not defined.</p>
<a name="//apple_ref/doc/uid/TP30000848-67022" title="Listing 1-3HYPluginTitleInfo  structure"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF104" title="Listing 1-3HYPluginTitleInfo  structure"></a><p class="codesample"><strong>Listing 1-3&nbsp;&nbsp;</strong>HYPluginTitleInfo  structure</p>
<div class="codesample"><table><tr><td scope="row"><pre>// HYPluginTitleInfo<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct _HYPluginTitleInfo {<span></span></pre></td></tr><tr><td scope="row"><pre>    RGBColor foreColor; // text color<span></span></pre></td></tr><tr><td scope="row"><pre>    RGBColor shadowColor;   // shadow color<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean overBlack;  // if over black<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean tvSafe; // if TV Safe margins (and colors?) wanted<span></span></pre></td></tr><tr><td scope="row"><pre>    short fontID;   // Mac font ID<span></span></pre></td></tr><tr><td scope="row"><pre>    float speed;    // slow to fast, in range 0.0 - 1.0<span></span></pre></td></tr><tr><td scope="row"><pre>    long duration;  // in frames<span></span></pre></td></tr><tr><td scope="row"><pre>    HYPluginDirection direction;    // direction of motion for title<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // -- actual text data<span></span></pre></td></tr><tr><td scope="row"><pre>    short pairCount;    // used for "Pair" style plug-ins<span></span></pre></td></tr><tr><td scope="row"><pre>    HYPluginTitlePair *pairs;   // used for "Pair" style  plug-ins<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    long blockLen;  // used for "Block" style plug-ins<span></span></pre></td></tr><tr><td scope="row"><pre>    char *textBlock;    // used for "Block" style plug-ins<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    HY2PluginTitleInfo ver2;<span></span></pre></td></tr><tr><td scope="row"><pre>      // no changes in version 3<span></span></pre></td></tr><tr><td scope="row"><pre>      HY4PluginTitleInfo ver4;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>} HYPluginTitleInfo;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr></table></div>
<p>The <em>HY2PluginTitleInfo</em> structure was added with iMovie 2.0. It is used only to extend the <em>HYPluginTitleInfo</em> structure.</p>
<a name="//apple_ref/doc/uid/TP30000848-67038" title="Listing 1-4HY2PluginTitleInfo structure"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF105" title="Listing 1-4HY2PluginTitleInfo structure"></a><p class="codesample"><strong>Listing 1-4&nbsp;&nbsp;</strong>HY2PluginTitleInfo structure</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct _HY2PluginTitleInfo {<span></span></pre></td></tr><tr><td scope="row"><pre>    float fontSizeScale;    // 0.0->1.0 This value doesn't represent<span></span></pre></td></tr><tr><td scope="row"><pre>        // the actual scale factor, just the<span></span></pre></td></tr><tr><td scope="row"><pre>        // value of the TitleFontSize slider. It<span></span></pre></td></tr><tr><td scope="row"><pre>        // is up to each plug-in to determine<span></span></pre></td></tr><tr><td scope="row"><pre>        // this value in terms of actual font size<span></span></pre></td></tr><tr><td scope="row"><pre>    float hangTime; // 0.0->1.0<span></span></pre></td></tr><tr><td scope="row"><pre>    } HY2PluginTitleInfo;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr></table></div>
<p>Note that a title plug-in can apply its results across multiple clips. In such a case, iMovie applies all the resulting title frames to the stored movie in a single clip, effectively replacing those clips, and thereby reducing the number of clips in the movie. If, for example, the user deletes the title, iMovie restores all the affected clips.</p>
<p>The <em>HY4PluginTitleInfo</em> structure was added with iMovie 3.0.1. It is used only to extend the <em>HYPluginTitleInfo</em> structure.</p>
<a name="//apple_ref/doc/uid/TP30000848-67054" title="Listing 1-5HY4PluginTitleInfo structure"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF106" title="Listing 1-5HY4PluginTitleInfo structure"></a><p class="codesample"><strong>Listing 1-5&nbsp;&nbsp;</strong>HY4PluginTitleInfo structure</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct _HY4PluginTitleInfo {<span></span></pre></td></tr><tr><td scope="row"><pre>    char    fontName[256];<span></span></pre></td></tr><tr><td scope="row"><pre>    // font name; this supersedes the "short fontID" in<span></span></pre></td></tr><tr><td scope="row"><pre>    // the HYPluginTitleInfo field which is mostly useless on OS  X<span></span></pre></td></tr><tr><td scope="row"><pre>    float   sliderValues[MAX_TITLE_SLIDERS];<span></span></pre></td></tr><tr><td scope="row"><pre>} HY4PluginTitleInfo ;//__attribute__ ((aligned (2)));<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000848-62753" title="Transition Plug-ins"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF117" title="Transition Plug-ins"></a><h2>Transition Plug-ins</h2>
<p>Transition plug-ins allow the user to select a visual display that eases an otherwise potentially jarring change from one clip to another. Typical transitions are wipes, fades, and dissolves.</p>
<p>A transition is applied between clips; it cannot apply across multiple clips as a title can.</p>
<a name="//apple_ref/doc/uid/TP30000848-62771" title="Obtaining User&acirc;&#128;&#153;s Direction Choice"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF118" title="Obtaining User&acirc;&#128;&#153;s Direction Choice"></a><h3>Obtaining User’s Direction Choice</h3>
<p>The <em>HYPluginDirection</em> enumeration defines five values for the user-selected direction:</p>
<ul class="spaceabove"><li class="li"><p><code><!--a  -->kPluginDirectionNone<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionUp<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionDown<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionLeft<!--/a--></code></p></li>
<li class="li"><p><code><!--a  -->kPluginDirectionRight<!--/a--></code></p></li></ul>
<p>For example, if the user clicks the right arrow, iMovie provides <code><!--a  -->kPluginDirectionRight<!--/a--></code> value in <em>HYPluginTitleInfo.direction</em>. The plug-in can also supply <em>HYPluginGetInfo.defaultDirection</em> to iMovie so it can set the arrow to the desired default when the plug-in is initially chosen.</p>
<p>The <em>HYPluginTransitionInfo</em> structure is returned to the plug-in when it makes the <code><!--a-->GetTransitionInfo<!--/a--></code> callback. The <code>speed</code> member contains the setting for the Speed slider in the transitions pane; its value can be in the range 0.0–1.0. The <em>ver2</em> member is defined in the <em>HYPluginTransitionInfo</em> structure shown in <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-67070">Listing 1-6</a></span>.</p>
<a name="//apple_ref/doc/uid/TP30000848-67070" title="Listing 1-6HYPluginTransitionInfo structure"></a><a name="//apple_ref/doc/uid/TP30000848-BIHDAFJF" title="Listing 1-6HYPluginTransitionInfo structure"></a><p class="codesample"><strong>Listing 1-6&nbsp;&nbsp;</strong>HYPluginTransitionInfo structure</p>
<div class="codesample"><table><tr><td scope="row"><pre>// HYPluginTransitionInfo<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct _HYPluginTransitionInfo {<span></span></pre></td></tr><tr><td scope="row"><pre>    float speed;<span></span></pre></td></tr><tr><td scope="row"><pre>    HY2PluginTransitionInfo ver2;<span></span></pre></td></tr><tr><td scope="row"><pre>} HYPluginTransitionInfo;<span></span></pre></td></tr></table></div>
<p>The <em>HY2PluginTransitionInfo</em> structure is used only to extend <em>HYPluginTransitionInfo</em>. It was introduced with iMovie 2.0 to provide the <code>direction</code> member.</p>
<a name="//apple_ref/doc/uid/TP30000848-67086" title="Listing 1-7HY2PluginTransitionInfo structure"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF107" title="Listing 1-7HY2PluginTransitionInfo structure"></a><p class="codesample"><strong>Listing 1-7&nbsp;&nbsp;</strong>HY2PluginTransitionInfo structure</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef struct _HY2PluginTransitionInfo {<span></span></pre></td></tr><tr><td scope="row"><pre>    HYPluginDirection direction;<span></span></pre></td></tr><tr><td scope="row"><pre>} HY2PluginTransitionInfo;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP30000848-64929" title="Effect Plug-ins"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF119" title="Effect Plug-ins"></a><h2>Effect Plug-ins</h2>
<p>Effects, also know as <em>filters</em>, are typically applied to video to add some visual stimulus or to force a particular perspective on the viewer. One of the more popular effects is the water ripple effect, which makes the video appear as if it were projected on the surface of rippling water.</p>
<p>An effect plug-in identifies itself as such by setting the <em>pluginType</em> field in the <em>HYPluginGetInfo</em> structure to <code><!--a  -->kPluginFilterType<!--/a--></code>.</p>
<p>An effect plug-in should apply the effect to an entire clip. iMovie attempts to enforce this restriction by passing only <em>frameCount</em> values that correspond to an entire clip, regardless of what the plug-in requests. Moreover, an effect cannot "consume" multiple clips. (The user, however, can apply an effect to multiple clip selections.)</p>
<a name="//apple_ref/doc/uid/TP30000848-65890" title="Enabling User Interface Elements"></a><a name="//apple_ref/doc/uid/TP30000848-TPXREF120" title="Enabling User Interface Elements"></a><h3>Enabling User Interface Elements</h3>
<p>An effect plug-in sets plug-in choice flags (<em>HYPluginGetInfo.pluginFlags</em>) to specify user interface elements to be enabled to accept user data, settings, and selections. Plug-in choice flags applicable to the Effects pane are shown in <span class="content_text"><a href="OpenDirPI_Chapter1.html#//apple_ref/doc/uid/TP30000848-66003">Table 1-10</a></span>.</p><a name="//apple_ref/doc/uid/TP30000848-66003" title="Table 1-10Effects pane plug-in choice flag constants"></a><a name="//apple_ref/doc/uid/TP30000848-BIHCAFCD" title="Table 1-10Effects pane plug-in choice flag constants"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-10&nbsp;&nbsp;</strong>Effects pane plug-in choice flag constants</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Constant name</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p><em>kFilterChoiceFadeIn</em></p></td>
<td ><p>Value <code>128L</code>. Enable fade-in slider.</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kFilterChoiceFadeOut</em></p></td>
<td ><p>Value <code>256L</code>. Enable fade-out slider.</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kFilterChoiceAnimated</em></p></td>
<td ><p>Value <code>512L</code>. Enable pause slider</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginChoiceFileButton</em></p></td>
<td ><p>Value <code>2048L</code>. Enable File… button. (Introduced in version 3 of the API.)</p></td>
</tr>
<tr>
<td  scope="row"><p><em>kPluginChoiceCustomButton</em></p></td>
<td ><p>Value <code>4096L</code>. Create and enable a custom button. (Introduced in version 3 of the API.)</p></td>
</tr>

</table></div>
<p>The <code><!--a  -->kFilterChoiceFadeIn<!--/a--></code> and <code><!--a  -->kFilterChoiceFadeOut<!--/a--></code> flags are used to enable or disable the Effect In and Effect Out sliders to gradually ease in (or out) an effect. If the plug-in can’t use this functionality, it should dim these sliders.</p>
<p>If the effect applies differently to each frame as it progresses, the plug-in must enable the kFilterChoiceAnimated flag. This feature can force a still clip to be expanded into a clip with enough identical frames such that the effect does not run out of frames before it has completed. If this flag is not set, the effect may be applied to a single frame in a still clip, which is then displayed for the duration of the clip.</p>
<p>Setting the <code><!--a  -->kPluginChoiceFileButton<!--/a--></code> flag enables a File... button in the Effects pane. When the user clicks that button, iMovie automatically calls NavServices to choose a file, stores the FSSpec for that file in <em>HYPluginFileOpenInfo.chosenFile</em>, and passes it back to the plug-in. The plug-in must supply acceptable file types (in the <em>typeCount</em> and <em>hTypes</em> fields of <em></em>). (This feature was introduced in version 3 of the API.)</p>
<p>Setting the <code><!--a  -->kPluginChoiceCustomButton<!--/a--></code> flag enables a custom button in the Effects pane. The plug-in is then sent the <code><!--a  -->kPlugCustomButtonClick<!--/a--></code> selector when that button is clicked. The plug-in specifies the title of the button in <em>HY3PluginGetInfo.buttonTitle</em>. (This feature was introduced in version 3 of the API.)</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-09-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/AppleApplications/Reference/iMovie_Plug-ins/Chapter1/OpenDirPI_Chapter1.html%3Fid%3DTP40000880-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/AppleApplications/Reference/iMovie_Plug-ins/Chapter1/OpenDirPI_Chapter1.html%3Fid%3DTP40000880-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/AppleApplications/Reference/iMovie_Plug-ins/Chapter1/OpenDirPI_Chapter1.html%3Fid%3DTP40000880-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
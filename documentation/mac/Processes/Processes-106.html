<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>About the Notification Manager (IM: Pr)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING106></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Processes-105.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-107.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="Processes-2.html"><B>Processes</B></A><BR><DD><A HREF="Processes-105.html"><B>Chapter 5 - Notification Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING106-0></A>
<H1>About the Notification Manager</H1>
 The Notification Manager provides a notification service. It allows software running in the background (or otherwise unseen by the user) to communicate information to the user. For example, applications that manage lengthy background tasks (such as printing many documents or transferring large amounts of data to other machines) might need to inform the user that the operation is complete. These applications cannot use the standard methods of communicating with the user, such as alert or dialog boxes, because such windows might easily be obscured by the windows of other applications. Moreover, even if those windows are visible, the background application cannot be certain that the user is aware of the change. A more reliable method is needed to manage the communication between a background application and the user, who might be awaiting the completion of the background task while running some other application in the foreground.<A NAME=MARKER-2-34></A><A NAME=MARKER-2-19></A><P>
 In the same way, relatively invisible operations such as Time Manager tasks, VBL tasks, or device drivers might need to inform the user that some previously started routine is complete or perhaps that some error has rendered further execution undesirable or impossible.<A NAME=MARKER-2-14></A><A NAME=MARKER-2-52></A><A NAME=MARKER-2-16></A><P>
 In all these cases, the communication generally needs to occur in one direction only, from the background application (or task, or driver) to the user. The Notification Manager, included in system software versions 6.0 and later, allows you to alert the user by posting a <B>notification</B>, which is an audible or visible indication that your application (or other piece of software) requires the user's attention. You post a notification by issuing a <B>notification request</B> to the Notification Manager, which places your request in a queue. When your request reaches the top of the queue, the Notification Manager posts a notification to the user.<A NAME=MARKER-2-17></A><P>
 You can request three types of notification:<A NAME=MARKER-2-131></A><A NAME=MARKER-2-5></A><P>
<UL>
<LI><B>Polite notification.</B> A small icon blinks, by periodically alternating with the Apple menu icon (the Apple logo) or the Application menu icon in the menu bar.<A NAME=MARKER-2-29></A>
<LI><B>Audible notification.</B> The Sound Manager plays the system alert sound or a sound contained in an <CODE>'snd '</CODE> resource.<A NAME=MARKER-2-98></A><A NAME=MARKER-9-84></A><A NAME=MARKER-2-40></A><A NAME=MARKER-2-24></A><A NAME=MARKER-2-1></A>
<LI><B>Alert notification.</B> An alert box containing a short message appears on the screen. The user must dismiss the alert box (by clicking the OK button) before foreground processing can continue.<A NAME=MARKER-2-25></A><A NAME=MARKER-2-10></A><P>
</UL>
 These types of notification are not mutually exclusive; for example, an application can request both audible and alert notifications. Moreover, if the requesting software is listed in the Application menu (and hence represents a process that is loaded into memory), you can instruct the Notification Manager to place a diamond-shaped mark next to the name of the requesting process. The mark is usually intended to prompt the user to switch the marked application into the foreground. Finally, you can request that the Notification Manager execute a notification response procedure, which is executed as the final step in a notification.<A NAME=MARKER-9-34></A><A NAME=MARKER-2-39></A><A NAME=MARKER-2-36></A><A NAME=MARKER-2-36></A><P>
 In short, a notification consists of one or more of five possible actions. If you request more than one action, they occur in the following order:<P>
<OL>
<LI>A diamond-shaped mark appears next to the name of your application in the Application menu, as illustrated in <A HREF=#MARKER-9-32>Figure 5-1</A>. Note that the diamond is present only when your application is in the background (because the diamond is replaced by a checkmark if your application is the active application). In <A HREF=#MARKER-9-32>Figure 5-1</A>, the Traffic Light application is the active application.<P>
</OL>
<B>Figure 5-1  <A NAME=MARKER-9-32></A><A NAME=MARKER-21-33></A>A notification in the Application menu</B><P>
<BR>
<BR>
<IMG SRC="graphics/Figure_1.gif"><P>
<OL>
<LI>A small icon blinks, alternating with either the Apple menu icon or the Application menu icon in the menu bar. Typically, the small icon is your application's small icon. Because several applications can post notifications, there might be a series of small icons blinking in the menu bar. The location of each blinking icon varies according to the posting application's mark (if any). If your application is marked with a diamond (or a checkmark) in the Application menu, the icon blinks above the Application menu; otherwise, the icon blinks above the Apple menu.<A NAME=MARKER-2-22></A><A NAME=MARKER-9-31></A><A NAME=MARKER-2-31></A><A NAME=MARKER-2-12></A>
<LI>The Sound Manager plays a sound. Your application can supply its own sound (by passing the Notification Manager a handle to an <CODE>'snd '</CODE> resource loaded into memory) or request that the Sound Manager use the user's system alert sound.
<LI>An alert box like the one in <A HREF=#MARKER-9-38>Figure 5-2</A> appears, and the user dismisses it. Your application specifies the text in the alert box.<P>
</OL>
<B>Figure 5-2  <A NAME=MARKER-9-38></A><A NAME=MARKER-21-39></A>A notification alert box</B><P>
<BR>
<BR>
<IMG SRC="graphics/Figure_2.gif"><P>
<OL>
<LI>A response procedure is executed. You can use the response procedure to remove the notification request from the queue or perform other processing.<A NAME=MARKER-9-121></A><A NAME=MARKER-9-94></A><P>
</OL>
 The mark in the Application menu and the blinking small icon remain until the requesting application removes the notification request from the queue. However, the sound and the alert box are presented only once, if at all.<P>
 Any applications, desk accessories, tasks, routines, or drivers can use the Notification Manager, whether they are running in the background or not. It is especially useful for background applications, such as the PrintMonitor application. (The system alarm, which is called by the Alarm Clock desk accessory, also uses the Notification Manager.) Foreground applications can, however, use the Notification Manager to achieve effects (such as the blinking small icon) that are otherwise more difficult to create. For the same reasons, the Notification Manager can be useful even to applications that might be executing in a Finder-only environment under system software version 6.0.<A NAME=MARKER-2-42></A><A NAME=MARKER-2-43></A><A NAME=MARKER-2-44></A><A NAME=MARKER-2-138></A><A NAME=MARKER-2-37></A><P>
 The Notification Manager provides applications with a standard user interface for notifying the user of significant events. The following three-level notification strategy for communicating with the user is recommended:<P>
<OL>
<LI>Display a diamond next to the name of the application in the Application menu.
<LI>Insert a small icon into the list of icons displayed alternately with the Apple menu icon or the Application menu icon in the menu bar, and display a diamond next to the name of your application in the Application menu.
<LI>Display a diamond, insert a small icon, and display an alert box to notify the user that something needs to be done.<P>
</OL>
 Ideally, the user should be allowed to set the desired level of notification. The suggested default level of notification is level 2. In levels 2 and 3, you might also play a sound, but the user should have the ability to turn the sound off. In addition, a user should have the ability to turn off background notification altogether, except when damage might occur or data might be lost.<A NAME=MARKER-2-47></A><P>
<DL>
<DT><B>Note</B>
<DD>This suggested notification strategy may not be appropriate for your application. Notifications posted by system software might not follow these guidelines.<B></B>   <B>&#183;</B>
</DL>
 Each application, desk accessory, and device driver can issue any number of notification requests. Each requested notification is presented separately to the user. For this reason, avoid posting multiple notification requests for the same occurrence. Depending on the method of notification you specify, multiple requests might result in an annoying number of notification sounds or many alert boxes that the user must dismiss before continuing.<A NAME=MARKER-9-147></A><P>
 Note that the Notification Manager provides a one-way communications path from an application to the user. There is no provision for carrying information back from the user to the requesting application, although it is possible for the requesting application to determine if the notification was received. If you require this secondary communications link, do not use the Notification Manager. Instead, you should wait until the user switches your application into the foreground and then use standard means (for example, a dialog box) to obtain the required information. <P>
</DL>
<HR>
<center>
<A HREF="Processes-105.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-107.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Processes-3.html">&copy; Apple Computer, Inc.</A><br>17 JUN 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

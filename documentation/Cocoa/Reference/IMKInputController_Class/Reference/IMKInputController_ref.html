<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>IMKInputController Class Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="IMKInputController Class Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40006156-CH3" title="IMKInputController"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Cocoa/index.html#//apple_ref/doc/uid/TP30001281-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../../../reference/Cocoa/idxInternationalization-date.html#//apple_ref/doc/uid/TP30001281-TP30000416-TP30001072" target="_top">Internationalization</a> &gt; <a href="../index.html" target="_top">IMKInputController Class Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/occ/cl/IMKInputController" title="IMKInputController"></a><a name="//apple_ref/doc/c_ref/IMKInputController" title="IMKInputController"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-BCIHFHHB" title="IMKInputController"></a><h1>IMKInputController Class Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span style="white-space: nowrap;">Inherits from</span></strong></td><td><div style="margin-bottom:1px"><a href="../../Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/cl/NSObject" target="_top">NSObject</a></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Conforms to</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../IMKMouseHandling_Protocol/Reference/IMKMouseHandling_Methods.html#//apple_ref/occ/intf/IMKMouseHandling" target="_top">IMKMouseHandling</a></span><br/><span class="content_text"><a href="../../IMKStateSetting_Protocol/Reference/IMKStateSetting_Ref.html#//apple_ref/occ/intf/IMKStateSetting" target="_top">IMKStateSetting</a></span><br/><span class="content_text"><a href="../../Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject" target="_top">NSObject (NSObject)</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px">System/Library/Frameworks/<a href="../../InputMethodKitFrameworkRef/index.html#//apple_ref/doc/uid/TP40006154" target="_top">InputMethodKit.framework</a></div></td></tr><tr><td scope="row"><strong>Availability</strong></td><td><div style="margin-bottom:1px"><div>Available in Mac OS X v10.5 and later.</div></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">IMKInputController.h</span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Related sample code</span></strong></td><td><div style="margin-bottom:1px"><div><span class="content_text"><a href="../../../../../samplecode/NumberInput_IMKit_Sample/index.html#//apple_ref/doc/uid/DTS40007466" target="_top">NumberInput_IMKit_Sample</a></span></div></div></td></tr></table></div><br/>
<a name="//apple_ref/doc/uid/TP40006156-CH3-743333" title="Overview"></a><h2>Overview</h2><p class="spaceabove">The <code>IMKInputController</code> class provides a base class for custom input controller classes. The <code><a href="../../IMKServer_Class/Reference/IMKServer_Ref.html#//apple_ref/occ/cl/IMKServer" target="_top">IMKServer</a></code>  class, which is allocated in the main function of an input method, creates an input controller object for each input session created by a client application. For every input session there is a corresponding <code>IMKInputController</code> object.</p><p>An <code>IMKInputController</code> object controls text input on the input method side. It manages events and text from the applications and converted text from the input method engine. <code>IMKInputController</code> implements fully the <code><a href="../../IMKStateSetting_Protocol/Reference/IMKStateSetting_Ref.html#//apple_ref/occ/intf/IMKStateSetting" target="_top">IMKStateSetting</a></code> and <code><a href="../../IMKMouseHandling_Protocol/Reference/IMKMouseHandling_Methods.html#//apple_ref/occ/intf/IMKMouseHandling" target="_top">IMKMouseHandling</a></code> protocols.  Typically you do not need to override this class, but you do need to provide  a delegate object that implements the methods that your are interested in.  The <code>IMKInputController</code> versions of the protocol methods check whether the delegate object implements a method, and  calls the delegate version if it exists. </p><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_12" title="Tasks"></a><h2>Tasks</h2>
<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_13" title="Initializing an Input Controller"></a>
		<h3 class="tasks">Initializing an Input Controller</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/initWithServer:delegate:client:">&#8211;&#xA0;initWithServer:delegate:client:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Initializes the input control by setting the delegate. '/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_14" title="Working with Ranges"></a>
		<h3 class="tasks">Working with Ranges</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/compositionAttributesAtRange:">&#8211;&#xA0;compositionAttributesAtRange:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a dictionary of text attributes.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/selectionRange">&#8211;&#xA0;selectionRange</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns where the range of the selection that should be placed inside marked text.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/replacementRange">&#8211;&#xA0;replacementRange</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the range in the client document that the text should replace.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/markForStyle:atRange:">&#8211;&#xA0;markForStyle:atRange:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a dictionary of text attributes that can mark a range of an attributed string to send to a client.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_15" title="Managing the Delegate"></a>
		<h3 class="tasks">Managing the Delegate</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/delegate;">&#8211;&#xA0;delegate;</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the delegate for input controller  object.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/setDelegate:">&#8211;&#xA0;setDelegate:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sets the delegate for input controller  object.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_16" title="Getting the Client and Server Objects"></a>
		<h3 class="tasks">Getting the Client and Server Objects</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/server">&#8211;&#xA0;server</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the server object that manages the input controller.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/client">&#8211;&#xA0;client</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the client object associated with the input controller.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_17" title="Tracking Selections"></a>
		<h3 class="tasks">Tracking Selections</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/annotationSelected:forCandidate:">&#8211;&#xA0;annotationSelected:forCandidate:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Sends the selected candidate string and annotation string to the input controller.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/candidateSelectionChanged:">&#8211;&#xA0;candidateSelectionChanged:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Informs an input controller that the current candidate selection in the candidate window has changed.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/candidateSelected:">&#8211;&#xA0;candidateSelected:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Informs an input controller that a new candidate is selected.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_18" title="Managing Composition"></a>
		<h3 class="tasks">Managing Composition</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/updateComposition">&#8211;&#xA0;updateComposition</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Informs the input controller that the composition has changed.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/cancelComposition">&#8211;&#xA0;cancelComposition</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Stops the current composition and replaces marked text with the original text.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_19" title="Hiding the User Interface"></a>
		<h3 class="tasks">Hiding the User Interface</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/hidePalettes">&#8211;&#xA0;hidePalettes</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Informs an input method that it should  close any visible user interface.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_20" title="Working with Custom Commands"></a>
		<h3 class="tasks">Working with Custom Commands</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/doCommandBySelector:commandDictionary:">&#8211;&#xA0;doCommandBySelector:commandDictionary:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Passes commands that are not generated as part of the text input process.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/menu">&#8211;&#xA0;menu</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a menu of commands that are specific to an input method.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_21" title="Instance Methods"></a><h2>Instance Methods</h2><a name="//apple_ref/occ/instm/IMKInputController/annotationSelected:forCandidate:" title="annotationSelected:forCandidate:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_8" title="annotationSelected:forCandidate:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_23"></a><h3 class="verytight">annotationSelected:forCandidate:</h3><p class="spaceabove">Sends the selected candidate string and annotation string to the input controller.</p><p class="spaceabovemethod">- (void)annotationSelected:(NSAttributedString*)annotationString forCandidate:(NSAttributedString*)candidateString</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>annotationString</em></dt><dd><p>The annotation string associated with the candidate.</p></dd><dt><em>candidateString</em></dt><dd><p>The candidate string that the user moved to.</p></dd></dl><h5 class="tight">Discussion</h5><p>This method is called when the user moves to a candidate.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/cancelComposition" title="cancelComposition"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_10" title="cancelComposition"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_24"></a><h3 class="verytight">cancelComposition</h3><p class="spaceabove">Stops the current composition and replaces marked text with the original text.</p><p class="spaceabovemethod">- (void)cancelComposition</p><h5 class="tight">Discussion</h5><p>This method calls the method <code><!--a target="_top" -->originalString:<!--/a--></code> to obtain the original text and sends that text to the client using a call to the <code><a href="../../IMKTextInput_Protocol/Reference/IMKTextInput_Protocol.html#//apple_ref/occ/intf/IMKTextInput" target="_top">IMKTextInput</a></code>  protocol method <code><a href="../../IMKTextInput_Protocol/Reference/IMKTextInput_Protocol.html#//apple_ref/occ/intfm/IMKTextInput/insertText:replacementRange:" target="_top">insertText:replacementRange:</a></code></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/candidateSelected:" title="candidateSelected:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-SW3" title="candidateSelected:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_25"></a><h3 class="verytight">candidateSelected:</h3><p class="spaceabove">Informs an input controller that a new candidate is selected.</p><p class="spaceabovemethod">- (void)candidateSelected:(NSAttributedString*)candidateString</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>candidateString</em></dt><dd><p>The changed candidate string.</p></dd></dl><h5 class="tight">Discussion</h5><p>The candidate object is the user’s final choice from the candidate window. The candidate window is closed before this method is called.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/candidateSelectionChanged:">&#8211;&#xA0;candidateSelectionChanged:</a></code></li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/candidateSelectionChanged:" title="candidateSelectionChanged:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-SW4" title="candidateSelectionChanged:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_26"></a><h3 class="verytight">candidateSelectionChanged:</h3><p class="spaceabove">Informs an input controller that the current candidate selection in the candidate window has changed.</p><p class="spaceabovemethod">- (void)candidateSelectionChanged:(NSAttributedString*)candidateString</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>candidateString</em></dt><dd><p>The changed candidate string.</p></dd></dl><h5 class="tight">Discussion</h5><p>Note this method is called to indicate user activity in the candidate window. The candidate object might not be the user’s final selection.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/candidateSelected:">&#8211;&#xA0;candidateSelected:</a></code></li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/client" title="client"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_7" title="client"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_27"></a><h3 class="verytight">client</h3><p class="spaceabove">Returns the client object associated with the input controller.</p><p class="spaceabovemethod">- (&lt;IMKTextInput, NSObject>))client</p><h5 class="tight">Return Value</h5><p>The client object. The returned object is an autoreleased object.</p><h5 class="tight">Discussion</h5><p>The client object conforms to the <code><a href="../../IMKTextInput_Protocol/Reference/IMKTextInput_Protocol.html#//apple_ref/occ/intf/IMKTextInput" target="_top">IMKTextInput</a></code> protocol.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/compositionAttributesAtRange:" title="compositionAttributesAtRange:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_2" title="compositionAttributesAtRange:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_28"></a><h3 class="verytight">compositionAttributesAtRange:</h3><p class="spaceabove">Returns a dictionary of text attributes.</p><p class="spaceabovemethod">- (NSMutableDictionary*) compositionAttributesAtRange:(NSRange)range</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>range</em></dt><dd><p>The range of text whose attributes you want to obtain.</p></dd></dl><h5 class="tight">Return Value</h5><p>The dictionary of text attributes. The default implementation returns an empty dictionary. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/delegate;" title="delegate;"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-SW2" title="delegate;"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_29"></a><h3 class="verytight">delegate;</h3><p class="spaceabove">Returns the delegate for input controller  object.</p><p class="spaceabovemethod">- (id)delegate</p><h5 class="tight">Return Value</h5><p>The delegate object. The returned object is an autoreleased object.</p><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/setDelegate:">&#8211;&#xA0;setDelegate:</a></code></li></ul><a name="//apple_ref/occ/instm/IMKInputController/doCommandBySelector:commandDictionary:" title="doCommandBySelector:commandDictionary:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-SW6" title="doCommandBySelector:commandDictionary:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_30"></a><h3 class="verytight">doCommandBySelector:commandDictionary:</h3><p class="spaceabove">Passes commands that are not generated as part of the text input process.</p><p class="spaceabovemethod">- (void)doCommandBySelector:(SEL)aSelector commandDictionary:(NSDictionary*)infoDictionary</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>aSelector</em></dt><dd><p>A selector that represents a command from the text input menu.</p></dd><dt><em>infoDictionary</em></dt><dd><p>A dictionary that contains two key-value pairs:</p><ul class="termdef"><li class="termdef"><p><code><a href="../../IMKServerInput_Additions/Reference/IMKServerInput.html#//apple_ref/c/data/kIMKCommandMenuItemName" target="_top">kIMKCommandMenuItemName</a></code>, whose value is an <code>NSMenuItem</code> object. That is, the item selected by the user.</p></li><li class="termdef"><p><code><a href="../../IMKServerInput_Additions/Reference/IMKServerInput.html#//apple_ref/c/data/kIMKCommandClientName" target="_top">kIMKCommandClientName</a></code>, whose value is the current client—<code>id&lt;IMKTextInput, NSObject></code>.</p></li></ul></dd></dl><h5 class="tight">Discussion</h5><p>The default implementation checks if the input controller object (that is, self) responds to the selector. If so, it sends the message <code><a href="../../Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector:withObject:" target="_top">performSelector:withObject:</a></code> to the input controller class. The object parameter in that case is the <code>infoDictionary</code> parameter. </p><p>This method is called when a user selects a command from the text input menu. To support this, an input method must provide actions for each menu item that is placed in the menu. For example, <code>(void)menuAction:(id)sender</code>. Note that the sender in this instance is the info dictionary. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/menu">&#8211;&#xA0;menu</a></code></li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/hidePalettes" title="hidePalettes"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_11" title="hidePalettes"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_31"></a><h3 class="verytight">hidePalettes</h3><p class="spaceabove">Informs an input method that it should  close any visible user interface.</p><p class="spaceabovemethod">- (void)hidePalettes</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/initWithServer:delegate:client:" title="initWithServer:delegate:client:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_1" title="initWithServer:delegate:client:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_32"></a><h3 class="verytight">initWithServer:delegate:client:</h3><p class="spaceabove">Initializes the input control by setting the delegate. </p><p class="spaceabovemethod">- (id)initWithServer:(IMKServer*)server delegate:(id)delegate client:(id)inputClient</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>server</em></dt><dd><p>The server object for the controller.</p></dd><dt><em>delegate</em></dt><dd><p>The delegate object.</p></dd><dt><em>inputClient</em></dt><dd><p>The client object that will send messages to the controller using the server object. The client object must confirm to the <code><a href="../../IMKTextInput_Protocol/Reference/IMKTextInput_Protocol.html#//apple_ref/occ/intf/IMKTextInput" target="_top">IMKTextInput</a></code> protocol.</p></dd></dl><h5 class="tight">Return Value</h5><p>The initialized input controller object.</p><h5 class="tight">Discussion</h5><p>Methods in the <code><a href="../../IMKStateSetting_Protocol/Reference/IMKStateSetting_Ref.html#//apple_ref/occ/intf/IMKStateSetting" target="_top">IMKStateSetting</a></code> and <code><a href="../../IMKMouseHandling_Protocol/Reference/IMKMouseHandling_Methods.html#//apple_ref/occ/intf/IMKMouseHandling" target="_top">IMKMouseHandling</a></code> protocols that are implemented by the delegate object always include a client parameter. Methods in the <code>IMKInputController</code> class do not need to take a client  because the <code>initWithServer:delegate:client:</code> method stores the client object you supply as an ivar when it initializes the <code>IMKInputController</code> object.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/markForStyle:atRange:" title="markForStyle:atRange:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_5" title="markForStyle:atRange:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_33"></a><h3 class="verytight">markForStyle:atRange:</h3><p class="spaceabove">Returns a dictionary of text attributes that can mark a range of an attributed string to send to a client.</p><p class="spaceabovemethod">- (NSDictionary*)markForStyle:(NSInteger)style atRange:(NSRange)range</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>style</em></dt><dd><p>A style, which should be one of the following values: <code><a href="../../../../Carbon/Reference/Apple_Event_Manager/Reference/reference.html#//apple_ref/c/econst/kTSMHiliteSelectedRawText" target="_top">kTSMHiliteSelectedRawText</a></code>, <code><a href="../../../../Carbon/Reference/Apple_Event_Manager/Reference/reference.html#//apple_ref/c/econst/kTSMHiliteConvertedText" target="_top">kTSMHiliteConvertedText</a></code>, or <code><a href="../../../../Carbon/Reference/Apple_Event_Manager/Reference/reference.html#//apple_ref/c/econst/kTSMHiliteSelectedConvertedText" target="_top">kTSMHiliteSelectedConvertedText</a></code>. See the <code>AERegistry.h</code> header file for the definition of these values. </p></dd><dt><em>range</em></dt><dd><p>The range (that is, a clause) to mark.</p></dd></dl><h5 class="tight">Return Value</h5><p>The dictionary of text attributes. The returned object should be an autoreleased object.</p><h5 class="tight">Discussion</h5><p>This utility function can be called by input methods to mark each range (i.e. clause ) of marked text. T</p><p>The default implementation first calls the method <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/compositionAttributesAtRange:" target="_self">compositionAttributesAtRange:</a></code> to obtain the additional attributes that an input method wants to include, such as font or glyph information. Then, it adds the appropriate underline and underline color information to the attributes dictionary for the style parameter. Finally it adds the style value as the dictionary value. The key for the style value is <code><a href="../../ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html#//apple_ref/c/data/NSMarkedClauseSegmentAttributeName" target="_top">NSMarkedClauseSegmentAttributeName</a></code>. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/menu" title="menu"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-SW5" title="menu"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_34"></a><h3 class="verytight">menu</h3><p class="spaceabove">Returns a menu of commands that are specific to an input method.</p><p class="spaceabovemethod">- (NSMenu*)menu</p><h5 class="tight">Return Value</h5><p>The menu object. This object is an autoreleased object.</p><h5 class="tight">Discussion</h5><p>This method is called whenever the menu needs to be drawn so that an input method can update the menu to reflect the current state. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/doCommandBySelector:commandDictionary:">&#8211;&#xA0;doCommandBySelector:commandDictionary:</a></code></li></ul><h5 class="tight">Related Sample Code</h5><ul class="availability"><li class="availability">  <span class="content_text"><a href="../../../../../samplecode/NumberInput_IMKit_Sample/index.html#//apple_ref/doc/uid/DTS40007466" target="_top">NumberInput_IMKit_Sample</a></span></li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/replacementRange" title="replacementRange"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_4" title="replacementRange"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_35"></a><h3 class="verytight">replacementRange</h3><p class="spaceabove">Returns the range in the client document that the text should replace.</p><p class="spaceabovemethod">- (NSRange)replacementRange</p><h5 class="tight">Return Value</h5><p>The range to replace.</p><h5 class="tight">Discussion</h5><p>This method is called by <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/updateComposition" target="_self">updateComposition</a></code> to obtain the range in the client  document where marked text should be placed. The default implementation returns an <code>NSRange</code> object whose location and length are <code>NSNotFound</code>. That indicates that the marked text should be placed at the current insertion point. Input methods that insert marked text somewhere other than at the current insertion point should override this method. </p><p>An example of an input method that might override this method would be one replaces words with synonyms. That input method would watch for certain words and when it detects such a word it would replaced the word by marked text that was a synonym of the word.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/selectionRange" title="selectionRange"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_3" title="selectionRange"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_36"></a><h3 class="verytight">selectionRange</h3><p class="spaceabove">Returns where the range of the selection that should be placed inside marked text.</p><p class="spaceabovemethod">- (NSRange)selectionRange</p><h5 class="tight">Return Value</h5><p>The range of the selection. This object should be an autoreleased object.</p><h5 class="tight">Discussion</h5><p>This method is called by <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/updateComposition" target="_self">updateComposition</a></code> to obtain the selection range for marked text. The default implementation sets the selection range at the end of the marked text. You should override this method if your input method provides font or glyph information.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/server" title="server"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_6" title="server"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_37"></a><h3 class="verytight">server</h3><p class="spaceabove">Returns the server object that manages the input controller.</p><p class="spaceabovemethod">- (IMKServer*)server</p><h5 class="tight">Return Value</h5><p>The server object. The returned object is an autoreleased object.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/setDelegate:" title="setDelegate:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-SW1" title="setDelegate:"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_38"></a><h3 class="verytight">setDelegate:</h3><p class="spaceabove">Sets the delegate for input controller  object.</p><p class="spaceabovemethod">- (void)setDelegate:(id)newDelegate</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>newDelegate</em></dt><dd><p>The delegate object to set.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="IMKInputController_ref.html#//apple_ref/occ/instm/IMKInputController/delegate;">&#8211;&#xA0;delegate;</a></code></li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code><a name="//apple_ref/occ/instm/IMKInputController/updateComposition" title="updateComposition"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_9" title="updateComposition"></a><a name="//apple_ref/doc/uid/TP40006156-CH3-DontLinkElementID_39"></a><h3 class="verytight">updateComposition</h3><p class="spaceabove">Informs the input controller that the composition has changed.</p><p class="spaceabovemethod">- (void)updateComposition</p><h5 class="tight">Discussion</h5><p>This method calls the protocol method <code><!--a target="_top" -->composedString:<!--/a--></code> to obtain the current composition. The current composition is sent to the client by a call to the method <code><a href="../../IMKTextInput_Protocol/Reference/IMKTextInput_Protocol.html#//apple_ref/occ/intfm/IMKTextInput/setMarkedText:selectionRange:replacementRange:" target="_top">setMarkedText:selectionRange:replacementRange:</a></code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>IMKInputController.h</code>














        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-06-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Reference/IMKInputController_Class/Reference/IMKInputController_ref.html%3Fid%3DTP40006156-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Reference/IMKInputController_Class/Reference/IMKInputController_ref.html%3Fid%3DTP40006156-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Reference/IMKInputController_Class/Reference/IMKInputController_ref.html%3Fid%3DTP40006156-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
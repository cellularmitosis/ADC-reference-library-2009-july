<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> CheckpointIO11</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.156.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.156.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.158.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="RoH.RoutineHeading"><A NAME="pgfId=3721"> </A>CheckpointIO</H1><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=18769"> </A>OSStatus CheckpointIO(<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IOPreparationID theIOPreparation,<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IOCheckpointOptions theOptions);</CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18773"> </A><TT CLASS="cv">--&gt; theIOPreparation</TT><A NAME="22143"> </A></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3725"> </A> Value from the <TT CLASS="cv">IOPreparationID</TT> field in the <TT CLASS="cv">IOPreparationTable</TT> structure.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18784"> </A><TT CLASS="cv">--&gt; theOptions</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3726"> </A> Options value, as defined in <TT CLASS="cv">OptionBits</TT>.</DD></DL COMPACT><CODE CLASS="Cv.Code"><A NAME="pgfId=18796"> </A>typedef OptionBits IOPreparationOptions;<BR>enum{<BR>&nbsp;&nbsp;&nbsp;&nbsp;kNextIOIsInput&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0x00000001,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kNextIOIsOutput&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0x00000002,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kMoreIOTransfers&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 0x00000004<BR>};</CODE><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3728"> </A>DESCRIPTION</H5><P CLASS="T1.Text1"><A NAME="pgfId=3729"> </A><TT CLASS="cv">CheckpointIO</TT> performs the necessary follow-up operations for a device I/O transfer and optionally prepares for a new transfer or reclaims the system resources associated with memory preparation. To reclaim resources, <TT CLASS="cv">CheckpointIO</TT> should be called even if the I/O operation was abandoned.<A NAME="marker=7172"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=3730"> </A>Mac&nbsp;OS supports multiple concurrent preparations of memory ranges or portions of memory ranges. In this case, cache actions are appropriate and individual pages are not unlocked until all transactions have been finalized.</P><P CLASS="T1.Text1"><A NAME="pgfId=3731"> </A>The <TT CLASS="cv">theIOPreparation</TT> parameter is the <TT CLASS="cv">IOPreparationID</TT> value for the I/O operation, as returned by a previous call to <TT CLASS="cv">PrepareMemoryForIO</TT>. This ID is not valid following <TT CLASS="cv">CheckpointIO</TT> if the <TT CLASS="cv">kMoreTransfers</TT> option is omitted.</P><P CLASS="T1.Text1"><A NAME="pgfId=3732"> </A>The <TT CLASS="cv">Options</TT> parameter specifies optional operations. Values for this field are the following:</P><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18798"> </A><TT CLASS="cv">kNextIOIsInput</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3733"> </A>Data will be moved into main memory.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18807"> </A><TT CLASS="cv">kNextIOIsOutput</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3734"> </A>Data will be moved out of main memory.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=18816"> </A><TT CLASS="cv">kMoreIOTransfers</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3735"> </A>Further I/O transfers will occur to or from the buffer. If <TT CLASS="cv">kMoreIOTransfers</TT> is omitted, the buffer is allowed to page and <TT CLASS="cv">IOPreparationID</TT> is invalidated.</DD></DL COMPACT><P CLASS="T1.Text1"><A NAME="pgfId=3736"> </A>The <TT CLASS="cv">IOPreparationTable</TT> must remain allocated until the last <TT CLASS="cv">CheckPointIO</TT> is called. </P></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3737"> </A>EXECUTION CONTEXT</H5><P CLASS="T1.Text1"><A NAME="pgfId=3738"> </A><TT CLASS="cv">CheckpointIO</TT> may be called from task level or secondary interrupt level but not from hardware interrupt level.</P></DIV><DIV><H5 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3752"> </A>RESULT CODES</H5><TABLE border=1 cellpadding=3><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=3741"> </A>noErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3743"> </A>0</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3745"> </A>No error</FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><CODE CLASS="TbCv.TblCode"><A NAME="pgfId=3747"> </A>paramErr</CODE></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3749"> </A>-50</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT.TblText"><A NAME="pgfId=3751"> </A>Bad parameter</FONT></TD></TR></TABLE></DIV><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.156.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.156.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.158.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
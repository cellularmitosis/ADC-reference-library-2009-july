<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Search Fields: Configuring a Search Menu</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Configuring a Search Menu"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20002245" title="Configuring a Search Menu"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000465" target="_top">User Experience</a> &gt; <a href="../index.html" target="_top">Search Fields</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="AddingSearchField.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ConfiguringTargetAction.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20002245-BABFIBIA" title="Configuring a Search Menu"></a><hr /><H1>Configuring a Search Menu</H1><p>A search field has a menu that users can access by clicking the small triangle next to the search button. The items in this pop-up icon menu have two purposes: To list recently entered search strings, and to list search categories for limiting the scope of the search. You can also specify <em>when</em> the search field sends its action message.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="MenuTemplate.html#//apple_ref/doc/uid/20002245-SW2">Generating Action Messages</a>
				
			<br/>
			
        
			
			
				<a href="MenuTemplate.html#//apple_ref/doc/uid/20002245-75516">Configuring a Menu Template</a>
				
			<br/>
			
        
			
			
				<a href="MenuTemplate.html#//apple_ref/doc/uid/20002245-76818">Specifying a Search Category</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20002245-SW2" title="Generating Action Messages"></a><h2>Generating Action Messages</h2><p>A search field has two modes for generating action messages. The first mode is similar to a text field; a message is sent when a user clicks the search button or presses Return when the insertion point is in the search field. The second mode, which is the default, is for incremental searches; the search field sends an action message at each keystroke. Typically you set the mode in Interface Builder (see <span class="content_text"><a href="AddingSearchField.html#//apple_ref/doc/uid/20002244-BABFIBIA">“Adding a Search Field to Your Application”</a></span>). To set the message-generation mode programmatically, send <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSearchFieldCell/setSendsWholeSearchString:" target="_top">setSendsWholeSearchString:</a></code> to the search field cell with an argument of <code>NO</code> for incremental searches and <code>YES</code> for regular searches. </p><a name="//apple_ref/doc/uid/20002245-75516" title="Configuring a Menu Template"></a><h2>Configuring a Menu Template</h2><p>If you specify a menu in Interface Builder or programatically, the search button has a menu indicator and the search menu is displayed when the user clicks the search button. Do not modify the menu while it is in use by the search field. This is because a copy is not made.</p><p>To configure this pop-up menu, create a menu template (which is an <code>NSMenu</code> object) and populate this menu template with the items (<code>NSMenuItem</code> objects) you want to appear. Items in the menu can be given special meaning by using predefined tags described in the Constants section of <code>NSSearchFieldCell</code>.</p><p>You can specify the menu template used when generating the pop-up menu in the search field. This is easily done with Interface Builder. Or, if you have programmatically constructed the menu template, invoke <code>setSearchMenuTemplate:</code> to install it in the search field.</p><p><span class="content_text">Figure 1</span> shows a simple menu template with a recents item, a clear item, and a no recents item.</p><br/><div><a name="//apple_ref/doc/uid/20002245-75571-BBCFBBDJ" title="Figure 1Sample menu template with info pane"></a><p><a name="//apple_ref/doc/uid/20002245-75571" title="Figure 1Sample menu template with info pane"></a><strong>Figure 1&nbsp;&nbsp;</strong>Sample menu template with info pane</p><img src = "Art/menuinib.gif" alt = "Sample menu template with info pane" width="293" height="341"></div><br/><p> The menu item tag is specified in the Tag field. In <span class="content_text">Figure 1</span>, the menu item is of the type <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldRecentsMenuItemTag" target="_top">NSSearchFieldRecentsMenuItemTag</a></code>. Although not pictured, the tag for the Clear menu item is <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldClearRecentsMenuItemTag" target="_top">NSSearchFieldClearRecentsMenuItemTag</a></code> and for the Empty menu item it’s <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldNoRecentsMenuItemTag" target="_top">NSSearchFieldNoRecentsMenuItemTag</a></code>. You can also add a menu item with the <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldRecentsTitleMenuItemTag" target="_top">NSSearchFieldRecentsTitleMenuItemTag</a></code> tag for an item that does not appear if there are no recent strings to display, or conversely a menu item with the <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldNoRecentsMenuItemTag" target="_top">NSSearchFieldNoRecentsMenuItemTag</a></code> tag for an item that only appears if there are no recent strings to display.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20002245-DontLinkElementID_2" title="Important:"></a><p><strong>Important:</strong>&nbsp;Currently, Interface Builder does not allow you to enter the symbolic name for these menu item tags. Instead you must enter the corresponding numeric value in the Tag field. For <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldRecentsTitleMenuItemTag" target="_top">NSSearchFieldRecentsTitleMenuItemTag</a></code> enter <code>1000</code>, for <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldRecentsMenuItemTag" target="_top">NSSearchFieldRecentsMenuItemTag</a></code> enter <code>1001</code>, for <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldClearRecentsMenuItemTag" target="_top">NSSearchFieldClearRecentsMenuItemTag</a></code> enter <code>1002</code>, and for <code><a href="../../../Reference/ApplicationKit/Classes/NSSearchFieldCell_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSSearchFieldNoRecentsMenuItemTag" target="_top">NSSearchFieldNoRecentsMenuItemTag</a></code> enter <code>1003</code>. This limitation does not apply to specifying the tag programatically.</p><p></p></div><p>You can also do all of this programatically. <span class="content_text">Listing 1</span> illustrates how you might set up the search menu template.</p><a name="//apple_ref/doc/uid/20002245-76672-CJBIDADF" title="Listing 1Setting the menu template for recent search strings"></a><p class="codesample"><a name="//apple_ref/doc/uid/20002245-76672" title="Listing 1Setting the menu template for recent search strings"></a><strong>Listing 1&nbsp;&nbsp;</strong>Setting the menu template for recent search strings</p><div class="codesample"><table><tr><td scope="row"><pre>- (void) awakeFromNib<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSMenu *cellMenu = [[[NSMenu alloc] initWithTitle:@"Search Menu"]<span></span></pre></td></tr><tr><td scope="row"><pre>                autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSMenuItem *item;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    item = [[[NSMenuItem alloc] initWithTitle:@"Clear"<span></span></pre></td></tr><tr><td scope="row"><pre>                                action:NULL<span></span></pre></td></tr><tr><td scope="row"><pre>                                keyEquivalent:@""] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTag:NSSearchFieldClearRecentsMenuItemTag];<span></span></pre></td></tr><tr><td scope="row"><pre>    [cellMenu insertItem:item atIndex:0];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    item = [NSMenuItem separatorItem];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTag:NSSearchFieldRecentsTitleMenuItemTag];<span></span></pre></td></tr><tr><td scope="row"><pre>    [cellMenu insertItem:item atIndex:1];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    item = [[[NSMenuItem alloc] initWithTitle:@"Recent Searches"<span></span></pre></td></tr><tr><td scope="row"><pre>                                action:NULL<span></span></pre></td></tr><tr><td scope="row"><pre>                                keyEquivalent:@""] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTag:NSSearchFieldRecentsTitleMenuItemTag];<span></span></pre></td></tr><tr><td scope="row"><pre>    [cellMenu insertItem:item atIndex:2];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    item = [[[NSMenuItem alloc] initWithTitle:@"Recents"<span></span></pre></td></tr><tr><td scope="row"><pre>                                action:NULL<span></span></pre></td></tr><tr><td scope="row"><pre>                                keyEquivalent:@""] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTag:NSSearchFieldRecentsMenuItemTag];<span></span></pre></td></tr><tr><td scope="row"><pre>    [cellMenu insertItem:item atIndex:3];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    id searchCell = [searchField cell];<span></span></pre></td></tr><tr><td scope="row"><pre>    [searchCell setSearchMenuTemplate:cellMenu];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>A menu is associated with your search field only if you specify one with Interface Builder. If you are creating the search field programatically and do not want a menu, set the menu template to <code>nil</code>.</p><a name="//apple_ref/doc/uid/20002245-76818" title="Specifying a Search Category"></a><h2>Specifying a Search Category</h2><p>To set up a search category, you create a menu item with a title and an action selector and add it to the menu template. The action selector identifies the method that is invoked using the target-action paradigm when the user selects the item; in this method you can set a flag or other value so that your search implementation knows how to limit the scope of its search. Typically you would add the menu item to the menu template in Interface Builder. You can also do it programmatically, as illustrated in <span class="content_text">Listing 2</span>. This is useful if you create or update the menu dynamically, for example if the categories depend on what table columns are visible in a table view.</p><a name="//apple_ref/doc/uid/20002245-75768-BBCFECJC" title="Listing 2Setting the menu template with a search category"></a><p class="codesample"><a name="//apple_ref/doc/uid/20002245-75768" title="Listing 2Setting the menu template with a search category"></a><strong>Listing 2&nbsp;&nbsp;</strong>Setting the menu template with a search category</p><div class="codesample"><table><tr><td scope="row"><pre>- (void) awakeFromNib<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSMenu *cellMenu = [[[NSMenu alloc] initWithTitle:@"Search Menu"]<span></span></pre></td></tr><tr><td scope="row"><pre>                        autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSMenuItem *item;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    item = [[[NSMenuItem alloc] initWithTitle:@"First Name"<span></span></pre></td></tr><tr><td scope="row"><pre>                                       action:@selector(setSearchCategoryFrom:)<span></span></pre></td></tr><tr><td scope="row"><pre>                                keyEquivalent:@""] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTarget:self];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTag:1];<span></span></pre></td></tr><tr><td scope="row"><pre>    [cellMenu insertItem:item atIndex:0];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    item = [[[NSMenuItem alloc] initWithTitle:@"Last Name"<span></span></pre></td></tr><tr><td scope="row"><pre>                                       action:@selector(setSearchCategoryFrom:)<span></span></pre></td></tr><tr><td scope="row"><pre>                                keyEquivalent:@""] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTarget:self];<span></span></pre></td></tr><tr><td scope="row"><pre>    [item setTag:2];<span></span></pre></td></tr><tr><td scope="row"><pre>    [cellMenu insertItem:item atIndex:1];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    id searchCell = [searchField cell];<span></span></pre></td></tr><tr><td scope="row"><pre>    [searchCell setSearchMenuTemplate:cellMenu];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Tags are optional for search categories, but they allow you to easily discriminate between menu items in the action method. If you choose to specify tags, their values must not be any of the values corresponding to <code>NSSearchFieldRecentsTitleMenuItemTag</code>, <code>NSSearchFieldRecentsMenuItemTag</code>, <code>NSSearchFieldClearRecentsMenuItemTag</code>, or <code>NSSearchFieldNoRecentsMenuItemTag</code>.</p><p>You also have to implement the action method invoked by the menu item—see <span class="content_text"><a href="ConfiguringTargetAction.html#//apple_ref/doc/uid/20002073-SW5">“Search Using a Search Category.”</a></span></p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="AddingSearchField.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ConfiguringTargetAction.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-02-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/SearchFields/Articles/MenuTemplate.html%3Fid%3D10000168i-2.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/SearchFields/Articles/MenuTemplate.html%3Fid%3D10000168i-2.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/SearchFields/Articles/MenuTemplate.html%3Fid%3D10000168i-2.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

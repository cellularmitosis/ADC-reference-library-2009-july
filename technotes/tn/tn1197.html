<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN1197: QuickTime 4.1.1/4.1.2</title>       <meta name="keywords" content="QuickTime">    <meta name="Description" content="Technical Note TN1197: This Technote describes the changesmade between the release of QuickTime 4.1 and the updatereleases of QuickTime 4.1.1 and 4.1.2."><meta name="categories" content="QuickTime"><meta name="week-posted" content="Mar 27, 2000 - Apr 7, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10003036" title="QuickTime 4.1.1/4.1.2"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/QuickTime/index.html">QuickTime</a> &gt; <a href="../../technicalnotes/QuickTime/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/QuickTime/idxCarbon-date.html" target="_blank">QuickTime > Carbon</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1197</div>
<div id="pageheadsub">QuickTime 4.1.1/4.1.2</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"> <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">     <tr><td width=300 valign="top" align=left scope="row">    <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td></tr><tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left>       <span id="menutitle">CONTENTS   <br>  <br>       </span>   </td></tr><tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left>       <!-- begin_toc --><P id="menutext">    <A HREF = "#Section1">QuickTime 4.1.1 Changes</A><BR><BR>           <A HREF = "#Section2">QuickTime 4.1.2 Changes</A><BR><BR>    <A HREF = "#Section3">Detecting the Presence/Version of QuickTime from Web Browsers on Windows</A><BR><BR>    <A HREF = "#Section4">Using Gestalt to get the QuickTime Version</A><BR><BR><A HREF = "#Summary">Summary</A><BR><BR><A HREF = "#References">References</A><BR><BR><A HREF = "#Downloads">Downloadables</a></p>   </td></tr><tr>   <td width=300 align=left scope="row">       <img src="images/tnmenubottom.gif" alt="" width=300 height=16>   </td></tr>    </table></td><td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">QuickTime 4.1.1/4.1.2 can be described as a minimal-changes releases that provide a number of miscellaneous bug fixes.</p><P id = "introtext">This Technote describes the changes made between the release of QuickTime 4.1 and the update releases of QuickTime 4.1.1 and 4.1.2. </p><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [May 01 2000]</h3><!-- end_date --></TD>     </TR>  </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content --><A NAME="Section1"></A><h2>QuickTime 4.1.1 Changes</H2><P>Listed below are many of the important changes included in the QuickTime 4.1.1 release:</P><UL TYPE="disc">    <LI>Fixed an AppleScript bug for QuickTime Player where the frontmost window was not getting targeted by default.</li>    <LI>Fixed an AppleScript bug for QuickTime Player where the "close every window" action would fail with an error.</li>    <LI>Added Windows 2000 support.</li>    <LI>Improved the Sequence Grabber to cope better when compressing to a different-sized format. This means that using DV video as an input to Sorenson Broadcaster is now viable (we still recommend broadcasting Built-In audio rather than DV audio).</li>    <LI>If you use the <CODE>QDesign</CODE> codec for streaming, you should know there are significant improvements in the transmission of both live and stored (video on demand) streams. These improvements are backwards-compatible with earlier clients.  In particular, those using <CODE>QDesign</CODE> for live broadcasting should update as soon as possible, and make sure they are using the <CODE>QDesign</CODE> (not QuickTime) packetizer.  Those with hinted movies may find some improvement in the data rate, after re-hinting the movies.</li></UL><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Those using the QuickTime packetizer for <I>any</I> stream at this point are urged to reconsider.  This packing has no loss resilience and poor use of network bandwidth.  It was designed as a catch-all for codecs without a good packing.  In particular, its use for PureVoice is almost certainly a mistake.  If you are using it for PureVoice because you are using a sampling rate other than 8kHz, you should know that the codec was designed at this rate and may not work as effectively at other rates, and the packing assumes this is the rate, thus forcing the QuickTime packetizer for any other sampling rate.</P></TD></TR></TABLE></CENTER><BR><BR><UL TYPE="disc">    <LI>Improved out-of-order packet handling when watching streaming content.</li>    <LI>Added audio/mpegurl and audio/x-mpegurl mime types to the QuickTime Plug-In to handle M3U files (lists of MP3's).</li>    <LI>Added Streaming Transport to the QuickTime Player Edit/Preferences Menu.</li>    <LI>Added SMIL "qt:chapter-mode" tag, which was documented, but missing in QT 4.1.</li>    <LI>Exporting movies with no audio or video track now works correctly.</li>    <LI>Export of Flash to DV bug fix.</li>    <LI>URL links in a web page for QuickTime VR movies that rely on the HOTSPOT parameter of an &lt;EMBED&gt; tag now work correctly.</li>    <LI>Fixed bug where <CODE>SoundConverterGetBufferSizes</CODE> would occasionally return the wrong destination number of bytes.</li>    <LI>System no longer hangs when opening picture files on a Kodak Picture CD (multi-session ISO-9660).</li>    <LI>"Check for QuickTime Updates" option in QuickTime Player now works while playing a movie.</li>    <LI>Incorporated Sound Manager audio/video synchronization improvements.</li>    <LI>Image sequence reference movies now get temporally compressed.</li>    <LI>Sequence Grabber DV preview with bottleneck procedure now works correctly.</li>    <LI>Better support for streaming through various firewalls/proxies.</li>    <LI>Added support for .sml as a file extension for SMIL, and removed the QuickTime Exchange .smi conflict with self-mounting images on Mac.</li>    <LI>Movies made by importing a SMIL file now play correctly no matter what platform they were made on or viewed on, provided the file was originally imported by QuickTime 4.1.1 (not QuickTime 4.1).</li>    <LI>Overall improvements to SMIL import.</li>    <LI>Added <CODE>SGGetDataOutputStorageSpaceRemaining64</CODE> API, which was missing in QT 4.1.</li>    <LI>Added support for a couple of TIFF variants we weren't handling:<BR>    1) uncompressed single-strip TIFF files with missing StripByteCounts fields and <BR>    2) 8-bit RGB palette TIFFs that have an 8-bit alpha value associated with every pixel.</li></UL><BR><P><A HREF = "#top">Back to top</A></p><BR><A NAME="Section2"></A><h2>QuickTime 4.1.2 Changes</H2><P>Listed below are many of the important changes included in the QuickTime 4.1.2 release:</P><UL TYPE="disc">    <LI>Fixed parsing of "mailto:"-style URLs, and URLs containing characters such as "?".<BR>(<B>Note:</B> The above fix was made by simply backing out a QT 4.1.1 change that fixed "going to relative URLs from sprite actions in QTPlayer."  This means that "going to relative URLs from sprite actions in QTPlayer" is now back to its previous (pre-4.1.1) state: it doesn't work. We'll take a better shot at this next time.)<BR></li>    <LI>Fixed a QT 4.1.1 bug where overrides in an &lt;EMBED&gt; tag (such as "CONTROLLER=FALSE") were being reset to the movie's authored value during a QTNEXT.</li>    <LI>Avoid a QT 4.1.1 crash that could occur when certain applications passed garbage GWorlds to the <CODE>DisposeGWorld</CODE> function.</li>    <LI>Fixed a QT 4.1.1 sequence grabber bug where some USB YUV cameras would display a bad preview image when capturing if the preview window was clipped.</li></UL><BR><P><A HREF = "#top">Back to top</A></p><BR><A NAME="Section3"></A><H2>Detecting the Presence/Version of QuickTime from Web Browsers on Windows</H2><H3>QuickTimeCheck.ocx</H3><P>Included in QuickTime for Windows 4.1.1 is the file QuickTimeCheck.ocx, aWindows-only DLL that implements an "automation object", which isessentially a scriptable object for embedding in a Windows application likeInternet Explorer. This particular object gives HTML authors in Internet Explorer for Windows the ability to detect the presence of QuickTime and determine its version.</P><P>Unlike ActiveX controls, this kind of object doesn't have any user interface. Instead, a web developer using VB Script (or JScript in Internet Explorer) will create an instance of the object and make direct requests to the object. A web developer must use a VB Script embedded in a web page to create and to communicate with the object.</P><H3>Checking for QuickTime</H3><P>To detect the presence of QuickTime, first create the object, check if the object creation succeeded and check if the QuickTime extension (the file QuickTime.qts) is available. The following VB Script shows how this is done:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>Dim theObjectOn Error Resume Next 'Do not report runtime error if object itself wasnot installedSet theControl = CreateObject("QuickTimeCheckObject.QuickTimeCheck.1")On Error Goto 0      'Allow runtime errorsIf IsObject(theObject) ThenIf theObject.IsQuickTimeAvailable(0) ThenMsgBox "QuickTime is available!"End IfEnd If</pre></TD></TR></TABLE></CENTER><BR><BR><P>There's another flavor of the <CODE>IsQuickTimeAvailable</CODE> method which can also be used. Passing the value 1 instead of 0 to the <CODE>IsQuickTimeAvailable</CODE> method will fully initialized QuickTime instead of just checking for the QuickTime.qts file in the Windows system directory. The disadvantage to passing the value 1 to the <CODE>IsQuickTimeAvailable</CODE> method is it can take a long time to complete. For this reason, we strongly encourage developers to pass 0 instead.</P><P>Shown below is HTML code with an embedded VB Script which makes use of the QuickTimeCheck.ocx object to check for the presence of QuickTime. If QuickTime is detected, the code simply displays a message stating QuickTime was found. Similarly, if QuickTime is not detected, the code displays a message stating QuickTime could not be found.  However, if you find users that don't have QuickTime, you'll probably want to suggest they install it in order to get the best possible user experience.  You can use a web badge on your web site to provide an active visual link to <A HREF = "http://www.apple.com/quicktime">Apple's QuickTime site</A>.  See <A HREF = "http://www.apple.com/about/webbadges/index.html">Apple's web badges page</a> for more information on web badge usage.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>&lt;HEAD&gt;&lt;TITLE&gt;Test for QT&lt;/TITLE&gt;&lt;SCRIPT LANGUAGE="Javascript"&gt;&lt;!-- hide from pre-script browsers  var haveqt = false;//--&gt;&lt;/SCRIPT&gt;&lt;SCRIPT LANGUAGE="VBScript"&gt;&lt;!-- hide from pre-script browsers    On Error  Resume Next       Set theObject = CreateObject("QuickTimeCheckObject.QuickTimeCheck.1")    On Error  goto 0    If IsObject(theObject) Then      If theObject.IsQuickTimeAvailable(0) Then   'Just check for file        haveqt = true      End If    End If//--&gt;&lt;/SCRIPT&gt;&lt;SCRIPT LANGUAGE="Javascript"&gt;&lt;!-- hide from pre-script browsers  if (navigator.plugins) {    for (i=0; i &lt; navigator.plugins.length; i++ ) {      if (navigator.plugins[i].name.indexOf("QuickTime") &gt;= 0)        { haveqt = true; }      }    }//--&gt;&lt;/SCRIPT&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;SCRIPT LANGUAGE="Javascript"&gt;&lt;!-- hide from pre-script browsers  if (haveqt)    {document.write("You have QuickTime!!!");}    else    {document.write("You don't seem to have QuickTime");}//--&gt;&lt;/SCRIPT&gt;&lt;NOSCRIPT&gt;Man, you don't even have Scripting!&lt;/NOSCRIPT&gt;&lt;NOEMBED&gt;You aren't going to see QT if you don't allow EMBEDs!&lt;/NOEMBED&gt;&lt;H1&gt;Check for QuickTime&lt;/H1&gt;&lt;/BODY&gt;&lt;/HTML&gt;</pre></TD></TR></TABLE></CENTER><BR><BR><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>The above HTML code has been carefully written to work on a variety of browsers and platforms.  You are, of course, free to make your own changes to this code, but please understand any changes you make may cause the code to work incorrectly. Also, if you reference any media files in your code using an &lt;&nbsp;EMBED&nbsp;&gt; tag, you may want to include the parameter TYPE=&#148;video/quicktime&#148; to insure the file is handled by the QuickTime plug-in.</P></TD></TR></TABLE></CENTER><BR><BR><P>In devising your QuickTime detection strategy, probably the best way to proceed is to first use a basic script like the one shown above at the HTML level, and alternately use QuickTime sprites, or other techniques, to do more sophisticated checking if necessary.</P><P>Finally, remember QuickTimeCheck.ocx is only installed with QuickTime 4.1.1. Therefore, the above code will report that QuickTime is not present if it is run on systems that do not have QuickTime 4.1.1.</P><H3>Version Information</H3><P>It's now possible to determine the particular version of QuickTime installed using the QuickTimeCheck.ocx object. The following line of code:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>Set myQTVersion = theObject.QuickTimeVersion</pre></TD></TR></TABLE></CENTER><BR><BR><P>will return in <CODE>myQTVersion</CODE> an integer value corresponding to the version of QuickTime installed (the same value you would get when calling the Macintosh Toolbox <CODE>Gestalt</CODE> function with the <CODE>gestaltQuickTime</CODE> selector - see <a href="../../documentation/macos8/OSSvcs/GestaltManager/gestaltmanager.html">Inside Macintosh: Operating System Utilities / Chapter 1 - Gestalt Manager</a> for more information).</P><P>For example, a decimal return value of <CODE>68321280</CODE> would indicate a release version of QuickTime 4.1.2. Seen in hexadecimal, this number appears as <CODE>0x04128000</CODE>, which we can identify as version 4.1.2. The <CODE>80</CODE> in this hexadecimal value indicates this is a release version (again, refer to the Gestalt Manager documentation for more information). </P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>The QuickTimeVersion method calls <CODE>IsQuickTimeAvailable(1)</CODE> internally, so it can also be expensive to make this call if <CODE>IsQuickTimeAvailable(1)</CODE> hasn't already been called.</P></TD></TR></TABLE></CENTER><BR><BR><P>The QuickTimeCheck.ocx object works on Windows 95/98, Windows NT 4, and Windows 2000. It is installed when a QuickTime basic installation is performed, which means it will always be available.</P><BR><P><A HREF = "#top">Back to top</A></p><BR><A name="Section4"></A><H2>Using Gestalt to get the QuickTime Version</H2><P>As always, the standard way to determine which version of QuickTime is installed is to call the Macintosh Toolbox API <CODE>Gestalt</CODE> function. The listing below shows a code snippet demonstrating how to check the version of QuickTime.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>{     /* check the version of QuickTime installed */     long version;     OSErr result;     result = Gestalt(gestaltQuickTime,&amp;version);     if ((result == noErr) &amp;&amp; (version &gt;= 0x04128000))     {          /* we have version 4.1.2! */     }}</pre></TD></TR></TABLE></CENTER><BR><BR><A NAME="Summary"></A>         <H2>Summary</H2>         <P>You are encouraged to review this Technote and related information to help implement changes in your code to take advantage of the added features and bug fixes in QuickTime 4.1.1 and 4.1.2.</p>      <BR><P><A HREF = "#top">Back to top</a></p><BR><a name="References"></a><H2>References</H2><p><a href="../../documentation/quicktime/quicktime.html">Inside Macintosh: QuickTime</A></p><p><a href="../../documentation/macos8/OSSvcs/GestaltManager/gestaltmanager.html">Inside Macintosh: Gestalt Manager</A></p><BR><P><A HREF = "#top">Back to top</a></p><BR>      <A NAME="Downloads"></A> <h2>Downloadables</h2><center><TABLE BORDER=0 CELLPADDING=3 WIDTH="600"> <TR>     <td width=50 align=left>       <P ALIGN=center><img src="images/acrobatsmall.gif" align=middle alt="Acrobat" width=22 height=23></P>    </TD>    <td align="left">       <p>Acrobat version of this Note (64K).</P>    </TD>    <td width=60 align=left>       <p><A HREF="pdf/tn1197.pdf">Download</A></P>    </TD>  </TR> </table></center><BR><BR><BR><P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1197.html%3Fid%3DDTS10003036-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1197.html%3Fid%3DDTS10003036-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1197.html%3Fid%3DDTS10003036-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
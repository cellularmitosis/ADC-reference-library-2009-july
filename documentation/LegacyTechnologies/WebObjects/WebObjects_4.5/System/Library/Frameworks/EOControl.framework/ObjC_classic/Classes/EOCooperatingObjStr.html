<HTML>		<HEAD>		<TITLE>			EOCooperatingObjectStore		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>EOControl Reference</font><br><br><!--end of path --><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <a name = "EOCooperatingObjectStore"><BR><h1><FONT COLOR="#000066"><a name="//apple_ref/occ/cl/EOCooperatingObjectStore">EOCooperatingObjectStore</a></FONT></h1><br></a><blockquote><dl><dt><b>Inheritsfrom: </b></dt><dd> <a href="../Classes/EOObjectStore.html#//apple_ref/occ/cl/EOObjectStore">EOObjectStore</a> : NSObject</dd></dl></blockquote><blockquote><dl><dt><b>Conforms to: </b></dt><dd> NSObject</dd><dd>(NSObject)</dd></dl></blockquote><blockquote><dl><b>Declared in: </b><dd>EOControl/EOObjectStoreCoordinator.h </dd></dl></blockquote><br><br><HR SIZE=4><br><h2>Class Description</h2><hr><p>EOCooperatingObjectStore is a part of thecontrol layer's object storage abstraction. It is an abstract classthat defines the basic API for object stores that work togetherto manage data from several distinct data repositories.</p><p> For more general information on the object storage abstraction,see  <a frame= "conv" href="../Introduction.html#BIACAIJE">"Object Storage Abstraction" </a> in the introduction to the EOControlFramework.</p><p>The interaction between EOCooperatingObjectStores is managedby another class, EOObjectStoreCoordinator. The EOObjectStoreCoordinatorcommunicates changes to its EOCooperatingObjectStores by passingthem an EOEditingContext. Each cooperating store examines the modifiedobjects in the editing context and determines if it's responsiblefor handling the changes. When a cooperating store has changes thatneed to be handled by another store, it communicates the changesto the other store back through the coordinator.</p><p>For relational databases, Enterprise Objects Framework providesa concrete subclass of EOCooperatingObjectStore, EODatabaseContext(EOAccess). A database context represents a single connection toa database server, fetching and saving objects on behalf of oneor more editing contexts. However, a database context and an editingcontext don't interact with each other directly-a coordinatoracts as a mediator between them.</p><center><img src = "Art/DBasic2.GIF" alt = "[image: Art/DBasic2.GIF]"></center><br><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Committing or discardingchanges</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/commitChanges">- commitChanges</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">- ownsGlobalID:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/rollbackChanges">- rollbackChanges</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/prepareForSaveWithCoordinator:editingContext:">- prepareForSaveWithCoordinator:editingContext:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/recordChangesInEditingContext">- recordChangesInEditingContext</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/recordUpdateForObject:changes:">- recordUpdateForObject:changes:</a></dd></dl><dl><dt>Returning informationabout objects</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/valuesForKeys:object:">- valuesForKeys:object:</a></dd></dl><dl><dt>Determining if the EOCooperatingObjectStoreis responsible for an operation</dt><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/ownsObject:">- ownsObject:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">- ownsGlobalID:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/handlesFetchSpecification:">- handlesFetchSpecification:</a></dd></dl></blockquote><BR><BR><h2>Instance Methods</h2><hr><a name = "CCJDAHGI"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/commitChanges">commitChanges</a></h3></a><p><code>- (void)<b>commitChanges</b></code></p>Overridden by subclasses to commit the transaction. Raises anexception if an error occurs; the error message indicates the natureof the problem.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">- ownsGlobalID:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/commitChanges">- commitChanges</a>,  <a frame= "conv" href="../Classes/EOObjectStoreCoordinator.html#//apple_ref/occ/instm/EOObjectStoreCoordinator/saveChangesInEditingContext:">- saveChangesInEditingContext:</a> ( <a frame= "conv" href="../Classes/EOObjectStoreCoordinator.html#EOObjectStoreCoordinator">EOObjectStoreCoordinator</a>)</p><hr WIDTH=25% ALIGN=LEFT><a name = "managesEntityNamed_"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/handlesFetchSpecification:">handlesFetchSpecification:</a></h3></a><p><code>- (BOOL)<b>handlesFetchSpecification:</b>(EOFetchSpecification*)<em>fetchSpecification</em></code></p>Overridden by subclasses to return YES if thereceiver is responsible for fetching the objects described by <em>fetchSpecification</em>.For example, EODatabaseContext (EOAccess) determines whether it's responsiblebased on <em>fetchSpecification</em>'s entityname.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">- ownsGlobalID:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/ownsObject:">- ownsObject:</a> </p><hr WIDTH=25% ALIGN=LEFT><a name = "performChanges"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/ownsGlobalID:">ownsGlobalID:</a></h3></a><p><code>- (BOOL)<b>ownsGlobalID:</b>(EOGlobalID*)<em>globalID</em></code></p>Overridden by subclasses to return YES if thereceiver is responsible for fetching and saving the object identifiedby <em>globalID</em>. For example, EODatabaseContext(EOAccess) determines whether it's responsible based on the entityassociated with <em>globalID</em>.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/handlesFetchSpecification:">- handlesFetchSpecification:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/ownsObject:">- ownsObject:</a> </p><hr WIDTH=25% ALIGN=LEFT><a name = "ownsObject_"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/ownsObject:">ownsObject:</a></h3></a><p><code>- (BOOL)<b>ownsObject:</b>(id)<em>object</em></code></p>Overridden by subclasses to return YES if thereceiver is responsible for fetching and saving <em>object</em>.For example, EODatabaseContext (EOAccess) determines whether it'sresponsible based on the entity associated with <em>object</em>.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">- ownsGlobalID:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/handlesFetchSpecification:">- handlesFetchSpecification:</a> </p><hr WIDTH=25% ALIGN=LEFT><a name = "performChanges"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">performChanges</a></h3></a><p><code>- (void)<b>performChanges</b></code></p>Overridden by subclasses to transmit changesto the receiver's underlying database. Raises an exception ifan error occurs; the error message indicates the nature of the problem.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/commitChanges">- commitChanges</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/rollbackChanges">- rollbackChanges</a>,  <a frame= "conv" href="../Classes/EOObjectStoreCoordinator.html#//apple_ref/occ/instm/EOObjectStoreCoordinator/saveChangesInEditingContext:">- saveChangesInEditingContext:</a> ( <a frame= "conv" href="../Classes/EOObjectStoreCoordinator.html#EOObjectStoreCoordinator">EOObjectStoreCoordinator</a>)</p><hr WIDTH=25% ALIGN=LEFT><a name = "prepareForSaveWithCoordinator_editingContext_"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/prepareForSaveWithCoordinator:editingContext:">prepareForSaveWithCoordinator:editingContext:</a></h3></a><p><code>- (void)<b>prepareForSaveWithCoordinator:</b>(EOObjectStoreCoordinator*)<em>coordinator</em><b>editingContext:</b>(EOEditingContext*)<em>anEditingContext</em></code></p>Overridden by subclasses to notify the receiverthat a multi-store save operation overseen by <em>coordinator</em> isbeginning for <em>anEditingContext</em>. Forexample, the receiver might prepare primary keys for newly insertedobjects so that they can be handed out to other EOCooperatingObjectStoresupon request. The receiver should be prepared to receive the messages  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/recordChangesInEditingContext">recordChangesInEditingContext</a> and  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/recordUpdateForObject:changes:">recordUpdateForObject:changes:</a>.<p>Afterperforming these methods, the receiver should be prepared to receivethe possible messages  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">ownsGlobalID:</a> and then  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/commitChanges">commitChanges</a> or  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/rollbackChanges">rollbackChanges</a>. </p><hr WIDTH=25% ALIGN=LEFT><a name = "recordChangesInEditingContext"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/recordChangesInEditingContext">recordChangesInEditingContext</a></h3></a><p><code>- (void)<b>recordChangesInEditingContext</b></code></p>Overridden by subclasses to instruct the receiverto examine the changed objects in the receiver's EOEditingContext,record any operations that need to be performed, and notify thereceiver's EOObjectStoreCoordinator of any changes that need tobe forwarded to other EOCooperatingObjectStores. <p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/prepareForSaveWithCoordinator:editingContext:">- prepareForSaveWithCoordinator:editingContext:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/recordUpdateForObject:changes:">- recordUpdateForObject:changes:</a> </p><hr WIDTH=25% ALIGN=LEFT><a name = "recordUpdateForObject_ changes_"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/recordUpdateForObject:changes:">recordUpdateForObject:changes:</a></h3></a><p><code>- (void)<b>recordUpdateForObject:</b>(id)<em>object</em><b>changes:</b>(NSDictionary *)<em>changes</em></code></p>Overridden by subclasses to communicate fromone EOCooperatingObjectStore to another (through the EOObjectStoreCoordinator)that <em>changes</em> need to be made to an <em>object</em>.For example, an insert of an object in a relationship property mightrequire changing a foreign key property in an object owned by anotherEOCooperatingObjectStore. This method is primarily used to manipulaterelationships.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/prepareForSaveWithCoordinator:editingContext:">- prepareForSaveWithCoordinator:editingContext:</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/recordChangesInEditingContext">- recordChangesInEditingContext</a> </p><hr WIDTH=25% ALIGN=LEFT><a name = "rollbackChanges"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/rollbackChanges">rollbackChanges</a></h3></a><p><code>- (void)<b>rollbackChanges</b></code></p>Overridden by subclasses to roll back changesto the underlying database. Raises one of several possible exceptionsif an error occurs; the error message should indicate the natureof the problem.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/commitChanges">- commitChanges</a>,  <a frame= "conv" href="#//apple_ref/occ/instm/EOCooperatingObjectStore/performChanges">- ownsGlobalID:</a>,  <a frame= "conv" href="../Classes/EOObjectStoreCoordinator.html#//apple_ref/occ/instm/EOObjectStoreCoordinator/saveChangesInEditingContext:">- saveChangesInEditingContext:</a> (EOObjectStoreCoordinator)</p><hr WIDTH=25% ALIGN=LEFT><a name = "valuesForKeys_object_"><BR><h3><a name="//apple_ref/occ/instm/EOCooperatingObjectStore/valuesForKeys:object:">valuesForKeys:object:</a></h3></a><p><code>- (NSDictionary *)<b>valuesForKeys:</b>(NSArray*)<em>keys</em><b>object:</b>(id)<em>object</em></code></p>Overridden by subclasses to return values (asidentified by <em>keys</em>) held by the receiverthat augment properties in <em>object</em>.For instance, an EODatabaseContext (EOAccess) stores foreign keysfor the objects it owns (and primary keys for new objects). Theseforeign and primary keys may well not be defined as properties ofthe object. Other database contexts can find out these keys by sendingthe database context that owns the object a <b>valuesForKeys:object:</b> message.Note that you use this for properties that are <em>not</em> storedin the object, so using key-value coding directly on the objectwon't always work.<hr WIDTH=25% ALIGN=LEFT><BR><br><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
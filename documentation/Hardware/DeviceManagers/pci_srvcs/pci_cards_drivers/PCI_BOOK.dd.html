<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Driver Loader Library9</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.dc.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.de.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="CO.ChapOpener"><A NAME="pgfId=3291"> </A><A NAME="29300"> </A>Driver Loader Library</H1><P CLASS="IntroText1"><A NAME="pgfId=3292"> </A>This chapter describes the <B CLASS="bold">Driver Loader Library (DLL)</B>, a CFM shared-library extension to the Macintosh Device Manager. The DLL provides services to locate, install, and remove drivers.</P><DIV><blockquote><p CLASS="ImportantHead"><b><A NAME="pgfId=14938"> </A>IMPORTANT</b></p><P CLASS="I.Important"><A NAME="pgfId=3293"> </A>Family experts and the Mac&nbsp;OS startup firmware are the primary clients of the DLL. It offers services that control every aspect of driver-to-device matching and driver loading and installation. Driver loading is normally an automatic process that frees drivers from having to match themselves with devices. In some situations, however, drivers may need to perform the match themselves. </P></blockquote><P CLASS="T1.Text1"><A NAME="pgfId=3297"> </A>The installation and removal services are provided for drivers that are called through the Device Manager. Typically, these drivers are of service type <TT CLASS="cv">'ndrv'</TT>. Clients that expect to call drivers through the Device Manager should utilize these services to locate the driver, load it, install it in the unit table, and remove it.</P><P CLASS="T1.Text1"><A NAME="pgfId=3298"> </A>Clients of device drivers that belong to a well-defined family type (such as networking devices within Open Transport) need not use the installation and removal services, since these drivers are not callable via the Device Manager and hence do not reside in the unit table. These clients may choose to use the standard CFM services to load their drivers and may use the loader utilities to do driver matching before using the CFM. </P><P CLASS="T1.Text1"><A NAME="pgfId=3299"> </A>The Driver Loader Library services provide several major functions for drivers:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=3300"> </A>loading and memory space management</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3301"> </A>installation in the unit table</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3302"> </A>removal from the unit table</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3303"> </A>providing information about installed drivers</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3304"> </A>driver matching</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=3308"> </A><A HREF="PCI_BOOK.dd.html#20439" CLASS="XRef">Figure&nbsp;9-1</A> shows the roles and relationships of the Device Manager, the ROM (all Macintosh system software other than the Device Manager), and the <A NAME="marker=3309"> </A>Driver  Loader Library.</P><P CLASS="Fg.Figure"><B><A NAME="pgfId=3314"> </A>Figure&nbsp;9-1	<A NAME="20439"> </A>Position of Driver Loader Library</B></P><DIV><IMG SRC="PCI_BOOK-20.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=3318"> </A><A HREF="PCI_BOOK.dd.html#17927" CLASS="XRef">Figure&nbsp;9-2</A> shows the relationship of the Driver Loader Library's main functions.</P><P CLASS="Fg.Figure"><B><A NAME="pgfId=3323"> </A>Figure&nbsp;9-2	<A NAME="17927"> </A>Driver Loader Library functions</B></P><DIV><IMG SRC="PCI_BOOK-21.gif"></DIV></DIV><H2 CLASS="H1.Heading1TOC"><A HREF="PCI_BOOK.de.html#pgfId=3325" CLASS="Hypertext">Loading and Unloading</A></H2><H2 CLASS="H1.Heading1TOC"><A HREF="PCI_BOOK.e6.html#pgfId=3607" CLASS="Hypertext">Installation</A></H2><H2 CLASS="H1.Heading1TOC"><A HREF="PCI_BOOK.eb.html#pgfId=3789" CLASS="Hypertext">Load and Install Option</A></H2><H2 CLASS="H1.Heading1TOC"><A HREF="PCI_BOOK.ee.html#pgfId=3901" CLASS="Hypertext">Match, Load, and Install</A></H2><H2 CLASS="H1.Heading1TOC"><A HREF="PCI_BOOK.f1.html#pgfId=3972" CLASS="Hypertext">Driver Removal</A></H2><H2 CLASS="H1.Heading1TOC"><A HREF="PCI_BOOK.f3.html#pgfId=4004" CLASS="Hypertext">Getting Driver Information</A></H2><H2 CLASS="H1.Heading1TOC"><A HREF="PCI_BOOK.f5.html#pgfId=4053" CLASS="Hypertext">Searching for Drivers</A></H2><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.dc.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.de.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
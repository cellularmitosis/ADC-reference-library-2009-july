<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TB06: Resources Contained in the Desktop File</title><meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Apr 29, 1985 - May 3, 1985"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002757" title="Resources Contained in the Desktop File"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB06</div>
<div id="pageheadsub">Resources Contained in the Desktop File</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note describes the resources found in the Desktop file.  Youshould not base anything critical on the format of the Desktop file. System 7already uses another scheme as did AppleShare 2.0 under System 6.0.x.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[May 01 1988]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><P>The Desktop file contains almost the same resources for both the Macintosh FileSystem (MFS) and the Hierarchical File System (HFS). This Technical Notedescribes the resources found in both. This information is for reading only.This means your application can read it but it should <b>never</b> write outinformation of its own, because the Finder, as well as Macintosh DeveloperTechnical Support, won't like it.</p><p>The Desktop is a resource file which contains the folder information on an MFSvolume, the "Get Info" comments, the application bundles, <code>'FREF'</code> and<code>'ICN#' </code>resources, and information concerning the whereabouts ofapplications on an HFS disk.  Everything except the comments are preloaded whenthe desktop is opened, making it easier for the Finder to find things.</p><p>The contents of the Desktop file are described below. The resource types arethe same for both MFS and HFS volumes unless otherwise stated.</p><p><code>'APPL'</code>:    This resource type is used by the HFS to locate applications. Thisis used by the Finder to locate the right application when a document isopened. Each application is identified by the creator, the directory number,and the application name. This is used only by HFS.</p><p><code>'BNDL'</code>:    This resource type contains a copy of all of the bundles for allof the applications that are either on the disk or are the creators ofdocuments that are on the disk. This is used by the Finder to find the righticons for documents and applications. If you have a document whose creator theFinder has not seen yet, it will not be in the Desktop file and the defaultdocument icon will be used.</p><p><code>'FREF'</code>:    This contains a copy of all of the <code>'FREF'</code> resourcesreferenced in the bundles.</p><p><code>'FCMT'</code>:    This resource contains all of the "Get Info" comments forapplications and documents. On MFS volumes the ID is a hash of the object'sname. The hashing algorithm is as follows:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    ; FUNCTION HashString(str: Str255): INTEGER;    ; The ID for the FCMT returned in function result    HashString          MOVE.L   (SP)+,A0       ; get return address          MOVE.L   (SP)+,A1       ; get string pointer          MOVEQ    #0,D0          ; get string length          MOVE.B   (A1)+,D0          MOVEQ    #0,D2          ; accumulate ID here    @2          MOVE.B   (A1)+,D1       ; get next char          EOR.B    D1,D2          ; XOR in          ROR.W    #1,D2          ; stir things up          BMI.S    @1             ; ID must be negative          NEG.W    D2    @1          SUBQ.W   #1,D0          ; loop until done          BNE.S    @2             ; until end of string          MOVE     D2,(SP)        ; return the hashed code</pre>	</TD></TR></TABLE></CENTER><p>    For HFS volumes, the ID of the resource is randomly generated using<code>UniqueID</code>. To find the ID of the comment for a file or directory call<code>PBGetCatInfo</code>. The comment ID for a file is kept in<code>ioFlXFndrInfo.fdComment</code>. The comment ID for a directory is kept in<code>ioDrFndrInfo.frComment</code>.</p><p><code>'FOBJ'</code>:     This resource type contains all of the folder information for anMFS volume. The format of this resource is not available. This is only in anMFS volume's Desktop file.</p><p><code>'ICN#'</code>:    This resource type contains a copy of all of the <code>'ICN#'</code>resources referenced in the bundles and any others that may be present.</p><p><code>'STR '</code>:    This is a string that identifies the version of the Finder, but itisn't always correct.</p><p>Creators:    A resource with a type equal to the creator of each application witha bundle is stored in the Desktop file for reference purposes only. The datastored in these resources is for the Finder's use only.</p><p>Be aware that if a resource is copied from an application resource file andthere is an ID conflict, the Finder will renumber the resource in the Desktopfile.</p><P><A HREF="#top">Back to top</A></p><a name="References"></a><h2>References</h2><P><i>Inside Macintosh</i>, Volume I, The Finder Interface</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (48K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_06.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_06.html%3Fid%3DDTS10002757-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_06.html%3Fid%3DDTS10002757-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_06.html%3Fid%3DDTS10002757-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
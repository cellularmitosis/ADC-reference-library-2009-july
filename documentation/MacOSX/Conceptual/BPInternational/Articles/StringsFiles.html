<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Internationalization Programming Topics: Strings Files</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Strings Files"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20000005" title="Strings Files"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../Internationalization/index.html#//apple_ref/doc/uid/TP30000440-TP30001073" target="_top">Internationalization</a> &gt; <a href="../../../../Internationalization/Localization-date.html#//apple_ref/doc/uid/TP30000440-TP30001073-TP30000536" target="_top">Localization</a> &gt; <a href="../index.html" target="_top">Internationalization Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="LocalizingInterfaces.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="InternatResources.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20000005-SW1" title="Strings Files"></a><hr /><H1>Strings Files</H1><p><a name="//apple_ref/doc/uid/20000005-DontLinkElementID_110"></a><a name="//apple_ref/doc/uid/20000005-DontLinkElementID_111"></a>An important part of the localization process is to localize all of the text strings displayed by your application. By their nature, strings located in nib files can be readily localized along with the rest of the nib file contents. Strings embedded in your code, however, must be extracted, localized, and then reinserted back into your code. To make the maintenance of your code easier, Mac OS X ships with a tool that extracts strings from your code and puts them into resource files where they can be localized more easily. This article talks about the process for extracting strings from your code and managing the corresponding resources files.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="StringsFiles.html#//apple_ref/doc/uid/20000005-SW15">About Strings Files</a>
				
			<br/>
			
        
			
			
				<a href="StringsFiles.html#//apple_ref/doc/uid/20000005-SW5">Creating Strings Resource Files</a>
				
			<br/>
			
        
			
			
				<a href="StringsFiles.html#//apple_ref/doc/uid/20000005-SW2">Loading String Resources Into Your Code</a>
				
			<br/>
			
        
			
			
				<a href="StringsFiles.html#//apple_ref/doc/uid/20000005-SW22">Advanced Strings File Tips</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20000005-SW15" title="About Strings Files"></a><h2>About Strings Files</h2><p>Resource files that contain localizable strings are referred to as <strong>strings files</strong> (with the deliberate extra 's' in the word "strings") because of their filename extension, which is <code>.strings</code>. You can create strings files manually or programmatically depending on your needs. The standard strings file format consists of one or more key-value pairs along with optional comments. The key and value in a given pair are strings of text enclosed in double quotation marks, separated by an equal sign, and terminated by a semicolon. (You can also use a property list format for strings files. In such a case, the top-level node is a dictionary and each key-value pair of that dictionary is a string entry.) Although the inclusion of comments is optional, they do provide a useful way to communicate contextual information to the translator about how each string is used. <span class="content_text">Listing 1</span> shows a simple strings file with two non-localized entries for the default language. </p><a name="//apple_ref/doc/uid/20000005-SW7" title="Listing 1A simple strings file"></a><p class="codesample"><strong>Listing 1&nbsp;&nbsp;</strong>A simple strings file</p><div class="codesample"><table><tr><td scope="row"><pre>/* Insert Element menu item */<span></span></pre></td></tr><tr><td scope="row"><pre>"Insert Element" = "Insert Element";<span></span></pre></td></tr><tr><td scope="row"><pre>/* Error string used for unknown error types. */<span></span></pre></td></tr><tr><td scope="row"><pre>"ErrorString_1" = "An unknown error occurred.";<span></span></pre></td></tr></table></div><p>A typical application has at least one strings file per localization, that is, one strings file in each of the bundle’s <code>.lproj</code> subdirectories. The name of the default strings file is <code><a name="//apple_ref/doc/uid/20000005-DontLinkElementID_112"></a>Localizable.strings</code> but you can create strings files with any file name you choose. Creating strings files is discussed in more depth in <span class="content_text"><a href="StringsFiles.html#//apple_ref/doc/uid/20000005-SW5">“Creating Strings Resource Files.”</a></span> </p><div class="notebox"><a name="//apple_ref/doc/uid/20000005-SW16" title="Note"></a><p><strong>Note:</strong>&nbsp;It is recommended that you save strings files using the UTF-16 encoding, which is the default encoding for standard strings files. It is possible to create strings files using other property-list formats, including binary property-list formats and XML formats that use the UTF-8 encoding, but doing so is not recommended. For more information about the standard strings file format, see <span class="content_text"><a href="StringsFiles.html#//apple_ref/doc/uid/20000005-SW5">“Creating Strings Resource Files.”</a></span> For more information about Unicode and its text encodings, go to <span class="content_text"><a href="http://www.unicode.org/" target="_blank">http://www.unicode.org/</a></span> or <span class="content_text"><a href="http://en.wikipedia.org/wiki/Unicode" target="_blank">http://en.wikipedia.org/wiki/Unicode</a></span>.</p></div><a name="//apple_ref/doc/uid/20000005-SW5" title="Creating Strings Resource Files"></a><h2>Creating Strings Resource Files</h2><p>Although you can create strings files manually, it is rarely necessary to do so. The easiest way to create strings files is to write your code using the appropriate string-loading macros and then use the <code>genstrings</code> command-line tool to extract those strings and create strings files for you. </p><p>The following sections describe the process of how to set up your source files to facilitate the use of the <code>genstrings</code> tool. For detailed information about the tool, see <code><a href="../../../../Darwin/Reference/ManPages/man1/genstrings.1.html#//apple_ref/doc/man/1/genstrings" target="_top">genstrings</a></code> man page.</p><a name="//apple_ref/doc/uid/20000005-SW17" title="Choosing Which Strings to Localize"></a><h3>Choosing Which Strings to Localize</h3><p>When it comes to localizing your application’s interface, it is not always appropriate to localize every string used by your application. Translation is a costly process, and translating strings that are never seen by the user is a waste of time and money. Strings that are not displayed to the user, such as notification names used internally by your application, do not need to be translated. Consider the following example: </p><div class="codesample"><table><tr><td scope="row"><pre>if (CFStringHasPrefix(value, CFSTR("-")) {    CFArrayAppendValue(myArray, value);};<span></span></pre></td></tr></table></div><p>In this example, the string “<code>-</code>” is used internally and is never seen by the user; therefore, it does not need to be placed in a strings file. </p><p>The following code shows another example of a string the user would not see. The string <code>"%d %d %s"</code> does not need to be localized, since the user never sees it and it has no effect on anything that the user does see. </p><div class="codesample"><table><tr><td scope="row"><pre>matches = sscanf(s, "%d %d %s", &amp;first, &amp;last, &amp;other);<span></span></pre></td></tr></table></div><p>Because nib files are localized separately, you do not need to include strings that are already located inside of a nib file. Some of the strings you should localize, however, include the following:</p><ul class="spaceabove"><li class="li"><p>Strings that are programmatically added to a window, panel, view, or control and subsequently displayed to the user. This includes strings you pass into standard routines, such as those that display alert boxes.</p></li><li class="li"><p>Menu item title strings if those strings are added programmatically. For example, if you use custom strings for the Undo menu item, those strings should be in a strings file. </p></li><li class="li"><p>Error messages that are displayed to the user.</p></li><li class="li"><p>Any boilerplate text that is displayed to the user.</p></li><li class="li"><p>Some strings from your application’s information property list (<code>Info.plist</code>) file; see <em><a href="../../BPRuntimeConfig/index.html#//apple_ref/doc/uid/10000170i" target="_top">Runtime Configuration Guidelines</a></em>.</p></li><li class="li"><p>New file and document names.</p></li></ul><a name="//apple_ref/doc/uid/20000005-SW8" title="About the String-Loading Macros"></a><h3>About the String-Loading Macros</h3><p>The Foundation and Core Foundation frameworks define the following macros to make loading strings from a strings file easier:</p><ul class="spaceabove"><li class="li"><p>Core Foundation macros:</p><ul class="nested"><li class="nested li"><p><code><!--a target="_top" -->CFCopyLocalizedString<!--/a--></code></p></li><li class="nested li"><p><code><!--a target="_top" -->CFCopyLocalizedStringFromTable<!--/a--></code></p></li><li class="nested li"><p><code><!--a target="_top" -->CFCopyLocalizedStringFromTableInBundle<!--/a--></code></p></li><li class="nested li"><p><code><!--a target="_top" -->CFCopyLocalizedStringWithDefaultValue<!--/a--></code></p></li></ul></li><li class="li"><p>Foundation macros:</p><ul class="nested"><li class="nested li"><p><code><!--a target="_top" -->NSLocalizedString<!--/a--></code></p></li><li class="nested li"><p><code><!--a target="_top" -->NSLocalizedStringFromTable<!--/a--></code></p></li><li class="nested li"><p><code><!--a target="_top" -->NSLocalizedStringFromTableInBundle<!--/a--></code></p></li><li class="nested li"><p><code><!--a target="_top" -->NSLocalizedStringWithDefaultValue<!--/a--></code></p></li></ul></li></ul><p>You use these macros in your source code to load strings from one of your application’s strings files. The macros take the user’s current language preferences into account when retrieving the actual string value. In addition, the <code>genstrings</code> tool searches for these macros and uses the information they contain to build the initial set of strings files for your application.</p><p>For detailed information about how to use these macros, see <span class="content_text"><a href="StringsFiles.html#//apple_ref/doc/uid/20000005-97055">“Loading String Resources Into Your Code.”</a></span></p><a name="//apple_ref/doc/uid/20000005-SW9" title="Using the Genstrings Tool to Create Strings Files"></a><h3>Using the Genstrings Tool to Create Strings Files</h3><p>At some point during your development, you need to create the strings files needed by your code. If you wrote your code using the Core Foundation and Foundation macros, the simplest way to create your strings files is using the <a name="//apple_ref/doc/uid/20000005-DontLinkElementID_113"></a><code>genstrings</code> command-line tool. You can use this tool to generate a new set of strings files or update a set of existing files based on your source code. </p><p>To use the <code>genstrings</code> tool, you typically provide at least two arguments:</p><ul class="spaceabove"><li class="li"><p>A list of source files</p></li><li class="li"><p>An optional output directory</p></li></ul><p>The <code>genstrings</code> tool can parse C, Objective-C, and Java code files with the <code>.c</code>, <code>.m</code>, or <code>.java</code> filename extensions. Although not strictly required, specifying an output directory is recommended and is where <code>genstrings</code> places the resulting strings files. In most cases, you would want to specify the directory containing the project resources for your development language. </p><p>The following example shows a simple command for running the <code>genstrings</code> tool. This command causes the tool to parse all Objective-C source files in the current directory and put the resulting strings files in the <code>en.lproj</code> subdirectory, which must already exist. </p><div class="codesample"><table><tr><td scope="row"><pre>genstrings -o en.lproj *.m<span></span></pre></td></tr></table></div><p>The first time you run the <code>genstrings</code> tool, it creates a set of new strings files for you. Subsequent runs replace the contents of those strings files with the current string entries found in your source code. For subsequent runs, it is a good idea to save a copy of your current strings files before running <code>genstrings</code>. You can then diff the new and old versions to determine which strings were added to (or changed in) your project. You can then use this information to update any already localized versions of your strings files, rather than replacing those files and localizing them again.   </p><p>Within a single strings file, each key must be unique. Fortunately, the <code>genstrings</code> tool is smart enough to coalesce any duplicate entries it finds. When it discovers a key string used more than once in a single strings file, the tool merges the comments from the individual entries into one comment string and generates a warning. (You can suppress the duplicate entries warning with the <code>-q</code> option.) If the same key string is assigned to strings in different strings files, no warning is generated. </p><p>For more information about using the <code>genstrings</code> tool, see the <code><a href="../../../../Darwin/Reference/ManPages/man1/genstrings.1.html#//apple_ref/doc/man/1/genstrings" target="_top">genstrings</a></code> man page. </p><a name="//apple_ref/doc/uid/20000005-SW10" title="Creating Strings Files Manually"></a><h3>Creating Strings Files Manually</h3><p>Although the <code>genstrings</code> tool is the most convenient way to create strings files, you can also create them manually. To create a strings file manually, create a new file in TextEdit (or your preferred text-editing application) and save it using the Unicode UTF-16 encoding. (When saving files, TextEdit usually chooses an appropriate encoding by default. You can force the encoding of a plain text file by choosing Save As and selecting the appropriate encoding. If the file is not a plain text file, you must first convert it by choosing Format > Make Plain Text.) The contents of this file consists of a set of key-value pairs along with optional comments describing the purpose of each key-value pair. Key and value strings are separated by an equal sign, and the entire entry must be terminated with a semicolon character. By convention, comments are enclosed inside C-style comment delimiters (<code>/*</code> and <code>*/</code>) and are placed immediately before the entry they describe.  </p><p><span class="content_text">Listing 2</span> shows the basic format of a strings file. The entries in this example come from the English version of the <code>Localizable.strings</code> file from the TextEdit application. The left side of each equal sign represents the key, and the right side represents the value. A common convention when developing applications is to use a key name that equals the value in the language used to develop the application. Therefore, because TextEdit was developed using the English language, the English version of the <code>Localizable.strings</code> file has keys and values that match.</p><a name="//apple_ref/doc/uid/20000005-SW3" title="Listing 2Strings localized for English"></a><p class="codesample"><strong>Listing 2&nbsp;&nbsp;</strong>Strings localized for English</p><div class="codesample"><table><tr><td scope="row"><pre>/* Menu item to make the current document plain text */<span></span></pre></td></tr><tr><td scope="row"><pre>"Make Plain Text" = "Make Plain Text";<span></span></pre></td></tr><tr><td scope="row"><pre>/* Menu item to make the current document rich text */<span></span></pre></td></tr><tr><td scope="row"><pre>"Make Rich Text" = "Make Rich Text";<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 3</span> shows the German translation of the same entries. These entries also live inside a file called <code>Localizable.strings</code>, but this version of the file is located in the German language project directory of the TextEdit application. Notice that the keys are still in English, but the values assigned to those keys are in German. This is because the key strings are never seen by end users. They are used by the code to retrieve the corresponding value string, which in this case is in German. </p><a name="//apple_ref/doc/uid/20000005-SW6" title="Listing 3Strings localized for German"></a><p class="codesample"><strong>Listing 3&nbsp;&nbsp;</strong>Strings localized for German</p><div class="codesample"><table><tr><td scope="row"><pre>/* Menu item to make the current document plain text */<span></span></pre></td></tr><tr><td scope="row"><pre>"Make Plain Text" = "In reinen Text umwandeln";<span></span></pre></td></tr><tr><td scope="row"><pre>/* Menu item to make the current document rich text */<span></span></pre></td></tr><tr><td scope="row"><pre>"Make Rich Text" = "In formatierten Text umwandeln";<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20000005-SW18" title="Detecting Nonlocalizable Strings"></a><h3>Detecting Nonlocalizable Strings</h3><p>AppKit–based applications can take advantage of built-in support to detect strings that do not need to be localized and those that need to be localized but currently are not. You enable this support using arguments that you pass to your executable at launch time. If you are using Xcode, you set these arguments using the inspector for the corresponding executable. Open an inspector window for the desired executable (located in the Executables section of your project window) and select the Arguments tab. Add an entry for the new argument and include both the argument string and the desired value (separated by a space) in the entry. The available argument strings are as follows: </p><ul class="spaceabove"><li class="li"><p>The <code>NSShowNonLocalizableStrings</code> setting identifies strings that are not localizable. The strings are logged to the shell in upper case. This option occasionally generates some false positives but is still useful overall. </p></li><li class="li"><p>The <code>NSShowNonLocalizedStrings</code> setting locates strings that were meant to be localized but could not be found in the application’s existing strings files. You can use this setting to catch problems with out-of-date localizations. </p></li></ul><p>You can also pass arguments to an application by running that application from the command line. For example, to use the <code>NSShowNonLocalizedStrings</code> setting with the TextEdit application, you would enter the following in Terminal:</p><div class="codesample"><table><tr><td scope="row"><pre>/Applications/TextEdit.app/Contents/MacOS/TextEdit -NSShowNonLocalizedStrings YES<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20000005-97055" title="Loading String Resources Into Your Code"></a><a name="//apple_ref/doc/uid/20000005-SW2" title="Loading String Resources Into Your Code"></a><h2>Loading String Resources Into Your Code</h2><p>The Core Foundation and Foundation frameworks provide macros for retrieving strings stored in strings files. Although the main purpose of these macros is to load strings at runtime, they also serve a secondary purpose by acting as markers that the <code>genstrings</code> tool can use to locate your application’s string resources. It is this second purpose that explains why many of the macros let you specify much more information than would normally be required for loading a string. The <code>genstrings</code> tool uses the information you provide to create or update your application’s strings files automatically. <span class="content_text">Table 1</span> lists the types of information you can specify for these routines and describes how that information is used by the <code>genstrings</code> tool. </p><a name="//apple_ref/doc/uid/20000005-SW4" title="Table 1Common parameters found in string-loading routines"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1&nbsp;&nbsp;</strong>Common parameters found in string-loading routines</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Parameter</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p>Key</p></td><td ><p>The string used to look up the corresponding value. This string must not contain any characters from the extended ASCII character set, which includes accented versions of ASCII characters. If you want the initial value string to contain extended ASCII characters, use a routine that lets you specify a default value parameter. (For information about the extended ASCII character set, see the corresponding <span class="content_text"><a href="http://en.wikipedia.org/wiki/Extended_ASCII" target="_blank">Wikipedia entry</a></span>.) </p></td></tr><tr><td  scope="row"><p>Table name</p></td><td ><p>The name of the strings file in which the specified key is located. The <code>genstrings</code> tool interprets this parameter as the name of the strings file in which the string should be placed. If no table name is provided, the string is placed in the default <code>Localizable.strings</code> file. (When specifying a value for this parameter, include the filename without the <code>.strings</code> extension.)</p></td></tr><tr><td  scope="row"><p>Default value</p></td><td ><p>The default value to associate with a given key. If no default value is specified, the <code>genstrings</code> tool uses the key string as the initial value. Default value strings may contain extended ASCII characters. </p></td></tr><tr><td  scope="row"><p>Comment</p></td><td ><p>Translation comments to include with the string. You can use comments to provide clues to the translation team about how a given string is used. The <code>genstrings</code> tool puts these comments in the strings file and encloses them in C-style comment delimiters (<code>/*</code> and <code>*/</code>) immediately above the associated entry.  </p></td></tr><tr><td  scope="row"><p>Bundle</p></td><td ><p>An <code>NSBundle</code> object or <code>CFBundleRef</code> type corresponding to the bundle containing the strings file. You can use this to load strings from bundles other than your application’s main bundle. For example, you might use this to load localized strings from a framework or plug-in.</p></td></tr></table></div><p>When you request a string from a strings file, the Core Foundation and Cocoa macros automatically use the available localizations in your application and the current user’s language preferences to return the most appropriate string for that user. The string-loading macros search the application bundle for a strings file with the localization closest to the user’s preferred language and return that string for your code to use. As long as your code is properly internationalized, you should not have to do anything else. For information about how an appropriate localization is chosen, see <span class="content_text"><a href="InternatSupport.html#//apple_ref/doc/uid/20000278-109686">“Language Preferences.”</a></span> </p><a name="//apple_ref/doc/uid/20000005-SW19" title="Using the Core Foundation Framework"></a><h3>Using the Core Foundation Framework</h3><p>The Core Foundation framework defines a single function and several macros for loading localized strings from your application bundle. The <code><a href="../../../../CoreFoundation/Reference/CFBundleRef/Reference/reference.html#//apple_ref/c/func/CFBundleCopyLocalizedString" target="_top">CFBundleCopyLocalizedString</a></code> function provides the basic implementation for retrieving the strings. However, it is recommended that you use the following macros instead:</p><ul class="spaceabove"><li class="li"><p><code><!--a target="_top" -->CFCopyLocalizedString<!--/a--></code><code>(key, comment)</code></p></li><li class="li"><p><code><!--a target="_top" -->CFCopyLocalizedStringFromTable<!--/a--></code><code>(key, tableName, comment)</code></p></li><li class="li"><p><code><!--a target="_top" -->CFCopyLocalizedStringFromTableInBundle<!--/a--></code><code>(key, tableName, bundle, comment)</code></p></li><li class="li"><p><code><!--a target="_top" -->CFCopyLocalizedStringWithDefaultValue<!--/a--></code><code>(key, tableName, bundle, value, comment)</code></p></li></ul><p>There are several reasons to use the macros instead of the <code>CFBundleCopyLocalizedString</code> function. First, the macros are easier to use for certain common cases. Second, the macros let you associate a comment string with the string entry. Third, the macros are recognized by the <code>genstrings</code> tool but the <code>CFBundleCopyLocalizedString</code> function is not. </p><p>For additional information on how to use these macros, see <span class="content_text"><a href="../../../../CoreFoundation/Conceptual/CFBundles/Tasks/working.html#//apple_ref/doc/uid/20001126" target="_top">Working With Localized Strings</a></span> in <em><a href="../../../../CoreFoundation/Conceptual/CFBundles/index.html#//apple_ref/doc/uid/10000123i" target="_top">Bundle Programming Guide</a></em>. For macro and function syntax, see <em><a href="../../../../CoreFoundation/Reference/CFBundleRef/index.html#//apple_ref/doc/uid/20001191" target="_top">CFBundle Reference</a></em>.</p><a name="//apple_ref/doc/uid/20000005-SW20" title="Using the Foundation Framework"></a><h3>Using the Foundation Framework</h3><p>The Foundation framework defines a single method and several macros for loading string resources. The <code>localizedStringForKey:value:table:</code> method of the <code>NSBundle</code> class loads the specified string resource from a strings file residing in the current bundle. Cocoa also defines the following macros for getting localized strings:</p><ul class="spaceabove"><li class="li"><p><code><!--a target="_top" -->NSLocalizedString<!--/a--></code><code>(key, comment)</code></p></li><li class="li"><p><code><!--a target="_top" -->NSLocalizedStringFromTable<!--/a--></code><code>(key, tableName, comment)</code></p></li><li class="li"><p><code><!--a target="_top" -->NSLocalizedStringFromTableInBundle<!--/a--></code><code>(key, tableName, bundle, comment)</code></p></li><li class="li"><p><code><!--a target="_top" -->NSLocalizedStringWithDefaultValue<!--/a--></code><code>(key, tableName, bundle, value, comment)</code></p></li></ul><p>As with Core Foundation, Apple recommends that you use the Cocoa convenience macros for loading strings. The main advantage to these macros is that they can be parsed by the <code>genstrings</code> tool and used to create your application’s strings files. They are also simpler to use and let you associate translation comments with each entry. </p><p>For information about the syntax of the preceding macros, see <em><a href="../../../../Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/index.html#//apple_ref/doc/uid/TP40003774" target="_top">Foundation Functions Reference</a></em>. Additional methods for loading strings are also defined in <em><a href="../../../../Cocoa/Reference/Foundation/Classes/NSBundle_Class/index.html#//apple_ref/doc/uid/TP40003624" target="_top">NSBundle Class Reference</a></em>.</p><a name="//apple_ref/doc/uid/20000005-SW21" title="Examples of Getting Strings"></a><h3>Examples of Getting Strings</h3><p>The following examples demonstrate the basic techniques for using the Foundation and Core Foundation macros to retrieve strings. Each example assumes that the current bundle contains a strings file with the name <code>Custom.strings</code> that has been translated into French. This translated file includes the following strings:</p><div class="codesample"><table><tr><td scope="row"><pre>/* A comment */<span></span></pre></td></tr><tr><td scope="row"><pre>"Yes" = "Oui";<span></span></pre></td></tr><tr><td scope="row"><pre>"The same text in English" = "Le même texte en anglais";<span></span></pre></td></tr></table></div><p>Using the Foundation framework, you can get the value of the “<code>Yes</code>” string using the <code>NSLocalizedStringFromTable</code> macro, as shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>NSString* theString;<span></span></pre></td></tr><tr><td scope="row"><pre>theString = NSLocalizedStringFromTable (@"Yes", @"Custom", @"A comment");<span></span></pre></td></tr></table></div><p>Using the Core Foundation framework, you could get the same string using the <code>CFCopyLocalizedStringFromTable</code> macro, as shown in this example:</p><div class="codesample"><table><tr><td scope="row"><pre>CFStringRef theString;<span></span></pre></td></tr><tr><td scope="row"><pre>theString = CFCopyLocalizedStringFromTable(CFSTR("Yes"), CFSTR("Custom"), "A comment");<span></span></pre></td></tr></table></div><p>In both examples, the code specifies the key to retrieve, which is the string “Yes”. They also specify the strings file (or table) in which to look for the key, which in this case is the <code>Custom.strings</code> file. During string retrieval, the comment string is ignored. </p><a name="//apple_ref/doc/uid/20000005-96886" title="Advanced Strings File Tips"></a><a name="//apple_ref/doc/uid/20000005-SW22" title="Advanced Strings File Tips"></a><h2>Advanced Strings File Tips</h2><p>The following sections provide some additional tips for working with strings files and string resources. </p><a name="//apple_ref/doc/uid/20000005-SW11" title="Searching for Custom Functions With genstrings"></a><h3>Searching for Custom Functions With genstrings</h3><p>The <code>genstrings</code> tool searches for the Core Foundation and Foundation string macros by default. It uses the information in these macros to create the string entries in your project’s strings files. You can also direct <code>genstrings</code> to look for custom string-loading functions in your code and use those functions in addition to the standard macros. You might use custom functions to wrap the built-in string-loading routines and perform some extra processing or you might replace the default string handling behavior with your own custom model.</p><p>If you want to use <code>genstrings</code> with your own custom functions, your functions must use the naming and formatting conventions used by the Foundation macros. The parameters for your functions must match the parameters for the corresponding macros exactly. When you invoke genstrings, you specify the <code>-s</code> option followed by the name of the function that corresponds to the <code>NSLocalizedString</code> macro. Your other function names should then build from this base name. For example, if you specified the function name <code>MyStringFunction</code>, your other function names should be  <code>MyStringFunctionFromTable</code>, <code>MyStringFunctionFromTableInBundle</code>, and <code>MyStringFunctionWithDefaultValue</code>. The <code>genstrings</code> tool looks for these functions and uses them to build the corresponding strings files.</p><a name="//apple_ref/doc/uid/20000005-SW23" title="Formatting String Resources"></a><h3>Formatting String Resources</h3><p>For some strings, you may not want to (or be able to) encode the entire string in a string resource because portions of the string might change at runtime. For example, if a string contains the name of a user document, you need to be able to insert that document name into the string dynamically. When creating your string resources, you can use any of the formatting characters you would normally use for handling string replacement in the Foundation and Core Foundation frameworks. <span class="content_text">Listing 4</span> shows several string resources that use basic formatting characters: </p><a name="//apple_ref/doc/uid/20000005-SW12" title="Listing 4Strings with formatting characters"></a><p class="codesample"><strong>Listing 4&nbsp;&nbsp;</strong>Strings with formatting characters</p><div class="codesample"><table><tr><td scope="row"><pre>"Windows must have at least %d columns and %d rows." =<span></span></pre></td></tr><tr><td scope="row"><pre>"Les fenêtres doivent être composés au minimum de %d colonnes et %d lignes.";<span></span></pre></td></tr><tr><td scope="row"><pre>"File %@ not found." = "Le fichier %@ n’existe pas.";<span></span></pre></td></tr></table></div><p>To replace formatting characters with actual values, you use the <code><a href="../../../../Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithFormat:" target="_top">stringWithFormat:</a></code> method of <code>NSString</code> or the <code><a href="../../../../CoreFoundation/Reference/CFStringRef/Reference/reference.html#//apple_ref/c/func/CFStringCreateWithFormat" target="_top">CFStringCreateWithFormat</a></code> function, using the string resource as the format string. Foundation and Core Foundation support most of the standard formatting characters used in <code>printf</code> statements. In addition, you can use the <code>%@</code> specifier<a name="//apple_ref/doc/uid/20000005-DontLinkElementID_114"></a> shown in the preceding example to insert the descriptive text associated with arbitrary Objective-C objects. See <span class="content_text"><a href="../../../../Cocoa/Conceptual/Strings/Articles/FormatStrings.html#//apple_ref/doc/uid/20000943" target="_top">Formatting String Objects</a></span> in <em><a href="../../../../Cocoa/Conceptual/Strings/index.html#//apple_ref/doc/uid/10000035i" target="_top">String Programming Guide for Cocoa</a></em> for the complete list of specifiers. </p><p>One problem that often occurs during translation is that the translator may need to reorder parameters inside translated strings to account for differences in the source and target languages. If a string contains multiple arguments, the translator can insert special tags of the form <em>n</em><code>$</code> (where <em>n</em> specifies the position of the original argument) in between the formatting characters. These tags let the translator reorder the arguments that appear in the original string. The following example shows a string whose two arguments are reversed in the translated string: </p><div class="codesample"><table><tr><td scope="row"><pre>/* Message in alert dialog when something fails */<span></span></pre></td></tr><tr><td scope="row"><pre>"%@ Error! %@ failed!" = "%2$@ blah blah, %1$@ blah!";<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20000005-SW13" title="Using Special Characters in String Resources"></a><h3>Using Special Characters in String Resources</h3><p>Just as in C, some characters must be prefixed with a backslash before you can include them in the string. These characters include double quotation marks, the backslash character itself, and special control characters such as linefeed (<code>\n</code>) and carriage returns (<code>\r</code>).</p><div class="codesample"><table><tr><td scope="row"><pre>"File \"%@\" cannot be opened" = " ... ";<span></span></pre></td></tr><tr><td scope="row"><pre>"Type \"OK\" when done" = " ... ";<span></span></pre></td></tr></table></div><p>You can include arbitrary Unicode characters in a value string by specifying <code>\\U</code> followed immediately by up to four hexadecimal digits. The four digits denote the entry for the desired Unicode character; for example, the space character is represented by hexadecimal 20 and thus would be <code>\\U0020</code> when specified as a Unicode character. This option is useful if a string must include Unicode characters that for some reason cannot be typed. If you use this option, you must also pass the <code>-u</code> option to <code>genstrings</code> in order for the hexadecimal digits to be interpreted correctly in the resulting strings file. The <code>genstrings</code> tool assumes your strings are low-ASCII by default and only interprets backslash sequences if the <code>-u</code> option is specified. </p><div class="notebox"><a name="//apple_ref/doc/uid/20000005-SW14" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>genstrings</code> tool always generates strings files using the UTF-16 encoding. If you include Unicode characters in your strings and do not use <code>genstrings</code> to create your strings files, be sure to save your strings files in the UTF-16 encoding.</p></div><a name="//apple_ref/doc/uid/20000005-SW24" title="Debugging Strings Files"></a><h3>Debugging Strings Files</h3><p>If you run into problems during testing and find that the functions and macros for retrieving strings are always returning the same key (as opposed to the translated value), run the <code>/usr/bin/plutil</code> tool on your strings file. A strings file is essentially a property-list file formatted in a special way. Running <code>plutil</code> with the <code>-lint</code> option can uncover hidden characters or other errors that are preventing strings from being retrieved correctly.<a name="//apple_ref/doc/uid/20000005-DontLinkElementID_115"></a><a name="//apple_ref/doc/uid/20000005-DontLinkElementID_116"></a></p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="LocalizingInterfaces.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="InternatResources.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html%3Fid%3D10000171i-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html%3Fid%3D10000171i-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MacOSX/Conceptual/BPInternational/Articles/StringsFiles.html%3Fid%3D10000171i-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Creating a New Enterprise Object</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.21.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.23.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606143"> </A><A NAME="16934"> </A>Creating a New Enterprise Object</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606144"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606145"> </A>Describes how to create a new instances of custom objects and EOGenericRecords, both types of enterprise objects.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606146"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=606147"> </A>New enterprise objects are created when your application adds a new instance of an entity. For example,</P><UL><LI CLASS="Bulleted"><A NAME="pgfId=606149"> </A>You might create a Movie object to store information about the latest film released by your company. </LI><LI CLASS="Bulleted"><A NAME="pgfId=606150"> </A>You might create a new Customer object when your banking application adds a new customer.</LI></UL><P CLASS="Body"><A NAME="pgfId=618138"> </A>Enterprise objects encapsulate the attributes and behaviors that define the object. When you only need to get and set the object's attributes, the default EOGenericRecord suffices as the business object. EOGenericRecords are part of EOF, and provide functionality to create, read, update, and delete information from a variety of data stores. When your EO must have its own behavior in addition to the get and set behaviors, you need to create a custom enterprise object and add the extra functionality to it.</P><P CLASS="Body"><A NAME="pgfId=606152"> </A>The programming examples below outline how new instances of EOGenericRecord and custom enterprise objects are created in Java, Objective-C, and WebScript. The Objective-C and WebScript code is identical. Each example assumes you have used EOModeler to define both your application's business objects and the mapping between the object's attributes and the data store schema's tables and columns. In the code examples, the Movie entity has two attributes: title and revenue.</P><DIV><H3 CLASS="Heading2"><A NAME="pgfId=608080"> </A>Creating EOGenericRecords</H3><P CLASS="Body"><A NAME="pgfId=610659"> </A>Only basic get and set behavior is supported in this application.</P><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=611030"> </A>Creating EOGenericRecords (Java)</H4><PRE CLASS="Code"><A NAME="pgfId=610671"> </A>import com.apple.yellow.foundation.*;<A NAME="pgfId=610673"> </A>import com.apple.yellow.webobjects.*;<A NAME="pgfId=610675"> </A>import com.apple.yellow.eocontrol.*;<A NAME="pgfId=610679"> </A>public class Main extends WOComponent {<A NAME="pgfId=610683"> </A>    /** @TypeInfo Movie */<A NAME="pgfId=610685"> </A>    protected EOEnterpriseObject aMovie;<A NAME="pgfId=610689"> </A>    public WOComponent makeAMovie()<A NAME="pgfId=610691"> </A>    {<A NAME="pgfId=610693"> </A>        String entName = &quot;Movie&quot;;  // Name of entity within eomodeld<A NAME="pgfId=610695"> </A>        EOEditingContext ec = session().defaultEditingContext();<A NAME="pgfId=610697"> </A>        EOClassDescription movieClassDesc;<A NAME="pgfId=610701"> </A>        // create a Movie instance<A NAME="pgfId=610703"> </A>        movieClassDesc = EOClassDescription().<A NAME="pgfId=622559"> </A>            classDescriptionForEntityName(entName);<A NAME="pgfId=610705"> </A>        aMovie = (EOEnterpriseObject) movieClassDesc.<A NAME="pgfId=622560"> </A>            createInstanceWithEditingContext(ec, null);<A NAME="pgfId=610707"> </A>        // set some default values.<A NAME="pgfId=610709"> </A>        aMovie.takeValueForKey(&quot;DefaultTitle&quot;, &quot;title&quot;);<A NAME="pgfId=610711"> </A>        aMovie.takeValueForKey(&quot;1000000&quot;, &quot;revenue&quot;); <A NAME="pgfId=610715"> </A>        return null;  // updates the current component<A NAME="pgfId=610717"> </A>    }<A NAME="pgfId=610719"> </A>}</PRE></DIV><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=611032"> </A>Creating EOGenericRecords (WebScript and Objective-C)</H4><PRE CLASS="Code"><A NAME="pgfId=610729"> </A>/** @TypeInfo Movie */<A NAME="pgfId=610731"> </A>id aMovie;<A NAME="pgfId=610733"> </A><A NAME="pgfId=610735"> </A>- (WOComponent *)makeAMovie<A NAME="pgfId=610737"> </A>{<A NAME="pgfId=610739"> </A>    EOEditingContext *ec = [[self session] defaultEditingContext];<A NAME="pgfId=610741"> </A>    aMovie = [[EOClassDescription classDescriptionForEntityName: @&quot;Movie&quot;]<A NAME="pgfId=610743"> </A>        createInstanceWithEditingContext: ec<A NAME="pgfId=610745"> </A>        globalID: nil<A NAME="pgfId=610747"> </A>        zone: nil];<A NAME="pgfId=610749"> </A>    [aMovie <A NAME="pgfId=610751"> </A>        takeValue:@&quot;DefaultTitle&quot; <A NAME="pgfId=610753"> </A>        forKey: @&quot;title&quot;];<A NAME="pgfId=610755"> </A>    [aMovie <A NAME="pgfId=610757"> </A>        takeValue:@&quot;1000000&quot; <A NAME="pgfId=610759"> </A>        forKey: @&quot;revenue&quot;];<A NAME="pgfId=610761"> </A><A NAME="pgfId=610763"> </A>    return nil;<A NAME="pgfId=610765"> </A>}</PRE><P CLASS="Body"><A NAME="pgfId=619111"> </A></P></DIV></DIV><DIV><H3 CLASS="Heading2"><A NAME="pgfId=606210"> </A>Custom Enterprise Object</H3><P CLASS="Body"><A NAME="pgfId=610770"> </A>You can add your own business logic to this code.</P><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=611034"> </A>Creating a custom enterprise object (Java)</H4><PRE CLASS="Code"><A NAME="pgfId=610783"> </A>import com.apple.yellow.foundation.*;<A NAME="pgfId=610785"> </A>import com.apple.yellow.webobjects.*;<A NAME="pgfId=610787"> </A>import com.apple.yellow.eocontrol.*;<A NAME="pgfId=618199"> </A>import Movie;<A NAME="pgfId=610789"> </A>public class Main extends WOComponent {<A NAME="pgfId=610791"> </A>    Movie aMovie;<A NAME="pgfId=610793"> </A>    public WOComponent makeAMovie()<A NAME="pgfId=610795"> </A>    {<A NAME="pgfId=610797"> </A>        // create an instance of a Movie<A NAME="pgfId=610799"> </A>        aMovie = new Movie(null,null,null);<A NAME="pgfId=610801"> </A>        // set default values<A NAME="pgfId=610803"> </A>        aMovie.setTitle(&quot;DefaultTitle&quot;);<A NAME="pgfId=622563"> </A>        aMovie.setRevenue(new Float(&quot;1000000&quot;));<A NAME="pgfId=610807"> </A>        return null;  // return the updated component.<A NAME="pgfId=610809"> </A>    }<A NAME="pgfId=610813"> </A>}</PRE><P CLASS="Body"><A NAME="pgfId=619112"> </A></P><P CLASS="Body"><A NAME="pgfId=606233"> </A>Also link <TT CLASS="Code">Movie.java</TT> into the application by adding it to the Classes folder within Project Builder. Generating <TT CLASS="Code">Movie.java</TT> from EOModeler provides you with the common get and set methods. Additional business logic can be added directly to the <TT CLASS="Code">Movie.java</TT> file.</P><P CLASS="Body"><A NAME="pgfId=606235"> </A>Here's a portion of the <TT CLASS="Code">Movie.java</TT> file:</P></DIV><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=611036"> </A>Example custom enterprise object (Java)</H4><PRE CLASS="Code"><A NAME="pgfId=610843"> </A>//<A NAME="pgfId=610845"> </A>// Created on Mon Oct 26 22:43:39  1998 by Apple EOModeler Version 377<A NAME="pgfId=610849"> </A><A NAME="pgfId=622591"> </A>import com.apple.yellow.foundation.*;<A NAME="pgfId=610851"> </A>import com.apple.yellow.eocontrol.*;<A NAME="pgfId=622583"> </A>import java.util.*;<A NAME="pgfId=622566"> </A>import java.math.BigDecimal;<A NAME="pgfId=622567"> </A><A NAME="pgfId=610853"> </A>public class Movie extends EOCustomObject {<A NAME="pgfId=610855"> </A>    protected Number revenue;<A NAME="pgfId=610857"> </A>    protected String title;<A NAME="pgfId=610859"> </A>    // This is the constructor that EOF uses. <A NAME="pgfId=610861"> </A>    // Later (perhaps upon a willRead()) it will be populated with <A NAME="pgfId=623976"> </A>    // values via EOCustomObject's takeValueForKey() method.<A NAME="pgfId=610865"> </A>    public Movie(EOEditingContext context, EOClassDescription classDesc,<A NAME="pgfId=622618"> </A>        EOGlobalID gid) {<A NAME="pgfId=610867"> </A>        super(context, classDesc, gid);<A NAME="pgfId=610869"> </A>    }<A NAME="pgfId=610883"> </A>    public String category() { willRead(); return category; }<A NAME="pgfId=610885"> </A>    public void setCategory(String value) {<A NAME="pgfId=610887"> </A>        willChange();<A NAME="pgfId=610889"> </A>        category = value;<A NAME="pgfId=610891"> </A>    }<A NAME="pgfId=610893"> </A>    public Number revenue() { willRead(); return revenue; }<A NAME="pgfId=610895"> </A>    public void setRevenue(Number value) {<A NAME="pgfId=610897"> </A>        willChange();<A NAME="pgfId=610899"> </A>        revenue = value;<A NAME="pgfId=610901"> </A>    }<A NAME="pgfId=610903"> </A>    public String title() { willRead(); return title; }<A NAME="pgfId=610905"> </A>    public void setTitle(String value) {<A NAME="pgfId=610907"> </A>        willChange();<A NAME="pgfId=610909"> </A>        title = value;<A NAME="pgfId=610911"> </A>    }<A NAME="pgfId=610913"> </A> }<A NAME="pgfId=610915"> </A>}</PRE></DIV><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=611038"> </A>Creating a custom enterprise object (WebScript and Objective-C)</H4><PRE CLASS="Code"><A NAME="pgfId=610946"> </A>//**************<A NAME="pgfId=610948"> </A>// Main.wos<A NAME="pgfId=610950"> </A>//**************<A NAME="pgfId=610952"> </A>// Assumes Movie.h and Movie.m have been linked into your application.<A NAME="pgfId=610954"> </A>// (Movie.h was generated from EOModeler and is shown below)<A NAME="pgfId=610956"> </A>//<A NAME="pgfId=610958"> </A>Movie *aMovie;<A NAME="pgfId=610960"> </A>- (WOComponent *)makeAMovie<A NAME="pgfId=610962"> </A>{<A NAME="pgfId=610964"> </A>    // Create new instance of a Movie<A NAME="pgfId=610966"> </A>    aMovie = [[Movie alloc] init];<A NAME="pgfId=610968"> </A>    // Set some of the attrs of the Movie<A NAME="pgfId=610970"> </A>    [aMovie setTitle: @&quot;Default Title&quot;];<A NAME="pgfId=610972"> </A>    [aMovie setRevenue: @&quot;1000000&quot;];<A NAME="pgfId=610974"> </A>    return nil;<A NAME="pgfId=610976"> </A>}</PRE></DIV><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=623965"> </A>Example custom enterprise object (Objective-C)</H4><PRE CLASS="Code"><A NAME="pgfId=610978"> </A>//*************************************<A NAME="pgfId=610980"> </A>//  Movie.h - generated from EOModeler<A NAME="pgfId=610982"> </A>//*************************************<A NAME="pgfId=610984"> </A>#import &lt;EOControl/EOControl.h&gt;<A NAME="pgfId=610986"> </A>@interface Movie : NSObject &lt;NSCoding&gt;<A NAME="pgfId=610988"> </A>{<A NAME="pgfId=610990"> </A>    NSNumber *revenue;<A NAME="pgfId=610992"> </A>    NSString *title;<A NAME="pgfId=610994"> </A>}<A NAME="pgfId=610996"> </A>- (void)setRevenue:(NSNumber *)value;<A NAME="pgfId=610998"> </A>- (NSNumber *)revenue;<A NAME="pgfId=611000"> </A>- (void)setTitle:(NSString *)value;<A NAME="pgfId=611002"> </A>- (NSString *)title;<A NAME="pgfId=611004"> </A>@end</PRE><P CLASS="Body"><A NAME="pgfId=619118"> </A></P></DIV></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606326"> </A>See Also</H2></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606328"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606329"> </A>	How do I create an object?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606330"> </A>	When should I use a custom object?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606331"> </A>	When should I use a generic record?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606332"> </A>	How do I set default values for an object?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606333"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606334"> </A>EOGenericRecord</LI><LI CLASS="Bulleted"><A NAME="pgfId=606335"> </A>Instantiate</LI><LI CLASS="Bulleted"><A NAME="pgfId=606336"> </A>EOCustomObject</LI><LI CLASS="Bulleted"><A NAME="pgfId=606337"> </A>Enterprise Object</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606338"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606339"> </A>9 July 1998, Rich Flewelling. First Draft.<BR>28 October 1998. Clif Liu. Second Draft.</P><PRE CLASS="Code"><A NAME="pgfId=606340"> </A></PRE><P CLASS="Body"><A NAME="pgfId=602450"> </A></P></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.21.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.23.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
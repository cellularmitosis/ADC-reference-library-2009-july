<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Memory Usage Performance Guidelines: Viewing Virtual Memory Usage</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Viewing Virtual Memory Usage"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001985" title="Viewing Virtual Memory Usage"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../DeveloperTools/index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../../DeveloperTools/Performance-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000901" target="_top">Performance</a> &gt; <a href="../index.html" target="_top">Memory Usage Performance Guidelines</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="MallocDebug.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20001985-CJBJFIDD" title="Viewing Virtual Memory Usage"></a><hr /><H1>Viewing Virtual Memory Usage</H1><p><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_182"></a>Mac OS X provides the <code>top</code>, <code>vm_stat</code>, and <code>vmmap</code> command-line utilities for viewing statistics about virtual memory usage. The information returned by these tools ranges from summary information about all the system processes to detailed information about a specific process. </p><p>For information on how to use the <code>top</code> tool, please see <em><a href="../../PerformanceOverview/index.html#//apple_ref/doc/uid/TP40001410" target="_top">Performance Overview</a></em> in Performance Documentation. The sections that follow provide information on using <code>vmmap</code> and <code>vm_stat</code>.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="VMPages.html#//apple_ref/doc/uid/20001985-99472">Viewing Virtual Memory Statistics</a>
				
			<br/>
			
        
			
			
				<a href="VMPages.html#//apple_ref/doc/uid/20001985-99594-TPXREF150">Viewing Mach-O Code Pages</a>
				
			<br/>
			
        
			
			
				<a href="VMPages.html#//apple_ref/doc/uid/20001985-97196-TPXREF127">Viewing Virtual Memory Regions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001985-99472" title="Viewing Virtual Memory Statistics"></a><h2>Viewing Virtual Memory Statistics</h2><p>The <code>vm_stat</code><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_183"></a><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_184"></a> tool displays high-level statistics about the current virtual memory usage of the system. By default, <code>vm_stat</code> displays these statistics once, but you can specify an interval value (in seconds) to update these statistics continuously. For information on the usage of this tool, see the man pages.</p><p><span class="content_text">Listing 1</span> shows an example of the output from <code>vm_stat</code>. </p><a name="//apple_ref/doc/uid/20001985-99506-CJBGAJGC" title="Listing 1Output of vm_stat tool"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001985-99506" title="Listing 1Output of vm_stat tool"></a><strong>Listing 1&nbsp;&nbsp;</strong>Output of vm_stat tool</p><div class="codesample"><table><tr><td scope="row"><pre>Mach Virtual Memory Statistics: (page size of 4096 bytes)<span></span></pre></td></tr><tr><td scope="row"><pre>Pages free:                     3194.<span></span></pre></td></tr><tr><td scope="row"><pre>Pages active:                  34594.<span></span></pre></td></tr><tr><td scope="row"><pre>Pages inactive:                17870.<span></span></pre></td></tr><tr><td scope="row"><pre>Pages wired down:               9878.<span></span></pre></td></tr><tr><td scope="row"><pre>"Translation faults":        6333197.<span></span></pre></td></tr><tr><td scope="row"><pre>Pages copy-on-write:           81385.<span></span></pre></td></tr><tr><td scope="row"><pre>Pages zero filled:           3180051.<span></span></pre></td></tr><tr><td scope="row"><pre>Pages reactivated:            343961.<span></span></pre></td></tr><tr><td scope="row"><pre>Pageins:                       33043.<span></span></pre></td></tr><tr><td scope="row"><pre>Pageouts:                      78496.<span></span></pre></td></tr><tr><td scope="row"><pre>Object cache: 66227 hits of 96952 lookups (68% hit rate)<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001985-99594" title="Viewing Mach-O Code Pages"></a><a name="//apple_ref/doc/uid/20001985-99594-TPXREF150" title="Viewing Mach-O Code Pages"></a><h2>Viewing Mach-O Code Pages</h2><p>The <code>pagestuff</code><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_185"></a><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_186"></a>tool displays information about the specified logical pages of a file conforming to the Mach-O executable format. For each specified page of code, symbols (function and static data structure names) are displayed. All pages in the <code>__TEXT, __text</code> section are displayed if no page numbers are given.</p><p><span class="content_text">Listing 2</span> shows part of the output from <code>pagestuff</code> for the TextEdit application. This output is the result of running the tool with the <code>-a</code> option, which prints information about all of the executableâ€™s code pages. It includes the virtual address locations of each page and the type of information on that page. </p><a name="//apple_ref/doc/uid/20001985-99758-BBCDGFDF" title="Listing 2Partial output of pagestuff tool"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001985-99758" title="Listing 2Partial output of pagestuff tool"></a><strong>Listing 2&nbsp;&nbsp;</strong>Partial output of pagestuff tool</p><div class="codesample"><table><tr><td scope="row"><pre>File Page 0 contains Mach-O headers<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 1 contains Mach-O headers<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 2 contains contents of section (__TEXT,__text)<span></span></pre></td></tr><tr><td scope="row"><pre>Symbols on file page 2 virtual address 0x3a08 to 0x4000<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 3 contains contents of section (__TEXT,__text)<span></span></pre></td></tr><tr><td scope="row"><pre>Symbols on file page 3 virtual address 0x4000 to 0x5000<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 4 contains contents of section (__TEXT,__text)<span></span></pre></td></tr><tr><td scope="row"><pre>Symbols on file page 4 virtual address 0x5000 to 0x6000<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>File Page 22 contains contents of section (__TEXT,__cstring)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 22 contains contents of section (__TEXT,__literal4)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 22 contains contents of section (__TEXT,__literal8)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 22 contains contents of section (__TEXT,__const)<span></span></pre></td></tr><tr><td scope="row"><pre>Symbols on file page 22 virtual address 0x17000 to 0x17ffc<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 23 contains contents of section (__DATA,__data)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 23 contains contents of section (__DATA,__la_symbol_ptr)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 23 contains contents of section (__DATA,__nl_symbol_ptr)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 23 contains contents of section (__DATA,__dyld)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 23 contains contents of section (__DATA,__cfstring)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 23 contains contents of section (__DATA,__bss)<span></span></pre></td></tr><tr><td scope="row"><pre>File Page 23 contains contents of section (__DATA,__common)<span></span></pre></td></tr><tr><td scope="row"><pre>Symbols on file page 23 virtual address 0x18000 to 0x18d48<span></span></pre></td></tr><tr><td scope="row"><pre> 0x00018000 _NXArgc<span></span></pre></td></tr><tr><td scope="row"><pre> 0x00018004 _NXArgv<span></span></pre></td></tr><tr><td scope="row"><pre> 0x00018008 _environ<span></span></pre></td></tr><tr><td scope="row"><pre> 0x0001800c ___progname<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr></table></div><p>In the preceding listing, if a page exports any symbols, those symbols are also displayed by the <code>-a</code> option. If you want to view the symbols for a single page, pass in the desired page number instead of the <code>-a</code> option.</p><a name="//apple_ref/doc/uid/20001985-97196" title="Viewing Virtual Memory Regions"></a><a name="//apple_ref/doc/uid/20001985-97196-TPXREF127" title="Viewing Virtual Memory Regions"></a><h2>Viewing Virtual Memory Regions</h2><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_187"></a><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_188"></a><p>The <code>vmmap</code> tool displays the virtual memory regions allocated for a specified process. This tool can help a programmer understand the purpose of memory at a given address and how that memory is being used. For each virtual-memory region, <code>vmmap</code> displays the type of page, the starting address, region size (in kilobytes), read/write permissions, sharing mode, and the purpose of the pages in that region.</p><a name="//apple_ref/doc/uid/20001985-102467" title="Sample Output From vmmap"></a><h3>Sample Output From vmmap</h3><p><span class="content_text"><a href="VMPages.html#//apple_ref/doc/uid/20001985-102501-BCIGDADD">Listing 3</a></span> shows some sample output from the <code>vmmap</code> tool. This example is not a full listing of the toolâ€™s output but is an abbreviated version showing the primary sections.</p><a name="//apple_ref/doc/uid/20001985-102501-BCIGDADD" title="Listing 3Typical output of vmmap"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001985-102501" title="Listing 3Typical output of vmmap"></a><strong>Listing 3&nbsp;&nbsp;</strong>Typical output of vmmap</p><div class="codesample"><table><tr><td scope="row"><pre>==== Non-writable regions for process 313<span></span></pre></td></tr><tr><td scope="row"><pre>__PAGEZERO              0 [   4K] ---/--- SM=NUL ...ts/MacOS/Clock<span></span></pre></td></tr><tr><td scope="row"><pre>__TEXT               1000 [  40K] r-x/rwx SM=COW ...ts/MacOS/Clock<span></span></pre></td></tr><tr><td scope="row"><pre>__LINKEDIT           e000 [   4K] r--/rwx SM=COW ...ts/w/Clock<span></span></pre></td></tr><tr><td scope="row"><pre>                    90000 [   4K] r--/r-- SM=SHM<span></span></pre></td></tr><tr><td scope="row"><pre>                   340000 [3228K] r--/rwx SM=COW 00000100 00320...<span></span></pre></td></tr><tr><td scope="row"><pre>                   789000 [3228K] r--/rwx SM=COW 00000100 00320...<span></span></pre></td></tr><tr><td scope="row"><pre>Submap           90000000-9fffffff r--/r-- machine-wide submap<span></span></pre></td></tr><tr><td scope="row"><pre>__TEXT           90000000  [ 932K] r-x/r-x SM=COW /usr/lib/libSystem.B.dylib<span></span></pre></td></tr><tr><td scope="row"><pre>__LINKEDIT       900e9000   [ 260K] r--/r-- SM=COW /usr/lib/libSystem.B.dylib<span></span></pre></td></tr><tr><td scope="row"><pre>__TEXT           90130000 [ 740K] r-x/r-x SM=COW .../Versions/A/CoreFoundation<span></span></pre></td></tr><tr><td scope="row"><pre>__LINKEDIT       901e9000 [ 188K] r--/r-- SM=COW .../Versions/A/CoreFoundation<span></span></pre></td></tr><tr><td scope="row"><pre>__TEXT           90220000 [2144K] r-x/r-x SM=COW .../Versions/A/CarbonCore<span></span></pre></td></tr><tr><td scope="row"><pre>__LINKEDIT       90438000 [ 296K] r--/r-- SM=COW .../Versions/A/CarbonCore<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>[...data omitted...]<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>==== Writable regions for process 606<span></span></pre></td></tr><tr><td scope="row"><pre>__DATA             18000 [   4K] rw-/rwx SM=PRV /Contents/MacOS/TextEdit<span></span></pre></td></tr><tr><td scope="row"><pre>__OBJC             19000 [   8K] rw-/rwx SM=COW /Contents/MacOS/TextEdit<span></span></pre></td></tr><tr><td scope="row"><pre>MALLOC_OTHER       1d000 [ 256K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre>MALLOC_USED(DefaultMallocZone_0x5d2c0)     5d000 [ 256K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre>                   9d000 [ 372K] rw-/rwx SM=COW 33320000 00000020 00000000 00001b84...<span></span></pre></td></tr><tr><td scope="row"><pre>VALLOC_USED(DefaultMallocZone_0x5d2c0)     ff000 [  36K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre>MALLOC_USED(CoreGraphicsDefaultZone_0x10  108000 [ 256K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre>MALLOC_USED(CoreGraphicsRegionZone_0x148  148000 [ 256K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>[...data omitted...]<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>Submap           a000b000-a012ffff r--/r-- process-only submap<span></span></pre></td></tr><tr><td scope="row"><pre>__DATA           a0130000 [  28K] rw-/rw- SM=COW .../Versions/A/CoreFoundation<span></span></pre></td></tr><tr><td scope="row"><pre>Submap           a0137000-a021ffff r--/r-- process-only submap<span></span></pre></td></tr><tr><td scope="row"><pre>__DATA           a0220000 [  20K] rw-/rw- SM=COW .../Versions/A/CarbonCore<span></span></pre></td></tr><tr><td scope="row"><pre>Submap           a0225000-a048ffff r--/r-- process-only submap<span></span></pre></td></tr><tr><td scope="row"><pre>__DATA           a0490000 [  12K] rw-/rw- SM=COW .../IOKit.framework/Versions/A/IOKit<span></span></pre></td></tr><tr><td scope="row"><pre>Submap           a0493000-a050ffff r--/r-- process-only submap<span></span></pre></td></tr><tr><td scope="row"><pre>__DATA           a0510000 [  36K] rw-/rw- SM=COW .../Versions/A/OSServices<span></span></pre></td></tr><tr><td scope="row"><pre>                 b959e000 [   4K] rw-/rw- SM=SHM<span></span></pre></td></tr><tr><td scope="row"><pre>                 b95a0000 [   4K] rw-/rw- SM=SHM<span></span></pre></td></tr><tr><td scope="row"><pre>                 b9630000 [ 164K] rw-/rw- SM=SHM<span></span></pre></td></tr><tr><td scope="row"><pre>                 b965a000 [ 896K] rw-/rw- SM=SHM<span></span></pre></td></tr><tr><td scope="row"><pre>                 bff80000 [ 504K] rw-/rwx SM=ZER<span></span></pre></td></tr><tr><td scope="row"><pre>STACK[0]         bfffe000 [   4K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre>                 bffff000 [   4K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre>__DATA           c000c000 [   4K] rw-/rwx SM=PRV .../Versions/A/ApplicationEnhancer<span></span></pre></td></tr><tr><td scope="row"><pre>STACK[1]         f0001000 [ 512K] rw-/rwx SM=PRV<span></span></pre></td></tr><tr><td scope="row"><pre>                 ff002000 [12272K] rw-/rw- SM=SHM<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>==== Legend<span></span></pre></td></tr><tr><td scope="row"><pre>SM=sharing mode:<span></span></pre></td></tr><tr><td scope="row"><pre>    COW=copy_on_write PRV=private NUL=empty ALI=aliased<span></span></pre></td></tr><tr><td scope="row"><pre>    SHM=shared ZER=zero_filled S/A=shared_alias<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>==== Summary for process 313<span></span></pre></td></tr><tr><td scope="row"><pre>ReadOnly portion of Libraries: Total=27420KB resident=12416KB(45%) swapped_out_or_unallocated=15004KB(55%)<span></span></pre></td></tr><tr><td scope="row"><pre>Writable regions: Total=21632KB written=536KB(2%) resident=1916KB(9%) swapped_out=0KB(0%) unallocated=19716KB(91%)<span></span></pre></td></tr></table></div>	<p>If you specify the <code>-d</code> parameter (plus an interval in seconds), <code>vmmap</code> takes two snapshots of virtual-memory usageâ€”one at the beginning of a specified interval and the other at the endâ€”and displays the differences. It shows three sets of differences:</p><ul class="spaceabove"><li class="li"><p>individual differences</p></li><li class="li"><p>regions in the first snapshot that are not in the second</p></li><li class="li"><p>regions in the second snapshot that are not in the first</p></li></ul><a name="//apple_ref/doc/uid/20001985-97652" title="Interpreting vmmap&acirc;&#128;&#153;s Output"></a><a name="//apple_ref/doc/uid/20001985-97652-BAJBHAGC" title="Interpreting vmmap&acirc;&#128;&#153;s Output"></a><h3>Interpreting vmmapâ€™s Output</h3><p>The columns of <code>vmmap</code> output have no headings. Instead you can interpret the type of data in each column by its format. <span class="content_text"><a href="VMPages.html#//apple_ref/doc/uid/20001985-102099-BBCDJIDD">Table 1</a></span> describes these columns.</p><a name="//apple_ref/doc/uid/20001985-102099-BBCDJIDD" title="Table 1Column descriptions for vmmap"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20001985-102099" title="Table 1Column descriptions for vmmap"></a><strong>Table 1&nbsp;&nbsp;</strong>Column descriptions for vmmap</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Column Number</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Example</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p>1</p></td><td ><p><code>__TEXT</code>, <code>__LINKEDIT</code>, <code>MALLOC_USED</code>, <code>STACK</code>, and so on</p></td><td ><p>The purpose of the memory. This column can contain the name of a Mach-O segment or the memory allocation technique. </p></td></tr><tr><td  scope="row"><p>2</p></td><td ><p><code>(DefaultMallocZone_0x5d2c0)</code></p></td><td ><p>If present, the zone used for allocation.</p></td></tr><tr><td  scope="row"><p>3</p></td><td ><p><code>4eee000</code></p></td><td ><p>The virtual memory address of the region.</p></td></tr><tr><td  scope="row"><p>4</p></td><td ><p><code>[ 124K]</code></p></td><td ><p>The size of the region, measured in kilobytes</p></td></tr><tr><td  scope="row"><p>5</p></td><td ><p><code>rw-/rwx</code></p></td><td ><p>Read, write and execution permissions for the region. The first set of flags specifies the current protection for the region. The second set of values specifies the maximum protection for the region. If an entry contains a dash (<code>-</code>), the process does not have the target permission.</p></td></tr><tr><td  scope="row"><p>6</p></td><td ><p><code>SM=PRV</code></p></td><td ><p>Sharing mode for the region, either <code>COW</code> (copy-on-write), <code>PRV</code> (private), <code>NUL</code> (empty), <code>ALI</code> (aliased), or <code>SHM</code> (shared). </p></td></tr><tr><td  scope="row"><p>7</p></td><td ><p><code>...ts/MacOS/Clock</code></p></td><td ><p>The end of the pathname identifying the executable mapped into this region of virtual memory. If the region is stack or heap memory, nothing is displayed in this column.</p></td></tr></table></div><p>Column 1 identifies the purpose of the memory. A <code>__TEXT</code> segment contains read-only code and data. A <code>__DATA</code> segment contains data that may be both readable and writable. For allocated data, this column shows how the memory was allocated, such as on the stack, using <code>malloc</code>, and so on. For regions loaded from a library, the far right column shows the name of the library loaded into memory.</p><p>The size of the virtual memory region (column 4) represents the total size reserved for that region. This number may not reflect the actual number of memory pages allocated for the region. For example, calling <code>vm_allocate</code> reserves a set of memory pages but does not allocate any physical memory until the pages are actually touched. Similarly, a memory-mapped file may reserve a set of pages, but the system does not load pages until a read or write event occurs on the file. </p><p>The protection mode (column 5) describes the access restrictions for the memory region. A memory region contains separate flags for read, write, and execution permissions. Each virtual memory region has a current permission, and a maximum permission. In the output from <code>vmmap</code>, the current permission appears first followed by the maximum permission. Thus, if the permissions are â€œ<code>r--/rwx</code>â€œ the page is currently read-only but allows read, write, and execution access as its maximum allowed permissions. Typically, the current permissions do not permit writing to a region. However, these permissions may change under certain circumstances. For example, a debugger may request write access to a page in order to set a breakpoint. </p><div class="notebox"><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;Pages representing part of a Mach-O executable are usually not writable. The first page (<code>__PAGEZERO</code>, starting at address <code>0x00000000</code>) has no permissions set. This ensures that any reference to a <code>NULL</code> pointer immediately causes an error. The page just before the stack is similarly protected so that stack overflows cause the application to crash immediately.</p></div><p>The sharing mode (<code>SM=</code> field) tells you whether pages are shared between processes and what happens when pages are modified. Private pages (<code>PRV</code>) are visible only to the process and are allocated as they are used. Private pages can also be paged out to disk. Copy-on-write (<code>COW</code>) pages are shared by multiple processes (or shared by a single process in multiple locations). When the page is modified, the writing process then receives its own copy of the page. Empty (<code>NUL</code>) sharing implies that the page does not really exist in physical memory. Aliased (<code>ALI</code>) and shared (<code>SHM</code>) memory are shared between processes.</p><p>The sharing mode typically describes the general mode controlling the region. For example, as copy-on-write pages are modified, they become private to the application. However, the region containing those private pages is still copy-on-write until all pages become private. Once all pages are private, the sharing mode changes to private.</p><p>Some lines in the output of <code>vmmap</code> describe submaps. A submap is a shared set of virtual memory page descriptions that the operating system can reuse between multiple processes. For example, the memory between <code>0x90000000</code> and <code>0xAFFFFFFF</code> is a submap containing the most common dynamic libraries. Submaps minimize the operating systemâ€™s memory usage by representing the virtual memory regions only once. Submaps can either be shared by all processes (machine-wide) or be local to the process (process-only). If the contents of a machine-wide submap are changedâ€”for example, the debugger makes a section of memory for a dynamic library writable so it can insert debugging trapsâ€”then the submap becomes local, and the kernel allocates memory to store the extra copy.<a name="//apple_ref/doc/uid/20001985-DontLinkElementID_189"></a><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_190"></a><a name="//apple_ref/doc/uid/20001985-DontLinkElementID_191"></a></p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="MallocDebug.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-06-28<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Performance/Conceptual/ManagingMemory/Articles/VMPages.html%3Fid%3D10000160i-3.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Performance/Conceptual/ManagingMemory/Articles/VMPages.html%3Fid%3D10000160i-3.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Performance/Conceptual/ManagingMemory/Articles/VMPages.html%3Fid%3D10000160i-3.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

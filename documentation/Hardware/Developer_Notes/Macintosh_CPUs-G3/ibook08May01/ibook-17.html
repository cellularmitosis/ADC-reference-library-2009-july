<HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Memory and I/O Device Controller</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of header --><!--#include virtual="/includes/framesetheader"--><!-- end of header --><!-- start of path --><TABLE border="0" cellpadding="0" cellspacing="2" width="432">          <TR>        <TD><FONT face="Geneva,Helvetica,Arial" size="1">        <B>PATH<IMG src="images/space.gif" width="6" height="12"></B><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->         <b>&gt;</b> iBook Developer Note                </FONT></TD>        </TR></TABLE><br><!-- end of path --><A HREF="ibook-12.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ibook-16.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ibook-22.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1><A NAME="pgfId-6093"></A><A NAME="25515"></A>Memory and I/O Device Controller</H1><P><A NAME="pgfId-4684"></A>The Pangea memory controller and I/O device controller IC provides cost and performance benefits by combining many functions into a single IC. It contains the memory controller, the PCI bus bridge, the Ethernet and FireWire interfaces, and the AGP port. <A NAME="marker-4685"></A></P><P><A NAME="pgfId-4689"></A>In addition to the buses listed in <A HREF="ibook-17.html#26626" CLASS="XRef">Table 2-1</A>, the Pangea IC also has separate interfaces to the physical layer (PHY) ICs for Ethernet and FireWire and an I<SUP>2</SUP>C interface that is used for configuring the memory subsystem.<A NAME="marker-4690"></A>&nbsp; </P><TABLE CELLPADDING = "3" BORDER="1"><B><P><A NAME="pgfId-4694"></A>Table 2-1	Buses supported by the Pangea IC <A NAME="26626"></A></P></B><TR><TH ALIGN = "Left" ROWSPAN="1" COLSPAN="1"><P><A NAME="pgfId-4702"></A>Name of bus</P></TH><TH ALIGN = "Left" ROWSPAN="1" COLSPAN="1"><P><A NAME="pgfId-4704"></A>Destinations</P></TH><TH ALIGN = "Left" ROWSPAN="1" COLSPAN="1"><P><A NAME="pgfId-4706"></A>Width of data path</P></TH><TH ALIGN = "Left" ROWSPAN="1" COLSPAN="1"><P><A NAME="pgfId-4708"></A>Bus clock speed </P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4710"></A>60x bus</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4712"></A>Microprocessor</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4714"></A>64 bits </FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4716"></A>66&nbsp;MHz </FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4718"></A>Memory bus</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4720"></A>System RAM</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4722"></A>64 bits </FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4724"></A>66&nbsp;MHz </FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4734"></A>AGP 2X bus</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4736"></A>Graphics IC</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4738"></A>32 bits </FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-4740"></A>66&nbsp;MHz </FONT></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-6119"></A>Ultra DMA<BR>IDE bus</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-6121"></A>Hard drive and <BR>CD or DVD drive</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-6123"></A>16 bits</FONT></TD><TD ROWSPAN="1" COLSPAN="1"><FONT CLASS="TbT-TblText"><A NAME="pgfId-6125"></A>33&nbsp;MHz </FONT></TD></TR></TABLE><P><A NAME="pgfId-6825"></A>The Pangea IC provides DB-DMA (descriptor-based direct memory access) support for the I/O channels. The DBDMA system provides a scatter-gather process based on memory resident data structures that describe the data transfers. The DMA engine is enhanced to allow bursting of data files for improved performance. <A NAME="marker-6128"></A></P><P><A NAME="pgfId-4741"></A>The microprocessor and the I/O controller IC are described in their own sections. The following sections describe the other subsystems that are connected to the Pangea IC. </P><DIV><H2 CLASS="H2nb-Heading2"><A NAME="pgfId-4116"></A><A NAME="26970"></A>System RAM</H2><P><A NAME="pgfId-4039"></A>The memory subsystem in the iBook consists of 64 or 128&nbsp;MB of SDRAM soldered on the main logic board and one expansion slot for an SO-DIMM. The data bus to the RAM and DIMM is 64 bits wide, and the memory interface is synchronized to the 60x bus interface at 66&nbsp;MHz. See also <A HREF="ibook-61.html" CLASS="XRef">RAM Expansion</A>. </P></DIV><DIV><H2 CLASS="H2nb-Heading2"><A NAME="pgfId-6146"></A>Boot ROM</H2><P><A NAME="pgfId-6758"></A>The boot ROM includes the hardware-specific code and tables needed to start up the computer, to load an operating system, and to provide common hardware access services.</P><P><A NAME="pgfId-6185"></A>The boot ROM is connected to the card slot interface of the Pangea IC. The boot ROM is a 1&nbsp;M by 8 bit flash device and can be updated in the field. <A NAME="marker-6186"></A></P></DIV><H2><A NAME="pgfId-6212"></A>Ethernet Controller </H2><P><A NAME="pgfId-6213"></A>The Pangea IC includes an Ethernet media access controller (MAC) that implements the Link layer. As a separate channel connected directly to the Pangea logic, it can operate at its full capacity without degrading the performance of other peripheral devices. The Pangea IC provides DB-DMA support for the Ethernet interface. <A NAME="marker-6214"></A></P><P><A NAME="pgfId-6208"></A>The controller is connected to a PHY interface IC that is capable of operating in either 10-BaseT or 100-BaseTX mode. The actual speed of the link is automatically negotiated by the PHY and the bridge or router to which it is connected. For information about the connector and the operation of the port, see <A HREF="ibook-29.html" CLASS="XRef">Ethernet Port</A>. </P><H2><A NAME="pgfId-6190"></A>FireWire Controller</H2><P><A NAME="pgfId-6560"></A>The Pangea IC includes an IEEE 1394 FireWire controller with a maximum data rate of 400&nbsp;Mbits (50MBytes) per second. The Pangea IC provides DMA (direct memory access) support for the FireWire interface. The FireWire controller complies with the Open Host Controller Interface (OHCI) specification. <A NAME="marker-6192"></A></P><P><A NAME="pgfId-6292"></A>The controller IC implements the FireWire link layer. A physical layer IC, called a PHY, implements the electrical signalling protocol of the FireWire interface. The PHY is the interface to the external connector. For information about the connector and the operation of the port, see <A HREF="ibook-26.html" CLASS="XRef">FireWire Port</A>. </P><DIV><H2 CLASS="H2nb-Heading2"><A NAME="pgfId-6297"></A><A NAME="12396"></A>Graphics IC</H2><P><A NAME="pgfId-6298"></A>The graphics IC is an ATI RAGE Mobility 128M. It provides video for both the internal flat panel display and an external composite video monitor. The RAGE Mobility 128M also supports an RGB video output port. <A NAME="marker-6299"></A></P><P><A NAME="pgfId-6479"></A>The RAGE Mobility 128M IC includes 8&nbsp;MB of SDRAM and supports a display size of 1024 by 768 pixels. The graphics IC also has a scaling mode that displays a 640-by-480 or 800-by-600 pixel image on the full screen. </P><P><A NAME="pgfId-6723"></A>The RAGE Mobility 128M IC also has a 3D graphics engine for faster rendering of 3D objects. </P><P><A NAME="pgfId-6810"></A>The display generated for the flat panel display is simultaneously available for an external monitor. See <A HREF="ibook-56.html" CLASS="XRef">Composite Video Output</A> and <A HREF="ibook-57.html#12481" CLASS="XRef">RGB Video Output</A>. </P><P><A NAME="pgfId-6817"></A>Because the graphics IC uses the AGP bus, it can use part of main memory as additional graphics storage. The computer's virtual memory system organizes main memory as randomly-distributed 4&nbsp;KB pages, so DMA transactions for more than 4&nbsp;KB of data would have to perform scatter-gather operations. To avoid this necessity for graphics storage, the AGP logic in the Pangea IC uses a graphics address remapping table (GART) to translate a linear address space for AGP transactions into physical addresses in main memory. <A NAME="marker-6818"></A></P></DIV><DIV><H2 CLASS="H2nb-Heading2"><A NAME="pgfId-4776"></A><A NAME="33564"></A>Ultra DMA IDE Bus<A NAME="marker-6650"></A></H2><P><A NAME="pgfId-6385"></A>The Pangea IC provides an Ultra DMA IDE (integrated drive electronics) channel that is connected to the internal hard disk drive and the CD or DVD drive. The Ultra DMA IDE interface, also called Ultra-DMA/33 and ATA-4, is an improved version of the EIDE interface. The Pangea IC provides DB-DMA (descriptor-based direct memory access) support for the Ultra DMA interface.<A NAME="marker-6386"></A></P><P><A NAME="pgfId-6607"></A>The internal hard disk drive is connected as device 0 (master) in an ATA Device 0/1 configuration. The CD or DVD drive is connected as device 1 (slave). Digital audio data from the CD or DVD drive is processed by the Sound Manager and then sent out through the Pangea IC to the sound IC. <A NAME="marker-6614"></A><A NAME="marker-6655"></A><A NAME="marker-6656"></A></P></DIV><H2><A NAME="pgfId-6330"></A><A NAME="14822"></A>USB Interface</H2><P><A NAME="pgfId-6331"></A>The Pangea IC implements two independent USB controllers (root hubs), each of which is connected to one of the ports on the back panel of the computer. The use of two independent controllers allows both USB ports to support high data rate devices at the same time with no degradation of their performance. If a user connects a high-speed (12&nbsp;Mbps) device to one port and another high-speed device to the other, both devices can operate at their full data rates.</P><P><A NAME="pgfId-6332"></A>The external USB connectors support USB devices with data transfer rates of 1.5&nbsp;Mbps and 12&nbsp;Mbps. For more information, see <A HREF="ibook-23.html" CLASS="XRef">USB Ports</A>. <A NAME="marker-6336"></A></P><P><A NAME="pgfId-6337"></A>USB devices connected to the iBook computer are required to support USB-suspend mode as defined in the USB specification. Information about the operation of USB-suspend mode on Macintosh computers is included in the <i>Mac OS USB DDK API Reference.</I> To obtain that document, please see the references at <A HREF="ibook-79.html" CLASS="XRef">USB Interface</A>. <A NAME="marker-6341"></A></P><P><A NAME="pgfId-6342"></A>The USB ports on the iBook computer comply with the Universal Serial Bus Specification 1.1 Final Draft Revision. The USB controllers comply with the Open Host Controller Interface (OHCI) specification. <A NAME="marker-6343"></A></P><DIV><H2 CLASS="H2nb-Heading2"><A NAME="pgfId-4237"></A><A NAME="33884"></A>Modem Support </H2><P><A NAME="pgfId-4238"></A>The Pangea IC has a Macintosh serial port that is the interface to the modem connector. The Pangea IC provides an SCC (Serial Communications Controller) that communicates with the built-in hardware modem. The modem hardware is a set of ICs including a modem controller, data pump, and DAA. See <A HREF="ibook-30.html" CLASS="XRef">Internal Modem</A>. </P></DIV><H2><A NAME="pgfId-6661"></A>Sound Circuitry </H2><P><A NAME="pgfId-6662"></A>The iBook computer has new sound circuitry, called Tumbler, that is connected to the Pangea IC by a standard I<SUP>2</SUP>S bus. The Pangea IC provides DB-DMA (descriptor-based direct memory access) support for the I<SUP>2</SUP>S port. <A NAME="marker-6663"></A><A NAME="marker-6887"></A></P><P><A NAME="pgfId-6664"></A>The sound circuitry includes a signal processing IC that handles the equalization and volume control functions and a codec IC that performs A-to-D and D-to-A conversion. </P><P><A NAME="pgfId-6706"></A>All audio is handled digitally inside the computer. The Tumbler circuitry performs digital-to-analog conversion for the audio signals to the internal speakers and the headphone jack. The Tumbler circuitry also provides parametric equalization for the internal speakers. </P><P><A NAME="pgfId-6686"></A>Modem progress audio is connected as a digital input to the sound circuitry so that it can be mixed into the sound output stream. The modem progress audio is processed as play-through only, not as a digital sound source. </P><P><A NAME="pgfId-6692"></A>The iBook has no dedicated sound input jack. The sound system supports the built-in microphone and other sound input by way of a USB microphone or other USB audio device. For information about sound system operation, see <A HREF="ibook-60.html" CLASS="XRef">Sound System</A>. </P><DIV><H2 CLASS="H2nb-Heading2"><A NAME="pgfId-4023"></A><A NAME="37799"></A>Power Control IC <A NAME="marker-4022"></A></H2><P><A NAME="pgfId-4024"></A>The power manager IC in the iBook computer is a Mitsubishi M16C/62F microprocessor, also called the PMU99. It operates with its own RAM and ROM. The functions of the PMU99 include: <A NAME="marker-4499"></A></P><UL><LI><A NAME="pgfId-4025"></A>controlling the sleep and power on and off sequences<P><LI><A NAME="pgfId-4026"></A>controlling power to the other ICs<P><LI><A NAME="pgfId-4029"></A>monitoring the battery charge level <P><LI><A NAME="pgfId-6905"></A>controlling battery charging<P><LI><A NAME="pgfId-6906"></A>supporting the interface to the built-in keyboard and trackpad<P></UL><P><A NAME="pgfId-6911"></A>The iBook computer can operate from a 15-volt power outlet on an airliner, but the voltage available is not high enough for charging the battery. So that the computer can detect the connection to the airliner power, the airliner power cable has a sense resistor of approximately 25K ohms connected between the power plug's shell and ground. <A NAME="marker-6917"></A></P><P><A NAME="pgfId-6907"></A>The PMU99 also provides the hardware interface to the keyboard and trackpad. Software in the PMU99 IC scans the keyboard and receives data from the trackpad, then sends the data to the system in packets like those from the ADB. To the system, the keyboard and trackpad behave as if they were ADB devices. <A NAME="marker-6908"></A></P></DIV><DIV><H2 CLASS="H2nb-Heading2"><A NAME="pgfId-6900"></A><A NAME="14247"></A>AirPort Card Wireless LAN Module</H2><P><A NAME="pgfId-5138"></A>The AirPort Card wireless LAN module shares card slot interface to the Pangea IC with the boot ROM. <A NAME="marker-5139"></A></P><P><A NAME="pgfId-4919"></A>The AirPort Card contains a media access controller (MAC), a digital signal processor (DSP), and a radio-frequency (RF) section. The card has a connector for the cable to the antennas, which are built into the computer's case. </P><P><A NAME="pgfId-4577"></A>The AirPort Card is based on the IEEE 802.11B standard. The card transmits and receives data at up to 11&nbsp;Mbps and is compatible with older 802.11-standard systems that operate at 2 or 1&nbsp;Mbps. For information about its operation, see <A HREF="ibook-31.html" CLASS="XRef">AirPort Card Wireless LAN Module</A>. </P></DIV><HR>Copyright &#169; 2001 Apple Computer, Inc.  (Last Updated May 8, 2001)<P><A HREF="ibook-12.html"><img src="images/up.gif" border="0" alt="Up"></A><nobr>&nbsp;</nobr><A HREF="ibook-16.html"><img src="images/previous.gif" border="0" alt="Previous"></A><nobr>&nbsp;</nobr><A HREF="ibook-22.html"><img src="images/next.gif" border="0" alt="Next"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>EWrite(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING274></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-273.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-275.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-257.html"><B>Chapter 11 - Ethernet, Token Ring, and Fiber Distributed Data Interface</B></A> / <A HREF="Networking-265.html"><B>Ethernet, Token Ring, and FDDI Reference</B></A><BR><DL><DD><A HREF="Networking-269.html"><B>Routines</B></A> / <A HREF="Networking-273.html"><B>Writing and Reading Ethernet Packets</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING274-0></A>
<H3><A NAME=MARKER-9-161></A>EWrite</H3>
 The <CODE>EWrite</CODE> function allows you to send data directly to a hardware device driver for a particular network type for transmission across the network. <P>
<PRE>
FUNCTION EWrite (thePBptr: EParamBlkPtr; async: Boolean): OSErr; 
</PRE>
<DL>
<DT><CODE>thePBptr</CODE>
<DD> A pointer to a parameter block of type <CODE>EParamBlock</CODE>.
<DT><CODE><A NAME=MARKER-11-162></A>async</CODE>
<DD> A Boolean value that specifies whether the function should be executed asynchronously or synchronously. Specify <CODE>TRUE</CODE> for asynchronous execution.  <A NAME=MARKER-2-44></A>
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The result code. <TR>
<TD>--><TD>ioRefNum<TD>Integer<TD>The driver reference number.<TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>ENetWrite</CODE> for this function.<TR>
<TD>--><TD>ePointer<TD>Ptr<TD>A pointer to write-data structure.</TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-18></A>ePointer</CODE>
<DD> A pointer to the write-data structure that contains the data that you want to send. 
</DL>
<A NAME=HEADING274-7></A>
<H5>DESCRIPTION</H5>
 You use the <CODE>EWrite</CODE> function to send a data packet over an Ethernet, a token ring, or an FDDI network by communicating directly with the hardware device driver for that network type. You must first prepare a write-data structure that specifies the destination address and the protocol type and contains the data that you want to send. You place a pointer to the write-data structure in the <CODE>ePointer</CODE> parameter.<P>
 For Ethernet, if you want to send a packet larger than 768 bytes, you must first call <BR>the <CODE>ESetGeneral</CODE> function to put the .ENET driver in general-transmission mode. <BR>If the size of the packet you provide is less than 60 bytes, the driver adds pad bytes to <BR>the packet. <P>
<A NAME=HEADING274-10></A>
<H5>TOKEN RING AND FDDI CONSIDERATIONS</H5>
 <A NAME=MARKER-2-165></A>You can use this function to send data to a token ring or FDDI driver. Note that the packet size for token ring and FDDI is hardware dependent. However, for <A NAME=MARKER-2-166></A>Logical Link Control (LLC) type packets, the packet length cannot exceed 1500 bytes.<P>
 To use this function for token ring or FDDI, you must set the <CODE>ioRefNum</CODE> field to the driver reference number that the <CODE>OpenSlot</CODE> or <CODE>OpenDriver</CODE> function returns.<P>
 You must also provide a pointer to a <A NAME=MARKER-2-167></A>write-data structure. <A NAME=MARKER-2-168></A>The first buffer in the write-<BR>data structure must be at least 14 bytes long: the first 6 bytes of that buffer must contain the destination address. Bytes 13 and 14 must contain the packet length, which must not exceed 1500 bytes. The token ring driver fills in bytes 7-12 with the source address.<P>
<A NAME=HEADING274-14></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>EWrite</CODE> function from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>ENetWrite</CODE> in the <CODE>csCode</CODE> field of the parameter block. To execute the <CODE>_Control</CODE> trap asynchronously, include the value <CODE>,ASYNC</CODE> in the operand field.<P>
<A NAME=HEADING274-16></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>eLenErr<TD>-92<TD>Packet too large or first entry of the write-data structure <BR>did not contain the full 14-byte header<TR>
<TD>excessCollsns<TD>-95<TD>Hardware error</TABLE>
</H5>
<A NAME=HEADING274-17></A>
<H5>SEE ALSO</H5>
 For information on how to use the <CODE>EWrite</CODE> function and how to create a write-data structure, see <A HREF=Networking-262.html#MARKER-9-57>"Using a Write-Data Structure to Transmit Ethernet Data" beginning on page 11-10</A>.<P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-273.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-275.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

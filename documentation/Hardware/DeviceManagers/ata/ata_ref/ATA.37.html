<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> ATA_GetDevConfig</TITLE></HEAD><BODY BGCOLOR="#ffffff"><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><table border="0" cellpadding="0" cellspacing="2" width="432">		<tr>	<td scope="row"><font face="Geneva,Helvetica,Arial" size="1">	<b>PATH<img src="../../../images/space.gif" width="6" height="12"></b>	<a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a --> 	<b>&gt;</b> <a href="../../devicemgrs.html">Device Managers and Drivers</a>	<b>&gt;</b> <a href="../ata.html" target="_top">ATA Devices</a>	<b>&gt;</b> ATA Device Software Guide		</font></td>	</tr>	</table><br><!-- end of path --><DIV><!-- top navigation --><P><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.36.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.38.html"><img src="images/next.gif" border="0"></A> <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></a></div><!-- end top navigation --><hr><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=1356"> </A><A NAME="12080"> </A>ATA_GetDevConfig</H3><P CLASS="T0.Text0"><A NAME="pgfId=2824"> </A>The <TT CLASS="cv">ATA_GetDevConfig</TT> function allows an application to determine what the configuration is for a specified socket. <A NAME="marker=2835"> </A><A NAME="marker=2836"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=2827"> </A>Some of the fields in this structure are changed or are not valid for ATA Manager 4.0 and later. See the field descriptions section for additional details.</P><P CLASS="T1.Text1"><A NAME="pgfId=2828"> </A>The manager function code for the <TT CLASS="cv">ATA_GetDevConfig </TT>function is $8A. </P><P CLASS="T1.Text1"><A NAME="pgfId=1361"> </A>The parameter block associated with this function is defined as follows:</P><table><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=15067"> </A><tr><td colspan=2 scope="row"><tt>typedef</tt></td><td><tt>struct</tt></td><td>&nbsp;</td><tr><td colspan=4>{</td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>ataPBHdr</tt><td width="100"></td><td width="200" valign="top"><tt>/* ataPBHdr parameter block */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>SInt32</tt></td><td width="100" valign="top"><tt>ConfigSetting;</tt></td><td width="200" valign="top"><tt>/* &lt;--&gt; 32 bits of */<br>/* configuration information */<BR></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>ataPIOSpeedMode;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Default PIO mode setting*/</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>Reserved3;</tt></td><td width="200" valign="top"><tt>/* Reserved for word alignment*/</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>pcValid;</tt></td><td width="200" valign="top"><tt>/* &lt;-- PCMCIA unique */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>RWMultipleCount;</tt></td><td width="200" valign="top"><tt>/* Reserved */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>SectorsPerCylinder;</tt></td><td width="200" valign="top"><tt>/* Reserved */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>Heads;</tt></td><td width="200" valign="top"><tt>/* Reserved */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>SectorsPerTrack;</tt></td><td width="200" valign="top"><tt>/* Reserved */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>socketNum;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Socket number */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>socketType;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Type of socket */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>deviceType;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Type of active device */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcAccessMode;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Access mode of socket */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcVcc;</tt></td><td width="200" valign="top"><tt>/* &lt;-- device voltage */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcVpp1;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Vpp 1 voltage */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcVpp2;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Vpp 2 voltage */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcStatus;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Status register setting */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcPin;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Pin register setting */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcCopy;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Copy register setting */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>pcConfigIndex;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Option register setting */</tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>ataSingleDMASpeed;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Single word DMA */<br>/* timing class */<BR></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt8</tt></td><td width="100" valign="top"><tt>ataMultiDMASpeed;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Default Multiword DMA */<BR>/* timing class */<BR></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>ataPIOCycleTime;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Default cycle time for */<BR>/* PIO mode */<BR></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>ataMultiCycleTime;</tt></td><td width="200" valign="top"><tt>/* &lt;-- Default cycle time for */<BR>/* multiword DMA mode */<BR></tt></td></tr><tr><td width="20" valign="top" scope="row"></td><td width="75" valign="top"><tt>UInt16</tt></td><td width="100" valign="top"><tt>Reserved[7];</tt></td><td width="200" valign="top"><tt>/* Reserved*/</tt></td></tr><tr><td colspan=4 scope="row"><tt>} ataGetDevConfig;</tt></td></tr></CODE></table><div><h4>Field description</h4><dl compact><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15069"> </A><TT CLASS="cv">ataPBHdr</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1423"> </A>See the definition of the <TT CLASS="cv"><A HREF="ATA.26.html" CLASS="XRef">ataPBHdr</TT> parameter block</A>.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15078"> </A><TT CLASS="cv">ConfigSetting</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3228"> </A>This 32-bit field contains various device configuration information. In general is it used for features that might be device configurable but which might be know only at the ATA driver level. Bit 6 is the only bit used by ATA Manager 4.0 or later. The bits have the following definitions:</DD><DD CLASS="DD.DefinitionDefCont"><A NAME="pgfId=3229"> </A> <TABLE BORDER=1 CELLPADDING=2> <TR> <TD VALIGN=TOP ALIGN=LEFT>Bits 0-5: </TD><TD>Reserved, should be 0 </TD></TR> <TR> <TD VALIGN=TOP ALIGN=LEFT> Bit 6: </TD><TD>ATAPI packet DRQ handling setting.<BR>0 = Check for assertion of cammand packet DRQ,<BR>this is the default setting.<BR>1 = Check for interrupt DRQ command DRQ. </TD></TR> <TR> <TD VALIGN=TOP ALIGN=LEFT> Bits 7-31:</TD><TD>Reserved, must be 0</TD></TR></TABLE></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15104"> </A><TT CLASS="cv"><BR>ataPIOSpeedMode</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1426"> </A>This field indicates the device access speed value in PIO (polled I/O ) mode currently used for commands and PIO data transfers. This value can be modified with the <TT CLASS="cv">ATA_SetDevConfig</TT> function. In parameter block versions 1 and 2, this field is an integer. In parameter block versions 3 and greater, this field is bit-significant, where the low-order bit indicates that PIO mode 0 is the current mode.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15113"> </A><TT CLASS="cv">pcValid</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1427"> </A>This 16-bit field applies to systems that support PCMCIA card services. It indicates which of the PCMCIA unique fields contain valid information. The following values are defined:<A NAME="marker=2562"> </A> <BR>bit 0 = when set, the value in the <TT CLASS="cv">pcAccessMode</TT> field is valid  <BR>bit 1 = when set, the value in the <TT CLASS="cv">pcVcc</TT> field is valid  <BR>bit 2 = when set, the value in the <TT CLASS="cv">pcVpp1</TT> field is valid  <BR>bit 3 = when set, the value in the <TT CLASS="cv">pcVpp2</TT> field is valid  <BR>bit 4 = when set, the value in the <TT CLASS="cv">pcStatus</TT> field is valid  <BR>bit 5 = when set, the value in the <TT CLASS="cv">pcPin</TT> field is valid  <BR>bit 6 = when set, the value in the <TT CLASS="cv">pcCopy</TT> field is valid  <BR>bit 7 = when set, the value in the <TT CLASS="cv">pcConfigIndex</TT> field is valid  <BR>bits 14-8 = reserved (set to 0)  <BR>bit 15 = reserved  <BR>The <TT CLASS="cv">pcValid</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software. </DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15155"> </A><TT CLASS="cv">PWMultipleCount</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1428"> </A>This field is reserved for future use. To ensure future compatibility, all reserved fields should be set to 0.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15164"> </A><TT CLASS="cv">SectorsPerCylinder</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1429"> </A> This field is reserved for future use. To ensure future compatibility, all reserved fields should be set to 0.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15174"> </A><TT CLASS="cv">Heads</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1430"> </A>This field is reserved for future use. To ensure future compatibility, all reserved fields should be set to 0.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15183"> </A><TT CLASS="cv">SectorsPerTrack</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1431"> </A>This field is reserved for future use. To ensure future compatibility, all reserved fields should be set to 0.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15192"> </A><TT CLASS="cv">socketNum</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1432"> </A>This field contains the socket number for the device used by the PCMCIA card services. The socket number is required to request card services. A value of 0xFF indicates the device is not a card services client. The <TT CLASS="cv">socketNum</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15205"> </A><TT CLASS="cv">socketType</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1433"> </A>This field specifies the type of socket. The values are defined as: <BR>00 = unknown socket type <BR>01 = internal ATA bus (<TT CLASS="cv">kATASocketInternal</TT>) <BR>02 = media bay socket (<TT CLASS="cv">kATASocketMB</TT>) <BR>03 = PCMCIA socket (<TT CLASS="cv">kATASocketPCMCIA</TT>)</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15226"> </A><TT CLASS="cv">deviceType</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=2567"> </A>This field specifies the type of device. The possible values are defined as: <BR>00 = unknown or no device present (<TT CLASS="cv">kATADeviceUnknown</TT>) <BR>01 = standard ATA device detected (<TT CLASS="cv">kATADeviceATA</TT>) <BR>02 = ATAPI device detected (<TT CLASS="cv">kATADeviceATAPI</TT>) <BR>03 = PCMCIA ATA device detected (the 03 value is not returned by ATA Manager 4.0 or later)</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15247"> </A><TT CLASS="cv">pcAccessMode</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=2568"> </A>This field specifies the current mode of the socket. This field is valid only when bit 0 of the <TT CLASS="cv">pcValid</TT> filed is set. The mode values are:  <BR>0 = I/O mode  <BR>1 = memory mode  <BR>The <TT CLASS="cv">pcAccessMode</TT> field is not supported in ATA Manager 4.0 or later.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15265"> </A><TT CLASS="cv">pcVcc</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1436"> </A>This field specifies the voltage on Vcc in tenths of a volt. The value in this field is only valid when bit 1 of the <TT CLASS="cv">pcValid</TT> field is set. The <TT CLASS="cv">pcVcc</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15274"> </A><TT CLASS="cv">pcVpp1</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1437"> </A>This field specifies the voltage of Vpp1 in tenths of a volt. The value in this field is valid only when bit 2 of the <TT CLASS="cv">pcValid</TT> field is set. The <TT CLASS="cv">pcVpp1</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15283"> </A><TT CLASS="cv">pcVpp2</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1438"> </A>This field specifies the voltage of Vpp2 in tenths of a volt. The value in this field is valid only when bit 3 of the <TT CLASS="cv">pccValid</TT> field is set. The <TT CLASS="cv">pcVpp2</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15292"> </A><TT CLASS="cv">pcStatus</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1439"> </A>This field specifies the current card register setting of a PCMCIA device. The value in this field is valid only when bit 4 of the <TT CLASS="cv">pccValid</TT> field is set. The <TT CLASS="cv">pcStatus</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15301"> </A><TT CLASS="cv">pcPin</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=2878"> </A>This field specifies the current card pin register setting of a PCMCIA device. The value in this field is valid only when bit 5 of the <TT CLASS="cv">pccValid</TT> field is set. The <TT CLASS="cv">pcPin</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15310"> </A><TT CLASS="cv">pcCopy</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=2879"> </A>This field specifies the current setting of the card socket/copy register of a PCMCIA device. The value in this field is valid only when bit 6 of the <TT CLASS="cv">pccValid</TT> field is set. The <TT CLASS="cv">pcCopy</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15319"> </A><TT CLASS="cv">pcConfigIndex</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1442"> </A>This field specifies the current setting of the card option register of a PCMCIA device. The value in this field is valid only when bit 7 of the <TT CLASS="cv">pccValid</TT> field is set. The <TT CLASS="cv">pcConfigIndex</TT> field is not supported in ATA Manager 4.0 or later, because the PC Card services are now handled by other system software.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15328"> </A><TT CLASS="cv">ataSingleDMASpeed</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1443"> </A>This bit-significant field indicates which single word DMA mode, if any, is currently configured for use with DMA transfers. The intitial default value is single word DMA mode 0. The DMA transfer mode may be modified with the <TT CLASS="cv">ATA_SetDevConfig</TT> function. This field is only valid for ATA Manager 3.0 or greater. <A NAME="marker=1444"> </A></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15337"> </A><TT CLASS="cv">ataMultiDMASpeed</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1445"> </A>This bit-significant field indicates which multiword DMA mode, if any, is currently configured for use with DMA transfers. The intitial default value of this field is 0, which indicates that multiword DMA not selected. The DMA transfer mode may be modified by the <TT CLASS="cv">ATA_SetDevConfig</TT> function. This field is only valid for ATA Manager 3.0 or greater.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15346"> </A><TT CLASS="cv">ataPIOCycleTime</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1446"> </A>This word field specifies the minimum cycle time in microseconds of mode 3 or greater PIO transfers. For additional information about the contents of this field, see the <TT CLASS="cv">ataPIOCycleTime</TT> field in the <TT CLASS="cv"><A HREF="ATA.38.html#27045" CLASS="XRef">ATA_SetDevConfig</TT></A> function description. </DD><DD CLASS="DD.DefinitionDefCont"><A NAME="pgfId=2617"> </A>The actual cycle time may be higher than this value if the system hardware is unable to create the requested cycle time while maintaining signal timing for the PIO mode in use. This field is only valid for ATA Manager 3.0 or greater.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=15357"> </A><TT CLASS="cv">ataMultiCycleTime</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=1450"> </A> This word field specifies the minimum cycle time in microseconds of mode 1 or higher multiword DMA data transfers. For additional information about the contents of this field, see the <TT CLASS="cv">ataMultiCycleTime</TT> field in the <TT CLASS="cv"><A HREF="ATA.38.html#27045" CLASS="XRef">ATA_SetDevConfig</TT></A> function description. </DD><DD CLASS="DD.DefinitionDefCont"><A NAME="pgfId=2618"> </A>The actual cycle time may be higher than this value if the system hardware is unable to create the requested cycle time while maintaining signal timing for the multiword DMA mode in use. This field is only valid for ATA Manager 3.0 or greater.</DD></div></dl><DIV><H5><A NAME="pgfId=1454"> </A>RESULT CODES</H5><P CLASS="T0.Text0"><A NAME="pgfId=1458"> </A>See <A HREF="ATA.3a.html#37212" CLASS="XRef">Table&nbsp;A-1</A> for possible result codes returned by the ATA Manager.</P></DIV><HR>&#169 1999 Apple Computer, Inc. &#151; (Last Updated 9 Mar 99) <P><A HREF="ATA.2a.html"><img src="images/up.gif" border="0"></A> <A HREF="ATA.36.html"><img src="images/previous.gif" border="0"></A> <A HREF="ATA.38.html"><img src="images/next.gif" border="0"></A>  <!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!-- document.write(frameLink);//--></script></a><!-- end Show/Hide frames --></P><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
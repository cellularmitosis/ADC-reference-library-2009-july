<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>HLock (IM: M)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING31></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Memory-30.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-32.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Memory-2.html"><B>Memory</B></A> / <BR><DD><A HREF="Memory-9.html"><B>Chapter 1 - Introduction to Memory Management</B></A> / <A HREF="Memory-13.html"><B>Memory Management Reference</B></A><BR><DL><DD><A HREF="Memory-14.html"><B>Memory Management Routines</B></A> / <A HREF="Memory-28.html"><B>Setting the Properties of Relocatable Blocks</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING31-0></A>
<H3><A NAME=MARKER-11-311></A><A NAME=MARKER-9-312></A>HLock<A NAME=MARKER-2-498></A><A NAME=MARKER-2-356></A><A NAME=MARKER-2-357></A></H3>
 You can use the <CODE>HLock</CODE> procedure to lock a relocatable block so that it does not move in the heap. If you plan to dereference a handle and then allocate, move, or purge memory (or call a routine that does so), then you should lock the handle before using the dereferenced handle.<P>
<PRE>
PROCEDURE HLock (h: Handle);
</PRE>
<DL>
<DT><CODE>h</CODE>
<DD> A handle to a relocatable block.
</DL>
<A NAME=HEADING31-4></A>
<H5>DESCRIPTION</H5>
 The <CODE>HLock</CODE> procedure locks the relocatable block to which <CODE>h</CODE> is a handle, preventing it from being moved within its heap zone. If the block is already locked, <CODE>HLock</CODE> does nothing.<P>
<A NAME=HEADING31-6></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The registers on entry and exit for <CODE>HLock</CODE> are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN = LEFT colspan=2>Registers on entry<TR>
<TD>A0<TD>Handle to lock</TABLE>

<TABLE BORDER="0" CELLPADDING=3><TH ALIGN = LEFT colspan=2>Registers on exit<TR>
<TD>D0<TD>Result code</TABLE>
<P>
<A NAME=HEADING31-8></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>nilHandleErr<TD>-109<TD><CODE>NIL</CODE> master pointer<TR>
<TD>memWZErr<TD>-111<TD>Attempt to operate on a free block</TABLE>
</H5>
<A NAME=HEADING31-9></A>
<H5>SEE ALSO</H5>
 If you plan to lock a relocatable block for long periods of time, you can prevent fragmentation by ensuring that the block is as low as possible in the heap zone. To do this, see the description of the <CODE>ReserveMem</CODE> procedure on <A HREF=Memory-38.html#MARKER-9-390>page 1-70</A>.<P>
 If you plan to lock a relocatable block for short periods of time, you can prevent heap fragmentation by moving the block to the top of the heap zone before locking. For more information, see the description of the <CODE>MoveHHi</CODE> procedure on <A HREF=Memory-39.html#MARKER-9-393>page 1-71</A>.<A NAME=MARKER-2-358></A><A NAME=MARKER-2-359></A><A NAME=MARKER-2-360></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Memory-30.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Memory-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Memory-202.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Memory-32.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Memory-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

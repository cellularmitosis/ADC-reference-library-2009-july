<html><head>
<script language="JavaScript" src="../../../../../../../../../../frametest.js"></script>
<title>EODatabaseOperation</title></head>
<body bgcolor=#ffffff>

<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header -->

<!--start of path -->
<font face="Geneva,Helvetica,Arial" size="1">
<b>PATH<spacer type="horizontal" size="5">&nbsp;</b>
 <a href="../../../../../../../../../../webobjects.html" target="_top">WebObjects 4.0 Documentation</a> <b>&gt;</b>
 <a href="../frameset.html" target="_top">EOAccess Reference</a>
</font>
<br><br>
<!--end of path -->

<!-- start of navigation -->
<a href="EODatabaseDataSource.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="EOEntity.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<!-- end of navigation -->


<hr><br>
 
<h1><a name="//apple_ref/occ/cl/EODatabaseOperation">EODatabaseOperation</a>
 <BR>
</h1>
<p><B>Inherits From:</B><BR>  
NSObject

<p><B>Conforms To:</B>
NSObject (NSObject)

<p><B>Declared in:</B>
EOAccess/EODatabaseOperation.h

<p><a name="227">
<hr width=50% align=left>
<h2>Class Description </h2>
</a>An EODatabaseOperation object represents an operation-insert, update, or delete-to perform on an enterprise object and all the necessary information required to perform the operation. You don't ordinarily create instances of EODatabaseOperation; rather, the Framework automatically creates an EODatabaseOperation object for each new, updated, or deleted object in an EOEditingContext. An EODatabaseContext object analyzes a set of database operations and maps each operation to one or more adaptor operations. The adaptor operations are then performed by an EOAdaptorChannel object. You generally interact with EODatabaseOperation objects only if you need to specify the order in which a set of operations are carried out (see the description for the EODatabaseContext delegate method <code>databaseContextWillOrderAdaptorOperationsFromDatabaseOperationsdatabaseContext:willOrderAdaptorOperationsFromDatabaseOperations:</code>).<p>
An EODatabaseOperation specifies an enterprise object (called "object") on which the operation is performed, the EOGlobalID for the object, and the object's entity. In addition, the database operation has a snapshot containing the last known database values for the object and a <code>newRow</code> dictionary of new or updated values to save in the database. Finally, a database operation specifies one of the following operators (the type of operation represented by the database operation).<p>
<ul><li>EODatabaseNothingOperator
<li>EODatabaseInsertOperator
<li>EODatabaseUpdateOperator
<li>EODatabaseDeleteOperator
</ul><a name="234">
<hr width=50% align=left>
<h2>Method Types </h2>
</a><dl><dt>Creating a new EODatabaseOperation
<dl><dt><a href="EODatabaseOperation.html#6753">- initWithGlobalID:object:entity:</a>
</dl><dt>Accessing the global ID object
<dl><dt><a href="EODatabaseOperation.html#273">- globalID</a>
</dl><dt>Accessing the object
<dl><dt><a href="EODatabaseOperation.html#286">- object</a>
</dl><dt>Accessing the entity
<dl><dt><a href="EODatabaseOperation.html#269">- entity</a>
</dl><dt>Accessing the operator
<dl><dt><a href="EODatabaseOperation.html#306">- setDatabaseOperator:</a>
<dt><a href="EODatabaseOperation.html#261">- databaseOperator</a>
</dl><dt>Accessing the database snapshot
<dl><dt><a href="EODatabaseOperation.html#2681">- setDBSnapshot:</a>
<dt><a href="EODatabaseOperation.html#265">- dbSnapshot</a>
</dl><dt>Accessing the row
<dl><dt><a href="EODatabaseOperation.html#310">- setNewRow:</a>
<dt><a href="EODatabaseOperation.html#281">- newRow</a>
</dl><dt>Accessing the adaptor operations
<dl><dt><a href="EODatabaseOperation.html#257">- addAdaptorOperation:</a>
<dt><a href="EODatabaseOperation.html#223">- removeAdaptorOperation:</a>
<dt><a href="EODatabaseOperation.html#2354">- adaptorOperations</a>
</dl><dt>Comparing new row and snapshot values
<dl><dt><a href="EODatabaseOperation.html#294">- rowDiffs</a>
<dt><a href="EODatabaseOperation.html#298">- rowDiffsForAttributes:</a>
</dl><dt>Working with to-many snapshots
<dl><dt><a href="EODatabaseOperation.html#6885">- recordToManySnapshot:relationshipName:</a>
<dt><a href="EODatabaseOperation.html#7030">- toManySnapshots</a>
</dl></dl><a name="2350">
<hr width=50% align=left>
<h2>Instance Methods </h2>
</a><a name="2354">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">adaptorOperations</a></h3>
</a>- (NSArray *)<code>adaptorOperations</code> <p>
Returns the EOAdaptorOperation objects that need to be performed to carry out the operation represented by the receiver.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#257">- <code>addAdaptorOperation:</code></a>, <a href="EODatabaseOperation.html#223">- <code>removeAdaptorOperation:</code></a>
<p><a name="257">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">addAdaptorOperation:</a></h3>
</a>- (void)<code>addAdaptorOperation:</code>(EOAdaptorOperation *)<em>adaptorOperation</em> <p>
Adds <em>adaptorOperation</em> to the receiver's list of adaptor operations. Raises an exception if <em>adaptorOperation</em> is <code>nil</code>.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2354">- <code>adaptorOperations</code></a>, <a href="EODatabaseOperation.html#223">- <code>removeAdaptorOperation:</code></a>
<p><a name="261">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/databaseOperator">databaseOperator</a></h3>
</a>- (EODatabaseOperator)<code>databaseOperator</code> <p>
Returns the receiver's database operator.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#306"><code>setDatabaseOperator:</code></a>
<p><a name="265">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">dbSnapshot</a></h3>
</a>- (NSDictionary *)<code>dbSnapshot</code> <p>
Returns the database snapshot for the receiver's enterprise object. The snapshot contains the last known database values for the enterprise<code> </code>object. The dictionary returned from this method will be empty if the receiver's object has just been inserted into an EOEditingContext and has not yet been saved in persistent storage. For more information on EOEditingContexts, see the EOEditingContext class specification in the EOControl framework.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2681">- <code>setDBSnapshot:</code></a>, <a href="EODatabaseOperation.html#306">- <code>setDatabaseOperator:</code></a>
<p><a name="269">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/entity">entity</a></h3>
</a>- (EOEntity *)<code>entity</code> <p>
Returns the entity that corresponds to the receiver's enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#6753">- <code>initWithGlobalID:object:entity:</code></a>
<p><a name="273">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/globalID">globalID</a></h3>
</a>- (EOGlobalID *)<code>globalID</code> <p>
Returns the EOGlobalID object that corresponds to the receiver's enterprise object.<p>
<a name="6753">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">initWithGlobalID:object:entity:</a></h3>
</a>- <code>initWithGlobalID:</code>(EOGlobalID *)<em>globalID </em><code>object:</code>(id)<em>object </em><code>entity:</code>(EOEntity *)<em>entity</em> <p>
The designated initializer, this method initializes a new EODatabaseOperation instance. Sets the enterprise object to which the operation will be applied, the object's global ID, and the object's entity. Returns <code>self</code>.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#286">- <code>object</code></a>, <a href="EODatabaseOperation.html#269">- <code>entity</code></a>
<p><a name="281">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/newRow">newRow</a></h3>
</a>- (NSMutableDictionary *)<code>newRow</code> <p>
Returns a dictionary representation of the receiver's enterprise object. In addition to all the properties of the enterprise object that are stored in the database, the dictionary contains values for the non-derived attribute's of the enterprise object's entity that aren't visible in the enterprise object. For example, primary and foreign keys aren't ordinarily properties of an enterprise object but are attributes of the object's entity.<p>
The <code>newRow</code> dictionary is initialized with the values in the receiver's snapshot. New or updated values are added to the <code>newRow</code> dictionary (replacing out-of-date values) as the Framework maps changes in the object to an operation.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#310">- <code>setNewRow:</code></a>
<p><a name="286">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/object">object</a></h3>
</a>- (id)<code>object</code> <p>
Returns the receiver's enterprise object.<p>
<a name="2103">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/primaryKeyDiffs">primaryKeyDiffs</a></h3>
</a>- (NSDictionary *)<code>primaryKeyDiffs</code><p>
<B>See also: </B>  
Returns a dictionary that contains any primary key values in <a href="EODatabaseOperation.html#281"><code>newRow</code></a> that are different from 
those in the <a href="EODatabaseOperation.html#265"><code>dbSnapshot</code></a>. Returns <code>nil</code> if the receiver doesn't have EODatabaseUpdateOperator 
set as its database operator.<a href="EODatabaseOperation.html#306">- <code>setDatabaseOperator:</code></a>, <a href="EODatabaseOperation.html#281">- <code>newRow</code></a>
<p><a name="6885">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/recordToManySnapshot:relationshipName:">recordToManySnapshot:relationshipName:</a></h3>
</a>- (void)<code>recordToManySnapshot:</code>(NSArray *)<em>globalIDs</em> <code>relationshipName:</code>(NSString *)<em>name</em><p>
Records the objects in <em>globalIDs</em>. <em>globalIDs</em> is an array of the globalIDs that identify the objects at the destination of the to-many relationship named <em>name</em>; <em>name</em> is a property of the receiver's enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#7030">- <code>toManySnapshots</code></a>
<p><a name="223">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:">removeAdaptorOperation:</a></h3>
</a>- (void)<code>removeAdaptorOperation:</code>(EOAdaptorOperation *)<em>adaptorOperation</em> <p>
Removes <em>adaptorOperation</em> from the receiver's list of adaptor operations.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2354">- <code>adaptorOperations</code></a>, <a href="EODatabaseOperation.html#257">- <code>addAdaptorOperation:</code></a>
<p><a name="294">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/rowDiffs">rowDiffs</a></h3>
</a>- (NSDictionary *)<code>rowDiffs</code> <p>
Returns values in the receiver's <a href="EODatabaseOperation.html#281"><code>newRow</code></a> dictionary that are different than the corresponding values in its <a href="EODatabaseOperation.html#265"><code>dbSnapshot</code></a>. The dictionary returned from this method contains the new values from the enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#2103">- <code>primaryKeyDiffs</code></a>
<p><a name="298">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/rowDiffsForAttributes:">rowDiffsForAttributes:</a></h3>
</a>- (NSDictionary *)<code>rowDiffsForAttributes:</code>(NSArray *)<em>attributes</em> <p>
For the EOAttribute objects in <em>attributes</em>, this method returns values in the receiver's <a href="EODatabaseOperation.html#281"><code>newRow</code></a> dictionary that are different than the corresponding values in its <a href="EODatabaseOperation.html#265"><code>dbSnapshot</code></a>. The dictionary returned contains the new values from the enterprise object.<p>
<a name="306">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">setDatabaseOperator:</a></h3>
</a>- (void)<code>setDatabaseOperator:</code>(EODatabaseOperator)<em>databaseOperator</em> <p>
Sets the receiver's database operator. <em>databaseOperator</em> can be one of the following:<p>
<ul><li>EODatabaseNothingOperator
<li>EODatabaseInsertOperator
<li>EODatabaseUpdateOperator
<li>EODatabaseDeleteOperator
</ul><B>See also: </B>  
<a href="EODatabaseOperation.html#261">- <code>databaseOperator</code></a>
<p><a name="2681">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/setDBSnapshot:">setDBSnapshot:</a></h3>
</a>- (void)<code>setDBSnapshot:</code>(NSDictionary *)<em>dbSnapshot</em> <p>
Sets the snapshot for the receiver's enterprise object. If the object has just been inserted into an an EOEditingContext, it won't have a snapshot. In this case, <em>dbSnapshot</em> should be an empty dictionary.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#265">- <code>dbSnapshot</code></a>
<p><a name="310">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/setNewRow:">setNewRow:</a></h3>
</a>- (void)<code>setNewRow:</code>(NSMutableDictionary *)<em>newRow</em> <p>
Sets the dictionary representation of the receiver's enterprise object. <em>newRow</em> should contain values for all the properties of the enterprise object that are stored in the database and for the non-derived attribute's of the enterprise object's entity that aren't visible in the enterprise object. <p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#281">- <code>newRow</code></a>, <a href="EODatabaseOperation.html#261">- <code>databaseOperator</code></a>
<p><a name="7030">
<hr width=25% align=left>
<h3> <a name="//apple_ref/occ/instm/EODatabaseOperation/toManySnapshots">toManySnapshots</a></h3>
</a>- (NSDictionary *)<code>toManySnapshots</code><p>
Returns the NSDictionary containing the snapshots for the to-many relationships of the receiver's enterprise object.<p>
<B>See also: </B>  
<a href="EODatabaseOperation.html#6885">- <code>recordToManySnapshot:relationshipName:</code></a>
<p><p>

<hr><br>
<a href="EODatabaseDataSource.html"><img src="../../../../../../../../../../images/previous.gif" border="0"></a> 
<a href="EOEntity.html"><img src="../../../../../../../../../../images/next.gif" border="0"></a> 

<!-- insert Show/Hide frames -->
<a href="javascript:testFrame()">
<script>
<!--
 document.write(frameLink);
//-->
</script><!-- end Show/Hide frames --></a>
<hr><br>
 


<i>Copyright &#169; 1998, Apple Computer, Inc.   All rights
reserved.</i>

<!-- Last updated: 09/17/98 17:44:17 -->

</body>
</html>

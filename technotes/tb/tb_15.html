<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TB15: &quot;New&quot; cdev Messages</title>                                       <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Sep 26, 1988 - Oct 7, 1988"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002766" title=""New" cdev Messages"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxUserExperience-date.html">User Experience</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/UserExperience/index.html" target="_blank">Reference Library > User Experience</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB15</div>
<div id="pageheadsub">&quot;New&quot; cdev Messages</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note describes some previously undocumented messages that theControl Panel can send to a Control Panel device (cdev).</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1988]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><p>The Control Panel will send messages to a Control Panel device (cdev) inresponse to the user selecting the Undo, Cut, Copy, Paste, and Clear items ofthe Edit menu.  It will also send a message if the cdev contains a <code>'CURS' =-4064</code> resource.  The following is a list of the previously undocumentedmessages, descriptions, and values:</p><P align=center><img src="images/tb_15_001.gif" alt="Control Panel device (cdev) messages" width=280 height=100></p><p>The Control panel only sends the <code>undoDev</code>, <code>cutDev</code>,<code>copyDev</code>, <code>pasteDev</code>, and <code>clearDev</code> messages to a cdevas a result of the Desk Manager sending an edit message to it when anapplication calls <code>SystemEdit</code> (<code>_SysEdit</code>).  Since the call to<code>SystemEdit</code> (<code>_SysEdit</code>) is triggered by a mouse-down event inthe menu bar, the messages to the cdev will be sent only as a result of theuser selecting the Edit menu item with the mouse and not by pressing theCommand-key equivalent.</p><p>Typically, you will call <code>_DlgCut</code>, <code>_DlgCopy</code>,<code>_DlgPaste</code> or <code>_DlgDelete</code> upon receipt of the <code>cutDev</code>,<code>copyDev</code>, <code>pasteDev</code>, or <code>clearDev</code> message, passing the<code>DialogPtr</code> that has been passed to the cdev to the call.</p><p>To respond to Command-key equivalents of the Edit menu commands, you must checkfor the specific characters and modifier keys themselves, even though this isnever localized.  Once you determine the character to be a Command-keyequivalent, you must alter the <code>what</code> field of the event record that hasbeen passed to the cdev to be a <code>nullEvent</code> to prevent the DialogManager from inserting the character into the <code>editText</code> item of thecdev.  To alter the event record, you should treat the event record parameterwhich is passed to the cdev as a reference.  In Pascal, this means declaringthe interface to the cdev as follows:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    FUNCTION MyCdev(message, item, numItems, CPanelID: INTEGER        VAR theEvent: EventRecord; (* the 'NEW' way *)        cdevStorage: Handle;</pre>	</TD></TR></TABLE></CENTER><p>In C, you would do the following:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>    Handle MyCdev(message, item, numItems, CPanelID        theEvent, cdevStorage, CPDialog)    short message, item, numItems, CPanelID;    EventRecord *theEvent;    /* the 'NEW' way */    Handle cdevStorage;</pre>	</TD></TR></TABLE></CENTER><p>In assembly language, it means you do not make your own copy of the eventrecord, so you are probably already set up to change the value of the<code>what</code> field of the event record.</p><p>If the cdev contains a <code>'CURS' = -4064</code> resource, the Control Panel willsend it a <code>cursorDev</code> message whenever the cursor is over the cdev partof the Control Panel's window instead of setting the cursor to the light cross.The cdev can then set and use its own cursor.  The Control Panel will handlethe cursor elsewhere on the screen.  The Control Panel does not examine thecontents of the <code>'CURS' = -4064</code> resource.</p><P><A HREF="#top">Back to top</A></p><a name = "References"></a><h2>References</h2><P>Inside Macintosh, Volume V, The Control Panel</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (68K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_15.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_15.html%3Fid%3DDTS10002766-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_15.html%3Fid%3DDTS10002766-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_15.html%3Fid%3DDTS10002766-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
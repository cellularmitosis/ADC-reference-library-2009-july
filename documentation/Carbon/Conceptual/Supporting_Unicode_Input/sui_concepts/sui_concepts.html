<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Supporting Unicode Input: International Text in Mac OS X</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="International Text in Mac OS X"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000193" title="International Text in Mac OS X"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../TextFonts-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000461" target="_top">Text &amp; Fonts</a> &gt; <a href="../sui_intro/sui_intro.html#//apple_ref/doc/uid/TP30000192-DontLinkElementID_6">Supporting Unicode Input</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../sui_intro/sui_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../sui_tasks/sui_tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000193-DontLinkElementID_2" title="International Text in Mac OS X"></a><h1><a name="//apple_ref/doc/uid/TP30000193-TPXREF101" title="International Text in Mac OS X"></a>International Text in Mac OS X</h1><p>This section contains an overview of international
text handling on the Mac OS and a more specific introduction to
some of the Unicode facilities available with Mac OS X. If you would
like more information on converting between text encodings, see <em><a href="../../ProgWithTECM/index.html#//apple_ref/doc/uid/TP40000932" target="_top">Programming With the Text Encoding Conversion Manager</a></em>.</p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-BAJIHEJB">Languages, Writing Systems, Scripts, and Orthographies</a>
				
			<br/>
			
        
			
			
				<a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-TPXREF122">Script Systems and Script Codes</a>
				
			<br/>
			
        
			
			
				<a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-TPXREF123">Characters, Character Encodings, and Unicode</a>
				
			<br/>
			
        
			
			
				<a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-TPXREF124">Keyboards and Input Methods</a>
				
			<br/>
			
        
			
			
				<a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-TPXREF125">Unicode Script Codes</a>
				
			<br/>
			
        
			
			
				<a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-TPXREF126">Unicode Keyboard-Layout Resource and the UCKeyTranslate Function</a>
				
			<br/>
			
        
			
			
				<a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-TPXREF127">Unicode in the Keyboard Menu</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000193-BAJIHEJB" title="Languages, Writing Systems, Scripts, and Orthographies"></a><h2>Languages, Writing Systems,
Scripts, and Orthographies</h2>
<p>Written representation of a spoken language relies on a writing
system. A <strong>writing system</strong> is an artificial construct
used to record language in written form. It can be viewed as having
three main components&#8212;language, scripts, and orthography&#8212;with well-defined
relations to one another.</p>
<p>A <strong>script</strong> comprises a set of symbols that
represent the components of a language. A writing system uses one
or more scripts for the symbols required to represent linguistic elements,
which include sound, meaning, syntax and so forth. A script can
be coupled with one language, or it can represent and be used by
many languages. Moreover, a language can have more than one script
associated with it. For example, the Japanese language uses the
Japanese script, while the French, Italian, and Spanish languages
all use parts of the Latin script.</p>
<p>A script exists apart from both the languages it represents
and the writing systems for which it is used. (A small number of
scripts, less than 100, are used by writing systems despite the
large number of existing modern and archaic languages.) A special
category of scripts, called pseudoscripts, exists for use with other
scripts. These pseudoscripts include symbols, numbers, and punctuation.</p>
<p>Writing systems can use different scripts at the same time.
A writing system uses at least one script and typically one or more
pseudoscripts. In this sense, it is best to refer to the characters
a writing system includes as a repertoire of characters, rather
than a character set, because these characters can belong to different
scripts. </p>
<p>The writing system for a language entails an <strong>orthography</strong> which
defines the relationship between the written language and one or
more scripts. Among the rules an orthography specifies are rules
of directionality, level of discreteness, and units of representation.
For example, for mixed-directional text, the direction of a paragraph
is important. For writing systems based in European languages, a
paragraph is considered a unit of representation, as is a word.
Word division and paragraph identification are easily determined
for these languages, but this is not necessarily the case for other
writing systems, such as those based in Japanese or Indic languages.</p>
<a name="//apple_ref/doc/uid/TP30000193-TPXREF122" title="Script Systems and Script Codes"></a><h2>Script Systems and Script Codes</h2>
<p>Traditionally, in the Mac OS, a <strong>script system</strong> has
been understood to be a collection of software facilities that provides
for the representation of a specific writing system. This usage
of the term &#8220;script&#8221; in the phrase &#8220;script system&#8221; should
not be confused with the more current, linguistics-derived notion
of scripts that is used in the Mac OS and described in <span class="content_text"><a href="sui_concepts.html#//apple_ref/doc/uid/TP30000193-BAJIHEJB">“Languages, Writing Systems, Scripts, and Orthographies.”</a></span></p>
<p>Types of Mac OS script systems include the following:</p>
<ul class="ul"><li class="li"><p>single-byte
simple: small character set, non-contextual, not bidirectional (example: English)</p></li>
<li class="li"><p>single-byte complex: small character set, but with contextual
or bidirectional text (example: Devanagari)</p></li>
<li class="li"><p>double-byte: large character set (examples: Japanese, Korean,
Chinese, and Simplified Chinese)</p></li></ul>
<p>At minimum, a script system consists of the following items:</p>
<ul class="ul"><li class="li"><p>keyboard
resources, which provide for text input in any language from any
keyboard; these allow for convenient switching from one input language
to another on a single keyboard</p></li>
<li class="li"><p>international resources, which contain information specific
to a particular language, such as its date and time formats, sorting
order, and word-break rules</p></li>
<li class="li"><p>fonts, that is, sets of glyphs that are associated with specified
characters</p></li></ul>
<p>A <strong>script code</strong> is a numeric value indicating
a particular Mac OS script system. Constants are defined for each
of the script codes recognized by the Mac OS.</p>
<a name="//apple_ref/doc/uid/TP30000193-TPXREF123" title="Characters, Character Encodings, and Unicode"></a><h2>Characters, Character Encodings,
and Unicode</h2>
<p>A writing system&#8217;s alphabet, numbers, punctuation, and other
writing marks consist of characters. A <strong>character</strong> is
a symbolic representation of an element of a writing system; it is
the concept of, for example, &#8220;lowercase a&#8221; or &#8220;number 3&#8221;.</p>
<p>In memory, text is stored as character codes, where each code
is a numeric value that defines a particular character. A <strong>character
encoding</strong> is the organization of the set of numeric codes
that represent all the meaningful characters of a script system
in memory. There are two fundamental classes of Mac OS character
encodings: single-byte and double-byte.</p>
<p><strong>Unicode</strong> is an international standard that
combines the characters for all commonly used writing systems into
a single, coded character set, based upon a 16-bit character encoding
standard. With a universal character encoding such as Unicode, the
character sets of separate writing systems do not overlap. Furthermore,
Unicode resolves the issue of conflicting character encodings within
a single writing system; for example, in Unicode, there is no overlap
between Roman character codes and the Symbol font&#8217;s character codes.</p>
<a name="//apple_ref/doc/uid/TP30000193-TPXREF124" title="Keyboards and Input Methods"></a><h2>Keyboards and Input Methods</h2>
<p>By means of keyboard input, the user can create text that
your application stores as character codes. The system reports the
user&#8217;s key-down, key-up, and auto-key events to your application
through events. Key-down and key-up events report that the user pressed
or released a key, respectively. Auto-key events report that the
user has held a key down for a certain amount of time. For keyboard-related
events, the application receives both the virtual key code and the
character code for the key that is pressed, as well as the state
of any modifier keys (Shift, Caps Lock, Command, Option, and Control)
at the time of the event.</p>
<p>To obtain this information for your application, the Mac OS
uses keyboard resources to convert key presses into the correct
character codes for the current writing system, taking into account
the type of keyboard being used.</p>
<p><strong>Key translation</strong> is the process by which
character codes are generated. Each keyboard has a particular physical
arrangement of keys, and each keypress generates a value called a
raw key code, which indicates which key was pressed. The keyboard
driver that handles the keypress maps these raw key codes to keyboard-independent
virtual key codes.</p>
<p>Any given script system has one or more keyboard-layout resources.
The keyboard-layout resources provide script-specific maps for converting
a virtual key code into the character code that is passed to your
application. As part of the key-translation process, the keyboard-layout
resources must take into account the current dead-key state. A <strong>dead
key</strong> is a keypress or modifier-plus-keypress combination
that produces no immediate character output, but instead affects
the character(s) that are ultimately produced by the following key
press(es).</p>
<p>A keyboard layout is what the Key Caps application shows.
For the purposes of this document, a keyboard-layout resource is
the critical item in determining keyboard layout; changing the keyboard
layout means changing the keyboard-layout resource. Because keyboard
layouts are independent of the physical keyboard attached to the
computer, your application has the flexibility of changing text
input from one writing system to another by simply using a different
keyboard-layout resource.</p>
<p>For languages with large character sets, it is impractical
to manufacture keyboards with keys for every possible character.
In such a case, it is usually the job of an input method, working
in conjunction with a keyboard, to handle text input. An <strong>input
method</strong> is a software module, often independent of the
application it serves, that performs complex processing of text
input, prior to the application&#8217;s processing of the text. A typical
example of an input method is a translation service that converts
character codes that can be entered from the keyboard into character
codes that cannot; text input in Japanese, Chinese, and Korean usually
requires an input method.</p>
<a name="//apple_ref/doc/uid/TP30000193-TPXREF125" title="Unicode Script Codes"></a><h2>Unicode Script Codes</h2>
<p>The set of Mac OS script codes that identify particular script
systems includes Unicode, which is handled as a special Mac OS script
code. The Text Encoding Converter and other Mac OS facilities use
the constant <code>kTextEncodingUnicodeDefault</code> (0x0100)
to designate Unicode. However, because some components have only
7 bits available for a script code, rather than the typical 16 bits,
the value <code>smUnicodeScript</code> (0x7E)
can also be used to indicate Unicode. For example, the Text Encoding
Converter handles the <code>smUnicodeScript</code> value
similar to <code>kTextEncodingUnicodeDefault</code>.</p>
<a name="//apple_ref/doc/uid/TP30000193-TPXREF126" title="Unicode Keyboard-Layout Resource and the UCKeyTranslate Function"></a><h2>Unicode Keyboard-Layout Resource
and the UCKeyTranslate Function</h2>
<p>Similar to the (pre-Unicode) keyboard-layout resource (<code>'KCHR'</code>),
the Unicode keyboard-layout resource (<code>'uchr'</code>)
contains the data necessary to map virtual key codes to character
codes for various keyboard layouts. However, the <code>'uchr'</code> resource
specifies Unicode keyboard layouts&#8212;that is, keyboard layouts which
produce Unicode character codes, rather than characters in a Mac
OS encoding.</p>
<p>Because some Unicode character codes can be mapped to Mac
OS encoded character codes (while some cannot), for the purposes
of key translation there are considered to be two categories of
Unicode keyboard-layout resources. The first category of <code>'uchr'</code> resources
is one that produces Unicode character codes that are all within
the range of a single Mac OS encoding. That is, these partial Unicode <code>'uchr'</code> resources
contain only Unicode characters that can be mapped to characters
belonging to the Mac OS encoding associated with its ID range.</p>
<p>The second category of <code>'uchr'</code> resources
may produce any Unicode characters. That is, these full Unicode <code>'uchr'</code> resources
contain Unicode characters that are either not all within the range
of a single Mac OS encoding or are not within the range of any Mac
OS encoding. <span class="content_text">Table
2-1</span> shows the relationships of keyboard-layout
resources to differing types of text input.</p><a name="//apple_ref/doc/uid/TP30000193-DontLinkElementID_3" title="Table 1-1Text input types and keyboard layouts"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><a name="//apple_ref/doc/uid/TP30000193-BAJHDHHC" title="Table 1-1Text input types and keyboard layouts"></a><strong>Table 1-1&nbsp;&nbsp;</strong>Text input types and keyboard layouts</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Input Type</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Keyboard Layout (resource type, ID)</p></th>
</tr>


<tr>
<td  scope="row"><p>Produces Mac OS encoded characters</p></td>
<td ><p>KCHR, &gt;= 0</p></td>
</tr>
<tr>
<td  scope="row"><p>Produces partial Unicode characters</p></td>
<td ><p>uchr, &gt;= 0</p></td>
</tr>
<tr>
<td  scope="row"><p>Produces full Unicode characters</p></td>
<td ><p>uchr &lt; 0</p></td>
</tr>

</table></div>
<p>The function <code><a href="../../../Reference/Unicode_Utilities_Ref/Reference/reference.html#//apple_ref/doc/c_ref/UCKeyTranslate" target="_top">UCKeyTranslate</a></code> uses
the <code>'uchr'</code> resource to
produce Unicode character codes. However, unlike its non-Unicode
counterpart (the <code><a href="../../../Reference/Event_Manager/Reference/reference.html#//apple_ref/doc/c_ref/KeyTranslate" target="_top">KeyTranslate</a></code> function), <code><a href="../../../Reference/Unicode_Utilities_Ref/Reference/reference.html#//apple_ref/doc/c_ref/UCKeyTranslate" target="_top">UCKeyTranslate</a></code> also
does the following:</p>
<ol class="ol"><li class="li"><p>Outputs multiple
character codes. A single keycode (or a dead-key sequence) can produce
a string of up to 255 Unicode characters. This facility is useful
both for some international script systems and for the production
of macros. As an example of the former, the Devanagari keyboard
in the Indian Language Kit must be able to produce up to three characters
from a single keypress to support the keyboard standards of India.</p></li>
<li class="li"><p>Allows multiple dead keys. The keyboard standards for some
countries require double dead keys. For example, Greek keyboards
use two dead keys for adding diacritical marks.</p></li>
<li class="li"><p>Handles virtual key codes with a range greater than 0-127.
While this requirement is currently uncommon in the Mac OS, some
types of keyboards&#8212;for example, older Kanji keyboards and keyboards
for some other operating systems&#8212;may use a larger key code range.</p></li>
<li class="li"><p>Allows virtual key code mapping to depend on keyboard type.
While the use of virtual key codes should theoretically remove all
dependencies on particular physical keyboards, in some cases key
translation does depend on the keyboard type (due to certain scripts,
languages, and regions needing subtle differences in layout for
specific keyboards). The <code><a href="../../../Reference/Unicode_Utilities_Ref/Reference/reference.html#//apple_ref/doc/c_ref/UCKeyTranslate" target="_top">UCKeyTranslate</a></code> function
accommodates this need by requesting keyboard type information and
using the <code>'uchr'</code> resource
to access the proper keyboard&#8217;s mapping tables in cases where
there is a keyboard-specific dependency, thus eliminating the need
to use the <code>'itlk'</code> resource.</p></li></ol>
<a name="//apple_ref/doc/uid/TP30000193-TPXREF127" title="Unicode in the Keyboard Menu"></a><h2>Unicode in the Keyboard Menu</h2>
<p>The Keyboard menu in Mac OS X appears on the menu bar when
more than one script system is enabled. It permits the user to choose
among keyboard layouts, input methods, and script systems, for text
input.</p>
<p>If there are input methods for any of the Mac OS double-byte
script systems that are enabled, the Keyboard menu shows only the
input methods; otherwise, in the absence of input methods, it shows
the keyboard layouts. For all other enabled script systems, including
Unicode, the keyboard menu shows keyboard layouts and input methods.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP30000193-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;The
Keyboard menu shows each keyboard layout as a single entry, regardless
of whether it is specified by a <code>'KCHR'</code>,
a <code>'uchr'</code>, or both.</p></div>
<p>To display a full Unicode script system in the Keyboard menu,
the System must include an international bundle resource (<code>'itlb'</code>)
with a resource ID of <code>smUnicodeScript</code> (0x7E) and
one or more full Unicode keyboard layouts or input methods.</p>
<p>Full Unicode keyboard layouts and input methods (that is,
for input sources that produce Unicode characters that are not within
the range of a single Mac encoding), if enabled, are shown in their
own section of the menu, after all of those for Mac OS script systems.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../sui_intro/sui_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../sui_tasks/sui_tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 1998, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-07-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/Supporting_Unicode_Input/sui_concepts/sui_concepts.html%3Fid%3DTP40000951-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/Supporting_Unicode_Input/sui_concepts/sui_concepts.html%3Fid%3DTP40000951-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/Supporting_Unicode_Input/sui_concepts/sui_concepts.html%3Fid%3DTP40000951-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
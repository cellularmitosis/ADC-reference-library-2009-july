<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE>Playing Sound Resources (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.51.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.51.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.53.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=3176"> </A>Playing Sound Resources</H1><P CLASS="T0.Text0"><A NAME="pgfId=2526"> </A>You can use the <TT CLASS="cv">SysBeep</TT> procedure to play the system alert sound. Alert sounds are stored in the System file as format 1 <TT CLASS="cv">'snd&nbsp;'</TT> resources. You can use the <TT CLASS="cv">SndPlay</TT> function to play the sounds that are stored in any <TT CLASS="cv">'snd&nbsp;'</TT> resource, either format 1 or format 2.</P><P CLASS="T1.Text1"><A NAME="pgfId=2527"> </A>The <TT CLASS="cv">SysBeep</TT> and <TT CLASS="cv">SndPlay</TT> routines are the highest-level sound routines that the Sound&nbsp;Manager provides. Depending on the needs of your application, you might be able to accomplish all desired sound-related activity simply by using <TT CLASS="cv">SysBeep</TT> to produce the system alert sound or by using <TT CLASS="cv">SndPlay</TT> to play other sounds that are stored as <TT CLASS="cv">'snd&nbsp;'</TT> resources.</P><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=2210"> </A>SysBeep<A NAME="marker=176"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=2258"> </A><A NAME="marker=625"> </A>You can use the <TT CLASS="cv">SysBeep</TT> procedure to play the system alert sound.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12291"> </A>PROCEDURE SysBeep (duration: Integer);<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12293"> </A><TT CLASS="cv">duration</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2374"> </A>The duration (in ticks) of the resulting sound. This parameter is ignored except on a Macintosh Plus, Macintosh SE, or Macintosh Classic when the system alert sound is the Simple Beep. The recommended duration is 30 ticks, which equals one-half second.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3249"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=3252"> </A>The <TT CLASS="cv">SysBeep</TT> procedure causes the Sound Manager to play the system alert sound at its current volume. If necessary, the Sound Manager loads into memory the sound resource containing the system alert sound and links it to a sound channel. The user selects a system alert sound in the Alert Sounds subpanel of the Sound control panel.</P><P CLASS="T1.Text1"><A NAME="pgfId=3258"> </A>The volume of the sound produced depends on the current setting of the system alert sound volume, which the user can adjust in the Alert Sounds subpanel of the Sound control panel. The system alert sound volume can also be read and set by calling the <TT CLASS="cv">GetSysBeepVolume</TT> and <TT CLASS="cv">SetSysBeepVolume</TT> routines. If the volume is set to 0 (silent) and the system alert sound is enabled, calling <TT CLASS="cv">SysBeep</TT> causes the menu bar to blink once.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3582"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=3583"> </A>Because the <TT CLASS="cv">SysBeep</TT> procedure moves memory, you should not call it at interrupt time.<A NAME="marker=817"> </A><A NAME="marker=1551"> </A></P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=4604"> </A>SEE ALSO</H3><P CLASS="T1.Text1"><A NAME="pgfId=4605"> </A>For information on enabling and disabling the system alert sound, see the description of <TT CLASS="cv">SndGetSysBeepState</TT> and <TT CLASS="cv">SndGetSysBeepState</TT> on <A target="doc" HREF="imsoundmgr.56.htm#29666" CLASS="XRef">[link]</A>. For information on reading or adjusting the system alert sound volume, see <A target="doc" HREF="imsoundmgr.57.htm#27966" CLASS="XRef">&quot;Controlling Volume Levels&quot;</A>.<A NAME="marker=701"> </A></P></DIV></DIV><DIV><H2 CLASS="RoH.RoutineHeading"><A NAME="pgfId=2209"> </A>SndPlay<A NAME="marker=153"> </A></H2><P CLASS="T0.Text0"><A NAME="pgfId=3234"> </A><A NAME="marker=794"> </A>You can use the <TT CLASS="cv">SndPlay</TT> function to play a sound resource that your application has loaded into memory.</P><CODE CLASS="RD.RoutineDeclare"><A NAME="pgfId=12304"> </A>FUNCTION SndPlay (chan: SndChannelPtr; sndHdl: Handle; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;async: Boolean): OSErr;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12306"> </A><TT CLASS="cv">chan</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2255"> </A>A pointer to a valid sound channel. You can pass <TT CLASS="cv">NIL</TT> instead of a pointer to a sound channel if you want the Sound Manager to internally allocate a sound channel in your application's heap zone.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12315"> </A><TT CLASS="cv">sndHdl</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2256"> </A>A handle to the sound resource to play.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=12324"> </A><TT CLASS="cv">async</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=2257"> </A>A Boolean value that indicates whether the sound should be played asynchronously (<TT CLASS="cv">TRUE</TT>) or synchronously (<TT CLASS="cv">FALSE</TT>). This parameter is ignored (and the sound plays synchronously) if <TT CLASS="cv">NIL</TT> is passed in the first parameter.</BLOCKQUOTE><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3757"> </A>DESCRIPTION</H3><P CLASS="T0.Text0"><A NAME="pgfId=2371"> </A>The <TT CLASS="cv">SndPlay</TT> function attempts to play the sound located at <TT CLASS="cv">sndHdl</TT>, which is expected to have the structure of a format 1 or format 2 <TT CLASS="cv">'snd&nbsp;'</TT> resource. If the resource has not yet been loaded, the <TT CLASS="cv">SndPlay</TT> function fails and returns the <TT CLASS="cv">resProblem</TT> result code. </P><P CLASS="T1.Text1"><A NAME="pgfId=3236"> </A>All commands and data contained in the sound handle are then sent to the channel. Note that you can pass <TT CLASS="cv">SndPlay</TT> a handle to some data created by calling the Sound Input Manager's <TT CLASS="cv">SndRecord</TT> function as well as a handle to an actual <TT CLASS="cv">'snd&nbsp;'</TT> resource that you have loaded into memory.</P><P CLASS="W.Warning"><A NAME="pgfId=3242"> </A>In some versions of system software prior to system software version 7.0, the <TT CLASS="cv">SndPlay</TT> function will not work properly with sound resources that specify the sound data type twice. This might happen if a resource specifies that a sound consists of sampled-sound data and an application does the same when creating a sound channel. For more information on this problem, see <A target="doc" HREF="imsoundmgr.c.htm#36745" CLASS="XRef">&quot;Allocating Sound Channels&quot;</A>. </P><P CLASS="T1.Text1"><A NAME="pgfId=3759"> </A>The <TT CLASS="cv">chan</TT> parameter is a pointer to a sound channel. If <TT CLASS="cv">chan</TT> is not <TT CLASS="cv">NIL</TT>, it is used as a&nbsp;valid channel. If <TT CLASS="cv">chan</TT> is <TT CLASS="cv">NIL</TT>, an internally allocated sound channel is used. If you do&nbsp;supply a sound channel pointer in the <TT CLASS="cv">chan</TT> parameter, you can play the sound asynchronously. When a sound is played asynchronously, a callback procedure can be called when a <TT CLASS="cv">callBackCmd</TT> command is processed by the channel. (This procedure is&nbsp;the callback procedure supplied to <TT CLASS="cv">SndNewChannel</TT>.) See <A target="doc" HREF="imsoundmgr.1e.htm#28093" CLASS="XRef">&quot;Playing Sounds Asynchronously&quot;</A> for more information on playing sounds asynchronously. The handle you pass in the <TT CLASS="cv">sndHdl</TT> parameter must be locked for as long as the sound is playing asynchronously.</P><P CLASS="T1.Text1"><A NAME="pgfId=3760"> </A>If a format 1 <TT CLASS="cv">'snd&nbsp;'</TT> resource does not specify which type of sound data is to be played, <TT CLASS="cv">SndPlay</TT> defaults to square-wave data. <TT CLASS="cv">SndPlay</TT> also supports format 2 <TT CLASS="cv">'snd&nbsp;'</TT> resources using sampled-sound data and a <TT CLASS="cv">bufferCmd</TT> command. Note that to use <TT CLASS="cv">SndPlay</TT> and sampled-sound data with a format 1 <TT CLASS="cv">'snd&nbsp;'</TT> resource, the resource must include a <TT CLASS="cv">bufferCmd</TT> command.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=2372"> </A>SPECIAL CONSIDERATIONS</H3><P CLASS="T0.Text0"><A NAME="pgfId=3235"> </A>Because the <TT CLASS="cv">SndPlay</TT> function moves memory, you should not call it at interrupt time.</P></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=3290"> </A>RESULT CODES</H3><TABLE><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2618"> </A>noErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=2619"> </A>0</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=2642"> </A>No error</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=2643"> </A>notEnoughHardwareErr</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=2648"> </A>-201</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=2649"> </A>Insufficient hardware available</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4128"> </A>resProblem</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4129"> </A>-204</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4130"> </A>Problem loading the resource</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4131"> </A>badChannel</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4132"> </A>-205</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4133"> </A>Channel is corrupt or unusable</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLCv.MLCode"><A NAME="pgfId=4134"> </A>badFormat</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="MLR.RtAlign"><A NAME="pgfId=4135"> </A>-206</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="ML.ColsList"><A NAME="pgfId=4136"> </A>Resource is corrupt or unusable<A NAME="marker=1273"> </A></P></TD></TR></TABLE></DIV><DIV><H3 CLASS="RSb.RoutineSbhd"><A NAME="pgfId=2102"> </A>SEE ALSO</H3><P CLASS="T0.Text0"><A NAME="pgfId=3125"> </A>For an example of how to play a sound resource using the <TT CLASS="cv">SndPlay</TT> function, see the chapter <A target="doc" HREF="imintrosound.htm" CLASS="XRef">&quot;Introduction to Sound on the Macintosh&quot;</A> in this book.</P><P CLASS="T1.Text1"><A NAME="pgfId=3248"> </A>For information on playing a sound resource without using the <TT CLASS="cv">SndPlay</TT> function, see <A target="doc" HREF="imsoundmgr.26.htm#40709" CLASS="XRef">&quot;Playing Sounds Using Low-Level Routines&quot;</A>.<A NAME="marker=892"> </A></P></DIV></DIV><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundmgr.51.htm">Previous</A> | <A target="doc" HREF="imsoundmgr.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundmgr.htm">Chapter top</A> | <A target="doc" HREF="imsoundmgr.51.htm">Section top</A> | <A target="doc" HREF="imsoundmgr.53.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
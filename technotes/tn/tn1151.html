<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN1151: Creating NetBoot Server-Friendly Applications</title><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><meta name="keywords" content="have creator list relevant keywords here"><meta name="Description" content="Technical Note TN1151: have creator write a brief descriptionhere."><meta name="categories" content="Mac OS X Server and Networking"><meta name="week-posted" content="Jul 31, 2000 - Aug 4, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002990" title="Creating NetBoot Server-Friendly Applications"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/MacOSXServer/index.html">Mac OS X Server</a> &gt; <a href="../../technicalnotes/MacOSXServer/idxCarbon-date.html">Carbon</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1151</div>
<div id="pageheadsub">Creating NetBoot Server-Friendly Applications</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">   <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">     <tr><td width=300 valign="top" align=left scope="row">    <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>            <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>  </tr>  <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left> <span id="menutitle">CONTENTS   <br>  <br> </span>   </td>  </tr>  <tr bgcolor="#e6e6e6">   <td background="images/tnmenubody.gif" width=300 align=left> <!-- begin_toc --><P id = "menutext"><A HREF="#Introduction">Introduction</A><BR><BR><A HREF="#Discussion">Discussion</A><BR><BR><A HREF="#Summary">Summary</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Changes">Change History</A><BR><BR><A HREF="#Downloads">Downloadables</A></p>                <!-- end_toc --></td>  </tr>  <tr>   <td width=300 align=left scope="row"> <img src="images/tnmenubottom.gif" alt="" width=300 height=16>   </td>  </tr>    </table></td>  <td width=300 valign="top" align=left>            <!-- begin_intro_text --><P id = "introtext">ThisTechnote describes some guidelines that applicationdevelopers should follow to ensure that theirapplications are able to work correctly in aNetBoot environment.</P><P id = "introtext">This Note is directed atall application developers.</p>              <!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Jul 1 2000]</h3><!-- end_date --></TD> </TR>    </TABLE> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR>      <!-- begin_content -->      <P><A NAME="Introduction"></A></P>                  <H2>Introduction</H2>                  <P>In January 1999, Apple introduced Mac OS X Server and its         NetBoot services which enable Power Macintosh and PowerBook         computers to log in and boot directly from a server rather         than a local hard drive. Since all NetBoot computers boot         from a single system, NetBoot computers require no local         configuration. Thus, setting up a network of Mac systems is         fast and simple, and updating the server once automatically         updates all Macs on the network. At the same time, NetBoot         protects the System Folder and applications from corruption         and includes management tools for setting system policies         and controlling user access. NetBoot offers another         important advantage: users can securely access their own         applications, documents, and personal desktop preferences         from any Mac on the network.</P>                  <P>Because all software (including the operating system and         the applications) in a NetBoot environment will reside and         be launched from a server, applications must pay closer         attention to how they launch and work with the System         Folder. Software developers are urged to adapt their         applications as necessary to the following guidelines in         order for applications to run and behave correctly in this         environment.</P>         <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>IMPORTANT:</B><BR>By making your application NetBoot Server-friendly,you also increase the chances of it beingcompatible with Multiple Users on Mac OS 9 andhigher, and vice versa. See Technote 1186<a href="tn1186.html">HowTo Be a Good Multiple Users Citizen</A> for details.</p>               </TD></TR>         </TABLE></CENTER>                  <P><A HREF="#top">Back to top</A></P>                                   <P><A NAME="Discussion"></A></P>                  <H2>Discussion</H2>                  <P>The key to allowing your application to be "NetBoot         Server-friendly" is to keep in mind that NetBoot clients         will share System and Application folders loaded from the         server. If you've written your application to properly use         the Preferences folder and not assume that the application         is launched from a writeable volume, your application will         probably work fine.</P>                  <H3>Allow launching from a locked volume</H3>                  <P>To use disk space effectively, applications may be stored         on a shared locked volume. Your application should be able         to launch and run from a locked volume and store the user's         personal information, such as preferences and data, on a         different volume. At the minimum, check for and deal         gracefully with the situation when the application file is         locked.</P>                  <P>The easiest way to test whether         your application can be run from a locked volume is to copy         your application to a file server (Personal File Sharing is         perfectly adequate for this test), set the permissions of         the application's folder to read-only, and then attempt to         launch the application.</P>                  <H3>Allow multiple users to access the application         simultaneously</H3>                  <P>In order to conserve disk space on the server,         applications may be stored on a common/shared volume on the         server.</P>                  <P>You can check whether your application can be         simultaneously launched by multiple users by installing it         on an standard AppleShare server and launching your         application across the network from two client computers.         </P>                  <P>To allow multiple users to launch         your application simultaneously, you must set the         <CODE>kIsShared</CODE> bit in the <CODE>fdFlags</CODE>         of your application's Finder information (the         <CODE>FInfo</CODE> record returned by <CODE>PBGetCatInfo</CODE>). If you're building with MPW, you can use         the <CODE>SetFile</CODE>         command to set this bit. If you're building with         CodeWarrior, you must set this bit manually (you can do it         with ResEdit) or in some other way that is appropriate for         your build process.</P>                  <H3>Store all application preferences         in the Preferences folder</H3>                  <P>Because a single "station" will be used by different         people, each user's preferences will be retained and         restored when she logs back in, either at the same machine         or at a new one, via the Macintosh Manager software. In         order for your application's user preferences to be         retained, be sure to save them in the Preferences folder,         as returned by <CODE>FindFolder</CODE> in response to the <CODE>kPreferencesFolderType</CODE> selector. Saving preferences here         makes it much easier to administer the server, and allows         the preferences to follow the user regardless of which         Macintosh on the network she uses.</P>                  <P>A good way to test whether your         application handles this correctly is to run it in the         Multiple Users environment supported by Mac OS 9 and above.         If you create a "Limited" user and then log in as that user,         you will find that any attempts to write preferences outside         of the Preferences folder (as returned by <CODE>FindFolder</CODE> when called with the <CODE>kPreferencesFolderType</CODE> selector) will yield an error.</P>                  <H3>Allow users to specify the location of personal data</H3>                  <P>Since multiple users will be using the same application,         it is important for applications allow the user to specify         the location of their personalized documents and databases.         Don't hardcode your application to store the user data in         the same location as the application. This is particularly         important for E-mail applications.</P>                  <P>A good default location for user         data files is the Documents folder, as returned by         <CODE>FindFolder</CODE> in response to the <CODE>kDocumentsFolderType</CODE> selector.</P>                  <H3>Avoid storing the serial number in the application</H3>                  <P>Again, because multiple users may be using the same         application, don't store the serial number in the         application. If serialization of your application is         necessary or desired, store the serial number within the         Preferences folder so that different users can have         "different" serial numbers while still using the same master         application file.</P>                  <H3>Don't assume that FindFolder( kSystemDisk, etc.) will         return -1 for the refNum.</H3>                  <P>Always use both the <CODE>vRefNum</CODE> and         <CODE>dirID</CODE> returned by <CODE>FindFolder</CODE> to         locate important folders.</P>                  <H3>Put application-specific files for the System Folder in         the "Application Support" folder when you can.</H3>                  <P>If your application has files that get stored in the         System Folder, like dictionaries, and they don't need to be         stored in the "Extensions" folder, they should be placed in         the "Application Support" folder.</P>                  <H3>Shared Libraries don't need to be in the Extensions         folder; they can be in the folder with the application         itself.</H3>                  <P>It's not necessary to copy a shared library used         exclusively by one application into the Extensions folder;         just leave it in the folder with the application.</P>                  <P><A HREF="#top">Back to top</A></P>                                   <P><A NAME="Summary"></A></P>                  <H2>Summary</H2>                  <P>Enabling your application to function smoothly in a NetBoot Server         environment is not that difficult. In fact, most applications today         already do things properly and are         "NetBoot Server-friendly." The things to keep in mind are to         ensure that you can launch your application from a locked         volume and have it run on multiple clients at the same time,         and be aware of how your application stores files, including         those that go into the System Folder, using the         "Preferences" and "Application Support" folders when         possible.</P>                 <P><A HREF="#top">Back to top</A></P>                  <P>&nbsp;<A NAME="References"></A></P>                  <H2>References</H2>                  <P>Technote 1134 <A HREF="tn1134.html">The Preferences         Problem</A></P>                  <P>Technote 1186 <a href="tn1186.html">How         To Be a Good Multiple Users Citizen</A></P>                  <P>Networking and Mac OS X Server</P>                  <P><A HREF="#top">Back to top</A></P>                                   <P>&nbsp;<A NAME="Changes"></A></P>                  <H2>Change History</H2>                           <TABLE BORDER=0 CELLPADDING=3 WIDTH=544>            <TR>               <td width=100 align=left>                  <P ALIGN=center>01-January-1999</P>               </TD><td align="left"><P>Originally published.</p>               </TD></TR>            <TR>               <td width=100 align=left><P ALIGN=CENTER>01-July-2000</p>               </TD><td align="left"><P>Updated in May 2000 toclarify various points and include references toTechnote 1186 <a href="tn1186.html">HowTo Be a Good Multiple Users Citizen</A>.</p>               </TD></TR>         </table></center>                  <P><A HREF="#top">Back to top</A></P>                                   <P><A NAME="Downloads"></A></P>                  <H2>Downloadables</H2>                  <center><table BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left><P ALIGN=CENTER><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="acrobat.gif"></p>               </TD><td align="left"><P>Acrobat version of this Note (48K).</p>               </TD><td width=60 align=left><P><A HREF="pdf/tn1151.pdf">Download</A></p>               </TD></TR>                     </table></center>                  <P><A HREF="#top">Back to top</A></P>                          </TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1151.html%3Fid%3DDTS10002990-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1151.html%3Fid%3DDTS10002990-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1151.html%3Fid%3DDTS10002990-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<html><head><title></title></head>

<body bgcolor="#ffffff">

 

 

<h2><a name="//apple_ref/occ/cl/EODatabaseOperation">EODatabaseOperation</a>

 <BR>

</h2>

<p><B>Inherits From:</B><BR>  

NSObject



<p><B>Conforms To:</B>

NSObject (NSObject)



<p><B>Declared in:</B>

EOAccess/EODatabaseOperation.h



<p><a name="227">

<a name="description"></a>

<h3>Class Description  </h3>

</a>An EODatabaseOperation object represents an operation-insert, update, or delete-to perform on an enterprise object and all the necessary information required to perform the operation. You don't ordinarily create instances of EODatabaseOperation; rather, the Framework automatically creates an EODatabaseOperation object for each new, updated or deleted object in an EOEditingContext. An EODatabaseContext object analyzes a set of database operations and maps each operation to one or more adaptor operations. The adaptor operations are then performed by an EOAdaptorChannel object. You generally interact with EODatabaseOperation objects only if you need to specify the order in which a set of operations are carried out (see the description for the EODatabaseContext delegate method <code>databaseContext:willOrderAdaptorOperationsFromDatabaseOperations:</code>).<p>

An EODatabaseOperation specifies an enterprise object (called "object") on which the operation is performed, the global ID for the object, and the object's entity. In addition, the database operation has a snapshot containing the last known database values for the object and a <B>newRow </B> dictionary of new or updated values to save in the database. Finally, a database operation specifies one of the following operators (the type of operation represented by the database operation).<p>

<ul><li>EODatabaseNothingOperator<br><li>EODatabaseInsertOperator<br><li>EODatabaseUpdateOperator<br><li>EODatabaseDeleteOperator<br></ul><p><p>

<dl><dt>Creating a new EODatabaseOperation

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a>

</dl><dt>Accessing the global ID

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/globalID">- globalID</a>

</dl><dt>Accessing the object

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/object">- object</a>

</dl><dt>Accessing the entity

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/entity">- entity</a>

</dl><dt>Setting the operator

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">- setDatabaseOperator:</a>

<dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/databaseOperator">- databaseOperator</a>

</dl><dt>Setting the database snapshot

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/setDBSnapshot:">- setDBSnapshot:</a>

<dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">- dbSnapshot</a>

</dl><dt>Setting the row

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/setNewRow:">- setNewRow:</a>

<dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/newRow">- newRow</a>

</dl><dt>Setting the adaptor operations

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">- addAdaptorOperation:</a>

<dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:">- removeAdaptorOperation:</a>

<dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">- adaptorOperations</a>

</dl><dt>Comparing new row and snapshot values

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/rowDiffs">- rowDiffs</a>

<dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/rowDiffsForAttributes:">- rowDiffsForAttributes:</a>

</dl><dt>Working with to-many snapshots

<dl><dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/recordToManySnapshots:">- recordToManySnapshots:</a>

<dt><a href="#//apple_ref/occ/instm/EODatabaseOperation/toManySnapshots">- toManySnapshots</a>

</dl></dl><a name="252">

<a name="instm"></a>

<h3>Instance Methods  </h3>

</a><a name="253">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">adaptorOperations</a></h4>

</a>- (NSArray *)<code>adaptorOperations</code> <p>

Returns the EOAdaptorOperation objects that need to be performed to carry out the operation represented by the receiver.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">- addAdaptorOperation:</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:"><B>- removeAdaptorOperation:</a>

 </B><p><a name="257">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:">addAdaptorOperation:</a></h4>

</a>- (void)<code>addAdaptorOperation:</code>(EOAdaptorOperation *)<em>adaptorOperation</em> <p>

Adds <em>adaptorOperation</em> to the receiver's list of adaptor operations. Raises an exception if <em>adaptorOperation</em> is <B>nil </B>.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">- adaptorOperations</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:"><B>- removeAdaptorOperation:</a>

 </B><p><a name="261">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/databaseOperator">databaseOperator</a></h4>

</a>- (EODatabaseOperator)<code>databaseOperator</code> <p>

Returns the receiver's database operator.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">- setDatabaseOperator:</a>

 </B><p><a name="265">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">dbSnapshot</a></h4>

</a>- (NSDictionary *)<code>dbSnapshot</code> <p>

Returns the database snapshot for the receiver's enterprise object. The snapshot contains the last known database values for the enterprise<code> </code>object. The dictionary returned from this method will be empty if the receiver's object has just been inserted into an EOEditingContext and has not yet been saved in persistent storage.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/setDBSnapshot:">- setDBSnapshot:</a>

 </B><p><a name="269">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/entity">entity</a></h4>

</a>- (EOEntity *)<code>entity</code> <p>

Returns the entity that corresponds to the receiver's enterprise object.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a>

 </B><p><a name="273">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/globalID">globalID</a></h4>

</a>- (EOGlobalID *)<code>globalID</code> <p>

Returns the global ID that corresponds to the receiver's enterprise object.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a>

 </B><p><a name="277">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">initWithGlobalID:object:entity:</a></h4>

</a>- <code>initWithGlobalID:</code>(EOGlobalID *)<em>globalID </em><code>object:</code>(id)<em>object </em><code>entity:</code>(EOEntity *)<em>entity</em> <p>

The designated initializer, this method initializes a new EODatabaseOperation instance. Sets the enterprise object to which the operation will be applied, the object's global ID, and the object's entity. Returns <B>self </B>.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/globalID">- globalID</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/object"><B>- object</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/entity"><B>- entity</a>

 </B><p><a name="281">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/newRow">newRow</a></h4>

</a>- (NSMutableDictionary *)<code>newRow</code> <p>

Returns a dictionary representation of the receiver's enterprise object. In addition to all the properties of the enterprise object that are stored in the database, the dictionary contains values for the non-derived attribute's of the enterprise object's entity that aren't visible in the enterprise object. For example, primary and foreign keys aren't ordinarily properties of an enterprise object but are attributes of the object's entity.<p>

The <B>newRow </B> dictionary is initialized with the values in the receiver's snapshot. New or updated values are added to the <B>newRow </B> dictionary (replacing out-of-date values) as the Framework maps changes in the object to an operation.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/setNewRow:">- setNewRow:</a>

 </B><p><a name="286">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/object">object</a></h4>

</a>- (id)<code>object</code> <p>

Returns the receiver's enterprise object.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/initWithGlobalID:object:entity:">- initWithGlobalID:object:entity:</a>

 </B><p><a name="346">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/primaryKeyDiffs">primaryKeyDiffs</a></h4>

</a>- (NSDictionary *)<code>primaryKeyDiffs</code><p>

Returns an NSDictionary that contains any primary key values in newRow that are different from those in the row snapshot. Returns <code>nil</code> if the receiver doesn't have EODatabaseUpdateOperator set as its database operator.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">- setDatabaseOperator:</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/newRow"><B>- newRow</a>

 </B><p><a name="336">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/recordToManySnapshots:">recordToManySnapshots:</a></h4>

</a>- (void)<code>recordToManySnapshot:</code>(NSArray *)<em>globalIDs</em> <code>relationshipName:</code>(NSString *)<em>name</em><p>

Records the objects in <em>globalIDs</em>. <em>globalIDs</em> is an array of the globalIDs that identify the objects at the destination of the to-many relationship named <em>name</em>; <em>name</em> is a property of the receiver's enterprise object.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/toManySnapshots">- toManySnapshots</a>

 </B><p><a name="223">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/removeAdaptorOperation:">removeAdaptorOperation:</a></h4>

</a>- (void)<code>removeAdaptorOperation:</code>(EOAdaptorOperation *)<em>adaptorOperation</em> <p>

Removes <em>adaptorOperation</em> from the receiver's list of adaptor operations.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/adaptorOperations">- adaptorOperations</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/addAdaptorOperation:"><B>- addAdaptorOperation:</a>

 </B><p><a name="294">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/rowDiffs">rowDiffs</a></h4>

</a>- (NSDictionary *)<code>rowDiffs</code> <p>

Returns values in the receiver's <B>newRow </B> dictionary that are different than the corresponding values its snapshot. The dictionary returned from this method contains the new values from the enterprise object.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/rowDiffsForAttributes:">- rowDiffsForAttributes:</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/newRow"><B>- newRow</a>

 </B><p><a name="298">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/rowDiffsForAttributes:">rowDiffsForAttributes:</a></h4>

</a>- (NSDictionary *)<code>rowDiffsForAttributes:</code>(NSArray *)<em>attributes</em> <p>

For the EOAttribute objects in <em>attributes</em>, this method returns values in the receiver's <B>newRow </B> dictionary that are different than the corresponding values its snapshot. The dictionary returned contains the new values from the enterprise object.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/rowDiffs">- rowDiffs</a> </B>, <a href="#//apple_ref/occ/instm/EODatabaseOperation/newRow"><B>- newRow</a>

 </B><p><a name="302">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/setDBSnapshot:">setDBSnapshot:</a></h4>

</a>- (void)<code>setDBSnapshot:</code>(NSDictionary *)<em>dbSnapshot</em> <p>

Sets the snapshot for the receiver's enterprise object. If the object has just been inserted into an EOEditingContext, it won't have a snapshot. In this case, <em>dbSnapshot</em> should be an empty dictionary.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/dbSnapshot">- dbSnapshot</a>

 </B><p><a name="306">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/setDatabaseOperator:">setDatabaseOperator:</a></h4>

</a>- (void)<code>setDatabaseOperator:</code>(EODatabaseOperator)<em>dbOp</em> <p>

Sets the receiver's database operator.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/databaseOperator">- databaseOperator</a>

 </B><p><a name="310">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/setNewRow:">setNewRow:</a></h4>

</a>- (void)<code>setNewRow:</code>(NSMutableDictionary *)<em>newRow</em> <p>

Sets the dictionary representation of the receiver's enterprise object. <em>newRow</em> should contain values for all the properties of the enterprise object that are stored in the database and for the non-derived attribute's of the enterprise object's entity that aren't visible in the enterprise object. <p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/newRow">- newRow</a>

 </B><p><a name="290">

<h4> <a name="//apple_ref/occ/instm/EODatabaseOperation/toManySnapshots">toManySnapshots</a></h4>

</a>- (NSDictionary *)<code>toManySnapshots</code><p>

Returns the NSDictionary containing the snapshots for the to-many relationships of the receiver's enterprise object.<p>

<B>See also: </B>  

<B><a href="#//apple_ref/occ/instm/EODatabaseOperation/recordToManySnapshots:">- recordToManySnapshots:</a>

 </B><p>

 

 





<i>Copyright &#169; 1997, Apple Computer, Inc.   All rights

reserved.</i>



<!-- Last updated: 10/16/97 11:24:04 -->



</body>

</html>


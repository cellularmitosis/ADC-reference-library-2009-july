<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>Play Video Sample - /PlayVideo.c</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; <A HREF="javascript:location.replace('index.html');">Play Video Sample</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Not Recommended Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>The information in this document is <strong>Not Recommended</strong> and should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/index.html" target="_blank">Reference Library > Graphics & Imaging</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">Play Video Sample</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/PlayVideo.c</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/PlayVideo.c</option>
<option value="listing2.html">/RequestVideo.c</option>
<option value="listing3.html">/RequestVideo.h</option>
<option value="listing4.html">/verbose debug code/PlayVideo.c</option>
<option value="listing5.html">/verbose debug code/RequestVideo.c</option></select>
				</p>
				</form>
				<p><strong><a href="Play_Video_Sample.zip">Download Sample</a></strong> (&#147;Play_Video_Sample.zip&#148;, 63.1K)<BR>
<strong><a href="Play_Video_Sample.dmg">Download Sample</a></strong> (&#147;Play_Video_Sample.dmg&#148;, 126.7K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    PlayVideo.c  Contains:  PlayVideo demonstrates the usage of the RequestVideo sample library        to make Display Manager calls. With PlayVideo, you can explore the        RequestVideo API by changing bit depth and screen resolution on        multisync displays. The purpose of this code is to provide a sample of        how developers can change the bit depth and timing of multisync        displays under their own control. Game developers should love this!                After requesting a desired bit depth, horizontal, and vertical resolutions        using the RVRequestVideoSetting() call, we then make the RVSetVideoRequest()        call to do the deed. At exit, we call RVSetVideoAsScreenPrefs() to force the        world to look like that described in the screen prefs.            It is a good idea to reset the screen(s) to the original setting before exit        since the call to RVSetVideoAsScreenPrefs() may not do the right thing under        Display Manager 1.0 with certain video drivers.  Written by: Eric Anderson    Copyright:  Copyright &copy; 1995-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        7/15/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1        1/28/97    ewa        Updated source for Metrowerks CodeWarrior 11        5/31/95    ewa        Added RVGetCurrentVideoSetting and RVConfirmVideoRequest routines                      to make it easy to revert back to where you came from and to give                      the user a chance to confirm the new setting if the new mode was                      valid (ie: the card supports it) but not safe (the monitor may not).        */#include &quot;RequestVideo.h&quot;#include &lt;Memory.h&gt;#include &lt;StdIO.h&gt;#include &lt;stdlib.h&gt;// routine definesunsigned long GetUserInputData (void);// routine implementationsvoid main(void){  VideoRequestRec requestRec;  VideoRequestRec originalRec;  short    currentDepth;  short    currentHorizontal;  short    currentVertical;  MaxApplZone();  printf(&quot;Welcome to *Guess That Video*\n&quot;);  printf(&quot;\nIMPORTANT: WARNING WHEN CHANGING THE SCREEN RESOLUTION\n&quot;);  printf(&quot;IMPORTANT:       IN A MULTI-MONITOR ENVIRONMENT\n&quot;);  printf(&quot;IMPORTANT: Monitor gravitation (repositioning) is not suported under\n&quot;);  printf(&quot;IMPORTANT: Display Manager 1.0, and there is not currently any code\n&quot;);  printf(&quot;IMPORTANT: written in this sample library to provide even minimal\n&quot;);  printf(&quot;IMPORTANT: gravitate functionality.\n&quot;);  printf(&quot;IMPORTANT: Currently, changing the video settings on\n&quot;);  printf(&quot;IMPORTANT: multi-monitor systems under the Display Manager 1.0.\n&quot;);  printf(&quot;IMPORTANT: will result in only the bit depth being changed.\n&quot;);  do  {    requestRec.screenDevice = nil;    // any screen    printf(&quot;\nRequested bit depth (999 to end the game):&quot;);    requestRec.reqBitDepth = GetUserInputData ();    // bit depth request    if (requestRec.reqBitDepth != 999)    {      // fill in the request record      printf(&quot;Requested horizontal resolution:&quot;);      requestRec.reqHorizontal = GetUserInputData ();;  // H request      printf(&quot;Requested vertical resolution:&quot;);      requestRec.reqVertical = GetUserInputData ();;    // V request      requestRec.displayMode = nil;            // must init to nil      requestRec.depthMode = nil;              // must init to nil      requestRec.requestFlags = 1&lt;&lt;kAllValidModesBit;            // give me the HxV over bit depth, and only safe video modes      // make the request and set it if we have one....      RVRequestVideoSetting(&amp;requestRec);      if (requestRec.screenDevice != nil)    // make sure we found a device...possible if there are no &quot;safe&quot; video modes      {        // Get current setting        originalRec.screenDevice = requestRec.screenDevice;    // this screen        RVGetCurrentVideoSetting(&amp;originalRec);                // print out the current info        currentDepth = (*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;pixelSize;        currentHorizontal = abs ((*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.right - (*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.left);        currentVertical = abs ((*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.bottom - (*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.top);        printf (&quot;\n&quot;);        printf (&quot;Info for GDevice at: %d\n&quot;, requestRec.screenDevice);        printf (&quot;Original depth:%d, horizontal:%d, vertical:%d\n&quot;, currentDepth, currentHorizontal, currentVertical);        printf (&quot;Requested depth:%d, horizontal:%d, vertical:%d\n&quot;, requestRec.reqBitDepth, requestRec.reqHorizontal, requestRec.reqVertical);        printf (&quot;Setting depth:%d, horizontal:%d, vertical:%d\n&quot;, requestRec.availBitDepth, requestRec.availHorizontal, requestRec.availVertical);              // Set/Confirm/Reset the request        RVSetVideoRequest (&amp;requestRec);        if (noErr != RVConfirmVideoRequest (&amp;requestRec))          RVSetVideoRequest (&amp;originalRec);                // print out the new info              currentDepth = (*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;pixelSize;        currentHorizontal = abs ((*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.right - (*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.left);        currentVertical = abs ((*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.bottom - (*(*(requestRec.screenDevice))-&gt;gdPMap)-&gt;bounds.top);        printf (&quot;New depth:%d, horizontal:%d, vertical:%d\n&quot;, currentDepth, currentHorizontal, currentVertical);      }    }  } while (requestRec.reqBitDepth != 999);  // our clue to bail  printf(&quot;\nThank you for playing *Guess That Video*\n&quot;);  // attempt to reset the world to screen prefs setting (may not do anything with old video drivers)  RVSetVideoAsScreenPrefs ();}// Get user input of a numberunsigned long GetUserInputData (void){  long  tempLong = 0;          do scanf (&quot;%ld&quot;, &amp;tempLong); while (tempLong == 0);      return (tempLong);}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/Play_Video_Sample/listing1.html%3Fid%3DDTS10000437-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/Play_Video_Sample/listing1.html%3Fid%3DDTS10000437-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/Play_Video_Sample/listing1.html%3Fid%3DDTS10000437-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
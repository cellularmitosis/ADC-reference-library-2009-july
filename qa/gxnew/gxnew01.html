<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"            "http://www.w3.org/TR/REC-html40/loose.dtd"><html><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A GXNEW01: Differences between QuickDraw GX 1.1.1 and 1.0.x</title><meta name="keywords" content="Mac OS 8 QuickDraw GX 1.1.1 QuickDraw GX 1.0.x gxDriverOutputType"><meta name="Description" content="Technical Q&amp;A GXNEW01: Note: The latest Mac OS releases,Mac OS 8.5.x and 8.6, will be the final operating systemreleases from Apple to include support for QuickDraw GX..Q&amp;A lists the API changes made to QuickDraw GX 1.1.1 in regardsto GX printing touching on such additions as mfpr, outp,Raster and Postscript paper mismatch handling, etc.."><meta name="categories" content="QuickDraw GX"><meta name="week-posted" content="May 1, 1995 - May 5, 1995"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10001215" title="Differences between QuickDraw GX 1.1.1 and 1.0.x"></a> <!-- white background --><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxPrinting-date.html">Printing</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Printing/index.html" target="_blank">Reference Library > Printing</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A GXNEW01</div>
<div id="pageheadsub">Differences between QuickDraw GX 1.1.1 and 1.0.x</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->            <!-- -->                        <!-- Document Body --><CENTER><table cellspacing="0" cellpadding="0" border="0" WIDTH="600"><tr><td align="left" scope="row"><font size="+4">Q</font>  I have several questions about the differences between QuickDraw GX1.1.1 and 1.0.x:<p><p>If there is a gxDriverOutputType resource in the DTP, the user cannot bring upthe Input Trays dialog. Is this something that the driver has to put in the DTPwhen it is created?<br><br><font size="+4">A</font>  Unfortunately, the GX v1.1.1b1 release notes are missing some importantinformation regarding the API changes made to GX printing.  <p><p>Here's the missing information from the QuickDraw GX v1.1.b1 Release Notes:<p> <p><u>New resource: 'mfpr'</u><p><u></u><p>The following resource has been added to allow disabling of manual-feed alertson a desktop-printer by desktop-printer basis. If a desktop printer contains a'mfpr' resource with ID gxPrintingBaseID, and QuickDraw GX is initiating thealert, the decision whether to display alerts is based on the followingstructure:<p> <pre>REZ:// Resource type for manual feed preferences, stored in DTP.#define gxManualFeedAlertPrefsType 'mfpr'#define gxManualFeedAlertPrefsID  (gxPrintingDriverBaseID)// Desktop printer resource to specify manual feed alert preferences. ('mfpr')#define gxShowAlerts  0x00000001        // Enable manual feed alerts (default).#define gxAlertOnPaperChange 0x00000002 // ...but only if the                                        // papertype changestype gxManualFeedAlertPrefsType {   unsigned bitstring[16]; // flags -- for driver's private use.   unsigned bitstring[16]; // flags -- predefined. gxShowAlerts,                           // gxShowAlerts +gxAlertOnPaperChange,                           // or 0.};C:struct gxManualFeedAlertPrefs {   longalertFlags; //  flags -- first word is for driver's private                   //  use, the rest is predefined.};typedef struct gxManualFeedAlertPrefs gxManualFeedAlertPrefs, *gxManualFeedAlertPrefsPtr, **gxManualFeedAlertPrefsHdl;enum { // bit fields in alertFlags field of gxManualFeedAlertPrefs.   gxShowAlerts = 0x00000001,          // Show alerts for this desktop printer.   gxAlertOnPaperChange = 0x00000002   // ...only if the papertype changes.};#define gxDefaultMFeedAlertSettings (gxShowAlerts | gxAlertOnPaperChange)</pre><p>The first word of the structure is for driver use.<p> <p>If the gxShowAlerts bit is set, manual-feed alerts are displayed. In addition,if the  gxAlertOnPaperChange bit is set, alerts are only displayed when themanually fed papertype is not the same as the last papertype printed on.<p> <p>Here are some examples of what the flags do:<p><pre>Settings: alertFlags = 0 or alertFlags = gxAlertOnPaperChange</pre><p>No manual feed alerts are generated by QuickDraw GX, since the gxShowAlertsmask isn't set.<p> <pre>Settings: alertFlags = gxShowAlerts</pre><p>Manual feed alerts are generated for every manually fed page.<p> <p>Given a document consisting of seven pages:<p>1. auto feed US Letter<p>2. manual feed A4<p>3. manual feed A4<p>4. auto feed B5<p>5. manual feed A4<p>6. manual feed US Legal<p>7. manual feed US Legal<p> <p>Manual feed alerts are displayed for pages 2, 3, 5, 6, and 7.<p> <pre>Settings: alertFlags = gxShowAlerts | gxAlertOnPaperChange</pre><p>Manual feed alerts are generated for every manually fed page that doesn't usethe same papertype as the previous page.<p> <p>Given a document consisting of seven pages:<p>1. auto feed US Letter<p>2. manual feed A4<p>3. manual feed A4<p>4. auto feed B5<p>5. manual feed A4<p>6. manual feed US Legal<p>7. manual feed US Legal<p> <p>Manual feed alerts are displayed for pages 2, 5, and 6.<p> <p>gxShowAlerts | gxAlertOnPaperChange are the default settings if no resource isfound in the desktop printer.<p> <p>The information in this structure is only used if QuickDraw GX is generatingthe alert (i.e., the driver isn't generating the alert via GXAlertTheUser). Forconsistency, we recommend that printer-driver developers who want to allowenabling and disabling of manual-feed alerts do so based on this resourcetype.<p> <p><u>New resource: 'outp'</u><p><u></u><p>The 'outp' resource allows printer drivers to indicate the characteristics of adesktop printer's output device. This resource indicates whether or not thedesktop printer is an output device that can be configurable for differentpapertypes. For example, for the GeoPort express modem driver, it makes nosense to display paper-mismatch or manual-feed dialogs, since the user cannotconfigure the device with different paper. The structure of the 'outp' resourcefollows:<p><pre>REZ:// Resource type for desktop printer output characteristics, stored in DTP.#define gxDriverOutputType 'outp'#define gxDriverOutputTypeID   (1)// Desktop printer resource to specify whether// or not this desktop printer has trays.#define gxCanConfigureTrays0x00000001  // Can configure trays for                                       // this printer.type gxDriverOutputType {   longint; // flags -- for driver's private use.   longint; // flags -- predefined. Currently,            // gxCanConfigureTrays or 0.};C:enum { // bit fields in outputSettings field of GXDriverOutputSettings.   gxCanConfigureTrays = 0x00000001 // Desktop printer represents a                                    // device with a paper feed.};typedef struct GXDriverOutputSettings {   longdriverflags;     //  flags -- for use by driver.   longoutputSettings;  //  flags -- predefined.} GXDriverOutputSettings, *GXDriverOutputSettingsPtr,  **GXDriverOutputSettingsHdl;</pre><p>The first longword is for the driver's private use.<p> <p>If the desktop printer contains an 'outp' resource that has thegxCanConfigureTrays mask set in the second longword (or the resource is notavailable), mismatch and manual-feed alerts are displayed as usual. If theresource contains an 'outp' resource without the gxCanConfigureTrays mask set,no mismatch or manual-feed alerts are generated. In this case, papermismatching behaves as "Blast and Pray," meaning that QuickDraw GX expects thatthe requested papertype is in the device.<p> <p><u>Notes:</u><p><p>Since the resource ID of the gxDriverOutputType resource is positive, it isdownloaded to all clients of a shared desktop printer at device-communicationtime. Because this resource is stored in the desktop printer, it is possiblefor a driver which supports "tray configurable" desktop printers, as well asthose that aren't, to create both types of desktop printers. Normally, thegxDriverOutputType resource is stored in a desktop printer (usingGXWriteDTPData) in an override to gxDefaultDesktopPrinter after forwarding themessage.<p> <p>If no 'outp' resource is found in the desktop printer, QuickDraw GX assumesthat the desktop printer is tray-configurable, and displays the manual-feed andpaper-mismatch alerts, unless the output is directed to a disk file, asindicated by the job's 'dest' job-collection item.<p><p><u>New Message: </u><p><pre>    gxSetupPageImageData (available only in builds 1.1.1a4 and later)</pre><p>A new message, which indicates the final format, page shape, and imaging datafor a given page, was added. Note that, until this message is sent, theseparameters are subject to change. The gxSetupPageImageData message is sent oncefor every page, just prior to gxStartSendPage. Driver writers may wish tooverride this message to determine the final characteristics of the data to besent to the printer. Overrides should forward the gxSetupPageImageDatamessage.<p> <p><p><u>Prototypes:</u><pre>OSErr Send_GXSetupPageImageData (gxFormat theFormat, gxShape thePage,void *imageData);OSErr Forward_GXSetupPageImageData (gxFormat theFormat, gxShape thePage,void *imageData);</pre><p> <p><u>New Message:</u><p><pre>    gxPostScriptEjectPendingPage</pre><p>A new message has been added to the PostScript engine within QuickDraw GX.gxPostScriptEjectPendingPage checks to see if there's a previously imaged pagewaiting to be ejected, and if there is, sends the gxPostScriptEjectPage messagefor it. On return, the pageWasEjected parameter is set to true if a page wasejected, and false otherwise. Overrides should forward thegxPostScriptEjectPendingPage message.<p> <p>Note: This message is most useful for PostScript drivers which do their ownpage handling. For example, if a driver is going to display a manual-feedalert, it's usually desirable to eject the previous page (if any) before askingthe user to insert the manual-feed paper. This can be accomplished by sendingthe gxPostScriptEjectPendingPage message.<p> <pre>OSErr Send_GXPostScriptEjectPendingPage (long ejectFlags,Boolean *pageWasEjected);OSErr Forward_GXPostScriptEjectPendingPage (long ejectFlags,Boolean *pageWasEjected);Note that, as of the beta release of QuickDraw GX 1.1.1, the override will be:OSErr Send_GXPostScriptEjectPendingPage (Boolean *pageWasEjected);OSErr Forward_GXPostScriptEjectPendingPage (Boolean *pageWasEjected);</pre><p>In other words, the ejectFlags parameter was removed.<p><p>Other changes and areas to test:<p> <p><u>New dialogs:</u><p><u></u><p>The paper-matching and manual-feed operation were extensively rewritten. Tilingand manual-feed options were added to the paper-mismatch dialog, and automaticfeeding (and crop, scale, and tile) options were added to the manual-feeddialog of the Laserwriter.<p><p>Please confirm that your drivers and extensions behave as expected with the newdialogs. Note that the new "expected behavior" is that desktop printers withconfigurable trays generate a paper mismatch whenever the paper a document isformatted for is not in the printer in use. This includes desktop printerswhich have never been configured. This represents a change in behavior from GX1.0.1 and 1.0.2, which used to "Blast and Pray" to unconfigured desktopprinters. This change was made because QuickDraw GX printing is more likely toproduce the desired results once a desktop printer is configured, and many newusers won't realize that they need to configure desktop printers from theFinder's Printing menu. To make this default behavior less inconvenient,mismatch dialogs which are invoked for an unconfigured desktop printer willdefault to "Load tray XXX with YYY paper," and have the "Make change permanent"checkbox selected. Therefore, simply clicking continue (or hitting enter)configures the desktop printer.<p><p><u>Raster and PostScript paper mismatch handling:</u><p>Paper-mismatch handling for raster and PostScript drivers is dramaticallyimproved. If your driver doesn't perform paper-mismatch handling (cropping,scaling, tiling, and redirecting to different trays) as expected, make surethat your driver does not make assumptions about the page's format orimageDataHandle prior to sending the new gxSetupPageImageData message. Thereare a number of drivers which expect the page shape, format, andimageDataHandle available at gxDespoolPage time to be the ones actually used toimage the page. In the case of a paper mismatch, or of output modifyingprinting extensions, this is an invalid assumption which causes paper-mismatchhandling to generate improper output.<p> <p>Note: The LaserWriter IIsc sample which shipped on the QuickDraw GX 1.0 SDK hadthe same problem. A new sample is available through Developer Technical Support.<!-- begin_date --><H4 ALIGN=center>Updated: 1-May-95</H4><!-- end_date --></td></tr></table></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/gxnew/gxnew01.html%3Fid%3DDTS10001215-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/gxnew/gxnew01.html%3Fid%3DDTS10001215-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/gxnew/gxnew01.html%3Fid%3DDTS10001215-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
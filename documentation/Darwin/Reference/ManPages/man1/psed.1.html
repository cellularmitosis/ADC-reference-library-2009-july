<html><head><title>Mac OS X
 Manual Page For psed(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/psed" title="Mac OS X
 Manual Page for psed(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/psed"; name=psed(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
S2P(1)                                Perl Programmers Reference Guide                                <!-- a -->S2P(1)<!-- /a -->



<b>NAME</b>
       psed - a stream editor

<b>SYNOPSIS</b>
          psed [-an] script [file ...]
          psed [-an] [-e script] [-f script-file] [file ...]

          s2p  [-an] [-e script] [-f script-file]

<b>DESCRIPTION</b>
       A stream editor reads the input stream consisting of the specified files (or standard input, if none
       are given), processes is line by line by applying a script consisting of edit commands, and writes
       resulting lines to standard output. The filename `"-"' may be used to read standard input.

       The edit script is composed from arguments of <b>-e</b> options and script-files, in the given order. A sin-<font color="#ffffff" class="whiteout">gle&nbsp;single</font>
       gle script argument may be specified as the first parameter.

       If this program is invoked with the name <u>s2p</u>, it will act as a sed-to-Perl translator. See "sed
       Script Translation".

       <b>sed</b> returns an exit code of 0 on success or &gt;0 if an error occurred.

<b>OPTIONS</b>
       <b>-a</b>  A file specified as argument to the <b>w</b> edit command is by default opened before input processing
           starts. Using <b>-a</b>, opening of such files is delayed until the first line is actually written to
           the file.

       <b>-e</b> <u>script</u>
           The editing commands defined by <u>script</u> are appended to the script.  Multiple commands must be
           separated by newlines.

       <b>-f</b> <u>script-file</u>
           Editing commands from the specified <u>script-file</u> are read and appended to the script.

       <b>-n</b>  By default, a line is written to standard output after the editing script has been applied to it.
           The <b>-n</b> option suppresses automatic printing.

<b>COMMANDS</b>
       <b>sed</b> command syntax is defined as

          [<u>address</u>[<b>,</b><u>address</u>]][<b>!</b>]<u>function</u>[<u>argument</u>]

       with whitespace being permitted before or after addresses, and between the function character and the
       argument. The <u>address</u>es and the address inverter ("!") are used to restrict the application of a com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
       mand to the selected <!-- a -->line(s)<!-- /a --> of input.

       Each command must be on a line of its own, except where noted in the synopses below.

       The edit cycle performed on each input line consist of reading the line (without its trailing newline
       character) into the <u>pattern</u> <u>space</u>, applying the applicable commands of the edit script, writing the
       final contents of the pattern space and a newline to the standard output.  A <u>hold</u> <u>space</u> is provided
       for saving the contents of the pattern space for later use.

       <b>Addresses</b>

       A sed address is either a line number or a pattern, which may be combined arbitrarily to construct
       ranges. Lines are numbered across all input files.

       Any address may be followed by an exclamation mark (`"!"'), selecting all lines not matching that
       address.

       <u>number</u>
           The line with the given number is selected.

       <b>$</b>   A dollar sign ("$") is the line number of the last line of the input stream.

       <b>/</b><u>regular</u> <u>expression</u><b>/</b>
           A pattern address is a basic regular expression (see "Basic Regular Expressions"), between the
           delimiting character "/".  Any other character except "\" or newline may be used to delimit a
           pattern address when the initial delimiter is prefixed with a backslash (`"\"').

       If no address is given, the command selects every line.

       If one address is given, it selects the line (or lines) matching the address.

       Two addresses select a range that begins whenever the first address matches, and ends (including that
       line) when the second address matches.  If the first (second) address is a matching pattern, the sec-<font color="#ffffff" class="whiteout">ond&nbsp;second</font>
       ond address is not applied to the very same line to determine the end of the range. Likewise, if the
       second address is a matching pattern, the first address is not applied to the very same line to
       determine the begin of another range. If both addresses are line numbers, and the second line number
       is less than the first line number, then only the first line is selected.

       <b>Functions</b>

       The maximum permitted number of addresses is indicated with each function synopsis below.

       The argument <u>text</u> consists of one or more lines following the command.  Embedded newlines in <u>text</u>
       must be preceded with a backslash.  Other backslashes in <u>text</u> are deleted and the following character
       is taken literally.

       [1addr]<b>a\</b> <u>text</u>
           Write <u>text</u> (which must start on the line following the command) to standard output immediately
           before reading the next line of input, either by executing the <b>N</b> function or by beginning a new
           cycle.

       [2addr]<b>b</b> [<u>label</u>]
           Branch to the <b>:</b> function with the specified <u>label</u>. If no label is given, branch to the end of the
           script.

       [2addr]<b>c\</b> <u>text</u>
           The line, or range of lines, selected by the address is deleted.  The <u>text</u> (which must start on
           the line following the command) is written to standard output. With an address range, this occurs
           at the end of the range.

       [2addr]<b>d</b>
           Deletes the pattern space and starts the next cycle.

       [2addr]<b>D</b>
           Deletes the pattern space through the first embedded newline or to the end.  If the pattern space
           becomes empty, a new cycle is started, otherwise execution of the script is restarted.

       [2addr]<b>g</b>
           Replace the contents of the pattern space with the hold space.

       [2addr]<b>G</b>
           Append a newline and the contents of the hold space to the pattern space.

       [2addr]<b>h</b>
           Replace the contents of the hold space with the pattern space.

       [2addr]<b>H</b>
           Append a newline and the contents of the pattern space to the hold space.

       [1addr]<b>i\</b> <u>text</u>
           Write the <u>text</u> (which must start on the line following the command) to standard output.

       [2addr]<b>l</b>
           Print the contents of the pattern space: non-printable characters are shown in C-style escaped
           form; long lines are split and have a trailing `"\"' at the point of the split; the true end of a
           line is marked with a `"$"'. Escapes are: `\a', `\t', `\n', `\f', `\r', `\e' for BEL, HT, LF, FF,
           CR, ESC, respectively, and `\' followed by a three-digit octal number for all other non-printable
           characters.

       [2addr]<b>n</b>
           If automatic printing is enabled, write the pattern space to the standard output. Replace the
           pattern space with the next line of input. If there is no more input, processing is terminated.

       [2addr]<b>N</b>
           Append a newline and the next line of input to the pattern space. If there is no more input, pro-<font color="#ffffff" class="whiteout">cessing&nbsp;processing</font>
           cessing is terminated.

       [2addr]<b>p</b>
           Print the pattern space to the standard output. (Use the <b>-n</b> option to suppress automatic printing
           at the end of a cycle if you want to avoid double printing of lines.)

       [2addr]<b>P</b>
           Prints the pattern space through the first embedded newline or to the end.

       [1addr]<b>q</b>
           Branch to the end of the script and quit without starting a new cycle.

       [1addr]<b>r</b> <u>file</u>
           Copy the contents of the <u>file</u> to standard output immediately before the next attempt to read a
           line of input. Any error encountered while reading <u>file</u> is silently ignored.

       [2addr]<b>s/</b><u>regular</u> <u>expression</u><b>/</b><u>replacement</u><b>/</b><u>flags</u>
           Substitute the <u>replacement</u> string for the first substring in the pattern space that matches the
           <u>regular</u> <u>expression</u>.  Any character other than backslash or newline can be used instead of a slash
           to delimit the regular expression and the replacement.  To use the delimiter as a literal charac-<font color="#ffffff" class="whiteout">ter&nbsp;character</font>
           ter within the regular expression and the replacement, precede the character by a backslash
           (`"\"').

           Literal newlines may be embedded in the replacement string by preceding a newline with a back-<font color="#ffffff" class="whiteout">slash.&nbsp;backslash.</font>
           slash.

           Within the replacement, an ampersand (`"&amp;"') is replaced by the string matching the regular
           expression. The strings `"\1"' through `"\9"' are replaced by the corresponding subpattern (see
           "Basic Regular Expressions").  To get a literal `"&amp;"' or `"\"' in the replacement text, precede
           it by a backslash.

           The following <u>flags</u> modify the behaviour of the <b>s</b> command:

           <b>g</b>       The replacement is performed for all matching, non-overlapping substrings of the pattern
                   space.

           <b>1</b>..<b>9</b>    Replace only the n-th matching substring of the pattern space.

           <b>p</b>       If the substitution was made, print the new value of the pattern space.

           <b>w</b> <u>file</u>  If the substitution was made, write the new value of the pattern space to the specified
                   file.

       [2addr]<b>t</b> [<u>label</u>]
           Branch to the <b>:</b> function with the specified <u>label</u> if any <b>s</b> substitutions have been made since the
           most recent reading of an input line or execution of a <b>t</b> function. If no label is given, branch
           to the end of the script.

       [2addr]<b>w</b> <u>file</u>
           The contents of the pattern space are written to the <u>file</u>.

       [2addr]<b>x</b>
           Swap the contents of the pattern space and the hold space.

       [1addr]<b>=</b>
           Prints the current line number on the standard output.

       [0addr]<b>:</b> [<u>label</u>]
           The command specifies the position of the <u>label</u>. It has no other effect.

       [2addr]<b>{</b> [<u>command</u>]
       [0addr]<b>}</b>
           These two commands begin and end a command list. The first command may be given on the same line
           as the opening <b>{</b> command. The commands within the list are jointly selected by the address(es)
           given on the <b>{</b> command (but may still have individual addresses).

       [0addr]<b>#</b> [<u>comment</u>]
           The entire line is ignored (treated as a comment). If, however, the first two characters in the
           script are `"#n"', automatic printing of output is suppressed, as if the <b>-n</b> option were given on
           the command line.

<b>BASIC</b> <b>REGULAR</b> <b>EXPRESSIONS</b>
       A <u>Basic</u> <u>Regular</u> <u>Expression</u> (BRE), as defined in POSIX 1003.2, consists of <u>atoms</u>, for matching parts
       of a string, and <u>bounds</u>, specifying repetitions of a preceding atom.

       <b>Atoms</b>

       The possible atoms of a BRE are: <b>.</b>, matching any single character; <b>^</b> and <b>$</b>, matching the null string
       at the beginning or end of a string, respectively; a <u>bracket</u> <u>expressions</u>, enclosed in <b>[</b> and <b>]</b> (see
       below); and any single character with no other significance (matching that character). A <b>\</b> before one
       of: <b>.</b>, <b>^</b>, <b>$</b>, <b>[</b>, <b>*</b>, <b>\</b>, matching the character after the backslash. A sequence of atoms enclosed in <b>\(</b>
       and <b>\)</b> becomes an atom and establishes the target for a <u>backreference</u>, consisting of the substring
       that actually matches the enclosed atoms.  Finally, <b>\</b> followed by one of the digits <b>0</b> through <b>9</b> is a
       backreference.

       A <b>^</b> that is not first, or a <b>$</b> that is not last does not have a special significance and need not be
       preceded by a backslash to become literal. The same is true for a <b>]</b>, that does not terminate a
       bracket expression.

       An unescaped backslash cannot be last in a BRE.

       <b>Bounds</b>

       The BRE bounds are: <b>*</b>, specifying 0 or more matches of the preceding atom; <b>\{</b><u>count</u><b>\}</b>, specifying that
       many repetitions; <b>\{</b><u>minimum</u><b>,\}</b>, giving a lower limit; and <b>\{</b><u>minimum</u><b>,</b><u>maximum</u><b>\}</b> finally defines a lower
       and upper bound.

       A bound appearing as the first item in a BRE is taken literally.

       <b>Bracket</b> <b>Expressions</b>

       A <u>bracket</u> <u>expression</u> is a list of characters, character ranges and character classes enclosed in <b>[</b>
       and <b>]</b> and matches any single character from the represented set of characters.

       A character range is written as two characters separated by <b>-</b> and represents all characters (accord-<font color="#ffffff" class="whiteout">ing&nbsp;(according</font>
       ing to the character collating sequence) that are not less than the first and not greater than the
       second.  (Ranges are very collating-sequence-dependent, and portable programs should avoid relying on
       them.)

       A character class is one of the class names

          alnum     digit     punct
          alpha     graph     space
          blank     lower     upper
          cntrl     print     xdigit

       enclosed in <b>[:</b> and <b>:]</b> and represents the set of characters as defined in <a href="../man3/ctype.3.html#//apple_ref/doc/man/3/ctype"><u>ctype</u>(3)</a>.

       If the first character after <b>[</b> is <b>^</b>, the sense of matching is inverted.

       To include a literal `"^"', place it anywhere else but first. To include a literal '"]"' place it
       first or immediately after an initial <b>^</b>. To include a literal `"-"' make it the first (or second
       after <b>^</b>) or last character, or the second endpoint of a range.

       The special bracket expression constructs "[[:&lt;:]]" and "[[:&gt;:]]" match the null string at the begin-<font color="#ffffff" class="whiteout">ning&nbsp;beginning</font>
       ning and end of a word respectively.  (Note that neither is identical to Perl's `\b' atom.)

       <b>Additional</b> <b>Atoms</b>

       Since some sed implementations provide additional regular expression atoms (not defined in POSIX
       1003.2), <b>psed</b> is capable of translating the following backslash escapes:

       <b>\&lt;</b> This is the same as "[[:&gt;:]]".
       <b>\&gt;</b> This is the same as "[[:&lt;:]]".
       <b>\w</b> This is an abbreviation for "[[:alnum:]_]".
       <b>\W</b> This is an abbreviation for "[^[:alnum:]_]".
       <b>\y</b> Match the empty string at a word boundary.
       <b>\B</b> Match the empty string between any two either word or non-word characters.

       To enable this feature, the environment variable PSEDEXTBRE must be set to a string containing the
       requested characters, e.g.: "PSEDEXTBRE='&lt;&gt;wW'".

<b>ENVIRONMENT</b>
       The environment variable "PSEDEXTBRE" may be set to extend BREs.  See "Additional Atoms".

<b>DIAGNOSTICS</b>
       ambiguous translation for character `%s' in `y' command
           The indicated character appears twice, with different translations.

       `[' cannot be last in pattern
           A `[' in a BRE indicates the beginning of a <u>bracket</u> <u>expression</u>.

       `\' cannot be last in pattern
           A `\' in a BRE is used to make the subsequent character literal.

       `\' cannot be last in substitution
           A `\' in a subsitution string is used to make the subsequent character literal.

       conflicting flags `%s'
           In an <b>s</b> command, either the `g' flag and an n-th occurrence flag, or multiple n-th occurrence
           flags are specified. Note that only the digits `1' through `9' are permitted.

       duplicate label %s (first defined at %s)
       excess address(es)
           The command has more than the permitted number of addresses.

       extra characters after command (%s)
       illegal option `%s'
       improper delimiter in s command
           The BRE and substitution may not be delimited with `\' or newline.

       invalid address after `,'
       invalid backreference (%s)
           The specified backreference number exceeds the number of backreferences in the BRE.

       invalid repeat clause `\{%s\}'
           The repeat clause does not contain a valid integer value, or pair of values.

       malformed regex, 1st address
       malformed regex, 2nd address
       malformed regular expression
       malformed substitution expression
       malformed `y' command argument
           The first or second string of a <b>y</b> command  is syntactically incorrect.

       maximum less than minimum in `\{%s\}'
       no script command given
           There must be at least one <b>-e</b> or one <b>-f</b> option specifying a script or script file.

       `\' not valid as delimiter in `y' command
       option -e requires an argument
       option -f requires an argument
       `s' command requires argument
       start of unterminated `{'
       string lengths in `y' command differ
           The translation table strings in a <b>y</b> commanf must have equal lengths.

       undefined label `%s'
       unexpected `}'
           A <b>}</b> command without a preceding <b>{</b> command was encountered.

       unexpected end of script
           The end of the script was reached although a text line after a <b>a</b>, <b>c</b> or <b>i</b> command indicated
           another line.

       unknown command `%s'
       unterminated `['
           A BRE contains an unterminated bracket expression.

       unterminated `\('
           A BRE contains an unterminated backreference.

       `\{' without closing `\}'
           A BRE contains an unterminated bounds specification.

       `\)' without preceding `\('
       `y' command requires argument

<b>EXAMPLE</b>
       The basic material for the preceding section was generated by running the sed script

          #no autoprint
          s/^.*Warn( *"\([^"]*\)".*$/\1/
          t process
          b
          :process
          s/$!/%s/g
          s/$[_[:alnum:]]\{1,\}/%s/g
          s/\\\\/\\/g
          s/^/=item /
          p

       on the program's own text, and piping the output into "sort -u".

<b>SED</b> <b>SCRIPT</b> <b>TRANSLATION</b>
       If this program is invoked with the name <u>s2p</u> it will act as a sed-to-Perl translator. After option
       processing (all other arguments are ignored), a Perl program is printed on standard output, which
       will process the input stream (as read from all arguments) in the way defined by the sed script and
       the option setting used for the translation.

<b>SEE</b> <b>ALSO</b>
       <a href="perl.1.html#//apple_ref/doc/man/1/perl"><u>perl</u>(1)</a>, <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format"><u>re</u><b>_</b><u>format</u>(7)</a>

<b>BUGS</b>
       The <b>l</b> command will show escape characters (ESC) as `"\e"', but a vertical tab (VT) in octal.

       Trailing spaces are truncated from labels in <b>:</b>, <b>t</b> and <b>b</b> commands.

       The meaning of an empty regular expression (`"//"'), as defined by <b>sed</b>, is "the last pattern used, at
       run time". This deviates from the Perl interpretation, which will re-use the "last last successfully
       executed regular expression". Since keeping track of pattern usage would create terribly cluttered
       code, and differences would only appear in obscure context (where other <b>sed</b> implementations appear to
       deviate, too), the Perl semantics was adopted. Note that common usage of this feature, such as in
       "/abc/s//xyz/", will work as expected.

       Collating elements (of bracket expressions in BREs) are not implemented.

<b>STANDARDS</b>
       This <b>sed</b> implementation conforms to the IEEE Std1003.2-1992 ("POSIX.2") definition of <b>sed</b>, and is
       compatible with the <u>OpenBSD</u> implementation, except where otherwise noted (see "BUGS").

<b>AUTHOR</b>
       This Perl implementation of <u>sed</u> was written by Wolfgang Laun, <u>Wolfgang.Laun@alcatel.at</u>.

<b>COPYRIGHT</b> <b>and</b> <b>LICENSE</b>
       This program is free and open software. You may use, modify, distribute, and sell this program (and
       any modified variants) in any way you wish, provided you do not restrict others from doing the same.



perl v5.8.8                                      2007-09-23                                           <!-- a -->S2P(1)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/psed.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/psed.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/psed.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

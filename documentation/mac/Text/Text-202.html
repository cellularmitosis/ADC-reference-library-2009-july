<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Storing a Font Name in a Document(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING202></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-201.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-203.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-181.html"><B>Chapter 4 - Font Manager</B></A> / <A HREF="Text-200.html"><B>Using the Font Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING202-0></A>
<H2><A NAME=MARKER-2-999></A>Storing a Font Name in a Document</H2>
 <A NAME=MARKER-2-43></A>When presenting a font to a user, you should always refer to a font by name rather than by font family ID; this prevents several problems that can arise if you use the font family ID. One problem with identifying fonts by font family ID rather than by name is the plethora of font families available for the Macintosh computer. Many share the same font family ID, and even though the font the user wants is present in the System file, another font with the same ID may appear in a font menu. Another problem is that one font family may have different IDs on different computer systems, so that when the application opens the document using this font family on a different computer system, it can't find the proper font, even though it is available, and substitutes another.<A NAME=MARKER-2-234></A> <A NAME=MARKER-2-184></A><P>
 If you've stored the name of the font in the document, you can find its font family ID by calling the <CODE>GetFNum</CODE> procedure, which is described on <A HREF=Text-225.html#MARKER-9-356>page 4-47</A>. However, if the font isn't present in the system software when the user opens the document, <CODE>GetFNum</CODE> returns 0 for the ID. Since 0 is also the system font ID (or the neighborhood base font for the active script system), you need to double-check the name of the font from the document against the name of the system font, as illustrated in <A HREF=#MARKER-9-237>Listing 4-1</A>. <A NAME=MARKER-8-112></A><P>
<B>Listing 4-1  <A NAME=MARKER-9-237></A>Checking a font name against the system font name</B><P>
<PRE>
FUNCTION MyGetFontNumber(fontName: Str255;
                         VAR fontNum: Integer): Boolean;
      {MyGetFontNumber returns in the fontNum parameter the number for }
      { the font with the given font name. If there's no such font, }
      { it returns FALSE.}

VAR
   systemFontName: Str255;

BEGIN
   GetFNum(fontName, fontNum);
   IF fontNum = 0 THEN 
      BEGIN {either the font was not found, or it is the system font}
      GetFontName(0, systemFontName);
      GetFontNumber := EqualString(fontName, systemFontName, FALSE, FALSE);
      END{ if theNum was not 0, the font is available }
   ELSE
      GetFontNumber := TRUE;
END;
</PRE>
 Storing a font's name rather than its ID is a more reliable method of finding a font, because the name, unlike the font family ID, does not change from one computer system to another. You may also want to store the checksum of a font (the sum of the values of the bytes in the font data) with its name, to be sure that the version of the font is the same on different computer systems. <A HREF=Text-260.html#MARKER-9-492>Listing 4-2 on page 4-72</A> provides a function for computing a checksum.<P>
 If the font versions are different--that is, if the checksums don't match--you should offer users the option of substituting for the font temporarily (until they can find the proper version of the font) or permanently (with another font that is currently available).<P>
 If you are developing software for use with non-Roman fonts and the font is not found (by a function such as <CODE>MyGetFontNumber</CODE> above), you can use the neighborhood base font rather than the system font. The <A NAME=MARKER-2-240></A>neighborhood base font is the lowest font ID for a particular script<A NAME=MARKER-9-913></A>.<A NAME=MARKER-2-128></A> <A NAME=MARKER-2-1000></A><A NAME=MARKER-9-110></A> <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-201.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-203.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

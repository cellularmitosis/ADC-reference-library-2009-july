<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Certificate, Key, and Trust Services Reference: Deprecated Certificate, Key, and Trust Services  Functions</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Deprecated Certificate, Key, and Trust Services  Functions"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000157-AppendixA" title="Deprecated Certificate, Key, and Trust Services  Functions"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Security/index.html#//apple_ref/doc/uid/TP30001281-TP30000434" target="_top">Security</a> &gt; <a href="../../../../../reference/Security/idxAuthentication-date.html#//apple_ref/doc/uid/TP30001281-TP30000434-TP30000487" target="_top">Authentication</a> &gt; <a href="../index.html" target="_top">Certificate, Key, and Trust Services Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Reference/reference.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../certKeyTrustPolicies/certKeyTrustPolicies.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <h1>Deprecated Certificate, Key, and Trust Services  Functions</h1><p>A function identified as deprecated has been superseded and may become unsupported in the future.</p><a name="//apple_ref/doc/uid/TP30000157-AppendixA-DontLinkElementID_228" title="Deprecated in Mac OS X v10.5"></a><h2>Deprecated in Mac OS X v10.5</h2><a name="//apple_ref/c/func/SecTrustGetCSSMAnchorCertificates" title="SecTrustGetCSSMAnchorCertificates"></a><a name="//apple_ref/doc/c_ref/SecTrustGetCSSMAnchorCertificates" title="SecTrustGetCSSMAnchorCertificates"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-CJBBIFBJ" title="SecTrustGetCSSMAnchorCertificates"></a>
<a name="//apple_ref/doc/uid/TP30000157-AppendixA-DontLinkElementID_78"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_78"></a><h3 class="tight">SecTrustGetCSSMAnchorCertificates</h3>
<p class="spaceabove">Retrieves the CSSM anchor certificates.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSStatus SecTrustGetCSSMAnchorCertificates (
   const <!--a-->CSSM_DATA<!--/a--> **cssmAnchors,
   <!--a-->uint32<!--/a--> *cssmAnchorCount
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>cssmAnchors</em></dt>
<dd><p>On return, points to an array of anchor certificates. This array is allocated by the system; you should not deallocate it. This data is not guaranteed to remain valid indefinitely; you should retrieve the data immediately and either pass it to other functions or copy it for future use.</p></dd>
<dt><em>cssmAnchorCount</em></dt>
<dd><p>On return, points to the number of <code>CSSM_DATA</code> structures returned in the <code>cssmAnchors</code> parameter.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>This function returns the certificates in the system’s store of anchor certificates (see <code><a href="../Reference/reference.html#//apple_ref/c/func/SecTrustSetAnchorCertificates">SecTrustSetAnchorCertificates</a></code>. You can use the <code>CSSM_DATA</code> structures returned by this function as input to functions in the CSSM API. If you want references to the anchor certificates in a form appropriate for calls to the Certificate, Key, and Trust API, use the <code><a href="../Reference/reference.html#//apple_ref/c/func/SecTrustCopyAnchorCertificates">SecTrustCopyAnchorCertificates</a></code> function instead.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustGetUserTrust" title="SecTrustGetUserTrust"></a><a name="//apple_ref/doc/c_ref/SecTrustGetUserTrust" title="SecTrustGetUserTrust"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIFDCHA" title="SecTrustGetUserTrust"></a>
<a name="//apple_ref/doc/uid/TP30000157-AppendixA-DontLinkElementID_84"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_84"></a><h3 class="tight">SecTrustGetUserTrust</h3>
<p class="spaceabove">Retrieves the user-specified trust setting for a certificate and policy.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSStatus SecTrustGetUserTrust (
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/SecPolicyRef">SecPolicyRef</a> policy,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/SecTrustUserSetting">SecTrustUserSetting</a> *trustSetting
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certificate</em></dt>
<dd><p>The certificate object from which to obtain the user-specified trust setting. </p></dd>
<dt><em>policy</em></dt>
<dd><p>The policy object for the policy for which to obtain the user-specified trust setting. Use the <code><a href="../Reference/reference.html#//apple_ref/c/func/SecPolicySearchCopyNext">SecPolicySearchCopyNext</a></code> function to obtain a policy object.</p></dd>
<dt><em>trustSetting</em></dt>
<dd><p>On return, points to the user-specified trust setting for the specified certificate and policy.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>Each certificate has one user-specified trust setting per policy. For each policy, the user can specify that the certificate is always to be trusted, is never to be trusted, or can be trusted only after permission is requested from—and granted by—the user. It is also possible for there to be no user-specified trust setting for a policy. See <code><a href="../Reference/reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> for a discussion of the use of user-specified trust settings in a trust evaluation.</p>
<p>The <code>SecTrustGetUserTrust</code> function returns the effective user trust setting for the certificate and policy specified. You can obtain a certificate from a keychain and typecast the keychain item object (data type <code>SecKeychainItemRef</code>) to a certificate object (<code>SecCertificateRef</code>). </p>
<p>See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/c/tdef/SecTrustResultType">“Trust Result Type Constants”</a></span> for values and descriptions of the user-specified trust settings. The user can set these values in the Keychain Access utility. If you provide your own UI for these settings, you can use the <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustSetUserTrust">SecTrustSetUserTrust</a></code> function to set them.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li></ul><h5 class="tight">Declared In</h5><code>SecTrust.h</code><a name="//apple_ref/c/func/SecTrustSetUserTrust" title="SecTrustSetUserTrust"></a><a name="//apple_ref/doc/c_ref/SecTrustSetUserTrust" title="SecTrustSetUserTrust"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-BCIIFCJE" title="SecTrustSetUserTrust"></a>
<a name="//apple_ref/doc/uid/TP30000157-AppendixA-DontLinkElementID_98"></a><a name="//apple_ref/doc/uid/TP30000157-CH1g-DontLinkElementID_98"></a><h3 class="tight">SecTrustSetUserTrust</h3>
<p class="spaceabove">Sets the user-specified trust settings of a certificate and policy. &#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSStatus SecTrustSetUserTrust (
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/SecCertificateRef">SecCertificateRef</a> certificate,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/SecPolicyRef">SecPolicyRef</a> policy,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/SecTrustUserSetting">SecTrustUserSetting</a> trustSetting
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>certificate</em></dt>
<dd><p>The certificate object for which to set the user-specified trust settings. Use the <code><a href="../Reference/reference.html#//apple_ref/c/func/SecCertificateCreateFromData">SecCertificateCreateFromData</a></code> function to obtain a certificate object.</p></dd>
<dt><em>policy</em></dt>
<dd><p>The policy object for the policy for which to set the user-specified trust settings. Use the <code><a href="../Reference/reference.html#//apple_ref/c/func/SecPolicySearchCopyNext">SecPolicySearchCopyNext</a></code> function to obtain a policy object.</p></dd>
<dt><em>trustSetting</em></dt>
<dd><p>The user-specified trust setting to be set. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/c/tdef/SecTrustResultType">“Trust Result Type Constants”</a></span> for possible values.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000157-CH4g-339030">“Certificate, Key, and Trust Services Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>Each certificate has one user-specified trust setting per policy. These trust settings are used by the <code><a href="../Reference/reference.html#//apple_ref/c/func/SecTrustEvaluate">SecTrustEvaluate</a></code> function when evaluating trust. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/c/tdef/SecTrustResultType">“Trust Result Type Constants”</a></span> for values and descriptions of the user-specified trust settings. The user can set these values in the Keychain Access utility. Under certain circumstances, it might be appropriate for an administrative application to change a user trust setting. In that case, you can use the <code>SecTrustSetUserTrust</code> function to do so. You can obtain a certificate from a keychain and typecast the keychain item object (data type <code>SecKeychainItemRef</code>) to a certificate object (<code>SecCertificateRef</code>).</p>
<p>When you call the <code>SecTrustSetUserTrust</code> function, the user might be prompted to confirm the new setting before it is changed. </p>
<p>You can use the <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/SecTrustGetUserTrust">SecTrustGetUserTrust</a></code> function to get the current user-specified trust settings for a certificate.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.2 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li></ul>
<h5 class="tight">Declared In</h5><code>SecTrust.h</code>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Reference/reference.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../certKeyTrustPolicies/certKeyTrustPolicies.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-11-19<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Security/Reference/certifkeytrustservices/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000157-4.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Security/Reference/certifkeytrustservices/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000157-4.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Security/Reference/certifkeytrustservices/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000157-4.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
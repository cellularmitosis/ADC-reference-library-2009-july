<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Code Fragment Manager Reference: Deprecated Code Fragment Manager  Functions</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Deprecated Code Fragment Manager  Functions"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000150-AppendixA" title="Deprecated Code Fragment Manager  Functions"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Carbon/index.html#//apple_ref/doc/uid/TP30001281-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../../../reference/Carbon/idxRuntimeArchitecture-date.html#//apple_ref/doc/uid/TP30001281-TP30000420-TP30000459" target="_top">Runtime Architecture</a> &gt; <a href="../index.html" target="_top">Code Fragment Manager Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Reference/reference.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../appendixa/appendixa.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <h1>Deprecated Code Fragment Manager  Functions</h1><p>A function identified as deprecated has been superseded and may become unsupported in the future.</p><a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_176" title="Deprecated in Mac OS X v10.5"></a><h2>Deprecated in Mac OS X v10.5</h2><a name="//apple_ref/c/func/CloseConnection" title="CloseConnection"></a><a name="//apple_ref/doc/c_ref/CloseConnection" title="CloseConnection"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F00513" title="CloseConnection"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_6"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_6"></a><h3 class="tight">CloseConnection</h3>
<p class="spaceabove">Closes a connection to a fragment.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr CloseConnection (
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragConnectionID">CFragConnectionID</a> *connID
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>connID</em></dt>
<dd><p>A pointer to a connection ID. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The <code>CloseConnection</code> function
closes the connection to a fragment indicated by the <code>connID</code> parameter. <code>CloseConnection</code> decrements
the count of existing connections to the specified fragment and,
if the resulting count is 0, calls the fragment&#8217;s termination
function and releases the memory occupied by the code and data sections
of the fragment. If the resulting count is not 0, any per-connection
data is released but the code section remains in memory.</p>
<p>When a fragment is unloaded as a result of its final connection
having been closed, all libraries that depend on that fragment are
also released, provided that their usage counts are also 0.</p>
<p>The Code Fragment Manager automatically closes any connections
that remain open at the time <code>ExitToShell</code> is
called for your application, so you need to call <code>CloseConnection</code> only
for fragments you wish to unload before your application terminates. </p>
<h5 class="tight">Special Considerations</h5>
<p>You can close a connection only to the root of a loading sequence
(that is, the fragment whose loading triggered the entire load chain).</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib 1.0 and later when Code Fragment Manager
1.0 or later is present.</li><li class="availability">Available in Mac OS X 10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>
<h5 class="tight">Declared In</h5><code>CodeFragments.h</code><a name="//apple_ref/c/func/ConvertBundlePreLocator" title="ConvertBundlePreLocator"></a><a name="//apple_ref/doc/c_ref/ConvertBundlePreLocator" title="ConvertBundlePreLocator"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F16662" title="ConvertBundlePreLocator"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_7"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_7"></a><h3 class="tight">ConvertBundlePreLocator</h3>
<p class="spaceabove">Converts a bundle prelocator to a Core Foundation bundle
locator.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr ConvertBundlePreLocator (
   <!--a-->CFragSystem7LocatorPtr<!--/a--> initBlockLocator
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>initBlockLocator</em></dt>
<dd><p>A pointer to a fragment locator structure.
On input, the structure contains a System 7 locator. On output,
the structure contains a <code>CFragCFBundleLocator</code>. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>This function can be used by initialization routines.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X 10.1 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>
<h5 class="tight">Declared In</h5><code>CodeFragments.h</code><a name="//apple_ref/c/func/CountSymbols" title="CountSymbols"></a><a name="//apple_ref/doc/c_ref/CountSymbols" title="CountSymbols"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F00785" title="CountSymbols"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_8"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_8"></a><h3 class="tight">CountSymbols</h3>
<p class="spaceabove">Determines how many symbols are exported from a specified
fragment.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr CountSymbols (
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragConnectionID">CFragConnectionID</a> connID,
   long *symCount
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>connID</em></dt>
<dd><p>A connection ID. </p></dd>
<dt><em>symCount</em></dt>
<dd><p>On return, a pointer to the number of exported
symbols in the fragment whose connection ID is <code>connID</code>.
You can use the value returned in <code>symCount</code> to
index through all the exported symbols in a particular fragment
(using the <code>GetIndSymbol</code> function). </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span></p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib 1.0 and later when Code Fragment Manager
1.0 or later is present.</li><li class="availability">Available in Mac OS X 10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>
<h5 class="tight">Declared In</h5><code>CodeFragments.h</code><a name="//apple_ref/c/func/FindSymbol" title="FindSymbol"></a><a name="//apple_ref/doc/c_ref/FindSymbol" title="FindSymbol"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F01496" title="FindSymbol"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_9"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_9"></a><h3 class="tight">FindSymbol</h3>
<p class="spaceabove">Searches for a specific exported symbol.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr FindSymbol (
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragConnectionID">CFragConnectionID</a> connID,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ConstStr255Param" target="_top">ConstStr255Param</a> symName,
   <!--a-->Ptr<!--/a--> *symAddr,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragSymbolClass">CFragSymbolClass</a> *symClass
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>connID</em></dt>
<dd><p>A connection ID. </p></dd>
<dt><em>symName</em></dt>
<dd><p>A symbol name. </p></dd>
<dt><em>symAddr</em></dt>
<dd><p>On return, a pointer to the address of the
symbol whose name is <code>symName</code>. </p></dd>
<dt><em>symClass</em></dt>
<dd><p>On return, a pointer to the class of the symbol
whose name is <code>symName</code>.
The currently recognized symbol classes are defined by the <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/constant_group/Load_Flag_Symbol_Class_and_Fragment_Locator_Constants">“Load Flag, Symbol Class, and Fragment Locator Constants.”</a></span> </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The <code>FindSymbol</code> function
searches the code fragment identified by the <code>connID</code> parameter for
the symbol whose name is specified by the <code>symName</code> parameter.
If that symbol is found, <code>FindSymbol</code> returns
the address of the symbol in the <code>symAddr</code> parameter
and the class of the symbol in the <code>symClass</code> parameter.</p>
<p>Because a fragment&#8217;s code is normally exported through transition
vectors to that code, the value <code>kCodeSymbol</code> is
not returned in the PowerPC environment. You can use the other two
constants to distinguish exports that represent code (of class <code>kTVectSymbol</code>)
from those that represent general data (of class <code>kDataSymbol</code>). </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib 1.0 and later when Code Fragment Manager
1.0 or later is present.</li><li class="availability">Available in Mac OS X 10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>
<h5 class="tight">Declared In</h5><code>CodeFragments.h</code><a name="//apple_ref/c/func/GetDiskFragment" title="GetDiskFragment"></a><a name="//apple_ref/doc/c_ref/GetDiskFragment" title="GetDiskFragment"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F01729" title="GetDiskFragment"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_10"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_10"></a><h3 class="tight">GetDiskFragment</h3>
<p class="spaceabove">Locates and possibly also loads a fragment contained in
a file&#8217;s data fork into your application&#8217;s context.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr GetDiskFragment (
   const <a href="../../File_Manager/Reference/reference.html#//apple_ref/doc/c_ref/FSSpec" target="_top">FSSpec</a> *fileSpec,
   UInt32 offset,
   UInt32 length,
   <!--a-->ConstStr63Param<!--/a--> fragName,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragLoadOptions">CFragLoadOptions</a> options,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragConnectionID">CFragConnectionID</a> *connID,
   <!--a-->Ptr<!--/a--> *mainAddr,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a> errMessage
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>fileSpec</em></dt>
<dd><p>A pointer to a file system specification that
identifies the disk-based fragment to load. </p></dd>
<dt><em>offset</em></dt>
<dd><p>The number of bytes from the beginning of
the file&#8217;s data fork at which the beginning of the fragment is
located. </p></dd>
<dt><em>length</em></dt>
<dd><p>The length (in bytes) of the fragment. Specify
the constant <code>kWholeFork</code> for this
parameter if the fragment extends to the end-of-file of the data
fork. Specify a nonzero value for the exact length of the fragment.</p></dd>
<dt><em>fragName</em></dt>
<dd><p>An optional name of the fragment. (This information
is used primarily to allow you to identify the fragment during debugging. </p></dd>
<dt><em>loadFlags</em></dt>
<dd><p>A flag that specifies the operation to perform
on the fragment.The Code Fragment Manager recognizes the constants
described in <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/constant_group/Load_Flag_Symbol_Class_and_Fragment_Locator_Constants">“Load Flag, Symbol Class, and Fragment Locator Constants.”</a></span> </p></dd>
<dt><em>connID</em></dt>
<dd><p>On return, a pointer to the connection ID
that identifies the connection to the fragment. You can pass this
ID to other Code Fragment Manager functions. </p></dd>
<dt><em>mainAddr</em></dt>
<dd><p>On return, a pointer to the main address of
the fragment. The value returned is specific to the fragment itself.
Your application can use this parameter for its own purposes. </p></dd>
<dt><em>errMessage</em></dt>
<dd><p>On return, the name of the fragment that could
not successfully be loaded. This parameter is meaningful only if
the call to <code>GetDiskFragment</code> fails. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span> The <code>kFindLib</code> constant
in the <code>loadFlags</code> parameter
specifies that the Code Fragment Manager search for the specified
fragment. If the fragment is already prepared and connected to your
application, <code>GetDiskFragment</code> returns <code>fragNoErr</code>.
If the specified fragment is not found, <code>GetDiskFragment</code> returns
the result code <code>fragLibNotFound</code>.
If the specified fragment is found but could not be connected to
your application, the function returns <code>fragLibConnErr</code>.</p>
<h5 class="tight">Discussion</h5>
<p>Loading involves finding the specified fragment, reading it
into memory (if it is not already in memory), and preparing it for
execution. The Code Fragment Manager attempts to resolve all symbols
imported by the fragment; to do so may involve loading import libraries.</p>
<p>If the fragment loading fails, the Code Fragment Manager returns
an error code. Note, however, that the error encountered is not
always in the fragment you asked to load. Rather, the error might
have occurred while attempting to load an import library that the fragment
you want to load depends on. For this reason, the Code Fragment
Manager also returns, in the <code>errMessage</code> parameter,
the name of the fragment that caused the load to fail. Although
fragment names are restricted to 63 characters, the <code>errMessage</code> parameter is
declared as type <code>Str255</code>;
doing this allows future versions of the Code Fragment Manager to
return a more informative message in the <code>errMessage</code> parameter. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Modified in Carbon. Available in CarbonLib 1.0 and later when
Code Fragment Manager 1.0 or later is present.</li><li class="availability">Available in Mac OS X 10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>

<h5 class="tight">Carbon Porting Notes</h5>
<p>On Mac OS X, <code>GetDiskFragment</code> does
not include the folder containing the root fragment (assuming that
it is different from the application fragment) in its search path
for import libraries. For example, say your application used a special
folder to store plugins. If that folder also contained special libraries
for those plugins, then calling <code>GetDiskFragment</code> to load
a plugin would not find those libraries. </p>
<p>The workaround is to make sure that any import libraries you
require are in the Code Fragment Manager's search path (such as
by designating an application library subfolder in the code fragment
resource, or placing the libraries in the application's container).
For more details of how the Code Fragment Manager searches for import
libraries, see Mac OS Runtime Architectures. </p><h5 class="tight">Declared In</h5><code>CodeFragments.h</code><a name="//apple_ref/c/func/GetIndSymbol" title="GetIndSymbol"></a><a name="//apple_ref/doc/c_ref/GetIndSymbol" title="GetIndSymbol"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F01812" title="GetIndSymbol"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_11"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_11"></a><h3 class="tight">GetIndSymbol</h3>
<p class="spaceabove">Gets information about the exported symbols in a fragment.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr GetIndSymbol (
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragConnectionID">CFragConnectionID</a> connID,
   long symIndex,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a> symName,
   <!--a-->Ptr<!--/a--> *symAddr,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragSymbolClass">CFragSymbolClass</a> *symClass
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>connID</em></dt>
<dd><p>A connection ID. </p></dd>
<dt><em>symIndex</em></dt>
<dd><p>A symbol index. This index is zero-based.
That is, the value of this parameter should be between zero and
the number of symbols -1 (where the number of symbols is determined
by calling the <code><a href="AppendixADeprecatedAPI.html#//apple_ref/c/func/CountSymbols">CountSymbols</a></code> function). </p></dd>
<dt><em>symName</em></dt>
<dd><p>On return, the name of the indicated symbol. </p></dd>
<dt><em>symAddr</em></dt>
<dd><p>On return, a pointer to the address of the
indicated symbol. </p></dd>
<dt><em>symClass</em></dt>
<dd><p>On return, a pointer to the class of the indicated
symbol. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/constant_group/Load_Flag_Symbol_Class_and_Fragment_Locator_Constants">“Load Flag, Symbol Class, and Fragment Locator Constants.”</a></span> </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>If <code>GetIndSymbol</code> executes
successfully, it returns the symbol&#8217;s name, starting address,
and class in the <code>symName</code>, <code>symAddr</code>,
and <code>symClass</code> parameters,
respectively. A fragment&#8217;s exported symbols are retrieved in no
predetermined order. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib 1.0 and later when Code Fragment Manager
1.0 or later is present.</li><li class="availability">Available in Mac OS X 10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>
<h5 class="tight">Declared In</h5><code>CodeFragments.h</code><a name="//apple_ref/c/func/GetMemFragment" title="GetMemFragment"></a><a name="//apple_ref/doc/c_ref/GetMemFragment" title="GetMemFragment"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F01870" title="GetMemFragment"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_12"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_12"></a><h3 class="tight">GetMemFragment</h3>
<p class="spaceabove">Prepares a memory-based fragment for subsequent execution.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr GetMemFragment (
   void *memAddr,
   UInt32 length,
   <!--a-->ConstStr63Param<!--/a--> fragName,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragLoadOptions">CFragLoadOptions</a> options,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragConnectionID">CFragConnectionID</a> *connID,
   <!--a-->Ptr<!--/a--> *mainAddr,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a> errMessage
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>memAddr</em></dt>
<dd><p>The address of the fragment. </p></dd>
<dt><em>length</em></dt>
<dd><p>The size, in bytes, of the fragment. </p></dd>
<dt><em>fragName</em></dt>
<dd><p>The name of the fragment. (This information
is used primarily to allow you to identify the fragment during debugging. </p></dd>
<dt><em>loadFlags</em></dt>
<dd><p>A flag that specifies the operation to perform
on the fragment. The Code Fragment Manager recognizes the constants
described in <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/constant_group/Load_Flag_Symbol_Class_and_Fragment_Locator_Constants">“Load Flag, Symbol Class, and Fragment Locator Constants.”</a></span> </p></dd>
<dt><em>connID</em></dt>
<dd><p>On return, a pointer to the connection ID
that identifies the connection to the fragment. You can pass this
ID to other Code Fragment Manager functions (for example, <code>CloseConnection</code>). </p></dd>
<dt><em>mainAddr</em></dt>
<dd><p>On return, a pointer to the main address of
the fragment. The value returned is specific to the fragment itself. </p></dd>
<dt><em>errMessage</em></dt>
<dd><p>On return, the name of the fragment that could
not successfully be loaded. This parameter is meaningful only if
the call to <code>GetMemFragment</code> fails. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The <code>GetMemFragment</code> is
most useful for handling code that is contained in a resource. You can
read the resource data into memory using normal Resource Manager
functions (for example, <code>Get1Resource</code>)
and then call <code>GetMemFragment</code> to
complete the processing required to prepare it for use (for example,
to resolve any imports and execute the fragment&#8217;s initialization
function).</p>
<p>You must lock the resource-based fragment into memory (for
example, by calling <code>HLock</code>) before
calling <code>GetMemFragment</code>.
You must not unlock the memory until you have closed the connection
to the fragment (by calling <code>CloseConnection</code>).</p>
<p>Loading involves finding the specified fragment, reading it
into memory (if it is not already in memory), and preparing it for
execution. The Code Fragment Manager attempts to resolve all symbols
imported by the fragment; to do so may involve loading import libraries.</p>
<p>If the fragment loading fails, the Code Fragment Manager returns
an error code. Note, however, that the error encountered is not
always in the fragment you asked to load. Rather, the error might
have occurred while attempting to load an import library that the fragment
you want to load depends on. For this reason, the Code Fragment
Manager also returns, in the <code>errMessage</code> parameter,
the name of the fragment that caused the load to fail. Although
fragment names are restricted to 63 characters, the <code>errMessage</code> parameter is
declared as type <code>Str255</code>;
doing this allows future versions of the Code Fragment Manager to
return a more informative message in the <code>errMessage</code> parameter. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib 1.0 and later when Code Fragment Manager
1.0 or later is present.</li><li class="availability">Available in Mac OS X 10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>
<h5 class="tight">Declared In</h5><code>CodeFragments.h</code><a name="//apple_ref/c/func/GetSharedLibrary" title="GetSharedLibrary"></a><a name="//apple_ref/doc/c_ref/GetSharedLibrary" title="GetSharedLibrary"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-F02004" title="GetSharedLibrary"></a>
<a name="//apple_ref/doc/uid/TP30000150-AppendixA-DontLinkElementID_13"></a><a name="//apple_ref/doc/uid/TP30000150-CH1g-DontLinkElementID_13"></a><h3 class="tight">GetSharedLibrary</h3>
<p class="spaceabove">Locates and possibly also loads an import library into
your application&#8217;s context.&#032;(<font color="red">Deprecated in Mac OS X v10.5.</font>)</p>
<p class="spaceabove"><pre>
OSErr GetSharedLibrary (
   <!--a-->ConstStr63Param<!--/a--> libName,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragArchitecture">CFragArchitecture</a> archType,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragLoadOptions">CFragLoadOptions</a> options,
   <a href="../Reference/reference.html#//apple_ref/doc/c_ref/CFragConnectionID">CFragConnectionID</a> *connID,
   <!--a-->Ptr<!--/a--> *mainAddr,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a> errMessage
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>libName</em></dt>
<dd><p>The name of an import library. </p></dd>
<dt><em>archType</em></dt>
<dd><p>The instruction set architecture of the import
library. For the PowerPC architecture, use the constant <code>kPowerPCArch</code>.
For the 680x0 architecture, use the constant <code>kMotorola68KArch</code>. </p></dd>
<dt><em>loadFlags</em></dt>
<dd><p>A flag that specifies the operation to perform
on the import library. The Code Fragment Manager recognizes the
constants described in <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/constant_group/Load_Flag_Symbol_Class_and_Fragment_Locator_Constants">“Load Flag, Symbol Class, and Fragment Locator Constants.”</a></span> </p></dd>
<dt><em>connID</em></dt>
<dd><p>On return, a pointer to the connection ID
that identifies the connection to the import library. You can pass
this ID to other Code Fragment Manager functions. </p></dd>
<dt><em>mainAddr</em></dt>
<dd><p>On return, a pointer to the main address of
the import library. The value returned is specific to the import
library itself and is not used by the Code Fragment Manager. </p></dd>
<dt><em>errMessage</em></dt>
<dd><p>On return, the name of the fragment that could
not successfully be loaded. This parameter is meaningful only if
the call to <code>GetSharedLibrary</code> fails. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result
code. See <span class="content_text"><a href="../Reference/reference.html#//apple_ref/doc/uid/TP30000150-CH5g-RCM0014">“Code Fragment Manager Result Codes.”</a></span></p>
<h5 class="tight">Discussion</h5>
<p>The <code>GetSharedLibrary</code> function
locates the import library named by the <code>libName</code> parameter
and possibly also loads that import library into your application&#8217;s
context. The actions of <code>GetSharedLibrary</code> depend
on the action flag you pass in the <code>loadFlags</code> parameter;
pass <code>kFindLib</code> to get
the connection ID of an existing connection to the specified fragment, <code>kLoadLib</code> to
load the specified fragment, or <code>kLoadNewCopy</code> to
load the fragment with a new copy of the fragment&#8217;s data section.</p>
<p>The <code>GetSharedLibrary</code> function
does not resolve any unresolved imports in your application. In
particular, you cannot use it to resolve any weak imports in your
code fragment.</p>
<p>Loading involves finding the specified fragment, reading it
into memory (if it is not already in memory), and preparing it for
execution. The Code Fragment Manager attempts to resolve all symbols
imported by the fragment; to do so may involve loading import libraries.</p>
<p>If the fragment loading fails, the Code Fragment Manager returns
an error code. Note, however, that the error encountered is not
always in the fragment you asked to load. Rather, the error might
have occurred while attempting to load an import library that the fragment
you want to load depends on. For this reason, the Code Fragment
Manager also returns, in the <code>errMessage</code> parameter,
the name of the fragment that caused the load to fail. Although
fragment names are restricted to 63 characters, the <code>errMessage</code> parameter is
declared as type <code>Str255</code>;
doing this allows future versions of the Code Fragment Manager to
return a more informative message in the <code>errMessage</code> parameter. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in CarbonLib 1.0 and later when Code Fragment Manager
1.0 or later is present.</li><li class="availability">Available in Mac OS X 10.0 and later.</li><li class="availability">Deprecated in Mac OS X v10.5.</li><li class="availability">Not available to 64-bit applications.</li></ul>
<h5 class="tight">Declared In</h5><code>CodeFragments.h</code>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Reference/reference.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../appendixa/appendixa.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-07-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Reference/Code_Fragment_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000150-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Reference/Code_Fragment_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000150-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Reference/Code_Fragment_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html%3Fid%3DTP30000150-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
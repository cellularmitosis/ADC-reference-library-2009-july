<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TB520: Desktop Manager Q&amp;As</title>                                       <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002797" title="Desktop Manager Q&As"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/Carbon/idxHumanInterfaceToolbox-date.html" target="_blank">Carbon > Human Interface Toolbox</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB520</div>
<div id="pageheadsub">Desktop Manager Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <A HREF = "../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Sep 01 1993]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Determining whether Desktop Manager calls are supported</h2><P>Date Written:   3/17/93</p><P>Last reviewed: 6/24/93</p><p>Is there a Gestalt selector for determining specifically whether desktopdatabase calls such as <code>PBDTGetAPPL</code> are present?</p><p>To determine whether the Desktop Manager calls are supported, use the followingPascal code, or modify it to C. If the <code>PBGetVolParms</code> call isn't supported, theDesktop Manager isn't there either, and the function returns a false condition.</p><p>It's important to note the warnings described in <i>Inside Macintosh</i> VolumeVI, regarding the use of Desktop Manager calls. The Desktop Manager calldescriptions are provided for informational use only. Applications that call<code>PBDTAddAPPL</code> to register new application creator types face compatibility riskswith future releases of the Finder.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>{------------------------------------------------------------------------------* The DoesVolSupportDBMgr function assumes that the target volume does not*   support the Desktop Manager.  If an error occurs, the function returns*  false.*  Input:  tgtVRefNum - VRefNum of the target volume to check*  Output: function returns true if the target volume supports the*          Desktop Manager, false otherwise.*------------------------------------------------------------------------------}FUNCTION DoesVolSupportDBMgr(tgtVRefNum : INTEGER) : Boolean;VAR  myHPB:    HParamBlockRec;  infoBuffer:  GetVolParmsInfoBuffer;BEGIN  DoesVolSupportDBMgr := FALSE;    { Assume that there is no desktop mgr support }  WITH myHPB DO  BEGIN    ioNamePtr := NIL;    ioVRefNum := tgtVRefNum;    ioBuffer := @infoBuffer;    ioReqCount := SizeOf(infoBuffer);  END;  IF PBHGetVolParms(@myHPB, FALSE) = noErr THEN                  { a paramerr could occur here, which would }                  { happen if the call is not supported }                  { if so, return the default response - FALSE }    DoesVolSupportDBMgr :=  BTST(infoBuffer.vMAttrib, bHasDesktopMgr);</pre>	</TD></TR></TABLE></CENTER><P><A HREF="#top">Back to top</A></p><h2>Macintosh Desktop Manager vs desktop file</h2><P>Date Written: 12/11/92</p><P>Last reviewed:  3/1/93</p><p>What are the advantages of the Desktop Manager's desktop database over theDesktop file? <i>Inside Macintosh</i> simply states that the desktop databasecan hold more icons than the Desktop file.</p><p>The advantages of the Desktop Manager over the Desktop file are:</p><ul type="disc">	<li>There's a documented interface for the Desktop Manager functions that developers can use.</li>	<li>The Desktop Manager can be used on shared volumes. (The Desktop file, since it's simply a resource file, can allow write access to only one user or process; it can't be shared. Under MultiFinder, that process is the Finder.)</li>	<li>The Desktop Manager functions can be implemented by an external file system in the most efficient way possible for that particular file system.</li>	<li>The Desktop Manager doesn't have the file size limitations imposed by the Resource Manager (2727 resources and approximately 16 MB of resource data).</li></ul><P><A HREF="#top">Back to top</A></p><h2>Removing icon data from Macintosh Desktop database or file</h2><P>Date Written:  12/11/92</p><P>Last reviewed:  3/1/93</p><p>In what circumstances does the Finder remove icons from the Desktop file? TheDesktop file my external file system creates for the Finder never seems toshrink, even when applications are removed from my remote volume.</p><p>With both the Desktop file and the Desktop Manager, icon data isn't removedfrom the database unless the Desktop database or file is rebuilt from scratch.That's because the Finder (and file system for that matter) has no way of beingnotified when the last file of a given creator and type is removed from avolume. If the Finder removes an application (a file with type APPL), then theFinder attempts to remove the application mapping information for that copy ofthe application from the Desktop database or file.</p><P><A HREF="#top">Back to top</A></p><h2>System 6 versus System 7 Desktop Manager</h2><P>Date Written:  8/30/91</p><P>Last reviewed:  8/1/92</p><p>If the Desktop Manager (the version that comes with AppleShare) is installedunder System 6.0.x, is it backward-compatible that of System 7.0?</p><p>The Desktop Manager in System 7 is completely backward-compatible with that ofSystem 6.0.x. The System 7 version has been highly optimized, and is morerobust than the original.</p><P><A HREF="#top">Back to top</A></p><h2>Determining if Macintosh Desktop Manager is present</h2><P>Date Written:  3/7/91</p><P>Last reviewed:  8/1/92</p><p>How does one determine if the Macintosh Desktop Manager is available? I knowunder System 7.0 it's always available, but how about under 6.0?</p><p>The best method for determining whether the Desktop Manager is available or notis to use <code>PBGetVolParms</code> on your boot volume and check bit 12 of the vMAttribfield. See page 25-37 of <i>Inside Macintosh</i> Volume VI for additionalinformation on PBGetVolParams.</p><br><br>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (44K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_520.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_520.html%3Fid%3DDTS10002797-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_520.html%3Fid%3DDTS10002797-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_520.html%3Fid%3DDTS10002797-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
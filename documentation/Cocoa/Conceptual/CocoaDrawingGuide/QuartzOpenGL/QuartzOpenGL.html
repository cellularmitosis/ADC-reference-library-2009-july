<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Drawing Guide: Incorporating Other Drawing Technologies</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Incorporating Other Drawing Technologies"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40003290-CH211" title="Incorporating Other Drawing Technologies"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../GraphicsImaging-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000450" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40003290-CH201-SW1">Cocoa Drawing Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../AdvancedDrawing/AdvancedDrawing.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory/RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40003290-CH211-BAADHIAF" title="Incorporating Other Drawing Technologies"></a><h1>Incorporating Other Drawing Technologies</h1><p>Cocoa was <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_779"></a>designed to integrate well with other technologies in Mac OS X. Many technologies are packaged as Objective-C frameworks, which makes including them in Cocoa easy. You are not limited to the use of Objective-C frameworks, though. Cocoa itself uses Quartz internally to implement most drawing routines. You can use Quartz and other C-based technologies, such as OpenGL and QuickTime, from your code with little extra effort. </p>
<p>The sections that follow provide information about how to incorporate some of the more important drawing technologies available in Mac OS X.</p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="QuartzOpenGL.html#//apple_ref/doc/uid/TP40003290-CH211-BAAJDFGJ">Using Quartz in Your Application</a>
				
			<br/>
			
        
			
			
				<a href="QuartzOpenGL.html#//apple_ref/doc/uid/TP40003290-CH211-BAAECJDJ">Using OpenGL in Your Application</a>
				
			<br/>
			
        
			
			
				<a href="QuartzOpenGL.html#//apple_ref/doc/uid/TP40003290-CH211-SW10">Using QuickTime in Your Application</a>
				
			<br/>
			
        
			
			
				<a href="QuartzOpenGL.html#//apple_ref/doc/uid/TP40003290-CH211-SW12">Using Quartz Composer Compositions</a>
				
			<br/>
			
        
			
			
				<a href="QuartzOpenGL.html#//apple_ref/doc/uid/TP40003290-CH211-SW2">Choosing the Right Imaging Technology</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40003290-CH211-BAAJDFGJ" title="Using Quartz in Your Application"></a><h2>Using Quartz in Your Application</h2>
<p>Everything you can draw using Cocoa can also be drawn using Quartz. The Cocoa drawing code itself uses Quartz primitives to render content. Cocoa simply adds an object-oriented interface and in some cases does more of the work for you. Cocoa does not provide classes for all Quartz behavior, however. In situations where a feature is not available in Cocoa, you may want to use Quartz directly. </p>
<p>For general information about Quartz features and how to use them, see <em><a href="../../../../GraphicsImaging/Conceptual/drawingwithquartz2d/index.html#//apple_ref/doc/uid/TP30001066" target="_top">Quartz 2D Programming Guide</a></em>. </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW4" title="Using Quartz Features"></a><h3>Using Quartz Features</h3>
<p>Because Quartz implements some features that Cocoa does not, there may be times when you need to use Quartz function calls from your Cocoa code. Because Cocoa uses Quartz for most drawing operations, mixing the two technologies is not an issue. </p>
<p>Some of the Quartz features that are not supported directly by Cocoa include the following: </p>
<ul class="spaceabove"><li class="li"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_780"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_781"></a>Layers</p></li>
<li class="li"><p>Gradients (also called <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_782"></a>shadings)</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_783"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_784"></a>Image data sources</p></li>
<li class="li"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_785"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_786"></a>Blend modes (Cocoa uses compositing modes instead)</p></li><li class="li"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_787"></a>Masking images</p></li><li class="li"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_788"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_789"></a>Transparency layers (for grouping content)</p></li><li class="li"><p>Arbitrary patterns (other than images)</p></li></ul>
<p>In each case, you are free to use Quartz functions to take advantage of these features. Some features can produce data types that you can then incorporate back into a Cocoa object. (For example, you can use an image data source to obtain a Quartz image (<code><a href="../../../../GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code>), which you can then use to create an <code>NSImage</code> object.) In some cases, however, you may need to perform the entire operation using Quartz functions.</p>
<p>For information on how to use Quartz features, see <em><a href="../../../../GraphicsImaging/Conceptual/drawingwithquartz2d/index.html#//apple_ref/doc/uid/TP30001066" target="_top">Quartz 2D Programming Guide</a></em>. </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW5" title="Graphics Type Conversions"></a><h3>Graphics Type Conversions</h3>
<p>When going back and forth between Cocoa and <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_790"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_791"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_792"></a>Quartz code, some conversion of data types may be necessary. <span class="content_text">Table 9-1</span> shows the Cocoa equivalents of some basic Quartz types. </p><a name="//apple_ref/doc/uid/TP40003290-CH211-BAAIGAFG" title="Table 9-1Simple data-type conversions"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 9-1&nbsp;&nbsp;</strong>Simple data-type conversions</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Cocoa type</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Quartz type</p></th>
</tr>


<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_793"></a><code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSRect" target="_top">NSRect</a></code></p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_794"></a><code><a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/c/tdef/CGRect" target="_top">CGRect</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_795"></a><code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSPoint" target="_top">NSPoint</a></code></p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_796"></a><code><a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/c/tdef/CGPoint" target="_top">CGPoint</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_797"></a><code><a href="../../../Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/c/tdef/NSSize" target="_top">NSSize</a></code></p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_798"></a><code><a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/c/tdef/CGSize" target="_top">CGSize</a></code></p></td>
</tr>

</table></div>
<p>Although in each case the structure layout is the same, you cannot pass the Quartz data type directly to a method expecting the Cocoa type. To convert, you must cast from one type to another, as shown in the following example: </p>
<div class="codesample"><table><tr><td scope="row"><pre>NSRect cocoaRect = *(NSRect*)&amp;myCGRect;<span></span></pre></td></tr></table></div>
<p><span class="content_text">Table 9-2</span> lists the Cocoa classes that approximate the behavior of specific Quartz data types. In some cases, the Cocoa class wraps an instance of its Quartz counterpart, but that is not always true. In the case of shadows, Quartz provides no direct data type for managing the shadow parameters; you must set shadows attributes in Quartz using several different functions. In the case of layers, there are no Cocoa equivalents. </p><a name="//apple_ref/doc/uid/TP40003290-CH211-BAAFHHEJ" title="Table 9-2Equivalent Cocoa and Quartz data types"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 9-2&nbsp;&nbsp;</strong>Equivalent Cocoa and Quartz data types</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Cocoa type</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Quartz type</p></th>
</tr>

<tr><td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_799"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSGraphicsContext_Class/Reference/Reference.html#//apple_ref/occ/cl/NSGraphicsContext" target="_top">NSGraphicsContext</a></code></p></td><td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_800"></a><code><a href="../../../../GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/tdef/CGContextRef" target="_top">CGContextRef</a></code></p></td></tr><tr><td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_801"></a><code><a href="../../../Reference/Foundation/Classes/NSAffineTransform_Class/Reference/Reference.html#//apple_ref/occ/cl/NSAffineTransform" target="_top">NSAffineTransform</a></code></p></td><td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_802"></a><code><a href="../../../../GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/tdef/CGAffineTransform" target="_top">CGAffineTransform</a></code></p></td></tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_803"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSColor_Class/Reference/Reference.html#//apple_ref/occ/cl/NSColor" target="_top">NSColor</a></code> </p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_804"></a><code><a href="../../../../GraphicsImaging/Reference/CGColor/Reference/reference.html#//apple_ref/c/tdef/CGColorRef" target="_top">CGColorRef</a></code>, <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_805"></a><code><a href="../../../../GraphicsImaging/Reference/CGPattern/Reference/reference.html#//apple_ref/c/tdef/CGPatternRef" target="_top">CGPatternRef</a></code> </p></td>
</tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_806"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSFont_Class/Reference/Reference.html#//apple_ref/occ/cl/NSFont" target="_top">NSFont</a></code> </p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_807"></a><code><a href="../../../../GraphicsImaging/Reference/CGFont/Reference/reference.html#//apple_ref/c/tdef/CGFontRef" target="_top">CGFontRef</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_808"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSFont_Class/Reference/Reference.html#//apple_ref/c/tdef/NSGlyph" target="_top">NSGlyph</a></code></p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_809"></a><code><a href="../../../../GraphicsImaging/Reference/CGFont/Reference/reference.html#//apple_ref/c/tdef/CGGlyph" target="_top">CGGlyph</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_810"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSImage_Class/Reference/Reference.html#//apple_ref/occ/cl/NSImage" target="_top">NSImage</a></code> </p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_811"></a><code><a href="../../../../GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_812"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSBezierPath_Class/Reference/Reference.html#//apple_ref/occ/cl/NSBezierPath" target="_top">NSBezierPath</a></code> </p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_813"></a><code><a href="../../../../GraphicsImaging/Reference/CGPath/Reference/reference.html#//apple_ref/c/tdef/CGPathRef" target="_top">CGPathRef</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_814"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSShadow_Class/Reference/Reference.html#//apple_ref/occ/cl/NSShadow" target="_top">NSShadow</a></code></p></td>
<td ><p><code><a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/c/tdef/CGSize" target="_top">CGSize</a></code>, <code><a href="../../../../GraphicsImaging/Reference/CGColor/Reference/reference.html#//apple_ref/c/tdef/CGColorRef" target="_top">CGColorRef</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p><code><a href="../../../Reference/NSGradient_class/Reference/Reference.html#//apple_ref/occ/cl/NSGradient" target="_top">NSGradient</a></code> (Mac OS X v10.5 and later)</p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_815"></a><code><a href="../../../../GraphicsImaging/Reference/CGShading/Reference/reference.html#//apple_ref/c/tdef/CGShadingRef" target="_top">CGShadingRef</a></code></p></td>
</tr>
<tr>
<td  scope="row"><p>No equivalent</p></td>
<td ><p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_816"></a><code><a href="../../../../GraphicsImaging/Reference/CGLayer/Reference/reference.html#//apple_ref/c/tdef/CGLayerRef" target="_top">CGLayerRef</a></code></p></td>
</tr>

</table></div>
<p>Because Cocoa types often wrap equivalent Quartz types, you should look at the Cocoa reference documentation for information about how to get equivalent Quartz objects, if any. In many cases, Cocoa classes do not offer direct access to their Quartz equivalent and you may need to create the Quartz type based on information in the Cocoa object, such as in the following cases:</p><ul class="spaceabove"><li class="li"><p>To create a <code>CGPathRef</code> object from an <code>NSBezierPath</code> object, you must redraw the path using Quartz function calls. Use the <code><a href="../../../Reference/ApplicationKit/Classes/NSBezierPath_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBezierPath/elementAtIndex:associatedPoints:" target="_top">elementAtIndex:associatedPoints:</a></code> method of <code>NSBezierPath</code> to retrieve the path’s point information. </p></li><li class="li"><p>To convert back and forth between <code>CGColorRef</code> and <code>NSColor</code> objects, get the color component values from one object and use those values to create the other object. When creating colors, you may also need to specify the color space for that color. For the most part, Quartz and Cocoa support the same color spaces. If a color uses a custom color space, you can use the available ICC profile data to create the appropriate color space object. </p></li><li class="li"><p>To create an <code>NSImage</code> object from a Quartz image, you need to create the image object indirectly. For information on how to do this, see <span class="content_text"><a href="../Images/Images.html#//apple_ref/doc/uid/TP40003290-CH208-BCIJIGIG">“Using a Quartz Image to Create an NSImage.”</a></span> </p></li><li class="li"><p>To create Quartz shadows, you can use the methods of <code>NSShadow</code> to retrieve the color, offset, and blur radius values prior to calling <code><a href="../../../../GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetShadow" target="_top">CGContextSetShadow</a></code> or <code><a href="../../../../GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextSetShadowWithColor" target="_top">CGContextSetShadowWithColor</a></code>. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW6" title="Getting a Quartz Graphics Context"></a><h3>Getting a Quartz Graphics Context</h3>
<p>Before using any Quartz features, you need to obtain a Quartz <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_817"></a>graphics context (<code>CGContextRef</code>) for drawing. For view-based drawing, you can get the context by sending a <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_818"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSGraphicsContext_Class/Reference/Reference.html#//apple_ref/occ/instm/NSGraphicsContext/graphicsPort" target="_top">graphicsPort</a></code> message to the current Cocoa graphics context (<code>NSGraphicsContext</code>). This method returns a pointer that you can cast to a <code>CGContextRef</code> data type and use in subsequent Quartz function calls. </p><a name="//apple_ref/doc/uid/TP40003290-CH211-SW7" title="Creating a Cocoa Graphics Context Using Quartz"></a><h3>Creating a Cocoa Graphics Context Using Quartz</h3><p>In Mac OS X v10.4 and later, if you have an existing <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_819"></a>Quartz graphics context, you can create a Cocoa graphics context object using the <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_820"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSGraphicsContext_Class/Reference/Reference.html#//apple_ref/occ/clm/NSGraphicsContext/graphicsContextWithGraphicsPort:flipped:" target="_top">graphicsContextWithGraphicsPort:flipped:</a></code> class method of <code>NSGraphicsContext</code>. You then use the <code><a href="../../../Reference/ApplicationKit/Classes/NSGraphicsContext_Class/Reference/Reference.html#//apple_ref/occ/clm/NSGraphicsContext/setCurrentContext:" target="_top">setCurrentContext:</a></code> class method to make that context the current context.</p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW8" title="Modifying the Graphics State"></a><h3>Modifying the Graphics State</h3>
<p>When mixing calls to <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_821"></a>Quartz and Cocoa, remember that many Cocoa classes maintain a local copy of some graphics attributes normally associated with the Quartz graphics context. When such a class is ready to draw its content, it modifies the graphics state to match its local settings, draws its content, and restores the graphics state to its original settings. If you use Quartz to change an attribute that is maintained locally by a Cocoa class, your changes may not be used. </p>
<p>If you make changes to the graphics state using the <code>NSGraphicsContext</code> class, your changes are immediately conveyed to the Quartz graphics context, and vice versa. If you are not using <code>NSGraphicsContext</code> to set an attribute, you should assume that the attribute is local to the object. For example, the <code>NSBezierPath</code> class prefers local copies of graphics attributes over the default (or global) attributes stored in the current context.</p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-BAAECJDJ" title="Using OpenGL in Your Application"></a><h2>Using OpenGL in Your Application</h2>
<p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_822"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_823"></a>OpenGL is an open, cross-platform, three-dimensional (3D) graphics standard with broad industry support. OpenGL eases the task of writing real-time 2D or 3D graphics applications by providing a mature, well-documented graphics processing pipeline that supports the abstraction of current and future hardware accelerators.</p>
<p>The sections that follow provide a glimpse into the techniques used to incorporate OpenGL drawing calls into your Cocoa application. For more on OpenGL support in Mac OS X, and for detailed examples of how to integrate OpenGL into your Cocoa application, see <em><a href="../../../../GraphicsImaging/Conceptual/OpenGL-MacProgGuide/index.html#//apple_ref/doc/uid/TP40001987" target="_top">OpenGL Programming Guide for Mac OS X</a></em>. For general information about OpenGL, see <span class="content_text"><a href="../../../../../referencelibrary/GraphicsImaging/idxOpenGL-date.html#//apple_ref/doc/uid/TP30000943-TP30000424-TP30000549" target="_top">Reference Library > Graphics &amp; Imaging > OpenGL</a></span>.  </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW9" title="Using NSOpenGLView"></a><h3>Using NSOpenGLView</h3>
<p>One way to do OpenGL drawing is to add an <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_824"></a>OpenGL view (an instance of <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_825"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLView_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLView" target="_top">NSOpenGLView</a></code>) to your window. An OpenGL view behaves like any other view but also stores a pointer to an OpenGL graphics context object (an instance of <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLContext_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLContext" target="_top">NSOpenGLContext</a></code>). Storing the graphics context in the view eliminates the need for your code to recreate the context during each drawing cycle, which can be expensive. </p>
<p>To use an OpenGL view in your program, you create a subclass of <code>NSOpenGLView</code> and add that view to your window, either programmatically or using Interface Builder. When creating an OpenGL view programmatically, you specify the pixel format object you want to associate with the view. A pixel format object (an instance of <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLPixelFormat" target="_top">NSOpenGLPixelFormat</a></code>) specifies the buffers and other rendering attributes of the OpenGL graphics context. For information on the meaning of different pixel format attributes, see <em><a href="../../../../GraphicsImaging/Conceptual/OpenGL-MacProgGuide/index.html#//apple_ref/doc/uid/TP40001987" target="_top">OpenGL Programming Guide for Mac OS X</a></em>. </p>
<p>If you use Interface Builder to add your view to a window, you specify the pixel format information using the inspector for your view. Interface Builder lets you specify some pixel attributes, but not all. To support other attributes, you must replace the view’s pixel format object at runtime using the <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSOpenGLView/setPixelFormat:" target="_top">setPixelFormat:</a></code> method.</p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_18" title="Important:"></a><p><strong>Important:</strong>&nbsp;

If you set the pixel format attributes programmatically, you must do so before getting the OpenGL graphics context using the <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSOpenGLView/openGLContext" target="_top">openGLContext</a></code> method. The graphics context is created with the current pixel format information and is not recreated if that information changes. Alternatively, you can change the OpenGL graphics context at any time using the <code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSOpenGLView/setOpenGLContext:" target="_top">setOpenGLContext:</a></code> method.</p><p></p></div>
<p>As with other views, you use your OpenGL view’s <code>drawRect:</code> method to draw the content of your view. When your <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_826"></a><code>drawRect:</code> method is invoked, the environment is automatically configured for drawing using the OpenGL graphics context associated with your view. </p>
<p>Unlike with other graphics contexts, you do not need to restore the previous OpenGL graphics context when you are done drawing. OpenGL does not maintain a stack of graphics contexts that need to be popped as they are no longer needed. Instead, it simply uses the most recent context that was made current. </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-BAAIFCFA" title="Creating an OpenGL Graphics Context"></a><h3>Creating an OpenGL Graphics Context</h3>
<p>Before creating an <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_827"></a><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_828"></a>OpenGL <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_829"></a>graphics context object, you first create a <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_830"></a>pixel format object (<a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_831"></a><code><a href="../../../Reference/ApplicationKit/Classes/NSOpenGLPixelFormat_Class/Reference/Reference.html#//apple_ref/occ/cl/NSOpenGLPixelFormat" target="_top">NSOpenGLPixelFormat</a></code>). The attributes you specify when creating your pixel format object determine the rendering behavior of the graphics context. Once you have a valid pixel format object, you can create and initialize your OpenGL graphics context object. </p>
<p><span class="content_text">Listing 9-1</span> attempts to create an OpenGL graphics context that supports full-screen, double-buffered, 32-bit drawing. If the desired <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_832"></a>renderer is available, it returns the context; otherwise, it returns <code>nil</code>. </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW1" title="Listing 9-1Creating an OpenGL graphics context"></a><p class="codesample"><strong>Listing 9-1&nbsp;&nbsp;</strong>Creating an OpenGL graphics context</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSOpenGLContext*)getMyContext<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    // Specify the pixel-format attributes.<span></span></pre></td></tr><tr><td scope="row"><pre>    NSOpenGLPixelFormatAttribute attrs[] =<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSOpenGLPFAFullScreen,<span></span></pre></td></tr><tr><td scope="row"><pre>        NSOpenGLPFADoubleBuffer,<span></span></pre></td></tr><tr><td scope="row"><pre>        NSOpenGLPFADepthSize, 32,<span></span></pre></td></tr><tr><td scope="row"><pre>        0<span></span></pre></td></tr><tr><td scope="row"><pre>    };<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Create the pixel-format object.<span></span></pre></td></tr><tr><td scope="row"><pre>    NSOpenGLContext* myContext = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSOpenGLPixelFormat* pixFmt = [[NSOpenGLPixelFormat alloc]<span></span></pre></td></tr><tr><td scope="row"><pre>                                     initWithAttributes:attrs];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // If the pixel format is valid, create the OpenGL context.<span></span></pre></td></tr><tr><td scope="row"><pre>    if (pixFmt != nil)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        myContext = [[NSOpenGLContext alloc] initWithFormat:pixFmt<span></span></pre></td></tr><tr><td scope="row"><pre>                                 shareContext:NO];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [pixFmt release];<span></span></pre></td></tr><tr><td scope="row"><pre>    return myContext;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>Because the creation of OpenGL graphics contexts depends on the currently available renderers, your code should always verify that the desired objects were created before trying to use them. If creating an object fails, you can always try to create it again using a different set of attributes. </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW10" title="Using QuickTime in Your Application"></a><h2>Using QuickTime in Your Application</h2>
<p><a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_833"></a>QuickTime is Apple's cross-platform multimedia technology designed to help you create and deliver video, sound, animation, graphics, text, interactivity, and music. QuickTime supports dozens of file and compression formats for images, video, and audio, including ISO-compliant <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_834"></a>MPEG-4 video and <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_835"></a>AAC audio. </p>
<p>You can incorporate QuickTime features into your Cocoa applications in one of two ways. The easiest way is through the QuickTime Kit, which is a full-featured Objective-C based framework for the QuickTime interfaces. If you are already familiar with the C-based QuickTime interfaces, you can use those instead. </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-BAAGIGGG" title="Using the QuickTime Kit"></a><h3>Using the QuickTime Kit</h3>
<p>The <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_836"></a>QuickTime Kit framework (<code>QTKit.framework</code>) works with QuickTime movies in Cocoa applications in Mac OS X. The QuickTime Kit framework was introduced in Mac OS X v10.4 and was designed as an alternative to and eventual replacement for the existing <code>NSMovie</code> and <code>NSMovieView</code> classes in Cocoa. This new framework provides more extensive coverage of QuickTime functions and data types than had been offered by the Application Kit classes. More importantly, the framework does not require Cocoa programmers to be conversant with Carbon data types such as handles, aliases, file-system specifications, and so on.</p>
<p>The QuickTime Kit framework is available primarily in Mac OS X v10.4 and later, but it is also supported in Mac OS X v10.3 with QuickTime 7 or later installed. For information on how to use the QuickTime Kit, see <em><a href="../../../../QuickTime/Conceptual/QTKitProgrammingGuide/index.html#//apple_ref/doc/uid/TP40001245" target="_top">QuickTime Kit Programming Guide</a></em>. For a reference of the classes in the QuickTime Kit, see <em><a href="../../../../QuickTime/Reference/QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QTKit Framework Reference</a></em>. </p>
<a name="//apple_ref/doc/uid/TP40003290-CH211-SW11" title="Using QuickTime C-Based Functions"></a><h3>Using QuickTime C-Based Functions</h3>
<p>Long before the introduction of the QuickTime Kit framework, QuickTime programs were written using a C-based API. The QuickTime API encompasses thousands of functions and gives you the maximum flexibility in managing QuickTime content. You can use this API in your Cocoa applications like you would any other framework. </p>
<p>For an introduction to QuickTime, see <em><a href="../../../../QuickTime/RM/Fundamentals/QTOverview/index.html#//apple_ref/doc/uid/TP30000992" target="_top">QuickTime Overview</a></em>. For the complete QuickTime reference, see <em><a href="../../../../QuickTime/Reference/QT_Framework_Ref/index.html#//apple_ref/doc/uid/TP40004374" target="_top">QuickTime Framework Reference</a></em>. </p><a name="//apple_ref/doc/uid/TP40003290-CH211-SW12" title="Using Quartz Composer Compositions"></a><h2>Using Quartz Composer Compositions</h2><p>If your software runs in Mac OS X v10.4 and later, you can use <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_837"></a>Quartz Composer to render complex graphical content. Quartz Composer uses the latest Mac OS X graphics technologies to create advanced graphical images and animations quickly and easily. You use the Quartz Composer application to create composition files graphically and then load those compositions into your Cocoa application and run them. Changing the behavior of your Cocoa application is then as simple as updating the composition file. </p><p>Quartz Composer is especially suited for applications that want to perform complex image manipulations. Through it, you gain easy access to features of Quartz 2D, Core Image, Core Video, OpenGL, QuickTime, MIDI System Services, and <a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_838"></a>Real Simple Syndication (<a name="//apple_ref/doc/uid/TP40003290-CH211-DontLinkElementID_839"></a>RSS). Your application can render compositions for display or provide the user with controls for manipulating the composition parameters. </p><p>For a detailed example showing you how to run a composition from your Cocoa application, see the chapter “Using QCRenderer to Play a Composition” in <em><a href="../../../../GraphicsImaging/Conceptual/QuartzComposer/index.html#//apple_ref/doc/uid/TP40001357" target="_top">Quartz Composer Programming Guide</a></em>. </p><a name="//apple_ref/doc/uid/TP40003290-CH211-SW2" title="Choosing the Right Imaging Technology"></a><h2>Choosing the Right Imaging Technology</h2><p>Mac OS X includes several different technologies for manipulating images. Although the <code>NSImage</code> class provide a robust feature set that is sufficient for many developer’s uses, there may be specific times when you need to use other imaging technologies. <span class="content_text">Table 9-3</span> lists some of the other imaging technologies available and when you might use each one of them. </p><a name="//apple_ref/doc/uid/TP40003290-CH211-SW3" title="Table 9-3Imaging technologies"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 9-3&nbsp;&nbsp;</strong>Imaging technologies</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Image technology</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p>Quartz Images (<code><a href="../../../../GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code>)</p></td><td ><p>Quartz images are immutable data types that you use to manipulate bitmap data in Quartz. Although <code>NSImage</code> is easier to use and provides automatic support for resolution independence, you might need to create Quartz images if another API you are using expects them. You can create a Quartz image by drawing into a <code>NSBitmapImageRep</code> object or Quartz bitmap context and then extracting a <code>CGImageRef</code> from there. Quartz images are part of the Application Services framework.</p></td></tr><tr><td  scope="row"><p>Quartz Layers (<code><a href="../../../../GraphicsImaging/Reference/CGLayer/Reference/reference.html#//apple_ref/c/tdef/CGLayerRef" target="_top">CGLayerRef</a></code>)</p></td><td ><p>Quartz layers are a mutable alternative to Quartz images. You can draw to layers much like you would draw to an <code>NSImage</code> object. You do so by creating a context, locking focus on that context, drawing, and retrieving an image object from the results. Because they are implemented in video memory, layers can be very efficient to use, especially if you need to draw the same image repeatedly. Quartz layers are available in Mac OS X v10.4 and later as part of the Application Services framework.</p></td></tr><tr><td  scope="row"><p>Core Image (<code><a href="../../../../GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIImage_Class/Reference/Reference.html#//apple_ref/occ/cl/CIImage" target="_top">CIImage</a></code>)</p></td><td ><p>The Core Image framework is geared toward processing image data. You would use this technology to apply visual effects or filters to existing bitmap images. Because it is explicitly designed for manipulating bitmap images, you must convert your images to a <code>CIImage</code> object before you do any processing. Core Image is available in Mac OS X v10.4 and later as part of the Quartz Core framework. </p></td></tr><tr><td  scope="row"><p>Image I/O</p></td><td ><p>The Image I/O framework is geared towards developers who need more direct control over reading and writing image data. You might use this framework to convert images from one format to another or you might use it to add metadata to an image created by your program. The features of Image I/O are available in Mac OS X v10.4 and later as part of the Application Services framework.  </p></td></tr><tr><td  scope="row"><p>Core Animation</p></td><td ><p>While not explicitly an imaging technology, the Core Animation framework is a smart and efficient way to render images and other data inside a view. The framework provides a cached backing store that makes it possible to do animations with a minimal amount of redrawing. You might use this technology in place of <code>NSImage</code> or other imaging technologies to create animation effects or other rapidly changing graphics. It offers respectable animation performance without requiring you to use low-level APIs such as OpenGL. The Core Animation framework is available in Mac OS X v10.5 and later as part of the Quartz Core framework. </p></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../AdvancedDrawing/AdvancedDrawing.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory/RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/CocoaDrawingGuide/QuartzOpenGL/QuartzOpenGL.html%3Fid%3DTP40003290-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/CocoaDrawingGuide/QuartzOpenGL/QuartzOpenGL.html%3Fid%3DTP40003290-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/CocoaDrawingGuide/QuartzOpenGL/QuartzOpenGL.html%3Fid%3DTP40003290-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
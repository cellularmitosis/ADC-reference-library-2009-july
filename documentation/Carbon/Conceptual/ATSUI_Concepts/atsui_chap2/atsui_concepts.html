<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>ATSUI Programming Guide: Typography Concepts</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Typography Concepts"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000028" title="Typography Concepts"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../TextFonts-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000461" target="_top">Text &amp; Fonts</a> &gt; <a href="../atsui_chap1/atsui_intro.html#//apple_ref/doc/uid/TP30000027-TP1">ATSUI Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../atsui_chap1/atsui_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../atsui_chap3/atsui_concepts2.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000028-TP1" title="Typography Concepts"></a><h1>Typography Concepts</h1><p>This chapter introduces and defines important typographic terms related to <strong>text</strong>—traditionally defined as the written representation of spoken language. The terms and concepts discussed in this chapter are used throughout the rest of the book and in <em>ATSUI Reference</em>. If you plan to use ATSUI, or any API that uses ATSUI (for example, MLTE), you should read this chapter.</p><p>This chapter starts by outlining the different components that make up text. It  then describes how text is </p><ul class="ul"><li class="li"><p>measured and stored</p></li><li class="li"><p>arranged on a display device</p></li><li class="li"><p>adjusted in various ways to affect the text direction, kerning, alignment (or flushness), justification, and line breaks</p></li><li class="li"><p>drawn, highlighted, and hit-tested</p></li></ul>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF135">Characters, Glyphs, and Fonts</a>
				
			<br/>
			
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF189">Character Encoding and Glyph Codes</a>
				
			<br/>
			
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF190">Unicode</a>
				
			<br/>
			
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF137">Text Storage</a>
				
			<br/>
			
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF138">Text Measurements</a>
				
			<br/>
			
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF139">Typestyles</a>
				
			<br/>
			
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF142">Text Layout</a>
				
			<br/>
			
        
			
			
				<a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF152">Caret Handling</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000028-TPXREF135" title="Characters, Glyphs, and Fonts"></a><h2>Characters, Glyphs, and Fonts</h2><p>A writing system’s alphabet, numbers, punctuation, and other writing marks consist of characters. A <strong>character</strong> is a symbolic representation of an element of a writing system; it is the concept of, for example, “lowercase a” or “the number 3.” It is an abstract object, defined by custom in its own language.</p><p>As soon as you write a character, however, it is no longer abstract but concrete. The exact shape by which a character is represented is called a <strong>glyph</strong>. The “characters” that ATSUI places on the screen are really glyphs.</p><p>Glyphs<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_445"></a> and characters<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_446"></a> do not necessarily have a one-to-one correspondence. For example, a single character<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_447"></a> may be represented by one or more glyphs (the character “lowercase i” could be represented by the combination of a “dotless-i” glyph and a “dot” glyph), and a single glyph can represent two or more characters (the two characters “f” and “i” can be represented by a single glyph as shown in <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-TPXREF265">Figure B-10</a></span>).</p><p>Context—where the glyph appears in a line of text—also affects which glyph represents a character. <span class="content_text">Figure 1-1</span> shows examples of such contextual forms<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_448"></a> in a Roman font. Different forms of a glyph are used according to whether the glyph stands alone, occurs at the beginning of a word, occurs at the end of a word, or forms part of a new glyph, as in a ligature. For example, both forms of “X” can be used at the beginning of a word, but the form on the right side of the figure can be used only at the start of a word, whereas the form on the left side can be used alone or at the start of a word. Similarly, the “n” on the left side of the figure can be used alone or at the end of a word whereas the “n” on the right side can be used only to end a word. The last line in <span class="content_text">Figure 1-1</span> illustrates how “s” and “t” can be drawn separately or combined to form a ligature. </p><br/><div><a name="//apple_ref/doc/uid/TP30000028-CJBJIJHH" title="Figure 1-1Contextual forms in a Roman font"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Contextual forms in a Roman font</p><img src = "../art/contextualforms.gif" alt = "Contextual forms in a Roman font" width="156" height="215"></div><br/><p>A <strong>font</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_449"></a> is a collection of glyphs, all of similar design, that constitute one way to represent the characters of one or more languages. Fonts usually have some element of design consistency, such as the shape of the ovals (known as the <strong>counter</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_450"></a>), the design of the stem, stroke thickness, or the use of <strong>serifs</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_451"></a>, which are the fine lines stemming from the upper and lower ends of the main strokes of a letter. <span class="content_text">Figure 1-2</span> shows some of the elements of<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_452"></a> glyphs that indicate they are members of the same family.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF166" title="Figure 1-2Elements that distinguish glyphs of a Roman font "></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>Elements that distinguish glyphs of a Roman font </p><img src = "../art/distinguishglyphs.gif" alt = "Elements that distinguish glyphs of a Roman font" width="447" height="117"></div><br/><p>A <strong>font family</strong> is a group of fonts that share certain characteristics and have a common family name. Each font family has its own name, such as “New York,” “Geneva,” or “Symbol.” In contrast, a font always has a full name—for example, Geneva Regular or Times Bold. The full name determines which family the font belongs to and what typestyle it represents. (See <span class="content_text"><a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF139">“Typestyles”</a></span> for more information.) Several fonts may have the same family names (such as Geneva, Geneva Bold, and so on) but are stored separately—these fonts are still part of the same font family. The font Geneva Italic, for example, shares many characteristics with Geneva Regular, but all of the glyphs slant at a certain angle. Though different, these fonts are part of the same font family. </p><a name="//apple_ref/doc/uid/TP30000028-TPXREF189" title="Character Encoding and Glyph Codes"></a><h2>Character Encoding and Glyph Codes</h2><p>A computer represents characters in numeric form. A <strong>character encoding</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_453"></a> is a mapping that assigns numeric values (character codes) to characters. The mapping varies depending on the character set, which in turn may depend on the language as well as other factors. </p><p>Fonts associate each glyph with a double-byte code called its <strong>glyph code</strong> (which is not the same as a character code)<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_454"></a>. Different fonts may have different glyph codes for the same glyphs, and a single font may have several glyph codes associated with a particular character because several glyphs may represent that character. Because the font and general textual context determine which glyph and which glyph codes represent characters, ATSUI transparently handles the details of mapping character codes to the correct glyph codes. Your application does not have to handle the details of obtaining glyphs from a font.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;Your application usually deals with character codes, since those correspond most closely with what the user types. However, ATSUI permits you to deal with glyph codes, if that is more appropriate to your application’s functionality and needs.</p></div><p>Different languages may have different requirements in terms of which glyphs they use from a font. A font contains some number of character encodings. Each encoding is an internal conversion table for interpreting a specific character set—that is, a way to map a character code to a glyph code for that font.</p><p>The reason a font can have multiple encodings is that the requirements for each writing system that the font supports may be different. A <strong>writing system</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_455"></a> is a method of depicting words visually. It consists of a character set and a set of rules for displaying, ordering, and formatting the glyphs associated with those characters. Writing systems can differ in line direction, the direction in which their glyphs are read, the size of the character set used to represent the script, and contextual variation (that is, whether a glyph changes according to its position relative to other glyphs). Writing systems have specific requirements for text display, text editing, character set, and fonts. A writing system can serve one or several languages. For example, the Roman writing system serves many languages, including French, Italian, and Spanish.</p><a name="//apple_ref/doc/uid/TP30000028-TPXREF190" title="Unicode"></a><h2>Unicode</h2><p>Most character sets and character encoding schemes developed in the past are limited in that they supported just one language or a small set of languages. Multilingual software has traditionally had to implement methods for supporting and identifying multiple character encodings. To interpret a character encoded numerically, you needed to know the text encoding system used to encode the character. Because text encoding systems are not unique, the same numeric encoding used in different systems may not represent the same character. The adoption of Unicode has changed this.</p><p><strong>Unicode</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_456"></a> is a character encoding system designed to support the interchange, processing, and display of all the written texts of the diverse languages of the modern world. Unicode supplies enough numeric values to encode all characters available to all written texts. It provides a single model for text display and editing. Unicode also simplifies the handling of bidirectional text and characters that change according to their position in the sentence.</p><p>Unicode has three primary formats<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_457"></a> available for encoding: UTF-8, UTF-16, and UTF-32 (UTF stand for Unicode Transformation Format). UTF-8 is a single-byte format; UTF-16 is a double-byte format; and UTF-32 is a quadruple-byte format. ATSUI uses UTF-16, which uses two bytes to specify a character. Text that uses an encoding other than Unicode can be converted to Unicode using the Text Encoding Converter. See <em>Programming With the Text Encoding Conversion Manager</em> for more information.</p><p>Because Unicode includes the character repertoires of most common character encodings, it facilitates data interchange with other platforms. Using Unicode, text manipulated by your application and shared across applications and platforms can be encoded in a single coded character set.</p><p>Unicode provides some special features<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_458"></a>, such as combining or nonspacing marks and conjoining Jamo. These features are a function of the variety of languages that Unicode handles. If you have coded applications that handle text for the languages these features support, they should be familiar to you. If you have used a single coded character set such as ASCII almost exclusively, these features will be new to you. ATSUI lets you control how the special features available through Unicode are rendered.</p><p>For more information on Unicode, see <span class="content_text"><a href="http://www.unicode.org" target="_blank">http://www.unicode.org</a></span>. For additional details on how ATSUI implements the Unicode specification, see <span class="content_text"><a href="../atsui_app_unicode/atsui_appendixA.html#//apple_ref/doc/uid/TP30000034-TP1">“ATSUI Implementation of the Unicode Specification.”</a></span></p><a name="//apple_ref/doc/uid/TP30000028-TPXREF137" title="Text Storage"></a><h2>Text Storage</h2><p>ATSUI doesn’t allocate and manage buffers for your text; you are responsible for memory management. Instead ATSUI caches the text that you want rendered, storing the cached text as a sequence of glyph codes. Because ATSUI uses Unicode (UTF-16), each character uses at least 2 bytes of storage. (Surrogate and other characters may require more than 2 bytes of storage.) The storage order <a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_459"></a>is the order in which text is stored. The text stored in memory is the <strong>source text</strong>; the text displayed is the <strong>display text</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_460"></a>, as shown in <span class="content_text"><a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF168">Figure 1-3</a></span>.</p><p><strong>Display order</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_461"></a> is the left-to-right (or top-to-bottom) order in which glyphs are drawn. ATSUI expects you to store your text in <strong>input order</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_462"></a>, which is the “logical” order, or the order in which the characters, not glyphs, would be read or pronounced in the language of the text. Because text of different languages may be read from left to right, right to left, or top to bottom, the input order is not necessarily the same as the display order of the text when it is drawn. Your application needs to differentiate between the order in which the character codes are stored and the order in which the corresponding glyphs are displayed. <span class="content_text">Figure 1-3</span> shows Hebrew glyphs that are stored one way and displayed another way.</p><p>As shown in <span class="content_text">Figure 1-3</span>, the character codes that make up the text are numbered using zero-based <strong>offsets</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_463"></a>. Therefore, the first character code in the figure has an offset of 0. </p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF168" title="Figure 1-3Input order and display order"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>Input order and display order</p><img src = "../art/order.gif" alt = "Input order and display order" width="373" height="203"></div><br/><p>ATSUI also uses a zero-based numbering scheme to index the glyphs that are actually displayed. The <strong>glyph index</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_464"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_465"></a>, which gives the glyph’s position in the display order, always starts at 0. Each glyph has a single index, even though its character code is 2 bytes (one <code>Unichar</code>) long. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_8" title="Note"></a><p><strong>Note:</strong>&nbsp;Throughout this document, text in computer memory is drawn as a vertical table representing sequential (downward) storage of text characters in a buffer. </p></div><a name="//apple_ref/doc/uid/TP30000028-TPXREF138" title="Text Measurements"></a><h2>Text Measurements</h2><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_466"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_467"></a><p>Most users use point size<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_468"></a> to specify the size of the glyphs in a document. <strong>Point size</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_469"></a> indicates the size of a font’s glyphs as measured from the baseline of one line of text to the baseline of the next line of single-spaced text. In the United States, point size is measured in <strong>typographic points</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_470"></a>, and there are 72.27 points per inch. However, ATSUI and the PostScript language both define 1 point to be exactly 1/72 of an inch. Although point size is a useful measure of the size of text, you may wish to use more exact measurements for greater control over placement of the glyphs on the display device. ATSUI permits fractional point sizes. </p><p>Font designers use a special vocabulary for the measurements of different parts of a glyph. <span class="content_text"><a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF169">Figure 1-4</a></span> shows the terms describing the most frequently used measurements. The <strong>bounding box</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_471"></a> of a glyph is the smallest rectangle<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_472"></a> that entirely encloses the drawn parts of the glyph. The <strong>glyph origin</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_473"></a> is the point that ATSUI uses to position the glyph when drawing. In <span class="content_text">Figure 1-4</span>, notice that there is some space between the glyph origin<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_474"></a> and the edge of the bounding box: this space is the glyph’s <strong>left-side bearing</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_475"></a>. The left-side bearing<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_476"></a> value can be negative, which decreases the space between adjacent characters. The <strong>right-side bearing</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_477"></a> is space on the right side<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_478"></a> of the glyph; this value may or may not be equal to the value of the left-side bearing. The <strong>advance width</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_479"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_480"></a> is the full horizontal width<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_481"></a> of the glyph as measured from its origin to the origin of the next glyph on the line, including the side bearings on both sides. </p><p>Most glyphs in Roman fonts appear to sit astride the <strong>baseline</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_482"></a>, an imaginary horizontal<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_483"></a> line. The <strong>ascent</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_484"></a> is a distance<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_485"></a> above the baseline, chosen by the font’s designer and the same for all glyphs in a font, that often corresponds approximately to the tops of the uppercase letters in a Roman font. Uppercase letters are chosen because, among the regularly used glyphs in a font, they are generally the tallest.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_9" title="Note"></a><p><strong>Note:</strong>&nbsp;Don’t confuse the ascent, which is the distance from the baseline to the top of the uppercase letters in a font, with the ascender, shown in <span class="content_text"><a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-TPXREF166">Figure 1-2</a></span>. An ascender is that portion of a glyph that extends above the height of lowercase letters that do not have ascenders. (See x-height in <span class="content_text">Figure 1-2</span>.)</p></div><p>The <strong>descent</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_486"></a> is a distance below<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_487"></a> the baseline that usually corresponds to the bottoms of the descenders (the “tails” on glyphs such as “p” or “g”). The descent is the same distance from the baseline for all glyphs in the font, whether or not they have descenders. The sum of ascent plus descent marks<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_488"></a> the <strong>line height</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_489"></a> of a font.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF169" title="Figure 1-4Terms for glyph measurements"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>Terms for glyph measurements</p><img src = "../art/glyphterms.gif" alt = "Terms for glyph measurements" width="525" height="289"></div><br/><p>For vertical text, font designers may use additional measurements. The <strong>top-side bearing</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_490"></a> is the space between the top of the glyph and the top<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_491"></a> edge of the bounding box. The <strong>bottom-side bearing</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_492"></a> is the distance from the bottom<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_493"></a> of the bounding box to the origin of the next glyph. For vertical text<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_494"></a>, the <strong>advance height</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_495"></a> is the sum of the top-side bearing, the bounding-box height, and the bottom-side bearing. These metrics are useful if, for example, you want to display a horizontal font vertically. Likewise, vertical fonts such as kanji may also have horizontal metrics.</p><p>Every block of text has an <strong>image bounding rectangle</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_496"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_497"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_498"></a>, which is the smallest rectangle<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_499"></a> that completely encloses the filled or framed parts of a block of text. However, because of the height differences between glyphs—for example, between a small glyph, such as a lowercase “e”, and a taller, larger glyph, such an uppercase “M”, or even between glyphs of different fonts and point sizes—the image bounding rectangle may not be sufficient for your application’s purposes. Therefore, you can also use the <strong>typographic bounding rectangle</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_500"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_501"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_502"></a>, which, in most cases, is the smallest rectangle<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_503"></a> that encloses the full span of the glyphs from the ascent line to the descent line.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_10" title="Note"></a><p><strong>Note:</strong>&nbsp;In some cases (such as with the Zapfino font), the font designer allows glyphs to extend beyond the typographic bounding rectangle, even if this may cause collisions with glyphs from another line of text. The ATSUI function <code><a href="../../../Reference/ATSUI_Reference/Reference/reference.html#//apple_ref/doc/c_ref/ATSUMeasureTextImage" target="_top">ATSUMeasureTextImage</a></code> obtains the actual image rectangle, even when glyphs extend beyond the typographic bounding rectangle.</p></div><p><span class="content_text">Figure 1-5</span> shows an example of how the typographic bounding rectangle and image bounding rectangle relate. The two rectangles are markedly different because the text has no ascenders or descenders. Whereas the image bounding rectangle encloses just the black bits of the drawn text, the typographic bounding rectangle takes into account the ascent and descent needed to accommodate all glyphs in a font. If text includes glyphs with ascenders and descenders, the typographic bounding rectangle doesn’t change, but the image bounding rectangle does.<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_504"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_505"></a></p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF230" title="Figure 1-5Image bounding rectangle and typographic bounding rectangle "></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>Image bounding rectangle and typographic bounding rectangle </p><img src = "../art/boundingrect.gif" alt = "Image bounding rectangle and typographic bounding rectangle" width="347" height="97"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF139" title="Typestyles"></a><h2>Typestyles</h2><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_506"></a><p>Glyphs can be differentiated not only by font but by typestyle. A <strong>typestyle</strong> is a specific variation in the appearance of a glyph that can be applied consistently to all the glyphs in a font family. Some of the typical typestyles available on the Macintosh computer include plain, bold, italic, underline, outline, shadow, condensed, and extended. Other styles that may be available are demibold, extra-condensed, or antique. </p><a name="//apple_ref/doc/uid/TP30000028-BAJBJBJH" title="Font Variations"></a><h3>Font Variations</h3><p>A <strong>font variation</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_507"></a> is a setting along a particular variation axis. Font variations allow your application to produce a range of typestyles algorithmically. Each <strong>variation axis</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_508"></a> has a name that usually indicates the typestyle that the axis represents, a tag to represent that name (such as <code>'wght'</code>), a set of maximum and minimum values for the axis, and the default value of the axis. The weight axis, for example, governs the possible values for the weight of the font; the minimum value may produce the lightest appearance of that font, the maximum value the boldest. The default value is the position along the variation axis at which that font falls normally. Because the axis is created by the font designer, font variations can be optimized for their particular font. <span class="content_text">Figure 1-6</span> shows a range of possible weights for a glyph, from the minimum weight to the maximum weight.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-CJBHJBGD" title="Figure 1-6Font variations along a variation axis"></a><p><strong>Figure 1-6&nbsp;&nbsp;</strong>Font variations along a variation axis</p><img src = "../art/axisvariations.gif" alt = "Font variations along a variation axis" width="418" height="57"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF195" title="Font Instances"></a><h3>Font Instances</h3><p>A <strong>font instance</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_509"></a> is a set of named variations identified by the font designer that matches specific values along one or more variation axes and associates those values with a name. For example, suppose a font has the variation axis <code>'wght'</code> with a minimum value of 0.0, a default of 0.5, and a maximum value of 1.0. The corresponding font instance might have the name “Demibold” with a value along that variation axis of 0.8.</p><p>In <span class="content_text">Figure 1-6</span>, the variation axis value of the glyph at the far right could represent the named instance “Extra Bold,” whereas the glyph at the far left could represent the named instance “Light.” The other values represented in the figure could likewise have instance names.</p><p>Font variations and font instances give your application the ability to provide whatever typestyles the font designer has decided to include with the font. They are available through ATSUI only if the font designer has defined variations and instances for a font.<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_510"></a></p><a name="//apple_ref/doc/uid/TP30000028-TPXREF142" title="Text Layout "></a><h2>Text Layout </h2><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_511"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_512"></a><p>When you arrange text<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_513"></a> on a display device, you can let ATSUI use default values to automatically handle many aspects of the text display or you can specify precisely how ATSUI should present and arrange the text. The specifics of text layout using ATSUI are discussed in later chapters. This section describes some of the general concepts of laying out text on a display device. For example, when laying out text, the following need to be considered:</p><ul class="ul"><li class="li"><p>text direction</p></li><li class="li"><p>baselines</p></li><li class="li"><p>text runs, style runs, and direction runs</p></li><li class="li"><p>contextual forms and ligatures</p></li><li class="li"><p>alignment (or flushness) and justification</p></li><li class="li"><p>kerning and tracking</p></li><li class="li"><p>line breaks</p></li><li class="li"><p>font substitution</p></li></ul><a name="//apple_ref/doc/uid/TP30000028-TPXREF143" title="Text Direction"></a><h3>Text Direction</h3><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_514"></a><p><strong>Text direction</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_515"></a> consists of text orientation (horizontal or vertical) and the direction in which the text is read. Text in your application can be oriented in three common directions: horizontally, left to right; horizontally, right to left; and vertically, top to bottom. ATSUI allows your application, for example, to draw lines of text in multiple directions, as shown in <span class="content_text">Figure 1-7</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF175" title="Figure 1-7Bidirectional text "></a><p><strong>Figure 1-7&nbsp;&nbsp;</strong>Bidirectional text </p><img src = "../art/multidirection.gif" alt = "Bidirectional text" width="430" height="383"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF162" title="Baselines"></a><h3>Baselines</h3><p>A <strong>baseline</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_516"></a> is an imaginary line that coincides with some point in a font—for example, the bottom, middle, or top of each glyph. The baseline<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_517"></a> of a glyph defines the position of the glyph with respect to other glyphs at different point sizes when all the glyphs are aligned. It represents a stable platform from which glyphs of different sizes and different writing systems grow proportionally.</p><p>Depending on the writing system, the baseline<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_518"></a> may be above, below, or through the center of each glyph, as shown in <span class="content_text">Figure 1-8</span>. ATSUI provides your application with capabilities for using multiple baselines<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_519"></a>. For more information, see <span class="content_text"><a href="../atsui_chap3/atsui_concepts2.html#//apple_ref/doc/uid/TP30000029-TPXREF173">“Baseline Offsets Attribute Tag .”</a></span></p><br/><div><a name="//apple_ref/doc/uid/TP30000028-CJBBEGGF" title="Figure 1-8Baselines for different sizes of a glyph and for different writing systems"></a><p><strong>Figure 1-8&nbsp;&nbsp;</strong>Baselines for different sizes of a glyph and for different writing systems</p><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_520"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_521"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_522"></a><img src = "../art/rhibaselines.gif" alt = "Baselines for different sizes of a glyph and for different writing systems" width="312" height="258"></div><br/><p>A <strong>baseline delta</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_523"></a> is the distance between the baseline and the position of the glyph with respect to the baseline, as shown in <span class="content_text">Figure 1-9</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJHHFCH" title="Figure 1-9The baseline delta"></a><p><strong>Figure 1-9&nbsp;&nbsp;</strong>The baseline delta</p><img src = "../art/baseline.gif" alt = "The baseline delta" width="132" height="81"></div><br/><p>Various baselines can also be used to create special effects, such as drop capitals. A <strong>drop capital</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_524"></a> is an initial capital letter that is much larger than surrounding glyphs and embedded in them. <span class="content_text">Figure 1-10</span> is an example of drop capitals formed solely on the basis of the baselines in the font. The default baseline for this text is the Roman baseline for 18-point type. The hanging baseline of the drop capitals aligns with the hanging baseline of the regular text, creating the effect shown.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-CJBDBCHG" title="Figure 1-10Drop capitals"></a><p><strong>Figure 1-10&nbsp;&nbsp;</strong>Drop capitals</p><img src = "../art/dropcapitals.gif" alt = "Drop capitals" width="342" height="54"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF161" title="Leading Edges and Trailing Edges"></a><h3>Leading Edges and Trailing Edges</h3><p>Because text has a direction, the concept of which glyph<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_525"></a> comes “first” in a line of text cannot always be limited to the visual terms “left” and “right.” The <strong>leading edge</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_526"></a> is defined as the edge of a glyph you first encounter—such as the left foot of a Roman glyph—when you first read the text that includes that glyph. The <strong>trailing edge</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_527"></a> is the edge of a glyph encountered last.</p><p><span class="content_text">Figure 1-11</span> shows how the concepts of leading edge and trailing edge change depending on the characteristics of the glyph. In the first example—a Roman glyph—the leading edge is on the left, because the reader encounters that side first. In the second example, the leading edge of the Hebrew glyph is on the right for the same reason.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF172" title="Figure 1-11Leading edges and trailing edges"></a><p><strong>Figure 1-11&nbsp;&nbsp;</strong>Leading edges and trailing edges</p><img src = "../art/edges.gif" alt = "Leading edges and trailing edges" width="258" height="99"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF163" title="Text Runs, Style Runs, and Direction Runs"></a><h3>Text Runs, Style Runs, and Direction Runs</h3><p>In any segment of contiguous text, certain parts stand out as belonging together, because the glyphs share a certain font, typestyle, or direction. For the purposes of referring to individual segments of text, you can think of sequences of glyphs that are contiguous in memory and share a set of common attributes as <strong>runs</strong>.</p><p>ATSUI associates a block of text with a <strong>text run</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_528"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_529"></a>. A sequence of glyphs contiguous in memory that share the same style is a <strong>style run</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_530"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_531"></a>. As <span class="content_text">Figure 1-12</span> shows, a text run can be subdivided into several style runs. The figure shows three style runs.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF176" title="Figure 1-12Three style runs in a line of text"></a><p><strong>Figure 1-12&nbsp;&nbsp;</strong>Three style runs in a line of text</p><img src = "../art/styleruns.gif" alt = "Three style runs in a line of text" width="403" height="73"></div><br/><p>A sequence of contiguous glyphs that share the same text direction is a <strong>direction run</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_532"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_533"></a>. As with text runs and style runs, the number of direction runs does not necessarily correlate to the number of style runs available, as shown in <span class="content_text">Figure 1-13</span>, which has two direction runs.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF177" title="Figure 1-13Two direction runs in a line of text"></a><p><strong>Figure 1-13&nbsp;&nbsp;</strong>Two direction runs in a line of text</p><img src = "../art/directionruns.gif" alt = "Two direction runs in a line of text" width="329" height="81"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF164" title="Contextual Forms and Ligatures"></a><h3>Contextual Forms and Ligatures</h3><p>A glyph’s position next to other glyphs or its position in a word or a line of text may determine its appearance. For some writing systems, such as Roman, alternate glyphs are used for aesthetic reasons; in other writing systems, use of alternate forms is required.</p><p>A <strong>contextual form</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_534"></a> is an alternate form of a glyph that is chosen depending on the glyph’s placement in a certain context, such as a certain word or line. Some contextual forms of initial and final forms of glyphs in a Roman font are shown in <span class="content_text"><a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-CJBJIJHH">Figure 1-1</a></span>. Other writing systems, such as Arabic, require different contextual forms of glyphs according to where they appear. <span class="content_text">Figure 1-14</span> shows the forms of the Arabic letter “ha” that appear alone and at the beginning, middle, or end of a word. The same character code is used for each case; ATSUI finds the appropriate glyph code.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-CJBJCHIC" title="Figure 1-14Contextual forms of the Arabic letter &acirc;&#128;&#156;ha&acirc;&#128;&#157;"></a><p><strong>Figure 1-14&nbsp;&nbsp;</strong>Contextual forms of the Arabic letter “ha”</p><img src = "../art/formsofha.gif" alt = "Contextual forms of the Arabic letter “ha”" width="233" height="68"></div><br/><p><strong>Ligatures</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_535"></a> are two or more glyphs combined to form a single new glyph (whereas contextual forms are variations on the shape of one glyph). In the Roman writing system, ligatures are generally an optional aesthetic refinement. In other writing systems, special ligatures are required when certain glyphs appear next to one another. Some examples of ligatures used in a Roman font are shown in <span class="content_text">Figure 1-15</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-CJBDEFHI" title="Figure 1-15Examples of Roman ligatures"></a><p><strong>Figure 1-15&nbsp;&nbsp;</strong>Examples of Roman ligatures</p><img src = "../art/romanligatures.gif" alt = "Examples of Roman ligatures" width="106" height="99"></div><br/><p>In general, the font contains all of the information needed to determine when your application should use the appropriate contextual forms and ligatures. If your application allows alternate forms of glyphs to be used, ATSUI does the substitution for you.</p><a name="//apple_ref/doc/uid/TP30000028-TPXREF148" title="Alignment and Justification"></a><h3>Alignment and Justification</h3><p>The <strong>text area</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_536"></a> is the space on the display device in which text you want to display should fit. The left, right, top, and bottom sides of that area are the <strong>margins</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_537"></a>. How you arrange the text depends on the effect you want to achieve. There are two primary methods of arranging text: alignment and justification. <strong>Alignment</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_538"></a> (also called flushness<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_539"></a>) is the process of placing text in relation to one or both margins. <span class="content_text">Figure 1-16</span> shows left, right, and center alignment of text. <strong>Justification</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_540"></a> is the process of typographically stretching or shrinking a line of text to fit within a given width. Your application can set the width of the space in which the line of text should appear. ATSUI then distributes the white space available on the line between words or even between glyphs, depending on the level of justification chosen.</p><p>There are other means of aligning or justifying a line—for example, stretching a glyph or decomposing a ligature. ATSUI can also handle complex justification such as that used in Arabic writing systems.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF180" title="Figure 1-16Left, center, and right text alignment (or flushness)"></a><p><strong>Figure 1-16&nbsp;&nbsp;</strong>Left, center, and right text alignment (or flushness)</p><img src = "../art/alignmentkinds.gif" alt = "Left, center, and right text alignment (or flushness)" width="457" height="207"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF149" title="Kerning and Tracking"></a><h3>Kerning and Tracking</h3><p><strong>Kerning</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_541"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_542"></a> is an adjustment to the normal spacing between two or more specific glyphs. A <strong>kerning pair</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_543"></a> consists of two adjacent glyphs such that the position of the second glyph is changed with respect to the first. The font designer determines which glyphs participate in kerning and in what context. Any adjustments to glyph positions are specified relative to the point size of the glyphs. Kerning usually improves the apparent letter-spacing between glyphs that fit together naturally.</p><p><span class="content_text">Figure 1-17</span> shows how glyphs are positioned differently with and without kerning. Note that the phrase is shorter when kerning is applied than when it is not applied.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF181" title="Figure 1-17Glyphs with and without kerning"></a><p><strong>Figure 1-17&nbsp;&nbsp;</strong>Glyphs with and without kerning</p><img src = "../art/kerning.gif" alt = "Glyphs with and without kerning" width="453" height="114"></div><br/><p><strong>Cross-stream kerning</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_544"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_545"></a> allows the automatic movement of glyphs perpendicular to the line orientation of the text. For example, when ATSUI applies cross-stream kerning to horizontal text, the automatic movement is vertical; this feature is required for writing systems such as Taliq, which is used in the Urdu language. </p><p>When your application lays out text, it has the option of using the interglyph spacing specified by the font designer or altering the spacing slightly in order to achieve a tighter fit between letters and improve the look of a line of text.</p><p>Your application can also use tracking<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_546"></a> if it has been specified by the font designer. In <strong>tracking</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_547"></a>, space is adjusted between all glyphs in the run. You can increase or decrease interglyph spacing by using a <strong>tracking setting</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_548"></a>, which is a value that specifies the relative tightness or looseness of interglyph spacing. Positive tracking settings result in an increase in the looseness of all glyphs in the run. Negative tracking settings result in a increase in the tightness of all glyphs. Normal tracking, tight tracking, and loose tracking are shown in <span class="content_text">Figure 1-18</span>. </p><br/><div><a name="//apple_ref/doc/uid/TP30000028-CJBGGAAA" title="Figure 1-18Tracking settings for normal, tight, and loose tracking"></a><p><strong>Figure 1-18&nbsp;&nbsp;</strong>Tracking settings for normal, tight, and loose tracking</p><img src = "../art/tracking.gif" alt = "Tracking settings for normal, tight, and loose tracking" width="232" height="127"></div><br/><a name="//apple_ref/doc/uid/TP30000028-TPXREF150" title="Special Font Features"></a><h3>Special Font Features</h3><p>Some special features<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_549"></a> are available in certain fonts. You can increase the control a user has over the presentation of text in a document if you provide access to these features when they are available in a font. The font provides the functionality for using these features. <span class="content_text">Table 1-1</span> shows some of the currently defined features. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-TP1">“Font Features”</a></span> for a more complete list.</p><a name="//apple_ref/doc/uid/TP30000028-TPXREF183" title="Table 1-1Special font features "></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Special font features </caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Feature</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p>Ligatures<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_550"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_551"></a></p></td><td ><p>Permits selection from different ranges of ligatures.</p></td></tr><tr><td  scope="row"><p>Cursive connections<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_552"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_553"></a></p></td><td ><p>Controls the level of cursive connection in the font. This feature is used in fonts, such as cursive Roman fonts or Arabic fonts, in which glyphs are connected to each other. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-TPXREF267">Figure B-2</a></span> for an example.</p></td></tr><tr><td  scope="row"><p>Vertical substitution<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_554"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_555"></a></p></td><td ><p>Specifies that glyphs need to change their appearance in vertical runs of text. <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-TPXREF268">Figure B-23</a></span> shows how a vertical form of a glyph can be substituted for a horizontal form.</p></td></tr><tr><td  scope="row"><p>Smart swashes<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_556"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_557"></a></p></td><td ><p>A <strong>swash</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_558"></a> is a variation, often ornamental, of an existing glyph. The smart swash feature controls contextual swash substitution, such as substituting a final glyph when a particular glyph appears at the end of a word. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-BCIEIBHF">Figure B-19</a></span> for an example of swashes.</p></td></tr><tr><td  scope="row"><p>Vertical position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_559"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_560"></a></p></td><td ><p>Controls superscripts, subscripts, and ordinal forms. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-BBCJJEJD">Figure B-22</a></span> for an example of vertical positions.</p></td></tr><tr><td  scope="row"><p>Fractions<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_561"></a></p></td><td ><p>Governs selection and generation of fractions. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-TPXREF273">Figure B-8</a></span> for examples of how fractions can be drawn.</p></td></tr><tr><td  scope="row"><p>Overlapping glyphs<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_562"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_563"></a></p></td><td ><p>Prevents the collision of long tails on glyphs with the descenders of other glyphs. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-BCIGBCFJ">Figure B-17</a></span> for an example.</p></td></tr><tr><td  scope="row"><p>Typographical extras<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_564"></a></p></td><td ><p>Allows fine typographic effects, such as the automatic conversion of two adjacent hyphens to an em dash. </p></td></tr><tr><td  scope="row"><p>Ornament sets<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_565"></a></p></td><td ><p>Governs nonletter ornament sets of glyphs<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_566"></a>. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-BCIGIIEB">Figure B-16</a></span> for an example of ornamental glyphs.</p></td></tr><tr><td  scope="row"><p>Style options<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_567"></a></p></td><td ><p>Allows the font designer to group together collections of noncontextual substitutions into named sets.</p></td></tr><tr><td  scope="row"><p>Character shape<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_568"></a></p></td><td ><p>Specifies the use, with Chinese fonts, of the traditional or simplified character forms<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_569"></a>. See <span class="content_text"><a href="../atsui_app_features/atsui_appendixB.html#//apple_ref/doc/uid/TP30000035-BCIIAHDE">Figure B-4</a></span> for an example.</p></td></tr></table></div><p>Some of these features, such as typographic extras, are fancy elements that provide the user with alternate forms of glyphs or other ornamental designs. Other features are contextual and absolutely necessary for using that font correctly—for example, cursive connectors for Arabic. Fonts that require these features include them, whereas optional elements are included at the discretion of the font designer.</p><a name="//apple_ref/doc/uid/TP30000028-TPXREF151" title="Line Breaking"></a><h3>Line Breaking</h3><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_570"></a><p>Your application determines how wide the text area for a line should be. At times, a user enters a line of text that does not fit neatly in the given text area and overlaps one of the margins. When this happens, you break the line of text and wrap the text onto the next line.</p><p><span class="content_text">Figure 1-19</span> shows a line break made on the basis of a simple algorithm: The application backs up in the source text to the trailing edge of the last white space and then carries over all of the text following that white space to the next line.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF184" title="Figure 1-19Text width and line breaking"></a><p><strong>Figure 1-19&nbsp;&nbsp;</strong>Text width and line breaking</p><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_571"></a><img src = "../art/linebreak.gif" alt = "Text width and line breaking" width="291" height="140"></div><br/><p>Your application can devise more complex algorithms, such as breaking a word at an appropriate hyphenation point, if possible. ATSUI leaves the final decision about where to break the line up to your application. However, ATSUI provides you with functions designed to help you determine the best place to break a line. For more information, see <span class="content_text"><a href="../atsui_chap4/atsui_tasks.html#//apple_ref/doc/uid/TP30000030-TPXREF159">“Breaking Lines”</a></span> and <span class="content_text"><a href="../atsui_chap4/atsui_tasks.html#//apple_ref/doc/uid/TP30000030-TPXREF139">“Flowing Text Around a Graphic .”</a></span></p><a name="//apple_ref/doc/uid/TP30000028-TPXREF191" title="Font Substitution"></a><h3>Font Substitution</h3><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_572"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_573"></a><p>In some cases there may not be a glyph defined for a character code in a font. Your application can specify a search order for ATSUI to use when trying to locate a replacement glyph. If ATSUI cannot find any suitable replacement, it recommends substituting a glyph from the Last Resort font. The <strong>Last Resort</strong> font is a collection of glyphs that represent types of Unicode characters. If the font cannot represent a particular Unicode character, the appropriate "missing" glyph from the Last Resort font is used instead. For more information on font substitution, see <span class="content_text"><a href="../atsui_chap6/atsui_adv_tasks.html#//apple_ref/doc/uid/TP30000032-TPXREF138">“Using Font Fallback Objects.”</a></span><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_574"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_575"></a></p><a name="//apple_ref/doc/uid/TP30000028-TPXREF152" title="Caret Handling"></a><h2>Caret Handling</h2><p>When the user places a pointer over a line of text and presses and releases a mouse button, the user expects that mouse click to produce a caret at the corresponding onscreen position. Similarly, when the user drags the mouse while pressing and holding the mouse button, the user expects the selected text to be highlighted. In each case, your application must recognize and respond to mouse events appropriately. This section discusses caret positioning, highlighting, and conversion of screen position to text offset in memory.</p><a name="//apple_ref/doc/uid/TP30000028-TPXREF153" title="Caret Positioning"></a><h3>Caret Positioning</h3><p>A caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_576"></a> is a location on the screen that corresponds to an insertion point in memory. It lets the user know where in the text file the next insertion (or deletion) will occur. A caret position is always between glyphs on the screen, usually on the leading edge of one glyph and the trailing edge of another. The leading edge of a glyph is the edge that is encountered first when reading text of that glyph’s script system; the trailing edge is opposite from the leading edge. In left-to-right text, a glyph’s leading edge is its left edge; in right-to-left text, a glyph’s leading edge is its right edge.</p><p>In most situations for most text applications, the caret position is on the leading edge of the glyph corresponding to the character at the insertion point in memory, as shown in <span class="content_text">Figure 1-20</span>. When a new character is inserted, it displaces the character at the insertion point, shifting it and all subsequent characters in the buffer forward by one character position. </p><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJFFIEI" title="Figure 1-20Caret position and insertion point"></a><p><strong>Figure 1-20&nbsp;&nbsp;</strong>Caret position and insertion point</p><img src = "../art/caretposinsertpt.gif" alt = "Caret position and insertion point" width="426" height="144"></div><br/><p>The caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_577"></a> is unambiguous in text with a single line direction. In such a case, the caret position is on the trailing and leading edges of characters that are contiguous in the text buffer; it thus corresponds directly to a single offset in the buffer. This is not always the case in bidirectional text.</p><p>In determining caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_578"></a>, an ambiguous case occurs at direction boundaries because the offset in memory can map to two different glyph positions on the screen—one for the text in each line direction. In <span class="content_text">Figure 1-21</span>, for example, the insertion point is at offset 3 in the buffer. If the next character to be inserted is Arabic, the caret should be drawn at position 3 on the screen; if the next character is English, the caret should be drawn at caret position 12.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-TPXREF193" title="Figure 1-21Caret positions at direction boundaries"></a><p><strong>Figure 1-21&nbsp;&nbsp;</strong>Caret positions at direction boundaries</p><img src = "../art/caretposdirection.gif" alt = "Caret positions at direction boundaries" width="456" height="288"></div><br/><p>The Mac OS codifies this relationship between text offset and caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_579"></a> as follows:</p><ul class="spaceabove"><li class="li"><p>For any given offset in memory, there are two potential caret positions:</p><ul class="nested"><li class="nested li"><p>the leading edge of the glyph corresponding to the character at that offset </p></li><li class="nested li"><p>the trailing edge of the glyph corresponding to the previous (in memory) character</p></li></ul></li><li class="li"><p>In unidirectional text, the two caret positions coincide: the leading edge of the glyph for one character is at the same location as the trailing edge of the glyph for the previous character. In <span class="content_text"><a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-BAJFFIEI">Figure 1-20</a></span>, the offset of 3 yields caret positions on the leading edge of “D” and the trailing edge of “C”, which are the same unambiguous location. </p></li><li class="li"><p>At a boundary between text of opposite directions, the two caret positions do not coincide. Thus, in <span class="content_text">Figure 1-21</span>, for an offset of 3 there are two caret positions: 12 and 3. Likewise, an offset of 12 yields two caret positions (also 12 and 3, but on the edges of two different glyphs).</p></li></ul><p>At an ambiguous character offset, the current line direction<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_580"></a> (the presumed direction of the next character to be inserted) determines which caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_581"></a> is the correct one:</p><ul class="spaceabove"><li class="li"><p>If the current direction equals the direction of the character at that offset, the caret position is the leading edge of that character’s glyph. In <span class="content_text">Figure 1-21</span>, if Roman text is to be inserted at offset 3 (occupied by a Roman character), the caret position is on the leading edge of that character’s glyph—that is, at caret position 12.</p></li><li class="li"><p>If the current direction equals the direction of the previous (in memory) character, the screen position is on the trailing edge of the glyph corresponding to that previous (in memory) character. In <span class="content_text">Figure 1-21</span>, if Arabic text is to be inserted at offset 3, the caret position is on the trailing edge of the glyph of the character at offset 2—that is, at caret position 3.</p></li></ul><p>Two common approaches for drawing the caret at direction boundaries involve the use of a dual caret<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_582"></a> and a single caret<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_583"></a>. A <strong>dual caret</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_584"></a> consists of two lines, a high caret and a low caret, each measuring half the text height (see <span class="content_text">Figure 1-22</span>). The high caret is displayed at the primary caret position for the insertion point; the low caret is displayed at the secondary caret position for that insertion point. Which position is primary, and which is secondary, depends on the primary line direction:</p><ul class="spaceabove"><li class="li"><p>The primary caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_585"></a> is the screen location associated with the glyph that has the same direction as the primary line direction. If the current line direction corresponds to the primary line direction, inserted text will appear at the primary caret position. A primary caret is a caret drawn at the primary caret position. </p></li><li class="li"><p>The secondary caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_586"></a> is the screen location associated with the glyph that has a different direction from the primary line direction. If the current line direction is opposite to the primary line direction, inserted text will appear at the secondary caret position. In <span class="content_text">Figure 1-22</span>, the display of the Roman keyboard icon shows that the current line direction is not the same as the primary line direction, so the next character inserted will appear at the secondary caret position. A secondary caret is a caret drawn at the secondary caret position.</p></li></ul><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJBAHAC" title="Figure 1-22Dual caret at direction boundaries in mixed-directional text"></a><p><strong>Figure 1-22&nbsp;&nbsp;</strong>Dual caret at direction boundaries in mixed-directional text</p><img src = "../art/dualcaretbounds.gif" alt = "Dual caret at direction boundaries in mixed-directional text" width="317" height="183"></div><br/><p>A single caret<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_587"></a> (or moving caret<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_588"></a>) is simpler than a dual caret (see <span class="content_text">Figure 1-23</span>). It is a single, full-length caret that appears at the screen location where the next glyph will appear. At direction boundaries, its position depends on the keyboard script. At a direction boundary, the caret appears at the primary caret position if the current line direction corresponds to the primary line direction; it appears at the secondary caret position if the current line direction is opposite to the primary line direction. The moving caret is also called a jumping caret<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_589"></a> because its position jumps between the primary and secondary caret positions as the user switches the keyboard script between the two text directions represented.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJEBGAI" title="Figure 1-23Single carets at direction boundaries in mixed-directional text"></a><p><strong>Figure 1-23&nbsp;&nbsp;</strong>Single carets at direction boundaries in mixed-directional text</p><img src = "../art/unicaretbounds.gif" alt = "Single carets at direction boundaries in mixed-directional text" width="318" height="306"></div><br/><p>When you place a caret between glyphs, you need to be able to relate the caret to the insertion point: a point between <code>Unichar</code> offsets in the source text. The <strong>edge offset</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_590"></a><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_591"></a> is a <code>Unichar</code> offset<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_592"></a> between character codes in the source text that corresponds to the caret location between glyphs. In <span class="content_text"><a href="atsui_concepts.html#//apple_ref/doc/uid/TP30000028-BAJFFIEI">Figure 1-20</a></span>, the edge offset is 3.</p><a name="//apple_ref/doc/uid/TP30000028-TPXREF154" title="Highlighting"></a><h3>Highlighting</h3><p>When displaying a selection range, an application typically marks it by <strong>highlighting</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_593"></a>, drawing the glyphs in inverse video or with a colored or outlined background. As part of its text-display tasks, your application is responsible for knowing what the selection range is and highlighting it properly, as well as for making the necessary changes in memory that result from any cutting, pasting, or editing operations involving the selection range. <span class="content_text">Figure 1-24</span> shows highlighting for a selection range in <a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_594"></a>unidirectional text<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_595"></a>. </p><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJJAGBE" title="Figure 1-24Highlighting a selection range in unidirectional text"></a><p><strong>Figure 1-24&nbsp;&nbsp;</strong>Highlighting a selection range in unidirectional text</p><img src = "../art/highlightuni.gif" alt = "Highlighting a selection range in unidirectional text" width="375" height="105"></div><br/><p>The Mac OS measures the limits of highlighting rectangles in terms of caret position. Thus, in <span class="content_text">Figure 1-24</span>, in which the selection range consists of the characters at offsets 1 and 2 in memory, the ends of the highlighting rectangle correspond to caret positions for offsets 1 and 3. It’s equivalent to saying that the highlighting extends from the leading edge of the glyph for the character at offset 1 to the leading edge of the glyph for the character at offset 3.</p><p>If the displayed text has bidirectional runs, the selection range may appear as discontinuous highlighted text. This is because the characters that make up the selection range are always contiguous in memory, but characters that are contiguous in memory may not be contiguous onscreen. <span class="content_text">Figure 1-25</span> is an example of text whose selection range consists of a contiguous sequence of characters in memory, whereas the highlighted glyphs are displayed discontinuously.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJEFGEJ" title="Figure 1-25Highlighting a selection range in bidirectional text"></a><p><strong>Figure 1-25&nbsp;&nbsp;</strong>Highlighting a selection range in bidirectional text</p><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_596"></a><img src = "../art/discontinhilite.gif" alt = "Highlighting a selection range in bidirectional text" width="411" height="288"></div><br/><p>In describing the boundaries of the highlighting rectangles in terms of caret position, note that for <span class="content_text">Figure 1-25</span>, it is not possible to simply say that the highlighting extends from the caret position of offset 2 to the caret position of offset 6. Using the definitions of caret position given earlier, however, it is possible to define the selection range as two separate rectangles, one extending from offset 4 to offset 2, and another extending from offset 12 to offset 6 (assuming for the ambiguous offsets—4 and 12—that the current text direction equals the primary line direction).<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_597"></a></p><a name="//apple_ref/doc/uid/TP30000028-TPXREF194" title="Converting Screen Position to Text Offset"></a><h3>Converting Screen Position to Text Offset</h3><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_598"></a><p>Caret positioning and highlighting, as just discussed, require conversion from text offset to screen position. But that is only half the picture; it is just as necessary to be able to convert from screen position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_599"></a> to text offset. For example, if the user clicks the cursor within your displayed text, you need to be able to determine the offset in your text buffer equivalent to that mouse-down event. <strong>Hit-testing</strong><a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_600"></a> is the process of obtaining the location of an event relative to the position of onscreen glyphs and to the corresponding offset between character codes in memory. You can use the location information obtained from hit-testing to set the insertion point (that is, the caret) or selection range (highlighting).</p><p>ATSUI does most of this work for you. It provides functions that convert a screen position to a memory offset (and vice versa). These functions work properly with bidirectional text and with text that has been rendered with ligatures and contextual forms.</p><p>Determining the character associated with a screen position requires first defining the caret position associated with a given screen position. Once that is done, the previously defined relationship between caret position and text offset can be used to find the character.</p><p><span class="content_text">Figure 1-26</span> shows the cursor positioned within a line of text at the moment of a mouse click. A mouse-down event can occur anywhere within the area of a glyph, but the caret position<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_601"></a> that is to be derived from that event must be a thin line that falls between two glyphs.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJBIECG" title="Figure 1-26Interpreting caret position from a mouse-down event"></a><p><strong>Figure 1-26&nbsp;&nbsp;</strong>Interpreting caret position from a mouse-down event</p><img src = "../art/caretposmouseuni.gif" alt = "Interpreting caret position from a mouse-down event" width="312" height="154"></div><br/><p>A line of displayed glyphs is divided by ATSUI into a series of mouse-down regions. A mouse-down region is the screen area within which any mouse click yields the same caret position. For example, a mouse click that occurs anywhere between the leading edge of a glyph and the center of that glyph results in a caret position at the leading edge of that glyph. For unidirectional text, mouse-down regions extend from the center of one glyph to the center of the next glyph (except at the ends of a line), as <span class="content_text">Figure 1-26</span> shows. A mouse click anywhere within the region results in a caret position between the two glyphs.</p><p>At line ends, and at the boundaries between text of different line directions, <a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_602"></a>mouse-down regions are smaller and interpreting them is more complex. As <span class="content_text">Figure 1-27</span> shows, the mouse-down regions at direction boundaries extend only from the leading or trailing edges of the bounding glyphs to their centers. Note that the shaded part of <span class="content_text">Figure 1-26</span> is a single mouse-down region, whereas each of the shaded parts of <span class="content_text">Figure 1-27</span> are two mouse-down regions.</p><br/><div><a name="//apple_ref/doc/uid/TP30000028-BAJIIFFC" title="Figure 1-27Mouse-down regions and caret positions in bidirectional text"></a><p><strong>Figure 1-27&nbsp;&nbsp;</strong>Mouse-down regions and caret positions in bidirectional text</p><img src = "../art/caretposmousemulti.gif" alt = "Mouse-down regions and caret positions in bidirectional text" width="455" height="288"></div><br/><p>How do mouse-down regions<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_603"></a> relate to offsets? Using <span class="content_text">Figure 1-27</span> as an example, consider the two mouse-down regions 3a and 12a. Keep in mind that the primary line direction is right to left. </p><ul class="spaceabove"><li class="li"><p>A mouse click within region 3a is associated with the trailing edge of the Arabic character. To insert Arabic text, your application might draw a primary caret (or single caret) at caret position 3, and place the insertion point at offset 3 in the buffer. (If you are drawing a dual caret, the secondary caret should be at caret position 12, which also corresponds to an insertion point at offset 4 in the buffer.) </p></li><li class="li"><p>A mouse click within region 12a is associated with the leading edge of the Roman character. To insert Roman text, your application might, draw a secondary caret (or single caret) at caret position 12, and place the insertion point at offset 3 in the buffer. (If you are drawing a dual caret, the primary caret should be at caret position 3, which also corresponds to an insertion point at offset 3 in the buffer.)</p></li></ul><p>Thus mouse clicks in two widely separated areas of the screen can lead to an identical caret display and to a single insertion point in the text buffer. One, however, permits insertion of Roman text, the other Arabic text, and the insertions occur at different screen locations. <a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_604"></a></p><p>Mouse clicks in regions 3b and 12b in <span class="content_text">Figure 1-27</span> would lead to just the opposite situation: a primary caret at caret position 12, a secondary caret at caret position 3, and an insertion point at offset 12 in the text buffer.<a name="//apple_ref/doc/uid/TP30000028-DontLinkElementID_605"></a></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../atsui_chap1/atsui_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../atsui_chap3/atsui_concepts2.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/ATSUI_Concepts/atsui_chap2/atsui_concepts.html%3Fid%3DTP30000984-2.6&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/ATSUI_Concepts/atsui_chap2/atsui_concepts.html%3Fid%3DTP30000984-2.6&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/ATSUI_Concepts/atsui_chap2/atsui_concepts.html%3Fid%3DTP30000984-2.6&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
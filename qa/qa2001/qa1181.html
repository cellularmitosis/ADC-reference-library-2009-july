<HTML><HEAD>   <title>Technical Q&amp;A QA1181: Process Carbon Events Not Delivered in 10.2</title><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><meta name="keywords" content="process launch/termination, Carbon events, Jaguar"><meta name="Description" content="Technical Q&amp;A QA1181: This Q&amp;A describes how to work arounda bug in Mac OS X 10.2 that prevents process Carbon eventsfrom being delivered."><meta name="categories" content="Human Interface Toolbox and Processes"><meta name="week-posted" content="Aug 26, 2002 - Aug 30, 2002"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001710" title="Process Carbon Events Not Delivered in 10.2"></a><P><!-- top_of_header_marker_comment --> <!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/Carbon/index.html">Carbon</a> &gt; <a href="../../technicalqas/Carbon/idxProcessManagement-date.html">Process Management</a> &gt; </p><!-- end_header_information --> <!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QA1181</div>
<div id="pageheadsub">Process Carbon Events Not Delivered in 10.2</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --></P><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600>   <TR>      <td align="left">         <P><!-- begin_content -->                  <hr width=500 align=center>                  </P>                  <P id=p2>Q: I'm writing a Carbon application that tracks the         list of running processes using the technique described in         <a href="../../technotes/tn/tn2050.html">Technote         2050</A>. Under Mac OS X 10.2 I'm not receiving any         <CODE>kEventAppLaunched</CODE>,         <CODE>kEventAppFrontSwitched</CODE>, or         <CODE>kEventAppTerminated</CODE> events. Any ideas?</P>                  <P id=p4>A: This is a bug in Mac OS X 10.2 (r. 2998556),         which is an unfortunate side effect of another change         (to initialize the Process Manager         lazily, which allows programs that link with Carbon but do         not use the high-level toolbox to run when no user is logged         in). The simplest workaround is to force the         initialization of the Process Manager before installing your         Carbon event handlers. You can do this by making any Process         Manager call before you call         <CODE>InstallApplicationEventHandler</CODE>.         Listing 1 shows the recommended way of         doing this.</P>                           <BR><BR>         <CENTER><TABLE BORDER=0 CELLPADDING=4 WIDTH=550><TR><td align="left"><P><B>Listing 1</B>. Initializing the Process Manager.</P></TD></TR><TR><td bgcolor="#E6E6E6" align=left><pre>// Work around a bug (r. 2998556) in Mac OS X 10.2 by forcing// the Process Manager to initialize itself.{    ProcessSerialNumber junkPSN;    (void) GetCurrentProcess ( &amp;junkPSN );}// Now call InstallApplicationEventHandler.</pre></TD></TR></TABLE></CENTER><BR><BR>                                               <P id=p4>This bug will be fixed in a future release of Mac         OS X, however there is no pressing         need to remove or conditionalize this workaround because it         is both simple and cheap.</P>                  <P>                  <hr width=500 align=center>                  </P>                  <!-- begin_date --><H4><CENTER>[Jul 31 2002]</CENTER></H4><!-- end_date -->      </TD>   </TR></TABLE></CENTER><P><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2001/qa1181.html%3Fid%3DDTS10001710-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2001/qa1181.html%3Fid%3DDTS10001710-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2001/qa1181.html%3Fid%3DDTS10001710-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></P></BODY></HTML>
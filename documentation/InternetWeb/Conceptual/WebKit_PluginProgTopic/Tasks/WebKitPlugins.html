<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebKit Plug-In Programming Topics: Creating Plug-ins with Cocoa and WebKit</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Creating Plug-ins with Cocoa and WebKit"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/30001249" title="Creating Plug-ins with Cocoa and WebKit"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../AppleApplications/index.html#//apple_ref/doc/uid/TP30000440-TP30000418" target="_top">Apple Applications</a> &gt; <a href="../../../../AppleApplications/Safari-date.html#//apple_ref/doc/uid/TP30000440-TP30000418-TP30001042" target="_top">Safari</a> &gt; <a href="../index.html" target="_top">WebKit Plug-In Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/AboutPlugins.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="NetscapePlugins.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/30001249-BAJGJJAH" title="Creating Plug-ins with Cocoa and WebKit"></a><hr /><H1>Creating Plug-ins with Cocoa and WebKit </H1><p>You can write browser plug-ins with the native WebKit plug-in API. Written in Objective-C, WebKit-based plug-ins are supported only by WebKit-based applications and cannot be ported to other platforms. The API is extremely simple, so many fewer lines of code are required to deploy a WebKit plug-in versus a Netscape one and you can use Xcode and Interface Builder to design and implement a plug-in’s functionality.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="WebKitPlugins.html#//apple_ref/doc/uid/30001249-200367">Introduction To WebKit Plug-ins</a>
				
			<br/>
			
        
			
			
				<a href="WebKitPlugins.html#//apple_ref/doc/uid/30001249-200397">Becoming A Plug-in</a>
				
			<br/>
			
        
			
			
				<a href="WebKitPlugins.html#//apple_ref/doc/uid/30001249-200688">Using Plug-in Scripting</a>
				
			<br/>
			
        
			
			
				<a href="WebKitPlugins.html#//apple_ref/doc/uid/30001249-201009">Implementing a Plug-in</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/30001249-200367" title="Introduction To WebKit Plug-ins"></a><h2>Introduction To WebKit Plug-ins</h2><p>WebKit plug-ins are based on core Cocoa API. The plug-in itself is simply an instance of an NSView, a common class in many other Objective-C applications. It provides a cornucopia of features, including the management of events such as mouse and keyboard inputs. Your plug-in inherits these “for free.” URL loading is also inherited, via NSURLConnection. You can access WebKit classes through the plug-in’s WebFrame and the browser scripting environment through the WebKit WebScriptMethods protocol. </p><a name="//apple_ref/doc/uid/30001249-200397" title="Becoming A Plug-in"></a><h2>Becoming A Plug-in</h2><p>For the plug-in to act like a standard web browser plug-in, it needs to conform to the <code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/cat/WebPlugIn" target="_top">WebPlugIn</a></code> informal protocol. This protocol has just one required constructor method, <code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugInViewFactory_Protocol/Reference/Reference.html#//apple_ref/occ/intfcm/WebPlugInViewFactory/plugInViewWithArguments:" target="_top">plugInViewWithArguments:</a></code>, which your NSView subclass should implement.</p><p>Optional methods you can implement include:</p><ul class="ul"><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInInitialize" target="_top">webPlugInInitialize</a></code>, which is called just after the plug-in is created and allows you to perform any prestartup actions in the plug-in.</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInStart" target="_top">webPlugInStart</a></code>, which is called when the plug-in should begin doing whatever it has been designed to do.</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInStop" target="_top">webPlugInStop</a></code>, which is called to tell the plug-in to cease its usual actions.</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInDestroy" target="_top">webPlugInDestroy</a></code>, which is called to give the plug-in a chance to deallocate any objects or resources it may have created or retained.</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInSetIsSelected:" target="_top">webPlugInSetIsSelected:</a></code>, which is called when the selection state of the plug-in has changed, allowing you to do any custom drawing or actions based off that event.</p></li></ul><p>These methods are implemented by the <strong>container</strong> of the plug-in; that is, they affect the web view that surrounds the plug-in:</p><ul class="ul"><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugInContainer_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInContainerLoadRequest:inFrame:" target="_top">webPlugInContainerLoadRequest:inFrame:</a></code> allows you to tell the browser to load a URL request into a given frame (or the container’s frame itself).</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugInContainer_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInContainerShowStatus:" target="_top">webPlugInContainerShowStatus:</a></code> allows you to tell the container to print a status message to the browser’s status bar.</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugInContainer_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInContainerSelectionColor" target="_top">webPlugInContainerSelectionColor</a></code> returns the color that the container should use to draw plug-in’s selection state when it is selected.</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Classes/DOMDocument_WebKitAdditions/Reference/Reference.html#//apple_ref/occ/instm/DOMDocument/webFrame" target="_top">webFrame</a></code> allows you to access the other WebKit elements of the container, such as its <code><!--a target="_top" -->WebView<!--/a--></code>.</p></li></ul><a name="//apple_ref/doc/uid/30001249-200688" title="Using Plug-in Scripting"></a><h2>Using Plug-in Scripting</h2><p>The WebKit API allows your plug-ins to easily access a scripting environment (such as JavaScript) from the plug-in, and vice versa. Your plug-in can call JavaScript methods and read JavaScript properties, while your containing page can call methods from your plug-in from its JavaScript environment.</p><p>When the browser encounters your plug-in, it will use JavaScript to request the object representing your plug-in using <code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/objectForWebScript" target="_top">objectForWebScript</a></code>. The object that you return from that method represents the interface to your plug-in. This can be, but is not required to be, the same object as your plug-in. In that case, your implementation of <code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/objectForWebScript" target="_top">objectForWebScript</a></code> would simply look like:</p><div class="codesample"><table><tr><td scope="row"><pre>- (id)objectForWebScript<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    return self;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>The object you return needs to have control over which of its methods should be visible to the scripting environment. In all likelihood, you don’t want all of your methods exposed to the environment, which they will be, by default. To counteract this, implement these methods:</p><ul class="ul"><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebScripting_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/webScriptNameForSelector:" target="_top">webScriptNameForSelector:</a></code> returns the name that a given selector should inherit so that it can be called from the JavaScript environment. The default renaming scheme (to prevent against namespace conflicts) can lead to confusing method names in the scripting environment, so you should make a habit of rewriting the names of all your exposed methods. For example, if you had an Objective-C method called <code>startMovieAtBeginning</code>, you might want it to reflect its own name in the scripting environment instead of going through a rewrite. An implementation example would look like:</p><div class="codesample"><table><tr><td scope="row"><pre>(NSString *)webScriptNameForSelector:(SEL)selector {<span></span></pre></td></tr><tr><td scope="row"><pre>    if(selector == @selector(startMovieAtBeginning)) {<span></span></pre></td></tr><tr><td scope="row"><pre>        return @"startMovieAtBeginning";<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return nil;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebScripting_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/isSelectorExcludedFromWebScript:" target="_top">isSelectorExcludedFromWebScript:</a></code> lets the scripting environment know whether or not a given Objective-C method in your plug-in can be called from the scripting environment. A common mistake first-time plug-in developers make is forgetting to implement this method, causing the plug-in to expose no methods and making the plug-in unscriptable. As a security precation this method returns <code>YES</code> by default exposing no methods. You want to expose only methods that you know are secure, to do this the function should return <code>NO</code>. You may only want to export a couple of your Objective-C methods to JavaScript. In this example, the plug-in’s <code>play</code> method can be called from JavaScript, but any other method cannot::</p><div class="codesample"><table><tr><td scope="row"><pre>+ (BOOL)isSelectorExcludedFromWebScript:(SEL)selector {<span></span></pre></td></tr><tr><td scope="row"><pre>    if(selector == @selector(play)) {<span></span></pre></td></tr><tr><td scope="row"><pre>        return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return YES;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li></ul><p>Similarly, you want to give the scripting environment access to all of your properties. The syntax is very similar for restricting those:</p><ul class="ul"><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebScripting_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/webScriptNameForKey:" target="_top">webScriptNameForKey:</a></code> should be implemented to return a more human-readable name for a method to the scripting environment.</p></li><li class="li"><p><code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebScripting_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/isKeyExcludedFromWebScript:" target="_top">isKeyExcludedFromWebScript:</a></code> allows you to selectively expose properties to the scripting environment.</p></li></ul><a name="//apple_ref/doc/uid/30001249-201009" title="Implementing a Plug-in"></a><h2>Implementing a Plug-in</h2><p>In this example, you create a QuickTime movie plug-in. This is a powerful example, because it requires very few lines of code and yet provides a useful extension to a web browser or WebKit application. </p><p>First, you need to create the view class. In this case, you use Cocoa’s built-in NSMovieView and subclass it to create your <code>PlugInMovieView</code> (see <span class="content_text">Listing 1</span>).</p><a name="//apple_ref/doc/uid/30001249-201226-CJBDHDBD" title="Listing 1PlugInMovieView header (PlugInMovieView.h)"></a><p class="codesample"><a name="//apple_ref/doc/uid/30001249-201226" title="Listing 1PlugInMovieView header (PlugInMovieView.h)"></a><strong>Listing 1&nbsp;&nbsp;</strong>PlugInMovieView header (PlugInMovieView.h)</p><div class="codesample"><table><tr><td scope="row"><pre>#import &lt;AppKit/AppKit.h><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@interface PlugInMovieView : NSMovieView<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSDictionary *_arguments;<span></span></pre></td></tr><tr><td scope="row"><pre>    BOOL _loadedMovie;<span></span></pre></td></tr><tr><td scope="row"><pre>    BOOL muted;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)setArguments:(NSDictionary *)arguments;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>Now you can write the implementation. You first need to conform to the <code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/cat/WebPlugIn" target="_top">WebPlugIn</a></code> protocol, by implementing <code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugInViewFactory_Protocol/Reference/Reference.html#//apple_ref/occ/intfcm/WebPlugInViewFactory/plugInViewWithArguments:" target="_top">plugInViewWithArguments:</a></code> (see <span class="content_text">Listing 2</span>). Create an instance of your movie view, assign it the arguments passed into your method, and return it. Notice that an accessor method is being used to set the arguments—this is good Cocoa coding style.</p><a name="//apple_ref/doc/uid/30001249-216989-BCICDEFH" title="Listing 2Returning your plug-in&acirc;&#128;&#153;s view"></a><p class="codesample"><a name="//apple_ref/doc/uid/30001249-216989" title="Listing 2Returning your plug-in&acirc;&#128;&#153;s view"></a><strong>Listing 2&nbsp;&nbsp;</strong>Returning your plug-in’s view</p><div class="codesample"><table><tr><td scope="row"><pre>+ (NSView *)plugInViewWithArguments:(NSDictionary *)arguments<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    PlugInMovieView *movieView = [[[self alloc] initWithFrame:NSZeroRect] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>    [movieView setArguments:arguments];<span></span></pre></td></tr><tr><td scope="row"><pre>    return movieView;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Now that you’ve returned the view, you need to make a decision. Do you have any operations to perform on initialization? In the case of NSMovieView, you can set a movie’s controller to be visible (or not) and also specify whether or not you’d like the user to be able to adjust its size. In this case, you should show the controller but prevent the user from resizing the movie in the frame—the most common layout for embedded movies (see <span class="content_text">Listing 3</span>).</p><a name="//apple_ref/doc/uid/30001249-217035-CJBGHJGH" title="Listing 3Initializing the movie plug-in"></a><p class="codesample"><a name="//apple_ref/doc/uid/30001249-217035" title="Listing 3Initializing the movie plug-in"></a><strong>Listing 3&nbsp;&nbsp;</strong>Initializing the movie plug-in</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)webPlugInInitialize<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    [self showController:YES adjustingSize:NO];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>From the enclosing container, nestled in an embed tag, you’ll receive a URL pointing to a movie. This will arrive in one of the keys specified by the <em>arguments</em> dictionary that you set in <span class="content_text">Listing 2</span>. Use that URL to load and play the movie (see <span class="content_text">Listing 4</span>).</p><a name="//apple_ref/doc/uid/30001249-201692-CJBEJAGA" title="Listing 4Loading and playing a movie from a URL"></a><p class="codesample"><a name="//apple_ref/doc/uid/30001249-201692" title="Listing 4Loading and playing a movie from a URL"></a><strong>Listing 4&nbsp;&nbsp;</strong>Loading and playing a movie from a URL</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)webPlugInStart<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (!_loadedMovie) {<span></span></pre></td></tr><tr><td scope="row"><pre>        _loadedMovie = YES;<span></span></pre></td></tr><tr><td scope="row"><pre>        NSString *URLString = [[_arguments objectForKey:WebPlugInAttributesKey] objectForKey:@"src"];<span></span></pre></td></tr><tr><td scope="row"><pre>        if ([URLString length] != 0) {<span></span></pre></td></tr><tr><td scope="row"><pre>            NSURL *baseURL = [_arguments objectForKey:WebPlugInBaseURLKey];<span></span></pre></td></tr><tr><td scope="row"><pre>            NSURL *URL = [NSURL URLWithString:URLString relativeToURL:baseURL];<span></span></pre></td></tr><tr><td scope="row"><pre>            NSMovie *movie = [[NSMovie alloc] initWithURL:URL byReference:NO];<span></span></pre></td></tr><tr><td scope="row"><pre>            [self setMovie:movie];<span></span></pre></td></tr><tr><td scope="row"><pre>            [movie release];<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [self start:self];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Eventually, all good things must come to an end, and so shall your plug-in. This will be announced by a call to <code><a href="../../../../Cocoa/Reference/WebKit/Protocols/WebPlugIn_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webPlugInStop" target="_top">webPlugInStop</a></code>. You should take the opportunity to stop the movie from playing (see <span class="content_text">Listing 5</span>).</p><a name="//apple_ref/doc/uid/30001249-224231-CJBFHGHE" title="Listing 5Stopping the movie"></a><p class="codesample"><a name="//apple_ref/doc/uid/30001249-224231" title="Listing 5Stopping the movie"></a><strong>Listing 5&nbsp;&nbsp;</strong>Stopping the movie</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)webPlugInStop<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    [self stop:self];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>You’ve just implemented a fully functional WebKit movie-playing plug-in. You could build this code, install the plug-in, and have your own working QuickTime player embedded in Safari or a WebKit-based application. However, you might want to add a little more flair and use a form—with HTML buttons—to play and pause the movie. It just takes a few more lines of code (see <span class="content_text">Listing 6</span>).</p><a name="//apple_ref/doc/uid/30001249-224271-CJBFCJIC" title="Listing 6Opening the plug-in to JavaScript"></a><p class="codesample"><a name="//apple_ref/doc/uid/30001249-224271" title="Listing 6Opening the plug-in to JavaScript"></a><strong>Listing 6&nbsp;&nbsp;</strong>Opening the plug-in to JavaScript</p><div class="codesample"><table><tr><td scope="row"><pre>+ (BOOL)isSelectorExcludedFromWebScript:(SEL)selector<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (selector == @selector(play) || selector == @selector(pause)) {<span></span></pre></td></tr><tr><td scope="row"><pre>        return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return YES;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>+ (BOOL)isKeyExcludedFromWebScript:(const char *)property<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (strcmp(property,"muted") == 0) {<span></span></pre></td></tr><tr><td scope="row"><pre>        return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return YES;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (id)objectForWebScript<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    return self;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)play<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    [self start:self];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)pause<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    [self stop:self];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>You only had to add two extra methods, <code>play</code> and <code>pause</code>, so that the buttons in the interface could be tied to public methods. Then you exposed those methods to the JavaScript scripting environment.</p><p>If you want to explore further, this example is available at: </p><div class="codesample"><table><tr><td scope="row"><pre>    /Developer/Examples/WebKit/WebKitMoviePlugIn<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Concepts/AboutPlugins.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="NetscapePlugins.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-10-15<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/InternetWeb/Conceptual/WebKit_PluginProgTopic/Tasks/WebKitPlugins.html%3Fid%3DTP40001521-1.8&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/InternetWeb/Conceptual/WebKit_PluginProgTopic/Tasks/WebKitPlugins.html%3Fid%3DTP40001521-1.8&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/InternetWeb/Conceptual/WebKit_PluginProgTopic/Tasks/WebKitPlugins.html%3Fid%3DTP40001521-1.8&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

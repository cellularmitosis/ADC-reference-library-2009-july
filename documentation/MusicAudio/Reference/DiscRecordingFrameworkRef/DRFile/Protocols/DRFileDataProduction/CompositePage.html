<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
    "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html><head>
    <title>DRFileDataProduction</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="generator" content="HeaderDoc" />
<link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style></head><body bgcolor="#ffffff">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/MusicAudio/index.html#//apple_ref/doc/uid/TP30001281-TP30000428" target="_top">Audio</a> <b>&gt;</b> <a href="../../../../../../../reference/MusicAudio/idxCarbon-date.html#//apple_ref/doc/uid/TP30001281-TP30000428-TP30000494" target="_top">Carbon</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/discrecording" target="_top">Disc Recording Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>


<!-- end of header -->
<a name="top"></a>
<a name="//apple_ref/doc/protocol/DRFileDataProduction" title="DRFileDataProduction"></a>
<hr><table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h1><a name="DRFileDataProduction">DRFileDataProduction</a></h1>
</td></tr></table><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr><td scope="row"><b>Declared In:</b></td><td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">DRFile.h</a></div></div></td></tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract -->	Informal protocol describing methods implemented by the file data producer.
<!-- end abstract --></p>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->	This protocol defines those methods that a file data producer 
instance must implement. A file data producer is the object that
resposible for providing the file data to the burn engine on request
<!-- end discussion --></p>
<hr><br><h2>Methods</h2>
<a name="HeaderDoc_methods"></a>
<dl>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRFileDataProduction/calculateSizeOfFile:fork:estimating:" target="doc">-calculateSizeOfFile:fork:estimating:</a></tt></dt>
<dd>Calculates the size of the specified fork of a file.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRFileDataProduction/cleanupFileAfterBurn:" target="doc">-cleanupFileAfterBurn:</a></tt></dt>
<dd>Cleanup the file object once the burn is complete.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRFileDataProduction/prepareFileForBurn:" target="doc">-prepareFileForBurn:</a></tt></dt>
<dd>Prepare the file object for burning.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRFileDataProduction/prepareFileForVerification:" target="doc">-prepareFileForVerification:</a></tt></dt>
<dd>Prepare the file object for verification.
</dd>
<dt><tt><a href="CompositePage.html#//apple_ref/occ/intfm/DRFileDataProduction/produceFile:fork:intoBuffer:length:atAddress:blockSize:" target="doc">-produceFile:fork:intoBuffer:length:atAddress:blockSize:</a></tt></dt>
<dd>Produces the specified fork contents for burning.
</dd>
</dl>
<hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRFileDataProduction/calculateSizeOfFile:fork:estimating:;  name=DRFileDataProduction::calculateSizeOfFile:fork:estimating: -->
<a name="//apple_ref/occ/intfm/DRFileDataProduction/calculateSizeOfFile:fork:estimating:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="calculateSizeOfFile:fork:estimating:">calculateSizeOfFile:fork:estimating:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Calculates the size of the specified fork of a file.
<!-- end abstract --></p>
<p></p><pre>- (<!-- a --><span class="type">uint64_t</span><!-- /a -->) <!-- a --><span class="function">calculateSizeOfFile</span><!-- /a -->:(<a href="../../Classes/DRFile/index.html#//apple_ref/occ/cl/DRFile" target="_top" class="type"><span class="type">DRFile</span></a><span class="type">*</span>)<span class="param">file</span> <!-- a --><span class="function">fork</span><!-- /a -->:(<a href="../../CompositePage.html#//apple_ref/c/tdef/DRFileFork" target="_top" class="type"><span class="type">DRFileFork</span></a>)<span class="param">fork</span> 
        <!-- a --><span class="function">estimating</span><!-- /a -->:(<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>)<span class="var">estimate</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>file</code></dt><dd>The file object.</dd>
<dt><code>fork</code></dt><dd>The fork of the file whose size is to be calculated.</dd>
<dt><code>estimate</code></dt><dd>If the file size should be estimated or exact.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The length of the file's fork.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->This method may be sent at any time after the file object has been instantiated. 
Requests that the recevier calculate the byte size of a file's fork (for instance, data fork or resource fork).
<br><br>
If estimate is <i>YES</i>, you are being asked for an estimate of the final 
fork size, perhaps to provide an estimate of the track size, and do not 
have to be exact. Estimates should err on the high side; it's better to 
overestimate than underestimate. An estimate call may be made at any time.
<br><br>
If estimate is <i>NO</i>, you are being asked for
the actual fork size, to be used in the burn. This call is only
made in the burn phase.
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRFileDataProduction/cleanupFileAfterBurn:;  name=DRFileDataProduction::cleanupFileAfterBurn: -->
<a name="//apple_ref/occ/intfm/DRFileDataProduction/cleanupFileAfterBurn:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="cleanupFileAfterBurn:">cleanupFileAfterBurn:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Cleanup the file object once the burn is complete.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a>) <!-- a --><span class="function">cleanupFileAfterBurn</span><!-- /a -->:(<a href="../../Classes/DRFile/index.html#//apple_ref/occ/cl/DRFile" target="_top" class="type"><span class="type">DRFile</span></a><span class="type">*</span>)<span class="var">file</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>file</code></dt><dd>The file object.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Sent to the receiver after the burn completes. This would be an appropriate 
place to close files, or do any other teardown work needed. This message will 
always be sent regardless of whether the burn succeeded or failed
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRFileDataProduction/prepareFileForBurn:;  name=DRFileDataProduction::prepareFileForBurn: -->
<a name="//apple_ref/occ/intfm/DRFileDataProduction/prepareFileForBurn:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="prepareFileForBurn:">prepareFileForBurn:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Prepare the file object for burning.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>) <!-- a --><span class="function">prepareFileForBurn</span><!-- /a -->:(<a href="../../Classes/DRFile/index.html#//apple_ref/occ/cl/DRFile" target="_top" class="type"><span class="type">DRFile</span></a><span class="type">*</span>)<span class="var">file</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>file</code></dt><dd>The file object.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value --><i>YES</i> if the burn should proceed.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Sent to the recevier before the burn begins. This would be an appropriate 
method to open files, or do any other prep work needed. The disc's entire 
hierarchy is completely in place and can be queried if needed. 
<br><br>
After this call, the burn's content is locked down, and you should be
able to respond to the <a href="CompositePage.html#//apple_ref/occ/intfm/DRFileDataProduction/calculateSizeOfFile:fork:estimating:">calculateSizeOfFile:fork:estimating: </a> messages with exact values.
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRFileDataProduction/prepareFileForVerification:;  name=DRFileDataProduction::prepareFileForVerification: -->
<a name="//apple_ref/occ/intfm/DRFileDataProduction/prepareFileForVerification:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="prepareFileForVerification:">prepareFileForVerification:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Prepare the file object for verification.
<!-- end abstract --></p>
<p></p><pre>- (<a href="../../../../../../Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/tdef/BOOL" target="_top" class="type"><span class="type">BOOL</span></a>) <!-- a --><span class="function">prepareFileForVerification</span><!-- /a -->:(<a href="../../Classes/DRFile/index.html#//apple_ref/occ/cl/DRFile" target="_top" class="type"><span class="type">DRFile</span></a><span class="type">*</span>)<span class="var">file</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>file</code></dt><dd>The file object.</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value --><i>YES</i> to indicate that the verification should proceed and <i>NO</i> to indicate a failure occurred.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Sent during the burn (after production and before the <a href="CompositePage.html#//apple_ref/occ/intfm/DRFileDataProduction/cleanupFileAfterBurn:">cleanupFileAfterBurn: </a> message) to 
indicate that verification is about to begin. Now would be a good
time to rewind to the start of the file, reset state machines, or do whatever else 
is needed to prepare to produce again.
<!-- end discussion --></p>
<p></p><hr><!-- headerDoc=intfm;  uid=//apple_ref/occ/intfm/DRFileDataProduction/produceFile:fork:intoBuffer:length:atAddress:blockSize:;  name=DRFileDataProduction::produceFile:fork:intoBuffer:length:atAddress:blockSize: -->
<a name="//apple_ref/occ/intfm/DRFileDataProduction/produceFile:fork:intoBuffer:length:atAddress:blockSize:"></a>
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><h3><a name="produceFile:fork:intoBuffer:length:atAddress:blockSize:">produceFile:fork:intoBuffer:length:atAddress:blockSize:</a></h3>
</td></tr></table><hr><p><!-- begin abstract -->Produces the specified fork contents for burning.
<!-- end abstract --></p>
<p></p><pre>- (<!-- a --><span class="type">uint32_t</span><!-- /a -->) <!-- a --><span class="function">produceFile</span><!-- /a -->:(<a href="../../Classes/DRFile/index.html#//apple_ref/occ/cl/DRFile" target="_top" class="type"><span class="type">DRFile</span></a><span class="type">*</span>)<span class="param">file</span> <!-- a --><span class="function">fork</span><!-- /a -->:(<a href="../../CompositePage.html#//apple_ref/c/tdef/DRFileFork" target="_top" class="type"><span class="type">DRFileFork</span></a>)<span class="param">fork</span> 
        <!-- a --><span class="function">intoBuffer</span><!-- /a -->:(<!-- a --><span class="type">char</span><!-- /a --><span class="type">*</span>)<span class="param">buffer</span> <!-- a --><span class="function">length</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="param">bufferLength</span> 
        <!-- a --><span class="function">atAddress</span><!-- /a -->:(<!-- a --><span class="type">uint64_t</span><!-- /a -->)<span class="param">address</span> <!-- a --><span class="function">blockSize</span><!-- /a -->:(<!-- a --><span class="type">uint32_t</span><!-- /a -->)<span class="var">blockSize</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>file</code></dt><dd>The file object.</dd>
<dt><code>fork</code></dt><dd>The fork of the file to produce.</dd>
<dt><code>buffer</code></dt><dd>The buffer to produce data into.</dd>
<dt><code>bufferLength</code></dt><dd>The length of the buffer to produce data into</dd>
<dt><code>address</code></dt><dd>The byte address in the file that the burn engine is requesting</dd>
<dt><code>blockSize</code></dt><dd>The size of the track blocks</dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5><p><!-- begin return value -->The number of bytes produced.

<!-- end return value --></p><h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5><p><!-- begin discussion -->Sent during the burn (after the <!-- a -->prepareFileForBurn <!-- /a --> message) requesting that the receiver
produce the specified fork contents. 
<br><br>
The recevier should fill up the buffer passed in as full as possible 
and then return control to the caller. While burning keeping the drive's buffer full is 
of utmost importance, so you should not perform lengthy operations or block for data in this method.
This method should return the number of bytes actually in the buffer or 0 to indicate that there
was an error producing the data.
<br><br>
You may be asked to produce twice, once during the actual burn and once during 
verification depending on the verification type of the track.
<!-- end discussion --></p>
<p></p><p><!-- start of footer -->

	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Reference/DiscRecordingFrameworkRef/DRFile/Protocols/DRFileDataProduction/CompositePage.html%3Fid%3DTP40004404-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Reference/DiscRecordingFrameworkRef/DRFile/Protocols/DRFileDataProduction/CompositePage.html%3Fid%3DTP40004404-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Reference/DiscRecordingFrameworkRef/DRFile/Protocols/DRFileDataProduction/CompositePage.html%3Fid%3DTP40004404-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>



<!-- end of footer -->
Last Updated: 2008-04-01
</p></body></html>

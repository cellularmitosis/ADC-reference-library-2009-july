<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> The Transformation Matrix</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>QuickTime API Documentation</I><P><A target="doc" HREF="xxIntroductions.16.htm">Previous</A> | <A target="doc" HREF="xxIntroductions.12.htm">Chapter Top</A> | <A target="doc" HREF="xxIntroductions.1.htm">Chapter Contents</A> | <A target="doc" HREF="xxIntroductions.18.htm">Next</A> | <!-- QTnavbar end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=26240"> </A><A NAME="18006"> </A>The Transformation Matrix</H1><P CLASS="T0.Text0"><A NAME="pgfId=26245"> </A><A NAME="marker=26241"> </A><A NAME="marker=26242"> </A><A NAME="marker=26243"> </A><A NAME="marker=26244"> </A>The Movie Toolbox makes extensive use of transformation matrices to define graphical operations that are performed on movies when they are displayed. A <B CLASS="bold">transformation matrix</B> defines how to map points from one coordinate space into another coordinate space.  By modifying the contents of a transformation matrix, you can perform several standard graphical  display operations, including translation, rotation, and scaling. The Movie Toolbox provides a set of functions that make it easy for you to manipulate translation matrices. Those functions are discussed in  <A target="doc" HREF="../QT/iqMovieToolbox.51.htm#39429">&quot;Matrix Functions&quot;</A>.  The remainder of this section provides an introduction to matrix operations in a graphical environment.</P><P CLASS="T1.Text1"><A NAME="pgfId=26252"> </A>The matrix used to accomplish two-dimensional transformations is described mathematically by a 3-by-3 matrix. Figure 0-29 shows a sample 3-by-3 matrix. Note that QuickTime assumes that the values of the matrix elements u and v are always 0.0, and the value of matrix element w is always 1.0.</P><P CLASS="Fg.Figure"><A NAME="pgfId=26261"> </A>Figure 0-29	<A NAME="39949"> </A>A point transformed by a 3-by-3 matrix<DIV><IMG SRC="xxIntroductions-6.gif"></DIV></P><DIV><IMG SRC="xxIntroductions-32.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=26262"> </A>During display operations, the contents of a 3-by-3 matrix transform a point (x,y) into a point (x',y') by means of the following equations:</P><P CLASS="T1.Text1"><A NAME="pgfId=26263"> </A>x' = ax + cy + tx</P><P CLASS="T1.Text1"><A NAME="pgfId=26264"> </A>y' = bx + dy + ty</P><P CLASS="T1.Text1"><A NAME="pgfId=26268"> </A>For example, the matrix shown in Figure 0-30 performs no transformation. It is referred to as the <B CLASS="bold">identity matrix.</B><A NAME="marker=26269"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=26275"> </A>Figure 0-30	<A NAME="28813"> </A>The identity matrix<DIV><IMG SRC="xxIntroductions-6.gif"></DIV></P><DIV><IMG SRC="xxIntroductions-33.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=26276"> </A>Using the formulas discussed earlier, you can see that this matrix would generate a new point (x',y') that is the same as the old point (x,y):</P><P CLASS="T1.Text1"><A NAME="pgfId=26277"> </A>x'	 = 1x + 0y + 0</P><P CLASS="T1.Text1"><A NAME="pgfId=26278"> </A>y'	 = 0x + 1y + 0</P><P CLASS="T1.Text1"><A NAME="pgfId=26279"> </A>x' = y and y' = y</P><P CLASS="T1.Text1"><A NAME="pgfId=26280"> </A>In order to move an image by a specified displacement, you perform a translation operation. This operation modifies the x and y coordinates of each point by a specified amount. The matrix shown in Figure 0-31 describes a translation operation.<A NAME="marker=26284"> </A><A NAME="marker=26285"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=26291"> </A>Figure 0-31	<A NAME="11401"> </A>A matrix that describes a translation operation<DIV><IMG SRC="xxIntroductions-6.gif"></DIV></P><DIV><IMG SRC="xxIntroductions-34.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=26292"> </A>You can stretch or shrink an image by performing a scaling operation. This operation modifies the x and y coordinates by some factor. The magnitude of the x and y factors governs whether the new image is larger or smaller than the original. In addition, by making the x factor negative, you can flip the image about the x-axis; similarly, you can flip the image horizontally, about the y-axis, by making the y factor negative. The matrix shown in Figure 0-32 describes a scaling operation.<A NAME="marker=26296"> </A><A NAME="marker=26297"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=26303"> </A>Figure 0-32	<A NAME="39836"> </A>A matrix that describes a scaling operation<DIV><IMG SRC="xxIntroductions-6.gif"></DIV></P><DIV><IMG SRC="xxIntroductions-35.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=26304"> </A>Finally, you can rotate an image by a specified angle by performing a rotation operation. You specify the magnitude and direction of the rotation by specifying factors for both x and y. The matrix shown in Figure 0-33 rotates an image counterclockwise by an angle q. <A NAME="marker=26308"> </A><A NAME="marker=26309"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=26315"> </A>Figure 0-33	<A NAME="13773"> </A>A matrix that describes a rotation operation<DIV><IMG SRC="xxIntroductions-6.gif"></DIV></P><DIV><IMG SRC="xxIntroductions-36.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=26316"> </A>You can combine matrices that define different transformations into a single matrix. The resulting matrix retains the attributes of both transformations. For example, you can both scale and translate an image by defining a matrix similar to that shown in Figure 0-34. <A NAME="marker=26320"> </A><A NAME="marker=26321"> </A><A NAME="marker=26322"> </A><A NAME="marker=26323"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=26329"> </A>Figure 0-34	<A NAME="42358"> </A>A matrix that describes a scaling and translation operation<DIV><IMG SRC="xxIntroductions-6.gif"></DIV></P><DIV><IMG SRC="xxIntroductions-37.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=26330"> </A>You combine two matrices by concatenating them. Mathematically, the two matrices are combined by matrix multiplication. Note that the order in which you concatenate matrices is important--matrix operations are not commutative.<A NAME="marker=26331"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=26332"> </A>Transformation matrices used by the Movie Toolbox contain the following data types:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=31758"> </A>[0] [0]&nbsp;Fixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1] [0]&nbsp;Fixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2] [0]&nbsp;Fract<BR></CODE><CODE CLASS="Cv.Code"><A NAME="pgfId=31762"> </A>[0] [1]&nbsp;Fixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1] [1]&nbsp;Fixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2] [1]&nbsp;Fract<BR></CODE><CODE CLASS="Cv.Code"><A NAME="pgfId=31766"> </A>[0] [2]&nbsp;Fixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1] [2]&nbsp;Fixed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2] [2]&nbsp;Fract<BR></CODE><P CLASS="T1.Text1"><A NAME="pgfId=26336"> </A>Each cell in this table represents the data type of the corresponding element of a 3-by-3 matrix. All of the elements in the first two columns of a matrix are represented by <TT CLASS="cv">Fixed</TT> values. Values in the third column are represented as <TT CLASS="cv">Fract</TT> values. The <TT CLASS="cv">Fract</TT> data type specifies a 32-bit, fixed-point value that contains 2 integer bits and 30 fractional bits. This data type is useful for accurately representing numbers in the range from -2 to 2. For more information about the <TT CLASS="cv">Fract</TT> data type, see <I CLASS="italics">Inside Macintosh: Imaging</I>.<A NAME="marker=26337"> </A><A NAME="marker=26338"> </A><A NAME="marker=26339"> </A><A NAME="marker=26340"> </A><A NAME="marker=26341"> </A><A NAME="marker=26342"> </A><A NAME="marker=26343"> </A></P><hr>&#169; 1997 Apple Computer, Inc.<!-- QTnavbar start --><P><I>QuickTime API Documentation</I><P><A target="doc" HREF="xxIntroductions.16.htm">Previous</A> | <A target="doc" HREF="xxIntroductions.12.htm">Chapter Top</A> | <A target="doc" HREF="xxIntroductions.1.htm">Chapter Contents</A> | <A target="doc" HREF="xxIntroductions.18.htm">Next</A> | <!-- QTnavbar end --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
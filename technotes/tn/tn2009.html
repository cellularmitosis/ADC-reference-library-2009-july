<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN2009: The Browser Control (aka That ListView Thing)</title>    <meta name="keywords" content="DataBrowser CarbonLib List">    <meta name="Description" content="Technical Note TN2009: A description of how to use the DataBrowsercontrol.">    <meta name="categories" content="Human Interface Toolbox, Platforms and Tools and Overview"><meta name="week-posted" content="Dec 4, 2000 - Dec 8, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY bgcolor="#ffffff"><a name="//apple_ref/doc/uid/DTS10003048" title="The Browser Control (aka That ListView Thing)"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxCarbon-date.html">Carbon</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Carbon/idxUserExperience-date.html" target="_blank">Carbon > User Experience</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN2009</div>
<div id="pageheadsub">The Browser Control (aka That ListView Thing)</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">         <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left><!-- begin_toc --><p id="menutext">                            <A HREF="#doc_overview">Overview</A>                        </p>                        <p id="menutext2">                            <A HREF="#aboutit">About the DataBrowser....</A>                            <br>                            <A HREF="#callandcall">You call the DataBrowser, the DataBrowser calls you....</A>                            <br>                            <A HREF="#datadatabrowser">Data &amp; the DataBrowser</A>                            <br>                            <A HREF="#overrows">Rows</A>                            <br>                            <A HREF="#overcolumns">Columns</A>                            <br>                            <A HREF="#overcells">Cells</A>                            <br>                        </p>                        <p id="menutext">                            <A HREF="#dbcreating">Creating DataBrowser Controls</A>                        </p>                        <p id="menutext2">                            <A HREF="#creating_columns">Defining Columns</A>                            <br>                            <A HREF="#collinstall">Installing Columns</A>                            <br>                            <A HREF="#addrow">Installing Rows</A>                            <br>                        </p>                        <p id="menutext">                            <A HREF="#providingdata">Providing and Ordering your Data</A>                        </p>                        <p id="menutext2">                            <A HREF="#providingdata_data">Providing Data</A>                            <br>                            <A HREF="#providingdata_ordering">Ordering Data</A>                            <br>                        </p>                        <p id="menutext">                            <A HREF="#main_callbacks">DataBrowser Call-back Routines</A>                        </p>                        <p id="menutext2">                            <A HREF="#DataBrowserCallbacks">The DataBrowserCallbacks Structure</A>                            <br>                            <A HREF="#DataBrowserCallbacks_routines">Routines for managing the DataBrowserCallbacks structure</A>                            <br>                        </p>                                <p id="menutext">                            <A HREF="#predefinedcolumns">Pre-defined Column Display Types</A>                        </p>                        <p id="menutext2">                            <A HREF="#predefinedcolumns_icons">Icons</A>                            <br>                            <A HREF="#predefinedcolumns_text">Text</A>                            <br>                            <A HREF="#predefinedcolumns_iconswtext">Icons with Text</A>                            <br>                            <A HREF="#predefinedcolumns_time">Time</A>                            <br>                            <A HREF="#predefinedcolumns_progress">Progress Indicators</A>                            <br>                            <A HREF="#predefinedcolumns_relevance">Relevance Rank</A>                            <br>                            <A HREF="#predefinedcolumns_menus">Pop-up Menus</A>                            <br>                        </p>                        <p id="menutext">                            <A HREF="#defcustcol">Defining Your Own Column Display Types</A>                        </p>                        <p id="menutext2">                            <A HREF="#DataBrowserCustomCallbacks">The DataBrowserCustomCallbacks Structure</A>                            <br>                            <A HREF="#DataBrowserCustomCallbacks_routines">Routines for managing the DataBrowserCustomCallbacks structure</A>                            <br>                        </p>                                                <p id="menutext">                            <A HREF="#dbappearance">Browser Appearance and Behavior</A>                        </p>                        <p id="menutext2">                            <A HREF="#userinteraction_events">Event Handling</A>                            <br>                            <A HREF="#userinteraction_conditions">Interesting Conditions</A>                            <br>                            <A HREF="#appearance_scrollbars">Scroll Bars</A>                            <br>                            <A HREF="#selectionhandling">Selection Handling</A>                            <BR>                            <A HREF="#userinteraction_drag">Drag &amp; Drop Processing</A>                            <br>                            <A HREF="#appearance_redraw">Forcing Redraw</A>                            <br>                            <A HREF="#appearance_titles">Column and Cell Dimensions</A>                            <br>                            <A HREF="#appearance_background">List Background Color</A>                            <br>                            <A HREF="#dbtextedit">In-place Text Editing</A>                            <BR>                            <A HREF="#editmenucommands">Edit Menu Commands</A>                            <BR>                            <A HREF="#userinteraction_help">Context Sensitive Help</A>                            <br>                            <A HREF="#userinteraction_cmm">Contextual Menus</A>                            <br>                        </p>                        <p id="menutext">                        <A HREF="#dbhierturndownlists">Managing Hierarchical Lists</A>                        </p>                        <p id="menutext2">                            <A HREF="#disc_root">Setting the Root Container</A>                            <br>                                                    <A HREF="#disc_column">Setting the Disclosure Column</A>                            <br>                        </p>                        <p id="menutext">                        <A HREF="#Downloads">Downloadables</A>                        </p>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left>			<!-- begin_intro_text --><p id="introtext">This Technote presents the Application Programmer's Interface for the DataBrowser control. This new control is available through the Carbon API and was introduced in CarbonLib 1.1. Carbon applications running in Mac&nbsp;OS 8.6 or later with CarbonLib 1.1 can use the DataBrowser control.            </p>            <p id="introtext">The browser control is object oriented in design, and conceptually it serves as a base class that you can use to build your own specialized lists.  In its current implementation, the DataBrowser is a small object-oriented hierarchy with two different specializations that are available for use in applications: the column view and the list view.  The column view provides the multi-column hierarchical navigation scheme appearing in the file selection lists in Mac&nbsp;OS&nbsp;X.  The list view specialization provides a display scheme similar to the one provided by the list manager together with hierarchical display capabilities as found in the Finder's list view. This document discusses the list view specialization of the browser control.            </p>            <p id="introtext">Using DataBrowser will ensure that your lists adhere to the Macintosh HumanInterface Guidelines. It also ensures that users will find your listsfamiliar and easy to understand since they appear and behave in a way thatis consistent with the way lists appear and behave in other applications. Aswell, the DataBrowser does all of its drawing in accordance with theappearance manager. As a result, if your application uses the DataBrowser todisplay lists, your lists will always be drawn in a way that is consistentwith the current appearance settings, whether on Mac&nbsp;OS 9 or Mac&nbsp;OS&nbsp;X. Mostimportantly, this means that your application running in Mac&nbsp;OS&nbsp;X and usingthe DataBrowser will have the full benefits of Aqua appearance in the listsit displays. DataBrowser does the difficult user interface work for you,letting you focus on the functionality of your application.            </p>            <p id="introtext">This note is directed at application developers who are interested in using the DataBrowser control in their applications.            </p>            <!-- end_intro_text -->			<!-- begin_date --><h3>&nbsp;Updated: [Dec 05 2000]</h3><!-- end_date -->        </td>    </tr></table> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR>          <!-- begin_content --><A NAME="doc_overview"></A><H2>Overview</H2>         <P>This section provides a description of what the browser control is and definitions for key concepts used in the rest of this document.  The main points described in this section include how the DataBrowser interacts with your application, and how both your application and the DataBrowser use ID numbers to reference items displayed in the browser control.</P><P>The DataBrowser is a list management utility that allows your application to provide complex lists that have built-in user interaction functionality. <A HREF="#displaylist">Figure 1</A> provides an illustration of the DataBrowser control in action.  </P><A NAME="displaylist"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_001.jpg" align=middle alt="Figure 1" width=550 height=400>    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 1.</B> An illustration of the DataBrowser being used to display a list of files.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><BR><BR>        <A NAME="aboutit"></A><H3>About the DataBrowser....</H3>         <P>The DataBrowser is a user interface gadget used to display lists of items inside of windows in your application.  The DataBrowser replaces the older List Manager API and surpasses the List Manager API in many ways.  Major features found in the DataBrowser that were not supported in the List Manager include:</P><UL>	<LI>No limitation on the number of cells displayed in a list,<BR><BR></LI>	<LI>Built-in drag-and-drop handling,<BR><BR></LI>	<LI>Built-in display types for text, icons, checkboxes, pop-up menus, progress bars, relevance ranks, and sliders,<BR><BR></LI>	<LI>Support for contextual menus and context-sensitive help,<BR><BR></LI>	<LI>Built-in text editing for cells displaying text, and<BR><BR></LI>	<LI>Built-in hierarchical list support.<BR></LI></UL><P>The DataBrowser's implementation is object oriented in nature.  The List View discussed in this document is only one of the many possible specializations of the DataBrowser's Table View.  <A HREF="#hierbrowser">Figure 2</A> illustrates the object-oriented hierarchy internal to the DataBrowser.  For the purposes of this document, it is useful to be aware of this structure since some of the routines defined for the Table View class can also be used in List View class.</P>         <A NAME="hierbrowser"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_002.jpg" align=middle alt="Figure 2" width=250 height=103>    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 2.</B> An illustration of the object-oriented hierarchy used inside of the browser control.</P>    </TD></TR></TABLE></CENTER>    <BR><BR> <P>In the interfaces you will find routines that appear to reference different parts of this hierarchy.  The routines discussed in this document include both routines for the Table View class and routines for the List View class.  Table View is really an abstract class, and when you create a browser control of type List View, the List View object will have its own specialized methods for all of the methods defined for the Table View class.</P><!-- needs more transition here.  add some abstraction describing the relationship between data ID numbers and individual items in the list.  likein the wwdc presentation.  introduce concept of container heirarchy and the root item, etc.  default root item is noitem.  see programming model diagram in the wwdc presentation for some information about separating programming layers. --><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="callandcall"></A><H3>You call the DataBrowser, the DataBrowser calls you....</H3>                  <P>The DataBrowser provides your application with         sophisticated list display and interaction functionality         that is both easy to use and extensible in many ways. To         allow this level of fidelity and control, the DataBrowser         control uses callbacks to your application at several         points during processing where key choices in the         interaction process are made. At the very least, your         application must provide a routine that allows the data         browser to gain access to the information it displays.</P>                           <P>Further discussion of how to provide your own callback         routines for the DataBrowser control are discussed         later in this document starting in the <A HREF="#main_callbacks">DataBrowser Call-back Routines</A> section.</P>                  <P><A HREF="#page_top">Back to top</A></P>                                 <BR><BR>                                    <P><A NAME="datadatabrowser"></A></P>                  <H3>Data &amp; the DataBrowser</H3>                  <P>The DataBrowser control can be used to display a         single linear list of data items. When you provide a list of         items for display in a DataBrowser control, you do not         provide the actual data that will be displayed. Instead, you         provide a unique 32-bit ID number that your application can         use to refer to the actual data. Whether you store the         actual data in memory, on disk, or across a network is         entirely up to your application. The DataBrowser control         uses these ID numbers when it is drawing the list of items         to ask your application for information about particular         properties of the data items that are being drawn in the         display as that information is required.</P>                               <A NAME="figuretwo"></A>     <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_003.gif" align=middle alt="Figure 3" width=379 height=161>    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 3.</B> How <A HREF="#datadef">Data&nbsp;ID</A> numbers are used together with <A HREF="#propdef">Property&nbsp;ID</A> numbers to address particular rows in a table.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                   <P>The values your application uses as data item ID numbers         are entirely up to you. The only requirement is that the values are         non-zero. (The value <CODE>zero</CODE> is used internally by the Data         Browser in a way similar to the <CODE>NULL</CODE> pointer to indicate         that a row has no data item associated with it.) For example,         some possibilities for data item ID numbers you may use are         pointer values, data file offsets, or 32-bit TCP/IP host         addresses. Whenever the DataBrowser needs to display the         data for a particular data item, it will ask your         application for the data associated with the data item ID         number you provided.</P>         <P><A HREF="#page_top">Back to top</A></P>                  <BR><BR>                                             <A NAME="overrows"></A>         <H3>Rows</H3>                  <P>Each row in a table displayed by the DataBrowser control         has a unique data item ID number associated with it, together         with some flags describing state information related to the         row. <A HREF="#rowinfofig">Figure 4</A> provides a view of the values associated with         each row in a list displayed by the DataBrowser         control.</P><A NAME="rowinfofig"></A>             <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_004.gif" width=296 height=98 align=middle alt="Figure 4">    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 4.</B> Information maintained by the DataBrowser    for each row displayed in a DataBrowser control.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P>The selection state reflects the selection state of the         item. The collapsed/uncollapsed state is used in         hierarchical lists that feature turn-down arrows that open         sub-lists. These flags are read-only states associated with         rows displayed in the list: an application can query these         values using DataBrowser routines.</P>                  <BR><BR>                  <A NAME="datadef"></A>         <A NAME="kDataBrowserNoItem"></A>             <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><P><B>Definition 1. Data Element ID</B> or <B>Data&nbsp;ID.</B><BR> Any non-zero, 32-bit value uniquely identifying a data element being displayed in a list. Data&nbsp;ID values map to rows in the tables displayed by the DataBrowser. Data&nbsp;ID values need not be in any particular order, and the values used are entirely up to the application.  <BR><BR>The constant <CODE>kDataBrowserNoItem</CODE> is a special Data&nbsp;ID value used by the DataBrowser to mean "none of the Data ID numbers currently stored in the browser control."  Its usage is analogous to the <CODE>NULL</CODE> pointer in C.</P>    </TD></TR></TABLE></CENTER>                           <BR><BR>                  <P>Concepts relating to specifying the Data ID numbers that         will be used to display a list are discussed in the         <A HREF="#addrow">Adding Rows</A> section.</P>                  <P><A HREF="#page_top">Back to top</A></P>                  <BR><BR>                  <A NAME="overcolumns"></A>                  <H3>Columns</H3>                  <P>For every column that is to be displayed in a table, the         application must provide a number of parameters governing         how the column will be displayed. One of these parameters is a         non-zero, 32-bit value called the column's <A HREF="#propdef">Property&nbsp;ID</A>         number. Together with the data item ID number, property         numbers are used to refer to individual cells in the table         during callbacks to the application. <A HREF="#figuretwo">Figure 3</A> illustrates         how the DataBrowser uses Property&nbsp;ID numbers together with         <A HREF="#datadef">Data&nbsp;ID</A> numbers to reference particular cells in the         tables it displays. As with <A HREF="#datadef">Data&nbsp;ID</A> numbers, the values         an application chooses to use as Property&nbsp;ID numbers are         completely arbitrary.</P>                  <BR><BR>             <A NAME="propdef"></A>    <A NAME="kDataBrowserItemNoProperty"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left>    <B>Definition 2. Property&nbsp;ID.</B><BR>    <P>Any non-zero, 32-bit unsigned integer value that uniquely identifies a column in    a table being displayed by the DataBrowser. Property&nbsp;ID numbers do not need to be ordered or sequential, and the values used are entirely up to the application. Property&nbsp;ID values    0 through 1023 are reserved by Apple for use in the DataBrowser control.<BR><BR>The constant <CODE>kDataBrowserItemNoProperty</CODE> is a special Property&nbsp;ID value used by the DataBrowser to mean "none of the Property ID numbers (columns) currently stored in the browser control."  Its usage is analogous to the <CODE>NULL</CODE> pointer in C.</P>    </TD></TR></TABLE></CENTER><BR><BR>                  <P>Other information an application provides when a column         is being added to a table includes the column's title,         formatting information for the title, and some other         parameters governing the format of the information displayed.         <A HREF="#Fig3">Figure 5</A> provides and expanded view of some of the         information associated with a column.</P>                 <A NAME="Fig3"></A>            <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_005.gif" align=middle alt="Figure 5" width=304 height=93>    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 5.</B> Information associated with each column.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P>Later sections will discuss this information in greater         detail; however, at this point, it is worthwhile to take         note of the property display type that is associated with a         column. For convenience, the DataBrowser pre-defines         several display types including strings, pop-up menus,         icons, pictures, and buttons. It is also possible for         applications to implement their own custom display types         through callback routines. We revisit this subject later in         the <A HREF="#creating_columns">Defining Columns</A> and <A HREF="#defcustcol">Defining Custom Columns</A> sections.</P>                  <P><A HREF="#page_top">Back to top</A></P>                  <BR><BR>                  <A NAME="overcells"></A>         <H3>Cells</H3>                  <P>As shown in <A HREF="#figuretwo">Figure 3</A>, particular         cells displayed in the tables drawn by the DataBrowser         control are addressed using a combination of the <A HREF="#datadef">Data&nbsp;ID</A>         assigned to the row and the <A HREF="#propdef">Property&nbsp;ID</A> assigned to the         column.</P>                  <BR><BR>             <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left>    <B>Definition 3. Cell.</B><BR>    <P>A Data&nbsp;ID together with a Property&nbsp;ID uniquely identifies a cell in a table    displayed by the DataBrowser. A cell corresponds to a location inside of a Data    Browser list that is at the intersection of a row and a column.</P>    </TD></TR></TABLE></CENTER>         <BR><BR>                  <P>Individual cells are used to display facets of the data         items being displayed in a list. The method used to display         the cell's contents is governed by its <A HREF="#propdef">Property&nbsp;ID</A>.</P>                  <P>The concepts presented in this section describe how the         DataBrowser control represents data. It does not         necessarily entail that your application must use this same         data model for the information it is displaying in a Data         Browser control; however, if an application has its own         data model, then the application must provide the mapping         between the structures expected by the DataBrowser and its         own internal representation. As will be shown in later         sections, the DataBrowser control has been designed to         accommodate developers providing a mapping between their own         data model and the data model used by the DataBrowser.</P>                  <BR><BR>         <P><A HREF="#page_top">Back to top</A></P>         <BR><BR>                                    <A NAME="dbcreating"></A>         <H2>Creating DataBrowser Controls</H2><P>This section discusses about how you can create and initialize a new DataBrowser control inside of your application.  Basic structures and operations for adding columns and rows to a browser control are discussed.  The structures used to define columns allow your application to provide columns that utilize any of the pre-defined display types such as checkboxes, menus, icons, or text, while at the same time allowing you to design your own presentation mechanisms used when drawing columns.  <A HREF="#newcolumnlisting">Listing 1</A> illustrates how an application would add a column to a browser control.</P><P>DataBrowser controls can be created using the <CODE>CreateDataBrowserControl</CODE> routine. Once a control has been created, applications can proceed to install their own custom callback routines, columns, and rows.</P>                  <A NAME="CreateDataBrowserControl"></A><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">	<P><B>The CreateDataBrowserControl routine.</B></P></TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus CreateDataBrowserControl(        <a href="../../documentation/macos8/HumanInterfaceToolbox/WindowManager/windowmanager.html">WindowRef</A> window,        const Rect *boundsRect,        DataBrowserViewStyle style,        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> *outControl);</pre></TD></TR><TR><td align="left"><UL><LI><b>window</b> - the window where the control should be placed.<BR><BR></LI>                              <LI><b>boundsRect</b> - location where the control should appear in the window.<BR><BR></LI>                              <LI><b>style</b> - the view style that should be used when the control is drawn. Currently, the only view styles defined are <CODE>kDataBrowserListView</CODE> and <CODE>kDataBrowserColumnView</CODE>. This document's primary focus is the <CODE>kDataBrowserListView</CODE> type.<BR><BR></LI><LI><b>outControl</b> - if the control has been successfully created, then it will be returned in the location referenced by this parameter.</LI> </UL></TD></TR></TABLE></CENTER>                  <P>When an application is finished with a DataBrowser control, it can call <CODE>DisposeControl</CODE> to release the memory occupied by the control. If an application has allocated any special UPPs for use in the DataBrowser control, then it should de-allocate these after disposing of all of the DataBrowser controls where they were installed.</P>          <BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR>                          <A NAME="creating_columns"></A><H3>Defining Columns</H3>         <P>Columns have both a unique <A HREF="#propdef">Property&nbsp;ID</A> number associated with them along with information governing the appearance of the information displayed in the column. This information is specified by an application in a <CODE>DataBrowserListViewColumnDesc</CODE> structure. It is the application's responsibility to fill in all of the fields in this structure before providing it to a DataBrowser control.</P>          <A NAME="DataBrowserListViewColumnDesc"></A><BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">	<P><B>The DataBrowserListViewColumnDesc Structure</B></P></TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>enum {    kDataBrowserListViewLatestHeaderDesc = 0};typedef struct <A HREF="#DataBrowserListViewHeaderDesc">DataBrowserListViewHeaderDesc</A>        <A HREF="#DataBrowserListViewHeaderDesc">DataBrowserListViewHeaderDesc</A>;typedef struct DataBrowserListViewColumnDesc        DataBrowserListViewColumnDesc;typedef struct <A HREF="#DataBrowserPropertyDesc">DataBrowserPropertyDesc</A>        DataBrowserTableViewColumnDesc;struct DataBrowserListViewColumnDesc {    DataBrowserTableViewColumnDesc propertyDesc;    <A HREF="#DataBrowserListViewHeaderDesc">DataBrowserListViewHeaderDesc</A> headerBtnDesc;};struct <A HREF="#DataBrowserPropertyDesc">DataBrowserPropertyDesc</A> {    <A HREF="#propdef">DataBrowserPropertyID</A> propertyID;    <A HREF="#DataBrowserPropertyType">DataBrowserPropertyType</A> propertyType;    <A HREF="#DataBrowserPropertyFlags">DataBrowserPropertyFlags</A> propertyFlags;};struct <A HREF="#DataBrowserListViewHeaderDesc">DataBrowserListViewHeaderDesc</A> {    UInt32 version; /* Use kDataBrowserListViewLatestHeaderDesc */    UInt16 minimumWidth;    UInt16 maximumWidth;    SInt16 titleOffset;    <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A> titleString;    <A HREF="#DataBrowserSortOrder">DataBrowserSortOrder</A> initialOrder;    <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.e.html#15553">ControlFontStyleRec</A> btnFontStyle;    <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.e.html#23273">ControlButtonContentInfo</A> btnContentInfo;};</pre>    </TD></TR><TR><td align="left">            <UL>            <LI><b>propertyDesc</b>. This field contains information about the            property attached to the column.  See the description of the            <A HREF="#DataBrowserPropertyDesc">DataBrowserPropertyDesc</A> type            for more information.<BR><BR></LI>                        <LI><b>headerBtnDesc</b>. This field contains information about the            appearance of the column heading.  See the description of the            <A HREF="#DataBrowserListViewHeaderDesc">DataBrowserListViewHeaderDesc</A> type            for more information.</LI>                                                  </UL>                    </TD></TR></TABLE></CENTER>             <A NAME="DataBrowserPropertyDesc"></A>         <H3>The DataBrowserPropertyDesc sub-record</H3>                  <P>The <CODE>DataBrowserPropertyDesc</CODE> contains         information about the <A HREF="#propdef">Property&nbsp;ID</A> associated with the column         described in the <CODE><A HREF="#DataBrowserListViewColumnDesc">DataBrowserListViewColumnDesc</A></CODE>.         Specific values that can be stored in this structure are         described in the following.</P>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">                  <P><B>The DataBrowserPropertyDesc Structure</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>typedef struct DataBrowserPropertyDesc    DataBrowserTableViewColumnDesc;struct DataBrowserPropertyDesc {    <A HREF="#propdef">DataBrowserPropertyID</A> propertyID;    DataBrowserPropertyType propertyType;    <A HREF="#DataBrowserPropertyFlags">DataBrowserPropertyFlags</A> propertyFlags;};</pre>    </TD></TR><TR><td align="left">            <UL>            <LI><B>propertyID</B>. This field contains a 32-bit integer         value that uniquely identifies this column. It is the         <A HREF="#propdef">Property&nbsp;ID</A> that your application         uses to identify the column. This <A HREF="#propdef">Property&nbsp;ID</A> number will         also be used by the DataBrowser to identify the column in         callbacks to your application. The DataBrowser interfaces         use the type <CODE><A HREF="#propdef">DataBrowserPropertyID</A></CODE> for Property ID values.<BR><BR></LI>                       <LI><A NAME="DataBrowserPropertyType"></A> <B>propertyType</B>. This field contains a 32-bit <CODE>OSType</CODE>         value that indicates the type of data that is to be         displayed in the column. At the time of this writing,         permissible values for use in this field are as follows:<BR><BR>         <UL>            <LI><CODE><A HREF="#kDataBrowserCustomType">kDataBrowserCustomType</A></CODE> - No associated data type; <A HREF="#defcustcol">custom callbacks</A> used.<BR>            <BR>            </LI>            <LI><A NAME="kDataBrowserIconType"></A><CODE>kDataBrowserIconType</CODE> - <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconRef</A></CODE>, <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconTransformType</A></CODE>, and <CODE><a href="../../documentation/macos8/MultimediaGraphics/QuickDraw/quickdraw.html">RGBColor</A></CODE>.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserTextType"></A><CODE>kDataBrowserTextType</CODE> - <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A></CODE> for            displaying text.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserDateTimeType"></A><CODE>kDataBrowserDateTimeType</CODE> - <CODE><a href="../../documentation/macos8/TextIntlSvcs/DateTimeUtilities/datetimeutilities.html">DateTime</A></CODE> or <CODE><a href="../../documentation/macos8/TextIntlSvcs/DateTimeUtilities/datetimeutilities.html">LongDateTime</A></CODE>.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserCheckboxType"></A><CODE>kDataBrowserCheckboxType</CODE> -            <CODE>ThemeButtonValue</CODE>.<BR>            <BR>            </LI>                                    <LI><A NAME="kDataBrowserProgressBarType"></A><CODE>kDataBrowserProgressBarType</CODE> - Min, Max, and Value.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserRelevanceRankType"></A><CODE>kDataBrowserRelevanceRankType</CODE> - Min, Max, and Value.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserSliderType"></A><CODE>kDataBrowserSliderType</CODE> - Min, Max, and Value.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserpop-upMenuType"></A><CODE>kDataBrowserpop-upMenuType</CODE> - <a href="../../documentation/macos8/HumanInterfaceToolbox/MenuManager/menumanager.html">MenuRef</A>            displays pop-up menus.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserIconAndTextType"></A><CODE>kDataBrowserIconAndTextType</CODE> - <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconRef</A></CODE> and             <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A></CODE> together as icons with text.            </LI>                                             </UL><BR><BR></LI>                        <LI><A NAME="DataBrowserPropertyFlags"></A><B>propertyFlags</B>. This field contains a 32-bit         integer value of type <CODE>DataBrowserPropertyFlags</CODE> containing         flags controlling the display or interaction provided by         this column. The following constants define mask values that         can be used to set particular flags in this field. All         unused bits in this field are currently reserved for future         use.<BR><BR><UL>            <LI><A NAME="kDataBrowserDefaultPropertyFlags"></A><CODE>kDataBrowserDefaultPropertyFlags</CODE> - this            constant contains the default property flags that should            be used to initialize the <CODE>propertyFlags</CODE> field if no other            flags are required.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserRelativeDateTime"></A><CODE>kDataBrowserRelativeDateTime</CODE> - this flag            is only used if the <CODE>propertyType</CODE> field is set to the            constant <CODE><A HREF="#kDataBrowserDateTimeType">kDataBrowserDateTimeType</A></CODE>. When this flag is            specified, date values close to the current date will be            displayed as relative dates.<BR>            <BR>            </LI>                        <LI><A NAME="kDataBrowserPropertyIsEditable"></A><CODE>kDataBrowserPropertyIsEditable</CODE> - this flag may be set if the values being displayed in the            column can be changed. If an application specifies this            flag, then the application must also provide a callbacks            that allow the DataBrowser to both retrieve and store            data values displayed in this column.            </LI>         </UL></LI>                                      </UL>                    </TD></TR></TABLE></CENTER>         <!-- add bar diagram illustrating the layout of the  -->    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td bgcolor="#e6e6e6" align=left>    <P><B>Note:</B><BR>The DataBrowser requires the <CODE>kDataBrowserPropertyIsEditable</CODE> flag to be set in order to enable editing of any changeable display type (namely checkboxes, pop-up menus, etc).  Be sure your application is setting the <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE> flag when defining columns containing checkboxes, menus, and so forth.    </P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="DataBrowserListViewHeaderDesc"></A>             <H3>The DataBrowserListViewHeaderDesc sub-record</H3>                  <P><CODE>DataBrowserListViewHeaderDesc</CODE> contains a         number of fields describing the appearance of the column's         title. Specific contents of the fields in the structure are         as follows:</P>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The DataBrowserListViewHeaderDesc Structure</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>struct DataBrowserListViewHeaderDesc {    UInt32 version; /* Use kDataBrowserListViewLatestHeaderDesc */    UInt16 minimumWidth;    UInt16 maximumWidth;    SInt16 titleOffset;    <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A> titleString;    <A HREF="#DataBrowserSortOrder">DataBrowserSortOrder</A> initialOrder;    <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.e.html#15553">ControlFontStyleRec</A>  btnFontStyle;    <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.e.html#23273">ControlButtonContentInfo</A>  btnContentInfo;};</pre>    </TD></TR><TR><td align="left">            <UL>            <LI><B>version</B>. The version field identifies the format            of the structure.  You should always set this field to            the value <CODE>kDataBrowserListViewLatestHeaderDesc</CODE>.<BR><BR></LI>             <LI><B>minimumWidth</B>. For resizable columns, this field         contains the smallest width that the column can be resized         to. If the column is not resizable, then <CODE>minimumWidth</CODE> should         be set to the same value as <CODE>maximumWidth</CODE>.<BR><BR></LI>                        <LI><B>maximumWidth</B>. For resizable columns, this field         contains the largest width that the column can be resized         to. If the column is not resizable, then <CODE>maximumWidth</CODE> should         be set to the same value as <CODE>minimumWidth</CODE>.<BR><BR></LI>                         <LI><B>titleOffset</B>. This field contains an offset in         pixels from the left side of the title column where the         title text will be drawn. Both the         <CODE>titleAlignment</CODE> and the <CODE>titleOffset</CODE>         fields dictate the alignment and offset (inset by default)         of the content of the column when displaying one of the         pre-defined content types.<BR><BR></LI>                     <LI><b>titleString</b>. This field contains the text that is            to be drawn as the column's titled. <CODE>titleString</CODE>            may be <CODE>NULL</CODE> to indicate that no string is to be            displayed.<BR><BR></LI>                       <LI><A NAME="DataBrowserSortOrder"></A><B>initialOrder</B>. This field contains a value of type            <CODE>DataBrowserSortOrder</CODE>. <CODE>initialOrder</CODE> is the initial            sort ordering presentation for the column when that column is            the current sort column. Once the DataBrowser is visible, the            user may change this via direct manipulation. Setting this value            to anything other than <CODE>kDataBrowserOrderDecreasing</CODE>            will map to <CODE>kDataBrowserOrderIncreasing</CODE>.  <CODE>initialOrder</CODE>            may be assigned one of the following values:<BR><BR>             <UL>                <LI><CODE>kDataBrowserOrderUndefined</CODE> - this value                is currently not supported.<BR>                <BR>                </LI>                                <LI><CODE>kDataBrowserOrderIncreasing</CODE> - means this                column is to be sorted in ascending order.<BR>                <BR>                </LI>                                <LI><CODE>kDataBrowserOrderDecreasing</CODE> - means this                column is to be sorted in descending order.<BR>                <BR>                </LI>             </UL>             </LI>                        <LI><B>btnContentInfo</B>. Contains a structure of type         <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.e.html#23273">ControlButtonContentInfo</A></CODE>. This structure         describes the contents of the column heading and how it should         be drawn. Only text-only and <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconRef</A></CODE> (&amp; text) are         supported.<BR><BR></LI>            <LI><B>btnFontStyle</B>. This field contains a structure of            type <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.e.html#15553">ControlFontStyleRec</A></CODE> that defines the text            style used for the column heading.</LI>                                                  </UL>                    </TD></TR></TABLE></CENTER>                                             <A NAME="collinstall"></A>                  <H3>Installing Columns</H3>                  <P>Once an application has initialized the         <CODE><A HREF="#DataBrowserListViewHeaderDesc">DataBrowserListViewHeaderDesc</A></CODE> structure with         all of the values it requires, then the application can         install the column in a DataBrowser control by calling the         <CODE>AddDataBrowserListViewColumn</CODE> routine.</P>         <A NAME="AddDataBrowserListViewColumn"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The AddDataBrowserListViewColumn routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus AddDataBrowserListViewColumn(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#DataBrowserListViewColumnDesc">DataBrowserListViewColumnDesc</A> *columnDesc,        UInt32 position);</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>browser</b> - a DataBrowser control created by the                              <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>                              routine.<BR><BR></LI>                                                            <LI><b>columnDesc</b> - a record                              of type                              <CODE><A HREF="#DataBrowserListViewColumnDesc">DataBrowserListViewColumnDesc</A></CODE>                              with all of its fields initialized to                              their appropriate values.<BR><BR></LI>                                                            <LI><b>position</b> - refers to                              the position among the columns that are                              already installed in the DataBrowser                              where this column should be inserted.                              To insert this column to the right of                              all other columns, provide a very large                              value such as                              <CODE>ULONG_MAX</CODE>.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was successful.                           <CODE>paramErr</CODE> will be returned if                           the <CODE>columnDesc</CODE> record is not                           formatted correctly.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                          <P>The routine <CODE><A HREF="#AddDataBrowserListViewColumn">AddDataBrowserListViewColumn</A></CODE>         assumes that the <CODE><A HREF="#DataBrowserListViewColumnDesc">DataBrowserListViewColumnDesc</A></CODE>         has been set up by your application to describe the column         being added to the list. The application must set all of the         fields in this record, including the reserved fields (that         must be set to <CODE>-1</CODE>) before calling         <CODE><A HREF="#AddDataBrowserListViewColumn">AddDataBrowserListViewColumn</A></CODE>. <A HREF="#newcolumnlisting">Listing 1</A>         provides an example showing how you would go about adding a         new column to a DataBrowser control.</P>         <A NAME="newcolumnlisting"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>Listing 1</B>. Adding a new column to a DataBrowser control.</P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre><A HREF="#DataBrowserListViewColumnDesc">DataBrowserListViewColumnDesc</A> columnDesc;columnDesc.propertyDesc.propertyID = kCheckboxColumn;columnDesc.propertyDesc.propertyType = <A HREF="#kDataBrowserCheckboxType">kDataBrowserCheckboxType</A>;columnDesc.propertyDesc.propertyFlags = <A HREF="#kDataBrowserDefaultPropertyFlags">kDataBrowserDefaultPropertyFlags</A>;columnDesc.headerBtnDesc.minimumWidth = 30;columnDesc.headerBtnDesc.maximumWidth = 30;columnDesc.headerBtnDesc.titleAlignment = teCenter;columnDesc.headerBtnDesc.titleFontTypeID = kControlFontViewSystemFont;columnDesc.headerBtnDesc.titleFontStyle = normal;columnDesc.headerBtnDesc.titleOffset = 0;columnDesc.titleString = CFStringCreateWithPascalString(    CFAllocatorGetDefault(), "\p", kCFStringEncodingMacRoman);<A HREF="#AddDataBrowserListViewColumn">AddDataBrowserListViewColumn</A>(a_browser, &amp;columnDesc, ULONG_MAX),</pre>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P>In this example, the column being added to the browser         control will be a fixed-width column containing checkboxes.         All of the user interactions related to those checkboxes         will be handled automatically be the browser control.</P>                  <P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="addrow"></A><H3>Installing Rows</H3>         <P>Adding rows to a DataBrowser control is simply a matterof providing a list of <A HREF="#datadef">Data&nbsp;ID</A> numbers that you would liketo display in the control.  Routines for adding rows aredescribed in the <A HREF="#providingdata_data">Providing Data</A> section below.</P>         <P><A HREF="#page_top">Back to top</A></P> <BR><BR><A NAME="providingdata"></A><H2>Providing and Ordering Your Data</H2><P>As discussed earlier, the DataBrowser control itself does not store anyof the data displayed in the list.  The data itself is provided by your application's <A HREF="#clientDataCallback">clientDataCallback</A> routine that you provide in the <A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A> structure.  Internally, though, the DataBrowser stores 32-bit key values that it passes to your <A HREF="#clientDataCallback">clientDataCallback</A> routine that your application can use to retrieve the data being requested.  <A HREF="#dodataLL">Listing 6</A> illustrates how your <A HREF="#clientDataCallback">clientDataCallback</A> should translate these ID numbers to look up and data values as requested by the DataBrowser.  This section describes routines your application can use to provide and modify the Data ID values being used by the DataBrowser control for displaying data.</P><A NAME="providingdata_data"></A><H3>Providing Data</H3>    <P>The <CODE>AddDataBrowserItems</CODE> and <CODE><A HREF="#RemoveDataBrowserItems">RemoveDataBrowserItems</A></CODE> routines can be used to modify the list of <A HREF="#datadef">Data&nbsp;ID</A> values that are being displayed in the list.  In addition, by using <CODE>AddDataBrowserItems</CODE>' <CODE>container</CODE> parameter, an application can construct a hierarchical list of items that can be displayed with turn-down arrows.  For more information about routines available for managing hierarchical lists, see the section <A HREF="#dbhierturndownlists">Managing Hierarchical Lists</A> section.</P>        <A NAME="AddDataBrowserItems"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The AddDataBrowserItems routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus AddDataBrowserItems(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container,        UInt32 numItems,        const <A HREF="#datadef">DataBrowserItemID</A> *items,        <A HREF="#propdef">DataBrowserPropertyID</A> preSortProperty);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <A HREF="#CreateDataBrowserControl"><CODE>CreateDataBrowserControl</CODE></A>.<BR><BR></LI>            <LI><b>container</b> - if the items being installed are sub-items of another data element already installed in the browser control, then this parameter should contain the <A HREF="#datadef">Data&nbsp;ID</A> of that data element. Otherwise, if the items have no parent data element, then you can provide the constant <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE> as this argument. The <CODE>container</CODE> parameter can be used to construct hierarchical lists for display. <B>NOTE:</B> adding an item to a container item will have the sideeffect of opening that container item.<BR><BR></LI>            <LI><b>numItems</b> - the number of items in the array pointed to by the items parameter.<BR><BR></LI>            <LI><b>items</b> - points to an array of unsigned long integers containing the <A HREF="#datadef">Data&nbsp;ID</A> numbers of items that are to be added.  <B>Note:</B> If <CODE>items</CODE> is set to <CODE>NULL</CODE>, then the data browser will automatically generate and add the <A HREF="#datadef">Data&nbsp;ID</A> numbers 1, 2, ..., <CODE>numItems</CODE> to the browser control.<BR><BR></LI>            <LI><b>preSortProperty</b> - If the array of items have been sorted according to the sorting order currently in use in one of the columns in the list being displayed, then you can use this parameter to reference this column.  This will allow the DataBrowser to skip the sorting step if the values are already in the correct order.</LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER> <BR><BR><P>If the new items being added to the browser control will appear in thevisible part of the list, then they will be drawn to the screen.  Applications constructing hierarchical lists must proceed in a top-down fashion when installing the Data&nbsp;IDs in the browser control. Once a <A HREF="#datadef">Data&nbsp;ID</A> has been installed in a browser control, it is possible to associate a list of Data&nbsp;ID numbers with it as sub-items.</P><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><P><B>IMPORTANT:</B><BR>Adding items to an existing item (as the parent) means that the specified parent item must be classified as a container. This means that when the DataBrowser asks for the <CODE>kDataBrowserItemIsContainerProperty</CODE> of the specified parent item, the answer must be <CODE>true</CODE>. If your application does not provide this condition, then the <CODE><A HREF="#AddDataBrowserItems">AddDataBrowserItems</A></CODE> call will fail.</P></TD></TR></TABLE></CENTER><BR><BR><P><A HREF="#additemsLLink">Listing 2</A> illustrates some possible ways you can go about adding a sequence of <A HREF="#datadef">Data&nbsp;ID</A> numbers to a browser control.   Of course, the numbers you decide to use in your application will depend on what is most appropriate for the particular data set you are trying to display.  </P><BR><BR><A NAME="additemsLLink"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>Listing 2</B>.        Adding a sequence of Data IDs (rows) to a browser control.</P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>#define kMyItemCount 22    <A HREF="#datadef">DataBrowserItemID</A> newitems[kMyItemCount];    long i;        /* add a bunch of generated ID        numbers to the control */    for (i = 0; i &lt; kMyItemCount; i++) {            /* Make some arbitrary ID value.  The only            requirement is that it be unique. */        newitems[i] = ( i&lt;&lt;12 ) + (4095 ^ i);    }    <A HREF="#AddDataBrowserItems">AddDataBrowserItems</A>(mybrowser, <A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A>,            kMyItemCount, items, <A HREF="#kDataBrowserItemNoProperty">kDataBrowserItemNoProperty</A>);        /* instead of indexes or codes, let's use        picture references.  Of course, we're assuming we        have a resource file set up with picture resources        128, 129, ... */    for (i = 0; i &lt; kMyItemCount; i++) {        newitems[i] = (<A HREF="#datadef">DataBrowserItemID</A>) GetResource('PICT', i+128);        if (newitems[i] == NULL) { err = resNotFound; goto bail; }    }    <A HREF="#AddDataBrowserItems">AddDataBrowserItems</A>(some_other_browser, <A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A>,            kMyItemCount, items, <A HREF="#kDataBrowserItemNoProperty">kDataBrowserItemNoProperty</A>);        /* let's just use the numbers 1, 2, ..., kMyItemCount.  We        only have kMyItemCount items to display, so why not just        number them from 1 to kMyItemCount.  In this case, we don't        need to provide an array of ID numbers - the browser will        generate them the ID numbers for us.  */    <A HREF="#AddDataBrowserItems">AddDataBrowserItems</A>(yet_another_browser, <A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A>,            kMyItemCount, NULL, <A HREF="#kDataBrowserItemNoProperty">kDataBrowserItemNoProperty</A>);</pre>    </TD></TR></TABLE></CENTER>    <BR><BR><P>The RemoveDataBrowserItems can be used to remove Data IDs from the list of <A HREF="#datadef">Data&nbsp;ID</A> numbers internally maintained by the DataBrowser.  If one of the Data&nbsp;IDs you provide refers to a container item that has a number of sub items, then those sub-items will be removed from the list as well.</P>    <A NAME="RemoveDataBrowserItems"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The RemoveDataBrowserItems routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus RemoveDataBrowserItems(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container,        UInt32 numItems,        const <A HREF="#datadef">DataBrowserItemID</A> *items,        <A HREF="#propdef">DataBrowserPropertyID</A> preSortProperty);</pre>    </TD></TR><TR><td align="left"><UL>    		<LI><b>browser</b> - a DataBrowser control created by a call to <A HREF="#CreateDataBrowserControl"><CODE>CreateDataBrowserControl</CODE></A>.<BR><BR></LI>		<LI><b>container</b> - if the items being removed are sub-items of another data element already installed in the browser control, then this parameter should contain the <A HREF="#datadef">Data&nbsp;ID</A> of that data element. Otherwise, if the items have no parent data element, then you can provide the constant <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE> as this argument.<BR><BR></LI>		<LI><b>numItems</b> - the number of items in the array pointed to by the items parameter.<BR><BR></LI>		<LI><b>items</b> - points to an array of unsigned long integers containing the <A HREF="#datadef">Data&nbsp;ID</A> numbers of items that are to be removed.  If this parameter is set to <CODE>NULL</CODE>, then all of the items will be removed.  If this parameter is <CODE>NULL</CODE>, then all of the items in the container item referenced by the <CODE>container</CODE> parameter will be removed.  If <CODE>items</CODE> is <CODE>NULL</CODE>, then the numItems parameter is ignored.<BR><BR></LI>                             		<LI><b>preSortProperty</b> - if the array of items has already been sorted, then set this parameter to the <A HREF="#propdef">Property&nbsp;ID</A> of the column that has the same sorting order.</LI>	</UL> 	<P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>The <CODE>GetDataBrowserItems</CODE>, the <CODE><A HREF="#GetDataBrowserItemCount">GetDataBrowserItemCount</A></CODE>, and the <CODE><A HREF="#ForEachDataBrowserItem">ForEachDataBrowserItem</A></CODE> routines can be used to walk through the Data&nbsp;IDs your application has installed for the DataBrowser control.</P><A NAME="GetDataBrowserItems"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserItems routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserItems(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container,        Boolean recurse,        <A HREF="#DataBrowserItemState">DataBrowserItemState</A> state,        Handle items);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <A HREF="#CreateDataBrowserControl"><CODE>CreateDataBrowserControl</CODE></A>.<BR><BR></LI>            <LI><b>container</b> - to obtain a list of items displayed at the top level of the control's display, provide the constant <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE>.  Otherwise, to obtain a list of items that are organized as sub-items of a container item, provide the container item's <A HREF="#datadef">Data&nbsp;ID</A>.<BR><BR></LI>            <LI><b>recurse</b> - When this parameter is true, <CODE><A HREF="#GetDataBrowserItems">GetDataBrowserItems</A></CODE> will return a flattened list of all of the data IDs stored in the DataBrowser as sub-items of container parameter.  The list will be created using a in-order traversal of the <A HREF="#datadef">Data&nbsp;ID</A> hierarchy maintained internally by the DataBrowser.<BR><BR></LI>            <LI><b>state</b> - When this field is non-zero, only items with this state will be incorporated into the result.<BR><BR></LI>            <LI><b>items</b> - should contain a new zero-length handle.  Upon return, the contents of this handle will be set to contain an array of <A HREF="#datadef">Data&nbsp;ID</A> numbers for the items that match the criteria provided by other parameters.</LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER> <BR><BR>    <P><CODE><A HREF="#GetDataBrowserItems">GetDataBrowserItems</A></CODE> is a powerful routine for gathering information about the items being displayed in a DataBrowser during user interaction sequences.  For example, to obtain a list of all of the selected items in a list, your application would call the <CODE><A HREF="#GetDataBrowserItems">GetDataBrowserItems</A></CODE> as shown in <A HREF="#getselectionlisting">Listing 3</A>.  The example to <CODE><A HREF="#GetDataBrowserItems">GetDataBrowserItems</A></CODE> in <A HREF="#getselectionlisting">Listing 3</A> calculates both the number of items in the selection and it creates a list of the Data ID numbers in the selection.  If your application is only interested in determining the number of items in the selection (and not the Data IDs of those items), then you should use the <CODE><A HREF="#GetDataBrowserItemCount">GetDataBrowserItemCount</A></CODE> routine as shown in <A HREF="#countselectLL">Listing 4</A>.</P><A NAME="getselectionlisting"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>Listing 3</B>. Obtaining a list of all of the selected items in a browser control.</P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    Handle selectedItems;    OSStatus err;    UInt32 selectionCount;    selectedItems = NewHandle(0);    if (selectedItems == NULL) { err = memFullErr; goto bail; }    err = <A HREF="#GetDataBrowserItems">GetDataBrowserItems</A>(browser,        <A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A>,  /* start searching at the root item */        true, /* recursively search all subitems */        <A HREF="#kDataBrowserItemIsSelected">kDataBrowserItemIsSelected</A>, /* only return selected items */        selectedItems);    if (err != noErr) goto bail;    selectionCount = (GetHandleSize(selectedItems) /                             sizeof(<A HREF="#datadef">DataBrowserItemID</A>));</pre>    </TD></TR></TABLE></CENTER>    <BR><BR><P>This is a one-step call that provides a complete list of all of the items the user has highlighted in the browser control.</P>                            <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><P><B>Note:</B><BR>When the <CODE>recurse</CODE> parameter to the <CODE><A HREF="#GetDataBrowserItems">GetDataBrowserItems</A></CODE> is set to <code>true</code>, the routine will flatten an entire hierarchy into a single vector of <A HREF="#datadef">Data&nbsp;ID</A> numbers, but, when it does so, it does not encode any information about that hierarchy into the list of returned <A HREF="#datadef">Data&nbsp;ID</A> numbers.  If your application requires the sort of functionality where it would like to save and restore a hierarchy of Data&nbsp;IDs as they are displayed in a DataBrowser control, then you should build that functionality yourself using combinations of the routines described in this section.</P>    </TD></TR></TABLE></CENTER>            <A NAME="GetDataBrowserItemCount"></A>    <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserItemCount routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserItemCount(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container,        Boolean recurse,        <A HREF="#DataBrowserItemState">DataBrowserItemState</A> state,        UInt32 *numItems);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <A HREF="#CreateDataBrowserControl"><CODE>CreateDataBrowserControl</CODE></A>.<BR><BR></LI>            <LI><b>container</b> - to obtain a list of items displayed at the top level of the control's display, provide the constant <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE>.  Otherwise, to obtain a list of items that are organized as sub-items of a container item, provide the container item's <A HREF="#datadef">Data&nbsp;ID</A>.<BR><BR></LI>            <LI><b>recurse</b> -  When this parameter is true, <CODE><A HREF="#GetDataBrowserItemCount">GetDataBrowserItemCount</A></CODE> will return the number of all of the data IDs stored in the DataBrowser as sub-items of container parameter.<BR><BR></LI>            <LI><b>state</b> - When this field is non-zero, only items with this state will be counted.<BR><BR></LI>            <LI><b>numItems</b> - The total number of items found is returned in the unsigned 32-bit integer referenced by this parameter.</LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER> <BR><BR><P>The routine <CODE><A HREF="#GetDataBrowserItemCount">GetDataBrowserItemCount</A></CODE> is useful for performing quick inquiries about the state of the items being displayed in a browser control.  For example,  <A HREF="#countselectLL">Listing 4</A> illustrates how you could go about finding out how many items are selected in the browser control.  This routine provides a fast efficient mechanism for an application to perform such inquiries.</P><A NAME="countselectLL"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>Listing 4</B>. Counting the number of selected rows in a browser control.</P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    UInt32 selectionCount;    OSStatus err;    err = <A HREF="#GetDataBrowserItemCount">GetDataBrowserItemCount</A>(myBrowserControl,        <A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A>,  /* start searching at the root item */        true, /* recursively search all subitems */        <A HREF="#kDataBrowserItemIsSelected">kDataBrowserItemIsSelected</A>, /* only return selected items */        &amp;selectionCount);    if (err != noErr) goto bail;    if (selectionCount &gt; 0) { ...</pre>    </TD></TR></TABLE></CENTER>    <BR><BR><P>For enumerating the <A HREF="#datadef">Data&nbsp;ID</A> numbers stored in a DataBrowser control or performing some operation for each of those items, your application can use the <CODE>ForEachDataBrowserItem</CODE> routine.  One of the parameters to this routine is a callback procedure that will be called for each of the <A HREF="#datadef">Data&nbsp;ID</A> numbers referenced by the other parameters to this routine.  </P>    <A NAME="ForEachDataBrowserItem"></A>    <A NAME="DataBrowserItemProcPtr"></A>    <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR><td align="left">        <P><B>The ForEachDataBrowserItem routine.</B></P>    </TD></TR><TR><td bgcolor="#e6e6e6" align=left><pre>typedef void (*DataBrowserItemProcPtr)(        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#DataBrowserItemState">DataBrowserItemState</A> state,        SInt32 clientData);    typedef DataBrowserItemProcPtr DataBrowserItemUPP;    OSStatus ForEachDataBrowserItem(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container,        Boolean recurse,        <A HREF="#DataBrowserItemState">DataBrowserItemState</A> state,        DataBrowserItemUPP callback,        SInt32 clientData);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <A HREF="#CreateDataBrowserControl"><CODE>CreateDataBrowserControl</CODE></A>.<BR><BR></LI>            <LI><b>container</b> - to have your callback called for all of the items displayed at the top level of the control's display, provide the constant <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE>.  Otherwise, to have your callback called for all of the items that are organized as sub-items of a container item, provide the container item's <A HREF="#datadef">Data&nbsp;ID</A>.<BR><BR></LI>            <LI><b>recurse</b> -  When this parameter is true, <CODE><A HREF="#ForEachDataBrowserItem">ForEachDataBrowserItem</A></CODE> will call the callback routine for all of the data IDs stored in the DataBrowser as sub-items of container parameter.<BR><BR></LI>            <LI><b>state</b> - When this field is non-zero, only items with this state will be counted.<BR><BR></LI>                        <LI><b>callback</b> - a UPP referencing your callback routine. The <CODE><A HREF="#DataBrowserItemProcPtr">DataBrowserItemProcPtr</A></CODE> declaration above shows how this routine should be defined in your application.  This routine will be called for every <A HREF="#datadef">Data&nbsp;ID</A> currently stored in the browser control matching the criteria you provide in the other <CODE><A HREF="#ForEachDataBrowserItem">ForEachDataBrowserItem</A></CODE> parameters.<BR><BR></LI>                        <LI><b>clientData</b> - this is a reference value passed through to your callback routine.  Its contents are defined by the application.</LI>                    </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><P>The <CODE><A HREF="#ForEachDataBrowserItem">ForEachDataBrowserItem</A></CODE> routine is especially useful for situations where you would like to enumerate and perform some operation on some set of Data ID numbers.  <A HREF="#enumselectLL">Listing 5</A> illustrates how your application could use the <CODE><A HREF="#ForEachDataBrowserItem">ForEachDataBrowserItem</A></CODE> to perform some additional filtering when selecting Data ID numbers.  <CODE><A HREF="#ForEachDataBrowserItem">ForEachDataBrowserItem</A></CODE> is a powerful routine that allows your application to perform complex inquiries about the Data IDs stored in a data browser control; however, before calling this routine for all of the inquiry operations required by your application you should consider whether it would be more appropriate to call either <CODE><A HREF="#GetDataBrowserItems">GetDataBrowserItems</A></CODE> or <CODE><A HREF="#GetDataBrowserItemCount">GetDataBrowserItemCount</A></CODE>.</P><A NAME="enumselectLL"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>Listing 5</B>. Enumerating and acting on certain items in the selection.</P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>static Handle gCollector = NULL;OSStatus gCoStatus = noErr;    /* in our item callback routine, we add any of the items    that satisfy some interesting criteria to the list of    data ID numbers we are accumulating in the handle    referenced by the global variable gCollector. */static void MyDataBrowserItemProc( <A HREF="#datadef">DataBrowserItemID</A> item,     <A HREF="#DataBrowserItemState">DataBrowserItemState</A> state, SInt32 clientData) {    if (gCoStatus == noErr &amp;&amp; clientData == 'Yeah') {        if ( SatisfiesSomeInterestingCriteria(item) ) {            gCoStatus = PtrAndHand(&amp;item, gCollector, sizeof(item));        }    }}....    OSStatus err;    DataBrowserItemUPP myItemProc;    UInt32 selectionCount;    gCoStatus = noErr;    gCollector = NewHandle(0);    if (gCollector == NULL) { err = memFullErr; goto bail; }        /* set up our callback's routine descriptor */    myItemProc = NewDataBrowserItemUPP(MyDataBrowserItemProc);    if (myItemProc == NULL) { err = memFullErr; goto bail; }        /* call our callback routine for every item that        is currently a member of the selection. */    err = <A HREF="#ForEachDataBrowserItem">ForEachDataBrowserItem</A>(any_old_browser,        <A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A>,  /* start searching at the root item */        true, /* recursively search all subitems */        <A HREF="#kDataBrowserItemIsSelected">kDataBrowserItemIsSelected</A>, /* call it for selected items */        myItemProc, /* a reference to our callback */        'Yeah'); /* our arbitrary and private parameter */    if (err != noErr) goto bail;    if ((err = gCoStatus) != noErr) goto bail;    selectionCount = (GetHandleSize(selectedItems) /                             sizeof(<A HREF="#datadef">DataBrowserItemID</A>));</pre>    </TD></TR></TABLE></CENTER>    <BR><BR><P>To discover the state of a particular item, your application cancall the <CODE>GetDataBrowserItemState</CODE> routine.  Using this routine yourapplication can find out if a cell is selected or if a container cellhas been opened (i.e., the turn-down arrow is in the down position).</P>    <A NAME="GetDataBrowserItemState"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserItemState routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserItemState(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        DataBrowserItemState *state);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the row you are interested in.  <B>NOTE:</B>  As discussed later in the <A HREF="#selectionhandling">Selection Handling</A> section, the DataBrowser provides facilities for selecting and highlighting entire rows of data, but it does not provide any facilities for selecting individual cells within rows.<BR><BR></LI>                                                                        <LI><A NAME="DataBrowserItemState"></A><b>state</b> - various combinations of the following flags:<BR><BR>            <UL>                <LI><A NAME="kDataBrowserItemNoState"></A><CODE>kDataBrowserItemNoState</CODE> - has no state associated with it at this time.<BR><BR></LI>                  <LI><A NAME="kDataBrowserItemIsSelected"></A><CODE>kDataBrowserItemIsSelected</CODE> - is a member of the current selection.<BR><BR></LI>                  <LI><A NAME="kDataBrowserContainerIsOpen"></A><CODE>kDataBrowserContainerIsOpen</CODE> - disclosure open.<BR><BR></LI>                  <LI><A NAME="kDataBrowserItemIsDragTarget"></A><CODE>kDataBrowserItemIsDragTarget</CODE> - Only true during a drag operation.</LI>            </UL>            </LI>        </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="providingdata_ordering"></A><H3>Ordering Data</H3><P>There are two sides to ordering the data displayed by the DataBrowser control.  First, your application must provide a way for the DataBrowserto compare items referenced by <A HREF="#datadef">Data&nbsp;ID</A> numbers based with a common <A HREF="#propdef">Property&nbsp;ID</A>number.  That is to say, your application must provide a method for comparing rows based on values displayed in particular columns.  Your application can do this by providing a comparison callback routine in the <A HREF="#compareCallback"><CODE>compareCallback</CODE></A> field of the <A HREF="#DataBrowserCallbacks"><CODE>DataBrowserCallbacks</CODE></A> structure.  For more information providing a comparison routine, please refer to that section.</P>    <P>The other side of ordering the data displayed by the DataBrowser is telling the browser control which column should be used for sorting and in what order items should be presented (ascending or descending).  For the most part, your application should leave these settings up to the user.  However, in situations where you would like to sort the values displayed in the DataBrowser control explicitly, the following routines have been provided.</P><BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left>        <P><B>Note:</B><BR>        The sorting routine used by the DataBrowser is non destructive        and it preserves the        ordering of elements that are equal across sorts.  This means        that if the list displayed is sorted based on column 1, and then        you sort        using column 2 and all of the Data&nbsp;IDs in column 2 map to the same        value, then the order of the list will not change.</P>    </TD></TR></TABLE></CENTER><BR><BR><p><CODE>SetDataBrowserSortOrder</CODE> can be used to explicitly set the sorting order for the list.  If the list has not been sorted or the sorting order requested is not in effect, then the list with be sorted and re-drawn using the new sorting order.  To find out what sorting order is currently in effect, your application can call the <CODE>GetDataBrowserSortOrder</CODE> routine.</p>    <A NAME="SetDataBrowserSortOrder"></A>    <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR><td align="left">        <P><B>The SetDataBrowserSortOrder routine.</B></P>    </TD></TR><TR><td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserSortOrder(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#DataBrowserSortOrder">DataBrowserSortOrder</A> order);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <A HREF="#CreateDataBrowserControl"><CODE>CreateDataBrowserControl</CODE></A>.<BR><BR></LI>            <LI><b>order</b> - this parameter should be set to one of the three following constant values:<BR><BR>            <UL>                <LI><CODE>kDataBrowserOrderUndefined</CODE> - not supported.<BR><BR></LI>                <LI><CODE>kDataBrowserOrderIncreasing</CODE> - ascending order.<BR><BR></LI>                <LI><CODE>kDataBrowserOrderDecreasing</CODE> - descending order.</LI>            </UL></LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR>    <A NAME="GetDataBrowserSortOrder"></A>    <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR><td align="left">        <P><B>The GetDataBrowserSortOrder routine.</B></P>    </TD></TR><TR><td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserSortOrder(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#DataBrowserSortOrder">DataBrowserSortOrder</A> *order);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <A HREF="#CreateDataBrowserControl"><CODE>CreateDataBrowserControl</CODE></A>.<BR><BR></LI>            <LI><b>order</b> - see the description of <CODE><A HREF="#SetDataBrowserSortOrder">SetDataBrowserSortOrder</A></CODE> for the different values that can be returned in the variable pointed to by this parameter.</LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><p>To designate a column that is used for the sorting operation, your application call <CODE>SetDataBrowserSortProperty</CODE> with the column's associated <A HREF="#propdef">Property&nbsp;ID</A> number.  If the list is not currently sorted or if the list is currently sorted with a different column, then the list will be resorted and re-drawn.  The <CODE>GetDataBrowserSortProperty</CODE> can be used to discover the <A HREF="#propdef">Property&nbsp;ID</A> number of the column currently being used for sorting the list.  </p>    <A NAME="SetDataBrowserSortProperty"></A>    <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR><td align="left">        <P><B>The SetDataBrowserSortProperty routine.</B></P>    </TD></TR><TR><td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserSortProperty(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#propdef">DataBrowserPropertyID</A> property);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> of the column used to sort the list.</LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <A NAME="GetDataBrowserSortProperty"></A>    <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR><td align="left">        <P><B>The GetDataBrowserSortProperty routine.</B></P>    </TD></TR><TR><td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserSortProperty(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#propdef">DataBrowserPropertyID</A> *property);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> of the column being used to sort the list will be stored in the variable pointed to by this parameter.</LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><p>The routine <CODE>SortDataBrowserContainer</CODE> can be used to sort hierarchical lists of items.  For information about setting up a hierarchical list, refer to the<A HREF="#dbhierturndownlists">Managing Hierarchical Lists</A> section.</p>    <A NAME="SortDataBrowserContainer"></A>    <BR><BR><CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR><td align="left">        <P><B>The SortDataBrowserContainer routine.</B></P>    </TD></TR><TR><td bgcolor="#e6e6e6" align=left><pre>    OSStatus SortDataBrowserContainer(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container,        Boolean sortChildren);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>container</b> - to sort all of the items displayed at the top level of the control's display, provide the constant <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE>.  Otherwise, sort all of the items that are organized as sub-items of a container item, provide the container item's <A HREF="#datadef">Data&nbsp;ID</A>.<BR><BR></LI>                        <LI><b>sortChildren</b> - if this parameter is true, then all of the sub-items and sub-containers organized within the container will be sorted.</LI>        </UL>                <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="main_callbacks"></A><H2>DataBrowser Callback Routines</H2>         <P>As discussed in the preliminary section discussing callbacks, <A HREF="#callandcall">"You call the DataBrowser, the DataBrowser calls you...."</A>, the DataBrowser control calls back to your application at key points during its execution either to request information from your application or to notify your application of changing conditions.  As the DataBrowser control was designed to support many varied and complex scenarios of deployment, there are a large number of callback routines that your application can provide.  Keep in mind, though, it is not necessary for an application to provide its own definition for each callback - only the ones actually required by an application need to be defined.</P>         <BR><BR><A NAME="DataBrowserCallbacks"></A><H3>The DataBrowserCallbacks Structure</H3>            <P>The <CODE>DataBrowserCallbacks</CODE> structure is the structure your application must use to provide references to the routines it would like the DataBrowser control to use when asking your application for information or notifying your application about changing conditions.  At the very least, your application must define its own <CODE><A HREF="#clientDataCallback">clientDataCallback</A></CODE> routine, but keep in mind, the functionality of the list will improve as you add more routines.</P>                <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR> <td bgcolor="#e6e6e6" align=left><pre>struct <A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A> {    UInt32 version; /* use kDataBrowserLatestCallbacks */    union {        struct {            DataBrowserGetSetItemDataUPP <A HREF="#clientDataCallback">clientDataCallback</A>;            DataBrowserCompareUPP <A HREF="#compareCallback">compareCallback</A>;            DataBrowserItemNotificationUPP <A HREF="#itemNotificationCallback">itemNotificationCallback</A>;            DataBrowserAddDragItemUPP <A HREF="#addDragItemCallback">addDragItemCallback</A>;            DataBrowserAcceptDragUPP <A HREF="#acceptDragCallback">acceptDragCallback</A>;            DataBrowserReceiveDragUPP <A HREF="#receiveDragCallback">receiveDragCallback</A>;            DataBrowserPostProcessDragUPP <A HREF="#postProcessDragCallback">postProcessDragCallback</A>;            DataBrowserGetHelpContentUPP <A HREF="#getHelpContentCallback">getHelpContentCallback</A>;            DataBrowserGetContextualMenuUPP <A HREF="#contextualMenuCallback">contextualMenuCallback</A>;            DataBrowserSelectContextualMenuUPP <A HREF="#selectContextMenuCallback">selectContextMenuCallback</A>;        } v1;    } u;};</pre>    </TD></TR></TABLE></CENTER>    <BR><BR><BR><P><B>clientDataCallback.</B>  The client data callback is used for communicating data between the DataBrowser and your application.  When the DataBrowser needs to display a value for a particular cell, it will call your <CODE>clientDataCallback</CODE> to request the data.  If the user changes the value for a particular cell, the DataBrowser will call your <CODE>clientDataCallback</CODE> with a new copy of the data that you should use to replace your application's internal copy.</P>                      <A NAME="GetSetItemData"></A>    <A NAME="clientDataCallback"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>DataBrowserGetSetItemDataUPP - the Client Data Callback.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef OSStatus (*DataBrowserGetSetItemDataProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        DataBrowserItemDataRef itemData,        Boolean setValue);    typedef DataBrowserGetSetItemDataProcPtr        DataBrowserGetSetItemDataUPP;</pre>    </TD></TR><TR><td align="left">		<UL>			<LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                              		<LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the data row whose data is being requested in this call.<BR><BR></LI>                              		<LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> to be used in conjunction with the <A HREF="#datadef">Data&nbsp;ID</A> to locate the cell whose data is being requested in this call.  This value uniquely identifies the column.<BR><BR></LI>                              		<LI><b>itemData</b> - a pointer to the data or to a data buffer prepared to receive the data.<BR><BR></LI>                              		<LI><b>setValue</b> - if <CODE>setValue</CODE> is true, then your callback should replace its current copy of the value associated with (<CODE>item</CODE>, <CODE>property</CODE>) with the value pointed to by <CODE>itemData</CODE>. If <CODE>setValue</CODE> to <code>false</code>, then your application should store a copy of the value associated with (<CODE>item</CODE>, <CODE>property</CODE>) to the buffer pointed to by <CODE>itemData</CODE>.</LI>		</UL>        <P>Returns an operating system result code describing the success of the operation. Your callback should return the result code <CODE>noErr</CODE> if the operation was successful.</P>    </TD></TR></TABLE></CENTER><P>The data callback routine is the place where your application provides a mapping between <A HREF="#datadef">Data&nbsp;ID</A> numbers used to identify rows in the list, <A HREF="#propdef">Property&nbsp;ID</A> numbers used to identify columns, and the actual data that should be displayed in any particular cell.  The DataBrowser will call your data callback routine with a Data&nbsp;ID and a Property&nbsp;ID.  Your data callback routine should respond by either saving or returning the appropriate value depending on the state of the <CODE>setValue</CODE> parameter.  <A HREF="#dodataLL">Listing 6</A> a simple example of how your application could implement a data callback routine.</P><A NAME="dodataLL"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>Listing 6</B>.        Example data callback routine.</P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    /* MySimpleDataCallback is a simple data callback routine    that would be used in a browser control displaying a list    of generic document icons together with a list of checkboxes.    The checkbox column is a mutable column. */OSStatus MySimpleDataCallback(    <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,    <A HREF="#datadef">DataBrowserItemID</A> itemID,    <A HREF="#propdef">DataBrowserPropertyID</A> property,    DataBrowserItemDataRef itemData,    Boolean changeValue) {    <a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconRef</A> myIcon;    OSStatus err;        /* start with a known state */    myIcon = NULL;        /* look at the property ID and decide what to do        depending on what column we're dealing with... */    if (property == kMyCheckboxColumn) {        ThemeButtonValue buttonValue;            /* are we being asked to change the value            we have in our own store or are we being            asked to retried the value?  You'll only            have ask this question for mutable columns. */        if (changeValue) {            err = <A HREF="#GetDataBrowserItemDataButtonValue">GetDataBrowserItemDataButtonValue</A>(itemData,                                 &amp;buttonValue);            if (err != noErr) goto bail;                /* NOTE: our internal storage lookup mechanism must                map itemID numbers to the values stored for each                button in the list. */            err = StoreTheValueSomewhere(itemID, buttonValue);            if (err != noErr) goto bail;        } else {            err = GetTheButtonValueFromSomewhere(itemID, &amp;buttonValue);            if (err != noErr) goto bail;            err = <A HREF="#SetDataBrowserItemDataButtonValue">SetDataBrowserItemDataButtonValue</A>(itemData,                    buttonValue);            if (err != noErr) goto bail;        }    } else if (property == kMyIconOnlyColumn) {            /* if the column is not mutable, then we            can safely assume we are only being asked            to retrieve the value. */        err = <a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">GetIconRef</A>(kOnSystemDisk, kSystemIconsCreator,            kGenericDocumentIcon, &amp;myIcon);        if (err != noErr) goto bail;        err = <A HREF="#SetDataBrowserItemDataIcon">SetDataBrowserItemDataIcon</A>(itemData, myIcon);        if (err != noErr) goto bail;        ReleaseIconRef(myIcon);        myIcon = NULL;    } else {        err = errDataBrowserPropertyNotSupported        goto bail;    }    return noErr;bail:    if (myIcon != NULL) ReleaseIconRef(myIcon);    return err;}</pre>    </TD></TR></TABLE></CENTER><BR><BR><BR><A NAME="compareCallback"></A><P><B>compareCallback.</B>  This routine will be called by the DataBrowser when it is ordering the values displayed in a column.  Your application should provide a comparison for all of the every property type your application presents that is capable of being sorted.</P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef Boolean (*DataBrowserCompareProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> itemOne,        <A HREF="#datadef">DataBrowserItemID</A> itemTwo,        <A HREF="#propdef">DataBrowserPropertyID</A> sortProperty);    typedef DataBrowserCompareProcPtr DataBrowserCompareUPP;</pre>	</TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to            <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>itemOne</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the first row to be used in the comparison.<BR><BR></LI>                                          <LI><b>itemTwo</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the second row to be used in the comparison.<BR><BR></LI>                                          <LI><b>sortProperty</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the column being sorted.</LI>        </UL>        <P>Your application's callback should return <CODE>true</CODE> if the value of the data referenced by <CODE>itemOne</CODE> is less than the value of the data referenced by <CODE>itemTwo</CODE>, and it should return should return <CODE>false</CODE> if the value of the data referenced by <CODE>itemOne</CODE> is greater than or equal to the value of the data referenced by <CODE>itemTwo</CODE>.  The comparison should only consider the values being displayed in the column referenced by the <A HREF="#propdef">Property&nbsp;ID</A> in <CODE>sortProperty</CODE>.  Sorting is stable, so you can use secondary and tertiary sorting.  Each time a user clicks a column, the column will be sorted, but the sort order of matching items will be preserved.</P>    </TD></TR></TABLE></CENTER><BR><BR><BR><A NAME="itemNotificationCallback"></A><P><B>itemNotificationCallback.</B>  The item notification callback routine will be called by the DataBrowser to notify your application of interesting conditions that it may wish to respond to.  The kinds of conditions that your application will be notified of are enumerated and defined in <A HREF="#table1">Table 1</A>.</P>      <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef void (*DataBrowserItemNotificationProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        DataBrowserItemNotification message);    typedef DataBrowserItemNotificationProcPtr        DataBrowserItemNotificationUPP;</pre>    </TD></TR><TR><td align="left">		<UL>		<LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                              		<LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the row being identified by this call.<BR><BR></LI>                                                            		<LI><b>message</b> Possible values for this parameter are described in <A HREF="#table1">Table 1</A>. </LI>		</UL>    </TD></TR></TABLE></CENTER>             <A NAME="table1"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=0 width=500> <TR><td colspan=2 align=left>        <P><B>Table 1.</B> Notifications provided by the browser control.</P>    </TD></TR>    <TR><td colspan=2 align=left>        <hr width=500 align=center>    </TD></TR>        	<TR><td align="left"><P><B>Constant Name</B></P></TD><td align="left"><P><B>Description</B></P></TD></TR>    <TR><td colspan=2 align=left>        <hr width=500 align=center>    </TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserItemAdded"></A><P><CODE>kDataBrowserItemAdded</CODE></P></TD><td align="left"><P>The specified item has been added to the browser.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserItemRemoved"></A><P><CODE>kDataBrowserItemRemoved</CODE></P></TD><td align="left"><P>The specified item has been removed from the browser.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserEditStarted"></A><P><CODE>kDataBrowserEditStarted</CODE></P></TD><td align="left"><P>Starting an EditText session for specified item.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserEditStopped"></A><P><CODE>kDataBrowserEditStopped</CODE></P></TD><td align="left"><P>Stopping an EditText session for specified item.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserItemSelected"></A><P><CODE>kDataBrowserItemSelected</CODE></P></TD><td align="left"><P>Item has just been added to the selection set.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserItemDeselected"></A><P><CODE>kDataBrowserItemDeselected</CODE></P></TD><td align="left"><P>Item has just been removed from the selection set.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserItemDoubleClicked"></A><P><CODE>kDataBrowserItemDoubleClicked</CODE></P></TD><td align="left"><P>The user double clicked on an item.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserContainerOpened"></A><P><CODE>kDataBrowserContainerOpened</CODE></P></TD><td align="left"><P>Container has been opened.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserContainerClosing"></A><P><CODE>kDataBrowserContainerClosing</CODE></P></TD><td align="left"><P>Container is about to close.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserContainerClosed"></A><P><CODE>kDataBrowserContainerClosed</CODE></P></TD><td align="left"><P>Container has been closed.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserContainerSorting"></A><P><CODE>kDataBrowserContainerSorting</CODE></P></TD><td align="left"><P>Container is about to be sorted (lock any volatile                 properties).</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserContainerSorted"></A><P><CODE>kDataBrowserContainerSorted</CODE></P></TD><td align="left"><P>Container has been sorted (you may release any                 property locks).</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserTargetChanged"></A><P><CODE>kDataBrowserTargetChanged</CODE></P></TD><td align="left"><P>The target has changed to the specified item.</P></TD></TR>    	<TR><td align="left"><A NAME="kDataBrowserUserStateChanged"></A><P><CODE>kDataBrowserUserStateChanged</CODE></P></TD><td align="left"><P>The user has reformatted the view for the target.</P></TD></TR>    	<TR><td align="left"><P><CODE>kDataBrowserSelectionSetChanged</CODE></P></TD><td align="left"><P>The selection set has been modified (net result                 may be the same).</P></TD></TR>    </TABLE></CENTER><BR><BR><A NAME="addDragItemCallback"></A><P><B>addDragItemCallback.</B> Once the DataBrowser has determined it is beginning an outgoing drag, it iterates through all of the selected items calling the <CODE>DataBrowserAddDragItemProcPtr</CODE>.  At this point, your application can add the items drag inside of the <CODE>addDragItemCallback</CODE> routine.  Your application's <CODE>addDragItemCallback</CODE> routine will be called after the <CODE><a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">DragReference</A></CODE> has been created, but before <CODE>TrackDrag</CODE> is called.  DataBrowser takes care of the imaging and adds transparency for you, so there is no need to create or add your own transparency information to the drag reference.  </P><P>In this routine your application should add the item to the drag.  Return <CODE>true</CODE> from this routine to tell the DataBrowser to add a transparent representation of the row to the drag image.</P>             <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef Boolean (*DataBrowserAddDragItemProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">DragReference</A> theDrag,        <A HREF="#datadef">DataBrowserItemID</A> item,        <a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">ItemReference</A> *itemRef);    typedef DataBrowserAddDragItemProcPtr DataBrowserAddDragItemUPP;</pre>    </TD></TR><TR><td align="left">		<UL>		<LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>						<LI><b>theDrag</b> - the drag reference being constructed by the DataBrowser.<BR><BR></LI>				<LI><b>item</b> - this is the item ID of the item your application should add to the drag.<BR><BR></LI>				<LI><b>itemRef</b> - this parameter is currently unused.  You should set this parameter to point to an <CODE><a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">ItemReference</A></CODE> variable before calling this routine.</LI>                              		</UL>        <P>If your callback returns <code>true</code>, then the item will be added to the transparent drag image.  If it returns <code>false</code>, it will not.</P>    </TD></TR></TABLE></CENTER>              <BR><BR><A NAME="acceptDragCallback"></A><P><B>acceptDragCallback.</B> As an incoming drag is moved over an item, this routine is called. If your routine returns <code>true</code>, then the DataBrowser will draw the right highlighting and be prepared to receive a <CODE>DataBrowserReceiveDragProcPtr</CODE> call.</P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef Boolean (*DataBrowserAcceptDragProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">DragReference</A> theDrag,        <A HREF="#datadef">DataBrowserItemID</A> item);    typedef DataBrowserAcceptDragProcPtr DataBrowserAcceptDragUPP;</pre>    </TD></TR><TR><td align="left">		<UL>		<LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>		<LI><b>theDrag</b> - a Drag Manager reference.<BR><BR></LI>		<LI><b>item</b> - This is the item ID of the item the drag is being held over.  If the drag is being held over the list but not over any item, then item will contain the default target item ID for the list.  The default target item ID for the list is discussed in the section <A HREF="#disc_root">Setting the Root Container</A>.</LI>                              		</UL>	<P>Your callback should return <CODE>true</CODE> if it is capable of accepting the drag in the location designated by the item parameter.</P>    </TD></TR></TABLE></CENTER><BR><BR><BR><A NAME="receiveDragCallback"></A><P><B>receiveDragCallback.</B> Your <CODE>receiveDragCallback</CODE> routine will be called to receive drags.  In this routine, your application should extract the items it needs from the drag and add them to the list in the location defined by the item parameter. </P>                                            <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    Boolean (*DataBrowserReceiveDragProcPtr) (        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">DragReference</A> theDrag,        <A HREF="#datadef">DataBrowserItemID</A> item);    typedef DataBrowserReceiveDragProcPtr        DataBrowserReceiveDragUPP;</pre>    </TD></TR><TR><td align="left">		<UL>		<LI><b>browser</b> - a DataBrowser control created by a call to		<CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                               		<LI><b>theDrag</b> - a Drag Manager reference.<BR><BR></LI>		<LI><b>item</b> - This is the item ID of the item the drag is being held over.  If the drag is being held over the list but not over any item, then item will contain the default target item ID for the list.  The default target item ID for the list is discussed in the section <A HREF="#disc_root">Setting the Root Container</A>.</LI>                          </UL><P>Your callback should return <CODE>true</CODE> if is successfully completes processing all of the information in the drag.  Otherwise, it should return <CODE>false</CODE>.  If your callback returns <CODE>false</CODE>, the zoom-back animation will occur for the drag.</P>    </TD></TR></TABLE></CENTER>                     <BR><BR><BR><A NAME="postProcessDragCallback"></A>       <P><B>postProcessDragCallback.</B>  Your application's <CODE>postProcessDragCallback</CODE> routine will be called after a drag command has been completed if any one of the drag processing callback routines you installed (<CODE><A HREF="#receiveDragCallback">receiveDragCallback</A></CODE>, <CODE><A HREF="#acceptDragCallback">acceptDragCallback</A></CODE>, or <CODE><A HREF="#addDragItemCallback">addDragItemCallback</A></CODE>) were called during the drag.  Specifically, this routine will be called if any one call to <CODE><A HREF="#addDragItemCallback">addDragItemCallback</A></CODE> returns <code>true</code>, and after all calls <CODE><A HREF="#acceptDragCallback">acceptDragCallback</A></CODE> and <CODE><A HREF="#receiveDragCallback">receiveDragCallback</A></CODE>.  Inside of your <CODE>postProcessDragCallback</CODE> routine, your application should deallocate any resources that were allocated when the other drag handlers were called.  The <CODE><A HREF="#postProcessDragCallback">postProcessDragCallback</A></CODE> will be called immediately before the drag reference is deallocated by the DataBrowser so your application should not assume that this structure will remain intact after this callback is made.</P>                       <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef void (*DataBrowserPostProcessDragProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">DragReference</A> theDrag,        OSStatus trackDragResult);    typedef DataBrowserPostProcessDragProcPtr        DataBrowserPostProcessDragUPP;</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to            <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>theDrag</b> - a Drag Manager drag reference.<BR><BR></LI>            <LI><b>trackDragResult</b> - the result returned by <CODE>TrackDrag</CODE></LI>                                      </UL>        <P>Returns an operating system result code describing the success of    the operation. Your callback should return the result code <CODE>noErr</CODE> if the operation was successful.</P></TD></TR></TABLE></CENTER>         <BR><BR><BR><A NAME="getHelpContentCallback"></A><P><B>getHelpContentCallback</B> - for Displaying Help Content.</P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef void (*DataBrowserGetHelpContentProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        HMContentRequest inRequest,        HMContentProvidedType *outContentProvided,        HMHelpContentPtr ioHelpContent);    typedef DataBrowserGetHelpContentProcPtr        DataBrowserGetHelpContentUPP;</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>browser</b> - a Data                              Browser control created by a call to                              <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                              <LI><b>item</b> - the Data ID indentifying the row.<BR><BR></LI>                              <LI><b>property</b> - the Property ID identifying the column.<BR><BR></LI>                              <LI><b>inRequest</b> - either <CODE>kHMSupplyContent</CODE> or <CODE>kHMDisposeContent</CODE>.<BR><BR></LI>                              <LI><b>outContentProvided</b> - should be set to the content type provided in the record pointed to by <CODE>ioHelpContent</CODE>.<BR><BR></LI>                              <LI><b>ioHelpContent</b> - a help content record containing the help information to be displayed.<BR><BR></LI>                                                         </UL>        <P>Returns an operating system result code describing the success of the operation.        Your callback should return the result code <CODE>noErr</CODE> if the operation        was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><BR><A NAME="contextualMenuCallback"></A><P><B>contextualMenuCallback.</B></P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef void (*DataBrowserGetContextualMenuProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/macos8/HumanInterfaceToolbox/MenuManager/menumanager.html">MenuRef</A> *menu,        UInt32 *helpType,        <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A> *helpItemString,        AEDesc *selection);    typedef DataBrowserGetContextualMenuProcPtr        DataBrowserGetContextualMenuUPP;</pre>    </TD></TR><TR><td align="left">		<UL>			<LI><b>browser</b> - a DataBrowser control created by a call to			<CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                              			<LI><b>menu</b> - Your callback should provide a <a href="../../documentation/macos8/HumanInterfaceToolbox/MenuManager/menumanager.html">MenuRef</A> in this parameter.<BR><BR></LI>                              			<LI><b>helpType</b> - set this variable to one of the values <CODE>kCMHelpItemNoHelp</CODE>, <CODE>kCMHelpItemAppleGuide</CODE>, or <CODE>kCMHelpItemOtherHelp</CODE>.  This value will be passed to <CODE>ContextualMenuSelect</CODE>.<BR><BR></LI>			<LI><b>helpItemString</b> - The very first item that appears in the contextual menu.  If you set this value to <code>Null</code>, then the default "Help" string will be displayed.<BR><BR></LI>                              			<LI><b>selection</b> - this will point to an empty <CODE>AEDesc</CODE> and your callback should set this to your own internal representation of the selection.  This will be passed to <CODE>ContextualMenuSelect</CODE>.</LI>                              		</UL>        <P>Returns an operating system result code describing the success of the operation. Your callback should return the result code <CODE>noErr</CODE> if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><BR><A NAME="selectContextMenuCallback"></A><P><B>selectContextMenuCallback.</B></P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef void (*DataBrowserSelectContextualMenuProcPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/macos8/HumanInterfaceToolbox/MenuManager/menumanager.html">MenuRef</A> menu,        UInt32 selectionType,        SInt16 menuID,        MenuItemIndex menuItem);    typedef DataBrowserSelectContextualMenuProcPtr        DataBrowserSelectContextualMenuUPP;</pre>    </TD></TR><TR><td align="left">		<UL>			<LI><b>browser</b> - a DataBrowser control created by a call to			<CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                              			<LI><b>menu</b> - the menu reference your application provided in its <CODE><A HREF="#contextualMenuCallback">contextualMenuCallback</A></CODE>.<BR><BR></LI>                              			<LI><b>selectionType</b> - returned from <CODE>ContextualMenuSelect</CODE>.<BR><BR></LI>                              			<LI><b>menuID</b> - the menu ID of the menu selected.  This field will be <CODE>zero</CODE> if no selection was made.<BR><BR></LI>                              			<LI><b>menuItem</b> - the menu item number of the item selected.</LI>                                                            		</UL>    </TD></TR></TABLE></CENTER><BR><BR><A NAME="DataBrowserCallbacks_routines"></A><H3>Routines for managing the <A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A> structure</H3>         <P>This section discusses operations on the         <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure as a whole;         discussion of the meaning of its constituent elements is         provided later in this document. For your convenience, the         field names listed above are linked to those descriptions.         In the simplest of cases, the         <CODE><A HREF="#clientDataCallback">clientDataCallback</A></CODE> is the only callback your         application will need to re-define.</P>                  <P>Pointers to the callback routines used by a particular         DataBrowser control can be accessed through the         <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure. The mechanism         used for installing the callback routines for a Data         Browser control is analogous to the mechanism used for         QuickDraw's <CODE><a href="../../documentation/mac/QuickDraw/QuickDraw-179.html">SetStdProcs</A></CODE>         routine: an application calls         <CODE>InitDataBrowserCallbacks</CODE> to set up a         <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure so it contains         all of the standard DataBrowser callback routines, then         your application replaces the callbacks it wishes to         customize with pointers to its own routines.</P>            <A NAME="InitDataBrowserCallbacks"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">                  <P><B>The InitDataBrowserCallbacks routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus InitDataBrowserCallbacks(        <A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A>* callbacks);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>callbacks</b> - a pointer to a <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE>            structure.  The version field of the <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure must be set to the value <CODE>kDataBrowserLatestCallbacks</CODE> before this routine is called. </LI>        </UL>        <P>Returns an operating system result code describing the success of the operation.        The code <CODE>noErr</CODE> will be returned if the operation was        successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                      <P>The routine <CODE><A HREF="#InitDataBrowserCallbacks">InitDataBrowserCallbacks</A></CODE>         initializes a <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure so         it contains references to all of the default callback         routines used by the DataBrowser control. After calling         <CODE><A HREF="#InitDataBrowserCallbacks">InitDataBrowserCallbacks</A></CODE>, your application         should replace the callback routines it wishes to customize         with references to its own routines.</P>                  <P>Once your application has installed references to its own         callback routines in the <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE>         structure, it can install the new callbacks in a Data         Browser control by calling the         <CODE>SetDataBrowserCallbacks</CODE> routine. This routine         replaces the <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure         currently being used by the control with the structure the         application provides as a parameter.</P>             <A NAME="SetDataBrowserCallbacks"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">                  <P><B>The SetDataBrowserCallbacks routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserCallbacks(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> control,        const <A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A> *callbacks);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>control</b> - a DataBrowser control created by a call to            <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>callbacks</b> - a pointer to a <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE>            structure.</LI>        </UL>        <P>Returns an operating system result code describing the success of the operation.        The code <CODE>noErr</CODE> will be returned if the operation was        successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                           <P>It is also possible to retrieve a copy of the         <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure that is         currently being used by a DataBrowser control. This can be         done using the <CODE>GetDataBrowserCallbacks</CODE>         routine.</P>             <A NAME="GetDataBrowserCallbacks"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">                  <P><B>The GetDataBrowserCallbacks routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserCallbacks(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> control,        <A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A> *callbacks);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>control</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>callbacks</b> - a pointer to a <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE>            structure.</LI>        </UL>        <P>Returns an operating system result code describing the success of the operation.        The code <CODE>noErr</CODE> will be returned if the operation was        successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                                    <P>When used in combination with the         <CODE><A HREF="#SetDataBrowserCallbacks">SetDataBrowserCallbacks</A></CODE> routine,         <CODE><A HREF="#GetDataBrowserCallbacks">GetDataBrowserCallbacks</A></CODE> provides a mechanism         in which an application can either temporarily override or         replace one or more callbacks being used by a DataBrowser         control at particular points during processing. &nbsp;</P>                  <P><A HREF="#page_top">Back to top</A></P>                 <BR><BR>                            <A NAME="predefinedcolumns"></A>                  <H2>Pre-defined Column Display Types</H2>                  <P>For convenience, the DataBrowser control provides a         number of pre-defined display types that your application         can use to display different types of data. These are         provided to reduce the coding overhead involved for         displaying a number common data types.  Furthermore, facilities         have been provided for developers who wish to provide their         own display code for drawing their data types in special         ways.</P>                  <P><A HREF="#newcolumnlisting">Listing 1</A> illustrates how you         would go about creating a column of checkboxes for display         in the DataBrowser. This was done by providing the         <CODE><A HREF="#kDataBrowserCheckboxType">kDataBrowserCheckboxType</A></CODE> as the property type         in the <CODE><A HREF="#DataBrowserListViewColumnDesc">DataBrowserListViewColumnDesc</A></CODE> record         passed to the <CODE><A HREF="#AddDataBrowserListViewColumn">AddDataBrowserListViewColumn</A></CODE>         routine. Columns that use any of the other pre-defined         display types can be created in the same way. </P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td bgcolor="#e6e6e6" align=left>    <P><B>Note:</B><BR>The DataBrowser requires the <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE> flag to be set in order to enable editing of any changeable display type (namely checkboxes, pop-up menus, etc).  Be sure your application is setting the <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE> flag when defining columns containing checkboxes, menus, and so forth.    </P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P>The remaining parts of this section detail the various         pre-defined display types provided by the DataBrowser. For         information about how to provide routines for doing your own         drawing, refer to the <A HREF="#defcustcol">Custom Column         Display Types</A> section that follows. </P>                   <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                           <A NAME="predefinedcolumns_icons"></A><H3>Icons</H3>                  <P>To display a list of icons in a DataBrowser column, your         application must define a property with the type         <CODE><A HREF="#kDataBrowserIconType">kDataBrowserIconType</A></CODE>. Columns with the property         type <CODE><A HREF="#kDataBrowserIconType">kDataBrowserIconType</A></CODE> are used to display         lists of icons. For columns of this type, the DataBrowser         control expects that your <A HREF="#clientDataCallback">Data         Callback Routine</A> will provide an <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconRef</A></CODE>         referring to the icon that is to be drawn in a cell. It is         also possible for your data callback routine to provide         other information used in drawing the icon such as a tint         color and an icon transform type. Routines you can use for         providing this information are described in detail below.</P>         <A NAME="SetDataBrowserItemDataIcon"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataIcon routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataIcon (        DataBrowserItemDataRef itemData,        <a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconRef</A> theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <CODE>itemData</CODE> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - the icon                              reference for the icon that is to be                              displayed.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P><CODE><A HREF="#SetDataBrowserItemDataIcon">SetDataBrowserItemDataIcon</A></CODE> should be called         from inside of your <A HREF="#clientDataCallback">Data         Callback Routine</A> to specify what icon is to be drawn in         a particular cell. This routine should only be called for         columns that have been defined with either the         <CODE><A HREF="#kDataBrowserIconType">kDataBrowserIconType</A></CODE> property type or the         <CODE><A HREF="#kDataBrowserIconAndTextType">kDataBrowserIconAndTextType</A></CODE> property type. For         more information about <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconRef</A></CODE>s refer to the         <a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">Icon         Services</A> documentation.</P>            <A NAME="SetDataBrowserItemDataIconTransform"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataIconTransform routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataIconTransform (        DataBrowserItemDataRef itemData,        <a href="../../documentation/macos8/HumanInterfaceToolbox/IconServUtili/iconservicesandutilities.html">IconTransformType</A> theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - the icon                              reference for the icon that is to be                              displayed.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P><CODE><A HREF="#SetDataBrowserItemDataIconTransform">SetDataBrowserItemDataIconTransform</A></CODE> allows         your application to specify that a special visual         transformation is to be applied to the icon when it is         drawn. These transformations correspond to the various         display states the Finder uses when drawing icons.</P>                                              <A NAME="SetDataBrowserItemDataRGBColor"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataRGBColor routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataRGBColor (        DataBrowserItemDataRef itemData,        <a href="../../documentation/macos8/MultimediaGraphics/QuickDraw/quickdraw.html">RGBColor</A> *theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <CODE>itemData</CODE> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - an RGB color                              record.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                                                       <P><CODE><A HREF="#SetDataBrowserItemDataRGBColor">SetDataBrowserItemDataRGBColor</A></CODE> allows your         application to provide a color that will be used to tint the         icon when it is drawn. The effect provided by this facility         is similar to the effect provided by the icon label         transformation constants, except this method allows your         application to specify a specific color.</P>                   <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                           <A NAME="predefinedcolumns_text"></A><H3>Text</H3>                  <P>For displaying a list of textual strings, the DataBrowser defines the display type         <CODE><A HREF="#kDataBrowserTextType">kDataBrowserTextType</A></CODE>. When used, this type         tells the DataBrowser that the column is to be drawn as a         list of Unicode-encoded strings.  Core Foundation         <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A></CODE>s are used to represent the text         data drawn in the column. Inside of your application's data         callback routine, call the         <CODE>SetDataBrowserItemDataText</CODE> routine to provide         the text data that the DataBrowser is to display in the         list.</P>                                              <A NAME="SetDataBrowserItemDataText"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataText routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataText (        DataBrowserItemDataRef itemData,        <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A> theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <CODE>itemData</CODE> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a Core                              Foundation string reference.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P><CODE><A HREF="#SetDataBrowserItemDataText">SetDataBrowserItemDataText</A></CODE> must be called         from inside of an application's data callback routine when         the cell being drawing is inside of a column with either the         <CODE><A HREF="#kDataBrowserTextType">kDataBrowserTextType</A></CODE> property type or the         <CODE><A HREF="#kDataBrowserIconAndTextType">kDataBrowserIconAndTextType</A></CODE> property type. If         the <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE> flag is set         among the <CODE><A HREF="#DataBrowserPropertyFlags">DataBrowserPropertyFlags</A></CODE> for the         column's property, then the text displayed in the column         will be editable and can be changed by the user. In these         cases, your application can retrieve the modified text using         the <CODE>GetDataBrowserItemDataText</CODE> routine.  The data         browser will make its own internal copy of the <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A></CODE>         when this routine is called.</P>             <A NAME="GetDataBrowserItemDataText"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserItemDataText routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserItemDataText (        DataBrowserItemDataRef itemData,        <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A> *theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <CODE>itemData</CODE> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a pointer to                              a location where a Core Foundation                              string reference will be returned.                              On completion, this parameter will contain a newly created <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A></CODE>.  Your application must release this string reference once it is no longer needed.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P>If your data callback routine is called with the         <CODE>setValue</CODE> parameter set to <code>true</code>, then that means         that the text being displayed in the cell referred to in the         call has been modified. At that point, your application         should call <CODE><A HREF="#GetDataBrowserItemDataText">GetDataBrowserItemDataText</A></CODE> to         retrieve the new text.  Your application must release         the <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A></CODE> once it is no longer needed.<BR><BR>         </P>          <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                     <A NAME="predefinedcolumns_iconswtext"></A><H3>Icons with Text</H3>                  <P>To display a list of icons associated with text, your         application must create a column with the property type         <CODE><A HREF="#kDataBrowserIconAndTextType">kDataBrowserIconAndTextType</A></CODE>. After that, your         application can use both the routines defined for icon         columns and the routines defined for text columns to define         the contents for each cell.</P>                   <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                             <A NAME="predefinedcolumns_time"></A><H3>Time</H3>                  <P>To display a list of date values, use the property type         <CODE><A HREF="#kDataBrowserDateTimeType">kDataBrowserDateTimeType</A></CODE>. Columns defined with         this property type are capable of date values returned by         the date and time utilities routines. If the         <CODE><A HREF="#kDataBrowserRelativeDateTime">kDataBrowserRelativeDateTime</A></CODE> flag is specified         among the <CODE><A HREF="#DataBrowserPropertyFlags">DataBrowserPropertyFlags</A></CODE> for the         column's property, then the time will be displayed as a         relative time value for times proximate to the current clock         setting rather than an absolute time value. </P>             <A NAME="SetDataBrowserItemDataDateTime"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataDateTime routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataDateTime (        DataBrowserItemDataRef itemData,        long theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <CODE>itemData</CODE> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a 32-bit                              value representing the number of                              elapsed seconds elapsed since midnight<br>January                              1, 1904.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                   <P><CODE><A HREF="#SetDataBrowserItemDataDateTime">SetDataBrowserItemDataDateTime</A></CODE> can be used         to provide a 32-bit time value for display. The value         displayed should be encoded as the number of seconds elapsed since         midnight January 1, 1904. For more information about date         and time encodings used in the Mac&nbsp;OS, refer to the         <a href="../../documentation/mac/OSUtilities/OSUtilities-93.html">Date         and Time Measurement Utilities</A> documentation.</P>             <A NAME="SetDataBrowserItemDataLongDateTime"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataLongDateTime routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataLongDateTime (        DataBrowserItemDataRef itemData,        const <a href="../../documentation/macos8/TextIntlSvcs/DateTimeUtilities/datetimeutilities.html">LongDateTime</A> *theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a pointer to                              a 64-bit integer representing the                              number of seconds that have elapsed                              since midnight January 1, 1904.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P><CODE><A HREF="#SetDataBrowserItemDataLongDateTime">SetDataBrowserItemDataLongDateTime</A></CODE> can be         used to provide a 64-bit time value for display. The value         displayed should be encoded as the number of seconds elapsed since         midnight January 1, 1904. For more information about date         and time encodings used in the Mac&nbsp;OS, refer to the         <a href="../../documentation/mac/OSUtilities/OSUtilities-93.html">Date         and Time Measurement Utilities</A> documentation. </P>                  <P>If the <CODE><A HREF="#kDataBrowserRelativeDateTime">kDataBrowserRelativeDateTime</A></CODE> flag has been set among the column's property flags, then the time will be displayed as a relative time value for times proximate to the current clock setting.</P>                  <BR><BR>                  <H3>checkboxes</H3>                  <P>Columns created with the property type         <CODE><A HREF="#kDataBrowserCheckboxType">kDataBrowserCheckboxType</A></CODE> will contain a list of         checkboxes. Normally, to allow editing, your application         should set the  <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE>         flag among the <CODE><A HREF="#DataBrowserPropertyFlags">DataBrowserPropertyFlags</A></CODE>. Checkboxes displayed by the DataBrowser are capable of         displaying three values defined for the         <CODE>ThemeButtonValue</CODE> data type:          <CODE>kThemeButtonOff</CODE>, <CODE>kThemeButtonOn</CODE>,         <CODE>or kThemeButtonMixed</CODE>. The value displayed for         the control is determined by the         <CODE>SetDataBrowserItemDataButtonValue</CODE> routine.</P>             <A NAME="SetDataBrowserItemDataButtonValue"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataButtonValue routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataButtonValue (        DataBrowserItemDataRef itemData,        ThemeButtonValue theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a value                              representing the setting to display for                              the control.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P>If the user has changed the value displayed by the         control, then your callback routine will be called with the         <CODE>setValue</CODE> parameter set to <code>true</code>. At that point,         your application can call the         <CODE>GetDataBrowserItemDataButtonValue</CODE> routine to         find out the new checkbox setting.</P>             <A NAME="GetDataBrowserItemDataButtonValue"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserItemDataButtonValue routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserItemDataButtonValue (        DataBrowserItemDataRef itemData,        ThemeButtonValue *theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <CODE>itemData</CODE> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a value                              representing the setting to display for                              the control.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                            <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                                             <A NAME="predefinedcolumns_progress"></A><H3>Progress Indicators</H3>                  <P>To display a progress indicators in a column, your         application must create a column with the property type         <CODE><A HREF="#kDataBrowserProgressBarType">kDataBrowserProgressBarType</A></CODE>. Progress         indicators are displayed using the standard appearance         mercury/groove visual analogy. Three values are used by the         DataBrowser to determine the appearance of the progress         indicators: the minimum, maximum, and current value.         Routines described in this section allow you to modify these         values.</P>               <A NAME="SetDataBrowserItemDataValue"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataValue routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataValue (        DataBrowserItemDataRef itemData,        SInt32 theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a value                              representing the setting to                              display.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                     <P><CODE><A HREF="#SetDataBrowserItemDataValue">SetDataBrowserItemDataValue</A></CODE> sets the current         value being displayed by the control. This value should be         between the minimum and maximum values specified by calling         <CODE>SetDataBrowserItemDataMinimum</CODE> and         <CODE><A HREF="#SetDataBrowserItemDataMaximum">SetDataBrowserItemDataMaximum</A></CODE>. Values displayed         by a progress bar may vary inclusively between the minimum         and maximum values.</P>               <A NAME="SetDataBrowserItemDataMinimum"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataMinimum routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataMinimum (        DataBrowserItemDataRef itemData,        SInt32 theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a value                              representing the minimum setting.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P><CODE><A HREF="#SetDataBrowserItemDataMinimum">SetDataBrowserItemDataMinimum</A></CODE> determines the         minimum bound for the values being displayed in the control.         Values displayed by a progress bar may vary inclusively         between the minimum and maximum values.</P>                <A NAME="SetDataBrowserItemDataMaximum"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataMaximum routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataMaximum (        DataBrowserItemDataRef itemData,        SInt32 theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a value                              representing the maximum setting.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>         <P><CODE><A HREF="#SetDataBrowserItemDataMaximum">SetDataBrowserItemDataMaximum</A></CODE> determines the         maximum bound for the values being displayed in the control.         Values displayed by a progress bar may vary inclusively         between the minimum and maximum values.</P>          <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                  <A NAME="predefinedcolumns_relevance"></A>         <H3>Relevance Rank</H3>                  <P>Relevance Ranks are drawn in a way similar to progress         indicators using the familiar mercury/groove visual analogy.         Specifically, relevance ranks are drawn without the groove. Columns         used to display relevance rankings are created with the         property type <CODE><A HREF="#kDataBrowserRelevanceRankType">kDataBrowserRelevanceRankType</A></CODE>.         Once your application has created a column for displaying         relevance rankings, the same routines used for setting         values for progress indicators may be used to control its         appearance.</P>                   <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                           <A NAME="predefinedcolumns_menus"></A><H3>Pop-up Menus</H3>                  <P>Columns of pop-up menus can be created by adding new         columns with the <CODE><A HREF="#kDataBrowserpop-upMenuType">kDataBrowserpop-upMenuType</A></CODE>         property type. The         <CODE>SetDataBrowserItemDataMenuRef</CODE> routine can then         be used to specify the menu that will be displayed as a         cell's pop-up menu.</P>             <A NAME="SetDataBrowserItemDataMenuRef"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserItemDataMenuRef routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserItemDataMenuRef (        DataBrowserItemDataRef itemData,        <a href="../../documentation/macos8/HumanInterfaceToolbox/MenuManager/menumanager.html">MenuRef</A> theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a menu                              reference designating the menu to                              display in the cell.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>         <P>The <CODE><A HREF="#SetDataBrowserItemDataValue">SetDataBrowserItemDataValue</A></CODE> routine can         then be used to set the pop-up menu's value. When the user         chooses a command from one of your pop-up menus, your data         callback routine will be called with the <CODE>setValue</CODE> parameter         set to <code>true</code>. At that time, your application can call the         <CODE>GetDataBrowserItemDataValue</CODE> to determine the         new value for the pop-up menu.</P>                               <A NAME="GetDataBrowserItemDataValue"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserItemDataValue routine</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserItemDataValue (        DataBrowserItemDataRef itemData,        SInt32 *theData );</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>itemData</b> - the                              <code>itemData</code> reference number that was                              passed to your <A HREF="#clientDataCallback">Data                              Callback Routine</A>.<BR><BR></LI>                                                            <LI><b>theData</b> - a pointer to                              a 32-bit integer where the value should                              be stored.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                                     <P><A HREF="#page_top">Back to top</A></P>        <BR><BR>                  <A NAME="kDataBrowserCustomType"></A><A NAME="defcustcol"></A><H2>Defining Your Own Column Display Types</H2>                  <P>Columns created with the property type         <CODE>kDataBrowserCustomType</CODE> have no pre-defined         display mechanism. It is assumed that when such a column is         created, the application will be providing the drawing         routines used to display the column. This section discusses         the structures and routines an application uses to provide         drawing routines for a custom column.</P>                  <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><P><B>IMPORTANT</B><BR>Information presented in this section refers to the current state of these APIs.  These APIs are currently under review and are subject to change without notice.  If you are using these APIs and you have special requirements that they currently do not provide, then please feel free to <A HREF="http://developer.apple.com/contact/">contact us</A> and let us know about your needs so we may give them consideration when we are lookingat these APIs.</P></TD></TR></TABLE></CENTER>    <A NAME="DataBrowserCustomCallbacks"></A>    <H3>The DataBrowserCustomCallbacks Structure</H3>                 <P>For even greater control over the presentation of user         interface elements displayed inside of DataBrowser views,         applications can use the <CODE>DataBrowserCustomCallbacks</CODE>         structure. This structure provides callbacks for         implementing custom drawing and user interaction for special         kinds of data an application displays.</P>        <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The DataBrowserCustomCallbacks Structure</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>struct DataBrowserCustomCallbacks {    UInt32 version; /* use kDataBrowserLatestCustomCallbacks */    union {        struct {            DataBrowserDrawItemUPP <A HREF="#CustomDrawItemCallback">CustomDrawItemCallback</A>;            DataBrowserEditItemUPP <A HREF="#CustomEditTextCallback">CustomEditTextCallback</A>;            DataBrowserHitTestUPP <A HREF="#CustomHitTestCallback">CustomHitTestCallback</A>;            DataBrowserTrackingUPP <A HREF="#CustomTrackingCallback">CustomTrackingCallback</A>;            DataBrowserItemDragRgnUPP <A HREF="#CustomDragRegionCallback">CustomDragRegionCallback</A>;            DataBrowserItemAcceptDragUPP <A HREF="#CustomAcceptDragCallback">CustomAcceptDragCallback</A>;            DataBrowserItemReceiveDragUPP <A HREF="#CustomReceiveDragCallback">CustomReceiveDragCallback</A>;        } v1;    } u;};/* Macro for initializing custom callback structure */#define InitializeDataBrowserCustomCallbacks(callbacks, version) \{ callbacks-&gt;version = version; \  <A HREF="#InitDataBrowserCustomCallbacks">InitDataBrowserCustomCallbacks</A>(callbacks); }and macro for setting version in the callbacks structure.</pre>    </TD></TR></TABLE></CENTER>        <BR><BR><BR>  <A NAME="CustomDrawItemCallback"></A><P><B>CustomDrawItemCallback.</B>  If your application would like to provide custom drawing for a column, it can do so by providing its own <CODE>CustomDrawItemCallback</CODE>.  Whenever the DataBrowser needs to draw or redraw a cell in a custom column, it will call this routine to draw the cell.  When your <CODE>CustomDrawItemCallback</CODE> is called the DataBrowser will already have called <CODE><a href="../../documentation/macos8/MultimediaGraphics/QuickDraw/quickdraw.html">EraseRect</A></CODE> and set the clipping region, the pen, and the font to appropriate settings for your routine to begin drawing.  Your drawing routine should not attempt to modify the clipping region, pen, port, or origin.</P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef void (*CustomDrawItemCallbackPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        <A HREF="#DataBrowserItemState">DataBrowserItemState</A> itemState,        const Rect *theRect,        SInt16 gdDepth,        Boolean colorDevice);        typedef CustomDrawItemCallbackPtr DataBrowserDrawItemUPP;</pre>	</TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> number for the item to be drawn.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the item to be drawn.<BR><BR></LI>            <LI><b>itemState</b> - the current state of the item being drawn.  Possible values for this parameter are listed in the description of the <A HREF="#GetDataBrowserItemState"><CODE>GetDataBrowserItemState</CODE></A> routine.  Your application should draw the cell in whatever way is appropriate for the state reflected by the value of this parameter.<BR><BR></LI>            <LI><b>theRect</b> - the bounding rectangle in local window coordinates where the cell should be drawn.<BR><BR></LI>            <LI><b>gdDepth</b> - the bit depth of the current QuickDraw GrafPort.<BR><BR></LI>            <LI><b>colorDevice</b> - <code>true</code> if the current QuickDraw port is a color device.</LI>        </UL>    </TD></TR></TABLE></CENTER>    <BR><BR><BR>         <A NAME="CustomEditTextCallback"></A><P><B>CustomEditTextCallback.</B>  When the DataBrowser has determined that the user would like to edit a text field, it will call your <CODE>CustomEditTextCallback</CODE> callback to ask your application for both permission to perform the editing operation and parameters used in the editing operation.</P>             <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef Boolean (*CustomEditTextCallbackPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A> theString,        Rect *maxEditTextRect,        Boolean *shrinkToFit);        typedef CustomEditTextCallbackPtr DataBrowserEditItemUPP;</pre>	</TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> number for the item to be drawn.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the item to be drawn.<BR><BR></LI>            <LI><b>theString</b> - a reference to the string that is to be edited.<BR><BR></LI>            <LI><b>maxEditTextRect</b> - if <CODE>shrinkToFit</CODE> is turned on, this is the largest size the edit field can grow in size.  If the text grows beyond the size of the edit field, it will scroll inside of the field as the user types (according to the Aqua user interface guidelines). If <CODE>shrinkToFit</CODE> is <CODE>false</CODE>, this is the size of the edit field that will be used.<BR><BR></LI>            <LI><b>shrinkToFit</b> - if you set this parameter to <code>true</code>, then the DataBrowser will expand and shrink the text editing box to match the width of the text appearing in the edit field.  With this version of the DataBrowser, this parameter is ignored and <CODE>shrinkToFit</CODE> it always <code>true</code> by default. </LI>        </UL>        <P>If your application returns the value <CODE>true</CODE>, then the DataBrowser will go ahead and perform the editing operation.  If your application returns the value <CODE>false</CODE>, then no editing operation will occur.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><BR><A NAME="CustomHitTestCallback"></A><P><B>CustomHitTestCallback.</B>  When the DataBrowser is tracking the cursor and mouse clicks, it will call your application's <CODE>CustomHitTestCallback</CODE> to determine if the mouse is over any content that is selectable or draggable.  If the mouse position is over selectable or draggable content, then your <CODE>CustomHitTestCallback</CODE> routine should return <CODE>true</CODE>.</P><A NAME="figcell"></A>	<BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_006.gif" align=middle alt="Figure 6" width=329 height=118>    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 6.</B> Differentiation between a custom cell's content area and its background.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>Your <CODE>CustomHitTestCallback</CODE> callback will be called by the DataBrowser to determine if the mouse is in the selectable or draggable content area of your custom cell (the cell's content area - see <A HREF="#figcell">Figure 6</A>).  If the DataBrowser is processing a mouse-down event, and the click is inside of the cell's content area then the DataBrowser will call your <CODE><A HREF="#CustomTrackingCallback">CustomTrackingCallback</A></CODE>; otherwise, it will begin processing the mouse-down event as the beginning of a marque selection operation.</P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef Boolean (*CustomHitTestCallbackPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> itemID,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        const Rect *theRect,        const Rect *mouseRect);    typedef CustomHitTestCallbackPtr DataBrowserHitTestUPP;</pre>	</TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>itemID</b> - the <A HREF="#datadef">Data&nbsp;ID</A> number for the row where the mouse is located.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the column where the mouse is located.<BR><BR></LI>            <LI><b>theRect</b> - the location of the cell's boundary rectangle on the screen in local window coordinates.<BR><BR></LI>            <LI><b>mouseRect</b> - contains the coordinates of the mouse.  If the top left and bottom right coordinates of this rectangle are identical, then a single point is being tested.  If they differ, then the DataBrowser is testing to see if your custom item is inside of a marque selection (use <CODE><a href="../../documentation/macos8/MultimediaGraphics/QuickDraw/quickdraw.html">SectRect</A></CODE> or <CODE><a href="../../documentation/macos8/MultimediaGraphics/QuickDraw/quickdraw.html">SectRgn</A></CODE> to determine if the selectable content of the custom cell is part of the selection).</LI>        </UL>        <P>Your application should return a <CODE>true</CODE> when either the mouse is located over the selectable or draggable content part of the cell or the marque selection rectangle, provided in <CODE>*mouseRect</CODE>, intersects with the selectable or draggable content area of the cell.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><BR>        <A NAME="CustomTrackingCallback"></A><P><B>CustomTrackingCallback.</B>  If you would like to provide custom drag-and-drop behavior inside of your application, then you should provide a <CODE>CustomTrackingCallback</CODE>.  Once the DataBrowser has determined that the mouse is being held down over the selectable or draggable part of the cell (see <A HREF="#figcell">Figure 6</A>), it will call your <CODE>CustomTrackingCallback</CODE>.  Your application can use the <CODE>CustomTrackingCallback</CODE> perform its own tracking such as highlighting a button, or tracking the mouse over a pop-up palette.</P>             <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef SInt16 (*CustomTrackingCallbackPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> itemID,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        const Rect *theRect,        Point startPt,        EventModifiers modifiers);    typedef CustomTrackingCallbackPtr DataBrowserTrackingUPP;</pre>	</TD></TR><TR><td align="left">	<UL>		<LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>		<LI><b>itemID</b> - the <A HREF="#datadef">Data&nbsp;ID</A> number for the row where the mouse is located.<BR><BR></LI>		<LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the column where the mouse is located.<BR><BR></LI>		<LI><b>theRect</b> - the cell's location in local window coordinates.<BR><BR></LI>		<LI><b>startPt</b> - the location of the mouse when the drag began.<BR><BR></LI>		<LI><b>modifiers</b> - the state of the modifier keys as passed in the modifiers parameter to the <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.7.html">HandleControlClick</A></CODE> routine.</LI>	</UL><P>Your <CODE><A HREF="#CustomTrackingCallback">CustomTrackingCallback</A></CODE> will only be called for mouse-down events and only after your <CODE><A HREF="#CustomHitTestCallback">CustomHitTestCallback</A></CODE> has returned true.  Your tracking procedure should do one of three things:</P>	 <OL>	 	<LI>Provide its own custom tracking behavior and animation and return the result <CODE>-1</CODE>.  A result of <CODE>-1</CODE> tells the DataBrowser that your application performed its own drag processing and no further processing is required.<BR><BR></LI>	 	<LI>Return the value <CODE>zero</CODE> to indicate that nothing has been hit and no further processing should take place.<BR><BR></LI>	 	<LI>Return the value <CODE>1</CODE> to tell the DataBrowser to continue processing the click in its own way.<BR><BR></LI>	</OL>		</TD></TR></TABLE></CENTER>    <BR><BR><BR><A NAME="CustomDragRegionCallback"></A><P><B>CustomDragRegionCallback.</B>  Once the DataBrowser has determined that it is going to begin a drag using the Drag Manager, it will create a transparent drag image that will appear during the drag operation.  When creating the transparent drag image, it will call your application's <CODE>CustomDragRegionCallback</CODE> routine to determine what part of the cell's rectangle should be used when creating the transparent image.  Normally, your callback should return the boundary region for the cell's content area (see <A HREF="#figcell">Figure 6</A>).  The DataBrowser will use this region as a clipping region when it calls back to your <CODE><A HREF="#CustomDrawItemCallback">CustomDrawItemCallback</A></CODE> while it is generating the transparent drag image.</P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef void (*CustomDragRegionCallbackPtr)(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> itemID,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        const Rect *theRect,        <a href="../../documentation/mac/QuickDraw/QuickDraw-131.html">RgnHandle</A> dragRgn);    typedef CustomDragRegionCallbackPtr DataBrowserItemDragRgnUPP;</pre>	</TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>itemID</b> - the <A HREF="#datadef">Data&nbsp;ID</A> number for the row to be represented in the drag region.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the column to be represented in the drag region.<BR><BR></LI>            <LI><b>theRect</b> - the cell's location in local window coordinates.<BR><BR></LI>            <LI><b>dragRgn</b> - a reference to the region.</LI>        </UL>    </TD></TR></TABLE></CENTER><P>Your application's <CODE><A HREF="#CustomDragRegionCallback">CustomDragRegionCallback</A></CODE> should set the region passed in the <CODE>dragRgn</CODE> parameter to the region inside of <CODE>theRect</CODE> that should be incorporated into the images used to create the transparent drag.  This region is used to crop the image data produced by the <CODE><A HREF="#CustomDrawItemCallback">CustomDrawItemCallback</A></CODE> routine when creating the drag image.  Your <CODE><A HREF="#CustomDragRegionCallback">CustomDragRegionCallback</A></CODE> should set this region to the boundary of the content area inside of your custom cell.</P><P>Set the region to the region used to pick up the transparent drag image. This region is used as a mask when passed to the custom draw routine to generate the drag image.  All of these routines draw and calculate inside the coordinates provided in <CODE>theRect</CODE>.  Do not call <CODE><a href="../../documentation/macos8/MultimediaGraphics/QuickDraw/quickdraw.html">SetOrigin</A></CODE> in any of your drag callbacks.</P>    <BR><BR><BR><A NAME="CustomAcceptDragCallback"></A><P><B>CustomAcceptDragCallback.</B>  While processing a drag and the drag is held over one of your custom items, the DataBrowser will call your application's <CODE>CustomAcceptDragCallback</CODE> routine to determine if your item can accept the drag.</P>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef UInt16 (*CustomAcceptDragCallbackPtr )(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> itemID,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        const Rect *theRect,        <a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">DragReference</A> theDrag);    typedef CustomAcceptDragCallbackPtr        DataBrowserItemAcceptDragUPP;</pre>	</TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>itemID</b> - the <A HREF="#datadef">Data&nbsp;ID</A> number for the target row.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the target column.<BR><BR></LI>            <LI><b>theRect</b> - the cell's location in local window coordinates.<BR><BR></LI>            <LI><b>theDrag</b> - a Drag Manager drag reference.</LI>        </UL><P>The value returned by this routine is passed through to your application's <CODE>CustomReceiveDragCallback</CODE> in the <CODE>dragFlags</CODE> parameter.  Your application's <CODE><A HREF="#CustomAcceptDragCallback">CustomAcceptDragCallback</A></CODE> will be called by the DataBrowser when a drag is moved over your custom cell.  If the cell cannot accept the drag, return <CODE>zero</CODE>.  Otherwise, if the cell is an acceptable drop location for the drag, return a non-zero value.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><BR><A NAME="CustomReceiveDragCallback"></A><P><B>CustomReceiveDragCallback.</B>  If your custom item has indicated that it can accept a drag from the <CODE><A HREF="#CustomAcceptDragCallback">CustomAcceptDragCallback</A></CODE>.</P>      <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td bgcolor="#e6e6e6" align=left><pre>    typedef Boolean (*CustomReceiveDragCallbackPtr )(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> itemID,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        UInt16 dragFlags,        <a href="../../documentation/macos8/InterproCom/DragManager/dragmanager.html">DragReference</A> theDrag);    typedef CustomReceiveDragCallbackPtr        DataBrowserItemReceiveDragUPP;</pre>	</TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>itemID</b> - the <A HREF="#datadef">Data&nbsp;ID</A> number for the row where the drop occurred.<BR><BR></LI>            <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> number for the column where the drop occurred.<BR><BR></LI>            <LI><b>dragFlags</b> - the drag flags provided by the Drag Manager.<BR><BR></LI>            <LI><b>theDrag</b> - the Drag Manager drag reference.</LI>        </UL>        <P>Your <CODE><A HREF="#CustomReceiveDragCallback">CustomReceiveDragCallback</A></CODE> should return <CODE>true</CODE> if it successfully received the drag.  If it returns <code>false</code>, then the zoom-back animation will occur.</P>    </TD></TR></TABLE></CENTER><A NAME="DataBrowserCustomCallbacks_routines"></A><H3>Routines for managing the <A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A> structure</H3>         <P>As with the <CODE><A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A></CODE> structure,         a routine, <CODE>InitDataBrowserCustomCallbacks</CODE>, is         provided that allows applications to initialize a         <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE> structure so that it         contains references to all of the default callback routines         used by the DataBrowser.</P>         <A NAME="InitDataBrowserCustomCallbacks"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">                  <P><B>The InitDataBrowserCustomCallbacks routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus InitDataBrowserCustomCallbacks(        <A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A> *callbacks);</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>callbacks</b> - a pointer                              to a <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE>                              structure.  The version field of the <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE> structure must be set to the value <CODE>kDataBrowserLatestCustomCallbacks</CODE> before this routine is called.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                      <P><CODE><A HREF="#InitDataBrowserCustomCallbacks">InitDataBrowserCustomCallbacks</A></CODE> fills in a         <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE> structure with         references to the default callback routines used by the         DataBrowser control. Once you have replaced the callbacks         you wish to redefine with references to your own routine,         you can install your custom callbacks by calling         <CODE>SetDataBrowserCustomCallbacks</CODE>.</P>             <A NAME="SetDataBrowserCustomCallbacks"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">                  <P><B>The SetDataBrowserCustomCallbacks routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserCustomCallbacks(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A> *callbacks);</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>control</b> - a Data                              Browser control created by a call to                              <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                                            <LI><b>callbacks</b> - a pointer                              to a <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE>                              structure.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>                  <P><CODE><A HREF="#SetDataBrowserCustomCallbacks">SetDataBrowserCustomCallbacks</A></CODE> replaces the         <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE> structure that is currently in         use by a DataBrowser control with the new structure         referenced in the <CODE>callbacks</CODE> parameter.</P>             <A NAME="GetDataBrowserCustomCallbacks"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">                  <P><B>The GetDataBrowserCustomCallbacks routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserCustomCallbacks(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A>* callbacks);</pre>    </TD></TR><TR><td align="left">                  <UL>                              <LI><b>control</b> - a Data                              Browser control created by a call to                              <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                                            <LI><b>callbacks</b> - a pointer                              to a                              <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE>                              structure.</LI>                           </UL>                           <P>Returns an operating system result code                           describing the success of the operation.                           The code <CODE>noErr</CODE> will be                           returned if the operation was                           successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>         	<P>Applications wishing to either replace or temporarily	override the callbacks that are currently being used by a	DataBrowser control can use the	<CODE><A HREF="#GetDataBrowserCustomCallbacks">GetDataBrowserCustomCallbacks</A></CODE> routine to retrieve a copy of	the <CODE><A HREF="#DataBrowserCustomCallbacks">DataBrowserCustomCallbacks</A></CODE> that is currently	being used by a DataBrowser control.</P>         	<P><A HREF="#page_top">Back to top</A></P>    <BR><BR>     <A NAME="dbappearance"></A><H2>Browser Appearance and Behavior</H2>         <P>This section provides an overview of programming issues related to the appearance of the browser control and its behavior while processing user input.  The bulk of the work needed to maintain these aspects of the browser control are managed for you by the browser control itself; however, the browser control provides APIs and callbacks to notify your application of key events and conditions during user interaction.</P>         <A NAME="userinteraction_events"></A><H3>Event Handling</H3><P>The DataBrowser is a control.  As such, it does not require any special event handling beyond the Control Manager routines (<CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.7.html">HandleControlClick</A></CODE>, <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.7.html">HandleControlKey</A></CODE>, <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.7.html">DrawControls</A></CODE>, and <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.7.html">IdleControls</A></CODE>) that your application will normally call to manage controls.  However, if your application has installed the default Carbon event handler for your window, then even these calls are not necessary since the Carbon event manager will take care of these operations for you.</P><P><A HREF="#figurefive">Figure 7</A> illustrates the general flow of control for mouse clicks received by the DataBrowser control.  The DataBrowser provides its own support for keyboard navigation and keyboard events.  If the keyboard handling provided by the DataBrowser is not appropriate for your application, then you may wish to filter keyboard input before calling <CODE><a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/ControlMgr8Ref/ControlMgrRef.7.html">HandleControlKey</A></CODE>.</P><A NAME="figurefive"></A>	<BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_007.gif" align=middle alt="Figure 7" width=430 height=421>    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 7.</B> The general flow of control for mouse-down and update events.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>The DataBrowser provides an API your application can use to turn on and off mouse event handling for items displayed in the list.  When a browser control is set to inactive it will be drawn appropriately, and it will not accept mouse-down events.  The <CODE>SetDataBrowserActiveItems</CODE> routine allows your application to control the active/inactive state of the control.</P>                <A NAME="SetDataBrowserActiveItems"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserActiveItems routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserActiveItems(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Boolean active);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>active</b> - a boolean value containing the new active state for the items displayed in the list.</LI>                                      </UL><P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="GetDataBrowserActiveItems"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserActiveItems routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserActiveItems(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Boolean *active);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>active</b> - the current active state of the items displayed in the list will be returned in the boolean variable pointed to by this parameter.</LI>                                      </UL><P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR>  <A NAME="userinteraction_conditions"></A>      <H3>Interesting Conditions</H3><P>The browser control can handle nearly all of the interface display and user interaction operations involved in displaying a list in a window.  However, the true power of the browser control comes from the fact that it calls back to your application at key points during execution to provide notification of changing conditions that your application can act upon to perform further processing.  At the time of this writing, the DataBrowser provides the notifications shown in <A HREF="#table1">Table 1</A> by calling back to your application's <A HREF="#itemNotificationCallback">Notification Callback</A> routine (<A HREF="#table1">Table 1</A> is located in the section describing the <A HREF="#itemNotificationCallback">Notification Callback</A> callback).  Your application can provide a reference to its notification callback routine in the <A HREF="#itemNotificationCallback"><CODE>itemNotificationCallback</CODE></A> field of the <A HREF="#DataBrowserCallbacks">DataBrowserCallbacks</A> structure.</P><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR>       <A NAME="appearance_scrollbars"></A><H3>Scroll Bars</H3><P>The DataBrowser control provides a number of routines for controlling and managing the appearance of the scroll bars displayed for the list.  The routine <CODE>SetDataBrowserScrollPosition</CODE> can be used to scroll the list to any arbitrary scrolling position.  Normally, <CODE>SetDataBrowserScrollPosition</CODE> will be used in conjunction with the routine <CODE><A HREF="#GetDataBrowserScrollPosition">GetDataBrowserScrollPosition</A></CODE> to restore the scrolling position of a list to the user's last scrolling position when a window containing a scrollable DataBrowser control is being created.</P><P>Your application should use <CODE><A HREF="#GetDataBrowserScrollPosition">GetDataBrowserScrollPosition</A></CODE> and <CODE>SetDataBrowserScrollPosition</CODE> to save and restore the scrolling position.  These routines should not be used to scroll particular cells into the view.  To do that, your application should use the <CODE><A HREF="#RevealDataBrowserItem">RevealDataBrowserItem</A></CODE> routine.</P>    <A NAME="SetDataBrowserScrollPosition"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserScrollPosition routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserScrollPosition(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        UInt32 top,        UInt32 left);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>top</b> - the current vertical scrolling position will be set to the value provided in this parameter.<BR><BR></LI>                                          <LI><b>left</b> - the current horizontal scrolling position will be set to the value provided in this parameter.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="GetDataBrowserScrollPosition"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserScrollPosition routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserScrollPosition(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        UInt32 *top,        UInt32 *left);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>top</b> - the variable pointed to by this parameter will be set to the current vertical scrolling position.<BR><BR></LI>                                          <LI><b>left</b> - the variable pointed to by this parameter will be set to the current horizontal scrolling position.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>If the list your application would like to display is small and its coordinates do not extend beyond the bounds of the area used to display the list, then it is possible for your application to turn of the display of scroll bars.  The routine <CODE>SetDataBrowserHasScrollBars</CODE> can be used to turn off either the horizontal or the vertical scroll bar.  The routine <CODE><A HREF="#GetDataBrowserHasScrollBars">GetDataBrowserHasScrollBars</A></CODE> is useful for determining if the browser control currently has scroll bars.  For example, you would only want to call the <CODE><A HREF = "#AutoSizeDataBrowserListViewColumns">AutoSizeDataBrowserListViewColumns</A></CODE> routine if the browser control does not have a horizontal scroll bar.</P>    <A NAME="SetDataBrowserHasScrollBars"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserHasScrollBars routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserHasScrollBars(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Boolean horiz,        Boolean vert);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>horiz</b> - set this parameter to <code>true</code> if the list should be displayed with a horizontal scroll bar.<BR><BR></LI>                                          <LI><b>vert</b> - set this parameter to <code>true</code> if the list should be displayed with a vertical scroll bar.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="GetDataBrowserHasScrollBars"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserHasScrollBars routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserHasScrollBars(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Boolean *horiz,        Boolean *vert);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>horiz</b> - the variable pointed to by this parameter will be set to <code>true</code> if the browser control is being displayed with a horizontal scroll bar.<BR><BR></LI>                                          <LI><b>vert</b> - the variable pointed to by this parameter will be set to <code>true</code> if the browser control is being displayed with a vertical scroll bar.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>Sometimes, it is desirable to place special placards or controls beside the horizontal scroll bars or above the vertical ones.  <A HREF="#figuresix">Figure 8</A> provides an illustration of a placard displayed in the bottom left corner of a list to the left of the scroll bar.  To allow placement of such objects, the browser control provides the routines <CODE><A HREF="#GetDataBrowserScrollBarInset">GetDataBrowserScrollBarInset</A></CODE> and <CODE>SetDataBrowserScrollBarInset</CODE>.   Applications that would like to modify the scroll bar inset values used by the browser control should always call <CODE><A HREF="#GetDataBrowserScrollBarInset">GetDataBrowserScrollBarInset</A></CODE> to obtain the current settings.  After modifying the current inset settings, your application can then pass the new values back to <CODE>SetDataBrowserScrollBarInset</CODE>.</P><A NAME="figuresix"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">    <CENTER>    <img src="images/tn2009_008.gif" align=middle alt="Figure 8" width=219 height=116>    </CENTER>    </TD></TR> <TR> <td align="left">    <P><B>Figure 8.</B> An example of a placard displayed at the bottom    left of the list.  As shown here, the scroll bar is inset on its right-hand side to provide enough space for the placard.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="SetDataBrowserScrollBarInset"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserScrollBarInset routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserScrollBarInset(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Rect *insetRect);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>insetRect</b> - the current inset settings your application would like the DataBrowser to use.  Your application should modify the inset settings returned by <CODE>GetDataBrowserScrollBarInset</CODE> instead of assuming that the DataBrowser will set them to any particular value.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.<BR><BR>Use this to add placards or status panels beside above or below the scrollbars.  Call <CODE>GetDataBrowserScrollBarInset</CODE> before calling this routine. </P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="GetDataBrowserScrollBarInset"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserScrollBarInset routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserScrollBarInset(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Rect *insetRect);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>insetRect</b> - the current inset settings for the browser control's scroll bars will be returned in the rectangle pointed to by this parameter.  The left and right fields will contain the horizontal inset values for the horizontal scroll bar, and the top and bottom fields will contain the vertical inset values for the vertical scroll bar.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P><CODE>RevealDataBrowserItem</CODE> can be called to scroll any cell in the browser control into view.</P>    <A NAME="RevealDataBrowserItem"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The RevealDataBrowserItem routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus RevealDataBrowserItem(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#propdef">DataBrowserPropertyID</A> propertyID,        Boolean centerInView);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the item to display.<BR><BR></LI>                                                                        <LI><b>propertyID</b> - the <A HREF="#propdef">Property&nbsp;ID</A> of the column to display.<BR><BR></LI>                                                                        <LI><b>centerInView</b> - if <CODE>true</CODE>, then the DataBrowser will try to center the item in the display area.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="selectionhandling"></A>         <H3>Selection Handling</H3><P>The DataBrowser control provides a complete set of routines for managing the cells currently contained in the selection.  The DataBrowser uses <A HREF="#datadef">Data&nbsp;ID</A> numbers to track which rows are in the selection. The current selection is represented as a group of 32-bit <A HREF="#datadef">Data&nbsp;ID</A> numbers. Each <A HREF="#datadef">Data&nbsp;ID</A> refers to a row in the current selection (columns within rows are not differentiated inside of selections).</P>    <A NAME="SetDataBrowserSelectionFlags"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserSelectionFlags routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserSelectionFlags(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        DataBrowserSelectionFlags selectionFlags);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>selectionFlags</b> - can be any combination of the following flag values:<BR><BR>            <UL>                <LI><A NAME="kDataBrowserDragSelect"></A><CODE>kDataBrowserDragSelect</CODE> - This turns on or off the availability of the selection marque.  The marque will show up if the click was not on content, or the Option key is not down and <CODE>kDataBrowserDragSelect</CODE> is on <CODE>kDataBrowserSelectOnlyOne</CODE> is off and <CODE>kDataBrowserNoDisjointSelection</CODE> is off. <BR><BR></LI>                <LI><A NAME="kDataBrowserSelectOnlyOne"></A><CODE>kDataBrowserSelectOnlyOne</CODE> - allow only one item to be selected at once.<BR><BR></LI>                <LI><A NAME="kDataBrowserResetSelection"></A><CODE>kDataBrowserResetSelection</CODE> - reset list before processing next selection operation.<BR><BR></LI>                <LI><A NAME="kDataBrowserCmdTogglesSelection"></A><CODE>kDataBrowserCmdTogglesSelection</CODE> - allow use of command to toggle items in and out of the selection.<BR><BR></LI>                <LI><A NAME="kDataBrowserNoDisjointSelection"></A><CODE>kDataBrowserNoDisjointSelection</CODE> - prevent discontinuous selections.<BR><BR></LI>                <LI><A NAME="kDataBrowserAlwaysExtendSelection"></A><CODE>kDataBrowserAlwaysExtendSelection</CODE> - enable multiple item selection without holding down any modifier keys.</LI>            </UL>                                    </LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>        <A NAME="GetDataBrowserSelectionFlags"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserSelectionFlags routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserSelectionFlags(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        DataBrowserSelectionFlags *selectionFlags);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>selectionFlags</b> - See the description of <CODE><A HREF="#SetDataBrowserSelectionFlags">SetDataBrowserSelectionFlags</A></CODE> for more information about the value that can be returned in this parameter.                        </LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="IsDataBrowserItemSelected"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The IsDataBrowserItemSelected routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    Boolean IsDataBrowserItemSelected(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the item to be tested.</LI>                                                                    </UL>        <P>Returns <code>true</code> if the item specified by the <A HREF="#datadef">Data&nbsp;ID</A> provided in the item parameter is a member of the current selection.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="SetDataBrowserSelectedItems"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserSelectedItems routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserSelectedItems(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        UInt32 numItems,        <A HREF="#datadef">DataBrowserItemID</A> *items,        DataBrowserSetOption operation);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>numItems</b> - the number of <A HREF="#datadef">Data&nbsp;ID</A> numbers stored in the array pointed to by the <CODE>items</CODE> parameter.<BR><BR></LI>                                                                        <LI><b>items</b> - an array of <A HREF="#datadef">Data&nbsp;ID</A> numbers.<BR><BR></LI>                                                                        <LI><b>operation</b> - the operation to be performed on the current selection: <BR><BR>            <UL>                                                                         <LI><A NAME="kDataBrowserItemsAssign"></A><CODE>kDataBrowserItemsAssign</CODE> - set the selection to the items specified in the array pointed to by the <CODE>items</CODE> parameter.  Any previous selection is replaced and the list will be re-drawn appropriately.<BR><BR></LI>                                                                            <LI><A NAME="kDataBrowserItemsToggle"></A><CODE>kDataBrowserItemsToggle</CODE> - if any of the items specified in the array pointed to by the <CODE>items</CODE> parameter are in the current selection, then remove them from the selection.  For those items that are not in the selection, add them to the selection.<BR><BR></LI>                <LI><A NAME="kDataBrowserItemsRemove"></A><CODE>kDataBrowserItemsRemove</CODE> - if any of the items specified in the array pointed to by the items parameter are in the current selection, then remove them from the selection and redraw their cells so they are not highlighted.</LI>            </UL></LI>                                                                  </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR>                           <A NAME="userinteraction_drag"></A><H3>Drag-and-Drop Processing</H3>        <P>Normally, if you have installed the appropriate drag handling callback routines for a browser control, your application will not have to make any special calls when the user performs drag-and-drop operations to and from the browser control.  However, the browser control has been designed with flexibility in mind and it can be customized to your application's requirements.  This section provides an overview of how you can easily add drag-and-drop capability to your application using a browser control.</P><P>If the window containing the browser control contains other items capable of receiving drag-and-drop commands, then you must turn off the Control Manager's automatic drag handling by calling <CODE>SetAutomaticControlDragTrackingEnabledForWindow</CODE> before installing your own drag receive and accept handlers using the Drag Manager APIs.  Once you have done so, you can then handle your own drag operations and direct the ones that belong to the browser control to the browser control using the <CODE>HandleControlDragTracking</CODE> and <CODE>HandleControlDragReceive</CODE> routines.</P>     <P>To provide outgoing drags your application must install an <A HREF="#addDragItemCallback"><CODE>addDragItemCallback</CODE></A> callback routine in the <A HREF="#DataBrowserCallbacks"><CODE>DataBrowserCallbacks</CODE></A> structure.  The browser control calls your <A HREF="#addDragItemCallback"><CODE>addDragItemCallback</CODE></A> routine when it has determined that it is appropriate to start a drag command. Inside of your <CODE><A HREF="#addDragItemCallback">addDragItemCallback</A></CODE> routine your application should add whatever information is appropriate for the drag command to the drag.</P><P>To receive drags, you application must install both an <A HREF="#acceptDragCallback"><CODE>acceptDragCallback</CODE></A> routine and a <A HREF="#receiveDragCallback"><CODE>receiveDragCallback</CODE></A> routine in the <A HREF="#DataBrowserCallbacks"><CODE>DataBrowserCallbacks</CODE></A> structure.  The function of these routines are analogous to the corresponding Drag Manager accept-and-receive routines.</P><P>To receive drags and drop commands destined for the list, but not dropped over any particular item in the list being displayed, your application can set the default target ID for the list.  Information about how to set the default target ID for a browser control can be found in the <A HREF="#disc_root">Setting the Root Container</A> section.</P><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="appearance_redraw"></A><H3>Forcing Redraw</H3><P>Once your application has made changes to some of the data referencedby the <A HREF="#datadef">Data&nbsp;ID</A> numbers and properties you have installed in a databrowser control, you will want tell the DataBrowser to update thedisplay.  To do this, you should call the <CODE>UpdateDataBrowserItems</CODE> routinereferencing the <A HREF="#datadef">Data&nbsp;ID</A> numbers of those items that have changed.</P>    <A NAME="UpdateDataBrowserItems"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The UpdateDataBrowserItems routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus UpdateDataBrowserItems(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container,        UInt32 numItems,        const <A HREF="#datadef">DataBrowserItemID</A> *items,        <A HREF="#propdef">DataBrowserPropertyID</A> preSortProperty,        <A HREF="#propdef">DataBrowserPropertyID</A> propertyID);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>container</b> - The ID number of the container for the <A HREF="#datadef">Data&nbsp;ID</A> numbers referenced by the items parameter.<BR><BR></LI>                                          <LI><b>numItems</b> - the number of <A HREF="#datadef">Data&nbsp;ID</A> numbers referenced by the items parameter.<BR><BR></LI>                                          <LI><b>items</b> - a pointer to an array of <A HREF="#datadef">Data&nbsp;ID</A> numbers. If the value <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE> appears anywhere in this array, then all of the rows will be updated.<BR><BR></LI>                                          <LI><b>preSortProperty</b> - the sort order of the <A HREF="#datadef">Data&nbsp;ID</A> numbers referenced by the items parameter.  If the <A HREF="#datadef">Data&nbsp;ID</A> numbers referenced by the <CODE>items</CODE> parameter are not sorted according to any property, then your application should provide the value <CODE>kDataBrowserNoProperty</CODE> in this parameter.<BR><BR></LI>                                          <LI><b>propertyID</b> - the <A HREF="#propdef">Property&nbsp;ID</A> of the column that must be <CODE>kDataBrowserPropertyIsEditabled</CODE>.  To update all columns for the items referenced by the <A HREF="#datadef">Data&nbsp;ID</A> numbers referenced by the items parameter, set this parameter to <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE>.<BR><BR></LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500><TR><td bgcolor="#e6e6e6" align=left>        <P><B>IMPORTANT</B><BR>        Instead of forcing an update event to redraw the        DataBrowser control contents, your application should        call the <CODE><A HREF="#UpdateDataBrowserItems">UpdateDataBrowserItems</A></CODE> routine as this routine        since it will also update any internal caches that may have        been allocated by the DataBrowser.                </P>    </TD></TR></TABLE></CENTER><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="appearance_titles"></A><H3>Column and Cell Dimensions</H3><P>In this implementation of the DataBrowser, it is possible to use the routines <CODE>SetDataBrowserListViewHeaderBtnHeight</CODE> to turn column headings on or off.  To turn off the display of column header buttons, call <CODE>SetDataBrowserListViewHeaderBtnHeight</CODE> with a height parameter of <CODE>zero</CODE>.  If you would like to be able to turn the display of column headers on again after you have turned them off, then you can do so by restoring their height to the value returned by <CODE>GetDataBrowserListViewHeaderBtnHeight</CODE> before column header buttons were turned off.</P>    <A NAME="SetDataBrowserListViewHeaderBtnHeight"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserListViewHeaderBtnHeight routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserListViewHeaderBtnHeight(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        UInt16 height);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>height</b> - 0 turns off header buttons, use a saved value returned by <CODE>GetDataBrowserListViewHeaderBtnHeight</CODE> to turn on buttons.  No other values are defined at this time.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="GetDataBrowserListViewHeaderBtnHeight"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserListViewHeaderBtnHeight routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserListViewHeaderBtnHeight(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        UInt16 *height);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>height</b> - the current height of the header buttons area is returned in the variable pointed to by this parameter.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>            <BR><BR>    <P>The routine <CODE>AutoSizeDataBrowserListViewColumns</CODE> allows your application to set all of the column widths to a standard display width on the screen.  When you call this routine, the DataBrowser will resize all of the columns in such a way that they will fill the available space on the screen.  <CODE>AutoSizeDataBrowserListViewColumns</CODE> is only available if the horizontal scroll bar has been turned off.  To turn scroll bars off, your application can call the <CODE><A HREF = "#SetDataBrowserHasScrollBars">SetDataBrowserHasScrollBars</A></CODE> routine.</P>    <A NAME="AutoSizeDataBrowserListViewColumns"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The AutoSizeDataBrowserListViewColumns routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus AutoSizeDataBrowserListViewColumns(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>To discover the window based coordinates of any part of a cell that is visible on the screen, your application can call the <CODE>GetDataBrowserItemPartBounds</CODE> routine.  Your application can then use these coordinates to perform special drawing or calculations.  The coordinates returned in the <CODE>*bounds</CODE> parameter will be the location of the requested part relative to the window's top left corner.</P>    <A NAME="GetDataBrowserItemPartBounds"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserItemPartBounds routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserItemPartBounds(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#propdef">DataBrowserPropertyID</A> property,        DataBrowserPropertyPart part,        Rect *bounds);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> identifying the cell's row.<BR><BR></LI>                                          <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> identifying the cell's column.<BR><BR></LI>                                          <LI><b>part</b> - a constant value describing the part of the cell you would like to obtain information about.  The type of information requested will depend on the type of information being displayed in the column.  It is up to your application to ensure it is requesting the appropriate information.  The following constants may be provided in this parameter:<BR><BR>            <UL>  <LI><A NAME="kDataBrowserPropertyEnclosingPart"></A><CODE>kDataBrowserPropertyEnclosingPart</CODE> - the outer boundary of the cell.<BR><BR></LI>  <LI><A NAME="kDataBrowserPropertyContentPart"></A><CODE>kDataBrowserPropertyContentPart</CODE> - the content of the cell.<BR><BR></LI>  <LI><A NAME="kDataBrowserPropertyDisclosurePart"></A><CODE>kDataBrowserPropertyDisclosurePart</CODE> - the location of the disclosure rectangle.<BR><BR></LI>  <LI><A NAME="kDataBrowserPropertyTextPart"></A><CODE>kDataBrowserPropertyTextPart</CODE> - the location where the text is drawn.<BR><BR></LI>  <LI><A NAME="kDataBrowserPropertyIconPart"></A><CODE>kDataBrowserPropertyIconPart</CODE> - the location where the icon is displayed.<BR><BR></LI>  <LI><A NAME="kDataBrowserPropertyCheckboxPart"></A><CODE>kDataBrowserPropertyCheckboxPart</CODE> - the location of the checkbox.<BR><BR></LI>  <LI><A NAME="kDataBrowserPropertyProgressBarPart"></A><CODE>kDataBrowserPropertyProgressBarPart</CODE> - the location of the progress bar.<BR><BR></LI>  <LI><A NAME="kDataBrowserPropertyRelevanceRankPart"></A><CODE>kDataBrowserPropertyRelevanceRankPart</CODE> - the location of the relevance rank.</LI></UL><BR></LI>                                          <LI><b>bounds</b> - a pointer to a rectangle where the coordinates will be returned.</LI>                                                                    </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.  If the cell is not visible (scrolled off the screen), it will return an <CODE>ItemNotFound</CODE> error. </P>    </TD></TR></TABLE></CENTER>    <BR><BR><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="appearance_background"></A><H3>List Background Color</H3><P>The background pattern used when drawing the list is determined by the Appearance Manager.  When running under in the Classic environment with platinum appearance, the list background will be shades of gray with the sort column drawn in a darker shade.  If you would prefer the background be drawn all white, then you can call <CODE>SetDataBrowserListViewUsePlainBackground</CODE> with the <CODE>usePlainBackground</CODE> parameter set to <code>true</code>.  Currently, Aqua draws all lists with a plain white background.</P>      <A NAME="SetDataBrowserListViewUsePlainBackground"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserListViewUsePlainBackground routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserListViewUsePlainBackground(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Boolean usePlainBackground);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>usePlainBackground</b> - platinum only.  Plain background uses all white background.  False uses shaded platinum background.  Currently Aqua only supports plain white background.  Call this only if you do not want to have a shaded sort column.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <A NAME="GetDataBrowserListViewUsePlainBackground"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserListViewUsePlainBackground routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserListViewUsePlainBackground(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        Boolean *usePlainBackground);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>            <LI><b>usePlainBackground</b> - the variable pointed to by this parameter will be set to <code>true</code> if the control is set to use a plain white background.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR>    <A NAME="dbtextedit"></A>         <H3>In-place Text Editing</H3><P>The DataBrowser control provides built-in text editing capability for columns with the display type <CODE><A HREF="#kDataBrowserTextType">kDataBrowserTextType</A></CODE>.  Inside of these columns, it is possible to allow the user to click on a cell and begin editing the text displayed in that cell.  While a cell is open and the text is being edited, the browser control is said to have an editing session open.  </P> <P>Normally, if you create an editable text column, the DataBrowser will automatically manage edit sessions.  However, if your application requires special operations then the routines described in this section can be used.  The routine <CODE><A HREF="#SetDataBrowserEditItem">SetDataBrowserEditItem</A></CODE> can be used to open or close an editing session.  And the routines <CODE><A HREF="#SetDataBrowserEditText">SetDataBrowserEditText</A></CODE> and <CODE><A HREF="#GetDataBrowserEditText">GetDataBrowserEditText</A></CODE> can be used manipulate the text in the edit field while an edit session is open.  To allow text editing to occur, your application follow these steps:</P><OL><LI>When creating the column you would like the edit text to appear in, set the <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE> for the column. This will allowmodification of the values displayed in the column.<BR><BR></LI><LI>In your <A HREF="#clientDataCallback">Data Callback Routine</A> return the value <CODE>true</CODE> when your callback receives an <CODE>kDataBrowserItemIsEditableProperty</CODE> inquiry   (i.e., call <CODE>SetDataBrowserItemDataBooleanValue(itemData, true)</CODE> when you receive this inquiry).  If your application has more than one column containing editable text and you would like to know which property is about to be edited, you can call the <CODE>GetDataBrowserItemDataProperty</CODE> routine.<BR><BR></LI><LI>When the edit session is finished, your <A HREF="#clientDataCallback">Data Callback Routine</A> will be called again for the edited property with the <CODE>setValue</CODE> argument set to <CODE>true</CODE>. Your callback should extract the edited text string for the item/property by calling <CODE><A HREF="#GetDataBrowserItemDataText">GetDataBrowserItemDataText</A></CODE>.  Your callback should then verify and decide either to accept or reject the new string value before saving the new data into your application's private data store. (If your application decides to reject the new text then you should provide an alert explaining why.)</LI></OL>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td bgcolor="#e6e6e6" align=left>    <P><B>Note:</B><BR>The DataBrowser requires the <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE> flag to be set in order to enable editing of any changeable display type (namely checkboxes, pop-up menus, etc).  Be sure your application is setting the <CODE><A HREF="#kDataBrowserPropertyIsEditable">kDataBrowserPropertyIsEditable</A></CODE> flag when defining columns containing checkboxes, menus, and so forth.    </P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>Once your application has responded true to the "May I edit this item?" query from the DataBrowser (which is only asked of properties that have been flagged as editable), the DataBrowser will issue the following two notifications (to your <CODE>ItemNotification</CODE> callback):</P><UL><LI><CODE><A HREF="#kDataBrowserEditStarted">kDataBrowserEditStarted</A></CODE> (you should lock down any data that might need to be locked, or manipulate your UI as needed).<BR><BR></LI><LI><CODE><A HREF="#kDataBrowserEditStopped">kDataBrowserEditStopped</A></CODE> (the edit session and all transactions has finished, you may unlock any locked data, or update your UI as needed).</LI></UL><P>The remainder of this section describes the routines your application can use for selecting the current edit item and for modifying the text in the current edit item.</P>    <A NAME="SetDataBrowserEditItem"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserEditItem routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserEditItem(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> item,        <A HREF="#propdef">DataBrowserPropertyID</A> property);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the item to be edited.<BR><BR></LI>                                          <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> of the column containing the item.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <P>The <CODE><A HREF="#SetDataBrowserEditItem">SetDataBrowserEditItem</A></CODE> routine can be used for beginning or ending an edit session for a text item.  To begin an editing session for a particular text cell, specify its data and <A HREF="#propdef">Property&nbsp;ID</A> number.  To end an editing session, provide either the Data&nbsp;ID or the <A HREF="#propdef">Property&nbsp;ID</A> number of another cell, or provide the constant <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE> as the <A HREF="#datadef">Data&nbsp;ID</A> number.</P>    <A NAME="GetDataBrowserEditItem"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserEditItem routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserEditItem(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> *item,        <A HREF="#propdef">DataBrowserPropertyID</A> *property);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.</LI>                                          <LI><b>item</b> - the <A HREF="#datadef">Data&nbsp;ID</A> of the item that is being edited will be returned in the variable pointed to by this parameter.  If there is no cell being edited, this parameter will be set to <CODE><A HREF="#kDataBrowserNoItem">kDataBrowserNoItem</A></CODE>.<BR><BR></LI>                                          <LI><b>property</b> - the <A HREF="#propdef">Property&nbsp;ID</A> of the column containing the item that is being edited will be returned in the variable pointed to by this parameter.  If there is no cell being edited, this parameter will be set to <CODE>zero</CODE>.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>The routines <CODE>GetDataBrowserEditText</CODE> and <CODE>SetDataBrowserEditText</CODE> allow your application to modify the displayed contents of the text cell while it is being edited.  These routines can only be called during an edit session and they may be used to query, modify or replace the text as it is being typed by the user.</P>    <A NAME="SetDataBrowserEditText"></A>    <BR> <BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR> <td align="left">        <P><B>The SetDataBrowserEditText routine.</B></P>    </TD> </TR> <TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserEditText(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A> text);</pre>    </TD> </TR> <TR> <td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>text</b> - a <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFStringRef</A></CODE>.  The DataBrowser will make its own internal copy of this reference so it is safe to release your own internal reference after you call this routine.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD> </TR> </TABLE> </CENTER>        <A NAME="GetDataBrowserEditText"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserEditText routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserEditText(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFMutableStringRef</A> text);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>text</b> - a <CODE><a href="../../documentation/CoreFoundation/StringServices/stringservices_carbon.html">CFMutableStringRef</A></CODE>.  Your application must allocate this string and pass it to the DataBrowser.  The DataBrowser will set its contents to the current contents of the edit session's text field.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>  	<BR><BR>	<P><A HREF="#page_top">Back to top</A></P>	<BR><BR>                    <A NAME="editmenucommands"></A>         <H3>Edit Menu Commands</H3><P>The browser control manages the state of selection editing for you.  Your application can discover if it is appropriate to enable specific edit menu commands at any time by calling the <CODE>EnableDataBrowserEditCommand</CODE> routine.  To execute a specific editing command, call the <CODE><A HREF="#ExecuteDataBrowserEditCommand">ExecuteDataBrowserEditCommand</A></CODE> routine.</P>    <A NAME="EnableDataBrowserEditCommand"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The EnableDataBrowserEditCommand routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    Boolean EnableDataBrowserEditCommand(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        DataBrowserEditCommand command);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>command</b> - this parameter must be set to one of the following constant values:<BR><BR>            <UL>                <LI><A NAME="kDataBrowserEditMsgUndo"></A><CODE>kDataBrowserEditMsgUndo</CODE> - undo the last operation.<BR><BR></LI>                <LI><A NAME="kDataBrowserEditMsgCut"></A><CODE>kDataBrowserEditMsgCut</CODE> - cut the contents of the selection inside of the current edit session to the clipboard.<BR><BR></LI>                <LI><A NAME="kDataBrowserEditMsgCopy"></A><CODE>kDataBrowserEditMsgCopy</CODE> - copy the contents of the selection inside of the current edit session to the clipboard.<BR><BR></LI>                <LI><A NAME="kDataBrowserEditMsgPaste"></A><CODE>kDataBrowserEditMsgPaste</CODE> - replace the contents of the selection inside of the current edit session with the contents of the clipboard.<BR><BR></LI>                <LI><A NAME="kDataBrowserEditMsgClear"></A><CODE>kDataBrowserEditMsgClear</CODE> - remove the contents of the selection inside of the current edit session.<BR><BR></LI>                <LI><A NAME="kDataBrowserEditMsgSelectAll"></A><CODE>kDataBrowserEditMsgSelectAll</CODE> - select all of the text inside of the current edit session.</LI>            </UL>            <BR></LI>                                      </UL>        <P>Returns <code>true</code> if the requested editing command can be performed by the DataBrowser control at this time.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>Currently, these editing commands will be available when an editable text field is open and being edited. If your application has defined any custom display types that allow editing, editing commands will also be available when your callbacks indicate editing is available.</P>     <A NAME="ExecuteDataBrowserEditCommand"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The ExecuteDataBrowserEditCommand routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus ExecuteDataBrowserEditCommand(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        DataBrowserEditCommand command);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>command</b> - a constant indicating what command should be performed. See the description of <A HREF="#EnableDataBrowserEditCommand"><CODE>EnableDataBrowserEditCommand</CODE></A> for a list of possible values for this parameter.            </LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER><A NAME="userinteraction_help"></A><H3>Context-Sensitive Help</H3>    <P>Use the <A HREF="#getHelpContentCallback"><CODE>getHelpContentCallback</CODE></A> field of the <A HREF="#DataBrowserCallbacks"><CODE>DataBrowserCallbacks</CODE></A> structure. </P> <BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="userinteraction_cmm"></A><H3>Contextual Menus</H3><P>Use the <A HREF="#contextualMenuCallback"><CODE>contextualMenuCallback</CODE></A> and the <A HREF="#selectContextMenuCallback"><CODE>selectContextMenuCallback</CODE></A> fields of the <A HREF="#DataBrowserCallbacks"><CODE>DataBrowserCallbacks</CODE></A> structure. </P>      <BR><BR><P><A HREF="#page_top">Back to top</A></P><BR><BR><A NAME="dbhierturndownlists"></A><H2>Managing Hierarchical Lists</H2> <P>As described in the section <A HREF="#providingdata">Providing and Ordering your Data</A>, it is possible to create complex hierarchical lists of Data&nbsp;IDs for display in the DataBrowser control.  Most of the DataBrowser routineshave been designed with this mind.  Essentially, any of the DataBrowserroutines with a "container" parameter, has special functionality availablefor hierarchical lists.  Some of those routines are described in othersections, but routines specifically designed for managing hierarchical lists are described in this section.</P><BR><BR><A NAME="disc_root"></A><H3>Setting the Root Container</H3><P>The root container designates the <A HREF="#datadef">Data&nbsp;ID</A> of the highest level of a hierarchy being displayed in a browser control.  In some routines, such as the drag-and-drop commands, this ID number is used to refer to the entire browser control rather than any particular item.  For example, if a user drags a selection across a DataBrowser control's content area and the mouse is not positioned over any particular item, the DataBrowser will call the browser control's accept routine using the Root Container's <A HREF="#datadef">Data&nbsp;ID</A> number.</P>    <A NAME="SetDataBrowserTarget"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserTarget routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserTarget(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> target);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>target</b> - the ID that should be assigned as the default target ID for the browser control.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR><P>In these circumstances, it is appropriate to respond as if the user is dragging a new item into the list or column.  The Root Container ID is also called the default container ID number.  By default, the browser control's target ID number will be set to Item ID will be <CODE>zero</CODE>.  Your application can change this to a different value, if necessary.</P>    <A NAME="GetDataBrowserTarget"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserTarget routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserTarget(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> *target);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>target</b> - a pointer to a location where the currently assigned target ID will be returned.</LI>        </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>        <P><A HREF="#page_top">Back to top</A></P>    <BR><BR><A NAME="disc_column"></A><H3>Setting the Disclosure Column</H3><P>The disclosure column contains the turn-down arrows that the user canuse to navigate down into your data hierarchy.  Use the <CODE>SetDataBrowserListViewDisclosureColumn</CODE> to designate the column where these turn-down arrows will appear.</P>    <A NAME="SetDataBrowserListViewDisclosureColumn"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The SetDataBrowserListViewDisclosureColumn routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus SetDataBrowserListViewDisclosureColumn(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        DataBrowserTableViewColumnID column,        Boolean expandableRows);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>column</b> - if this is no column or the column doesn't exist, then there will be no disclosure column.<BR><BR></LI>                                          <LI><b>expandableRows</b> - if the row itself expands rather than opening up several sub-rows set this parameter to <code>true</code>.  Currently this parameter is ignored.</LI><!--to use variable size rows and columsn, you must call this routine:SetDataBrowserTableViewGeometry (ControlRef             browser,                                 Boolean                variableWidthColumns,                                 Boolean                variableHeightRows);-->        </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="GetDataBrowserListViewDisclosureColumn"></A>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The GetDataBrowserListViewDisclosureColumn routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus GetDataBrowserListViewDisclosureColumn(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        DataBrowserTableViewColumnID *column,        Boolean *expandableRows);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>column</b> - the <A HREF="#propdef">Property&nbsp;ID</A> of the column where the disclosure triangles are being displayed will be returned in the variable pointed to by this parameter.<BR><BR></LI>                                          <LI><b>expandableRows</b> - if the row itself expands rather than opening up several sub-rows, then the variable pointed to by this parameter will be set to <code>true</code>.</LI>        </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>            <P><A HREF="#page_top">Back to top</A></P>    <BR><BR><A NAME="disc_containers"></A><H3>Opening and Closing Containers</H3><P>Normally, the user will navigate down into your hierarchy by activating the turn-down arrows themselves.  But, under some circumstances,such as when you are restoring the display to its last known statewhen opening a window, you will want to explicitly set the turn-down displaystate for the container items displayed in the list.  The routinesdescribed in this section allow your application open and closecontainer items in the display.</P>    <A NAME="OpenDataBrowserContainer"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The OpenDataBrowserContainer routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus OpenDataBrowserContainer(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>container</b> - The <A HREF="#datadef">Data&nbsp;ID</A> of the container you            would like to open.</LI>                                      </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <A NAME="CloseDataBrowserContainer"></A>    <BR><BR>    <CENTER><TABLE BORDER=0 CELLPADDING=4 width=500> <TR><td align="left">        <P><B>The CloseDataBrowserContainer routine.</B></P>    </TD></TR><TR> <td bgcolor="#e6e6e6" align=left><pre>    OSStatus CloseDataBrowserContainer(        <a href="../../documentation/macos8/HumanInterfaceToolbox/ControlManager/controlmanager.html">ControlRef</A> browser,        <A HREF="#datadef">DataBrowserItemID</A> container);</pre>    </TD></TR><TR><td align="left">        <UL>            <LI><b>browser</b> - a DataBrowser control created by a call to <CODE><A HREF="#CreateDataBrowserControl">CreateDataBrowserControl</A></CODE>.<BR><BR></LI>                                          <LI><b>container</b> - The <A HREF="#datadef">Data&nbsp;ID</A> of the container you            would like to close.</LI>        </UL>        <P>Returns an operating system result code describing the success of the operation. The code <CODE>noErr</CODE> will be returned if the operation was successful.</P>    </TD></TR></TABLE></CENTER>    <BR><BR>    <P><A HREF="#page_top">Back to top</A></P>        <A NAME="Downloads"></A>         <br><h2>Downloadables</h2>        <TABLE BORDER=0 CELLPADDING=3 WIDTH="600">          <TR>             <td width=50 align=left>               <P ALIGN=center><img src="images/acrobatsmall.gif" align=middle alt="Acrobat" width=22 height=23></P>            </TD>            <td align="left">               <p>Acrobat version of this Note (716K).</P>            </TD>            <td width=60 align=left>               <p><A HREF="pdf/tn2009.pdf">Download</A></P>            </TD>          </TR>        </TABLE>        <BR>         <P ><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn2009.html%3Fid%3DDTS10003048-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn2009.html%3Fid%3DDTS10003048-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn2009.html%3Fid%3DDTS10003048-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"> <TITLE> Load Balancing</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b> Deploying WebObjects Applications</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="Deploying-35.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="Deploying-45.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="Deploying-47.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="FM2HeadSplit"><A NAME="pgfId-5124"></A><A NAME="31920"></A>Load Balancing</H1><P CLASS="Body"><A NAME="pgfId-5125"></A>You can improve the performance of a WebObjects application by distributing the processing load among multiple instances of the application. These application processes can be running on the same machine as the server or on remote machines. The task that accomplishes this distribution is called <I CLASS="Italic">load balancing</I>.</P><P CLASS="Body"><A NAME="pgfId-5126"></A>As an example of how load balancing works, suppose you have an application called MyApp and you have configured WebObjects to run two instances of MyApp on the host <B CLASS="Bold-Body-">toga</B> and two instances on the host <B CLASS="Bold-Body-">tutu</B>. When a user types this URL:</P><CODE CLASS="CodeEx-last-"><A NAME="pgfId-5127"></A>http://toga.acme.com/cgi-bin/WebObjects/MyApp</CODE><P CLASS="Body"><A NAME="pgfId-5128"></A>the WebObjects adaptor looks for an instance of MyApp on the host <B CLASS="Bold-Body-">toga</B>. If it finds an instance and the instance is ready to receive requests, the adaptor sends the request to that instance. If both of the instances of MyApp on <B CLASS="Bold-Body-">toga</B> are busy, it accesses an instance on the host <B CLASS="Bold-Body-">tutu</B>. </P><P CLASS="Body"><A NAME="pgfId-5129"></A>Use the Monitor application to create multiple new instances of an application for load balancing. See <A HREF="Deploying-26.html#36009" CLASS="XRef"> Creating Application Instances</A> for details.</P><P CLASS="Body"><A NAME="pgfId-5149"></A>When you create multiple application instances, you are creating the configuration file &nbsp;<b><I CLASS="Italic">NEXT_ROOT</I></b><B CLASS="Bold-Body-">/Library/WebObjects/Configuration/WebObjects.conf</B>. When the adaptor receives an HTTP request for an application, it first (in its initial mode) checks <B CLASS="Bold-Body-">WebObjects.conf</B> for an application instance that is accepting connections and forwards the request to it.</P><P CLASS="Body"><A NAME="pgfId-5153"></A>Monitor always assigns a unique number to each application instance, even if it is running on a different host. It does this so that it can recover a crashed instance for you. If an instance dies, Monitor can try to recover it by launching it on another host. Because of this, instance numbers must be unique across hosts. </P><P CLASS="Body"><A NAME="pgfId-5154"></A>Even though instance numbers are unique across hosts, the web server adaptor's configuration file only requires an instance number to be unique on a given host. Consider the example given previously, where two instances of MyApp run on host <B CLASS="Bold-Body-">toga</B> and two instances run on host <B CLASS="Bold-Body-">tutu</B>. If you were to set up a web server adaptor's configuration file by hand, you could assign instance numbers 1 and 2 to the two instances on <B CLASS="Bold-Body-">toga</B> and instance numbers 1 and 2 to the instances on <B CLASS="Bold-Body-">tutu</B> (see <A HREF="Deploying-12.html#56071" CLASS="XRef"> Web Server Adaptor Configuration File Format</A>). This is legal, but it's not supported by Monitor, and if you do this you won't be able to use Monitor for the instances you've created. </P><P CLASS="anchor"><A NAME="pgfId-5158"></A>&nbsp;</P><DIV><IMG SRC="Deploying-19.gif"></DIV><P CLASS="Body"><A NAME="pgfId-5159"></A>To determine how many instances of an application you should run, do the following:</P><OL><LI CLASS="BodyNumber1"><A NAME="pgfId-5162"></A>Test the application using the recording and playback performance tools as described in the section &quot;<A HREF="Deploying-41.html#26214" CLASS="XRef"> Performance Testing</A>.&quot; </LI><LI CLASS="BodyNumber"><A NAME="pgfId-5164"></A>Check the application's response times using the Instance Detail View page in the Monitor application.</LI><LI CLASS="BodyNumber"><A NAME="pgfId-5165"></A>If the response time is slow, use Monitor to add another instance of the application. </LI><LI CLASS="BodyNumber"><A NAME="pgfId-5166"></A>Continue to add instances and check their response times. When all instances have reasonable response times, you have the number of instances you need. </LI></OL><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 25 August 99)<P><A HREF="Deploying-35.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="Deploying-45.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="Deploying-47.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
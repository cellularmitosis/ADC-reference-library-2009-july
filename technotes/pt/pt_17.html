<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note PT17: Inside Object Pascal</title><meta name="categories" content="Platforms and Tools"><meta name="week-posted" content="May 29, 1989 - Jun 2, 1989"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002671" title="Inside Object Pascal"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxTools-date.html">Tools</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Java/idxTools-date.html" target="_blank">Reference Library > Tools</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note PT17</div>
<div id="pageheadsub">Inside Object Pascal</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#Section2">Once Over Lightly</A><BR><BR><A HREF="#Section3">Conclusion</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id="introtext">This Technical Note briefly explains why Object Pascal and MacApp should onlybe used to write applications and MPW tools.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Jun 01 1989]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Introduction</h2><p>Although Pascal can be used to write desk accessories, drivers, XCMDs and othertypes of stand-alone code, and Object Pascal is an extension of Pascal, ObjectPascal cannot be used to write anything other than an application.  Thislimitation is due to the fact that Object Pascal method dispatching relies on avalid <code>A5</code> pointing to a jump table.  Because MacApp is written inObject Pascal, this limitation applies to it as well.</p><br> <P><A HREF="#top">Back to top</A></p><a name="Section2"></a><h2>Once Over Lightly</h2><p>Object methods cannot always be called directly.  To explain why this is so,let's take a case from MacApp.  Part of the way MacApp works includes defining<code>TView</code> objects that can draw themselves.  Whenever an update eventoccurs, MacApp traverses the list of <code>TView</code> objects that are installedin a window and calls the <code>Draw</code> method for each one.  However, how doesPascal know which <code>Draw</code> method to call?  Does it call<code>TYourView.Draw</code>?  Does it call <code>TView.Draw</code>?  There is no way toknow, at compile time, what <code>TView</code> objects and descendants of<code>TView</code> will be passed to the MacApp update routine.  Therefore, thereis no way to determine the appropriate <code>Draw</code> routine at compile timeand generate a direct call to it.</p><p>Object Pascal solves this problem by maintaining data structures called ClassInfo Tables for each Object Class defined.  These Class Info Tables not onlycontain information about the correct procedure to call whenever a message issent to an object, but they also contain information used to create a newinstance of that object.</p><p>The mechanism for this dispatching is quite complex and not described here.However, the main point is that the mechanism absolutely relies on special jumptable entries.  These jump table entries are used to dynamically map methodcalls to the correct procedure, using the information found in the Class InfoTables.  Since desk accessories, drivers, and XCMDs, by their very nature,cannot have a jump table, you cannot use Object Pascal to create them.</p><p>Object Pascal <b>can</b> be used to write MPW tools, and, in fact, was used tocreate the MABuild and PostRez tools that come with MacApp 2.0.</p><a name="Section3"></a> <P><A HREF="#top">Back to top</A></p><h2>Conclusion</h2><p>For more information on how Object Pascal works, I highly recommend the articleby Ken Doyle, "Introduction to Object Pascal," anthologized in <i>The CompleteMacTutor</i>, Volume 2.  However, keep in mind that this information is alreadyslightly out of date, and should not be counted on to be completely accurate atthis time.  In general, however, it is a good description of what is actuallyhappening when a method call is made.</p><a name="References"></a> <P><A HREF="#top">Back to top</A></p><h2>References</h2><P>   <i>Inside Macintosh</i>, Volume II-53, The Segment Loader</p><P>   <i>The Complete MacTutor</i>, Volume 2, "Introduction to Object Pascal",p. 336</p><P>   <A HREF = "pt_06.html">M.PT.ObjPascal</a></p><P>   <A HREF = "pt_35.html">M.PT.StandAloneCode</a></p><P>   <A HREF = "../os/os_03.html">M.OS.SegmentLoader</a></p>         <a name=Downloads></A>                   <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/pt_17.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/pt/pt_17.html%3Fid%3DDTS10002671-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/pt/pt_17.html%3Fid%3DDTS10002671-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/pt/pt_17.html%3Fid%3DDTS10002671-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
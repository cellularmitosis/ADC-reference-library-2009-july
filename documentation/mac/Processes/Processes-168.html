<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>MyShutDownProc (IM: Pr)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING168></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Processes-167.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-169.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="Processes-2.html"><B>Processes</B></A><BR><DD><A HREF="Processes-146.html"><B>Chapter 8 - Shutdown Manager</B></A> / <A HREF="Processes-158.html"><B>Shutdown Manager Reference</B></A><BR><DL><DD><A HREF="Processes-166.html"><B>Application-Defined Routine</B></A> / <A HREF="Processes-167.html"><B>Shutdown Procedures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING168-0></A>
<H3>MyShutDownProc</H3>
 A typical shutdown procedure has the following form:<P>
<PRE>
PROCEDURE MyShutDownProc;
</PRE>
<A NAME=HEADING168-3></A>
<H5>DESCRIPTION</H5>
 You can install the address of your shutdown procedure in the Shutdown Manager's queue by calling the <CODE>ShutDwnInstall</CODE> procedure. When the computer restarts or shuts down, the Shutdown Manager searches its queue, reads the addresses it finds there, and executes the procedures at the points specified by the shutdown flag or flags that you passed with <CODE>ShutDwnInstall</CODE>. See the description of <CODE>ShutDwnInstall</CODE> on <A HREF=Processes-164.html#MARKER-9-121>page 8-13</A> for details.<P>
 To remove your shutdown procedure, call the <CODE>ShutDwnRemove</CODE> routine, passing it a pointer to your procedure.<P>
 Be sure to install your shutdown procedure in the system heap. Because the Process Manager deallocates memory for all application heaps before the Finder calls <CODE>ShutDwnPower</CODE>, you can't rely on the application heap being intact. In addition, if you need to use Toolbox managers, specify the constants <CODE>sdOnDrivers</CODE> or <CODE>sdOnUnmount</CODE> to ensure that your procedure is executed while these managers are still available.<P>
<A NAME=HEADING168-7></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The Shutdown Manager conforms with the standard assembly-language conventions for saving registers. The Shutdown Manager does not preserve the contents of these registers. Therefore, be sure to save and restore the data and address registers before issuing a jump instruction to your shutdown procedure.<A NAME=MARKER-2-145></A><A NAME=MARKER-2-146></A><P>
</BLOCKQUOTE><P>
<HR>
<center>
<A HREF="Processes-167.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-169.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Processes-3.html">&copy; Apple Computer, Inc.</A><br>17 JUN 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

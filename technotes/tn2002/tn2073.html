<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN""http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-August-01 --><!-- Includes revisions to graphics tags --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TN2073: Deconstructing A Keynote 1.x Document: Part One - Slides</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta name="keywords" content="Keynote, XML, APXL, File Format, Document Format, Slides"><meta name="Description" content="This is the first of four Technical Notes describing the Keynote XML document format (referred to here and elsewhere as the 'APXL schema' or simply 'APXL'). Our approach is to use a sample Keynote presentation and then examine the XML that is generated. In this first document, we'll give a brief overview of the whole file format, and then discuss in detail the portion of the XML that describes the list of slides, focusing on Keynote's basic text and graphics functionality. Later documents will focus on plugins (including movies, charts and tables), themes, and advanced functionality. reviewer notes"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10003100" title="Deconstructing A Keynote 1.x Document: Part One - Slides"></a><A NAME="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxAppleApplications-date.html">Apple Applications</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/AppleApplications/idxKeynote-date.html" target="_blank">Apple Applications > Keynote</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN2073</div>
<div id="pageheadsub">Deconstructing A Keynote 1.x Document: Part One - Slides</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600> <TR> <TD align="left"><!-- begin_document_contents --><TABLE border=0><TR><TD><table border="0" width="300" cellpadding="0" cellspacing="0"><tr>            <td width=300 align=left scope="row"><img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td></tr><tr bgcolor="#e6e6e6"><td background="images/tnmenubody.gif" width=300 align=left><span id="menutitle">CONTENTS<br><br></span></td></tr><tr bgcolor="#e6e6e6"><td background="images/tnmenubody.gif" width=300 align=left valign=top><!-- begin_toc --><p id="menutext"><A HREF="#Section1">The Document Bundle</A><BR><BR><A HREF="#Section2">About the presentation.apxl file</A><BR><BR><A HREF="#Section3">The Basics of a Slide</A><BR><BR><A HREF="#Section4">Adding a Shape and a Transition</A><BR><BR><A HREF="#Section5">Multiple Drawables and Overriding Shape Appearance</A><BR><BR><A HREF="#Section6">Images and Free Text</A><BR><BR><A HREF="#Section7">Builds</A><BR><BR><A HREF="#Section8">Gradient and Image Shape Fills</A><BR><BR><A HREF="#Section9">Slide Fills</A><BR><BR><A HREF="#Section10">Bullet Basics</A><BR><BR><A HREF="#Section11">Bullet Glyphs</A><BR><BR><A HREF="#Section12">Building Bullets</A><BR><BR><A HREF="#Section13">Bullets Point Text</A><BR><BR><A HREF="#conclusion">Conclusion</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloads</A><BR><BR></p><!-- end_toc --> </td></tr><tr><td width=300 align=left scope="row"><img src="images/tnmenubottom.gif" alt="" width=300 height=16></td></tr></table></TD><TD ALIGN="LEFT" VALIGN="TOP"><P id="introtext"> This is the first of four Technical Notes describing the Keynote XML document format (referred to here and elsewhere as the "APXL schema" or simply "APXL"). Our approach is to use a sample Keynote presentation and then examine the XML that is generated. In this first document, we'll give a brief overview of the whole file format, and then discuss in detail the portion of the XML that describes the list of slides, focusing on Keynote's basic text and graphics functionality. Later documents will focus on plugins (including movies, charts and tables), themes, and advanced functionality.</P><!-- begin_date --><H4 ALIGN=center>[May 20, 2003]</H4><!-- end_date --></TD></TR></TABLE><P id="introtext"> Keynote is Apple's new presentation software that makes it easy to create compelling presentations. The primary format for Keynote documents is XML. As part of its commitment to openness, Apple has released the Keynote XML specification, allowing developers to create entire presentations -- with text, images, transitions and more -- programmatically, outside of Keynote. This means you can build dynamic, always-up-to-date presentations by, for example, pulling the latest sales figures from a database or grabbing data from a variety of Internet sources, and creating new presentations from scratch or populating existing ones.</P><P id="introtext">Our approach is to use a sample Keynote presentation and then examine the XML that is generated. Each section of this document builds on the previous section, so we recommend you read through the entire document at least once. We also recommend you go through the included sample presentation at least once, and keep it handy as you read through this document.</P><BR><BR><!-- warning starts here --><CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550><TR><TD BGCOLOR="#E6E6E6"><P><B>IMPORTANT:</B><BR> This series of Technical Notes is not a formal specification of the file format. Please see <A href="../../technotes/tn2002/tn2067.html">Technical Note 2067: About the Keynote XML File Format (APXL Schema)</A>  [1] for the actual APXL specification. This series will also not feature any specific programming code, language or tool. Instead, descriptions will be given in plain English. Although this means you can't simply drop the examples into your favorite development environment and run them, it also means you'll be able to take what you learn here and apply it to writing code in whichever language you want, using the tools of your choice, including a plain text editor to handcraft the XML. If you'd like to see code for generating a APXL document, there is a command-line tool (<A href="../../samplecode/Sample_Code/Java/PictureShow.htm">PictureShow)</A>  [2] that shows how to create a presentation using Java. You may use that code as a starting point for your own efforts.</P></TD></TR></TABLE></CENTER><!-- warning ends here --><BR><BR><BR><BR><!-- warning starts here --><CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550><TR><TD BGCOLOR="#E6E6E6"><P><B>Note:</B><BR> If you're interested in using or creating open-source software that works with the APXL schema, please join the Keynote tools mailing list and project at <A HREF="http://www.opendarwin.org/mailman/listinfo/keynote-tools">Open Darwin</A>  [3].</P></TD></TR></TABLE></CENTER><!-- warning ends here --><BR><BR><BR><BR><A NAME="Section1"></A><H2>The Document Bundle</H2><P id=p4> Keynote documents are actually <A href="../../documentation/macosx/Essentials/SystemOverview/Bundles/">bundles</A>  [4] -- specially constructed folders that the Finder knows to display as single files. This offers two advantages: users only have to worry about a "single file"; while developers can easily modify the individual portions of the bundle as necessary.</P><P id=p4>You can examine the contents of a bundle by Control-clicking (or right-clicking with a two-button mouse) on a Keynote document and selecting "Show Package Contents" from the resulting contextual menu.</P><P id=p4>The bundle contains several files and subdirectories:</p><UL><LI>presentation.apxl: This required file is the XML document and describes how a Keynote document looks and acts.</li><LI>media files (images, sounds, movies, etc.) referenced by the presentation;</li><LI>.typeAttributes.dict, which tells the OS this folder should be treated as a bundle;</li><LI>tiny: a folder containing small versions of all the images in the document</li><LI>thumbs: a folder containing "thumbnails" of all the slides in the document.</li></UL> <P>The two folders ("tiny" and "thumbs") provide performance improvements for the application. However, you can ignore them completely -- if you programmatically create a Keynote document without these folders, Keynote will open the document correctly; when you save the document in the application, Keynote will fill in the correct values for you.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section2"></A><H2>About the presentation.apxl file</H2><P id=p4> The center of a Keynote document bundle is the "presentation.apxl" file. Using the sample presentation, we'll walk through this file section by section. The top-level element in a presentation.apxl file is <CODE>presentation</CODE> . It has one attribute, <CODE>version</CODE> . Keynote 1.0 always writes a value of "36" to this field. You should also write a value of "36". If you do something else, Keynote may refuse to read your document, or do strange and unexpected things when it does read it.</P><P id=p4>The <CODE>presentation</CODE>  element has four children:</p><UL><LI>metadata</li><LI>theme</li><LI>slide-list and</li><LI>ui-state.</li></UL><P>You can skip the <CODE>metadata</CODE>  element entirely and the document will load just fine. Or you can add data to it to help identify the source of your document to track your internal workflow. (Keynote will provide its own metadata when the application saves the document for the first time.)</P><P id=p4>The <CODE>theme</CODE>  describes the default appearance of the document as a whole and each master slide. It will be covered in detail in the third Technical Note in this series. To start, you can just use the theme specification from one of the default themes that ships with Keynote (or your own custom theme). In fact, Keynote themes are a special version of Keynote documents, and you can create a Keynote document by simply loading a theme and then populating the slide-list element.</P><P id=p4>The <CODE>ui-state</CODE>  element describes the user interface state of a document; it is required, but you can leave it empty if you wish. The <CODE>ui-state</CODE>  allows you to do things like set which slide is the first slide the user sees when they open the document, the size of the document window, or the zoom level of the document. It is easy to reverse-engineer; we will discuss it further the fourth part of this series.</P><P id=p4>The heart of a presentation is the <CODE>slide-list</CODE>  element. It consists of a list of slides. Absolutely nothing else can appear in a <CODE>slide-list</CODE> . The order of slides in the list is the same as their order of appearance in the presentation. A Keynote document has to contain at least one slide.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section3"></A><H2>The Basics of a Slide</H2><P id=p4> If you look at the sample document, the first slide is as basic as you can get: it's completely blank. However, looking at the XML reveals that there's a bit of complexity hidden here:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 1</B>. XML from Slide 1</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;slide master-slide-id="master-slide-2"&gt;  &lt;drawables&gt;    &lt;body visibility="tracks-master" vertical-alignment="tracks-master"/&gt;    &lt;title visibility="tracks-master"     vertical-alignment="tracks-master"/&gt;  &lt;/drawables&gt;  &lt;transition-style type="inherited"/&gt;  &lt;thumbnails&gt;    &lt;thumbnail file="thumbs/st0.tiff" byte-size="360" size="60 45"/&gt;  &lt;/thumbnails&gt;  &lt;bullets&gt;    &lt;bullet marker-type="inherited" level="0"&gt;      &lt;content tab-stops="L 96" font-size="84" font-name="GillSans"       paragraph-alignment="center"/&gt;    &lt;/bullet&gt;  &lt;/bullets&gt;&lt;/slide&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The <CODE>slide</CODE>  element in this case has a single attribute, the <CODE>master-slide-id</CODE>. This determines which master slide the slide uses for default values. If you look at the master slides in the theme element of the presentation, you'll see that the <CODE>master-slide</CODE>  element with id "master-slide-2" corresponds to the master slide named "Title &amp; Bullets" in the Keynote UI for this theme.</P><P id=p4>In a presentation.apxl file, you can change which master slide a slide uses by changing the <CODE>master-slide-id</CODE>  attribute. It must, of course, reference a <CODE>master-slide</CODE>  in the document's theme. Every slide element must have a <CODE>master-slide-id</CODE>  attribute with a valid value.</P><P id=p4>Now let's consider the children of the slide element. The first of these is <CODE>drawables</CODE> . Even though this slide is blank, there are two objects in its <CODE>drawables</CODE>  list, a <CODE>title</CODE>  and a <CODE>body</CODE> . These correspond to the title and body placeholders on the slide canvas in Keynote. Both have two attributes, <CODE>visibility</CODE>  and <CODE>vertical-alignment</CODE>, which are both set to "tracks-master" in this case. This means that if these things are visible on the master slide, they'll be visible on the slide, and they inherit their vertical alignment style from the master slide as well. We'll show examples of different visibility and vertical alignment examples below.</P><P id=p4>The next child is <CODE>transition-style</CODE>, and its attribute <CODE>type</CODE>  has the value "inherited". This means that this slide inherits whatever transition its master slide has. When we look at the next slide, we'll see an example of overriding this.</P><P id=p4>Next is <CODE>thumbnails</CODE> . Remember, the "thumbs" directory in the document bundle exists to provide a performance boost to Keynote. The slide thumbnails correspond to the images you see in Keynote's Slide Navigator. You don't have to have them in the document; if you don't, Keynote will generate them when the document is opened. You can leave the <CODE>thumbnails</CODE>  element empty, or you can add as many thumbnails as you want. The <CODE>file</CODE>  attribute tells Keynote where to locate the image for the thumbnail -- in this case, "thumbs/st1.tiff". Thumbnails don't have to be tiffs, and they don't have to be in the thumbs subdirectory, but we recommend you put them there anyway -- it'll make your documents more like everyone else's, and it makes it easier for others to read the document bundle.</P><P id=p4>The <CODE>byte-size</CODE>  attribute is also there for performance reasons. If you want to create a thumbnail, and you don't know what the file size it's going to be, set this to "-1", otherwise set this value to the file size (in bytes).</P><P id=p4>The <CODE>size</CODE>  attribute describes the dimension of the thumbnail in pixels. The first value is width, the second is height. To get the performance enhancement in the slide navigator, create a thumbnail of size 60x45.</P><P id=p4>Remember, you don't have to create thumbnails. You can leave this element empty and Keynote will work just fine (and will generate the correct information when you open the document in Keynote).</P><P id=p4>The last child of the slide element is <CODE>bullets</CODE> . Every slide has a <CODE>bullet</CODE>  list, and every <CODE>bullet</CODE>  list contains at least one bullet, even if that bullet has no contents, as is the case here. We'll discuss bullets in more detail below.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section4"></A><H2>Adding a Shape and a Transition</H2><P id=p4> The second slide in the sample presentation contains an arrow, and has a mosaic transition to the third slide. Examining the XML, we can see how these are encoded:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 2</B>. XML from Slide 2</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;slide id="slide-1" master-slide-id="master-slide-4"&gt;  &lt;drawables&gt;    &lt;shape path="M 0 33.3 L 0 66.7 L 60 66.7 L 60 100 L 100 50 L 60 0 L 60     33.3 Z M 0 33.3" transformation="1.39564 0 0 1.07636 442 330.364"&gt;    &lt;title visibility="tracks-master"     vertical-alignment="tracks-master"/&gt;    &lt;body visibility="tracks-master" vertical-alignment="tracks-master"/&gt;  &lt;/drawables&gt;  &lt;transition-style type="apple:3D-mosaic-small" duration="1.5"&gt;    &lt;property name="direction" value="13"/&gt;  &lt;/transition-style&gt;  &lt;thumbnails&gt;    &lt;thumbnail file="thumbs/st1.tiff" byte-size="478" size="60 45"/&gt;  &lt;/thumbnails&gt;  &lt;bullets&gt;    &lt;bullet marker-type="inherited" level="0"&gt;      &lt;content tab-stops="L 96" font-size="84" font-name="GillSans"       paragraph-alignment="center"/&gt;    &lt;/bullet&gt;  &lt;/bullets&gt;&lt;/slide&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> First, note that this slide uses a different master slide -- "master-slide-4", which in this Keynote document is presented to the user with the name "Blank".</P><P id=p4>Let's skip the <CODE>drawables</CODE>  tag for the moment and instead examine the <CODE>transition-style</CODE>  tag next. This is where the transition for a slide is encoded. On the first slide, it took the master slide's transition. Here we have overridden the master slide.</P><P id=p4>The <CODE>transition-style</CODE>  tag has two attributes, <CODE>type</CODE>  and <CODE>duration</CODE> . The <CODE>type</CODE>  attribute is a string naming the transition, in this case "apple:3D-mosaic-small". The duration attribute tells the application how many seconds the transition should last -- in this case, 1.5 seconds. This must be a non-negative number. If it's too small, the transition will be too fast for the viewer to perceive. If it's too large, the transition will play very slowly.</P><P id=p4>In this case the <CODE>transition-style</CODE>  tag has one child, a <CODE>property</CODE>  tag. Each transition has zero or more properties, all of which are expressed through a <CODE>property</CODE>  tag. Each <CODE>property</CODE>  tag has two attributes, the property's <CODE>name</CODE>  -- in this case, "direction" -- and the property's <CODE>value</CODE>  -- in this case, "13", which in Keynote translates to "down." Different transitions have different sets of style attributes and potential values:</P><BR><BR>      <!-- table starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><!-- your table title --><P><B>Table 1</B>. Acceptable values for the ''transition-style'' tag.</P><!-- beginning of your table data --><TABLE BORDER=1 WIDTH="100%"><TR VALIGN=TOP><TD align=left WIDTH="60"><P><B>Transition type</B></P></TD><TD align=left WIDTH="240"><P><B>Description</B></P></TD><TD align=left><P><B>Attributes and Values</B></P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:3D-cube</P></TD><TD align=left><P>Draws the current and next slide on the faces of a 3D cube, then rotates the cube</P></TD><TD align=left><P>"Direction" -- the direction of the rotation<BR>11 - right to left<BR>12 - left to right<BR>13 - bottom to top<BR>14 - top to bottom</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:revolve</P></TD><TD align=left><P>Draws the current slide on one side of a "sheet", and the next slide on the other side, and then flips the "sheet" around the center                                         </P></TD><TD align=left><P>"Direction" -- the direction of the rotation<BR>10 - left to right<BR>11 - right to left<BR>12 - top to bottom<BR>13 - bottom to top                                                                          </P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:3D-mosaic-large</P></TD><TD align=left><P>Draws the current slide on one side of a "sheet" and the next slide on the opposite side of the sheet, then divides the sheet into "tiles" and flips the tiles individually                                         </P></TD><TD align=left><P>"Direction" -- describes both the direction that the tiles flip, and the order in which they are flipped<BR>11 - right to left<BR>12 - left to right<BR>13 - bottom to top<BR>14 - top to bottom</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:3D-mosaic-small</P></TD><TD align=left><P>Draws the current slide on one side of a "sheet" and the next slide on the opposite side of the sheet, then divides the sheet into "tiles" and flips the tiles individually; the tiles are smaller than for apple:3D-mosaic-large</P></TD><TD align=left><P>"Direction" -- describes both the direction that the tiles flip, and the order in which they are flipped<BR>11 - right to left<BR>12 - left to right<BR>13 - bottom to top<BR>14 - top to bottom</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:dissolve</P></TD><TD align=left><P>A dissolve effect between the current and next slide                                         </P></TD><TD align=left><P>no attributes</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:bounce</P></TD><TD align=left><P>The next slide drops in front of the current slide, bouncing a few times</P></TD><TD align=left><P>no attributes</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:fade</P></TD><TD align=left><P>Fades through black to the next slide</P></TD><TD align=left><P>no attributes</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:motion dissolve</P></TD><TD align=left><P>The current slide "moves out" while dissolving out, and the next slide "moves in" while dissolving in                                         </P></TD><TD align=left><P>no attributes</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:slide</P></TD><TD align=left><P>The next slide moves in to cover the current slide</P></TD><TD align=left><P>"Direction" -- describes both the direction that the next slide moves<BR>10 - left to right<BR>11 - right to left<BR>12 - top to bottom<BR>13 - bottom to top<BR>14 - top left to bottom right<BR>15 - top right to bottom left<BR>16 - bottom left to top right<BR>17 - bottom right to top left                                                                          </P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:pivot</P></TD><TD align=left><P>The next slide pivots around one of the four corners to cover the current slide</P></TD><TD align=left><P>"Direction" -- describes the direction from which the pivot comes; you can think of it as describing the corner around which the pivot occurs<BR>10 - top left<BR>13 - top right<BR>14 - bottom right<BR>17 - bottom left                                                                          </P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:push</P></TD><TD align=left><P>The next slide slides in while the current slide slides out, as if the next slide was pushing the current slide out of the way</P></TD><TD align=left><P>"Direction" -- describes the direction in which both slides move<BR>10 - left to right<BR>11 - right to left<BR>12 - top to bottom<BR>13 - bottom to top                                                                          </P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:reveal</P></TD><TD align=left><P>Moves the current slide away, revealing the next slide underneath</P></TD><TD align=left><P>"Direction" -- describes both the direction that the current slide moves<BR>10 - left to right<BR>11 - right to left<BR>12 - top to bottom<BR>13 - bottom to top<BR>14 - top left to bottom right<BR>15 - top right to bottom left<BR>16 - bottom left to top right<BR>17 - bottom right to top left</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:scale</P></TD><TD align=left><P>Scales the current or the next slide and provides a dissolve-style effect between them                                         </P></TD><TD align=left><P>"Direction" -- describes which slide scales and how<BR>30 - up - the next slide starts small and scales up until it is the right size<BR>31 - down - the current slide scales down<BR>32 - out - the current slide scales up while it dissolves out<BR>33 - in - the next slide starts larger and scales down until it is the right size                                                                          </P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:twirl</P></TD><TD align=left><P>The current slide twirls away while scaling down, and then the next slide twirls in while scaling up                                         </P></TD><TD align=left><P>no attributes</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:wipe</P></TD><TD align=left><P>A cinematic wipe between the current and next slide</P></TD><TD align=left><P>"Direction" -- describes the direction that the wipe effect moves<BR>20 - left to right<BR>21 - right to left<BR>22 - top to bottom<BR>23 - bottom to top</P></TD></TR></TABLE><!-- end of your table data --></TD></TR></TABLE></CENTER><!-- table ends here --><BR><BR><P id=p4> Let's return to the <CODE>drawables</CODE>  tag. Note that even on a blank slide, we have <CODE>title</CODE>  and <CODE>body</CODE>  drawables. Note also that (encoded in the <CODE>bullets</CODE>  element) we have a bullet point. Bullets always go in the <CODE>body</CODE>  placeholder, and our <CODE>body</CODE>  placeholder has a visibility of <CODE>tracks-master</CODE>  (as does the <CODE>title</CODE>  placeholder.) On the master slide, both placeholders are set to "invisible".</P><BR><BR><!-- warning starts here --><CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550><TR><TD BGCOLOR="#E6E6E6"><P><B>Note:</B><BR> Why do this? It is more of a UI issue than a file format issue: this way, the user can experiment with different master slides, and not lose the text content if she tries a blank slide, and then a slide with a visible placeholder.</P></TD></TR></TABLE></CENTER><!-- warning ends here --><BR><BR><P id=p4> The first drawable is a shape . The shape tag has two attributes, <CODE>path</CODE>  and <CODE>transformation</CODE>  . The <CODE>path</CODE>  attribute describes a path to draw the shape, and then the <CODE>transformation</CODE>  describes scaling, rotation, translation and skew of that object.</P><P id=p4>Keynote always generates paths based on a 100 pixel by 100 pixel square, and they are always aligned to the origin. Shapes must always be aligned to the origin, or Keynote will not handle them correctly. However, you needn't follow Keynote's lead as far as the 100x100 pixel square; you can create shapes using any size path, as long as the top left corner of the square enclosing the shape is at the origin.</P><P id=p4>The path description in the Keynote XML is similar to a path description in the <A HREF="http://www.w3.org/TR/SVG/">Scalable Vector Graphics (SVG)</A>  [5] standard. A Keynote path consists of any number of steps, and each step can be an (M)ove-step, a (L)ine-step, a (C)urve-to-step, or a clo(Z)e-step. To understand these, imagine that you are drawing the shape with a pen on a piece of paper:</P><BR><BR>      <!-- table starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><!-- your table title --><P><B>Table 2</B>. Path description commands</P><!-- beginning of your table data --><TABLE BORDER=1 WIDTH="100%"><TR VALIGN=TOP><TD align=left><P><B>Step Type</B></P></TD><TD align=left><P><B>Format</B></P></TD><TD align=left><P><B>Description</B></P></TD></TR><TR VALIGN=TOP><TD align=left><P>M-step</P></TD><TD align=left><P>M x y</P></TD><TD align=left><P>Move to - pick the pen up off the piece of paper, and move it to the (x, y).</P></TD></TR><TR VALIGN=TOP><TD align=left><P>L-step</P></TD><TD align=left><P>L x y</P></TD><TD align=left><P>Line to -- put the pen down (if it's not already down) and draw a line to the (x, y).</P></TD></TR><TR VALIGN=TOP><TD align=left><P>C-step</P></TD><TD align=left><P>C x1 y1 x2 y2 x y</P></TD><TD align=left><P>Curve to -- put the pen down (if it's not already down) and draw a curve from the current point to (x, y), using (x1, y1) and (x2, y2) as "control points", which determine the shape of the curve.</P></TD></TR><TR VALIGN=TOP><TD align=left><P>Z-step</P></TD><TD align=left><P>Z</P></TD><TD align=left><P>cloZe path -- put the pen down (if it's not already down) and draw a straight line from the current point to the first point in the path.</P></TD></TR></TABLE><!-- end of your table data --></TD></TR></TABLE></CENTER><!-- table ends here --><BR><BR><P id=p4> You should start each path with a <CODE>move-to</CODE>, and then use <CODE>line-to</CODE>  and <CODE>curve-to</CODE>  to draw the path you wish. If you are drawing a polygon -- or any time you wish your last segment to be a straight line -- you must close with a <CODE>Z</CODE> .</P><P id=p4>You may notice that the set of paths that can be expressed is far greater than the set of drawing tools that Keynote provides. You can, in fact, create shapes in the APXL that you cannot create through the user interface, if you find it useful to do so. Just make sure they are aligned to the origin, and that they're closed.</P><P id=p4>Drawing the path is only part of the story. We also need to position the shape. This is done with the <CODE>transformation</CODE>  attribute. The <CODE>transformation</CODE>  attribute consists of six numbers that specify the six variables of an affine transform matrix:</P><BR><BR>      <!-- table starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><!-- your table title --><P><B>Table 3</B>. Affine transformation matrix</P><!-- beginning of your table data --><TABLE BORDER=0 WIDTH="25%"><TR VALIGN=TOP><TD align=left><P>m11</P></TD><TD align=left><P>m12</P></TD><TD align=left><P>0</P></TD></TR><TR VALIGN=TOP><TD align=left><P>m21</P></TD><TD align=left><P>m22</P></TD><TD align=left><P>1</P></TD></TR><TR VALIGN=TOP><TD align=left><P>tx</P></TD><TD align=left><P>ty</P></TD><TD align=left><P>1</P></TD></TR></TABLE><!-- end of your table data --></TD></TR></TABLE></CENTER><!-- table ends here --><BR><BR><P id=p4> These are specified in the attributes string as "m11 m12 m21 m22 tx ty". Since the right-most column never changes, we don't bother to specify it.</P><P id=p4>Before a shape is drawn, it is transformed by this matrix. The result is that any point (x,y) on the untransformed path becomes (x', y') on the transformed path, where <CODE>x' = (m11)x + (m21)y + tx</CODE><CODE>y' = (m12)x + (m22)y + ty</CODE></P><BR><BR><!-- warning starts here --><CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550><TR><TD BGCOLOR="#E6E6E6"><P><B>Note:</B><BR> For more information on the affine transformation matrix, see <A href="../../documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/DrawBasic/Concepts/transforms.html">Basic Drawing: Coordinate Transforms</A>  [6]</P></TD></TR></TABLE></CENTER><!-- warning ends here --><BR><BR><P id=p4> Recall that the path must always be aligned to the origin, yet shapes can appear anywhere on the screen. This is because we use the affine transform to translate the shape. Also recall that Keynote always draws its paths in a 100x100 pixel box, but paths can be any size. This is because the shapes are scaled by the affine transform matrix. The path for a Keynote shape is always unrotated, and rotation is applied through the transformation matrix.</P><BR><BR><!-- warning starts here --><CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550><TR><TD BGCOLOR="#E6E6E6"><P><B>Note:</B><BR> It is also possible to apply shearing to a shape using the transformation matrix, although Keynote's user interface does not support shearing. We recommend caution when you experiment with shearing. While it may display correctly, the user interface it presents may be incorrect or confusing. If you expect anyone to edit your document by hand, it's probably best to avoid shearing altogether.</P></TD></TR></TABLE></CENTER><!-- warning ends here --><BR><BR><P><A HREF="#top">Back to top</A></P><A NAME="Section5"></A><H2>Multiple Drawables and Overriding Shape Appearance</H2><P id=p4><CODE>Path</CODE>  and <CODE>transform</CODE>  are only two parts of the shape's appearance. When you see it on the screen, it also has a particular fill, a line drawn around it, and it may be solid or semi-transparent. Note that in our example above, none of these parameters were specified. Those parameters were specified by the master slide or the theme, and since we didn't override them, Keynote just used the default parameters. This section describes how to override those parameters. We'll also look briefly at how Keynote handles the layering of objects</P><P id=p4>Slide 3 of our sample document uses a blank master slide and has two shapes on it, one right on top of the other. It's just like Slide 2, except that its <CODE>drawables</CODE>  element has different children, so let's just consider that element:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 3</B>. XML from Slide 3</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;drawables&gt;  &lt;shape path="M 0 100 L 100 100 L 50 0 Z M 0 100" transformation="1 0 0 1   462 334"&gt;    &lt;styles&gt;      &lt;shadow-style opacity="0.75" angle="130" offset="24" radius="10"       color="0 0.252033 0"/&gt;    &lt;/styles&gt;  &lt;/shape&gt;  &lt;shape stroke-color="1 0 0.498039" path="M 85.3553 14.6447 C 104.882   34.1709 104.882 65.8291 85.3553 85.3553 C 65.8291 104.882 34.1709   104.882 14.6447 85.3553 C -4.88155 65.8291 -4.88155 34.1709 14.6447   14.6447 C 34.1709 -4.88155 65.8291 -4.88155 85.3553 14.6447"   opacity="0.473684" stroke-width="5" transformation="1 0 0 1 461 345"&gt;    &lt;styles&gt;      &lt;fill-style fill-color="0.25098 1 0.25098" fill-type="color"/&gt;      &lt;dash-style pattern="6 6"/&gt;    &lt;/styles&gt;  &lt;/shape&gt;  &lt;title visibility="tracks-master" vertical-alignment="tracks-master"/&gt;  &lt;body visibility="tracks-master" vertical-alignment="tracks-master"/&gt;&lt;/drawables&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> Note that, again, the <CODE>title</CODE>  and <CODE>body</CODE>  drawables appear, and again they track their master slide.</P><P id=p4>The first shape is the triangle we see on the slide, and the second shape is the circle that is on top of the triangle. Keynote always lists drawables from bottom to top: the lowest drawable is first, the highest is last. Thus, the circle is on top of the triangle visually, and is listed after the triangle in the <CODE>drawables</CODE>  list.</P><P id=p4>Let's focus on the circle first. Note that it provides an example of the <CODE>C-step</CODE>  path element discussed previously. The shape tag for the circle also has three new attributes, <CODE>stroke-color</CODE>, <CODE>stroke-width</CODE>  and <CODE>opacity</CODE>, and one new child element, <CODE>styles</CODE> .</P><P id=p4>The <CODE>stroke-color</CODE>  attribute describes the color of the line around the shape. It's an RGB value, with 0 being the complete absence of the color, and 1 being as much of the color present as possible. Here we see a lot of red, no green, and about half the possible blue. This color description format appears in other places; we'll see it again when we look at the fill color, shortly. Values for each color in <CODE>stroke-color</CODE>  must be between 0 and 1, inclusively.</P><P id=p4>The attribute <CODE>stroke-width</CODE>  describes how many pixels wide the stroke is. The value must be a positive integer. You can control whether any stroke is drawn around the figure using the dash style, described below.</P><BR><BR><!-- warning starts here --><CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550><TR><TD BGCOLOR="#E6E6E6"><P><B>IMPORTANT:</B><BR> You'll note that you can set <CODE>stroke-width</CODE>  to 0. Doing so will draw the object without a stroke, as expected. However, you can't set the stroke width to 0 in Keynote, leading to possible user confusion when she makes changes to the related dash styles and sees no change. The preferred way of drawing an object without a stroke is to use the <CODE>dash-style</CODE>  element (described below) with a pattern of "none".</P></TD></TR></TABLE></CENTER><!-- warning ends here --><BR><BR><P id=p4> The <CODE>attribute</CODE>  opacity specifies how opaque the object is, with 1 being completely opaque and 0 being completely transparent. You can see that this shape is about 47% opaque according to the file format, and if you look at the slide in the application, you'll see that you can in fact see through it to the triangle underneath.</P><P id=p4>Next is the <CODE>styles</CODE>  element. Style information for most Keynote objects is stored in one of two places: the attributes of the object, or a <CODE>styles</CODE>  child element. In this case, our <CODE>styles</CODE>  element specifies a <CODE>fill-style</CODE>  and a <CODE>dash-style</CODE> .</P><P id=p4>The <CODE>fill-style</CODE>  element has two attributes. The <CODE>fill-type</CODE>  attribute states whether it is a color fill, a gradient fill, or an image fill. Here we use a color fill, and in the <CODE>fill-color</CODE>  attribute, we state what color it should be, using the same RGB format we used for <CODE>stroke-color</CODE>  above. We'll see how to set up gradient and image fills below.</P><P id=p4>Let's examine the <CODE>dash-style</CODE> . It has one attribute, <CODE>pattern</CODE> , which in this case has a value of "6 6".</P><P id=p4>If you set the <CODE>dash-style</CODE>  pattern attribute to have a value of "none", then there is no line drawn around the figure. If you set it to be "solid", then there is a solid line drawn around the figure. Here we have a more complex style, consisting of several pixels drawn solid, followed by several pixels blank. The numerical pattern "6 6" specifies the length of the solid and blank portions.</P><P id=p4>Note, however, that the solid and blank portions aren't 6 pixels long. They're 30 pixels long. Recall that the stroke width is 5 pixels. Keynote multiplies the values of the dash style pattern and the stroke width to determine how many pixels to draw or skip. Then, if the user changes the stroke width, the program automatically modifies the appearance of the dash style to match the new width.</P><P id=p4>You can specify up to 3 pairs of numbers in the dash style pattern attribute, which allows you to create fairly complicated dash styles. The numbers need to be positive, but they don't need to be integers -- so if you have a <CODE>stroke-width</CODE>  of 10 pixels but you really need just one pixel on, you can use a value of 0.1.</P><P id=p4>Let's turn our attention back to the triangle. It has a style that the circle lacks: a shadow. This is encoded with the <CODE>shadow-style</CODE>  child of the styles tag. The <CODE>shadow-style</CODE>  tag has five attributes.</P><P id=p4>The <CODE>opacity</CODE>  and <CODE>color</CODE>  attributes should look familiar: they describe the opacity and color of the shadow, in the same way that the <CODE>opacity</CODE>  attribute on the circle describes its opacity, and the <CODE>stroke-color</CODE>  attribute on the circle describes the color of the circle's stroke.</P><P id=p4>The <CODE>angle</CODE>, <CODE>offset</CODE>  and <CODE>radius</CODE>  attributes are specific to the shadow style. The <CODE>angle</CODE>  attribute describes the angle of the shadow in degrees, from 0 but less than 360. The <CODE>offset</CODE>  attribute says how far away from the original object the shadow is, in pixels. The <CODE>radius</CODE>  attribute describes the radius of the blurring effect, in pixels; if the user sets the blur to "1", then the radius will have a value of "1" and the shadow will appear very sharp; the higher the value, the less distinct the shadow.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section6"></A><H2>Images and Free Text</H2><P id=p4> We've seen how to draw shapes and how to make transitions between slides. Let's add some more content, in the form of text and images.</P><P id=p4>Consider the drawables array for slide 4:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 4</B>. XML from Slide 4</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;drawables&gt;  &lt;image display-name="Scale_Even.tif" byte-size="479568" natural-size="623   768" image-data="Scale_Even.tif" transformation="0.78125 0 0 0.78125 268   84" lock-aspect-ratio="true"/&gt;  &lt;textbox id="textbox-1" grow-horizontally="true" transformation="1 0 0 1   47 38.5" size="308 199.239"&gt;    &lt;content tab-stops="L 84" font-size="42" font-name="GillSans"     paragraph-line-spacing="26.1194" paragraph-alignment="center"&gt;      &lt;span font-name="GillSans-Italic"&gt;This&lt;/span&gt;      &lt;![CDATA[ is a]]&gt;      &lt;span font-kerning="43.2836" font-name="GillSans-Bold"&gt;scal&lt;/span&gt;      &lt;span font-name="GillSans-Bold"&gt;e&lt;/span&gt;      &lt;![CDATA[.&lt;&amp;&gt;]]&gt;    &lt;/content&gt;    &lt;styles&gt;      &lt;shadow-style opacity="0" radius="0"/&gt;    &lt;/styles&gt;  &lt;/textbox&gt;  &lt;title visibility="tracks-master" vertical-alignment="tracks-master"/&gt;  &lt;body visibility="tracks-master" vertical-alignment="tracks-master"/&gt;&lt;/drawables&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The first child of the <CODE>drawables</CODE>  array is an image of a balance scale. The attributes specify everything Keynote needs to display the image. Let's take them one at a time.</P><P id=p4>The first attribute, <CODE>display-name</CODE>, specifies the name of the object as it should appear to the user in Keynote's Metrics inspector. You can specify any value you want for this -- it's there for the user's convenience.</P><P id=p4>The next attribute is <CODE>byte-size</CODE>  and it provides a performance enhancement to Keynote. If you're creating a document from scratch, and you don't know the size of the image in bytes, use a value of "-1" and Keynote will fill in the correct value when it opens the document.</P><P id=p4>The <CODE>natural-size</CODE>  attribute describes the original ("natural") width and height of the image before scaling. These provide Keynote with "hints" that are useful if the document becomes corrupt and the image file cannot be found. If you don't include this attribute, or give it incorrect information, and then somehow the image disappears (for instance, if a download fails and the document is not completely transferred), then Keynote may not display the slide properly.</P><P id=p4>The <CODE>image-data</CODE>  attribute provides the name of the image file in the document bundle. When you create a presentation by hand (or from another program), you must make sure to include the image in the document bundle.</P><P id=p4>The <CODE>transformation</CODE>  attribute is just like the <CODE>transformation</CODE>  tag on <CODE>shape</CODE>  objects, and we discussed it in some detail above .</P><P id=p4>The <CODE>lock-aspect-ratio</CODE>  attribute is a boolean tag. It tells Keynote how to treat the image when the user resizes it in the Metrics inspector. If this value is "true", then width and height will be locked to the same aspect ratio; if it's "false", then the user can scale width and height independently.</P><P id=p4>Though they aren't included in this example, the <CODE>image</CODE>  tag can also take an <CODE>opacity</CODE>  attribute and a <CODE>stroke-width</CODE>  and <CODE>stroke-color</CODE>  attribute. These act just like the attributes of the same name on the [[ <CODE>shape</CODE>  tag]]]. Also, the <CODE>image</CODE>  tag can have a <CODE>styles</CODE>  child tag, in which you can specify shadow styles and dash styles, just like with [[[shapes]]].</P><P id=p4>The second drawable on this slide is a textbox. The contents of the <CODE>textbox</CODE>  tag describe the text within it, while the attributes describe the positioning and behavior of the textbox. We'll examine the attributes first.</P><P id=p4>The first attribute is an <CODE>id</CODE>  attribute, with a value of "textbox-1". This kind of attribute is used when we need to refer back to a drawable later on in the file, either to encode user interface state or to provide information about builds. We'll come back to this attribute when we discuss builds in the next section .</P><P id=p4>The second attribute, <CODE>grow-horizontally</CODE>, is a boolean attribute that describes how the textbox should behave when the user edits it. If it's set to "true" (as it is here), then the textbox can grow in width as the user types; otherwise it cannot.</P><P id=p4>The <CODE>transformation</CODE>  attribute describes how to scale, rotate, and translate the textbox, just as we've seen for previous objects. The <CODE>size</CODE>  attribute describes the width and height of the textbox, in pixels. It's important to set this accurately, since the text you describe must fit in the size given to be visible.</P><P id=p4>The <CODE>content</CODE>  child describes the text content of the textbox. The attributes define the default styling for all of the text -- in this case, it describes one tab stop, and default font of GillSans in 42-point, a center paragraph alignment, and a line-spacing of 26.11 points.</P><P id=p4>Any text that overrides that styling should be in a <CODE>span</CODE>  tag as a child of the <CODE>content</CODE>  tag. For example, the first word of the text box is "This" in italic type, and so we create a new <CODE>span</CODE>  setting the <CODE>font-name</CODE>  to "GillSans-Italic."</P><P id=p4>The next two words, "is a", are enclosed in a <CODE>CDATA</CODE>  section. This is not strictly necessary, but it's a good idea -- it lets Keynote know that everything before the close of the <CODE>CDATA</CODE>  section should be treated as text, not as an XML tag. Thus, you could have text such as "&lt;/drawables&gt;" without destroying the integrity of the <CODE>drawables</CODE>  array. You can place any text within a <CODE>CDATA</CODE>  section.</P><P id=p4>The next two <CODE>span</CODE> s show how the word "scale" is made bold, with large kerning between the letters. Note that you cannot include a <CODE>span</CODE>  within a <CODE>span</CODE>  -- in order to make the "e" bold but not have the same kerning, we have to put it in a separate <CODE>span</CODE> . Using combinations of attributes, you can construct very complex text styles.</P><P id=p4>Free-standing text isn't the only way to put words on a slide -- remember, we still have those placeholder objects to play with. As we'll see below, once you understand how to specify the contents of a textbox, specifying the contents of a bullet point is pretty easy -- they use the same structure and format.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section7"></A><H2>Builds</H2><P id=p4> If you play slide 4, you'll see that the text doesn't simply sit on there: it drops in, and then sort of falls off the left side. This is because the text has builds applied to it.</P><P id=p4>Recall that the textbox had a new attribute, <CODE>id</CODE>, with a value of "textbox-1". Take a look at the <CODE>events</CODE>  child of the fourth slide:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 5</B>. XML from Slide 4</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;events&gt;  &lt;build target-id="textbox-1" type="apple:dropbuild" duration="2.5"&gt;    &lt;property name="animationType" value="1"/&gt;  &lt;/build&gt;  &lt;build target-id="textbox-1" type="apple:pivot-build" duration="0.5"&gt;    &lt;property name="direction" value="14"/&gt;    &lt;property name="animationType" value="2"/&gt;  &lt;/build&gt;&lt;/events&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The <CODE>events</CODE>  tag specifies all of the build events that occur on a slide. The order they appear in the XML is the order they appear during presentation. Each build is specified by a <CODE>build</CODE>  element.</P><P id=p4>The <CODE>target-id</CODE>  tag of a build event determines which object the event applies to -- in this case, the object with the <CODE>id</CODE>  "textbox-1", or the textbox that appears on this slide. In order to build an object, then, you must have an <CODE>id</CODE>  attribute on it -- and it must be on the same slide as the build event.</P><P id=p4>The <CODE>type</CODE>  attribute describes the kind of animation that should take place. It's a string specifying which animation to use -- in this case, "apple:dropbuild" for the first build, and "apple:pivot-build" for the second. The <CODE>duration</CODE>  attribute is the amount of time, in seconds, the build takes. It should be a non-negative number, and the same caveats apply to it that applied to transitions -- too fast, and it'll happen before the user notices; too slow, and it'll look odd.</P><P id=p4>A <CODE>build</CODE>  element can have several properties, each of which has a <CODE>name</CODE>  and a <CODE>value</CODE> . The drop build and the pivot build both have a property with the <CODE>name</CODE>  "animationType". Every build must have such a property. If it has a value of "1", then the build brings the object onto the slide; a value of "2" means the build takes the object off of the slide. You can only build a single object onto the slide once, and similarly you can only take it off of the slide once; Keynote may behave a bit strangely if you try to violate this constraint.</P><P id=p4>The second build (the pivot) has another property, the <CODE>direction</CODE>, which tells the application which direction the build should move in.</P><P id=p4>If you play the fourth and fifth slides of the presentation, you'll notice a subtle difference between them: for slide 4, the presenter has to click the mouse or press a key for the text to build, but for slide 5 it happens automatically. The only difference between these slides is the <CODE>slide</CODE>  tag: on slide 5, it has an additional attribute, <CODE>autobuild</CODE> , which has a value of "true". This tells Keynote to play the first build without action on the part of the user. If you leave this attribute absent, or you set its value to "false", then Keynote requires an action to play the first build.</P><P id=p4>Keynote provides a number of builds, some of which have attributes that describe exactly how they'll look:</P><BR><BR>      <!-- table starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><!-- your table title --><P><B>Table 4</B>. Acceptable values of the ''Build'' tag's ''type''</P><!-- beginning of your table data --><TABLE BORDER=1 WIDTH="100%"><TR VALIGN=TOP><TD align=left WIDTH="60"><P><B>Build "Type"</B></P></TD><TD align=left WIDTH="240"><P><B>Description</B></P></TD><TD align=left><P><B>Attributes and Values</B></P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:appear</P></TD><TD align=left><P>the specified object simply appears or disappears</P></TD><TD align=left><P>animationType -- whether the object appears or disappears<BR>1 - appear<BR>2 - disappear</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:dropbuild</P></TD><TD align=left><P>The specified object drops into the slide and bounces a few times</P></TD><TD align=left><P>animationType -- whether the object moves in or out<BR>1 - the object dissolves in<BR>2 - the object dissolves out</P><P>direction -- specifies the direction of the revolution<BR>17 - left to right<BR>23 - right to left<BR>85 - top to bottom<BR>93 - bottom to top</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:move in</P></TD><TD align=left><P>The specified object moves in or out</P></TD><TD align=left><P>animationType -- whether the object moves in or out<BR>1 - move in<BR>2 - move out</P><P>direction -- which way the object moves<BR>0 - left to right in, right to left out  <BR>1 - right to left in, left to right out  <BR>2 - top to bottom in, bottom to top out  <BR>3 - bottom to top in, top to bottom out  <BR>4 - upper left to lower right in, lower right to upper left out  <BR>5 - upper right to lower left in, lower left to upper right out  <BR>6 - lower left to upper right in, upper right to lower left out  <BR>7 - lower right to upper left in, upper left to lower right out  <BR></P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:pivot</P></TD><TD align=left><P>The specified object pivots in or out, as if attached by only one of its corners</P></TD><TD align=left><P>animationType -- whether the object pivots in or out<BR>1 - in  <BR>2 - out</P><P>direction -- specifies the corner around which the pivot occurs<BR>10 - top left  <BR>13 - top right  <BR>14 - bottom right  <BR>17 - bottom left</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:zoom</P></TD><TD align=left><P>The specified object scales up or down</P></TD><TD align=left><P>animationType -- whether the object appears or disappears<BR>1 - appear  <BR>2 - disappear</P><P>direction -- whether the object scales up or down<BR>1 - if object is appearing, it scales down to its final size; if object is disappearing, it scales up and disappears.<BR>2 - if object is appearing, it scales up to its final size; if object is disappearing, it scales down and disappears</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:spin</P></TD><TD align=left><P>The specified object spins rapidly around its center while dissolving in or out</P></TD><TD align=left><P>animationType -- whether the object dissolves in or out<BR>1 - dissolve in  <BR>2 - dissolve out</P></TD></TR><TR VALIGN=TOP><TD align=left><P>apple:wipe</P></TD><TD align=left><P>A cinematic wipe effect reveals or removes the object</P></TD><TD align=left><P>animationType -- whether the object appears or disappears<BR>1 - reveal  <BR>2 - remove</P><P>direction -- the direction of the wipe<BR>15 - left to right if revealing, right to left if removing  <BR>17 - right to left if revealing, left to right if removing  <BR>19 - top to bottom if revealing, bottom to top if removing  <BR>21 - bottom to top if revealing, top to bottom if removing </P></TD></TR></TABLE><!-- end of your table data --></TD></TR></TABLE></CENTER><!-- table ends here --><BR><BR><P><A HREF="#top">Back to top</A></P><A NAME="Section8"></A><H2>Gradient and Image Shape Fills</H2><P id=p4> Recall that previously we created a shape with a color fill, and we said that we could do two other kinds of fills with it -- gradient and image fills. Let's see how to do those now. The sixth slide in our sample document contains two shapes, a square and a circle. The square has a gradient fill, and the circle has an image fill. Here's the <CODE>shape</CODE>  tag for the circle:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 6</B>. XML from Slide 6</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;shape stroke-color="g1 0.5" path="M 85.3553 14.6447 C 104.882 34.1709 104.882 65.8291 85.3553 85.3553 C 65.8291 104.882 34.1709 104.882 14.6447 85.3553 C -4.88155 65.8291 -4.88155 34.1709 14.6447 14.6447 C 34.1709 -4.88155 65.8291 -4.88155 85.3553 14.6447" opacity="0.9" stroke-width="1" transformation="3.285 0 0 3.28 346 220"&gt;  &lt;styles&gt;   &lt;fill-style image-scale="scale-to-fill" image-data="tile_fun_purple.jpg"    byte-size="27609" fill-type="image"/&gt;   &lt;dash-style pattern="solid"/&gt;   &lt;shadow-style opacity="0" radius="0"/&gt;  &lt;/styles&gt;&lt;/shape&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The only thing new about this object is that it has a different <CODE>fill-style</CODE> . The <CODE>fill-style</CODE>  tag has a value of "image" for the <CODE>fill-type</CODE>  attribute, and the other attributes specify information about this image. The <CODE>image-data</CODE>  attribute and the <CODE>byte-size</CODE>  attribute are just like attributes of the same name on the <CODE>image</CODE>  tag of the previous slide. The <CODE>image-scale</CODE>  attribute, however, is new. It describes what do with the image if it isn't exactly the same size as the shape it fills. In this case, we scale it so that it entirely fills the image. This attribute can take several values:</P><BR><BR>      <!-- table starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><!-- your table title --><P><B>Table 5</B>. Acceptable values of the ''image'' tag's ''image-scale'' attribute</P><!-- beginning of your table data --><TABLE BORDER=1 WIDTH="100%"><TR VALIGN=TOP><TD align=left><P><B>Attribute value</B></P></TD><TD align=left><P><B>Description</B></P></TD></TR><TR VALIGN=TOP><TD align=left><P>scale-to-fit</P></TD><TD align=left><P>Scale the image so that it fits in the shape; if the image is larger than the shape, this scales it so that if can be contained inside the shape, while maintaining the aspect ratio. If the image is smaller, it scales it up.</P></TD></TR><TR VALIGN=TOP><TD align=left><P>scale-to-fill</P></TD><TD align=left><P>Scale the image so that it fits in the shape, and fills the shape, possibly cropping the image, and maintaining the aspect ratio.</P></TD></TR><TR VALIGN=TOP><TD align=left><P>full-size</P></TD><TD align=left><P>The image maintains its natural size. If it is smaller than the shape, then there is white space around it. If it is larger, then it is cropped.</P></TD></TR><TR VALIGN=TOP><TD align=left><P>stretch</P></TD><TD align=left><P>If the image is smaller than the shape, stretches the image to fill the shape, changing the aspect ratio if necessary.</P></TD></TR><TR VALIGN=TOP><TD align=left><P>tile</P></TD><TD align=left><P>If the image is smaller than the shape, then it displays the image multiple times to fill the shape.</P></TD></TR></TABLE><!-- end of your table data --></TD></TR></TABLE></CENTER><!-- table ends here --><BR><BR><P id=p4> The square has a gradient fill. The XML for the square looks like this:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 7</B>. XML from Slide 6</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;shape path="M 0 0 L 100 0 L 100 100 L 0 100 Z M 0 0" transformation="1 0 0 1 462 334"&gt;  &lt;styles&gt;    &lt;fill-style fill-type="gradient"&gt;     &lt;gradient end-color="0.27451 0.27451 0.345098"      start-color="0 0.504065 1" gradient-angle="270"/&gt;    &lt;/fill-style&gt;  &lt;/styles&gt;&lt;/shape&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> As you can see, the only difference is the <CODE>fill-style</CODE>  tag, which has a fill type of <CODE>gradient</CODE> . The gradient is expressed in the <CODE>gradient</CODE>  child tag, which has three attributes. One, <CODE>start-color</CODE>, specifies the start color, and it is an RGB attribute, just like for single color fills. The attribute <CODE>end-color</CODE>  is in the same format, specifies the end color. Finally, the attribute <CODE>gradient-angle</CODE>  specifies the angle of the gradient, and like the <CODE>shadow</CODE>  angle, can take any value from 0 up to, but not including, 360.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section9"></A><H2>Slide Fills</H2><P id=p4> We can set the background of a slide in much the same way as we set the background of a shape. Consider slides 7, 8 and 9 of our sample presentation. Slide 7 has a gray background instead of a white one. The XML for that slide is as follows:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 8</B>. XML from Slide 7</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;slide master-slide-id="master-slide-4"&gt;  &lt;drawables&gt;    &lt;title visibility="tracks-master"     vertical-alignment="tracks-master"/&gt;    &lt;body visibility="tracks-master" vertical-alignment="tracks-master"/&gt;  &lt;/drawables&gt;  &lt;transition-style type="inherited"/&gt;  &lt;thumbnails&gt;    &lt;thumbnail file="thumbs/st5.tiff" byte-size="504" size="60 45"/&gt;  &lt;/thumbnails&gt;  &lt;bullets&gt;    &lt;bullet marker-type="inherited" level="0"&gt;      &lt;content tab-stops="L 96" font-size="84" font-name="GillSans"       paragraph-alignment="center"/&gt;    &lt;/bullet&gt;  &lt;/bullets&gt;  &lt;background-fill-style fill-color="0.504065 0.504065 0.504065"   fill-type="color"/&gt;&lt;/slide&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> Note that this isn't that much different from another blank slide -- the only addition is the <CODE>background-fill-style</CODE>  tag, with the same attributes as the <CODE>fill-style</CODE>  tag for a shape with a solid color fill.</P><P id=p4>Slide 8 has a gradient fill. Its <CODE>background-fill-style</CODE>  tag looks like this:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 9</B>. XML from Slide 8</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;background-fill-style fill-type="gradient"&gt;  &lt;gradient end-color="0.27451 0.27451 0.345098" start-color="1 1 1"   gradient-angle="270"/&gt;&lt;/background-fill-style&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> Again, we see that the <CODE>gradient</CODE>  is described in the same way it would be for a shape.</P><P id=p4>Slide 9 has an image fill. Here is its <CODE>background-fill-style</CODE>  tag:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 10</B>. XML from Slide 9</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;background-fill-style image-scale="scale-to-fit" image-data="Aqua%20Blue.jpg" byte-size="264563" fill-type="image"/&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> Again, we see similarity to the image fill style for a shape. In fact, all the attributes are the same, including the scaling.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section10"></A><H2>Bullet Basics</H2><P id=p4> We've now got everything we need to create a fairly dynamic presentation: text, images, shapes, fills, transitions and builds. However, if you'll be working with a large amount of text, you won't want to want to deal with free-standing text labels. This is why Keynote provides bullet points.</P><P id=p4>On the 10th slide in our sample document, we start to see some bullet points. Let's look at the XML for that slide:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 11</B>. XML from Slide 10</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;slide master-slide-id="master-slide-2"&gt;  &lt;drawables&gt;    &lt;body visibility="tracks-master" vertical-alignment="tracks-master"/&gt;    &lt;title visibility="tracks-master"     vertical-alignment="tracks-master"/&gt;  &lt;/drawables&gt;  &lt;transition-style type="inherited"/&gt;  &lt;thumbnails&gt;    &lt;thumbnail file="thumbs/st8.tiff" byte-size="814" size="60 45"/&gt;  &lt;/thumbnails&gt;  &lt;bullets&gt;    &lt;bullet marker-type="inherited" level="0"&gt;      &lt;content tab-stops="L 96" font-size="84" font-name="GillSans"       paragraph-alignment="center"&gt;Bullet Points&lt;/content&gt;    &lt;/bullet&gt;    &lt;bullet marker-type="inherited" level="1"&gt;      &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"       font-name="GillSans" paragraph-first-line-indent="7"&gt;Multiple       levels&lt;/content&gt;    &lt;/bullet&gt;    &lt;bullet marker-type="inherited" level="2"&gt;      &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"       font-name="GillSans" paragraph-first-line-indent="7"&gt;of       points&lt;/content&gt;    &lt;/bullet&gt;    &lt;bullet marker-type="inherited" level="3"&gt;      &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"       font-name="GillSans" paragraph-first-line-indent="7"&gt;are       allowed&lt;/content&gt;    &lt;/bullet&gt;    &lt;bullet marker-type="inherited" level="2"&gt;      &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"       font-name="GillSans" paragraph-first-line-indent="7"&gt;like       so.&lt;/content&gt;    &lt;/bullet&gt;    &lt;bullet marker-type="inherited" level="1"&gt;      &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"       font-name="GillSans"       paragraph-first-line-indent="7"&gt;See?&lt;/content&gt;    &lt;/bullet&gt;  &lt;/bullets&gt;&lt;/slide&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> There are two differences between this and our previous slides. First, this slide uses a different master slide, "master-slide-2", which is a master slide that has both the title and body placeholders visible. Second, the <CODE>bullets</CODE>  element is now more populated than on previous slides. We said before that every slide must have at least one bullet, but we didn't go into any detail about what that bullet looked like. Let's go into that detail now.</P><P id=p4>The first bullet on this slide has two attributes, <CODE>marker-type</CODE>  and <CODE>level</CODE> . The "inherited" value on <CODE>marker-type</CODE>  simply means that the glyph displayed next to the bullet is inherited from the master slide. The level, "0", means that this bullet is a top-level bullet. Top-level bullets are displayed in the title placeholder -- that "title" tag that has appeared in the <CODE>drawables</CODE>  array of every slide. If the title placeholder isn't visible, then the top-level bullet won't be displayed.</P><P id=p4>Every slide has to have a top-level bullet (a bullet with a value of "0" for its <CODE>level</CODE>  attribute), and it must always be the first bullet. You may have only one top-level bullet on a slide.</P><P id=p4>The <CODE>content</CODE>  child of this bullet is just like the <CODE>content</CODE>  child of the textbox in the textbox example. It specifies text and formatting for a bullet point. We'll discuss text formatting in more detail in a moment.</P><P id=p4>If you view the slide in Keynote, you'll see that the bullets have a hierarchical organization. However, this organization is not mirrored in the file format. Instead, it is derived from the <CODE>level</CODE>  attribute on the bullet tags.</P><P id=p4>All of the bullet points that appear in the body placeholder have a <CODE>level</CODE>  of "1" or more. The first point in a body placeholder always has a <CODE>level</CODE>  of "1", and any siblings of that point also have a <CODE>level</CODE>  of "1". Children of a <CODE>level</CODE>  "1" point have <CODE>level</CODE>  "2", and children of a <CODE>level</CODE>  "2" point have <CODE>level</CODE>  "3", and so on.</P><P id=p4>There are constraints on the level attribute that are not easily expressible in an XML schema or DTD. You may not "skip" a level -- in order to have a bullet point with <CODE>level</CODE>  N + 2, there must be a preceding bullet point with <CODE>level</CODE>  N + 1, and no preceding bullet point with a <CODE>level</CODE>  less than M such that M is less than N + 1, unless there is also a point for every <CODE>level</CODE>  between M + 1 and N + 1 inclusive. A couple examples might make this clearer:</P><BR><BR>      <!-- table starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><!-- your table title --><P><B>Table 6</B>. Examples of legal bullet structure</P><!-- beginning of your table data --><TABLE BORDER=1 WIDTH="100%"><TR VALIGN=TOP><TD align=left><P><B>Legal Structure</B></P></TD><TD align=left><P><B>Illegal Structure</B></P></TD><TD align=left><P><B>Reason for Illegality</B></P></TD></TR><TR VALIGN=TOP><TD align=left><PRE>Level 1  Level 2    Level 3      Level 4</PRE></TD><TD align=left><PRE>Level 1  Level 2      Level 4</PRE></TD><TD align=left><P>There isn't a point before the "Level 4" point that has a Level of 3. </P></TD></TR><TR VALIGN=TOP><TD align=left><PRE>Level 1  Level 2    Level 3  Level 2    Level 3      Level 4</PRE></TD><TD align=left><PRE>Level 1  Level 2    Level 3  Level 2      Level 4</PRE></TD><TD align=left><P>Although there is a point before "Level 4" that has a level of 3, the "level 4" point is also preceded by a point with level 2, and there isn't a level 3 point between them. </P></TD></TR></TABLE><!-- end of your table data --></TD></TR></TABLE></CENTER><!-- table ends here --><BR><BR><P><A HREF="#top">Back to top</A></P><A NAME="Section11"></A><H2>Bullet Glyphs</H2><P id=p4> On the 10th example slide, all of the bullets have the same glyph -- one inherited from their master slide. Usually inheriting from the master slide is the best way to go for providing a clean and consistent look, but sometimes you need something special. On slide 11, we present a variety of different bullet glyph styles. Let's consider the XML for those points one at a time.</P><P id=p4>The first point has the letter "A" for its bullet glyph. It is represented like this:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 12</B>. XML from Slide 11</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;bullet marker-type="sequence" level="1"&gt;  &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"   font-name="GillSans" paragraph-first-line-indent="7"&gt;You can use   sequences like letters...&lt;/content&gt;  &lt;sequence-bullet-style format-string="%@." size-technique="relative"   sequence-type="uppercase-alpha" size="1"/&gt;&lt;/bullet&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> Note that the <CODE>marker-type</CODE>  attribute is now "sequence" instead of "inherited". The exact appearance of this sequence is given by the <CODE>sequence-bullet-style</CODE>  tag. The <CODE>size-technique</CODE>  parameter states that the <CODE>size</CODE>  attribute should be interpreted to mean that the size of this bullet varies with the text. (Keynote sets it to "1" for sequence bullets; you can set it to other values, but it might look odd.) The <CODE>format-string</CODE>  parameter provides the format (e.g. "(A)", "(B)", "(C)"... or "--i--", "--ii--", "--iii--"), with "%@" standing for the value that's filled in (A, B, C..., i, ii, iii..., etc.) based on where in the sequence this bullet appears. Finally, the <CODE>sequence-type</CODE>  attribute names the sequence, in this case "uppercase-alpha".</P><BR><BR><!-- warning starts here --><CENTER><TABLE BORDER=0 CELLPADDING=3 WIDTH=550><TR><TD BGCOLOR="#E6E6E6"><P><B>Note:</B><BR> If you want a % sign to appear as part of a <CODE>format-string</CODE>, you need to use two % signs ("%%"). Also, if the "%@" sequence appears more than once in a <CODE>format-string</CODE>, Keynote may not load your document or may not display it properly.</P></TD></TR></TABLE></CENTER><!-- warning ends here --><BR><BR><P id=p4> This is the next bullet:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 13</B>. XML from Slide 11</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;bullet marker-type="sequence" level="1"&gt;  &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"   font-name="GillSans" paragraph-first-line-indent="7"&gt;or   numbers...&lt;/content&gt;  &lt;sequence-bullet-style format-string="%@." size-technique="relative"   sequence-type="arabic" size="1"/&gt;&lt;/bullet&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> It's similar the last bullet point, but it has a different value for the <CODE>sequence-type</CODE>  attribute -- "arabic", specifying Arabic numerals. Similarly the next bullet has a <CODE>sequence-type</CODE>  of "uppercase-roman":</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 14</B>. XML from Slide 10</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;bullet marker-type="sequence" level="1"&gt;  &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"   font-name="GillSans" paragraph-first-line-indent="7"&gt;...or Roman   numerals.&lt;/content&gt;  &lt;sequence-bullet-style format-string="%@." size-technique="relative"   sequence-type="uppercase-roman" size="1"/&gt;&lt;/bullet&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> There are two other sequence types, "lowercase-alpha" (for a, b, c, etc.) and "lowercase-roman" (for i, ii, iii, etc.)</P><P id=p4>The next bullet does something different:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 15</B>. XML from Slide 11</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;bullet marker-type="character" level="1" id="bullet-1"&gt;  &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"   font-name="GillSans" paragraph-first-line-indent="7"&gt;You can use any   character.&lt;/content&gt;  &lt;character-bullet-style offset="-13" size="72.0002"&gt;    &lt;bullet-characters tab-stops="L 84" font-size="11"     font-color="System:textColor (0 0 0)"     font-name="GillSans"&gt;*&lt;/bullet-characters&gt;  &lt;/character-bullet-style&gt;&lt;/bullet&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> It uses a character, in this case an asterisk, as the bullet point glyph. Note the different child element -- <CODE>character-bullet-style</CODE>  in place of <CODE>sequence-bullet-style</CODE> . The text is encoded in much the same way as text for a bullet's contents, or a textbox.</P><P id=p4>Note also that this style has an attribute we haven't seen before, <CODE>offset</CODE>  . This tells Keynote how many pixels to offset the bullet from the center line; since the asterisk character is drawn fairly high in this font, but we want it to appear centered, we've moved it down a few pixels. Also note that we do not specify a <CODE>size-technique</CODE>  parameter, and as a result, the value of the <CODE>size</CODE>  parameter is taken to be a literal value, not a multiplier.</P><P id=p4>Let's consider an image bullet next:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 16</B>. XML from Slide 11</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;bullet marker-type="image" level="1"&gt;  &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"   font-name="GillSans" paragraph-first-line-indent="7"&gt;Image bullets are   easy enough.&lt;/content&gt;  &lt;image-bullet-style byte-size="19384" size-technique="relative"   image-data="bullet_ball-chrome.tif" size="0.5"/&gt;&lt;/bullet&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> Note that the <CODE>marker-type</CODE>  attribute has a value of "image", and that we now have an <CODE>image-bullet-style</CODE>  child tag. The <CODE>byte-size</CODE>  and <CODE>image-data</CODE>  parameters should be familiar -- they are just like the parameters in the <CODE>image</CODE>  tag, or the <CODE>fill</CODE>  for a shape or slide. The <CODE>size-technique</CODE>  parameter has a value of "relative", which means that the image is scaled relative to the text -- in this case, to be half as high as the text. If the user changes the text size, the glyph changes size with it. If <CODE>size-technique</CODE>  were absent, then the size would be interpreted as a scaling on the glyph itself, not in relationship to the text.</P><P id=p4>Finally, sometimes you want to make your point without a glyph, such as in the last bullet on this slide:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 17</B>. XML from Slide 11</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;bullet marker-type="none" level="1"&gt;  &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"   font-name="GillSans" paragraph-first-line-indent="7"&gt;or you can skip the   glyph entirely!&lt;/content&gt;&lt;/bullet&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> Note that the <CODE>marker-type</CODE>  attribute now has a value of "none".</P><P><A HREF="#top">Back to top</A></P><A NAME="Section12"></A><H2>Building Bullets</H2><P id=p4> We've seen how to apply builds to objects like images, shapes, and text boxes. We can do the same things to placeholders, which, as may recall, are the visual containers of bullet points.</P><P id=p4>Remember that <CODE>Level</CODE>  "0" bullets (titles) are treated differently when they are displayed -- they appear in the title placeholder, instead of the body placeholder. Since builds are applied to placeholders, titles and other bullet points get built separately. Consider the <CODE>drawables</CODE>  and <CODE>events</CODE>  tags for the 12th slide of our sample document:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 18</B>. XML from Slide 12</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;drawables&gt;  &lt;body id="body-1" visibility="tracks-master"   vertical-alignment="tracks-master"/&gt;  &lt;title id="title-1" visibility="tracks-master"   vertical-alignment="tracks-master"/&gt;&lt;/drawables&gt;&lt;events&gt;  &lt;build target-id="title-1" type="apple:move in" duration="1"&gt;    &lt;property name="direction" value="0"/&gt;    &lt;property name="animationType" value="1"/&gt;  &lt;/build&gt;  &lt;build target-id="body-1" type="apple:wipe" duration="1"&gt;    &lt;property name="direction" value="15"/&gt;    &lt;property name="animationType" value="1"/&gt;  &lt;/build&gt;&lt;/events&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The first build applies to the object with the <CODE>id</CODE>  of "title-1" -- which, as we can see from the <CODE>drawables</CODE>  tag, is the title placeholder. It's just like the builds we've seen in previous examples.</P><P id=p4>Similarly, the second build applies to the object with the <CODE>id</CODE>  of "body-1" -- the body placeholder. It also is just like all of the other builds we've seen so far.</P><P id=p4>Sometimes having all the bullets appear at the same time isn't what you want -- you want to pace the presentation of information to the audience. Keynote allows you to build bullets by group or point-by-point to facilitate this. Slide 13 has an example of building points group by group. The contents of the <CODE>drawables</CODE>  tag are slightly different: since the body and title are different objects, you must specify different <CODE>id</CODE>  attributes for them individually.</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 19</B>. XML from Slide 13</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;drawables&gt;  &lt;body id="body-2" visibility="tracks-master"   vertical-alignment="tracks-master"/&gt;  &lt;title id="title-2" visibility="tracks-master"   vertical-alignment="tracks-master"/&gt;&lt;/drawables&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The other difference on this slide is the contents of the <CODE>events</CODE>  tag:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 20</B>. XML from Slide 13</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;events&gt;  &lt;build target-id="title-2" type="apple:move in" duration="1"&gt;    &lt;property name="direction" value="0"/&gt;    &lt;property name="animationType" value="1"/&gt;  &lt;/build&gt;  &lt;build target-id="body-2" duration="1" delivery="2" type="apple:spin"&gt;    &lt;property name="animationType" value="1"/&gt;  &lt;/build&gt;&lt;/events&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The <CODE>build</CODE>  for the title placeholder is the same, but the body build has a new attribute, <CODE>delivery</CODE>, with a value of "2". Keynote interprets this to mean that it should build the bullet points one group at a time.</P><P id=p4>Slide 14 builds bullets one bullet point at a time. Its body placeholder has an <CODE>id</CODE>  attribute of "body-3".</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 21</B>. XML from Slide 14</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;build target-id="body-3" duration="0.5" delivery="1" type="apple:zoom"&gt;  &lt;property name="direction" value="14"/&gt;  &lt;property name="animationType" value="1"/&gt;&lt;/build&gt;</PRE>                        </TD>                     </TR>                  </TABLE><BR>               </TD>            </TR>         </TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> We can see that it is identical to the <CODE>body</CODE>  builds on the previous two slides, except that it has a value of "1" for the <CODE>delivery</CODE>  attribute, which Keynote interprets to mean it should build the bullets one by one.</P><P><A HREF="#top">Back to top</A></P><A NAME="Section13"></A><H2>Bullets Point Text</H2><P id=p4> Slide 14 contains some highly formatted bullet points:</P><BR><BR><!-- listing starts here --><CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480><TR><TD><P><B>Listing 22</B>. XML from Slide 15</P><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>                     <TR>                        <TD BGCOLOR="#E6E6E6">                           <PRE>&lt;bullets&gt;&lt;bullets&gt;  &lt;bullet marker-type="inherited" level="0"&gt;    &lt;content tab-stops="L 96" font-size="84" font-name="GillSans"      paragraph-alignment="center"&gt;Bullet      &lt;span font-name="GillSans-Italic"&gt;        Text      &lt;/span&gt;      is like Textbox      &lt;span font-name="GillSans-Italic"&gt;        Text      &lt;/span&gt;    &lt;/content&gt;  &lt;/bullet&gt;  &lt;bullet spacing="10" level="1" marker-type="inherited"&gt;    &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="36"      font-name="LucidaHandwriting-Italic" paragraph-first-line-indent="7"&gt;      You can set the attributes for an entire point    &lt;/content&gt;  &lt;/bullet&gt;  &lt;bullet spacing="90" level="1" marker-type="inherited"&gt;    &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"      font-name="GillSans" paragraph-first-line-indent="7"&gt;      You can      &lt;span font-name="GillSans-Italic"&gt;        vary      &lt;/span&gt;      the      &lt;span font-name="GillSans-Bold"&gt;        text      &lt;/span&gt;      &lt;![CDATA[ ]]&gt;      &lt;span font-name="LucidaHandwriting-Italic"&gt;        within a      &lt;/span&gt;      &lt;![CDATA[ ]]&gt;      &lt;span font-color="0 1 1" font-name="CopperplateGothic-Light"&gt;        point      &lt;/span&gt;    &lt;/content&gt;  &lt;/bullet&gt;  &lt;bullet spacing="10" level="1" marker-type="inherited"&gt;    &lt;content paragraph-head-indent="7" tab-stops="L 58" font-size="42"      font-name="GillSans" paragraph-first-line-indent="7"&gt;      You have control over spacing between points.    &lt;/content&gt;  &lt;/bullet&gt;&lt;/bullets&gt;</PRE></TD></TR></TABLE><BR></TD></TR></TABLE></CENTER><!-- listing ends here --><BR><BR>  <P id=p4> The text is formatted, you'll note, just like in the earlier textbox example. In fact, the <CODE>content</CODE>  tag is identical to the <CODE>content</CODE>  tag used in the textbox.</P><P id=p4>The only real difference between bullets and textboxes are that bullets have glyphs and they appear together in a placeholder. We've already covered glyphs. In order to provide more visual control, Keynote allows you to specify the space between bullet points. This is done with the <CODE>spacing</CODE>  attribute on the <CODE>bullet</CODE>  tag. We've done this here in an exaggerated manner to provide a visual demonstration. When you learn how Keynote describes themes and prototype bullet points, you'll see how this can be very useful for providing visual groupings of bullets.</P><P><A HREF="#top">Back to top</A></P><A NAME="conclusion"></A><H2>Conclusion</H2><P id=p4> You've seen how Keynote represents slides, transitions, textboxes, shapes, images, bullets, and builds. In theory, you could take any of Keynote's themes and build an entire presentation just by filling out the <CODE>slide-list</CODE>  element in your favorite text editor.</P><P id=p4>More usefully, though, you can now create applications that will create or change the contents of a Keynote presentation. This can result in very powerful tools for generating high-quality presentations automatically or more efficiently.</P><P id=p4>In Part II of this series, we'll describe how plugins -- including movies, charts and tables -- work, and how you can create and manipulate them.</P><P><A HREF="#top">Back to top</A></P><a name="References"></a><H2>References</H2><P id=p4> [1] Technical Note 2067: About the Keynote XML File Format (APXL Schema): <A href="../../technotes/tn2002/tn2067.html">http://developer.apple.com/technotes/tn2002/tn2067.html</A></p><P> [2] PictureShow  (sample Java-based tool demonstrating APXL creation): <A href="../../samplecode/Sample_Code/Java/PictureShow.htm">http://developer.apple.com/samplecode/Sample_Code/Java/PictureShow.htm</A></p><P>[3] Open Darwin Keynote tools mailing list: <A HREF="http://www.opendarwin.org/mailman/listinfo/keynote-tools">http://www.opendarwin.org/mailman/listinfo/keynote-tools</A></p><P> [4] Bundles documentation: <A href="../../documentation/macosx/Essentials/SystemOverview/Bundles/">http://developer.apple.com/documentation/macosx/Essentials/SystemOverview/Bundles/</A></p><P> [5] Scalable Vector Graphics (SVG): <A HREF="http://www.w3.org/TR/SVG/">http://www.w3.org/TR/SVG/</A></p><P> [6] Basic Drawing: Coordinate Transforms (affine transformation matrix documentation): <A href="../../documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/DrawBasic/Concepts/transforms.html">http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/DrawBasic/Concepts/transforms.html</A></P><P><A HREF="#top">Back to top</A></P>         <P><A NAME=Downloads></A></P>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <TD WIDTH=50>                  <P ALIGN=center><IMG SRC="images/acrobatsmall.gif" WIDTH=22 HEIGHT=23 ALIGN=middle alt="Acrobat gif"></P>               </TD>               <TD>                  <P>Acrobat version of this Note (size in bytes,                  size in K)</P>               </TD>               <TD WIDTH=60>                  <P><A HREF="pdf/tn2073.pdf">Download</A></P>               </TD>            </TR>            <TR>               <TD WIDTH=50>                  <P ALIGN=center><IMG SRC="images/bluebook.gif" WIDTH=20 HEIGHT=20 ALIGN=bottom alt="Bluebook gif"></P>               </TD>               <TD>                  <P>TN2073 sample document.key</P>               </TD>               <TD WIDTH=60>                  <P><A HREF="downloads/tn2073.dmg">Download</A></P>               </TD>            </TR>            <TR>               <TD WIDTH=50>                  <P ALIGN=center><IMG SRC="images/redbook.gif" WIDTH=20 HEIGHT=20 ALIGN=bottom alt="Redbook gif"></P>               </TD>               <TD>                  <P>PictureShow (sample Java-based tool demonstrating APXL creation)</P>               </TD>               <TD WIDTH=60>                  <P><A HREF="ftp://ftp.apple.com/developer/Sample_Code/Java/PictureShow.sit">Download</A></P>               </TD>            </TR>         </TABLE>                  <P><A HREF="#top">Back to top</A></P></TD></TR></TABLE></CENTER><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn2002/tn2073.html%3Fid%3DDTS10003100-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn2002/tn2073.html%3Fid%3DDTS10003100-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn2002/tn2073.html%3Fid%3DDTS10003100-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
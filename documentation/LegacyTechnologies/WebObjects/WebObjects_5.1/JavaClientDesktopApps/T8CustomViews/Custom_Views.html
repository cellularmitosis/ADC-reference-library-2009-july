<HTML>
	<HEAD>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="XML_Publisher">
		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">
        <title>Custom
Views</title>
		</HEAD>
	<BODY bgcolor="#ffffff">
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --> <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Task_Using__rface_Files.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="EOImageView.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerTop -->  
<!-- apple_doc: pageHeadingStart --><a name = "CEGEDJJH"></a><a name="-640020"></a><h2><font face="Lucida Grande,Helvetica,Arial">Custom
Views</font></h2><!-- apple_doc: pageHeadingEnd -->

<p><b>Problem:</b> You want to add an unsupported
view in an interface file such as <code>javax.swing.JProgressBar</code>.</p>
<p><b>Solution:</b> Place a custom view object and
connect it to an outlet in File's Owner.</p>
<p>In an Interface Builder file, place a custom view object in
the main window. You can find this object in the Cocoa-Containers
palette.  <a href="#CEGHFEEG">Figure 15-1</a>shows this palette and a custom view placed
in the main window.</p>
<br><a name = "CEGHFEEG"></a><a name="-631773"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-1 Custom view object in window</font></b></p>
 <img src = "../Art/placecustomview.gif" alt = "[image: ../Art/placecustomview.gif]">

<p>Next, you need to assign the custom view to an NSView subclass.
Before you can do this, you need to create an NSView subclass. Switch
to the Classes pane in the nib file window and enter "NSView"
in the Search field as shown in  <a href="#CEGCIEHH">Figure 15-2</a>.</p>
<br><a name = "CEGCIEHH"></a><a name="-631809"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-2 Find NSView in class hierarchy</font></b></p>
 <img src = "../Art/searchnsview.gif" alt = "[image: ../Art/searchnsview.gif]">

<p>Select NSView if it is not already selected and press Return
to subclass it. In the Info window, select Java as the language
for the subclass. Then, provide a fully qualified name for the subclass.
If the view represents a Swing class such as JProgressBar, use "javax.swing.JProgressBar"
as shown in  <a href="#CEGCIJFJ">Figure 15-3</a>. If the view represents a custom Swing subclass,
specify the fully-qualified name of that subclass.</p>
<br><a name = "CEGCIJFJ"></a><a name="-631829"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-3 Name the custom view class</font></b></p>
 <img src = "../Art/namecustomview2.gif" alt = "[image: ../Art/namecustomview2.gif]">

<p>Next, you need to associate the custom view you placed in
the window with the new NSView subclass. Select the custom view
widget in the main window and bring up the Attributes pane of the
Info window. Select <code>javax.swing.JProgressBar</code>,
as shown in  <a href="#CEGCBHFD">Figure 15-4</a>.</p>
<br><a name = "CEGCBHFD"></a><a name="-632521"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-4 Associate custom view with NSView
subclass</font></b></p> <img src = "../Art/selectnsviewsubclass.gif" alt = "[image: ../Art/selectnsviewsubclass.gif]">

<p>The name in the custom view should then change to the name
of the new class, as shown in  <a href="#CEGFABCA">Figure 15-5</a>.</p>
<br><a name = "CEGFABCA"></a><a name="-632559"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-5 Custom view as NSView subclass</font></b></p>
 <img src = "../Art/customviewnamechange.gif" alt = "[image: ../Art/customviewnamechange.gif]">

<p>Now you need to add an outlet to the interface file's File's
Owner object for the custom view. This gives you programmatic access
to the widget in the nib file's controller class, which allows
you to query and change the widget's attributes. In the Classes
pane of the nib file window, view the class hierarchy vertically
and disclose the list starting with <code>java.lang.Object</code> as
far as you can, as shown in  <a href="#CEGFAAAI">Figure 15-6</a>.</p>
<br><a name = "CEGFAAAI"></a><a name="-631885"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-6 File's Owner's class</font></b></p>
 <img src = "../Art/filesownerclass.gif" alt = "[image: ../Art/filesownerclass.gif]">

<p>Select the last class in the hierarchy and bring up the Info
window. Add an outlet to the class called "customViewOutlet,"
as shown in  <a href="#CEGGHFJE">Figure 15-7</a>.</p>
<br><a name = "CEGGHFJE"></a><a name="-631918"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-7 Add outlet to interface file</font></b></p>
 <img src = "../Art/addoutlet.gif" alt = "[image: ../Art/addoutlet.gif]">

<p>Next, you need to connect the custom view to the outlet you
just created. Switch to the Instances pane of the nib file window
and Control-drag from File's Owner to the custom view in the main
window as shown in  <a href="#CEGFDJFH">Figure 15-8</a>.</p>
<br><a name = "CEGFDJFH"></a><a name="-631958"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-8 Connect new outlet to custom view</font></b></p>
 <img src = "../Art/connectcustomview.gif" alt = "[image: ../Art/connectcustomview.gif]">

<p>Then in the Connections Pane of the Info window, select <code>customViewOutlet</code> and
click Connect. The Connections pane of the Info window for File's
Owner should now appear as shown in  <a href="#CEGGGCHB">Figure 15-9</a>.</p>
<br><a name = "CEGGGCHB"></a><a name="-631981"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
15-9 File's Owner's attributes</font></b></p>
 <img src = "../Art/showinfoafterconnection.gif" alt = "[image: ../Art/showinfoafterconnection.gif]">

<p>Save the interface file and open its controller class (<code>.java</code> file)
in Project Builder. Add an instance variable for the outlet you
added:</p>
<pre>public JProgressBar customViewOutlet;</pre>
<p>You now have a JProgressBar widget in your interface file.
You can set its value by invoking <code>customViewOutlet.setValue(int
value)</code> in the controller class. However, don't attempt
to invoke methods on the widget in the interface controller's
constructors as it may not be initialized at that point. Rather,
override <code>controllerDidLoadArchive</code> as described
in  <a href="../T11ImageViews/iLoading_the_IHIFADB.html" target="_top">"Loading the Image"</a> or check
to see if the component is initialized by invoking <code>isComponentPrepared</code>.</p>

<br>
    <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Task_Using__rface_Files.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="EOImageView.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerBottom --> <br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated May 1, 2002)</font></p><!-- start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->
</body>
</html>

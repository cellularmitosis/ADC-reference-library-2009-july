<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Sound Commands (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Mac OS Sound</I><P>| <A target="doc" HREF="tp_snd33_snd33add.1c.htm">Previous</A> | <A target="doc" HREF="tp_snd33_snd33add.1.htm">Chapter Contents</A> | <A target="doc" HREF="tp_snd33_snd33add.htm">Chapter Top</A> | <A target="doc" HREF="tp_snd33_snd33add.1e.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H1.Heading1"><A NAME="pgfId=18553"> </A><A NAME="32225"> </A><A NAME="_Toc399063845"> </A><A NAME="_Toc399063869"> </A><A NAME="_Toc399063905"> </A><A NAME="_Toc399151777"> </A>Sound Commands</H1><P CLASS="T1.Text1"><A NAME="pgfId=18554"> </A>New sound commands have been added since the release of Sound Manager 3.0. You can use these sound commands with the <TT CLASS="cv">SndDoImmediate</TT> and <TT CLASS="cv">SndDoCommand</TT> functions.</P><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18561"> </A><A NAME="marker=18555"> </A><A NAME="_Toc398643536"> </A><A NAME="_Toc399063846"> </A><A NAME="_Toc399063870"> </A><A NAME="_Toc399063906"> </A><A NAME="_Toc399151778"> </A>clockComponentCmd	</H3><P CLASS="T1.Text1"><A NAME="pgfId=18562"> </A>This command turns the sound clock on or off. Use this command to turn on the sound clock before attempting to use the <TT CLASS="cv">getClockComponentCmd</TT>. Set the value of <TT CLASS="cv">param1</TT> in this command to be <TT CLASS="cv">true</TT> or <TT CLASS="cv">false</TT>, where <TT CLASS="cv">true</TT> turns on the clock.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83939"> </A>SndCommand   &nbsp;&nbsp;&nbsp; cmd;<BR><BR>cmd.cmd = clockComponentCmd;<BR>cmd.param1 = true; // turn the clock on<BR>err = SndDoImmediate(chan, &amp;clockComponentCmd);<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18570"> </A><A NAME="marker=18564"> </A><A NAME="_Toc398643537"> </A><A NAME="_Toc399063847"> </A><A NAME="_Toc399063871"> </A><A NAME="_Toc399063907"> </A><A NAME="_Toc399151779"> </A>getClockComponentCmd</H3><P CLASS="T1.Text1"><A NAME="pgfId=18571"> </A>	This command returns the the sound clock component instance. Set the value of <TT CLASS="cv">param2</TT> to be a pointer to a <TT CLASS="cv">ComponentInstance</TT>.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83943"> </A>SndCommand &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd;<BR>ComponentInstance   clock;<BR><BR>cmd.cmd = getClockComponentCmd;<BR>cmd.param2 = (long)&amp;clock; // get the clock component<BR>err = SndDoImmediate (chan, &amp;getClockComponentCmd);<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18579"> </A><A NAME="marker=18573"> </A><A NAME="_Toc398643538"> </A><A NAME="_Toc399063848"> </A><A NAME="_Toc399063872"> </A><A NAME="_Toc399063908"> </A><A NAME="_Toc399151780"> </A>scheduledSoundCmd</H3><P CLASS="T1.Text1"><A NAME="pgfId=18580"> </A>Use this command with the new <TT CLASS="cv">ScheduledSoundHeader</TT> structure. It is similar to the <TT CLASS="cv">bufferCmd</TT> in that <TT CLASS="cv">param2</TT> contains a pointer to this structure. This command can be used to schedule a sound and/or to install a <TT CLASS="cv">callBackCmd</TT> with this one command. The first field of this structure is a union of one of the three existing <TT CLASS="cv">SoundHeader</TT> types, as used in the <TT CLASS="cv">bufferCmd</TT>. The <TT CLASS="cv">flags</TT> field is used to specify if there is a valid <TT CLASS="cv">TimeRecord</TT> and/or parameters for the <TT CLASS="cv">CallBackProc</TT>.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83947"> </A>/* ScheduledSoundHeader flags*/<BR>enum {<BR>&nbsp;&nbsp;&nbsp;&nbsp;kScheduledSoundDoScheduled = 1 &lt;&lt; 0,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kScheduledSoundDoCallBack = 1 &lt;&lt; 1<BR>};<BR><BR>struct ScheduledSoundHeader {<BR>&nbsp;&nbsp;&nbsp;&nbsp;SoundHeaderUnion   u;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flags;<BR>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reserved;<BR>&nbsp;&nbsp;&nbsp;&nbsp;short&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;callBackParam1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callBackParam2;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TimeRecord&nbsp;&nbsp;startTime;<BR>};<BR></CODE></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18587"> </A><A NAME="marker=18582"> </A><A NAME="_Toc399063849"> </A><A NAME="_Toc399063873"> </A><A NAME="_Toc399063909"> </A><A NAME="_Toc399151781"> </A>linkSoundComponentsCmd</H3><P CLASS="T1.Text1"><A NAME="pgfId=18588"> </A>Use this command to configure the given sound channel's components to support your sound format. By default, a channel will be configured to play 8 bit non-compressed samples. If you wanted to play 16 bit or compressed audio, then you had to start your sound at non-interrupt time so that the proper sound components would be opened and installed. By using this new command you can point to a <TT CLASS="cv">SoundComponentData</TT> structure in <TT CLASS="cv">param2</TT>, and the proper set of sound components will be configured into your channel. At this point you can start a sound playing at interrupt time.</P></DIV><DIV><H3 CLASS="RoH.RoutineHeading"><A NAME="pgfId=18590"> </A><A NAME="marker=18589"> </A>rateMultiplierCmd	</H3><P CLASS="T1.Text1"><A NAME="pgfId=18591"> </A>The <TT CLASS="cv">rateMultiplierCmd</TT> uses a fixed-point value to provide a multiplier to the playback rate of all sounds played on this channel. This allows you to vary the sample rate of the sound being played, and thus control its pitch. The <TT CLASS="cv">getRateMultiplierCmd</TT> returns the current rate multiplier. For example, to play all sounds on a channel shifted up one octave in pitch, you could use the following code:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=83951"> </A>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr RaisePitchOneOctave(SndChannelPtr chan)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SndCommand cmd;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr err;<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.cmd = rateMultiplierCmd;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.param1 = 0;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmd.param2 = 0x00020000; // rate of 2.0<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err = SndDoImmediate(chan, &amp;cmd);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return (err);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR></CODE><BLOCKQUOTE CLASS="DD.DefinitionDefCont"><A NAME="pgfId=18593"> </A>The <TT CLASS="cv">rateMultiplierCmd</TT> is more useful than previous versions of <TT CLASS="cv">rateCmd</TT>, which applied only to the sound currently playing and was based on the sampling rate of the hardware.</BLOCKQUOTE><P></DIV><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Mac OS Sound</I><P>| <A target="doc" HREF="tp_snd33_snd33add.1c.htm">Previous</A> | <A target="doc" HREF="tp_snd33_snd33add.1.htm">Chapter Contents</A> | <A target="doc" HREF="tp_snd33_snd33add.htm">Chapter Top</A> | <A target="doc" HREF="tp_snd33_snd33add.1e.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
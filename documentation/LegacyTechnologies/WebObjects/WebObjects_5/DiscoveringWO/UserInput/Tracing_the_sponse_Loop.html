<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Tracing the Request-ResponseLoop</title>		</HEAD>	<BODY bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="User_Interface.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Conditional_al_Elements.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF105"></a><h2><font face="Lucida Grande,Helvetica,Arial">Tracing the Request-ResponseLoop</font></h2><!-- apple_doc: pageHeadingEnd --><p>Now you'll modify the methods in your Java files to displaya message indicating when they're called, so you can watch thephases of the request-response loop in action.</p><p>Each time the user submits a request, the contents of thetext fields are sent with the request. WebObjects then determinesthe properties to update and the methods to invoke using the WODfile.</p><p>Selecting the options under "Generate source code for"when you added the <code>favoriteFood</code> and <code>personName</code> keysto the Main component caused WebObjects Builder to insert not just twoString variables, but also two methods that are used to update thosevariables (the accessor methods, a getter method and a setter method).If you add Java printing statements to those methods and to the <code>addPerson</code> actionmethod, you can watch them being called during the request partof the request-response loop. If you add the other methods describedin  <a href="Request_Processing.html#BBCJACGH" target = "_right">"Request Processing"</a>,you can watch them being called as you use the application, as well.</p><p>Edit the Session.java, Application.java,and Main.java files to add the <code>awake</code> methodso you can track the processing of the request. You can use theJava <code>System.out.println</code> methodto log text to the console of your application; it is then displayedin the Run pane of Project Builder's main window. Add the methodin  <a href="#BAJFEIID">Listing 5-4</a> toall three files.</p><a name = "BAJFEIID"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing5-4 Tracing the request-response loop&#151;theawake method</font></b></p><pre>public void awake() {    super.awake();    System.out.println(this.getClass().getName() + "'s awake method called");}</pre><p>This method prints the name of the class followed by a notificationthat the <code>awake</code> method wascalled in each class that you put it in. Notice that it calls <code>super.awake</code> toensure that the superclass's <code>awake</code> methodis called before executing its custom logic. </p><p>Edit the <code>setPersonName</code>, <code>setFavoriteFood</code>,and <code>addUser</code> methods in <code>Main.java</code> tolog strings to the console when they are called. Your methods shouldlook like the ones in  <a href="#BAJCDBGH">Listing 5-5</a>.</p><a name = "BAJCDBGH"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing5-5 Tracing the request-response loop&#151;theaccessor and action methods</font></b></p><pre>public void setPersonName(String newPersonName) {    System.out.println("Setting personName to '" + newPersonName + "'");    personName = newPersonName;}public void setFavoriteFood(String newFavoriteFood) {    System.out.println("Setting favoriteFood to '" + newFavoriteFood + "'");    favoriteFood = newFavoriteFood;}public WOComponent addUser() {    System.out.println("The submit button was clicked.");    return null;}</pre><p>Build and run the new application, correcting any errors revealedduring compilation if necessary. </p><br> <img src = "../Art/pbuserinputrun.gif" alt = "[image: ../Art/pbuserinputrun.gif]"><p>Notice that when the page first loads, the <code>awake</code> methodsare called. This is because the request-response loop is run throughthe first time the page is generated. Also notice that your <code>set </code>methodsare not called. This is because at the time of the first requestthe user has not yet filled in any text fields, so the state synchronizationphase does not take place (See  <a href="Request_Processing.html#TPXREF108" target = "_right">"Processing the Request"</a>).</p><p>Fill in the data fields and click Submit.</p><br> <img src = "../Art/userentrytracerequest.gif" alt = "[image: ../Art/userentrytracerequest.gif]"><p>When you click Submit, you'll be able to watch the requestportion of the request-response loop through Project Builder'soutput window as variables are updated.</p><pre>Application:awake method calledSession:awake method calledMain:awake method calledSetting personName to 'Joshua Marker'Setting favoriteFood to 'Sushi'The submit button was clicked.</pre><p>Because of the <code>printLn</code> methodcalls added, you can see that WebObjects calls each <code>awake</code> method,does variable assignment, and then calls the action method you assignedto the submit button. This means that if code in the <code>addUser</code> methodreferred to the <code>favoriteFood</code> or <code>personName</code> variables,the values provided by the user would be available, rather than oldvalues, if any. You can take advantage of this to set other variablesin your component. For example, currently the form fields remainactive even after the user has filled them in. You could make thefields disappear once the necessary data has been entered by checking inthe <code>addUser</code> method tosee if both fields are filled in and setting a Boolean propertyto indicate whether the entry is still incomplete. You could thenuse a WOConditional element to hide some elements of the component.</p><br>    <br><a href="User_Interface.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Conditional_al_Elements.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<hr alt=""><p><font face="Palatino" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
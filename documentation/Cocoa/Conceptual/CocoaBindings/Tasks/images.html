<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Bindings Programming Topics: Displaying Images Using Bindings</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Displaying Images Using Bindings"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20002300" title="Displaying Images Using Bindings"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../index.html" target="_top">Cocoa Bindings Programming Topics</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="masterdetail.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="onerelation.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20002300-BCICADHC" title="Displaying Images Using Bindings"></a><hr /><H1>Displaying Images Using Bindings</H1>

<p>You typically display images using either an NSImageCell or an NSImageView. You might display images in table columns in a master interface, or an image view in a detail interface. Both of these components have similar bindings and therefore are both discussed in this article. When using these components, you also need to make similar decisions about how you want to store and access your images. The value bindings of these components support a variety of formats. You can specify the value binding using an NSImage, a file path or a URL.</p>
<p>The example presented in this article is an extension of those in <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-BCICADHC">“Creating a Master-Detail Interface.”</a></span> Specifically, this article explains how to add an NSImageCell to a table column in the master interface (shown in <span class="content_text">Figure 1</span>) and an NSImageView to the detail interface. This article also contains an example of a custom value transformer that converts image filenames to absolute paths.</p>
<p>See <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-BCICADHC">“Creating a Master-Detail Interface”</a></span> for the steps to create a basic master-detail interface.</p>
<br/><div><a name="//apple_ref/doc/uid/20002300-128082-CJBEJECA" title="Figure 1Using an NSImageCell in an NSTableColumn"></a><p><a name="//apple_ref/doc/uid/20002300-128082" title="Figure 1Using an NSImageCell in an NSTableColumn"></a><strong>Figure 1&nbsp;&nbsp;</strong>Using an NSImageCell in an NSTableColumn</p>
<img src = "../art/im_imagecell.gif" alt = "" width="395" height="179"></div><br/>

<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="images.html#//apple_ref/doc/uid/20002300-125295">Creating Models</a>
				
			<br/>
			
        
			
			
				<a href="images.html#//apple_ref/doc/uid/20002300-125207">Creating Views</a>
				
			<br/>
			
        
			
			
				<a href="images.html#//apple_ref/doc/uid/20002300-125686">Creating Controllers</a>
				
			<br/>
			
        
			
			
				<a href="images.html#//apple_ref/doc/uid/20002300-125315">Binding Views to Controllers</a>
				
			<br/>
			
        
			
			
				<a href="images.html#//apple_ref/doc/uid/20002300-126126-BBCJFBGE">Using a Value Transformer to Convert Paths</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20002300-125295" title="Creating Models"></a><h2>Creating Models</h2>
<p>How you define image properties in your models depends on your application—it depends on how you want to store and access the images. If the images are stored on disk or in your project folder on the same computer, then you can access them via a file path. If the images are stored not on disk but on a remote server, then you can access them via a URL. If the images are stored in some data source, then you might load the images directly into memory. If you load them, you might define your image properties as simply NSImage objects. Fortunately, Cocoa bindings supports all these options.</p>
<p>In this example, the model uses an NSImage to represent the <code>image</code> property of a Media object as shown in <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-120169-BBCJDJCG">Figure 2</a></span> in <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-BCICADHC">“Creating a Master-Detail Interface.”</a></span></p>
<p>In the case of a file path or URL, you typically store only the filename in the model not the absolute path or URL (for example, you don’t want to update your models every time you move the image folder). However, the bindings expect an absolute path or URL. One solution is to implement a custom value transformer that takes an image filename and returns a file path or URL based on some variables you define. See <span class="content_text"><a href="images.html#//apple_ref/doc/uid/20002300-126126">“Using a Value Transformer to Convert Paths”</a></span> to modify this example to use file paths instead of NSImage objects.</p>
<a name="//apple_ref/doc/uid/20002300-125207" title="Creating Views"></a><h2>Creating Views</h2>
<p>Next, you create the image views by either dragging an NSImageView to a window or an NSImageCell to the column that will display the images.</p>
<a name="//apple_ref/doc/uid/20002300-125686" title="Creating Controllers"></a><h2>Creating Controllers</h2>
<p>This example assumes you already have a working master-detail interface. Follow the steps in <span class="content_text"><a href="masterdetail.html#//apple_ref/doc/uid/20002090-119467">“Creating Controllers”</a></span> in <span class="content_text">“Creating a Master-Detail Interface”</span> if you need to create an array controller.</p>
<a name="//apple_ref/doc/uid/20002300-125315" title="Binding Views to Controllers"></a><h2>Binding Views to Controllers</h2>
<p>Next, you bind the image views to the controllers. A subset of the value bindings of an NSImageView and an NSTableColumn (containing an NSImageCell) to choose from are:</p>
<ul class="ul"><li class="li"><p><code>value</code>—an NSImage object.</p></li>
<li class="li"><p><code>valuePath</code>—an absolute path to the image file.</p></li>
<li class="li"><p><code>valueURL</code>—a URL that returns the image file.</p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/20002300-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;When using an NSImageCell in a table column, you need to configure the bindings of the table column, not the cell. When you drag an NSImageCell to a column, the Value category on the NSTableColumn Bindings pane changes to reveal additional value bindings (displays the same value bindings as an NSImageView). </p></div>
<p>For example, you configure the <code>value</code> binding for the Image table column in <span class="content_text"><a href="images.html#//apple_ref/doc/uid/20002300-128082-CJBEJECA">Figure 1</a></span> as follows:</p>
<ol class="ol"><li class="li"><p>Set <code>Bind to</code> to your array controller object. For example, <code>MediaAssetsController</code>. </p></li>
<li class="li"><p>Set <code>Controller Key</code> to <code>arrangedObjects</code> (the collection of objects being displayed).</p></li>
<li class="li"><p>Set <code>Model Key Path</code> to the NSImage property to display in that column. For example, in the media asset application, set the key path to <code>image</code>.</p></li></ol>
<p>You configure the <code>value</code> binding for the NSImageView in the detail interface similarly, except that you set the <code>Controller Key</code> value to <code>selection</code> (that is, the currently selected object).</p>
<p>See <span class="content_text"><a href="images.html#//apple_ref/doc/uid/20002300-126126">“Using a Value Transformer to Convert Paths”</a></span> for a variation of this example that uses the <code>valuePath</code> binding.</p>
<a name="//apple_ref/doc/uid/20002300-126126" title="Using a Value Transformer to Convert Paths"></a><a name="//apple_ref/doc/uid/20002300-126126-BBCJFBGE" title="Using a Value Transformer to Convert Paths"></a><h2>Using a Value Transformer to Convert Paths</h2>
<p>If you want to access your images using a file path, then you bind your views to your controllers using the <code>valuePath</code> binding instead. However, <code>valuePath</code> is expected to be an absolute file path. Typically, you do not store absolute paths in your models, just filenames or relative paths. You can convert a filename or relative path to an absolute path using a custom value transformer as follows.</p>
<a name="//apple_ref/doc/uid/20002300-127329" title="Creating Custom Value Transformers"></a><a name="//apple_ref/doc/uid/20002300-127329-BBCIGEBB" title="Creating Custom Value Transformers"></a><h3>Creating Custom Value Transformers</h3>
<p>First create a custom value transformer that takes the filename or relative path and converts it to an absolute path. You do this by subclassing NSValueTransformer and overriding the <code>transformedValueClass</code> and <code>allowsReverseTransformation</code> class methods, as shown in <span class="content_text"><a href="images.html#//apple_ref/doc/uid/20002300-127409-BBCHAACI">Listing 1</a></span>.</p>
<p>You implement the <code>transformedValue:</code> method to perform the transformation. For example, the <code>transformedValue:</code> method implementation in <span class="content_text">Listing 1</span> assumes the images are located in the project <code>Resources</code> folder and uses NSBundle’s <code>resourcePath:</code> method to convert the filename to an absolute path. Note that you need to modify this example if you store the images somewhere else on the file system. </p>
<a name="//apple_ref/doc/uid/20002300-127409-BBCHAACI" title="Listing 1PathTransformer implementation file"></a><p class="codesample"><a name="//apple_ref/doc/uid/20002300-127409" title="Listing 1PathTransformer implementation file"></a><strong>Listing 1&nbsp;&nbsp;</strong>PathTransformer implementation file</p>
<div class="codesample"><table><tr><td scope="row"><pre>#import "PathTransformer.h"<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@implementation PathTransformer<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>+ (Class)transformedValueClass<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    return [NSString self];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>+ (BOOL)allowsReverseTransformation<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    return NO;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (id)transformedValue:(id)beforeObject<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (beforeObject == nil) return nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    id resourcePath = [[NSBundle mainBundle] resourcePath];<span></span></pre></td></tr><tr><td scope="row"><pre>    return [resourcePath stringByAppendingPathComponent:beforeObject];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/20002300-127537" title="Registering Value Transformers"></a><h3>Registering Value Transformers</h3>
<p>In order to use your custom value transformer, you must first register it with NSValueTransformer. Note that you register instances of a value transformer, not a subclass. You typically register value transformers in an <code>initialize</code> method or the application delegate’s <code>applicationDidFinishLaunching:</code> method. When you register a value transformer, you give it a logical name you can use later when configuring a bindings. For example, add the following code fragment to <code>applicationDidFinishLaunching:</code> to register an instance called <code>PathTransformer</code>:</p>
<div class="codesample"><table><tr><td scope="row"><pre>id transformer = [[[PathTransformer alloc] init] autorelease];<span></span></pre></td></tr><tr><td scope="row"><pre>[NSValueTransformer setValueTransformer:transformer forName:@"PathTransformer"];<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/20002300-127590" title="Binding Views to Controllers Using Transformers"></a><h3>Binding Views to Controllers Using Transformers</h3>
<p>Finally, you specify the value transformer when binding your views to your controllers using the <code>valuePath</code> binding. For example, you configure the <code>valuePath</code> binding for the Image table column as follows:</p>
<ol class="ol"><li class="li"><p>Set the <code>Bind to</code> aspect to your array controller object—for example, <code>MediaAssetsController</code>. </p></li>
<li class="li"><p>Set the <code>Controller Key</code> aspect to <code>arrangedObjects</code> (the collection of objects being displayed).</p></li>
<li class="li"><p>Set the <code>Model Key Path</code> aspect to the property containing the image filename. For example, in the media asset application, set the key path to <code>imagePath</code>.</p></li>
<li class="li"><p>Enter the transformer’s logical name, <code>PathTransformer</code> , in the Value Transformer text field.</p></li></ol>
<p><span class="content_text">Figure 2</span> shows the Bindings pane of an NSTableColumn in Interface Builder with the <code>valuePath</code> binding revealed and configured to use a custom value transformer.</p>
<br/><div><a name="//apple_ref/doc/uid/20002300-135735-BBCHDGEH" title="Figure 2Bindings pane of an NSTableColumn"></a><p><a name="//apple_ref/doc/uid/20002300-135735" title="Figure 2Bindings pane of an NSTableColumn"></a><strong>Figure 2&nbsp;&nbsp;</strong>Bindings pane of an NSTableColumn</p>
<img src = "../art/im_tcol_bpane.gif" alt = "" width="258" height="345"></div><br/>
<p>To use the <code>valueURL</code> binding instead, implement a similar value transformer to convert filenames or relative paths to an appropriate NSURL object. Optionally, you can enhance the PathTransformer class to handle other types of filename transformations. In the latter case, register different instances using different names (for example, <code>PathTransformer</code> and <code>URLTransformer</code>) to handle each type of transformation.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="masterdetail.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="onerelation.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-03-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/CocoaBindings/Tasks/images.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/CocoaBindings/Tasks/images.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/CocoaBindings/Tasks/images.html%3Fid%3D10000167i-5.7&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

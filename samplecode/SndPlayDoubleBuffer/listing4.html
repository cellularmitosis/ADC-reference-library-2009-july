<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>SndPlayDoubleBuffer - /_headers/DoubleBufferFromFile.h</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; <A HREF="javascript:location.replace('index.html');">SndPlayDoubleBuffer</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">SndPlayDoubleBuffer</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/_headers/DoubleBufferFromFile.h</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/_headers/DBFF.h</option>
<option value="listing2.html">/_headers/DBFF_Errors.h</option>
<option value="listing3.html">/_headers/Defines.h</option>
<option value="listing4.html">/_headers/DoubleBufferFromFile.h</option>
<option value="listing5.html">/_headers/Interrupt_Routines.h</option>
<option value="listing6.html">/_headers/LDandFix.h</option>
<option value="listing7.html">/_headers/MungeBuffer.h</option>
<option value="listing8.html">/_headers/MyAIFF.h</option>
<option value="listing9.html">/_headers/MyGestalt.h</option>
<option value="listing10.html">/_headers/Private_DBFFFunctions.h</option>
<option value="listing11.html">/_headers/ReadResource.h</option>
<option value="listing12.html">/_headers/SetupDBHeader.h</option>
<option value="listing13.html">/_headers/SimpleApp_Sound.h</option>
<option value="listing14.html">/_headers/SND.h</option>
<option value="listing15.html">/_headers/SoundStruct.h</option>
<option value="listing16.html">/_headers/ULAW.h</option>
<option value="listing17.html">/_headers/WAVE.h</option>
<option value="listing18.html">/_source/AIFF.c</option>
<option value="listing19.html">/_source/DoubleBufferFromFile.c</option>
<option value="listing20.html">/_source/Interrupt_Routines.c</option>
<option value="listing21.html">/_source/LDandFix.c</option>
<option value="listing22.html">/_source/MungeBuffer.c</option>
<option value="listing23.html">/_source/MyGestalt.c</option>
<option value="listing24.html">/_source/Private_DBFFFunctions.c</option>
<option value="listing25.html">/_source/ReadResource.c</option>
<option value="listing26.html">/_source/SetupDBHeader.c</option>
<option value="listing27.html">/_source/SimpleApp_Sound.c</option>
<option value="listing28.html">/_source/SND.c</option>
<option value="listing29.html">/_source/ULAW.c</option>
<option value="listing30.html">/_source/WAVE.c</option>
<option value="listing31.html">/SAL Æ’/SAL_Public.h</option></select>
				</p>
				</form>
				<p><strong><a href="SndPlayDoubleBuffer.zip">Download Sample</a></strong> (&#147;SndPlayDoubleBuffer.zip&#148;, 185.7K)<BR>
<strong><a href="SndPlayDoubleBuffer.dmg">Download Sample</a></strong> (&#147;SndPlayDoubleBuffer.dmg&#148;, 253.5K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    DoubleBufferFromFile.h  Contains:  Headers for routines demonstrating how to play sound from disk using SndPlayDoubleBuffer.  Written by: Mark Cookson    Copyright:  Copyright &copy; 1996-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        8/31/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1        */#ifndef __DOUBLEBUFFERFROMFILE__#define __DOUBLEBUFFERFROMFILE__#include &lt;AIFF.h&gt;#include &lt;Sound.h&gt;#include &lt;Files.h&gt;#include &lt;MixedMode.h&gt;#include &lt;StandardFile.h&gt;#include &lt;Fonts.h&gt;#include &lt;SegLoad.h&gt;#include &lt;Resources.h&gt;#include &lt;FixMath.h&gt;#if GENERATINGPOWERPC#include &lt;fp.h&gt;#endif#ifndef __SOUNDSTRUCT__#include &quot;SoundStruct.h&quot;#endif#ifndef __MYGESTALT__#include &quot;MyGestalt.h&quot;#endif#ifndef __PRIVATE_DBFFFUNC__#include &quot;Private_DBFFFunctions.h&quot;#endif#ifndef __INTERRUPT_ROUTINES__#include &quot;Interrupt_Routines.h&quot;#endif#ifndef __DBFFERRORS__#include &quot;DBFF_Errors.h&quot;#endif#ifndef __DEFINES__#include &quot;Defines.h&quot;#endif/* Function definitions *//*  Purpose:    This creates a new SoundInfo structure and initializes          it by calling ASoundInit.  Side Effects:  None.*//*-----------------------------------------------------------------------*/SoundInfoPtr  ASoundNew        (OSErr *theErr);/*-----------------------------------------------------------------------*//*  Purpose:    Display a StandardFile dialog to select an AIFF file.          Open the file selected by the user.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundGetFileToPlay    (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Checks a file to see if its header can be parsed          and the file can be played.                    This will return an error if the sound will not play,          returning noErr means that sound will play.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundCanThisPlay    (CInfoPBPtr theFileInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Wrapper function called to get ready to play a sound.          Use this if you want to make sure that there is enough          memory to play the sound.  Side Effects:  This will call routines that will allocate memory needed          to all of the various structures needed by the Sound Manager          and memory to be used as the sounds' buffers.*//*-----------------------------------------------------------------------*/OSErr      ASoundReadyForPlaying  (SoundInfoPtr theSoundInfo,                    unsigned long bufferSize);/*-----------------------------------------------------------------------*//*  Purpose:    Call this after you have called ASoundReadyForPlaying to          start playing the sound you prepaired.  Side Effects:  Starts the sound playing.*//*-----------------------------------------------------------------------*/OSErr      ASoundPlay        (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Wrapper function called to start playing a sound.          Use this if you are pretty sure the sound will play, or          just don't care specifically what goes wrong.  Side Effects:  This will call routines that will allocate memory needed          to all of the various structures needed by the Sound Manager          and memory to be used as the sounds' buffers.*//*-----------------------------------------------------------------------*/OSErr      ASoundStartPlaying    (SoundInfoPtr theSoundInfo,                    unsigned long bufferSize);/*-----------------------------------------------------------------------*//*  Purpose:    Stops the currently playing sound.  Side Effects:  Stopping the currently playing sound will cause the          sound completion routine to run.*//*-----------------------------------------------------------------------*/OSErr      ASoundStop        (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Wrapper so the user doesn't have to keep track of if          the sound is playing or not.  Side Effects:  If resuming a sound and the user had also called          ASoundPauseForAdjust this will reinstall the sound          completion callback.*//*-----------------------------------------------------------------------*/OSErr      ASoundPause        (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    If the sound is paused, resume playing.  If the sound is          playing, pause playing.          This differs from ASoundPause because it actually stops          the sound instead of pausing it.  When the sound is          paused for adjusting you can reset where the sound will          next start playing from without having to play the          remainder of the current buffer.  This routine is used          for the QuickTime style playing.  Side Effects:  Removes the callback from the sound channel because          otherwise while adjusting the sound the Sound Manager          would call our clean up routine.          When resuming a sound ASoundStartPlaying will install          our callback routine if necessary (if the sound wasn't          already paused).*//*-----------------------------------------------------------------------*/OSErr      ASoundPauseForAdjust  (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Sound is done playing, dispose of the memory we no          longer need.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundDonePlaying    (SoundInfoPtr theSoundInfo,                    unsigned long options);/*-----------------------------------------------------------------------*//*  Purpose:    Returns the channel for the sound in case you want to          send it specific commands.  Side Effects:  None.*//*-----------------------------------------------------------------------*/SndChannelPtr  ASoundGetChan      (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Returns the name of the file containing the currently          playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundGetSoundName    (SoundInfoPtr theSoundInfo,                    Str255 theName);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the number of the current buffer          (in the range 1 to ASoundGetNumBuffers()) of the          currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/long      ASoundGetCurBuffer    (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Sets which buffer should be the next buffer to play          from (in the range 1 to ASoundGetNumBuffers())          for the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundSetCurBuffer    (SoundInfoPtr theSoundInfo,                    long newValue);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the number of buffers that the currently playing          sound will need to play in its entirety.  Side Effects:  None.*//*-----------------------------------------------------------------------*/long      ASoundGetNumBuffers    (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the length (in bytes) of the currently playing          sound.  This number does not include any header bytes.  Side Effects:  None.*//*-----------------------------------------------------------------------*/long      ASoundGetNumTotalBytes  (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the number of bytes that will be played by the end          of the current buffer of the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/long      ASoundGetBytesCopied  (SoundInfoPtr theSoundInfo);/*  Purpose:    Sets the location in the file where the next buffer          should be filled from for the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundSetBytesCopied  (SoundInfoPtr theSoundInfo,                    long newValue);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the size of a buffer of the currently playing          sound.  Multiply by two to know how much memory is          reserved for buffering the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/long      ASoundGetBufferSize    (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the UPP for the function that should be called when          the currently playing sound finishes.  Side Effects:  None.*//*-----------------------------------------------------------------------*/SndCallBackUPP  ASoundGetSoundCallBack  (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Sets the function that should be called when the the          currently playing sound finishes.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundSetSoundCallBack  (SoundInfoPtr theSoundInfo,                    void* newValue);/*-----------------------------------------------------------------------*/OSErr      ASoundMute        (SoundInfoPtr theSoundInfo,                    Boolean newValue);Boolean      ASoundIsMute      (SoundInfoPtr theSoundInfo);/*  Purpose:    Says to play the currently playing sound backwards          (reverses the sound in the buffer).  Side Effects:  Takes effect when the next sound buffer gets filled.*//*-----------------------------------------------------------------------*/OSErr      ASoundPlayBackwards    (SoundInfoPtr theSoundInfo,                    Boolean newValue);/*-----------------------------------------------------------------------*//*  Purpose:    Returns true if the currently playing sound's buffer          is set to be reversed.  Side Effects:  None.*//*-----------------------------------------------------------------------*/Boolean      ASoundIsBackwards    (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Returns true if the sound has finished playing.  Side Effects:  None.*//*-----------------------------------------------------------------------*/Boolean      ASoundIsDone      (SoundInfoPtr theSoundInfo);/*-----------------------------------------------------------------------*//*  Purpose:    Changes the volume of the currently playing sound.          The values you pass in are added to the current values.          Negitive values will decrease the volume, positive values          will increase the volume.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundChangeVolume    (SoundInfoPtr theSoundInfo,                    unsigned short leftVol,                    unsigned short rightVol);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the volume of the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundGetVolume      (SoundInfoPtr theSoundInfo,                    unsigned short *leftVol,                    unsigned short *rightVol);/*-----------------------------------------------------------------------*//*  Purpose:    Sets the volume of the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundSetVolume      (SoundInfoPtr theSoundInfo,                    unsigned short leftVol,                    unsigned short rightVol);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the rate multiplier of the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundGetRateMul    (SoundInfoPtr theSoundInfo,                    UnsignedFixed *theRateMul);/*-----------------------------------------------------------------------*//*  Purpose:    Gets the rate multiplier of the currently playing sound.  Side Effects:  None.*//*-----------------------------------------------------------------------*/OSErr      ASoundSetRateMul    (SoundInfoPtr theSoundInfo,                    UnsignedFixed theRateMul);/*-----------------------------------------------------------------------*/#endif</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/SndPlayDoubleBuffer/listing4.html%3Fid%3DDTS10000371-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/SndPlayDoubleBuffer/listing4.html%3Fid%3DDTS10000371-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/SndPlayDoubleBuffer/listing4.html%3Fid%3DDTS10000371-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
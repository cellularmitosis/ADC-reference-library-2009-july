<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Memory Services Used During I/O Operations</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.144.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.147.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.149.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=3415"> </A><A NAME="38163"> </A>Memory Services Used During I/O Operations</H1><P CLASS="T1.Text1"><A NAME="pgfId=3416"> </A>The DSL provides two routines that help drivers coordinate I/O software with system memory:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=3417"> </A>The <TT CLASS="cv">PrepareMemoryForIO</TT> function tells Mac&nbsp;OS that a particular buffer will be used for I/O transfers. It checks memory protection, assigns physical memory to the buffer, provides addressing information, and prepares the processor's caches for the transfer. </LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=3418"> </A>The <TT CLASS="cv">CheckpointIO</TT> function tells the operating system that the previously started transfer is complete. It assures processor cache coherency and either prepares for further transfers or, if its parameters specify that no more transfers will be made, deallocates the resources associated with the buffer preparation. Once the preparation's resources have been deallocated, subsequent I/O operations with the buffer must be preceded by another call to <TT CLASS="cv">PrepareMemoryForIO</TT>.</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=3421"> </A>The memory coordination that these routines provide is summarized in <A HREF="PCI_BOOK.146.html#35563" CLASS="XRef">I/O Operations and Memory</A>.</P><DIV><blockquote><p CLASS="WarningHead"><b><A NAME="pgfId=18595"> </A>WARNING</b></p><P CLASS="W.Warning"><A NAME="pgfId=3423"> </A>Failure to use these I/O related services properly can result in data corruption or fatal system errors. Correct system behavior is the responsibility of the operating system and all I/O components including hardware, drivers, and other software. </P></blockquote></DIV><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.144.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.147.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.149.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
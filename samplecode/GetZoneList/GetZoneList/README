MacintoshSample Code Notes_____________________________________________________________________________                                                  Developer Technical Support#11:    GetZoneListWritten by:    Mark Bennett & Pete HelmeVersions:		1.00				November 1988				1.01				October 1989				1.02				May 1990				1.03				June 1992				1.04				July 1992Components:		GetZoneList.c		May 1, 1990				GetZoneList.p		May 1, 1990				GetZoneList.r		May 1, 1990				Makefile			May 1, 1990Required:		UFailure.a			November 1, 1988				UFailure.h			November 1, 1988				UFailure.incl.p		November 1, 1988				UFailure.p			November 1, 1988_____________________________________________________________________________This program needs MPW 3.2 or greater to build. It also requires that youcopy the necessary files from the UFailure UNIT (originally distributed aspart of SC.012.Signals) to the GetZoneList folder._____________________________________________________________________________GetZoneList is a sample application that uses AppleTalk's AppleTalkTransaction Protocol (ATP) and Zone Information Protocol (ZIP) to obtain alist of zones on an AppleTalk internet.  It also demonstrates using a signal,or failure-catching mechanism, to recover from error situations.GetZoneList is based on Sample, and DTS recommends that you review Sample orTESample for the general structure and MultiFinder techniques you should usewhen writing a new application.Changes for Version 1.02________________________A node exists on a valid internet if, and only if, 1) GetBridgeAddressreturns a non-zero router address and 2) GetNodeAddress returns a non-zeronetwork number.  If there is a valid network number, but no router, onecannot obtain zone information, and there cannot be a internet.  Theprevious version of GetZoneList only checked GetNodeAddress, which couldshow a non-zero network number in the presence of a half router.  Thiscurrent version now makes the appropriate check in the procedureBuildZoneList.Changes were also made to support AppleTalk Phase 2 in accordance withTechnical Note #250, "AppleTalk Phase 2 on the Macintosh."  See proceduresZoneListCleanUpPhase2 and BuildZoneListPhase2.Changes for Version 1.03________________________Since the MPW 3.2 AppleTalk.h header file contains AppleTalk Phase 2 datastuctures, the typedefs were removed and the header file types were used.Changes for Version 1.04________________________With the introduction of AppleTalk Remote Access, one can be on networkzero and be connected to a remote network.  GetZoneList now looks only atthe result of GetBridgeAddress() to determine if an internet is attached.See Macintosh Technical Note #311: "What's New With AppleTalk Phase 2"for more details.
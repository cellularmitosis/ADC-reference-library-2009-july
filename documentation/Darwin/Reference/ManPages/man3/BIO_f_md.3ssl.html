<html><head><title>Mac OS X Developer Tools
 Manual Page For BIO_f_md(3ssl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3ssl/BIO_f_md" title="Mac OS X Developer Tools
 Manual Page for BIO_f_md(3ssl)"><a name="//apple_ref/doc/man/3/BIO_f_md" title="Mac OS X Developer Tools
 Manual Page for BIO_f_md(3ssl)"><!-- headerDoc=man; indexgroup=Section 3ssl; uid="//apple_ref/doc/man/3ssl/BIO_f_md"; name=BIO_f_md(3ssl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
BIO_f_md(3)                                        OpenSSL                                       BIO_f_md(3)



<b>NAME</b>
       BIO_f_md, BIO_set_md, BIO_get_md, BIO_get_md_ctx - message digest BIO filter

<b>SYNOPSIS</b>
        #include &lt;openssl/bio.h&gt;
        #include &lt;openssl/evp.h&gt;

        BIO_METHOD *   BIO_f_md(void);
        int BIO_set_md(BIO *b,EVP_MD *md);
        int BIO_get_md(BIO *b,EVP_MD **mdp);
        int BIO_get_md_ctx(BIO *b,EVP_MD_CTX **mdcp);

<b>DESCRIPTION</b>
       <u>BIO</u><b>_</b><u>f</u><b>_</b><u>md()</u> returns the message digest BIO method. This is a filter BIO that digests any data passed
       through it, it is a BIO wrapper for the digest routines <u>EVP</u><b>_</b><u>DigestInit()</u>, <u>EVP</u><b>_</b><u>DigestUpdate()</u> and
       <u>EVP</u><b>_</b><u>DigestFinal()</u>.

       Any data written or read through a digest BIO using <u>BIO</u><b>_</b><u>read()</u> and <u>BIO</u><b>_</b><u>write()</u> is digested.

       <u>BIO</u><b>_</b><u>gets()</u>, if its <b>size</b> parameter is large enough finishes the digest calculation and returns the
       digest value. <u>BIO</u><b>_</b><u>puts()</u> is not supported.

       <u>BIO</u><b>_</b><u>reset()</u> reinitialises a digest BIO.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>md()</u> sets the message digest of BIO <b>b</b> to <b>md</b>: this must be called to initialize a digest BIO
       before any data is passed through it. It is a <u>BIO</u><b>_</b><u>ctrl()</u> macro.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>md()</u> places the a pointer to the digest BIOs digest method in <b>mdp</b>, it is a <u>BIO</u><b>_</b><u>ctrl()</u> macro.

       <u>BIO</u><b>_</b><u>get</u><b>_</b><u>md</u><b>_</b><u>ctx()</u> returns the digest BIOs context into <b>mdcp</b>.

<b>NOTES</b>
       The context returned by <u>BIO</u><b>_</b><u>get</u><b>_</b><u>md</u><b>_</b><u>ctx()</u> can be used in calls to <u>EVP</u><b>_</b><u>DigestFinal()</u> and also the
       signature routines <u>EVP</u><b>_</b><u>SignFinal()</u> and <u>EVP</u><b>_</b><u>VerifyFinal()</u>.

       The context returned by <u>BIO</u><b>_</b><u>get</u><b>_</b><u>md</u><b>_</b><u>ctx()</u> is an internal context structure. Changes made to this
       context will affect the digest BIO itself and the context pointer will become invalid when the digest
       BIO is freed.

       After the digest has been retrieved from a digest BIO it must be reinitialized by calling
       <u>BIO</u><b>_</b><u>reset()</u>, or <u>BIO</u><b>_</b><u>set</u><b>_</b><u>md()</u> before any more data is passed through it.

       If an application needs to call <u>BIO</u><b>_</b><u>gets()</u> or <u>BIO</u><b>_</b><u>puts()</u> through a chain containing digest BIOs then
       this can be done by prepending a buffering BIO.

<b>RETURN</b> <b>VALUES</b>
       <u>BIO</u><b>_</b><u>f</u><b>_</b><u>md()</u> returns the digest BIO method.

       <u>BIO</u><b>_</b><u>set</u><b>_</b><u>md()</u>, <u>BIO</u><b>_</b><u>get</u><b>_</b><u>md()</u> and <u>BIO</u><b>_</b><u>md</u><b>_</b><u>ctx()</u> return 1 for success and 0 for failure.

<b>EXAMPLES</b>
       The following example creates a BIO chain containing an SHA1 and MD5 digest BIO and passes the string
       "Hello World" through it. Error checking has been omitted for clarity.

        BIO *bio, *mdtmp;
        char message[] = "Hello World";
        bio = BIO_new(BIO_s_null());
        mdtmp = BIO_new(BIO_f_md());
        BIO_set_md(mdtmp, EVP_sha1());
        /* For BIO_push() we want to append the sink BIO and keep a note of
         * the start of the chain.
         */
        bio = BIO_push(mdtmp, bio);
        mdtmp = BIO_new(BIO_f_md());
        BIO_set_md(mdtmp, EVP_md5());
        bio = BIO_push(mdtmp, bio);
        /* Note: mdtmp can now be discarded */
        BIO_write(bio, message, strlen(message));

       The next example digests data by reading through a chain instead:

        BIO *bio, *mdtmp;
        char buf[1024];
        int rdlen;
        bio = BIO_new_file(file, "rb");
        mdtmp = BIO_new(BIO_f_md());
        BIO_set_md(mdtmp, EVP_sha1());
        bio = BIO_push(mdtmp, bio);
        mdtmp = BIO_new(BIO_f_md());
        BIO_set_md(mdtmp, EVP_md5());
        bio = BIO_push(mdtmp, bio);
        do {
               rdlen = BIO_read(bio, buf, sizeof(buf));
               /* Might want to do something with the data here */
        } while(rdlen &gt; 0);

       This next example retrieves the message digests from a BIO chain and outputs them. This could be used
       with the examples above.

        BIO *mdtmp;
        unsigned char mdbuf[EVP_MAX_MD_SIZE];
        int mdlen;
        int i;
        mdtmp = bio;   /* Assume bio has previously been set up */
        do {
               EVP_MD *md;
               mdtmp = BIO_find_type(mdtmp, BIO_TYPE_MD);
               if(!mdtmp) break;
               BIO_get_md(mdtmp, &amp;md);
               printf("%s digest", OBJ_nid2sn(EVP_MD_type(md)));
               mdlen = BIO_gets(mdtmp, mdbuf, EVP_MAX_MD_SIZE);
               for(i = 0; i &lt; mdlen; i++) printf(":%02X", mdbuf[i]);
               printf("\n");
               mdtmp = BIO_next(mdtmp);
        } while(mdtmp);

        BIO_free_all(bio);

<b>BUGS</b>
       The lack of support for <u>BIO</u><b>_</b><u>puts()</u> and the non standard behaviour of <u>BIO</u><b>_</b><u>gets()</u> could be regarded as
       anomalous. It could be argued that <u>BIO</u><b>_</b><u>gets()</u> and <u>BIO</u><b>_</b><u>puts()</u> should be passed to the next BIO in the
       chain and digest the data passed through and that digests should be retrieved using a separate
       <u>BIO</u><b>_</b><u>ctrl()</u> call.

<b>SEE</b> <b>ALSO</b>
       TBA



0.9.7l                                           2001-09-06                                      BIO_f_md(3)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/BIO_f_md.3ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/BIO_f_md.3ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/BIO_f_md.3ssl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

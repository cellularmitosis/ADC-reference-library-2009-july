<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Custom Objects</title>		</HEAD>	<BODY bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>&gt;</b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Component_Communication.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Defining_a_New_Component.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "BBCEJIFE"></a><h2><font face="Lucida Grande,Helvetica,Arial">Custom Objects</font></h2><!-- apple_doc: pageHeadingEnd --><p>Right now, you're storing the name and food informationin variables of the Main component, abandoning the benefits of anobject-oriented system. </p><p>In the case that you wanted to pass the information the userenters to other components, you'd have pass both values. If youhad more information about a particular person, you'd have topass each datum separately. It would be much more convenient toencapsulate all the information about a user into one object andpass that from component to component. Since WebObjects is fullyobject-oriented, you can define a custom object to contain the user-entereddata.</p><p>For now, you'll just encapsulate the same data into an object.Later, though, this kind of encapsulation is exactly what will allowyou to use a database as your persistent data storage system.</p><p>Once you've defined the User class with the appropriateproperties, you'll add a variable of type User to the Main componentand modify the WOTextFields on <code>Main.wo</code> touse that variable's properties instead of the <code>personName</code> and <code>favoriteFood</code> instancevariables.</p><br><a name = "TPXREF102"></a><h3><font face="Lucida Grande,Helvetica,Arial">Duplicating the UserEntry Project</font></h3><p>Before proceeding with the custom class example, you shouldcreate a copy of the UserEntry project.</p><ol><li>Duplicatethe <tt>UserEntry</tt> directory and name it <tt>UserEntryCustomObject</tt>.</font></li><li>Rename the <code>UserEntry.pbproj</code> fileinside the <tt>UserEntryCustomObject</tt> directoryto <code>UserEntryCustomObject.pbproj</code>.</font></li><li>Open the UserEntryCustomObject project in Project Builder.</font></li><li>Rename the UserEntry target to UserEntryCustomObject.<ol><li>Click the Targetstab.</font></li><li>Select the UserEntry target in the Targets list.</font></li><li>Choose Project &gt; Rename.</font></li><li>Replace UserEntry with UserEntryCustomObject.</font></li><li>Click the Files tab.</font></li></ol></font></li><li>Choose Build &gt; Clean.</font></li></ol><br><a name = "BBCBDCEG"></a><h3><font face="Lucida Grande,Helvetica,Arial">Adding the Custom Class</font></h3><p>In this section you'll create the custom class User.java andadd it to your project.</p><ol><li>Make surethe UserEntryCustomObject project is open in Project Builder.</font></li><li>Select the group and target for the new file.<ol><li>Select Classes inthe Groups & Files list.</font></li><li>Choose Application Server from the target menu, located onthe toolbar.<br> <img src = "../Art/pbaddcustomclassprep.gif" alt = "[image: ../Art/pbaddcustomclassprep.gif]"></font></li></ol></font></li><li>Add the class file.<ol><li>Choose File &gt; NewFile.<br> <img src = "../Art/pbaddcustomclass.gif" alt = "[image: ../Art/pbaddcustomclass.gif]"></font></li><li>Under WebObjects, select Java Class and click Next.</font></li><li>Enter <code>User.java</code> inthe File Name text field and click Finish.<br> <img src = "../Art/pbaddedcustomclass.gif" alt = "[image: ../Art/pbaddedcustomclass.gif]"></font></li></ol></font></li><li>Move the variables and methods relating to the person nameand favorite food properties from <code>Main.java</code> tothe new class.<p>Select the <code>personName</code> and <code>favoriteFood</code> variables,as well as their accessor methods, from <code>Main.java</code> andchoose Cut on the Edit menu. Then paste them into the <code>User.java</code> file.</p></font></li><li>Save <code>Main.java</code> and <code>User.java</code>.</font></li><li>Add a variable of type User to the Main component.<ol><li>Open the Main componentin WebObjects Builder.</font></li><li>Choose Add Key from the Edit Source menu.</font></li><li>Name the variable <code>user</code> andchoose User from the Type pop-up menu. Do not include accessor methods.</font></li></ol></font></li><li>Instantiate the <code>user</code> variablein the Main class.<p>You need to create a User object in theMain component. Make the constructor method of the Main class looklike  <a href="#BCIBAHHJ">Listing 6-1</a>.</p><a name = "BCIBAHHJ"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing 6-1 Instantiatingthe user instance variable in the constructor of the Main.java class</font></b></p><pre>public Main(WOContext context) {    super(context);    user = new User();}</pre><p>Save <code>Main.java</code>.</p></font></li><li>Change the bindings on the dynamic elements to use the newvariable.<p>Click <code>user</code> inthe variable browser of WebObjects Builder's main window. Justas with creating other bindings, drag a connection from the variable <code>favoriteFood</code> tothe WOTextField that is currently bound to <code>favoriteFood</code>.When you release the mouse button, a pop-up menu lists the bindingsavailable. </p><p>Notice that <code>value</code> hasa checkmark next to it, indicating that it currently has a binding. Selecting <code>value</code> replaces <code>favoriteFood</code> with <code>user.favoriteFood</code>.</p><p>Replacethe <code>personName</code> bindingin a similar fashion. Be sure to change both the WOStrings and theWOTextFields.</p></font></li><li>Update the <code>entryIncomplete</code> method.<p>The <code>entryIncomplete</code> methodin Main can no longer directly access the <code>personName</code> and <code>favoriteFood</code> instancevariables because they are protected elements of the User class. Ithas to use the accessor methods that User provides. Make the changesnecessary so that the method looks like  <a href="#BCIBCIHI">Listing 6-2</a>.</p><a name = "BCIBCIHI"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing6-2 Main.java's entryIncomplete methodusing the user instance variable</font></b></p><pre>public boolean entryIncomplete() {    if (user.personName() == null || user.favoriteFood() == null ||  user.personName().equals("") || user.favoriteFood().equals(""))  {        return true;    }    else {        return false;    }}</pre></font></li><li>Choose UserEntryCustomObject from the target pop-up menu.</font></li><li>Build and run the application.<p>The behavior is the sameas the one displayed by the UserEntry project, defined in  <a sector="mod" href="../UserInput/iManaging_User_Input.html" target="_top">"Managing User Input"</a>,but the data is now being accessed via the new custom object.</p></font></li></ol><br><a name = "BBCJFFFE"></a><h3><font face="Lucida Grande,Helvetica,Arial">Following a Keypath</font></h3><p>You'll notice that the bindings for the dynamic elementsare in a slightly different format. Rather than simply naming thevariable or method to call, they specify a more specific path tothe property in question: in this case, the <code>userName</code> variablefrom the <code>user</code> object.This is called a keypath.</p><p>Encapsulating data into objects, as in this example, is avery important part of object-oriented development. Access to thisdata is defined by a keypath that specifies the objects, methods,or variables that can provide the data in question.</p><p>A keypath is a set of keys separated by periods. When WebObjectsrequires access to data specified in a keypath, it follows the keypathby evaluating the first key from the list.</p><p>This first key is evaluated within the scope of the instancerepresenting the component&#151;the class file in the component isexamined for the method or variable. In this case, the <code>user</code> instancevariable found in the <code>Main.java</code> class.</p><p>At this point, if there is another key in the keypath, itis evaluated the same way, but this time using the result of thefirst keypath as the source object for the method or variable. Now,the <code>personName</code> methodis called. Since there are no more keys in the keypath, the valuefrom the <code>personName</code> methodis returned as the value for the binding.</p><p>In this way, you can access the data you need, as long asit can be reached by some method from the current component. Inthe simplest case, you store variables in the component itself.As your data becomes more complex, you may need to store it in customobjects and pass them between components.</p><br>    <br><a href="Component_Communication.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Defining_a_New_Component.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<hr alt=""><p><font face="Palatino" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
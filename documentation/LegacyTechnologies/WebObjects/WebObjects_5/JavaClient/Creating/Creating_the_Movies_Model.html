<HTML>		<HEAD>        <title>Creatingthe Movies Model</title>		</HEAD>	<BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html" target="_top">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="What_Goes_I_Application.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Creating_th_ger_Project.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF153"></a><h2><font face="Helvetica,Arial,Lucida Grande">Creatingthe Movies Model</font></h2><!-- apple_doc: pageHeadingEnd --><p><font face="Times">A model file provides a level of abstraction from the database.This enables you to write WebObjects applications that are not tiedto a particular database implementation. To create a model file,you need to provide the EOModeler application connection informationso that it can communicate with your database. In addition, youdefine the entities that make up your data model and map them totables in your database. In EOModeler you also define the relationshipsbetween entities using the primary and foreign keys of the databasetables. This section guides you through the steps required to accomplishall of these objectives.</font></p><p><font face="Times">If you don't want to learn how to create a model or if you'regoing to use an existing model, you can go to  <a href="Creating_th_ger_Project.html#TPXREF104" target = "_right">"Creating the StudioManager Project"</a>. </font></p><br><a name = "TPXREF154"></a><h3><font face="Helvetica,Arial,Lucida Grande">UsingThe EOModeler Wizard to Create the Model</font></h3><p><font face="Times"></font></p><ol><p><li>Launch EOModeler.<p>EOModeleris located in the <code>/Developer/Applications</code> directory.Navigate to that directory and launch EOModeler.</p><p> <img src = "../Art/eomodelericon.gif" alt = "[image: ../Art/eomodelericon.gif]"></p></li></p><p><li>Create a new model.<p>Choose Model &gt; New.</p><p>Ensurethat the JDBC adaptor is selected.</p><p>Click Next.</p> <img src = "../Art/eomadaptor.gif" alt = "[image: ../Art/eomadaptor.gif]"></li></p><p><li>Set up the database connection.<p>For this tutorial theonly information required is the URL. Enter <code>jdbc:openbase://localhost/WOMovies</code> inthe URL field.</p><p>Click OK.</p> <img src = "../Art/eomjdbcpanel.gif" alt = "[image: ../Art/eomjdbcpanel.gif]"></li></p><p><li>Specify what to include in your model. <img src = "../Art/eomwizardwhat.gif" alt = "[image: ../Art/eomwizardwhat.gif]"><p>In this wizardpage, you can specify the degree to which the wizard configuresyour model.</p><p>The basic model the wizard creates containsentities, attributes, and relationships. An entity is the part ofthe database-to-object mapping that associates a database tablewith an enterprise object class. For example, the Movie entity mapsrows from the MOVIE table to Movie objects. Similarly, an attributeassociates a database column with an instance variable. For example,the <code>title</code> attribute inthe Movie entity maps the TITLE column of the MOVIE table to the <code>title</code> instancevariable of Movie objects.</p><p>A relationship is a linkbetween two entities that's based on attributes of the entities. Forexample, the Movie entity has a relationship to the MovieRole entitybased on the <code>movieId</code> attributeof each entity (although the attributes in this example have thesame name in both entities, they don't have to). This relationshipmakes it possible to find all the movie roles in a movie.</p><p>Howcomplete the basic model is depends on the completeness of the schema informationinside your database server. For example, the wizard includes relationshipsin your model only if the server's schema information specifiesforeign key definitions.</p><p>Using the options in this page,you can supplement the basic model with additional information.(Note that the wizard doesn't modify the underlying database.)</p><p>Selectthe "Assign primary keys to all entities" option.</p><p>EnterpriseObjects Framework uses primary keys to uniquely identify enterprise objectsand to map them to the appropriate database row. Therefore, youmust assign a primary key to each entity you use in your application.The wizard automatically assigns primary keys to the model if itfinds primary key information in the database's schema information.</p><p>Selectingthis option causes the wizard to prompt you to choose primary keysthat aren't defined in the database's schema information. Ifyour database doesn't define them, the wizard later prompts youto choose primary keys.</p><p>Deselect the "Ask about relationships"option.</p><p>If there are foreign key definitions in thedatabase's schema information, the wizard includes the correspondingrelationships in the basic model. However, a definition in the schemadoesn't provide enough information for the wizard to set all ofa relationship's options. Selecting this option causes the wizardto prompt you to provide the additional information it needs tocomplete the relationship configurations. You'll add relationshipinformation manually in this tutorial.</p><p>Deselect the"Ask about stored procedures" option.</p><p>Selectingthis option causes the wizard to read stored procedures from thedatabase's schema information, display them, and allow you tochoose which to include in your model. Because the Studio Managerapplication doesn't require the use of any stored procedures,you don't need this option selected.</p><p>Deselect the"Use Custom Enterprise objects" option.</p><p>An entitymaps a table to enterprise objects by storing the name of a databasetable (MOVIE, for example) and the name of the corresponding enterpriseobject class (a Java class, Movie, for example). When deciding whatclass to map a table to, you have two choices: EOGenericRecord ora custom class. EOGenericRecord is a class whose instances storekey-value pairs that correspond to an entity's properties andthe data associated with each property.</p><p>If you don'tselect the "Use Custom Enterprise objects" option, the wizardmaps all your database tables to EOGenericRecord. Otherwise, thewizard maps all your database tables to custom classes. The wizardassumes that each entity is to be represented by a custom classwith the same name. For example, a table named MOVIE has an entitynamed Movie, whose corresponding custom class is also named Movie. Usea custom enterprise object class only when you need to add businesslogic; otherwise use EOGenericRecord. See  <a sector="mod" href="../Enhancing/iAdding_Beha_ise_Objects.html" target="_top">"Specifying Custom Enterprise Object Classes"</a> for more information on enterprise objects.</p><p>ClickNext.</p></li></p><p><li>Choose the tables to include in your model.<p>For thistutorial the only tables required are MOVIE, MOVIE_ROLE, PLOT_SUMMARY,STUDIO, TALENT, and TALENT_PHOTO.</p><p>Select only the tablesmentioned above. You need to use the Command key to make a noncontiguousselection.</p><p>Click Next.</p> <img src = "../Art/eomwizardtables.gif" alt = "[image: ../Art/eomwizardtables.gif]"></li></p><p><li>Select a primary key for the Movie entity.<p>Select movieIdfrom Attributes list.</p><p>Click Next.</p> <img src = "../Art/eomwizardmoviepk.gif" alt = "[image: ../Art/eomwizardmoviepk.gif]"></li></p><p><li>Select a primary key for the MovieRole entity.<p>The MovieRoleentity has a compound primary key: <code>movieId</code> + <code>talendId</code>.Therefore, the movieId and talentId attributes need to be selected.</p><p>Selectthe movieId and talentId attributes.</p><p>Click Next.</p> <img src = "../Art/eomwizardmovierolepk.gif" alt = "[image: ../Art/eomwizardmovierolepk.gif]"></li></p><p><li>Select a primary key for the PlotSummary entity.<p>Selectthe movieId attribute.</p><p>Click Next.</p></li></p><p><li>Select a primary key for the Studio entity.<p>Select thestudioId attribute.</p><p>Click Next.</p></li></p><p><li>Select a primary key for the Talent entity.<p>Select thetalentId attribute.</p><p>Click Next.</p></li></p><p><li>Select a primary key for the TalentPhoto entity.<p>Selectthe talentId attribute.</p><p>Click Next.</p></li></p><p><li>Create the model.<p>The wizard is done collecting information.It is now ready to create the model.</p><p>Click Finish.</p><p>Youshould now see a window similar to the one in  <a href="#BCIFBBGA">Figure 2-1</a>.</p><a name = "BCIFBBGA"></a><p><font face="Helvetica,Arial,Lucida Grande"><b>Figure2-1 Model generated by the EOModeler wizard</b></font></p> <img src = "../Art/eombasicmodel.gif" alt = "[image: ../Art/eombasicmodel.gif]"></li></p><p><li>Display the client-side class property indicator for attributes.<p>Selectthe Movie entity in the entity browser.</p><p>If you do notsee a column with the  <img src = "../Art/clientsideclassproperty.gif" alt = "[image: ../Art/clientsideclassproperty.gif]"> heading in the Movie Attributestable view, you need to add it.</p><p>Choose Client-Side ClassProperty from the Add Column pull-down menu in the Movie Attributestable view.</p> <img src = "../Art/eombasicmodeladdcolumn.gif" alt = "[image: ../Art/eombasicmodeladdcolumn.gif]"></li></p><p><li>Display the client-side class property indicator for relationships.<p>Ifyou do not see a column with the  <img src = "../Art/clientsideclassproperty.gif" alt = "[image: ../Art/clientsideclassproperty.gif]"> heading inthe Movie Relationships table view, you need to add it.</p><p>ChooseClient-Side Class Property from the Add Column pull-down menu inthe Movie Relationships table view.</p></li></p><p><li>Save the model.<p>Choose Model &gt; Save.</p><p>Youare presented with a Save As dialog. Name your model Movies.</p><p>Navigateto a directory where you want to store the model.</p><p>ClickSave.</p><p>Close the model window.</p></li></p></ol><br><a name = "TPXREF155"></a><h3><font face="Helvetica,Arial,Lucida Grande">RemovingClass-Property Status From Foreign Keys</font></h3><p><font face="Times">By default, EOModeler makes class properties for all of anentity's attributes (except for non-database attributes that youadd to the entity). When an attribute is a class property, it meansthat the property is included in your class definition and thatit can be fetched from the database. To put it another way, onlyattributes that are marked as class properties become part of yourenterprise objects.</font></p><p><font face="Times">You should mark as class properties only those attributeswhose values are meaningful in the objects that are created whenyou fetch from the database. Attributes that are essentially databaseartifacts, such as primary and foreign keys, shouldn't be markedas class properties unless the key has meaning to the user and mustbe displayed in the user interface.</font></p><p><font face="Times">Eliminating primary and foreign keys as class properties hasno adverse effect on how Enterprise Objects Framework manages enterpriseobjects in your application.</font></p><p><font face="Times">EOModeler indicates that an attribute is a server-side classproperty with the  <img src = "../Art/classpropertyicon.gif" alt = "[image: ../Art/classpropertyicon.gif]"> icon. Client-side class propertieshave the  <img src = "../Art/clientsideclassproperty.gif" alt = "[image: ../Art/clientsideclassproperty.gif]"> icon.</font></p> <img src = "../Art/attributeicons.gif" alt = "[image: ../Art/attributeicons.gif]"><p><font face="Times">To remove the class property status from the Movie entity's<code></code> studioIdattribute, follow these steps:</font></p><ol><p><li>Choose Tools&gt; Table Mode.</li></p><p><li>Select the Movie entity.</li></p><p><li>Click the  <img src = "../Art/classpropertyicon.gif" alt = "[image: ../Art/classpropertyicon.gif]"> and  <img src = "../Art/clientsideclassproperty.gif" alt = "[image: ../Art/clientsideclassproperty.gif]"> icons in the <code>studioId</code>'srow in the Movie Attributes table, so that they disappear.</li></p></ol> <img src = "../Art/movieattributes.gif" alt = "[image: ../Art/movieattributes.gif]"><p><font face="Times">Close the model.</font></p><p><font face="Times">The model file you just created will be used as a templatewhen you create the StudioManager project in  <a href="Creating_th_ger_Project.html#TPXREF104" target = "_right">"Creating the StudioManager Project"</a>.When you add the model to the project, Project Builder will storea copy of it in the project's directory. From then on, you'llbe working with StudioManager's version of the model file. Thisway, you can create a master model of your database and, from it,generate customized versions for each project you develop.</font></p><br>    <br><a href="What_Goes_I_Application.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Creating_th_ger_Project.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<p><font face="Geneva,Helvetica,Arial" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
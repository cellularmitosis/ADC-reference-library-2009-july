<html><head><title>Mac OS X
 Manual Page For ldap_str2dn(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/ldap_str2dn" title="Mac OS X
 Manual Page for ldap_str2dn(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/ldap_str2dn"; name=ldap_str2dn(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
LDAP_GET_DN(3)                                                                                <!-- a -->LDAP_GET_DN(3)<!-- /a -->



<b>NAME</b>
       ldap_get_dn, ldap_explode_dn, ldap_explode_rdn, ldap_dn2ufn - LDAP DN handling routines

<b>LIBRARY</b>
       OpenLDAP LDAP (libldap, -lldap)

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;ldap.h&gt;</b>

       <b>char</b> <b>*ldap_get_dn(</b> <b>LDAP</b> <b>*ld,</b> <b>LDAPMessage</b> <b>*entry</b> <b>)</b>

       <b>int</b> <b>ldap_str2dn(</b> <b>const</b> <b>char</b> <b>*str,</b> <b>LDAPDN</b> <b>**dn,</b> <b>unsigned</b> <b>flags</b> <b>)</b>

       <b>int</b> <b>ldap_dn2str(</b> <b>LDAPDN</b> <b>*dn,</b> <b>char</b> <b>**str,</b> <b>unsigned</b> <b>flags</b> <b>)</b>

       <b>char</b> <b>**ldap_explode_dn(</b> <b>const</b> <b>char</b> <b>*dn,</b> <b>int</b> <b>notypes</b> <b>)</b>

       <b>char</b> <b>**ldap_explode_rdn(</b> <b>const</b> <b>char</b> <b>*rdn,</b> <b>int</b> <b>notypes</b> <b>)</b>

       <b>char</b> <b>*ldap_dn2ufn(</b> <b>const</b> <b>char</b> <b>*</b> <b>dn</b> <b>)</b>

       <b>char</b> <b>*ldap_dn2dcedn(</b> <b>const</b> <b>char</b> <b>*</b> <b>dn</b> <b>)</b>

       <b>char</b> <b>*ldap_dcedn2dn(</b> <b>const</b> <b>char</b> <b>*</b> <b>dn</b> <b>)</b>

       <b>char</b> <b>*ldap_dn2ad_canonical(</b> <b>const</b> <b>char</b> <b>*</b> <b>dn</b> <b>)</b>

<b>DESCRIPTION</b>
       These routines allow LDAP entry names (Distinguished Names, or DNs) to be obtained, parsed, converted
       to a user-friendly form, and tested.  A DN has the form described in RFC 2253 "Lightweight  Directory
       Access Protocol (v3): UTF-8 String Representation of Distinguished Names".

       The <b>ldap_get_dn()</b> routine takes an <u>entry</u> as returned by <a href="ldap_first_entry.3.html#//apple_ref/doc/man/3/ldap_first_entry"><b>ldap_first_entry</b>(3)</a> or <a href="ldap_next_entry.3.html#//apple_ref/doc/man/3/ldap_next_entry"><b>ldap_next_entry</b>(3)</a> and
       returns a copy of the entry's DN.  Space for the DN will be obtained dynamically and should be  freed
       by the caller using <!-- a --><b>ldap_memfree</b>(3)<!-- /a -->.

       <b>ldap_str2dn()</b> parses a string representation of a distinguished name contained in <b>str</b> into its compo-<font color="#ffffff" class="whiteout">nents,&nbsp;components,</font>
       nents, which are stored in <b>dn</b> as <b>ldap_ava</b> structures, arranged in <b>LDAPAVA,</b> <b>LDAPRDN,</b> and <b>LDAPDN</b> terms,
       defined as:

       <b>typedef</b> <b>struct</b> <b>ldap_ava</b> <b>{</b>
           <b>char</b> <b>*la_attr;</b>
           <b>struct</b> <b>berval</b> <b>*la_value;</b>
           <b>unsigned</b> <b>la_flags;</b>
       <b>}</b> <b>LDAPAVA;</b>

       <b>typedef</b> <b>LDAPAVA**</b> <b>LDAPRDN;</b>
       <b>typedef</b> <b>LDAPRDN**</b> <b>LDAPDN;</b>

       The  attribute  types  and  the  attribute  values  are  not  normalized.  The <b>la_flags</b> can be either
       <b>LDAP_AVA_STRING</b> or <b>LDAP_AVA_BINARY,</b> the latter meaning that the value is  BER/DER  encoded  and  thus
       must  be represented as, quoting from RFC 2253, " ... an octothorpe character ('#' ASCII 35) followed
       by the hexadecimal representation of each of the bytes of the BER encoding of  the  X.500  Attribute-<font color="#ffffff" class="whiteout">Value."&nbsp;AttributeValue."</font>
       Value."  The <b>flags</b> parameter to <b>ldap_str2dn()</b> can be

            LDAP_DN_FORMAT_LDAPV3
            LDAP_DN_FORMAT_LDAPV2
            LDAP_DN_FORMAT_DCE

       which  defines  what  DN  syntax is expected (according to RFC 2253, RFC 1779 and DCE, respectively).
       The format can be <u>OR</u>ed to the flags

            LDAP_DN_P_NO_SPACES
            LDAP_DN_P_NO_SPACE_AFTER_RDN
            ...
            LDAP_DN_PEDANTIC

       The latter is a shortcut for all the previous limitations.

       <b>LDAP_DN_P_NO_SPACES</b> does not allow extra spaces in the dn; the default is to silently eliminate  spa-<font color="#ffffff" class="whiteout">ces&nbsp;spaces</font>
       ces  around AVA separators ('='), RDN component separators ('+' for LDAPv3/LDAPv2 or ',' for DCE) and
       RDN separators (',' LDAPv3/LDAPv2 or '/' for DCE).

       <b>LDAP_DN_P_NO_SPACE_AFTER_RDN</b> does not allow a single space after RDN separators.

       <b>ldap_dn2str()</b> performs the inverse operation, yielding in <b>str</b> a  string  representation  of  <b>dn.</b>   It
       allows the same values for <b>flags</b> as <b>ldap_str2dn(),</b> plus

            LDAP_DN_FORMAT_UFN
            LDAP_DN_FORMAT_AD_CANONICAL

       for user-friendly naming (RFC 1781) and AD canonical.

       The  following  routines  are viewed as deprecated in favor of <b>ldap_str2dn()</b> and <b>ldap_dn2str().</b>  They
       are provided to support legacy applications.

       The <b>ldap_explode_dn()</b> routine takes a DN as returned by <b>ldap_get_dn()</b> and breaks it up into its  com-<font color="#ffffff" class="whiteout">ponent&nbsp;component</font>
       ponent  parts.   Each  part  is  known  as  a Relative Distinguished Name, or RDN.  <b>ldap_explode_dn()</b>
       returns a NULL-terminated array, each component of which contains an RDN from the  DN.   The  <u>notypes</u>
       parameter is used to request that only the RDN values be returned, not their types.  For example, the
       DN "cn=Bob, c=US" would return as either { "cn=Bob", "c=US", NULL } or { "Bob", "US", NULL }, depend-<font color="#ffffff" class="whiteout">ing&nbsp;depending</font>
       ing  on  whether  notypes  was  0  or  1, respectively.  Assertion values in RDN strings may included
       escaped characters.  The result can be freed by calling <a href="ldap_value_free.3.html#//apple_ref/doc/man/3/ldap_value_free"><b>ldap_value_free</b>(3)</a>.

       Similarly, the <b>ldap_explode_rdn()</b> routine takes an  RDN  as  returned  by  <b>ldap_explode_dn(dn,0)</b>  and
       breaks  it  up  into  its  "type=value" component parts (or just "value", if the <u>notypes</u> parameter is
       set).  Note the value is not unescaped.  The result can be freed by calling <a href="ldap_value_free.3.html#//apple_ref/doc/man/3/ldap_value_free"><b>ldap_value_free</b>(3)</a>.

       <b>ldap_dn2ufn()</b> is used to turn a DN as returned by <a href="ldap_get_dn.3.html#//apple_ref/doc/man/3/ldap_get_dn"><b>ldap_get_dn</b>(3)</a>  into  a  more  user-friendly  form,
       stripping  off  all type names.  See "Using the Directory to Achieve User Friendly Naming" (RFC 1781)
       for more details on the UFN format.  Due to the ambiguous nature of the format, it is generally  only
       used  for  display  purposes.  The space for the UFN returned is obtained dynamically and the user is
       responsible for freeing it via a call to <!-- a --><b>ldap_memfree</b>(3)<!-- /a -->.

       <b>ldap_dn2dcedn()</b> is used to turn a DN as returned by <a href="ldap_get_dn.3.html#//apple_ref/doc/man/3/ldap_get_dn"><b>ldap_get_dn</b>(3)</a> into a DCE-style DN, e.g. a string
       with  most-significant to least significant rdns separated by slashes ('/'); rdn components are sepa-<font color="#ffffff" class="whiteout">rated&nbsp;separated</font>
       rated by commas (',').  Only printable chars (e.g. LDAPv2 printable string) are allowed, at least  in
       this  implementation.  <b>ldap_dcedn2dn()</b> performs the opposite operation.  <b>ldap_dn2ad_canonical()</b> turns
       a DN into a AD canonical name, which is basically a DCE dn with attribute types omitted.  The  trail-<font color="#ffffff" class="whiteout">ing&nbsp;trailing</font>
       ing domain, if present, is turned in a DNS-like domain.  The space for the returned value is obtained
       dynamically and the user is responsible for freeing it via a call to <!-- a --><b>ldap_memfree</b>(3)<!-- /a -->.

<b>ERRORS</b>
       If an error occurs in <b>ldap_get_dn()</b>, NULL is returned and the <b>ld_errno</b> field in the <u>ld</u>  parameter  is
       set  to  indicate  the  error.   See  <a href="ldap_error.3.html#//apple_ref/doc/man/3/ldap_error"><b>ldap_error</b>(3)</a>  for  a  description  of  possible  error  codes.
       <b>ldap_explode_dn()</b>,   <b>ldap_explode_rdn()</b>,   <b>ldap_dn2ufn(),</b>   <b>ldap_dn2dcedn(),</b>   <b>ldap_dcedn2dn(),</b>   and
       <b>ldap_dn2ad_canonical()</b> will return NULL with <!-- a --><b>errno</b>(3)<!-- /a --> set appropriately in case of trouble.

<b>NOTES</b>
       These routines dynamically allocate memory that the caller must free.

<b>SEE</b> <b>ALSO</b>
       <a href="ldap.3.html#//apple_ref/doc/man/3/ldap"><b>ldap</b>(3)</a>, <a href="ldap_error.3.html#//apple_ref/doc/man/3/ldap_error"><b>ldap_error</b>(3)</a>, <a href="ldap_first_entry.3.html#//apple_ref/doc/man/3/ldap_first_entry"><b>ldap_first_entry</b>(3)</a>, <!-- a --><b>ldap_memfree</b>(3)<!-- /a -->, <a href="ldap_value_free.3.html#//apple_ref/doc/man/3/ldap_value_free"><b>ldap_value_free</b>(3)</a>

<b>ACKNOWLEDGEMENTS</b>
       <b>OpenLDAP</b> is developed and maintained by The OpenLDAP Project (<a href="http://www.openldap.org/)">http://www.openldap.org/)</a>  <b>OpenLDAP</b> is
       derived from University of Michigan LDAP 3.3 Release.



OpenLDAP 2.3.27                                  2006/08/19                                   <!-- a -->LDAP_GET_DN(3)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/ldap_str2dn.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/ldap_str2dn.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/ldap_str2dn.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>IP Options</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING392></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-391.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-393.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-81.html"><B>Part 2 - Open Transport Reference</B></A><BR><DD><A HREF="NetworkingWOT-377.html"><B>Chapter 29 - TCP/IP Services Reference</B></A> / <A HREF="NetworkingWOT-388.html"><B>Options</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING392-0></A>
<H2><A NAME=MARKER-9-82></A>IP Options</H2>
 <A NAME=MARKER-13-83></A>You can use the options in this section with a protocol level of <CODE>INET_IP</CODE>. The <CODE>IP_OPTIONS</CODE> and <CODE>IP_TOS</CODE> options are association-related; the other IP options are not. The <CODE>IP_REUSEADDR</CODE> option may be negotiated in all endpoint states except <CODE>T_UNINIT</CODE>. The other options may be negotiated in all endpoint states except <CODE>T_UNBND</CODE> and <CODE>T_UNINIT</CODE>. They are read-only in state <CODE>T_UNBND</CODE>. A request for any of these options is an absolute requirement. <P>
<PRE>
<A NAME=MARKER-0-95></A>#define IP_OPTIONS         0x01  
#define IP_TOS             0x02  
#define IP_TTL             0x03  
#define IP_REUSEADDR       0x04  
#define IP_DONTROUTE       0x10  
#define IP_BROADCAST       0x20  
#define IP_HDRINCL         0x1002
#define IP_RCVOPTS         0x1005
#define IP_RCVDSTADDR      0x1007
#define IP_MULTICAST_IF    0x1010 
#define IP_MULTICAST_TTL   0x1011 
#define IP_MULTICAST_LOOP  0x1012 
#define IP_ADD_MEMBERSHIP  0x1013 
#define IP_DROP_MEMBERSHIP 0x1014 /
#define IP_BROADCAST_IF    0x1015
#define IP_RCVIFADDR       0x1016
</PRE>
 Constants for use with the <CODE>IP_TOS</CODE> precedence level are as follows:<P>
<PRE>
<A NAME=MARKER-13-85></A>
enum {
   T_ROUTINE        = 0,
   T_PRIORITY       = 1,
   T_IMMEDIATE      = 2,
   T_FLASH          = 3,
   T_OVERRIDEFLASH  = 4,
   T_CRITIC_ECP     = 5,
   T_INETCONTROL    = 6,
   T_NETCONTROL     = 7
};
</PRE>
 Constants for use with the <CODE>IP_TOS</CODE> type of service are as follows:<P>
<PRE>
<A NAME=MARKER-13-86></A>/* IP_TOS type of service */
enum {
   T_NOTOS        = 0x0,
   T_LDELAY       = (1&lt;&lt;4),
   T_HITHRPT      = (1&lt;&lt;3),
   T_HIREL        = (1&lt;&lt;2)
};
</PRE>
<B>Option descriptions</B><P>
<DL>
<DT><CODE><A NAME=MARKER-13-87></A>IP_OPTIONS<A NAME=MARKER-13-88></A></CODE>
<DD> Set the value of the Options field in the header of each outgoing IP datagram, or receive the Options field of each incoming IP datagram. (<CODE>UInt8[]</CODE>)<P>
<DT>
<DD> This option is intended for use by network debugging and control programs; most applications do not need this option. <P>
<DT>
<DD> The value for this option consists of a string of bytes whose formats follow the definitions of IP options in the current RFCs with one exception: If you specify a source routing option, the first address in the list of routers (as returned by <CODE>OTInetGetInterfaceInfo</CODE>) must be for the first-hop router. Open Transport extracts the first-hop router address from the option list and adjusts the size of the list before transmitting the packet. The Options field can contain up to 40 bytes.<P> 
<DT>
<DD> To disable this option, specify an option header only with no option values. This option is enabled by default any time you use an Open Transport option-management function or a configuration string to set an IP option that must be negotiated. <P>
<DT>
<DD> If you enable <CODE>IP_OPTIONS</CODE>, the function <CODE>OTOptionManagement</CODE> with the <CODE>T_CURRENT</CODE> action flag set returns the list of IP options that are currently being sent with outgoing IP datagrams.<P> 
<DT>
<DD> The functions <CODE>OTConnect</CODE> (in synchronous mode only), <CODE>OTListen</CODE>, <CODE>OTRcvConnect</CODE>, and <CODE>OTRcvUData</CODE> return this option for the received IP datagram. The <CODE>OTRcvUDErr</CODE> function returns this option for the previously sent datagram that caused the error.<P>
<DT><CODE><A NAME=MARKER-13-89></A>IP_TOS</CODE>
<DD> Set the Type of Service field of each outgoing IP datagram, or receive the Type of Service field of each incoming IP datagram. (<CODE>UInt8</CODE>)<P>
<DT>
<DD> Open Transport hosts and routers ignore the Type of Service field, but you can set this value for use with other networks if you so desire. The data for this option is any combination of a Precedence flag and a Type of Service flag. Use the <A HREF=NetworkingWOT-380.html#MARKER-9-31><CODE>SET_TOS</CODE></A> macro  to construct this option. The possible values for these flags are shown at the beginning of this section.<P>
<DT>
<DD> If you enable <CODE>IP_TOS</CODE>, the function <CODE>OTOptionManagement</CODE> with the <CODE>T_CURRENT</CODE> action flag set returns the Type of Service flags that are currently being sent with outgoing IP datagrams. <P>
<DT>
<DD> The functions <CODE>OTConnect</CODE> (in synchronous mode only), <CODE>OTListen</CODE>, <CODE>OTRcvConnect</CODE>, and <CODE>OTRcvUData</CODE> return this option for the received IP datagram. The function <CODE>OTRcvUDErr</CODE> returns the Type of Service field of the previously sent datagram that caused the error.<P>
<DT><CODE><A NAME=MARKER-13-90></A>IP_TTL<A NAME=MARKER-13-91></A></CODE>
<DD> Set the Time to Live field of each outgoing IP datagram. Specify the number of hops as an unsigned char. (<CODE>UInt8</CODE>)<P>
<DT>
<DD> Each router that processes the datagram decrements the Time to Live field and discards the datagram if the value reaches 0. The default value for this field is 255. Because this is not an association-related option, there is no way to get the Time to Live field of an incoming datagram.<P>
<DT><CODE><A NAME=MARKER-13-92></A>IP_REUSEADDR<A NAME=MARKER-13-93></A></CODE>
<DD> Allow multiple addresses with the same port number. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> Set this option to <CODE>T_YES</CODE> to allow TCP to bind a transport endpoint to a <CODE>kOTAnyFreeAddress</CODE> that includes a port number plus bind one or more additional endpoints to distinct fully specified internet addresses that include the same port number. If this option is set to <CODE>T_NO</CODE> (the default), TCP cannot bind two or more transport endpoints to addresses that include the same port number.<P> 
<DT><CODE><A NAME=MARKER-13-94></A>IP_DONTROUTE<A NAME=MARKER-13-95></A></CODE>
<DD> Use addresses on connected subnets only. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> Set this option to <CODE>T_YES</CODE> to cause outgoing messages to be delivered to the local network only and not to go through any routers. (This options sets the time-to-live value to 1.) This option is intended for testing and development purposes. Specify <CODE>T_NO</CODE> to disable this option. This option is disabled by default.<P>
<DT><CODE><A NAME=MARKER-13-96></A>IP_BROADCAST<A NAME=MARKER-13-97></A></CODE>
<DD> Request permission to send broadcast datagrams. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> Set this option to <CODE>T_YES</CODE> to request permission to send broadcast datagrams. Specify <CODE>T_NO</CODE> to disable this option. This option is disabled by default.<P> 
<DT><CODE><A NAME=MARKER-13-98></A>IP_HDRINCL</CODE>
<DD> Include the IP header with received data. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> Set this option to <CODE>T_YES</CODE> to cause RawIP to include the IP header when you read data. Set the option to <CODE>T_NO</CODE> (the default) to receive only the data without the header. This option works with the RawIP interface only. See <A HREF=NetworkingWOT-56.html#MARKER-9-53>"Using RawIP"</A> for more information.<P>
<DT><CODE><A NAME=MARKER-13-99></A>IP_RCVOPTS</CODE>
<DD> Include IP-level options when you call the <CODE>OTRcvUData</CODE> function. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> If you set this option to <CODE>T_YES</CODE> (the default), the <CODE>OTRcvUData</CODE> function returns IP-level options along with the UDP options when you are receiving UDP data. If you set this option to <CODE>T_NO</CODE>, you receive only UDP options.<P>
<DT><CODE><A NAME=MARKER-13-100></A>IP_RCVDSTADDR</CODE>
<DD> For multihomed systems, include with received data the address of the interface on which a message was received. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> If you specify <CODE>T_YES</CODE> for this option, the <CODE>OTRcvUData</CODE> function includes the address of the interface. If you specify <CODE>T_NO</CODE> (the default) for this option, you receive only the data.<P>
<DT><CODE><A NAME=MARKER-13-101></A>IP_MULTICAST_IF<A NAME=MARKER-13-102></A></CODE>
<DD> Specify the TCP/IP interface to use for outgoing multicast IP datagrams, or retrieve the interface this option is set to. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> Specify the interface as an "InetHost". This option and the other multicast options can be used with UDP and RawIP only. In the case that a host is multihomed, this option lets you specify which network interface to use for multicasts. Whereas only one network interface can be used at a time for multicast transmissions, an application can join the same multicast group address on more than one network interface. If you joined the same multicast address on more than one network, this option lets you determine over which network the datagram arrived.<P>
<DT><CODE><A NAME=MARKER-13-103></A>IP_MULTICAST_TTL<A NAME=MARKER-13-104></A></CODE>
<DD> Set the Time to Live field or the number of hops permitted for outgoing multicast IP datagrams, or retrieve the Time to Live field set for an interface. (<CODE>UInt8</CODE>)<P>
<DT>
<DD> Each router that processes the datagram decrements the Time to Live field and discards the datagram if the value reaches 0. Specify the time to live as an unsigned char. To avoid unneccessary network traffic, you should set this value as low as possible. The default value is 1.<P>
<DT><CODE><A NAME=MARKER-13-105></A>IP_MULTICAST_LOOP</CODE>
<DD> Enable loopbacks for outgoing multicast IP datagrams. (<CODE>UInt32</CODE>)<P>
<DT>
<DD> Set this option to <CODE>T_YES</CODE> to cause an outgoing multicast datagram to be delivered to yourself; set this option to <CODE>T_NO</CODE> to disable loopbacks. Loopbacks are enabled by default.<P>
<DT><CODE><A NAME=MARKER-13-106></A><A NAME=MARKER-9-107></A>IP_ADD_MEMBERSHIP</CODE>
<DD> Add a membership in an IP multicast group. (<CODE>SizeOf(TIPAddMulticast)</CODE>).<P>
<DT>
<DD> You use a <CODE>TIPAddMulticast</CODE> structure to specify the address and network interface of the group you wish to join. The <CODE>TIPAddMulticast</CODE> structure is described in <A HREF=NetworkingWOT-386.html#MARKER-9-52>"IP Multicast Address Structure"</A>.<P>
<DT><CODE><A NAME=MARKER-13-108></A>IP_DROP_MEMBERSHIP</CODE>
<DD> Drop membership in an IP multicast group. <P>
<DT>
<DD> (<CODE>SizeOf(TIPAddMulticast)</CODE>).
<DT>
<DD> You use a <CODE>TIPAddMulticast</CODE> structure to specify the address and network interface of the group you wish to leave.<P>
<DT><CODE><A NAME=MARKER-13-109></A>IP_BROADCAST_IF<A NAME=MARKER-13-110></A></CODE>
<DD> Reserved.<P>
<DT><CODE><A NAME=MARKER-13-111></A>IP_RCVIFADDR</CODE>
<DD> Reserved.<P>
</DL>
 The following IP-level options are reserved for use by Apple Computer, Inc.<P>
<PRE>
<A NAME=MARKER-13-128></A>#define  DVMRP_INIT     0x64
#define  DVMRP_DONE     0x65
#define  DVMRP_ADD_VIF  0x66
#define  DVMRP_DEL_VIF  0x67
#define  DVMRP_ADD_LGRP 0x68
#define  DVMRP_DEL_LGRP 0x69
#define  DVMRP_ADD_MRT  0x6A
#define  DVMRP_DEL_MRT  0x6B 
</PRE>
</BLOCKQUOTE><HR>
<center>
<A HREF="NetworkingWOT-391.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-393.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>GetScaledBatteryInfo(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING289></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-288.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-290.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-230.html"><B>Chapter 6 - Power Manager</B></A> / <A HREF="Devices-233.html"><B>Power Manager Reference</B></A><BR><DL><DD><A HREF="Devices-263.html"><B>Power Manager Dispatch Routines</B></A> / <A HREF="Devices-288.html"><B>Getting Information About the Internal Batteries</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING289-0></A>
<H3>GetScaledBatteryInfo</H3>
 You can use the <CODE>GetScaledBatteryInfo</CODE> function to find out the condition of the battery or batteries. <A NAME=MARKER-2-327></A><P>
<PRE>
void GetScaledBatteryInfo(short whichBattery, 
                           BatteryInfo *theInfo);
</PRE>
<DL>
<DT><CODE>whichBattery</CODE>
<DD> The battery for which you want information. Set this parameter to 0 to receive combined information about all the batteries in the computer.
<DT><CODE>theInfo</CODE>
<DD> A pointer to a <CODE>BatteryInfo</CODE> data structure, which returns information about the specified battery.
</DL>
<A NAME=HEADING289-5></A>
<H5>DESCRIPTION</H5>
 The <CODE>GetScaledBatteryInfo</CODE> function provides a generic means of returning information about the battery or batteries in the system. Instead of returning a voltage value, the function returns the battery level as a fraction of the total possible voltage. <P>
<DL>
<DT><B>Note</B>
<DD>Battery technologies such as nickel cadmium (NiCad) and nickel metal hydride (NiMH) have replaced sealed lead acid batteries in portable Macintosh computers. There is no single algorithm for determining the battery voltage that is correct for all portable Macintosh computers.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 The value of <CODE>whichBattery</CODE> determines whether <CODE>GetScaledBatteryInfo</CODE> returns information about a particular battery or about the total battery level. The value of <CODE>GetScaledBatteryInfo</CODE> should be in the range of 0 to <CODE>BatteryCount()</CODE>. If the value of <CODE>whichBattery</CODE> is 0, <CODE>GetScaledBatteryInfo</CODE> returns a summation of all the batteries, that is, the effective battery level of the whole system. If the value of <CODE>whichBattery</CODE> is out of range, or the selected battery is not installed, <CODE>GetScaledBatteryInfo</CODE> will return a result of 0 in all fields. Here is a summary of the effects of the <CODE>whichBattery</CODE> parameter:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Value of <CODE>whichBattery</CODE><TH>Information returned<TR>
<TD>0<TD>Total battery level for all batteries<TR>
<TD>From 1 to <CODE>BatteryCount()</CODE><TD>Battery level for the selected battery<TR>
<TD>Less than 0 or greater than <CODE>BatteryCount()</CODE><TD>0 in all fields of <CODE>theInfo</CODE></TABLE>
<P>
 The <CODE>flags</CODE> character contains several bits that describe the battery and charger state. If a bit value is 1, that feature is available or is operating; if the bit value is 0, that feature is not operating. Unused bits are reserved by Apple for future expansion. 
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Bit name<TH>Bit number<TH>Description<TR>
<TD><CODE><A NAME=MARKER-2-25></A><A NAME=MARKER-2-5></A>batteryInstalled</CODE><TD>7<TD>A battery is installed.<TR>
<TD><CODE><A NAME=MARKER-2-27></A><A NAME=MARKER-2-27></A>batteryCharging</CODE><TD>6<TD>The battery is charging.<TR>
<TD><CODE><A NAME=MARKER-2-29></A><A NAME=MARKER-2-7></A>chargerConnected</CODE><TD><B>X</B><TD>The charger is connected.</TABLE>
<A NAME=MARKER-2-328></A><P>
 The value of <CODE>warningLevel</CODE> is the battery level at which the first low battery warning message will appear. The function returns a value of 0 in some cases when it's not appropriate to return the warning level. <A NAME=MARKER-2-329></A><P>
 The value of <CODE>batteryLevel</CODE> is the current level of the battery. A value of 0 represents the voltage at which the Power Manager will force the computer into sleep mode; a value of 255 represents the highest possible voltage.<A NAME=MARKER-2-330></A><P>
<A NAME=HEADING289-12></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap is <CODE>_PowerMgrDispatch</CODE> ($A09E). The selector value for <CODE>GetScaledBatteryInfo</CODE> is 12 ($0C) in the low word of register D0. The <CODE>BatteryInfo</CODE> data are returned in the low word of register D0 as follows:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Bits<TH>Contents<TR>
<TD>31-24<TD>Flags<TR>
<TD>23-16<TD>Warning level<TR>
<TD>15-8<TD>Reserved<TR>
<TD>7-0<TD>Battery level</TABLE>
<P>
<A NAME=HEADING289-14></A>
<H5>SEE ALSO</H5>
 The <CODE>BatteryInfo</CODE> data type is described in <A HREF=Devices-238.html#MARKER-9-175>"Battery Information Structure," on page 6-27</A>.<A NAME=MARKER-2-331></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-288.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-290.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

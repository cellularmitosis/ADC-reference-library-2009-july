<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Providing for File Uploads</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.f.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.11.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606100"> </A><A NAME="23543"> </A>Providing for File Uploads</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=610574"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=610576"> </A>Discusses how to enable your WebObjects application to upload files.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=610588"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=606104"> </A>Most of today's Web browsers permit the attachment of files to a form submission, useful for such tasks as adding a Microsoft Word document to a resume database or storing a photograph of an employee being added to a company directory. WebObjects 4.0 adds the WOFileUpload component to support RFC 1867, which defines a method of submitting form information using &quot;multipart MIME.&quot; Previous versions of WebObjects required additional support that is available from the NeXTanswers on-line support system (see NeXTanswer #2505).</P><P CLASS="Body"><A NAME="pgfId=606106"> </A>The following browsers work with the WebObjects WOFileUpload component:</P><UL><LI CLASS="Bulleted"><A NAME="pgfId=606107"> </A>	Netscape Navigator 2.x and greater</LI><LI CLASS="Bulleted"><A NAME="pgfId=606108"> </A>	Microsoft Internet Explorer version 4.x and greater</LI><LI CLASS="Bulleted"><A NAME="pgfId=606109"> </A>	Microsoft Internet Explorer version 3.01, if the &quot;RFC 1867&quot; add-on is installed</LI><LI CLASS="Bulleted"><A NAME="pgfId=606110"> </A>	Omnigroup OmniWeb version 2.x and greater</LI><LI CLASS="Bulleted"><A NAME="pgfId=606111"> </A>	Other browsers that support RFC 1867</LI></UL><P CLASS="Body"><A NAME="pgfId=606112"> </A>To add file-upload support, you must have the WOFileUpload component in a WOForm. You must also add an additional binding to the WOForm to specify that the browser should use multipart MIME encoding to submit the form information (which includes the attached files).</P><P CLASS="Body"><A NAME="pgfId=606114"> </A>The following steps illustrate how to add file upload support to your application. The example uses the Movies EOModel and a Wizard-generated application. You will add the capability to upload the image of the <TT CLASS="Code">talent</TT> to the application. The image is the <TT CLASS="Code">photo</TT> attribute of the <TT CLASS="Code">TalentPhoto</TT> object.  The <TT CLASS="Code">TalentPhoto</TT> object is referenced by the <TT CLASS="Code">photo</TT> relationship of the currently selected <TT CLASS="Code">talent</TT>. </P><P CLASS="Body"><A NAME="pgfId=609144"> </A>To prepare the example, perform the following steps:</P><P CLASS="Numbered1"><A NAME="pgfId=606115"> </A>	Start ProjectBuilder.</P><OL><LI CLASS="Numbered"><A NAME="pgfId=606116"> </A>	Create a new &quot;WebObjects Application&quot; project, selecting &quot;Wizard&quot; for assistance and &quot;Java&quot; as the primary language.</LI><LI CLASS="Numbered"><A NAME="pgfId=606117"> </A>	Choose the &quot;Existing Model&quot; option and select the <TT CLASS="Code">Movies.eomodeld</TT> file.</LI><LI CLASS="Numbered"><A NAME="pgfId=606118"> </A>	Select the &quot;Talent&quot; Entity.</LI><LI CLASS="Numbered"><A NAME="pgfId=606119"> </A>	Choose &quot;Selected Record&quot; and &quot;Paginated&quot; for the layout.</LI><LI CLASS="Numbered"><A NAME="pgfId=606120"> </A>	Include the &quot;firstName&quot; and &quot;lastName&quot; attributes to display, and the &quot;lastName&quot; for the hyperlink.</LI></OL><P CLASS="Body"><A NAME="pgfId=606121"> </A>To add file upload support, perform the following steps:</P><P CLASS="Numbered1"><A NAME="pgfId=606122"> </A>	Open the &quot;Main.wo&quot; component in WebObjectsBuilder.</P><OL><LI CLASS="Numbered"><A NAME="pgfId=606123"> </A>	Inspect the WOForm at the bottom of the page.</LI><LI CLASS="Numbered"><A NAME="pgfId=614262"> </A>	Add an attribute named &quot;enctype&quot; and set its value to &quot;multipart/form-data&quot;.</LI><LI CLASS="Numbered"><A NAME="pgfId=614263"> </A>	Add a variable &quot;filename&quot; of type String to the component.</LI><LI CLASS="Numbered"><A NAME="pgfId=606130"> </A>	Add a &quot;Custom WebObject&quot; component to the WOForm (available from the Dynamic elements toolbar or from the &quot;Elements-&gt;WebObjects&quot; menu).</LI><LI CLASS="Numbered"><A NAME="pgfId=615194"> </A>	In the inspector for the component, enter &quot;WOFileUpload&quot; for the class name, and add two attributes, one labeled &quot;filePath&quot; and the other labeled &quot;data&quot;.</LI><LI CLASS="Numbered"><A NAME="pgfId=614295"> </A>	Create the following bindings:	</LI><TABLE BORDER="1" CELLPADDING="3"><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="Body"><A NAME="pgfId=614284"> </A>Attributes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="Body"><A NAME="pgfId=614286"> </A>Binding</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="Body"><A NAME="pgfId=614288"> </A>data</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="Body"><A NAME="pgfId=614290"> </A><TT CLASS="Code">talentDisplayGroup.selectedObject.photo.photo</TT></P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="Body"><A NAME="pgfId=614292"> </A>filePath</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="Body"><A NAME="pgfId=614294"> </A><TT CLASS="Code">filename</TT></P></TD></TR></TABLE><LI CLASS="Numbered"><A NAME="pgfId=606139"> </A>	Build and run the example. You should see a text field and button where the WOFileUpload component was. You can click on the button to select a file. When the form is submitted, the attribute bound to &quot;data&quot; contain the contents of the file being uploaded.</LI></OL><P CLASS="Body"><A NAME="pgfId=606140"> </A>In this example, you should upload &quot;GIF&quot; images that are photographs of people. When you click &quot;Save to Database&quot;, the file data is committed to the database as a <TT CLASS="Code">BLOB</TT> since the attribute is a NSData object.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=614315"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=614316"> </A><A HREF="ProgrammingTopics.12.html#17389" CLASS="XRef">Displaying Images Stored in a Database</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=614317"> </A>RFC 1867 (available at: http://info.internet.isi.edu:80/in-notes/rfc/files/rfc1867.txt)</LI><LI CLASS="Bulleted"><A NAME="pgfId=615203"> </A>WOFileUpload specification in the <EM CLASS="Emphasis">WebObjects Dynamic Element Specifications</EM></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606144"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606145"> </A>	How do I enable my application to upload files?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606146"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606147"> </A>Upload</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606149"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606150"> </A>22 July 1998. Timothy Joransen. First Draft.<BR>19 November 1998. Clif Liu. Second Draft.</P><PRE CLASS="Code"><A NAME="pgfId=602450"> </A></PRE></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.f.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.11.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
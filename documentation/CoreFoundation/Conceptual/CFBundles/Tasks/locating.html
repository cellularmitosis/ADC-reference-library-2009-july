<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Bundle Programming Guide: Locating and Opening Bundles</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Locating and Opening Bundles"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001123" title="Locating and Opening Bundles"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000421" target="_top">Core Foundation</a> &gt; <a href="../../../ResourceManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000421-TP30000458" target="_top">Resource Management</a> &gt; <a href="../index.html" target="_top">Bundle Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="creating.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="locatingresources.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/20001123-CJBEHAAG" title="Locating and Opening Bundles"></a><hr /><H1>Locating and Opening Bundles</H1><p>Before you can access a bundle’s resources, you must first obtain an appropriate <code>NSBundle</code> or <code>CFBundle</code> object. The following sections outline the different ways you create these objects from your code. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="locating.html#//apple_ref/doc/uid/20001123-123785">Opening the Main Bundle</a>
				
			<br/>
			
        
			
			
				<a href="locating.html#//apple_ref/doc/uid/20001123-123202">Locating Bundles by Path</a>
				
			<br/>
			
        
			
			
				<a href="locating.html#//apple_ref/doc/uid/20001123-125088">Locating Bundles in Known Directories</a>
				
			<br/>
			
        
			
			
				<a href="locating.html#//apple_ref/doc/uid/20001123-123081">Locating Bundles by Identifier</a>
				
			<br/>
			
        
			
			
				<a href="locating.html#//apple_ref/doc/uid/20001123-123639">Searching for Related Bundles</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001123-123785" title="Opening the Main Bundle"></a><h2>Opening the Main Bundle</h2><p>The main bundle is the bundle that contains your running code. This is the most commonly used bundle for any program and is what you use to load your strings, images, and other resource files. Because it is a meta bundle, the main bundle is the easiest to retrieve. To get it, call either <code>CFBundleGetMainBundle</code> function or use the <code>mainBundle</code> class method of <code>NSBundle</code>. <span class="content_text">Listing 1</span> shows an example of loading the main bundle from a Carbon application.</p><a name="//apple_ref/doc/uid/20001123-123596-TPXREF113" title="Listing 1Locating the main bundle from Core Foundation"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001123-123596" title="Listing 1Locating the main bundle from Core Foundation"></a><strong>Listing 1&nbsp;&nbsp;</strong>Locating the main bundle from Core Foundation</p><div class="codesample"><table><tr><td scope="row"><pre>CFBundleRef mainBundle;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Get the main bundle for the app<span></span></pre></td></tr><tr><td scope="row"><pre>mainBundle = CFBundleGetMainBundle();<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 2</span> shows this same code example written in Objective-C and using the <code>NSBundle</code> class.</p><a name="//apple_ref/doc/uid/20001123-124660-BCIHBCAH" title="Listing 2Locating the main bundle from Cocoa"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001123-124660" title="Listing 2Locating the main bundle from Cocoa"></a><strong>Listing 2&nbsp;&nbsp;</strong>Locating the main bundle from Cocoa</p><div class="codesample"><table><tr><td scope="row"><pre>NSBundle* mainBundle;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Get the main bundle for the app.<span></span></pre></td></tr><tr><td scope="row"><pre>mainBundle = [NSBundle mainBundle];<span></span></pre></td></tr></table></div><p>When getting the main bundle it is still a good idea to make sure the value you get back represents a valid bundle. In particular, you might get a <code>NULL</code> value for the main bundle in the following situations: </p><ul class="ul"><li class="li"><p>If a program is not bundled, attempting to get the main bundle might return a <code>NULL</code> value. The bundle code may try to create a main bundle for you to represent your program’s contents but in some exceptional cases, it cannot and returns <code>NULL</code> .</p></li><li class="li"><p>If the agent launching the program does not specify the full path to the program's executable in the <code>argv</code> parameters, the main bundle value might be <code>NULL</code>.  Bundles rely on either the path to the executable being in <code>argv[0]</code> or the presence of the executable's path in the <code>PATH</code> environment variable. If neither of these is present, the bundle routines might not be able to find the main bundle directory. Programs launched by <code>xinetd</code> often experience this problem when <code>xinetd</code> changes the current directory to <code>/</code>. </p></li></ul><a name="//apple_ref/doc/uid/20001123-123202" title="Locating Bundles by Path"></a><h2>Locating Bundles by Path</h2><p>If you want to access a bundle other than your main bundle, one way to create an appropriate bundle object is with a path to the bundle. The <code>CFBundleCreate</code> function in Core Foundation takes a <code>CFURLRef</code> specifying the path to the bundle and returns a corresponding <code>CFBundle</code> data type. Similarly, you can use the <code>bundleWithPath:</code> method of <code>NSBundle</code> to create a bundle object from an <code>NSString</code>. </p><p><span class="content_text">Listing 3</span> shows an example of how to create a <code>CFBundle</code> from a string specifying the path. The main trick is to convert the string to a <code>CFURLRef</code> object so that it can be passed to the <code>CFBundleCreate</code> function.</p><a name="//apple_ref/doc/uid/20001123-124088-BBCCJBAF" title="Listing 3Locating a Core Foundation bundle using its path"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001123-124088" title="Listing 3Locating a Core Foundation bundle using its path"></a><strong>Listing 3&nbsp;&nbsp;</strong>Locating a Core Foundation bundle using its path</p><div class="codesample"><table><tr><td scope="row"><pre>CFURLRef bundleURL;<span></span></pre></td></tr><tr><td scope="row"><pre>CFBundleRef myBundle;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Make a CFURLRef from the CFString representation of the<span></span></pre></td></tr><tr><td scope="row"><pre>// bundle’s path.<span></span></pre></td></tr><tr><td scope="row"><pre>bundleURL = CFURLCreateWithFileSystemPath(<span></span></pre></td></tr><tr><td scope="row"><pre>                kCFAllocatorDefault,<span></span></pre></td></tr><tr><td scope="row"><pre>                CFSTR("/Local/Library/MyBundle.bundle"),<span></span></pre></td></tr><tr><td scope="row"><pre>                kCFURLPOSIXPathStyle,<span></span></pre></td></tr><tr><td scope="row"><pre>                true );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Make a bundle instance using the URLRef.<span></span></pre></td></tr><tr><td scope="row"><pre>myBundle = CFBundleCreate( kCFAllocatorDefault, bundleURL );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Any CF objects returned from functions with "create" or<span></span></pre></td></tr><tr><td scope="row"><pre>// "copy" in their names must be released by us!<span></span></pre></td></tr><tr><td scope="row"><pre>CFRelease( bundleURL );<span></span></pre></td></tr><tr><td scope="row"><pre>CFRelease( myBundle );<span></span></pre></td></tr></table></div><p>The preceding example can be rewritten for Cocoa using the code shown in <span class="content_text">Listing 4</span>.</p><a name="//apple_ref/doc/uid/20001123-124767-BCIDECED" title="Listing 4Locating a Cocoa bundle using its path"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001123-124767" title="Listing 4Locating a Cocoa bundle using its path"></a><strong>Listing 4&nbsp;&nbsp;</strong>Locating a Cocoa bundle using its path</p><div class="codesample"><table><tr><td scope="row"><pre>NSBundle* myBundle;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Get the main bundle for the app.<span></span></pre></td></tr><tr><td scope="row"><pre>myBundle = [NSBundle bundleWithPath:@"/Local/Library/MyBundle.bundle"];<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001123-125088" title="Locating Bundles in Known Directories"></a><h2>Locating Bundles in Known Directories</h2><p>Even if you do not know the exact path to a bundle, there are still situations where you can search for it by name. One example is if your application contains several embedded plug-ins in a <code>PlugIns</code> directory. Because this directory is inside of your application bundle, you can use the <code>CFBundle</code> functions for locating resources to get the path to each plug-in. </p><p>To load a set of plug-ins, use the <code>CFBundleCreateBundlesFromDirectory</code> function to create new <code>CFBundle</code> objects for all of the plug-ins in a given directory. <span class="content_text">Listing 5</span> is similar to the previous example, but this time the code retrieves <code>CFBundle</code> objects for all of the plug-ins in the application’s <code>PlugIns</code> directory. </p><a name="//apple_ref/doc/uid/20001123-125268-TPXREF114" title="Listing 5Obtaining bundle references for a set of plug-ins"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001123-125268" title="Listing 5Obtaining bundle references for a set of plug-ins"></a><strong>Listing 5&nbsp;&nbsp;</strong>Obtaining bundle references for a set of plug-ins</p><div class="codesample"><table><tr><td scope="row"><pre>CFBundleRef mainBundle = CFBundleGetMainBundle();<span></span></pre></td></tr><tr><td scope="row"><pre>CFURLRef plugInsURL;<span></span></pre></td></tr><tr><td scope="row"><pre>CFArrayRef bundleArray;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Get the URL to the application’s PlugIns directory.<span></span></pre></td></tr><tr><td scope="row"><pre>plugInsURL = CFBundleCopyBuiltInPlugInsURL(mainBundle);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Get the bundle objects for the application’s plug-ins.<span></span></pre></td></tr><tr><td scope="row"><pre>bundleArray = CFBundleCreateBundlesFromDirectory( kCFAllocatorDefault,<span></span></pre></td></tr><tr><td scope="row"><pre>                    plugInsURL, NULL );<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Release the CF objects<span></span></pre></td></tr><tr><td scope="row"><pre>CFRelease( plugInsURL );<span></span></pre></td></tr><tr><td scope="row"><pre>CFRelease( bundleArray );<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/20001123-123081" title="Locating Bundles by Identifier"></a><h2>Locating Bundles by Identifier</h2><p>Bundle identifiers make it possible to locate already loaded bundles at runtime. This is a useful way for your code to locate its own bundle at runtime. Storing a bundle identifier can be more efficient than storing a reference to the bundle itself. When you need to access the bundle again, you can use the identifier to retrieve the <code>CFBundle</code> object. </p><p>Each bundle you create should have a bundle identifier in its information property-list (<code>Info.plist</code>) file. The <code>CFBundleIdentifier</code> key contains the bundle identifier string, which traditionally uses Java-style package naming conventions. For example, a Finder plug-in from Apple might use the string <code>com.apple.Finder.MyGetInfoPlugin</code> as its bundle identifier. Including the domain name of your company in the string helps avoid collisions with bundle developers in other companies.</p><p><span class="content_text">Listing 6</span> shows how to retrieve a bundle using its bundle identifier. Remember that a bundle identifier can <em>only</em> be used to locate an existing <code>CFBundle</code> instance (including the main bundle and bundles for all statically linked frameworks). If your bundle has been opened and its code is running, then you can locate it using its bundle identifier.</p><a name="//apple_ref/doc/uid/20001123-123159-TPXREF115" title="Listing 6Locating a bundle using its identifier"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001123-123159" title="Listing 6Locating a bundle using its identifier"></a><strong>Listing 6&nbsp;&nbsp;</strong>Locating a bundle using its identifier</p><div class="codesample"><table><tr><td scope="row"><pre>CFBundleRef requestedBundle;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> // Look for a bundle using its identifier<span></span></pre></td></tr><tr><td scope="row"><pre> requestedBundle = CFBundleGetBundleWithIdentifier(<span></span></pre></td></tr><tr><td scope="row"><pre>        CFSTR("com.apple.Finder.MyGetInfoPlugIn") );<span></span></pre></td></tr></table></div><p>You can also locate bundles by their identifier in Cocoa. The <code>NSBundle</code> class defines the class method <code>bundleWithIdentifier:</code> to find and return an existing bundle. </p><a name="//apple_ref/doc/uid/20001123-123639" title="Searching for Related Bundles"></a><h2>Searching for Related Bundles</h2><p>If you are writing a Cocoa application, you can obtain a list of bundles related to the application by calling the <code>allBundles</code> and <code>allFrameworks</code> class methods of NSBundle. These methods create an array of <code>NSBundle</code> objects corresponding to the bundles or frameworks currently in use by your application. You can use these methods as convenience functions rather than maintain a collection of loaded bundles yourself. </p><p>The <code>bundleForClass:</code> class method is another way get related bundle information in a Cocoa application. This method returns the bundle in which a particular class is defined. Again, this method is mostly for convenience so that you do not have to retain a pointer to an <code>NSBundle</code> object that you may use only occasionally. </p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="creating.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="locatingresources.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-11-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/CoreFoundation/Conceptual/CFBundles/Tasks/locating.html%3Fid%3D10000123i-4.3&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/CoreFoundation/Conceptual/CFBundles/Tasks/locating.html%3Fid%3D10000123i-4.3&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/CoreFoundation/Conceptual/CFBundles/Tasks/locating.html%3Fid%3D10000123i-4.3&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

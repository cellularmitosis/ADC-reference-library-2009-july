<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Cocoa Scripting Guide: Testing, Debugging, and Performance</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Testing, Debugging, and Performance"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001981" title="Testing, Debugging, and Performance"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../Scripting-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000569" target="_top">Scripting &amp; Automation</a> &gt; <a href="../SApps_intro/SAppsIntro.html#//apple_ref/doc/uid/TP40001982-BCICHGIE">Cocoa Scripting Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../SApps_script_cmds/SAppsScriptCmds.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../SApps_script_classes/SAppsScriptClasses.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001981-BBCJEEEC" title="Testing, Debugging, and Performance"></a><h1>Testing, Debugging, and Performance</h1><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_142"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_143"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_144"></a>This chapter lists tactics you can use to test and debug your scriptable Cocoa application. It also provides a brief list of possible performance issues, including links to performance information elsewhere in this document.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="SAppsDebugging.html#//apple_ref/doc/uid/TP40001981-SW2">Scriptability Test Plan</a>
				
			<br/>
			
        
			
			
				<a href="SAppsDebugging.html#//apple_ref/doc/uid/TP40001981-SW6">Use AppleScript Scripts to Test Your Application</a>
				
			<br/>
			
        
			
			
				<a href="SAppsDebugging.html#//apple_ref/doc/uid/TP40001981-CJBHFBJJ">Turn On Debugging Output for Scripting</a>
				
			<br/>
			
        
			
			
				<a href="SAppsDebugging.html#//apple_ref/doc/uid/TP40001981-BABHEAEE">Debugging Scriptability Information</a>
				
			<br/>
			
        
			
			
				<a href="SAppsDebugging.html#//apple_ref/doc/uid/TP40001981-1081599">Additional Debugging Tips</a>
				
			<br/>
			
        
			
			
				<a href="SAppsDebugging.html#//apple_ref/doc/uid/TP40001981-SW1">Performance Issues for Scriptability</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001981-SW2" title="Scriptability Test Plan"></a><h2>Scriptability Test Plan</h2><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_145"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_146"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_147"></a>As noted in <span class="content_text"><a href="../SApps_design_apps/SAppsDesignApp.html#//apple_ref/doc/uid/TP40001978-BBCBCIJE">“Designing for Scriptability,”</a></span> planning for testing should be an integral part of your application design and implementation. Your test plan should include regular milestones to confirm each step of scriptability. These can include:</p><ol class="ol"><li class="li"><p>Validating your terminology (verifying that your sdef is semantically correct).</p></li><li class="li"><p>Verifying that the application is receiving Apple events.</p></li><li class="li"><p>Verifying that your script commands get instantiated and executed when the corresponding Apple events are received.</p></li><li class="li"><p>Verifying that the expected methods are called to get and set scriptable values.</p></li><li class="li"><p>Verifying that support for more complex script statements you support, such as <code>every</code> and <code>whose</code> statements, is working. (For examples of these types of statements, see the object specifiers for the filter (<code>whose</code>) and <code>every</code> reference forms in <span class="content_text"><a href="../SApps_object_specifiers/SAppsObjectSpecifiers.html#//apple_ref/doc/uid/TP40002164-CH3-SW2">Table 6-1</a></span>.)</p></li></ol><p>Your test plan should also include performance testing. For more information, see <span class="content_text"><a href="SAppsDebugging.html#//apple_ref/doc/uid/TP40001981-SW1">“Performance Issues for Scriptability.”</a></span></p><a name="//apple_ref/doc/uid/TP40001981-SW6" title="Use AppleScript Scripts to Test Your Application"></a><h2>Use AppleScript Scripts to Test Your Application</h2><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_148"></a>As you implement your application, you should build up a suite of test scripts to exercise its scriptability. And the more features you make scriptable, the more your script testing can serve as a testbed for your entire application.</p><p>From <a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_149"></a>Script Editor, you can cut and paste the Event Log output from your test scripts and save it for later regression testing. As you make changes to your application, whether in script-specific code or not, you can compare the current output to the saved version to help you find possible side-effects.</p><p>Make your test scripts as complete as possible by following these guidelines:</p><ul class="ul"><li class="li"><p>Exercise the entire hierarchy of your AppleScript object model: for example, have your scripts get and set every accessible property of every accessible object, using <code>repeat</code> loops and <code>every</code> statements.</p><p>After getting and setting values, use a <code>log</code> statement to log the <code>properties</code> property of the objects to record the changes.</p></li><li class="li"><p>Test access by every applicable reference form: for example, iterate over scriptable collections by name, by ID, by index, and by any other form that applies. (See <span class="content_text"><a href="../SApps_object_specifiers/SAppsObjectSpecifiers.html#//apple_ref/doc/uid/TP40002164-CH3-SW2">Table 6-1</a></span> for a list of reference forms.)</p></li><li class="li"><p>Test creating new objects by using the <code>make</code> command and specifying properties.</p><p>For example, this script tests Sketch by creating a new graphic object in an existing document:</p><a name="//apple_ref/doc/uid/TP40001981-SW5" title="Listing 8-1Simple test script"></a><br/><br/><p class="codesample"><strong>Listing 8-1&nbsp;&nbsp;</strong>Simple test script</p><div class="codesample"><table><tr><td scope="row"><pre>tell application "Sketch"<span></span></pre></td></tr><tr><td scope="row"><pre>    tell document "Test Doc.sketch"<span></span></pre></td></tr><tr><td scope="row"><pre>        make new circle at end with properties {x position:50, y position:30, width:60, height:60}<span></span></pre></td></tr><tr><td scope="row"><pre>    end tell<span></span></pre></td></tr><tr><td scope="row"><pre>end tell<span></span></pre></td></tr></table></div></li><li class="li"><p>Test using <code>whose</code> clauses: they're a powerful scripting feature that is important to users.</p><p>A <code>whose</code> clause can provide a good stress test for your scriptability, and may turn up performance issues.</p></li><li class="li"><p>Run scripts that make changes then reverse them, then check whether the end result matches the starting point.</p></li><li class="li"><p>Run your test scripts regularly, even after code changes that you don't expect to affect your application's scriptability.</p></li></ul><p>For additional information on using test scripts,  including examples, see <span class="content_text"><a href="../SApps_script_cmds/SAppsScriptCmds.html#//apple_ref/doc/uid/20001242-SW7">“Implementing a Verb-First Command—Align”</a></span> and <span class="content_text"><a href="../SApps_script_cmds/SAppsScriptCmds.html#//apple_ref/doc/uid/20001242-SW2">“Implementing an Object-First Command—Rotate.”</a></span><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_150"></a></p><a name="//apple_ref/doc/uid/TP40001981-1081713" title="Turn On Debugging Output for Scripting"></a><a name="//apple_ref/doc/uid/TP40001981-CJBHFBJJ" title="Turn On Debugging Output for Scripting"></a><h2>Turn On Debugging Output for Scripting</h2><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_151"></a>Turning on Cocoa’s debugging output for scripting will help you debug your scriptable application. Debugging output shows information such as</p><ul class="ul"><li class="li"><p>loaded scriptability information (from an sdef file or from script suite and script terminology files)</p></li><li class="li"><p>executed script commands</p></li><li class="li"><p>the arguments to executed commands</p></li></ul><p>To turn on this support, you set a debugging value in the user defaults system provided by Mac OS X. Default values in the global domain are accessible to any application. For example, during development, an application can set a user default value that a debugger checks to determine whether to display certain debug information. That’s the approach that Cocoa takes to log debug information for scripting.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001981-SW7" title="Note"></a><p><strong>Note:</strong>&nbsp;You can read more about Cocoa’s support for the defaults system in the document <em><a href="../../UserDefaults/index.html#//apple_ref/doc/uid/10000059i" target="_top">User Defaults Programming Topics for Cocoa</a></em>.</p></div><a name="//apple_ref/doc/uid/TP40001981-1081764" title="Steps for Turning On Cocoa Debugging Output"></a><h3>Steps for Turning On Cocoa Debugging Output</h3><p>To turn on Cocoa’s debugging output for scripting, you do the following:</p><ol class="ol"><li class="li"><p>Open a Terminal window. Terminal is available in <code>/Applications/Utilities</code>.</p></li><li class="li"><p>Enter the following line and press Return to execute it:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults write NSGlobalDomain NSScriptingDebugLogLevel 1<span></span></pre></td></tr></table></div><p>You can turn off debugging output with a line like this:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults write NSGlobalDomain NSScriptingDebugLogLevel 0<span></span></pre></td></tr></table></div><p>You can display all the current values in the global domain with a line like this:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults read NSGlobalDomain<span></span></pre></td></tr></table></div></li><li class="li"><p>If your application is already running, quit the application.</p></li><li class="li"><p>If you launch your application from the Finder, look for debug information in the Console application (available in <code>/Applications/Utilities</code>). If you launch your application in <a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_152"></a>Xcode, look for debug information in the Debug Console pane or in the Run pane.</p></li></ol><p>You will not see any debugging information until the application receives an Apple event that causes it to execute a script command (and in turn, to load the application’s scriptability information). You can view debugging information for either a development or a deployment build of your application.</p><p>If you only want to turn on script debugging for a particular application, you can use the application domain. The application domain is identified by the bundle identifier of the application, typically a string in the form of a Java-style package name (think of it as a reverse URL). For example, you could turn on script debug logging for the Sketch sample application (available from Apple) by executing the following line:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults write com.apple.CocoaExamples.Sketch NSScriptingDebugLogLevel 1<span></span></pre></td></tr></table></div><p>To read this value or to reset it to zero, use one of the following two lines:</p><div class="codesample"><table><tr><td scope="row"><pre>defaults read com.apple.CocoaExamples.Sketch NSScriptingDebugLogLevel<span></span></pre></td></tr><tr><td scope="row"><pre>defaults write com.apple.CocoaExamples.Sketch NSScriptingDebugLogLevel 0<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001981-SW8" title="Sample Output"></a><h3>Sample Output</h3><p>The following listing shows a script that changes the height of a circle in a Sketch application window.</p><div class="codesample"><table><tr><td scope="row"><pre>tell application "Sketch"<span></span></pre></td></tr><tr><td scope="row"><pre>    tell the first document<span></span></pre></td></tr><tr><td scope="row"><pre>        set height of first circle to 100<span></span></pre></td></tr><tr><td scope="row"><pre>    end tell<span></span></pre></td></tr><tr><td scope="row"><pre>end tell<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 8-2</span> shows the debug output from running the script shown above on a version of Sketch that supplies its scriptability information with an sdef file. The output shows the command listed as <a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_153"></a><code>Command: Intrinsics.set</code>, because Cocoa scripting automatically supplies information for various "intrinsic" AppleScript terminology.</p><p>The debug information includes the direct parameter (the property to set, <code>height</code>), the receivers for the command (a specifier for <code>circles 1 of orderedDocuments 1</code>), and the arguments for the command (the value to set, <code>100</code>). You can also see that Sketch returns a result of <code>null</code>, because no return value is needed for a <code>set</code> command.</p><a name="//apple_ref/doc/uid/TP40001981-SW4" title="Listing 8-2Debug scripting output for sdef-based Sketch"></a><p class="codesample"><strong>Listing 8-2&nbsp;&nbsp;</strong>Debug scripting output for sdef-based Sketch</p><div class="codesample"><table><tr><td scope="row"><pre>2006-02-24 13:51:29.951 Sketch[8245] Command: Intrinsics.set<span></span></pre></td></tr><tr><td scope="row"><pre>    Direct Parameter: &lt;NSPropertySpecifier: height><span></span></pre></td></tr><tr><td scope="row"><pre>    Receivers: &lt;NSIndexSpecifier: circles 1 of orderedDocuments 1><span></span></pre></td></tr><tr><td scope="row"><pre>    Arguments: {Value = &lt;NSAppleEventDescriptor: 100<span></span></pre></td></tr><tr><td scope="row"><pre>2006-02-24 13:51:29.953 Sketch[8245] Result: (null)<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 8-2</span> shows output from running the same script on a version of the Sketch application that supplies its scriptability information in the script suite format. There are two main differences from the previous listing:</p><ul class="spaceabove"><li class="li"><p>First, the output shows the Standard suite (formerly called the Core suite), Text suite, and Sketch suites—you will see this information the first time the application loads those suites in response to receiving an Apple event.</p></li><li class="li"><p>Second, the command is listed as <code>Command: NSCoreSuite.Set</code>, reflecting the suite format for providing intrinsic scriptability information.</p></li></ul><a name="//apple_ref/doc/uid/TP40001981-SW9" title="Listing 8-3Debug scripting output for script suite-based Sketch"></a><p class="codesample"><strong>Listing 8-3&nbsp;&nbsp;</strong>Debug scripting output for script suite-based Sketch</p><div class="codesample"><table><tr><td scope="row"><pre>2005-05-20 13:38:39.736 Sketch[2005-05-20 13:40:55.215 Sketch[516] Suite NSCoreSuite, apple event code 0x3f3f3f3f<span></span></pre></td></tr><tr><td scope="row"><pre>2005-05-20 13:40:55.223 Sketch[516] Suite NSTextSuite, apple event code 0x3f3f3f3f<span></span></pre></td></tr><tr><td scope="row"><pre>2005-05-20 13:40:55.253 Sketch[516] Suite Sketch, apple event code 0x736b7463<span></span></pre></td></tr><tr><td scope="row"><pre>2005-05-20 13:40:55.259 Sketch[516] Command: NSCoreSuite.Set<span></span></pre></td></tr><tr><td scope="row"><pre>    Direct Parameter: &lt;NSPropertySpecifier: height><span></span></pre></td></tr><tr><td scope="row"><pre>    Receivers: &lt;NSIndexSpecifier: circles 1 of orderedDocuments 1><span></span></pre></td></tr><tr><td scope="row"><pre>    Arguments: {Value = 100; }<span></span></pre></td></tr><tr><td scope="row"><pre>    Key Specifier: &lt;NSPropertySpecifier: height><span></span></pre></td></tr><tr><td scope="row"><pre>2005-05-20 13:40:55.261 Sketch[516] Result: (null)<span></span></pre></td></tr></table></div>	<a name="//apple_ref/doc/uid/TP40001981-1083558" title="Debugging Scriptability Information"></a><a name="//apple_ref/doc/uid/TP40001981-BABHEAEE" title="Debugging Scriptability Information"></a><h2>Debugging Scriptability Information</h2><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_154"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_155"></a>To view an sdef file in a dictionary viewer, double-click it in the Finder. Double-clicking an sdef file in an Xcode project similarly opens it in a dictionary viewer window. To view or edit the XML for the file, open the sdef file with any plain text editor; in Xcode, select the sdef file and choose File > Open As > Plain Text File.</p><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_156"></a>As you add information to an sdef file, you can verify that the file is still valid (semantically correct) by opening it with Script Editor or Xcode<a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_157"></a> (in Mac OS X version 10.4). If those applications cannot parse the file, you will see “Nothing to see here; move along.” displayed in the dictionary viewer. You can then open the Console log to see specific parsing errors.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_11" title="Important:"></a><p><strong>Important:</strong>&nbsp;To test your application's scriptability after making changes to your sdef file, you must quit the application, rebuild, and relaunch it to pick up the changes. In addition, the Script Editor application caches scriptability information, so you may need to quit and relaunch Script Editor as well.</p><p></p></div><a name="//apple_ref/doc/uid/TP40001981-1082402" title="Checking an sdef File with xmllint"></a><h3>Checking an sdef File with xmllint</h3><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_158"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_159"></a>You can also validate your sdef with the <code>xmllint</code> tool, using a command line like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>xmllint --valid YourApp.sdef<span></span></pre></td></tr></table></div><p>The <code>--valid</code> parameter causes the <code>xmllint</code> tool to determine if the document is a valid instance of the included Document Type Definition (DTD). By default, <code>xmllint</code> also checks to determine if the document is well-formed. (In <span class="content_text"><a href="../SApps_creating_sdef/SAppsCreateSdef.html#//apple_ref/doc/uid/TP40001979-SW1">“Version and document type in an sdef file,”</a></span> you can see how the <code>sdef.dtd</code> file is specified.)</p><a name="//apple_ref/doc/uid/TP40001981-1083213" title="Examining Scriptability Information in Your Application"></a><h3>Examining Scriptability Information in Your Application</h3><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_160"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_161"></a>The <code>description</code> methods of various Cocoa scripting classes can provide useful information. You can view this information during a debugging session with the <code>print object</code> command in the GDB debugger. (This command can be abbreviated as <code>po</code>.) For example, you can examine the information Cocoa scripting has extracted from your sdef file or script suite and script terminology files. To do so, follow these steps:</p><ol class="ol"><li class="li"><p>Debug the application in Xcode<a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_162"></a>.</p></li><li class="li"><p>Break anywhere in the application.</p></li><li class="li"><p>Open the Debugger Console Log and enter this command:</p><div class="codesample"><table><tr><td scope="row"><pre>print object [NSClassFromString(@"NSScriptSuiteRegistry") sharedScriptSuiteRegistry]<span></span></pre></td></tr></table></div>	</li></ol><p>As a result of these steps, you will get a detailed listing of the scriptability information <code>NSScriptSuiteRegistry</code> has loaded for the application. <span class="content_text">Listing 8-4</span> shows just the <code>get</code> and <code>set</code> command information from that output.</p><a name="//apple_ref/doc/uid/TP40001981-BABGCABG" title="Listing 8-4Partial output of NSScriptSuiteRegistry information"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40001981-1083288" title="Listing 8-4Partial output of NSScriptSuiteRegistry information"></a><strong>Listing 8-4&nbsp;&nbsp;</strong>Partial output of NSScriptSuiteRegistry information</p><div class="codesample"><table><tr><td scope="row"><pre> Command: get ('core'/'getd')<span></span></pre></td></tr><tr><td scope="row"><pre>        Implementation class: NSGetCommand<span></span></pre></td></tr><tr><td scope="row"><pre>        Name: "get", description: "Returns the value of the specified object(s)."<span></span></pre></td></tr><tr><td scope="row"><pre>        Unnamed argument ('----'), type: specifier ('obj '), optional: no<span></span></pre></td></tr><tr><td scope="row"><pre>            (No user-readable name or description needed for unnamed arguments)<span></span></pre></td></tr><tr><td scope="row"><pre>        Result type: any ('****')<span></span></pre></td></tr><tr><td scope="row"><pre>            Description: &lt;none><span></span></pre></td></tr><tr><td scope="row"><pre>    Command: set ('core'/'setd')<span></span></pre></td></tr><tr><td scope="row"><pre>        Implementation class: NSSetCommand<span></span></pre></td></tr><tr><td scope="row"><pre>        Name: "set", description: "Sets the value of the specified object(s)."<span></span></pre></td></tr><tr><td scope="row"><pre>        Unnamed argument ('----'), type: specifier ('obj '), optional: no<span></span></pre></td></tr><tr><td scope="row"><pre>            (No user-readable name or description needed for unnamed arguments)<span></span></pre></td></tr><tr><td scope="row"><pre>        Argument: Value ('data'), type: any ('****'), optional: no<span></span></pre></td></tr><tr><td scope="row"><pre>            Name: "to", description: "The new value."<span></span></pre></td></tr><tr><td scope="row"><pre>        Result type: &lt;none> ('null')<span></span></pre></td></tr><tr><td scope="row"><pre>            Description: &lt;none><span></span></pre></td></tr></table></div>	<p>Similarly, you can get descriptions of instances of the <code>NSScriptCommand</code> and <code>NSAppleEventDescriptor</code> classes. For example, you can use the following command at a break point during script command execution:</p><div class="codesample"><table><tr><td scope="row"><pre>print object [NSClassFromString(@"NSScriptCommand") currentCommand]<span></span></pre></td></tr></table></div><p>If you need to know more about specific Apple events received by your application, you can examine the information for the Apple event that triggered the current scripting command with a statement like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>print object [[NSClassFromString(@"NSScriptCommand") currentCommand] appleEvent]<span></span></pre></td></tr></table></div><p>You can get similar information by using <code>NSLog</code> statements in your application, allowing you to track execution through your code as you implement scriptability support. For example, the Sketch application contains the file <code>my.h</code>. That file provides definitions to turn logging on or off based on the value of <code>myMasterSwitch</code>, shown in <span class="content_text">Listing 8-5</span>. Set it to <code>1</code>, recompile, and any <code>NSLog</code> statements in your application will be executed:</p><a name="//apple_ref/doc/uid/TP40001981-SW3" title="Listing 8-5Turning on log statements"></a><p class="codesample"><strong>Listing 8-5&nbsp;&nbsp;</strong>Turning on log statements</p><div class="codesample"><table><tr><td scope="row"><pre>#define    myMasterSwitch    ( 0 )<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>#if        myMasterSwitch<span></span></pre></td></tr><tr><td scope="row"><pre>#define    myLog1(x)    NSLog(x)<span></span></pre></td></tr><tr><td scope="row"><pre>#define    myLog2(x,y)    NSLog(x,y)<span></span></pre></td></tr><tr><td scope="row"><pre>#else<span></span></pre></td></tr><tr><td scope="row"><pre>#define    myLog1(x)<span></span></pre></td></tr><tr><td scope="row"><pre>#define    myLog2(x,y)<span></span></pre></td></tr><tr><td scope="row"><pre>#endif<span></span></pre></td></tr></table></div><p>To dump information for a command object in Sketch, you could place this <code>NSLog</code> statement in the <code>performDefaultImplementation</code> method of the <code>SKTAlignCommand</code> class:</p><div class="codesample"><table><tr><td scope="row"><pre>myLog2(@"SKTAlignCommand performDefaultImplementation command = %@", self);<span></span></pre></td></tr></table></div><p>Here's the result, from Xcode's Console window (after setting <code>myMasterSwitch</code> to <code>1</code> in <code>my.h</code> and recompiling):</p><a name="//apple_ref/doc/uid/TP40001981-SW10" title="Listing 8-6NSLog output for SKTAlignCommand"></a><p class="codesample"><strong>Listing 8-6&nbsp;&nbsp;</strong>NSLog output for SKTAlignCommand</p><div class="codesample"><table><tr><td scope="row"><pre>2006-02-01 13:15:31.622 Sketch[1662] ME SKTAlignCommand performDefaultImplementation command = Sketch Suite.align<span></span></pre></td></tr><tr><td scope="row"><pre>    Direct Parameter: &lt;CFArray 0x3d3780 [0xa073a150]>{type = mutable-small, count = 2, values = (<span></span></pre></td></tr><tr><td scope="row"><pre>    0 : &lt;NSIndexSpecifier: graphics 1 of orderedDocuments named "SketchDoc"><span></span></pre></td></tr><tr><td scope="row"><pre>    1 : &lt;NSIndexSpecifier: graphics 2 of orderedDocuments named "SketchDoc"><span></span></pre></td></tr><tr><td scope="row"><pre>)}<span></span></pre></td></tr><tr><td scope="row"><pre>    Receivers: (null)<span></span></pre></td></tr><tr><td scope="row"><pre>    Arguments: {<span></span></pre></td></tr><tr><td scope="row"><pre>        "" = (<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;NSIndexSpecifier: graphics 1 of orderedDocuments named "SketchDoc">,<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;NSIndexSpecifier: graphics 2 of orderedDocuments named "SketchDoc"><span></span></pre></td></tr><tr><td scope="row"><pre>        );<span></span></pre></td></tr><tr><td scope="row"><pre>        toEdge = 1986359907;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>In this output, you can see that the direct parameter uses index specifiers to specify two graphics. The direct parameter (with the same two specifiers) is also displayed in the arguments array, identified by the empty string <code>(""</code>) key. The edge to align the graphics to is also provided as an argument, with the key <code>"toEdge"</code><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_163"></a>.<a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_164"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_165"></a></p><a name="//apple_ref/doc/uid/TP40001981-1081599" title="Additional Debugging Tips"></a><h2>Additional Debugging Tips</h2><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_166"></a>There are a number of Apple event debugging tips that work well both for applications that use the Apple Event Manager directly and those that use frameworks such as Cocoa. For example, the chapter <span class="content_text"><a href="../../../../AppleScript/Conceptual/AppleEvents/debugging_aepg/debugging_aepg.html#//apple_ref/doc/uid/TP40001449-CH210" target="_top">Testing and Debugging Apple Event Code</a></span> in <em><a href="../../../../AppleScript/Conceptual/AppleEvents/index.html#//apple_ref/doc/uid/TP40001449" target="_top">Apple Events Programming Guide</a></em> describes how you can:</p><ul class="ul"><li class="li"><p>Determine if your application is receiving Apple events (and log the information in those events).</p></li><li class="li"><p>Use Script Editor as a test tool to send events to your application.</p></li><li class="li"><p>Observe Apple events for multiple applications.</p></li><li class="li"><p>Find third-party resources for monitoring and debugging Apple events and scriptable applications.<a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_167"></a><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_168"></a></p></li></ul><a name="//apple_ref/doc/uid/TP40001981-SW1" title="Performance Issues for Scriptability"></a><h2>Performance Issues for Scriptability</h2><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_169"></a>Performance considerations should be an integral part of your test plan, so that as you implement your application, you always know when its performance increases or decreases. You may have a pretty good idea of which code paths are most likely to cause trouble, but acquiring regular timing information will help avoid surprises.</p><p>In general, you won't have to worry about performance in receiving Apple events and translating them into command objects, as applications don't commonly receive great numbers of Apple events, and Cocoa can decode them quite rapidly. However, your application should not rely on Apple events to communicate information that is more suitable to a lighter weight form of communication, such as notifications. See <span class="content_text"><a href="../../../../MacOSX/Conceptual/OSX_Technology_Overview/SystemTechnology/SystemTechnology.html#//apple_ref/doc/uid/TP40001067-CH207" target="_top">System-Level Technologies</a></span> in <em><a href="../../../../MacOSX/Conceptual/OSX_Technology_Overview/index.html#//apple_ref/doc/uid/TP40001067" target="_top">Mac OS X Technology Overview</a></em> for more information on the interprocess communications options available in Mac OS X.</p><p><a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_170"></a>If an Apple event initiates a script command that requires your application to perform an asynchronous (and perhaps lengthy) operation, you can suspend the command and resume it when the operation is complete, as described in <span class="content_text"><a href="../SApps_handle_AEs/SAppsHandleAEs.html#//apple_ref/doc/uid/20001239-1134778">“Suspending and Resuming Apple Events and Script Commands.”</a></span> Depending on the operation, you may want to provide progress information while the command is suspended. However, suspending a command (or an Apple event) does not prevent the originating script from timing out if your application takes too long to respond to an event.</p><p>Performance can also be an issue in determining how to implement a particular application script command. For example, it may be easier to implement an object-first command, where the command calls a method for each object on which it operates. However, using an object-first approach may have performance consequences in cases where significant overhead is incurred for each object, especially when dealing with large numbers of objects. As an alternative, using the verb-first approach may allow you to minimize overhead and optimize operations on multiple objects. These approaches are described in <span class="content_text"><a href="../SApps_script_cmds/SAppsScriptCmds.html#//apple_ref/doc/uid/20001242-SW1">“Object-first Versus Verb-first Script Commands.”</a></span></p><p>For most applications, performance of Cocoa scripting's default handling of <code>whose</code> clauses should be sufficient. However, if you find the need to speed it up, you can use the mechanism described in <span class="content_text"><a href="../SApps_object_specifiers/SAppsObjectSpecifiers.html#//apple_ref/doc/uid/TP40002164-CH3-SW6">“Implementing A Method for Evaluating Object Specifiers.”</a></span></p><p>Cocoa scripting relies on key-value coding (KVC) to get and set values and find objects in your application. Performance of KVC can vary depending on the methods you implement to support it. This is especially true for operations on arrays. For tips on handling these issues, see <span class="content_text"><a href="../SApps_get_set/SAppsGetSet.html#//apple_ref/doc/uid/TP40002164-CH18-SW7">“Performance Considerations With KVC.”</a></span></p><p>For a general introduction to performance issues, see <em><a href="../../../../../referencelibrary/GettingStarted/GS_Performance/index.html#//apple_ref/doc/uid/TP30001082" target="_top">Getting Started with Performance</a></em>.<a name="//apple_ref/doc/uid/TP40001981-DontLinkElementID_171"></a></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../SApps_script_cmds/SAppsScriptCmds.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../SApps_script_classes/SAppsScriptClasses.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-03-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/ScriptableCocoaApplications/SApps_debugging/SAppsDebugging.html%3Fid%3DTP40002164-2.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/ScriptableCocoaApplications/SApps_debugging/SAppsDebugging.html%3Fid%3DTP40002164-2.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/ScriptableCocoaApplications/SApps_debugging/SAppsDebugging.html%3Fid%3DTP40002164-2.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
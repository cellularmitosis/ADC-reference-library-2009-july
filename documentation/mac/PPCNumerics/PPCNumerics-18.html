<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Formats (IM:PN)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>

<A NAME="HEADING18"></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCNumerics-17.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="PPCNumerics-19.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<FONT SIZE="-1"><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCNumerics-2.html"><B>PowerPC Numerics </B></A> / <A HREF="PPCNumerics-9.html"><B>Part 1 - The PowerPC Numerics Environment</B></A><BR><DD><A HREF="PPCNumerics-15.html"><B>Chapter 2 - Floating-Point Data Formats </B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME="HEADING18-0"></A>
<H1><A NAME="MARKER-9-80"></A>Formats </H1>
 <A NAME="MARKER-9-1"></A>This section shows the three numeric data formats: single, double, and double-double. These are pictorial representations and might not reflect the actual byte order in any particular implementation.<P>
 Each of the diagrams on the following pages is followed by a table that gives the rules for evaluating the number. In each field of each diagram, the leftmost bit is the most significant bit (msb) and the rightmost is the least significant bit (lsb). <A HREF="#MARKER-9-5">Table 2-4</A> defines the symbols used in the diagrams.
<TABLE BORDER="0" CELLPADDING="3">
<CAPTION><A NAME="MARKER-9-5"></A><B>Table 2-4 Symbols used in format diagrams</B> <A NAME="MARKER-2-13"></A></CAPTION>
<TH>Symbol<TH>Description<TR>
<TD><I>v</I> <TD>Value of number<TR>
<TD><I>s</I> <TD>Sign bit<TR>
<TD><I>e</I> <TD>Biased exponent (<I>exponent</I> + <I>bias</I>)<TR>
<TD><I>f</I> <TD>Fraction (<I>significand</I> without leading bit)</TABLE>
<P>
<A NAME="HEADING18-3"></A>
<H2>Single Format</H2>
 <A NAME="MARKER-2-10"></A>The 32-bit <B>single format</B> is divided into three fields having 1, 8, and 23 bits (see <BR><A HREF="#MARKER-9-83">Figure 2-7</A>).<P>
<B>Figure 2-7  <A NAME="MARKER-9-83"></A>Single format<A NAME="MARKER-2-80"></A></B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PPCN-L-31.jpg"><P>
 The interpretation of a single-format number depends on the values of the exponent field (<I>e</I>) and the fraction field (<I>f</I>), as shown in <A HREF="#MARKER-9-15">Table 2-5</A>. 
<TABLE BORDER="0" CELLPADDING="3">
<CAPTION><A NAME="MARKER-9-15"></A>Values of single-format numbers (32 bits) <A NAME="MARKER-2-18"></A></CAPTION>
<TH>If biased exponent e is: <TH>And fraction f is: <TH>Then value v is: <TH>And the class of v is:<TR>
<TD>
<MATH>
0 &#60; e &#60; 255
</MATH>

<TD>(any)<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215;2<SUP>(e+-127)</SUP>&#215;(1.f)
</MATH>

<TD>Normalized<TR>
<TD>
<MATH>
e = 0
</MATH>

<TD>
<MATH>
f <IMG BORDER="NONE" SRC="graphics/notequal.gif"> 0
</MATH>

<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215;2<SUP>(-126)</SUP>&#215;(0.f)
</MATH>

<TD>Denormalized<TR>
<TD>
<MATH>
e = 0
</MATH>

<TD>
<MATH>
f = 0
</MATH>

<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215;0
</MATH>

<TD>Zero<TR>
<TD>
<MATH>
e = 255
</MATH>

<TD>
<MATH>
f = 0
</MATH>

<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215; <IMG BORDER="NONE" SRC="graphics/infinity.gif"> 
</MATH>

<TD>Infinity<TR>
<TD>
<MATH>
e = 255
</MATH>

<TD>
<MATH>
f <IMG BORDER="NONE" SRC="graphics/notequal.gif"> 0
</MATH>

<TD><I>v</I> is a NaN<TD>NaN</TABLE>
<P>
 <A HREF="#MARKER-9-85">Figure 2-8</A> shows the range and density of the real numbers that can be represented as single-format floating-point numbers using normalized and denormalized values. The vertical marks indicate the relative density of the numbers that can be represented. As explained in the section <A HREF="PPCNumerics-17.html#MARKER-9-45">"Normalized Numbers" on page 2-5</A>, the number of representable values gets more dense closer to 0.<P>
<B>Figure 2-8  <A NAME="MARKER-9-85"></A>Single-format floating-point numbers on the real number line<A NAME="MARKER-2-15"></A><A NAME="MARKER-9-2"></A></B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PPCN-L-04.jpg"><P>
<A NAME="HEADING18-11"></A>
<H2>Double Format</H2>
 <A NAME="MARKER-9-85"></A>The 64-bit <B>double format</B> is divided into three fields having 1, 11, and 52 bits (see <BR><A HREF="#MARKER-9-89">Figure 2-9</A>).<P>
<B>Figure 2-9  <A NAME="MARKER-9-89"></A>Double format<A NAME="MARKER-2-16"></A></B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PPCN-L-05.jpg"><P>
 The interpretation of a double-format number depends on the values of the exponent field (<I>e</I>) and the fraction field (<I>f</I>), as shown in <A HREF="#MARKER-9-8">Table 2-6</A>. 
<TABLE BORDER="0" CELLPADDING="3">
<CAPTION><A NAME="MARKER-9-8"></A>Values of double-format numbers (64 bits) <A NAME="MARKER-2-27"></A></CAPTION>
<TH>If biased exponent e is:<TH>And fraction f is: <TH>Then value v is: <TH>And the class of v is: <TR>
<TD>
<MATH>
0 &#60; e &#60; 2047
</MATH>

<TD>(any)<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215;2<SUP>(e+-1023)</SUP>&#215;(1.f)
</MATH>

<TD>Normalized<TR>
<TD>
<MATH>
e = 0
</MATH>

<TD>
<MATH>
f <IMG BORDER="NONE" SRC="graphics/notequal.gif"> 0
</MATH>

<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215;2<SUP>(-1022)</SUP>&#215;(0.f)
</MATH>

<TD>Denormalized<TR>
<TD>
<MATH>
e = 0
</MATH>

<TD>
<MATH>
f = 0
</MATH>

<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215;0
</MATH>

<TD>Zero<TR>
<TD>
<MATH>
e = 2047
</MATH>

<TD>
<MATH>
f = 0
</MATH>

<TD>
<MATH>
v = (-1)<SUP>s</SUP>&#215; <IMG BORDER="NONE" SRC="graphics/infinity.gif"> 
</MATH>

<TD>Infinity<TR>
<TD>
<MATH>
e = 2047
</MATH>

<TD>
<MATH>
f <IMG BORDER="NONE" SRC="graphics/notequal.gif"> 0
</MATH>

<TD><I>v</I> is a NaN<TD>NaN</TABLE>
<P>
 <A HREF="#MARKER-9-91">Figure 2-10</A> shows the range and density of the real numbers that can be represented as double-format floating-point numbers using normalized and denormalized values. The vertical marks indicate the relative density of the numbers that can be represented. As explained in the section <A HREF="PPCNumerics-17.html#MARKER-9-45">"Normalized Numbers" on page 2-5</A>, the number of representable values gets more dense closer to 0.<P>
<B>Figure 2-10  <A NAME="MARKER-9-91"></A>Double-format floating-point values on the real number line<A NAME="MARKER-2-44"></A><A NAME="MARKER-2-55"></A></B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PPCN-L-06.jpg"><P>
<A NAME="HEADING18-19"></A>
<H2>Double-Double Format</H2>
 <A NAME="MARKER-2-33"></A>The 128-bit <B>double-double format</B> is made up of two double-format numbers (see <A HREF="#MARKER-9-95">Figure 2-11</A>).<P>
<B>Figure 2-11  <A NAME="MARKER-9-95"></A>Double-double format<A NAME="MARKER-2-65"></A></B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PPCN-L-07.jpg"><P>
 <A NAME="MARKER-9-87"></A>The value of a double-double number is the sum of its head and tail components. These two components are both double numbers, and therefore the value of each component is determined as shown in <A HREF="#MARKER-9-8">Table 2-6</A>. It is recommended that the tail's exponent be at least 54 less than the head's exponent. Numeric operations that produce double-double results always produce numbers in this form. <P>
<DL>
<DT><B>IMPORTANT</B>
<DD>It is possible, but not recommended, to create a double-double format that does not follow this form. If you do not follow this form when creating a double-double number, the results are unpredictable.<EM></EM>  <IMG ALIGN="BOTTOM" SRC="graphics/triangle.gif">
</DL>
 The requirement that the tail's exponent be at least 54 less than the head's exponent guarantees that the significand of the tail is more or less concatenated to the significand of the head (which is 53 bits long) when the two values are added together. For example, if the head component's exponent is 
<MATH>
2<SUP>200</SUP>
</MATH>

, the tail component's exponent can be no greater than 
<MATH>
2<SUP>146</SUP>
</MATH>

, so that in the value represented by this double-double format number, the head represents the first 53 binary digits and the tail represents the remaining digits. <P>
 Note that the difference between the exponent values may be greater than 54 and that the head and the tail can have different signs. To continue with the example, suppose the tail's exponent is 
<MATH>
2<SUP>140</SUP>
</MATH>

 instead of 
<MATH>
2<SUP>146</SUP>
</MATH>

. The binary number represented would be as shown in <A HREF="#MARKER-9-98">Figure 2-12</A>.<P>
<B>Figure 2-12  <A NAME="MARKER-9-98"></A>Double-double format number example</B><P>
<IMG ALIGN="BOTTOM" SRC="graphics/PPCN-L-09.jpg"><P>
 The head represents the binary places 
<MATH>
2<SUP>200</SUP>
</MATH>

 down to 
<MATH>
2<SUP>147</SUP>
</MATH>

. The tail represents the binary places 
<MATH>
2<SUP>140</SUP>
</MATH>

 down to 
<MATH>
2<SUP>87</SUP>
</MATH>

. The zeros between the head and the tail are necessary to represent the binary places 
<MATH>
2<SUP>146</SUP>
</MATH>

 to 
<MATH>
2<SUP>141</SUP>
</MATH>

. This particular number has 112 units of precision--53 units from the head, 53 from the tail, and 6 units between the head and the tail. The double-double format always has at least 107 bits of precision, and if the tail's exponent is more than 54 less than the head's exponent, it has even greater precision.<P>
 If the value of the head component is a normalized number, then the value of the double-double number is the sum of the head and the tail. In the recommended form, if the head is not a normalized number (meaning it is denormalized, 0, NaN, or Infinity), the head contains the value of the double-double number, and the tail contains 0. This way, when you add the head and the tail, you still get the value of the head.<A NAME="MARKER-2-19"></A><A NAME="MARKER-2-23"></A><A NAME="MARKER-2-24"></A><A NAME="MARKER-2-46"></A><A NAME="MARKER-2-41"></A><A NAME="MARKER-2-104"></A><P>
 Although the precision of the double-double format is much greater than that of the double format, the range of the two formats is the same. However, because the double-double format is implemented in software, this format is much slower to use than the double format. Because of this, you should always use the double format unless you need the extra precision provided by the double-double format.<A NAME="MARKER-2-4"></A><A NAME="MARKER-9-63"></A><A NAME="MARKER-9-3"></A><P>

</BLOCKQUOTE>
<HR>
<CENTER>
<A HREF="PPCNumerics-17.html"><IMG ALIGN="BOTTOM" SRC="prev.gif" BORDER="none" HSPACE="20" ALT="Previous"></A> <A HREF="PPCNumerics-2.html"><IMG ALIGN="BOTTOM" SRC="content.gif" BORDER="none" HSPACE="20" ALT="Book Contents"></A> <A HREF="PPCNumerics-192.html"><IMG ALIGN="BOTTOM" SRC="index.gif" BORDER="none" HSPACE="20" ALT="Book Index"></A> <A HREF="PPCNumerics-19.html"><IMG ALIGN="BOTTOM" SRC="next.gif" BORDER="none" HSPACE="20" ALT="Next"></A> </CENTER><P>
<CENTER><FONT SIZE="-1"><A HREF="PPCNumerics-3.html">&copy; Apple Computer, Inc.</A><BR>13 JUL 1996</CENTER></FONT><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

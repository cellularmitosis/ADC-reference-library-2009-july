<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A OPS03: Desktop Using Icons from Old Versions of Applications</title><meta name="keywords" content="Mac OS 7 Desktop Icons rebuilding BNDL resources Database "><meta name="Description" content="Technical Q&amp;A OPS03: Q&amp;A explains how a desktop icon or BNDLresource is associated with an application, and gives thepossible reasons for an application using the wrong, olderversion, icons and how to correct this. Q&amp;A also explainswhat happens to an app's icons when a newer version of anapplication is copied to the hard disk. Q&amp;A also deals withthe question concerning the likelihood of rebuilding thedesktop without restarting the computer."><meta name="categories" content="Operating System Utilities"><meta name="week-posted" content="Mar 26, 2001 - Mar 30, 2001"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10001484" title="Desktop Using Icons from Old Versions of Applications"></a> <!-- white background --><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A OPS03</div>
<div id="pageheadsub">Desktop Using Icons from Old Versions of Applications</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->			<!-- -->						<!-- Document Body --><CENTER><table cellspacing="0" cellpadding="0" border="0" WIDTH="600"><tr><td align="left" scope="row"><font size="+4">Q</font>  My application has suddenly stopped using the correct icons. In the past, it has properly constructed BNDL and FREF consistently, and as of last week, the correct application and document ICONS appeared on my desktop(s). Now, however,I am getting icons from an earlier version of the program. I rebuilt all mydesktops, drag-copied the application to another folder, and launched it, butnone of these things helped.<p>Everything seemed to work properly after I made changes last week, and Ihaven't changed any of the resources since then. I even tried to un-set theINITed flag, thinking that might help record the icon in the desktop.</p><p>What should I do to force the desktop to record the new icons when I create anew version of an application?</p><font size="+4">A</font>  BNDL resources can be mysterious and frustrating to deal with at times.However, there are some general guidelines to follow which should alleviatemost problems:<p>*    Eliminate all other copies of your application anywhere on your system.All older versions that use the same creator and file types must be removed.Older versions affect the Finder database when you rebuild the desktop (i.e.,the Finder defaults back to your original BNDL resource).<br>*    Make sure the BNDL bit is checked in the ResEdit Get Info box for theapplication resource, and that the Inited bit is unchecked, before you rebuildthe desktop.<br>*    Check all ICON numbers to be sure they match their BNDL numbers, and makesure the signature in the BNDL resource matches the Creator in the Info window.It is also advisable to start your numbering scheme from 128 (the default),rather than trying to use an extravagant number system.<br>*    Rebuild the desktop, bearing in mind that if older versions of yourapplication exist anywhere on the system, the Finder defaults to the icons fromthose old copies and never looks at your new BNDL resources. If you removed allof the old copies, the Finder checks your BNDL during the desktop rebuild,checks the INITed bit, and displays your icons appropriately.<br></p><p>If you have to leave older versions of your application on your hard disk forsome reason, store them in a manner that prevents their outdated BNDLinformation from being included in the Desktop Database (e.g., put them in acompressed archive).</p><font size="+4">Q</font>  When a new version of an application is copied onto the hard disk (or copied between folders) and then launched, doesn't the application replace the iconentries in the Desktop Database with the ones in the new version? When youupgrade some applications, they change all the icons, including those fromolder document files, even when you have multiple versions of the applicationon your hard disk. How can I force a desktop rebuild on the boot disk (otherthan holding down the Command and Option keys during startup)?<BR><BR><font size="+4">A</font> Applications don't replace the icon records in the Desktop Database when you copy a new version of the application to your hard disk. Instead, the Finder reads the application's Finder information to determine whether it has "seen" the application or any of its files before. It does this by examining thehasBeenInited bit in the fdFlags field of the FInfo record returned inioFlFndrInfo byPBGetFInfo or PBGetCatInfo. If the hasBeenInited bit is set, the Finder assumes it has seen the file before, and it uses the BNDL information that is already in the Desktop Database todisplay an icon for the application.<p>If the Finder hasn't seen the file previously, it gives it a position on thedesktop or in a window, and it reads the file's BNDL resource (if any) and addswhatever information it finds to the volume's Desktop Database. Note that theFinder does not necessarily display the new icon if it comes across older BNDLinfo for the same creator. In other words, copying a new version of anapplication with the same creator does not cause the icon information to bereplaced. It merely adds another BNDL resource to the Desktop Database. TheFinder displays the first icon it encounters in the Desktop Database,regardless of whether a newer icon exists elsewhere in the database.</p> <p>The only guaranteed way to get the system to "forget" the older icons it knowsfor a given creator is to rebuild the desktop after removing older copies ofthe application. The easiest way to avoid these problems is to use a sharewareutility called BNDL Banger, which lets you decide which icons you wantdisplayed.</p><!-- begin_date --><H4 ALIGN=center>[Mar 26 2001]</H4><!-- end_date --></td></tr></table></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/ops/ops03.html%3Fid%3DDTS10001484-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/ops/ops03.html%3Fid%3DDTS10001484-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/ops/ops03.html%3Fid%3DDTS10001484-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
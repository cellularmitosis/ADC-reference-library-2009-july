<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html><head>
<!-- BEGIN META TAG INFO -->
<link rel="home" href="http://developer.apple.com/">
<link rel="find" href="http://developer.apple.com/search/">
<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
<script language="JavaScript" type="text/javascript" src="../../documentation/js/busnav.js"></script>
<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<!-- END META TAG INFO -->
<!-- BEGIN TITLE -->
<title>Technical Q&amp;A QA1501: Core Video - Available Pixel Formats</title>
<!-- END TITLE -->
</head>
<!-- BEGIN BODY OPEN -->
<body bgcolor="#ffffff"><a name="//apple_ref/doc/uid/DTS10004198" title="Core Video - Available Pixel Formats"></a>
<!--END BODY OPEN -->
<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->
<a name="top"></a>
<!-- BEGIN LOGO AND SEARCH -->
<!--#include virtual="/includes/adcnavbar"-->
<!-- END LOGO AND SEARCH -->
<!-- START BREADCRUMB -->
<div id="breadcrumb"><table width="680" border="0" cellpadding="0" cellspacing="0"><tr>
<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
<td><img width="340" height="10" src="images/1dot.gif" alt=""></td></tr><tr valign="middle"><td align="left" colspan="2">
<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/QuickTime/index.html">QuickTime</a> &gt; <a href="../../technicalqas/QuickTime/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; 
</td></tr><tr><td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td></tr></table></div>
<!-- END BREADCRUMB -->

<!-- START MAIN CONTENT -->
<!-- START TITLE GRAPHIC AND INTRO-->
<table width="680" border="0" cellpadding="0" cellspacing="0"><tr align="left" valign="top">
<td><h1>
<div id="pagehead">Technical Q&amp;A QA1501</div>
<div id="pageheadsub">Core Video - Available Pixel Formats</div>
</h1></td></tr></table>
<!-- END TITLE GRAPHIC AND INTRO -->
<!-- BEGIN WIDE COLUMN -->
<table width="680" border="0" cellpadding="0" cellspacing="0"><tr align="left" valign="top"><td align="left" width="680">
<!-- BEGIN CONTENTS -->
<h2>Q: What pixel formats does Core Video currently support, and is there an API that can be used to retrieve this information programatically?</h2><p>A: A Core Video Pixel Buffer (represented by the opaque type <code>CVPixelBufferRef</code>) is an image buffer that holds pixels in main memory. Applications generating frames, compressing / decompressing video or using Core Image can all make use of Core Video Pixel Buffers.</p><p>Individual pixel buffers can be created and managed using APIs such as <code>CVPixelBufferCreate</code>, <code>CVPixelBufferCreateWithBytes</code>, <code>CVPixelBufferGetWidth,</code> <code>CVPixelBufferGetHeight</code> and so on (see <code>CVPixelBuffer.h</code>). A pool of pixel buffers can also be created for managing a set of <code>CVPixelBuffer</code> objects that are going to be recycled, for example, during a compression operation (see <code>CVPixelBufferPool.h</code>) and <code>CIImage</code> objects can be created from pixel buffers using methods such as <code>initWithCVImageBuffer:</code>.</p><p>At the time of this writing (Mac OS X 10.4.8 w/QuickTime 7.1.3), Core Video supports the pixel formats shown in Table 1. Note  that new pixel formats may be added over time:</p><p class="smalltext"><strong>Table 1:</strong> Core Video supported pixel formats.</p><table cellspacing="0" class="graybox"><tr><th>Pixel Format</th><th>Description</th></tr><tr><td scope="row">k32ARGBPixelFormat</td><td>32 - 8 bits per component Alpha, Red, Green, and Blue</td></tr><tr><td scope="row">k24RGBPixelFormat</td><td>24 - 8 bits per component Red, Green, and Blue</td></tr><tr><td scope="row">k16BE555PixelFormat</td><td>16 - MSB is unused, followed by 5 bits per component Red, Green and Blue</td></tr><tr><td scope="row">k32BGRAPixelFormat</td><td>BGRA - 8 bits per component Blue, Green, Red, and Alpha</td></tr><tr><td scope="row">k16GrayPixelFormat</td><td>b16g - 16-bit big-endian Grayscale</td></tr><tr><td scope="row">k32AlphaGrayPixelFormat</td><td>b32a - 16-bit big-endian AlphaGray</td></tr><tr><td scope="row">k64ARGBPixelFormat</td><td>b64a - 16 bits per component, big-endian Alpha, Red, Green and Blue</td></tr><tr><td scope="row">k48RGBPixelFormat</td><td>b48r - 16 bits per component big-endian Red, Green and Blue</td></tr><tr><td scope="row">k422YpCbCr8PixelFormat</td><td>2vuy - Component Y'CbCr 8-bit 4:2:2</td></tr><tr><td scope="row">kYUVSPixelFormat</td><td>yuvs - Component Y&rsquo;CbCr 8-bit 4:2:2</td></tr><tr><td scope="row">k444YpCbCr8CodecType</td><td>v308 -  Component Y'CbCr 8-bit 4:4:4</td></tr><tr><td scope="row">k422YpCbCr16CodecType</td><td>v216 - Component Y'CbCr 10,12,14,16-bit 4:2:2</td></tr><tr><td scope="row">k422YpCbCr10CodecType</td><td>v210 - Component Y'CbCr 10-bit 4:2:2</td></tr><tr><td scope="row">k4444YpCbCrA8RPixelFormat</td><td>r408 -  Component Y'CbCrA 8-bit 4:4:4:4, rendering format, full range alpha, zero biased yuv</td></tr><tr><td scope="row">k4444YpCbCrA8PixelFormat</td><td>v408 - Component Y'CbCrA 8-bit 4:4:4:4</td></tr><tr><td scope="row">k444YpCbCr10CodecType</td><td>v410 - Component Y'CbCr 10-bit 4:4:4</td></tr><tr><td scope="row">'r4fl'</td><td>r4fl - Component Y'CbCr 32-bit floating point 4:4:4:4, superblack support</td></tr></table><div class="notebox"><p><strong>Note:</strong> For information regarding the memory/file layout of pixel data defined by these pixel format types, see Ice Floe Dispatch 20 <A HREF="../../quicktime/icefloe/dispatch020.html">QuickTime Pixel Format FourCCs</A></p></div><p>There are two APIs that can be used to dynamically retrieve all the pixel format OSTypes and Pixel Format Descriptions known to Core Video:</p><p>Use <code>CVPixelFormatDescriptionArrayCreateWithAllPixelFormatTypes</code> to retrieve an array of OSTypes.</p><pre class="sourcecodebox">
CFArrayRef CVPixelFormatDescriptionArrayCreateWithAllPixelFormatTypes(CFAllocatorRef allocator)

Description:
    Returns a CFArrayRef containing a list of all supported pixel format types.

allocator - The allocator used to allocate memory for the array and its storage for values.
            Pass kCFAllocatorDefault to specify the default allocator.
</pre><p>Use <code>CVPixelFormatDescriptionCreateWithPixelFormatType</code> to retrieve a pixel format description dictionary.</p><pre class="sourcecodebox">
CFDictionaryRef CVPixelFormatDescriptionCreateWithPixelFormatType(CFAllocatorRef allocator,
                                                                  OSType pixelFormat)

Description:
    Returns a CFDictionaryRef containing the pixel format description for the passed in pixel format type.

allocator - The allocator to use when creating the description. Pass kCFAllocatorDefault to specify the
            default allocator.

pixelFormat - A four-character code that identifies the pixel format description you want to obtain.

Notes:
    The returned Core Foundation dictionary contains the pixel format description. See &ldquo;Pixel Format
    Description Keys&rdquo; for more detailed information regarding the keys relevant to the format description.

Pixel Format Description Dictionary Keys:

kCVPixelFormatName - The name of the pixel format (type CFString).

kCVPixelFormatConstant - The pixel format constant for QuickTime.

kCVPixelFormatCodecType - The codec type (type CFString). For example, '2vuy' or k422YpCbCr8CodecType.

kCVPixelFormatFourCC - The Microsoft FourCC equivalent code for this pixel format (type CFString).

kCVPixelFormatPlanes - The number of image planes associated with this format (type CFNumber).

kCVPixelFormatBlockWidth - The width, in pixels, of the smallest byte-addressable group of pixels
                           (type CFNumber). Assumed to be 1 if this key is not present.

kCVPixelFormatBlockHeight - The height, in pixels, of the smallest byte-addressable group of pixels
                            (type CFNumber). Assumed to be 1 if this key is not present.

kCVPixelFormatBitsPerBlock - The number of bits per block (type CFNumber). For simple pixel formats,
                             this value is the same as the traditional bits-per-pixel value. This key is
                             mandatory in pixel format descriptions.

kCVPixelFormatBlockHorizontalAlignment  - The horizontal alignment requirements of this format
                                          (type CFNumber). Assumed to be 1 if this key is not present.

kCVPixelFormatBlockVerticalAlignment - The vertical alignment requirements of this format (type CFNumber).
                                       Assumed to be 1 if this key is not present.

kCVPixelFormatHorizontalSubsampling - Horizontal subsampling information for this plane
                                      (type CFNumber). Assumed to be 1 if this key is not present.

kCVPixelFormatVerticalSubsampling - Vertical subsampling information for this plane
                                    (type CFNumber). Assumed to be 1 if this key is not present.

kCVPixelFormatOpenGLFormat - The OpenGL format used to describe this image plane (if applicable)
                             (type CFNumber). See the OpenGL specification for possible values.

kCVPixelFormatOpenGLType - The OpenGL type to describe this image plane (if applicable)
                           (type CFNumber). See the OpenGL specification for possible values.

kCVPixelFormatOpenGLInternalFormat - The OpenGL internal format for this pixel format (if applicable).
                                     (type CFNumber). See the OpenGL specification for possible values.

kCVPixelFormatCGBitmapInfo - The Core Graphics bitmap information for this pixel format (if applicable).

kCVPixelFormatQDCompatibility - Indicates whether this format is compatible with QuickDraw (type CFBoolean).

kCVPixelFormatCGBitmapContextCompatibility - Indicates whether this format is compatible with Core Graphics
                                             bitmap contexts(type CFBoolean).

kCVPixelFormatCGImageCompatibility - Indicates whether this format is compatible with the CGImage type
                                     (type CFBoolean).

kCVPixelFormatOpenGLCompatibility - Indicates whether this format is compatible with OpenGL (type CFBoolean).

kCVPixelFormatFillExtendedPixelsCallback - Specifies a custom extended pixel fill algorithm (type CFData).
</pre><p>Listing 1 demonstrates how to retrieve a list of supported Core Video pixel format types with the output produced shown in Listing 2.</p><p class="smalltext"><strong>Listing 1:</strong> Retrieving pixel format types known to Core Video.</p><pre class="sourcecodebox">
{
    CFArrayRef pixelFormatDescriptionsArray = NULL;
    CFIndex i;

    pixelFormatDescriptionsArray =
    CVPixelFormatDescriptionArrayCreateWithAllPixelFormatTypes(kCFAllocatorDefault);

    printf(&quot;Core Video Supported Pixel Format Types:\n\n&quot;);

    for (i = 0; i &lt; CFArrayGetCount(pixelFormatDescriptionsArray); i++) {
        CFStringRef pixelFormat = NULL;

        CFNumberRef pixelFormatFourCC = (CFNumberRef)CFArrayGetValueAtIndex(pixelFormatDescriptionsArray, i);

        if (pixelFormatFourCC != NULL) {
            UInt32 value;

            CFNumberGetValue(pixelFormatFourCC, kCFNumberSInt32Type, &amp;value);

            if (value &lt;= 0x28) {
                pixelFormat = CFStringCreateWithFormat(kCFAllocatorDefault, NULL,
                              CFSTR(&quot;Core Video Pixel Format Type: %d\n&quot;), value);
            } else {
                pixelFormat = CFStringCreateWithFormat(kCFAllocatorDefault, NULL,
                              CFSTR(&quot;Core Video Pixel Format Type (FourCC):
                              %c%c%c%c\n&quot;), (char)(value &gt;&gt; 24), (char)(value &gt;&gt; 16),
                              (char)(value &gt;&gt; 8), (char)value);
            }

            CFShow(pixelFormat);
            CFRelease(pixelFormat);
        }
    }
}
</pre><p class="smalltext"><strong>Listing 2:</strong> Output produced by Listing 1.</p><pre class="sourcecodebox">
Core Video Pixel Format Type: 32
Core Video Pixel Format Type: 24
Core Video Pixel Format Type: 16
Core Video Pixel Format Type (FourCC): 2vuy
Core Video Pixel Format Type (FourCC): yuvs
Core Video Pixel Format Type (FourCC): r408
Core Video Pixel Format Type (FourCC): v408
Core Video Pixel Format Type (FourCC): BGRA
Core Video Pixel Format Type (FourCC): b64a
Core Video Pixel Format Type (FourCC): b48r
Core Video Pixel Format Type (FourCC): b32a
Core Video Pixel Format Type (FourCC): b16g
Core Video Pixel Format Type (FourCC): v308
Core Video Pixel Format Type (FourCC): v216
Core Video Pixel Format Type (FourCC): v210
Core Video Pixel Format Type (FourCC): v410
Core Video Pixel Format Type (FourCC): r4fl
</pre><p>Listing 3 shows an example of the Pixel Format Description dictionary values returned by calling <code>CVPixelFormatDescriptionCreateWithPixelFormatType</code> for <code>k32ARGBPixelFormat</code> and Listing 4 shows the Pixel Format Description values returned for <code>k422YpCbCr8PixelFormat</code>.</p><p class="smalltext"><strong>Listing 3:</strong> Pixel Format Description values for k32ARGBPixelFormat.</p><pre class="sourcecodebox">
kCVPixelFormatConstant - 32
kCVPixelFormatBitsPerBlock - 32
kCVPixelFormatQDCompatibility - true
kCVPixelFormatCGBitmapContextCompatibility - true
kCVPixelFormatCGImageCompatibility - true
kCVPixelFormatCGBitmapInfo - kCGImageAlphaFirst | kCGBitmapByteOrder32Big
kCVPixelFormatFillExtendedPixelsCallback - Extended fill procedure for this pixel format

Mac OS X:
    kCVPixelFormatOpenGLFormat - GL_BGRA
    kCVPixelFormatOpenGLInternalFormat - GL_RGBA8

    PPC Based Mac (Big Endian):
        kCVPixelFormatOpenGLCompatibility - true
        kCVPixelFormatOpenGLType - GL_UNSIGNED_INT_8_8_8_8_REV

    Intel Based Mac (Little Endian):
        kCVPixelFormatOpenGLType - GL_UNSIGNED_INT_8_8_8_8
</pre><p class="smalltext"><strong>Listing 4:</strong> Pixel Format Description values for k422YpCbCr8PixelFormat.</p><pre class="sourcecodebox">
kCVPixelFormatConstant - k422YpCbCr8PixelFormat
kCVPixelFormatBlockWidth - 2
kCVPixelFormatBitsPerBlock - 32
kCVPixelFormatFillExtendedPixelsCallback - Extended fill procedure for this pixel format

Mac OS X:
    kCVPixelFormatOpenGLCompatibility - true
    kCVPixelFormatOpenGLFormat - GL_YCBCR_422_APPLE
    kCVPixelFormatOpenGLInternalFormat - GL_RGB

    PPC Based Mac (Big Endian):
        kCVPixelFormatOpenGLType - GL_UNSIGNED_SHORT_8_8_REV_APPLE

    Intel Based Mac (Little Endian):
        kCVPixelFormatOpenGLType - GL_UNSIGNED_SHORT_8_8_APPLE

Windows (if Direct3D supports the format):
    kCVPixelFormatDirect3DCompatibility - true
    kCVPixelFormatDirect3DFormat - D3DFMT_UYVY
    kCVPixelFormatDirect3DType - D3DFMT_UYVY
    kCVPixelFormatDirect3DInternalFormat - D3DFMT_UYVY
</pre><div class="notebox"><p><strong>Note:</strong> Rendering to a Pixel Buffer Visual Context is currently not available in QuickTime for Windows.</p></div><A NAME="TNTAG3"></A><H2>References</H2><ul><li><p><A HREF="../../quicktime/icefloe/dispatch020.html">QuickTime Pixel Format FourCCs</A></p></li><li><p><A HREF="../../documentation/GraphicsImaging/Reference/CoreVideoRef/Reference/reference.html#//apple_ref/doc/constant_group/Pixel_Format_Description_Keys">Pixel Format Description Keys</A></p></li><li><p><A HREF="../../documentation/GraphicsImaging/Conceptual/CoreVideo/CVProg_Intro/chapter_1_section_1.html">Core Video Programming Guide</A></p></li><li><p><A HREF="../../documentation/GraphicsImaging/Reference/CoreVideoRef/index.html#//apple_ref/doc/uid/TP40001537">Core Video Reference</A></p></li><li><p><A HREF="../qa2005/qa1443.html">Technical Q&amp;A QA1443, 'Using QTPixelBufferContextCreate with NewMovieFromProperties'</A></p></li></ul><p><a href="#top">Back to Top</a>&nbsp;<a href="#top"><img src="images/arrow_linkup.gif" height="7" width="10" border="0" alt=""></a></p><A NAME="TNT_HISTORY_TAG"></A><H2>Document Revision History</H2><table cellspacing="0" class="graybox" width="680"><tr><th width="100">Date</th><th width="580">Notes</th></tr><tr><td scope="row">2007-01-23</td><td>First Version</td></tr></table><p><b>Posted:</b> 2007-01-23</p>
<!-- END CONTENTS -->
</td></tr></table>
<!-- END WIDE COLUMN -->
<!-- END MAIN CONTENT -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qa2006/qa1501.html%3Fid%3DDTS10004198-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qa2006/qa1501.html%3Fid%3DDTS10004198-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qa2006/qa1501.html%3Fid%3DDTS10004198-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

<!-- START BOTTOM APPLE NAVIGATION -->
<!--#include virtual="/includes/footer"-->
<!-- END BOTTOM APPLE NAVIGATION -->
<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->
</body></html>
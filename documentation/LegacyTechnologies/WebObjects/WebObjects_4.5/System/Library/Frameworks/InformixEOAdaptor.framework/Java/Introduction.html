<HTML>		<HEAD>		<TITLE>					</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!-- #include virtual="/techpubs/navbar" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>InformixEOAdaptor Reference</font><br><br><!--end of path --><a href="InformixEOAdaptorTOC.html"><img src="../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <br><h1><FONT COLOR=\"#000066\">InformixEOAdaptor</FONT></h1><br><blockquote><b>Package: </b>com.apple.yellow.informixeoadaptor</blockquote><HR SIZE=4><br><h2>Introduction</h2><p>The InformixEOAdaptor framework is a set of classes that allowyour programs to connect to an Informix server. These classes provideInformix-specific method implementations for the EOAccess framework'sEOAdaptor, EOAdaptorChannel, EOAdaptorContext, and EOSQLExpressionabstract classes.</p><p>The following table lists the classes in the InformixEOAdaptorFramework and provides a brief description of each class.</p><br><table border = \"1\"><tr><td scope="row"><b>Class</b></td><td><b>Description</b></td></tr><tr><td scope="row">InformixAdaptor</td><td>Representsa single connection to a Informix database server, and is responsiblefor keeping login and model information, performing Informix-specificformatting of SQL expressions, and reporting errors. </td></tr><tr><td scope="row">InformixChannel</td><td>Representsan independent communication channel to the database server itsInformixAdaptor is connected to.</td></tr><tr><td scope="row">InformixContext</td><td>Representsa single transaction scope on the database server to which its adaptorobject is connected.</td></tr><tr><td scope="row">InformixSQLExpression</td><td>Defineshow to build SQL statements for InformixChannels.</td></tr></table><br><br><h2>The Connection Dictionary</h2><p>The connection dictionary contains items needed to connectto an Informix server, such as the database name (it's common toomit the user name and password from the connection dictionary,and prompt users to enter those values in a login panel). The keysof this dictionary identify the information the server expects,and the values of those keys are the values that the adaptor useswhen trying to connect to the server.</p><p>The Informix adaptor defines string constants for use as connectiondictionary keys:</p><ul><li> <a frame= "conv" href="Classes/InformixAdaptor.html#BCEFFFJD">dbNameKey</a></li><li> <a frame= "conv" href="Classes/InformixAdaptor.html#BCEEDJHA">userNameKey</a></li><li> <a frame= "conv" href="Classes/InformixAdaptor.html#BCEHDHGI">passwordKey</a></li></ul><p>See the  <a frame= "conv" href="Classes/InformixAdaptor.html#BCEEFHBI">InformixAdaptor</a> class specificationfor more information on the connection dictionary key constants.</p><br><h2>Locking</h2><p>All adaptors use the database server's native locking facilitiesto lock rows on the server. In the Informix adaptor locking is determinedby the isolation level, which is implemented in InformixChannel. Lockingoccurs when:</p><ul><li>You send the adaptor channel a <b>selectAttributes</b> messagewith <code>true</code> specified asthe value for the <b>lock</b> parameter.</li><li>You explicitly lock an object's row with the EODatabaseContext's <b>lockObjectWithGlobalID</b> message.</li><li>You set pessimistic locking at the database level and fetchobjects.</li></ul><br><a name = "BCEDIEJC"><h2>Data Type Mapping</h2></a><p>Every adaptor provides a mapping between each server datatype and the Java type to which a database value will be coercedwhen it's fetched from the database. The following table liststhe mapping used by InformixAdaptor.</p><br><table border = \"1\"><tr><td scope="row"><b>InformixData Type</b></td><td><b>Java Data Type</b></td></tr><tr><td scope="row"><code>VARCHAR</code></td><td>String</td></tr><tr><td scope="row"><code>NVARCHAR</code></td><td>String</td></tr><tr><td scope="row"><code>DECIMAL</code></td><td>BigDecimal</td></tr><tr><td scope="row"><code>MONEY</code></td><td>BigDecimal</td></tr><tr><td scope="row"><code>BYTE</code></td><td>NSData</td></tr><tr><td scope="row"><code>TEXT</code></td><td>String</td></tr><tr><td scope="row"><code>DATE</code></td><td>NSGregorianDate</td></tr><tr><td scope="row"><code>INTEGER</code></td><td>Number</td></tr><tr><td scope="row"><code>SMALLINT</code></td><td>Number</td></tr><tr><td scope="row"><code>NCHAR</code></td><td>String</td></tr><tr><td scope="row"><code>CHAR</code></td><td>Number</td></tr><tr><td scope="row"><code>SERIAL</code></td><td>Number</td></tr><tr><td scope="row"><code>FLOAT</code></td><td>Number</td></tr><tr><td scope="row"><code>SMALLFLOAT</code></td><td>Number</td></tr><tr><td scope="row"><code>DATETIMEYEAR TO SECOND</code></td><td>NSGregorianDate</td></tr><tr><td scope="row"><code>INTERVAL</code></td><td>String</td></tr></table><br><p>The type mapping methods-<b>externalTypesWithModel</b>, <b>internalTypeForExternalTypeInModel</b>,and <b>isValidQualifierTypeInModel</b>-allowfor an adaptor to supplement its set of type mappings with additionalmappings for user-defined database types. InformixAdaptor does notmake use of the model argument if one is provided.</p><br><h2>Prototype Attributes</h2><p>The InformixEOAdaptor Framework provides the following setof prototype attributes:</p><br><table border = \"1\"><tr><td scope="row"><b>Name</b></td><td><b>External Type</b></td><td><b>ValueClass Name</b></td><td><b>Other Attributes</b></td></tr><tr><td scope="row"><code>binaryID</code></td><td><code>BYTE</code></td><td>NSData</td><td>&nbsp;</td></tr><tr><td scope="row"><code>city</code></td><td><code>VARCHAR</code></td><td>String</td><td><code>columnName= CITY</code><code>width = 50</code></td></tr><tr><td scope="row"><code>date</code></td><td><code>DATETIMEYEAR TO SECOND</code></td><td>NSGregorianDate</td><td><code>columnName= ""</code></td></tr><tr><td scope="row"><code>longText</code></td><td><code>TEXT</code></td><td>String</td><td>&nbsp;</td></tr><tr><td scope="row"><code>money</code></td><td><code>INTEGER</code></td><td>BigDecimal</td><td><code>columnName= ""</code></td></tr><tr><td scope="row"><code>phoneNumber</code></td><td><code>VARCHAR</code></td><td>String</td><td><code>columnName= PHONE</code><code>width = 20</code></td></tr><tr><td scope="row"><code>rawImage</code></td><td><code>BYTE</code></td><td>NSData</td><td><code>columnName= RAW_IMAGE</code></td></tr><tr><td scope="row"><code>state</code></td><td><code>VARCHAR</code></td><td>String</td><td><code>columnName= STATE</code><code>width = 2</code></td></tr><tr><td scope="row"><code>streetAddress</code></td><td><code>VARCHAR</code></td><td>String</td><td><code>columnName= STREET_ADDRESS</code><code>width = 100</code></td></tr><tr><td scope="row"><code>tiffImage</code></td><td><code>BYTE</code></td><td>NSImage</td><td><code>adaptorValueConversionMethodName=    TIFFRepresentation</code><code>columnName = PHOTO</code><code>valueFactoryMethodName = "imageWithData:"</code></td></tr><tr><td scope="row"><code>uniqueID</code></td><td><code>INTEGER</code></td><td>Number</td><td><code>columnName= ""</code><code>valueType = i</code></td></tr><tr><td scope="row"><code>zipCode</code></td><td><code>VARCHAR</code></td><td>String</td><td><code>columnName= ZIP</code><code>width = 10</code></td></tr></table><br><br><h2>Generating Primary Keys</h2><p>Each adaptor provides a database-specific implementation ofthe method <b>primaryKeyForNewRow</b> for generatingprimary keys. The InformixChannel's implementation uses a tablenamed <code>eo_sequence_table</code> tokeep track of the next available primary key value for a given table.The table contains a row for each table for which the adaptor providesprimary key values. The statement used to create the <code>eo_sequence_table</code> is:</p><blockquote><pre>create table eo_sequence_table (    table_name varchar(32,0),    counter integer)</pre></blockquote><br><p>InformixChannel uses a stored procedure named <code>eo_pk_for_table</code> toaccess and maintain the primary key counter in <code>eo_sequence_table</code>.The stored procedure is defined as follows:</p><blockquote><pre>create procedureeo_pk_for_table (tname varchar(32))returning int;    define cntr int;    update EO_SEQUENCE_TABLE    set COUNTER = COUNTER + 1    where TABLE_NAME = tname;    select COUNTER into cntr    from EO_SEQUENCE_TABLE    where TABLE_NAME = tname;    return cntr;end procedure;</pre></blockquote><br><p>The stored procedure increments the counter in the <code>eo_sequence_table</code> rowfor the specified table, selects the counter value, and returnsit. InformixChannel executes this <code>eo_pk_for_table</code> stored procedurefrom <b>primaryKeyForNewRow</b> and returns thestored procedure's return value.</p><p>To use InformixChannel's database-specific primary key generationmechanism, be sure that your database accommodates the adaptor'sscheme. To modify your database so that it supports the adaptor'smechanism for generating primary keys, use EOModeler. For more informationon this topic, see <i>Enterprise Objects Framework Developer'sGuide</i>.</p><br><h2>Bind Variables</h2><p>The InformixAdaptor uses bind variables. A bind variable isa placeholder used in an SQL statement that is replaced with anactual value after the database server determines an execution plan.You use the following methods to operate on bind variables:</p><ul><li><b>bindVariableDictionaryForAttribute</b></li><li><b>mustUseBindVariableForAttribute</b></li><li><b>shouldUseBindVariableForAttribute</b> </li></ul><p></p><br><a href="InformixEOAdaptorTOC.html"><img src="../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
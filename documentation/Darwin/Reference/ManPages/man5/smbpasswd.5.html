<html><head><title>Mac OS X
 Manual Page For smbpasswd(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/smbpasswd" title="Mac OS X
 Manual Page for smbpasswd(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/smbpasswd"; name=smbpasswd(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
SMBPASSWD(5)                                                                                    SMBPASSWD(5)



<b>NAME</b>
       smbpasswd - The Samba encrypted password file

<b>SYNOPSIS</b>
       <u>smbpasswd</u>

<b>DESCRIPTION</b>
       This tool is part of the <a href="../man7/samba.7.html#//apple_ref/doc/man/7/samba"><b>samba</b>(7)</a> suite.

       smbpasswd  is  the  Samba encrypted password file. It contains the username, Unix user id and the SMB
       hashed passwords of the user, as well as account flag information and the time the password was  last
       changed.  This  file format has been evolving with Samba and has had several different formats in the
       past.

<b>FILE</b> <b>FORMAT</b>
       The format of the smbpasswd file used by Samba 2.2 is very similar to  the  familiar  Unix  <a href="passwd.5.html#//apple_ref/doc/man/5/passwd"><u>passwd(5)</u></a><u></u>
       file.  It is an ASCII file containing one line for each user. Each field ithin each line is separated
       from the next by a colon. Any entry beginning with '#' is ignored. The smbpasswd  file  contains  the
       following information for each user:

       name
          This is the user name. It must be a name that already exists in the standard UNIX passwd file.

       uid
          This  is  the  UNIX  uid. It must match the uid field for the same user entry in the standard UNIX
          passwd file. If this does not match then Samba will refuse to recognize this smbpasswd file  entry
          as being valid for a user.

       Lanman Password Hash
          This  is the LANMAN hash of the user's password, encoded as 32 hex digits. The LANMAN hash is cre-<font color="#ffffff" class="whiteout">ated&nbsp;created</font>
          ated by DES encrypting a well known string with the user's password as the DES key.  This  is  the
          same  password used by Windows 95/98 machines. Note that this password hash is regarded as weak as
          it is vulnerable to dictionary attacks and if two users choose the same password this  entry  will
          be  identical  (i.e. the password is not "salted" as the UNIX password is). If the user has a null
          password this field will contain the characters "NO PASSWORD" as the start of the hex  string.  If
          the hex string is equal to 32 'X' characters then the user's account is marked as <b>disabled</b> and the
          user will not be able to log onto the Samba server.

          <b>WARNING</b> <b>!!</b>  Note that, due to the challenge-response nature of the SMB/CIFS authentication  proto-<font color="#ffffff" class="whiteout">col,&nbsp;protocol,</font>
          col,  anyone  with  a  knowledge of this password hash will be able to impersonate the user on the
          network. For this reason these hashes are known as <b>plain</b> <b>text</b> <b>equivalents</b> and  must  <b>NOT</b>  be  made
          available  to anyone but the root user. To protect these passwords the smbpasswd file is placed in
          a directory with read and traverse access only to the root user and the smbpasswd file itself must
          be set to be read/write only by root, with no other access.

       NT Password Hash
          This  is the Windows NT hash of the user's password, encoded as 32 hex digits. The Windows NT hash
          is created by taking the user's password as represented in 16-bit, little-endian UNICODE and  then
          applying the MD4 (internet rfc1321) hashing algorithm to it.

          This  password  hash  is  considered more secure than the LANMAN Password Hash as it preserves the
          case of the password and uses a much higher quality hashing algorithm. However, it  is  still  the
          case that if two users choose the same password this entry will be identical (i.e. the password is
          not "salted" as the UNIX password is).

          <b>WARNING</b> <b>!!</b>. Note that, due to the challenge-response nature of the SMB/CIFS authentication  proto-<font color="#ffffff" class="whiteout">col,&nbsp;protocol,</font>
          col,  anyone  with  a  knowledge of this password hash will be able to impersonate the user on the
          network. For this reason these hashes are known as <b>plain</b> <b>text</b> <b>equivalents</b> and  must  <b>NOT</b>  be  made
          available  to anyone but the root user. To protect these passwords the smbpasswd file is placed in
          a directory with read and traverse access only to the root user and the smbpasswd file itself must
          be set to be read/write only by root, with no other access.

       Account Flags
          This  section  contains  flags  that  describe  the attributes of the users account. This field is
          bracketed by '[' and ']' characters and is always 13 characters in length (including the  '['  and
          ']' characters). The contents of this field may be any of the following characters:

               <b>U</b> - This means this is a "User" account, i.e. an ordinary user.

               <b>N</b> - This means the account has no password (the passwords in the fields LANMAN Password Hash
                and NT Password Hash are ignored). Note that this will only allow users to log  on  with  no
                password if the
                 <u>null</u> <u>passwords</u> parameter is set in the <a href="smb.conf.5.html#//apple_ref/doc/man/5/smb.conf"><b>smb.conf</b>(5)</a> config file.

               <b>D</b> - This means the account is disabled and no SMB/CIFS logins will be allowed for this user.

               <b>X</b> - This means the password does not expire.

               <b>W</b> - This means this account is a "Workstation Trust" account. This kind of account  is  used
                in  the  Samba PDC code stream to allow Windows NT Workstations and Servers to join a Domain
                hosted by a Samba PDC.

             Other flags may be added as the code is extended in future. The rest of  this  field  space  is
             filled  in  with  spaces. For further information regarding the flags that are supported please
             refer to the man page for the pdbedit command.

       Last Change Time
          This field consists of the time the account was last  modified.  It  consists  of  the  characters
          'LCT-'  (standing  for "Last Change Time") followed by a numeric encoding of the UNIX time in sec-<font color="#ffffff" class="whiteout">onds&nbsp;seconds</font>
          onds since the epoch (1970) that the last change was made.

       All other colon separated fields are ignored at this time.

<b>VERSION</b>
       This man page is correct for version 3.0 of the Samba suite.

<b>SEE</b> <b>ALSO</b>
       <a href="../man8/smbpasswd.8.html#//apple_ref/doc/man/8/smbpasswd"><b>smbpasswd</b>(8)</a>, <!-- a --><b>Samba</b>(7)<!-- /a -->, and the Internet RFC1321 for details on the MD4 algorithm.

<b>AUTHOR</b>
       The original Samba software and related utilities were created  by  Andrew  Tridgell.  Samba  is  now
       developed  by  the Samba Team as an Open Source project similar to the way the Linux kernel is devel-<font color="#ffffff" class="whiteout">oped.&nbsp;developed.</font>
       oped.

       The original Samba man pages were written by Karl Auer. The man page sources were converted  to  YODL
       format     (another     excellent     piece     of     Open    Source    software,    available    at
       <a href="ftp://ftp.icce.rug.nl/pub/unix/)">ftp://ftp.icce.rug.nl/pub/unix/)</a> and updated for the Samba 2.0 release by Jeremy Allison. The conver-
       sion  to DocBook for Samba 2.2 was done by Gerald Carter. The conversion to DocBook XML 4.2 for Samba
       3.0 was done by Alexander Bokovoy.




                                                                                                SMBPASSWD(5)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/smbpasswd.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/smbpasswd.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/smbpasswd.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

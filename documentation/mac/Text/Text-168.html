<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>GetFormatOrder(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING168></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-167.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-169.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-126.html"><B>Chapter 3 - QuickDraw Text</B></A> / <A HREF="Text-143.html"><B>QuickDraw Text Reference</B></A><BR><DL><DD><A HREF="Text-147.html"><B>Routines</B></A> / <A HREF="Text-167.html"><B>Laying Out a Line of Text</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING168-0></A>
<H3><A NAME=MARKER-9-338></A>GetFormatOrder</H3>
 The <A NAME=MARKER-2-371></A><CODE>GetFormatOrder</CODE> procedure determines the display order of multiple style runs with mixed directions.<P>
<PRE>
PROCEDURE GetFormatOrder (ordering: FormatOrderPtr; 
                          firstFormat: Integer;
                          lastFormat: Integer; 
                          lineRight: Boolean; 
                          rlDirProc: Ptr; dirParam: Ptr);
</PRE>
<DL>
<DT><CODE>ordering</CODE>
<DD> A pointer to a format order array. Upon completion of the call, the format order array contains the numbers identifying the style runs in display order. This is its type declaration:
<pre>   TYPE<BR>    FormatOrder = ARRAY [0..0] OF Integer;<BR>    FormatOrderPtr = ^FormatOrder;</pre><P>
<DT><CODE>firstFormat</CODE>
<DD> A number greater than or equal to 0 identifying the first style run in storage order that is part of the line for which you are calling <CODE>GetFormatOrder</CODE>.
<DT><CODE>lastFormat</CODE>
<DD> A number greater than or equal to 0 identifying the last style run in storage order that is part of the line for which you are calling <CODE>GetFormatOrder</CODE>.
<DT><CODE>lineRight</CODE>
<DD> A flag that you set to <CODE>TRUE</CODE> if the primary line direction is right-to-left.
<DT><CODE>rlDirProc</CODE> 
<DD> A pointer to an application-supplied function that calculates the correct direction, given the style run identifier. The GetFormatOrder procedure calls the application-defined <CODE>rlDirProc</CODE> function for each identifier from <CODE>firstFormat</CODE> to <CODE>lastFormat</CODE>. The interface to this function looks <BR>like this:
<pre>   FUNCTION MyRlDirProc(theFormat: Integer;<BR>         dirParam: Ptr ): Boolean;</pre><P>
<DT>
<DD> This function returns <CODE>TRUE</CODE> for right-to-left text direction and <CODE>FALSE</CODE> for left-to-right. Given <CODE>dirParam</CODE> and a style run identifier, the application-defined <CODE>rlDirProc</CODE> routine should be able to determine the style run direction.
<DT><CODE>theFormat</CODE>
<DD> A number identifying the style run and its associated attribute information in the information block pointed to by <CODE>dirParam</CODE>.
<DT> <CODE>dirParam</CODE>
<DD> A pointer to a parameter block that contains the font and script information for each style run in the text. This parameter block is used by the application-supplied routine.
</DL>
<A NAME=HEADING168-13></A>
<H5>DESCRIPTION</H5>
 The <CODE>GetFormatOrder</CODE> procedure helps you determine how to draw text that contains multiple style runs with mixed directions. For mixed-directional text, after you determine where to break the line, you need to call <CODE>GetFormatOrder</CODE> to determine the display order. When you call <CODE>GetFormatOrder</CODE>, you supply a Boolean function, and reference it using the <CODE>rlDirProc</CODE> parameter. This function calculates the direction of each style run identified by number. Do not call <CODE>GetFormatOrder</CODE> if there is only one style run on the line.<P>
 You must index the style runs in storage order. You pass <CODE>GetFormatOrder</CODE> numbers identifying the first and last style runs of the line in storage order and the primary line direction. The <CODE>GetFormatOrder</CODE> procedure returns to you an equivalent sequence in display order.<P>
 If you do not explicitly define the primary line direction of the text, base the <CODE>lineRight</CODE> parameter on the value of the <CODE>SysDirection</CODE> global variable. (The <CODE>SysDirection</CODE> global variable is set to<CODE> -1</CODE> if the system direction is right to left, and 0 if the system direction is left to right.)<P>
 The <CODE>ordering</CODE> parameter points to an array of integers, with (<CODE>lastFormat - firstFormat + 1</CODE>) entries. The <CODE>GetFormatOrder</CODE> procedure fills an array (the size of the number of the style runs) with the display order of each style run. On exit, the array contains a permuted list of the numbers from <CODE>firstFormat</CODE> to <CODE>lastFormat</CODE>. The first entry in the array is the number of the style run to draw first; this is the leftmost style run in display order. The last entry in the array is the number of the entry to draw last, the rightmost style run in display order. For more information about how to use the <CODE>GetFormatOrder</CODE> procedure, see <A HREF=Text-139.html#MARKER-9-145>"Determining the Display Order for Style Runs,"</A> which begins on <A HREF=Text-139.html#MARKER-9-145>page 3-33</A>. For more information about the <CODE>rlDirProc</CODE> function, see <A HREF=Text-178.html#MARKER-9-373>"Application-Supplied Routine" on page 3-97</A>.<A NAME=MARKER-2-354></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-167.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-169.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

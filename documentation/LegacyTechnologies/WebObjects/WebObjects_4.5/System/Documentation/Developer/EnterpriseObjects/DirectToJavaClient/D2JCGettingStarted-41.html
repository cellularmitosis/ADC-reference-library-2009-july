<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN"><HTML><HEAD><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"><META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css"><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> The Rule System</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Getting Started With Direct to Java Client</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="D2JCGettingStarted-40.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="D2JCGettingStarted-40.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="D2JCGettingStarted-42.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr></A><HR></DIV><H1><A NAME="pgfId-22028"></A>The Rule System</H1><A NAME="pgfId-22021"></A>The rule system is a private system that's provided by the <B>com.apple.yellow.directtoweb</B> package (it's the same rule system as the one used by Direct to Web). You never need to access it directly; the EOControllerFactory takes care of all interactions with the rule system. Nevertheless, it's important to understand the basics of the rule system and of how the controller factory interacts with it.</P><A NAME="pgfId-20716"></A>All the information about how to configure a Direct to Java Client application is stored in the form of <I>rules.</I> A rule has a key, a condition that must be true for the rule to "fire", a value, and a priority. The rule system evaluates requests as follows: </P><OL><LI><A NAME="pgfId-20743"></A>The controller factory makes a request to the rule system by specifying a key.<P><LI><A NAME="pgfId-20942"></A>The rule system identifies the rules whose key is the same as the request key.<P><LI><A NAME="pgfId-20944"></A>It then evaluates the conditions of the matching rules to see which can fire.<P><LI><A NAME="pgfId-20945"></A>Of the rules that can fire, the rule system fires the one with the highest priority, returning the value for the rule's key.<P></OL><A NAME="pgfId-21042"></A>To evaluate requests, the rule system needs information about the state of the client application. In addition to specifying a key, the controller factory also provides key-value pairs of state information that the rule system can use to evaluate rules' conditions. For example, the rule system might need to know what task the client application is attempting to perform (query, list, or form) and the entity on which the client application is operating.</P><A NAME="pgfId-21154"></A>The controller factory packages all rule system input--the request key and the key-value pairs of state information--into a dictionary known as a <I>specification.</I> The following are examples of specifications:</P><UL><LI><A NAME="pgfId-22030"></A>question = window, task = queryWindow<P><LI><A NAME="pgfId-22048"></A>entity = Movie, question = window, task = form<P><LI><A NAME="pgfId-22049"></A>entity = Studio, question = modalDialog, task = select<P></UL><A NAME="pgfId-22004"></A>A specification always contains a "question" entry, which contains the request key. The request keys in the above specifications are "window", "window", and "modalDialog", respectively.</P><A NAME="pgfId-22093"></A>The rule system stores the key-value pairs of state information in a D2WContext object. The D2WContext's whole purpose is to keep track of state as a page is generated. Initially the D2WContext is filled with state information provided by the controller factory. As the rule system processes the request, however, the system adds more and more state.</P><HR>&#169 1999 Apple Computer, Inc. &#150 (Draft. Last updated 05 Jan 00)<P><A HREF="D2JCGettingStarted-40.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="D2JCGettingStarted-40.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="D2JCGettingStarted-42.html"><img src="images/next.gif" border="0" width="49" height="16"></A><nobr>&nbsp;</nobr></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
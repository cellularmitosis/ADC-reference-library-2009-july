<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>OpenGL Programming Guide for Mac OS X: Quartz Display Services and Full-Screen Mode</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Quartz Display Services and Full-Screen Mode"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001987-CH302" title="Quartz Display Services and Full-Screen Mode"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../OpenGL-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000549" target="_top">OpenGL</a> &gt; <a href="../opengl_intro/opengl_intro.html#//apple_ref/doc/uid/TP40001987-CH207-TP9">OpenGL Programming Guide for Mac OS X</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../opengl_entrypts/opengl_entrypts.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../opengl_glossary/opengl_glossary.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001987-CH302-SW6" title="Quartz Display Services and Full-Screen Mode"></a><h1>Quartz Display Services and Full-Screen Mode</h1><p>The Quartz Display Services API provides functionality that is useful for any Mac OS X application using full-screen mode. In other parts of this programming guide, you've seen how to use Quartz Display Services to obtain exclusive access to the  display, query the display, and adjust the resolution, depth, and refresh rate of the display. This appendix shows how to perform some additional tasks that are relevant to full-screen OpenGL applications:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="opengl_quartz_services.html#//apple_ref/doc/uid/TP40001987-CH302-SW8">“Displays and Display Modes”</a></span> shows how to obtain information about the display and switch modes.</p></li><li class="li"><p><span class="content_text"><a href="opengl_quartz_services.html#//apple_ref/doc/uid/TP40001987-CH302-SW9">“Fading the Display”</a></span> describes how to fade a display to black and then set it to its original state.</p></li><li class="li"><p><span class="content_text"><a href="opengl_quartz_services.html#//apple_ref/doc/uid/TP40001987-CH302-SW10">“Controlling the Pointer”</a></span> discusses how to programmatically manage the cursor and disassociate mouse movement from the cursor.</p></li></ul><p>For more information, see <em><a href="../../../Reference/Quartz_Services_Ref/index.html#//apple_ref/doc/uid/TP30001070" target="_top">Quartz Display Services Reference</a></em>.</p><a name="//apple_ref/doc/uid/TP40001987-CH302-SW8" title="Displays and Display Modes"></a><h2>Displays and Display Modes</h2><p>Quartz Display Services functions allow you to enumerate all displays as well as the supported modes for each display. The Quartz Display Services functions <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplaySwitchToMode" target="_top">CGDisplaySwitchToMode</a></code> and <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayBestModeForParameters" target="_top">CGDisplayBestModeForParameters</a></code>  use on the Core Foundation <code>CFDictionary</code> data type. Each display mode has a dictionary whose key-value pairs you can query. You can use accessor functions to query the properties of the current display mode. You can also use Core Foundation  functions to access the dictionary associated with a display mode. See <em><a href="../../../../CoreFoundation/Reference/CFDictionaryRef/index.html#//apple_ref/doc/uid/20001195" target="_top">CFDictionary Reference</a></em>.</p><p>You  can enumerate the display modes for a display by using its display ID. You can obtain an array of display IDs that correspond to all displays in the system by calling the function <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGGetActiveDisplayList" target="_top">CGGetActiveDisplayList</a></code>. The first display in the list is always the main display. The main display is also represented by the constant <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/c_ref/kCGDirectMainDisplay" target="_top">kCGDirectMainDisplay</a></code>.</p><p>These functions also obtain an array of display IDs:</p><ul class="ul"><li class="li"><p><code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGGetDisplaysWithPoint" target="_top">CGGetDisplaysWithPoint</a></code> obtains the display IDs for online displays whose bounds include a specified point.</p></li><li class="li"><p><code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGGetDisplaysWithRect" target="_top">CGGetDisplaysWithRect</a></code> obtains the display IDs for online displays whose bounds include a specified rectangle.</p></li><li class="li"><p><code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGGetDisplaysWithOpenGLDisplayMask" target="_top">CGGetDisplaysWithOpenGLDisplayMask</a></code> obtains the display IDs for online displays that correspond  to the bits set in an OpenGL display mask.</p></li></ul><p>Typically you use the functions <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/c_ref/CGGetDisplaysWithPoint" target="_top">CGGetDisplaysWithPoint</a></code> and <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/c_ref/CGGetDisplaysWithRect" target="_top">CGGetDisplaysWithRect</a></code> when tracking user interactions. You choose which display to capture based on where the user places the pointer. After capturing the display, you can the obtain the supported modes by calling the function <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/c_ref/CGDisplayAvailableModes" target="_top">CGDisplayAvailableModes</a></code>.</p><p><span class="content_text">Listing C-1</span> shows how to switch  the last display in a display list into its first mode and then print the height and width of the display. A detailed explanation for each numbered line of code appears following the listing.</p><a name="//apple_ref/doc/uid/TP40001987-CH302-SW12" title="Listing C-1Switching modes for a display in a list"></a><p class="codesample"><strong>Listing C-1&nbsp;&nbsp;</strong>Switching modes for a display in a list</p><div class="codesample"><table><tr><td scope="row"><pre>#define MAX_DISPLAYS 32<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CGDirectDisplayID lastDisplay, displayArray[MAX_DISPLAYS] ;<span></span></pre></td></tr><tr><td scope="row"><pre>CGDisplayCount numDisplays;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CFArrayRef displayModeArray;<span></span></pre></td></tr><tr><td scope="row"><pre>CFDictionaryRef displayMode;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CFNumberRef number;<span></span></pre></td></tr><tr><td scope="row"><pre>long height, width;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CGGetActiveDisplayList (MAX_DISPLAYS, displayArray, &amp;numDisplays); <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>lastDisplay = displayArray [numDisplays - 1]; <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>CGDisplayCapture (lastDisplay); <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>displayModeArray = CGDisplayAvailableModes (lastDisplay); <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>displayMode = (CFDictionaryRef) CFArrayGetValueAtIndex (displayModeArray, 0); <span>// 5</span></pre></td></tr><tr><td scope="row"><pre>CGDisplaySwitchToMode (lastDisplay, displayMode); <span>// 6</span></pre></td></tr><tr><td scope="row"><pre>/* Run the event loop. */<span></span></pre></td></tr><tr><td scope="row"><pre>CGReleaseAllDisplays(); <span>// 7</span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p>Gets the array of active displays, which are the ones available for drawing. </p></li><li class="li"><p>Gets the display ID of the last display in the array. The array is zero-based.</p></li><li class="li"><p>Captures the display associated with the last display in the array.</p></li><li class="li"><p>Gets all the display modes for the display.</p></li><li class="li"><p>Gets the first display mode for the display. Recall that the display mode is stored as a <code>CFDictionary</code> object that contains key-value pairs for the attributes of the display mode.</p></li><li class="li"><p>Switches the display mode.</p></li><li class="li"><p>Before the application quits, releases all displays. </p></li></ol><p>Quartz Display Services provides simple accessor functions for many properties of the current display  mode. For these properties, you don't need to call <code><a href="../../../../CoreFoundation/Reference/CFDictionaryRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDictionaryGetValue" target="_top">CFDictionaryGetValue</a></code>.  <span class="content_text">Listing C-2</span> shows how to obtain the properties of the current mode of every display (up to 32) in the system.</p><a name="//apple_ref/doc/uid/TP40001987-CH302-SW16" title="Listing C-2Getting display properties"></a><p class="codesample"><strong>Listing C-2&nbsp;&nbsp;</strong>Getting display properties</p><div class="codesample"><table><tr><td scope="row"><pre>#define MAX_DISPLAYS 32<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CGDirectDisplayID displayArray [MAX_DISPLAYS];<span></span></pre></td></tr><tr><td scope="row"><pre>CGDisplayCount numDisplays;<span></span></pre></td></tr><tr><td scope="row"><pre>CFNumberRef number;<span></span></pre></td></tr><tr><td scope="row"><pre>CFBoolean booleanValue;<span></span></pre></td></tr><tr><td scope="row"><pre>long    height, width, refresh, mode,<span></span></pre></td></tr><tr><td scope="row"><pre>        bpp, bps, spp, rowBytes, gui, ioflags;<span></span></pre></td></tr><tr><td scope="row"><pre>int     i;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CGGetActiveDisplayList (MAX_DISPLAYS, displayArray, &amp;numDisplays); <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>printf ("Displays installed: %d\n", numDisplays); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>for(i = 0; i &lt; numDisplays; i++) { <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>    width = CGDisplayPixelsWide (displayArray[i]);<span></span></pre></td></tr><tr><td scope="row"><pre>    height = CGDisplayPixelsHigh (displayArray[i]);<span></span></pre></td></tr><tr><td scope="row"><pre>    bpp = CGDisplayBitsPerPixel (displayArray[i]);<span></span></pre></td></tr><tr><td scope="row"><pre>    bps = CGDisplayBitsPerSample (displayArray[i]);<span></span></pre></td></tr><tr><td scope="row"><pre>    spp = CGDisplaySamplesPerPixel (displayArray[i]);<span></span></pre></td></tr><tr><td scope="row"><pre>    rowBytes = CGDisplayBytesPerRow (displayArray[i]);<span></span></pre></td></tr><tr><td scope="row"><pre>    number = CFDictionaryGetValue (CGDisplayCurrentMode (displayArray[i]),<span></span></pre></td></tr><tr><td scope="row"><pre>                                    kCGDisplayMode);<span></span></pre></td></tr><tr><td scope="row"><pre>    CFNumberGetValue (number, kCFNumberLongType, &amp;mode);<span></span></pre></td></tr><tr><td scope="row"><pre>    number = CFDictionaryGetValue (CGDisplayCurrentMode (displayArray[i]),<span></span></pre></td></tr><tr><td scope="row"><pre>                                    kCGDisplayRefreshRate);<span></span></pre></td></tr><tr><td scope="row"><pre>    CFNumberGetValue (number, kCFNumberLongType, &amp;refresh);<span></span></pre></td></tr><tr><td scope="row"><pre>    booleanValue = CFDictionaryGetValue (CGDisplayCurrentMode(displayArray[i]),<span></span></pre></td></tr><tr><td scope="row"><pre>                                kCGDisplayModeUsableForDesktopGUI);<span></span></pre></td></tr><tr><td scope="row"><pre>    CFNumberGetValue (number, kCFNumberLongType, &amp;gui);<span></span></pre></td></tr><tr><td scope="row"><pre>    number = CFDictionaryGetValue (CGDisplayCurrentMode (displayArray[i]),<span></span></pre></td></tr><tr><td scope="row"><pre>                                kCGDisplayIOFlags);<span></span></pre></td></tr><tr><td scope="row"><pre>    CFNumberGetValue (number, kCFNumberLongType, &amp;ioflags);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p> Gets the array of displays. </p></li><li class="li"><p>Prints out the number of displays.</p></li><li class="li"><p>Gets the properties for the current mode of each display. Note that Quartz Display Services provides several functions that obtain properties. For information about the current display mode, you must use the function <code><a href="../../../../CoreFoundation/Reference/CFDictionaryRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDictionaryGetValue" target="_top">CFDictionaryGetValue</a></code>, along with the appropriate key, to retrieve a value from the display mode dictionary returned by the function <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayCurrentMode" target="_top">CGDisplayCurrentMode</a></code>. </p></li></ol><a name="//apple_ref/doc/uid/TP40001987-CH302-SW9" title="Fading the Display"></a><h2>Fading the Display</h2><p>Fading a display ensures a smooth transition when entering full-screen mode, especially when switching display modes. There are two options for fading displays:</p><ul class="ul"><li class="li"><p>Call the function <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/doc/c_ref/CGDisplayFade" target="_top">CGDisplayFade</a></code> to fade all displays connected to the system. See <span class="content_text">Listing C-3</span>.</p></li><li class="li"><p>Adjust the display gamma value to fade a single display on a system that has more than one display connected. See <span class="content_text"><a href="opengl_quartz_services.html#//apple_ref/doc/uid/TP40001987-CH302-SW3">Listing C-4</a></span>.</p></li></ul><a name="//apple_ref/doc/uid/TP40001987-CH302-SW1" title="Listing C-3Fading all displays connected to the system"></a><p class="codesample"><strong>Listing C-3&nbsp;&nbsp;</strong>Fading all displays connected to the system</p><div class="codesample"><table><tr><td scope="row"><pre>CGDisplayFadeReservationToken token;<span></span></pre></td></tr><tr><td scope="row"><pre>CGDisplayErr err;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>err = CGAcquireDisplayFadeReservation (kCGMaxDisplayReservationInterval, &amp;token); <span>// 1</span></pre></td></tr><tr><td scope="row"><pre>if (err == kCGErrorSuccess)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CGDisplayFade (token, 0.5, kCGDisplayBlendNormal,<span></span></pre></td></tr><tr><td scope="row"><pre>                kCGDisplayBlendSolidColor, 0, 0, 0, true); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>    // Your code to change the display mode and<span></span></pre></td></tr><tr><td scope="row"><pre>    // set the full-screen context.<span></span></pre></td></tr><tr><td scope="row"><pre>    err = CGDisplayFade (token, 0.5, kCGDisplayBlendSolidColor,<span></span></pre></td></tr><tr><td scope="row"><pre>          kCGDisplayBlendNormal, 0, 0, 0, true); <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>    err = CGReleaseDisplayFadeReservation (token); <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p>Reserves the display hardware for the maximum amount of time allowable. Your application must perform this step before it can fade the displays. During this time, your application has exclusive rights to use the fade hardware.</p></li><li class="li"><p>Fades displays to black over a duration of 0.5 seconds</p></li><li class="li"><p>Performs a fade-in for all displays, from black to normal, over a duration of 0.5 seconds</p></li><li class="li"><p>Releases the fade reservation and invalidates the fade token.</p></li></ol><p>When you adjust the gamma value to fade a display, you can't assume that the maximum gamma value is 1.0 because the user might have specified a different maximum value in System Preferences. You need to retrieve the current settings and scale them so that they range from <code>0</code> to <code>1</code>. <span class="content_text">Listing C-3</span> shows how to fade the main display to black and back. Note that the code uses a loop is used to obtain a smooth fade. A more robust technique is to use a timer to ensure a fixed fade duration on different systems. A detailed explanation for each numbered line of code appears following the listing. </p><a name="//apple_ref/doc/uid/TP40001987-CH302-SW3" title="Listing C-4Fading a single display on a system with multiple displays"></a><p class="codesample"><strong>Listing C-4&nbsp;&nbsp;</strong>Fading a single display on a system with multiple displays</p><div class="codesample"><table><tr><td scope="row"><pre>#define kMyFadeTime    1.0<span></span></pre></td></tr><tr><td scope="row"><pre>#define kMyFadeSteps    100<span></span></pre></td></tr><tr><td scope="row"><pre>#define kMyFadeInterval    ( kMyFadeTime/(double) kMyFadeSteps)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>int step;<span></span></pre></td></tr><tr><td scope="row"><pre>double fadeValue ;<span></span></pre></td></tr><tr><td scope="row"><pre>CGGammaValue    redMin, redMax, redGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>                greenMin, greenMax, greenGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>                blueMin, blueMax, blueGamma;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>CGGetDisplayTransferByFormula (kCGDirectMainDisplay,<span></span></pre></td></tr><tr><td scope="row"><pre>            &amp;redMin, &amp;redMax, &amp;redGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>            &amp;greenMin, &amp;greenMax, &amp;greenGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>            &amp;blueMin, &amp;blueMax, &amp;blueGamma ); <span>// 1</span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>for ( step = 0; step &lt; kMyFadeSteps; ++step ) {<span></span></pre></td></tr><tr><td scope="row"><pre>    fadeValue = 1.0 - (step * kMyFadeInterval);<span></span></pre></td></tr><tr><td scope="row"><pre>    CGSetDisplayTransferByFormula (kCGDirectMainDisplay,<span></span></pre></td></tr><tr><td scope="row"><pre>            redMin, fadeValue*redMax, redGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>            greenMin, fadeValue*greenMax, greenGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>            blueMin, fadeValue*blueMax, blueGamma ); <span>// 2</span></pre></td></tr><tr><td scope="row"><pre>    usleep( (useconds_t)(1000000.0 * kMyFadeInterval) ); <span>// 3</span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>// Your code to change the display mode and<span></span></pre></td></tr><tr><td scope="row"><pre>// attach the context to a full-screen drawable object.<span></span></pre></td></tr><tr><td scope="row"><pre>// Run the event loop.<span></span></pre></td></tr><tr><td scope="row"><pre>for ( step = 0; step &lt; kMyFadeSteps; ++step ) {<span></span></pre></td></tr><tr><td scope="row"><pre>    fadeValue = (step * kMyFadeInterval);<span></span></pre></td></tr><tr><td scope="row"><pre>    CGSetDisplayTransferByFormula( kCGDirectMainDisplay,<span></span></pre></td></tr><tr><td scope="row"><pre>            redMin, fadeValue*redMax, redGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>            greenMin, fadeValue*greenMax, greenGamma,<span></span></pre></td></tr><tr><td scope="row"><pre>            blueMin, fadeValue*blueMax, blueGamma ); <span>// 4</span></pre></td></tr><tr><td scope="row"><pre>    usleep( (useconds_t)(1000000.0 * kMyFadeInterval) );  <span>// 5</span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>CGDisplayRestoreColorSyncSettings() <span>// 6</span></pre></td></tr></table></div><p>Here's what the code does:</p><ol class="ol"><li class="li"><p>Gets the current coefficients of the gamma transfer formula for a display  as the starting gamma values.</p></li><li class="li"><p>Fades from the current gamma by setting the color gamma function for the display, specified as the coefficients of the gamma transfer formula. Starts with the current gamma (multiplying by a factor of <code>1.0</code>) and ends with black (multiplying by a factor of <code>0.0</code>).</p></li><li class="li"><p>Suspends processing for a short interval. You either need to use a timer or insert a short delay to achieve a fade effect because the call to change the display gamma returns within 100 microseconds or so, and the actual gamma is applied asynchronously during the next vertical blanking period.  Without the delay, you'll get what appears as an instantaneous switch to black rather than a fade effect.</p></li><li class="li"><p>Fade from black (multiplying by a factor of <code>0.0</code>) back to original gamma (multiplying by a factor of <code>1.0</code>).</p></li><li class="li"><p>Suspends processing for a short interval to achieve a smooth fade-in effect.</p></li><li class="li"><p>Finds and applies all ColorSync settings for all attached displays, restoring the gamma tables to the values in the user's ColorSync display profile.  It's a good idea to call this function because the operation performed by the function <code>CGSetDisplayTransferByFormula</code> can't reproduce precisely the color correction data for all displays, particularly LCD panels. </p></li></ol><a name="//apple_ref/doc/uid/TP40001987-CH302-SW10" title="Controlling the Pointer"></a><h2>Controlling the Pointer</h2><p>When you use full-screen mode, you may want to hide the pointer, programatically move the pointer, or disassociate mouse movement from pointer position. To hide or show the pointer, use the functions  <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayHideCursor" target="_top">CGDisplayHideCursor</a></code> and <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayShowCursor" target="_top">CGDisplayShowCursor</a></code>. These functions control the pointer visibility on all displays.</p><p>Quartz Display Services provides a convenient function for disassociating mouse movement from pointer position while an application is in the foreground. By passing <code>false</code> to the function <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGAssociateMouseAndMouseCursorPosition" target="_top">CGAssociateMouseAndMouseCursorPosition</a></code>,  you can prevent mouse movement from changing the pointer position. Pass <code>true</code> to reverse the effect. You should also hide the menu bar because clicking it can cause the pointer to become visible again, even after capturing the display.</p><p>You can move the pointer programatically by calling the function  <code><a href="../../../Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayMoveCursorToPoint" target="_top">CGDisplayMoveCursorToPoint</a></code>. This function takes two parameters, a display ID and a point. The location of the point is relative to the display origin (the upper-left corner of the display). </p><p><span class="content_text">Listing C-5</span> shows how you would hide and move the cursor on the main display, disassociate the cursor from mouse movement, and restore the cursor and mouse when you are done.</p><a name="//apple_ref/doc/uid/TP40001987-CH302-SW2" title="Listing C-5Controlling the pointer programmatically"></a><p class="codesample"><strong>Listing C-5&nbsp;&nbsp;</strong>Controlling the pointer programmatically</p><div class="codesample"><table><tr><td scope="row"><pre>CGDisplayHideCursor (kCGDirectMainDisplay); //Hide cursor<span></span></pre></td></tr><tr><td scope="row"><pre>CGDisplayMoveCursorToPoint (kCGDirectMainDisplay,CGPointZero); //Place at display origin<span></span></pre></td></tr><tr><td scope="row"><pre>CGAssociateMouseAndMouseCursorPosition (FALSE);<span></span></pre></td></tr><tr><td scope="row"><pre>// Perform your application's main loop.<span></span></pre></td></tr><tr><td scope="row"><pre>//In the mouse movement notification function, get the motion deltas<span></span></pre></td></tr><tr><td scope="row"><pre>CGAssociateMouseAndMouseCursorPosition (TRUE);<span></span></pre></td></tr><tr><td scope="row"><pre>CGDisplayShowCursor (kCGDirectMainDisplay);<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001987-CH302-SW4" title="See Also"></a><h2>See Also</h2><p><em><a href="../../../Reference/Quartz_Services_Ref/index.html#//apple_ref/doc/uid/TP30001070" target="_top">Quartz Display Services Reference</a></em> which describes the application programming interface that configures and controls the display hardware.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../opengl_entrypts/opengl_entrypts.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../opengl_glossary/opengl_glossary.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-06-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_quartz_services/opengl_quartz_services.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_quartz_services/opengl_quartz_services.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_quartz_services/opengl_quartz_services.html%3Fid%3DTP40001987-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
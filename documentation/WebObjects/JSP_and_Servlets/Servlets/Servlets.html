<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects J2EE Programming Guide: Servlets</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Servlets"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000040" title="Servlets"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../InternetWeb/index.html#//apple_ref/doc/uid/TP30000440-TP30000469" target="_top">Internet &amp; Web</a> &gt; <a href="../../../InternetWeb/WebObjects-date.html#//apple_ref/doc/uid/TP30000440-TP30000469-TP30000592" target="_top">WebObjects</a> &gt; <a href="../About/About.html#//apple_ref/doc/uid/TP30000039-TPXREF101">WebObjects J2EE Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../About/About.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../JavaServer_Pages/JavaServer_Pages.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000040-TPXREF101" title="Servlets"></a><h1>Servlets</h1><p><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_174"></a>Servlet technology was developed as an improvement over CGI. It’s an open standard that can be freely adopted by any vendor. It provides an infrastructure that allows applications from different manufacturers to cooperate and share resources.</p><p>The following sections explain how you can take advantage of servlet technology in WebObjects:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-BAJEIECG">“Servlets in WebObjects”</a></span> provides an overview of servlet technology as it is implemented in WebObjects.</p></li><li class="li"><p><span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-BAJFDCFE">“Developing a Servlet”</a></span> guides you through creating a simple servlet.</p></li><li class="li"><p><span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-CJBHBABD">“Deploying a Servlet”</a></span> explores deployment issues and tasks you need to keep in mind when deploying a servlet.</p></li><li class="li"><p><span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-BAJDFEHE">“Adding Servlet Support to an Existing Application”</a></span> explains how to add servlet support to an existing WebObjects application.</p></li><li class="li"><p><span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-CJBHFDCH">“Servlet Single Directory Deployment”</a></span> describes the feature that allows you to create a directory containing the files necessary to deploy an application as a servlet that does not require WebObjects to be installed on the deployment computer.</p></li><li class="li"><p><span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-TPXREF107">“Cross-Platform Deployment”</a></span> shows you how to simplify cross-platform deployment (or deployment in a platform other than the development platform) by allowing you to easily define the paths your servlet container uses to locate WebObjects frameworks, local frameworks, and WebObjects application bundles—WebObjects application (WOA) directories.</p></li><li class="li"><p><span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-TPXREF110">“Installing Servlets in WebSphere”</a></span> addresses special issues when installing WAR files in WebSphere.</p></li></ul><a name="//apple_ref/doc/uid/TP30000040-BAJEIECG" title="Servlets in WebObjects"></a><h2>Servlets in WebObjects</h2><p>Servlets<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_175"></a> are generic server extensions that expand the functionality of a Web server. By deploying WebObjects applications as servlets running inside servlet containers, you can take advantage of the features that your servlet container offers. Alternatively, you can deploy your applications using an HTTP adaptor<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_176"></a> that runs as a plug-in in your Web server<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_177"></a>. The adaptor forwards requests to your servlet container<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_178"></a>.</p><p>WebObjects applications can be deployed as servlets inside a servlet container such as Tomcat<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_179"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_180"></a>, WebLogic<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_181"></a>, or WebSphere<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_182"></a>. When an application runs as a servlet, instead of as a separate Java virtual machine (JVM) process, it runs inside the servlet container’s JVM, along with other applications. Note, however, that you can run only one instance of an application inside a servlet container. To run multiple instances of an application, you have to use multiple servlet containers. In addition, WebObjects deployment tools such as Monitor and wotaskd cannot be used with servlets.</p><p>To deploy an application as a servlet, you need to add the JavaWOJSPServlet framework<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_183"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_184"></a> to your project. When you build the project, Project Builder generates a WAR<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_185"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_186"></a> (Web application archive) file in addition to the WOA<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_187"></a> (WebObjects application) bundle. The WAR file has the appropriate classes and the <code>web.xml</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_188"></a> file in the <code>WEB-INF</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_189"></a> directory that your servlet container needs to launch the servlet. All you need to do in order to deploy the servlet is copy the WAR file to the application deployment directory of your servlet container. See <span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-TPXREF110">“Installing Servlets in WebSphere”</a></span> for special steps required to install servlets in WebSphere.</p><p>You may have to modify <code>web.xml.template</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_190"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_191"></a>, specifically the <code>%WOClassPath%</code> marker, to ensure that the classpath to the application’s WOA bundle is correct. For WebLogic, the default Session class must be placed in a package because it conflicts with an internal WebLogic class. In general, all your classes should be inside packages.</p><p>The WAR file is not a complete application. WebObjects Deployment must be installed on the application host, as well as the application’s WOA bundle. However, using the Servlet Single Directory Deployment feature, you can deploy directories that contain all the necessary WebObjects classes. For more information, see <span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-CJBHFDCH">“Servlet Single Directory Deployment.”</a></span></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_26" title="Note"></a><p><strong>Note:</strong>&nbsp;When a WebObjects application is deployed as a servlet, the <code>main</code> method<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_192"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_193"></a> of the Application class is not executed.</p></div><a name="//apple_ref/doc/uid/TP30000040-BAJFDCFE" title="Developing a Servlet"></a><h2>Developing a Servlet</h2><p><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_194"></a>This section shows you how to create a simple servlet using Project Builder.</p><p>Start by creating a WebObjects application project named <code>Hello</code>. You can deploy other types of WebObjects applications as servlets, such as Direct to Java Client, Direct to Web, Display Group, and Java Client.</p><p>In the Enable J2EE Integration pane of the Project Builder Assistant, select Deploy in a JSP/Servlet Container.</p><br/><div><img src = "../art/pbenablej2ee.gif" alt = "J2EE Integration" width="411" height="345"></div><br/><p>The “Deploy as a WAR file” option tells Project Builder to create a WAR file, which should be placed in your servlet container’s application directory. The WAR file contains all the files needed by an application except WebObjects frameworks. Therefore, WebObjects needs to be installed on the computer on which you want to deploy the application.</p><p>The “Deploy as a Servlet Single Directory Deployment” option tells Project Builder to include WebObjects frameworks in the WAR file. With this option, WebObjects does not need to be installed on the deployment computer.</p><p>The “Copy all JAR files into the application’s WEB-INF/lib directory” option tells Project Builder to copy framework and application JAR files to the <code>WEB-INF/lib</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_195"></a> directory (necessary only when the servlet uses other servlets, or for JSPs that make use of actual objects).</p><p>As the right side of <span class="content_text">Figure 1-1</span> shows, the newly created project is, in all respects, a standard WebObjects application project<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_196"></a>. However, Project Builder adds the Servlet Resources folder<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_197"></a> to the Resources group<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_198"></a>. Anything you add to this folder is included in the WAR file or single deployment directory that Project Builder creates when you build the project, following the same directory structure. The Servlet Resources folder is a real directory in the project’s root directory; it’s shown on the left side of <span class="content_text">Figure 1-1</span>.<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_199"></a></p><br/><div><a name="//apple_ref/doc/uid/TP30000040-CJBCEAGH" title="Figure 1-1Hello project directory and Project Builder window"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Hello project directory and Project Builder window</p><img src = "../art/pbandfndrhello.gif" alt = "Hello project directory and Project Builder window" width="475" height="311"></div><br/><a name="//apple_ref/doc/uid/TP30000040-CJBHBABD" title="Deploying a Servlet"></a><h2>Deploying a Servlet</h2><p><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_200"></a>The WEB-INF folder, under Server Resources, contains the <code>web.xml.template</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_201"></a> file, which Project Builder uses to generate the servlet’s deployment descriptor<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_202"></a>. You can edit this template to customize the deployment descriptor for your deployment environment. There are several elements whose values are surrounded by percent (%) characters (these are placeholders that Project Builder evaluates when you build the project). These elements include cross-platform settings (see <span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-TPXREF107">“Cross-Platform Deployment”</a></span> for details). You can replace the placeholders with other values if your environment requires it.</p><p>Follow these steps to get to the JSP and servlet build settings in Project Builder:</p><ol class="ol"><li class="li"><p>Click the Targets tab, then click the Hello target<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_203"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_204"></a> in the Targets list. The Target pane appears. It contains the target settings list and a content pane.</p></li><li class="li"><p>Click Expert View under Settings in the target settings list<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_205"></a> to display the Hello target’s build settings in the content pane.</p></li><li class="li"><p>Locate the <code>SERVLET_WEBAPPS_DIR</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_206"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_207"></a>build setting and enter the path of your servlet container’s application directory, as shown in <span class="content_text">Figure 1-2</span>.</p></li></ol><br/><div><a name="//apple_ref/doc/uid/TP30000040-CJBGIEGC" title="Figure 1-2Build settings for a servlet project"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>Build settings for a servlet project</p><img src = "../art/pbservletsettings.gif" alt = "Build settings for a servlet project" width="660" height="333"></div><br/><p>The <code>SERVLET_COPY_JARS</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_208"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_209"></a> build setting tells Project Builder whether to copy framework and application JAR files to the <code>WEB-INF/lib</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_210"></a> directory (necessary only when the servlet uses other servlets, or for JSPs that make use of actual objects).</p><p>The <code>SERVLET_SINGLE_DIR_DEPLOY</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_211"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_212"></a>build setting indicates whether the application is to be deployed as a WAR file or a single deployment directory (see <span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-CJBHFDCH">“Servlet Single Directory Deployment”</a></span> for more information). Set it to <code>NO</code> to deploy as a WAR file and <code>YES</code> to deploy as a single deployment directory.</p><p>The <code>SERVLET_SINGLE_DIR_DEPLOY_LICENSE</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_213"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_214"></a>build setting must contain your WebObjects Deployment license when <code>SERVLET_SINGLE_DIR_DEPLOY</code> is set to <code>YES</code>. If you don’t add your deployment license, you will not be able to build the application.</p><p>You can tell Project Builder where to put the WAR file<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_215"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_216"></a> by setting the value of the <code>SERVLET_WEBAPPS_DIR</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_217"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_218"></a> build setting (this is especially convenient during development). By default, WAR files are placed in the <code>build</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_219"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_220"></a> directory of your project.</p><p>Project Builder WO<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_221"></a> (on Windows) adds two buckets to your project: JSP Servlet WEB-INF<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_222"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_223"></a> and JSP Servlet Resources<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_224"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_225"></a>. The JSP Servlet WEB-INF bucket is a holding place for JAR files<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_226"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_227"></a>, classes<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_228"></a>, and TLD files<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_229"></a> (which are auto-routed to the correct subdirectories in the <code>WEB-INF</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_230"></a> directory of the generated WAR file or single deployment directory—<code>lib</code>, <code>class</code>, and <code>tld</code> respectively; the <code>web.xml.template</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_231"></a> file is also located here). The JSP Servlet Resources bucket contains any other items you want to add to the WAR file or single deployment directory (you can drag files and folders into this bucket; Project Builder WO preserves the directory structure when it generates the WAR file). These items are not auto-routed.</p><p>There are also several new variables defined in <code>Makefile.preamble</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_232"></a>. The <code>SERVLET_APP_MODE</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_233"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_234"></a> variable indicates whether Web server resources are loaded from the WOA bundle (the default) or the servlet container (by setting it to <code>"Deployment"</code>. The <code>SERVLET_WEBAPPS_DIR</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_235"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_236"></a>, <code>SERVLET_COPY_JARS</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_237"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_238"></a>, <code>SERVLET_SINGLE_DIR_DEPLOY</code>, and <code>SERVLET_SINGLE_DIR_DEPLOY_LICENSE</code> variables perform the same function described for Project Builder’s servlet-related build settings earlier.</p><p>This is how you set up the <code>SERVLET_WEBAPPS_DIR</code> variable in Project Builder WO:</p><div class="codesample"><table><tr><td scope="row"><pre>export SERVLET_WEBAPPS_DIR = C:\Tomcat\webapps<span></span></pre></td></tr></table></div><p>You can test the servlet by setting the <code>SERVLET_WEBAPPS_DIR</code> build setting to the path of your servlet container’s application deployment directory and building the project. Before you build, you can edit <code>Main.wo</code> using WebObjects Builder to add a message to the page, such as <code>Hello. I’m a servlet.</code> When Project Builder finishes building the application, it places the <code>Hello.war</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_239"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_240"></a> file in your servlet container’s application deployment directory. The contents of the <code>Hello.war</code> file are shown in <span class="content_text">Listing 1-1</span>.</p><a name="//apple_ref/doc/uid/TP30000040-CJBDGCDC" title="Listing 1-1Contents of Hello.war file"></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Contents of <code>Hello.war</code> file</p><div class="codesample"><table><tr><td scope="row"><pre>Hello/<span></span></pre></td></tr><tr><td scope="row"><pre>    META-INF/<span></span></pre></td></tr><tr><td scope="row"><pre>        MANIFEST.MF<span></span></pre></td></tr><tr><td scope="row"><pre>    WEB-INF/<span></span></pre></td></tr><tr><td scope="row"><pre>        classes/<span></span></pre></td></tr><tr><td scope="row"><pre>        lib/<span></span></pre></td></tr><tr><td scope="row"><pre>            JavaWOJSPServlet_client.jar<span></span></pre></td></tr><tr><td scope="row"><pre>        tlds/<span></span></pre></td></tr><tr><td scope="row"><pre>            WOtaglib_1_0.tld<span></span></pre></td></tr><tr><td scope="row"><pre>        web.xml<span></span></pre></td></tr></table></div><p>After restarting your servlet container you can connect to the Hello application through a Web browser. By default, the connection URL is</p><div class="codesample"><table><tr><td scope="row"><pre>http://host:port/AppName/WebObjects/AppName.woa<span></span></pre></td></tr></table></div><p>where <code>host</code> is the computer where the servlet container is running and <code>port</code> is the port the container runs on. <span class="content_text">Table 1-1</span> lists the default host and port for Tomcat, WebLogic, and WebSphere.<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_241"></a></p><br/><div><img src = "../art/webhello.gif" alt = "Hello, I am a servlet." width="401" height="227"></div><br/><a name="//apple_ref/doc/uid/TP30000040-CJBCBIFC" title="Table 1-1Default host and port in the supported servlet containers"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Default host and port in the supported servlet containers</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Container</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Host</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Port</p></th></tr><tr><td  scope="row"><p>Tomcat</p></td><td ><p><code>localhost</code></p></td><td ><p><code>8080</code> (<code>9006</code> on Mac OS X Server)</p></td></tr><tr><td  scope="row"><p>WebLogic</p></td><td ><p><code>localhost</code></p></td><td ><p><code>7001</code></p></td></tr><tr><td  scope="row"><p>WebSphere</p></td><td ><p><code>localhost</code></p></td><td ><p><code>9080</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000040-BAJDFEHE" title="Adding Servlet Support to an Existing Application"></a><h2>Adding Servlet Support to an Existing Application</h2><p><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_242"></a>To add servlet support to an existing application, all you need to do is add the JavaWOJSPServlet framework<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_243"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_244"></a> to your project and rebuild it. On Mac OS X<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_245"></a>, follow these steps:</p><ol class="ol"><li class="li"><p>Open the project you want to add servlet support to in Project Builder.</p></li><li class="li"><p>Add the JavaWOJSPServlet framework.</p><ol class="ol"><li class="ol ol"><p>Select the Frameworks group from the Files list.</p></li><li class="ol ol"><p>Choose Project > Add Frameworks.</p><p>A sheet appears with the Frameworks folder selected.</p></li><li class="ol ol"><p>Select JavaWOJSPServlet.framework from the file list, and click Open.</p></li><li class="ol ol"><p>Select Application Server from the target list, and click Add.</p><p>Notice that the Servlet Resources folder is added to the Resources group.</p></li></ol></li><li class="li"><p>Build the project using the Deployment build style.</p></li><li class="li"><p>Copy the WAR file or deployment directory in the <code>build</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_246"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_247"></a> directory of your project to the application deployment directory of your servlet container<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_248"></a>.</p><p>You can avoid this step by setting <code>SERVLET_WEBAPPS_DIR</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_249"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_250"></a> to the path of your servlet container’s application deployment directory. When using SSDD, you have to add your WebObjects Deployment license number to the project, as explained in <span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-CJBHBABD">“Deploying a Servlet.”</a></span></p></li><li class="li"><p>If necessary, restart your servlet container.</p></li></ol><p>The servlet should now be available through your servlet container.</p><p>On Windows<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_251"></a>, follow these steps:</p><ol class="ol"><li class="li"><p>Open the project you want to add servlet support to in Project Builder WO.</p></li><li class="li"><p>Add the JavaWOJSPServlet framework<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_252"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_253"></a>.</p><ol class="ol"><li class="ol ol"><p>Select the Frameworks bucket.</p></li><li class="ol ol"><p>Choose Project > Add Files.</p></li><li class="ol ol"><p>If necessary, navigate to the <code>\Apple\Library\Frameworks</code> directory (the directory should be selected by default).</p></li><li class="ol ol"><p>Select <code>JavaWOJSPServlet.framework</code> from the file list and click Open.</p></li><li class="ol ol"><p>Add the servlet-support variables to the <code>Makefile.preamble</code> file. One way to do this is by creating a new project with servlet support and copying its servlet-related variables to the <code>Makefile.preamble</code> in the project you’re modifying.</p></li></ol></li><li class="li"><p>Rebuild the project.</p></li><li class="li"><p>If necessary, copy the WAR file or single deployment directory in the project’s <code>build</code> directory to the application deployment directory of your servlet container. On Windows, the WAR file or single deployment directory is located at the top level of the project’s directory.</p></li><li class="li"><p>If necessary, restart your servlet container.</p></li></ol><a name="//apple_ref/doc/uid/TP30000040-CJBHFDCH" title="Servlet Single Directory Deployment"></a><h2>Servlet Single Directory Deployment</h2><p><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_254"></a>As mentioned earlier, Servlet Single Directory Deployment (SSDD) allows you to create an application directory that you can deploy on a computer on which WebObjects is not installed.</p><p>To deploy an application using SSDD, do the following:</p><ol class="ol"><li class="li"><p>Set the <code>SERVLET_SINGLE_DIRECTORY_DEPLOY</code> build setting to <code>YES</code>.</p></li><li class="li"><p>Enter your WebObjects Deployment license as the value of the <code>SERVLET_SINGLE_DIRECTORY_DEPLOY_LICENSE</code> build setting.</p></li></ol><p>When you build the application, Project Builder creates a directory named after the project. <span class="content_text">Listing 1-2</span> lists the contents of the <code>Hello</code> deployment directory.</p><a name="//apple_ref/doc/uid/TP30000040-CJBIICCJ" title="Listing 1-2Contents of the Hello single deployment directory"></a><p class="codesample"><strong>Listing 1-2&nbsp;&nbsp;</strong>Contents of the <code>Hello</code> single deployment directory</p><div class="codesample"><table><tr><td scope="row"><pre>Hello/<span></span></pre></td></tr><tr><td scope="row"><pre>    WEB-INF/<span></span></pre></td></tr><tr><td scope="row"><pre>        classes/<span></span></pre></td></tr><tr><td scope="row"><pre>        Extensions<span>// 1</span></pre></td></tr><tr><td scope="row"><pre>        Hello.woa<span></span></pre></td></tr><tr><td scope="row"><pre>        lib/<span></span></pre></td></tr><tr><td scope="row"><pre>            JavaWOJSPServlet_client.jar<span></span></pre></td></tr><tr><td scope="row"><pre>        Library<span>// 2</span></pre></td></tr><tr><td scope="row"><pre>            Frameworks/<span></span></pre></td></tr><tr><td scope="row"><pre>        LICENSE<span>// 3</span></pre></td></tr><tr><td scope="row"><pre>        tlds/<span></span></pre></td></tr><tr><td scope="row"><pre>            WOtaglib_1_0.tld<span></span></pre></td></tr><tr><td scope="row"><pre>        web.xml<span></span></pre></td></tr></table></div><p>The following list explains the numbered items in <span class="content_text">Listing 1-2</span>.</p><ol class="ol"><li class="li"><p>The <code>Extensions</code> directory contains the JAR files in <code>/Library/WebObjects/Extensions</code>.</p></li><li class="li"><p>The <code>Library</code> directory contains the frameworks in the Frameworks group of the Files list of the project.</p></li><li class="li"><p>The <code>LICENSE</code> file contains the WebObjects Deployment license agreement.<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_255"></a></p></li></ol><a name="//apple_ref/doc/uid/TP30000040-TPXREF107" title="Cross-Platform Deployment"></a><h2>Cross-Platform Deployment</h2><p>To support cross-platform deployment, WebObjects uses three variables that tell the servlet container at runtime where to find WebObjects frameworks (directories with the <code>.framework</code> extension) and the WOA bundles (bundles with the extension <code>.woa</code>):</p><ul class="ul"><li class="li"><p><code>WOROOT</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_256"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_257"></a> indicates the path where WebObjects frameworks are installed. On Mac OS X, for example, WebObjects frameworks are located in the <code>/System/Library/Frameworks</code> directory and <code>WOROOT</code> is set to <code>/System</code>. On Windows, <code>WOROOT</code> could be set to <code>C:\Apple</code>, and on Solaris it may be <code>/opt/Apple</code>.</p></li><li class="li"><p><code>LOCALROOT</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_258"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_259"></a> indicates the path where local frameworks are installed. On Mac OS X, these frameworks are located in the <code>/Library/Frameworks</code> directory, and <code>LOCALROOT</code> is set to <code>/</code>. On Windows, <code>LOCALROOT</code> may be set to <code>C:\Apple\Local</code>, while on Solaris it could be <code>/opt/Apple/Local</code>.</p></li><li class="li"><p><code>WOAINSTALLROOT</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_260"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_261"></a> specifies the location of WOA bundles. On Mac OS X, the default is <code>/Library/WebObjects/Applications</code>.</p></li></ul><p>When you deploy the WAR file of your servlet on a computer where the framework and WOA files are in different locations from the default ones, you can specify the correct paths using the variables described above. You can accomplish this in two ways:</p><ul class="ul"><li class="li"><p>configuring the application’s deployment descriptor</p></li><li class="li"><p>configuring the servlet container</p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_27" title="Note"></a><p><strong>Note:</strong>&nbsp;Single directory deployments, described in <span class="content_text"><a href="Servlets.html#//apple_ref/doc/uid/TP30000040-CJBHFDCH">“Servlet Single Directory Deployment,”</a></span> are platform independent.</p></div><a name="//apple_ref/doc/uid/TP30000040-TPXREF108" title="Configuring the Deployment Descriptor"></a><h3>Configuring the Deployment Descriptor</h3><p>The deployment descriptor<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_262"></a> of a servlet is the <code>web.xml</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_263"></a> file, located in the <code>WEB-INF</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_264"></a> directory of the WAR file<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_265"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_266"></a>. This file is generated from the <code>web.xml.template</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_267"></a> file in your project.</p><p>To configure your application’s deployment descriptor during development, you edit the <code>web.xml.template</code> file. Alternatively, you can edit the <code>web.xml</code> file of the WAR file (after expanding the WAR file). Locate the <code>&lt;param-name></code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_268"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_269"></a> tags for the appropriate variables, and set the value for their corresponding <code>&lt;param-value></code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_270"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_271"></a> tag.</p><p>This is an example of a <code>web.xml.template</code> file on Windows:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;web-app><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;context-param><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;param-name>WOROOT&lt;/param-name><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;param-value>C:\WebObjectsFrameworks&lt;/param-value><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/context-param><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;context-param><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;param-name>LOCALROOT&lt;/param-name><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;param-value>C:\Apple\Local&lt;/param-value><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/context-param><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;context-param><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;param-name>WOAINSTALLROOT&lt;/param-name><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;param-value>C:\WebObjectsApplications&lt;/param-value><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/context-param><span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/web-app><span></span></pre></td></tr></table></div><p>You expand the WAR file<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_272"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_273"></a> by executing the following commands in your shell editor:</p><div class="codesample"><table><tr><td scope="row"><pre>mkdir filename<span></span></pre></td></tr><tr><td scope="row"><pre>jar -xvf filename.war<span></span></pre></td></tr></table></div><p>When you’re done editing the <code>web.xml</code> file, you re-create the WAR file by executing</p><div class="codesample"><table><tr><td scope="row"><pre>jar -cvf fileName.war .<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000040-TPXREF109" title="Configuring the Servlet Container"></a><h3>Configuring the Servlet Container</h3><p>This method allows your settings to be propagated to all applications and it overrides the values set in the deployment descriptor<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_274"></a>. Using this approach, you can deploy WebObjects applications without worrying about each application’s configuration. You can configure the servlet container<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_275"></a> in two ways:</p><ul class="spaceabove"><li class="li"><p>editing the launch script of the servlet container</p></li><li class="li"><p>defining environment variables</p></li></ul><p>This is an example of the launch script in Tomcat (<code>startup.sh</code><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_276"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_277"></a>):</p><div class="codesample"><table><tr><td scope="row"><pre>#! /bin/sh<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre>$JAVACMD $TOMCAT_OPTS -DWOROOT=/System -DLOCALROOT=/<span></span></pre></td></tr><tr><td scope="row"><pre>-DWOAINSTALLROOT=/Library/WebObjects/Applications<span></span></pre></td></tr><tr><td scope="row"><pre>-Dtomcat.home=${TOMCAT_HOME}  org.apache.tomcat.startup.Tomcat "$@" &amp;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>BASEDIR='dirname $0'<span></span></pre></td></tr><tr><td scope="row"><pre>$BASEDIR/tomcat.sh start "$@"<span></span></pre></td></tr></table></div><p>This is an example of the launch-script format in WebLogic (<code>startWLS.sh</code>)<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_278"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_279"></a>:</p><div class="codesample"><table><tr><td scope="row"><pre>"${JAVA_HOME}/bin/java" ${JAVA_VM} ${MEM_ARGS}<span></span></pre></td></tr><tr><td scope="row"><pre>-classpath ${CLASSPATH}"<span></span></pre></td></tr><tr><td scope="row"><pre>-Dweblogic.Name=myserver<span></span></pre></td></tr><tr><td scope="row"><pre>-Dbea.home="/opt/bea"<span></span></pre></td></tr><tr><td scope="row"><pre>"-DWOROOT=/opt/Apple"<span></span></pre></td></tr><tr><td scope="row"><pre>"-DLOCALROOT=/opt/Apple/Local"<span></span></pre></td></tr><tr><td scope="row"><pre>"-DWOAINSTALLROOT=/applications/production"<span></span></pre></td></tr><tr><td scope="row"><pre>-Dweblogic.management.username=${WLS_USER}<span></span></pre></td></tr><tr><td scope="row"><pre>-Dweblogic.management.password=${WLS_PW}<span></span></pre></td></tr><tr><td scope="row"><pre>-Dweblogic.ProductionModeEnabled=${STARTMODE}<span></span></pre></td></tr><tr><td scope="row"><pre>-Djava.security.policy="${WL_HOME}/server/lib/weblogic.policy"<span></span></pre></td></tr><tr><td scope="row"><pre>weblogic.Server<span></span></pre></td></tr></table></div><p>This is how you would define environment variables using the bash<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_280"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_281"></a> or zsh<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_282"></a> shell editors:</p><div class="codesample"><table><tr><td scope="row"><pre>% export TOMCAT_OPTS="-DWOROOT=/System -DWOAINSTALLROOT=/WebObjects/Applications -DLOCALROOT=/"<span></span></pre></td></tr></table></div><p>And this is how you would do it using the csh<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_283"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_284"></a> shell editor:<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_285"></a></p><div class="codesample"><table><tr><td scope="row"><pre>% setenv TOMCAT_OPTS "-DWOROOT=/System -DWOAINSTALLROOT=/WebObjects/Applications -DLOCALROOT=/"<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000040-TPXREF110" title="Installing Servlets in WebSphere"></a><h2>Installing Servlets in WebSphere</h2><p><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_286"></a>To install a single deployment directory you need to create a WAR file from the directory. Execute the following commands to create the WAR file:</p><div class="codesample"><table><tr><td scope="row"><pre>cd &lt;path-to-project>/AppName<span></span></pre></td></tr><tr><td scope="row"><pre>jar -cvf AppName.war .<span></span></pre></td></tr></table></div><p>To install a WAR file, perform these steps using <code>console</code>:</p><ol class="ol"><li class="li"><p>Choose Nodes > Server > Enterprise Apps > Install.</p></li><li class="li"><p>Navigate to the WAR file’s location.</p></li><li class="li"><p>Enter the application’s name in the App Name text input field; for example, <code>MyApp</code>.</p></li><li class="li"><p>Enter the context name for the application in the Context Root text input field; for example, <code>/MyApp</code>.<a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_287"></a><a name="//apple_ref/doc/uid/TP30000040-DontLinkElementID_288"></a></p></li></ol>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../About/About.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../JavaServer_Pages/JavaServer_Pages.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-08-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/JSP_and_Servlets/Servlets/Servlets.html%3Fid%3DTP30001013-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/JSP_and_Servlets/Servlets/Servlets.html%3Fid%3DTP30001013-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/JSP_and_Servlets/Servlets/Servlets.html%3Fid%3DTP30001013-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
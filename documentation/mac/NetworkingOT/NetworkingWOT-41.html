<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>About Ports </TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING41></A>
<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->

<!-- Main Body -->

<CENTER>
<P>
<A HREF="NetworkingWOT-40.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-42.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="NetworkingWOT-2.html"><B>Networking With Open Transport </B></A> / <A HREF="NetworkingWOT-10.html"><B>Part 1 - Open Transport Essentials</B></A><BR><DD><A HREF="NetworkingWOT-40.html"><B>Chapter 8 - Ports</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING41-0></A>
<H1><A NAME=MARKER-9-17></A>About Ports </H1>
 Central to Open Transport's architecture is the concept of a port. In Open Transport, a <A NAME=MARKER-13-18></A><B>port</B> is a logical entity that combines a hardware device and the software driver that acts as an interface to it. Ethernet, serial devices, and LocalTalk ports are examples of ports commonly used in Open Transport. When you initialize Open Transport, it scans the local machine for all available ports and creates a data structure called a<A NAME=MARKER-13-19></A><B><A NAME=MARKER-13-21></A><A NAME=MARKER-13-21></A> port registry</B> in which it stores information about these ports.<P>
 Typically, your application uses whichever port is defined in the appropriate control panel (for example, AppleTalk or TCP/IP). If, however, your application provides special port manipulation features, you need the additional port information data structures, constants, and functions that Open Transport provides for browsing among the ports available to your computer and for finding specific ports. <P>
<A NAME=HEADING41-3></A>
<H2>Identifying Ports</H2>
 Open Transport provides a standard <A NAME=MARKER-13-22></A>naming scheme for describing the ports available to a computer. There are two ways to identify each port uniquely: its port name and its port reference. <P>
<A NAME=HEADING41-5></A>
<H3>Port Name</H3>
 The <A NAME=MARKER-13-23></A><B>port name</B> is a unique name that designates the port. This name identifies the port without using any location information. For instance, <CODE>&quot;ltlkA&quot;</CODE> identifies LocalTalk on the serial port, and<CODE> &quot;ltlkB&quot;</CODE> identifies LocalTalk on the modem port. This name must always be used in the path string for the <CODE>OTCreateConfiguration</CODE> function to uniquely identify a port.<P>
 The port name is typically an abbreviation of the port's device type plus a suffix, usually numeric, such as <CODE>&quot;enet0</CODE>,<CODE>&quot;</CODE> <CODE>&quot;enet1</CODE>,<CODE>&quot;</CODE> and <CODE>&quot;enet2</CODE>.<CODE>&quot;</CODE> For historic reasons, LocalTalk and serial ports use an alphabetic suffix instead. For example, <CODE>&quot;ltlkA&quot;</CODE> is the modem port and <CODE>&quot;ltlkB&quot;</CODE> is the printer port. The port name is a zero-terminated string that can have a maximum length of 36 bytes: 31 bytes for the name, up to 4 bytes of extra characters (called <A NAME=MARKER-13-37></A><I>minor numbers</I> in XTI specifications) that are currently not used, and a byte for the terminating zero.<P>
 You can identify a port using only the device name, in which case Open Transport uses the first device of that type that has been registered and is available. For most devices this means the built-in device, if one exists. Otherwise, this refers to the first slotted device that has been registered. <P>
<A NAME=HEADING41-9></A>
<H3>Port Reference</H3>
 You can also uniquely identify a port with a <A NAME=MARKER-13-68></A><B>port reference,</B> which is a 32-bit value that describes a port's hardware characteristics: its device and bus type, its physical slot number, and, where applicable, its multiport identifier. For details of the possible values you can use in a port reference, see "The Port Reference"<A HREF=NetworkingWOT-270.html#MARKER-9-67></A>. <P>
<A NAME=HEADING41-11></A>
<H2>Multiport Identifiers</H2>
 The <A NAME=MARKER-13-26></A><B>multiport identifier</B> is a port function parameter that distinguishes between multiple ports when a single slot supports more than one port of the same device type. This parameter, called <CODE>other</CODE>, is part of the port reference structure, which is described in <A HREF=NetworkingWOT-270.html#MARKER-9-67>"The Port Reference"</A>. <P>
 Typically, the hardware device in a multiport slot is either a plug-in multifunction card with multiple ports on it or a device with multiple uses, one or more of which is a port. An example of a multifunction card is the SerialNB card with its four ports; an example of a multi-use device on most Macintosh computers is the SCC chip that can handle both LocalTalk and serial communications. Typically, a <A NAME=MARKER-13-27></A>multifunction card has multiple ports that use different values for the <CODE>other</CODE> parameter and possibly different device attributes. A <A NAME=MARKER-13-28></A>multi-use device is registered with all attributes identical except for the device type. <P>
<A NAME=HEADING41-14></A>
<H2>Pseudodevices</H2>
 There's a special type of port, called a <A NAME=MARKER-13-29></A><B>pseudodevice,</B> that is a driver that doesn't interface to a hardware device; instead, it interfaces to other device drivers. Pseudodevices are provided as a convenience for the Open Transport architecture. Open Transport defines special device types for certain common pseudodevices, such as modem, PPP, and SLIP. Because Open Transport can't possibly accommodate all possible pseudodevices, there is a generic device type, designated with the constant <CODE>kOTPseudoDevice</CODE>, that identifies unknown or unusual pseudodevices. Each pseudodevice must have a unique port reference. Typically, a pseudodevice is private, and a flag indicating that the port is private notifies applications browsing the port registry that the port is not normally available for public use.<P>
<A NAME=HEADING41-16></A>
<H2>Port Structures</H2>
 Every port on the computer is described in Open Transport by a <A NAME=MARKER-13-64></A><B>port structure, </B>which contains its port reference, several sets of information flags, its port name, its STREAMS module name, and the slot ID (for ports on a PCI bus). For details of the port structure, see <A HREF=NetworkingWOT-269.html#MARKER-9-63>"The Port Structure"</A>. <P>
 The port structure includes fields that allow you to identify a port's <A NAME=MARKER-13-31></A><B>child port,</B> which allows you to identify which of several available hardware devices the port uses. A port may have more than one child port, all of which can be active simultaneously.<P>
 For example, in many implementations, a SLIP port is a pseudodevice that uses a serial port as its hardware device. If more than one serial port is available, the SLIP pseudodevice could use any of them. A SLIP port therefore always has a serial port as its child port so that when multiple serial ports are available, you can use the child port information to find out which serial port the SLIP port is using. Other device types, such as Ethernet devices, do not have child ports because they have a one-to-one relationship with their hardware device--that is, they have only one possible choice for the hardware device they can use. <P>
 The <B>slot ID</B> is a user-visible identifier used for cards on PCI bus computers. To derive this value, Open Transport accesses information in the Name Registery, which is a register of hardware and software configuration information for Power Macintosh computers that is maintained by Mac OS. For more information about the Name Registry, see <I>Designing PCI Cards and Drivers for Power Macintosh Computers</I>.<P>
 One set of flags indicate a port's <A NAME=MARKER-13-42></A>framing capabilities--that is, the different packet headers and trailers (data frames) permitted by the protocol on that port. The framing flags are specific to the device type being registered. See the appropriate documentation for the device to determine how to interpret these flags. <P>
 For each hardware device type, Open Transport derives a <A NAME=MARKER-13-33></A>default port name based on the port name by stripping its numeric (or alphabetic, in the case of LocalTalk and serial ports) suffix. All ports on a computer that are the same hardware device type result in the same default port name. Thus, Ethernet devices default to <CODE>&quot;enet</CODE>.<CODE>&quot;</CODE> For all hardware device types, you can use the default port name as part of the configuration string. If you use a default name such as <CODE>&quot;enet</CODE>,<CODE>&quot;</CODE> Open Transport uses whichever port is identified as the default port. If it can't find that port, OpenTransport returns an error message.<P>
 In the case of LocalTalk, however, Open Transport uses a flag to define a specific port as a <A NAME=MARKER-13-34></A><B>port alias,</B> or a <A NAME=MARKER-13-35></A><I>default</I> port, for LocalTalk ports. This port is called <CODE>&quot;ltlk&quot;</CODE> and uses the same Streams module name as the default LocalTalk port. Normally, the LocalTalk default port is the printer port, <CODE>&quot;ltlkB</CODE>,<CODE>&quot;</CODE> but if a computer doesn't have an <CODE>&quot;ltlkB&quot;</CODE> port, then the LocalTalk default is the modem port, <CODE>&quot;ltlkA&quot;.</CODE> Because both the port alias and the default port have the same STREAMS module name, when you use the port alias to configure the port, Open Transport can locate the default port even if a port doesn't use the standard "<CODE>ItlkB</CODE>" default.<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DT><A HREF="NetworkingWOT-41.html#HEADING41-3">Identifying Ports</A>
<DD>
<DT><A HREF="NetworkingWOT-41.html#HEADING41-5">Port Name</A>
<DD>
<DT><A HREF="NetworkingWOT-41.html#HEADING41-9">Port Reference</A>
<DD>
<DT><A HREF="NetworkingWOT-41.html#HEADING41-11">Multiport Identifiers</A>
<DD>
<DT><A HREF="NetworkingWOT-41.html#HEADING41-14">Pseudodevices</A>
<DD>
<DT><A HREF="NetworkingWOT-41.html#HEADING41-16">Port Structures</A>
<DD>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="NetworkingWOT-40.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="NetworkingWOT-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="NetworkingWOT-491.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A>  <A HREF="NetworkingWOT-42.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="NetworkingWOT-4.html">&copy; Apple Computer, Inc.</A><br>15 JAN 1998<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Audio Unit Programming Guide: The Audio Unit View</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="The Audio Unit View"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40003278-CH13" title="The Audio Unit View"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000428" target="_top">Audio</a> &gt; <a href="../../../CoreAudio-date.html#//apple_ref/doc/uid/TP30000440-TP30000428-TP30000500" target="_top">Core Audio</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40003278-CH1-SW2">Audio Unit Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../TheAudioUnit/TheAudioUnit.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../AQuickTouroftheCoreAudioSDK/AQuickTouroftheCoreAudioSDK.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40003278-CH13-SW1" title="The Audio Unit View"></a><h1>The Audio Unit View</h1><p>Almost every audio unit needs a graphical interface to let the user adjust the audio unit’s operation and see what it’s doing. In Core Audio terminology, such a graphical interface is called a view. When you understand how views work and how to build them, you can add a great deal of value to the audio units you create.</p><p></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_46">Types of Views</a>
				
			<br/>
			
        
			
			
				<a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_47">Separation of Concerns</a>
				
			<br/>
			
        
			
			
				<a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW2">The Generic View</a>
				
			<br/>
			
        
			
			
				<a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_48">Custom Views</a>
				
			<br/>
			
        
			
			
				<a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW7">View Instantiation and Initialization</a>
				
			<br/>
			
        
			
			
				<a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW5">Parameter and Property Events</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_46" title="Types of Views"></a><h2>Types of Views</h2><p>There are two main types of views:</p><ul class="ul"><li class="li"><p><strong>Generic views</strong> provide a functional yet decidedly non-flashy interface. You get a generic view for free. It is built for you by the host application that opens your audio unit, based on parameter and property definitions in your audio unit source files.</p></li><li class="li"><p><strong>Custom views</strong> are graphical user interfaces that you design and build. Creating a great custom view may entail more than half of the development time for an audio unit. For your effort you can offer something to your users that is not only more attractive but more functional as well.</p><p>You may choose to wait on developing a custom view until after your audio unit is working, or you may forgo the custom view option entirely. If you do create a custom view, you can use Carbon or Cocoa.</p></li></ul><a name="//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_47" title="Separation of Concerns"></a><h2>Separation of Concerns</h2><p>From the standpoint of a user, a view <em>is</em> an audio unit. From your standpoint as a developer, the situation is a bit more subtle.</p><p>You build a view to be logically separate from the audio unit executable code, yet packaged within the same bundle. To achieve this programmatic separation, Apple recommends that you develop your custom views so that they would work running in a separate address space, in a separate process, and on a separate machine from the audio unit executable code. For example, you pass data between the audio unit executable code and its view only by value, never by reference.</p><p>Without impinging on this formal separation, however, it’s often convenient to share a header file between an audio unit executable code and its view. You’ll see this done in the SDK’s FilterDemo project. A shared header file can provide, for example, data types and constants for custom properties that an audio unit’s executable code and its view can both use.</p><p>Both generic and custom views make use of a notification mechanism to communicate with their associated audio unit executable code, as described in <span class="content_text"><a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW5">“Parameter and Property Events.”</a></span></p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW2" title="The Generic View"></a><h2>The Generic View</h2><p>Host applications create a generic view for your audio unit based on your parameter and property definitions. Starting with Mac OS X v10.4, Tiger, host applications can generate Carbon or Cocoa generic views.</p><p>Here’s the Cocoa generic view for the FilterDemo audio unit, one of the sample projects in the Core Audio SDK:</p><br/><div><img src = "../Art/generic_view.jpg" alt = "image: ../Art/generic_view.jpg" ></div><br/><p>The audio unit associated with this view has two continuously variable parameters, each represented in the view by a simple slider along with a text field showing the parameter’s current value. The generic view for your audio unit will have a similar look.</p><p><span class="content_text">Table 3-1</span> describes where each user interface element in a generic view comes from. The “Source of value” column in the table refers to files you see in an audio unit Xcode project built using the “Audio Unit Effect with Cocoa View” template.</p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW3" title="Table 3-1User interface items in an audio unit generic view"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 3-1&nbsp;&nbsp;</strong>User interface items in an audio unit generic view</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>User interface item</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Example value</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Source of value</p></th></tr><tr><td  scope="row"><p>Audio unit name, at upper left of view utility window</p></td><td ><p>Audio Unit: Filter</p></td><td ><p><code>NAME</code> defined constant in the<code>&lt;className>.r</code> file</p></td></tr><tr><td  scope="row"><p>Audio unit name, in title bar of view utility window and in pop-up</p></td><td ><p>Filter</p></td><td ><p><code>NAME</code> defined constant in the <code>&lt;className>.r</code> file</p></td></tr><tr><td  scope="row"><p>Manufacturer name, at upper right of view utility window</p></td><td ><p>Apple Demo</p></td><td ><p><code>NAME</code> defined constant in the <code>&lt;className>.r</code> file</p></td></tr><tr><td  scope="row"><p>Parameter name</p></td><td ><p>cutoff frequency</p></td><td ><p><code>kParameterOneName</code> CFStringRef string value in the <code>&lt;className>.h</code> file</p></td></tr><tr><td  scope="row"><p>Parameter maximum value</p></td><td ><p>22050</p></td><td ><p><code><!--a-->GetParameterInfo<!--/a--></code> method in the <code>&lt;className>.cpp</code> file</p></td></tr><tr><td  scope="row"><p>Parameter minimum value</p></td><td ><p>12.00</p></td><td ><p><code><!--a-->GetParameterInfo<!--/a--></code> method in the <code>&lt;className>.cpp</code> file</p></td></tr><tr><td  scope="row"><p>Parameter default value</p></td><td ><p>1000</p></td><td ><p><code>kDefaultValue_ParamOne</code> float value from the <code>&lt;className>.h</code> file</p></td></tr><tr><td  scope="row"><p>Measurement units name</p></td><td ><p>Hz</p></td><td ><p>Measurement unit as specified in the <code><!--a-->GetParameterInfo<!--/a--></code> method in the <code>&lt;className>.cpp</code> file.</p></td></tr><tr><td  scope="row"><p>Slider</p></td><td ><p>User adjustable. Initially set to indicate the parameter default value.</p></td><td ><p>The generic view mechanism presents a slider for this parameter. This is because the parameter unit of measurement, as defined in the <code>GetParameterInfo</code> method, is “linear gain.“</p></td></tr></table></div><p> As shown next, a custom view can provide significantly more value and utility than a generic view.</p><a name="//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_48" title="Custom Views"></a><h2>Custom Views</h2><p>When a host opens your audio unit, it asks if there’s a custom view available. If so, it can use it as described in <span class="content_text"><a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW7">“View Instantiation and Initialization.”</a></span></p><p>Here’s the custom view for the same audio unit described in <span class="content_text">“The Generic View,”</span> namely, the FilterDemo audio unit from the Core Audio SDK:</p><br/><div><img src = "../Art/custom_view.jpg" alt = "image: ../Art/custom_view.jpg" ></div><br/><p>The primary feature of this custom view is a realtime frequency response curve. This makes the custom view (and, by association, the audio unit) more attractive and far more useful. Instead of seeing just a pair of numbers, a user can now see the frequency response, including how filter resonance and cutoff frequency influence the response. No matter what sort of audio unit you build, you can provide similar benefits to users when you include a custom view with your audio unit.</p><p>The advantages of custom views over generic views include:</p><ul class="ul"><li class="li"><p>The ability to hide unneeded detail, or to provide progressive disclosure of controls</p></li><li class="li"><p>The ability to provide support for parameter automation</p></li><li class="li"><p>Choice of user-interface controls, for example knobs, faders, or horizontal sliders</p></li><li class="li"><p>Much more information for the user through real-time graphs, such as frequency response curves</p></li><li class="li"><p>A branding opportunity for your company</p></li></ul><p>The SDK’s FilterDemo audio unit project is a good example to follow when creating a custom view for your audio unit. See <span class="content_text"><a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW8">“Tutorial: Demonstrating Parameter Gestures and Audio Unit Events”</a></span> later in this chapter for more on custom views.</p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW7" title="View Instantiation and Initialization"></a><h2>View Instantiation and Initialization</h2><p>When a host application opens an audio unit, it can query the audio unit as to whether it has a custom view. The host does this with code such as this snippet from the CocoaAUHost project in the SDK:</p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW9" title="Listing 3-1A host application gets a Cocoa custom view from an audio unit"></a><p class="codesample"><strong>Listing 3-1&nbsp;&nbsp;</strong>A host application gets a Cocoa custom view from an audio unit</p><div class="codesample"><table><tr><td scope="row"><pre>if (AudioUnitGetProperty (<span></span></pre></td></tr><tr><td scope="row"><pre>        inAU,                       // the audio unit the host is checking<span></span></pre></td></tr><tr><td scope="row"><pre>        kAudioUnitProperty_CocoaUI, // the property the host is querying<span></span></pre></td></tr><tr><td scope="row"><pre>        kAudioUnitScope_Global,<span></span></pre></td></tr><tr><td scope="row"><pre>        0,<span></span></pre></td></tr><tr><td scope="row"><pre>        cocoaViewInfo,<span></span></pre></td></tr><tr><td scope="row"><pre>        &amp;dataSize) == noErr) {<span></span></pre></td></tr><tr><td scope="row"><pre>    CocoaViewBundlePath =            // the host gets the path to the view bundle<span></span></pre></td></tr><tr><td scope="row"><pre>        (NSURL *) cocoaViewInfo -> mCocoaAUViewBundleLocation;<span></span></pre></td></tr><tr><td scope="row"><pre>    factoryClassName    =            // the host gets the view's class name<span></span></pre></td></tr><tr><td scope="row"><pre>        (NSString *) cocoaViewInfo -> mCocoaAUViewClass[0];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	<p>If you do not supply a custom view with your audio unit, the host will build a generic view based on your audio unit’s parameter and property definitions.</p><p>Here is what happens, in terms of presenting a view to the user, when a host opens an audio unit:</p><ol class="ol"><li class="li"><p>The host application calls the <code>GetProperty</code> method on an audio unit to find out if it has a custom view, as shown in <span class="content_text">Listing 3-1</span>. If the audio unit provides a Cocoa view, the audio unit should implement the <code>kAudioUnitProperty_CocoaUI</code> property. If the audio unit provides a Carbon view, the audio unit should implement the <code>kAudioUnitProperty_GetUIComponentList</code> property. The rest of this sequence assumes the use of a Cocoa custom view.</p></li><li class="li"><p>The host calls the <code><a href="../../../Reference/CoreAudio/audiocodec/audiocodec.html#//apple_ref/doc/c_ref/GetPropertyInfo" target="_top">GetPropertyInfo</a></code> method for the <code>kAudioUnitProperty_CocoaUI</code> property to find out how many Cocoa custom views are available. As a short cut, a host can skip the call to <code><a href="../../../Reference/CoreAudio/audiocodec/audiocodec.html#//apple_ref/doc/c_ref/GetPropertyInfo" target="_top">GetPropertyInfo</a></code>. In this case, the host would take the first view in the view class array by using code such as shown in the listing above, using an array index of <code>0</code>: <code>factoryClassName = (NSString *) cocoaViewInfo -> mCocoaAUViewClass[0];</code>. In this case, skip ahead to step 4.</p></li><li class="li"><p>The audio unit returns the size of the <code>AudioUnitCocoaViewInfo</code> structure as an integer value, indicating how many Cocoa custom views are available. Typically, developers create one view per audio unit.</p></li><li class="li"><p>The host examines the value of <em>cocoaViewInfo</em> to find out where the view bundle is and what the main view class is for the view (or for the specified view if the audio unit provides more than one).</p></li><li class="li"><p>The host loads the view bundle, starting by loading the main view class to instantiate it.</p></li></ol><p>There are some rules about how to structure the main view class for a Cocoa view:</p><ul class="ul"><li class="li"><p>The view must implement the <code>AUCocoaUIBase</code> protocol. This protocol specifies that the view class acts as a factory for views, and returns an <code>NSView</code> object using the <code><!--a-->uiViewForAudioUnit:withSize:<!--/a--></code> method. This method tells the view which audio unit owns it, and provides a hint regarding screen size for the view in pixels (using an <code>NSSize</code> structure).</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSView *) uiViewForAudioUnit: (AudioUnit) inAudioUnit<span></span></pre></td></tr><tr><td scope="row"><pre>                       withSize: (NSSize) inPreferredSize;<span></span></pre></td></tr></table></div>	</li><li class="li"><p>If you’re using a nib file to construct the view (as opposed to generating the view programmatically), the owner of the nib file is the main (factory) class for the view.</p></li></ul><p>An audio unit’s view should work whether the audio unit is simply instantiated or whether it has been initialized. The view should continue to work if the host uninitializes the audio unit. That is, a view should not assume that its audio unit is initialized. This is important enough in practice that the <code>auval</code> tool includes a test for retention of parameter values across uninitialization and reinitialization.</p><!-- <Section XRefSourceID="SW3"><Name>Audio Unit–View Communication</Name><Para><comment>Again, just notes: see WWDC 2005 session 203 at 45:47.</comment></Para><Para></Para><Para><comment>Add a paragraph here about the importance of an audio unit, its view, and the host application to all stay in sync; and that the mechanism for this synchronization is the listenter/notification mechanism provided by the Audio Unit Event API.</comment></Para></Section> --><a name="//apple_ref/doc/uid/TP40003278-CH13-SW5" title="Parameter and Property Events"></a><h2>Parameter and Property Events</h2><p>Audio unit automation (as described back in <span class="content_text"><a href="../AudioUnitDevelopmentFundamentals/AudioUnitDevelopmentFundamentals.html#//apple_ref/doc/uid/TP40003278-CH7-SW13">“Supporting Parameter Automation”</a></span>) is a feature implemented by host applications and custom views. It relies on parameter and property events—which in turn rely on the Audio Unit Event API, described next.</p><a name="//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_49" title="The Audio Unit Event API"></a><h3>The Audio Unit Event API</h3><p>Hosts, views, and audio units can take advantage of Core Audio notifications to ensure that all three of these entities stay in sync in terms of parameter adjustments. The notifications, accessed through the Audio Unit Event API, work no matter which of the three entities invokes a parameter change. The API is declared in the <code>AudioUnitUtilities.h</code> header file in the Audio Toolbox framework.</p><p>The Audio Unit Event API defines an <code>AudioUnitEvent</code> data type, shown in <span class="content_text">Listing 3-2</span>:</p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW11" title="Listing 3-2The AudioUnitEvent structure"></a><p class="codesample"><strong>Listing 3-2&nbsp;&nbsp;</strong>The AudioUnitEvent structure</p><div class="codesample"><table><tr><td scope="row"><pre>typedef struct AudioUnitEvent {<span></span></pre></td></tr><tr><td scope="row"><pre>    AudioUnitEventType mEventType;          // 1<span></span></pre></td></tr><tr><td scope="row"><pre>        union {<span></span></pre></td></tr><tr><td scope="row"><pre>            AudioUnitParameter mParameter;  // 2<span></span></pre></td></tr><tr><td scope="row"><pre>            AudioUnitProperty mProperty;    // 3<span></span></pre></td></tr><tr><td scope="row"><pre>        } mArgument;<span></span></pre></td></tr><tr><td scope="row"><pre>} AudioUnitEvent;<span></span></pre></td></tr></table></div>	<p>Here’s how this structure works:</p><ol class="ol"><li class="li"><p>Identifies the type of the notification, as defined in the <code>AudioUnitEventType</code> enumeration.</p></li><li class="li"><p>Identifies the parameter involved in the notification, for notifications that are begin or end gestures or changes to parameters. (See <span class="content_text"><a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW4">“Parameter Gestures.”</a></span>) The <code>AudioUnitParameter</code> data type is used by the Audio Unit Event API and not by the Audio Unit framework, even though it is defined in the Audio Unit framework.</p></li><li class="li"><p>Identifies the property involved in the notification, for notifications that are property change notifications.</p></li></ol><p>A corresponding <code>AudioUnitEventType</code> enumeration lists the various defined <code>AudioUnitEvent</code> event types, shown in <span class="content_text">Listing 3-3</span>:</p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW10" title="Listing 3-3The AudioUnitEventType enumeration"></a><p class="codesample"><strong>Listing 3-3&nbsp;&nbsp;</strong>The AudioUnitEventType enumeration</p><div class="codesample"><table><tr><td scope="row"><pre>typedef UInt32 AudioUnitEventType;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioUnitEvent_ParameterValueChange        = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioUnitEvent_BeginParameterChangeGesture = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioUnitEvent_EndParameterChangeGesture   = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kAudioUnitEvent_PropertyChange              = 3<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>	<dl class="termdef">	<dt>kAudioUnitEvent_ParameterValueChange</dt><dd><p>Indicates that the notification describes a change in the value of a parameter</p></dd><dt>kAudioUnitEvent_BeginParameterChangeGesture</dt><dd><p>Indicates that the notification describes a parameter “begin” gesture; a parameter value is about to change</p></dd><dt>kAudioUnitEvent_EndParameterChangeGesture</dt><dd><p>Indicates that the notification describes a parameter “end” gesture; a parameter value has finished changing</p></dd><dt>kAudioUnitEvent_PropertyChange</dt><dd><p>Indicates that the notification describes a change in the value of an audio unit property</p></dd></dl><a name="//apple_ref/doc/uid/TP40003278-CH13-SW4" title="Parameter Gestures"></a><h3>Parameter Gestures</h3><p>User-interface events that signal the start or end of a parameter change are called <em>gestures</em>. These events can serve to pass notifications among a host, a view, and an audio unit that a parameter is about to be changed, or has just finished being changed. Like parameter and property changes, gestures are communicated using the Audio Unit Event API. Specifically, gestures use the <code>kAudioUnitEvent_BeginParameterChangeGesture</code> and <code>kAudioUnitEvent_EndParameterChangeGesture</code> event types, as shown in <span class="content_text"><a href="TheAudioUnitView.html#//apple_ref/doc/uid/TP40003278-CH13-SW10">Listing 3-3</a></span>, above.</p><a name="//apple_ref/doc/uid/TP40003278-CH13-DontLinkElementID_50" title="Basic Parameter Adjustments"></a><h3>Basic Parameter Adjustments</h3><p>For basic parameter adjustment, Core Audio provides the <code><a href="../../../Reference/CoreAudio/audio_units/audio_units.html#//apple_ref/doc/c_ref/AudioUnitSetParameter" target="_top">AudioUnitSetParameter</a></code> function, declared in the <code>AUComponent.h</code> header file in the Audio Unit framework. When a host or a view calls this function, it sets the specified parameter in the audio unit by invoking the <code>SetParameter</code> method in the audio unit. It does not provide notification to support automation or updating of views.</p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW6" title="Parameter Adjustments with Notification"></a><h3>Parameter Adjustments with Notification</h3><p>To add notification that a parameter has changed, a host or custom view follows a call to the <code><a href="../../../Reference/CoreAudio/audio_units/audio_units.html#//apple_ref/doc/c_ref/AudioUnitSetParameter" target="_top">AudioUnitSetParameter</a></code> function with a call to the <code><!--a-->AUParameterListenerNotify<!--/a--></code> function from the Audio Unit Event API in the <code>AudioUnitUtilities.h</code> header file.</p><p>To set a parameter and notify listeners in one step, a host or a custom view calls the <code><!--a-->AUParameterSet<!--/a--></code> function, also from the Audio Unit Event API.</p><p>Sometimes an audio unit itself changes the value of one of its parameters. In such a case, it should issue a notification about the value change. For a discussion on this, refer back to <span class="content_text"><a href="../TheAudioUnit/TheAudioUnit.html#//apple_ref/doc/uid/TP40003278-CH12-SW15">“Defining and Using Parameters”</a></span> in <span class="content_text">“The Audio Unit.”</span></p><a name="//apple_ref/doc/uid/TP40003278-CH13-SW8" title="Tutorial: Demonstrating Parameter Gestures and Audio Unit Events"></a><h3>Tutorial: Demonstrating Parameter Gestures and Audio Unit Events</h3><p>This mini-tutorial illustrates how gestures and audio unit events work by:</p><ul class="spaceabove"><li class="li"><p>Instantiating two views for an audio unit</p></li><li class="li"><p>Performing adjustments in one of the views while observing the effect in the other view</p></li></ul><p>Along the way, this tutorial:</p><ul class="spaceabove"><li class="li"><p>Introduces you to compiling an audio unit project with Xcode</p></li><li class="li"><p>Shows how AU Lab can display a generic view and a custom view for the same audio unit</p></li><li class="li"><p>Shows how a custom property supports communication between an audio unit and a custom view</p></li></ul><p>Before you start, make sure that you’ve installed Xcode and the Core Audio SDK, both of which are part of Apple’s Xcode Tools installation.</p><p>1. Open the <code>FilterDemo.xcodeproj</code> Xcode project file in the <code>Developer/Examples/CoreAudio/AudioUnits/FilterDemo</code> folder.</p><br/><div><img src = "../Art/gestures_1.jpg" alt = "image: ../Art/gestures_1.jpg" ></div><br/><p>2. Click Build to build the audio unit project. (You may see some warnings about “non-virtual destructors.“ Ignore these warnings.)</p><p>Xcode creates a new <code>build</code> folder inside the <code>FilterDemo</code> project folder.</p><p>3. Open the <code>build</code> folder and look inside the <code>Development</code> target folder.</p><br/><div><img src = "../Art/gestures_2.jpg" alt = "image: ../Art/gestures_2.jpg" ></div><br/><p>The newly built audio unit bundle is named <code>FilterDemo.component</code>, as shown in the figure.</p><p>4. Copy the <code>FilterDemo.component</code> bundle to the <code>~/Library/Audio/Plug-Ins/Components</code> folder. In this location, the newly built audio unit is available to host applications.</p><p>5. Launch the AU Lab audio unit host application (in <code>/Developer/Applications/Audio/</code>) and create a new AU Lab document. Unless you've configured AU Lab to use a default document style, the Create New Document window opens. If AU Lab was already running, choose File > New to get this window.</p><br/><div><img src = "../Art/au_lab_new_doc_1.jpg" alt = "image: ../Art/au_lab_new_doc_1.jpg" ></div><br/><p>Ensure that the configuration matches the settings shown in the figure: Built-In Audio for the Audio Device, Line In for the Input Source, and Stereo for Output Channels. Leave the window's Inputs tab unconfigured; you will specify the input later. Click OK.</p><p>A new AU Lab window opens, showing the output channel you specified.</p><br/><div><img src = "../Art/au_lab_new_doc_2.jpg" alt = "image: ../Art/au_lab_new_doc_2.jpg" ></div><br/><p>6. Click the triangular menu button in the one row of the Effects section in the Master Out track in AU Lab, as shown in the figure.</p><br/><div><img src = "../Art/gestures_3.jpg" alt = "image: ../Art/gestures_3.jpg" ></div><br/><p>In the menu that opens, choose the Filter audio unit from the Apple Demo group:</p><br/><div><img src = "../Art/gestures_4.jpg" alt = "image: ../Art/gestures_4.jpg" ></div><br/><p>The custom view for the Filter audio unit opens.</p><br/><div><img src = "../Art/gestures_5.jpg" alt = "image: ../Art/gestures_5.jpg" ></div><br/><p>The custom view’s frequency response curve is drawn in real time based on the audio unit’s actual frequency response. The audio unit makes its frequency response data available to the custom view by declaring a custom property. The audio unit keeps the value of its custom property up to date. The custom view queries the audio unit’s custom property to draw the frequency response curve.</p><p>7. Option-click the audio unit name in the Effects row.</p><br/><div><img src = "../Art/gestures_6.jpg" alt = "image: ../Art/gestures_6.jpg" ></div><br/><p>A second instance of a view for the Filter audio unit opens.</p><br/><div><img src = "../Art/gestures_7.jpg" alt = "image: ../Art/gestures_7.jpg" ></div><br/><p>8. Click the view type pop-up menu in one instance of the audio unit’s view, as shown in the figure:</p><br/><div><img src = "../Art/gestures_8.jpg" alt = "image: ../Art/gestures_8.jpg" ></div><br/><p>In the menu that opens, choose the Generic View item:</p><br/><div><img src = "../Art/gestures_9.jpg" alt = "image: ../Art/gestures_9.jpg" ></div><br/><p>The view changes to the generic view, as shown in the next figure. You are now set up to demonstrate gestures and audio unit events.</p><p>9. Click and hold one of the sliders in the generic view, as shown in the figure. When you click, observe that the crosshairs in the custom view become highlighted in bright blue. They remain highlighted as long as you hold down the mouse button.</p><br/><div><img src = "../Art/gestures_10.jpg" alt = "image: ../Art/gestures_10.jpg" ></div><br/><p>As you move the slider in the generic view, frequency response curve in the custom view keeps pace with the new setting.</p><ul class="spaceabove"><li class="li"><p>The highlighting and un-highlighting of the crosshairs in the custom view, when you click and release on a slider in the generic view, result from gesture events.</p></li><li class="li"><p>The changes in the frequency response curve in the custom view, as you move a slider in the generic view, result from parameter change events</p></li></ul><p>10. Finally, click and hold at the intersection of the crosshairs in the custom view. When you click, observe that the sliders in the generic view become highlighted. As you move the crosshairs in the custom view, the sliders in the generic view keep pace with the new settings.</p><br/><div><img src = "../Art/gestures_11.jpg" alt = "image: ../Art/gestures_11.jpg" ></div><br/><p>This demonstrates that both views, and the audio unit itself, remain in sync by way of audio unit events.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../TheAudioUnit/TheAudioUnit.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../AQuickTouroftheCoreAudioSDK/AQuickTouroftheCoreAudioSDK.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/MusicAudio/Conceptual/AudioUnitProgrammingGuide/TheAudioUnitView/TheAudioUnitView.html%3Fid%3DTP40003278-1.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/MusicAudio/Conceptual/AudioUnitProgrammingGuide/TheAudioUnitView/TheAudioUnitView.html%3Fid%3DTP40003278-1.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/MusicAudio/Conceptual/AudioUnitProgrammingGuide/TheAudioUnitView/TheAudioUnitView.html%3Fid%3DTP40003278-1.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<html><head><title>Mac OS X
 Manual Page For ModPerl::RegistryCooker(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/ModPerl::RegistryCooker" title="Mac OS X
 Manual Page for ModPerl::RegistryCooker(3pm)"><a name="//apple_ref/doc/man/3/ModPerl::RegistryCooker" title="Mac OS X
 Manual Page for ModPerl::RegistryCooker(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/ModPerl::RegistryCooker"; name=ModPerl::RegistryCooker(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
apache_mod_perl-101~38::mod_per<u></u><b><u>perl-101~38</u></b><b></b><b><u>:</u></b><b></b><b><u>m</u></b><b></b><b><u>o</u></b><b></b><b><u>d</u></b><b></b><b><u>:d</u></b>api::ModPerl::RegistryCooker(3)



<b>NAME</b>
       ModPerl::RegistryCooker - Cook mod_perl 2.0 Registry Modules

<b>Synopsis</b>
         # shouldn't be used as-is but sub-classed first
         # see ModPerl::Registry for an example

<b>Description</b>
       "ModPerl::RegistryCooker" is used to create flexible and overridable registry modules which emulate
       mod_cgi for Perl scripts. The concepts are discussed in the manpage of the following modules:
       "ModPerl::Registry", "ModPerl::Registry" and "ModPerl::RegistryBB".

       "ModPerl::RegistryCooker" has two purposes:

          Provide ingredients that can be used by registry sub-classes

          Provide a default behavior, which can be overriden in sub-classed

           META: in the future this functionality may move into a separate class.

       Here are the current overridable methods:

       META: these are all documented in RegistryCooker.pm, though not using pod. please help to port these
       to pod and move the descriptions here.

          <u>new()</u>

           create the class's object, bless it and return it

             my $obj = $class-&gt;new($r);

           $class -- the registry class, usually "__PACKAGE__" can be used.

           $r -- "Apache2::Request" object.

           default: <u>new()</u>

          <u>init()</u>

           initializes the data object's fields: "REQ", "FILENAME", "URI". Called from the <u>new()</u>.

           default: <u>init()</u>

          <u>default</u><b>_</b><u>handler()</u>

           default:  <u>default</u><b>_</b><u>handler()</u>

          <u>run()</u>

           default: <u>run()</u>

          <u>can</u><b>_</b><u>compile()</u>

           default: <u>can</u><b>_</b><u>compile()</u>

          <u>make</u><b>_</b><u>namespace()</u>

           default: <u>make</u><b>_</b><u>namespace()</u>

          <u>namespace</u><b>_</b><u>root()</u>

           default: <u>namespace</u><b>_</b><u>root()</u>

          <u>namespace</u><b>_</b><u>from()</u>

           If "namespace_from_uri" is used and the script is called from the virtual host, by default the
           virtual host name is prepended to the uri when package name for the compiled script is created.
           Sometimes this behavior is undesirable, e.g., when the same (physical) script is accessed using
           the same path_info but different virtual hosts. In that case you can make the script compiled
           only once for all vhosts, by specifying:

             $ModPerl::RegistryCooker::NameWithVirtualHost = 0;

           The drawback is that it affects the global environment and all other scripts will be compiled
           ignoring virtual hosts.

           default: <u>namespace</u><b>_</b><u>from()</u>

          <u>is</u><b>_</b><u>cached()</u>

           default: <u>is</u><b>_</b><u>cached()</u>

          <u>should</u><b>_</b><u>compile()</u>

           default: <u>should</u><b>_</b><u>compile()</u>

          <u>flush</u><b>_</b><u>namespace()</u>

           default: <u>flush</u><b>_</b><u>namespace()</u>

          <u>cache</u><b>_</b><u>table()</u>

           default: <u>cache</u><b>_</b><u>table()</u>

          <u>cache</u><b>_</b><u>it()</u>

           default: <u>cache</u><b>_</b><u>it()</u>

          <u>read</u><b>_</b><u>script()</u>

           default: <u>read</u><b>_</b><u>script()</u>

          <u>shebang</u><b>_</b><u>to</u><b>_</b><u>perl()</u>

           default: <u>shebang</u><b>_</b><u>to</u><b>_</b><u>perl()</u>

          <u>get</u><b>_</b><u>script</u><b>_</b><u>name()</u>

           default: <u>get</u><b>_</b><u>script</u><b>_</b><u>name()</u>

          <u>chdir</u><b>_</b><u>file()</u>

           default: <u>chdir</u><b>_</b><u>file()</u>

          <u>get</u><b>_</b><u>mark</u><b>_</b><u>line()</u>

           default: <u>get</u><b>_</b><u>mark</u><b>_</b><u>line()</u>

          <u>compile()</u>

           default: <u>compile()</u>

          <u>error</u><b>_</b><u>check()</u>

           default: <u>error</u><b>_</b><u>check()</u>

          <u>strip</u><b>_</b><u>end</u><b>_</b><u>data</u><b>_</b><u>segment()</u>

           default: <u>strip</u><b>_</b><u>end</u><b>_</b><u>data</u><b>_</b><u>segment()</u>

          <u>convert</u><b>_</b><u>script</u><b>_</b><u>to</u><b>_</b><u>compiled</u><b>_</b><u>handler()</u>

           default: <u>convert</u><b>_</b><u>script</u><b>_</b><u>to</u><b>_</b><u>compiled</u><b>_</b><u>handler()</u>

       <b>Special</b> <b>Predefined</b> <b>Functions</b>

       The following functions are implemented as constants.

          <u>NOP()</u>

           Use when the function shouldn't do anything.

          <u>TRUE()</u>

           Use when a function should always return a true value.

          <u>FALSE()</u>

           Use when a function should always return a false value.

<b>Sub-classing</b> <b>Techniques</b>
       To override the default "ModPerl::RegistryCooker" methods, first, sub-class "ModPerl::RegistryCooker"
       or one of its existing sub-classes, using "use base". Second, override the methods.

       Those methods that weren't overridden will be resolved at run time when used for the first time and
       cached for the future requests. One way to to shortcut this first run resolution is to use the symbol
       aliasing feature. For example to alias "ModPerl::MyRegistry::flush_namespace" as
       "ModPerl::RegistryCooker::flush_namespace", you can do:

         package ModPerl::MyRegistry;
         use base qw(ModPerl::RegistryCooker);
         *ModPerl::MyRegistry::flush_namespace =
             \&amp;ModPerl::RegistryCooker::flush_namespace;
         1;

       In fact, it's a good idea to explicitly alias all the methods so you know exactly what functions are
       used, rather then relying on the defaults. For that purpose "ModPerl::RegistryCooker" class method
       <u>install</u><b>_</b><u>aliases()</u> can be used. Simply prepare a hash with method names in the current package as keys
       and corresponding fully qualified methods to be aliased for as values and pass it to
       <u>install</u><b>_</b><u>aliases()</u>. Continuing our example we could do:

         package ModPerl::MyRegistry;
         use base qw(ModPerl::RegistryCooker);
         my %aliases = (
             flush_namespace =&gt; 'ModPerl::RegistryCooker::flush_namespace',
         );
         __PACKAGE__-&gt;install_aliases(\%aliases);
         1;

       The values use fully qualified packages so you can mix methods from different classes.

<b>Examples</b>
       The best examples are existing core registry modules: "ModPerl::Registry", "ModPerl::Registry" and
       "ModPerl::RegistryBB". Look at the source code and their manpages to see how they subclass
       "ModPerl::RegistryCooker".

       For example by default "ModPerl::Registry" uses the script's path when creating a package's
       namespace. If for example you want to use a uri instead you can override it with:

         *ModPerl::MyRegistry::namespace_from =
             \&amp;ModPerl::RegistryCooker::namespace_from_uri;
         1;

       Since the "namespace_from_uri" component already exists in "ModPerl::RegistryCooker". If you want to
       write your own method, e.g., that creates a namespace based on the inode, you can do:

         sub namespace_from_inode {
             my $self = shift;
             return (stat $self-&gt;[FILENAME])[1];
         }

       META: when $r-&gt;finfo will be ported it'll be more effecient.  (stat $r-&gt;finfo)[1]

<b>Authors</b>
       Doug MacEachern

       Stas Bekman

<b>See</b> <b>Also</b>
       "ModPerl::Registry", "ModPerl::RegistryBB" and "ModPerl::PerlRun".



perl v5.8.8                    <!-- a -->apache_mod_perl-10<u>0</u>perl-2.0.2::docs::api::ModPerl::RegistryCooker(3)<!-- /a -->
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/ModPerl__RegistryCooker.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/ModPerl__RegistryCooker.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/ModPerl__RegistryCooker.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

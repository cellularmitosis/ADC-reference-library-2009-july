<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Device Control Entry(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING20></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-19.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-21.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-10.html"><B>Chapter 1 - Device Manager</B></A> / <A HREF="Devices-17.html"><B>Device Manager Reference</B></A><BR><DL><DD><A HREF="Devices-18.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING20-0></A>
<H3><A NAME=MARKER-9-263></A>Device Control Entry</H3>
 <B><A NAME=MARKER-14-264></A><A NAME=MARKER-2-265></A><A NAME=MARKER-2-202></A>The device control entry</B> structure, defined by the <CODE>AuxDCE</CODE> data type,<B> stores information about each device driver in memory. </B>The <CODE>AuxDCE</CODE> data type supersedes the original <CODE>DCtlEntry</CODE> data type, and provides additional fields for drivers that serve slot devices. See the chapter <A HREF=Devices-53.html#MARKER-9-26>"Slot Manager"</A> in this book for information about slot device drivers.<P>
<PRE>
typedef struct AuxDCE {
   Ptr         dCtlDriver;    /* pointer or handle to driver */
   short       dCtlFlags;     /* flags */
   QHdr        dCtlQHdr;      /* I/O queue header */
   long        dCtlPosition;  /* current R/W byte position */
   Handle      dCtlStorage;   /* handle to private storage */
   short       dCtlRefNum;    /* driver reference number */
   long        dCtlCurTicks;  /* used internally */
   GrafPtr     dCtlWindow;    /* pointer to driver's window */
   short       dCtlDelay;     /* ticks between periodic actions */
   short       dCtlEMask;     /* desk accessory event mask */
   short       dCtlMenu;      /* desk accessory menu ID */
   char        dCtlSlot;      /* slot */
   char        dCtlSlotId;    /* sResource directory ID */
   long        dCtlDevBase;   /* slot device base address */
   Ptr         dCtlOwner;     /* reserved; must be 0 */
   char        dCtlExtDev;    /* external device ID */
   char        fillByte;      /* reserved */
} AuxDCE;
typedef AuxDCE *AuxDCEPtr, **AuxDCEHandle;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-382></A><A NAME=MARKER-2-272></A>dCtlDriver</CODE>
<DD> <DFN>A pointer or handle to the driver, as determined by the <A NAME=MARKER-2-250></A><CODE>dRAMBased flag (bit 6) of the dCtlFlags field.</CODE></DFN>
<DT><CODE><A NAME=MARKER-9-273></A>dCtlFlags</CODE>
<DD> <DFN>Flags describing the abilities and state of the driver. The high-order byte contains flags copied from the <CODE>drvrFlags word of the driver resource. These flags are described in <A HREF=Devices-14.html#MARKER-9-116>"Creating a Driver Resource," beginning on page 1-24</A>. </CODE></DFN>
<DT><DFN></DFN>
<DD> The low-order byte of the <CODE>dCtlFlags<DFN> field contains the following run-time flags: 
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT><B></B><TH>Name<TH>Bit<TH>Meaning<TR>
<TD>&nbsp;<TD><CODE>dOpened</CODE><TD><B>X</B><TD>Set by the Device Manager when the driver is opened, and cleared when it is closed.<TR>
<TD>&nbsp;<TD><CODE><A NAME=MARKER-9-251></A>dRAMBased</CODE><TD>6<TD>Set if the <CODE>dCtlDriver<DFN> field contains a handle.</DFN></CODE> <TR>
<TD>&nbsp;<TD><CODE>drvrActive</CODE><TD>7<TD>Set by the Device Manager when the driver is executing a request, and cleared when the driver is inactive.</TABLE>
</DFN></CODE>
<DT>
<DD> You can use the following constants to test or set the value of these flags:
</DL>
<PRE>
<A NAME=MARKER-2-276></A><A NAME=MARKER-2-275></A><A NAME=MARKER-2-274></A>enum {
	/*run-time flags in the devicecontrolentry*/
	<CODE><A NAME=MARKER-2-275></A></CODE>dOpenedMask    = 0x0020,
	<CODE><A NAME=MARKER-2-275></A></CODE>dRAMBasedMask  = 0x0040,
	<CODE><A NAME=MARKER-2-276></A></CODE>drvrActiveMask = 0x0080
};
</PRE>
<DL>
<DT><CODE><A NAME=MARKER-2-277></A>dCtlQHdr</CODE>
<DD> <DFN>A pointer to the header of the driver I/O queue, which is a standard Operating System queue. See the chapter "Queue Utilities" in <I><A HREF="../OSUtilities/OSUtilities-2.html">Inside Macintosh: Operating System Utilities</A> for more information about the <CODE>QHdr data type.</CODE></I></DFN>
<DT><CODE><A NAME=MARKER-2-278></A>dCtlPosition</CODE>
<DD> <DFN>The current source or destination position for reading or writing. This field is used only by drivers of block devices. The value in this field is the number of bytes beyond the physical beginning of the medium used by the device, and must be a multiple of 512. For example, immediately after the Disk Driver reads the first block of data from a 3.5-inch disk, this field contains the value 512</DFN>.
<DT><CODE><A NAME=MARKER-2-279></A>dCtlStorage</CODE>
<DD> <DFN>A handle to a driver's private storage. A driver may allocate a relocatable block of memory and keep a handle to it in this field.</DFN>
<DT><CODE><A NAME=MARKER-2-280></A>dCtlRefNum</CODE>
<DD> <DFN>The driver reference number</DFN>.
<DT><CODE><A NAME=MARKER-2-281></A>dCtlCurTicks</CODE>
<DD> <DFN>Used internally</DFN>.
<DT><CODE><A NAME=MARKER-2-282></A>dCtlWindow</CODE>
<DD> <DFN>A pointer to the desk accessory window</DFN>.<DFN> See <A HREF=Devices-16.html#MARKER-9-199>"Writing a Desk Accessory" on page 1-49</A> for more information</DFN>.
<DT><CODE><A NAME=MARKER-2-276></A>dCtlDelay</CODE>
<DD> <DFN>The number of ticks to wait between periodic actions</DFN>.
<DT><CODE><A NAME=MARKER-2-277></A>dCtlEMask</CODE>
<DD> <DFN>The desk accessory event mask. See <A HREF=Devices-16.html#MARKER-9-199>"Writing a Desk Accessory" on page 1-49</A> for more information</DFN>.
<DT><CODE><A NAME=MARKER-9-278></A>dCtlMenu</CODE>
<DD> <DFN>The menu ID of a desk accessory's menu, if any</DFN>.<DFN> See <A HREF=Devices-16.html#MARKER-9-199>"Writing a Desk Accessory" on page 1-49</A> for more information</DFN>.
<DT><CODE><A NAME=MARKER-2-279></A>dCtlSlot</CODE>
<DD> <DFN>The slot number of the slot device. </DFN>
<DT><CODE><A NAME=MARKER-2-281></A>dCtlSlotId</CODE>
<DD> <DFN>The sResource directory ID of the slot device.</DFN>
<DT><CODE><A NAME=MARKER-2-288></A>dCtlDevBase</CODE>
<DD> <DFN>The base address of the slot device. </DFN>For a video card this field contains the address of the pixel map<DFN> for the card's <CODE>GDevice record.</CODE></DFN>
<DT><A NAME=MARKER-2-289></A>dCtlOwner
<DD> <DFN>Reserved. This field must be 0.</DFN>
<DT><CODE><A NAME=MARKER-2-290></A>dCtlExtDev</CODE>
<DD> <DFN>The external device ID of the slot device.</DFN>
<DT><CODE>fillByte</CODE>
<DD> Reserved.<A NAME=MARKER-2-3></A><A NAME=MARKER-2-76></A><A NAME=MARKER-2-293></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-19.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-21.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

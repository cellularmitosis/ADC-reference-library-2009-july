<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>GetDiskFragment (IM: PS)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING52></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCSoftware-51.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCSoftware-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCSoftware-86.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCSoftware-53.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCSoftware-2.html"><B>PowerPC System Software</B></A> / <BR><DD><A HREF="PPCSoftware-40.html"><B>Chapter 3 - Code Fragment Manager</B></A> / <A HREF="PPCSoftware-43.html"><B>Code Fragment Manager Reference</B></A><BR><DL><DD><A HREF="PPCSoftware-50.html"><B>Code Fragment Manager Routines</B></A> / <A HREF="PPCSoftware-51.html"><B>Loading Fragments</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING52-0></A>
<H3><A NAME=MARKER-9-134></A>GetDiskFragment<A NAME=MARKER-2-135></A></H3>
 You can use the <CODE>GetDiskFragment</CODE> function to locate and possibly also load a fragment contained in a file's data fork into your application's context.<P>
<PRE>
OSErr GetDiskFragment (FSSpecPtr fileSpec, long offset, 
                        long length, Str63 fragName, 
                        LoadFlags findFlags, ConnectionID *connID, 
                        Ptr *mainAddr, Str255 errName);
</PRE>
<DL>
<DT><CODE>fileSpec</CODE>
<DD> A file system specification that identifies the disk-based fragment to load.
<DT><CODE>offset</CODE>
<DD> The number of bytes from the beginning of the file's data fork at which the beginning of the fragment is located.
<DT><CODE>length</CODE>
<DD> The length (in bytes) of the fragment. Specify the constant <CODE>kWholeFork</CODE> for this parameter if the fragment extends to the end-of-file of the data fork. Specify a nonzero value for the exact length of the fragment.
<DT><CODE>fragName</CODE>
<DD> An optional name of the fragment. (This information is used primarily to allow you to identify the fragment during debugging.)
<DT><CODE>findFlags</CODE>
<DD> A flag that specifies the operation to perform on the fragment. See the description below for the values you can pass in this parameter.
<DT><CODE>connID</CODE>
<DD> On exit, the connection ID that identifies the connection to the fragment. You can pass this ID to other Code Fragment Manager routines.
<DT><CODE>mainAddr</CODE>
<DD> On exit, the main address of the fragment. The value returned is specific to the fragment itself. Your application can use this parameter for its <BR>own purposes.<A NAME=MARKER-2-241></A>
<DT><CODE>errName</CODE>
<DD> On exit, the name of the fragment that could not successfully be loaded. This parameter is meaningful only if the call to <CODE>GetDiskFragment</CODE> fails.
</DL>
<A NAME=HEADING52-11></A>
<H5>DESCRIPTION</H5>
 The <CODE>GetDiskFragment</CODE> function locates and possibly also loads a disk-based fragment into your application's context. The actions of <CODE>GetDiskFragment</CODE> depend on the action flag you pass in the <CODE>findFlags</CODE> parameter. The Code Fragment Manager recognizes these constants:<P>
<PRE>
enum {
   kLoadLib          = 1,  /*load fragment*/
   kFindLib          = 2,  /*find fragment*/
   kLoadNewCopy      = 5   /*load fragment with new copy of data*/
};
</PRE>
 The <CODE>kFindLib</CODE> constant specifies that the Code Fragment Manager search for the specified fragment. If the fragment is already prepared and connected to your application, <CODE>GetDiskFragment</CODE> returns <CODE>fragNoErr</CODE> as its function result and the existing connection ID in the <CODE>connID</CODE> parameter. If the specified fragment is not found, <CODE>GetDiskFragment</CODE> returns the result code <CODE>fragLibNotFound</CODE>. If the specified fragment is found but could <BR>not be connected to your application, <CODE>GetDiskFragment</CODE> returns the result code <CODE>fragLibConnErr</CODE>.<P>
 The <CODE>kLoadLib</CODE> constant specifies that the Code Fragment Manager search for the specified fragment and, if it finds it, load it into memory. If the fragment has already been loaded, it's not loaded again. The Code Fragment Manager uses the data-<BR>instantiation method specified in the fragment's container (which is either global or per-connection instantiation).<P>
 The <CODE>kLoadNewCopy</CODE> constant specifies that the Code Fragment Manager load the specified fragment, creating a new copy of any writable data maintained by the fragment. You specify <CODE>kLoadNewCopy</CODE> to obtain one instance per load of the fragment's data and to override the data-instantiation method specified in the container itself. This is most useful for application extensions (for example, drop-in tools).<P>
<A NAME=HEADING52-17></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>fragNoErr<TD>0<TD>No error<TR>
<TD>paramErr<TD>-50<TD>Parameter error<CODE></CODE><TR>
<TD>fragLibNotFound<TD>-2804<TD>Specified fragment not found<TR>
<TD>fragHadUnresolveds<TD>-2807<TD>Loaded fragment has unacceptable unresolved symbols<TR>
<TD>fragNoMem<TD>-2809<TD>Not enough memory for internal bookkeeping<TR>
<TD>fragNoAddrSpace<TD>-2810<TD>Not enough memory in user's address <BR>space for section<TR>
<TD>fragObjectInitSeqErr<TD>-2812<TD>Order error during user initialization function<TR>
<TD>fragImportTooOld<TD>-2813<TD>Import library is too old<TR>
<TD>fragImportTooNew<TD>-2814<TD>Import library is too new<TR>
<TD>fragInitLoop<TD>-2815<TD>Circularity in required initialization order<TR>
<TD><CODE>fragLibConnErr</CODE><TD>-2817<TD>Error connecting to fragment<TR>
<TD>fragUserInitProcErr<TD>-2821<TD>Initialization procedure did not return <CODE>noErr</CODE></TABLE>
</H5>
<A NAME=HEADING52-18></A>
<H5>SEE ALSO</H5>
 See <A HREF=PPCSoftware-42.html#MARKER-9-51>"Loading Code Fragments" on page 3-10</A> for more details on the fragment-<BR>loading process.<A NAME=MARKER-2-106></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="PPCSoftware-51.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCSoftware-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCSoftware-86.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCSoftware-53.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="PPCSoftware-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

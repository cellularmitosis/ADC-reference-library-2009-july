<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Dealing With Timeouts(IM:IC)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING201></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="IAC-200.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-202.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="IAC-2.html"><B>Interapplication Communication</B></A> / <BR><DD><A HREF="IAC-195.html"><B>Chapter 5 - Creating and Sending Apple Events</B></A> / <A HREF="IAC-200.html"><B>Sending an Apple Event</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING201-0></A>
<H2><A NAME=MARKER-21-112></A>Dealing With Timeouts</H2>
 <A NAME=MARKER-2-113></A><A NAME=MARKER-2-114></A>When your application calls <CODE>AESend</CODE> and chooses to wait for the server application to handle the Apple event, it can also specify the maximum amount of time it is willing to wait for a response. You can specify a timeout value in the <CODE>timeOutInTicks</CODE> parameter to <CODE>AESend</CODE>. You can either specify a particular length of time, in ticks, that your application is willing to wait, or you can specify the <CODE>kNoTimeOut</CODE> constant or the <CODE>kAEDefaultTimeout</CODE> constant. <P>
 Use the <CODE>kNoTimeOut</CODE> constant to indicate that your application is willing to wait forever for a response from the server. You should use this value only if you are sure that the server will respond in a reasonable amount of time. You should also implement a method of checking whether the user wants to cancel. The idle function that you specify as a parameter to <CODE>AESend</CODE> should check the event queue for any instances of Command-period and immediately return <CODE>TRUE</CODE> as its function result if it finds a request to cancel in the event queue.<A NAME=MARKER-9-143></A><P>
 Use the <CODE>kAEDefaultTimeout</CODE> constant if you want the Apple Event Manager to use a default timeout value. The Apple Event Manager uses a timeout value of about one minute if you specify this constant.<A NAME=MARKER-2-116></A><P>
 If you set the <CODE>kAEWaitReply</CODE> flag and the server doesn't have a handler for the Apple event, the server immediately returns the <CODE>errAEEventNotHandled</CODE> result code. If the server doesn't respond within the length of time specified by the timeout value, <CODE>AESend</CODE> returns the <CODE>errAETimeout</CODE> result code and a reply Apple event that contains no data. This result code does not necessarily mean that the server failed to perform the requested action; it means only that the server did not complete processing within the specified time. The server might still be processing the Apple event, and it might still send a reply.<P>
 If the server finishes processing the Apple event sometime after the time specified in the <CODE>keyTimeoutAttr</CODE> attribute has expired, it returns a reply Apple event to <CODE>AEProcessAppleEvent</CODE>. The Apple Event Manager then adds the actual data to the reply. Thus, your application can continue to check the reply Apple event to see if the server has responded, even after the time expires. If the server has not yet sent the reply when the client attempts to extract data from the reply Apple event, the Apple Event Manager functions return the <CODE>errAEReplyNotArrived</CODE> result code. After the reply Apple event returns from the server, the client can extract the data in the reply.<P>
 Additionally, the server can examine the <CODE>keyTimeoutAttr</CODE> attribute of the Apple event to determine the timeout value specified by the client. You can use the value of this attribute as a rough estimate of how much time your handler has to respond. You can assume that your handler has less time to respond than the timeout value, because transmitting the Apple event uses some of the available time, as does transmitting the reply Apple event back to the client, and the event may have been in the queue for a while already.<A NAME=MARKER-2-340></A><A NAME=MARKER-2-29></A><A NAME=MARKER-9-42></A><A NAME=MARKER-2-344></A><P>
 If you set the <CODE>kAENoReply</CODE> or <CODE>kAEQueueReply</CODE> flag, the Apple Event Manager ignores any timeout value you specify, because your application is not waiting for the reply. An attempt by the server to examine the <CODE>keyTimeoutAttr</CODE> attribute in this situation generates the error <CODE>errAEDescNotFound</CODE>.<P>
 If your handler needs more time than is specified in the <CODE>keyTimeoutAttr</CODE> attribute, you can reset the timer by using the <CODE>AEResetTimer</CODE> function. This function resets the timeout value of an Apple event to its starting value.<A NAME=MARKER-2-393></A><A NAME=MARKER-9-72></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="IAC-200.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="IAC-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="IAC-529.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="IAC-202.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="IAC-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

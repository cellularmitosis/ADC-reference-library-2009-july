<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>CTRun Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="CTRun Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40005106-DontLinkChapterID_1" title="CTRun Reference"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Carbon/index.html#//apple_ref/doc/uid/TP30001281-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../../../reference/Carbon/idxTextFonts-date.html#//apple_ref/doc/uid/TP30001281-TP30000420-TP30000461" target="_top">Text &amp; Fonts</a> &gt; <a href="../index.html" target="_top">CTRun Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40005106-DontLinkChapterID_1-DontLinkElementID_22" title="CTRun Reference"></a><h1>CTRun Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span class="noWrap">Derived from</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><span class="content_text"><!--a target="_top" -->CFType<!--/a--></span></span></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px"><a href="../../CoreText_Framework_Ref/index.html#//apple_ref/doc/uid/TP40005304" target="_top">ApplicationServices</a>/CoreText</div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">CTRun.h</span><br/></div></td></tr></table></div><br/><a name="//apple_ref/doc/uid/TP40005106-CH1-DontLinkElementID_17" title="Overview"></a><h2>Overview</h2><p>The CTRun opaque type represents a glyph run, which is a set of consecutive glyphs sharing the same attributes and direction.</p><p>The typesetter creates glyph runs as it produces lines from character strings, attributes, and font objects. That is, a line is constructed of one or more glyphs runs. Glyph runs can draw themselves into a graphic context, if desired, although most users have no need to interact directly with glyph runs.</p><a name="//apple_ref/doc/uid/TP40005106-DontLinkChapterID_1-DontLinkElementID_18" title="Functions by Task"></a><h2>Functions by Task</h2>
<a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_3" title="Getting Glyph Run Data"></a>
    
    <h3 class="tasks">Getting Glyph Run Data</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetGlyphCount">CTRunGetGlyphCount</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Gets the glyph count for the run.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetAttributes">CTRunGetAttributes</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the attribute dictionary that was used to create the glyph run.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetStatus">CTRunGetStatus</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the run&#8217;s status.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetGlyphsPtr">CTRunGetGlyphsPtr</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a direct pointer for the glyph array stored in the run.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetGlyphs">CTRunGetGlyphs</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Copies a range of glyphs into a user-provided buffer.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetPositionsPtr">CTRunGetPositionsPtr</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a direct pointer for the glyph position array stored in the run.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetPositions">CTRunGetPositions</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Copies a range of glyph positions into a user-provided buffer.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetStringIndicesPtr">CTRunGetStringIndicesPtr</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns a direct pointer for the string indices stored in the run.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetStringIndices">CTRunGetStringIndices</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Copies a range of string indices into a user-provided buffer.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetStringRange">CTRunGetStringRange</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Gets the range of characters that originally spawned the glyphs in the run.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_9" title="Measuring the Glyph Run"></a>
    
    <h3 class="tasks">Measuring the Glyph Run</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetTypographicBounds">CTRunGetTypographicBounds</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Gets the typographic bounds of the run.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetImageBounds">CTRunGetImageBounds</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Calculates the image bounds for a glyph range.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_12" title="Drawing the Glyph Run"></a>
    
    <h3 class="tasks">Drawing the Glyph Run</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunDraw">CTRunDraw</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Draws a complete run or part of one.'/>
            </span></li>
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetTextMatrix">CTRunGetTextMatrix</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the text matrix needed to draw this run.'/>
            </span></li>
    </ul>


<a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_15" title="Getting the Type Identifier"></a>
    
    <h3 class="tasks">Getting the Type Identifier</h3>
        
    <ul class="tooltip">
            <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                
                <code><a href="reference.html#//apple_ref/c/func/CTRunGetTypeID">CTRunGetTypeID</a></code>
                
					<img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the Core Foundation type identifier of the run object.'/>
            </span></li>
    </ul>

<a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_19" title="Functions"></a><h2>Functions</h2><a name="//apple_ref/c/func/CTRunDraw" title="CTRunDraw"></a><a name="//apple_ref/doc/c_ref/CTRunDraw" title="CTRunDraw"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_13" title="CTRunDraw"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_24"></a><h3 class="tight">CTRunDraw</h3><p class="spaceabove">Draws a complete run or part of one.</p><p class="spaceabove"><pre>
void CTRunDraw( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run, <a href="../../../../GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/doc/c_ref/CGContextRef" target="_top">CGContextRef</a> context, <a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFRange" target="_top">CFRange</a> range );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run to draw.</p></dd><dt><em>context</em></dt><dd><p>The context into which to draw the run.</p></dd><dt><em>range</em></dt><dd><p>The portion of the run to draw. If the length of the range is set to <code>0</code>, then the draw operation continues from the start index of the range to the end of the run.</p></dd></dl><h5 class="tight">Discussion</h5><p>This is a convenience call, because the run could be drawn by accessing the glyphs. This call can leave the graphics context in any state and does not flush the context after the draw operation.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetAttributes" title="CTRunGetAttributes"></a><a name="//apple_ref/doc/c_ref/CTRunGetAttributes" title="CTRunGetAttributes"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_4" title="CTRunGetAttributes"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_25"></a><h3 class="tight">CTRunGetAttributes</h3><p class="spaceabove">Returns the attribute dictionary that was used to create the glyph run.</p><p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFDictionaryRef/Reference/reference.html#//apple_ref/doc/c_ref/CFDictionaryRef" target="_top">CFDictionaryRef</a> CTRunGetAttributes( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run for which to return attributes.</p></dd></dl><h5 class="tight">Return Value</h5><p>A valid <code><a href="../../../../CoreFoundation/Reference/CFDictionaryRef/Reference/reference.html#//apple_ref/c/tdef/CFDictionaryRef" target="_top">CFDictionaryRef</a></code> or <code>NULL</code> on error or if the run has no attributes.</p><h5 class="tight">Discussion</h5><p>The dictionary returned is either the same one that was set as an attribute dictionary on the original attributed string or a dictionary that has been manufactured by the layout engine. Attribute dictionaries can be manufactured in the case of font substitution or if the run is missing critical attributes.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetGlyphCount" title="CTRunGetGlyphCount"></a><a name="//apple_ref/doc/c_ref/CTRunGetGlyphCount" title="CTRunGetGlyphCount"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-SW2" title="CTRunGetGlyphCount"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_26"></a><h3 class="tight">CTRunGetGlyphCount</h3><p class="spaceabove">Gets the glyph count for the run.</p><p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a> CTRunGetGlyphCount( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run for which to return the glyph count.</p></dd></dl><h5 class="tight">Return Value</h5><p>The number of glyphs that the run contains, or if there are no glyphs in this run, a value of <code>0</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetGlyphs" title="CTRunGetGlyphs"></a><a name="//apple_ref/doc/c_ref/CTRunGetGlyphs" title="CTRunGetGlyphs"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-SW3" title="CTRunGetGlyphs"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_27"></a><h3 class="tight">CTRunGetGlyphs</h3><p class="spaceabove">Copies a range of glyphs into a user-provided buffer.</p><p class="spaceabove"><pre>
void CTRunGetGlyphs( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run, <a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFRange" target="_top">CFRange</a> range, <a href="../../../../GraphicsImaging/Reference/CGFont/Reference/reference.html#//apple_ref/doc/c_ref/CGGlyph" target="_top">CGGlyph</a>* buffer );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run from which to copy glyphs.</p></dd><dt><em>range</em></dt><dd><p>The range of glyphs to copy. If the length of the range is set to <code>0</code>, then the copy operation continues from the range's start index to the end of the run.</p></dd><dt><em>buffer</em></dt><dd><p>The buffer the glyphs are copied to. The buffer must be allocated to at least the value specified by the range's length.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetGlyphsPtr" title="CTRunGetGlyphsPtr"></a><a name="//apple_ref/doc/c_ref/CTRunGetGlyphsPtr" title="CTRunGetGlyphsPtr"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_5" title="CTRunGetGlyphsPtr"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_28"></a><h3 class="tight">CTRunGetGlyphsPtr</h3><p class="spaceabove">Returns a direct pointer for the glyph array stored in the run.</p><p class="spaceabove"><pre>
const CGGlyph* CTRunGetGlyphsPtr( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run from which to return glyphs.</p></dd></dl><h5 class="tight">Return Value</h5><p>A valid pointer to an array of <code><a href="../../../../GraphicsImaging/Reference/CGFont/Reference/reference.html#//apple_ref/c/tdef/CGGlyph" target="_top">CGGlyph</a></code> structures, or <code>NULL</code>.</p><h5 class="tight">Discussion</h5><p>The glyph array will have a length equal to the value returned by <code><a href="reference.html#//apple_ref/c/func/CTRunGetGlyphCount">CTRunGetGlyphCount</a></code>. The caller should be prepared for this function to return <code>NULL</code> even if there are glyphs in the stream. If this function returns <code>NULL</code>, the caller must allocate its own buffer and call <code>CTRunGetGlyphs</code> to fetch the glyphs.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetImageBounds" title="CTRunGetImageBounds"></a><a name="//apple_ref/doc/c_ref/CTRunGetImageBounds" title="CTRunGetImageBounds"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_11" title="CTRunGetImageBounds"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_29"></a><h3 class="tight">CTRunGetImageBounds</h3><p class="spaceabove">Calculates the image bounds for a glyph range.</p><p class="spaceabove"><pre>
<a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/doc/c_ref/CGRect" target="_top">CGRect</a> CTRunGetImageBounds( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run, <a href="../../../../GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/doc/c_ref/CGContextRef" target="_top">CGContextRef</a> context, <a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFRange" target="_top">CFRange</a> range );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run for which to calculate the image bounds.</p></dd><dt><em>context</em></dt><dd><p>The context for the image bounds being calculated. This is required because the context could have settings in it that would cause changes in the image bounds.</p></dd><dt><em>range</em></dt><dd><p>The portion of the run to measure. If the length of the range is set to <code>0</code>, then the measure operation continues from the start index of the range to the end of the run.</p></dd></dl><h5 class="tight">Return Value</h5><p>A rectangle that tightly encloses the paths of the run's glyphs, or, if <em>run</em>, <em>context</em>, or <em>range</em> is invalid, <code><a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/c/data/CGRectNull" target="_top">CGRectNull</a></code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetPositions" title="CTRunGetPositions"></a><a name="//apple_ref/doc/c_ref/CTRunGetPositions" title="CTRunGetPositions"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-SW4" title="CTRunGetPositions"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_30"></a><h3 class="tight">CTRunGetPositions</h3><p class="spaceabove">Copies a range of glyph positions into a user-provided buffer.</p><p class="spaceabove"><pre>
void CTRunGetPositions( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run, <a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFRange" target="_top">CFRange</a> range, <a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/doc/c_ref/CGPoint" target="_top">CGPoint</a>* buffer );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run from which to copy glyph positions.</p></dd><dt><em>range</em></dt><dd><p>The range of glyph positions to copy. If the length of the range is set to <code>0</code>, then the copy operation will continue from the start index of the range to the end of the run.</p></dd><dt><em>buffer</em></dt><dd><p>The buffer to which the glyph positions are copied. The buffer must be allocated to at least the value specified by the range's length.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetPositionsPtr" title="CTRunGetPositionsPtr"></a><a name="//apple_ref/doc/c_ref/CTRunGetPositionsPtr" title="CTRunGetPositionsPtr"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_6" title="CTRunGetPositionsPtr"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_31"></a><h3 class="tight">CTRunGetPositionsPtr</h3><p class="spaceabove">Returns a direct pointer for the glyph position array stored in the run.</p><p class="spaceabove"><pre>
const CGPoint* CTRunGetPositionsPtr( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run from which to access glyph positions.</p></dd></dl><h5 class="tight">Return Value</h5><p>A valid pointer to an array of <code><a href="../../../../GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/c/tdef/CGPoint" target="_top">CGPoint</a></code> structures, or <code>NULL</code>.</p><h5 class="tight">Discussion</h5><p>The glyph positions in a run are relative to the origin of the line containing the run. The position array will have a length equal to the value returned by <code><a href="reference.html#//apple_ref/c/func/CTRunGetGlyphCount">CTRunGetGlyphCount</a></code>. The caller should be prepared for this function to return <code>NULL</code> even if there are glyphs in the stream. If this function returns <code>NULL</code>, the caller must allocate its own buffer and call <code><a href="reference.html#//apple_ref/c/func/CTRunGetPositions">CTRunGetPositions</a></code> to fetch the glyph positions.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetStatus" title="CTRunGetStatus"></a><a name="//apple_ref/doc/c_ref/CTRunGetStatus" title="CTRunGetStatus"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-SW1" title="CTRunGetStatus"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_32"></a><h3 class="tight">CTRunGetStatus</h3><p class="spaceabove">Returns the run's status.</p><p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/CTRunStatus">CTRunStatus</a> CTRunGetStatus( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run for which to return the status.</p></dd></dl><h5 class="tight">Return Value</h5><p>The run's status.</p><h5 class="tight">Discussion</h5><p>Runs have status that can be used to expedite certain operations. Knowing the direction and ordering of a run's glyphs can aid in string index analysis, whereas knowing whether the positions reference the identity text matrix can avoid expensive comparisons. This status is provided as a convenience, because this information is not strictly necessary but can be helpful in some circumstances.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetStringIndices" title="CTRunGetStringIndices"></a><a name="//apple_ref/doc/c_ref/CTRunGetStringIndices" title="CTRunGetStringIndices"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-SW5" title="CTRunGetStringIndices"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_33"></a><h3 class="tight">CTRunGetStringIndices</h3><p class="spaceabove">Copies a range of string indices into a user-provided buffer.</p><p class="spaceabove"><pre>
void CTRunGetStringIndices( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run, <a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFRange" target="_top">CFRange</a> range, <a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFIndex" target="_top">CFIndex</a>* buffer );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run from which to copy the string indices.</p></dd><dt><em>range</em></dt><dd><p>The range of string indices to copy. If the length of the range is set to <code>0</code>, then the copy operation continues from the range's start index to the end of the run.</p></dd><dt><em>buffer</em></dt><dd><p>The buffer to which the string indices are copied. The buffer must be allocated to at least the value specified by the range's length.</p></dd></dl><h5 class="tight">Discussion</h5><p>The indices are the character indices that originally spawned the glyphs that make up the run. They can be used to map the glyphs in the run back to the characters in the backing store.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetStringIndicesPtr" title="CTRunGetStringIndicesPtr"></a><a name="//apple_ref/doc/c_ref/CTRunGetStringIndicesPtr" title="CTRunGetStringIndicesPtr"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_7" title="CTRunGetStringIndicesPtr"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_34"></a><h3 class="tight">CTRunGetStringIndicesPtr</h3><p class="spaceabove">Returns a direct pointer for the string indices stored in the run.</p><p class="spaceabove"><pre>
const CFIndex* CTRunGetStringIndicesPtr( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run for which to return string indices.</p></dd></dl><h5 class="tight">Return Value</h5><p>A valid pointer to an array of <code><a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/c/tdef/CFIndex" target="_top">CFIndex</a></code> structures, or <code>NULL</code>.</p><h5 class="tight">Discussion</h5><p>The indices are the character indices that originally spawned the glyphs that make up the run. They can be used to map the glyphs in the run back to the characters in the backing store. The string indices array will have a length equal to the value returned by <code><a href="reference.html#//apple_ref/c/func/CTRunGetGlyphCount">CTRunGetGlyphCount</a></code>. The caller should be prepared for this function to return <code>NULL</code> even if there are glyphs in the stream. If this function returns <code>NULL</code>, the caller must allocate its own buffer and call <code><a href="reference.html#//apple_ref/c/func/CTRunGetStringIndices">CTRunGetStringIndices</a></code> to fetch the indices.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetStringRange" title="CTRunGetStringRange"></a><a name="//apple_ref/doc/c_ref/CTRunGetStringRange" title="CTRunGetStringRange"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_8" title="CTRunGetStringRange"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_35"></a><h3 class="tight">CTRunGetStringRange</h3><p class="spaceabove">Gets the range of characters that originally spawned the glyphs in the run.</p><p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFRange" target="_top">CFRange</a> CTRunGetStringRange( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run for which to access the string range.</p></dd></dl><h5 class="tight">Return Value</h5><p>The range of characters that originally spawned the glyphs, of if <em>run</em> is invalid, an empty range.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetTextMatrix" title="CTRunGetTextMatrix"></a><a name="//apple_ref/doc/c_ref/CTRunGetTextMatrix" title="CTRunGetTextMatrix"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_14" title="CTRunGetTextMatrix"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_36"></a><h3 class="tight">CTRunGetTextMatrix</h3><p class="spaceabove">Returns the text matrix needed to draw this run.</p><p class="spaceabove"><pre>
<a href="../../../../GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/doc/c_ref/CGAffineTransform" target="_top">CGAffineTransform</a> CTRunGetTextMatrix( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run object from which to get the text matrix.</p></dd></dl><h5 class="tight">Return Value</h5><p>A <code><a href="../../../../GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/tdef/CGAffineTransform" target="_top">CGAffineTransform</a></code> structure.</p><h5 class="tight">Discussion</h5><p>To properly draw the glyphs in a run, the fields <code>tx</code> and <code>ty</code> of the <code><a href="../../../../GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/tdef/CGAffineTransform" target="_top">CGAffineTransform</a></code> returned by this function should be set to the current text position.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetTypeID" title="CTRunGetTypeID"></a><a name="//apple_ref/doc/c_ref/CTRunGetTypeID" title="CTRunGetTypeID"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_16" title="CTRunGetTypeID"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_37"></a><h3 class="tight">CTRunGetTypeID</h3><p class="spaceabove">Returns the Core Foundation type identifier of the run object.</p><p class="spaceabove"><pre>
<a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFTypeID" target="_top">CFTypeID</a> CTRunGetTypeID( void );
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/c/func/CTRunGetTypographicBounds" title="CTRunGetTypographicBounds"></a><a name="//apple_ref/doc/c_ref/CTRunGetTypographicBounds" title="CTRunGetTypographicBounds"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_10" title="CTRunGetTypographicBounds"></a><a name="//apple_ref/doc/uid/TP40005106-CH3-DontLinkElementID_38"></a><h3 class="tight">CTRunGetTypographicBounds</h3><p class="spaceabove">Gets the typographic bounds of the run.</p><p class="spaceabove"><pre>
double CTRunGetTypographicBounds( <a href="reference.html#//apple_ref/doc/c_ref/CTRunRef">CTRunRef</a> run, <a href="../../../../CoreFoundation/Reference/CFBaseUtils/Reference/reference.html#//apple_ref/doc/c_ref/CFRange" target="_top">CFRange</a> range, <!--a-->CGFloat<!--/a-->* ascent, <!--a-->CGFloat<!--/a-->* descent, <!--a-->CGFloat<!--/a-->* leading );
</pre></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>run</em></dt><dd><p>The run for which to calculate the typographic bounds.</p></dd><dt><em>range</em></dt><dd><p>The portion of the run to measure. If the length of the range is set to <code>0</code>, then the measure operation continues from the range's start index to the end of the run.</p></dd><dt><em>ascent</em></dt><dd><p>On output, the ascent of the run. This can be set to <code>NULL</code> if not needed.</p></dd><dt><em>descent</em></dt><dd><p>On output, the descent of the run. This can be set to <code>NULL</code> if not needed.</p></dd><dt><em>leading</em></dt><dd><p>On output, the leading of the run. This can be set to <code>NULL</code> if not needed.</p></dd></dl><h5 class="tight">Return Value</h5><p>The typographic width of the run, or if <em>run</em> or <em>range</em> is invalid, <code>0</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/doc/uid/TP40005106-CH5-DontLinkElementID_20" title="Data Types"></a><h2>Data Types</h2><a name="//apple_ref/c/tdef/CTRunRef" title="CTRunRef"></a><a name="//apple_ref/doc/c_ref/CTRunRef" title="CTRunRef"></a><a name="//apple_ref/doc/uid/TP40005106-CH5-DontLinkElementID_2" title="CTRunRef"></a><a name="//apple_ref/doc/uid/TP40005106-CH5-DontLinkElementID_39"></a><h3 class="tight">CTRunRef</h3><p class="spaceabove">A reference to a run object.</p><p class="spaceabove"><pre>
typedef const struct __CTRun *CTRunRef;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>CTRun.h</code><a name="//apple_ref/doc/uid/TP40005106-CH4-DontLinkElementID_21" title="Constants"></a><h2>Constants</h2><a name="//apple_ref/c/tdef/CTRunStatus" title="CTRunStatus" role="Enum"></a><a name="//apple_ref/doc/c_ref/CTRunStatus" title="CTRunStatus" role="Enum"></a><a name="//apple_ref/doc/uid/TP40005106-CH4-DontLinkElementID_1" title="CTRunStatus" role="Enum"></a><a name="//apple_ref/doc/uid/TP40005106-CH4-DontLinkElementID_40"></a><h3 class="tight">CTRunStatus</h3><p class="spaceabove">A bitfield passed back by the <code><a href="reference.html#//apple_ref/c/func/CTRunGetStatus">CTRunGetStatus</a></code> function that is used to indicate the disposition of the run.</p><p class="spaceabove"><pre>
enum{
<a href="reference.html#//apple_ref/doc/c_ref/kCTRunStatusNoStatus">kCTRunStatusNoStatus</a> = 0,
<a href="reference.html#//apple_ref/doc/c_ref/kCTRunStatusRightToLeft">kCTRunStatusRightToLeft</a> = (1 &lt;&lt; 0),
<a href="reference.html#//apple_ref/doc/c_ref/kCTRunStatusNonMonotonic">kCTRunStatusNonMonotonic</a> = (1 &lt;&lt; 1),
<a href="reference.html#//apple_ref/doc/c_ref/kCTRunStatusHasNonIdentityMatrix">kCTRunStatusHasNonIdentityMatrix</a> = (1 &lt;&lt; 2)
};
typedef uint32_t CTRunStatus;
</pre></p><h5 class="tight">Constants</h5><dl class="termdef"><a name="//apple_ref/c/econst/kCTRunStatusNoStatus" title="kCTRunStatusNoStatus"></a><a name="//apple_ref/doc/c_ref/kCTRunStatusNoStatus" title="kCTRunStatusNoStatus"></a><a name="//apple_ref/doc/uid/TP40005106-CH4-DontLinkElementID_41"></a><dt><code>kCTRunStatusNoStatus</code></dt><dd><p>The run has no special attributes.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>CTRun.h</code>.</p></dd><a name="//apple_ref/c/econst/kCTRunStatusRightToLeft" title="kCTRunStatusRightToLeft"></a><a name="//apple_ref/doc/c_ref/kCTRunStatusRightToLeft" title="kCTRunStatusRightToLeft"></a><a name="//apple_ref/doc/uid/TP40005106-CH4-DontLinkElementID_42"></a><dt><code>kCTRunStatusRightToLeft</code></dt><dd><p>The run proceeds from right to left.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>CTRun.h</code>.</p></dd><a name="//apple_ref/c/econst/kCTRunStatusNonMonotonic" title="kCTRunStatusNonMonotonic"></a><a name="//apple_ref/doc/c_ref/kCTRunStatusNonMonotonic" title="kCTRunStatusNonMonotonic"></a><a name="//apple_ref/doc/uid/TP40005106-CH4-DontLinkElementID_43"></a><dt><code>kCTRunStatusNonMonotonic</code></dt><dd><p>The run has been reordered in some way such that the string indices associated with the glyphs are no longer strictly increasing (for left-to-right runs) or decreasing (for right-to-left runs).</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>CTRun.h</code>.</p></dd><a name="//apple_ref/c/econst/kCTRunStatusHasNonIdentityMatrix" title="kCTRunStatusHasNonIdentityMatrix"></a><a name="//apple_ref/doc/c_ref/kCTRunStatusHasNonIdentityMatrix" title="kCTRunStatusHasNonIdentityMatrix"></a><a name="//apple_ref/doc/uid/TP40005106-CH4-DontLinkElementID_44"></a><dt><code>kCTRunStatusHasNonIdentityMatrix</code></dt><dd><p>The run requires a specific text matrix to be set in the current Core Graphics context for proper drawing.</p><p>Available in Mac OS X v10.5 and later.</p><p>Declared in <code>CTRun.h</code>.</p></dd></dl><h5 class="tight">Declared In</h5><code>CTRun.h</code>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-05-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Reference/CTRunRef/Reference/reference.html%3Fid%3DTP40005106-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Reference/CTRunRef/Reference/reference.html%3Fid%3DTP40005106-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Reference/CTRunRef/Reference/reference.html%3Fid%3DTP40005106-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
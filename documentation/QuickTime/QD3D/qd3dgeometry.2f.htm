<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE>NURB Patches</TITLE></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=4040"> </A><A NAME="29985"> </A>NURB Patches</H1><P CLASS="T1.Text1"><A NAME="pgfId=4042"> </A>A NURB patch is a surface defined by ratios of B-spline surfaces, which are three-dimensional analogs of B-spline curves. A NURB patch is defined by the <TT CLASS="cv">TQ3NURBPatchData</TT> data type. See <A HREF="qd3dgeometry.46.htm#34208" CLASS="XRef">&quot;Creating and Editing NURB Patches&quot;</A> for a description of the routines you can use to create and edit NURB patches. <A HREF="qd3dgeometry.2f.htm#17792" CLASS="XRef">Figure&nbsp;30</A> shows a NURB patch.</P><P CLASS="Fg.Figure"><A NAME="pgfId=4053"> </A>Figure&nbsp;30<A NAME="17792"> </A>A NURB patch</P><DIV><IMG SRC="qd3dgeometry-38.gif"></DIV><CODE CLASS="Cv.Code"><A NAME="pgfId=41692"> </A>typedef struct TQ3NURBPatchData {<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uOrder;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vOrder;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numRows;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numColumns;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3RationalPoint4D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*controlPoints;<BR>&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*uKnots;<BR>&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*vKnots;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numTrimLoops;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3NURBPatchTrimLoopData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*trimLoops;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3AttributeSet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patchAttributeSet;<BR>} TQ3NURBPatchData;<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41696"> </A><TT CLASS="cv">uOrder</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4056"> </A>The order of the NURB patch in the <I CLASS="italics">u</I> parametric direction. For NURB patches defined by ratios of B-spline polynomials that are cubic in <I CLASS="italics">u</I>, the order is 4. In general, the order of a NURB patch defined by polynomial equations in which <I CLASS="italics">u</I> is of degree <I CLASS="italics">n</I> is <I CLASS="italics">n</I>+1. The value in this field must be greater than 1.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41706"> </A><TT CLASS="cv">vOrder</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4057"> </A>The order of the NURB patch in the <I CLASS="italics">v</I> parametric direction. For NURB patches defined by ratios of B-spline polynomials that are cubic in <I CLASS="italics">v</I>, the order is 4. In general, the order of a NURB patch defined by polynomial equations in which <I CLASS="italics">v</I> is of degree <I CLASS="italics">n</I> is <I CLASS="italics">n</I>+1. The value in this field must be greater than 1.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41715"> </A><TT CLASS="cv">numRows</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4059"> </A>The number of control points in the <I CLASS="italics">u</I> parametric direction. The value of this field must be greater than 1.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41724"> </A><TT CLASS="cv">numColumns</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=6634"> </A>The number of control points in the <I CLASS="italics">v</I> parametric direction. The value of this field must be greater than 1.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41733"> </A><TT CLASS="cv">controlPoints</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4060"> </A>A pointer to an array of rational four-dimensional control points that define the NURB patch. The first control point in the array is the lower-left corner of the NURB patch. The control points are listed in a rectangular order, first in the direction of increasing <I CLASS="italics">u</I> and then in the direction of increasing <I CLASS="italics">v</I>. The number of elements in this array is the product of the values in the <TT CLASS="cv">numRows</TT> and <TT CLASS="cv">numColumns</TT> fields.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41742"> </A><TT CLASS="cv">uKnots</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4061"> </A>A pointer to an array of knots in the <I CLASS="italics">u</I> parametric direction that define the NURB patch. The number of <I CLASS="italics">u</I> knots in a NURB patch is the sum of the values in the <TT CLASS="cv">uOrder</TT> and <TT CLASS="cv">numColumns</TT> fields. The values in this array must be nondecreasing (but successive values may be equal).<A NAME="marker=4062"> </A></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41751"> </A><TT CLASS="cv">vKnots</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4063"> </A>A pointer to an array of knots in the <I CLASS="italics">v</I> parametric direction that define the NURB patch. The number of <I CLASS="italics">v</I> knots in a NURB patch is the sum of the values in the <TT CLASS="cv">vOrder</TT> and <TT CLASS="cv">numRows</TT> fields. The values in this array must be nondecreasing (but successive values may be equal).<A NAME="marker=4064"> </A></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41760"> </A><TT CLASS="cv">numTrimLoops</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=6672"> </A>The number of trim loops in the array pointed to by the <TT CLASS="cv">trimLoops</TT> field. Currently this field should contain 0.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41769"> </A><TT CLASS="cv">trimLoops</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4065"> </A>A pointer to an array of trim loop data structures that define the loops used to trim a NURB patch. See below for the structure of the trim loop data structure. Currently this field should contain the value <TT CLASS="cv">NULL</TT>.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41778"> </A><TT CLASS="cv">patchAttributeSet</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=6726"> </A> A set of attributes for the NURB patch. The value in this field is <TT CLASS="cv">NULL</TT> if no NURB patch attributes are defined.</DD></DL COMPACT><P CLASS="T1.Text1"><A NAME="pgfId=6727"> </A>A <B CLASS="bold">trim loop data structure</B> is defined by the <TT CLASS="cv">TQ3NURBPatchTrimLoopData</TT> data type.<A NAME="marker=6728"> </A></P><CODE CLASS="Cv.Code"><A NAME="pgfId=41790"> </A>typedef struct TQ3NURBPatchTrimLoopData {<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numTrimCurves;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3NURBPatchTrimCurveData&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*trimCurves;<BR>} TQ3NURBPatchTrimLoopData;<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41794"> </A><TT CLASS="cv">numTrimCurves</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=6795"> </A>The number of trim curves in the array pointed to by the <TT CLASS="cv">trimCurves</TT> field.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41804"> </A><TT CLASS="cv">trimCurves</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=6796"> </A>A pointer to an array of trim curve data structures that define the curves used to trim a NURB patch. See below for the structure of the trim curve data structure.</DD></DL COMPACT><P CLASS="T1.Text1"><A NAME="pgfId=6707"> </A>A <B CLASS="bold">trim curve data structure</B> is defined by the <TT CLASS="cv">TQ3NURBPatchTrimCurveData</TT> data type.<A NAME="marker=6708"> </A></P><CODE CLASS="Cv.Code"><A NAME="pgfId=41819"> </A>typedef struct TQ3NURBPatchTrimCurveData {<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order;<BR>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numPoints;<BR>&nbsp;&nbsp;&nbsp;&nbsp;TQ3RationalPoint3D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*controlPoints;<BR>&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*knots;<BR>} TQ3NURBPatchTrimCurveData;<BR></CODE><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41823"> </A><TT CLASS="cv">order</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4071"> </A>The order of the NURB trim curve. In general, the order of a NURB trim curve defined by polynomial equations of degree <I CLASS="italics">n</I> is <I CLASS="italics">n</I>+1. The value in this field must be more than 1.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41833"> </A><TT CLASS="cv">numPoints</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4072"> </A>The number of control points that define the NURB trim curve. The value in this field must be greater than 2.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41842"> </A><TT CLASS="cv">controlPoints</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4073"> </A>A pointer to an array of three-dimensional rational control points that define the NURB trim curve.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=41851"> </A><TT CLASS="cv">knots</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=4074"> </A>A pointer to an array of knots that define the NURB trim curve. The number of knots in a NURB trim curve is the sum of the values in the <TT CLASS="cv">order</TT> and <TT CLASS="cv">numPoints</TT> fields. The values in this array must be nondecreasing (but successive values may be equal).</DD></DL COMPACT><hr>&#169; 1997 Apple Computer, Inc.</DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
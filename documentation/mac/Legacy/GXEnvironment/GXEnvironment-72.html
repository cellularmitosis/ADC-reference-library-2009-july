<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Specifying the Starting Location of a Graphics Client(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING72></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-71.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-73.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-59.html"><B>Chapter 2 - QuickDraw GX Memory Management</B></A> / <A HREF="GXEnvironment-68.html"><B>Additional Memory Management Topics</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING72-0></A>
<H2><A NAME=MARKER-9-98></A>Specifying the Starting Location of a Graphics Client</H2>
 <A NAME=MARKER-9-42></A><A NAME=MARKER-9-94></A>If you use the <CODE>GXNewGraphicsClient</CODE> function to specify the starting location of a new graphics client, you must also specify the requested size of the graphics client heap. In this case, the size in bytes of the graphics client heap requested is used for a contiguous block of memory for both the graphics client and heap. In all other cases, the graphics client heap is allocated as a discontiguous memory block and the entire memory allocation requested by specifying a <CODE>memoryLength</CODE> parameter for the <CODE>GXNewGraphicsClient</CODE> function is assigned to the new graphics client heap.<P>
 Use the <CODE>GXNewGraphicsClient</CODE> function if you need to create a graphics client without allocating any memory. This allows you to draw at interrupt time. For example, you may want to report <CODE>out_of_memory</CODE> errors in a dialog box.<P>
 <A HREF=#MARKER-9-101>Listing 2-4</A> demonstrates how to specify a memory size and a memory starting location for a graphics client and its heap.<P>
<B>Listing 2-4  <A NAME=MARKER-9-101></A>Specifying the starting location and size for a graphics client and its heap</B><P>
<PRE>
gxGraphicsClient     newClient;
char                 memoryBuffer[10000]

newClient = GXNewGraphicsClient(&amp;memoryBuffer[0], 
                              sizeof (memoryBuffer), 
                              gxNoAttributes);
   // After we attempted to create the graphics client, we need
   // to determine if the call succeeded.If it did not ( as in the
   // case for all GX functions), "newClient" will be nil. If it
   // is, we alert the user to the problem. Otherwise, we attempt
   // to allocate the GX heap.

if (newClient)

   GXEnterGraphics();
   // Calling GXEnterGraphics allocates the memory within the GX
   // heap. The only reason the call would not succeed is if
   // there is not enough memory. In this case, the graphics
   // error which is posted is -27999 (out of memory). At this
   // point, we have not installed an error handler, so we check
   // for the error number corresponding to the out-of-memory
   // error.

if ( GXGetGraphicsError( nil ) == -27999 ) {
   // Because we canot allocate the requested size for our GX
   // heap, we need to throw away the client we created and alert
   // the user that there is not enough memory to continue..
   //
   GXDisposeGraphicsClient(newClient);
      &gt;&gt;application code to alert user and shut down app
} else {
      &gt;&gt;application code to alert user and shut down app
}}

</PRE>
 The <CODE>myClient</CODE> variable holds the new graphics client. You can use this variable to access the graphics client any time you need it. The combined size of the graphics client and the graphics client heap is 10 KB and its starting location in memory is at the starting location of the buffer. Since the memory starting location is specified, the new graphics client and its heap use contiguous memory, as shown in <A HREF=#MARKER-9-104>Figure 2-1</A>.<A NAME=MARKER-9-202></A><A NAME=MARKER-9-8></A><P>
<B>Figure 2-1  <A NAME=MARKER-9-104></A>Creating a graphics client by specifying the memory starting location</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/EU-L-09.jpg"><p>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-71.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-73.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

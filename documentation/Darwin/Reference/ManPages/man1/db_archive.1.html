<html><head><title>Mac OS X Server
 Manual Page For db_archive(1)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/1/db_archive" title="Mac OS X Server
 Manual Page for db_archive(1)"><!-- headerDoc=man; indexgroup=Section 1; uid="//apple_ref/doc/man/1/db_archive"; name=db_archive(1) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with Mac&nbsp;OS&nbsp;X&nbsp;Server.  It is
not available on standard Mac OS X (client) installations.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
db_archive(1)             BSD General Commands Manual            db_archive(1)

<b>NAME</b>
     <b>db_archive</b>

<b>SYNOPSIS</b>
     <b>db_archive</b> [<b>-adlsVv</b>] [<b>-h</b> <u>home</u>] [<b>-P</b> <u>password</u>]

<b>DESCRIPTION</b>
     The <b>db_archive</b> utility writes the pathnames of log files that are no longer in use (for example, no
     longer involved in active transactions), to the standard output, one pathname per line. These log files
     should be written to backup media to provide for recovery in the case of catastrophic failure (which
     also requires a snapshot of the database files), but they may then be deleted from the system to
     reclaim disk space.

     The options are as follows:

     <b>-a</b>
        Write all pathnames as absolute pathnames, instead of relative to the database home directories.

     <b>-d</b>
        Remove log files that are no longer needed; no filenames are written. Automatic log file removal is
        likely to make catastrophic recovery impossible.

     <b>-h</b>
        Specify a home directory for the database environment; by default, the current working directory is
        used.

     <b>-l</b>
        Write out the pathnames of all the database log files, whether or not they are involved in active
        transactions.

     <b>-P</b>
        Specify an environment password. Although Berkeley DB utilities overwrite password strings as soon
        as possible, be aware there may be a window of vulnerability on systems where unprivileged users can
        see command-line arguments or where utilities are not able to overwrite the memory containing the
        command-line arguments.

     <b>-s</b>
        Write the pathnames of all the database files that need to be archived in order to recover the data-<font color="#ffffff" class="whiteout">base&nbsp;database</font>
        base from catastrophic failure. If any of the database files have not been accessed during the life-<font color="#ffffff" class="whiteout">time&nbsp;lifetime</font>
        time of the current log files, db_archive will not include them in this output.

        It is possible that some of the files to which the log refers have since been deleted from the sys-<font color="#ffffff" class="whiteout">tem.&nbsp;system.</font>
        tem. In this case, db_archive will ignore them. When db_recover is run, any files to which the log
        refers that are not present during recovery are assumed to have been deleted and will not be recov-<font color="#ffffff" class="whiteout">ered.&nbsp;recovered.</font>
        ered.

     <b>-V</b>
        Write the library version number to the standard output, and exit.

     <b>-v</b>
        Run in verbose mode, listing the checkpoints in the log files as they are reviewed.

     Log cursor handles (returned by the DB_ENV-&gt;log_cursor method) may have open file descriptors for log
     files in the database environment. Also, the Berkeley DB interfaces to the database environment logging
     subsystem (for example, DB_ENV-&gt;log_put and DB_TXN-&gt;abort) may allocate log cursors and have open file
     descriptors for log files as well. On operating systems where filesystem related system calls (for
     example, rename and unlink on Windows/NT) can fail if a process has an open file descriptor for the
     affected file, attempting to move or remove the log files listed by db_archive may fail. All Berkeley
     DB internal use of log cursors operates on active log files only and furthermore, is short-lived in
     nature. So, an application seeing such a failure should be restructured to close any open log cursors
     it may have, and otherwise to retry the operation until it succeeds. (Although the latter is not likely
     to be necessary; it is hard to imagine a reason to move or rename a log file in which transactions are
     being logged or aborted.)

     The db_archive utility uses a Berkeley DB environment (as described for the -h option, the environment
     variable DB_HOME, or because the utility was run in a directory containing a Berkeley DB environment).
     In order to avoid environment corruption when using a Berkeley DB environment, db_archive should always
     be given the chance to detach from the environment and exit gracefully. To cause db_archive to release
     all environment resources and exit cleanly, send it an interrupt signal (SIGINT).

     The DB_ENV-&gt;log_archive method is the underlying method used by the db_archive utility. See the db_ar-<font color="#ffffff" class="whiteout">chive&nbsp;db_archive</font>
     chive utility source code for an example of using DB_ENV-&gt;log_archive in a IEEE/ANSI Std 1003.1 (POSIX)
     environment.

     The <b>db_archive</b> utility exits 0 on success, and &gt;0 if an error occurs.

<b>ENVIRONMENT</b>
     DB_HOME  If the -h option is not specified and the environment variable DB_HOME is set, it is used as
              the path of the database home, as described in DB_ENV-&gt;open.

<b>SEE</b> <b>ALSO</b>
     <a href="db_checkpoint.1.html#//apple_ref/doc/man/1/db_checkpoint">db_checkpoint(1)</a>, <a href="db_deadlock.1.html#//apple_ref/doc/man/1/db_deadlock">db_deadlock(1)</a>, <a href="db_dump.1.html#//apple_ref/doc/man/1/db_dump">db_dump(1)</a>, <a href="db_load.1.html#//apple_ref/doc/man/1/db_load">db_load(1)</a>, <a href="db_printlog.1.html#//apple_ref/doc/man/1/db_printlog">db_printlog(1)</a>, <a href="db_recover.1.html#//apple_ref/doc/man/1/db_recover">db_recover(1)</a>, <a href="db_stat.1.html#//apple_ref/doc/man/1/db_stat">db_stat(1)</a>,
     <a href="db_upgrade.1.html#//apple_ref/doc/man/1/db_upgrade">db_upgrade(1)</a>, <a href="db_verify.1.html#//apple_ref/doc/man/1/db_verify">db_verify(1)</a>

Darwin                         December 3, 2003                         Darwin
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man1/db_archive.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man1/db_archive.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man1/db_archive.1.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

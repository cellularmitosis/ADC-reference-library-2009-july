<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Using NBP(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING63></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-62.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-64.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-61.html"><B>Chapter 3 - Name-Binding Protocol (NBP)</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING63-0></A>
<H1>Using NBP</H1>
 This section describes how you can use NBP to<P>
<UL>
<LI>set up a names table entry for your entity and register your entity's name and address pair with NBP for other entities to access 
<LI>look up an address based on a name
<LI>confirm a name and address that you already have 
<LI>remove your entity's name and address from the NBP names directory
<LI>cancel a pending NBP request<P>
</UL>
 The .MPP driver implements the NBP protocol. Your application should check to ensure that the .MPP driver is already loaded on the system running your application before it attempts to call NBP. If the driver is not already open, your application should open it by calling the Device Manager's <CODE>OpenDriver</CODE> function. <A NAME=MARKER-9-22></A>The following example shows how to open the .MPP driver. <P>
<PRE>
BEGIN 
   myErr := OpenDriver('.MPP', mppRefNum);   {open .MPP driver}
   IF myErr &lt;&gt; noErr THEN DoErr(myErr);      {check and handle }
                                             { error}
</PRE>
 <A NAME=MARKER-2-186></A>For more information on determining if the .MPP driver is open and opening the AppleTalk drivers, see the chapter "AppleTalk Utilities" in this book.<P>
 Your application can have multiple concurrent active NBP requests. For example, <BR>your application can perform a number of <CODE>PRegisterName, PLookupName</CODE> and <CODE>PConfirmName</CODE> requests concurrently. The maximum number of concurrent requests <BR>is machine dependent. You can use the <CODE>PGetAppleTalkInfo</CODE> function to determine <BR>the maximum number of concurrent NBP requests supported by the .MPP driver <BR>on the node running your application. For information about the <CODE>PGetAppleTalkInfo</CODE> function, see the chapter "AppleTalk Utilities" in this book. <P>
 All of the NBP functions use parameter blocks to hold input and output values. Whether you execute a function synchronously or asynchronously, you must not alter the contents of the parameter block until after the NBP function that uses it completes the operation. In effect, the parameter block belongs to the NBP function until the function completes execution. (For a discussion of synchronous and asynchronous execution, see the chapter "Introduction to AppleTalk" in this book.) When the operation completes, you can either reuse the memory allocated for the parameter block or release it. <P>
 In addition to the parameter block used for the function, the memory that you allocate for any records and buffers whose pointers you pass to NBP through a parameter block field must also be nonrelocatable until the function completes execution. When the operation completes, you can reuse these data structures or release the memory that you allocated for them.<P>
 To allocate nonrelocatable memory, you can use the Memory Manager's <CODE>NewPtr</CODE> or <CODE>NewPtrSys</CODE> function. If you use <CODE>NewHandle</CODE> instead, you need to lock the memory. For more information about these functions, see <I><A HREF = "../Memory/Memory-2.html">Inside Macintosh: Memory</A>.</I><P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="Networking-64.html#HEADING64-0">Registering Your Entity With NBP</A>
<DD>
<DT><A HREF="Networking-65.html#HEADING65-0">Handling Names Table Entry Requests</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-62.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-64.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Legacy ATSUI Reference (Legacy)</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Legacy ATSUI Reference (Legacy)"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000893-DontLinkChapterID_1" title="Legacy ATSUI Reference (Legacy)"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30001281-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../../reference/LegacyTechnologies/idxCarbon-date.html#//apple_ref/doc/uid/TP30001281-TP30000470-TP30000494" target="_top">Carbon</a> &gt; <a href="../index.html" target="_top">Legacy ATSUI Reference (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../atsu_legacy_Rel_Notes/atsu_legacy_Rel_Notes.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The Legacy ATSUI Reference documents functions, data types, and constants that are no longer supported. The reference is provided to help developers who already have code that uses these functions. Unless otherwise stated, see <em>Inside Mac OS X: ATSUI Reference</em> for descriptions of the result codes used by the functions in this reference.  </p></div></div></div>
        <a name="//apple_ref/doc/uid/TP40000893-DontLinkChapterID_1-DontLinkElementID_4" title="Legacy ATSUI Reference (Legacy)"></a><h1>Legacy ATSUI Reference (Legacy)</h1><a name="//apple_ref/doc/uid/TP40000893-CH201-DontLinkElementID_3" title="Overview"></a><h2>Overview</h2><p></p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000893-CH201-DontLinkElementID_5" title="Important:"></a><p><strong>Important:</strong>&nbsp;The Legacy ATSUI Reference documents functions, data types, and constants that are no longer supported. The reference is provided to help developers who already have code that uses these functions. Unless otherwise stated, see <em>Inside Mac OS X: ATSUI Reference</em> for descriptions of the result codes used by the functions in this reference.  </p><p></p></div><a name="//apple_ref/doc/uid/TP40000893-CH1g-598137" title="Functions"></a><a name="//apple_ref/doc/uid/TP40000893-CH1g-TPXREF103" title="Functions"></a><h2>Functions</h2>






<a name="//apple_ref/c/func/ATSUCreateMemorySetting" title="ATSUCreateMemorySetting"></a><a name="//apple_ref/doc/c_ref/ATSUCreateMemorySetting" title="ATSUCreateMemorySetting"></a><a name="//apple_ref/doc/uid/TP40000893-CH1g-F09792" title="ATSUCreateMemorySetting"></a>
<a name="//apple_ref/doc/uid/TP40000893-CH1g-DontLinkElementID_6"></a><h3 class="tight">ATSUCreateMemorySetting</h3>
<p class="spaceabove">Specifies how memory is allocated in your application.</p>
<p><i style="background-color: #e9e9e9; padding: 5px; margin-top: 10px; margin-bottom:5px;">Unsupported</i></p>
<p class="spaceabove"><pre>
OSStatus ATSUCreateMemorySetting (
   <a href="reference.html#//apple_ref/doc/c_ref/ATSUHeapSpec">ATSUHeapSpec</a> iHeapSpec,
   <a href="reference.html#//apple_ref/doc/c_ref/ATSUMemoryCallbacks">ATSUMemoryCallbacks</a> *iMemoryCallbacks,
   <a href="reference.html#//apple_ref/doc/c_ref/ATSUMemorySetting">ATSUMemorySetting</a> *oMemorySetting
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>iHeapSpec</em></dt>
<dd><p>A value that indicates whether ATSUI or your application controls memory allocation operations. If you pass the <code>kATSUUseSpecificHeap</code> constant, you must pass a pointer to a union that contains the correctly-prepared heap in the <code>heapToUse</code> field in the <code>iMemoryCallbacks</code> parameter. If you pass the <code>kATSUUseCallbacks</code> constant, you must pass a pointer to a <code>ATSUMemoryCallbacks</code> union that contains pointers to your application-defined functions in the <code>iMemoryCallbacks</code> parameter. If you pass the <code>kATSUUseCurrentHeap</code> or <code>kATSUUseAppHeap</code> constant, you should pass a <code>NULL</code> pointer in the <code>iMemoryCallbacks</code> parameter.</p></dd>
<dt><em>iMemoryCallbacks</em></dt>
<dd><p>A pointer to a memory callback union that contains either pointers to your memory allocation callback functions or the heap that you want ATSUI to use when allocating memory. </p></dd>
<dt><em>oMemorySetting</em></dt>
<dd><p>The <code>ATSUMemorySetting</code> type is used to store the results from a <code><a href="reference.html#//apple_ref/doc/c_ref/ATSUGetCurrentMemorySetting">ATSUGetCurrentMemorySetting</a></code> call. It can also be used to change the current memory setting by passing it into the <code><a href="reference.html#//apple_ref/doc/c_ref/ATSUSetCurrentMemorySetting">ATSUSetCurrentMemorySetting</a></code> call. On return, a pointer to a reference to a new memory allocation setting. To make this setting current, you must pass it to the function <code><a href="reference.html#//apple_ref/c/func/ATSUSetCurrentMemorySetting">ATSUSetCurrentMemorySetting</a></code>. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code.</p>
<h5 class="tight">Discussion</h5>
<p>The <code>ATSUCreateMemorySetting</code> function enables you to specify whether you wish to perform memory allocations yourself or have ATSUI do so. If you want to control memory allocation in ATSUI, pass <code>kATSUUseCallbacks</code> in the <code>iHeapSpec</code> parameter and a pointer to an <code>ATSUMemoryCallbacks</code> union that contains pointers to your callback functions in the <code>iMemoryCallbacks</code> parameter. </p>
<p>After creating a memory setting, you must pass it to the function <code><a href="reference.html#//apple_ref/c/func/ATSUSetCurrentMemorySetting">ATSUSetCurrentMemorySetting</a></code> to ensure that it is used in subsequent Memory Manager calls. </p>
<p>You might want to create different memory settings for different memory allocation operations. For example, you might create two different settings designating different heaps to use for allocating the memory associated with style and text layout object creation. Before creating a style or text layout object, you would then make the appropriate setting current by calling <code>ATSUSetCurrentMemorySetting</code>.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Not supported in Carbon. Not available in CarbonLib. Not available in Mac OS X.</li></ul>
<h5 class="tight">Carbon Porting Notes</h5>
<p>Control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p><a name="//apple_ref/c/func/ATSUDisposeMemorySetting" title="ATSUDisposeMemorySetting"></a><a name="//apple_ref/doc/c_ref/ATSUDisposeMemorySetting" title="ATSUDisposeMemorySetting"></a><a name="//apple_ref/doc/uid/TP40000893-CH1g-F09793" title="ATSUDisposeMemorySetting"></a>
<a name="//apple_ref/doc/uid/TP40000893-CH1g-DontLinkElementID_7"></a><h3 class="tight">ATSUDisposeMemorySetting</h3>
<p class="spaceabove">Disposes of the current memory setting.</p>
<p><i style="background-color: #e9e9e9; padding: 5px; margin-top: 10px; margin-bottom:5px;">Unsupported</i></p>
<p class="spaceabove"><pre>
OSStatus ATSUDisposeMemorySetting (
   <a href="reference.html#//apple_ref/doc/c_ref/ATSUMemorySetting">ATSUMemorySetting</a> iMemorySetting
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>iMemorySetting</em></dt>
<dd><p>A reference to the memory setting to dispose. If you dispose of the current memory setting, ATSUI uses the current heap and its own callback functions to perform memory allocation operations. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code.</p>
<h5 class="tight">Discussion</h5>
<p>Before you dispose of a memory setting, you should dispose of the memory associated with style and text layout objects that were allocated using that memory setting. For example, if you want to dispose of a memory setting that uses your application-defined callback functions to allocate memory, you should dispose of any memory that ATSUI allocated as a result of these callbacks before disposing of the setting. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Not supported in Carbon. Not available in CarbonLib. Not available in Mac OS X.</li></ul>
<h5 class="tight">Carbon Porting Notes</h5>
<p>Control of memory allocation not available in CarbonLib and not necessary in Mac OS X.</p><a name="//apple_ref/c/func/ATSUGetCurrentMemorySetting" title="ATSUGetCurrentMemorySetting"></a><a name="//apple_ref/doc/c_ref/ATSUGetCurrentMemorySetting" title="ATSUGetCurrentMemorySetting"></a><a name="//apple_ref/doc/uid/TP40000893-CH1g-F09795" title="ATSUGetCurrentMemorySetting"></a>
<a name="//apple_ref/doc/uid/TP40000893-CH1g-DontLinkElementID_8"></a><h3 class="tight">ATSUGetCurrentMemorySetting</h3>
<p class="spaceabove">Obtains the current memory setting.</p>
<p><i style="background-color: #e9e9e9; padding: 5px; margin-top: 10px; margin-bottom:5px;">Unsupported</i></p>
<p class="spaceabove"><pre>
<a href="reference.html#//apple_ref/doc/c_ref/ATSUMemorySetting">ATSUMemorySetting</a> ATSUGetCurrentMemorySetting ();
</pre></p>
<h5 class="tight">Return Value</h5>
<p>A reference to the current memory allocation setting. If there is no current memory setting, <code>ATSUGetCurrentMemorySetting</code> returns <code>NULL</code>. See the description of the <code>ATSUMemorySetting</code> data type.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Not supported in Carbon. Not available in CarbonLib. Not available in Mac OS X.</li></ul>
<h5 class="tight">Carbon Porting Notes</h5>
<p>Control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p><a name="//apple_ref/c/func/ATSUSetCurrentMemorySetting" title="ATSUSetCurrentMemorySetting"></a><a name="//apple_ref/doc/c_ref/ATSUSetCurrentMemorySetting" title="ATSUSetCurrentMemorySetting"></a><a name="//apple_ref/doc/uid/TP40000893-CH1g-F09801" title="ATSUSetCurrentMemorySetting"></a>
<a name="//apple_ref/doc/uid/TP40000893-CH1g-DontLinkElementID_9"></a><h3 class="tight">ATSUSetCurrentMemorySetting</h3>
<p class="spaceabove">Sets the current memory setting to be used in Memory Manager calls.</p>
<p><i style="background-color: #e9e9e9; padding: 5px; margin-top: 10px; margin-bottom:5px;">Unsupported</i></p>
<p class="spaceabove"><pre>
OSStatus ATSUSetCurrentMemorySetting (
   <a href="reference.html#//apple_ref/doc/c_ref/ATSUMemorySetting">ATSUMemorySetting</a> iMemorySetting
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>iMemorySetting</em></dt>
<dd><p>A reference to the memory setting to make current. This setting is used in subsequent Memory Manager calls made within ATSUI until you call <code>ATSUSetCurrentMemorySetting</code> with a new setting. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>A result code.</p>
<h5 class="tight">Discussion</h5>
<p>After you create a memory setting by calling the function <code><a href="reference.html#//apple_ref/c/func/ATSUCreateMemorySetting">ATSUCreateMemorySetting</a></code>, you must pass it to the <code>ATSUSetCurrentMemorySetting</code> function to ensure that it is used in subsequent Memory Manager calls.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Not supported in Carbon. Not available in CarbonLib. Not available in Mac OS X.</li></ul>
<h5 class="tight">Carbon Porting Notes</h5>
<p>Control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p><a name="//apple_ref/doc/uid/TP40000893-CH2g-629744" title="Callbacks"></a><a name="//apple_ref/doc/uid/TP40000893-CH2g-TPXREF136" title="Callbacks"></a><h2>Callbacks</h2>


<a name="//apple_ref/c/tdef/ATSUCustomAllocFunc" title="ATSUCustomAllocFunc"></a><a name="//apple_ref/doc/c_ref/ATSUCustomAllocFunc" title="ATSUCustomAllocFunc"></a><a name="//apple_ref/doc/uid/TP40000893-CH2g-F09175" title="ATSUCustomAllocFunc"></a><a name="//apple_ref/doc/uid/TP40000893-CH2g-DontLinkElementID_10"></a><h3 class="tight">ATSUCustomAllocFunc</h3>
<p class="spaceabove">Defines a pointer to a callback function that handles memory allocation. Your callback function manages memory allocation operations typically handled by ATSUI.</p>
<p class="spaceabove"><pre>
typedef void(*ATSUCustomAllocFunc) (
   void *refCon,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ByteCount" target="_top">ByteCount</a> howMuch
);
</pre></p>
<p>If you name your function <code>MyATSUCustomAllocCallback</code>, you would declare it like this:</p>
<p><pre>
void *MyATSUCustomAllocCallback (
   void *refCon,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ByteCount" target="_top">ByteCount</a> howMuch
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>refCon</em></dt>
<dd><p>On input, ATSUI passes your <code>MyATSUCustomAllocCallback</code> function a pointer to arbitrary data previously supplied by your application in the <code>memoryRefCon</code> field of the <code><a href="reference.html#//apple_ref/c/tag/ATSUMemoryCallbacks">ATSUMemoryCallbacks</a></code> union. </p></dd>
<dt><em>howMuch</em></dt>
<dd><p>On input, ATSUI passes the amount of memory (in bytes) that you need to allocate. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>Your callback function returns an untyped pointer to the beginning of the block of memory allocated by your callback function. </p>
<h5 class="tight">Discussion</h5>
<p>You can register your callback function by calling the function <code><a href="reference.html#//apple_ref/c/func/ATSUCreateMemorySetting">ATSUCreateMemorySetting</a></code> and passing the constant <code>kATSUUseCallbacks</code> in <code>iHeapSpec</code> and a pointer to the <code><a href="reference.html#//apple_ref/c/tag/ATSUMemoryCallbacks">ATSUMemoryCallbacks</a></code> union in <code>iMemoryCallbacks</code>. You then supply a pointer of type <code>ATSUCustomAllocFunc</code> in the <code>Alloc</code> field of the <code>callbacks</code> structure of the <code>ATSUMemoryCallbacks</code> union.</p>
<p>Note that your <code>MyATSUCustomAllocCallback</code> function is expected to return a pointer to the start of the allocated memory, unless it terminates in an application. </p>
<h5 class="tight">Carbon Porting Notes</h5>
<p>Control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p><a name="//apple_ref/c/tdef/ATSUCustomFreeFunc" title="ATSUCustomFreeFunc"></a><a name="//apple_ref/doc/c_ref/ATSUCustomFreeFunc" title="ATSUCustomFreeFunc"></a><a name="//apple_ref/doc/uid/TP40000893-CH2g-F09176" title="ATSUCustomFreeFunc"></a><a name="//apple_ref/doc/uid/TP40000893-CH2g-DontLinkElementID_11"></a><h3 class="tight">ATSUCustomFreeFunc</h3>
<p class="spaceabove">Defines a pointer to a callback function that handles memory deallocation. Your callback function manages memory deallocation operations typically handled by ATSUI.</p>
<p class="spaceabove"><pre>
typedef void (*ATSUCustomFreeFunc) (
   void *refCon,
   void *doomedBlock
);
</pre></p>
<p>If you name your function <code>MyATSUCustomFreeCallback</code>, you would declare it like this:</p>
<p><pre>
void MyATSUCustomFreeCallback (
   void *refCon,
   void *doomedBlock
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>refCon</em></dt>
<dd><p>On input, ATSUI passes your <code>MyATSUCustomFreeCallback</code> function a pointer to arbitrary data previously supplied by your application in the <code>memoryRefCon</code> field of the <code><a href="reference.html#//apple_ref/c/tag/ATSUMemoryCallbacks">ATSUMemoryCallbacks</a></code> union. </p></dd>
<dt><em>doomedBlock</em></dt>
<dd><p>On input, ATSUI passes your <code>MyATSUCustomFreeCallback</code> function a pointer to the beginning of the block of memory to deallocate.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>Your callback function returns the address of the block of deallocated memory. </p>
<h5 class="tight">Discussion</h5>
<p>You can register your callback function by calling the function <code><a href="reference.html#//apple_ref/c/func/ATSUCreateMemorySetting">ATSUCreateMemorySetting</a></code> and passing the constant <code>kATSUUseCallbacks</code> in <code>iHeapSpec</code> and a pointer to the <code><a href="reference.html#//apple_ref/c/tag/ATSUMemoryCallbacks">ATSUMemoryCallbacks</a></code> union in <code>iMemoryCallbacks</code>. You then supply a pointer of type <code>ATSUCustomFreeFunc</code> in the <code>Free</code> field of the <code>callbacks</code> structure of the <code>ATSUMemoryCallbacks</code> union. </p>
<h5 class="tight">Carbon Porting Notes</h5>
<p>Control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p><a name="//apple_ref/c/tdef/ATSUCustomGrowFunc" title="ATSUCustomGrowFunc"></a><a name="//apple_ref/doc/c_ref/ATSUCustomGrowFunc" title="ATSUCustomGrowFunc"></a><a name="//apple_ref/doc/uid/TP40000893-CH2g-F09177" title="ATSUCustomGrowFunc"></a><a name="//apple_ref/doc/uid/TP40000893-CH2g-DontLinkElementID_12"></a><h3 class="tight">ATSUCustomGrowFunc</h3>
<p class="spaceabove">Defines a pointer to a callback function that handles memory reallocation. Your callback function manages memory reallocation operations typically handled by ATSUI.</p>
<p class="spaceabove"><pre>
typedef void(*ATSUCustomGrowFunc) (
   void *refCon,
   void *oldBlock,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ByteCount" target="_top">ByteCount</a> oldSize,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ByteCount" target="_top">ByteCount</a> newSize
);
</pre></p>
<p>If you name your function <code>MyATSUCustromGrowCallback</code>, you would declare it like this:</p>
<p><pre>
void *MyATSUCustromGrowCallback (
   void *refCon,
   void *oldBlock,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ByteCount" target="_top">ByteCount</a> oldSize,
   <a href="../../../../QuickTime/Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ByteCount" target="_top">ByteCount</a> newSize
);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>refCon</em></dt>
<dd><p>On input, ATSUI passes your <code>MyATSUCustomGrowCallback</code> function a pointer to arbitrary data previously supplied by your application in the <code>memoryRefCon</code> field of the <code><a href="reference.html#//apple_ref/c/tag/ATSUMemoryCallbacks">ATSUMemoryCallbacks</a></code> union. </p></dd>
<dt><em>oldBlock</em></dt>
<dd><p>On input, ATSUI passes your <code>MyATSUCustomFreeCallback</code> function a pointer to the beginning of the block of memory to grow. ATSUI passes this value to your application.</p></dd>
<dt><em>oldSize</em></dt>
<dd><p>ATSUI passes your <code>MyATSUCustomFreeCallback</code> function the size (in bytes) of the memory prior to growing. Your callback function can use this to determine the number of bytes of memory to copy if you need to allocate memory for the grown block. </p></dd>
<dt><em>newSize</em></dt>
<dd><p>ATSUI passes your <code>MyATSUCustomFreeCallback</code> function the size (in bytes) of the memory after growing. </p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>Your callback function returns an untyped pointer to the beginning address of the reallocated block of memory. </p>
<h5 class="tight">Discussion</h5>
<p>You can register your callback function by calling the function <code><a href="reference.html#//apple_ref/c/func/ATSUCreateMemorySetting">ATSUCreateMemorySetting</a></code> and passing the constant <code>kATSUUseCallbacks</code> in <code>iHeapSpec</code> and a pointer to the <code><a href="reference.html#//apple_ref/c/tag/ATSUMemoryCallbacks">ATSUMemoryCallbacks</a></code> union in <code>iMemoryCallbacks</code>. You then supply a pointer of type <code>ATSUCustomGrowFunc</code> in the <code>Grow</code> field of the <code>callbacks</code> structure of the <code>ATSUMemoryCallbacks</code> union. </p>
<p>Note that your <code>MyATSUCustomGrowCallback</code> function is expected to return a pointer to the start of the allocated memory, unless it terminates in an application. </p>
<h5 class="tight">Carbon Porting Notes</h5>
<p>Control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p><a name="//apple_ref/doc/uid/TP40000893-CH3g-703915" title="Data Types"></a><a name="//apple_ref/doc/uid/TP40000893-CH3g-TPXREF137" title="Data Types"></a><h2>Data Types</h2>
<a name="//apple_ref/c/tag/ATSUMemoryCallbacks" title="ATSUMemoryCallbacks"></a><a name="//apple_ref/doc/c_ref/ATSUMemoryCallbacks" title="ATSUMemoryCallbacks"></a><a name="//apple_ref/doc/uid/TP40000893-CH3g-C002480" title="ATSUMemoryCallbacks"></a>
<a name="//apple_ref/doc/uid/TP40000893-CH3g-DontLinkElementID_13"></a><h3 class="tight">ATSUMemoryCallbacks</h3>
<p class="spaceabove">A union that contains either pointers to your application-defined memory allocation functions or the heap that you want ATSUI to use when allocating memory. </p>
<p class="spaceabove"><pre>
union ATSUMemoryCallbacks {
   <!--a-->union<!--/a--> {
      Alloc;
      <!--a-->Free<!--/a-->;
      Grow;
      *<!--a-->memoryRefCon<!--/a-->;
   } callbacks;
   <!--a-->THz<!--/a--> heapToUse;
};
</pre></p>
<h5 class="tight">Fields</h5><dl class="termdef">
<dt><code>callbacks</code></dt>
<dd><p>A pointer of type <code><a href="reference.html#//apple_ref/c/tdef/ATSUCustomAllocFunc">ATSUCustomAllocFunc</a></code> to your memory allocation callback function. </p></dd>
<dt><code>heapToUse</code></dt>
<dd><p>A pointer of type <code><a href="reference.html#//apple_ref/c/tdef/ATSUCustomFreeFunc">ATSUCustomFreeFunc</a></code> to your memory deallocation callback function. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>Note that control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p>
<p><code>ATSUMemoryCallbacks</code> is a union struct that allows the ATSUI client to specify a specific heap for ATSUI use or allocation callbacks of which ATSUI is to use each time ATSUI performs a memory operation (alloc, grow, free).</p>
<p>If you want to control memory allocation in ATSUI, you should supply pointers to your memory allocation callback functions in the <code>callbacks</code> structure field of the union. If you want ATSUI to control memory allocation, you should supply the memory heap for ATSUI to use in the <code>heapToUse</code> field. </p>
<p>The <code>ATSUMemoryCallbacks</code> union is passed back by the function <code><a href="reference.html#//apple_ref/c/func/ATSUCreateMemorySetting">ATSUCreateMemorySetting</a></code> to represent the newly-created memory setting. </p>
<a name="//apple_ref/c/tdef/ATSUMemorySetting" title="ATSUMemorySetting"></a><a name="//apple_ref/doc/c_ref/ATSUMemorySetting" title="ATSUMemorySetting"></a><a name="//apple_ref/doc/uid/TP40000893-CH3g-C002397" title="ATSUMemorySetting"></a><a name="//apple_ref/doc/uid/TP40000893-CH3g-DontLinkElementID_14"></a><h3 class="tight">ATSUMemorySetting</h3>
<p class="spaceabove">Represents a reference to a private structure containing information about the current memory setting.</p>
<p class="spaceabove"><pre>
typedef struct <!--a-->OpaqueATSUMemorySetting<!--/a-->* ATSUMemorySetting;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Note that control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p>
<p><code><a href="reference.html#//apple_ref/doc/c_ref/ATSUMemorySetting">ATSUMemorySetting</a></code> is used to store the results from a <code><!--a-->ATSUSetMemoryAlloc<!--/a--></code> or a <code><a href="reference.html#//apple_ref/doc/c_ref/ATSUGetCurrentMemorySetting">ATSUGetCurrentMemorySetting</a></code> call. It can also be used to change the current <code><a href="reference.html#//apple_ref/doc/c_ref/ATSUMemorySetting">ATSUMemorySetting</a></code> by passing it into the <code><a href="reference.html#//apple_ref/doc/c_ref/ATSUSetCurrentMemorySetting">ATSUSetCurrentMemorySetting</a></code> call.</p>
<p>You pass a reference of type <code>ATSUMemorySetting</code> reference to the functions <code><a href="reference.html#//apple_ref/c/func/ATSUDisposeMemorySetting">ATSUDisposeMemorySetting</a></code>, <code><a href="reference.html#//apple_ref/c/func/ATSUDisposeMemorySetting">ATSUDisposeMemorySetting</a></code> and to either dispose of a memory setting or make one current. The function <code><a href="reference.html#//apple_ref/c/func/ATSUGetCurrentMemorySetting">ATSUGetCurrentMemorySetting</a></code> passes back a reference of this type to indicate the current memory setting.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 through Mac OS X v10.4.</li></ul><h5 class="tight">Declared In</h5><code>ATSUnicodeTypes.h</code>
<a name="//apple_ref/c/tdef/ATSUHeapSpec" title="ATSUHeapSpec"></a><a name="//apple_ref/doc/c_ref/ATSUHeapSpec" title="ATSUHeapSpec"></a><a name="//apple_ref/doc/uid/TP40000893-CH3g-C005912" title="ATSUHeapSpec"></a><a name="//apple_ref/doc/uid/TP40000893-CH3g-DontLinkElementID_15"></a><h3 class="tight">ATSUHeapSpec</h3>
<p class="spaceabove">Represents a preference for which heap to use.</p>
<p class="spaceabove"><pre>
typedef UInt16 ATSUHeapSpec;
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Note that control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 through Mac OS X v10.4.</li></ul><h5 class="tight">Declared In</h5><code>ATSUnicodeTypes.h</code><a name="//apple_ref/doc/uid/TP40000893-CH4g-738067" title="Constants"></a><a name="//apple_ref/doc/uid/TP40000893-CH4g-TPXREF165" title="Constants"></a><h2>Constants</h2>
<a name="//apple_ref/doc/constant_group/Heap_Usage_Options" title="Heap Usage Options" role="Enum"></a><a name="//apple_ref/doc/uid/TP40000893-CH4g-BBCBJIHD" title="Heap Usage Options" role="Enum"></a><a name="//apple_ref/doc/uid/TP40000893-CH4g-DontLinkElementID_16"></a><h3 class="tight">Heap Usage Options</h3>
<p class="spaceabove">Specify the heap from which ATSUI should allocate its dynamic memory. </p>
<p class="spaceabove"><pre>
typedef UInt16 ATSUHeapSpec;
enum {
   <a href="reference.html#//apple_ref/doc/c_ref/kATSUUseCurrentHeap">kATSUUseCurrentHeap</a> = 0,
   <a href="reference.html#//apple_ref/doc/c_ref/kATSUUseAppHeap">kATSUUseAppHeap</a> = 1,
   <a href="reference.html#//apple_ref/doc/c_ref/kATSUUseSpecificHeap">kATSUUseSpecificHeap</a> = 2,
   <a href="reference.html#//apple_ref/doc/c_ref/kATSUUseCallbacks">kATSUUseCallbacks</a> = 3
};
</pre></p>
<h5 class="tight">Constants</h5><dl class="termdef">
<a name="//apple_ref/c/econst/kATSUUseCurrentHeap" title="kATSUUseCurrentHeap"></a><a name="//apple_ref/doc/c_ref/kATSUUseCurrentHeap" title="kATSUUseCurrentHeap"></a><a name="//apple_ref/doc/uid/TP40000893-CH4g-DontLinkElementID_17"></a><dt><code>kATSUUseCurrentHeap</code></dt>
<dd><p>Specifies to use the current heap.</p><p>Available in Mac OS X v10.0 through Mac OS X v10.4.</p><p>Declared in <code>ATSUnicodeTypes.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kATSUUseAppHeap" title="kATSUUseAppHeap"></a><a name="//apple_ref/doc/c_ref/kATSUUseAppHeap" title="kATSUUseAppHeap"></a><a name="//apple_ref/doc/uid/TP40000893-CH4g-DontLinkElementID_18"></a><dt><code>kATSUUseAppHeap</code></dt>
<dd><p>Specifies to use the application heap.</p><p>Available in Mac OS X v10.0 through Mac OS X v10.4.</p><p>Declared in <code>ATSUnicodeTypes.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kATSUUseSpecificHeap" title="kATSUUseSpecificHeap"></a><a name="//apple_ref/doc/c_ref/kATSUUseSpecificHeap" title="kATSUUseSpecificHeap"></a><a name="//apple_ref/doc/uid/TP40000893-CH4g-DontLinkElementID_19"></a><dt><code>kATSUUseSpecificHeap</code></dt>
<dd><p>Specifies that ATSUI should perform memory allocation operations. When you use this constant you must also supply the correctly prepared heap in the <code>heapToUse</code>  field of the <code>ATSUMemoryCallbacks</code> union.</p><p>Available in Mac OS X v10.0 through Mac OS X v10.4.</p><p>Declared in <code>ATSUnicodeTypes.h</code>.</p></dd>
<a name="//apple_ref/c/econst/kATSUUseCallbacks" title="kATSUUseCallbacks"></a><a name="//apple_ref/doc/c_ref/kATSUUseCallbacks" title="kATSUUseCallbacks"></a><a name="//apple_ref/doc/uid/TP40000893-CH4g-DontLinkElementID_20"></a><dt><code>kATSUUseCallbacks</code></dt>
<dd><p>Specifies that ATSUI should use your own application-defined functions to control memory allocation. When you use this constant you must supply pointers to your application in the <code>callback</code> structure of the <code>ATSUMemoryCallbacks</code> union.</p><p>Available in Mac OS X v10.0 through Mac OS X v10.4.</p><p>Declared in <code>ATSUnicodeTypes.h</code>.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>The functions that use Heap Usage Options are no longer supported.</p>
<h5 class="tight">Version Notes</h5>
<p>Control of memory allocation is not available in CarbonLib and is not necessary in Mac OS X.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../atsu_legacy_Rel_Notes/atsu_legacy_Rel_Notes.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Reference/ATSUI_Legacy/Reference/reference.html%3Fid%3DTP40000893-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Reference/ATSUI_Legacy/Reference/reference.html%3Fid%3DTP40000893-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Reference/ATSUI_Legacy/Reference/reference.html%3Fid%3DTP40000893-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
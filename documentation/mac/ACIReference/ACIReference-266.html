<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>CWCheckBitMap(IM: ACI Ref)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING266></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="ACIReference-265.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-267.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="ACIReference-2.html"><B>Advanced Color Imaging Reference</B></A> / <BR><DD><A HREF="ACIReference-154.html"><B>Chapter 3 - ColorSync Manager Reference for Applications and Device Drivers</B></A> / <A HREF="ACIReference-218.html"><B>ColorSync Manager Functions</B></A><BR><DL><DD><A HREF="ACIReference-257.html"><B>Matching Colors Using Low-Level Functions Without QuickDraw</B></A> / <A HREF="ACIReference-204.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING266-0></A>
<H3><A NAME=MARKER-11-406></A><A NAME=MARKER-9-407></A>CWCheckBitMap</H3>
 Tests the colors of the pixel data of a bitmap to determine whether the colors map to the gamut of the destination device.<P>
<PRE>
pascal CMError CWCheckBitMap (
CMWorldRef cw,
const CMBitMap *bitMap,
CMBitmapCallBackUPP progressProc,
void *refCon,
CMBitMap *resultBitMap);
</PRE>
<DL>
<DT><CODE>cw</CODE>
<DD> A reference to the color world <A HREF=ACIReference-214.html#MARKER-9-308>(page 3-66)</A> to use for the color check.
<DT><CODE>bitMap</CODE>
<DD> A pointer to a bitmap <A HREF=ACIReference-209.html#MARKER-9-296>(page 3-61)</A> whose colors are to be checked. 
<DT><CODE>progressProc</CODE>
<DD> A calling program-supplied callback function that allows your application to monitor progress or abort the operation as the bitmap's colors are checked against the gamut of the destination device. The Apple CMM calls your function approximately every half-second unless color checking occurs in less time; this happens when there is a small amount of data to be checked. If the function returns a result of <CODE>true</CODE>, the operation is aborted. Specify <CODE>NULL</CODE> for this parameter if your application will not monitor the bitmap color checking. For information on the callback function and its type definition, see <CODE>MyCMBitmapCallBackProc</CODE> <A HREF=ACIReference-310.html#MARKER-9-474>(page 3-170)</A>. 
<DT><CODE>refCon</CODE>
<DD> A reference constant for application data passed as a parameter to calls to <CODE>progressProc</CODE>.
<DT><CODE>resultBitMap</CODE>
<DD> A pointer to a bitmap. On output, contains the outcome of the color check. The bitmap must have bounds equal to the parameter of the source bitmap pointed to by <CODE>bitMap</CODE>. You must allocate the pixel buffer pointed to by the <CODE>image</CODE> field of the <CODE>CMBitMap</CODE> structure <A HREF=ACIReference-209.html#MARKER-9-296>(page 3-61)</A> and initialize the buffer to zeroes. Pixels are set to 1 if the corresponding pixel of the source bitmap indicated by <CODE>bitMap</CODE> is out of gamut. You must set the <CODE>space</CODE> field of the <CODE>CMBitMap</CODE> structure to <CODE>cmGamutResult1Space</CODE> color space storage format (see <A HREF=ACIReference-170.html#MARKER-9-138>"Abstract Color Space Constants" (page 3-23)</A>).
<DT><I>function result</I>
<DD> A result code of type CMError. See <A HREF=ACIReference-313.html#MARKER-9-479>"Result Codes" (page 3-174)</A> for a list of ColorSync-specific result codes. CWCheckBitMap returns cmCantGamutCheckError if the color world does not contain gamut information. For more information, see <A HREF=ACIReference-173.html#MARKER-9-181>"Flag Mask Definitions for Version 2.x Profiles" (page 3-29)</A>.
</DL>
<A NAME=HEADING266-9></A>
<H5>DISCUSSION</H5>
 When your application calls the <CODE>CWCheckBitMap</CODE> function, the ColorSync Manager dispatches the function to the preferred CMM. The ColorSync Manager determines the preferred CMM based on the color world configuration. If the color world you pass in was created by the <CODE>NCWNewColorWorld</CODE> function, the color world contains a source and destination profile, in which case the arbitration scheme described in <A HREF=#nonexistent-marker>"Introduction to the ColorSync Manager"</A> in <I>Advanced Color Imaging on the Mac OS</I> is used to determine the preferred CMM. If the color world you pass in was created by the <CODE>CWConcatColorWorld</CODE> function, then the <CODE>keyIndex</CODE> field of the <CODE>CMConcatProfileSet</CODE> data structure identifies the preferred CMM. If the preferred CMM is not available, the default Apple CMM is used to perform the color matching.<P>
 For the CWCheckBitMap function to execute successfully, the source profile's <CODE>dataColorSpace</CODE> field value and the <CODE>space</CODE> field value of the source bitmap pointed to by the <CODE>bitMap</CODE> parameter must specify the same data color space. CWCheckBitMap is not supported if the color world was initialized with a named color space profile.<P>
<A NAME=HEADING266-12></A>
<H5>SEE ALSO</H5>
 The <CODE>NCWNewColorWorld</CODE> function <A HREF=ACIReference-258.html#MARKER-9-391>(page 3-108)</A> and the <CODE>CWConcatColorWorld</CODE> function <A HREF=ACIReference-259.html#MARKER-9-394>(page 3-110)</A> both allocate color world references of type <CODE>CMWorldRef</CODE>. <P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="ACIReference-265.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="ACIReference-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="ACIReference-371.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="ACIReference-267.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="ACIReference-3.html">&copy; Apple Computer, Inc.</A><br>11 NOV 1996<P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML> 

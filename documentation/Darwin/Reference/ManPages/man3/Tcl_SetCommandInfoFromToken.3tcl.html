<html><head><title>Mac OS X Developer Tools
 Manual Page For Tcl_SetCommandInfoFromToken(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/Tcl_SetCommandInfoFromToken" title="Mac OS X Developer Tools
 Manual Page for Tcl_SetCommandInfoFromToken(3tcl)"><a name="//apple_ref/doc/man/3/Tcl_SetCommandInfoFromToken" title="Mac OS X Developer Tools
 Manual Page for Tcl_SetCommandInfoFromToken(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/Tcl_SetCommandInfoFromToken"; name=Tcl_SetCommandInfoFromToken(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
Tcl_CreateObjCommand(3)                    Tcl Library Procedures                    <a href="Tcl_CreateObjCommand.3tcl.html#//apple_ref/doc/man/3/Tcl_CreateObjCommand">Tcl_CreateObjCommand(3)</a>



____________________________________________________________________________________________________________

<b>NAME</b>
       Tcl_CreateObjCommand,  Tcl_DeleteCommand, Tcl_DeleteCommandFromToken, Tcl_GetCommandInfo, Tcl_GetCom-<font color="#ffffff" class="whiteout">mandInfoFromToken,&nbsp;Tcl_GetCommandInfoFromToken,</font>
       mandInfoFromToken, Tcl_SetCommandInfo, Tcl_SetCommandInfoFromToken,  Tcl_GetCommandName,  Tcl_GetCom-<font color="#ffffff" class="whiteout">mandFullName,&nbsp;Tcl_GetCommandFullName,</font>
       mandFullName, Tcl_GetCommandFromObj - implement new commands in C

<b>SYNOPSIS</b>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Command
       <b>Tcl_CreateObjCommand</b>(<u>interp,</u> <u>cmdName,</u> <u>proc,</u> <u>clientData,</u> <u>deleteProc</u>)

       int
       <b>Tcl_DeleteCommand</b>(<u>interp,</u> <u>cmdName</u>)

       int
       <b>Tcl_DeleteCommandFromToken</b>(<u>interp,</u> <u>token</u>)

       int
       <b>Tcl_GetCommandInfo</b>(<u>interp,</u> <u>cmdName,</u> <u>infoPtr</u>)

       int
       <b>Tcl_SetCommandInfo</b>(<u>interp,</u> <u>cmdName,</u> <u>infoPtr</u>)

       int                                                                                                   |
       <b>Tcl_GetCommandInfoFromToken</b>(<u>token,</u> <u>infoPtr</u>)                                                           |

       int                                                                                                   |
       <b>Tcl_SetCommandInfoFromToken</b>(<u>token,</u> <u>infoPtr</u>)                                                           |

       CONST char *                                                                                          |
       <b>Tcl_GetCommandName</b>(<u>interp,</u> <u>token</u>)

       void
       <b>Tcl_GetCommandFullName</b>(<u>interp,</u> <u>token,</u> <u>objPtr</u>)

       Tcl_Command
       <b>Tcl_GetCommandFromObj</b>(<u>interp,</u> <u>objPtr</u>)

<b>ARGUMENTS</b>
       Tcl_Interp       <u>*interp</u>       (in)      Interpreter  in  which  to create a new command or that con-<font color="#ffffff" class="whiteout">tains&nbsp;contains</font>
                                                tains a command.                                             |

       char             <u>*cmd-</u>                                                                                |
       <u>Name</u>      (in)                                                                   |                    |
                                                Name of command.

       Tcl_ObjCmdProc   <u>*proc</u>         (in)      Implementation of the new command: <u>proc</u> will be called when-<font color="#ffffff" class="whiteout">ever&nbsp;whenever</font>
                                                ever <u>cmdName</u> is invoked as a command.

       ClientData       <u>clientData</u>    (in)      Arbitrary one-word value to pass to <u>proc</u> and <u>deleteProc</u>.

       Tcl_CmdDeleteProc              <u>*deleteProc</u>(in)
                                                Procedure to call before <u>cmdName</u> is deleted from the  inter-<font color="#ffffff" class="whiteout">preter;&nbsp;interpreter;</font>
                                                preter;  allows  for command-specific cleanup. If NULL, then
                                                no procedure is called before the command is deleted.

       Tcl_Command      <u>token</u>         (in)      Token for command, returned by  previous  call  to  <b>Tcl_Cre</b>-<font color="#ffffff" class="whiteout">ateObjCommand.&nbsp;Tcl_CreateObjCommand.</font>
                                                <b>ateObjCommand</b>.  The command must not have been deleted.

       Tcl_CmdInfo      <u>*infoPtr</u>      (in/out)  Pointer  to structure containing various information about a
                                                Tcl command.

       Tcl_Obj          <u>*objPtr</u>       (in)      Object containing the name of a Tcl command.
____________________________________________________________________________________________________________

<b>DESCRIPTION</b>
       <b>Tcl_CreateObjCommand</b> defines a new command in <u>interp</u> and associates it with procedure <u>proc</u> such  that
       whenever  <u>name</u>  is  invoked  as a Tcl command (e.g., via a call to <b>Tcl_EvalObjEx</b>) the Tcl interpreter
       will call <u>proc</u> to process the command.

       <b>Tcl_CreateObjCommand</b> deletes any existing command <u>name</u> already associated with the interpreter  (how-<font color="#ffffff" class="whiteout">ever&nbsp;(however</font>
       ever  see below for an exception where the existing command is not deleted).  It returns a token that
       may be used to refer to the command in subsequent calls to <b>Tcl_GetCommandName</b>.  If <u>name</u> contains  any
       <b>::</b>  namespace qualifiers, then the command is added to the specified namespace; otherwise the command
       is added to the global namespace.  If <b>Tcl_CreateObjCommand</b> is called for an interpreter  that  is  in
       the process of being deleted, then it does not create a new command and it returns NULL.  <u>proc</u> should
       have arguments and result that match the type <b>Tcl_ObjCmdProc</b>:
              typedef int Tcl_ObjCmdProc(
                ClientData <u>clientData</u>,
                Tcl_Interp *<u>interp</u>,
                int <u>objc</u>,
                Tcl_Obj *CONST <u>objv</u>[]);                                                                      |
       When <u>proc</u> is invoked, the <u>clientData</u> and <u>interp</u> parameters will  be  copies  of  the  <u>clientData</u>  and |
       <u>interp</u>  arguments given to <b>Tcl_CreateObjCommand</b>.  Typically, <u>clientData</u> points to an application-spe- |
       cific data structure that describes what to do when the command procedure is invoked. <u>Objc</u>  and  <u>objv</u> |
       describe the arguments to the command, <u>objc</u> giving the number of argument objects (including the com- |
       mand name) and <u>objv</u> giving the values of the arguments.  The <u>objv</u> array  will  contain  <u>objc</u>  values, |
       pointing  to  the  argument  objects.   Unlike  <u>argv</u>[<u>argv</u>]  used in a string-based command procedure, |
       <u>objv</u>[<u>objc</u>] will not contain NULL.                                                                     |

       Additionally, when <u>proc</u> is invoked, it must not modify the contents of the <u>objv</u>  array  by  assigning |
       new  pointer values to any element of the array (for example, <u>objv</u>[<b>2</b>] = <b>NULL</b>) because this will cause |
       memory to be lost and the runtime stack to be corrupted.  The <b>CONST</b> in the declaration of  <u>objv</u>  will |
       cause  ANSI-compliant  compilers to report any such attempted assignment as an error.  However, it is |
       acceptable to modify the internal representation of any individual object  argument.   For  instance, |
       the  user  may call <b>Tcl_GetIntFromObj</b> on <u>objv</u>[<b>2</b>] to obtain the integer representation of that object; |
       that call may change the type of the object that <u>objv</u>[<b>2</b>] points at, but will not change where <u>objv</u>[<b>2</b>] |
       points.

       <u>proc</u> must return an integer code that is either <b>TCL_OK</b>, <b>TCL_ERROR</b>, <b>TCL_RETURN</b>, <b>TCL_BREAK</b>, or <b>TCL_CON</b>-<font color="#ffffff" class="whiteout">TINUE.&nbsp;TCL_CONTINUE.</font>
       <b>TINUE</b>.  See the Tcl overview man page for details on what these codes  mean.   Most  normal  commands
       will  only  return  <b>TCL_OK</b> or <b>TCL_ERROR</b>.  In addition, if <u>proc</u> needs to return a non-empty result, it
       can call <b>Tcl_SetObjResult</b> to set the interpreter's result.  In the case of a <b>TCL_OK</b> return code  this
       gives  the  result  of the command, and in the case of <b>TCL_ERROR</b> this gives an error message.  Before
       invoking a command procedure, <b>Tcl_EvalObjEx</b> sets interpreter's result to point to  an  object  repre-<font color="#ffffff" class="whiteout">senting&nbsp;representing</font>
       senting an empty string, so simple commands can return an empty result by doing nothing at all.

       The  contents  of  the  <u>objv</u> array belong to Tcl and are not guaranteed to persist once <u>proc</u> returns:
       <u>proc</u> should not modify them.  Call <b>Tcl_SetObjResult</b> if you want to return  something  from  the  <u>objv</u>
       array.

       Ordinarily, <b>Tcl_CreateObjCommand</b> deletes any existing command <u>name</u> already associated with the inter-<font color="#ffffff" class="whiteout">preter.&nbsp;interpreter.</font>
       preter.  However, if the existing command was  created  by  a  previous  call  to  <b>Tcl_CreateCommand</b>,
       <b>Tcl_CreateObjCommand</b> does not delete the command but instead arranges for the Tcl interpreter to call
       the <b>Tcl_ObjCmdProc</b> <u>proc</u> in the future.  The old string-based <b>Tcl_CmdProc</b> associated with the  command
       is  retained and its address can be obtained by subsequent <b>Tcl_GetCommandInfo</b> calls. This is done for
       backwards compatibility.

       <u>DeleteProc</u> will  be  invoked  when  (if)  <u>name</u>  is  deleted.   This  can  occur  through  a  call  to
       <b>Tcl_DeleteCommand</b>,  <b>Tcl_DeleteCommandFromToken</b>,  or <b>Tcl_DeleteInterp</b>, or by replacing <u>name</u> in another
       call to <b>Tcl_CreateObjCommand</b>.  <u>DeleteProc</u> is invoked before the command is  deleted,  and  gives  the
       application  an opportunity to release any structures associated with the command.  <u>DeleteProc</u> should
       have arguments and result that match the type <b>Tcl_CmdDeleteProc</b>:
              typedef void Tcl_CmdDeleteProc(ClientData <u>clientData</u>);
       The <u>clientData</u> argument will be the same as the <u>clientData</u> argument passed to <b>Tcl_CreateObjCommand</b>.

       <b>Tcl_DeleteCommand</b> deletes a command from a command interpreter.  Once the call completes, attempts to
       invoke  <u>cmdName</u>  in <u>interp</u> will result in errors.  If <u>cmdName</u> isn't bound as a command in <u>interp</u> then
       <b>Tcl_DeleteCommand</b> does nothing and returns -1;  otherwise it returns 0.  There are no restrictions on
       <u>cmdName</u>:   it  may  refer to a built-in command, an application-specific command, or a Tcl procedure.
       If <u>name</u> contains any <b>::</b> namespace qualifiers, the command is deleted from the specified namespace.

       Given a token returned by <b>Tcl_CreateObjCommand</b>, <b>Tcl_DeleteCommandFromToken</b> deletes the command from a
       command  interpreter.  It will delete a command even if that command has been renamed.  Once the call
       completes, attempts to invoke the command in <u>interp</u> will result in errors.   If  the  command  corre-<font color="#ffffff" class="whiteout">sponding&nbsp;corresponding</font>
       sponding  to  <u>token</u>  has  already  been  deleted  from <u>interp</u> then <b>Tcl_DeleteCommand</b> does nothing and
       returns -1; otherwise it returns 0.

       <b>Tcl_GetCommandInfo</b> checks to see whether its <u>cmdName</u> argument exists as a command in <u>interp</u>.  <u>cmdName</u>
       may  include <b>::</b> namespace qualifiers to identify a command in a particular namespace.  If the command
       is not found, then it returns 0.  Otherwise it places information about the command in  the  <b>Tcl_Cmd</b>-<font color="#ffffff" class="whiteout">Info&nbsp;Tcl_CmdInfo</font>
       <b>Info</b>  structure  pointed  to  by  <u>infoPtr</u>  and  returns 1.  A <b>Tcl_CmdInfo</b> structure has the following
       fields:
              typedef struct Tcl_CmdInfo {
                  int isNativeObjectProc;
                  Tcl_ObjCmdProc *objProc;
                  ClientData objClientData;
                  Tcl_CmdProc *proc;
                  ClientData clientData;
                  Tcl_CmdDeleteProc *deleteProc;
                  ClientData deleteData;
                  Tcl_Namespace *namespacePtr;
              } Tcl_CmdInfo;
       The <u>isNativeObjectProc</u> field has the value 1 if <b>Tcl_CreateObjCommand</b> was called to register the  com-<font color="#ffffff" class="whiteout">mand;&nbsp;command;</font>
       mand;  it  is 0 if only <b>Tcl_CreateCommand</b> was called.  It allows a program to determine whether it is
       faster to call <u>objProc</u> or <u>proc</u>: <u>objProc</u> is normally faster if <u>isNativeObjectProc</u>  has  the  value  1.
       The  fields  <u>objProc</u>  and <u>objClientData</u> have the same meaning as the <u>proc</u> and <u>clientData</u> arguments to
       <b>Tcl_CreateObjCommand</b>; they hold information about the object-based command  procedure  that  the  Tcl
       interpreter  calls  to  implement the command.  The fields <u>proc</u> and <u>clientData</u> hold information about
       the string-based command procedure that implements the command.  If <b>Tcl_CreateCommand</b> was called  for
       this command, this is the procedure passed to it; otherwise, this is a compatibility procedure regis-<font color="#ffffff" class="whiteout">tered&nbsp;registered</font>
       tered by <b>Tcl_CreateObjCommand</b> that simply calls the command's object-based procedure after converting
       its  string  arguments  to  Tcl  objects.   The  field  <u>deleteData</u> is the ClientData value to pass to
       <u>deleteProc</u>;  it is normally the same as <u>clientData</u> but may be set independently using the <b>Tcl_SetCom</b>-<font color="#ffffff" class="whiteout">mandInfo&nbsp;Tcl_SetCommandInfo</font>
       <b>mandInfo</b>  procedure.   The  field <u>namespacePtr</u> holds a pointer to the Tcl_Namespace that contains the
       command.

       <b>Tcl_GetCommandInfoFromToken</b> is identical to <b>Tcl_GetCommandInfo</b> except that it uses  a  command  token
       returned  from <b>Tcl_CreateObjCommand</b> in place of the command name.  If the <u>token</u> parameter is NULL, it
       returns 0; otherwise, it returns 1 and fills in the structure designated by <u>infoPtr</u>.

       <b>Tcl_SetCommandInfo</b> is used to modify the procedures and ClientData values associated with a  command.
       Its <u>cmdName</u> argument is the name of a command in <u>interp</u>.  <u>cmdName</u> may include <b>::</b> namespace qualifiers
       to identify a command in a particular namespace.  If this command does not exist then <b>Tcl_SetCommand</b>-<font color="#ffffff" class="whiteout">Info&nbsp;Tcl_SetCommandInfo</font>
       <b>Info</b>  returns  0.  Otherwise, it copies the information from <u>*infoPtr</u> to Tcl's internal structure for
       the command and returns 1.

       <b>Tcl_SetCommandInfoFromToken</b> is identical to <b>Tcl_SetCommandInfo</b> except that it takes a  command  token
       as  returned by <b>Tcl_CreateObjCommand</b> instead of the command name.  If the <u>token</u> parameter is NULL, it
       returns 0.  Otherwise, it copies the information from <u>*infoPtr</u> to Tcl's internal  structure  for  the
       command and returns 1.

       Note  that  <b>Tcl_SetCommandInfo</b>  and  <b>Tcl_SetCommandInfoFromToken</b> both allow the ClientData for a com-<font color="#ffffff" class="whiteout">mand's&nbsp;command's</font>
       mand's deletion procedure to be given a different value than the ClientData for  its  command  proce-<font color="#ffffff" class="whiteout">dure.&nbsp;procedure.</font>
       dure.

       Note  that  neither <b>Tcl_SetCommandInfo</b> nor <b>Tcl_SetCommandInfoFromToken</b> will change a command's names-<font color="#ffffff" class="whiteout">pace.&nbsp;namespace.</font>
       pace.  Use <b>Tcl_Eval</b> to call the <b>rename</b> command to do that.

       <b>Tcl_GetCommandName</b> provides a mechanism for tracking commands that have been renamed.  Given a  token
       returned  by <b>Tcl_CreateObjCommand</b> when the command was created, <b>Tcl_GetCommandName</b> returns the string
       name of the command.  If the command has been renamed since it was created,  then  <b>Tcl_GetCommandName</b>
       returns  the current name.  This name does not include any <b>::</b> namespace qualifiers.  The command cor-<font color="#ffffff" class="whiteout">responding&nbsp;corresponding</font>
       responding to <u>token</u> must not have been deleted.  The string  returned  by  <b>Tcl_GetCommandName</b>  is  in
       dynamic  memory  owned by Tcl and is only guaranteed to retain its value as long as the command isn't
       deleted or renamed;  callers should copy the string if they need to keep it for a long time.

       <b>Tcl_GetCommandFullName</b> produces the fully-qualified name of a command  from  a  command  token.   The
       name, including all namespace prefixes, is appended to the object specified by <u>objPtr</u>.

       <b>Tcl_GetCommandFromObj</b>  returns  a token for the command specified by the name in a <b>Tcl_Obj</b>.  The com-<font color="#ffffff" class="whiteout">mand&nbsp;command</font>
       mand name is resolved relative to the current namespace.  Returns NULL if the command is not found.

<b>SEE</b> <b>ALSO</b>
       Tcl_CreateCommand, Tcl_ResetResult, Tcl_SetObjResult


<b>KEYWORDS</b>
       bind, command, create, delete, namespace, object



Tcl                                                  8.0                             <a href="Tcl_CreateObjCommand.3tcl.html#//apple_ref/doc/man/3/Tcl_CreateObjCommand">Tcl_CreateObjCommand(3)</a>
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_SetCommandInfoFromToken.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_SetCommandInfoFromToken.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/Tcl_SetCommandInfoFromToken.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

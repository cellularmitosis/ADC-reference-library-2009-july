<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Structure of a Dictionary(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING486></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-485.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-487.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-483.html"><B>Chapter 8 - Dictionary Manager</B></A> / <A HREF="Text-485.html"><B>About the Dictionary Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING486-0></A>
<H2><A NAME=MARKER-2-25></A>The Structure of a Dictionary</H2>
 A <B>dictionary</B> is a collection of dictionary records. Each <A NAME=MARKER-2-34></A><B>dictionary record</B> consists of a key and some <A NAME=MARKER-2-35></A>associated <I>data</I> referenced by that key. A <A NAME=MARKER-2-28></A><B>key</B> is a Pascal search string with a maximum length of 129 bytes (including the length byte). The data associated with a key has a maximum length of 4096 bytes.<P>
 <A NAME=MARKER-9-89></A>The key for a dictionary record is stored separately from its data. The key, an offset to the data, and the length of the data make up the record's <A NAME=MARKER-2-91></A><B>index</B> entry. The index entry is stored as a <B><A NAME=MARKER-2-122></A>B*-tree</B> structure in the data fork of the dictionary file. The data is stored in the resource fork of the file; the Dictionary Manager accesses the data with Resource Manager partial resource routines. When a dictionary lookup is needed, the Dictionary Manager uses the key to find the location and size of the data in the resource fork. Then, it uses a partial resource reading to read the data into memory. (Routines for reading partial resources are described in the Resource Manager chapter of <I><A HREF="../MoreToolbox/MoreToolbox-2.html">Inside Macintosh: More Macintosh Toolbox</A></I>.) <A HREF=#MARKER-9-32>Figure 8-1</A> shows the general format of a dictionary record.<P>
<DL>
<DT><B>Note</B>
<DD>Always use Dictionary Manager functions to gain access to records in the resource fork rather than examining them directly with Resource Manager routines.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=MARKER-9-32></A><B>Figure 8-1  General format of a dictionary record</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-09.jpg">
 Each key-data pair is unique in a dictionary. No two keys in a single dictionary are identical.<P>
 <A HREF=#MARKER-9-33>Figure 8-2</A> shows the format of the data associated with a dictionary key. The first byte, which specifies the total number of entries in the data, is followed by a series of entries. Each entry has a maximum length of 256 bytes.<P>
<B>Figure 8-2  <A NAME=MARKER-9-33></A>Format of data associated with a key</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-02.jpg">
 A <B>dictionary <A NAME=MARKER-2-104></A>entry</B> <A NAME=MARKER-2-230></A>in the data associated with a key contains raw data plus optional attributes<B>. <A NAME=MARKER-2-62></A>Raw data</B> consists of any information related to the key entry. In a general dictionary it might be an explanation of the key; in a given East Asian dictionary it might be all the Chinese characters with the pronunciation of the key. A <B><A NAME=MARKER-2-65></A>data attribute</B> contains some information about the raw data--for example, grammatical or context-sensitive details, plus an attribute type. The <B><A NAME=MARKER-2-6></A>attribute type</B> is an integer constant in the range -128 to 127. The currently defined attribute types are listed on <A HREF=Text-506.html#MARKER-9-8>page 8-27</A>.<P>
<DL>
<DT><B>Note</B>
<DD>Apple reserves all negative attribute types. Positive attribute types are available for the use of developers of applications and text service components.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 <A HREF=#MARKER-9-39>Figure 8-3</A> shows the format of an entry. If data attributes are present, the first two bytes in each data attribute are the attribute size and the attribute type.<P>
<B>Figure 8-3  <A NAME=MARKER-9-39></A>Format of an entry in the data associated with a key</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/DM-03.jpg">
 <A NAME=MARKER-2-130></A>Depending on the script system, the key, raw data, and attributes may differ.<P>
<UL>
<LI>In a record in an English dictionary, a key is any word; raw data is one or more definitions of the word; and a data attribute is the type of speech of the key--for example--verb, noun, adverb, adjective, or a combination of these.
<LI>In a record in a Japanese dictionary, a key is a symbol of the phonetic subscript Hiragana; the associated raw data are the Kanji (ideographic characters); and the data attributes include the parts of speech or input method-specific attributes such as homonyms or groupings (clauses) of Kanji.
<LI>In a record in a Chinese phonetic dictionary, a key is one of the phonetic symbols of Bopomofo; raw data is one or more Chinese words with the same pronunciation as the key; and there may be no associated data attributes.
<LI>In a record in a Korean dictionary, a key may be a syllable or word in the Hangul subscript; associated raw data may be one or more Chinese words with the pronunciation of the key; and there may be no associated data attributes. <A NAME=MARKER-21-90></A>  <A NAME=MARKER-2-88></A><P>
</UL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-485.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-487.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

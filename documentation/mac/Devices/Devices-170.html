<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SIM Initialization Record(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING170></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-169.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-171.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-151.html"><B>Chapter 4 - SCSI Manager 4.3</B></A> / <A HREF="Devices-156.html"><B>SCSI Manager 4.3 Reference</B></A><BR><DL><DD><A HREF="Devices-157.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING170-0></A>
<H3><A NAME=MARKER-9-173></A>SIM Initialization Record</H3>
 <A NAME=MARKER-2-174></A>You use the SIM initialization record to provide information about your SIM when you register it with the XPT using the <CODE>SCSIRegisterBus</CODE> function. The SIM initialization record is defined by the SIMInitInfo data type.<P>
<PRE>
struct SIMInitInfo {
   UInt8             *SIMstaticPtr;
   SInt32            staticSize;
   SIMInitProc       SIMInit;
   SIMActionProc     SIMAction;
   SCSIProc          SIM_ISR;
   InterruptPollProc SIMInterruptPoll;
   SIMActionProc     NewOldCall;
   UInt16            ioPBSize;
   Boolean           oldCallCapable;
   UInt8             simInfoUnused1;
   SInt32            simInternalUse;
   SCSIProc          XPT_ISR;
   SCSIProc          EnteringSIM;
   SCSIProc          ExitingSIM;
   MakeCallbackProc  MakeCallback;
   UInt16            busID;
   UInt16            simInfoUnused3;
   SInt32            simInfoUnused4;
};
typedef struct SIMInitInfo SIMInitInfo; 
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-175></A>SIMstaticPtr</CODE>
<DD> A pointer to the storage allocated by the XPT for the SIM's static variables.
<DT><CODE><A NAME=MARKER-2-176></A>staticSize</CODE>
<DD> The amount of memory requested by the SIM for storing its static variables.
<DT><CODE><A NAME=MARKER-2-177></A>SIMInit</CODE>
<DD> A pointer to the SIM's initialization function. See the description of the <CODE>SIMInit</CODE> function on <A HREF=Devices-196.html#MARKER-9-233>page 4-60</A> for more information.
<DT><CODE><A NAME=MARKER-2-178></A>SIMAction</CODE>
<DD> A pointer to the SIM function that handles <CODE>SCSIAction</CODE> requests. See the description of the <CODE>SIMAction</CODE> function on <A HREF=Devices-197.html#MARKER-9-235>page 4-61</A> for more information.
<DT><CODE><A NAME=MARKER-2-179></A>SIM_ISR</CODE>
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-180></A>SIMInterruptPoll</CODE>
<DD> A pointer to the SIM's interrupt polling function. The Device Manager periodically calls this routine while waiting for a synchronous request to complete if the processor's interrupt priority level is not 0. This allows the Virtual Memory Manager to initiate SCSI transactions when interrupts are disabled. See the description of the <CODE>SIMInterruptPoll</CODE> function on <A HREF=Devices-198.html#MARKER-9-238>page 4-61</A> for more information.
<DT><CODE><A NAME=MARKER-2-181></A>NewOldCall</CODE>
<DD> If the <CODE>oldCallCapable</CODE> field is set to <CODE>true</CODE>, this field contains a pointer to the SIM function that handles original SCSI Manager requests. See the description of the <CODE>NewOldCall</CODE> function beginning on <A HREF=Devices-200.html#MARKER-9-243>page 4-63</A> for more information.
<DT><CODE><A NAME=MARKER-2-182></A>ioPBSize</CODE>
<DD> The minimum size that a SCSI I/O parameter block must be for use with this SIM.
<DT><CODE><A NAME=MARKER-2-183></A>oldCallCapable</CODE>
<DD> A Boolean value that indicates whether the SIM emulates original SCSI Manager functions.
<DT><CODE><A NAME=MARKER-2-184></A>simInfoUnused1</CODE>
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-185></A>simInternalUse</CODE>
<DD> A long word available for use by the SIM. This field is not affected or used by the SCSI Manager.
<DT><CODE><A NAME=MARKER-2-186></A>XPT_ISR</CODE>
<DD> Reserved.
<DT><CODE><A NAME=MARKER-2-187></A>EnteringSIM</CODE>
<DD> A pointer to the XPT <CODE>EnteringSIM</CODE> function. This function provides support for virtual memory. Your SIM must call this function prior to executing any other SIM code. See the description of the <CODE>EnteringSIM</CODE> function on <A HREF=Devices-192.html#MARKER-9-223>page 4-58</A> for more information.
<DT><CODE><A NAME=MARKER-2-188></A>ExitingSIM</CODE>
<DD> A pointer to the XPT <CODE>ExitingSIM</CODE> function. Your SIM must call this function before passing control to any code that could cause a page fault, including completion routines. See the description of the <CODE>ExitingSIM</CODE> function on <A HREF=Devices-193.html#MARKER-9-226>page 4-59</A> for more information.
<DT><CODE><A NAME=MARKER-2-189></A>MakeCallback</CODE>
<DD> A pointer to the XPT <CODE>MakeCallback</CODE> function. Your SIM must call this function after completing a transaction. The XPT then calls the completion routine specified in the <CODE>scsiCompletion</CODE> field of the parameter block header. See the description of the <CODE>MakeCallback</CODE> function on <A HREF=Devices-194.html#MARKER-9-229>page 4-59</A> for more information.
<DT><CODE><A NAME=MARKER-2-190></A>busID</CODE>
<DD> The bus number assigned by the XPT to this SIM/HBA.<A NAME=MARKER-2-191></A><A NAME=MARKER-2-192></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-169.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-171.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

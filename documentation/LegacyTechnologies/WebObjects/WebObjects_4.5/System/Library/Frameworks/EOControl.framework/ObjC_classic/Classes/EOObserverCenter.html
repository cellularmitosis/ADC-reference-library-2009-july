<HTML>		<HEAD>		<TITLE>			EOObserverCenter		</TITLE>		</HEAD>	<body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>EOControl Reference</font><br><br><!--end of path --><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> <a name = "EOObserverCenter"><BR><h1><FONT COLOR="#000066"><a name="//apple_ref/occ/cl/EOObserverCenter">EOObserverCenter</a></FONT></h1><br></a><blockquote><dl><dt><b>Inheritsfrom: </b></dt><dd> NSObject</dd></dl></blockquote><blockquote><dl><dt><b>Conforms to: </b></dt><dd> NSObject</dd><dd>(NSObject)</dd></dl></blockquote><blockquote><dl><b>Declared in: </b><dd>EOControl/EOObserver.h</dd></dl></blockquote><br><br><HR SIZE=4><br><h2>Class Description</h2><hr><p>EOObserverCenter is the central player in EOControl's changetracking mechanism. EOObserverCenter records observers and the objectsthey observe, and it distributes notifications when the observableobjects change. For an overview of the change tracking mechanism,see  <a frame= "conv" href="../Introduction.html#BIADGEAG">"Tracking Enterprise Objects Changes" </a> in the introduction to the EOControlFramework.</p><p>You don't ever create instances of EOObserverCenter. Instead,the class itself acts as the central manager of change notification,registering observers and notifying them of changes. The EOObserverCenterAPI is provided entirely in class methods.</p><br><h2>Registering an Observer</h2><p>Objects that directly observe others must adopt the EOObserving protocol,which consists of the single method  <a frame= "conv" href="../Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a>.To register an object as an observer, invoke EOObserverCenter's  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addObserver:forObject:">addObserver:forObject:</a> with the observerand the object to be observed. Once this is done, any time the observedobject invokes its  <a frame= "conv" href="../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/willChange">willChange</a> method, the observer issent an <b>objectWillChange:</b> message informingit of the pending change. You can also register an observer to benotified when any object changes using  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addOmniscientObserver:">addOmniscientObserver:</a>. This canbe useful in certain situations, but as it's very costly to dealout frequent change notifications, you should use omniscient observerssparingly. To unregister either kind of observer, simply use thecorresponding <b>remove...</b> method.</p><br><h2>Change Notification</h2><p>Objects that are about to change invoke  <a frame= "conv" href="../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/willChange">willChange</a>, a method that the Frameworkadds to NSObject. The implementations of this method invoke EOObserverCenter's  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/notifyObserversObjectWillChange:">notifyObserversObjectWillChange:</a>, whichsends an  <a frame= "conv" href="../Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a> messageto all observers registered for the object that's changing, as wellas to any omniscient observers. <b>notifyObserversObjectWillChange:</b> optimizesthe process by suppressing redundant <b>objectWillChange:</b> messageswhen the same object invokes  <a frame= "conv" href="../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/willChange">willChange</a> several times in a row(as often happens when multiple properties are changed). Changenotification is immediate, and takes place <em>before</em> theobject's state changes. If you need to compare the object'sstate before and after the change, you must arrange to examine thenew state at the end of the run loop.</p><p>You can suppress change notification when necessary, usingthe  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/suppressObserverNotification">suppressObserverNotification</a> and  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/enableObserverNotification">enableObserverNotification</a> methods.While notification is suppressed, neither regular nor omniscient observersare informed of changes. These methods nest, so you can invoke <b>suppressObserverNotification</b> multipletimes, and notification isn't re-enabled until a matching numberof <b>enableObserverNotification</b> message havebeen sent.</p><br><br><br><h2>Method Types</h2><hr><blockquote><dl><dt>Registering and unregisteringobservers</dt><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addObserver:forObject:">+ addObserver:forObject:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/removeObserver:forObject:">+ removeObserver:forObject:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addOmniscientObserver:">+ addOmniscientObserver:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/removeOmniscientObserver:">+ removeOmniscientObserver:</a></dd></dl><dl><dt>Notifying observers ofchange</dt><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/notifyObserversObjectWillChange:">+ notifyObserversObjectWillChange:</a></dd></dl><dl><dt>Getting observers</dt><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/observersForObject:">+ observersForObject:</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/observerForObject:ofClass:">+ observerForObject:ofClass:</a></dd></dl><dl><dt>Suppressing change notification</dt><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/suppressObserverNotification">+ suppressObserverNotification</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/enableObserverNotification">+ enableObserverNotification</a></dd><dd> <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/observerNotificationSuppressCount">+ observerNotificationSuppressCount</a></dd></dl></blockquote><br><br><h2>Class Methods</h2><hr><a name = "addObserver_forObject_"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/addObserver:forObject:">addObserver:forObject:</a></h3></a><p><code>+ (void)<b>addObserver:</b>(id&lt;EOObserving&gt;)<em>anObserver</em><b>forObject:</b>(id)<em>anObject</em></code></p>Records <em>anObserver</em> tobe notified with an  <a frame= "conv" href="../Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a> messagewhen <em>anObject</em> changes.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/removeObserver:forObject:">+ removeObserver:forObject:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "addOmniscientObserver_"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/addOmniscientObserver:">addOmniscientObserver:</a></h3></a><p><code>+ (void)<b>addOmniscientObserver:</b>(id&lt;EOObserving&gt;)<em>anObserver</em></code></p>Records <em>anObserver</em> tobe notified with an  <a frame= "conv" href="../Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a> messagewhen any object changes. This can cause significant performancedegradation, and so should be used with care. The ominiscient observermust be prepared to receive the <b>objectWillChange:</b> messagewith a nil argument.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addObserver:forObject:">+ addObserver:forObject:</a>,  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/removeOmniscientObserver:">+ removeOmniscientObserver:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "BBIDEFIA"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/enableObserverNotification">enableObserverNotification</a></h3></a><p><code>+ (void)<b>enableObserverNotification</b></code></p>Counters a prior  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/suppressObserverNotification">suppressObserverNotification</a> message.When no such messages remain in effect, the  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/notifyObserversObjectWillChange:">notifyObserversObjectWillChange:</a> methodis re-enabled. Raises an NSInternalInconsistencyException if notpaired with a prior  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/suppressObserverNotification">suppressObserverNotification</a> message.<hr WIDTH=25% ALIGN=LEFT><a name = "notifyObserversObjectWillChange_"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/notifyObserversObjectWillChange:">notifyObserversObjectWillChange:</a></h3></a><p><code>+ (void)<b>notifyObserversObjectWillChange:</b>(id)<em>anObject</em></code></p>Unless change notification is suppressed, sendsan  <a frame= "conv" href="../Protocols/EOObserving.html#//apple_ref/occ/intfm/EOObserving/objectWillChange:">objectWillChange:</a> toall observers registered for <em>anObject</em> withthat object as the argument, and sends that message to all omniscientobservers as well. If invoked several times in a row with the sameobject, only the first invocation has any effect, since subsequentchange notifications are redundant.<p>If an observer wants toensure that it receives notification the next time the last objectto change changes again, it should use the statement:</p><blockquote><pre>[EOObserverCenter notifyObserversObjectWillChange:nil];</pre></blockquote><br><p>Anobservable object (typically an enterprise object) invokes thismethod from its  <a frame= "conv" href="../Protocols/EOEnterpriseObject.html#//apple_ref/occ/intfm/EOEnterpriseObject/willChange">willChange</a> implementation, so youshould never have to invoke this method directly.</p><p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/suppressObserverNotification">+ suppressObserverNotification</a>,  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addObserver:forObject:">+ addObserver:forObject:</a>,  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addOmniscientObserver:">+ addOmniscientObserver:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "observerForObject_ofClass_"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/observerForObject:ofClass:">observerForObject:ofClass:</a></h3></a><p><code>+ (id)<b>observerForObject:</b>(id)<em>anObject</em><b>ofClass:</b>(Class)<em>aClass</em></code></p>Returns an observer for <em>anObject</em> that'sa kind of <em>aClass</em>. If more than oneobserver of <em>anObject</em> is a kind of <em>aClass</em>,the specific observer returned is undetermined. You can use  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/observersForObject:">observersForObject:</a> insteadto get all observers and examine their class membership.<hr WIDTH=25% ALIGN=LEFT><a name = "BBIBHEFF"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/observerNotificationSuppressCount">observerNotificationSuppressCount</a></h3></a><p><code>+ (unsigned int)<b>observerNotificationSuppressCount</b></code></p>Returns the number of  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/suppressObserverNotification">suppressObserverNotification</a> messagesin effect.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/enableObserverNotification">+ enableObserverNotification</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "observersForObject_"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/observersForObject:">observersForObject:</a></h3></a><p><code>+ (NSArray *)<b>observersForObject:</b>(id)<em>anObject</em></code></p>Returns all observers of <em>anObject</em>.<hr WIDTH=25% ALIGN=LEFT><a name = "removeObserver_forObject_"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/removeObserver:forObject:">removeObserver:forObject:</a></h3></a><p><code>+ (void)<b>removeObserver:</b>(id&lt;EOObserving&gt;)<em>anObserver</em><b>forObject:</b>(id)<em>anObject</em></code></p>Removes <em>anObserver</em> asan observer of <em>anObject</em>.<p><b>SeeAlso: </b>  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addObserver:forObject:">- addObserver:forObject:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "removeOmniscientObserver_"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/removeOmniscientObserver:">removeOmniscientObserver:</a></h3></a><p><code>+ (void)<b>removeOmniscientObserver:</b>(id&lt;EOObserving&gt;)<em>anObserver</em></code></p>Unregisters <em>anObserver</em> asan observer of all objects.<p><b>See Also: </b>  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/removeObserver:forObject:">+ removeObserver:forObject:</a>,  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/addOmniscientObserver:">+ addOmniscientObserver:</a></p><hr WIDTH=25% ALIGN=LEFT><a name = "BBIDDCCF"><BR><h3><a name="//apple_ref/occ/clm/EOObserverCenter/suppressObserverNotification">suppressObserverNotification</a></h3></a><p><code>+ (void)<b>suppressObserverNotification</b></code></p>Disables the  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/notifyObserversObjectWillChange:">notifyObserversObjectWillChange:</a> method,so that no change notifications are sent. This method can be invokedmultiple times;  <a frame= "conv" href="#//apple_ref/occ/clm/EOObserverCenter/enableObserverNotification">enableObserverNotification</a> mustthen be invoked an equal number of times to re-enable change notification.<hr WIDTH=25% ALIGN=LEFT><BR><br><a href="../EOControlTOC.html"><img src="../../../../../../images/up.gif" border="0" alt="Table of Contents"></a> </BODY></HTML>
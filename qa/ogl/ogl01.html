<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A OGL01: aglChoosePixelFormat, The Inside Scoop</title>	<meta name="keywords" content="OpenGL aglChoosePixelFormat">	<meta name="Description" content="Technical Q&amp;A OGL01: This document describes the nuancesof aglChoosePixelFormat, including specific information onmulti-monitor support."><meta name="categories" content="OpenGL"><meta name="week-posted" content="Apr 3, 2000 - Apr 7, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001480" title="aglChoosePixelFormat, The Inside Scoop"></a><!-- Title Banner --><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/idxOpenGL-date.html" target="_blank">Graphics & Imaging > OpenGL</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A OGL01</div>
<div id="pageheadsub">aglChoosePixelFormat, The Inside Scoop</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->			<!-- -->			<!-- Document Body --><CENTER><table cellspacing="0" cellpadding="0" border="0" WIDTH="600"><tr><td align="left" scope="row"><hr width=500 align=center><p id=p2>Q: So, having read the documentation, I still do not understand why <CODE>aglChoosePixelFormat</CODE> fails to return a hardware accelerated (HWA) and/or valid pixel format.  Can you explain what it is doing and how to fix it?</p><p id=p4>A: Okay, here is how it works.</p><p id=p4>The key is the way <CODE>aglChoosePixelFormat</CODE> handles graphics devices.  Obviously, by specifying a <CODE>GDevice</CODE> or set of <CODE>GDevices</CODE>, <CODE>aglChoosePixelFormat</CODE> just considers the supplied set.  If you don't pass a <CODE>GDevice</CODE> it considers all devices, including the overlapping case (where a window spans more than one monitor), which can only be handled by the software renderer.</p><p id=p4>So, assume you pass NULL in the device list parameter.  <CODE>aglChoosePixelFormat</CODE> will look at all devices and pick the best renderer on each device that can satisfy the pixel format request given.  If any device (including the overlapping case) fails to find an applicable format, <CODE>aglChoosePixelFormat</CODE> fails and returns NULL.  This could be due to an error in the supplied parameters or just due to no match being found.  In any case, you should check <CODE>aglGetError</CODE> after the call to <CODE>aglChoosePixelFormat</CODE> and pass non-zero results to <CODE>aglErrorString</CODE> to find the error.  This does not mean that a pixel format was not found; it would mean at some level an error was seen.  It is up to the application to determine what to do if an error occurs and a valid (non-NULL) pixel format is returned.</p><p id=p2>Q: Where does this fail?</p><p id=p4>A: In the above case, if you pass <CODE>AGL_ACCELERATED</CODE> as a parameter, you WILL fail since the software renderer (which covers the overlapping case) is not accelerated.  If you have a non-compliant (i.e., RAGE II) renderer driving a display and do not pass <CODE>AGL_ALL_RENDERERS</CODE> you WILL fail. Also, if there is anything that you requested that cannot be satisfied on ALL renderers you will fail.</p><p id=p2>Q: What this does NOT mean?</p><p id=p4>A: This does NOT mean that <CODE>aglChoosePixelFormat</CODE> will look at all the renderers and pick the least common denominator; that is not how it works.  For example, I have a Mach64-based card and an ATI Rage 128 card and I request a basic RGBA, double-buffered format. If my window is wholly on the Rage 128 monitor, I will see the HWA renderer.  If it is between monitors or on the Mach64 driven display, I will see the software renderer.</p><p id=p2>Q: What happens when <CODE>GDevices</CODE> are passed to <CODE>aglChoosePixelFormat</CODE>? </p><p id=p4> A: It will only consider that/those device(s) when choosing the format; everything else will be the same.  Thus, you will not get the default to software in the overlapping case and if your drawable is on a <CODE>GDevice</CODE> not passed to <CODE>aglChoosePixelFormat</CODE>, nothing will draw since no pixel format was chosen.</p><p id=p2>Q: What are the signs that things are working?</p><p id=p4>A: Try passing in all the <CODE>GDevices</CODE> on your system and see what happens.  This should just eliminate the overlapping case, which currently is only supported by the software renderer.  If you cannot choose a pixel format, then one of your devices does not support one of the attributes you requested.   If your application now works, it is very likely that some of your drawable was crossing over between monitors.</p><p id=p2>Q: Is it appropriate to explicitly request <CODE>AGL_ACCELERATED</CODE>?</p><p id=p4>A: You do not have to explicitly request <CODE>AGL_ACCELERATED</CODE>.  If you do, you cannot pass NULL as the <code>GDevice</code> into <CODE>aglChoosePixelFormat</CODE> or you will not find any matches since the software renderer will not match the accelerated case.  If you do not, an accelerated renderer will still be chosen for devices that can provide a hardware renderer that support your other parameters, and the software renderer will support the other displays and the overlapping case.  If you explicitly need a HWA context for your application, request <CODE>AGL_ACCELERATED</CODE> and pass the <code>GDevices</code> you are interested in using into <CODE>aglChoosePixelFormat</CODE>.  If possible, this will choose HWA renderers for all the devices passed in.  A failure here means that one of the devices could not support the pixel format request.</p><p id=p2>Q: <CODE>If AGL_ACCELERATED</CODE> is not requested, why might the context not end up being accelerated?</p><p id=p4>A: The basic case occurs when the <code>GDevice</code>'s HWA renderer does not support the specific pixel format you request while the software renderer can support it; thus, you get the software renderer on that <code>GDevice</code>.  As part of its renderer selection <CODE>aglChoosePixelFormat</CODE> uses current pixel depth as part of its selection criteria.  It assumes you want the renderer right now, not later after you change the depth.  If you call <CODE>aglChoosePixelFormat</CODE> on an 8-bit device you will like get only a software renderer since almost no HWA renderers support 8 bits per pixel acceleration.</p><p id=p2>Q: Is there any more information on the pixel format options than that found in the SDK documentation?</p><p id=p4>A: <CODE>AGL_ACCELERATED</CODE>: all returned pixel formats must be HWA or else fail.</p><p id=p4><CODE>AGL_ALL_RENDERERS</CODE>: Renderers do NOT need to be OpenGL compliant (i.e., would use HWA RAGE II as an option).  This allows consideration of non-compliant renderers.</p><p id=p4><CODE>AGL_NO_RECOVERY</CODE>: You will not get a software fallback renderer for a hardware accelerated context (such as in a case where HWA runs out of resources).  This does not affect the software renderer in the overlapping window case.</p><!-- begin_date --><H4 ALIGN=center>Updated: 03-April-2000</H4><!-- end_date -->				</TD>			</tr></table></CENTER><!--------------------------- Navigation Area ----------------------------------><!-- Navigation Area --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/ogl/ogl01.html%3Fid%3DDTS10001480-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/ogl/ogl01.html%3Fid%3DDTS10001480-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/ogl/ogl01.html%3Fid%3DDTS10001480-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime 7.2.1 Update Guide: New Features, Changes and Enhancements in QuickTime 7.2.1</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="New Features, Changes and Enhancements in QuickTime 7.2.1"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40005496-CH3" title="New Features, Changes and Enhancements in QuickTime 7.2.1"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40005496-CH1-SW1">QuickTime 7.2.1 Update Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_34" title="New Features, Changes and Enhancements in QuickTime 7.2.1"></a><h1>New Features, Changes and Enhancements in QuickTime 7.2.1</h1><p>The QuickTime API is dedicated to extending the reach of application developers by letting them invoke the full range of multimedia’s capabilities. It supports a wide range of standards-based formats, in addition to proprietary formats from Apple and others. The QuickTime API is not static, however, and has evolved over the course of the last decade to adopt new idioms, new data structures, and new ways of doing things.</p><p>The C/C++ portion of the QuickTime API comprises more than 2700 functions that provide services to applications. These services include audio and video capture and playback; movie editing, composition, and streaming; still image import, export, and display; audio-visual interactivity, and more.</p><p>A new Cocoa (Objective-C) API for QuickTime, available in Mac OS X v10.5, v10.4, and v10.3, provides a much less complex programmer interface, and represents a distillation and abstraction of the most essential QuickTime functions as a small set of classes and methods. A great deal of functionality has been packed into a relatively small objective API. There are currently 22 classes that make up the QuickTime Kit Framework.</p><p>If you are a Cocoa or QuickTime developer, you can use the QuickTime Software Development Kit (SDK) to incorporate QuickTime capabilities into your application development. This chapter describes some of the new and enhanced features available in QuickTime 7.2.1, and is intended to provide you with information you can use to take advantage of these new features in this latest release of QuickTime. If you are a QuickTime API-level developer, content author, multimedia producer, or Webmaster who is currently working with QuickTime, you should read this chapter.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_35" title="Note"></a><p><strong>Note:</strong>&nbsp;This chapter focuses on the features in QuickTime 7.2.1 that ship with Mac OS X v10.5.</p></div>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_4">Compatibility Requirements</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_5">Changes and Enhancements in QuickTime 7.2.1</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_6">Reference Movie Creation for iPhone</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_9">New QTKit Capture APIs</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_18">Updates to the QuickTime Kit API</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_21">New QuickTime Control Objects in Interface Builder 3</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_22">64-Bit QuickTime Kit Support in Mac OS X v10.5</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_24">Changes to QuickTime Player User Interface</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_25">New Share to Podcast Producer in QuickTime Player Pro</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_26">New Audio Context Inserts API</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_30">Improved Handling of HiDPI</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_31">New Aperture Mode APIs</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_32">New 64-Bit Timecode Media APIs</a>
				
			<br/>
			
        
			
			
				<a href="NewFeaturesChangesEnhancements.html#//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_33">Miscellaneous Changes and Enhancements</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_4" title="Compatibility Requirements"></a><h2>Compatibility Requirements</h2><p>QuickTime 7.2.1 requires the following configurations: </p><ul class="ul"><li class="li"><p><strong>Software</strong>. Mac OS X v10.5</p></li><li class="li"><p><strong>Hardware</strong>. A Macintosh computer with a G3 processor or faster, running at 400 MHz, with a minimum of 128 MB of RAM</p></li></ul><div class="importantbox"><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_36" title="Important:"></a><p><strong>Important:</strong>&nbsp;QuickTime 7.2.1 is intended to support Mac OS X v10.5. As such, this version does not support Mac OS X v10.3.9 and higher; Mac OS X v10.4.9 and higher, or Microsoft Windows.</p><p></p></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_5" title="Changes and Enhancements in QuickTime 7.2.1"></a><h2>Changes and Enhancements in QuickTime 7.2.1</h2><p>The QuickTime 7.2.1 release follows the recent release of QuickTime 7.2, and includes the following major changes and enhancements: </p><ul class="ul"><li class="li"><p>New iPhone reference movie creation capability</p></li><li class="li"><p>New QTKit capture APIs</p></li><li class="li"><p>Updates to the QuickTime Kit API</p></li><li class="li"><p>New QuickTime control objects in Interface Builder 3</p></li><li class="li"><p>64-bit QuickTime support in Mac OS X v10.5</p></li><li class="li"><p>New audio context inserts APIs</p></li><li class="li"><p>Improvements in HiDPI for the QuickTime Kit and the QuickTime plug-in</p></li><li class="li"><p>New timecode media handler APIs</p></li><li class="li"><p>Miscellaneous changes and enhancements</p></li></ul><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_6" title="Reference Movie Creation for iPhone"></a><h2>Reference Movie Creation for iPhone</h2><p>Following the recent introduction of the iPhone, Apple now supports hardware products on multiple platforms, each capable of viewing web content in a browser. Because the viewport for the iPhone is significantly different from that of the Macintosh desktop, however, the user experience for displaying certain elements of web content––including the playback of QuickTime movies––needs to be optimized. Other issues, such as available network bandwidth, must also be considered.</p><p>QuickTime 7.2.1 enables web developers to present a single webpage listing URLs, each of which has a list of tests used by a playback device (such as the Macintosh desktop or iPhone) to find the appropriate form for the client’s hardware. This webpage of URLs is known as a <strong>reference movie</strong>.</p><p>The goal is to provide web developers and content authors with the power to create reference movies that point to iPhone and web versions of their source.</p><p>A scripting interface, using AppleScript on Mac OS X and ActiveX on Windows, is also available for developers to programmatically create a reference movie and to export that movie with iPhone presets.</p><p>This new capability enables a developer or content author to serve content on their web pages––specifically QuickTime movies––that is appropriate to various user platforms, taking into account bandwidth and other network considerations, as shown in <span class="content_text">Figure 1-1</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW6" title="Figure 1-1Reference movies appropriate to various user platforms"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>Reference movies appropriate to various user platforms</p><img src = "../Art/qt_ref_movie_options.jpg" alt = "Reference movies appropriate to various user platforms" ></div><br/><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_7" title="Supported Features"></a><h3>Supported Features</h3><p>QuickTime 7.2.1 provides the following capabilities:</p><ul class="spaceabove"><li class="li"><p>Export for Web, which exports to iPhone, iPhone (cellular), and Desktop versions of given source movies.</p></li><li class="li"><p>The creation of reference movies that point to all exported versions of the movie. The ref movie uses relative paths to point to each version. This requires that users keep the reference movie and the versions in the same folder on the server, but allows users to create the movie without specifying URLs and allows them to move the ref movie and its sources as a group without breaking the reference movie. </p></li><li class="li"><p>Export that generates a poster frame image from the movie’s poster frame that can be used by the embed tag (in the case of the iPhone, for example).</p></li><li class="li"><p>The generation of an embed tag that includes the poster frame specification and reference movie URL in an HTML snippet. The HTML snippet displays an HTML textfield with the embed tag, as well as help text for inserting the HTML and posting the movies. The HTML file also includes instructions on how to use the exported movie files, poster image, and the HTML snippet.</p></li><li class="li"><p>The ability to select the folder where the results of the iPhone reference movie creation operation is written. A single subfolder is created in the specified folder to contain all the files.</p></li></ul><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_8" title="How It Works"></a><h3>How It Works</h3><p>To take advantage of this new capability, follow these steps: </p><ol class="ol"><li class="li"><p>Launch QuickTime Player Pro.</p></li><li class="li"><p>Select File > Export for Web...</p><p>A dialog appears.</p></li><li class="li"><p>Enter the data you want to specify in the fields and checkboxes of the dialog box, as shown in <span class="content_text">Figure 1-2</span>. In this step, you can specify the name, location of your export, and for which export versions you want to save, that is, iPhone, iPhone (cellular), and Desktop.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005496-CH3-SW5" title="Figure 1-2Creating a reference movie automatically"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>Creating a reference movie automatically</p><img src = "../Art/export_iphone_dialog.jpg" alt = "Creating a reference movie automatically" ></div></li><li class="li"><p>Click Export to export these versions of your QuickTime movie for optimized web delivery to the iPhone and the desktop.</p></li></ol><p>When the user starts the export, the following files are placed in the specified folder (where NAME is the user-specified name): </p><ul class="spaceabove"><li class="li"><p><code>NAME-iPhone.m4v</code> </p></li><li class="li"><p><code>NAME-iPhone-cell.3gp</code></p></li><li class="li"><p><code>NAME-desktop.m4v</code></p></li><li class="li"><p><code>NAME-poster.jpg</code></p></li><li class="li"><p><code>NAME.mov</code></p></li><li class="li"><p><code>ReadMe.html</code></p></li></ul><p>For more technical information about exporting movies for iPod, AppleTV, and iPhone, refer to <span class="content_text"><a href="http://developer.apple.com/technotes/tn2007/tn2188.html" target="_top">Technical Note TN2188</a></span>. If you’re a web developer working with the iPhone, see <span class="content_text"><a href="http://developer.apple.com/iphone/designingcontent.html" target="_top">Optimizing Web Applications and Content for iPhone</a></span>, which provides guidelines that will help you prepare web content and design a website or web-based application for iPhone.</p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_9" title="New QTKit Capture APIs"></a><h2>New QTKit Capture APIs</h2><p>The QuickTime Kit framework has made a major leap forward, providing support for capturing media from external sources, such as cameras and microphones, and outputting that media to QuickTime movies. Fifteen new classes have been added to the existing five in the first iteration of the framework. The goal is to provide Cocoa and QuickTime developers with a viable and robust alternative to using the procedural C sequence grabber API, which allowed applications to obtain digitized data from external sources, such as video boards. Using the QTKit capture API is now the preferred way of developing applications that support capture and recording of media. </p><p>To handle support for new video devices, the version of QuickTime 7.2.1 that ships with Mac OS X v10.5 includes 15 new QuickTime Kit Objective-C capture classes that allow you to incorporate pro-grade, frame-accurate capture of media in your application. Refer to the <em><a href="../../../Reference/QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QTKit Framework Reference</a></em> for a complete description of these new capture classes. To learn more about the QuickTime Kit capture architecture and how you can build a simple yet powerful capture application, refer to the <em><a href="../../QTKitCaptureProgrammingGuide/index.html#//apple_ref/doc/uid/TP40004574" target="_top">QTKit Capture Programming Guide</a></em>. </p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_10" title="Frame-Accurate Capture and Audio/Video Synchronization"></a><h3>Frame-Accurate Capture and Audio/Video Synchronization</h3><p>The new capture classes and methods available in the QuickTime Kit provide frame-accurate audio/video synchronization, and frame-accurate capture, meaning you can specify precisely––with timecodes––when you want capturing to occur. You also have access to transport controls of your camcorder, so you can fast forward and rewind the tape.</p><p>Note that this is implemented as a brand new capture engine––<em>not</em> simply a wrapper around the Sequence Grabber API.</p><p>Using these classes and methods, you can capture media from one or more external sources, including cameras, microphones, and other external media devices, such as capture cards and tapedecks. </p><p>After you’ve captured this media, you can record it to one or more output destinations, including but not necessarily limited to the following:</p><ul class="spaceabove"><li class="li"><p>A QuickTime movie (<code>.mov</code>) file</p></li><li class="li"><p>A Cocoa view that previews video media captured from the input sources</p></li></ul><p>The devices supported in Mac OS X v10.5 include:</p><ul class="spaceabove"><li class="li"><p>UDC over USB, including Apple’s built-in iSight camera</p></li><li class="li"><p>IIDC over FireWire, includes external iSight</p></li><li class="li"><p>DV cameras</p></li><li class="li"><p>HDV and Pro DV devices (with the appropriate codecs included with Final Cut Pro). Also, the AVC DAL plug-in, which handles both HDV and DV cameras</p></li><li class="li"><p>Core Audio HAL devices</p></li><li class="li"><p>Other devices that have VDIGs through a VDIG shim</p></li></ul><div class="importantbox"><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_37" title="Important:"></a><p><strong>Important:</strong>&nbsp;With the introduction of the new, robust QTKit capture API, QuickTime developers are encouraged to move their development efforts away from usage of the component-based Sequence Grabber API. </p><p></p></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_11" title="How QTKit Capture Works"></a><h3>How QTKit Capture Works</h3><p>All QTKit capture applications make use of three basic types of objects: capture inputs, capture outputs, and a capture session. <strong>Capture inputs</strong>, which are subclasses of <code>QTCaptureInput</code>, provide the necessary interfaces to different sources of captured media. </p><p>A capture device input, which is a <code>QTCaptureDeviceInput</code> object––a subclass of <code>QTCaptureInput</code>––provides an interface to capturing from various audio/video hardware, such as cameras and microphones. <strong>Capture outputs</strong>, which are subclasses of <code>QTCaptureOutput</code>, provide the necessary interfaces to various destinations for media, such as QuickTime movie files, or video and audio previews.</p><p>A <strong>capture session</strong>, which is a <code>QTCaptureSession</code> object, manages how media that is captured from connected input sources is distributed to connected output destinations. Each input and output has one or more connection, which represents a media stream of a certain QuickTime media type, such as video or audio media. A capture session will attempt to connect all input connections to each of its outputs. </p><p>As shown in <span class="content_text">Figure 1-3</span>, a capture session works by connecting inputs to outputs in order to record and preview video from a camera. </p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW2" title="Figure 1-3Connecting inputs to outputs in a capture session"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>Connecting inputs to outputs in a capture session</p><img src = "../Art/qt_capture_chann.jpg" alt = "Connecting inputs to outputs in a capture session" ></div><br/><p>A capture session works by distributing the video from its single video input connection to a connection owned by each output. In addition to distributing separate media streams to each output, the capture session is also responsible for mixing the audio from multiple inputs down to a single stream. </p><p><span class="content_text">Figure 1-4</span> shows how the capture session handles multiple audio inputs.</p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW3" title="Figure 1-4Handling multiple audio inputs in a capture session"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>Handling multiple audio inputs in a capture session</p><img src = "../Art/qt_capture_chann2.jpg" alt = "Handling multiple audio inputs in a capture session" ></div><br/><p>As illustrated in <span class="content_text">Figure 1-4</span>, a capture session sends all of its input video to each output that accepts video and all of its input audio to each output that accepts audio. However, before sending the separate audio stream to its outputs, it mixes them down to one stream that can be sent to a single capture connection.</p><p>A capture session is also responsible for ensuring that all media are synchronized to a single time base in order to guarantee that all output video and audio are synchronized.</p><p>The connections belonging to each input and output are <code>QTCaptureConnection</code> objects. These describe the media type and format of each stream taken from an input or sent to an output. By referencing a specific connection, your application can have finer-grained control over which media enters and leaves a session. Thus, you can enable and disable specific connections, and control specific attributes of the media entering (for example, the volumes of specific audio channels).</p><p>For more information, refer to the <em><a href="../../QTKitCaptureProgrammingGuide/index.html#//apple_ref/doc/uid/TP40004574" target="_top">QTKit Capture Programming Guide</a></em>. </p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_12" title="Using the QTKit Capture API"></a><h3>Using the QTKit Capture API</h3><p>The QTKit capture API is comprised of fifteen new classes and more than several hundred new methods, notifications, and attributes. To better understand how you can take advantage of this API in your Cocoa or QuickTime application, you may want to read this section describing the various groupings of the API. The complete description of all these classes and their associated methods is available in the <em><a href="../../../Reference/QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QTKit Framework Reference</a></em>. </p><p>There are four base classes, six classes devoted to input and output, another three utility classes, one class that deals with device input, and another with the user interface.</p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_13" title="Base QTKit Capture Classes"></a><h3>Base QTKit Capture Classes</h3><p>There are four classes in this group that can best be described as <strong>base classes</strong>, as described in <span class="content_text">Table 1-1</span>. Understanding how these work is essential to using the QTKit capture API. </p><p>The <code>QTCaptureSession</code> class provides an interface for connecting input sources. The method used most commonly in this class is <code>startRunning</code>, which tells the receiver to start capturing data from its inputs and then to send that data to its outputs. Notably, if you’re using this method, when data does not need to be sent to file outputs, previews, or other outputs, your capture session should not be running, so that the overhead from capturing does not affect the performance of your application.</p><p>The <code>QTCaptureInput</code> and <code>QTCaptureOutput</code> classes, which are both abstract classes, provide interfaces for connecting inputs and outputs. An input source can have multiple connections, which is common for many cameras which have both audio and video output streams. Using <code>QTCaptureOutput</code> objects, you don’t need to have a fixed number of connections, but you do need a destination for your capture session and all of its input data. </p><a name="//apple_ref/doc/uid/TP40005496-CH3-SW12" title="Table 1-1Base QTKit capture classes with tasks and commonly used methods"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>Base QTKit capture classes with tasks and commonly used methods</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Group</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Tasks</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Most commonly used methods</p></th></tr><tr><td  scope="row"><p><code>QTCaptureSession</code></p></td><td ><p>Base</p></td><td ><p>Primary interface for capturing media streams; manages connections between inputs and outputs; also manages when a capture is running.</p></td><td ><p><code>startRunning</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureInput</code></p></td><td ><p>Base</p></td><td ><p>Provides input source connections for a <code>QTCaptureSession</code>. Use subclasses of this class for inputs of a session.</p></td><td ><p><code>connections</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureOutput</code></p></td><td ><p>Base</p></td><td ><p>Provides an interface for connecting capture output destinations, such as QuickTime files and video previews, to a <code>QTCaptureSession</code>.</p></td><td ><p><code>connections</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureConnection</code></p></td><td ><p>Base</p></td><td ><p>Represents a connection over which a single stream of media data is sent from a <code>QTCaptureInput</code> to a <code>QTCaptureSession</code> and from a <code>QTCaptureSession</code> to a <code>QTCaptureOutput</code>. </p></td><td ><p><code>formatDescription</code>, <code>mediaType</code>, <code>setEnabled:</code>, <code>isEnabled</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_14" title="Input and Output QTKit Capture Classes"></a><h3>Input and Output QTKit Capture Classes</h3><p>There are five <strong>output classes</strong> and only one <strong>input class</strong> belonging to this group, shown in <span class="content_text">Table 1-2</span>. </p><p>You can use the methods available in the <code>QTCaptureDeviceInput</code> class to handle input sources for various media devices, such as cameras and microphones. The five output classes provide output destinations for <code>QTCaptureSession</code> objects that can be used to write captured media to QuickTime movies, for example, or to preview video or audio that is being captured. <code>QTCaptureFileOutput</code>, an abstract superclass, provides an output destination for a capture sesson to write captured media simply to files. </p><a name="//apple_ref/doc/uid/TP40005496-CH3-SW11" title="Table 1-2Input and output QTKit capture classes with tasks and commonly used methods"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong>Input and output QTKit capture classes with tasks and commonly used methods</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Group</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Tasks</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Most commonly used methods</p></th></tr><tr><td  scope="row"><p><code>QTCaptureAudioPreviewOutput</code></p></td><td ><p>Input/Output</p></td><td ><p>Represents an output destination for a<code>QTCaptureSession</code> that can be used to preview the audio being captured.</p></td><td ><p><code>volume</code>, <code>setVolume:</code>, <code>setOutputDeviceUniqueID:</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureDecompressedVideoOutput</code></p></td><td ><p>Input/Output</p></td><td ><p>Represents an output destination for a <code>QTCaptureSession</code> object that can be used to process decompressed frames from the video being captured.</p></td><td ><p><code>setDelegate:</code>, <code>captureOutput:didOutputVideoFrame:withSampleBuffer:fromConnection:</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureDeviceInput</code></p></td><td ><p>Input/Output</p></td><td ><p>Represents the input source for media devices, such as cameras and microphones</p></td><td ><p><code>device</code>, <code>initWithDevice:</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureFileOutput</code></p></td><td ><p>Input/Output</p></td><td ><p>Writes captured media to files and defines the interface for outputs that record media samples to files. </p></td><td ><p><code>recordToOutputFileURL:</code>, <code>setDelegate:</code>, <code>captureOutput:didFinishRecordingToOutputFileAtURL:forConnections:dueToError:</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureMovieFileOutput</code></p></td><td ><p>Input/Output</p></td><td ><p> Represents an output destination for a <code>QTCaptureSession</code> that writes captured media to QuickTime movie files. </p></td><td ><p><code>recordToOutputFileURL:</code>, <code>setDelegate:</code>,<code>captureOutput:didFinishRecordingToOutputFileAtURL:forConnections:dueToError:</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureVideoPreviewOutput</code></p></td><td ><p>Input/Output</p></td><td ><p>Represents an output destination for a<code>QTCaptureSession</code> that can be used to preview the video being captured.</p></td><td ><p><code>visualContextForConnection:</code>, <code>setDelegate:</code>, <code>captureOutput:didOutputVideoFrame:withSampleBuffer:fromConnection:</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_15" title="Utility QTKit Capture Classes"></a><h3>Utility QTKit Capture Classes</h3><p>There are three classes belonging to this group: <code>QTCompressionOptions</code>, <code>QTFormatDescription</code>, and <code>QTSampleBuffer</code>, shown in <span class="content_text">Table 1-3</span>. These are best characterized as <strong>utility classes</strong>, in that they perform tasks related to representing, for example, the compressions for particular media, or describing the formats of various media samples.</p><p>You can use <code>QTCompressionOptions</code> to describe compression options for all kinds of different media, using the <code>compressionOptionsIdentifiersForMediaType:</code> and <code>mediaType</code> methods. Compression options are created from presets keyed by a named identifier. These preset identifiers are listed in the <em><a href="../../../Reference/QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QTKit Framework Reference</a></em> in the chapter describing this class.</p><p>Using <code>QTSampleBuffer</code> objects, you can get information about sample buffer data that you may need to output or process the media samples in the buffer.</p><a name="//apple_ref/doc/uid/TP40005496-CH3-SW10" title="Table 1-3Utility QTKit capture classes with tasks and commonly used methods"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-3&nbsp;&nbsp;</strong>Utility QTKit capture classes with tasks and commonly used methods</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Group</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Tasks</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Most commonly used methods</p></th></tr><tr><td  scope="row"><p><code>QTCompressionOptions</code></p></td><td ><p>Utility</p></td><td ><p>Represents a set of compression options for a particular type of media. <code>QTCompressionOptions</code> objects are used to describe compression options for different kinds of media.</p></td><td ><p><code>compressionOptionsIdentifiersForMediaType:</code>, <code>mediaType</code></p></td></tr><tr><td  scope="row"><p><code>QTFormatDescription</code></p></td><td ><p>Utility</p></td><td ><p>Describes the media format of media samples and of media sources, such as devices and capture connections. </p></td><td ><p><code>localizedFormatSummary</code>.The constant, <code>QTFormatDescriptionVideoCleanApertureDisplaySizeAttribute</code></p></td></tr><tr><td  scope="row"><p><code>QTSampleBuffer</code></p></td><td ><p>Utility</p></td><td ><p>Provides format information, timing information, and metadata on media sample buffers. </p></td><td ><p><code>formatDescription</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_16" title="Device Access and User Interface QTKit Capture Classes"></a><h3>Device Access and User Interface QTKit Capture Classes</h3><p>There are two classes in this particular group: <code>QTCaptureDevice</code> and <code>QTCaptureView</code>, as shown in <span class="content_text">Table 1-4</span>. </p><p>Each instance of <code>QTCaptureDevice</code> corresponds to a capture device that is connected or has been previously connected to the user’s computer during the lifetime of the application. Note that instances of this class cannot be created directly. Whenever a device is connected to the computer, a single unique instance is created automatically and can be accessed using the <code>deviceWithUniqueID:</code> class method. An array of all currently connected devices can also be obtained using the <code>inputDevices:</code> class method.</p><p>Devices can provide one or more stream of a given media type. Your application can search for devices that provide media of a specific type using the <code>inputDevicesWithMediaType:</code> and <code>defaultInputDeviceWithMediaType</code> class methods.</p><p>You can use the methods available in the <code>QTCaptureView</code> class, which is a subclass of <code>NSView</code>, to preview video that is being processed by an instance of <code>QTCaptureSession</code>. The class creates and maintains its own <code>QTCaptureVideoPreviewOutput</code> to gather the preview video you need from the capture session.</p><a name="//apple_ref/doc/uid/TP40005496-CH3-SW9" title="Table 1-4Device access and user interface QTKit capture classes with tasks and commonly used methods"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 1-4&nbsp;&nbsp;</strong>Device access and user interface QTKit capture classes with tasks and commonly used methods</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Class</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Group</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Tasks</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Most commonly used methods</p></th></tr><tr><td  scope="row"><p><code>QTCaptureDevice</code></p></td><td ><p>Device Access and UI</p></td><td ><p>Represents an available capture device.</p></td><td ><p><code>inputDevices</code>, <code>open:</code>, <code>isOpen</code>, <code>close</code>, <code>localizedDisplayName</code></p></td></tr><tr><td  scope="row"><p><code>QTCaptureView</code></p></td><td ><p>Device Access and UI</p></td><td ><p>Displays a video preview of a capture session. </p></td><td ><p><code>setCaptureSession:</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_17" title="Developing Applications with QTKit Capture"></a><h3>Developing Applications with QTKit Capture</h3><p>To take advantage of the new QuickTime Kit capture classes, you can do the following:</p><ul class="spaceabove"><li class="li"><p>Read the <em><a href="../../QTKitCaptureProgrammingGuide/index.html#//apple_ref/doc/uid/TP40004574" target="_top">QTKit Capture Programming Guide</a></em>. The guide discusses how you can build a functioning capture player application that controls the capture of QuickTime movies, adding simple start and stop buttons, and allowing you to output and display your captured files in QuickTime Player as QuickTime movies. For this project, you need an iSight camera, either built-in or plugged into your Macintosh. You also need to have Mac OS X v10.5 installed on your computer. To implement this capture player, you won’t have to write more than 20 or 30 lines of Objective-C code. </p><ul class="nested"><li class="nested li"><p>Using Xcode 3 as your integrated development environment (IDE), along with the new implementation of Interface Builder 3, you’ll see how easy it is to work with the QuickTime Kit framework. In this example, you use the new QTKit capture control provided in the library of controls available in Interface Builder 3. The QTKit capture control performs much of the work for you in implementing the design of the user interface for this application.</p></li></ul></li><li class="li"><p>Check out the QTKit capture sample code projects, StillMotion and MyRecorder. </p><ul class="nested"><li class="nested li"><p>The StillMotion sample, available for download at <span class="content_text"><a href="https://developer.apple.com/leopard/devcenter/docs/samplecode/StillMotion/index.html" target="_blank">StillMotion</a></span>, demonstrates how to use the QTKit capture decompressed video output API to build a simple application that creates stop motion animations. The application lets you capture individual frames taken from a video camera connected to the computer and assemble them into a QuickTime movie that can be saved to disk.</p></li><li class="nested li"><p>The MyRecorder code sample, available for download at <span class="content_text"><a href="https://developer.apple.com/leopard/devcenter/docs/samplecode/MYRecorder/index.html" target="_blank">MyRecorder</a></span>, is designed to support professional-level video and audio capture, and pro-grade recording of media. </p></li></ul><p>The <em><a href="../../QTKitCaptureProgrammingGuide/index.html#//apple_ref/doc/uid/TP40004574" target="_top">QTKit Capture Programming Guide</a></em> walks you through both code samples, taking a tutorial approach, so you can learn as you go, step-by-step through your project, using the tools available in Xcode 3 and Interface Builder 3. You get to construct and then extend the functionality of the capture player application, adding a minimum of Objective-C code. This is the ideal way to get up to speed with the new QTKit capture methods and classes.</p></li></ul><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_18" title="Updates to the QuickTime Kit API"></a><h2>Updates to the QuickTime Kit API</h2><p>QuickTime 7.2.1 includes new methods that deal with thread-safety and new classes that support core animation, as discussed in this section.</p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_19" title="Dealing with Thread-Safety Issues"></a><h3>Dealing with Thread-Safety Issues</h3><p>In the version of QuickTime 7.2.1 that ships with Mac OS X v10.5, new methods are provided that deal with thread-safety. These methods allow applications to manage <code>QTMovie</code> objects on current (non-main) threads. Specifically, five new methods belonging to the <code>QTMovie</code> class have been added. These include the following class and instance methods that deal with handling and managing thread-safety operations of movie objects: <code>enterQTKitOnThread</code>, <code>enterQTKitOnThreadDisablingThreadSafetyProtection</code>, <code>exitQTKitOnThread</code>, <code>attachToCurrentThread</code>, and <code>detachFromCurrentThread</code>. For more information about these new methods, refer to their descriptions in the <em><a href="../../../Reference/QTKitFramework/Classes/QTMovie_Class/index.html#//apple_ref/doc/uid/TP40003799" target="_top">QTMovie Class Reference</a></em>.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_38" title="Important:"></a><p><strong>Important:</strong>&nbsp;The new QTKit capture classes introduced in Mac OS X v10.5 generally have good thread-safety characteristics. In particular, these classes can be used from any thread, except for <code>QTCaptureView</code>, which inherits from <code>NSView</code>. Note, however, that although capture sessions and their inputs and outputs can be created, run, and monitored from any thread, any method calls that mutate these objects or access mutable information should be serialized, using locks or other synchronization mechanisms.</p><p></p></div><p>For more information on thread-safety in QuickTime, refer to <span class="content_text"><a href="http://developer.apple.com/technotes/tn/tn2125.html" target="_top">Technote TN2125</a></span>, which discusses in detail best programming practices to ensure thread-safety in your application.</p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_20" title="New Classes to Support Core Animation"></a><h3>New Classes to Support Core Animation</h3><p>Two new classes that provide support for Core Animation have been added in QuickTime 7.2.1. Both are subclasses of <code>CALayer</code>.  </p><ul class="spaceabove"><li class="li"><p><code>QTCaptureLayer</code>. Provides a layer that displays video frames currently being captured from a device attached to the computer, and is intended to provide support for drawing the contents of a capture session into a layer. Note that this class requires rendering using visual contexts.</p></li><li class="li"><p><code>QTMovieLayer</code>. Provides a layer into which the frames of a <code>QTMovie</code> can be drawn, and is intended to provide support for drawing the contents of a movie into a layer. Note that this class requires rendering using visual contexts. </p></li></ul><p>For detailed descriptions of these classes and their associated methods, refer to <em><a href="../../../Reference/QTMovieLayer/index.html#//apple_ref/doc/uid/TP40006416" target="_top">QTMovieLayer Class Reference</a></em> and <em><a href="../../../Reference/QTCaptureLayer/index.html#//apple_ref/doc/uid/TP40006415" target="_top">QTCaptureLayer Class Reference</a></em>. </p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_21" title="New QuickTime Control Objects in Interface Builder 3"></a><h2>New QuickTime Control Objects in Interface Builder 3</h2><p>The QuickTime Kit framework supports the new control object architecture available in Interface Builder 3. It offers two new QuickTime control objects (one for movies and one for capture). These two objects replace the QuickTime palettes used for these operations. </p><p>The QuickTime movie control object (<code>QTMovieView</code>), represented in Interface Builder 3 by the QuickTime logo (shown in <span class="content_text">Figure 1-5</span>), lets you drag and drop a QuickTime movie object into your Xcode project window.</p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW1" title="Figure 1-5The QuickTime movie view control object in Interface Builder 3"></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>The QuickTime movie view control object in Interface Builder 3</p><img src = "../Art/qtmovieview_lib_control.jpg" alt = "The QuickTime movie view control object in Interface Builder 3" ></div><br/><p>The QuickTime movie capture object (<code>QTCaptureView</code>), represented in Interface Builder 3 as a digital camera icon (shown in <span class="content_text">Figure 1-6</span>), lets you capture video and audio, and record that output to QuickTime movies.</p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW4" title="Figure 1-6The QuickTime capture view object in Interface Builder 3"></a><p><strong>Figure 1-6&nbsp;&nbsp;</strong>The QuickTime capture view object in Interface Builder 3</p><img src = "../Art/ib_lib_qtcap.jpg" alt = "The QuickTime capture view object in Interface Builder 3" ></div><br/><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_22" title="64-Bit QuickTime Kit Support in Mac OS X v10.5"></a><h2>64-Bit QuickTime Kit Support in Mac OS X v10.5</h2><p>The QuickTime Kit is the primary 64-bit interface into QuickTime. There is no 64-bit QuickTime support. </p><p>Support is provided for the entire existing set of QuickTime Kit (QTKit) classes, methods, and functions, with one major exception: all methods that take or return native QuickTime identifiers (in particular, <code>Movie</code>, <code>MovieController</code>, <code>Track</code>, and <code>Media</code>) are not be supported in 64-bit QuickTime Kit. Developers will be unable to call, for instance, <code>QTMovie</code><code>quickTimeMovie</code> in order to “dip down” into the native QuickTime APIs.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_39" title="Important:"></a><p><strong>Important:</strong>&nbsp;None of the QuickTime C APIs are directly usable. The only exception to this are the <code>HIMovieView</code> APIs, which allow 64-bit Carbon applications to play movies.</p><p></p></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_23" title="Methods Not Supported Under 64-Bit QuickTime Kit"></a><h3>Methods Not Supported Under 64-Bit QuickTime Kit</h3><p>The following is a complete list of the methods that will <em>not</em> be supported under 64-bit QuickTime Kit:</p><p>In the <code>QTMovie</code> class:</p><div class="codesample"><table><tr><td scope="row"><pre>+ (id)movieWithQuickTimeMovie:(Movie)movie disposeWhenDone:(BOOL)dispose error:(NSError **)errorPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>- (id)initWithQuickTimeMovie:(Movie)movie disposeWhenDone:(BOOL)dispose error:(NSError **)errorPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>- (Movie)quickTimeMovie;<span></span></pre></td></tr><tr><td scope="row"><pre>- (MovieController)quickTimeMovieController;<span></span></pre></td></tr></table></div><p>In the <code>QTTrack</code> class:</p><div class="codesample"><table><tr><td scope="row"><pre>+ (id)trackWithQuickTimeTrack:(Track)track error:(NSError **)errorPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>- (id)initWithQuickTimeTrack:(Track)track error:(NSError **)errorPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>- (Track)quickTimeTrack;<span></span></pre></td></tr></table></div><p>In the <code>QTMedia</code> class:</p><div class="codesample"><table><tr><td scope="row"><pre>+ (id)mediaWithQuickTimeMedia:(Media)media error:(NSError **)errorPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>- (id)initWithQuickTimeMedia:(Media)media error:(NSError **)errorPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>- (Media)quickTimeMedia;<span></span></pre></td></tr></table></div><p>Note that there may be limitations to the current implementation. Some of these methods are subject to change and cannot be explicitly documented at this time. For developers, the essential takeaway is: The QuickTime Kit code in your application, minus the methods listed above, should just work.</p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_24" title="Changes to QuickTime Player User Interface"></a><h2>Changes to QuickTime Player User Interface</h2><p>QuickTime Player now conforms to the new Aqua user interface available in Mac OS X v10.5. Some of these user interface changes include:</p><ul class="ul"><li class="li"><p>New control buttons that match those available in Mac OS X v10.5. </p></li><li class="li"><p>Full-screen capability that lets users view QuickTime Player content in various modes: fit to screen, panoramic, or fill screen by specifying preferences in the QuickTime Preferences panel, shown in <span class="content_text">Figure 1-7</span>. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40005496-CH3-SW17" title="Figure 1-7New full screen viewing modes as QuickTime preferences"></a><p><strong>Figure 1-7&nbsp;&nbsp;</strong>New full screen viewing modes as QuickTime preferences</p><img src = "../Art/full_screen_prefs.jpg" alt = "New full screen viewing modes as QuickTime preferences" ></div></li><li class="li"><p>A new zoom button that allows users to switch to the next optimal full screen viewing mode, as shown in <span class="content_text">Figure 1-8</span>. </p></li></ul><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW7" title="Figure 1-8New full-screen control with zoom button"></a><p><strong>Figure 1-8&nbsp;&nbsp;</strong>New full-screen control with zoom button</p><img src = "../Art/full_screen_zoombutton.jpg" alt = "New full-screen button with new viewing modes" ></div><br/><p>The Movie Info panel and the Movie Inspector windows have changed to include a HUD look and feel in Mac OS X v10.5. There are no functional changes implemented in QuickTime 7.2.1. The Movie Inspector and Movie Info panels function the same as in QuickTime 7.2.</p><p>The QuickTime Player A/V controls window also has a HUD look and feel, and can be displayed and manipulated in fullscreen mode. Again, there are no functional changes implemented in in QuickTime 7.2.1. The A/V Controls function the same as in QuickTime 7.2. </p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_25" title="New Share to Podcast Producer in QuickTime Player Pro"></a><h2>New Share to Podcast Producer in QuickTime Player Pro</h2><p>With QuickTime 7.2.1 and Mac OS X v10.5, users can now upload movies to servers running Podcast Producer, which are then available for download by clients using iTunes Podcast. The Share to Podcast Producer (shown in <span class="content_text">Figure 1-9</span>) is only available in QuickTime Player Pro. Podcast Producer allows users to automate the creation and delivery of podcasts.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_40" title="Important:"></a><p><strong>Important:</strong>&nbsp;Users need access to Podcast Producer running on Mac OS X Server v10.5, that is, a Podcast Producer server running on a remote server, and an account on that server to which they can submit jobs. The content is then stored on the server and available to other users via iTunes or other podcast clients.</p><p></p></div><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW18" title="Figure 1-9New share to podcast producer option in QuickTime Player Pro"></a><p><strong>Figure 1-9&nbsp;&nbsp;</strong>New share to podcast producer option in QuickTime Player Pro</p><img src = "../Art/pod_producer.jpg" alt = "New podcast producer option in QuickTime Player Pro" ></div><br/><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_26" title="New Audio Context Inserts API"></a><h2>New Audio Context Inserts API</h2><p>Mac OS X v10.5 and QuickTime 7.2.1 introduce audio context inserts for developers who want to add effects to audio during QuickTime playback. With the new inserts API, a client application can hook into the QuickTime audio processing chain and manipulate the audio data on the fly during real-time playback, as well as during movie audio extraction. One advantage of this new API is that you can attach inserts at both the movie and track level. </p><p>Prior to the introduction of this API, the QuickTime audio rendering chain had specific limitations. For example, there was no way to tap into it and no simple audio effects architecture that provided developers with the much-needed capability of adding effects to audio during playback. </p><p>Now with the introduction of this API, QuickTime effectively handles the playback and synchronization of audio effects. As a result, client applications need to deal only with the processing of effects.</p><p>The following diagrams illustrate the audio context data-flow processes. Note that inserts can be attached to the audio context during playback as well as extraction. The <strong>device context</strong> is the context that is rendered to during playback, and the <strong>extraction context</strong> is the context rendered to during extraction.</p><p><span class="content_text">Figure 1-10</span> shows two track audio mix and context extraction.</p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW13" title="Figure 1-10Two-track audio mix and context extraction"></a><p><strong>Figure 1-10&nbsp;&nbsp;</strong>Two-track audio mix and context extraction</p><img src = "../Art/audio_context_dataflow_1.jpg" alt = "Two-track audio mix and context extraction" ></div><br/><p><span class="content_text">Figure 1-11</span> shows how the process works when mixing audio at different sampling rates.</p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW14" title="Figure 1-11The mixing process and extraction"></a><p><strong>Figure 1-11&nbsp;&nbsp;</strong>The mixing process and extraction</p><img src = "../Art/audio_context_dataflow_2.jpg" alt = "The mixing process and extraction" ></div><br/><p><span class="content_text">Figure 1-12</span> shows how the process works with movie-level inserts.</p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW15" title="Figure 1-12The movie-level insert process and extraction"></a><p><strong>Figure 1-12&nbsp;&nbsp;</strong>The movie-level insert process and extraction</p><img src = "../Art/audio_context_dataflow_3.jpg" alt = "The movie-level insert process and extraction" ></div><br/><p><span class="content_text">Figure 1-13</span> shows how the process works with track-level inserts. </p><br/><div><a name="//apple_ref/doc/uid/TP40005496-CH3-SW16" title="Figure 1-13The track-level insert process"></a><p><strong>Figure 1-13&nbsp;&nbsp;</strong>The track-level insert process</p><img src = "../Art/audio_context_dataflow_4.jpg" alt = "The track-level insert process" ></div><br/><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_27" title="How to Register and Unregister Movie and Track Inserts"></a><h3>How to Register and Unregister Movie and Track Inserts</h3><p>To register for a movie audio context insert during playback, follow these steps:</p><ol class="ol"><li class="li"><p>Get the movie’s current audio context, using <code>GetMovieAudioContext</code>.</p></li><li class="li"><p>Register the application insert, using <code>QTAudioContextRegisterInsert</code>.</p></li></ol><p>To unregister a movie audio context Insert, you</p><ol class="ol"><li class="li"><p> Call <code>QTAudioContextRegisterInsert</code> with a <code>NULL</code> <code>QTAudioContextInsertRegistryInfoRef</code></p></li><li class="li"><p> If the registry <code>ptr</code> is non-null but the <code>processDataCallback</code> is null, this has the same effect.</p></li></ol><p> To register for a track audio context Insert during playback, you</p><ol class="ol"><li class="li"><p> Set the <code>kQTAudioPropertyID_RegisterAudioContextInsert</code> property on the track,
            providing the same registry info structure that is used for the <code>QTAudioContextRegisterInsert</code> call.
</p></li><li class="li"><p>To unregister a track audio context Insert, you set the <code>kQTAudioPropertyID_RegisterAudioContextInsert</code> property on the track, with a null  <code>processDataCallback</code> call.</p></li></ol><p>The code you need to set the property to register your insert is as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>//Begin an extraction session<span></span></pre></td></tr><tr><td scope="row"><pre>err = MovieAudioExtractionBegin(...);<span></span></pre></td></tr><tr><td scope="row"><pre>//Configure the session<span></span></pre></td></tr><tr><td scope="row"><pre>//Set property to register your insert<span></span></pre></td></tr><tr><td scope="row"><pre>err = MovieAudioExtractionSetProperty(<span></span></pre></td></tr><tr><td scope="row"><pre>        extractionSessionRef,<span></span></pre></td></tr><tr><td scope="row"><pre>        kQTPropertyClass_MovieAudioExtraction_Audio,<span></span></pre></td></tr><tr><td scope="row"><pre>        kQTMovieAudioExtractionMoviePropertyID_RegisterMovieInsert,<span></span></pre></td></tr><tr><td scope="row"><pre>        sizeof(QTAudioContextInsertRegistryInfo),<span></span></pre></td></tr><tr><td scope="row"><pre>        regInfo);<span></span></pre></td></tr><tr><td scope="row"><pre>//Pull for data<span></span></pre></td></tr><tr><td scope="row"><pre>while (...) {<span></span></pre></td></tr><tr><td scope="row"><pre>   err= MovieAudioExtractionFillBuffer(..., &amp;flags);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>//End the session<span></span></pre></td></tr><tr><td scope="row"><pre>err = MovieAudioExtractionEnd(...);<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_28" title="New Audio Context Insert Callback Routines"></a><h3>New Audio Context Insert Callback Routines</h3><p>For more detailed explanations of the audio context insert functions, refer to the discussion of each call in <code>System/Library/Frameworks/QuickTime.framework/Headers/Movies.h</code>.</p><p>The following callback routines are available in QuickTime 7.2.1:</p><ul class="spaceabove"><li class="li"><p><code>AudioContextInsertProcessDataCallback</code>. A client-supplied function to be called during playback to get data from the audio insert.</p><p>This routine is called by the QuickTime audio context for each buffer of audio data it renders. The client receives a source buffer list and a destination buffer list, and is responsible for supplying output buffers to the destination buffer list. This routine is generally called on the <code>IOProc</code> at high thread priority, and so should not perform memory allocation or release, acquire mutex resources, nor take very long to process.</p></li><li class="li"><p><code>AudioContextInsertResetCallback</code>. A client-supplied function to be called to initialize and reset for processing data.</p><p>This routine is called by the QuickTime audio context to initialize for rendering. The client is told the sample rate and the maximum number of frames it will be asked to process on any single <code>ProcessData</code> callback (for example, <code>inNumberFrames</code> will always be equal to or less than <code>inMaxFrames</code>). On return, the client reports its processing latency and tail times. This callback is invoked whenever the rendering chain is interrupted (for example, when playback jumps to a new point or changes direction). The client should call <code>AudioUnitReset</code> on any audio units in use, and should be prepared to respond to changes of sample rate or maxframes.</p></li><li class="li"><p><code>AudioContextInsertFinalizeCallback</code>. A client-supplied function to be called to release any resources in use by the insert.</p><p>This routine is called by the QuickTime audio context when the audio context is being disposed (that is, when the <code>MovieAudioContext</code> has been reset or the movie was disposed). Once this callback returns, no more calls for this registered insert will be made.</p></li><li class="li"><p><code>QTAudioContextInsertRegistryInfo</code>. Parameters for registering an audio context insert. Use this routine with <code>QTAudioContextRegisterInsert</code> and the movie audio extraction <code>kQTMovieAudioExtractionAudioPropertyID_RegisterMovieInsert</code> property.</p></li></ul><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_41" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;A few caveats to note: </p><p>You can’t add inserts to movies containing protected content.</p><p>Every movie can only have one movie-level insert and as many track level inserts as the number of tracks. But this shouldn't be seen as a limitation because the client can perform as much processing as it wants and then expose that processing as a single insert. </p><p>The insert must be prepared to handle the audio at the sample rate provided to it. This sample rate is communicated to the insert during the reset callback.</p><p></p><div class="clear"></div></div><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_29" title="Audio Context Insert Sample Code"></a><h3>Audio Context Insert Sample Code</h3><p>The QTAudioContextInsert sample code project is available for download at <span class="content_text"><a href="https://developer.apple.com/leopard/devcenter/docs/samplecode/QTAudioContextInsert/index.html" target="_blank">QTAudioContextInsert</a></span>. </p><p>The sample demonstrates how a client application of QuickTime can use the audio context Insert APIs to hook in a custom audio processing unit into the QuickTime audio processing chain. </p><p>The sample code seeks to establish good practices in using the new APIs. It illustrates steps involved in configuring and registering an insert with the movie or track whose audio data is to be tapped and/or processed. The code gives example implementations of the three callbacks––reset, process data, finalize––that need to be implemented by an insert’s processing logic. Finally, the sample code shows the steps involved in applying an insert to audio being extracted through the QuickTime movie audio extraction APIs.</p><p>The files in this sample code that are directly relevant to inserts are:</p><ul class="spaceabove"><li class="li"><p><code>ACInsertManager.mm</code>. The <code>attachDetachMovie{Track}LevelInsert</code> routines demonstrate registering and unregistering movie and track level inserts during playback.</p></li><li class="li"><p><code>ACInsertProcessor.mm</code>. Shows examples of the <code>ProcessData</code>, <code>Reset</code> and <code>Finalize</code> callbacks that need to be implemented by the client app.</p></li><li class="li"><p><code>QuickTimeAudioUtils.c</code>. The <code>prepareMovieForExtraction</code> routine illustrates how movie and track-level inserts can be registered during extraction.</p></li></ul><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_30" title="Improved Handling of HiDPI"></a><h2>Improved Handling of HiDPI</h2><p>QuickTime 7.2.1 and Mac OS X v10.5 now provide support for the QuickTime Kit and the QuickTime web browser plug-in to handle HiDPI settings more efficiently. This enhancement enables QuickTime to draw movies and handle user interactions with movies correctly––whatever resolution the user or the operating system platform selects.</p><p>The following enhancements are provided in QuickTime Kit-based applications and in the QuickTime plug-in:</p><ul class="ul"><li class="li"><p>Visual context-based movies draw and resize correctly in movie views.</p></li><li class="li"><p>GWorld-based movies draw and resize correctly in movie views.</p></li></ul><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_31" title="New Aperture Mode APIs"></a><h2>New Aperture Mode APIs</h2><p>The following are new QuickTime aperture mode APIs available in Mac OS X v10.5. These are declared in <code>/QuickTime.framework/Headers/Movies.h</code>.</p><ul class="ul"><li class="li"><p><code>GenerateMovieApertureModeDimensions</code>. Examines a movie and sets up track aperture mode dimensions. </p><p>Use this function to add information needed to support aperture modes to movies created with applications and/or versions of QuickTime that did not support aperture mode dimensions. If the image descriptions in video tracks lack tags describing clean aperture and pixel aspect ratio information, the media data may be scanned to see if the correct values can be divined and attached. Then the aperture mode dimensions are calculated and set for each track. Afterwards, the <code>kQTVisualPropertyID_HasApertureModeDimensions</code> property will be set to true for these tracks. Tracks that do not support aperture modes are not changed.</p></li><li class="li"><p><code>GenerateTrackApertureModeDimensions</code>. Examines a track and sets up aperture mode dimensions. </p><p>Use this function to add information needed to support aperture modes to tracks created with applications and/or versions of QuickTime that did not support aperture mode dimensions. If the image descriptions in video tracks lack tags describing clean aperture and pixel aspect ratio information, the media data may be scanned to see if the correct values can be divined and attached. Then the aperture mode dimensions are calculated and set. Afterwards, the <code>kQTVisualPropertyID_HasApertureModeDimensions</code> property will be set to true for these tracks. Tracks which do not support aperture modes are not changed.</p></li><li class="li"><p><code>RemoveMovieApertureModeDimensions</code>. Removes aperture mode dimension information from a movie. </p><p>Use this function to remove aperture mode dimension information from a movie's tracks. It does not attempt to modify sample descriptions, so it may not completely reverse the effect of <code>GenerateMovieApertureModeDimensions</code>. It sets the <code>kQTVisualPropertyID_HasApertureModeDimensions</code> property to <code>FALSE</code>.</p></li><li class="li"><p><code>RemoveTrackApertureModeDimensions</code>.  Removes aperture mode dimension information from a track. </p><p>Use this function to remove aperture mode dimension information from a track. It does not attempt to modify sample descriptions, so it may not completely reverse the effect of <code>GenerateTrackApertureModeDimensions</code>. It sets the <code>kQTVisualPropertyID_HasApertureModeDimensions</code> property to <code>FALSE</code>.</p></li></ul><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_32" title="New 64-Bit Timecode Media APIs"></a><h2>New 64-Bit Timecode Media APIs</h2><p>The following are new QuickTime 64-bit timecode media APIs available in Mac OS X v10.5. These are declared, with parameter descriptions, in <code>/QuickTime.framework/Headers/QuickTimeComponents.h</code>.</p><ul class="ul"><li class="li"><p><code>TCGetCurrentFrameAndTimeCodeDef</code>. Retrieves the frame number and time code format information for the current movie time.</p></li><li class="li"><p><code>TCGetFrameAndTimeCodeDefAtTime</code>. Retrieves the frame number and time code format information for a specific movie time.</p></li><li class="li"><p><code>TCTimeCodeTimeToString</code>. Converts a time value into a text string in the <code>(-) HH:MM:SS:FF</code> format.</p></li><li class="li"><p><code>TCTimeCodeCounterToString</code>. Converts a counter value into a text string.</p></li><li class="li"><p><code>TCTimeCodeTimeToFrameNumber</code>. Converts a time value into its corresponding frame number.</p></li><li class="li"><p><code>TCTimeCodeCounterToFrameNumber</code>. Converts a counter value into its corresponding frame number.</p></li><li class="li"><p><code>TCFrameNumberToTimeCodeTime</code>. Converts a frame number to its corresponding timecode time value.</p></li><li class="li"><p><code>TCFrameNumberToTimeCodeCounter</code>. Converts a frame number to its corresponding counter value.</p></li></ul><p>To learn how to work with the timecode media handler, see the sample code project <span class="content_text"><a href="http://developer.apple.com/samplecode/QTKitTimeCode/index.html" target="_top">QTKitTimeCode</a></span>.</p><p>The sample demonstrates the features of the timecode media handler and shows you how to add a timecode track, remove a timecode track, and toggle the visibility of a timecode track in a QuickTime movie file containing at least a single video track. The code sample is a completely new version of the original QTTimeCode sample updated for Mac OS X. </p><a name="//apple_ref/doc/uid/TP40005496-CH3-DontLinkElementID_33" title="Miscellaneous Changes and Enhancements"></a><h2>Miscellaneous Changes and Enhancements</h2><p>QuickTime 7.2.1 includes other miscellaneous changes and enhancements.</p><ul class="ul"><li class="li"><p>Known accessibility limitations in QuickTime Player support for VoiceOver are addressed.</p></li><li class="li"><p>Native rendering for Quartz compositions in QuickTime Player is provided.</p></li><li class="li"><p>Java applets are now required to be “signed” in order to access QuickTime for Java and take advantage of QTJava.</p></li></ul><p>Although the focus of this document is QuickTime 7.2.1, a number of changes and enhancements were implemented in the previous release of QuickTime 7.2. These included:</p><ul class="ul"><li class="li"><p>A new export/encode architecture implementation. Both single- and multi-pass performance are enhanced, with the addition of support for <strong>skip encoding</strong>, which avoids sending frames to the encoder that don’t need to be re-encoded. </p></li><li class="li"><p>Enhanced playback/decode. Performance and visual quality of the H.264 codec has been enhanced. Both single- and multi-pass H.264 encoding has been improved in quality and speed. Audio playback has also been improved for better audio/video synchronization.</p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../RevisionHistory.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-10-31<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/Conceptual/QT7-2_Update_Guide/NewFeaturesChangesEnhancements/NewFeaturesChangesEnhancements.html%3Fid%3DTP40005496-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/Conceptual/QT7-2_Update_Guide/NewFeaturesChangesEnhancements/NewFeaturesChangesEnhancements.html%3Fid%3DTP40005496-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/Conceptual/QT7-2_Update_Guide/NewFeaturesChangesEnhancements/NewFeaturesChangesEnhancements.html%3Fid%3DTP40005496-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
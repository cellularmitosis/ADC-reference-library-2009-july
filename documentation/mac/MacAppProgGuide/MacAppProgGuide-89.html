<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Overview (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING89></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-88.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-90.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <A HREF="MacAppProgGuide-78.html"><B>Part 2 - Working With MacApp</B></A><BR><DD><A HREF="MacAppProgGuide-88.html"><B>Chapter 13 - Working With Events and Commands</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING89-0></A>
<H1>Overview</H1>
 MacApp provides a sophisticated mechanism for receiving events and dispatching them to objects in your application. MacApp also supplies a mechanism for creating command objects to respond to events by performing an operation that can be done, undone, and redone. MacApp classes used in handling events and commands are shown in <A HREF=MacAppProgGuide-41.html#MARKER-9-26>Figure 5-1 on page 99</A>.<P>
 Although there are many kinds of events, the ones your application most often works with are mouse events, key events, menu events (which MacApp translates into command choices), and Apple events.<P>
<A NAME=HEADING89-3></A>
<H2><A NAME=MARKER-2-20></A><A NAME=MARKER-2-21></A><A NAME=MARKER-9-22></A>Which Object Should Handle an Event or Menu Command</H2>
 MacApp dispatches events to event-handler objects--objects based on classes that descend from the <CODE>TEventHandler</CODE> class. MacApp applications use command-handler objects--objects based on the <CODE>TCommandHandler</CODE> class--to respond to events by posting a command. The <A NAME=MARKER-2-23></A><CODE>TCommandHandler</CODE> class is itself a descendant of <CODE>TEventHandler</CODE>. MacApp's <CODE>TApplication</CODE>, <CODE>TDocument</CODE>, <CODE>TWindow</CODE>, and <CODE>TView</CODE> classes all descend from <CODE>TCommandHandler</CODE>, so any class you define based on one of these classes can both handle events and post commands. In fact, applications rarely define a direct subclass of <CODE>TEventHandler</CODE>.<P>
 Classes that handle Apple events, either directly or in an attached script, mix in the <CODE>MScriptableObject</CODE> class. The <CODE>TDocument</CODE>, <CODE>TFile</CODE>, <CODE>TDesignator</CODE>, <CODE>TWindow</CODE>, and other MacApp classes already mix in <CODE>MScriptable</CODE>, and the <CODE>TApplication</CODE> class mixes in <CODE>MDefaultScriptableObject</CODE>. Any class you define that descends from one of these classes has access to the <CODE>MScriptable</CODE> methods and fields. You can also mix in <CODE>MScriptable</CODE> to any class you define that doesn't already use it.<P>
 In general, the objects in a MacApp application divide the responsibility for handling events as follows:<P>
<UL>
<LI><B>Application object.</B> The application object handles key-down events, although view objects that handle text or key selection also handle these events and behavior objects are used to intercept special keystrokes. The application object maps menu events into menu commands and does the same for Command-key equivalents that specify menu choices. Menu commands can be handled by any event-handler object or behavior object in its <CODE>DoMenuCommand</CODE> method. The application object handles a number of Apple events in its <CODE>DoScriptCommand</CODE> method, including certain Apple events from the Finder and the Edition Manager.
<LI><B>Behavior objects.</B> Behavior objects attached to event-handler objects are capable of handling key events, menu commands, mouse events, and Apple events. Behaviors are described in the next section.
<LI><B>Document objects.</B> A document object handles menu commands that affect the document; less commonly, a document handles key events. Documents handle File commands such as Open and Save, and Edition Manager commands such as Create Publisher and Hide/Show Borders. For document classes that descend from <CODE>TMailableDocument</CODE>, the <CODE>DoMenuCommand</CODE> method calls the <CODE>DoMailMenuCommand</CODE> method of the document's mixed-in <CODE>MMailable</CODE> class to give a letter a chance to handle certain menu commands from the Mail menu.
<LI><B>Global dispatcher object.</B> MacApp's global dispatcher object (accessed through <CODE>TOSADispatcher::fgDispatcher</CODE>) aids in dispatching Apple events; the events themselves are handled by the specified object. An object that handles Apple events is instantiated from a class that mixes in the <CODE>MScriptableObject</CODE> class and usually responds to Apple events in its <CODE>DoScriptCommand</CODE> method.
<LI><B>Letter objects.</B> An object based on the <CODE>TLetter</CODE> class (or its subclass, <CODE>TFileBasedLetter</CODE>) handles many Mail menu commands in its <CODE>DoMailMenuCommand</CODE> method.
<LI><B>View objects.</B> View objects handle mouse-down and mouse-up events. They also provide drag-and-drop support and create commands to track the cursor during user operations such as drawing. View objects handle menu commands that affect the state of the view; they sometimes handle key events as well.
<LI><B>Window objects.</B> Window objects handle update and activate events.<P>
</UL>
 When you add a new function to your application, it is usually clear whether one of these classes should handle the function or whether it should be handled by some other class you have defined.<P>
<A NAME=HEADING89-15></A>
<H2><A NAME=MARKER-2-24></A><A NAME=MARKER-9-25></A><A NAME=MARKER-9-26></A>Working With Behaviors</H2>
 MacApp supplies the <CODE>TBehavior</CODE> class and a number of subclasses to provide a mechanism for altering the behavior of event-handler objects in your application. MacApp's behavior mechanism is described in detail in <A HREF=MacAppProgGuide-41.html#MARKER-9-40>"Behaviors," beginning on page 101</A>.<P>
 Using a behavior object, you can modify an event-handling object without having to change its class definition or define a new subclass. Instead, you define a behavior class, override one or more event-handling methods, instantiate a behavior object, and attach it to the event-handler object whose behavior you wish to modify. In addition to offering great flexibility, the behavior classes you define don't carry around all the fields and methods of an event-handling class, so they tend to be simpler, smaller, and more efficient.<P>
 Behaviors can be specified through resources or they can be created and attached procedurally, allowing you to modify event-handler objects "on the fly." For code samples that demonstrate the use of behavior objects, see <A HREF=MacAppProgGuide-90.html#MARKER-9-38>"Recipe--Using a Behavior Object to Implement Alphabetic Type-Ahead," beginning on page 344</A>, and <A HREF=MacAppProgGuide-138.html#MARKER-9-27>"Recipe--Using Dependencies and Behaviors to Synchronize Control Views," beginning on page 588</A>.<P>
 The <CODE>TBehavior</CODE> class contains methods you can override to modify most event-handling behavior. These methods include <CODE>DoCommandKeyEvent</CODE>, <CODE>DoEvent</CODE>, <CODE>DoKeyEvent</CODE>, <CODE>DoKeyUp</CODE>, <CODE>DoMenuCommand</CODE>, <CODE>DoMouseCommand</CODE>, <CODE>DoMouseUp</CODE>, <CODE>DoScriptCommand</CODE>, <CODE>DoSetCursor</CODE>, <CODE>DoSetupMenus</CODE>, <CODE>Draw</CODE>, and <CODE>DoToolboxEvent</CODE>.<P>
 You can read more about these methods in the <I>MacApp Class and Method Reference</I>.<A NAME=MARKER-2-27></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-88.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-90.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

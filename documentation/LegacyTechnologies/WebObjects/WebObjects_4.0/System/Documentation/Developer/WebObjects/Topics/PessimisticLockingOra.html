<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="PessimisticLockingOra.css">
<TITLE> </TITLE></HEAD>
<BODY BGCOLOR="#ffffff">

<!--start of banner -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of banner -->
<!--start of path -->
<font face="Geneva,Helvetica,Arial" size="1">
<b>PATH<spacer type="horizontal" size="5">&nbsp;</b>
 <a href="../../../../../webobjects.html" target="_top">WebObjects 4.0 Documentation</a> <b>&gt;</b>
 <a href="TopicsTOC.html" target="_top">WebObjects Programming Topics</a>
</font>
<br><br>
<!--end of path -->


<H1 CLASS="TopictTitleTOC">
Pessimistic Locking in Oracle
</H1>
<DIV>
<H2 CLASS="Synopsis">
<A NAME="pgfId=606101">
 </A>
Synopsis<DIV>
<IMG SRC="PessimisticLockingOra-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=606102">
 </A>
Describes how pessimistic locking works in Oracle.</P>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606103">
 </A>
Discussion<DIV>
<IMG SRC="PessimisticLockingOra-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=606104">
 </A>
Oracle supports row-level pessimistic locking. By default EOF uses Oracle's <EM CLASS="Code">
SELECT FOR UPDATE</EM>
 without the <EM CLASS="Code">
NO WAIT</EM>
 clause. This can be changed by calling OracleSQLExpression's <EM CLASS="Code">
setUseNoWaitLocks</EM>
 class method.</P>
<P CLASS="Body">
<A NAME="pgfId=606105">
 </A>
The standard <EM CLASS="Code">
SELECT FOR UPDATE</EM>
 lock will cause all the <EM CLASS="Code">
UPDATE</EM>
 or <EM CLASS="Code">
SELECT FOR UPDATE</EM>
 statements from other database connections to block until a commit, rollback, or a deadlock exception occurs. A deadlock exception occurs when one user has row A locked and is trying to lock row B, while another user has row B locked and is trying to lock row A. In this case, Oracle disables one of the users locks while letting the other user lock both rows.</P>
<P CLASS="Body">
<A NAME="pgfId=606106">
 </A>
When using the <EM CLASS="Code">
SELECT FOR UPDATE NO WAIT</EM>
 locks, Oracle will cause an exception whenever a locked row is selected. This can be useful if you don't want to block a user for an indefinite amount of time.</P>
<P CLASS="Body">
<A NAME="pgfId=606107">
 </A>
Also note that a <EM CLASS="Code">
SELECT</EM>
 statement without the <EM CLASS="Code">
FOR UPDATE</EM>
 clause will always work. This can be somewhat dangerous. For example, suppose user A fetches an object without locking it. User B fetches the object with locking and saves it. User A then modifies the object and again saves it, overwriting what user B has done. The only way this can be avoided is to use a consistent locking strategy.</P>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606108">
 </A>
See Also<DIV>
<IMG SRC="PessimisticLockingOra-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606109">
 </A>
&#183;	Pessimistic Locking</P>
<P CLASS="Bulleted">
<A NAME="pgfId=613240">
 </A>
&#183;	Choosing an Approach for Locking</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606111">
 </A>
Questions<DIV>
<IMG SRC="PessimisticLockingOra-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606112">
 </A>
&#183;		What is locking?</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606113">
 </A>
&#183;		How does pessimistic locking work with Oracle?</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606114">
 </A>
Keywords<DIV>
<IMG SRC="PessimisticLockingOra-1.gif">
</DIV>
</H2>
<UL>
<P CLASS="Bulleted">
<A NAME="pgfId=606115">
 </A>
&#183;	Pessimistic Locking</P>
<P CLASS="Bulleted">
<A NAME="pgfId=606116">
 </A>
&#183;	Oracle</P>
</UL>
</DIV>
<DIV>
<H2 CLASS="Heading1">
<A NAME="pgfId=606117">
 </A>
Revision History<DIV>
<IMG SRC="PessimisticLockingOra-1.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=606118">
 </A>
22 July, 1998. Paul Haddad. First Draft.</P>
<DIV>
<pre></pre></DIV>
<A NAME="pgfId=602450">
 </A>
</DIV>


<!--start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->

</body>
</HTML>

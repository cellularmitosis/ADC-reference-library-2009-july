<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime 6 (Legacy): What&amp;#8217;s New in QuickTime 6</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="What&amp;#8217;s New in QuickTime 6"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000937-CH1g" title="What&amp;#8217;s New in QuickTime 6"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../releasenotes/index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../../../../releasenotes/LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000872-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../releasenotes/LegacyTechnologies/idxQuickTime-date.html#//apple_ref/doc/uid/TP30000872-TP30000470-TP30000457" target="_top">QuickTime</a> &gt; <a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_1">QuickTime 6 (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_1" title="What&amp;#8217;s New in QuickTime 6"></a><h1><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF101" title="What&amp;#8217;s New in QuickTime 6 "></a>What&#8217;s
New in QuickTime 6 </h1><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_2" title="Important:"></a><p><strong>Important:</strong>&nbsp;The information in this document is obsolete and should not be used for new development.</p><p></p></div><p>Welcome to QuickTime 6.</p>
<p>This document provides a list of the new features, changes,
and enhanced capabilities that are available in QuickTime 6. If
you are a QuickTime API-level developer, content author, multimedia
producer or Webmaster who is currently working with QuickTime, you should
read this document.</p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF118">Using Gestalt to Get the QuickTime Version</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF119">Documentation and Other Resources</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF120">Bug Reporting</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF121">Installing QuickTime 6</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF122">Summary of Changes and Enhancements</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF127">Support for MPEG-4</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF137">Working with MPEG-4 Files</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF140">New Video Codec for MPEG-4</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF149">MPEG-4 Audio Support</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF152">QuickTime AAC Decoder</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF153">Native MPEG-4 Streaming</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF154">MPEG-4 and Web Developers</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF162">RTSP Instant-On Enhancement to Streaming</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF163">User Interface Changes</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF164">JPEG 2000 Support</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF165">Flash 5 Support</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF170">New APIs for Tasking QuickTime</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF171">The Idle Manager APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF173">What To Do Next</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF174">Three Useful Idle Manager Calls</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF175">General Purpose Idle Manager API</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF176">Data Handlers</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF178">Movie Importers</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF179">New Carbon Movie Control</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF185">Access to Underpinnings</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF186">Sprite API Changes</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF189">Sprite Hit-Testing Mode</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF201">New Sprite Operands</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF202">New Wired Actions and Operands for Chapter Lists</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF204">Getting the Name and the Index of a Chapter</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF205">New Wired Actions and Operands for Sprites and Sprite Tracks</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF206">Sprite Hit Testing Property, Actions, and Operands</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF207">Miscellaneous Wired Actions and Operands</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF210">QTVR Object Actions and Operands</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF211">Additional New Actions and Operands</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF212">VBR Sound Compression Support</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF239">New User Data APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF240">QuickTime for Java Enhancements</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF246">AppleScript Changes</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF253">New Sequence Grabber User Interface</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF254">New Sequence Grabber APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF255">Types</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF256">New Image Compression APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF257">New Image Decompression Manager APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF258">New Media Handler APIs For Keyboard Focus</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF260">Adding Keyboard Navigation and Editable Text Field Support</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF261">New QuickTime Restrictions APIs</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF262">New APIs For Controlling Memory Usage in Movies</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF263">Miscellaneous Changes and Enhancements</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF268">MIDI Files Now Imported In Place</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF269">Enabling High Quality on MPEG-4 Video Tracks</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF270">QuickTime XML Importers</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF275">New XML Exporter</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF280">MovieQTList Embed Tag Attribute</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF281">SMIL Meta Tag Support in QuickTime</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF282">JavaScript Support for ActiveX, Netscape 6 and Mozilla</a>
				
			<br/>
			
        
			
			
				<a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-TPXREF283">Playing Shoutcast or Icecast Streams in QuickTime</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000937-CH1g-143773" title="Using Gestalt to Get the QuickTime Version"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF118" title="Using Gestalt to Get the QuickTime Version"></a><h2>Using Gestalt to Get the QuickTime Version</h2><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_27"></a>
<p>As always, the standard way for Apple developers to determine
which version of QuickTime is installed is by calling the Macintosh
Toolbox API <code>Gestalt<a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_28"></a></code> function. (This Mac
OS function is also included in QuickTime for Windows.)</p>
<p><span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-167779">Listing 1-1</a></span> shows a code snippet that demonstrates how you can
check the version of QuickTime that is installed&#8211;&#8211;in this case,
QuickTime 6. Note that the number 0x06008000 will test for the GM
version of QuickTime 6 but will fail on pre-release versions of QuickTime. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-167779" title="Listing 1-1Determining which version of QuickTime is installed by calling the Gestalt function "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-BAJCEIGI" title="Listing 1-1Determining which version of QuickTime is installed by calling the Gestalt function "></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Determining
which version of QuickTime is installed by calling the Gestalt function </p>
<div class="codesample"><table><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    /* check the version of QuickTime installed */<span></span></pre></td></tr><tr><td scope="row"><pre>    long version;<span></span></pre></td></tr><tr><td scope="row"><pre>    OSErr result;<span></span></pre></td></tr><tr><td scope="row"><pre>    result = Gestalt(gestaltQuickTime,&amp;version);<span></span></pre></td></tr><tr><td scope="row"><pre>    if ((result == noErr) &amp;&amp; (version &gt;= 0x06008000))<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        /* we have version 6! */<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143780" title="Documentation and Other Resources"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF119" title="Documentation and Other Resources"></a><h2>Documentation
and Other Resources</h2>
<p>This document is intended to provide QuickTime developers
with detailed information designed to support their programming
and development efforts. It is designed to supplement the information
provided in the QuickTime API Reference and the suite of QuickTime
documentation which is available online, in both HTML and PDF formats,
for download at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/RM/newsframe.htm<span></span></pre></td></tr></table></div>
<p>For other QuickTime developer documentation, you should refer
to </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.apple.com/quicktime/developer/<span></span></pre></td></tr></table></div>
<p>For complete QuickTime API documentation, refer to </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/RM/frameset.htm<span></span></pre></td></tr></table></div>
<p>Updates to the <a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_29"></a>QuickTime
technical documentation website are provided on a regular basis;
developers can also subscribe to various mailing lists for the latest
news and information. </p>
<p>To sign up for any of Apple&#8217;s Developer Programs, refer
to</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/membership/index.html<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143786" title="Bug Reporting"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF120" title="Bug Reporting"></a><h2>Bug Reporting</h2>
<p>If you encounter any problems using QuickTime 6, please report
them, using the standard Apple bug reporting mechanism described
in the Release Notes accompanying the QuickTime 6 release. It is
very important to include a copy of the file when you report such bugs.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160791" title="Installing QuickTime 6"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF121" title="Installing QuickTime 6"></a><h2>Installing QuickTime
6</h2>
<p>QuickTime 6 is available for download for Mac OS 8 and 9,
Mac OS X, and Windows. The download site is:</p>
<div class="codesample"><table><tr><td scope="row"><pre>www.apple.com/quicktime/download/<span></span></pre></td></tr></table></div>
<p>This is the first QuickTime release that has included an installer
for Mac OS X. Users of Mac OS X version 10.1.5 can install QuickTime
6 using the installer on the QuickTime download page.</p>
<p>Note that the QuickTime 6 installer for OS X will not work
on the Jaguar release of Mac OS X, including pre-release versions
of Jaguar that contain an earlier version of QuickTime 6. The released
version of Mac OS X that corresponds to Jaguar already contains
a slightly newer version of QuickTime 6 than the one available for
download.</p>
<p>If you have difficulty performing an installation over the
Web because of a firewall, or if you need to perform multiple installations
on a campus or business, you can download stand-alone installers
by following the links on the download page.</p>
<p>QuickTime Pro users should note that QuickTime 6 requires
new registration numbers. The registration numbers for QuickTime
5 or earlier versions do not unlock the pro features of QuickTime
6. For the pro version of QuickTime 6, you need to purchase new registration
numbers from Apple. The price is currently $29.99 USD.</p>
<p>If you need to uninstall QuickTime, run the installer, select
the custom install, and choose Uninstall from the pop-up menu.</p>
<p>If you need to install an earlier version of QuickTime, installers
for QuickTime 5 and QuickTime 4 are available from QuickTime support:</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.info.apple.com/usen/quicktime/<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160787" title="Summary of Changes and Enhancements"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF122" title="Summary of Changes and Enhancements"></a><h2>Summary of Changes
and Enhancements</h2>
<p>QuickTime 6 is the first major iteration of QuickTime that
is designed to support the International Organization for Standardization
(ISO) specification for MPEG-4 video and audio. This is a significant
advance beyond earlier versions of QuickTime, in that it allows multimedia
producers, content authors and video artists the capability of distributing <code>.mp4</code> files&#8211;&#8211;in
native MPEG-4 video and audio format&#8211;&#8211;across the Internet, so
that those files can be decoded and played on other players that
conform to the ISO MPEG-4 standard. </p>
<p>In one scenario, QuickTime authors will be able to simply
install QuickTime 6 and move through their normal workflow, and
then, in addition to having the option of encoding a file using
the Sorenson 3 or H.263 codec, authors will be able to output the
content of that file as an <code>.mp4</code> file.
This content could then, potentially, be played on any ISO-compliant device
available to end users. </p>
<p>In addition to support for the MPEG-4 standard, this release
of QuickTime also includes a number of new features and enhancements,
discussed in this document. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143792" title="Enhancements"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF123" title="Enhancements"></a><h3>Enhancements</h3>
<ul class="spaceabove"><li class="li"><p>Support for ISO-compliant MPEG-4 video and audio,
both encode and decode. Developers, authors, and multimedia producers
can now create and play back MPEG-4 video content, as well as MPEG-4
audio encoded using Advanced Audio Coding (AAC). Discussed in the
section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160795">“Support for MPEG-4.”</a></span></p></li>
<li class="li"><p>QuickTime 6 also supports use of the MPEG-4 video and AAC
audio codecs in QuickTime movies. In many cases, you can choose
to create either a native <code>.mp4</code> file
or a QuickTime <code>.mov</code> file
using MPEG-4 compression. This allows you to mix MPEG-4 audio and
video with other QuickTime media, such as VR panoramas, sprites,
or Flash tracks. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160815">“MPEG-4 and Web Developers.”</a></span></p></li>
<li class="li"><p>A new group of MPEG-4 settings dialogs in QuickTime Player
that enable QuickTime Pro users who work with MP4 files to make
a number of adjustments in video and audio tracks, streaming and
compatibility. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160799">“Working with MPEG-4 Files.”</a></span> </p></li>
<li class="li"><p>A new video codec for MPEG-4 video compression. The new codec
is ISMA compliant and conforms to the Profile 0 standard of the
MPEG-4 specification, with an extremely low data rate of 64 Kbits/second.
The advantage that this new codec offers is interoperability with
other systems. Interoperability is the primary goal of the new codec.
Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160803">“New Video Codec for MPEG-4.”</a></span> </p></li>
<li class="li"><p>A new MPEG-4 audio codec that plays audio files of AAC and
handles ISMA profile levels 0 and 1. In the current release both
encode and decode are supported. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160807">“MPEG-4 Audio Support.”</a></span> </p></li>
<li class="li"><p>Support for native MPEG-4 streaming. Standard hinted MPEG-4
files (<code>.mp4</code>) can be served
directly, without converting to QuickTime Movie (<code>.mov</code>)
files. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160811">“Native MPEG-4 Streaming.”</a></span> </p></li>
<li class="li"><p>A new, RTSP Instant-On enhancement to QuickTime streaming
that provides near instantaneous start of streamed movies when the
available network bandwidth significantly exceeds the data rate
of the target media. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160819">“RTSP Instant-On Enhancement to Streaming.”</a></span> </p></li>
<li class="li"><p>Support for JPEG 2000, a high-quality, still-image compression
and coding standard that uses state of the art compression techniques
based on wavelet technology. Note that JPEG 2000 support is only
provided on Mac OS X in the current release of QuickTime 6. Discussed
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160827">“JPEG 2000 Support.”</a></span> </p></li>
<li class="li"><p>New and updated components related to Macromedia Flash 5 support
in QuickTime. The Flash media handler and the Flash movie importer
have been updated, and a new Flash Properties panel has been added
to the QuickTime Player info panels. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160831">“Flash 5 Support.”</a></span> </p></li>
<li class="li"><p>A new QuickTime tasking mechanism and new APIs to handle idling
of applications. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160835">“New APIs for Tasking QuickTime.”</a></span> </p></li>
<li class="li"><p>A new Carbon Movie Control mechanism for Mac OS X that makes
the process of using QuickTime within a Carbon Event-based application
easier and faster. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160843">“New Carbon Movie Control.”</a></span> </p></li>
<li class="li"><p>A new group of Sprite APIs, as well as a number of new wired
actions and operands. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160847">“Sprite API Changes.”</a></span> </p></li>
<li class="li"><p>Support for writing and using variable bitrate (VBR)-enabled
sound compressor components. Both the QuickTime Movie exporter component
available in the export dialog (also known as the <code>ConvertMovieToFile</code> API
dialog) and the Standard Sound compression dialog component have
been updated to use and recognize VBR compressor components. Discussed
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160855">“VBR Sound Compression Support.”</a></span> </p></li>
<li class="li"><p>A new API that provides tween components with an interrupt-safe
interface. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-194333">“New Tween Component API.”</a></span> </p></li>
<li class="li"><p>New, enhanced effects dialogs. Effects may choose to implement
custom controls to allow the user to more easily edit complex parameters
that are ill-served by simple sliders or type in boxes. Effects
may allow a custom control for either a single parameter, or for
a group of parameters. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-194884">“Changes to Effects Dialog.”</a></span> </p></li>
<li class="li"><p>A new improved None codec (also known as the Raw codec) that
replaces the previous None codec with a more complete implementation.
Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-197250">“None Codec Enhancements.”</a></span> </p></li>
<li class="li"><p>Support for Exif JPEGs and Exif TIFFs, including support for
thumbnails, which was previously only available in QuickTime 5 on
Mac OS X 10.1, and is now available for QuickTime on Mac OS 9 and
Windows. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-197739">“Additional Still Image Metadata Support in Mac OS 9 and Windows.”</a></span></p></li>
<li class="li"><p>New QuickTime data handler-aware APIs that make using Apple
and custom data handlers easier for third-party developers. Discussed
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-205221">“Improved Movie Toolbox Support for Data Handlers.”</a></span></p></li>
<li class="li"><p>New UserData APIs that can be useful in copying information
from one UserData container to another <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-214699">(page 152)</a></span>. </p></li>
<li class="li"><p>Support for a number of new features and enhancements in QuickTime
for Java, including support for JDK 1.4 (Windows only), and the
introduction of the <code>JQTCanvas</code> class,
a new lightweight version of the <code>QTCanvas</code> class
which supports scaling of Flash content. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-216176">“QuickTime for Java Enhancements.”</a></span> </p></li>
<li class="li"><p>A new, improved sequence grabber user interface which includes
new settings available on all platforms. A new group of Sequence
Grabber APIs are also included in QuickTime 6. Discussed in the
sections <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-217472">“New Sequence Grabber User Interface”</a></span> and <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-217659">“New Sequence Grabber APIs.”</a></span></p></li>
<li class="li"><p>New Image Compression APIs that allow compressors to supply
the User Interface for their options within the compression dialog <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-223947">(page 183)</a></span>, as
well as new Image Decompression Manager APIs <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-225402">(page 188)</a></span>. </p></li>
<li class="li"><p>New media handler calls that developers can use to write media
handlers that support keyboard focus. If you want to add interactive
capabilities to your application, you need to use these media handler
calls. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-229179">“New Media Handler APIs For Keyboard Focus.”</a></span> </p></li>
<li class="li"><p>New APIs that provide a mechanism for preflighting operations
on QuickTime content that may be restricted. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-231312">“New QuickTime Restrictions APIs.”</a></span></p></li>
<li class="li"><p>New APIs for better controlling memory usage in movies in
Mac OS X <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-232354">(page 203)</a></span>.</p></li>
<li class="li"><p>Miscellaneous enhancements to QuickTime VR, and an additional
movie errors API <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-232753">(page 205)</a></span>. </p></li>
<li class="li"><p>A new XML exporter&#8211;&#8211;Export to QuickTime Media Link&#8211;&#8211;which
creates a small XML file that contains the URL of a movie, as well
as other user settings. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-234190">“New XML Exporter.”</a></span> </p></li>
<li class="li"><p>JavaScript support for ActiveX controls, Netscape 6 and browsers
based on Mozilla. This means you can now use JavaScript to control
QuickTime when Web pages are viewed using Internet Explorer for
Windows, or any other browser that supports the COM interface to
ActiveX controls. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-235107">“JavaScript Support for ActiveX, Netscape 6 and Mozilla.”</a></span> </p></li>
<li class="li"><p>Support for DVCPro PAL (DV format 4:1:1) on Mac OS X (10.1.2). </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143798" title="Changes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF124" title="Changes"></a><h3>Changes</h3>
<ul class="spaceabove"><li class="li"><p>Changes to the QuickTime Player user interface.
Notably, the Hot Picks movie and the Channel pane have a new layout,
with channel categories on the left and a movie on the right. Discussed
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160823">“User Interface Changes.”</a></span> </p></li>
<li class="li"><p>Changes to AppleScript and AppleScript terminology that are
new in QuickTime 6. Most notably, QuickTime Player is now a recordable
application. There are also a number of new commands, classes, and
properties, and well as modifications to existing terminology elements.
Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-216740">“AppleScript Changes.”</a></span> </p></li>
<li class="li"><p>Changes to the QuickTime menu in the Windows system tray,
which includes a number of new menu items. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-232825">“New QuickTime Menu in Windows.”</a></span> </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143804" title="Updates"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF125" title="Updates"></a><h3>Updates</h3>
<ul class="spaceabove"><li class="li"><p>New documentation on how to deal with the ever-increasing
number of effect components. This section documents atoms that can
be used for tagging effects into useful categories. Two groupings
for effects are defined here: Major Class and Minor Class. Discussed
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-196855">“QuickTime Effects Classes.”</a></span> </p></li>
<li class="li"><p>Some effects with complex parameters would like to provide
the user with groups of useful parameter values that can be easily
selected. This section documents an optional mechanism that can
be used by effects to define these &#8220;presets.&#8221; Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-197087">“QuickTime Effects Presets.”</a></span> </p></li>
<li class="li"><p>New and updated documentation on QuickTime XML importers.
These importers, introduced in QuickTime 5, create movies based
on the contents of certain kinds of XML files saved with the <code>.mov</code> file
extension. XML files with the <code>.mov</code> file
extension are treated by networks and operating systems as QuickTime
movies. There are importers for three XML types currently built
into QuickTime: SMIL importer, QuickTime media link importer, and
component preflight importer. Discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-233274">“QuickTime XML Importers.”</a></span></p></li>
<li class="li"><p>QuickTime 6 allows you to play current Shoutcast or Icecast
streams that use MP3 compression. This section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-235365">“Playing Shoutcast or Icecast Streams in QuickTime”</a></span> discusses the various features
of Shoutcast and Icecast streams, as well as what you need to know
in order to deliver these streams in real-time over a network. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143810" title="For Web Developers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF126" title="For Web Developers"></a><h3>For Web Developers</h3>
<ul class="spaceabove"><li class="li"><p>Specific information about the different ways
that you can use QuickTime 6 and MPEG-4, if you are a developer
who creates websites, website authoring tools, or QuickTime movies
that are intended for distribution over a network or the Internet. Discussed
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160815">“MPEG-4 and Web Developers.”</a></span> </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160795" title="Support for MPEG-4"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF127" title="Support for MPEG-4"></a><h2>Support for MPEG-4</h2>
<p>QuickTime 6 supports ISO-compliant MPEG-4 video and audio,
both encode and decode. This means that you can create and play
back MPEG-4 video and audio content. In addition, you can play back
MPEG-4 audio encoded using Advanced Audio Coding (AAC).</p>
<p>Of notable importance is that an <code>.mp4</code> file
is not a QuickTime movie. It must be imported into QuickTime. You
can open <code>.mp4</code> files using
API functions that support importers, such as <code>NewMovieFromFile</code> or <code>NewMovieFromDataRef</code>,
or by calling an MPEG-4 importer directly. End users can open <code>.mp4</code> files
using QuickTime Player&#8217;s Open or Import commands, by drag-and-drop,
or using the QuickTime browser plug-in (see the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160815">“MPEG-4 and Web Developers”</a></span>).
Double-clicking an <code>.mp4</code> file
from the desktop may or may not open the file in QuickTime, as other
applications can register to handle this file type.</p>
<p>Using the Export to MPEG-4 option in the export dialog, you
can create an <code>.mp4</code> file containing
either video, audio, or both, as discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160799">“Working with MPEG-4 Files.”</a></span></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143816" title="Background"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF128" title="Background"></a><h3>Background</h3>
<p>In February 1998, the International Standards Organization
(ISO) formally adopted the QuickTime file format as the starting
point for the MPEG-4 file format, the latest in a series of standards
for transmitting video and audio information. MPEG-4 differs from
MPEG-1 and MPEG-2 by adopting a component-based architecture for
multimedia, an approach similar to QuickTime&#8217;s architecture. Other
existing standards have less flexibility and treat multimedia as
just an array of picture elements. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143822" title="MPEG-1 and QuickTime "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF129" title="MPEG-1 and QuickTime "></a><h3>MPEG-1 and QuickTime </h3>
<p>MPEG-1, often simply called MPEG, is fairly common on the
Web and CD-ROMs, typically with the <code>.mpg</code> file
extension. MPEG-1 supports one kind of video compression and a few types
of audio compression. MPEG-1 allows coding of moving pictures and
associated audio for digital storage media at up to about 1.5 Mbit/second.
The content of an MPEG file is one or more MPEG streams. Elementary
audio and video streams can be multiplexed into a combined stream.</p>
<p>MPEG-1 was designed to provide VHS-quality video at T1 data
rates (single speed, or 1x, CD-ROM). It is the basis for the video
CD standard, which is little used in the United States or Europe
but is popular in Asia. Most commercial DVD players can play video
CDs, however, and the rapid spread of CD-R burners and DVD players
is currently fueling renewed interest in this format.</p>
<p>QuickTime can open and play MPEG-1 video on both Windows and
Macintosh (requires QuickTime 5 or later for Windows). It can then
export the video to other formats using any of the QuickTime compressors.
Currently, QuickTime treats the entire MPEG-1 stream as a single
sample, so you cannot cut or copy part of an MPEG-1 video unless
you convert it to a different compression format first. </p>
<p>MPEG-1 can also contain audio. The audio can be compressed
in two different formats: layer 2 (often called MPEG-1 audio) and
layer 3 (known as MP3). QuickTime plays both layer 2 and layer 3
audio without difficulty, including streaming MP3 such as ShoutCast. QuickTime
can also play multiplexed layer 2 audio (audio and video streams
combined), but it cannot export or extract layer 2 audio from a
multiplexed MPEG-1 stream. </p>
<p>QuickTime Player does not export to MPEG-1 streams, nor does
it compress audio or video using MPEG-1 compression. MPEG-1 compression
can be added to QuickTime with the Heuris MPEG codec (www.heuris.com/)
or with the MPEG-1 encoder included with Roxio Toast (www.roxio.com/). </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143828" title="MPEG-4 and QuickTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF130" title="MPEG-4 and QuickTime"></a><h3>MPEG-4 and QuickTime</h3>
<p>The MPEG-4 standard was recently revised to MPEG-4 Version
2, which is the latest standardized version. (Note that amendments
to Version 2 have already been added, as the standard grows and
evolves.) In any case, the standard outlines file conventions and compression
formats not only for audio and video, but for text and multimedia integration.
Because the MPEG-4 file format is largely based on the QuickTime
file format, MPEG-4 files are potentially as diverse in content
as QuickTime movies. This is a rich and complex specification.</p>
<p>Software and hardware vendors will implement the MPEG-4 specification
in stages. The parts of the specification that are implemented by
a given MPEG-4 player are called a player profile.</p>
<p>A profile is, essentially, a grouping of technologies, defined
as &#8220;tools&#8221; in MPEG terminology. Profiles are a &#8220;normative&#8221;
part of the standard, in that an implementation must conform to
a profile in order to claim conformance to the standard itself.
Profiles are specified in such a way as to maximize interoperability. </p>
<p>A good example is the way in which this was applied to the
MPEG-1 Audio standard. There are three layers in MPEG-1 Audio. Layer
1 has the least complexity but the lowest compression performance,
while Layer 3 has the highest complexity but also the highest compression
performance. Profiles that include layer 3 also typically include
layers 1 and 2. In this case, interoperability is maximized because
a terminal implementing a profile which includes layer 3 can decode
layer 1, 2 and 3 bitstreams, while a layer 2 terminal can decode
only layer 1 and 2 bitstreams and a layer 1 decoder only a layer
1 bitstream.</p>
<p>No one currently implements the full MPEG-4 specification.
There are no widely distributed MPEG-4 video codecs. (There was
a codec available for Windows Media Player called MS MPEG-4, but
this was actually a proprietary Microsoft codec that was partly based
on a draft specification for MPEG-4. The early version released
by Microsoft was not compatible with the final standard, and has
since been renamed. Microsoft has also released a standard MPEG-4
codec, but it is not in an interoperable file format.)</p>
<p>QuickTime&#8217;s MPEG-4 video codec focuses on low-bandwidth
video for Internet delivery, with the goal of delivering near-television
quality over DSL and cable modems, and reasonable quality over dialup
modems.</p>
<p>QuickTime&#8217;s implementation of MPEG-4 is designed to be interoperable
with products from other standards-compliant vendors.</p>
<p>A diagram of the MPEG-4 system architecture is shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159322">Figure 1-1</a></span>. The
items in bold in specific boxes indicate the various parts of the
architecture that QuickTime currently supports. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159322" title="Figure 1-1MPEG-4 system architecture"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-BAJJFABH" title="Figure 1-1MPEG-4 system architecture"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>MPEG-4 system architecture</p>
<img src = "../Art/kir03.gif" alt = "" width="499" height="556"></div><br/>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143834" title="MPEG-4 File Format and QuickTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF131" title="MPEG-4 File Format and QuickTime"></a><h3>MPEG-4 File Format
and QuickTime</h3>
<p>The MPEG-4 File Format (MP4), which is derived from the QuickTime
File Format, is a format that is designed to store MPEG-4 data in
a file. This process is outlined by Rob Koenen, chair of the MPEG-4
Requirements Group, in his document MPEG-4 Overview, which provides
a brief overview of the MPEG-4 File Format, as follows:</p>
<p>&#8220;The MP4 file format is designed to contain the media information
of an MPEG-4 presentation in a flexible, extensible format which
facilitates interchange, management, editing, and presentation of
the media. This presentation may be &#8216;local&#8217; to the system containing
the presentation, or may be via a network or other stream delivery
mechanism. The file format is designed to be independent of any
particular delivery protocol while enabling efficient support for
delivery in general. The design is based on the QuickTime format
from Apple Computer Inc.&#8221; </p>
<p>The diagram shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159326">Figure 1-2</a></span> gives an example of a
simple interchange file. Note that BIFS, an acronym for Binary Format
for Scene, specifies the Scene, and OD (Object Descriptor) specifies
the Stream Management. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159326" title="Figure 1-2A simple interchange file"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-BAJGJHGA" title="Figure 1-2A simple interchange file"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>A simple interchange file</p>
<img src = "../Art/kir01.gif" alt = "" width="382" height="146"></div><br/>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143839" title="Inside the QuickTime File Format"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF132" title="Inside the QuickTime File Format"></a><h3>Inside the QuickTime
File Format</h3>
<p>The QuickTime file format is designed to accommodate the various
kinds of data that need to be stored in order to work with digital
media. Because the file format can be used to describe almost any
media structure, it is an ideal format for the exchange of digital
media between applications, regardless of the platform on which
the application may be running.</p>
<p><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_30"></a>The
basic data unit in a QuickTime file is the atom. Each atom contains
size and type information along with its data. The size field indicates
the number of bytes in the atom, including the size and type fields.
The type field specifies the type of data stored in the atom and,
by implication, the format of that data. </p>
<p>Atom types are specified by a 32-bit integer, typically a
four-character code. Apple Computer reserves all four-character
codes consisting entirely of lowercase letters. Unless otherwise
stated, all data in a QuickTime movie is stored in big-endian (network)
byte ordering. All version fields must be set to 0, unless otherwise
stated. Atoms are hierarchical in nature. That is, one atom can
contain one or more other atoms of varying types. </p>
<p>For more detailed information, refer to the volume Inside
QuickTime: QuickTime File Format (351 pp, 2.3 MB), which is available
as a free download from Apple&#8217;s QuickTime API website in both
HTML and PDF formats at</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/RM/frameset.htm<span></span></pre></td></tr></table></div>
<p>The book begins with an introduction to QuickTime atoms, then
presents the structure of the QuickTime file format in detail. This
is followed by a series of code examples for manipulating a QuickTime
file using the QuickTime API. A series of appendixes describe some
common file formats that can be contained within a QuickTime file
as data. The book is intended primarily for developers who need
to work with QuickTime files outside the context of the QuickTime
environment.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143844" title="MPEG-4 Web Resources"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF133" title="MPEG-4 Web Resources"></a><h3>MPEG-4 Web Resources</h3>
<p>The home page of the Moving Picture Experts Group (MPEG),
a working group of ISO/IEC in charge of the development of standards
for coded representation of digital audio and video, can be found
at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://mpeg.telecomitalialab.com/<span></span></pre></td></tr></table></div>
<p>An in-depth presentation of MPEG-4 can be found at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.cselt.it/mpeg/standards/mpeg-4/mpeg-4.htm<span></span></pre></td></tr></table></div>
<p>Answers to specific MPEG-4 questions can be found at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.cselt.it/mpeg/faq.htm<span></span></pre></td></tr></table></div>
<p>MPEG-4 standards are in the 14496 series and the specifications
can be purchased from ISO at</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.iso.ch<span></span></pre></td></tr></table></div>
<p>The MPEG-4 implementation forum promotes MPEG-4 and is spearheading
licensing efforts at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.m4if.org<span></span></pre></td></tr></table></div>
<p>The Internet Streaming Media Alliance (ISMA) is promoting
a specification and integration of products around a subset of MPEG-4
over IP networks at</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.isma.tv<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143850" title="Acronyms and Terms for Understanding MPEG-4"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF134" title="Acronyms and Terms for Understanding MPEG-4"></a><h3>Acronyms and Terms
for Understanding MPEG-4</h3>
<p>A veritable alphabet soup of acronyms and terms has emerged
in the MPEG-4 specification, a sampling of which is shown here. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143856" title="Acronyms and Terms Specific to MPEG-4"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF135" title="Acronyms and Terms Specific to MPEG-4"></a><h4>Acronyms and Terms
Specific to MPEG-4</h4>
<p>BIFS                                              Binary Format
for Scene</p>
<p>CIF                                                Common
Intermediate Format (352 x 288)</p>
<p>ESD                                               Elementary
Stream Descriptor</p>
<p>IEC                                                International
Electrotechnical Commission</p>
<p>IOD                                                Initial
Object Descriptor</p>
<p>MP4                                               MPEG-4 File
Format</p>
<p>M4IF                                              MPEG-4 Industry
Forum</p>
<p>OD                                                 Object
Descriptor</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143862" title="Other Useful Terms"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF136" title="Other Useful Terms"></a><h4>Other Useful Terms</h4>
<p>AVP                                               Audio Visual
Profile (IETF RFC 1890)</p>
<p>cRTP                                              Compressed
Real-Time Protocol(IETF RFC 2508)</p>
<p>IETF                                               Internet
Engineering Task Force</p>
<p>IP                                                    Internet
Protocol</p>
<p>IPv4                                                Internet
Protocol Version 4</p>
<p>IPv6                                                Internet
Protocol Version 6</p>
<p>ISMA                                              Internet
Streaming Media Alliance</p>
<p>ISO                                                 International
Organization for Standardization</p>
<p>QCIF                                              Quarter
Common Intermediate Format (176 x 			                          
                            144)</p>
<p>QoS                                                Quality
of Service</p>
<p>RFC                                                Request
for Comment</p>
<p>RTP                                                Real-Time
Protocol (IETF RFC 1889)</p>
<p>RTSP                                              Real-Time
Streaming Protocol (IETF RFC 2326)</p>
<p>SDP                                                Session
Description Protocol (IETF RFC 2327)</p>
<p>TCP                                                Transmission
Control Protocol (IETF RFC 793)</p>
<p>UDP                                               User Datagram
Protocol (IETF RFC 768)</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160799" title="Working with MPEG-4 Files"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF137" title="Working with MPEG-4 Files"></a><h2>Working with
MPEG-4 Files</h2>
<p>QuickTime 6 provides transparent access to MPEG-4 files. You
can open <code>.mp4</code> files using API
functions that support importers, such as <code>NewMovieFromFile</code> or <code>NewMovieFromDataRef</code>.
End users can open <code>.mp4</code> files
using QuickTime Player's Open or Import commands, or by drag-and-drop.
The process is similar to working with an <code>.avi</code> file
or other playable non-movie file. Double-clicking an <code>.mp4</code> file
from the desktop may or may not open the file in QuickTime, as other
applications can register to handle this file type.</p>
<p>Currently, in order to save an <code>.mp4</code> file,
you use the new QuickTime MPEG-4 movie exporter. The exporter offers
basically two ways of working:</p>
<ul class="ul"><li class="li"><p>Encoding to MPEG-4 video or audio for each track.</p></li>
<li class="li"><p>If the data is already MPEG-4 compatible, then it will perform
a pass-thru option for those tracks. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143868" title="How The Process Works "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF138" title="How The Process Works "></a><h3>How The Process
Works </h3>
<p>Typically, when you open a movie, QuickTime finds the movie
atom in the file, processes it, and creates a movie object, i.e.,
instantiates it. When you use MP4, you have to invoke the importer.
What the importer does is scan the file, find the <code>'moov'</code> atom,
and then conform the <code>'moov'</code> atom&#8211;&#8211;which
is an MPEG-4-style movie atom&#8211;&#8211;into a <code>'moov'</code> atom
that is QuickTime-style. QuickTime then creates the movie object. </p>
<p>In the case of exporting, where the data is already in MPEG-4
format&#8211;&#8211;MPEG-4 video or audio&#8211;&#8211;the exporter has QuickTime
flatten the data to the file. This produces the movie atom, which
points to the file. The exporter once again conforms the movie atom,
which is QuickTime-style, into a movie atom which is MPEG-4-style.
The exporter then writes this to the file. This is pass-thru.</p>
<p>For an encoding or re-encoding export, the exporter compresses
and then writes the MPEG-4 data to a file, whose movie is subsequently
made to conform to MPEG-4 style. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143874" title="New Dialogs for Handling MP4 Files"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF139" title="New Dialogs for Handling MP4 Files"></a><h3>New Dialogs for
Handling MP4 Files</h3>
<p>QuickTime 6 introduces a new set of dialogs in QuickTime Player
(illustrated in this section with examples from Mac OS 9 and Mac
OS X) that enable end users to open MP4 files. </p>
<p>To work with MP4 files, end users or content authors need
to perform a series of import-export operations, using QuickTime
Pro. The steps are as follows:</p>
<ol class="ol"><li class="li"><p>Open a <code>.mov</code> file
in QuickTime Player. </p></li>
<li class="li"><p>In the File menu, click Export.</p></li>
<li class="li"><p>A dialog appears with a list of export options. Choose Movie
to MPEG-4.</p></li>
<li class="li"><p>Save the <code>.mov</code> to
a <code>.mp4</code> file. </p></li>
<li class="li"><p>The <code>.mp4</code> file can
now be played on any player that supports MPEG-4. </p></li></ol>
<p><span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159330">Figure 1-3</a></span> shows the dialog (in Mac OS 9) that appears when
you want to save a QuickTime movie, in this case &#8220;cool sunset&#8221;
to a <code>.mp4</code> file. From
the list of options in Export, you choose Movie to MPEG-4. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159330" title="Figure 1-3The dialog that appears when you want to save a QuickTime movie to an MPEG-4 file in Mac OS 9 by exporting"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF102" title="Figure 1-3The dialog that appears when you want to save a QuickTime movie to an MPEG-4 file in Mac OS 9 by exporting"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>The dialog that appears when you want
to save a QuickTime movie to an MPEG-4 file in Mac OS 9 by exporting</p>
<img src = "../Art/export_to_mp4.gif" alt = "" width="358" height="298"></div><br/>
<p>If you click the Options button in the dialog shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159330">Figure 1-3</a></span>, the
MPEG-4 Settings dialog appears, as shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159334">Figure 1-4</a></span>. In this dialog, you
can set the basic video track, the physical size of current movie,
and the audio track as necessary. If Basic is selected, the video
will make use of the basic settings for MPEG-4 and ensure the widest
possible range of playback on MPEG-4 compatible devices. </p>
<p>Note that Profile 0, in the text of the dialog, is the ISMA-specified
Profile 0, and not the MPEG-4 defined Profile 0. For more information
about ISMA and Profile 0, refer to the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-143880">“ISMA and Definitions of Profile 0.”</a></span> </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159334" title="Figure 1-4The MPEG-4 settings dialog in Mac OS X, with the General pane selected"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF103" title="Figure 1-4The MPEG-4 settings dialog in Mac OS X, with the General pane selected"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>The MPEG-4 settings dialog in Mac
OS X, with the General pane selected</p><img src = "../Art/mp4_general.gif" alt = "" width="588" height="522"></div><br/>
<p>Note that the lower portion of the dialog in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159334">Figure 1-4</a></span> contains
additional description and explanation about the choices that are
available to the user. Audio can be optimized for music&#8211;&#8211;in
this case, AAC. (Note AAC can handle a full range of music and other
audio.) </p>
<p>In the Video settings dialog in Mac OS X shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159338">Figure 1-5</a></span>, the
end user can adjust specific settings for video, such as the number
of kbits per second, or the frame rate&#8211;&#8211;for example, 15 frames
per second, if that is the rate desired. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159338" title="Figure 1-5The MPEG-4 settings dialog, with the Video pane selected"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF104" title="Figure 1-5The MPEG-4 settings dialog, with the Video pane selected"></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>The MPEG-4 settings dialog, with the
Video pane selected</p><img src = "../Art/mp4_video.gif" alt = "" width="588" height="522"></div><br/>
<p><span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159342">Figure 1-6</a></span> shows the settings available for audio in Mac OS
X&#8211;&#8211;for stereo or mono encoding. If the user selects music in
the basic panel, it automatically selects a high data rate and selects
stereo.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159342" title="Figure 1-6The MPEG-4 settings dialog in Mac OS X, with the Audio pane selected"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF105" title="Figure 1-6The MPEG-4 settings dialog in Mac OS X, with the Audio pane selected"></a><p><strong>Figure 1-6&nbsp;&nbsp;</strong>The MPEG-4 settings dialog in Mac
OS X, with the Audio pane selected</p><img src = "../Art/mp4_audio.gif" alt = "" width="589" height="522"></div><br/>
<p><span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159346">Figure 1-7</a></span> shows the settings dialog for streaming, which enables
the user to select the type of hinting required, as well as maximum
packet size and maximum packet duration. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159346" title="Figure 1-7The MPEG-4 settings dialog in Mac OS X, with the Streaming pane selected"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF106" title="Figure 1-7The MPEG-4 settings dialog in Mac OS X, with the Streaming pane selected"></a><p><strong>Figure 1-7&nbsp;&nbsp;</strong>The MPEG-4 settings dialog in Mac
OS X, with the Streaming pane selected</p><img src = "../Art/mp4_streaming.gif" alt = "" width="588" height="522"></div><br/>
<p><span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159350">Figure 1-8</a></span> shows the Compatibility settings dialog in Mac OS
X. By default, QuickTime produces a generic MPEG-4 stream. QuickTime
does not check for any specific layer compatibility features that
might be required by ISMA or other organizations. Nor does QuickTime
check if the overall data rate of the MPEG-4 you&#8217;re producing
is any particular data rate. </p>
<p>The user can select ISMA compliance, and also select the speed
at which you want to stream the file&#8211;&#8211;for example, at a medium
data rate. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159350" title="Figure 1-8The MPEG-4 settings dialog in Mac OS X, with the Compatibility pane selected"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF107" title="Figure 1-8The MPEG-4 settings dialog in Mac OS X, with the Compatibility pane selected"></a><p><strong>Figure 1-8&nbsp;&nbsp;</strong>The MPEG-4 settings dialog in Mac
OS X, with the Compatibility pane selected</p><img src = "../Art/mp4_compatbility.gif" alt = "" width="590" height="524"></div><br/>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160803" title="New Video Codec for MPEG-4"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF140" title="New Video Codec for MPEG-4"></a><h2>New Video Codec
for MPEG-4</h2>
<p>QuickTime 6 provides a new video codec for MPEG-4 video compression.
The new codec is ISMA compliant and conforms to the Profile 0 standard
of the ISMA specification. It can provide an extremely low data
rate of 64 kbits/second. The advantage that this new codec offers
is interoperability with other systems. Interoperability is the
primary goal of the new codec. </p>
<p>For application developers, this new codec is similar to other
codecs that ship with QuickTime. As such, it behaves like any other
codec that developers have had experience with, such as the JPEG
codecs. From a programming point of view, developers will be able to
pop up the Standard Compression dialog and that will provide a choice
for users. </p>
<p>Developers may want to develop certain applications around
this codec for broadcasting, for example, because of its low data
rate and because it builds on the H.263 specification. </p>
<p>The key features of the new video codec for MPEG-4 video compression
can be summarized as follows:</p>
<ul class="ul"><li class="li"><p>Implements MPEG-4 Video Simple Profile, which
supports</p><ul class="nested"><li class="nested li"><p>Video at 50 kbps to 4 Mbps</p></li>
<li class="nested li"><p>Streaming</p></li>
<li class="nested li"><p>Delivery to wireless handheld devices</p></li>
<li class="nested li"><p>Stored content</p></li>
<li class="nested li"><p>Kiosk applications</p></li>
<li class="nested li"><p>Set-top boxes</p></li></ul></li>
<li class="li"><p>Decodes most ISMA and 3GPP streams </p></li>
<li class="li"><p>Displays a detailed warning if it can&#8217;t open a particular
stream</p></li>
<li class="li"><p>Encodes ISMA- or 3GPP-compliant streams</p></li>
<li class="li"><p>Improved video processing, including gamma correction</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143880" title="ISMA and Definitions of Profile 0"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF141" title="ISMA and Definitions of Profile 0"></a><h3>ISMA and Definitions
of Profile 0</h3>
<p>The Internet Streaming Media Alliance (ISMA) specification <code>&lt;http://www.isma.tv/&gt;</code> is
aimed at producing a technical standard based on MPEG-4 for files
and streaming MPEG-4 video and audio over IP networks. In that standard,
a file will have one video track and one audio track, likewise for
streaming tracks. The aggregate data rate cannot exceed the limit
of 64 Kbits/second, which conforms to Profile 0. </p>
<p>As ISMA defines it:</p>
<p>&#8220;To be compliant with this specification a product must
completely implement profile 0, and may implement additional profiles.
For example, an on-demand video server would likely need to implement
all possible profiles to address a wide client base. However a decoder/terminal
may only support profile 0.</p>
<p>&#8220;This approach has been taken to ensure that any product
certified as ISMA compliant, has the capability to minimally interoperate
with any other ISMA compliant product.</p>
<p>&#8220;This is a definition of base interoperability. Vendors
are still free to add additional functionality beyond that specified
in this document. However that said, a conforming product cannot
make any additional requirements beyond this specification to interoperate
with another conforming system.&#8221;</p>
<p>In the specification, Profile 0 is defined this way: </p>
<p>&#8220;Rationale: This profile was selected to allow for video
and audio at bitrates suitable that match capabilities of narrowband
and mobile wireless infrastructures and to align with the patent
pool work in M4IF.&#8221;</p>
<p>For video, this includes the following:</p>
<ul class="spaceabove"><li class="li"><p>REQUIRED - MPEG-4 ISO/IEC 14496-2:1999 + Cor
1:2000 + Cor 2:2001</p></li>
<li class="li"><p>MPEG-4 Simple Profile @ Level 1</p></li>
<li class="li"><p>Typical Visual Session Size is QCIF (176x144)</p></li>
<li class="li"><p>Maximum bitrate is 64kbit/s</p></li>
<li class="li"><p>ISMA Restriction: Profile 0 is limited to one (1) video object
only. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143886" title="Profiles and Levels Defined"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF142" title="Profiles and Levels Defined"></a><h3>Profiles and Levels
Defined</h3>
<p>A profile can be thought of as a grouping together of different
algorithms, specifying what your video codec can and cannot do.
A level, on the other hand, specifies how much your codec can do.
A level, for example, may restrict the computational complexity
within a profile, specifying the bitrate constraints on a video
or audio stream. Both profiles and levels are stored within an MPEG-4
file, so that the playback device &#8220;knows&#8221; whether or not it
can in fact play back the file. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143892" title="ISMA Profile 0 "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF143" title="ISMA Profile 0 "></a><h4>ISMA Profile 0 </h4>
<ul class="spaceabove"><li class="li"><p>MPEG-4 Video Simple Profile</p></li>
<li class="li"><p>176 x 144 at 15 fps and 64 kbps</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143898" title="ISMA Profile 1 "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF144" title="ISMA Profile 1 "></a><h4>ISMA Profile 1 </h4>
<ul class="spaceabove"><li class="li"><p>Simple or Advanced Simple Profile</p></li>
<li class="li"><p>352 x 288 at 30 fps and 1.5 Mbps</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143904" title="3GPP (Third Generation Partnership Project)"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF145" title="3GPP (Third Generation Partnership Project)"></a><h4>3GPP (Third Generation
Partnership Project)</h4>
<ul class="spaceabove"><li class="li"><p>Similar to ISMA Profile 0</p></li>
<li class="li"><p>Designed for wireless handheld devices</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143910" title="Gamma Correction"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF146" title="Gamma Correction"></a><h3>Gamma Correction</h3>
<p>In QuickTime 6, the MPEG-4 video codec performs gamma correction,
so that MPEG-4 files look the same when they are displayed on both
Macintosh and Windows computers. An MPEG-4 video stores both gamma
and color space information, while the video codec performs per-platform
gamma correction. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143916" title="Additional Dialog for MPEG-4 Video Compression"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF147" title="Additional Dialog for MPEG-4 Video Compression"></a><h3>Additional Dialog
for MPEG-4 Video Compression</h3>
<p><span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159354">Figure 1-9</a></span> shows a Compression Settings dialog in Mac OS X (available
in QuickTime Player Pro) that provides MPEG-4 Video as a selectable
choice for the content author or end user. The dialog also provides
two selectable compression types: Faster and More Accurate. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159354" title="Figure 1-9The Compression Settings with MPEG-4 Video as a selectable item for the content author "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF108" title="Figure 1-9The Compression Settings with MPEG-4 Video as a selectable item for the content author "></a><p><strong>Figure 1-9&nbsp;&nbsp;</strong>The Compression Settings with MPEG-4
Video as a selectable item for the content author </p>
<img src = "../Art/compress_settings.gif" alt = "" width="530" height="523"></div><br/>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143921" title="Summary"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF148" title="Summary"></a><h3>Summary</h3>
<p>For developers, some important points to keep in mind about
QuickTime 6 support for MPEG-4:</p>
<ul class="spaceabove"><li class="li"><p>MP4 files can be opened by any application that
uses the standard QuickTime calls. </p></li>
<li class="li"><p>Any application can create MP4 files by using the standard
QuickTime export calls.</p></li>
<li class="li"><p>MPEG-4 codecs behave like other QuickTime codecs. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160807" title="MPEG-4 Audio Support"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF149" title="MPEG-4 Audio Support"></a><h2>MPEG-4 Audio
Support</h2>
<p>QuickTime 6 plays audio files of AAC and handles ISMA profile
levels 0 and 1, with the exception of CELP audio. In the current
release both encode and decode of AAC are supported. (Note that
encode is AAC [Low Complexity] only.) QuickTime 6 conforms to the
MPEG-4 audio specification. </p>
<p>QuickTime 6 audio can handle reading in MP4 files, and can
export them to QuickTime movies. </p>
<p>A few current limitations: </p>
<ul class="ul"><li class="li"><p>Audio can only handle ISMA Profile 0 and Profile
1 for AAC. </p></li>
<li class="li"><p>Audio cannot handle multichannel AAC.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143926" title="Defining AAC"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF150" title="Defining AAC"></a><h3>Defining AAC</h3>
<p>The characteristics of AAC include</p>
<ul class="spaceabove"><li class="li"><p>Perceptual audio codec, similar to MP3</p></li>
<li class="li"><p>Multichannel capability</p></li>
<li class="li"><p>&#8220;Indistinguishable&#8221; audio quality&#8211;&#8211;that is, you can
take an encoded file and the source from the encoded file and you
should not be able to tell the difference over a stereo system.
From a CD source:</p><ul class="nested"><li class="nested li"><p>AAC Low Complexity requires
96 kbps per channel. </p></li>
<li class="nested li"><p>MP3 requires at least 128 kbps per channel. </p></li></ul></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143932" title="QuickTime AAC Encoder"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF151" title="QuickTime AAC Encoder"></a><h3>QuickTime AAC
Encoder</h3>
<p>The characteristics of the QuickTime AAC encoder include</p>
<ul class="spaceabove"><li class="li"><p>AAC-Low Complexity</p></li>
<li class="li"><p>Acceptable source</p><ul class="nested"><li class="nested li"><p>44.1 kHz or 48 kHz.
It is recommended that when encoding audio, your source should be
an even multiple of those numbers. </p></li>
<li class="nested li"><p>Mono or stereo</p></li></ul></li>
<li class="li"><p>Output</p><ul class="nested"><li class="nested li"><p>Mono: 16 to 256 kbps</p></li>
<li class="nested li"><p>Stereo: 16 to 256 kbps</p></li>
<li class="nested li"><p>The sample rate is automatically scaled to the bitrate. </p></li></ul><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_3" title="Important:"></a><p><strong>Important:</strong>&nbsp;

The output sample rate is linked directly to the output
bitrate and number of channels. Note that the listed sample rates
are input sample rates. Using QuickTime, the encoder can take any
sample rate that QuickTime can play. But no matter what sample rate
you happen to provide, that rate will be converted to the selected
sample rate before it is fed to the encoder. Thus, it is best to
provide a sample rate that divides evenly into the selected sample
rate. For example, if you have a 22.050 kHz source, select 44.1;
if you have a 16 kHz source, select 48.</p><p></p></div></li></ul>
<p>Table 1-1 is a mapping of the input sample rate + output bitrate
+ output number of channels to output sample rate. </p><a name="//apple_ref/doc/uid/TP40000937-CH1g-168186" title="Table 1-1A mapping of the input sample rate + output bitrate + output number of channels to output sample rate"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF109" title="Table 1-1A mapping of the input sample rate + output bitrate + output number of channels to output sample rate"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-1&nbsp;&nbsp;</strong>A mapping of the input sample rate
+ output bitrate + output number of channels to output sample rate</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Input sample rate</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Output bitrate</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Output sample rate (one channel)</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Output sample rate (two channels)</p></th>
</tr>


<tr>
<td  scope="row"><p>48000</p></td>
<td ><p>8000</p></td>
<td ><p>8000</p></td>
<td ><p>none defined</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>16000-20000</p></td>
<td ><p>16000</p></td>
<td ><p>8000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>24000-28000</p></td>
<td ><p>22050</p></td>
<td ><p>11025</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>32000</p></td>
<td ><p>32000</p></td>
<td ><p>16000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>40000, 480000</p></td>
<td ><p>32000</p></td>
<td ><p>22050</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>56000</p></td>
<td ><p>32000</p></td>
<td ><p>24000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>64000, 80000, 96000, 112000</p></td>
<td ><p>48000</p></td>
<td ><p>32000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>128000+</p></td>
<td ><p>48000</p></td>
<td ><p>48000</p></td>
</tr>
<tr>
<td  scope="row"><p>44100</p></td>
<td ><p>8000</p></td>
<td ><p>8000</p></td>
<td ><p>none defined</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>16000, 20000</p></td>
<td ><p>16000</p></td>
<td ><p>8000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>24000, 28000</p></td>
<td ><p>22050</p></td>
<td ><p>11025</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>32000</p></td>
<td ><p>32000</p></td>
<td ><p>16000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>40000, 48000</p></td>
<td ><p>32000</p></td>
<td ><p>22050</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>56000</p></td>
<td ><p>32000</p></td>
<td ><p>24000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>64000, 80000, 96000, 112000</p></td>
<td ><p>44100</p></td>
<td ><p>32000</p></td>
</tr>
<tr>
<td  scope="row"><p></p></td>
<td ><p>128000+</p></td>
<td ><p>44100</p></td>
<td ><p>44100</p></td>
</tr>

</table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;Future implementations
may have different bitrate and sample rate mappings. </p></div>
<p>You are best advised to provide content in these sample rates,
regardless of the target bitrate. If you already have content in
a different sample rate, however, it is not a problem. QuickTime
will perform the necessary Sample Rate conversion.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143948" title="QuickTime AAC Decoder"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF152" title="QuickTime AAC Decoder"></a><h2>QuickTime AAC
Decoder</h2>
<p>The characteristics of the QuickTime AAC decoder include</p>
<ul class="ul"><li class="li"><p>AAC Low Complexity</p><ul class="nested"><li class="nested li"><p>8
to 320 kbps</p></li>
<li class="nested li"><p>8 to 48 kHz</p></li>
<li class="nested li"><p>Mono or stereo</p></li></ul></li>
<li class="li"><p>ISMA Profile 0, 1 compliant </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160811" title="Native MPEG-4 Streaming"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF153" title="Native MPEG-4 Streaming"></a><h2>Native MPEG-4
Streaming</h2>
<p>QuickTime 6 provides support for native MPEG-4 streaming.
Standard hinted MPEG-4 files can be served directly, without converting
to <code>.mov</code> files.</p>
<p>For authoring in QuickTime 6, there are new packetizers and
reassemblers, one for audio and one for video. These are used to
take a <code>.mov</code> or <code>.mp4</code> and
produce a hinted <code>.mov</code>,
or a hinted .<code>mp4</code>. (MP4
files have in them a definition of hint tracks, which is the QuickTime
version of hint tracks.) Authors can then take this movie and place
it on a Streaming Server. The MPEG-4 file format includes hint tracks
which are the same as native QuickTime hint tracks. </p>
<p>Using QuickTime Streaming Server 4&#8211;&#8211;Apple&#8217;s streaming
media server&#8211;&#8211;for example, you can serve ISO-compliant hinted
MPEG-4 files to any ISO-compliant MPEG-4 client, including any MPEG-4
enabled device that supports playback of MPEG-4 streams over IP. You
can also serve on-demand or live MPEG-4 streams, and reflect playlists
of MPEG-4 files.</p>
<p>Note that QuickTime 6 does not support interleave for RTP
audio packing. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160815" title="MPEG-4 and Web Developers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF154" title="MPEG-4 and Web Developers"></a><h2>MPEG-4 and Web
Developers</h2>
<p>This section discusses the various ways that you can use MPEG-4
in QuickTime, as well as how to create, compress, and play MP4 files
on the Web. It also provides an example of how to embed an .mp4
file in a Web page so that it will be played only by QuickTime.
The section concludes with a discussion of some of the issues involved
in creating ISO-compliant MP4 files to ensure that they are interoperable
with players other than QuickTime.</p>
<p>If you are a developer who creates websites, website authoring
tools, or QuickTime movies intended for distribution over a network
or the Internet, you will want to read this section. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143954" title="Ways To Use MPEG-4 In QuickTime "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF155" title="Ways To Use MPEG-4 In QuickTime "></a><h3>Ways To Use MPEG-4
In QuickTime </h3>
<p>There are three different ways you can use MPEG-4 in QuickTime.</p>
<ol class="ol"><li class="li"><p>You can create QuickTime movies (.mov) that use
the MPEG-4 video and/or audio codecs. These are not .mp4 files,
and MP4 players will not play them. They are QuickTime movies and
they require QuickTime 6 or later to play. </p></li>
<li class="li"><p>You can create MPEG-4 files (.mp4) that are ISO-compliant.
These are MP4 files. They are not QuickTime movies. All ISO-compliant
players should be able to play these files with no difficulty. QuickTime
Player is an ISO-compliant player and can play ISO-compliant MP4
files created on any platform.</p></li>
<li class="li"><p>You can create MPEG-4 files (.mp4) that are not ISO-compliant.
These MP4 files may not play on other MP4 players, but they will
play in QuickTime 6. (For more information about issues involving
ISO compliance, see the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-144036">“ISO Compliance.”</a></span>)</p></li></ol>
<p>QuickTime 6 allows you to create both fast-start and streaming
versions of your movies in both .mov and .mp4 format. Movies that
use MPEG-4 codecs can be hinted for streaming, exported to .mp4
files, or both, without recompressing the audio or video.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143960" title="Why Use MPEG-4 On The Web?"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF156" title="Why Use MPEG-4 On The Web?"></a><h3>Why Use MPEG-4
On The Web?</h3>
<p>MPEG-4 is an ISO standard supported by a wide range of companies
in a variety of industries, as discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160795">“Support for MPEG-4.”</a></span>
This means that an MPEG-4 file can be played by many different players
in addition to QuickTime, not only on personal computers, but also
on cell phones, PDAs, and television set-top boxes. This is a huge
step forward from the current proprietary environment, which may
lead you to deliver your movies using different compressors and
multiple formats&#8211;&#8211;such as Real, Windows Media, and QuickTime&#8211;&#8211;just
to serve your Mac and Windows customers.</p>
<p>QuickTime movies compressed using MPEG-4 audio and video codecs
can be exported to MPEG-4 file format without recompression, allowing
you to serve your movies in multiple formats (<code>.mov</code> and
.mp4) without sacrificing quality or time.</p>
<p>At typical Internet data rates, the MPEG-4 simple video codec
is comparable to Sorenson3 video. This a good reason for using a
codec in itself, but there are other advantages. The MPEG-4 video
codec scales very well at extremely low bitrates, making it suitable
for cell phones and PDAs with data rates even lower than dialup
modems. In addition, MPEG-4 video compression can be very fast,
making it suitable for live broadcasts and decreasing the time spent
compressing movies.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;The current release
of QuickTime 6 includes only the MPEG-4 simple video compressor.
Higher quality and lower bitrates can be expected from the advanced
video compressor.</p></div>
<p>MPEG-4 audio uses the Advanced Audio Codec (AAC), as discussed
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160807">“MPEG-4 Audio Support.”</a></span> This codec provides better quality
than mp3 audio at any given bitrate, or equivalent quality at a
lower bitrate (typically about 30% lower). At higher bitrates, AAC
supports multichannel surround-sound audio. Like MP3 before it,
MP4 audio is a standard, so it is entirely possible that devices
currently supporting MP3 (MP3 players, CD players, DVD players)
will soon be available for MP4 as well. This is a premium quality
audio codec for ISDN data rates and above. </p>
<p>For low bandwidth audio suitable to dialup modems or portable
wireless connections, however, the QDesign2 music codec and Qualcomm
Purevoice codecs remain better choices.</p>
<p>The MPEG-4 specification includes a low bandwidth audio codec
based on CELP (codebook excited linear predictive) algorithms similar
to the Purevoice codec.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_6" title="Note"></a><p><strong>Note:</strong>&nbsp;The current release
of QuickTime 6 supports AAC audio at 44.1 and 48 kHz in mono or
stereo. It does not currently support multichannel sound or other
sampling rates for AAC audio, as discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-143926">“Defining AAC.”</a></span></p></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143980" title="Creating QuickTime Movies With MPEG-4 Compression"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF157" title="Creating QuickTime Movies With MPEG-4 Compression"></a><h3>Creating QuickTime
Movies With MPEG-4 Compression</h3>
<p>You can use the MPEG-4 audio and video compressors as you
would any other QuickTime codecs, as explained in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160803">“New Video Codec for MPEG-4.”</a></span>
The MPEG-4 video and audio codecs are available in the standard
QuickTime compression dialog box. </p>
<p>From QuickTime Player, choose Export (File menu), Movie to
QuickTime Movie (pop-up menu), and click the Options button. Click
the Settings button for audio or video and choose MPEG-4 from the
compressor list. There are a variety of settings for audio and video,
such as frame rate, quality, and data rate limit. Click the Size
button to change the pixel dimensions of the video track. Click
Okay, then Save.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_7" title="Note"></a><p><strong>Note:</strong>&nbsp;Movie export
from QuickTime Player requires QuickTime Pro.</p></div>
<p>Other applications that use the standard file compression
dialog automatically gain the ability to use MPEG-4 compression
when you install QuickTime 6.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-143991" title="Creating .mp4 Files"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF158" title="Creating .mp4 Files"></a><h3>Creating .mp4
Files</h3>
<p>To create .mp4 files from QuickTime Player, choose Export
(File menu),  Movie to MPEG-4, (pop-up menu), and click the Options
button. This opens a dialog box with tabs for General, Video, Audio,
Streaming, and Compatability. Use this dialog box to select your MPEG-4
compression settings. These panels are described and illustrated
in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-143874">“New Dialogs for Handling MP4 Files.”</a></span> </p>
<p>The General settings allow you to export audio, video, or
both. You can make some choices about audio and video compressor
settings here as well.</p>
<p>One of your compression choices is Pass Through. Use this
setting to export a QuickTime movie with MPEG-4 compression to the
.mp4 file format without recompressing the data. This is a very
fast operation and does not degrade audio or video quality. </p>
<p>The Size menu gives you three choices in the current release
of QuickTime 6&#8211;&#8211;Current, 320 x 240, and 160 x 120. If you need
a different frame size, you can resize the movie and choose Current. </p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_8" title="Note"></a><p><strong>Note:</strong>&nbsp;In QuickTime
Player, you can resize a movie by opening the properties window
(Movie menu, Get Movie Properties), choosing a video track from
the left pop-up menu, and choosing Size from the right pop-up. Click
the Adjust button and resize the track by dragging with the mouse
(the properties pane shows the pixel dimensions as you drag). Click
the Done button when you have the correct size. If there are multiple
video tracks, resize the largest track and repeat as necessary until
all the tracks are within the desired bounds.</p></div>
<p>The Video settings allow you to set a video bitrate limit,
frame rate, and keyframe rate.</p>
<p>The Audio settings allow you to set an audio bitrate limit
and number of channels.</p>
<p>Text at the bottom of each pane changes as you choose settings
to help you undertand the options and monitor ISO compliance. The
Compatability pane lets you override audio and video settings to
ensure ISO compliance. For more information, see the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-144036">“ISO Compliance.”</a></span></p>
<p>The Streaming pane lets you create a fast-start or streaming
.mp4. If you choose streaming, QuickTime will add a hint track.
You can choose this option with the codecs set to Pass Through to
turn a fast-start movie with MPEG-4 compression into a hinted .mp4
without recompressing. </p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_9" title="Note"></a><p><strong>Note:</strong>&nbsp;Optimizing hints
for server is no longer recommended. It greatly expands the file
size of the streaming movie, and optimizations in the streaming
server make it unnecessary.</p></div>
<p>You can stream .mp4 files using the QuickTime Streaming Server
(version 4 or later), the Darwin Streaming Server (version 4 or
later), or any ISO-compliant streaming server. QuickTime 6 can also
play MP4 streams from any ISO-compliant source.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144009" title="Playing .mp4 Files in QuickTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF159" title="Playing .mp4 Files in QuickTime"></a><h3>Playing .mp4 Files
in QuickTime</h3>
<p>Double-clicking .mp4 files from the desktop may launch QuickTime
Player, or it may launch some other application that is registered
for .mp4 files on your computer. </p>
<p>Files created on the Mac OS have a creator code as well as
a file type, so the operating system will usually call QuickTime
Player for an .mp4 file created locally on a Mac. This creator code
is normally lost, however, if a file is stored on Windows or Unix
file systems, something which commonly occurs when a file is transferred
over the Internet.</p>
<p>To deliver <code>.mp4</code> files
over the Internet, your Web server needs to be configured for the
.mp4 MIME type (video/mp4). Once this is done, a browser will play
.mp4 files using the plug-in or ActiveX control registered for video/mp4.
If you post your .mp4 file to the Web and attempt to view it using
QuickTime, an error stating that &#8220;This is not a file that QuickTime
understands,&#8221; or an attempt to display the file as text, generally
indicates that the Web server is not configured for the mp4 MIME
type.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_10" title="Note"></a><p><strong>Note:</strong>&nbsp;For audio-only
.mp4 files, the optional MIME type audio/mp4 can be used. These
files can also use the video/mp4 MIME type, however.</p></div>
<p>To embed an .mp4 file in a Web page so that it will be played
only by QuickTime, use both the <code>OBJECT</code> tag&#8211;&#8211;specifying
the QuickTime <code>ClassID</code> and <code>Codebase</code>&#8211;&#8211;and
the <code>EMBED</code> tag, with <code>SRC</code> set
to a QuickTime MIME type&#8211;&#8211;such as <code>.qtif</code> or <code>.pntg</code>&#8211;&#8211;and <code>QTSRC</code> 
set to the .mp4 file, as shown in the following example. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-177095" title="Example: Playing .mp4 files over the Web"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF160" title="Example: Playing .mp4 files over the Web"></a><h4>Example: Playing
.mp4 files over the Web</h4>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;OBJECT<span></span></pre></td></tr><tr><td scope="row"><pre>CLASSID=&quot;clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    CODEBASE=&quot;http://www.apple.com/qtactivex/qtplugin.cab&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    WIDTH=&quot;320&quot; HEIGHT=&quot;256&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;PARAM NAME=&quot;src&quot; VALUE=&quot;My.mp4&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;PARAM NAME=&quot;autoplay&quot; VALUE=&quot;true&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;EMBED  SRC=&quot;QTMimeType.pntg&quot; TYPE=&quot;image/x-macpaint&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>PLUGINSPAGE=&quot;http://www.apple.com/quicktime/download&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    QTSRC=&quot;My.mp4&quot; WIDTH=&quot;320&quot; HEIGHT=&quot;256&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    AUTOPLAY=&quot;true&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/EMBED&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/OBJECT&gt;<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_11" title="Note"></a><p><strong>Note:</strong>&nbsp;This is the same
technique you would use to be sure that any non-QuickTime file (such
as an <code>.mp3</code> or <code>.aiff</code> file)
is played by the QuickTime browser plug-in.</p></div>
<p>The <code>OBJECT</code> tag
works with Internet Explorer 4 and later on Windows. The <code>ClassID</code> specifies the
QuickTime ActiveX control, and the <code>Codebase</code> tells
Explorer where to find the ActiveX control if it is not installed.
The <code>PARAM</code> tag with <code>name=&quot;src&quot;</code> has
the URL of your MP4 file as its value.</p>
<p>The <code>EMBED</code> tag works
with all other Windows browsers and all Mac browsers including Internet
Explorer. The <code>SRC</code> parameter
is set to a file whose MIME type is used exclusively by QuickTime,
such as <code>.pntg</code> (image/x-macpaint)
or <code>.qtif</code> (image/x-quicktime).
You can also use .mov (video/quicktime). This file must exist and
is downloaded by the browser, but it is not displayed. The browser
uses the QuickTime plug-in to handle any file of this MIME type. </p>
<p>The <code>PLUGINSPAGE</code> parameter
tells the browser where to find the QuickTime plug-in if it is not
installed. The <code>QTSRC</code> parameter
holds the url of your MP4 file, and this is what QuickTime plays.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144036" title="ISO Compliance"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF161" title="ISO Compliance"></a><h3>ISO Compliance</h3>
<p>The MPEG-4 specification is more than just a video codec or
an audio codec. It defines a rich set of multimedia, including such
things as text and facial animation, as discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160795">“Support for MPEG-4.”</a></span> </p>
<p>No software is currently able to display all the different
media described in the MPEG-4 specification. Consequently, MPEG-4
defines profiles (discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-143886">“Profiles and Levels Defined,”</a></span>
which describe the subset of MPEG-4 features a particular player supports,
and the feature set a particular movie requires. </p>
<p>A Profile 0 player, for example, can play simple MPEG-4 video
at speeds up to 64 kbit/second, and AAC audio at 44.1 and 48 kHz
in mono or stereo. A Profile 0 movie does not require any other
features for correct playback. A Profile 0 player can play any Profile
0 movie.</p>
<p>A Profile 1 player has a larger required feature set that
includes everything in Profile 0 as well as features such as multichannel
sound and higher bitrate video. </p>
<p>If an MP4 movie uses even one feature of theProfile 1 set
(that is not also part of the Profile 0 set), it is a Profile 1
movie, because it requires a Profile 1 player for reliable playback. </p>
<p>If an MP4 player is missing even one feature required for
Profile 1, it is a Profile 0 player, even though it may be able
to play many Profile 1 movies.</p>
<p>QuickTime 6 is a Profile 0 player. It can play any Profile
0 movie. QuickTime 6 also has some features of a Profile 1 player,
such as the ability to handle higher bitrate video, but it does
not have the full Profile 1 feature set and cannot play all Profile
1 movies. </p>
<p>QuickTime can create and play Profile 0 movies that use video
at higher bitrates than 64 kbit/second. If you know your movie will
be played by QuickTime, you may want to take advantage of the higher
bitrates available, but be aware that this produces files which
are not ISO-compliant. Other Profile 0 players may not be able to
play these files, even though QuickTime can. </p>
<p>To ensure interoperability with other players, use only ISO-compliant
MP4 files.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160819" title="RTSP Instant-On Enhancement to Streaming"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF162" title="RTSP Instant-On Enhancement to Streaming"></a><h2>RTSP Instant-On
Enhancement to Streaming</h2>
<p>QuickTime 6 introduces a new feature in streaming: Instant-On.
This feature provides broadband users with quick access to streaming
content, thus reducing the wait before playback. Users with a broadband
connection can &#8220;scrub&#8221; through on-demand streams in real-time
by using the time slider. The playback is updated instantaneously,
allowing you to locate precisely the content that you want to view
in a QuickTime movie. </p>
<p>This feature enables the nearly instantaneous start of streamed
movies when the available network bandwidth significantly exceeds
the data rate of the target media. </p>
<p>Users can enable this feature in the QuickTime Settings control
panel (shown below). The slider varies the amount of pre-buffering
that QuickTime will do from a maximum of 2x the movie data rate
to a minimum of very little pre-buffering.</p>
<br/><div><img src = "../Art/instant_on.gif" alt = "image: ../Art/instant_on.gif" width="629" height="464"></div><br/>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160823" title="User Interface Changes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF163" title="User Interface Changes"></a><h2>User Interface
Changes</h2>
<p>There are some minor changes to the QuickTime Player user
interface that are introduced in QuickTime 6, as discussed in this
section. These include the following: </p>
<ul class="ul"><li class="li"><p>The Channel button (below) that was marked &#8220;TV&#8221;
in previous versions of QuickTime is now marked with a &#8220;Q&#8221;. </p></li></ul>
<br/><div><img src = "../Art/kir04.gif" alt = "image: ../Art/kir04.gif" width="382" height="131"></div><br/>
<ul class="ul"><li class="li"><p>The Hot Picks movie and the Channel pane have
a new layout (below), with channel categories on the left and a
movie on the right. The list of channel categories is now dynamic. </p></li></ul>
<br/><div><img src = "../Art/kir05.gif" alt = "image: ../Art/kir05.gif" width="547" height="388"></div><br/>
<ul class="ul"><li class="li"><p>The Favorites pane is no longer an alternate
for the Channel pane. It is now a stand-alone panel (shown below).
Instead of icons, favorite movies are shown as a list of file names
or URLs. </p></li></ul>
<br/><div><img src = "../Art/kir06.gif" alt = "image: ../Art/kir06.gif" width="283" height="162"></div><br/>
<ul class="ul"><li class="li"><p>The Favorites panel can be accessed only from
the Favorites menu. There is no longer a heart icon to switch between
Channels and Favorites. Both can now be displayed simultaneously
if the user wishes.</p></li>
<li class="li"><p>There is a new menu item in QuickTime Player. Under File,
there is now an Open Recent &gt; selection, with a submenu of the
last 10 movies.</p></li></ul>
<p>These changes should not affect programmers working with QuickTime
at the API level. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160827" title="JPEG 2000 Support"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF164" title="JPEG 2000 Support"></a><h2>JPEG 2000 Support</h2>
<p>QuickTime 6 includes support for JPEG 2000, a high-quality,
still-image compression and image coding standard that uses state
of the art compression techniques based on wavelet technology. QuickTime
6 provides support for encoding, decoding, import, and export to the
format. </p>
<p>The JPEG 2000 standard is based on discrete wavelet transform
(DWT), scalar quantization, context modeling, arithmetic coding
and post-compression rate allocation. The standard lends itself
to a variety of uses, ranging from digital photography to medical imaging
to advanced digital scanning and printing. </p>
<p>For more information on the JPEG 2000 standard for still image
coding, refer to </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.jpeg.org/JPEG2000.htm<span></span></pre></td></tr></table></div>
<p>Most notably, JPEG 2000 provides high compression efficiency&#8211;&#8211;in
many cases, visually lossless compression at 1 bit per pixel or
better. </p>
<p>Note that for this release of QuickTime 6, JPEG 2000 is only
supported in Mac OS X. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160831" title="Flash 5 Support"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF165" title="Flash 5 Support"></a><h2>Flash 5 Support</h2>
<p>QuickTime 6 includes several new and updated components related
to Macromedia Flash support in QuickTime. The Flash media handler
and the Flash movie importer have been updated, and a new Flash
Properties panel has been added to the QuickTime Player info panels. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144042" title="New Flash Media Handler "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF166" title="New Flash Media Handler "></a><h3>New Flash Media
Handler </h3>
<p>The new Flash media handler supports Macromedia Flash files
(also known as SWF files) that conform to Flash 5 versions and earlier
of the SWF specification. (Previous releases of QuickTime supported
files that conformed to Flash 4 and earlier.) You should refer to Macromedia&#8217;s
documentation for a complete listing of the features added to Flash
5. The most significant additions include</p>
<ul class="spaceabove"><li class="li"><p>greatly expanded ActionScript capabilities</p></li>
<li class="li"><p>HTML text rendering</p></li>
<li class="li"><p>XML data exchange</p></li></ul>
<p>All these features work properly under the new Flash media
handler&#8211;&#8211;with a few limitations. (Refer to the QuickTime 6 Release
Notes, which specify those limitations.)</p>
<p>SWF files opened by QuickTime-savvy applications are converted
to QuickTime movie files by the Flash movie importer, discussed
in the next section. These movie files consist of a single Flash
track, whose media data is simply the data in the original SWF file. Virtually
all of these movie files play back in QuickTime Player, in other
QuickTime-savvy applications, or in the QuickTime browser plug-in
exactly as if the original SWF file had been opened using the Flash
Player application or the Flash browser plug-in.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144048" title="Flash Movie Importer"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF167" title="Flash Movie Importer"></a><h3>Flash Movie Importer</h3>
<p>The new Flash movie importer is &#8220;smarter&#8221; than the previous
importer in several ways. The principal change is that the new importer
scans some or all of the Flash file being imported to try to determine
whether the file is set to automatically start playing when it is
opened. (Previous importers assumed that all imported SWF files
should be autoplayed.) Several other settings are unchanged from
earlier versions of the Flash importer: the play-all-frames option
is set to <code>TRUE</code> and the
looping flag is set to <code>FALSE</code>. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144054" title="New Flash Properties Info Panel"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF168" title="New Flash Properties Info Panel"></a><h3>New Flash Properties
Info Panel</h3>
<p>Flash tracks can be combined with other kinds of tracks in
a QuickTime movie file. This is especially useful when using controls
in the Flash track (buttons, sliders, etc.) to control the playback
and settings of other tracks (video tracks, sound tracks, VR tracks,
etc.) </p>
<p>In this situation, the content author needs to be aware of
a new consideration that did not arise in earlier versions of the
Flash media handler: version 5 ActionScripts can read the position
of the cursor and/or the state of the mouse button at any time.
This means that some ActionScripts may respond to mouse button clicks
even if those clicks do not occur on some interactive element in
the Flash track. If the Flash media handler accepts and processes
all clicks in the track rectangle, then those clicks cannot be passed
to tracks layered behind the Flash track. This effectively prevents
the user from interacting with sprite tracks and QuickTime VR tracks
layered behind the Flash track.</p>
<p>The new Flash media handler allows a movie author to decide
on a per-track basis whether all mouse button clicks are accepted
and handled by that particular instance of the Flash track or whether
clicks that are not on an interactive element in the track are passed
to tracks layered behind it. The setting for a specific Flash track
can be adjusted using the new &#8220;Flash Properties&#8221; info panel
in QuickTime Player, shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-159358">Figure 1-10</a></span>. </p>
<p>This panel contains a single check box labeled &#8220;Mouse Capture
Enabled&#8221;. If the box is checked, then all mouse clicks are directed
to the Flash track (unless some track in front of the Flash track
processes the click); if the box is unchecked, only mouse button
clicks on interactive elements in the Flash track are processed.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-159358" title="Figure 1-10The Flash Properties info panel in Mac OS X in QuickTime Player with Mouse Capture Enabled box checked "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF110" title="Figure 1-10The Flash Properties info panel in Mac OS X in QuickTime Player with Mouse Capture Enabled box checked "></a><p><strong>Figure 1-10&nbsp;&nbsp;</strong>The Flash Properties info panel in
Mac OS X in QuickTime Player with Mouse Capture Enabled box checked </p>
<img src = "../Art/flash_info_panel.gif" alt = "" width="374" height="330"></div><br/>
<p>When a Flash file is imported as a movie with a single Flash
track, mouse-capturing is enabled for that track. If you combine
that track with other tracks, you may need to adjust the mouse capture
setting to achieve the proper user experience.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144060" title="Controlling Mouse Capturing Setting"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF169" title="Controlling Mouse Capturing Setting"></a><h3>Controlling Mouse
Capturing Setting</h3>
<p>The mouse capture setting of a Flash track is stored in the
media properties atom of the track. </p>
<p>The <code>Movies.h</code> header
file contains the constant <code>kFlashTrackPropertyAcceptAllClicks</code> to
identify the atom type; the atom data is a Boolean value, where <code>TRUE</code> means
to accept all mouse button clicks and <code>FALSE</code> means
to accept only those mouse button clicks on an interactive element in
the Flash track. </p>
<p>The following snippet of code sets a Flash track to accept
all clicks:</p>
<div class="codesample"><table><tr><td scope="row"><pre>QTAtomContainer trackProperties = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean     acceptAllClicks = true;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>GetMediaPropertyAtom(flashMedia, &amp;trackProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>    if (trackProperties != NULL) {<span></span></pre></td></tr><tr><td scope="row"><pre>        QTInsertChild(trackProperties, 0,<span></span></pre></td></tr><tr><td scope="row"><pre>        kFlashTrackPropertyAcceptAllClicks, 1, 1,<span></span></pre></td></tr><tr><td scope="row"><pre>        sizeof(acceptAllClicks), &amp;acceptAllClicks, nil);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>SetMediaPropertyAtom(flashMedia, trackProperties);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>QTDisposeAtomContainer(trackProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160835" title="New APIs for Tasking QuickTime "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF170" title="New APIs for Tasking QuickTime "></a><h2>New APIs for
Tasking QuickTime </h2>
<p>QuickTime 6 introduces a new tasking mechanism designed to
improve application performance and operation. </p>
<p>Periodically, applications have to give time to QuickTime
by calling such routines as <code>MCIsPlayerEvent()</code>, <code>MCIdle()</code>, <code>MoviesTask()</code>,
or <code>TaskMovie()</code>. Typically,
QuickTime developers ask the question, how often should I call a
particular routine? The answer most frequently given is, 10 to 20
times per second. This works in most cases. But in many other cases,
while an application is tasking QuickTime 10 or 15 times per second,
half the time QuickTime does not really need to be called, and the
application will just be sitting there, spinning. As a consequence,
there is an inefficient use of processor time.</p>
<p>In QuickTime 6, a new group of APIs are provided that improve
QuickTime tasking from an application&#8217;s point of view. These are</p>
<ul class="ul"><li class="li"><p><code>QTGetTimeUntilNextTask()</code></p></li>
<li class="li"><p><code>QTInstallNextTaskNeededSoonerCallback()</code></p></li>
<li class="li"><p><code>QTUninstallNextTaskNeededSoonerCallback()</code></p></li></ul>
<p>For example, where an application once did this</p>
<div class="codesample"><table><tr><td scope="row"><pre>while (true) {<span></span></pre></td></tr><tr><td scope="row"><pre>    WaitNextEvent(..., &amp;event, 2, ...); // if no event pending, return a<span></span></pre></td></tr><tr><td scope="row"><pre>                                        // null event after<span></span></pre></td></tr><tr><td scope="row"><pre>                                        // 2/60 of a second<span></span></pre></td></tr><tr><td scope="row"><pre>    MCIsPlayerEvent(mc, &amp;event);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>it can now do something like this</p>
<div class="codesample"><table><tr><td scope="row"><pre>UInt32 t;<span></span></pre></td></tr><tr><td scope="row"><pre>while (true) {<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    QTGetTimeUntilNextTask(&amp;t, 60); // how long in 60ths of a second?<span></span></pre></td></tr><tr><td scope="row"><pre>    WaitNextEvent(..., &amp;event, t, ...);<span></span></pre></td></tr><tr><td scope="row"><pre>    MCIsPlayerEvent(mc, &amp;event);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>QTGetTimeUntilNextTask is a new API that lets you pass in
a scale&#8211;&#8211;for example, 1/60 of a second or 1/1000 of a second&#8211;&#8211;and
returns a duration, that is, the number of 60ths or 1000ths (whatever
you ask for) until the next time QuickTime needs to be called. </p>
<p>For example, as shown in the code snippet above, on Mac OS
9 you would call QTGetTimeUntilNextTask, passing in 60 because <code>WaitNextEvent()</code> wants
ticks. It will tell you how many 60ths of a second until QuickTime
needs to be called again. <code>WaitNextEvent()</code> will not
return either until that amount of time has gone by, in which case
it will give you a NULL event, or an event took place, in which
case it will give you that event. </p>
<p>On Mac OS X, the recommended way to do this on a Carbon application
is to use the Carbon event loop timer, as discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160843">“New Carbon Movie Control.”</a></span>
This is a timer routine that you set up to be called periodically
from the Carbon event loop. You set a duration for how often you
want it to happen.</p>
<p>The following code snippet shows how you can use both QuickTime&#8217;s
new tasking mechanism and the Carbon event loop timer code. It also
shows how to use the new <code>QTInstallNextTaskNeededSoonerCallback()</code> API.</p>
<p><code>MyMovieIdlingTimer() </code>is
installed by the sample routine <code>InstallMovieIdlingEventLoopTimer()</code> shown
in the code snippet below. This routine performs the actual work
of idling the movies and/or movie controllers that the application
has in use.</p>
<div class="codesample"><table><tr><td scope="row"><pre>static void MyMovieIdlingTimer(EventLoopTimerRef inTimer,<span></span></pre></td></tr><tr><td scope="row"><pre>                                void *inUserData)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus error;<span></span></pre></td></tr><tr><td scope="row"><pre>    long     durationInMillis;<span></span></pre></td></tr><tr><td scope="row"><pre>    MyStatePtr myState = (MyStatePtr)inUserData; // Application's state<span></span></pre></td></tr><tr><td scope="row"><pre>                                        // related to its list of movies<span></span></pre></td></tr></table></div>
<p>You insert the code here to idle the movies and/or movie controllers
that the application has in use&#8211;&#8211;for example, calls to<code> MCIdle()</code>.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    // Ask the idling mechanism when we should fire the next time.<span></span></pre></td></tr><tr><td scope="row"><pre>        error = QTGetTimeUntilNextTask(&amp;durationInMillis, 1000);<span></span></pre></td></tr><tr><td scope="row"><pre>                                        // 1000 == millisecond timescale<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (durationInMillis == 0)  // When zero, pin the duration<span></span></pre></td></tr><tr><td scope="row"><pre>                                // to our minimum<span></span></pre></td></tr><tr><td scope="row"><pre>        durationInMillis = kMinimumIdleDurationInMillis;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // Reschedule the event loop timer<span></span></pre></td></tr><tr><td scope="row"><pre>    SetEventLoopTimerNextFireTime(myState-&gt;theEventTimer,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    durationInMillis *<span></span></pre></td></tr><tr><td scope="row"><pre>                                    kEventDurationMillisecond);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p><code>TaskNeededSoonerCallback()</code> is
installed using the new <code>QTInstallNextTaskNeededSoonerCallback()</code> to
enable QuickTime to awaken the application in order to reschedule
some idle time between calls to the event timer function.</p>
<div class="codesample"><table><tr><td scope="row"><pre>static void TaskNeededSoonerCallback(TimeValue duration,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        unsigned long flags,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        void *refcon)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    SetEventLoopTimerNextFireTime((EventLoopTimerRef)refcon,<span></span></pre></td></tr><tr><td scope="row"><pre>                                 duration * kEventDurationMillisecond);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>The <code>InstallMovieIdlingEventLoopTimer()</code> function
performs the actual installation of the Carbon event loop timer
function. This is called once when the first movie is opened. It
also installs a <code>TaskNeededSooner</code> callback
that the Idle Manager calls when QuickTime needs your attention.</p>
<div class="codesample"><table><tr><td scope="row"><pre>static OSStatus InstallMovieIdlingEventLoopTimer(MyStatePtr myState)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSStatus error;<span></span></pre></td></tr></table></div>
<p>Note that <code>myState</code> is
a structure the application maintains to &#8220;remember&#8221; the event
loop timer reference, as well as the list of movies or movie controllers
that it will need to idle.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    error =  InstallEventLoopTimer(<span></span></pre></td></tr><tr><td scope="row"><pre>                GetMainEventLoop(),<span></span></pre></td></tr><tr><td scope="row"><pre>                0,                          // firedelay<span></span></pre></td></tr><tr><td scope="row"><pre>                kEventDurationMillisecond * kMinimumIdleDurationInMillis,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            // interval<span></span></pre></td></tr><tr><td scope="row"><pre>                NewEventLoopTimerUPP(MyMovieIdlingTimer),<span></span></pre></td></tr><tr><td scope="row"><pre>                myState,                // This will be passed to us when<span></span></pre></td></tr><tr><td scope="row"><pre>                                        // the timer fires<span></span></pre></td></tr><tr><td scope="row"><pre>                &amp;myState-&gt;theEventTimer);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (!error) {<span></span></pre></td></tr><tr><td scope="row"><pre>        // Install a callback that the Idle Manager will use when<span></span></pre></td></tr><tr><td scope="row"><pre>        // QuickTime needs to wake me up immediately<span></span></pre></td></tr><tr><td scope="row"><pre>        error = QTInstallNextTaskNeededSoonerCallback(<span></span></pre></td></tr><tr><td scope="row"><pre>        NewQTNextTaskNeededSoonerCallbackUPP(TaskNeededSoonerCallback),<span></span></pre></td></tr><tr><td scope="row"><pre>                    1000,                   // Millisecond timescale<span></span></pre></td></tr><tr><td scope="row"><pre>                    0,                      // No flags<span></span></pre></td></tr><tr><td scope="row"><pre>                    (void*)myState-&gt;theEventTimer); // Our refcon, the<span></span></pre></td></tr><tr><td scope="row"><pre>                                            // callback will<span></span></pre></td></tr><tr><td scope="row"><pre>                                            // reschedule it<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    return error;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>As shown in the above code snippet, when QuickTime decides
that the next task is needed sooner, it will call the QTInstallNextTaskNeededSoonerCallback
routine. Using that routine, you can reschedule your Carbon event
loop timer. This callback proc may be called from interrupt-time
or called from another thread on Mac OS X. You can call the Carbon
API to reschedule the Carbon event loop timer. When you install
the callback, you tell it what scale you like, and then when the
callback comes, QuickTime will pass you a duration. </p>
<p>Often when you ask QTGetTimeUntilNextTask, it will return
you a 0, which means it needs to be tasked right away. It&#8217;s not
recommended that you pass a 0 into <code>WaitNextEvent()</code>, for
example, because what will happen is that you will completely swamp
the CPU. Passing in a 1 to <code>WaitNextEvent()</code> is
a good minimum. </p>
<a name="//apple_ref/c/func/QTGetTimeUntilNextTask" title="QTGetTimeUntilNextTask"></a><a name="//apple_ref/doc/c_ref/QTGetTimeUntilNextTask" title="QTGetTimeUntilNextTask"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTGetTimeUntilNextTask" title="QTGetTimeUntilNextTask"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_31"></a><h3 class="tight">QTGetTimeUntilNextTask</h3>
<p class="spaceabove">Provides the time in specified units, until QuickTime
next needs to be called. </p>
<p class="spaceabove"><pre>
OSErr QTGetTimeUntilNextTask (long * duration, long scale);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>duration</em></dt>
<dd><p>A pointer to the returned time to wait before
tasking QuickTime again. </p></dd>
<dt><em>scale</em></dt>
<dd><p>The requested time scale. </p></dd>
<dt><em>return
value</em></dt>
<dd><p>Error code (for example, <code>paramErr</code> or <code>MovieToolboxUninitialized</code>).
	</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>Using this routine, you pass in the scale that you&#8217;re interested
in, whether it is a 60th of second (scale=60), or a 1000th of second
(scale=1000). This call then returns a duration that specifies how
long you can wait before tasking QuickTime again. In Mac OS X, with
the Carbon event loop timer, you generally pass in 1000 and get
milliseconds in return, and then schedule your Carbon event loop
timer. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTInstallNextTaskNeededSoonerCallback" title="QTInstallNextTaskNeededSoonerCallback"></a><a name="//apple_ref/doc/c_ref/QTInstallNextTaskNeededSoonerCallback" title="QTInstallNextTaskNeededSoonerCallback"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTInstallNextTaskNeededSoonerCallback" title="QTInstallNextTaskNeededSoonerCallback"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_32"></a><h3 class="tight">QTInstallNextTaskNeededSoonerCallback</h3>
<p class="spaceabove">Installs a callback that is called when QuickTime &#8220;changes
its mind&#8221;about when it next needs to be tasked. </p>
<p class="spaceabove"><pre>
QTInstallNextTaskNeededSoonerCallback (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTNextTaskNeededSoonerCallbackUPP" target="_top">QTNextTaskNeededSoonerCallbackUPP</a> callbackProc,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeScale" target="_top">TimeScale</a> scale,
unsigned long flags,
void * refcon);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>callbackProc</em></dt>
<dd><p>A callback procedure. </p></dd>
<dt><em>scale</em></dt>
<dd><p>The time scale of the duration that will be
passed to the callback.</p></dd>
<dt><em>flags</em></dt>
<dd><p>Unused. Must be zero. </p></dd>
<dt><em>refcon</em></dt>
<dd><p>A reference constant. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine installs a callback procedure that specifies
when QuickTime next needs to be tasked. The callback procedure may
be called from interrupt-time or on Mac OS X from another thread,
so you must be careful not to do anything that might cause race
conditions. You can call the Carbon API to reschedule the Carbon
event loop timer from another thread. </p>
<p>You specify what scale you like, and when the callback is
returned, it will pass you a duration. </p>
<p>Note that you can install or uninstall more than one callback
procedure if necessary.</p>
<p>All callbacks will be called in sequence. You can also install
the same callback multiple times with different refcons. It will
be called once with each refcon value. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTUninstallNextTaskNeededSoonerCallback" title="QTUninstallNextTaskNeededSoonerCallback"></a><a name="//apple_ref/doc/c_ref/QTUninstallNextTaskNeededSoonerCallback" title="QTUninstallNextTaskNeededSoonerCallback"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTUninstallNextTaskNeededSoonerCallback" title="QTUninstallNextTaskNeededSoonerCallback"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_33"></a><h3 class="tight">QTUninstallNextTaskNeededSoonerCallback</h3>
<p class="spaceabove">Uninstalls your <code>NextTaskNeededSooner</code> callback
procedure. </p>
<p class="spaceabove"><pre>
QTUninstallNextTaskNeededSoonerCallback
(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTNextTaskNeededSoonerCallbackUPP" target="_top">QTNextTaskNeededSoonerCallbackUPP</a> callbackProc,
void * refcon);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>callbackProc</em></dt>
<dd><p>A callback procedure. </p></dd>
<dt><em>refcon</em></dt>
<dd><p>A reference constant. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine takes a callback procedure and your reference
constant, so that you can uninstall one instance of a callback you
have installed more than once with different refcons. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160839" title="The Idle Manager APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF171" title="The Idle Manager APIs"></a><h2>The Idle Manager
APIs</h2>
<p>QuickTime 6 introduces a new group of Idle Manager APIs that
let media handlers, data handlers, and movie importers report their
various QuickTime idling needs. These new APIs, discussed in this
section, include</p>
<ul class="ul"><li class="li"><p>QTIdleManagerSetNextIdleTime</p></li>
<li class="li"><p>QTIdleManagerSetNextIdleTimeNow</p></li>
<li class="li"><p>QTIdleManagerSetNextIdleTimeNever</p></li>
<li class="li"><p>QTIdleManagerSetNextIdleTimeDelta</p></li>
<li class="li"><p>MCSetIdleManager</p></li>
<li class="li"><p>MovieImportSetIdleManager</p></li>
<li class="li"><p>DataHSetIdleManager</p></li>
<li class="li"><p>MediaGGetIdleManager</p></li>
<li class="li"><p>MediaGSetIdleManager</p></li></ul>
<p>The Idle Manager introduced in QuickTime 6 is an opaque object
that your component can make calls against. </p>
<p>To work with the Idle Manager object, you have to implement
the appropriate <code>SetIdleManager</code> component
APIs, so that your component can be handed an Idle Manager. When
your component is handed an Idle Manager, you will need to tell
the Idle Manager when you next need to be idled. (Note that media
handlers also need to implement a <code>GetIdleManager</code> routine.)</p>
<p>When you next need to be idled means: if you idle me before
this time, I will do no work, so don&#8217;t bother. It&#8217;s a hint,
not explicit instructions. If you don&#8217;t tell the Idle Manager anything
different, then you&#8217;ll continue to be idled all the time because
the Idle Manager still thinks you need one back then, which is now.</p>
<p>In QuickTime 6, there are three types of components that can
get handed an Idle Manager object: </p>
<ul class="ul"><li class="li"><p>media handlers</p></li>
<li class="li"><p>data handlers</p></li>
<li class="li"><p>movie importers (but only certain types). </p></li></ul>
<p>Using these various Idle Manager routines, your component
can specify when it needs to be idled. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144123" title="Derived Media Handlers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF172" title="Derived Media Handlers"></a><h3>Derived Media
Handlers</h3>
<p>Derived media handlers are so called because they derive much
of their functionality from the base (or generic) media handler.
Historically, derived media handlers have requested idles from the
generic media handler by means of flags passed to <code>MediaSetHandlerCapabilities</code>. There
are three basic modes the derived media handler can request:</p>
<ol class="ol"><li class="li"><p>Don&#8217;t idle me (<code>noIdle</code>).</p></li>
<li class="li"><p>Idle me once per sample in my track (<code>0</code>).
No flags are set. </p></li>
<li class="li"><p>Idle me all the time (<code>noScheduler</code>, <code>wantsTime</code>,
or both). </p></li></ol>
<p>These modes can be changed at any time by calling <code>MediaSetHandlerCapabilities</code> again. </p>
<p>Derived media handlers that only use modes 1 and 2 don&#8217;t
need to do anything with Idle Management. All their Idle Management
will be handled for them by the generic media handler. They should
not implement <code>MediaGSetIdleManager</code> or <code>MediaGGetIdleManager</code>. </p>
<p>Derived media handlers that currently use mode 3, but would
like the ability to throttle back the idle rate, should implement <code>MediaGSetIdleManager</code> and <code>MediaGGetIdleManager</code>.
They can then use various Idle Manager routines to tell QuickTime
when they would like to be idled next. </p>
<a name="//apple_ref/c/func/MediaGGetIdleManager" title="MediaGGetIdleManager"></a><a name="//apple_ref/doc/c_ref/MediaGGetIdleManager" title="MediaGGetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaGGetIdleManager" title="MediaGGetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_34"></a><h3 class="tight">MediaGGetIdleManager</h3>
<p class="spaceabove">Retrieves the Idle Manager object from a derived media
handler. </p>
<p class="spaceabove"><pre>
MediaGGetIdleManager (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,
   <!--a-->IdleManager<!--/a--> * pim);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>A media handler component instance. </p></dd>
<dt><em>pim</em></dt>
<dd><p>A pointer to an idle manager that the media
handler will fill in. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine must be implemented by a derived media handler
that wants to report its idling needs. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/c/func/MediaGSetIdleManager" title="MediaGSetIdleManager"></a><a name="//apple_ref/doc/c_ref/MediaGSetIdleManager" title="MediaGSetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaGSetIdleManager" title="MediaGSetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_35"></a><h3 class="tight">MediaGSetIdleManager</h3>
<p class="spaceabove">Gives an Idle Manager object to a derived media handler,
so it can report its idling needs. </p>
<p class="spaceabove"><pre>
MediaGSetIdleManager (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,
   <!--a-->IdleManager<!--/a--> im);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>A media handler component instance. </p></dd>
<dt><em>im</em></dt>
<dd><p>An idle manager. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine must be implemented by a derived media handler
that wants to report its idling needs.</p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144167" title="What To Do Next"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF173" title="What To Do Next"></a><h2>What To Do Next</h2>
<p>After receiving an idle manager by means of the above calls,
a derived media handler can call the following routines to tell
QuickTime when they need to be idled next:</p>
<ul class="ul"><li class="li"><p><code>QTIdleManagerSetNextIdleTime</code></p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeNever</code></p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeNow</code></p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeDelta</code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144173" title="Three Useful Idle Manager Calls"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF174" title="Three Useful Idle Manager Calls"></a><h2>Three Useful
Idle Manager Calls</h2>
<p>There are three useful Idle Manager calls you should consider:</p>
<ol class="ol"><li class="li"><p><code>QTIdleManagerSetNextIdleTimeNow</code>,
which specifies that your component needs an idle now. The only
parameter is your Idle Manager. </p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeNever</code>,
which specifies that your component will not need to be idled until
further notice&#8211;&#8211;in other words, don&#8217;t idle me. </p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeDelta</code>,
which specifies that your component needs to be idled this amount
of time from now. Using this routine will get you one idle. If you
don&#8217;t specify anything different, then you&#8217;ll continue to be
idled all the time because the Idle Manager still thinks you need
one back then, which is now. Every time you get idled, you need
to tell the Idle Manager again when your next idle needs to be.
This call will tell the Idle Manager how long when you pass in a
duration, but then you have to tell it what the units of that duration
are. </p></li></ol>
<a name="//apple_ref/c/func/QTIdleManagerSetNextIdleTimeNow" title="QTIdleManagerSetNextIdleTimeNow"></a><a name="//apple_ref/doc/c_ref/QTIdleManagerSetNextIdleTimeNow" title="QTIdleManagerSetNextIdleTimeNow"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTIdleManagerSetNextIdleTimeNow" title="QTIdleManagerSetNextIdleTimeNow"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_36"></a><h3 class="tight">QTIdleManagerSetNextIdleTimeNow</h3>
<p class="spaceabove">Specifies that your component needs to be idled now.</p>
<p class="spaceabove"><pre>
QTIdleManagerSetNextIdleTimeNow (<!--a-->IdleManager<!--/a--> im);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>im</em></dt>
<dd><p>An idle manager.	</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine specifies that the calling component needs to
be idled right away, that is, continuously, until further notice. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTIdleManagerSetNextIdleTimeNever" title="QTIdleManagerSetNextIdleTimeNever"></a><a name="//apple_ref/doc/c_ref/QTIdleManagerSetNextIdleTimeNever" title="QTIdleManagerSetNextIdleTimeNever"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTIdleManagerSetNextIdleTimeNever" title="QTIdleManagerSetNextIdleTimeNever"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_37"></a><h3 class="tight">QTIdleManagerSetNextIdleTimeNever</h3>
<p class="spaceabove">Specifies that your component will not need to be idled
until further notice.</p>
<p class="spaceabove"><pre>
QTIdleManagerSetNextIdleTimeNever (<!--a-->IdleManager<!--/a--> im);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>im</em></dt>
<dd><p>An idle manager.<code> 	</code>	</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine specifies that your component should not be idled. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTIdleManagerSetNextIdleTimeDelta" title="QTIdleManagerSetNextIdleTimeDelta"></a><a name="//apple_ref/doc/c_ref/QTIdleManagerSetNextIdleTimeDelta" title="QTIdleManagerSetNextIdleTimeDelta"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTIdleManagerSetNextIdleTimeDelta" title="QTIdleManagerSetNextIdleTimeDelta"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_38"></a><h3 class="tight">QTIdleManagerSetNextIdleTimeDelta</h3>
<p class="spaceabove">Specifies that your component needs to be idled a certain
amount of time from now&#8211;&#8211;for example, a quarter of second from
now, or three seconds from now.</p>
<p class="spaceabove"><pre>
QTIdleManagerSetNextIdleTimeDelta (<!--a-->IdleManager<!--/a--> im,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeValue" target="_top">TimeValue</a> duration,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeScale" target="_top">TimeScale</a> scale);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>im</em></dt>
<dd><p>An idle manager. </p></dd>
<dt><em>duration</em></dt>
<dd><p>The time from now in the scale specified. </p></dd>
<dt><em>scale</em></dt>
<dd><p>The time scale. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine lets you pass in a duration and a scale. For
example, if you need an idle a half second from now, you can pass
in a duration of 500 and a scale of 1000, or a pass in a duration
of 1 and scale of 2. In both cases, this is a half second. Typically,
developers will have a time scale they are used to working in, such
as milliseconds or 60ths of a second. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144235" title="General Purpose Idle Manager API"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF175" title="General Purpose Idle Manager API"></a><h2>General Purpose
Idle Manager API</h2>
<p>There is a more general purpose Idle Manager call for specifying
absolute wallclock time of the next required idle. </p>
<p>QTIdleManagerSetNextIdleTime can be called to do this, passing
in a fully filled out <code>TimeRecord</code>,
using QuickTime&#8217;s wallclock timebase. Note that any derived media
handlers that use this call may need to do their computations in
track time, and then convert to wallclock time, using <code>ConvertTime</code>.
The wallclock timebase can be found by calling <code>QTGetWallClockTimeBase</code>. </p>
<a name="//apple_ref/c/func/QTIdleManagerSetNextIdleTime" title="QTIdleManagerSetNextIdleTime"></a><a name="//apple_ref/doc/c_ref/QTIdleManagerSetNextIdleTime" title="QTIdleManagerSetNextIdleTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTIdleManagerSetNextIdleTime" title="QTIdleManagerSetNextIdleTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_39"></a><h3 class="tight">QTIdleManagerSetNextIdleTime</h3>
<p class="spaceabove">Specifies the next time to idle. </p>
<p class="spaceabove"><pre>
QTIdleManagerSetNextIdleTime (<!--a-->IdleManager<!--/a--> im,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeRecord" target="_top">TimeRecord</a> * nextIdle);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>im</em></dt>
<dd><p>An idle manager. </p></dd>
<dt><em>nextIdle</em></dt>
<dd><p>A pointer to a <code>TimeRecord</code> containing
the wallclock time when the calling component would like to be idled. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If your component needs to call <code>QTIdleManagerSetNextIdleTime</code>,
you need to do wallclock time calculations, so you need to call
QTGetWallClockTimeBase. </p>
<div class="codesample"><table><tr><td scope="row"><pre>QTGetWallClockTimeBase (TimeBase * wallClockTimeBase)<span></span></pre></td></tr></table></div>
<p>In addition, you may need to call <code>ConvertTime()</code> in
order to convert from track time or media time to wallclock time,
and <code>ConvertTimeScale()</code> in
order to convert to the timescale you like to work in. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-182442" title="Data Handlers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF176" title="Data Handlers"></a><h2>Data Handlers</h2>
<p>Certain data handlers support scheduling reads in the future.
These data handlers implement <code>DataHTask</code>,
so that they will have an opportunity to start that read sometime
later. These data handlers can throttle back the calls to <code>DataHTask</code> by
implementing <code>DataHSetIdleManager</code>,
and using the Idle Manager calls to say when they want to be idled
next. </p>
<a name="//apple_ref/c/func/DataHSetIdleManager" title="DataHSetIdleManager"></a><a name="//apple_ref/doc/c_ref/DataHSetIdleManager" title="DataHSetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DataHSetIdleManager" title="DataHSetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_40"></a><h3 class="tight">DataHSetIdleManager</h3>
<p class="spaceabove">Gives an Idle Manager object to a data handler, so it
can report its idling needs.</p>
<p class="spaceabove"><pre>
DataHSetIdleManager (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh,
   <!--a-->IdleManager<!--/a--> im);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>dh</em></dt>
<dd><p>A data handler component instance.</p></dd>
<dt><em>im</em></dt>
<dd><p>An idle manager.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine must be implemented by a data handler that wants
to report its idling needs.</p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-182977" title="What To Do Next"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF177" title="What To Do Next"></a><h3>What To Do Next</h3>
<p>After receiving an idle manager by means of the above calls,
a data handler can call the following routines to tell QuickTime
when they need to be idled next:</p>
<ul class="spaceabove"><li class="li"><p><code>QTIdleManagerSetNextIdleTime</code></p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeNever</code></p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeNow</code></p></li>
<li class="li"><p><code>QTIdleManagerSetNextIdleTimeDelta</code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144291" title="Movie Importers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF178" title="Movie Importers"></a><h2>Movie Importers</h2>
<p>In general, movie importers don&#8217;t get idled. Typically,
a movie importer just examines a file, scans it, and then creates
a movie that will point at the file and describe how to play it. The
media data is in that file, but the movie itself is in memory. </p>
<p>There is a special kind of movie importer component that remains
open to do further work after the movie is constructed. These importers
implement <code>MovieImportIdle</code>.
These &#8220;idling importers&#8221; can throttle back their idles by implementing <code>MovieImportSetIdleManager</code>,
and then using the Idle Manager calls to specify when they want
to be idled next. </p>
<a name="//apple_ref/c/func/MovieImportSetIdleManager" title="MovieImportSetIdleManager"></a><a name="//apple_ref/doc/c_ref/MovieImportSetIdleManager" title="MovieImportSetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MovieImportSetIdleManager" title="MovieImportSetIdleManager"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_41"></a><h3 class="tight">MovieImportSetIdleManager</h3>
<p class="spaceabove">Gives an Idle Manager object to a movie importer component,
so it can report its idling needs.</p>
<p class="spaceabove"><pre>
MovieImportSetIdleManager (<a href="../../Reference/QTRef_MovieComponents/Reference/reference.html#//apple_ref/doc/c_ref/MovieImportComponent" target="_top">MovieImportComponent</a> ci,
   <!--a-->IdleManager<!--/a--> im);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>A movie importer component instance.</p></dd>
<dt><em>im</em></dt>
<dd><p>An idle manager. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine must be implemented by a movie importer that
wants to report its idling needs. </p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160843" title="New Carbon Movie Control"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF179" title="New Carbon Movie Control"></a><h2>New Carbon Movie
Control</h2>
<p>QuickTime 6 for Mac OS X introduces the Carbon Movie Control.
This mechanism makes the process of using QuickTime within a Carbon
Event-based application easier and faster. This is accomplished
by using a single API that can be shared among all such applications.</p>
<p>This API accepts a movie and a window and will construct a
control containing a standard movie controller. The control can
then act as a Carbon Event target, receiving Carbon Events and dispatching
them to its movie controller. Using this mechanism, an application does
not need to use <code>WaitNextEvent()</code> and
calls to <code>MCIsPlayerEvent()</code>.
In addition, the movie controller is automatically idled by means
of an event loop timer, using the Idle Manager to optimize idling
frequency. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144315" title="Background "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF180" title="Background "></a><h3>Background </h3>
<p>QuickTime movie playback APIs have traditionally been dependent
on the classic Macintosh application paradigm, i.e., the <code>WaitNextEvent()</code> loop.
In this loop, an application delegates events to a movie&#8217;s Movie
Controller (if present) and shares some of its idle time with QuickTime,
which results in &#8220;idling&#8221; of movies. In the cooperatively scheduled
world of Mac OS 9 and earlier versions of the Macintosh operating
system, this scheme worked well.</p>
<p>In Mac OS X, however, a new application paradigm was introduced.
This paradigm depends on Carbon Events and associated handlers to
communicate user events to the application. Older models that rely
on periodic polling are replaced by the more &#8220;tunable&#8221; event
loop timer mechanism, which enables an application to have greater
precision over the frequency of idling. </p>
<p>As a consequence, application developers may need to construct
event handlers for their windows to funnel events to their Movie
Controllers and create event loop timers to &#8220;idle&#8221; their movies.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144321" title="How It Works&amp;#8211;&amp;#8211;An Event Target"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF181" title="How It Works&amp;#8211;&amp;#8211;An Event Target"></a><h3>How It Works&#8211;&#8211;An
Event Target</h3>
<p>The Carbon Movie Control is implemented as a custom control,
which installs an event handler to handle the Carbon Events sent
to controls. When a Carbon Movie Control is created for a movie,
a movie controller is also created. The movie control then directs
User Interface events to this movie controller.</p>
<p>The application can install event handlers on the Carbon Movie
Control to handle such things as contextual menu clicks or to intercept
events to do special processing. Control Manager calls can be made
as well. For example, the <code>GetControlBounds()</code> and <code>SetControlBounds()</code> functions
can be used to obtain or modify the control&#8217;s size and location.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144327" title="Providing Time to Movies"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF182" title="Providing Time to Movies"></a><h3>Providing Time
to Movies</h3>
<p>The Carbon Movie Control&#8217;s custom control implementation
takes care of all event routing to the movie. In order to distribute
time to these movies, an event loop timer is set up which &#8220;idles&#8221;
all movie controllers associated with Carbon Movie Controls within
the application. The frequency of this timer is set using information
it gets from the QuickTime Task Management APIs, discussed in the
section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160835">“New APIs for Tasking QuickTime.”</a></span> Thus, the amount of time
devoted to movie processing is minimized.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144333" title="Support for Editing"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF183" title="Support for Editing"></a><h3>Support for Editing</h3>
<p>The Carbon Movie Control also supports basic movie editing
features, such as cut, copy, paste, and clear, and performs the
work of updating the Edit menu, enabling or disabling editing command
items as appropriate.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144339" title="Interface"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF184" title="Interface"></a><h3>Interface</h3>
<p>The interface for the Carbon Movie Control feature is a single
API routine:</p>
<a name="//apple_ref/c/func/CreateMovieControl" title="CreateMovieControl"></a><a name="//apple_ref/doc/c_ref/CreateMovieControl" title="CreateMovieControl"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-CreateMovieControl" title="CreateMovieControl"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_42"></a><h3 class="tight">CreateMovieControl</h3>

<p class="spaceabove"><pre>
OSErr CreateMovieControl (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/WindowRef" target="_top">WindowRef</a> theWindow,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Rect" target="_top">Rect</a> *localRect,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie,
   UInt32 options,
   <a href="../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/doc/c_ref/ControlRef" target="_top">ControlRef</a> *returnedControl);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theWindow</em></dt>
<dd><p>The window in which the control is placed. </p></dd>
<dt><em>localRect</em></dt>
<dd><p>The rectangle in the local coordinates of
the window in which the movie control is placed. If NULL is passed
for <code>localRect</code>, the movie
control is positioned at 0,0 within the window and will have the
natural dimensions of the movie, plus height of the movie controls,
if visible. If the <code>localRect</code> has 0
height and width (top == bottom, left == right) it is interpreted
as an anchor point and the top left point of the movie control will
be located at this position. Its height and width will be as in
the NULL rectangle case. For all other cases of rectangles, the
movie control is centered within the rectangle by default and will
be sized to fit within it while maintaining the movie&#8217;s aspect
ratio.</p></dd>
<dt><em>theMovie</em></dt>
<dd><p>The movie to be displayed within the movie
control.</p></dd>
<dt><em>options</em></dt>
<dd><p>A bitmask containing zero or more option bits:										</p><dl class="termdef">	
<dt><code>kMovieControlOptionHideController</code></dt>
<dd>						<p>The movie controller is hidden when the
movie control is drawn.</p></dd>
<dt><code>kMovieControlOptionLocateTopLeft</code></dt>
<dd>	<p>The movie is pinned to the top left of the localRect
rather then being centered within it.</p></dd>
<dt><code>kMovieControlOptionEnableEditing</code></dt>
<dd>	<p>Allows programmatic editing of the movie and
enables drag and drop.</p></dd>
<dt><code>kMovieControlOptionHandleEditingHI</code></dt>
<dd>	<p>Installs event handler for Edit menu commands
and menu updating (also asserts <code>kMovieControlOptionEnableEditing</code>).</p></dd>
<dt><code>kMovieControlOptionSetKeysEnabled</code></dt>
<dd>	<p>Allows the movie control to react to keystrokes
and participate in the keyboard focus mechanism within the window.</p></dd>
<dt><code>kMovieControlOptionManuallyIdled</code></dt>
<dd>						<p>Rather than being idled by the movie control
event loop timer, this movie control is idled by the application, manually.</p></dd></dl></dd>
<dt><em>returnedControl</em></dt>
<dd>		<p>This is the Movie Control, suitable
for passing to Control Manager APIs.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine returns an error if there is a problem with one
of the parameters or if an error occurred while creating the underlying
movie controller or the custom control itself. If an error is returned,
the value of <code>returnedControl</code> is
undefined.</p>
<p>The control can be deleted by calling <code>DisposeControl()</code>.
Note that the control is automatically disposed of if the enclosing
window is destroyed. Note, too, that the underlying movie controller
is disposed of when the control is deleted.</p>
<p>Introduced in QuickTime 6.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>Supported on Mac OS X</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144358" title="Access to Underpinnings"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF185" title="Access to Underpinnings"></a><h2>Access to Underpinnings</h2>
<p>Once a movie control is created, you can access its associated
movie, its underlying movie controller or change certain options
using the <code>GetControlData()</code> and <code>SetControlData()</code> routines.</p>
<p>The following are the selectors that can be passed to these
control manager functions:</p>
<dl class="termdef">	<dt><code>kMovieControlDataMovieController</code></dt>
<dd><p>Use with <code>GetControlData()</code> to
obtain the movie controller. This allows the application access
to more features of QuickTime and finer control over aspects of
movie playback and editing.  IMPORTANT NOTE: Do not dispose of this
movie controller; it is owned by the movie control it is associated
with. You also must not use <code>MCSetControllerAttached()</code> to
detach the controller from the movie.</p></dd>
<dt><code>kMovieControlDataMovie</code></dt>
<dd><p>A <code>GetControlData()</code> convenience
to obtain the movie associated with a movie control after its creation.</p></dd>
<dt><code>kMovieControlDataManualIdling</code></dt>
<dd>	<p>Used with <code>GetControlData()</code> and <code>SetConrolData()</code> to
obtain and modify the state of the movie control&#8217;s idling behavior.
By default, all movie controls are given time by the movie control
event loop timer. Setting this Boolean item to <code>TRUE</code> will
allow the application to manually idle the movie using <code>MCIdle()</code>.</p></dd></dl>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160847" title="Sprite API Changes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF186" title="Sprite API Changes"></a><h2>Sprite API Changes</h2>
<p>QuickTime 6 introduces a new group of APIs that enable software
application developers to request, display, and manage images that
are hosted outside of the Movie in which they are used. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144364" title="Loading Images into a Sprite Track"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF187" title="Loading Images into a Sprite Track"></a><h3>Loading Images
into a Sprite Track</h3>
<p>Each sprite in a sprite track has an image associated to it.
Typically, that image is visible to the user when the movie is presented.
A Sprite track can have a number of images in it and you can assign
another image to a sprite by setting its image index. </p>
<p>In general, many of the images that could be used in interactive
Web content are simultaneously being integrated into HTML, perhaps
updated by server-side scripts, created by art departments in larger
production teams, or are simply not available during the Movie authorship
process. In earlier versions of QuickTime, it was not possible for
a movie author to manage the dynamic loading and processing of sprite
images. Images had to be integrated into the movie when it was generated. </p>
<p>Now, in QuickTime 6, with two simple sprite track wired actions
(discussed in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-188556">“New Sprite Actions”</a></span>), the movie
author can load any image format supported by QuickTime, either
from a local or remote source, and manage its display and persistence during
the playback of a movie. Sprite images, like sprites before them,
now have two unique identifiers associated with them to help movie
creators manage many images over the course of a movie&#8217;s lifetime,
index and ID.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144370" title="New Sprite APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF188" title="New Sprite APIs"></a><h3>New Sprite APIs</h3>
<p>The following APIs, discussed in this section, are new in
QuickTime 6.</p>
<a name="//apple_ref/c/func/SpriteMediaNewImage" title="SpriteMediaNewImage"></a><a name="//apple_ref/doc/c_ref/SpriteMediaNewImage" title="SpriteMediaNewImage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SpriteMediaNewImage" title="SpriteMediaNewImage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_43"></a><h3 class="tight">SpriteMediaNewImage</h3>
<p class="spaceabove">Creates a new sprite image.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a>  SpriteMediaNewImage (                     // IV-2677
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>   mh,   // IV-2677
   <!--a-->Handle<!--/a--> dataRef,      // IV-2683
   <!--a-->OSType<!--/a--> dataRefType,  // IV-2695
   <!--a-->QTATomID<!--/a--> desiredID );// IV-2675
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>The sprite media handler for this operation.</p></dd>
<dt><em>dataRef</em></dt>
<dd><p>A pointer to the url <code>dataRef</code> or
an alias that references the image to be added to the sprite track.</p></dd>
<dt><em>dataRefType</em></dt>
<dd><p>A <code>FourCharCode</code> describing
the <code>dataRef</code> parameter.
For example, you can use <code>URLDataHandlerSubType</code> if
the <code>dataRef</code> is a URL.</p></dd>
<dt><em>QTAtomID</em></dt>
<dd><p>A <code>long</code> used
to request a unique ID identifier for the image. If the requested ID
is in use, the call fails. If a 0 is passed in, NewImage will assign
the next available (incremental) integer ID&#8211;&#8211;which is usually
the same as the next available index, unless that ID has been previously
assigned.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	 If successful, the
new image can be used by the target sprite track like any other
sprite image. The image is referenced by the next available image index,
equal to the number of images in the track before the call was made +
1, and by the ID that was requested via parameter or was automatically assigned.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/SpriteMediaDisposeImage" title="SpriteMediaDisposeImage"></a><a name="//apple_ref/doc/c_ref/SpriteMediaDisposeImage" title="SpriteMediaDisposeImage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SpriteMediaDisposeImage" title="SpriteMediaDisposeImage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_44"></a><h3 class="tight">SpriteMediaDisposeImage</h3>
<p class="spaceabove">Frees the memory allocated for a new sprite image, and
removes that image from the track.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a>  SpriteMediaDisposeImage (                   // IV-2677
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,   // IV-2677
   short imageIndex );// IV-2687
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>The sprite media handler for this operation.</p></dd>
<dt><em>imageIndex </em></dt>
<dd><p>The index of a sprite image previously acquired
via a <code>SpriteMediaNewImage</code> call.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>Function Result: The image disposed of is no longer available
to the sprite track, and the image index location will remain &#8220;empty&#8221;
for the duration of the current key sample.</p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file:<code> Movies.h</code></p>
<a name="//apple_ref/c/func/SpriteMediaImageIndexToID" title="SpriteMediaImageIndexToID"></a><a name="//apple_ref/doc/c_ref/SpriteMediaImageIndexToID" title="SpriteMediaImageIndexToID"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SpriteMediaImageIndexToID									" title="SpriteMediaImageIndexToID"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_45"></a><h3 class="tight">SpriteMediaImageIndexToID</h3>
<p class="spaceabove">Returns the ID of a particular image given the index of
that image.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a>  SpriteMediaImage  (                         // IV-2677
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,         // IV-2677
   short imageIndex,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTAtomID" target="_top">QTAtomID</a> *imageID );     // IV-2687
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>The sprite media handler for this operation.</p></dd>
<dt><em>imageIndex</em></dt>
<dd><p>The index of a sprite image.</p></dd>
<dt><em>imageID</em></dt>
<dd><p>On return, a pointer to the ID of the image.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	You can access Movie
Toolbox error returns through <code>GetMoviesError</code> (I-505) and <code>GetMoviesStickyError</code> (I-506),
as well as in the function result. See Error Codes (IV-2718).</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>Introduced in QuickTime 6.</p>
<a name="//apple_ref/c/func/SpriteMediaImageIDToIndex" title="SpriteMediaImageIDToIndex"></a><a name="//apple_ref/doc/c_ref/SpriteMediaImageIDToIndex" title="SpriteMediaImageIDToIndex"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SpriteMediaImageIDToIndex									" title="SpriteMediaImageIDToIndex"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_46"></a><h3 class="tight">SpriteMediaImageIDToIndex</h3>
<p class="spaceabove">Returns the index of a particular image, given the ID
of that image.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a>  SpriteMediaImage  (                         // IV-2677
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,         // IV-2677
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTAtomID" target="_top">QTAtomID</a> imageID,        // IV-2687
   short *imageIndex );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh</em></dt>
<dd><p>The sprite media handler for this operation.</p></dd>
<dt><em>imageID</em></dt>
<dd><p>The ID of a sprite image.</p></dd>
<dt><em>imageIndex</em></dt>
<dd><p>On return, a pointer to the index of the image.</p></dd></dl>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>Function Result: If no image is found with a corresponding
ID, the image index returned will be 0.</p>
<p>Introduced in QuickTime 6.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-187115" title="Sprite Hit-Testing Mode"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF189" title="Sprite Hit-Testing Mode"></a><h2>Sprite Hit-Testing
Mode</h2>
<p>When a sprite is clicked in a sprite track, it &#8220;receives&#8221;
the mouse click. However, there are times when you may want to have
sprites that do not receive a mouse click, and instead, you want
the mouse click to &#8220;pass through&#8221; that sprite (and on to another
sprite or perhaps another track behind the sprite track). In earlier
versions of QuickTime, this was not possible.</p>
<p>In QuickTime 6, however, this behavior&#8211;&#8211;passing a mouse
click through a sprite&#8211;&#8211;can be controlled through a new sprite
property. In addition, you can control all the sprites in a sprite
track through a new sprite track property.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-187133" title="Controlling Hit-Testing Mode of an Individual Sprite"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF190" title="Controlling Hit-Testing Mode of an Individual Sprite"></a><h3>Controlling Hit-Testing
Mode of an Individual Sprite</h3>
<p>In QuickTime 6, each sprite has a property: </p>
<div class="codesample"><table><tr><td scope="row"><pre>canBeHitTested<span></span></pre></td></tr></table></div>
<p>This property can have a Boolean value of either <code>TRUE</code> or <code>FALSE</code>. </p>
<p>When a sprite is created, this property is defaulted to <code>TRUE</code>.
The property is an actual property of sprites within a sprite world.
Thus, this property can be set and retrieved by means of sprite
world calls directly: <code>SetSpriteProperty</code> and <code>GetSpriteProperty</code>,
using the <code>kSpritePropertyCanBeHitTested</code> (defined
in <code>Movies.h</code>) constant
and passing and receiving the property value of <code>TRUE</code> or <code>FALSE</code>.
Further, when calling a sprite world&#8217;s <code>SpriteHitTest</code> or <code>SpriteWorldHitTest</code> routines,
you can pass the new flag <code>spriteHitTestTreatAllSpritesAsHitTestable</code> to
have SpriteWorld&#8217;s hit testing ignore the individual sprites&#8217;
own <code>canBeHitTested</code> property
and make all sprites hit testable. Note there is no flag for making
all sprites not hit testable. </p>
<p>Since sprite media uses sprite world, this property can also
be manipulated by means of SpriteMedia calls: <code>SpriteSetSpriteProperty</code> and <code>SpriteGetSpriteProperty</code>,
passing <code>kSpritePropertyCanBeHitTested</code> and
passing/receiving the property value of <code>TRUE</code> or <code>FALSE</code>. </p>
<p>Finally, this property can be manipulated by means of non-primary
source data using the <code>kTrackModifierObjectCanBeHitTested</code> (also
defined in <code>Movies.h</code>)
constant. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-187260" title="Controlling Hit-Testing Mode of a Sprite Track"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF191" title="Controlling Hit-Testing Mode of a Sprite Track"></a><h3>Controlling Hit-Testing
Mode of a Sprite Track</h3>
<p>Sprite Tracks in QuickTime have a property: </p>
<div class="codesample"><table><tr><td scope="row"><pre>allSpritesHitTestingMode<span></span></pre></td></tr></table></div>
<p>It can have three values, as defined in <code>MovieToolbox.h</code>: </p>
<div class="codesample"><table><tr><td scope="row"><pre>kSpriteHitTestUseSpritesOwnPropertiesMode = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>kSpriteHitTestTreatAllSpritesAsHitTestableMode = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>kSpriteHitTestTreatAllSpritesAsNotHitTestableMode = 2<span></span></pre></td></tr></table></div>
<p>When a sprite track is created, this property defaults to <code>kSpriteHitTestUseSpritesOwnPropertiesMode</code>. </p>
<p>This property can be specified in the media by having a <code>QTAtom</code> of
type <code>kSpriteTrackPropertyAllSpritesHitTestingMode</code>,
a size of <code>short</code>, and
a value of 0, 1 or 2. </p>
<p>Also, this property can be set at runtime by means of <code>SpriteSetSpriteProperty</code>,
which normally is used to set properties of sprites, but has been
overloaded to now be able to set track properties. To do so, the
spriteID should be equal to <code>FOUR_CHAR_CODE('Trck')</code>,
the property type should be <code>kSpriteTrackPropertyAllSpritesHitTestingMode</code> and
then the property value should be 0, 1, or 2. </p>
<p>Correspondingly, the track property can be retrieved via <code>SpriteGetSpriteProperty</code> with
a sprite ID of <code>FOUR_CHAR_CODE('Trck')</code> and
a property type of <code>kSpriteTrackPropertyAllSpritesHitTestingMode</code>.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-187369" title="Handling Mouse Clicks"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF192" title="Handling Mouse Clicks"></a><h3>Handling Mouse
Clicks</h3>
<p>When a mouse click occurs within a sprite track, the sprite
media handler will first examine its <code>kSpriteTrackPropertyAllSpritesHitTestingMode</code> property
to see how to handle the click.</p>
<p>If the property is set to <code>kSpriteHitTestUseSpritesOwnPropertiesMode</code>,
the sprite media handler will then use the individual hit testing
property <code>kSpritePropertyCanBeHitTested</code> of
the sprite clicked on to determine if the sprite will &#8220;receive&#8221;
the click or not. If not (i.e., the sprite&#8217;s <code>kSpritePropertyCanBeHitTested</code> property
is <code>FALSE</code>), and the mouse
click is over another sprite, the media handler will then consider
that sprite&#8217;s <code>kSpritePropertyCanBeHitTested</code> property
and, if <code>TRUE</code>, will have
that sprite receive the mouse click. If <code>FALSE</code>,
then the process continues with other sprites under the mouse until
one receives it or there are no further sprites at the location
of the mouse click. If none, the sprite media handler will inform
QuickTime it does not wish to handle the mouse click at all, which
will then propagate the mouse click to the Track underneath it in
the movie.</p>
<p>If the <code>kSpriteTrackPropertyAllSpritesHitTestingMode</code> property
of a Sprite Track is set to <code>kSpriteHitTestTreatAllSpritesAsHitTestableMode</code>,
then the sprite media handler will ignore the <code>kSpritePropertyCanBeHitTested</code> sprite
properties of all sprites within the track and instead consider
all the sprites as being able to receive mouse clicks.</p>
<p>If the <code>kSpriteTrackPropertyAllSpritesHitTestingMode</code> property
of a Sprite Track is set to <code>kSpriteHitTestTreatAllSpritesAsNotHitTestableMode</code>,
then the sprite media handler will ignore the <code>kSpritePropertyCanBeHitTested</code> sprite
properties of all sprites within the track and instead consider
all the sprites as being unable to receive mouse clicks.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-187454" title="Sprite Track Setting Enhancements"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF193" title="Sprite Track Setting Enhancements"></a><h3>Sprite Track Setting
Enhancements</h3>
<p>A Sprite Track enhancement is provided in QuickTime 6 that
gives content creators, primarily, and users, secondarily, greater
flexibility and control over the pixel depth of the offscreen Graphics
World (GWorld) that a Sprite Track utilizes for the composition
and management of its sprites.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-187467" title="Limited Control of Offscreen Bit Depth"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF194" title="Limited Control of Offscreen Bit Depth"></a><h4>Limited Control
of Offscreen Bit Depth</h4>
<p>In earlier versions of QuickTime, there was a limited amount
of control a content creator or user had over the offscreen bit
depth. In the QuickTime Player Properties 2 Info Panel of a Sprite
Track, you could choose one of these options:</p>
<ul class="spaceabove"><li class="li"><p>Best Depth. 	 (Have the Sprite Track determine
empirically the 	best depth for the track)</p></li>
<li class="li"><p>256. 		 (8-bit Pixels)</p></li>
<li class="li"><p>Thousands. 	(16-bit Pixels</p></li>
<li class="li"><p>Millions+. 	(32-bit Pixels)</p></li></ul>
<br/><div><img src = "../Art/sprite_pref_depth.gif" alt = "image: ../Art/sprite_pref_depth.gif" width="372" height="330"></div><br/>
<p>Each option is at best a suggestion to the Sprite Track as
to what the offscreen bit depth should be. Even though, for example,
256 is selected, the Sprite Track might, depending on various parameters&#8211;&#8211;such
as monitor bit depth, memory constraints, track or sprite graphics
modes&#8211;&#8211;create an 8-bit offscreen, a 16-bit offscreen or even
a 32-bit offscreen graphics world.</p>
<p>While this may at times yield better visual results, it also
may result in poor memory usage, degraded performance, or even worse&#8211;&#8211;a
visual result not intended by the content creator.</p>
<p>Although such a suggestive approach makes sense for the Best
Depth setting where the user is explicitly asking the Sprite Track
to make such a decision, it may be counter-productive for the other
three available choices.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-187906" title="New Preferred Bit Depth Info Panel"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF195" title="New Preferred Bit Depth Info Panel"></a><h3>New Preferred
Bit Depth Info Panel</h3>
<p>QuickTime 6 now provides users with greater control and flexibility
over the depth of the Sprite Track offscreen graphics world. To
accomplish this, QuickTime 6 has added a new mode, called Actual
Depth, that has the same four options as Best Depth, 256, Thousands and
Millions+. </p>
<p>Note that for purposes of backward compatibility, QuickTime
also maintains the old method, which is called Preferred Mode.</p>
<p>The difference between Actual and Preferred modes is that
in Actual Mode, a choice of 256, Thousands or Millions+ dictates
that the Sprite Track offscreen depth be exactly as chosen. This
provides explicit choice and control over image quality, performance
and memory usage.</p>
<p>The option of Best Depth under Actual Mode is analogous to
Best Depth under preferred Mode: although the algorithms differ
slightly, both modes allow the Sprite Track to determine the offscreen
bit depth according to what is best under the current circumstances.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-188004" title="Switching Between Modes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF196" title="Switching Between Modes"></a><h3>Switching Between
Modes</h3>
<p>A user can switch any sprite movie from Preferred Mode to
Actual Mode and from Actual Mode to Preferred Mode by holding down
the Option Key on Mac OS 9 or Mac OS X, or the Alt Key on Windows
while clicking the Set button in the Properties 2 Info Panel and subsequently
clicking the OK button in the dialog that comes up and allows you
to choose a setting. If you choose Cancel in the dialog, there is
no change in mode.</p>
<br/><div><img src = "../Art/sprite_act_depth.gif" alt = "image: ../Art/sprite_act_depth.gif" width="372" height="330"></div><br/>
<p>The user can tell if a Sprite Track is in Actual or Preferred
mode, as the label in the Info Panel switches on the fly between
&#8220;Actual Depth:&#8221; and &#8220;Preferred Depth:&#8221;.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-188242" title="A New Sprite Track Property"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF197" title="A New Sprite Track Property"></a><h3>A New Sprite Track
Property</h3>
<p>In order to support the new Actual Depth mode, a new Sprite
Track Property has been added:</p>
<div class="codesample"><table><tr><td scope="row"><pre>kSpriteTrackPropertyPreferredDepthInterpretationMode = 109<span></span></pre></td></tr></table></div>
<p>This property is optional. If the property is absent, the
Sprite Track operates in Preferred Depth mode.</p>
<p>If this property is present, it has a single value, of size
short, that can be one of these values: </p>
<ul class="spaceabove"><li class="li"><p><code>kSpriteTrackPreferredDepthCompatibilityMode
= 0</code></p></li>
<li class="li"><p><code>kSpriteTrackPreferredDepthModernMode
= 1</code></p></li></ul>
<p>If the value of this property is <code>kSpriteTrackPreferredDepthCompatibilityMode</code>,
then the Sprite Track operates in Preferred Depth mode. However,
if the value is <code>kSpriteTrackPreferredDepthModernMode</code>, then
the Sprite Track operates in the new Actual Depth Mode.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-188386" title="Using the SpriteSetSpriteProperty API"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF198" title="Using the SpriteSetSpriteProperty API"></a><h3>Using the 
<code>SpriteSetSpriteProperty</code> API</h3>
<p>To programmatically set the Sprite Track depth mode, you use
the <code>SpriteSetSpriteProperty</code> call of
the Sprite Media Handler:</p>
<div class="codesample"><table><tr><td scope="row"><pre>pascal ComponentResult SpriteSetSpriteProperty(Media media,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                QTAtomID spriteID,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                long propertyType,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                void *propertyValue);<span></span></pre></td></tr></table></div>
<p>Pass a four character code of <code>&#8216;Trck&#8217;</code> for
the spriteID and specify <code>kSpriteTrackPropertyPreferredDepthInterpretationMode</code> as
the property type. Finally, pass a value of <code>kSpriteTrackPreferredDepthCompatibilityMode</code> or <code>KSpriteTrackPreferredDepthModernMode</code> directly
as the <code>propertyValue</code>. </p>
<p>For example, to Set a Sprite Track to use the Actual Depth
mode:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    error = SpriteSetSpriteProperty(SpriteMedia,<span></span></pre></td></tr><tr><td scope="row"><pre>                &#8216;Trck&#8217;,<span></span></pre></td></tr><tr><td scope="row"><pre>                kSpriteTrackPropertyPreferredDepthInterpretationMode<span></span></pre></td></tr><tr><td scope="row"><pre>                kSpriteTrackPreferredDepthModernMode,);<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-188543" title="New Wired Actions and Operands"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF199" title="New Wired Actions and Operands"></a><h3>New Wired Actions
and Operands</h3>
<p>The following wired actions and operands are new in QuickTime
6. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-188556" title="New Sprite Actions "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF200" title="New Sprite Actions "></a><h4>New Sprite Actions </h4>
<p>The following new actions enable interactive content creators
to request, display, and manage images hosted outside of the Movie
in which they are used.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionSpriteTrackNewImage  = 7182, /* ( C string imageURL, QTAtomID<span></span></pre></td></tr><tr><td scope="row"><pre>                                         desiredID) */<span></span></pre></td></tr></table></div>
<p>Loads an image and gives it the next available image index,
and the desired ID, if available. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionSpriteTrackDisposeImage = 7183, /* (short imageIndex) */<span></span></pre></td></tr></table></div>
<p>Disposes of an image that has previously been loaded and has
the supplied image index. </p>
<p>The two new actions, <code>kActionSpriteTrackNewImage</code> and <code>kActionSpriteTrackDisposeImage</code>,
always interact with the images loaded at runtime, and should always
be used to reference indexes higher than those of the images that
are integrated within the movie when it is created.</p>
<p><code>kActionSpriteTrackNewImage</code> takes
as a parameter the URL of the image to be requested and an ID with
which you can reference that image. Passing an ID of 0 will prompt
this action to assign the next available (unique) ID greater than
the current image count. In comparison, the index assigned will
always be the integer one greater than the current image count. </p>
<p>For example, a target sprite track has 2 images with index/ID
pairs of 1/1 and 2/777, respectively, before this action is executed.
The new image action is called with &#8220;<code>image.jpg</code>&#8221; as
the URL and a <code>desiredID</code> of
6. Assuming the URL is valid, the new image action will be given
the index 3 and honor the requested ID of 6. If the URL is invalid,
or if ID 1 or 777 is requested, index 3 will not be assigned nor
will any ID, because the image has failed to load. A subsequent
call of <code>kActionSpriteTrackNewImage</code> will
attempt to use index 3 again. For this reason, it is advantageous
for the movie author to maintain a tally or query the number of images
in the Track (<code>kOperandSpriteTrackNumImages</code>)
to predict the new index.</p>
<p><code>kActionSpriteTrackDisposeImage</code> takes
as a parameter the index of the image to be released from memory.
The image specified by the index is required to be one loaded through <code>kActionSpriteTrackNewImage</code>.
In other words, the index is required to be one previously assigned by
a <code>kActionSpriteTrackNewImage</code>.
Images authored into the movie, either as data or by reference, cannot
be disposed of in this way. Note also that subsequent calls to <code>kActionSpriteTrackNewImage</code> will
not fill the &#8220;holes&#8221; left by <code>kActionSpriteTrackDisposeImage</code>,
but will continue to increment the index. Thus, <code>kActionSpriteTrackDisposeImage</code> exists
to enable movie authors to manage the memory usage of a movie during
playback&#8211;&#8211;for example, when the movie may only need an externally
referenced image temporarily.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144520" title="New Sprite Operands"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF201" title="New Sprite Operands"></a><h2>New Sprite Operands</h2>
<p>Two new operands have been added in QuickTime 6 to allow script
authors to reference images by either index or ID. These are </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandSpriteTrackImageIDByIndex = 3107 /* ( short imageIndex ) */<span></span></pre></td></tr></table></div>
<p>Returns the ID for an image that has the index supplied as
the parameter.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandSpriteTrackImageIndexByID = 3108 /* ( QTAtomID imageID ) *<span></span></pre></td></tr></table></div>
<p>Returns the index of the image whose ID is equal to that supplied
as the parameter. This operand will return a 0 if no image index
matches the ID given.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-189648" title="New Wired Actions and Operands for Chapter Lists"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF202" title="New Wired Actions and Operands for Chapter Lists"></a><h2>New Wired Actions
and Operands for Chapter Lists</h2>
<p>The following new actions and operands allow you to have access
to chapter names in the chapter track and their corresponding times
in the movie.</p>
<p>They conceptually extend what you can do with <code>kActionMovieGoToTimeByName</code>.
You can navigate through chapters by index to pick one and go to
the time associated to it. You can get the name of a chapter from
index, or get the index of a chapter from name.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-189670" title="Going To a Chapter by Index"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF203" title="Going To a Chapter by Index"></a><h3>Going To a Chapter
by Index</h3>
<p>The following actions go to the time associated to a chapter.
The chapter is specified relative to the current chapter or by index.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionMovieGotoNextChapter = 1039, /* no params */<span></span></pre></td></tr></table></div>
<p>Changes the movie time to the start of the next chapter. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionMovieGotoPreviousChapter = 1040, /* no params */<span></span></pre></td></tr></table></div>
<p>Changes the movie time to the start of the previous chapter. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionMovieGotoFirstChapter = 1041, /* no params */<span></span></pre></td></tr></table></div>
<p>Changes the movie time to the start of the first chapter. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionMovieGotoLastChapter = 1042, /* no params */<span></span></pre></td></tr></table></div>
<p>Changes the movie time to the start of the last chapter. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionMovieGotoChapterByIndex = 1043, /* ( short index ) */<span></span></pre></td></tr></table></div>
<p>Changes the movie time to the start of the nth chapter</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144538" title="Getting the Name and the Index of a Chapter"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF204" title="Getting the Name and the Index of a Chapter"></a><h2>Getting the Name
and the Index of a Chapter</h2>
<p>The following operands allow you to get the name or the index
of a chapter. There is also an operand that returns the number of
chapters in the movie.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieChapterCount = 1038,<span></span></pre></td></tr></table></div>
<p>Gets the chapter count. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieChapterIndex = 1039,<span></span></pre></td></tr></table></div>
<p>Gets the current chapter index. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieChapterName = 1040,<span></span></pre></td></tr></table></div>
<p>Gets the current chapter name. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieChapterNameByIndex = 1041, /* ( short index ) */<span></span></pre></td></tr></table></div>
<p>Gets the name of the nth chapter. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieChapterIndexByName = 1042, /* (cstring name)  */<span></span></pre></td></tr></table></div>
<p>Gets the index of the chapter with passed in name. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144544" title="New Wired Actions and Operands for Sprites and Sprite Tracks"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF205" title="New Wired Actions and Operands for Sprites and Sprite Tracks"></a><h2>New Wired Actions
and Operands for Sprites and Sprite Tracks</h2>
<p>The following new actions and operands allow you to have access
to the sprite property and the sprite track property described above,
having full control over how the sprites in a sprite track interact
with mouse clicks. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144550" title="Sprite Hit Testing Property, Actions, and Operands"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF206" title="Sprite Hit Testing Property, Actions, and Operands"></a><h2>Sprite Hit Testing
Property, Actions, and Operands</h2>
<p>A wired action and a wired operand let you get and set the
sprite hit testing property.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionSpriteSetCanBeHitTested = 3094, /* ( short flag ) */<span></span></pre></td></tr></table></div>
<p>Sets the value of the hit testing property. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandSpriteCanBeHitTested = 3105,<span></span></pre></td></tr></table></div>
<p>Returns the value of the hit-testing property. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144556" title="Miscellaneous Wired Actions and Operands"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF207" title="Miscellaneous Wired Actions and Operands"></a><h2>Miscellaneous
Wired Actions and Operands</h2>
<p>A few miscellaneous new actions and operands have been added
in QuickTime 6.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144562" title="kQTEventKeyUp Event Type Added"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF208" title="kQTEventKeyUp Event Type Added"></a><h3><code>kQTEventKeyUp</code> Event
Type Added</h3>
<p>QuickTime 6 adds the <code>kQTEventKeyUp</code> event
type that can be used in wired actions. It corresponds to key-up
events on the keyboard. Applications may need to take special actions
in order to receive key-up events (which are then passed to a movie
controller using <code>MCIsPlayerEvent</code>).
For example, Carbon applications that use the classic event model may
need to call:</p>
<div class="codesample"><table><tr><td scope="row"><pre>SetEventMask(everyEvent);<span></span></pre></td></tr></table></div>
<p>since by default the OS does not report key-up events to an
application. Similarly, Carbon-event-based applications may need
to register a handler for <code>kEventRawKeyUp</code>.</p>
<p>The movie controller also now supports the <code>mcActionKeyUp</code> action.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144569" title="Random Seed"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF209" title="Random Seed"></a><h3>Random Seed</h3>
<p>The following action can be used in conjunction with <code>kOperandRandom</code>. </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionSetRandomSeed = 6164, /* long randomSeed */<span></span></pre></td></tr></table></div>
<p>Sets the QuickDraw seed value which is starting point for
any subsequent <code>kOperandRandom</code> calls.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144575" title="QTVR Object Actions and Operands"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF210" title="QTVR Object Actions and Operands"></a><h2>QTVR Object Actions
and Operands</h2>
<p>QTVR has the concept of view states for object movies depending
on the mouse button. These are alternate images that are displayed
depending on the state of the mouse button. </p>
<p>The following actions and operands provide control of the
view state: </p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionQTVRSetViewState = 4109, /* long viewStateType, short state */<span></span></pre></td></tr></table></div>
<p>Sets the object node's state type to the new state value.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandQTVRViewStateCount = 4103,<span></span></pre></td></tr></table></div>
<p>Gets the count of view states for an object node.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandQTVRViewState = 4104, /* long viewStateType */<span></span></pre></td></tr></table></div>
<p>Gets the value of a view state. </p>
<p>The valid view state types are defined as follows: </p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef UInt32 QTVRViewStateType;<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTVRDefault = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTVRCurrent = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTVRMouseDown = 3<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144581" title="Additional New Actions and Operands"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF211" title="Additional New Actions and Operands"></a><h2>Additional New
Actions and Operands</h2>
<p>The following are new actions and operands available in QuickTime
6:</p>
<div class="codesample"><table><tr><td scope="row"><pre>kActionMovieSetScale = 1044, /* (Fixed xScale, Fixed yScale) */<span></span></pre></td></tr></table></div>
<p>Sets the target movie&#8217;s scale. This action operates in a
similar manner to QTPlayer&#8217;s menu commands for setting the movie&#8217;s
size:</p>
<div class="codesample"><table><tr><td scope="row"><pre>            Menu            kActionMovieSetScale parameters<span></span></pre></td></tr><tr><td scope="row"><pre>            Half Size   :      0.5, 0.5<span></span></pre></td></tr><tr><td scope="row"><pre>            Normal Size :      1.0, 1.0<span></span></pre></td></tr><tr><td scope="row"><pre>            Double Size :      2.0, 2.0<span></span></pre></td></tr></table></div>
<p>This new action allows the scriptor to scale a movie by means
of an action (similar to the QTPlayer&#8217;s menu commands), and provides
a way to enlarge skinned movies.</p>
<p>The following new action allows the scriptor to query the
movie for the predefined annotations that begin with the copyright
symbol.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieAnnotation = 1043, /* (c string requested, long flags) */<span></span></pre></td></tr><tr><td scope="row"><pre>        &quot;flags&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>            1 : return data as a string<span></span></pre></td></tr><tr><td scope="row"><pre>            2 : return data as xml formatted string<span></span></pre></td></tr><tr><td scope="row"><pre>        &quot;requested&quot;<span></span></pre></td></tr></table></div>
<p>as string: a single annotation type, that is, <code>&quot;qt-userdata-cpy&quot;</code> as
XML: an empty string means return all appropriate user data as an
XML-formatted string. Otherwise, it is a comma-deliminated list
of the specific user data that the scriptor wants returned as an XML-formatted
string.</p>
<p>Because the copyright symbol is only in the Macintosh font
table, the scriptor will need to prefix requests with <code>&quot;qt-userdata-&quot;</code>.
If, for example, the request is for <code>'&#169;nam'</code>,
the scriptor must pass in &quot;<code>qt-userdata-nam&quot;</code>.</p>
<p>Other examples:</p>
<div class="codesample"><table><tr><td scope="row"><pre>           '&#169;cpy'  :  &quot;qt-userdata-cpy&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>           '&#169;aut'  :  &quot;qt-userdata-aut&quot;<span></span></pre></td></tr></table></div>
<p>The following new operands in QuickTime 6 allow scripts to
capture what the controller is displaying for streamed movies that
are connecting, buffering, and so on.</p>
<p>Returns the current state of the streaming flags.</p>
<div class="codesample"><table><tr><td scope="row"><pre>kOperandMovieConnectionString = 1045,<span></span></pre></td></tr></table></div>
<p>Returns the current string that may have been displayed in
the controller. This is only meaningful if the flags are non-zero. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-160855" title="VBR Sound Compression Support"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF212" title="VBR Sound Compression Support"></a><h2>VBR Sound Compression
Support</h2>
<p>QuickTime 6 adds support for using variable bitrate (VBR)-enabled
sound compressor components. Both the QuickTime Movie exporter component
available in the export dialog (also known as the <code>ConvertMovieToFile</code> API
dialog) and the Standard Sound compression dialog component have
been updated to use and to recognize VBR compressor components. </p>
<p>QuickTime 6 also provides QuickTime developers with the capability
of building their own custom VBR-enabled sound compressor components,
as discussed in this section. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144587" title="Background"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF213" title="Background"></a><h3>Background</h3>
<p>QuickTime 4.1 and the Sound Manager introduced support for
the playback of VBR audio&#8211;&#8211;in particular, VBR support for the
decoding and playback of MP3 audio. A number of modern audio compression
formats, such as MP3, either support or require VBR decoding. </p>
<p>Versions of QuickTime prior to QuickTime 4.1 provided support
only for constant bitrate (CBR) audio. The fundamental difference
between constant bitrate and variable bitrate audio is related to
the rate at which audio data is presented to the sound decoder to generate
sound. </p>
<p>In CBR audio, the rate is constant. If one second of audio
requires 40 K bytes, then 5 seconds will require 200 K bytes (=
40 Kbytes/sec * 5 sec). Moreover, given a stream of 3 minutes of
audio compressed like this, to start playing at 2:30, you would
advance 6,000K into the stream.</p>
<p>With VBR audio, the data rate varies depending upon the complexity
of the encoded sound. For example, a very quiet passage of a score
could be compressed much more than a very exciting passage. A VBR
encoder will analyze the audio and use the appropriate number of
bits, varying its usage in the process. This means that the amount
of data for a complex passage is greater than for a less complex
passage. This also complicates locating data in the stream because
the &#8220;road map&#8221; is located within the stream.</p>
<p>By way of analogy, video encoding formats are typically VBR
in nature. A more complex image requires more bits than a less complex
image. As different images are encoded, the number of bits required
for each will vary. The analog to CBR audio in the video space is raw
RGB or uncompressed YUV.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-144593" title="QuickTime 6 VBR Support"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF214" title="QuickTime 6 VBR Support"></a><h3>QuickTime 6 VBR
Support</h3>
<p>As discussed, QuickTime and the Sound Manager have been able
to decode self-framed, variable bitrate formats such as MP3 since
QuickTime 4.1. In addition, the QuickTime Movie file format has
been able to carry variable bitrate audio.</p>
<p>With QuickTime 6, QuickTime and the Sound Manager add much
richer and more comprehensive support for VBR audio, including support
for both compression of VBR audio and decompression of non-self-framed
VBR audio formats. An example of a non-self-framed audio format
is AAC, described in the section <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-143926">“Defining AAC.”</a></span> <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-251657">Table 1-2</a></span> shows
the audio support available since QuickTime 4.1. </p><a name="//apple_ref/doc/uid/TP40000937-CH1g-251657" title="Table 1-2VBR audio support in different versions of QuickTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF111" title="Table 1-2VBR audio support in different versions of QuickTime"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-2&nbsp;&nbsp;</strong>VBR audio support in different versions
of QuickTime</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Version</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>VBR Audio</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Support</p></th>
</tr>


<tr>
<td  scope="row"><p>QuickTime 6</p></td>
<td ><p>Encode and decode, e.g., MP3</p></td>
<td ><p>Non-self-framed VBR audio, e.g., AAC</p></td>
</tr>
<tr>
<td  scope="row"><p>QuickTime 5</p></td>
<td ><p>Decode and playback</p></td>
<td ><p>Self-framed VBR</p></td>
</tr>
<tr>
<td  scope="row"><p>QuickTime 4.1</p></td>
<td ><p>Decode and playback, e.g., MP3</p></td>
<td ><p>Self-framed VBR</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-193323" title="Some Techniques For Compressing VBR Audio"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF215" title="Some Techniques For Compressing VBR Audio"></a><h3>Some Techniques
For Compressing VBR Audio</h3>
<p>This section discusses some of the techniques you can use
if you need to compress VBR audio. </p>
<p>Because variable bitrate audio may contain audio frames of
different sizes, it is important that an application use the appropriate
APIs to generate the compressed audio. If, for example, your application
receives a -213 (<code>siVBRCompressionNotSupported</code>)
error from QuickTime or the Sound Manager, it indicates either QuickTime
or the Sound Manager doesn&#8217;t &#8220;know&#8221; about VBR compression,
or doesn&#8217;t believe your application understands VBR compression. </p>
<p>To inform QuickTime that your application understands the
details of VBR compression, here are some steps that you should
consider:</p>
<ol class="ol"><li class="li"><p>To begin with, you must use the <code>SoundConverterFillBuffer()</code> API.
If you are using the <code>SoundConverterFillBuffer()</code> API,
you&#8217;ve already done most of the work. Although <code>SoundConverterConvertBuffer()</code> cannot
be used for VBR compression, you can configure the SoundConverter
without making a decision as to using FillBuffer or ConvertBuffer
yet, in case you want to continue using the <code>SoundConverterConvertBuffer()</code> routine
for fixed compression audio. There is no good reason to do so, but
it may be important in your current implementation.</p></li>
<li class="li"><p>Your application must inform the SoundConverter that it can
handle VBR audio. To do this, immediately after opening the SoundConverter
with <code>SoundConverterOpen()</code>,
make a call to <code>SoundConverterSetInfo()</code>,
passing the <code>siClientAcceptsVBR</code> selector
like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>SoundConverterSetInfo(theSoundConverter, siClientAcceptsVBR,(void*)true);<span></span></pre></td></tr></table></div></li></ol>
<p>This lets the sound converter know that you are VBR compression-aware. </p>
<ol class="ol"><li class="li"><p>After configuring the sound converter with compression
parameters (if present), request the compressor&#8217;s compression
information, so you know how many PCM samples are generated per
audio frame. </p></li>
<li class="li"><p>Ask for <code>siCompressionFactor</code> and
look at the resulting <code>CompressionInfo</code>.
If the c<code>ompInfo.compressionID</code> field
is set to <code>variableCompression</code>,
then the codec is configured to generate VBR audio. If it has another
value, the codec is configured for a fixed bitrate&#8211;&#8211;just as
it would in versions of QuickTime prior to QuickTime 6. Remember
that a single codec can support fixed and variable compression,
so don&#8217;t assume its capabilities from its codec type.</p></li></ol>
<p>Just as before, <code>samplesPerPacket</code> holds
the PCM sample count per audio frame (packet). For VBR audio, you
can ignore <code>bytesPerFrame</code>/<code>bytesPerPacket</code>,
since the sizes aren&#8217;t constant.</p>
<ol class="ol"><li class="li"><p>For variable compression codecs, you need to
know the worst case size of a  single audio frame (packet). You
can then allocate the output buffer for use with the <code>SoundConverterFillBuffer()</code> routine,
based on a multiple of this size. Failing to do this might result
in <code>SoundConverterFillBuffer()</code> not
being able to generate even a single audio frame. If you spin on <code>SoundConverterFillBuffer()</code> waiting
for it to generate at least one audio frame before continuing but
don&#8217;t provide a large enough output buffer, you have the makings
of a really cool and involved infinite loop.</p></li></ol>
<p>Use the new selector <code>siCompressionMaxPacketSize</code> to
retrieve the worst case packet size. The following code shows an
example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    UInt32 maxPacketSize = 0;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    err = SoundConverterGetInfo( theSoundConverter,<span></span></pre></td></tr><tr><td scope="row"><pre>                                siCompressionMaxPacketSize,<span></span></pre></td></tr><tr><td scope="row"><pre>                                &amp;maxPacketSize );<span></span></pre></td></tr></table></div>
<p>If a VBR codec doesn&#8217;t support this selector, you may want
to use a worst case output buffer size such as 32K. </p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_12" title="Note"></a><p><strong>Note:</strong>&nbsp;VBR codec developers
should implement this selector. This will not be implemented by
fixed bitrate compressors, although it is not illegal to do so.</p></div>
<ol class="ol"><li class="li"><p>Use <code>SoundConvertFillBuffer()</code> to
perform the encoding, as shown in the code below. The value should
be tied to the codec&#8217;s current configuration. </p>
<div class="codesample"><table><tr><td scope="row"><pre>    err = SoundConverterFillBuffer(theSoundConverter, //a sound converter<span></span></pre></td></tr><tr><td scope="row"><pre>            fillBufferUPP,          // proc<span></span></pre></td></tr><tr><td scope="row"><pre>            fillBufferRefCon,       // refCon passed to FillDataProc<span></span></pre></td></tr><tr><td scope="row"><pre>            soundOutputBuffer,      // compressed audio buffer<span></span></pre></td></tr><tr><td scope="row"><pre>            soundOutputBufferSize,  // size of compressed audio buffer<span></span></pre></td></tr><tr><td scope="row"><pre>            &amp;actualOutputBytes,     // number of output bytes<span></span></pre></td></tr><tr><td scope="row"><pre>            &amp;outputFrames,          // number of output frames<span></span></pre></td></tr><tr><td scope="row"><pre>            &amp;outputFlags);          // fillbuffer returned advisory flags<span></span></pre></td></tr></table></div></li></ol>
<p>The difference with VBR compression is that each call only
returns audio, where all the frames have the same size in bytes.
This is necessary because the <code>SoundConverterFillBuffer()</code> API returns
the number of bytes it wrote and the number of frames but doesn&#8217;t
return any kind of array indicating the boundaries between frames.
If you divide <code>actualOutputBytes</code> by <code>outputFrames</code>,
you can determine how large each audio frame is.</p>
<p>As an example, if the audio frames have the following sizes
in bytes</p>
<div class="codesample"><table><tr><td scope="row"><pre>[  40  ] [   40  ] [    50    ] [    50   ] [    50    ] [ 30 ] [  40  ]<span></span></pre></td></tr></table></div>
<p>at least four calls to <code>SoundConverterFillBuffer</code> will
be necessary in order to encode these frames. This call would return
the following values:</p>
<div class="codesample"><table><tr><td scope="row"><pre>actualOutputBytes        outputFrames<span></span></pre></td></tr><tr><td scope="row"><pre>-----------------       ------------<span></span></pre></td></tr><tr><td scope="row"><pre>    80                      2<span></span></pre></td></tr><tr><td scope="row"><pre>    150                     3<span></span></pre></td></tr><tr><td scope="row"><pre>    30                      1<span></span></pre></td></tr><tr><td scope="row"><pre>    40                      1<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-193708" title="Using the Standard Sound Compression Component and VBR Compression"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF216" title="Using the Standard Sound Compression Component and VBR Compression"></a><h3>Using the Standard
Sound Compression Component and VBR Compression</h3>
<p>Like the SoundConverter, QuickTime doesn&#8217;t want to offer
VBR sound compressors to applications that cannot support them.
This means that if your application uses the Standard Sound Compression
dialog to select and configure sound compressors, you should pass
the new (in QuickTime 6) <code>scSoundVBRCompressionOK</code> selector
to <code>SCSetInfo()</code> as in
the following code example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    ComponentInstance ci = OpenDefaultComponent(StandardCompressionType,<span></span></pre></td></tr><tr><td scope="row"><pre>                                        StandardCompressionSubTypeSound);<span></span></pre></td></tr><tr><td scope="row"><pre>    if (ci ) {<span></span></pre></td></tr><tr><td scope="row"><pre>                Boolean doVBR = true;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>                SCSetInfo (ci, scSoundVBRCompressionOK, &amp;doVBR);<span></span></pre></td></tr><tr><td scope="row"><pre>                . . .<span></span></pre></td></tr></table></div>
<p>If you don&#8217;t pass the new <code>scSoundVBRCompressionOK</code> selector
to <code>SCSetInfo()</code>, only
fixed compression codecs will be presented in the list.</p>
<p>In fact, compressors that perform fixed and variable compression
will be presented if this selector is not called, but those compressors
will only offer their fixedCompression options. Since AAC only performs
variable compression, it will not appear in the dialog unless you
call <code>SCSetInfo</code> with <code>scSoundVBRCompressionOK</code>.</p>
<p>In QuickTime 6, a new Standard Compression selector is provided
in <code>QuickTimeComponents.h</code> that
returns a list of available codecs. The selector, a pointer to a
handle, is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>scAvailableCompressionListType = FOUR_CHAR_CODE('avai')<span></span></pre></td></tr></table></div>
<p>This is the same kind of handle as the existing <code>scCompressionListType</code> selector.
Applications that need to build lists of codecs (compressors) for
their user interface should adopt this API. If the scAvailableCompressionListType
selector is not recognized, use the previous code. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-193881" title="Audio File Formats and VBR Compression"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF217" title="Audio File Formats and VBR Compression"></a><h3>Audio File Formats
and VBR Compression</h3>
<p>Not all audio file formats can hold variable compression audio,
since the information about framing isn&#8217;t always available in
every format. </p>
<p>QuickTime Movies provide a format that can hold the information,
just as MPEG-4 files can. AIFF and WAVE, however, are formats that
do not carry such information.</p>
<p>This explains why you see the MPEG-4 audio codec available
in the QuickTime Movie exporter&#8217;s sound options&#8211;&#8211;but not in
the AIFF options. Not surprisingly, these exporters use the Standard
Sound Compression dialog as above. Because VBR compression is opted in
by the client, only the QuickTime Movie exporter passes the <code>scSoundVBRCompressionOK</code> selector.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-193979" title="Doing Something with VBR Audio Data"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF218" title="Doing Something with VBR Audio Data"></a><h3>Doing Something
with VBR Audio Data</h3>
<p>At this point in the process, your application is either generating
VBR audio to be stored in a QuickTime Movie for playback later,
or you want to play or decode the audio directly. Of course, you
may be using your own format to store the audio, but remember, you
need to store the framing information yourself.</p>
<p>If you store the data in the QuickTime Movie, you need to
store the generated audio frames in a way that is compatible with
how QuickTime stores VBR audio in sound tracks.</p>
<p>To play or decode the audio, you need to use the additional
fields in the <code>ExtendedSoundComponentData</code>, <code>ExtendedScheduledSoundHeader</code>,
or <code>ExtendedSoundParamBlock</code>,
depending on how you are playing the data. Fortunately, they are
the same fields.</p>
<p>The following fields are introduced in QuickTime 6:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    long frameCount;        // number of audio frames<span></span></pre></td></tr><tr><td scope="row"><pre>    long * frameSizesArray; // pointer to array of longs with frame sizes<span></span></pre></td></tr><tr><td scope="row"><pre>                                // in bytes<span></span></pre></td></tr><tr><td scope="row"><pre>    long commonFrameSize;   // size of each frame if common<span></span></pre></td></tr></table></div>
<p>Specifically, <code>frameCount</code>, <code>frameSizesArray</code> and <code>commonFrameSize</code> are
relevant for playback and decoding of AAC audio, as well as for
other non-self-framed audio VBR audio formats.</p>
<p>As discussed earlier, QuickTime versions prior to QuickTime
6 could handle self-framed VBR audio. This is why the existing extended <code>bufferSize</code> field
is sufficient for MP3 audio. AAC audio, though, doesn&#8217;t have information
within it to indicate framing, and depends upon out-of-band data
to carry that information. In the case of QuickTime and MPEG-4 movies,
that information is in the sample tables.</p>
<p>The fields just described (new in QuickTime 6) are used to
convey the information to the audio decoder (or sound decompressor
in Sound Manager parlance) and are necessary for use with AAC audio.
In all cases, these fields all describe a single buffer of audio.
The existing <code>sampleCount</code>, <code>buffer</code> and <code>bufferSizes</code> fields
all must be valid.</p>
<p>In addition, either <code>frameCount</code> and <code>frameSizesArray</code> or <code>commonFrameSize</code> must
be valid (indicated by <code>extendedFlags</code>)
in order to decode AAC data. (Note that <code>frameCount</code> and <code>frameSizesArray</code> must
be valid as a unit because they work together, not as separate fields.) </p>
<p>The flags for <code>extendedFlags</code> are
in the header file <code>Sound.h</code> as
follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    kExtendedSoundFrameSizesValid = 1L &lt;&lt; 2,<span></span></pre></td></tr><tr><td scope="row"><pre>                        // set if frameSizesArray is valid<span></span></pre></td></tr><tr><td scope="row"><pre>                        // (this will be nil if all sizes are common and<span></span></pre></td></tr><tr><td scope="row"><pre>                        // kExtendedSoundCommonFrameSizeValid is set)<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kExtendedSoundCommonFrameSizeValid = 1L &lt;&lt; 3,<span></span></pre></td></tr><tr><td scope="row"><pre>                        // set if all audio frames have the same size and<span></span></pre></td></tr><tr><td scope="row"><pre>                        // the commonFrameSize field is valid<span></span></pre></td></tr></table></div>
<p>If <code>commonFrameSize</code> is
set, this means that all audio frames in the VBR buffer have exactly
the same size in bytes. There is no frame count, since <code>bufferSize</code> divided
by <code>commonFrameSize</code> is
the frame count.</p>
<p>If <code>frameCount</code> and <code>frameSizesArray</code> are
valid (remember, these fields must be considered as a unit), then <code>frameCount</code> holds
a count of the number of elements in the <code>frameSizesArray</code> array.
This array is a set of 32-bit values holding the size of each audio
frame. In the above example, the fields would look like this:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    frameCount = 7;<span></span></pre></td></tr><tr><td scope="row"><pre>    frameSizeArray = --&gt;   { 40, 40, 50, 50, 50, 30, 40 }<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>frameCount</code> and <code>frameSizesArray</code> fields
will be updated by the decoder, so you should not allocate a pointer
and store that in <code>frameSizesArray</code> and expect
to be able to deallocate it when done. Instead, allocate the pointer
and store a copy of the address in <code>frameSizesArray</code>.</p></div>
<p>Just as you can use the <code>SoundConverterFillBuffer()</code> routine
to encode VBR audio, you can also use it to decode AAC audio. However,
the <code>SoundConverterFillBufferDataProc</code>&#8217;s
returned <code>ExtendedSoundComponentData</code> must
set the appropriate flags, including the fields described above.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-194333" title="New Tween Component API"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF219" title="New Tween Component API"></a><h3>New Tween Component
API</h3>
<p>In QuickTime 6, tween components now provide an interrupt-safe
interface using a new API routine, <code>QTDoTweenPtr</code>.
This new call provides for return values in a pointer rather than a
handle. Some specific tweens implemented as components required
changes to ensure their interrupt safeness. Not all Apple-defined
tween components support this new API. However, all of those needed
for effects have been so revised.</p>
<a name="//apple_ref/c/func/QTDoTweenPtr" title="QTDoTweenPtr"></a><a name="//apple_ref/doc/c_ref/QTDoTweenPtr" title="QTDoTweenPtr"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTDoTweenPtr" title="QTDoTweenPtr"></a>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_47"></a><h3 class="tight">QTDoTweenPtr</h3>
<p class="spaceabove">Runs a tween component, providing for return values in
a pointer rather than a handle.</p>
<p class="spaceabove"><pre>
OSErr QTDoTweenPtr (<a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTTweener" target="_top">QTTweener</a> tween,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeValue" target="_top">TimeValue</a> atTime,
<!--a-->Ptr<!--/a--> result,
long resultSize) ;
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>tween</em></dt>
<dd><p>A tween to be run.</p></dd>
<dt><em>atTime</em></dt>
<dd><p>A value that defines the time to run the tween.</p></dd>
<dt><em>result</em></dt>
<dd><p>The result of the tweening operation. </p></dd>
<dt><em>resultSize</em></dt>
<dd><p>The size of the result returned. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is an interrupt-safe version of the <code>QTDoTween</code> routine,
which also runs a tween component. Note that it has the following
limitations:</p>
<ul class="ul"><li class="li"><p>Not all tween types support this call (those
which must allocate memory), in which case they return <code>codecUnimpErr</code>.</p></li>
<li class="li"><p>The QTAtomContainer used for the tween must be locked. </p></li>
<li class="li"><p>The <code>dataSize</code> must
be large enough to contain the result. </p></li>
<li class="li"><p>This call is not supported for sequence tweens; you should
use interpolation tweens instead.</p></li></ul>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-194884" title="Changes to Effects Dialog"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF220" title="Changes to Effects Dialog"></a><h3>Changes to Effects
Dialog</h3>
<p>In QuickTime 6, the effects dialog has been revised and enhanced.
The new features include</p>
<ul class="spaceabove"><li class="li"><p>Grouping into types within the scrolling list
on the left side of the dialog. In this new design, each effect
defines what subgroup it belongs to, as shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-194950">Figure 1-11</a></span>. Any third-party
effects installed appear under &#8220;Misc&#8221; until they are revised
to include their subgroup information.</p></li>
<li class="li"><p>Resizability of the dialog and split bars to control the list
vs. preview vs. effect-specific areas. Note that the resize control
is only drawn in Mac OS 8.1 and later.</p></li>
<li class="li"><p>Providing a widget for picking points, which can be used in
any effect that allows the selection of points (that is, x and y
values). Notice that such items have turned from a multitude of
sliders into this point-picking widget. </p></li>
<li class="li"><p>Allowing effect components to specify custom &#8220;picking interfaces&#8221;
for parts of their user interface, while allowing the Generic effect
to handle the remainder.</p></li>
<li class="li"><p>Providing a way to set slider values by typing. Any slider
within the effects dialog will now allow this. Command-clicking
any slider brings up a modal dialog. The dialog is centered below
the control to edit. The dialog is sized appropriately for name
and length of number edit. The dialog contains a type-in field,
parameter name label, and OK and Cancel buttons.</p></li>
<li class="li"><p>A knob control that provides a way to set angles greater than
360 degrees. This is used in the Slide effect. Knob control now
has an inner section that serves as an hour hand. When the knob
is manipulated beyond one rotation, the hour hand increments. This wraps
properly both forward and backward over the 12 o&#8217;clock position.</p></li>
<li class="li"><p>Effects may now specify some common &#8220;presets&#8221; that the
user can easily select. These are used in the Slide effect. When
such an effect is selected, the first subpanel is a list of presets,
each with a name and preview. The pane scales to the available space,
and implements a scroll bar if needed.</p><ul class="nested"><li class="nested li"><p>The
subgroup pop-up menu at the top of the screen will read Easy and
Custom if there are no additional subpanes. If there are, the pop-up
menu reads Easy and the names of the other subpanes.</p></li></ul></li></ul>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-194950" title="Figure 1-11A new effects dialog in Mac OS X with sliders and menu items "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF112" title="Figure 1-11A new effects dialog in Mac OS X with sliders and menu items "></a><p><strong>Figure 1-11&nbsp;&nbsp;</strong>A new effects dialog in Mac OS X
with sliders and menu items </p><img src = "../Art/effects_film_noise.gif" alt = "" width="549" height="386"></div><br/>
<ul class="spaceabove"><li class="li"><p>A new effect called Channel Composite provides
a way to create a bitmap whose color components are a combination
of source A and B color components, reshuffled, and inverted as
desired.</p></li>
<li class="li"><p>The Color Tint effect now allows user to specify an amount
of tinting to allow a gradual transition to a particular color,
such as Sepia. A new pair of sliders controls this. Tweening is
allowed. The default value is to tint fully (for backwards compatibility)
for the entire duration of the effect.</p></li>
<li class="li"><p>Effects may now have tween values when filtering during export,
that is, Movie to QuickTime Movies. Some effects, such as Lens Flare
and RGB Balance, now have a starting and ending value that you can
set. Some (such as RGB Balance) display this information only if
the Option key is pressed when selecting the Filter button. This
is because tweening these values is uncommon.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-194983" title="Custom Effect Controls "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF221" title="Custom Effect Controls "></a><h4>Custom Effect
Controls </h4>
<p>Effects may choose to implement custom controls to allow the
user to more easily edit complex parameters that are ill-served
by simple sliders or type in boxes. Effects may allow a custom control
for either a single parameter, or for a group of parameters.</p>
<p>Parameter(s) for a custom control must still be data types
defined by the standard set, or for complex records of data, must
be defined within a group as individual parameters made up from
base data types (for example, a point is a group containing two
Fixed point numbers). </p>
<p>This is to allow applications that do not wish to use the
custom control for the effect to set values themselves.</p>
<p>Effects should be aware that these custom controls may be
deployed by the application in either a dialog or a window, with
application-defined background colors or patterns, along with application-defined
font characteristics for the window.</p>
<p>It is recommended that an effect implement custom controls
only when needed, and that custom controls be used for specific
types of parameters (i.e., point, rectangle, polygon, path) rather
than the entire user interface for the effect. Effects may choose
to implement multiple custom controls that combine with standard
controls to present the total user interface. </p>
<p>For effects that have very complex user interfaces not well
suited for inclusion within a single window, it is recommended to
use <code>kParameterImageIsPreset</code>&#8211;&#8211;which
allows the effect to have an external editing application for parameters
that may then be set within the standard User Interface via the
open file dialog or drag and drop. The Lens Flare (shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-195029">Figure 1-12</a></span>) effect&#8217;s
&#8220;Flare Type&#8221; is an example of such a preset.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-195029" title="Figure 1-12A new Lens Flare effect dialog in Mac OS X"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF113" title="Figure 1-12A new Lens Flare effect dialog in Mac OS X"></a><p><strong>Figure 1-12&nbsp;&nbsp;</strong>A new Lens Flare effect dialog in
Mac OS X</p><img src = "../Art/effects_dialog.gif" alt = "" width="552" height="387"></div><br/>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195043" title="New Behavior Flag kCustomControl Added"></a><h5>New
Behavior Flag <code>kCustomControl</code> Added</h5>
<p>For parameters that use a custom control to control a single
parameter value, a new behavior flag has been added (<code>kCustomControl</code>),
and the behavior for the parameter should be <code>kParameterItemControl</code>.</p>
<p>For parameters that are groups, the same flag (<code>kCustomControl</code>)
should be used, and the behavior should be <code>kParameterItemGroupDivider</code>.
Groups with the <code>kCustomControl</code> bit
set will be implemented by calling the custom control for that group&#8211;&#8211;the
parameters within that group will not be processed in the normal
manner.</p>
<p>In both cases, the new <code>customType</code> and <code>customID</code> fields
of the behavior must be filled in. These are used in order to allow
your custom control to determine which parameter is being edited
in the case where the custom control is used for the editing of
multiple parameters. These values are passed into the <code>pdActionCustomNewControl</code> call.
Since the custom control mechanism is also used by QuickTime&#8217;s
default effect dialogs, you should be prepared to pass onto the
base effect any <code>pdActionCustomNewControl</code> calls
for type/id pairs that you do not handle yourself. When <code>pdActionCustomNewControl</code> is
called for controls of types handled by QuickTime, customType is <code>kParameterAtomTypeAndID</code> and
customID is the ID of the parameter atom. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195115" title="Using pdActionCustomNewControlControl to Create New Custom Controls"></a><h5>Using 
<code>pdActionCustomNewControlControl</code> to
Create New Custom Controls</h5>
<p><code>pdActionCustomNewControlControl</code> is
called by the application to create a new custom control or set
of controls for an effect parameter. When <code>pdActionCustomNewControl</code> is
called, the effect should perform any basic allocation it needs
for storage and return the result in storage. The options parameter
tells the control if the application wishes to support interpolated, optionally
interpolated, or a single value parameter.</p>
<p>Since <code>pdActionCustomNewControlControl</code> may
call upon your effect for other items within the dialog, it is recommended
that your effect have an easy way to determine which controls it
implements by using one of these two techniques:</p>
<ul class="spaceabove"><li class="li"><p>by having storage be a pointer with an OSType
at the beginning to mark controls implemented by your code</p></li>
<li class="li"><p>keeping track in your component globals those custom controls
that you have created</p></li></ul>
<p>When <code>pdActionCustomDisposeControl</code> is
called, any allocation done by the control should be disposed of.
In addition, <code>pdActionCustomDisposeControl</code> is
the last chance the control has to commit any user changes into
the sample.</p>
<p>Controls that implement type-in fields typically need to commit
any final user edits at this time.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlNewRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage allocated/disposed by the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    QTParameterDialogOptions options; /* options used to control<span></span></pre></td></tr><tr><td scope="row"><pre>                                            interpolation/not*/<span></span></pre></td></tr><tr><td scope="row"><pre>    QTAtomContainer sample; /* sample that holds the data to be edited*/<span></span></pre></td></tr><tr><td scope="row"><pre>    long customType; /* custom type and ID specified by effect for<span></span></pre></td></tr><tr><td scope="row"><pre>                        creation of this control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    long customID;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlNewRecord QTCustomControlNewRecord;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlNewRecord *      QTCustomControlNewPtr;<span></span></pre></td></tr></table></div>
<p><code>pdActionCustomPositionControl</code> is
called by the application to position the control within a window
or dialog.</p>
<p>The control should determine if it will fit in the allotted
area and position itself there. It should also return the space
taken up by the control. Note you are free to implement controls
which are variable in size depending upon which parameter you are
editing. You don&#8217;t need to scale your control to the requested
size. If the area presented to your control is too small, set <code>didFit</code> to <code>FALSE</code>.
You should still return in used the size you would have liked to
use for the control.   The application will then try again with
a new size. Note that all controls must be able to fit within a
minimum of 300 by 250 pixels.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195227" title="Displaying Text Properly in Application Windows"></a><h5>Displaying
Text Properly in Application Windows</h5>
<p>Custom controls that draw text should make note of the text
font, size, and style at this time in order to properly display
within application windows.</p>
<p>Note that the default state for the control is hidden. You
will receive a <code>pdActionCustomShowHideControl</code> in
order to enable your control. You should not draw your control in
response to <code>pdActionCustomPositionControl</code>.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlPositionControlRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    WindowPtr window; /* window to be used by the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Rect location; /* location within the window the control may use*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Rect used; /* returned by the control to indicate size it actually<span></span></pre></td></tr><tr><td scope="row"><pre>                used*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean didFit; /* did the control fit in the specified area?*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean pad[3];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlPositionControlRecord QTCustomControlPositionControlRecord;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlPositionControlRecord * QTCustomControlPositionControlPtr;<span></span></pre></td></tr></table></div>
<p><code>pdActionCustomShowHideControl</code> is
called when the application wishes to enable/disable your control,
or completely disable drawing of the control. </p>
<p>Your control should make note of the new state (if different
from the last) and perform an <code>InvalRect()</code> on
your drawing area, or you may draw your control&#8217;s initial state
in the case of show. You should not attempt to erase your control
as the result of a hide. Instead, call <code>InvalRect()</code> and
allow the application to process the resulting event as appropriate.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlShowHideControlRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean show; /* display the control?*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean enable; /* enable the control (ie, black vs gray display)*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean pad[2];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlShowHideControlRecord QTCustomControlShowHideControlRecord;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlShowHideControlRecord * QTCustomControlShowHideControlPtr;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195312" title="Using pdActionCustomHandleEvent To Process Events"></a><h5>Using 
<code>pdActionCustomHandleEvent</code> To
Process Events</h5>
<p><code>pdActionCustomHandleEvent</code> is
called to allow your custom control to process events.</p>
<p>Typical controls handle the following events:</p>
<ul class="spaceabove"><li class="li"><p><code>activate</code> to
draw your control in normal/gray mode</p></li>
<li class="li"><p><code>update</code> to draw
your control</p></li>
<li class="li"><p><code>mouseDown</code> to handle
clicks</p></li>
<li class="li"><p><code>keyDown</code> to handle
typing when you have focus</p></li>
<li class="li"><p><code>idle</code> to perform
idle drawing (if applicable)</p></li></ul>
<p>If your control handles the entire event, set <code>didProcess</code> to <code>TRUE</code>.
If you handled the event, but other controls still need the event,
set <code>didProcess</code> to <code>FALSE</code>.</p>
<p>If your control supports the concept of focus for the purposes
of typing (such as by having a type-in box for the parameter), then
you set the <code>tookFocus</code> Boolean
as part of your processing of the event. It is assumed that your
control will draw the appropriate focus user interface as a result,
and the calling application will disable any focus drawing within the
remainder of the user interface.</p>
<p>By default, custom controls are not given idle time. If you
need idle time, set <code>needIdle</code> to <code>TRUE</code> in
response to the event that causes you to need idle (typically the
taking of focus, or the first draw).</p>
<p>Your control will continue to be given idle events until you
set <code>needIdle</code> to FALSE
in response to a <code>nullEvent</code>.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlHandleEventRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    EventRecord * pEvent; /* event to process*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean didProcess; /* did we process entire event?*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean tookFocus; /* did we take focus as a result of this event<span></span></pre></td></tr><tr><td scope="row"><pre>                        (typically mouseDowns)*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean needIdle; /* does this control need idle events?*/<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean didEdit; /* did we edit the samples?*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p><code>typedef struct QTCustomControlHandleEventRecord
QTCustomControlHandleEventRecord;</code></p>
<p><code>typedef QTCustomControlHandleEventRecord
* QTCustomControlHandleEventPtr;</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195475" title="Using pdActionCustomSetFocus to Set or Advance Current Focus"></a><h5>Using 
<code>pdActionCustomSetFocus</code> to
Set or Advance Current Focus</h5>
<p><code>pdActionCustomSetFocus</code> is
called in order to set or advance the current focus of the user interface,
typically because the user has pressed the tab or shift-tab keys,
or because the user clicked within the area defined by your control.</p>
<p>Your control will be called with <code>pdActionFocusFirst</code>, <code>pdActionFocusLast</code>,
or <code>pdActionFocusOff</code> to
set or clear focus on your control. Your control will be called
with <code>pdActionFocusForward</code> or <code>pdActionFocusBackward</code> to
cycle focus within your control (if your control has multiple focus). If
your control does not support focus, or the focus request results
in focus moving beyond your supported range, return <code>pdActionFocusOff</code> in
the focus parameter. Otherwise, return the focus that you set.</p>
<p>Controls which have no focus would always set focus to be <code>pdActionFocusOff</code>.</p>
<p>Controls with a single focus would set <code>pdActionFocusFirst</code> when
requested to set either <code>pdActionFocusFirst</code> or <code>pdActionFocusLast</code>,
and would set <code>pdActionFocusOff</code> for
either <code>pdActionFocusForward</code> or <code>pdActionFocusBackward</code>.</p>
<p>enum {
    pdActionFocusOff = 0, /* no focus */
    pdActionFocusFirst = 1, /* focus on first element */
    pdActionFocusLast = 2, /* focus on last element */
    pdActionFocusForward = 3, /* focus on next element */
    pdActionFocusBackward = 4 /* focus on previous element */
};


struct QTCustomControlSetFocusRecord {
    void * storage; /* storage for the control*/
    long focus; /* focus to set, return resulting focus*/
};
typedef struct QTCustomControlSetFocusRecord QTCustomControlSetFocusRecord;

typedef QTCustomControlSetFocusRecord * QTCustomControlSetFocusPtr;</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195569" title="Using pdActionCustomSetEditMenu To Locate The Edit Menu"></a><h5>Using 
<code>pdActionCustomSetEditMenu</code> To
Locate The Edit Menu</h5>
<p><code>pdActionCustomSetEditMenu</code> will
be called to inform your custom control of the location of the edit
menu.</p>
<p>If your control has editing boxes, this is useful in order
to allow the user to perform cut, copy, and paste operations when
focus is on one of these boxes.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlSetEditMenuRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    MenuHandle editMenu; /* edit menu, or NIL*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlSetEditMenuRecord QTCustomControlSetEditMenuRecord;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlSetEditMenuRecord * QTCustomControlSetEditMenuPtr;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195609" title="Using pdActionCustomSetPreviewPicture To Preview Information"></a><h5>Using 
<code>pdActionCustomSetPreviewPicture</code> To
Preview Information</h5>
<p><code>pdActionCustomSetPreviewPicture</code> is
called to inform your custom control of preview information that
you may wish to use in the drawing of your user interface. </p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlSetPreviewPictureRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    QTParamPreviewPtr preview; /* preview to set*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlSetPreviewPictureRecord QTCustomControlSetPreviewPictureRecord;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlSetPreviewPictureRecord * QTCustomControlSetPreviewPicturePtr;<span></span></pre></td></tr></table></div>
<p><code>pdActionCustomSetEditCallout</code> tells
your control of the need by the application to be informed of changes
to the parameter values (typically for the purposes of updating
previews).</p>
<p>If a callout is available, your custom control should call
it whenever a change has been made to the parameter(s) that your
control is editing (as a result of user actions, most typically).
If you choose not to implement this, live dragging or updating of
values will not work.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlSetEditCalloutRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    QTParamPreviewCalloutPtr callout; /* requested callout, or NIL to<span></span></pre></td></tr><tr><td scope="row"><pre>                                        disable*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlSetEditCalloutRecord QTCustomControlSetEditCalloutRecord;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlSetEditCalloutRecord * QTCustomControlSetEditCalloutPtr;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195681" title="Using pdActionCustomGetEnableValue to Enable or Disable Other Controls"></a><h5>Using 
<code>pdActionCustomGetEnableValue</code> to
Enable or Disable Other Controls</h5>
<p><code>pdActionCustomGetEnableValue</code> allows
you to return a value for the purposes of enabling or disabling
other controls.</p>
<p>Most custom controls do not need to implement this call.</p>
<p>If your control is able to control the enabling and disabling
of other parameter controls (such as is done by standard pop up
or enumerated type controls), you need to supply a value that can
be use for greater than or less than types of comparisons.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlGetEnableValueRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    long currentValue; /* value to compare against for enable/disable<span></span></pre></td></tr><tr><td scope="row"><pre>                        purposes*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlGetEnableValueRecord QTCustomControlGetEnableValueRecord;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlGetEnableValueRecord * QTCustomControlGetEnableValuePtr;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195726" title="Using pdActionCustomSetSampleTime to Specify Duration and Start Time"></a><h5>Using 
<code>pdActionCustomSetSampleTime</code> to
Specify Duration and Start Time</h5>
<p><code>pdActionCustomSetSampleTime</code> tells
your control information from the application about the duration
and start time for the sample being edited.</p>
<p>Most controls do not need this information, but some may choose
to use it in the interface they present the user. However, this
call need not be made by applications, so the custom control should
be prepared to run when the sample time information is not available.</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlSetSampleTimeRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    QTParamSampleTimePtr sampleTime; /* sample time information or NIL*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlSetSampleTimeRecord QTCustomControlSetSampleTimeRecord;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlSetSampleTimeRecord * QTCustomControlSetSampleTimePtr;<span></span></pre></td></tr></table></div>
<p><code>pdActionCustomGetValue</code> tells
your control to store any value(s) into the specified atom container.</p>
<p>All custom controls must implement this call. </p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlGetValueRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    QTAtomContainer sample; /* sample to store into*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlGetValueRecord QTCustomControlGetValueRecord;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlGetValueRecord * QTCustomControlGetValuePtr;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-195793" title="Using pdActionCustomDoEditCommand to Handle Edit Commands"></a><h5>Using 
<code>pdActionCustomDoEditCommand</code> to
Handle Edit Commands</h5>
<p><code>pdActionCustomDoEditCommand</code> tells
your control to handle edit commands if it allow focus and type
in boxes.</p>
<p>All custom controls must implement this call if they support
edit boxes. </p>
<div class="codesample"><table><tr><td scope="row"><pre>struct QTCustomControlDoEditCommandRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>    void * storage; /* storage for the control*/<span></span></pre></td></tr><tr><td scope="row"><pre>    long command; /* command to execute, return 0 here if processed*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct QTCustomControlDoEditCommandRecord QTCustomControlDoEditCommandRecord;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>typedef QTCustomControlDoEditCommandRecord * QTCustomControlDoEditCommandPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef long QTParameterDialog;<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    elOptionsIncludeNoneInList  = 0x00000001 /* &quot;None&quot; effect is included<span></span></pre></td></tr><tr><td scope="row"><pre>                                                in list */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef long QTEffectListOptions;<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    pdOptionsCollectOneValue = 0x00000001, /* should collect a single<span></span></pre></td></tr><tr><td scope="row"><pre>                                            value only*/<span></span></pre></td></tr><tr><td scope="row"><pre>pdOptionsAllowOptionalInterpolations = 0x00000002, /* non-novice<span></span></pre></td></tr><tr><td scope="row"><pre>                                    interpolation options are shown */<span></span></pre></td></tr><tr><td scope="row"><pre>pdOptionsModalDialogBox = 0x00000004, /* dialog box should be modal */<span></span></pre></td></tr><tr><td scope="row"><pre>pdOptionsEditCurrentEffectOnly = 0x00000008, /* List of effects will not<span></span></pre></td></tr><tr><td scope="row"><pre>                                                be shown */<span></span></pre></td></tr><tr><td scope="row"><pre>pdOptionsHidePreview = 0x00000010 /* Preview item will not be shown */<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    effectIsRealtime = 0 /* effect can be rendered in real time */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>The following is a new API introduced in QuickTime 6. </p>
<a name="//apple_ref/c/func/QTGetEffectsListExtended" title="QTGetEffectsListExtended"></a><a name="//apple_ref/doc/c_ref/QTGetEffectsListExtended" title="QTGetEffectsListExtended"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTGetEffectsListExtended" title="QTGetEffectsListExtended"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_48"></a><h3 class="tight">QTGetEffectsListExtended</h3>
<p class="spaceabove">Provides for more advanced filtering of effects to be
placed into the effect list. </p>
<p class="spaceabove"><pre>
QTGetEffectsListExtended (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTAtomContainer" target="_top">QTAtomContainer</a> * list,
   long minSources,
   long maxSources,
   <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTEffectListOptions" target="_top">QTEffectListOptions</a> getOptions,
   <!--a-->OSType<!--/a--> majorClass,
   <!--a-->OSType<!--/a--> minorClass,
   <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTEffectListFilterUPP" target="_top">QTEffectListFilterUPP</a> filterProc,
   void * filterRefCon);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>list</em></dt>
<dd><p>The effect list returned here. </p></dd>
<dt><em>minSources</em></dt>
<dd><p>The minimum number of sources that an effect
must have to be added to the list. Pass &#8211;1 as this parameter to
specify no minimum.</p></dd>
<dt><em>maxSources</em></dt>
<dd><p>The maximum number of sources that an effect
can have to be added to the list. Pass &#8211;1 as this parameter to
specify no maximum. The <code>minSources</code> and <code>maxSources</code> parameters
allow you to restrict which effects are returned in the list, by
specifying the minimum and maximum number of sources that qualifying
effects can have.</p></dd>
<dt><em>getOptions</em></dt>
<dd><p>The options for populating the list. </p></dd>
<dt><em>majorClass</em></dt>
<dd><p>The major class to include, 0 for all. </p></dd>
<dt><em>minorClass</em></dt>
<dd><p>The minor class to include, 0 for all. </p></dd>
<dt><em>filterPro</em></dt>
<dd><p>Additional client filtering. </p></dd>
<dt><em>filterRefCon</em></dt>
<dd><p>A reference constant for the filter proc. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine provides for more advanced filtering of effects
to be placed into the effect list. Applications can filter on:</p>
<ul class="ul"><li class="li"><p>the number of input sources</p></li>
<li class="li"><p>effect major or minor class</p></li>
<li class="li"><p>custom filtering through a callback</p></li></ul>
<p>The callback is called for each effect which passes the other
criteria for inclusion. If the callback returns a <code>TRUE</code> result,
the effect is included in the list.</p>
<p>Note that your filter proc may receive multiple effects from
various manufacturers. If you return <code>TRUE</code> for
multiple effects of a given type, only the one with the higher parameter version
number will be included.</p>
<p>If you wish other filtering such as effects from a given manufacturer,
you can do this by returning <code>FALSE</code> for
the other effects and <code>TRUE</code> for
those that you prefer.</p>
<div class="codesample"><table><tr><td scope="row"><pre>typedef CALLBACK_API( Boolean, QTEffectListFilterProcPtr )(Component<span></span></pre></td></tr><tr><td scope="row"><pre>effect, long effectMinSource, long effectMaxSource, OSType majorClass, OSType minorClass, void *refcon);<span></span></pre></td></tr><tr><td scope="row"><pre>typedef STACK_UPP_TYPE(QTEffectListFilterProcPtr)   QTEffectListFilterUPP;<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p>
<p><code>QTGetEffectsList</code>,
which returns a QT atom container holding a list of the currently
installed effects components.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-196855" title="QuickTime Effects Classes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF222" title="QuickTime Effects Classes"></a><h3>QuickTime Effects
Classes</h3>
<p>With an ever-increasing number of effect components, it has
become difficult for applications and users to navigate through
the list. This section documents upcoming atoms that can be used
for tagging effects into useful categories.</p>
<p>This will be of use to developers of applications that supply
custom effect picking UI. It will also be of use for developers
of effect components. Two groupings for effects are here defined:
Major Class and Minor Class. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-196874" title="Major Class"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF223" title="Major Class"></a><h4>Major Class</h4>
<p>The Major Class for an effect defines the purpose of an effect
to allow applications to perform better filtering. It is not intended
that the user see effects grouped by major class. For example, a
two source effect might be given a major class of <code>kTransitionMajorClass</code>,
which allows applications to tell the difference between two source
effects that perform a transition vs. those that perform operations
such as Chroma Key. Some applications may wish to exclude all effects
that are not transitions.</p>
<p>Effects supply information about their Major Class through
the use of an atom that can be found within their Effect Parameter
Description atom container. Applications can read in this atom to
determine the Major Class of a particular Effect.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    #define kEffectMajorClassType       'clsa'<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kEffectMajorClassID         (1)<span></span></pre></td></tr></table></div>
<p>The following are the defined legal values for the Major Class
atom. Effects that fail to include a <code>kEffectMajorClassType</code> will
be classified as <code>kMiscMajorClass</code>.
Developers who feel their effect requires a new Major Class should
contact Apple. Because Major Classes are used for filtering by applications,
any extensions will need to be documented before they can become
useful.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    #define kGeneratorMajorClass        'genr'  // zero source effects<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kFilterMajorClass           'filt'  // one source effects<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kTransitionMajorClass       'tran'  // multisource morph<span></span></pre></td></tr><tr><td scope="row"><pre>                                                // effects<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kCompositorMajorClass       'comp'  // multisource layer<span></span></pre></td></tr><tr><td scope="row"><pre>                                                // effects<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kMiscMajorClass             'misc'  // all other effects<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-196936" title="Minor Class"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF224" title="Minor Class"></a><h4>Minor Class</h4>
<p>Like the Major Class, the Minor Class of an effect serves
to group the effect into a more refined definition. Unlike the Major
Class, however, the Minor Class is intended to be used for grouping
for the purposes of User Interface presentation. It is not intended
that the Minor Class should be used for limiting the list of effects
that a user might see&#8211;&#8211;that is the purpose of the Major Class.</p>
<p>Effects supply information about their Minor Class through
the use of an atom that can be found within their Effect Parameter
Description atom container. Applications can read in this atom to
determine the Minor Class of a particular Effect.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    #define kEffectMinorClassType       'clsi'<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kEffectMinorClassID         (1)<span></span></pre></td></tr></table></div>
<p>The following are Apple-defined values for the Minor Class
atom, along with the recommended name to be used for display purposes.
Effects that fail to include a <code>kEffectMinorClassType</code> will
be classified as <code>kMiscMinorClass</code>.
Effects are free to define their own Minor Classes, although Apple
recommends that standard values be used if at all possible.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    #define kGeneratorMinorClass        'genr'  // &quot;Generators&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kRenderMinorClass           'rend'  // &quot;Render&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kFilterMinorClass           'filt'  // &quot;Filters&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kArtisticMinorClass         'arts'  // &quot;Artistic<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kBlurMinorClass             'blur'  // &quot;Blur&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kSharpenMinorClass          'shrp'  // &quot;Sharpen&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kDistortMinorClass          'dist'  // &quot;Distort&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kNoiseMinorClass            'nois'  // &quot;Noise&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kAdjustmentMinorClass       'adst'  // &quot;Adjustments&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kTransitionMinorClass       'tran'  // &quot;Transitions&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kWipeMinorClass             'wipe'  // &quot;Wipes&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define k3DMinorClass               'pzre'  // &quot;3D Transitions&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kCompositorMinorClass       'comp'  // &quot;Compositors&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kEffectsMinorClass          'fxfx'  // &quot;Special Effects&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kMiscMinorClass             'misc'  // &quot;Miscellaneous&quot;<span></span></pre></td></tr></table></div>
<p>Effects that don&#8217;t fit into the above listed groupings can
supply another value for their Minor Class. However, it is likely
that these effects will want to have a user visible name to go along
with their class. The name is supplied by another atom, which should
contain a Pascal string that is the name of the minor class. If
the minor class is one which already has a standard name, this atom
will be ignored.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    #define kEffectMinorClassNameType   'clsn'<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kEffectMinorClassNameID     (1)<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197087" title="QuickTime Effects Presets"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF225" title="QuickTime Effects Presets"></a><h3>QuickTime Effects
Presets</h3>
<p>Some effects with complex parameters would like to provide
the user with groups of useful parameter values that can be easily
selected. This section documents an optional mechanism that can
be used by effects to define these &#8220;presets.&#8221; Applications may
also use these presets to present to the user a list of selectable
effect parameters.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197101" title="Atom Contents"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF226" title="Atom Contents"></a><h4>Atom Contents</h4>
<p>Like most options within effects, the presets are defined
through the use of atoms present within the Effect Parameter Description
atom container. Effects may define any number of presets, with the
atom type being <code>kEffectPresetType</code> and
the ID being numbers from 1 to N (where N is the number of presets).</p>
<p>Within each preset, three child atoms are found:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    #define kPresetNameType                 'pnam'<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kPresetNameID                   (1)<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kPresetPreviewPictureType       'ppct'<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kPresetPreviewPictureID         (1)<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kPresetSettingsType             'psst'<span></span></pre></td></tr><tr><td scope="row"><pre>    #define kPresetSettingsID               (1)<span></span></pre></td></tr></table></div>
<p>The preset name defines the name of the preset as a Pascal
string. The preset preview picture defines the image to be displayed
to the user as a picture with a minimum size of 86 by 64 pixels.
The preset settings atom contains within it all of the parameter
values that define a particular preset.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197142" title="Example Effect &#39;atms&#39; Resource"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF227" title="Example Effect &#39;atms&#39; Resource"></a><h4>Example Effect 
<code>'atms'</code> Resource</h4>
<p>This example shows the presets present in the Slide effect
that define a Top and Bottom directed slide. The example is a portion
of the <code>'atms'</code> resource
and demonstrates how to define these presets through the use of
Rez.</p>
<div class="codesample"><table><tr><td scope="row"><pre>// atom type       ID Child count<span></span></pre></td></tr><tr><td scope="row"><pre>kEffectPresetType, 1, 3,<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>    };<span></span></pre></td></tr><tr><td scope="row"><pre>    kPresetNameType, kPresetNameID, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>        string { &quot;Top&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>        };<span></span></pre></td></tr><tr><td scope="row"><pre>    kPresetPreviewPictureType, kPresetPreviewPictureID, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>        lstring {<span></span></pre></td></tr><tr><td scope="row"><pre>            $&quot;08A0 0000 0000 0040 0056 0011 02FF 0C00&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>            /* MORE PICTURE DATA HERE */<span></span></pre></td></tr><tr><td scope="row"><pre>            $&quot;7FE0 03AB 7FE0 03AB 7FE0 03AB 7FE0 00FF&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>            };<span></span></pre></td></tr><tr><td scope="row"><pre>        };<span></span></pre></td></tr><tr><td scope="row"><pre>    kPresetSettingsType, kPresetSettingsID, 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>        };<span></span></pre></td></tr><tr><td scope="row"><pre>        'pcnt', 1, 2,<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>            };<span></span></pre></td></tr><tr><td scope="row"><pre>            'twnt', 1, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>                {<span></span></pre></td></tr><tr><td scope="row"><pre>                kParameterTypeDataFixed;<span></span></pre></td></tr><tr><td scope="row"><pre>                };<span></span></pre></td></tr><tr><td scope="row"><pre>            'data', 1, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>                {<span></span></pre></td></tr><tr><td scope="row"><pre>                long { &quot;0&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>                long { &quot;65536&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>                };<span></span></pre></td></tr><tr><td scope="row"><pre>        'angl', 1, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>            Fixed { &quot;0.0&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>            };<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// atom type       ID Child count<span></span></pre></td></tr><tr><td scope="row"><pre>kEffectPresetType, 2, 3,<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>    };<span></span></pre></td></tr><tr><td scope="row"><pre>    kPresetNameType, kPresetNameID, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>        string { &quot;Bottom&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>        };<span></span></pre></td></tr><tr><td scope="row"><pre>    kPresetPreviewPictureType, kPresetPreviewPictureID, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>        lstring {<span></span></pre></td></tr><tr><td scope="row"><pre>        $&quot;083C 0000 0000 0040 0056 0011 02FF 0C00&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        /* MORE PICTURE DATA HERE */<span></span></pre></td></tr><tr><td scope="row"><pre>        $&quot;0277 BF42 1F08 5FE8 001F 00FF&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>            };<span></span></pre></td></tr><tr><td scope="row"><pre>        };<span></span></pre></td></tr><tr><td scope="row"><pre>    kPresetSettingsType, kPresetSettingsID, 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>        };<span></span></pre></td></tr><tr><td scope="row"><pre>        'pcnt', 1, 2,<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>            };<span></span></pre></td></tr><tr><td scope="row"><pre>            'twnt', 1, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>                {<span></span></pre></td></tr><tr><td scope="row"><pre>                kParameterTypeDataFixed;<span></span></pre></td></tr><tr><td scope="row"><pre>                };<span></span></pre></td></tr><tr><td scope="row"><pre>            'data', 1, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>                {<span></span></pre></td></tr><tr><td scope="row"><pre>                long { &quot;0&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>                long { &quot;65536&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>                };<span></span></pre></td></tr><tr><td scope="row"><pre>        'angl', 1, noChildren,<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>            Fixed { &quot;180.0&quot; };<span></span></pre></td></tr><tr><td scope="row"><pre>            };<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197250" title="None Codec Enhancements"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF228" title="None Codec Enhancements"></a><h3>None Codec Enhancements</h3>
<p>QuickTime 6 includes an improved None codec (also known as
the Raw codec because it deals with manipulations of uncompressed
pixels). The new version provides the following enhancements:</p>
<ul class="spaceabove"><li class="li"><p>improved quality </p></li>
<li class="li"><p>increased speed </p></li>
<li class="li"><p>greater robustness</p></li>
<li class="li"><p>significantly decreased memory usage, with little increase
in code size.</p></li></ul>
<p>In QuickTime 5.0.x and before, the None codec would always
use point sampling. The new version uses point sampling in the fastest,
lowest-quality mode, bilinear interpolation in a slower, medium-quality
mode, and bicubic anti-aliasing in the slowest, highest-quality mode.</p>
<p>The enhanced None codec introduces two new quality levels
beyond the point-sampling quality provided in the previous None
codec: </p>
<ul class="spaceabove"><li class="li"><p>bilinear interpolation </p></li>
<li class="li"><p>bicubic anti-aliasing </p></li></ul>
<p>This quality is especially apparent in</p>
<p>(1) rotation,</p>
<p>(2) perspective,</p>
<p>(3) image size reduction, and</p>
<p>(4) image size zooming.</p>
<p>Bilinear interpolation is available with <code>codecHighQuality</code>.</p>
<p><code>codecMaxQuality</code> yields
either bicubic anti-aliasing or bicubic interpolation, depending
on the complexity of the transformation: anti-aliasing is currently
only available with pure scaling operations, not rotation or perspective.
The anti-aliasing is designed to meet or exceed the quality produced
by Adobe PhotoShop. When specifying <code>codecNormalQuality</code>, point-sampling
is used.</p>
<p>When doing minor size changes or phase changes, there is little
apparent difference in quality between bilinear and bicubic interpolation:
the primary difference is in sharpness and contrast. This is especially
noticeable after multiple generations of processing, where bilinear
processing will lose sharpness and contrast, whereas bicubic interpolation
tends to preserve it.</p>
<p>When zooming up by a factor of 4 or more, bilinear interpolation
suffers from &#8220;stellation&#8221;: where stars are superimposed on the
pixels. Bicubic interpolation yields more natural, rounded, smooth
features without artifacts.</p>
<p>When decimating an image (that is, reducing its size), bicubic
anti-aliasing produces the best possible quality. Bilinear interpolation
can yield acceptable quality if only shrinking a small amount, but
decimation by greater than a factor of 2 will cause aliasing, which
is manifested as jaggies, disappearing detail, and &#8220;popping pixels.&#8221;</p>
<p>As expected, higher quality comes at a price. With point-sampling
(codecNormalQuality) taking 1 T seconds, the others take approximately:</p>
<ul class="spaceabove"><li class="li"><p> 1 T: codecNormalQuality = point-sampling</p></li>
<li class="li"><p> 3 T: codecHighQuality = bilinear interpolation</p></li>
<li class="li"><p>10 T: codecMaxQuality = bicubic interpolation or anti-aliasing</p></li></ul>
<p>Using a higher quality may have a negative effect on frame
rate, especially on older machines. Typically, <code>codecMaxQuality</code> is
to be used for off-line, non-real-time applications, whereas <code>codecHighQuality</code> can
be used successfully for real-time applications on faster machines.
You might want to check the frame rate and throttle the quality
as appropriate. Even faster machines can benefit from this throttling,
because their frame rate can suffer on higher resolution images.</p>
<p>The new enhanced None codec is a complete implementation of
its component interface. Complete implementation is defined as:</p>
<ul class="spaceabove"><li class="li"><p>11 pixel formats for the source</p></li>
<li class="li"><p>11 pixel formats for the destination</p></li>
<li class="li"><p>8 transfer modes</p></li>
<li class="li"><p>3 quality levels</p></li>
<li class="li"><p>full 3x3 matrix transformations, including rotation and perspective</p></li></ul>
<p>Pixel formats:</p>
<ul class="spaceabove"><li class="li"><p>8 bit color mapped</p></li>
<li class="li"><p>8 bit grayscale</p></li>
<li class="li"><p>16 bit BE555</p></li>
<li class="li"><p>16 bit LE555*</p></li>
<li class="li"><p>16 bit LE565*</p></li>
<li class="li"><p>24 bit RGB</p></li>
<li class="li"><p>24 bit BGR*</p></li>
<li class="li"><p>32 bit ARGB</p></li>
<li class="li"><p>32 bit ABGR*</p></li>
<li class="li"><p>32 bit BGRA*</p></li>
<li class="li"><p>32 bit RGBA*</p></li></ul>
<p>(Note that formats flagged with an asterisk (*) are only available
on Windows).</p>
<p>Transfer modes:</p>
<ul class="spaceabove"><li class="li"><p>Copy</p></li>
<li class="li"><p>Dither Copy</p></li>
<li class="li"><p>Transparent (chroma-key)</p></li>
<li class="li"><p>Blend</p></li>
<li class="li"><p>Straight alpha</p></li>
<li class="li"><p>Alpha premultiplied to black</p></li>
<li class="li"><p>Alpha premultiplied to white</p></li>
<li class="li"><p>Straight alpha blend</p></li></ul>
<p>Alpha-premultiplied-to-black is the fastest of the alpha compositing
modes. For example, it is possible to transform a 32 bit ARGB PixMap
by a 3x3 perspective transformation, interpolating it with bicubic
interpolation, and alpha-compositing it to an 8-bit color-mapped
PixMap&#8211;&#8211;directly&#8211;&#8211;one-pass.</p>
<p>More pixel formats (1, 2 and 4 bits) are supported, but in
a less than desirable way, by relying on CopyBits and multiple instantiations
of the enhanced None codec. Other transfer modes (for example, XOR)
are feebly supported in the same manner.</p>
<p>Alpha is a first class component of 32 bit pixels. The previous
None codec sometimes behaved badly with the alpha component, but
the enhanced None codec preserves it and involves it in computations.
The result of an alpha composition has a meaningful alpha component,
which can then be used as a source for a subsequent alpha composition;
using this, rendering can be optimized by caching partial composites
of the static portions of scenes, requiring only the dynamic portions
to be composited individually. From an architectural viewpoint,
these alpha operations lend themselves then to a composition tree or
DAG (directed acyclic graph), rather than a simple composition pipeline
as limited in the previous None codec. This comes at no additional
computational cost.</p>
<p>The enhanced None codec in QuickTime 6 is typically invoked
using:</p>
<ul class="spaceabove"><li class="li"><p><code>MakeImageDescriptionForPixMap()</code></p></li>
<li class="li"><p><code>DecompressSequenceBegin()</code></p></li>
<li class="li"><p><code>SetDSequenceTransferMode()</code></p></li>
<li class="li"><p><code>DecompressSequenceFrameS()</code></p></li>
<li class="li"><p><code>CDSequenceEnd()</code></p></li></ul>
<p>and other calls.</p>
<p>Unlike the previous None codec, there is a negligible penalty
for startup, and matrix changes. In particular, the matrix can be
changed every frame with no degradation of the frame rate. Thus,
it can be used for immersive imaging applications, where a series
of images are embedded in 3D. </p>
<p>For more information, see Ice Floe Note #23 at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/quicktime/icefloe/dispatch023.html<span></span></pre></td></tr></table></div>
<p>The new enhanced None codec can be used as a general texture-mapped
rendering and compositing engine, when accessed directly through
the API. However, it is also invoked automatically by the Image
Compression Manager (ICM) to assist other codecs, by the Sprite
Media to implement animation, and by others.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197739" title="Additional Still Image Metadata Support in Mac OS 9 and Windows"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF229" title="Additional Still Image Metadata Support in Mac OS 9 and Windows"></a><h3>Additional Still
Image Metadata Support in Mac OS 9 and Windows</h3>
<p>The JPEG and TIFF graphics exporters should be able to create
Exif files containing application-specified metadata and thumbnail
images. QuickTime for Mac OS X (10.1) provided this support, which
is now also available in Mac OS 9 and Windows. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197753" title="Indexed Image Types"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF230" title="Indexed Image Types"></a><h4>Indexed Image
Types</h4>
<p>Several graphics importers support access to individual images
within a multiple-image file. By using the <code>GraphicsImportGetImageCount</code> and <code>GraphicsImportSetImageIndex</code> routines,
you can select an individual layer from a Photoshop file, or an
individual resolution from a multi-resolution FlashPix file, for
example. However, there has not been a way to distinguish between
different types of indexed images: thumbnail, layer, page, resolution, etc.
Although applications can sometimes use the file type to suggest
the interpretation, this inhibits them from being able to take full
advantage of new third-party graphics importers. Furthermore, some
formats, such as TIFF, can support a variety of indexed image types.</p>
<p>The user data type <code>kQTIndexedImageType</code> has
now been defined for graphics importers to indicate what a particular
indexed image is. The following sample code shows how to determine
whether the second image in a file is a thumbnail. </p>
<div class="codesample"><table><tr><td scope="row"><pre>Boolean IsSecondImageThumbnail( GraphicsImportComponent gi )<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    OSErr err;<span></span></pre></td></tr><tr><td scope="row"><pre>    unsigned long saveIndex = 1;<span></span></pre></td></tr><tr><td scope="row"><pre>    UserData userData = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    Handle h = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean isThumbnail = false;<span></span></pre></td></tr><tr><td scope="row"><pre>    long count, i;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    GraphicsImportGetImageIndex( gi, &amp;saveIndex );<span></span></pre></td></tr><tr><td scope="row"><pre>    err = GraphicsImportSetImageIndex( gi, 2 );<span></span></pre></td></tr><tr><td scope="row"><pre>    if( err ) goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>    err = NewUserData( &amp;userData );<span></span></pre></td></tr><tr><td scope="row"><pre>    if( err ) goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>    err = GraphicsImportGetMetaData( gi, userData );<span></span></pre></td></tr><tr><td scope="row"><pre>    if( err ) goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>    h = NewHandle( 0 );<span></span></pre></td></tr><tr><td scope="row"><pre>    err = MemError();<span></span></pre></td></tr><tr><td scope="row"><pre>    if( err ) goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>    err = GetUserData( userData, h, kQTIndexedImageType, 1 );<span></span></pre></td></tr><tr><td scope="row"><pre>    if( err ) goto bail;<span></span></pre></td></tr><tr><td scope="row"><pre>    // Is kQTIndexedImageIsThumbnail present in the list?<span></span></pre></td></tr><tr><td scope="row"><pre>    count = GetHandleSize( h ) / sizeof( OSType );<span></span></pre></td></tr><tr><td scope="row"><pre>    for( i = 0; i &lt; count; i++ ) {<span></span></pre></td></tr><tr><td scope="row"><pre>        if( EndianU32_NtoB(kQTIndexedImageIsThumbnail) == ((OSType *)*h)[ i ] ) {<span></span></pre></td></tr><tr><td scope="row"><pre>            isThumbnail = true;<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>bail:<span></span></pre></td></tr><tr><td scope="row"><pre>    if( userData ) DisposeUserData( userData );<span></span></pre></td></tr><tr><td scope="row"><pre>    if( h ) DisposeHandle( h );<span></span></pre></td></tr><tr><td scope="row"><pre>    GraphicsImportSetImageIndex( gi, saveIndex );<span></span></pre></td></tr><tr><td scope="row"><pre>    return isThumbnail;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197797" title="Alpha Modes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF231" title="Alpha Modes"></a><h4>Alpha Modes</h4>
<p>The user data type <code>kQTAlphaMode</code> has
been defined to allow graphics importers to indicate the recommended
interpretation of an image&#8217;s alpha channel, if known. For example,
a graphics importer could indicate that the image data has been
premultiplied with the alpha channel against a black background
by reporting a metadata item of type <code>kQTAlphaMode</code> and
value <code>graphicsModePreBlackAlpha</code>.
If the image data has not been premultiplied, it would report <code>graphicsModeStraightAlpha</code>.</p>
<p></p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Image Data</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>User Data Type </p></th>
</tr>


<tr>
<td  scope="row"><p>Not premultiplied			 </p></td>
<td ><p><code>graphicsModeStraightAlpha</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Premultiplied with alpha channel against black background</p></td>
<td ><p><code>graphicsModePreBlackAlpha</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Premultiplied with alpha channel against white background</p></td>
<td ><p><code>graphicsModePreWhiteAlpha</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Premultiplied with alpha channel against other color</p></td>
<td ><p><code>graphicsModePreMulColorAlpha</code>;
color indicated in <code>kQTAlphaModePreMulColor</code> value</p></td>
</tr>

</table></div>
<p>The depth value of 32 in an image description indicates the
presence of an alpha channel.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-197896" title="Extracted TIFF and Exif Metadata"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF232" title="Extracted TIFF and Exif Metadata"></a><h4>Extracted TIFF
and Exif Metadata</h4>
<p>The TIFF graphics importer can extract metadata from a variety
of TIFF tags for which QuickTime does not have standard user data
type codes. Rather than define an individual code for each TIFF
tag imported in this way, the graphics importer constructs user
data type codes from the TIFF tags by adding the TIFF tag values
(which are unsigned 2-byte integers) to defined prefix values (which
fill in the two most significant bytes).</p>
<p>The following fields in the main TIFF directory are translated
to standard QuickTime user data types:</p>
<p></p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>TIFF Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>User Data Type </p></th>
</tr>


<tr>
<td  scope="row"><p>DocumentName</p></td>
<td ><p><code>kUserDataTextFullName</code></p></td>
</tr>
<tr>
<td  scope="row"><p>ImageDescription</p></td>
<td ><p><code>kUserDataTextInformation</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Make</p></td>
<td ><p><code>kUserDataTextMake</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Model</p></td>
<td ><p><code>kUserDataTextModel</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Software</p></td>
<td ><p><code>kUserDataTextSoftware</code></p></td>
</tr>
<tr>
<td  scope="row"><p>DateTime</p></td>
<td ><p><code>kUserDataTextCreationDate</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Artist</p></td>
<td ><p><code>kUserDataTextArtist</code></p></td>
</tr>
<tr>
<td  scope="row"><p>HostComputer</p></td>
<td ><p><code>kUserDataTextHostComputer</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Copyright</p></td>
<td ><p><code>kUserDataTextCopyright</code></p></td>
</tr>
<tr>
<td  scope="row"><p>IPTC (0x8469)</p></td>
<td ><p><code>kUserDataIPTC</code></p></td>
</tr>

</table></div>
<p>The following fields in the main TIFF directory are translated
to user data using the prefix value <code>kQTTIFFUserDataPrefix</code>:</p>
<ul class="spaceabove"><li class="li"><p>Orientation (0x0112)</p></li>
<li class="li"><p>TransferFunction (0x012D)</p></li>
<li class="li"><p>WhitePoint (0x013E)</p></li>
<li class="li"><p>PrimaryChromaticities (0x013F)</p></li>
<li class="li"><p>ColorMap (0x0140)</p></li>
<li class="li"><p>TransferRange (0x0156)</p></li>
<li class="li"><p>YCbCrCoefficients (0x0211)</p></li>
<li class="li"><p>YCbCrPositioning (0x0213)</p></li>
<li class="li"><p>ReferenceBlackWhite (0x0214)</p></li>
<li class="li"><p>ModelPixelScale (0x830E)</p></li>
<li class="li"><p>ModelTransformation (0x85D8)</p></li>
<li class="li"><p>ModelTiepoint (0x8482)</p></li>
<li class="li"><p>GeoKeyDirectory (0x87AF)</p></li>
<li class="li"><p>GeoDoubleParams (0x87B0)</p></li>
<li class="li"><p>GeoAsciiParams (0x87B1)</p></li>
<li class="li"><p>IntergraphMatrix (0x8480)</p></li></ul>
<p>In Exif TIFF files, all fields in the Exif directory are translated
to user data using the prefix value <code>kQTTIFFExifUserDataPrefix</code>.
All fields in a GPS directory are translated to user data using the
prefix value <code>kQTTIFFExifGPSUserDataPrefix</code>.</p>
<p>The TIFF graphics exporter also supports storing the following
user data types in exported TIFF files:</p>
<p>User Data Type		TIFF Field</p>
<p><code>kUserDataTextFullName</code>			
DocumentName</p>
<p><code>kUserDataTextInformation</code>			
ImageDescription</p>
<p><code>kUserDataTextMake</code>			
Make</p>
<p><code>kUserDataTextModel</code> Model</p>
<p><code>kUserDataTextArtist</code>			
Artist</p>
<p><code>kUserDataTextCopyright</code>			
Copyright</p>
<p>Software, DateTime, and HostComputer are written automatically. </p>
<p>In Exif mode, the TIFF graphics exporter will also write tags
defined in the Exif version 2.1 specification by reversing the <code>kQTTIFFExifUserDataPrefix</code> and <code>kQTTIFFExifGPSUserDataPrefix</code> mappings. </p>
<p>In Exif mode, the JPEG graphics exporter supports all the
same metadata fields as the TIFF graphics exporter.</p>
<p>Note that UserData item data is always stored big-endian.
The TIFF graphics importer and graphics exporter perform whatever
translation is necessary.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-198528" title="New APIs For Creating Exif Files"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF233" title="New APIs For Creating Exif Files"></a><h3>New APIs For Creating
Exif Files</h3>
<p>The following are a group of new APIs available on Mac OS
X, Mac OS 9, and Windows for creating Exif files. </p>
<a name="//apple_ref/c/func/GraphicsExportSetExifEnabled" title="GraphicsExportSetExifEnabled"></a><a name="//apple_ref/doc/c_ref/GraphicsExportSetExifEnabled" title="GraphicsExportSetExifEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-GraphicsExportSetExifEnabled" title="GraphicsExportSetExifEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_49"></a><h3 class="tight">GraphicsExportSetExifEnabled</h3>
<p class="spaceabove">Sets whether or not the graphics exporter component should
create Exif files. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> GraphicsExportSetExifEnabled (<a href="../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/doc/c_ref/GraphicsExportComponent" target="_top">GraphicsExportComponent</a> ci,
   <!--a-->Boolean<!--/a--> enableExif );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the graphics exporter component.</p></dd>
<dt><em>enableExif</em></dt>
<dd><p>Indicates whether to turn Exif export on or
off.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>Turning on Exif export disables incompatible settings, such
as grayscale JPEG and compressed TIFF, and enables export of Exif
metadata. Use the <code>GraphicsExportSetMetaData</code> routine
to supply Exif metadata.</p>
<p>This routine is only supported by the TIFF and JPEG graphics
exporters.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/GraphicsExportGetExifEnabled" title="GraphicsExportGetExifEnabled"></a><a name="//apple_ref/doc/c_ref/GraphicsExportGetExifEnabled" title="GraphicsExportGetExifEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-GraphicsExportGetExifEnabled" title="GraphicsExportGetExifEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_50"></a><h3 class="tight">GraphicsExportGetExifEnabled</h3>
<p class="spaceabove">Returns the current Exif export setting.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> GraphicsExportGetExifEnabled (
   <a href="../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/doc/c_ref/GraphicsExportComponent" target="_top">GraphicsExportComponent</a>  ci,
   <!--a-->Boolean<!--/a--> * exifEnabled );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the graphics exporter component.</p></dd>
<dt><em>enableExif</em></dt>
<dd><p>Points to a variable to receive the current
Exif export setting.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is only supported by the TIFF and JPEG graphics
exporters.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/GraphicsExportSetThumbnailEnabled" title="GraphicsExportSetThumbnailEnabled"></a><a name="//apple_ref/doc/c_ref/GraphicsExportSetThumbnailEnabled" title="GraphicsExportSetThumbnailEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-GraphicsExportSetThumbnailEnabled" title="GraphicsExportSetThumbnailEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_51"></a><h3 class="tight">GraphicsExportSetThumbnailEnabled</h3>
<p class="spaceabove">Sets whether or not the graphics exporter component should
create an embedded thumbnail inside the exported file.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> GraphicsExportSetThumbnailEnabled (
   <a href="../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/doc/c_ref/GraphicsExportComponent" target="_top">GraphicsExportComponent</a>  ci,
   <!--a-->Boolean<!--/a-->                enableThumbnail,
   long                   maxThumbnailWidth,
   long                   maxThumbnailHeight );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the graphics exporter component.</p></dd>
<dt><em>enableThumbnail</em></dt>
<dd><p>	
Indicates whether thumbnail creation should be turned on or off.</p></dd>
<dt><em>maxThumbnailWidth</em></dt>
<dd><p>		
The maximum width for created thumbnails. </p></dd>
<dt><em>maxThumbnailHeight</em></dt>
<dd><p>		
The maximum height for created thumbnails. If one maximum dimension is
zero, only the other will be used. If both maximum dimensions are
0, the graphics exporter will decide for itself.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine also sets optional maximum dimensions for the
thumbnail. The graphics exporter will not change the aspect ratio
of the image when creating the thumbnail; nor will it create a thumbnail
larger than the image.</p>
<p>This routine is currently only supported by the TIFF and JPEG
graphics exporters. The JPEG graphics exporter can only create thumbnails
when writing Exif files.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/GraphicsExportGetThumbnailEnabled" title="GraphicsExportGetThumbnailEnabled"></a><a name="//apple_ref/doc/c_ref/GraphicsExportGetThumbnailEnabled" title="GraphicsExportGetThumbnailEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-GraphicsExportGetThumbnailEnabled" title="GraphicsExportGetThumbnailEnabled"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_52"></a><h3 class="tight">GraphicsExportGetThumbnailEnabled</h3>
<p class="spaceabove">Returns the current thumbnail export settings.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> GraphicsExportGetThumbnailEnabled (
   <a href="../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/doc/c_ref/GraphicsExportComponent" target="_top">GraphicsExportComponent</a>  ci,
   <!--a-->Boolean<!--/a--> *              thumbnailEnabled,
   long *                 maxThumbnailWidth,
   long *                 maxThumbnailHeight );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the graphics exporter component.</p></dd>
<dt><em>thumbnailEnabled</em></dt>
<dd><p>		
Points to a variable to receive the current thumbnail setting. 
Pass NULL if you do not want to receive this information.</p></dd>
<dt><em>maxThumbnailWidth</em></dt>
<dd><p>		
Points to a variable to receive the current maximum thumbnail width.
Pass NULL if you do not want to receive this information.</p></dd>
<dt><em>maxThumbnailHeight</em></dt>
<dd><p>		
Points to a variable to receive the current maximum thumbnail height.
Pass NULL if you do not want to receive this information.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is currently only supported by the TIFF and JPEG
graphics exporters.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-205221" title="Improved Movie Toolbox Support for Data Handlers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF234" title="Improved Movie Toolbox Support for Data Handlers"></a><h3>Improved Movie
Toolbox Support for Data Handlers</h3>
<p>QuickTime 6 enhances the ability of third-party developers
to add new types of data references through the introduction of
QuickTime data handler components. These are called custom data
handlers.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-205235" title="Background"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF235" title="Background"></a><h4>Background</h4>
<p>QuickTime has always had two ways to reference storage of
media data. </p>
<p>The first is through Mac OS-style file specification records
known as FSSpec records. These FSSpec records are used by the Mac
OS toolbox to reference files on disk and can describe any file
in the file system.</p>
<p>The other type of storage reference is through a QuickTime
abstraction known as a data reference. Data references are handles
to blocks of data describing the location of data to be either read
or written. The type of reference is described by a 4 char code
(an OSType) and is used to select the QuickTime component&#8211;&#8211;a
data handler component&#8211;&#8211;that performs the actual I/O operations.</p>
<p>The currently defined data handler types available with QuickTime
are the following:</p>
<ul class="spaceabove"><li class="li"><p><code>rAliasType	            
     = FOUR_CHAR_CODE(&#8216;alis&#8217;)</code></p></li>
<li class="li"><p><code>URLDataHandlerSubType       = FOUR_CHAR_CODE('url
')</code></p></li>
<li class="li"><p><code>HandleDataHandlerSubType    = FOUR_CHAR_CODE('hndl')</code></p></li>
<li class="li"><p><code>PointerDataHandlerSubType   = FOUR_CHAR_CODE('ptr
')</code></p></li>
<li class="li"><p><code>ResourceDataHandlerSubType  = FOUR_CHAR_CODE('rsrc')</code></p></li>
<li class="li"><p><code>NullDataHandlerSubType      = FOUR_CHAR_CODE('null')</code></p></li></ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>rAliasType</code> data
reference type manages access to files. The reference itself is
an Alias handle and can describe any file describable by a <code>FSSpec</code> record.</p></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-205338" title="Data Handlers and the New QuickTime APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF236" title="Data Handlers and the New QuickTime APIs"></a><h4>Data Handlers
and the New QuickTime APIs</h4>
<p>Although the QuickTime software architecture provides rich
support for both FSSpecs and data references, some APIs have not
supported data references as fully as possible. This has meant that
certain operations could only be performed on files described by
FSSpec records. These operations, then, could not be performed with
data handler components, either those provided by QuickTime or those
that were custom.</p>
<p>This section discusses a group of new APIs in <code>Movies.h</code> that
accept a data reference where an older call accepted an FSSpec or
a data handler where a file reference. </p>
<p>The goal is twofold: (1) to support the writing of custom
data handlers, and (2) to ensure that data references can be used
wherever a File Manager API might have only existed before. </p>
<p><span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-251663">Table 1-3</a></span> describes the mapping of old calls to new calls:</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-251663" title="Table 1-3A mapping of old data handler calls to new data handler calls"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF114" title="Table 1-3A mapping of old data handler calls to new data handler calls"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 1-3&nbsp;&nbsp;</strong>A mapping of old data handler calls
to new data handler calls</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Old Calls </p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>New Calls</p></th>
</tr>


<tr>
<td  scope="row"><p><code>CreateMovieFile</code></p></td>
<td ><p><code>CreateMovieStorage</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>OpenMovieFile</code></p></td>
<td ><p><code>OpenMovieStorage</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>CloseMovieFile</code></p></td>
<td ><p><code>CloseMovieStorage</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>DeleteMovieFile</code></p></td>
<td ><p><code>DeleteMovieStorage</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>AddMovieResource</code></p></td>
<td ><p><code>AddMovieToStorage</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>UpdateMovieResource</code></p></td>
<td ><p><code>UpdateMovieInStorage</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>PutMovieIntoDataFork64</code></p></td>
<td ><p><code>PutMovieIntoStorage</code></p></td>
</tr>
<tr>
<td  scope="row"><p><code>NewMovieFromDataFork64</code></p></td>
<td ><p><code>NewMovieFromStorageOffset</code></p></td>
</tr>

</table></div>
<a name="//apple_ref/c/func/PutMovieIntoStorage" title="PutMovieIntoStorage"></a><a name="//apple_ref/doc/c_ref/PutMovieIntoStorage" title="PutMovieIntoStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-PutMovieIntoStorage" title="PutMovieIntoStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_53"></a><h3 class="tight">PutMovieIntoStorage</h3>
<p class="spaceabove">Writes a movie in a given file managed by the data handler.</p>
<p class="spaceabove"><pre>
OSErr PutMovieIntoStorage ( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh,
const <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/wide" target="_top">wide</a> *offset,
unsigned long maxSize );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>A movie identifier. Your application obtains
this identifier from such functions as <code>NewMovie</code> (II&#8211;1098), <code>NewMovieFromFile</code> (II&#8211;1110),
and <code>NewMovieFromHandle</code> (II&#8211;1113).</p></dd>
<dt><em>dh</em></dt>
<dd><p>A data handler for the data fork of the given
storage. You pass in an open write path in the <code>dh</code> parameter.</p></dd>
<dt><em>offset</em></dt>
<dd><p>A pointer to a value that indicates where
the movie should be written.</p></dd>
<dt><em>maxSize</em></dt>
<dd><p>The largest number of bytes that may be written.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	You can access Movie
Toolbox error returns through <code>GetMoviesError</code> (I&#8211;505) and <code>GetMoviesStickyError</code> (I&#8211;506),
as well as in the function result. See &#8220;Error Codes&#8221; (IV&#8211;2718).</p>
<h5 class="tight">Discussion</h5>
<p>If you are writing a custom data handler, make sure that the
following data handler APIs are implemented:</p>
<ul class="ul"><li class="li"><p><code>DataHGetDataRef</code></p></li>
<li class="li"><p><code>DataHWrite64</code></p></li>
<li class="li"><p><code>DataHWrite</code>, if
not support 64-bit offsets</p></li></ul>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/CreateMovieStorage" title="CreateMovieStorage"></a><a name="//apple_ref/doc/c_ref/CreateMovieStorage" title="CreateMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-CreateMovieStorage" title="CreateMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_54"></a><h3 class="tight">CreateMovieStorage</h3>
<p class="spaceabove">Creates an empty storage to hold the movie which references
the data reference, and opens a data handler to the movie file with
write permission.</p>
<p class="spaceabove"><pre>
   
CreateMovieStorage (<!--a-->Handle<!--/a--> dataRef,
<!--a-->OSType<!--/a--> dataRefType,
<!--a-->OSType<!--/a--> creator,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ScriptCode" target="_top">ScriptCode</a> scriptTag,
long createMovieFileFlags,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> * outDataHandler,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> * newmovie);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>dataRef</em></dt>
<dd><p>A data reference to the storage for the movie
file to be created.</p></dd>
<dt><em>dataRefType</em></dt>
<dd><p>The type of data reference. </p></dd>
<dt><em>creator</em></dt>
<dd><p>The creator value for the new file.</p></dd>
<dt><em>scriptTag</em></dt>
<dd><p>The script in which the movie file should
be created. Use the Script Manager constant <code>smSystemScript</code> to
use the system script; use the <code>smCurrentScript</code> constant to
use the current script.</p></dd>
<dt><em>createMovieFileFlags</em></dt>
<dd><p>Controls movie file creation flags (see
below).</p><dl class="termdef">	<dt><i class="mono">createMovieFileDeleteCurFile</em></dt>
<dd><p>Indicates whether to delete an existing file.
If you set this flag to 1, the Movie Toolbox deletes the file (if
it exists) before creating the new movie file. If you set this flag
to 0 and the file specified by the <code>dataRef</code> parameter
already exists, the Movie Toolbox uses the existing file. </p></dd>
<dt>createMovieFileDontCreateMovie</dt>
<dd><p>Controls whether <code>CreateMovieStorage</code> creates
a new movie in the movie file. If you set this flag to 1, the Movie
Toolbox does not create a movie in the new movie file. In this case,
the function ignores the <code>newmovie</code> parameter.
If you set this flag to 0, the Movie Toolbox creates a movie and
returns the movie identifier in the field referred to by the <code>newmovie</code> parameter.</p></dd>
<dt><i class="mono">createMovieFileDontOpenFile</em></dt>
<dd><p>Controls whether <code>CreateMovieStorage</code> opens
the new movie file. If you set this flag to 1, the Movie Toolbox
does not open the new movie file. In this case, the function ignores
the outDataHandler parameter. If you set this flag to 0, the Movie
Toolbox opens the new movie file and returns an instance of a data
handler in the <code>outDataHandler</code> parameter.</p></dd>
<dt><i class="mono">newMovieActive </em></dt>
<dd><p>Controls whether the new movie is active. Set
this flag to 1 to make the new movie active. A movie that does not
have any tracks can still be active. When the Movie Toolbox tries
to play the movie, no images are displayed, because there is no movie
data. You can make a movie active or inactive by calling <code>SetMovieActive</code> (III&#8211;1654).</p></dd>
<dt><i class="mono">newMovieDontAutoAlternate</em></dt>
<dd><p>Controls whether the Movie Toolbox automatically
selects enabled tracks from alternate track groups. If you set this flag
to 1, the Movie Toolbox does not automatically select tracks for
the movie; you must enable tracks yourself.</p></dd></dl></dd>
<dt><em>outDataHandler</em></dt>
<dd><p>A pointer to a field that is to receive
the data handler for the opened movie file. Your application must
use this value when calling other Movie Toolbox functions that work
with movie files. If you set this parameter to NIL, the Movie Toolbox
creates the movie file but does not open the file.</p></dd>
<dt><em>newmovie</em></dt>
<dd><p>A pointer to a field that is to receive the
identifier of the new movie. <code>CreateMovieStorage</code> returns
the identifier of the new movie. If the function could not create
a new movie, it sets this returned value to NIL. If you set this parameter
to NIL, the Movie Toolbox does not create a movie.</p><p>	You can
access Movie Toolbox error returns through <code>GetMoviesError</code> (I&#8211;505) and <code>GetMoviesStickyError</code> (I&#8211;506),
as well as in the function result. See &#8220;Error Codes&#8221; (IV&#8211;2718).</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If you are writing a custom data handler, make sure that the
following data handler APIs are implemented:</p>
<ul class="ul"><li class="li"><p><code>DataHGetDataRef</code></p></li>
<li class="li"><p><code>DataHWrite64</code></p></li>
<li class="li"><p><code>DataHWrite</code>, if
not support 64-bit offsets</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;If <code>createMovieFileDeleteCurFile</code> is
passed, the data handler API requirements are:</p></div><ul class="nested">
<li class="nested li"><p><code>DataHDeleteFile</code>,
if <code>createMovieFileDeleteCurFile</code> is
passed</p></li>
<li class="nested li"><p><code>DataHCreateFileWithFlags</code> or <code>DataHCreateFile</code></p></li>
<li class="nested li"><p><code>DataHOpenForRead</code>/<code>DataHOpenForWrite</code></p></li>
<li class="nested li"><p>The data hanlder must support both <code>kDataHCanRead</code> and <code>kDataHCanWrite</code>. </p></li></ul></li></ul>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/OpenMovieStorage" title="OpenMovieStorage"></a><a name="//apple_ref/doc/c_ref/OpenMovieStorage" title="OpenMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-OpenMovieStorage" title="OpenMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_55"></a><h3 class="tight">OpenMovieStorage</h3>
<p class="spaceabove">Opens a data handler that specifies movie storage.</p>
<p class="spaceabove"><pre>
OpenMovieStorage (<!--a-->Handle<!--/a--> dataRef,
<!--a-->OSType<!--/a--> dataRefType,
long flags,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> * outDataHandler);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>dataRef</em></dt>
<dd><p>A data reference to a handle for the movie
to be stored. </p></dd>
<dt><em>dataRefType</em></dt>
<dd><p>The type of data reference. </p></dd>
<dt><em>flags</em></dt>
<dd><p><code>(</code>See
below.)</p></dd>
<dt><em>outDataHandler</em></dt>
<dd><p>A pointer to a field that is to receive
the data handler for the opened movie file. Your application must
use this value when calling other Movie Toolbox functions that work
with movie files. </p><p>Flags:</p><dl class="termdef">	
<dt><code>kDataHCanRead</code></dt>
<dd></dd>
<dt><code>kDataHCanWrite</code></dt>
<dd></dd></dl></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is rarely used. </p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/CloseMovieStorage" title="CloseMovieStorage"></a><a name="//apple_ref/doc/c_ref/CloseMovieStorage" title="CloseMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-CloseMovieStorage" title="CloseMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_56"></a><h3 class="tight">CloseMovieStorage</h3>
<p class="spaceabove">Closes an open movie storage. </p>
<p class="spaceabove"><pre>
CloseMovieStorage (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>dh</em></dt>
<dd><p>A data handler. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is equivalent to <code>CloseComponent</code>.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/DeleteMovieStorage" title="DeleteMovieStorage"></a><a name="//apple_ref/doc/c_ref/DeleteMovieStorage" title="DeleteMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DeleteMovieStorage" title="DeleteMovieStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_57"></a><h3 class="tight">DeleteMovieStorage</h3>
<p class="spaceabove">Deletes a movie storage.</p>
<p class="spaceabove"><pre>
DeleteMovieStorage (<!--a-->Handle<!--/a--> dataRef,
<!--a-->OSType<!--/a--> dataRefType);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>dataRef</em></dt>
<dd><p>A data reference to the movie storage to be
deleted.</p></dd>
<dt><em>dataRefType</em></dt>
<dd><p>The type of data reference.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If you are writing a custom data handler, make sure that the
following data handler API is implemented:</p>
<ul class="ul"><li class="li"><p><code>DataHDeleteFile</code></p></li></ul>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/AddMovieToStorage" title="AddMovieToStorage"></a><a name="//apple_ref/doc/c_ref/AddMovieToStorage" title="AddMovieToStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-AddMovieToStorage" title="AddMovieToStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_58"></a><h3 class="tight">AddMovieToStorage</h3>
<p class="spaceabove">???</p>
<p class="spaceabove"><pre>
AddMovieToStorage (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>The movie for this operation. </p></dd>
<dt><em>dh</em></dt>
<dd><p>A data handler. </p><p><code>AddMovieToStorage</code> internally
used <code>PutMovieIntoStorage</code>.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_16" title="Note"></a><p><strong>Note:</strong>&nbsp;If you are writing
a custom data handler, make sure that the following data handler
APIs are implemented:</p></div>
<ul class="spaceabove"><li class="li"><p><code>DataHScheduleData64</code> and <code>DataHGetFileSize64</code></p></li>
<li class="li"><p><code>DataHScheduleData</code> and <code>DataHGetFileSize</code>,
if not supporting 64-bit file offsets <code>DataHWrite64</code></p></li>
<li class="li"><p><code>DataHWrite</code>, if
not support 64-bit offsets</p></li>
<li class="li"><p><code>DataHGetDataRef</code></p></li></ul>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/UpdateMovieInStorage" title="UpdateMovieInStorage"></a><a name="//apple_ref/doc/c_ref/UpdateMovieInStorage" title="UpdateMovieInStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-UpdateMovieInStorage" title="UpdateMovieInStorage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_59"></a><h3 class="tight">UpdateMovieInStorage</h3>
<p class="spaceabove">Replaces the contents of a movie resource in a specified
movie storage.</p>
<p class="spaceabove"><pre>
UpdateMovieInStorage (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>The movie for this operation. Your application
obtains this movie identifier from such functions as <code>NewMovie</code> (II&#8211;1098), <code>NewMovieFromFile</code> (II&#8211;1110),
and <code>NewMovieFromHandle</code> (II&#8211;1113).</p></dd>
<dt><em>dh</em></dt>
<dd><p>A data handler. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine, which is similar to OpenMovieStorage, replaces
the contents of a movie resource in a specified movie storage.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/FlattenMovieDataToDataRef" title="FlattenMovieDataToDataRef"></a><a name="//apple_ref/doc/c_ref/FlattenMovieDataToDataRef" title="FlattenMovieDataToDataRef"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-FlattenMovieDataToDataRef" title="FlattenMovieDataToDataRef"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_60"></a><h3 class="tight">FlattenMovieDataToDataRef</h3>
<p class="spaceabove">Performs a flattening operation to the destination data
reference.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> FlattenMovieDataToDataRef (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie,
long movieFlattenFlags,
<!--a-->Handle<!--/a--> dataRef,
<!--a-->OSType<!--/a--> dataRefType,
<!--a-->OSType<!--/a--> creator,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ScriptCode" target="_top">ScriptCode</a> scriptTag,
long createMovieFileFlags);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>The movie for this operation. Your application
obtains this movie identifier from such functions as as <code>NewMovie</code> (II&#8211;1098), <code>NewMovieFromFile</code> (II&#8211;1110),
and <code>NewMovieFromHandle</code> (II&#8211;1113).</p></dd>
<dt><em>movieFlattenFlags</em></dt>
<dd><p>Contains flags (see below) that control
the process of adding movie data to the new movie file. These flags
affect how the toolbox adds movies to the new movie file later.
Set unused flags to 0.</p><dl class="termdef">	
<dt><i class="mono">flattenAddMovieToDataFork</em></dt>
<dd><p>Causes the movie to be placed in the data fork
of the new movie file. You may use this flag to create single-fork
movie files, which can be more easily moved to computer systems other
than Macintosh.</p></dd>
<dt><i class="mono">flattenDontInterleaveFlatten</em></dt>
<dd><p>Allows you to disable the Movie Toolbox&#8217;s data
storage optimizations. By default, the Movie Toolbox stores movie data
in a format that is optimized for the storage device. Set this flag
to 1 to disable these optimizations.</p></dd>
<dt><i class="mono">flattenActiveTracksOnly</em></dt>
<dd><p>Causes the Movie Toolbox to add only enabled movie
tracks to the new movie file. Use <code>SetTrackEnabled</code> (III&#8211;1705),
to enable and disable movie tracks.</p></dd>
<dt><i class="mono">flattenCompressMovieResource</em></dt>
<dd><p>Compresses the movie resource stored in the file&#8217;s
data fork, but not the movie resource stored in the resource fork
on Mac OS systems.</p></dd>
<dt><i class="mono">flattenForceMovieResourceBeforeMovieData</em></dt>
<dd><p>Set this flag when you are creating a fast start
movie, to put the movie resource at the front of the resulting movie
file.</p></dd></dl></dd>
<dt><em>dataRef</em></dt>
<dd><p>A data reference to the handle for the movie
file to be flattened.</p></dd>
<dt><em>dataRefType</em></dt>
<dd><p>The type of data reference. </p></dd>
<dt><em>creator</em></dt>
<dd><p>The creator value for the new file.</p></dd>
<dt><em>scriptTag</em></dt>
<dd><p>Contains constants (see below) that specify
the script in which the movie file should be created. </p><dl class="termdef">	
<dt><i class="mono">smSystemScript</em></dt>
<dd><p>Use the system script.</p></dd>
<dt><i class="mono">smCurrentScript</em></dt>
<dd><p>Use the current script.</p></dd></dl></dd>
<dt><em>createMovieFileFlags</em></dt>
<dd><p>Contains flags (see below) that control
file creation options.</p><p>Function result: the identifier
of the new movie. If the function could not create the movie, it
sets this returned identifier to NIL.</p><dl class="termdef">	
<dt><i class="mono">createMovieFileDeleteCurFile</em></dt>
<dd><p>Indicates whether to delete an existing file.
If you set this flag to 1, the Movie Toolbox deletes the file (if
it exists) before creating the new movie file. If this flag is set
to 0 and the file specified by the <code>dataRef</code> parameter
already exists, the Movie Toolbox uses the existing file. In this
case, the toolbox ensures that the file has both a data and a resource
fork. If this flag isn&#8217;t set, the data is appended to the file.</p></dd>
<dt><i class="mono">createMovieFileDontCreateMovie</em></dt>
<dd><p>createMovieFileDontCreateMovie</p><p>Controls
whether <code>CreateMovieFile</code> creates
a new movie in the movie file. If you set this flag to 1, the Movie
Toolbox does not create a movie in the new movie file. In this case,
the function ignores the newmovie parameter. If you set this flag to
0, the Movie Toolbox creates a movie and returns the movie identifier
in the field referred to by the <code>newmovie</code> parameter.</p></dd>
<dt><i class="mono">createMovieFileDontOpenFile </em></dt>
<dd><p>Controls whether <code>CreateMovieFile</code> opens
the new movie file. If you set this flag to 1, the Movie Toolbox
does not open the new movie file. In this case, the function ignores
the <code>resRefNum</code> parameter.
If you set this flag to 0, the Movie Toolbox opens the new movie
file and returns its reference number into the field referred to
by the <code>resRefNum</code> parameter.</p></dd></dl></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine performs a flattening operation to the destination
data reference. </p>
<p>With previous versions of QuickTime, it was possible to flatten
a Movie to a data reference. However, doing so was not necessarily
obvious. It involved calling <code>FlattenMovieData</code> while doing
the following:</p>
<p>(1) Passing the address of a <code>DataReferenceRecord</code> in
place of the address of a file&#8217;s FSSpec; and</p>
<p>(2) Including the <code>flattenFSSpecPtrIsDataRefRecordPtr</code> flag
in the <code>movieFlattenFlags</code> parameter.</p>
<p><code>FlattenMovieDataToDataRef</code> now
performs this same work on the client&#8217;s behalf.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/NewMovieFromStorageOffset" title="NewMovieFromStorageOffset"></a><a name="//apple_ref/doc/c_ref/NewMovieFromStorageOffset" title="NewMovieFromStorageOffset"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-NewMovieFromStorageOffset" title="NewMovieFromStorageOffset"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_61"></a><h3 class="tight">NewMovieFromStorageOffset</h3>
<p class="spaceabove">???</p>
<p class="spaceabove"><pre>
NewMovieFromStorageOffset (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> * theMovie,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh,
const <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/wide" target="_top">wide</a> * fileOffset,
short newMovieFlags,
<!--a-->Boolean<!--/a--> * dataRefWasChanged);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>A pointer to a field that is to receive the
new movie&#8217;s identifier. If the function cannot load the movie,
the returned identifier is set to NIL.</p></dd>
<dt><em>dh</em></dt>
<dd><p>A data handler to a file that is already open.</p></dd>
<dt><em>fileOffset</em></dt>
<dd><p>A pointer to the starting file offset of the
atom in the data fork of the file specified by the <code>dh</code> parameter.</p></dd>
<dt><em>newMovieFlags</em></dt>
<dd><p>Flags (see below) that control characteristics
of the new movie.</p><dl class="termdef">	<dt><i class="mono">newMovieActive</em></dt>
<dd><p>Controls whether the new movie is active. Set
this flag to 1 to make the new movie active. A movie that does not
have any tracks can still be active. When the Movie Toolbox tries
to play the movie, no images are displayed, because there is no movie
data. You can make a movie active or inactive by calling the <code>SetMovieActive</code> (III&#8211;1654)
function.</p></dd>
<dt><i class="mono">newMovieDontAutoAlternate</em></dt>
<dd><p>Controls whether the Movie Toolbox automatically
selects enabled tracks from alternate track groups. If you set this flag
to 1, the Movie Toolbox does not automatically select tracks for
the movie; you must enable tracks yourself.</p></dd>
<dt><i class="mono">newMovieDontResolveDataRefs</em></dt>
<dd><p>Controls how completely the Movie Toolbox resolves
data references in the movie resource. If you set this flag to 0,
the Movie Toolbox tries to completely resolve all data references in
the resource. This may involve searching for files on remote volumes.
If you set this flag to 1, the Movie Toolbox only looks in the specified
file. If the Movie Toolbox cannot completely resolve all the data
references, it still returns a valid movie identifier. In this case,
the Movie Toolbox also sets the current error value to <code>couldNotResolveDataRef</code>.</p></dd>
<dt><i class="mono">newMovieDontAskUnresolvedDataRefs</em></dt>
<dd><p>Controls whether the Movie Toolbox asks the user
to locate files. If you set this flag to 0, the Movie Toolbox asks
the user to locate files that it cannot find on available volumes.
If the Movie Toolbox cannot locate a file even with the user&#8217;s
help, the function returns a valid movie identifier and sets the current
error value to <code>couldNotResolveDataRef</code>.</p></dd></dl></dd>
<dt><em>dataRefWasChanged</em></dt>
<dd><p>A pointer to a Boolean value. The Movie Toolbox
sets the value to <code>TRUE</code> if any
of the movie&#8217;s data references were changed. Use <code>UpdateMovieInStorage</code> <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/c/func/UpdateMovieInStorage">(page 138)</a></span> to preserve these changes. If you do not want to
receive this information, set the <code>dataRefWasChanged</code> parameter
to NIL.If the Movie Toolbox cannot completely resolve all data references,
it sets the current error value to <code>couldNotResolveDataRef</code>.
You can access error returns such as this through <code>GetMoviesError</code> (I&#8211;505)
and <code>GetMoviesStickyError</code> (I&#8211;506),
as well as in the function result. See &#8220;Error Codes&#8221; (IV&#8211;2718).</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine serves the same purpose for data handlers as <code>NewMovieFromDataFork64</code> serves
for movie file references. The API reads the <code>'moov'</code> resource
found at <code>fileOffset </code>and
creates a Movie. The data handler parameter should be an open data
handler component instance for the storage holding the <code>'moov'</code> resource.
The <code>newMovieFlags</code> and <code>dataRefWasChanged</code> parameters are
interpreted identically to those same parameters to <code>NewMovieFromDataFork64</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_17" title="Note"></a><p><strong>Note:</strong>&nbsp;Unlike <code>NewMovieFromDataFork</code> and <code>NewMovieFromDataFork64</code>,
there is no special interpretation of the file offset of &#8211;1. With
those APIs, -1 indicates the current file position on the fileReference
used. However, since data handlers have no notion of a current file
position, there is no support for this magic value.</p></div>
<p>If you are writing a custom data handler, make sure that the
following data handler APIs are implemented:</p>
<ul class="spaceabove"><li class="li"><p><code>DataHScheduleData64</code> and <code>DataHGetFileSize64</code></p></li>
<li class="li"><p><code>DataHScheduleData</code> and <code>DataHGetFileSize</code>,
if not supporting 64-bit file offsets</p></li>
<li class="li"><p><code>DataHGetDataRef</code></p></li></ul>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/ChooseMovieClock" title="ChooseMovieClock"></a><a name="//apple_ref/doc/c_ref/ChooseMovieClock" title="ChooseMovieClock"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ChooseMovieClock" title="ChooseMovieClock"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_62"></a><h3 class="tight">ChooseMovieClock</h3>
<p class="spaceabove">Provides the client with a way to look through media handlers
and find the best clock. </p>
<p class="spaceabove"><pre>
void ChooseMovieClock (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> m,
   long flags);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This routine asks the Movie to find the first media handler
that has a custom Clock (it calls <code>MediaGetClock</code>)
and to start using that as the Movie&#8217;s master timebase&#8217;s clock
(by using <code>SetMovieMasterClock</code>).</p>
<p>ChooseMovieClock is used to tie the Movie&#8217;s master timebase
to a sound clock if there is a sound track. If there is no sound
track, the microseconds clock is used as the master timebase.</p>
<p>Introduced in QuickTime 6.</p>
<p>Technote 2052 discusses the <code>ChooseMovieClock</code> API
in detail, explaining how this call should be used with Video Output
Components and in instances where <code>SetMovieMasterClock</code> was previously
being used to reset a movie&#8217;s clock.</p>
<p>The Technote is focused primarily on developers who are using
Video Output Components or modifying a movie&#8217;s master clock by
calling <code>SetMovieMasterClock</code>. </p>
<p>The Note is available at</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/technotes/tn/tn2052.html<span></span></pre></td></tr></table></div><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/DataHGetInfo" title="DataHGetInfo"></a><a name="//apple_ref/doc/c_ref/DataHGetInfo" title="DataHGetInfo"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DataHGetInfo" title="DataHGetInfo"></a>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_63"></a><h3 class="tight">DataHGetInfo</h3>
<p class="spaceabove">Queries the information from a data handler. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> DataHGetInfo(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh,
<!--a-->OSType<!--/a--> what,
void *info);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>what</em></dt>
<dd><p>The information you are requesting. </p></dd>
<dt><em>info</em></dt>
<dd><p>A pointer to the information requested. Currently,
no selectors are defined. </p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.1 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/DataHDeleteFile" title="DataHDeleteFile"></a><a name="//apple_ref/doc/c_ref/DataHDeleteFile" title="DataHDeleteFile"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DataHDeleteFile" title="DataHDeleteFile"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_64"></a><h3 class="tight">DataHDeleteFile</h3>
<p class="spaceabove">Deletes the file that the data handler references</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> DataHDeleteFile(<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh);
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/DataHSetMovieUsageFlags" title="DataHSetMovieUsageFlags"></a><a name="//apple_ref/doc/c_ref/DataHSetMovieUsageFlags" title="DataHSetMovieUsageFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DataHSetMovieUsageFlags" title="DataHSetMovieUsageFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_65"></a><h3 class="tight">DataHSetMovieUsageFlags</h3>
<p class="spaceabove">???</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> DataHSetMovieUsageFlags(
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DataHandler" target="_top">DataHandler</a> dh,
long flags);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>dh</em></dt>
<dd><p>A data handler.</p></dd>
<dt><em>flags</em></dt>
<dd><p>The following flags are defined:</p><div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kDataHMovieUsageDoAppendMDAT = 1L &lt;&lt; 0<span></span></pre></td></tr><tr><td scope="row"><pre>        // if set, the datahandler<span></span></pre></td></tr><tr><td scope="row"><pre>        // should append wide and mdat atoms in append call.<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-212607" title="OpenADataHandler Extended"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF237" title="OpenADataHandler Extended"></a><h3><code>OpenADataHandler</code> Extended</h3>
<p>Predictably, you cannot use the <code>OpenADataHandler</code> (II-1159)
routine to open data handlers to non-existent files. Attempting
to do results in the function returning the error <code>couldNotResolveDataRef</code> and
setting the returned data handler to NIL.</p>
<p>In QuickTime 6, this is still the case for requests to open
data handlers for read-only access. However, if you make a request
to open a data handler for write access (by passing <code>kDataHCanWrite</code>), <code>OpenADataHandler</code> will
now return a configured data handler instead of NIL and an error,
if the file doesn&#8217;t exist.</p>
<p>If you pass a <code>kDataHCanWrite</code>,
a data handler will be created which you can use with <code>DataHCreateFileWithFlags</code> or
with <code>DataHCreateFile</code>. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-212721" title="Advanced APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF238" title="Advanced APIs"></a><h3>Advanced APIs</h3>
<p>Two additional APIs have been introduced in QuickTime 6. Although
their usage by developers may be rare, they are discussed here for
the sake of completeness.</p>
<p><code>PutMovieForDataRefIntoHandle</code> and <code>NewMovieForDataRefFromHandle</code> can
be used by applications that directly read and write <code>'moov'</code> atoms
(also known as movie resources or public movies) containing data
references that are self-references to the files read or written.</p>
<p>By way of quick review, data references within the media of
movies may refer to either external files through full data references
or to the file containing the <code>&#8216;moov&#8217;</code> through
a shorthand self-reference technique. This self-reference involves
setting a data reference attribute to include the following flags:</p>
<div class="codesample"><table><tr><td scope="row"><pre>kDataRefIsSelfContained     = (1 &lt;&lt; 0)<span></span></pre></td></tr></table></div>
<p>and not including the full data reference. All such references
are resolved to the file originally containing the <code>'moov'</code> atom
or public movie.</p>
<p>The already available <code>PutMovieIntoHandle</code> (II-1183)
routine will create public movies but cannot update data references
to be self-references. Also, <code>NewMovieFromHandle</code> can
create a Movie from a public movie but cannot do so for public movie
handles, including self-references. These limitations mean that
these APIs cannot be used by applications that </p>
<p>(1) want to perform the direct reading of <code>'moov'</code> resources
from a file and then create a Movie or</p>
<p>(2) create a public movie containing self-references and then
write that public movie to a file.</p>
<p><code>PutMovieForDataRefIntoHandle</code> and <code>NewMovieFroDataRefFromHandle</code> accommodate
the passing of the data reference that should be interpreted as
the location of the <code>'moov'</code> atom.</p>
<a name="//apple_ref/c/func/PutMovieForDataRefIntoHandle" title="PutMovieForDataRefIntoHandle"></a><a name="//apple_ref/doc/c_ref/PutMovieForDataRefIntoHandle" title="PutMovieForDataRefIntoHandle"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-PutMovieForDataRefIntoHandle" title="PutMovieForDataRefIntoHandle"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_66"></a><h3 class="tight">PutMovieForDataRefIntoHandle</h3>
<p class="spaceabove">This routine is roughly equivalent to the <code>PutMovieIntoHandle</code> API
(II-1183)&#8211;&#8211;but with one important difference. If the data reference
and data reference type is passed, all media references to the same
storage are converted to self-references in the resulting public
movie handle. This <code>&#8216;moov&#8217;</code> atom
can be then written to the storage.</p>
<p class="spaceabove"><pre>
   
OSErr PutMovieForDataRefIntoHandle (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie,
<!--a-->Handle<!--/a--> dataRef,
<!--a-->OSType<!--/a--> dataRefType,
<!--a-->Handle<!--/a--> publicMovie );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>The movie for this operation. Your application
obtains this movie identifier from such functions as <code>NewMovie</code> (II&#8211;1098), <code>NewMovieFromFile</code> (II&#8211;1110),
and <code>NewMovieFromHandle</code> (II&#8211;1113).</p></dd>
<dt><em>dataRef</em></dt>
<dd><p>A data reference to the storage in which the
movie will be written. </p></dd>
<dt><em>dataRefType</em></dt>
<dd><p>The type of data reference. </p></dd>
<dt><em>publicMovie</em></dt>
<dd><p>The handle that is to receive the new movie
resource. The function resizes the handle if necessary.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	You can access Movie
Toolbox error returns through <code>GetMoviesError</code> (I&#8211;505) and <code>GetMoviesStickyError</code> (I&#8211;506),
as well as in the function result. See &#8220;Error Codes&#8221; (IV&#8211;2718). </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/NewMovieForDataRefFromHandle" title="NewMovieForDataRefFromHandle"></a><a name="//apple_ref/doc/c_ref/NewMovieForDataRefFromHandle" title="NewMovieForDataRefFromHandle"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-NewMovieForDataRefFromHandle" title="NewMovieForDataRefFromHandle"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_67"></a><h3 class="tight">NewMovieForDataRefFromHandle</h3>
<p class="spaceabove">This routine creates a Movie from the public movie handle
in the same way as <code>NewMovieFromHandle</code> does&#8211;&#8211;but
with one important difference. If the public handle contains media
data references that are self-references, <code>NewMovieForDataRefFromHandle</code> can
convert self-references to references to the reference specified
by <code>dataRef</code> and <code>dataRefType</code>.
All other data references are not changed.</p>
<p class="spaceabove"><pre>
OSErr NewMovieForDataRefFromHandle ( <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> *theMovie,
<!--a-->Handle<!--/a--> h,
short newMovieFlags,
<!--a-->Boolean<!--/a--> *dataRefWasChanged,
<!--a-->Handle<!--/a--> dataRef,
<!--a-->OSType<!--/a--> dataRefType );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>A pointer to a field that is to receive the
new movie&#8217;s identifier. If the function cannot load the movie,
the returned identifier is set to NIL.</p></dd>
<dt><em>h</em></dt>
<dd><p>A handle to the movie resource from which
the movie is to be loaded.</p></dd>
<dt><em>newMovieFlags</em></dt>
<dd><p>Flags (see below) that control the operation
of NewMovieForDataRefFromHandle. Be sure to set unused flags to
0.</p><dl class="termdef">	<dt><i class="mono">newMovieActive</em></dt>
<dd><p>Controls whether the new movie is active. Set
this flag to 1 to make the new movie active. You can make a movie
active or inactive by calling <code>SetMovieActive</code> (III&#8211;1654).</p></dd>
<dt><i class="mono">newMovieDontResolveDataRefs</em></dt>
<dd><p>Controls how completely the Movie Toolbox resolves
data references in the movie resource. If you set this flag to 0,
the toolbox tries to completely resolve all data references in the resource.
This may involve searching for files on remote volumes. If you set
this flag to 1, the Movie Toolbox only looks in the specified file.
If the Movie Toolbox cannot completely resolve all the data references,
it still returns a valid movie identifier. In this case, the Movie
Toolbox also sets the current error value to <code>couldNotResolveDataRef</code>.</p></dd>
<dt><i class="mono">newMovieDontAskUnresolvedDataRefs</em></dt>
<dd><p>Controls whether the Movie Toolbox asks the user
to locate files. If you set this flag to 0, the Movie Toolbox asks
the user to locate files that it cannot find on available volumes.
If the Movie Toolbox cannot locate a file even with the user&#8217;s
help, the function returns a valid movie identifier and sets the current
error value to <code>couldNotResolveDataRef</code>.</p></dd>
<dt><i class="mono">newMovieDontAutoAlternate</em></dt>
<dd><p>Controls whether the Movie Toolbox automatically
selects enabled tracks from alternate track groups. If you set this flag
to 1, the Movie Toolbox does not automatically select tracks for
the movie; you must enable tracks yourself.</p></dd></dl></dd>
<dt><em>dataRefWasChanged</em></dt>
<dd><p>A pointer to a Boolean value. The toolbox
sets the value to <code>TRUE</code> if
any references were changed. Set the <code>dataRefWasChanged</code> parameter
to NIL if you don&#8217;t want to receive this information. function
result If the Movie Toolbox cannot completely resolve all data references,
it sets the current error value to <code>couldNotResolveDataRef</code>.
You can access error returns such as this through <code>GetMoviesError</code> (I&#8211;505)
and <code>GetMoviesStickyError</code> (I&#8211;506),
as well as in the function result. See &#8220;Error Codes&#8221; (IV&#8211;2718).</p></dd>
<dt><em>dataRef</em></dt>
<dd><p>A data reference to the storage from which
the movie was retrieved. </p></dd>
<dt><em>dataRefType</em></dt>
<dd><p>The type of data reference.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/MovieImportSetNewMovieFlags" title="MovieImportSetNewMovieFlags"></a><a name="//apple_ref/doc/c_ref/MovieImportSetNewMovieFlags" title="MovieImportSetNewMovieFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MovieImportSetNewMovieFlags" title="MovieImportSetNewMovieFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_68"></a><h3 class="tight">MovieImportSetNewMovieFlags</h3>
<p class="spaceabove">Implemented by a movie import component to determine the
flags originally passed to <code>NewMovieFromDataRef</code> and
from a file. </p>
<p class="spaceabove"><pre>
   
ComponentResult MovieImportSetNewMovieFlags(
<a href="../../Reference/QTRef_MovieComponents/Reference/reference.html#//apple_ref/doc/c_ref/MovieImportComponent" target="_top">MovieImportComponent</a> ci,
long newMovieFlags );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>A movie import component instance. </p></dd>
<dt><em>newMovieFlags</em></dt>
<dd><p>Flags (see below) that control the characteristics
of the new imported movie.</p><dl class="termdef">	
<dt><i class="mono">newMovieActive</em></dt>
<dd><p>Controls whether the new movie is active. Set
this flag to 1 to make the new movie active. You can make a movie
active or inactive by calling <code>SetMovieActive</code> (III&#8211;1654).</p></dd>
<dt><i class="mono">newMovieDontResolveDataRefs</em></dt>
<dd><p>Controls how completely the Movie Toolbox resolves
data references in the movie resource. If you set this flag to 0,
the toolbox tries to completely resolve all data references in the resource.
This may involve searching for files on remote volumes. If you set
this flag to 1, the Movie Toolbox only looks in the specified file.
If the Movie Toolbox cannot completely resolve all the data references,
it still returns a valid movie identifier. In this case, the Movie
Toolbox also sets the current error value to <code>couldNotResolveDataRef</code>.</p></dd>
<dt><i class="mono">newMovieDontAskUnresolvedDataRefs</em></dt>
<dd><p>Controls whether the Movie Toolbox asks the user
to locate files. If you set this flag to 0, the Movie Toolbox asks
the user to locate files that it cannot find on available volumes.
If the Movie Toolbox cannot locate a file even with the user&#8217;s
help, the function returns a valid movie identifier and sets the current
error value to <code>couldNotResolveDataRef</code>.</p></dd>
<dt><i class="mono">newMovieDontAutoAlternate</em></dt>
<dd><p>Controls whether the Movie Toolbox automatically
selects enabled tracks from alternate track groups. If you set this flag
to 1, the Movie Toolbox does not automatically select tracks for
the movie; you must enable tracks yourself.</p></dd></dl></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-214699" title="New User Data APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF239" title="New User Data APIs"></a><h2>New User Data
APIs</h2>
<p>QuickTime 6 introduces new UserData APIs that can be useful
in copying information from one UserData container to another. The
operation performed is controlled by a parameter to the APIs that
describes one of two different copy rules or dispositions. While there
is a routine to copy from one UserData container to another, there
are also convenience APIs to copy metadata between the UserData
containers at the Movie, Track and Media levels.</p>
<p>The currently supported copy rules are:</p>
<ul class="ul"><li class="li"><p><code>kQTCopyUserDataReplace</code>	 
Delete all user data items from the destination UserData container
and then add all source items to the destination.</p></li>
<li class="li"><p><code>kQTCopyUserDataMerge</code>		 
Append all source items from the source UserData container to the
destination UserData container. Does not delete items from the destination
container.</p></li></ul>
<a name="//apple_ref/c/func/CopyMovieUserData" title="CopyMovieUserData"></a><a name="//apple_ref/doc/c_ref/CopyMovieUserData" title="CopyMovieUserData"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-CopyMovieUserData" title="CopyMovieUserData"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_69"></a><h3 class="tight">CopyMovieUserData</h3>
<p class="spaceabove">Performs copying from the source Movie&#8217;s UserData to
the destination Movie UserData.</p>
<p class="spaceabove"><pre>
   
OSErr CopyMovieUserData (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> srcMovie,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> dstMovie,
   <!--a-->OSType<!--/a--> copyRule);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>srcMovie</em></dt>
<dd><p>Movie containing source UserData. </p></dd>
<dt><em>dstMovie</em></dt>
<dd><p>Movie containing destination UserData</p></dd>
<dt><em>copyRule</em></dt>
<dd><p>Specifies one of two different approaches
to copying source metadata items to the destination container. The
supported rules are:</p><div class="codesample"><table><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>                kQTCopyUserDataReplace<span></span></pre></td></tr><tr><td scope="row"><pre>                kQTCopyUserDataMerge<span></span></pre></td></tr></table></div></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine performs copying from the source Movie&#8217;s UserData
to the destination Movie UserData.</p>
<p><code>CopyMovieUserData</code> is
equivalent to the following:</p>
<div class="codesample"><table><tr><td scope="row"><pre>CopyUserData(GetMovieUserData(srcMovie),<span></span></pre></td></tr><tr><td scope="row"><pre>                GetMovieUserData(dstMovie),<span></span></pre></td></tr><tr><td scope="row"><pre>                copyRule);<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/CopyTrackUserData" title="CopyTrackUserData"></a><a name="//apple_ref/doc/c_ref/CopyTrackUserData" title="CopyTrackUserData"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-CopyTrackUserData" title="CopyTrackUserData"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_70"></a><h3 class="tight">CopyTrackUserData</h3>
<p class="spaceabove">Performs copying from the source Track&#8217;s UserData to
the destination Track&#8217;s UserData.</p>
<p class="spaceabove"><pre>
OSErr CopyTrackUserData (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Track" target="_top">Track</a> srcTrack,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Track" target="_top">Track</a> dstTrack,
   <!--a-->OSType<!--/a--> copyRule);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>srcTrack</em></dt>
<dd><p>Track containing source UserData. </p></dd>
<dt><em>dstTrack</em></dt>
<dd><p>Track containing destination UserData. </p></dd>
<dt><em>copyRule</em></dt>
<dd><p>Specifies one of two different approaches
to copying source metadata items to the destination container. The
supported rules are:</p><div class="codesample"><table><tr><td scope="row"><pre>                kQTCopyUserDataReplace<span></span></pre></td></tr><tr><td scope="row"><pre>                kQTCopyUserDataMerge<span></span></pre></td></tr></table></div></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine performs copying from the source Track&#8217;s UserData
to the destination Track&#8217;s UserData.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/CopyMediaUserData" title="CopyMediaUserData"></a><a name="//apple_ref/doc/c_ref/CopyMediaUserData" title="CopyMediaUserData"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-CopyMediaUserData" title="CopyMediaUserData"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_71"></a><h3 class="tight">CopyMediaUserData</h3>
<p class="spaceabove">Performs copying from the source Media&#8217;s UserData to
the destination Media&#8217;s UserData.</p>
<p class="spaceabove"><pre>
   
OSErr CopyMediaUserData (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Media" target="_top">Media</a> srcMedia,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Media" target="_top">Media</a> dstMedia,
<!--a-->OSType<!--/a--> copyRule);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>srcMedia</em></dt>
<dd><p>Media containing source UserData. </p></dd>
<dt><em>dstMedia</em></dt>
<dd><p>Media containing destination UserData. </p></dd>
<dt><em>copyRule</em></dt>
<dd><p>Specifies one of two different approaches
to copying source metadata items to the destination container. The
supported rules are:</p><div class="codesample"><table><tr><td scope="row"><pre>                kQTCopyUserDataReplace<span></span></pre></td></tr><tr><td scope="row"><pre>                kQTCopyUserDataMerge<span></span></pre></td></tr></table></div></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine performs copying from the source Media&#8217;s UserData
to the destination Media&#8217;s UserData.</p>
<p><code>CopyMediaUserData</code> is
equivalent to the following:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    CopyUserData(GetMediaUserData(srcMedia),<span></span></pre></td></tr><tr><td scope="row"><pre>                    GetMediaUserData(dstMedia),<span></span></pre></td></tr><tr><td scope="row"><pre>                    copyRule);<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/c/func/CopyUserData" title="CopyUserData"></a><a name="//apple_ref/doc/c_ref/CopyUserData" title="CopyUserData"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-CopyUserData" title="CopyUserData"></a>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_72"></a><h3 class="tight">CopyUserData</h3>
<p class="spaceabove">Copies metadata items from the source UserData container
to the destination UserData container based on the rule specified.</p>
<p class="spaceabove"><pre>
   
OSErr CopyUserData (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/UserData" target="_top">UserData</a> srcUserData,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/UserData" target="_top">UserData</a> dstUserData,
<!--a-->OSType<!--/a--> copyRule);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>srcUserData</em></dt>
<dd><p>UserData container from which to copy metadata
items. </p></dd>
<dt><em>dstUserData</em></dt>
<dd><p>UserData container to which to copy the metadata
items. </p></dd>
<dt><em>copyRule</em></dt>
<dd><p>Specifies one of two different approaches
to copying source metadata items to the destination container. The
supported rules are:</p><div class="codesample"><table><tr><td scope="row"><pre>                kQTCopyUserDataReplace<span></span></pre></td></tr><tr><td scope="row"><pre>                kQTCopyUserDataMerge<span></span></pre></td></tr></table></div></dd></dl>
<h5 class="tight">Discussion</h5>
<p><code>CopyUserData</code> copies
metadata items from the source UserData container to the destination UserData
container based upon the rule specified. It can perform either total
replacement of all destination items or merge items from the source
into the destination container.</p>
<p>The API detects if the source and destination UserData containers
are the same and does nothing in that case. </p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<p>C interface file: <code>Movies.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216176" title="QuickTime for Java Enhancements"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF240" title="QuickTime for Java Enhancements"></a><h2>QuickTime for
Java Enhancements</h2>
<p>QuickTime 6 includes support for a number of new features
and enhancements in QuickTime for Java. These include</p>
<ul class="ul"><li class="li"><p>JDK 1.4 support. This is now part of the QTJava.dll.
Developers will not need to use the <code>WinNativeHelper.dll</code> in
order for QuickTime for Java to work properly with JDK 1.4 on Windows
computers.</p></li>
<li class="li"><p>Introduction of the <code>JQTCanvas</code> class,
a new lightweight version of the <code>QTCanvas</code> class
which supports scaling of Flash content. </p></li>
<li class="li"><p>A number of new QuickTime VR classes that encapsulate the
various VR atom types.</p></li>
<li class="li"><p>New classes in the <code>quicktime.std.movies</code> package.
These include Idle manager bindings </p><ul class="nested"><li class="nested li"><p><code>NextTaskNeededSooner</code></p></li>
<li class="nested li"><p><code>IdleDispatcher</code></p></li></ul></li>
<li class="li"><p>Added support for MovieMedia Handler. </p></li>
<li class="li"><p>Fixed DataProcs in the Sequence Grabber. </p></li>
<li class="li"><p>Added a number of new classes that extend the client streaming
functionality to include support for stored movies.</p></li>
<li class="li"><p>New Sprite Media Handler calls for getting and setting sprite
variables. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216272" title="Support for JDK 1.4"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF241" title="Support for JDK 1.4"></a><h3>Support for JDK
1.4</h3>
<p>QuickTime for Java now includes support for JDK 1.4 (Windows
only). These are internal changes that should be transparent to
your application.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216286" title="New JQTCanvas"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF242" title="New JQTCanvas"></a><h3>New JQTCanvas</h3>
<p><code>JQTCanvas</code>, a new
class that has been added to the <code>quicktime.app.display</code> package,
is a lightweight version of the <code>QTCanvas</code> class.
It is intended to behave in exactly the same way as <code>QTCanvas</code>, but
with the following enhancement: the <code>JQTCanvas</code> class
supports scaling of Flash content that is added to it via a <code>moviePlayer</code>.
You may use the <code>setFlashScaling(boolean)</code> method
to turn this feature on and off. If you use this new feature, you
may need to allocate extra memory, since an offscreen buffer must
be created that is the size of the onscreen image.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216328" title="New QTVR Authoring Classes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF243" title="New QTVR Authoring Classes"></a><h3>New QTVR Authoring
Classes</h3>
<p>A number of new QuickTime VR classes have been added in this
release of QuickTime for Java. These classes encapsulate the various
VR atom types, and are designed to help developers who are doing
QuickTime VR work. They include</p>
<ul class="spaceabove"><li class="li"><p><code>QTVRAtom</code></p></li>
<li class="li"><p><code>QTVRAngleRange</code></p></li>
<li class="li"><p><code>QTVRCubicFace</code></p></li>
<li class="li"><p><code>QTVRCubicView</code></p></li>
<li class="li"><p><code>QTVRHotSpotInfo</code></p></li>
<li class="li"><p><code>QTVRLinkHotSpot</code></p></li>
<li class="li"><p><code>QTVRWorldHeader</code></p></li>
<li class="li"><p><code>QTVRNodeHeader</code></p></li>
<li class="li"><p><code>QTVRNodeLocation</code></p></li>
<li class="li"><p><code>QTVRObjectSample</code></p></li>
<li class="li"><p><code>QTVRPanoImaging</code></p></li>
<li class="li"><p><code>QTVRPanoSample</code></p></li>
<li class="li"><p><code>QTVRString</code></p></li>
<li class="li"><p><code>QTVRTrackRefEntry</code></p></li></ul>
<p>For more information on these new VR classes, refer to the
JavaDocs accompanying this release. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216477" title="Improved QuickTime Client Streaming Support"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF244" title="Improved QuickTime Client Streaming Support"></a><h3>Improved QuickTime
Client Streaming Support</h3>
<p>A number of new classes have been added that extend QuickTime
for Java client streaming functionality to include support for stored
movies. This support is provided via the Sourcer object. These new
classes include</p>
<ul class="spaceabove"><li class="li"><p><code>Sourcer</code></p></li>
<li class="li"><p><code>SourcerCallbackParams</code></p></li>
<li class="li"><p><code>SourcerInitParams</code></p></li>
<li class="li"><p><code>SourcerLoopParams</code></p></li>
<li class="li"><p><code>SourcerTrackParams</code></p></li>
<li class="li"><p><code>SourcerTimingParams</code></p></li></ul>
<p>Note that the QuickTime for Java Client Streaming API is currently
not available on the Windows platform.</p>
<p>For more information on these new classes, refer to the JavaDocs
accompanying this release. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216559" title="New Sprite Handler APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF245" title="New Sprite Handler APIs"></a><h3>New Sprite Handler
APIs</h3>
<p>The following new sprite handler APIs have been added to this
release of QuickTime for Java:</p>
<ul class="spaceabove"><li class="li"><p><code>Flashmediahandler.java</code></p>
<div class="codesample"><table><tr><td scope="row"><pre>    private static native int FlashMediaGetSupportedSwfVersion (<span></span></pre></td></tr><tr><td scope="row"><pre>                                                    int mh,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                    byte[] path);<span></span></pre></td></tr></table></div></li>
<li class="li"><p><code>Movie.java</code></p>
<div class="codesample"><table><tr><td scope="row"><pre>    private static native short NewMovieForDataRefFromHandle (<span></span></pre></td></tr><tr><td scope="row"><pre>                                                int[] theMovie,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                int publicMovieHandle,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                short newMovieFlags,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                byte[] dataRefWasChanged,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                int dataRef,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                int dataRefType);<span></span></pre></td></tr><tr><td scope="row"><pre>    private static native int FlattenMovieDataToDataRef (<span></span></pre></td></tr><tr><td scope="row"><pre>                                            int theMovie,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            int movieFlattenFlags,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            int dataRef,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            int dataRefType,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            int creator,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            short scriptTag,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            int createMovieFileFlags);<span></span></pre></td></tr></table></div></li>
<li class="li"><p><code>SpriteMediaHandler.java</code></p>
<div class="codesample"><table><tr><td scope="row"><pre>    private static native int SpriteMediaDisposeImage(int mh,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                     int imageIndex);<span></span></pre></td></tr><tr><td scope="row"><pre>    private static native int SpriteMediaNewImage (int mh,<span></span></pre></td></tr><tr><td scope="row"><pre>                                                 byte[] imageURL);<span></span></pre></td></tr></table></div></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216740" title="AppleScript Changes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF246" title="AppleScript Changes"></a><h2>AppleScript Changes</h2>
<p>This section discusses the changes to AppleScript in QuickTime
6.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216754" title="Recordability"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF247" title="Recordability"></a><h3>Recordability</h3>
<p>QuickTime Player is now a recordable application. To take
advantage of this new capability, you must use QuickTime Player
in conjunction with an application that supports AppleEvent recording,
such as Script Editor. </p>
<p>Using Script Editor to record a script, you need to make sure
that both QuickTime Player and Script Editor are running. Then you
click the record button in a script window. Any operation you perform
in QuickTime Player will be recorded in the open script document.</p>
<p>Most features of QuickTime Player are recordable with the
following exceptions:</p>
<ul class="spaceabove"><li class="li"><p>Import and Export are not recordable</p></li>
<li class="li"><p>Sprite-related property panels are not recordable</p></li>
<li class="li"><p>Music Track Instruments property panel is not recordable</p></li>
<li class="li"><p>Printing operations are not recordable</p></li></ul>
<p>The result of a AppleEvent recording session is rarely a finished
script, but rather more like a summary of the operations you would
like performed. A recorded script will have no error checking code
nor if/then/else or repeat/until structures. Quite often, a recorded script
will merely demonstrate the correct syntax for an operation and
little more.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216807" title="Terminology Changes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF248" title="Terminology Changes"></a><h3>Terminology Changes</h3>
<p>QuickTime Player introduces a number of new commands, classes,
and properties, and well as modifications to existing terminology
elements, discussed in this section. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216820" title="New Commands"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF249" title="New Commands"></a><h4>New Commands</h4>
<p>The following new commands are introduced in QuickTime 6:</p>
<ul class="spaceabove"><li class="li"><p>enter full screen</p></li>
<li class="li"><p>exit full screen</p></li></ul>
<p>These two commands make it possible to enter and exit full
screen mode independent of movie playback. This means that in QuickTime
6 you can create a script that will put the player in full screen
mode and then perform other operations, including opening and playing
movies while remaining in full screen mode. Once the script has
finished presenting movies, it is necessary to call exit full screen
to restore the computer to its normal state.</p>
<p>enter full screen: Enter full screen video mode</p>
<div class="codesample"><table><tr><td scope="row"><pre>    enter full screen  reference  -- display<span></span></pre></td></tr><tr><td scope="row"><pre>        [bounds  point]  -- the desired target dimensions of the display<span></span></pre></td></tr><tr><td scope="row"><pre>                            (height, width)<span></span></pre></td></tr><tr><td scope="row"><pre>        [background color  rgb color]  -- the background color<span></span></pre></td></tr></table></div>
<p>exit full screen: Exit full screen video mode</p>
<div class="codesample"><table><tr><td scope="row"><pre>    exit full screen  reference  -- display<span></span></pre></td></tr></table></div>
<p>The following script demonstrates how to use these two commands
to enter full screen mode, present a sequence of movies, then exit
full screen mode:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    tell display 1 to enter full screen<span></span></pre></td></tr><tr><td scope="row"><pre>    tell movie 1 to play<span></span></pre></td></tr><tr><td scope="row"><pre>    tell movie 2 to play<span></span></pre></td></tr><tr><td scope="row"><pre>    tell movie 3 to play<span></span></pre></td></tr><tr><td scope="row"><pre>    tell display 1 to exit full screen<span></span></pre></td></tr></table></div>
<p>The following commands perform matrix manipulation on tracks
and movies. While it is possible to achieve the same results by
setting the matrix property directly (see current matrix, below),
these commands serve as useful shortcuts and correspond to familiar menu
commands and property window operations.</p>
<div class="codesample"><table><tr><td scope="row"><pre>flip horizontal: Flip an object along the horizontal axis<span></span></pre></td></tr><tr><td scope="row"><pre>    flip horizontal  reference  -- the object to flip<span></span></pre></td></tr><tr><td scope="row"><pre>flip vertical: Flip an object along the vertical axis<span></span></pre></td></tr><tr><td scope="row"><pre>    flip vertical  reference  -- the object to flip<span></span></pre></td></tr><tr><td scope="row"><pre>resize: Scale an object<span></span></pre></td></tr><tr><td scope="row"><pre>    resize  reference  -- the object to scale<span></span></pre></td></tr><tr><td scope="row"><pre>        [by  small real]  -- the percent of current size<span></span></pre></td></tr><tr><td scope="row"><pre>        [around  fixed point]  -- the point to resize around<span></span></pre></td></tr><tr><td scope="row"><pre>rotate: Rotate an object by an arbitrary amount<span></span></pre></td></tr><tr><td scope="row"><pre>    rotate  reference  -- the object to rotate<span></span></pre></td></tr><tr><td scope="row"><pre>        by  small real  -- the amount of rotation (in degrees)<span></span></pre></td></tr><tr><td scope="row"><pre>        [around  fixed point]  -- the point to rotate around<span></span></pre></td></tr><tr><td scope="row"><pre>rotate left: Rotate an object 90 left<span></span></pre></td></tr><tr><td scope="row"><pre>    rotate left  reference  -- the object to rotate<span></span></pre></td></tr><tr><td scope="row"><pre>rotate right: Rotate an object 90 right<span></span></pre></td></tr><tr><td scope="row"><pre>    rotate right  reference  -- the object to rotate<span></span></pre></td></tr><tr><td scope="row"><pre>skew: Skew an object by an arbitrary amount<span></span></pre></td></tr><tr><td scope="row"><pre>    skew  reference  -- the object to skew<span></span></pre></td></tr><tr><td scope="row"><pre>        by  fixed point  -- the amount of skew<span></span></pre></td></tr><tr><td scope="row"><pre>        [around  fixed point]  -- the point to skew around<span></span></pre></td></tr><tr><td scope="row"><pre>translate: Translate the object some distance<span></span></pre></td></tr><tr><td scope="row"><pre>    translate  reference  -- the object to translate<span></span></pre></td></tr><tr><td scope="row"><pre>        by  fixed point  -- the distance to translate<span></span></pre></td></tr></table></div>
<p>The replace command performs an operation equivalent to the
Edit/Replace menu item.</p>
<div class="codesample"><table><tr><td scope="row"><pre>replace: Replace the current selection with an object from the clipboard<span></span></pre></td></tr><tr><td scope="row"><pre>    replace  reference  -- movie<span></span></pre></td></tr></table></div>
<p>The invert command inverts an image. This is primarily useful
for inverting a bitmap before using it set the new track mask property.</p>
<div class="codesample"><table><tr><td scope="row"><pre>invert: Invert an object<span></span></pre></td></tr><tr><td scope="row"><pre>    invert  reference  -- the object to invert<span></span></pre></td></tr></table></div>
<p>The save export settings command is used to save the specified
exporter settings to a file. This file can then be used with the
export command.</p>
<div class="codesample"><table><tr><td scope="row"><pre>save export settings: Save an exporters settings<span></span></pre></td></tr><tr><td scope="row"><pre>    save export settings<span></span></pre></td></tr><tr><td scope="row"><pre>        for  AVI/BMP/DV stream/Fast Start QTVR Movie/FLC/hinted movie/image sequence/interframe<span></span></pre></td></tr><tr><td scope="row"><pre> compressed VR object movie/MPEG4/picture/QuickTime media link/QuickTime movie/AIFF/System 7 sound/<span></span></pre></td></tr><tr><td scope="row"><pre>wave/MuLaw/standard MIDI/text file  -- the desired file type<span></span></pre></td></tr><tr><td scope="row"><pre>        [to  alias]  -- the destination file<span></span></pre></td></tr><tr><td scope="row"><pre>        [replacing  boolean]  -- should the original file be deleted<span></span></pre></td></tr><tr><td scope="row"><pre>first?<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216979" title="Enhanced Commands "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF250" title="Enhanced Commands "></a><h4>Enhanced Commands </h4>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-216987" title="Command export"></a><h5>Command
export</h5>
<p>The export command has additional export options: Fast Start
QTVR Movie, interframe compressed VR object movie, MPEG 4, and QuickTime
media link.</p>
<p>An optional parameter using settings preset has also been
added that allows the use of an export settings file (see save export
settings command, above). </p>
<div class="codesample"><table><tr><td scope="row"><pre>export: Export a movie or track to a file<span></span></pre></td></tr><tr><td scope="row"><pre>    export  reference  -- the movie or track to export<span></span></pre></td></tr><tr><td scope="row"><pre>        to  alias  -- the destination file<span></span></pre></td></tr><tr><td scope="row"><pre>        as  AVI/BMP/DV stream/Fast Start QTVR Movie/FLC/hinted movie/image sequence/interframe<span></span></pre></td></tr><tr><td scope="row"><pre> compressed VR object movie/MPEG4/picture/QuickTime media link/QuickTime movie/AIFF/System 7 sound/<span></span></pre></td></tr><tr><td scope="row"><pre>wave/MuLaw/standard MIDI/text file  -- the desired file type<span></span></pre></td></tr><tr><td scope="row"><pre>        [using  default settings/most recent settings]  -- the export settings to use<span></span></pre></td></tr><tr><td scope="row"><pre>        [using settings preset  string]  -- the name of the export settings preset to use<span></span></pre></td></tr><tr><td scope="row"><pre>        [using settings  alias]  -- the file containing the export settings<span></span></pre></td></tr><tr><td scope="row"><pre>        [replacing  boolean]  -- should the original file be deleted first?<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217019" title="Command make"></a><h5>Command
make</h5>
<p>The make command can be used to create movie, track, frame
and favorite objects. The syntax for each is shown below:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    make new movie with data {frame 6 of track &quot;Video Track&quot; of movie &quot;QuickTime Sample Movie&quot;}<span></span></pre></td></tr><tr><td scope="row"><pre>    make new movie with data {track &quot;Video Track&quot; of movie &quot;QuickTime Sample Movie&quot;}<span></span></pre></td></tr><tr><td scope="row"><pre>    make new track at first movie with data alias "myharddrive.myimage.jpeg"<span></span></pre></td></tr><tr><td scope="row"><pre>    make new favorite with data &quot;http://stream.qtv.apple.com/myevent.mov&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    make new favorite with file &quot;myharddrive:mymovie.mov&quot;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217047" title="New Properties"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF251" title="New Properties"></a><h4>New Properties</h4>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217055" title="New Application Properties"></a><h5>New
Application Properties</h5>
<p>The following Boolean properties can be set to show or hide
the various non-movie windows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    show favorites window  boolean  -- show the favorites window<span></span></pre></td></tr><tr><td scope="row"><pre>    show movie info window  boolean  -- show the movie info window<span></span></pre></td></tr><tr><td scope="row"><pre>    show welcome movie automatically  boolean  [r/o]  -- always show the hot picks movie when the application launches<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217082" title="New Movie Properties"></a><h5>New
Movie Properties</h5>
<p>The following properties control audio playback characteristics:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    bass gain  small integer  -- the bass setting for the track (-256..256) (not saved with the movie)<span></span></pre></td></tr><tr><td scope="row"><pre>    sound balance  small integer  -- the balance of the movie (-128..128), where negative is left, 0 is center, and positive  is right<span></span></pre></td></tr><tr><td scope="row"><pre>    treble gain  small integer  -- the treble setting for the movie (-256..256) (not saved with movie)<span></span></pre></td></tr><tr><td scope="row"><pre>    preferred audio balance track  track  [r/o]  -- the preferred track to use for balance settings<span></span></pre></td></tr><tr><td scope="row"><pre>    preferred audio gain track  track  [r/o]  -- the preferred track to use for bass and treble gain settings<span></span></pre></td></tr></table></div>
<p>The color table property allows a scripter to specify a color
palette for movies that support palettes:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    color table  palette  -- palette for the movie<span></span></pre></td></tr></table></div>
<p>The current chapter track property permits easy access to
the current chapter track of the movie:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    current chapter track  track  [r/o]  -- the currently active chapter track (may differ by language)<span></span></pre></td></tr></table></div>
<p>The current matrix property describes the current transformation
applied to the movie:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    current matrix  matrix  -- the matrix of the movie<span></span></pre></td></tr></table></div>
<p>The following boolean properties control user interface elements:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    show detailed movie info window  boolean  -- show the movie property window<span></span></pre></td></tr><tr><td scope="row"><pre>    show sound controls  boolean  -- show the sound controls in the LCD<span></span></pre></td></tr><tr><td scope="row"><pre>    show video controls  boolean  -- show the video controls<span></span></pre></td></tr></table></div>
<p>The following properties control the visual appearance of
the movie and perform actions corresponding to the video controls:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    video brightness adjustment  small real  [r/o]  -- the adjustment to the video brightness (range is -1.0 to 1.0)<span></span></pre></td></tr><tr><td scope="row"><pre>    video contrast adjustment  small real  [r/o]  -- the adjustment to the video contrast (range is -1.0 to 1.0)<span></span></pre></td></tr><tr><td scope="row"><pre>    video tint adjustment  small real  [r/o]  -- the adjustment to the video tint (range is -0.25 to 0.25)<span></span></pre></td></tr><tr><td scope="row"><pre>    video color adjustment  small real  [r/o]  -- the adjustment to the video color<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217199" title="New Track Properties"></a><h5>New
Track Properties</h5>
<p>The alternate track property permits one track to be specified
as the alternate of another. This is useful for making multi-language
movies that automatically enable a track based on the current system
language.</p>
<div class="codesample"><table><tr><td scope="row"><pre>    alternate  track  [r/o]  -- the alternate for this track<span></span></pre></td></tr></table></div>
<p>The following properties control audio playback characteristics
of audio tracks: </p>
<div class="codesample"><table><tr><td scope="row"><pre>    bass gain  small integer  -- the bass setting for the track (-256..256) (not saved with movie)<span></span></pre></td></tr><tr><td scope="row"><pre>    treble gain  small integer  -- the treble setting for the track (-256..256) (not saved with movie)<span></span></pre></td></tr></table></div>
<p>The following properties control visual playback characteristics
of visual tracks:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    mask  image  -- the mask of the track<span></span></pre></td></tr><tr><td scope="row"><pre>    current matrix  matrix  -- the matrix of the track<span></span></pre></td></tr><tr><td scope="row"><pre>    transfer mode  transfer mode unknown/dither copy/no dither copy/blend/transparent/straight alpha/premul<span></span></pre></td></tr><tr><td scope="row"><pre> white alpha/premul black alpha/straight alpha blend/composition  -- the transfer mode of the track<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217263" title="New Classes"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF252" title="New Classes"></a><h4>New Classes</h4>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217271" title="Class matrix"></a><h5>Class
matrix</h5>
<p>The matrix class describes a 3 x 3 transformation matrix which
can be applied to a movie or track. Commands such as rotate left
and flip actually modify the current matrix property of the target
object. The contents of a matrix can be set by a list of the following format:
&#8220;{{1.0, 0.0, 0.0}, {0.0, 1.0, 0.0}, {0.0, 0.0, 1.0}}&#8221;. This
particular matrix is know as the identity matrix and describes an
object in its default state with no transformations applied. Constructing
or manipulating a matrix directly requires knowledge of matrix math operations.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217285" title="Properties"></a><h5>Properties</h5>
<div class="codesample"><table><tr><td scope="row"><pre>    class  type class  [r/o]  -- the class<span></span></pre></td></tr><tr><td scope="row"><pre>    contents  type class  -- the contents of the matrix<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217307" title="Class Palette"></a><h5>Class
Palette</h5>
<p>A palette object is a list of rgb colors (see below). Some
movies permit specifying a palette which describes the set of colors
to be used when displaying the movie.</p>
<p>Elements: </p>
<div class="codesample"><table><tr><td scope="row"><pre>    rgb color by numeric index<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217339" title="Properties"></a><h5>Properties</h5>
<div class="codesample"><table><tr><td scope="row"><pre>    class  type class  [r/o]  -- the class<span></span></pre></td></tr><tr><td scope="row"><pre>    contents  type class  -- the contents of the matrix<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217361" title="Class rgb color"></a><h5>Class
rgb color</h5>
<p>The class describes a color using three magnitudes: one each
for the red, green, and blue color components.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217375" title="Properties"></a><h5>Properties</h5>
<div class="codesample"><table><tr><td scope="row"><pre>    class  type class  [r/o]  -- the class<span></span></pre></td></tr><tr><td scope="row"><pre>    contents  type class  -- the contents of the rgb color<span></span></pre></td></tr><tr><td scope="row"><pre>    red  small integer  -- the mangnitude of the red component<span></span></pre></td></tr><tr><td scope="row"><pre>    green  small integer  -- the mangnitude of the green component<span></span></pre></td></tr><tr><td scope="row"><pre>    blue  small integer  -- the mangnitude of the blue component<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217472" title="New Sequence Grabber User Interface"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF253" title="New Sequence Grabber User Interface"></a><h2>New Sequence
Grabber User Interface</h2>
<p>QuickTime 6 provides a new, improved sequence grabber User
Interface (UI), which includes new settings that make the UI more
resizable on all platforms, thus taking better advantage of available
screen space. The new UI also provides better support for multiple camera
devices. </p>
<p>The basic change from previous versions of QuickTime is that
now the sequence grabber dialog is allowed to grow, and you can
switch using tabs instead of drop down for picking the panel, as
shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-217495">Figure 1-13</a></span>. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-217495" title="Figure 1-13New sequence grabber user interface, with the Compression pane selected&Euml;&#153;"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF115" title="Figure 1-13New sequence grabber user interface, with the Compression pane selected&Euml;&#153;"></a><p><strong>Figure 1-13&nbsp;&nbsp;</strong>New sequence grabber user interface,
with the Compression pane selected˙</p><img src = "../Art/seq_grab_video.gif" alt = "" width="545" height="416"></div><br/>
<p>There are also improved source selections in the new UI, as
well as other improvements. Among these are</p>
<ul class="ul"><li class="li"><p>tab-based Audio and Video Settings panels</p></li>
<li class="li"><p>twist-down, list-based Audio and Video Source tabs </p></li>
<li class="li"><p>a Video preview panel that now provides preview options, including
compressed view, vectorscope, and waveform</p></li>
<li class="li"><p>growable windows, with split bars</p></li>
<li class="li"><p>an Image Panel now built dynamically, based on the capabilities
of the VDIG</p></li>
<li class="li"><p>a Preview panel that now idles using the new event loop mechanism
(refer to <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-160843">“New Carbon Movie Control”</a></span> for more information). This improves
performance on Mac OS X.</p></li></ul>
<p>In addition, a new sequence grabber sound dialog is provided
in QuickTime 6, as shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-217561">Figure 1-14</a></span>. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-217561" title="Figure 1-14A new sequence grabber sound dialog, with the Compression pane selected"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF116" title="Figure 1-14A new sequence grabber sound dialog, with the Compression pane selected"></a><p><strong>Figure 1-14&nbsp;&nbsp;</strong>A new sequence grabber sound dialog,
with the Compression pane selected</p><img src = "../Art/seq_grab_audio.gif" alt = "" width="549" height="301"></div><br/>
<p>You can now record audio with the number of channels, 8 bit
and 16 bit, different from the source. A summary of this information
is provided in the lower left corner of the dialog box. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-217659" title="New Sequence Grabber APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF254" title="New Sequence Grabber APIs"></a><h2>New Sequence
Grabber APIs</h2>
<p>QuickTime 6 includes a new group of sequence grabber APIs,
discussed in this section. </p>
<p>These new APIs are primarily designed to improve communication
between the sequence grabber and video digitizer components (VDIGs),
and thus provide an improved user experience. High-level users of
the sequence grabber will not need to make changes to their code,
though passing new hint flags about what they are trying to achieve
will help the sequence grabber and VDIGs serve them better.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-219585" title="Types"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF255" title="Types"></a><h2>Types</h2>
<p>The SGDeviceInputName structure is defined as follows:</p>
<p>This section describes each new structure that is available
in QuickTime 6. </p>
<div class="codesample"><table><tr><td scope="row"><pre>struct SGDeviceInputName {<span></span></pre></td></tr><tr><td scope="row"><pre>   Str63                           name;<span></span></pre></td></tr><tr><td scope="row"><pre>   Handle                          icon;<span></span></pre></td></tr><tr><td scope="row"><pre>   long                            flags;<span></span></pre></td></tr><tr><td scope="row"><pre>   long                            reserved; /* zero*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct SGDeviceInputName SGDeviceInputName;<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>   sgDeviceInputNameFlagInputUnavailable = (1 &lt;&lt; 0)<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>struct SGDeviceInputListRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>   short                           count;<span></span></pre></td></tr><tr><td scope="row"><pre>   short                           selectedIndex;<span></span></pre></td></tr><tr><td scope="row"><pre>   long                            reserved; /* zero*/<span></span></pre></td></tr><tr><td scope="row"><pre>   SGDeviceInputName               entry[1];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct SGDeviceInputListRecord  SGDeviceInputListRecord;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SGDeviceInputListRecord *       SGDeviceInputListPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SGDeviceInputListPtr *          SGDeviceInputList;<span></span></pre></td></tr></table></div>
<p>The SGDeviceName structure is re-defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct SGDeviceName {<span></span></pre></td></tr><tr><td scope="row"><pre>   Str63                           name;<span></span></pre></td></tr><tr><td scope="row"><pre>   Handle                          icon;<span></span></pre></td></tr><tr><td scope="row"><pre>   long                            flags;<span></span></pre></td></tr><tr><td scope="row"><pre>   long                            refCon;<span></span></pre></td></tr><tr><td scope="row"><pre>   SGDeviceInputList               inputs; /* list of inputs; formerly<span></span></pre></td></tr><tr><td scope="row"><pre>                                            reserved to 0*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct SGDeviceName SGDeviceName;<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>   sgDeviceNameFlagDeviceUnavailable = (1 &lt;&lt; 0),<span></span></pre></td></tr><tr><td scope="row"><pre>   sgDeviceNameFlagShowInputsAsDevices = (1 &lt;&lt; 1)<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>The SGDeviceListRecord structure is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>struct SGDeviceListRecord {<span></span></pre></td></tr><tr><td scope="row"><pre>   short                           count;<span></span></pre></td></tr><tr><td scope="row"><pre>   short                           selectedIndex;<span></span></pre></td></tr><tr><td scope="row"><pre>   long                            reserved; /* zero*/<span></span></pre></td></tr><tr><td scope="row"><pre>   SGDeviceName                    entry[1];<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct SGDeviceListRecord       SGDeviceListRecord;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SGDeviceListRecord *            SGDeviceListPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef SGDeviceListPtr *               SGDeviceList;<span></span></pre></td></tr><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>   sgDeviceListWithIcons       = (1 &lt;&lt; 0),<span></span></pre></td></tr><tr><td scope="row"><pre>   sgDeviceListDontCheckAvailability = (1 &lt;&lt; 1),<span></span></pre></td></tr><tr><td scope="row"><pre>   sgDeviceListIncludeInputs   = (1 &lt;&lt; 2)<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>The new flag <code>sgDeviceListIncludeInputs</code> is
passed to <code>SGGetChannelDeviceList</code> if
the caller desires to get the list of inputs as well as the devices.
If this flag is not passed, the old behavior of just listing devices
is retained. </p>
<p>Two new usage flags have also been defined so that your application
can indicate to the sequence grabber (and thus the VDIG) that it
is not being used in a conventional recording mode.</p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    seqGrabRecord               = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>    seqGrabPreview              = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>    seqGrabPlayDuringRecord     = 4,<span></span></pre></td></tr><tr><td scope="row"><pre>    seqGrabLowLatencyCapture    = 8, /* return the freshest frame<span></span></pre></td></tr><tr><td scope="row"><pre>                                        possible, for live work<span></span></pre></td></tr><tr><td scope="row"><pre>                                        (i.e. videoconferencing, live<span></span></pre></td></tr><tr><td scope="row"><pre>                                        broadcast, live image processing)<span></span></pre></td></tr><tr><td scope="row"><pre>                                                                    */<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    seqGrabAlwaysUseTimeBase    = 16 /* Tell VDIGs to use TimebaseTime<span></span></pre></td></tr><tr><td scope="row"><pre>                                        always, rather than creating<span></span></pre></td></tr><tr><td scope="row"><pre>                                        uniform frame durations, for more<span></span></pre></td></tr><tr><td scope="row"><pre>                                        accurate live sync with audio */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef unsigned long SeqGrabUsageEnum;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/c/func/SGSetSettingsSummary" title="SGSetSettingsSummary"></a><a name="//apple_ref/doc/c_ref/SGSetSettingsSummary" title="SGSetSettingsSummary"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGSetSettingsSummary" title="SGSetSettingsSummary"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_73"></a><h3 class="tight">SGSetSettingsSummary</h3>
<p class="spaceabove">Sets what is displayed in the lower left corner of the
sequence grabber dialog. </p>
<p class="spaceabove"><pre>
SGSetSettingsSummary (<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SeqGrabComponent" target="_top">SeqGrabComponent</a> s,
<!--a-->Handle<!--/a--> summaryText);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>s</em></dt>
<dd><p>A sequence grabber component. </p></dd>
<dt><em>summaryText</em></dt>
<dd><p>A handle to the summary text. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine supplies a handle (no length byte) that defines
a user-readable summary of the state of the user&#8217;s sequence grabber
settings. </p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/SGGetChannelRefCon" title="SGGetChannelRefCon"></a><a name="//apple_ref/doc/c_ref/SGGetChannelRefCon" title="SGGetChannelRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGGetChannelRefCon" title="SGGetChannelRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_74"></a><h3 class="tight">SGGetChannelRefCon</h3>
<p class="spaceabove">Returns a reference constant that was previously set by
the corresponding set call. </p>
<p class="spaceabove"><pre>
SGGetChannelRefCon (<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGChannel" target="_top">SGChannel</a> c,
   long * refCon);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>c</em></dt>
<dd><p>A sequence grabber channel. </p></dd>
<dt><em>refCon</em></dt>
<dd><p>A pointer to a long integer. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine returns the application reference constant set
with <code>SGSetChannelRefCon</code>. Previously,
this was only passed to the <code>BottleProcs</code>.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/SGGetChannelDeviceAndInputNames" title="SGGetChannelDeviceAndInputNames"></a><a name="//apple_ref/doc/c_ref/SGGetChannelDeviceAndInputNames" title="SGGetChannelDeviceAndInputNames"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGGetChannelDeviceAndInputNames" title="SGGetChannelDeviceAndInputNames"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_75"></a><h3 class="tight">SGGetChannelDeviceAndInputNames</h3>
<p class="spaceabove">Returns the current device and input names. </p>
<p class="spaceabove"><pre>
SGGetChannelDeviceAndInputNames (<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGChannel" target="_top">SGChannel</a> c,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a> outDeviceName,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a> outInputName,
   short * outInputNumber);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>c</em></dt>
<dd><p>A sequence grabber channel.</p></dd>
<dt><em>outDeviceName</em></dt>
<dd><p>The names for display. </p></dd>
<dt><em>outInputName</em></dt>
<dd><p>The input name for display. </p></dd>
<dt><em>outInputNumber</em></dt>
<dd><p>A pointer to the number of currently
selected inputs. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This is a utility call that lets you find out the current
device and input names, instead of having to call <code>GetDeviceList</code> and
walk it yourself. Pass NIL for parameters you are not interested
in.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/SGSetChannelDeviceInputNames" title="SGSetChannelDeviceInputNames"></a><a name="//apple_ref/doc/c_ref/SGSetChannelDeviceInputNames" title="SGSetChannelDeviceInputNames"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGSetChannelDeviceInputNames" title="SGSetChannelDeviceInputNames"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_76"></a><h3 class="tight">SGSetChannelDeviceInputNames</h3>
<p class="spaceabove">A media format independent call for this. Inputs start
at 0 here. (Sound starts at 1, VDIGs at 0 in direct calls.) Previously,
you had to make a VDIG or SoundDevice call in order to accomplish
this. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> SGSetChannelDeviceInputNames (
SGChannel c
short inInputNumber);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>c</em></dt>
<dd><p>A sequence grabber channel.</p></dd>
<dt><em>inInputNumber</em></dt>
<dd><p>An error specifying if it works or not. </p></dd></dl>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/SGSetChannelSettingsStateChanging" title="SGSetChannelSettingsStateChanging"></a><a name="//apple_ref/doc/c_ref/SGSetChannelSettingsStateChanging" title="SGSetChannelSettingsStateChanging"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGSetChannelSettingsStateChanging" title="SGSetChannelSettingsStateChanging"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_77"></a><h3 class="tight">SGSetChannelSettingsStateChanging</h3>
<p class="spaceabove">This is a call to bracket SetSettings-related calls, and
to give downstream components an opportunity to deal with the entire
settings change in one go. An application should not normally need
to call this because the sequence grabber settings calls will do
this.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> SGSetChannelSettingsStateChanging(
<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGChannel" target="_top">SGChannel</a> c,
UInt32 inFlags);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>c</em></dt>
<dd><p>A sequence grabber channel.</p></dd>
<dt><em>inFlags</em></dt>
<dd><p>See below. </p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<div class="codesample"><table><tr><td scope="row"><pre>enum<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    sgSetSettingsBegin = (1&lt;&lt;0), // SGSetSettings related<span></span></pre></td></tr><tr><td scope="row"><pre>                                // set calls about to start<span></span></pre></td></tr><tr><td scope="row"><pre>    sgSetSettingsEnd = (1&lt;&lt;1), // Finished SGSetSettings<span></span></pre></td></tr><tr><td scope="row"><pre>                                // calls. Get ready to use the new<span></span></pre></td></tr><tr><td scope="row"><pre>                                // settings<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/SGPanelGetDITLForSize" title="SGPanelGetDITLForSize"></a><a name="//apple_ref/doc/c_ref/SGPanelGetDITLForSize" title="SGPanelGetDITLForSize"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGPanelGetDITLForSize" title="SGPanelGetDITLForSize"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_78"></a><h3 class="tight">SGPanelGetDITLForSize</h3>
<p class="spaceabove">Returns user interface elements that fit within a specified
size panel. </p>
<p class="spaceabove"><pre>
SGPanelGetDITLForSize (<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SeqGrabComponent" target="_top">SeqGrabComponent</a> ci,
   <!--a-->Handle<!--/a--> * ditl,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Point" target="_top">Point</a> * requestedSize);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>A component instance. </p></dd>
<dt><em>ditl</em></dt>
<dd><p>A pointer to a handle provided by the sequence
grabber component. </p></dd>
<dt><em>requestedSize</em></dt>
<dd><p>The size requested. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is used to retrieve user interface elements that
fit within a specified size panel. </p>
<p>If <code>SGPanelGetDITLForSize</code> is
unimplemented entirely, the panel is assumed to not have resizable User
Interface elements.</p>
<p>The sequence grabber will interpolate the panel elements between
these two sizes if just these are returned.</p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>   kSGSmallestDITLSize = -1, /* requestedSize h and v set to this to<span></span></pre></td></tr><tr><td scope="row"><pre>                                retrieve small size*/<span></span></pre></td></tr><tr><td scope="row"><pre>   kSGLargestDITLSize = -2 /* requestedSize h and v set to this to<span></span></pre></td></tr><tr><td scope="row"><pre>                                retrieve large size*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/SGGrabCompressCompleteBottleProcPtr" title="SGGrabCompressCompleteBottleProcPtr"></a><a name="//apple_ref/doc/c_ref/SGGrabCompressCompleteBottleProcPtr" title="SGGrabCompressCompleteBottleProcPtr"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGGrabCompressCompleteBottleProcPtr" title="SGGrabCompressCompleteBottleProcPtr"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_79"></a><h3 class="tight">SGGrabCompressCompleteBottleProcPtr</h3>
<p class="spaceabove">Note that <code>UInt8 *queuedFrameCount</code> replaces <code>Boolean
*done</code>. (0 (==false) still means no frames,
and 1 (==true) one, but if more than one are available, the number
should be returned here.</p>
<p class="spaceabove"><pre>
ComponentResult (*SGGrabCompressCompleteBottleProcPtr)
(<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGChannel" target="_top">SGChannel</a> c,
UInt8 *queuedFrameCount,
<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGCompressInfo" target="_top">SGCompressInfo</a> *ci,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeRecord" target="_top">TimeRecord</a> *t,
long refCon);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>c</em></dt>
<dd><p>The connection identifier for the channel
for this operation. The sequence grabber provides this value to
your grab-compress&#8211;complete function.</p></dd>
<dt><em>queuedFrameCount</em></dt>
<dd><p>A pointer to an 8-bit frame count identifier. </p></dd>
<dt><em>ci</em></dt>
<dd><p>A pointer to a <code>SGCompressInfo</code> (IV&#8211;2488)
structure. When the operation is complete, the function fills in
this structure with information about the compression operation.</p></dd>
<dt><em>t</em></dt>
<dd><p>A pointer to a <code>TimeRecord</code> (IV&#8211;2542)
structure. When the operation is complete, the function uses this
structure to indicate when the frame was grabbed.</p></dd>
<dt><em>refCon</em></dt>
<dd><p>A reference constant. </p></dd></dl>
<p>The value 2 previously meant more than one frame, so some
VDIGs may return 2 even if more than 2 are available, and some will
still return 1 as they are using the original definition. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/SGGrabCompressComplete" title="SGGrabCompressComplete"></a><a name="//apple_ref/doc/c_ref/SGGrabCompressComplete" title="SGGrabCompressComplete"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-SGGrabCompressComplete" title="SGGrabCompressComplete"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_80"></a><h3 class="tight">SGGrabCompressComplete</h3>
<p class="spaceabove">Provides the default behavior for your grab-compress-complete
function.</p>
<p class="spaceabove"><pre>
SGGrabCompressComplete (<a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGChannel" target="_top">SGChannel</a> c,
   UInt8 * queuedFrameCount,
   <a href="../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGCompressInfo" target="_top">SGCompressInfo</a> * ci,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeRecord" target="_top">TimeRecord</a> * tr);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>c</em></dt>
<dd><p>The connection identifier for the channel
for this operation. The sequence grabber provides this value to
your grab-compress&#8211;complete function.</p></dd>
<dt><em>queuedFrameCount</em></dt>
<dd><p>A pointer to an 8-bit frame count identifier. </p></dd>
<dt><em>ci</em></dt>
<dd><p>A pointer to an <code>SGCompressInfo</code> (IV&#8211;2488)
structure. When the operation is complete, the function fills in
this structure with information about the compression operation.</p></dd>
<dt><em>tr</em></dt>
<dd><p>A pointer to a <code>TimeRecord</code> (IV&#8211;2542)
structure. When the operation is complete, the function uses this
structure to indicate when the frame was grabbed.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	See &#8220;Error Codes&#8221;
(IV&#8211;2718). Returns <code>noErr</code> if
there is no error. </p>
<h5 class="tight">Discussion</h5>
<p>Note that <code>UInt8 * queuedFrameCount</code> replaces
Boolean *done. 0 (==false) still means no frames, and 1 (==true)
one, but if more than one are available the number should be returned
here. The value 2 previously meant more than one frame, so some
VDIGs may return 2 even if more than 2 are available, and some will
still return 1 as they are using the original definition. </p>
<p>The <code>SGGrabCompressCompleteBottleProc</code> definition
has also changed accordingly. By setting this <code>BottleProc</code>,
and calling through to <code>SGGrabCompressComplete</code>,
your application can determine how many frames are currently queued
in the VDIG, which can be useful for real-time processing. Similarly,
the <code>VDCompressDone</code> call
has been re-defined. VDIG writers should update to this new model.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/VDCompressDone" title="VDCompressDone"></a><a name="//apple_ref/doc/c_ref/VDCompressDone" title="VDCompressDone"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-VDCompressDone" title="VDCompressDone"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_81"></a><h3 class="tight">VDCompressDone</h3>
<p class="spaceabove">Determines whether the video digitizer has finished digitizing
and compressing a frame of image data.</p>
<p class="spaceabove"><pre>
VDCompressDone (<a href="../../Reference/QTRef_VideoComponents/Reference/reference.html#//apple_ref/doc/c_ref/VideoDigitizerComponent" target="_top">VideoDigitizerComponent</a>  ci,
   UInt8 * queuedFrameCount,
   <!--a-->Ptr<!--/a--> * theData,
   long * dataSize,
   UInt8 * similarity,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/TimeRecord" target="_top">TimeRecord</a> * t);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the video digitizer component. An application obtains
this value from <code>OpenComponent</code> (II&#8211;1161)
or <code>OpenDefaultComponent</code> (II&#8211;1163).</p></dd>
<dt><em>queuedFrameCount</em></dt>
<dd><p>A pointer to an 8-bit frame count identifier. </p></dd>
<dt><em>theData</em></dt>
<dd><p>A pointer to a field that is to receive a
pointer to the compressed image data. The digitizer returns a pointer
that is valid in the application&#8217;s current memory mode.</p></dd>
<dt><em>dataSize </em></dt>
<dd><p>A pointer to a field to receive a value indicating
the number of bytes of compressed image data. </p></dd>
<dt><em>similarity </em></dt>
<dd><p>A pointer to a field to receive an indication
of the relative similarity of this image to the previous image in
a sequence. A value of 0 indicates that the current frame is a key
frame in the sequence. A value of 255 indicates that the current
frame is identical to the previous frame. Values from 1 through 254
indicate relative similarity, ranging from very different (1) to
very similar (254). This field is only filled in if the temporal
quality passed in with <code>VDSetCompression</code> (III&#8211;2090)
is not 0; that is, if it is not frame-differenced.</p></dd>
<dt><em>t</em></dt>
<dd><p>A pointer to a <code>TimeRecord</code> (IV&#8211;2542)
structure. When the operation is complete, the digitizer fills in
this structure with information indicating when the frame was grabbed.
The time value stored in this structure is in the time base that
the application sets with <code>VDSetTimeBase</code> (III&#8211;2111).</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	 See &#8220;Error Codes&#8221;
(IV&#8211;2718). Returns <code>noErr</code> if
there is no error.</p>
<h5 class="tight">Discussion</h5>
<p>Note that <code>UInt8 * queuedFrameCount</code> replaces <code>Boolean*
done</code>. 0 (<code>==false</code>)
still means no frames, and 1 (<code>==true</code>)
one, but if more than one are available the number should be returned
here. The value 2 previously meant more than one frame, so some
VDIGs may return 2 even if more than 2 are available, and some will
still return 1 as they are using the original definition.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/VDGetDeviceNameAndFlags" title="VDGetDeviceNameAndFlags"></a><a name="//apple_ref/doc/c_ref/VDGetDeviceNameAndFlags" title="VDGetDeviceNameAndFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-VDGetDeviceNameAndFlags" title="VDGetDeviceNameAndFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_82"></a><h3 class="tight">VDGetDeviceNameAndFlags</h3>
<p class="spaceabove">Returns the name of the input device. </p>
<p class="spaceabove"><pre>
VDGetDeviceNameAndFlags (<a href="../../Reference/QTRef_VideoComponents/Reference/reference.html#//apple_ref/doc/c_ref/VideoDigitizerComponent" target="_top">VideoDigitizerComponent</a> ci,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Str255" target="_top">Str255</a> outName,
   UInt32 * outNameFlags);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the video digitizer component. An application obtains
this value from <code>OpenComponent</code> (II&#8211;1161)
or <code>OpenDefaultComponent</code> (II&#8211;1163).</p></dd>
<dt><em>outName</em></dt>
<dd><p>The name of the display name. </p></dd>
<dt><em>outNameFlags</em></dt>
<dd><p>A pointer to flags (see below)</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is designed to give the VDIG more control over
how it is presented to the user, and to clarify the distinction
between devices and inputs. Historically, the assumption has been
that there is one component registered per device and the component
name is displayed. This change lets a component choose its name
after registration. <code>vdDeviceFlagShowInputsAsDevices</code> is
meant for components that register once and support multiple devices. </p>
<p>The User Interface is clearer if these are presented as devices
rather than inputs, and this allows a VDIG to present itself this
way without a huge restructuring. <code>vdDeviceFlagHideDevice</code> is
for the kind of VDIG that registers itself, and then can register
a further VDIG for each device.</p>
<p>If no hardware is available, returning this flag will omit
it from the list.</p>
<p>As this call is being made, it is also a good time to check
for hardware and register further VDIG components if needed, allowing
for lazy initialization when the application needs to find a VDIG
rather than on every launch or replug.</p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>   vdDeviceFlagShowInputsAsDevices = (1 &lt;&lt; 0), /* Tell the Panel to<span></span></pre></td></tr><tr><td scope="row"><pre>                                            promote Inputs to Devices*/<span></span></pre></td></tr><tr><td scope="row"><pre>   vdDeviceFlagHideDevice = (1 &lt;&lt; 1) /* Omit this Device enitirely from<span></span></pre></td></tr><tr><td scope="row"><pre>                                        the list*/<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/VDCaptureStateChanging" title="VDCaptureStateChanging"></a><a name="//apple_ref/doc/c_ref/VDCaptureStateChanging" title="VDCaptureStateChanging"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-VDCaptureStateChanging" title="VDCaptureStateChanging"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_83"></a><h3 class="tight">VDCaptureStateChanging</h3>
<p class="spaceabove">Returns a component error. </p>
<p class="spaceabove"><pre>
VDCaptureStateChanging (<a href="../../Reference/QTRef_VideoComponents/Reference/reference.html#//apple_ref/doc/c_ref/VideoDigitizerComponent" target="_top">VideoDigitizerComponent</a> ci,
   UInt32 inStateFlags);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the video digitizer component.</p></dd>
<dt><em>inStateFlags</em></dt>
<dd><p>See below. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>It has long been a problem for VDIG writers that the sequence
grabber can make a series of calls, and it is not always clear what
the intent is at the higher level. This call is designed to provide
additional information about what is happening at the sequence grabber
level to the VDIG, so it can take this into account. In particular,
the settings bracketing calls are designed for the VDIG to update
a series of parameters without re-initializing. One point here is
that the VDIG can consider the UniqueID call to be more important
than the input number, for example.</p>
<p>The sequence grabber is now more careful when there are multiple
VDIGs available to try to save and restore more information about
which one should be used. It will still pick the closest available
VDIG if the exact one is not available, but it will not stop with
the first available.</p>
<p>In addition, the old behavior of aborting a Get/Set settings
call part of the way through if an error is returned has been changed
to leave the sequence grabber in a more predictable state. It also
no longer tries to save or restore settings for SGPanels that report
that their hardware is unavailable. </p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>   vdFlagCaptureStarting = (1 &lt;&lt; 0), // Capture is about to start;<span></span></pre></td></tr><tr><td scope="row"><pre>                                        allocate bandwidth<span></span></pre></td></tr><tr><td scope="row"><pre>   vdFlagCaptureStopping = (1 &lt;&lt; 1), // Capture is about to stop; stop<span></span></pre></td></tr><tr><td scope="row"><pre>                                        queuing frames<span></span></pre></td></tr><tr><td scope="row"><pre>   vdFlagCaptureIsForPreview = (1 &lt;&lt; 2),// Capture is just to screen for<span></span></pre></td></tr><tr><td scope="row"><pre>                                         preview purposes<span></span></pre></td></tr><tr><td scope="row"><pre>   vdFlagCaptureIsForRecord = (1 &lt;&lt; 3) // Capture is going to be<span></span></pre></td></tr><tr><td scope="row"><pre>                                         recorded<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureStarting = (1&lt;&lt;0), // Capture is about to start;<span></span></pre></td></tr><tr><td scope="row"><pre>                                        allocate bandwidth<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureStopping = (1&lt;&lt;1), // Capture is about to stop;<span></span></pre></td></tr><tr><td scope="row"><pre>                                        stop queuing frames<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureIsForPreview = (1&lt;&lt;2), // Capture is just to<span></span></pre></td></tr><tr><td scope="row"><pre>                                        screen for preview purposes<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureIsForRecord = (1&lt;&lt;3), // Capture is going to be recorded<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureLowLatency = (1&lt;&lt;4), // Fresh frames are more important<span></span></pre></td></tr><tr><td scope="row"><pre>                                        than delivering every frame --<span></span></pre></td></tr><tr><td scope="row"><pre>                                        don't queue too much<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureAlwaysUseTimeBase = (1&lt;&lt;5),// Use the timebase<span></span></pre></td></tr><tr><td scope="row"><pre>                                        for every frame;<span></span></pre></td></tr><tr><td scope="row"><pre>                                        don't worry about making<span></span></pre></td></tr><tr><td scope="row"><pre>                                        durations uniform<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureSetSettingsBegin = (1&lt;&lt;6), // A series of calls<span></span></pre></td></tr><tr><td scope="row"><pre>                                        are about to be made to<span></span></pre></td></tr><tr><td scope="row"><pre>                                        restore settings<span></span></pre></td></tr><tr><td scope="row"><pre>    vdFlagCaptureSetSettingsEnd = (1&lt;&lt;7) // Finished restoring settings;<span></span></pre></td></tr><tr><td scope="row"><pre>                                            any set calls after this<span></span></pre></td></tr><tr><td scope="row"><pre>                                            are from the app or UI<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/VDGetUniqueIDs" title="VDGetUniqueIDs"></a><a name="//apple_ref/doc/c_ref/VDGetUniqueIDs" title="VDGetUniqueIDs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-VDGetUniqueIDs" title="VDGetUniqueIDs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_84"></a><h3 class="tight">VDGetUniqueIDs</h3>
<p class="spaceabove">Returns a unique identifier for a particular device, which,
in the case of a FireWire device, is the FireWire ID. </p>
<p class="spaceabove"><pre>
VDGetUniqueIDs (<a href="../../Reference/QTRef_VideoComponents/Reference/reference.html#//apple_ref/doc/c_ref/VideoDigitizerComponent" target="_top">VideoDigitizerComponent</a> ci,
   <!--a-->UInt64<!--/a--> * outDeviceID,
   <!--a-->UInt64<!--/a--> * outInputID);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the video digitizer component.</p></dd>
<dt><em>outDeviceID</em></dt>
<dd><p>A pointer to a 64-bit hardware identifier. </p></dd>
<dt><em>outInputID</em></dt>
<dd><p>A pointer to a 64-bit hardware identifier. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>These UniqueID calls are provided, so that the VDIG can give
the sequence grabber information, enabling it to restore a particular
configuration, i.e., choose a particular device and input from those
available&#8211;&#8211;for example, if you need to restore a specific camera
for a set of several hot-plugged FireWire cameras. The caller can
pass NIL if it is not interested in one of the IDs. Returning 0
in an ID means you don&#8217;t have one. </p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/c/func/VDSelectUniqueIDs" title="VDSelectUniqueIDs"></a><a name="//apple_ref/doc/c_ref/VDSelectUniqueIDs" title="VDSelectUniqueIDs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-VDSelectUniqueIDs" title="VDSelectUniqueIDs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_85"></a><h3 class="tight">VDSelectUniqueIDs</h3>
<p class="spaceabove">Selects a particular device&#8211;&#8211;for example, the IDs
from the previous call. </p>
<p class="spaceabove"><pre>
VDSelectUniqueIDs (<a href="../../Reference/QTRef_VideoComponents/Reference/reference.html#//apple_ref/doc/c_ref/VideoDigitizerComponent" target="_top">VideoDigitizerComponent</a> ci,
const <!--a-->UInt64<!--/a--> * inDeviceID,
const <!--a-->UInt64<!--/a--> * inInputID);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>The component instance that identifies your
connection to the video digitizer component.</p></dd>
<dt><em>inDeviceID</em></dt>
<dd><p>A pointer to 64-bit hardware identifier. </p></dd>
<dt><em>inInputID</em></dt>
<dd><p>A pointer to 64-bit hardware identifier.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>Note this is a Select, not a Set. The assumption is that the
Unique ID is a function of the hardware and not modifiable by the
calling application. Either a NIL pointer or 0 in the ID means,
don&#8217;t care. This should restore the device and input IDs returned
by <code>VDGetUniqueIDs</code>. </p>
<p>return <code>vdDontHaveThatUniqueIDErr</code> if
your device doesn&#8217;t have a match.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>QuickTimeComponents.h</code>
<p>C interface file: <code>QuickTimeComponents.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-223947" title="New Image Compression APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF256" title="New Image Compression APIs"></a><h2>New Image Compression
APIs</h2>
<p>The following are Image Compression APIs that are new in QuickTime
6. These APIs allow compressors to supply the User Interface for
their options within the compression dialog. </p>
<a name="//apple_ref/c/func/ImageCodecGetDITLForSize" title="ImageCodecGetDITLForSize"></a><a name="//apple_ref/doc/c_ref/ImageCodecGetDITLForSize" title="ImageCodecGetDITLForSize"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecGetDITLForSize" title="ImageCodecGetDITLForSize"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_86"></a><h3 class="tight">ImageCodecGetDITLForSize</h3>
<p class="spaceabove">Returns DITLs of various size in pixels. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecGetDITLForSize (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
<!--a-->Handle<!--/a--> *ditl,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Point" target="_top">Point</a> *requestedSize);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci </em></dt>
<dd><p>An image codec component instance. You get
the sub-dialog from the component here. </p></dd>
<dt><em>ditl </em></dt>
<dd><p>A pointer to a handle. Dialog items are returned
here. </p></dd>
<dt><em>requestedSize </em></dt>
<dd><p>The requested size in pixels that fits
into the dialog. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine allows the image codec to return DITLs of various
size in pixels. Two special values for the size, <code>kSGSmallestDITLSize</code> and <code>kSGLargestDITLSize</code>,
request the smallest or largest size of the DITL. </p>
<p>Once you have created the area, you can use the other calls
described in this section to handle the dialog items managed by
your panel component.</p>
<p>The codec should return <code>badComponentSelector</code> for
sizes it does not implement. The codec must at a minimum support <code>kSGSmallestDITLSize</code> if
it implements this call.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<p>C interface file: <code>ImageCodec.h</code></p>
<a name="//apple_ref/c/func/ImageCodecDITLInstall" title="ImageCodecDITLInstall"></a><a name="//apple_ref/doc/c_ref/ImageCodecDITLInstall" title="ImageCodecDITLInstall"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecDITLInstall" title="ImageCodecDITLInstall"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_87"></a><h3 class="tight">ImageCodecDITLInstall</h3>
<p class="spaceabove">Installs added items in an image codec settings dialog
box before the dialog box is displayed to the user.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecDITLInstall (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DialogRef" target="_top">DialogRef</a> d,
short itemOffset
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>An image codec component instance. </p></dd>
<dt><em>d</em></dt>
<dd></dd>
<dt><em>itemOffset</em></dt>
<dd><p>The offset to your image codec&#8217;s first item. </p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<p>See &#8220;Error Codes&#8221; (IV&#8211;2718). Returns <code>noErr</code> if
there is no error.</p>
<p>This routine installs added items in an image codec settings
dialog box before the dialog box is displayed to the user.</p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>ImageCodec.h</code></p>
<a name="//apple_ref/c/func/ImageCodecDITLEvent" title="ImageCodecDITLEvent"></a><a name="//apple_ref/doc/c_ref/ImageCodecDITLEvent" title="ImageCodecDITLEvent"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecDITLEvent" title="ImageCodecDITLEvent"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_88"></a><h3 class="tight">ImageCodecDITLEvent</h3>
<p class="spaceabove">Lets a component receive and process dialog events.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecDITLEvent (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DialogRef" target="_top">DialogRef</a> d,
short itemOffset,
const <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/EventRecord" target="_top">EventRecord</a> *theEvent,
short *itemHit,
<!--a-->Boolean<!--/a--> *handled);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>An image codec component instance. </p></dd>
<dt><em>d</em></dt>
<dd><p>A dialog reference identifying the settings
dialog box.</p></dd>
<dt><em>itemOffset</em></dt>
<dd><p>The offset to your panel&#8217;s first item in
the dialog box.</p></dd>
<dt><em>theEvent</em></dt>
<dd><p>A pointer to an <code>EventRecord</code> (IV&#8211;2302)
structure. This structure contains information identifying the nature
of the event. </p></dd>
<dt><em>itemHit</em></dt>
<dd><p>A pointer to a field that is to receive the
item number in cases where your component handles the event. The
number returned is an absolute, not a relative number, so it must
be offset by the <code>itemOffset</code> parameter.
handled </p></dd>
<dt><em>handled</em></dt>
<dd><p>A pointer to a Boolean value. Set this Boolean
value to TRUE if you handle the event; set it to FALSE if you do
not.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<p>See &#8220;Error Codes&#8221; (IV&#8211;2718). Returns <code>noErr</code> if
there is no error.</p>
<p>This routine allows a component to receive and process dialog
events.</p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>ImageCodec.h</code></p>
<a name="//apple_ref/c/func/ImageCodecDITLItem" title="ImageCodecDITLItem"></a><a name="//apple_ref/doc/c_ref/ImageCodecDITLItem" title="ImageCodecDITLItem"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecDITLItem" title="ImageCodecDITLItem"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_89"></a><h3 class="tight">ImageCodecDITLItem</h3>
<p class="spaceabove">Receives and processes mouse clicks in the image codec
settings dialog box.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecDITLItem (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DialogRef" target="_top">DialogRef</a> d,
short itemOffset,
short itemNum);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>An image codec component instance. </p></dd>
<dt><em>d</em></dt>
<dd><p>A dialog reference identifying the settings
dialog box.</p></dd>
<dt><em>itemOffset</em></dt>
<dd><p>The offset to your panel&#8217;s first item in
the dialog box.</p></dd>
<dt><em>itemNum</em></dt>
<dd><p>The item number of the dialog item selected
by the user. The sequence grabber provides an absolute item number.
It is your responsibility to adjust this value to account for the
offset to your panel&#8217;s first item in the dialog box.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	See &#8220;Error Codes&#8221;
(IV&#8211;2718). Returns <code>noErr</code> if
there is no error.</p>
<h5 class="tight">Discussion</h5>
<p>An image codec component calls this function whenever the
user clicks an item in the settings dialog box. Your component may
then perform whatever processing is appropriate, depending upon
the item number.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<p>C interface file: <code>ImageCodec.h</code></p>
<a name="//apple_ref/c/func/ImageCodecDITLRemove" title="ImageCodecDITLRemove"></a><a name="//apple_ref/doc/c_ref/ImageCodecDITLRemove" title="ImageCodecDITLRemove"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecDITLRemove" title="ImageCodecDITLRemove"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_90"></a><h3 class="tight">ImageCodecDITLRemove</h3>
<p class="spaceabove">Removes a panel from the image codec settings dialog box.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecDITLRemove (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/DialogRef" target="_top">DialogRef</a> d,
short itemOffset);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>An image codec component instance. </p></dd>
<dt><em>d</em></dt>
<dd><p>A dialog pointer identifying the settings
dialog box.</p></dd>
<dt><em>itemOffset</em></dt>
<dd><p>The offset to your panel&#8217;s first item in
the dialog box.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<p>See &#8220;Error Codes&#8221; (IV&#8211;2718). Returns <code>noErr</code> if
there is no error.</p>
<p>An image codec component calls this function just before removing
your items from the settings dialog box.</p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>ImageCodec.h</code></p>
<a name="//apple_ref/c/func/ImageCodecDITLValidateInput" title="ImageCodecDITLValidateInput"></a><a name="//apple_ref/doc/c_ref/ImageCodecDITLValidateInput" title="ImageCodecDITLValidateInput"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecDITLValidateInput" title="ImageCodecDITLValidateInput"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_91"></a><h3 class="tight">ImageCodecDITLValidateInput</h3>
<p class="spaceabove">Validates the contents of the user dialog box for an image
codec component.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecDITLValidateInput (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
<!--a-->Boolean<!--/a--> *ok);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>ci</em></dt>
<dd><p>An image codec component instance. </p></dd>
<dt><em>ok</em></dt>
<dd><p>A pointer to a Boolean value. Set this value
to <code>TRUE</code> if the settings
are OK; otherwise, set it to <code>FALSE</code>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>	See &#8220;Error Codes&#8221;
(IV&#8211;2718). Returns <code>noErr</code> if
there is no error.</p>
<h5 class="tight">Discussion</h5>
<p>The image codec calls this function when the user clicks the
OK button. If the user clicks the Cancel button, the image codec
does not call this function. You indicate whether the settings are
acceptable by setting the Boolean value referred to by the <code>ok</code> parameter.
If you set this value to <code>FALSE</code>,
the sequence grabber component ignores the OK button in the dialog
box.</p>
<p>Introduced in QuickTime 6.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<p>C interface file: <code>ImageCodec.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-225402" title="New Image Decompression Manager APIs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF257" title="New Image Decompression Manager APIs"></a><h2>New Image Decompression
Manager APIs</h2>
<p>This section discusses new Image Decompression Manager APIs
introduced in QuickTime 6. </p>
<a name="//apple_ref/c/func/QTGetPixelFormatDepthForImageDescription" title="QTGetPixelFormatDepthForImageDescription"></a><a name="//apple_ref/doc/c_ref/QTGetPixelFormatDepthForImageDescription" title="QTGetPixelFormatDepthForImageDescription"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTGetPixelFormatDepthForImageDescription" title="QTGetPixelFormatDepthForImageDescription"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_92"></a><h3 class="tight">QTGetPixelFormatDepthForImageDescription</h3>
<p class="spaceabove">Returns the corresponding depth value that should be used
in image descriptions.</p>
<p class="spaceabove"><pre>
short QTGetPixelFormatDepthForImageDescription (<!--a-->OSType<!--/a--> PixelFormat);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Given a pixel format, this function returns the corresponding
depth value that should be used in image descriptions. Such a value
is not the literal number of bits per pixel, but the closest corresponding
classic QuickDraw depth:</p>
<ul class="ul"><li class="li"><p>for any pixel format with an alpha channel, 32</p></li>
<li class="li"><p>for grayscale pixel formats of 8 or more bits per pixel, 40</p></li>
<li class="li"><p>for color quantized to 5 or 6 bits per component, 16</p></li>
<li class="li"><p>for all other color pixel formats, 24</p></li></ul><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/GraphicsImportSetImageIndexToThumbnail" title="GraphicsImportSetImageIndexToThumbnail"></a><a name="//apple_ref/doc/c_ref/GraphicsImportSetImageIndexToThumbnail" title="GraphicsImportSetImageIndexToThumbnail"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-GraphicsImportSetImageIndexToThumbnail" title="GraphicsImportSetImageIndexToThumbnail"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_93"></a><h3 class="tight">GraphicsImportSetImageIndexToThumbnail</h3>
<p class="spaceabove">Looks for a subimage that contains a thumbnail.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> GraphicsImportSetImageIndexToThumbnail
(<a href="../../Reference/QTRef_GraphicsImportExport/Reference/reference.html#//apple_ref/doc/c_ref/GraphicsImportComponent" target="_top">GraphicsImportComponent</a> ci);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This routine looks for a subimage that contains a thumbnail.
If the function finds one, it sets the image index to that subimage.
If the function does not find one, it returns <code>noThumbnailFoundErr</code>.</p>
<p>The base graphics importer&#8217;s implementation of <code>SetImageIndexToThumbnail</code> works
by looking for the first image index that returns a <code>kQTIndexedImageType</code> metadata
item containing the <code>kQTIndexedImageIsThumbnail</code> tag.
Format-specific graphics importers may override this with more efficient
algorithms.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCompression.h</code>
<a name="//apple_ref/c/func/ImageCodecMergeFloatingImageOntoWindow" title="ImageCodecMergeFloatingImageOntoWindow"></a><a name="//apple_ref/doc/c_ref/ImageCodecMergeFloatingImageOntoWindow" title="ImageCodecMergeFloatingImageOntoWindow"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecMergeFloatingImageOntoWindow" title="ImageCodecMergeFloatingImageOntoWindow"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_94"></a><h3 class="tight">ImageCodecMergeFloatingImageOntoWindow</h3>
<p class="spaceabove">Draws the current contents of a floating image. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecMergeFloatingImageOntoWindow(
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
UInt32 flags );
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Some hardware acceleration transfer codecs create a &#8220;floating
image&#8221; in front of the window; when this is deactivated or hidden,
whatever was previously drawn in that section of the window reappears.
Such transfer codecs should implement the <code>MergeFloatingImageOntoWindow</code> call,
which draws the current contents of the floating image onto the
window below, so that the floating image may be deactivated or hidden
without the image changing.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<a name="//apple_ref/c/func/ImageCodecRemoveFloatingImage" title="ImageCodecRemoveFloatingImage"></a><a name="//apple_ref/doc/c_ref/ImageCodecRemoveFloatingImage" title="ImageCodecRemoveFloatingImage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-ImageCodecRemoveFloatingImage" title="ImageCodecRemoveFloatingImage"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_95"></a><h3 class="tight">ImageCodecRemoveFloatingImage</h3>
<p class="spaceabove">Hides the floating image without having to close the component.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> ImageCodecRemoveFloatingImage(
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentInstance" target="_top">ComponentInstance</a> ci,
UInt32 flags );
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>ImageCodec.h</code>
<p>Some hardware acceleration transfer codecs create a &#8220;floating
image&#8221; in front of the window; when this is deactivated or hidden,
whatever was previously drawn in that section of the window reappears.
Such transfer codecs should implement the <code>RemoveFloatingImage</code> call,
so that the Image Compression Manager can ask it to hide the floating
image without having to close the component.</p>
<p>The floating image should be shown again on the next call
to <code>DrawBand</code>.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-229179" title="New Media Handler APIs For Keyboard Focus"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF258" title="New Media Handler APIs For Keyboard Focus"></a><h2>New Media Handler
APIs For Keyboard Focus</h2>
<p>QuickTime 6 provides three new media handler calls that developers
can use to write media handlers that support keyboard focus. These
are </p>
<ul class="ul"><li class="li"><p><code>MediaRefConSetProperty</code></p></li>
<li class="li"><p><code>MediaRefConGetProperty</code></p></li>
<li class="li"><p><code>MediaNavigateTargetRefCon</code> </p></li></ul>
<p>If you want to add interactive capabilities to your application,
you need to use these media handler calls, discussed in this section.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-229229" title="Adding Keyboard Focus Capabilities"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF259" title="Adding Keyboard Focus Capabilities"></a><h3>Adding Keyboard
Focus Capabilities</h3>
<p>When authoring the movie, you need to make sure that you add
a media property atom of type <code>kTrackFocusCanEditFlag</code> and
set that to <code>TRUE</code>. Then
you should check for the presence of this flag when called via <code>MediaHasCharacteristic</code> checking
on the <code>kCharacteristicProvidesKeyFocus</code>.</p>
<p>You add the <code>kTrackFocusCanEditFlag</code> atom.
If this property has been set to <code>TRUE</code>,
the media handler receives the <code>NavigateRefCon</code> and
Get/SetRefCon calls. </p>
<div class="codesample"><table><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTAtomContainer mediaProperties;<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean         canEdit = true;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    QTNewAtomContainer(&amp;mediaProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>    QTInsertChild(mediaProperties, 0, kTrackFocusCanEditFlag, 1, 1,<span></span></pre></td></tr><tr><td scope="row"><pre>                    sizeof(canEdit), &amp;canEdit, NULL);<span></span></pre></td></tr><tr><td scope="row"><pre>    myErr = SetMediaPropertyAtom(myMedia, mediaProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>    QTDisposeAtomContainer(mediaProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>pascal ComponentResult MediaHasCharacteristic(<span></span></pre></td></tr><tr><td scope="row"><pre>                        MediaHandler mh,<span></span></pre></td></tr><tr><td scope="row"><pre>                        OSType characteristic,<span></span></pre></td></tr><tr><td scope="row"><pre>                        Boolean *hasIt)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (kCharacteristicProvidesKeyFocus == characteristic)  {<span></span></pre></td></tr><tr><td scope="row"><pre>        OSErr           err;<span></span></pre></td></tr><tr><td scope="row"><pre>        Boolean         canEdit = false;<span></span></pre></td></tr><tr><td scope="row"><pre>        QTAtomContainer propertyContainer = nil;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        err = GetMediaPropertyAtom (store-&gt;media, &amp;propertyContainer);<span></span></pre></td></tr><tr><td scope="row"><pre>        if ((noErr == err) &amp;&amp; (propertyContainer))  {<span></span></pre></td></tr><tr><td scope="row"><pre>            QTAtom canEditAtom = QTFindChildByIndex(propertyContainer,<span></span></pre></td></tr><tr><td scope="row"><pre>                kParentAtomIsContainer, kTrackFocusCanEditFlag, 1, nil);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>            if (canEditAtom)<span></span></pre></td></tr><tr><td scope="row"><pre>                QTCopyAtomDataToPtr(propertyContainer, canEditAtom,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    false, sizeof(Boolean), &amp;canEdit,<span></span></pre></td></tr><tr><td scope="row"><pre>                                    nil);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        if (propertyContainer)      (void) QTDisposeAtomContainer<span></span></pre></td></tr><tr><td scope="row"><pre>            (propertyContainer);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        *hasIt = canEdit;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    QTAtomContainer mediaProperties;<span></span></pre></td></tr><tr><td scope="row"><pre>    Boolean         hasActions = true;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    QTNewAtomContainer(&amp;mediaProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>    QTInsertChild(mediaProperties, 0, kMediaPropertyHasActions, 1, 1,<span></span></pre></td></tr><tr><td scope="row"><pre>                    sizeof(hasActions), &amp;hasActions, NULL);<span></span></pre></td></tr><tr><td scope="row"><pre>    myErr = SetMediaPropertyAtom(myMedia, mediaProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>    QTDisposeAtomContainer(mediaProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<a name="//apple_ref/c/func/MediaHitTestForTargetRefCon" title="MediaHitTestForTargetRefCon"></a><a name="//apple_ref/doc/c_ref/MediaHitTestForTargetRefCon" title="MediaHitTestForTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaHitTestForTargetRefCon" title="MediaHitTestForTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_96"></a><h3 class="tight">MediaHitTestForTargetRefCon</h3>
<p class="spaceabove">Locates the object for hit testing.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaHitTestForTargetRefCon (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>    mh,
   long            flags,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Point" target="_top">Point</a>           loc,
   long            *targetRefCon );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>A media handler. You can obtain this reference
from <code>GetMediaHandler</code> (I-443). </p></dd>
<dt><em>flags </em></dt>
<dd><p>Flags (see below) that define the hit. </p><dl class="termdef">	
<dt><i class="mono">mHitTestBounds </em></dt>
<dd><p> The point may only be within the <code>targetRefCon</code> bounding
box. </p></dd>
<dt><i class="mono">mHitTestImage </em></dt>
<dd><p>
The point must be within the shape of the <code>targetRefCon</code> image. </p></dd>
<dt><i class="mono">mHitTestInvisible </em></dt>
<dd><p>
An invisible <code>targetRefCon</code> may
be hit tested, even if the object is invisible. </p></dd>
<dt><i class="mono">mHitTestIsClick </em></dt>
<dd><p>
The hit is a mouse click for codecs that want mouse events. </p></dd></dl></dd>
<dt><em>loc </em></dt>
<dd><p>The location of the mouse. </p></dd>
<dt><em>targetRefCon </em></dt>
<dd><p>Returns a reference constant representing
an object you&#8217;re interested in. If this reference constant is
not 0, your media handler will receive calls to <code>MediaGetActionsForQTEvent</code>.</p></dd></dl>
<h5 class="tight">Return Value</h5>
<p>See &#8220;Error Codes&#8221;
(IV-2718). Returns <code>noErr</code> if
there is no error.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<p>The following flags are set by the Standard Controller, which
currently sets <code>mHitTestImage</code> and <code>mHitTestInvisible</code> before
it calls you.</p>
<p>This routine is used to locate the object for hit testing. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>MediaHandlers.h</code></p>
<a name="//apple_ref/c/func/MediaHitTestTargetRefCon" title="MediaHitTestTargetRefCon"></a><a name="//apple_ref/doc/c_ref/MediaHitTestTargetRefCon" title="MediaHitTestTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaHitTestTargetRefCon" title="MediaHitTestTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_97"></a><h3 class="tight">MediaHitTestTargetRefCon</h3>
<p class="spaceabove">Detects if the mouse click and its release are in the
same location, and within the object.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaHitTestTargetRefCon (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>    mh,
   long            targetRefCon,
   long            flags,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Point" target="_top">Point</a>           loc,
   <!--a-->Boolean<!--/a-->         *wasHit );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>A media handler. You can obtain this reference
from <code>GetMediaHandler</code> (I-443). </p></dd>
<dt><em>targetRefCon </em></dt>
<dd><p>A reference constant set by the media handler
in <code>MediaHitTestForTargetRefCon</code>. </p></dd>
<dt><em>flags </em></dt>
<dd><p>Flags (see below) that define the hit. </p><dl class="termdef">	
<dt><i class="mono">mHitTestBounds</em></dt>
<dd><p>The point may only be within the <code>targetRefCon</code> bounding
box.</p></dd>
<dt>mHitTestImage </dt>
<dd><p>The point must be within the shape of the <code>targetRefCon</code> image.</p></dd>
<dt><i class="mono">mHitTestInvisible </em></dt>
<dd><p>An invisible <code>targetRefCon</code> may
be hit tested. </p></dd>
<dt><i class="mono">mHitTestIsClick </em></dt>
<dd><p>The hit is a mouse click for codecs that want
mouse events.</p></dd></dl></dd>
<dt><em>loc </em></dt>
<dd><p>The location of the mouse. </p></dd>
<dt><em>wasHit </em></dt>
<dd><p>A pointer to a Boolean; return <code>TRUE</code> if
there was a hit, <code>FALSE</code> otherwise. </p><p>See
&#8220;Error Codes&#8221; (IV-2718). Returns <code>noErr</code> if
there is no error.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<p>This routine is called after <code>MediaGetActionsForQTEvent</code> if
a reference constant was set in <code>MediaHitTestForTargetRefCon</code>. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>MediaHandlers.h</code></p>
<a name="//apple_ref/c/func/MediaGetActionsForQTEvent" title="MediaGetActionsForQTEvent"></a><a name="//apple_ref/doc/c_ref/MediaGetActionsForQTEvent" title="MediaGetActionsForQTEvent"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaGetActionsForQTEvent" title="MediaGetActionsForQTEvent"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_98"></a><h3 class="tight">MediaGetActionsForQTEvent</h3>
<p class="spaceabove">Returns an Event Handler for your Media Handler. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaGetActionsForQTEvent (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>        mh,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTEventRecordPtr" target="_top">QTEventRecordPtr</a>    event,
   long                targetRefCon,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTAtomContainer" target="_top">QTAtomContainer</a>     *container,
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/QTAtom" target="_top">QTAtom</a>              *atom );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>A media handler. You can obtain this reference
from <code>GetMediaHandler</code> (I-443). </p></dd>
<dt><em>event </em></dt>
<dd><p>A pointer to a <code>QTEventRecord</code> (IV-2409)
structure. </p></dd>
<dt><em>targetRefCon </em></dt>
<dd><p>A reference constant set by the media handler
in <code>MediaHitTestForTargetRefCon</code>. </p></dd>
<dt><em>container </em></dt>
<dd><p>An atom container that you can pass back to
the standard controller used for implementing sprite actions. </p></dd>
<dt><em>atom </em></dt>
<dd><p>An atom you can pass back to the standard
controller used for implementing sprite actions. </p><p>See &#8220;Error
Codes&#8221; (IV-2718). Returns <code>noErr</code> if
there is no error. Returns <code>qtEventWasHandledErr</code> if
event was handled by the media handler <code>qtEventWasHandledErr</code> =
-2129. </p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<p>This routine returns an Event Handler for your Media Handler,
and is called with the <code>targetRefcon</code> set
in <code>MediaHitTestForTargetRefCon</code>. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>MediaHandlers.h</code></p>
<a name="//apple_ref/c/func/MediaDisposeTargetRefCon" title="MediaDisposeTargetRefCon"></a><a name="//apple_ref/doc/c_ref/MediaDisposeTargetRefCon" title="MediaDisposeTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaDisposeTargetRefCon" title="MediaDisposeTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_99"></a><h3 class="tight">MediaDisposeTargetRefCon</h3>
<p class="spaceabove">Disposes any resources allocated as part of the RefCon. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaDisposeTargetRefCon (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>    mh,
   long            targetRefCon );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>A media handler. You can obtain this reference
from <code>GetMediaHandler</code> (I-443). </p></dd>
<dt><em>targetRefCon </em></dt>
<dd><p>A reference constant set by the media handler
in <code>MediaHitTestForTargetRefCon</code>. </p><p>See
&#8220;Error Codes&#8221; (IV-2718). Returns <code>noErr</code> if
there is no error.</p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.0 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<p>This routine disposes any resources that your application
has allocated as part of the reference constant. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>MediaHandlers.h</code></p>
<a name="//apple_ref/c/func/MediaNavigateTargetRefCon" title="MediaNavigateTargetRefCon"></a><a name="//apple_ref/doc/c_ref/MediaNavigateTargetRefCon" title="MediaNavigateTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaNavigateTargetRefCon" title="MediaNavigateTargetRefCon"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_100"></a><h3 class="tight">MediaNavigateTargetRefCon</h3>
<p class="spaceabove">Locates the object for keyboard focus.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaNavigateTargetRefCon (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>    mh,
   long            navigation,
   long *          refCon );
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>A media handler. You can obtain this reference
from <code>GetMediaHandler</code> (I-443). </p></dd>
<dt><em>navigation </em></dt>
<dd><p>Flags (see below) that define the direction. </p></dd>
<dt><em>refCon </em></dt>
<dd><p>Returns a reference constant representing
an object you&#8217;re interested in. If this reference constant is
not 0, your media handler will receive calls to <code>MediaRefConSetProperty</code> and <code>MediaRefConGetProperty</code>.</p><p>See
&#8220;Error Codes&#8221; (IV-2718). Returns <code>noErr</code> if
there is no error.</p><p>The following flags are set by the
Standard Controller, which is determined by the user&#8217;s interaction
with the tab and shift keys, and/or mouse.</p><dl class="termdef">	
<dt><i class="mono">kRefConNavigationNext </em></dt>
<dd><p>
Tabbing direction is forward. If no item currently selection, then
use first.</p></dd>
<dt><i class="mono">kRefConNavigationPrevious</em></dt>
<dd><p>Tabbing direction is backward. If no item currently
selection, then use the last.</p></dd></dl></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<p>These constants, which enable navigational direction, are
defined as follows: </p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kRefConNavigationNext = 0,<span></span></pre></td></tr><tr><td scope="row"><pre>    kRefConNavigationPrevious = 1<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>This routine is locates the object for keyboard focus. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>MediaHandlers.h</code></p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-230634" title="Adding Keyboard Navigation and Editable Text Field Support"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF260" title="Adding Keyboard Navigation and Editable Text Field Support"></a><h2>Adding Keyboard
Navigation and Editable Text Field Support</h2>
<p>The following are reference constant properties for <code>MediaRefConGetProperty</code> and <code>MediaRefConSetProperty</code> calls: </p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kRefConPropertyCanHaveFocus = 1, /* Boolean */<span></span></pre></td></tr><tr><td scope="row"><pre>    kRefConPropertyHasFocus = 2,     /* Boolean */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>enum    {<span></span></pre></td></tr><tr><td scope="row"><pre>    kTrackFocusCanEditFlag      = 'kedt'<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<a name="//apple_ref/c/func/MediaRefConSetProperty" title="MediaRefConSetProperty"></a><a name="//apple_ref/doc/c_ref/MediaRefConSetProperty" title="MediaRefConSetProperty"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaRefConSetProperty" title="MediaRefConSetProperty"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_101"></a><h3 class="tight">MediaRefConSetProperty</h3>
<p class="spaceabove">Sets a new state based on the property type. </p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaRefConSetProperty (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>        mh,
   long                refCon,
   long                propertyType,
   void *              propertyValue);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>A media handler. You can obtain this reference
from <code>GetMediaHandler</code> (I-443). </p></dd>
<dt><em>refCon </em></dt>
<dd><p>A reference constant set by the media handler
in <code>MediaNavigateTargetRefCon</code>. </p></dd>
<dt><em>propertyType </em></dt>
<dd><p>Property type sent from standard controller.</p><dl class="termdef">	
<dt><code>kRefConPropertyHasFocus
= 2,</code></dt>
<dd><p><code>					 /* Boolean */</code></p></dd></dl></dd>
<dt><em>propertyValue </em></dt>
<dd><p>
Pointer to value to assign. The size based on property type. </p></dd></dl><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<p>See &#8220;Error Codes&#8221; (IV-2718). Returns <code>noErr</code> if
there is no error.</p>
<p>This routine is called with the reference constant is set
in <code>MediaNavigateTargetRefCon</code> to
set new state based on property type.</p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>MediaHandlers.h</code></p>
<a name="//apple_ref/c/func/MediaRefConGetProperty" title="MediaRefConGetProperty"></a><a name="//apple_ref/doc/c_ref/MediaRefConGetProperty" title="MediaRefConGetProperty"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaRefConGetProperty" title="MediaRefConGetProperty"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_102"></a><h3 class="tight">MediaRefConGetProperty</h3>
<p class="spaceabove">Returns the current state based on the property type.</p>
<p class="spaceabove"><pre>
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/ComponentResult" target="_top">ComponentResult</a> MediaRefConGetProperty (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a>        mh,
   long                refCon,
   long                propertyType,
   void *              propertyValue);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>mh </em></dt>
<dd><p>A media handler. You can obtain this reference
from <code>GetMediaHandler</code> (I-443). </p></dd>
<dt><em>refCon </em></dt>
<dd><p>A reference constant set by the media handler
in <code>MediaNavigateTargetRefCon</code>. </p></dd>
<dt><em>propertyType </em></dt>
<dd><p>Property type sent from standard controller. </p><dl class="termdef">	
<dt><code>kRefConPropertyCanHaveFocus
= 1,</code></dt>
<dd><p><code>					 /* Boolean */</code></p></dd></dl></dd>
<dt><em>propertyValue </em></dt>
<dd><p>A pointer to a value to assign. The
size is based on property type. </p><p>See &#8220;Error Codes&#8221;
(IV-2718). Returns <code>noErr</code> if
there is no error.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is called with the reference constant set in <code>MediaNavigateTargetRefCon</code> to
get the current state based on the property type.</p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>MediaHandlers.h</code></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-231312" title="New QuickTime Restrictions APIs "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF261" title="New QuickTime Restrictions APIs "></a><h2>New QuickTime
Restrictions APIs </h2>
<p>QuickTime 6 introduces a group of new APIs that provide a
mechanism to preflight operations on content that may be restricted.
What this means is that, by utilizing these calls, you can determine
which QuickTime functions are restricted for the current movie, that
is, which operations will fail. </p>
<p>These calls also allow developers to see what restrictions
are enforced for a particular version of QuickTime. Previously,
in earlier versions of QuickTime, there was no mechanism in place
to report restrictions on no save or kiosk movies. Now in QuickTime 6,
you can use these new restriction APIs, discussed in this section. </p>
<a name="//apple_ref/c/func/QTGetMovieRestrictions" title="QTGetMovieRestrictions"></a><a name="//apple_ref/doc/c_ref/QTGetMovieRestrictions" title="QTGetMovieRestrictions"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTGetMovieRestrictions" title="QTGetMovieRestrictions"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_103"></a><h3 class="tight">QTGetMovieRestrictions</h3>
<p class="spaceabove">Returns the restrictions, if any, specified on a given
movie. </p>
<p class="spaceabove"><pre>
OSErr QTGetMovieRestrictions (
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> theMovie,
   <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTRestrictionSet" target="_top">QTRestrictionSet</a> *outRestrictionSet,
   UInt32 *outSeed);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>theMovie</em></dt>
<dd><p>The movie for this operation. </p></dd>
<dt><em>outRestrictionSet</em></dt>
<dd><p>A pointer to a variable that holds a
reference to a restriction set.</p></dd>
<dt><em>outSeed</em></dt>
<dd><p>A pointer to a long integer. Each change to
the restriction set will update this value.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If there are no restrictions, this routine returns NIL. You
can use seed count to detect changes. </p>
<p>The following is a list of the currently defined restrictions
now available in <code>QTContentRestrictions.h</code>:</p>
<div class="codesample"><table><tr><td scope="row"><pre>enum {<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionClassSave = 'save',<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionSaveDontAddMovieResource = (1L &lt;&lt; 0),<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionSaveDontFlatten = (1L &lt;&lt; 1),<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionSaveDontExport = (1L &lt;&lt; 2),<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionSaveDontExtract = (1L &lt;&lt; 3), // don't allow any form of    // extraction of  content<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionClassEdit = 'edit',<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionEditDontCopy = (1L &lt;&lt; 0), // disable copy<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionEditDontCut = (1L &lt;&lt; 1), // disable cut<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionEditDontPaste = (1L &lt;&lt; 2), // disable paste<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionEditDontClear = (1L &lt;&lt; 3), // disable clear<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionEditDontModify = (1L &lt;&lt; 4), // don't allow modification<span></span></pre></td></tr><tr><td scope="row"><pre>                                              // of content<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTRestrictionEditDontExtract = (1L &lt;&lt; 5) // don't allow any form of<span></span></pre></td></tr><tr><td scope="row"><pre>                                            // extraction of content<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>There is also an error called <code>qtOperationNotAuthorizedErr</code> that
can be returned if an operation is performed on content that is
restricted. Normally, you should use the QuickTime Restrictions
API described in this section to preflight operations to determine
whether or not to perform the operation. If a restricted operation
is attempted, it will fail and will return this error. </p>
<div class="codesample"><table><tr><td scope="row"><pre>qtOperationNotAuthorizedErr = -2168<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTGetSupportedRestrictions" title="QTGetSupportedRestrictions"></a><a name="//apple_ref/doc/c_ref/QTGetSupportedRestrictions" title="QTGetSupportedRestrictions"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTGetSupportedRestrictions" title="QTGetSupportedRestrictions"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_104"></a><h3 class="tight">QTGetSupportedRestrictions</h3>
<p class="spaceabove">Use this routine to determine what restrictions are enforced
by the currently running version of QuickTime.</p>
<p class="spaceabove"><pre>
QTGetSupportedRestrictions (<!--a-->OSType<!--/a--> inRestrictionClass,
UInt32 *  outRestrictionIDs) ;
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTRestrictionsGetInfo" title="QTRestrictionsGetInfo"></a><a name="//apple_ref/doc/c_ref/QTRestrictionsGetInfo" title="QTRestrictionsGetInfo"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTRestrictionsGetInfo" title="QTRestrictionsGetInfo"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_105"></a><h3 class="tight">QTRestrictionsGetInfo</h3>
<p class="spaceabove">Returns the information about the restrictions designated
by the specified restriction set. </p>
<p class="spaceabove"><pre>
OSErr QTRestrictionsGetInfo (
   <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTRestrictionSet" target="_top">QTRestrictionSet</a> inRestrictionSet,
   long *outRestrictionClassCount,
   long *outSeed);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inRestrictionSet</em></dt>
<dd><p>The restricted set. </p></dd>
<dt><em>outRestrictionClassCount</em></dt>
<dd><p>A value holding the number of classes
currently in the restriction set. </p></dd>
<dt><em>outSeed</em></dt>
<dd><p>A pointer to a long integer. Each change to
the restriction set will update this value.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If you want to determine all of the restrictions, use this
routine to determine the count. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTRestrictionsGetItem" title="QTRestrictionsGetItem"></a><a name="//apple_ref/doc/c_ref/QTRestrictionsGetItem" title="QTRestrictionsGetItem"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTRestrictionsGetItem" title="QTRestrictionsGetItem"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_106"></a><h3 class="tight">QTRestrictionsGetItem</h3>
<p class="spaceabove">Returns the restricted items. </p>
<p class="spaceabove"><pre>
OSErr QTRestrictionsGetItem (<a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTRestrictionSet" target="_top">QTRestrictionSet</a> inRestrictionSet,
   <!--a-->OSType<!--/a--> inRestrictionClass,
   UInt32 * outRestrictions);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>inRestrictionSet</em></dt>
<dd><p>The restricted set. </p></dd>
<dt><em>inRestrictionClass</em></dt>
<dd><p>The restricted class. </p></dd>
<dt><em>outRestrictions</em></dt>
<dd><p>A pointer to a long integer holding
flags that indicate individual restrictions. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>If you have no restrictions, the flags returned will be 0.
If class is not available, it won&#8217;t return an error, but restrictions
will be set to 0. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTCreateUUID" title="QTCreateUUID"></a><a name="//apple_ref/doc/c_ref/QTCreateUUID" title="QTCreateUUID"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTCreateUUID" title="QTCreateUUID"></a>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_107"></a><h3 class="tight">QTCreateUUID</h3>
<p class="spaceabove">Creates a universal unique (UUID)128-bit number. </p>
<p class="spaceabove"><pre>
OSErr QTCreateUUID (
   <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTUUID" target="_top">QTUUID</a> * outUUID,
   long creationFlags);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>outUUID</em></dt>
<dd><p>A pointer to the unique universal 128-bit
number.</p></dd>
<dt><em>creationFlags</em></dt>
<dd></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is used to create a universal unique identifier. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/c/func/QTEqualUUIDs" title="QTEqualUUIDs"></a><a name="//apple_ref/doc/c_ref/QTEqualUUIDs" title="QTEqualUUIDs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-QTEqualUUIDs" title="QTEqualUUIDs"></a>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_108"></a><h3 class="tight">QTEqualUUIDs</h3>
<p class="spaceabove">Compares two 128-bit numbers. </p>
<p class="spaceabove"><pre>
<!--a-->Boolean<!--/a--> QTEqualUUIDs (const <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTUUID" target="_top">QTUUID</a> * uuid1,
   const <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTUUID" target="_top">QTUUID</a> *uuid2);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>uuid1</em></dt>
<dd><p>A pointer to the first 128-bit number. </p></dd>
<dt><em>uuid2</em></dt>
<dd><p>A pointer to the second 128-bit number.</p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is used to compare two universal unique identifiers. </p>
<p>Introduced in QuickTime 6.</p>
<p>C interface file: <code>Movies.h</code></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>Movies.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-232354" title="New APIs For Controlling Memory Usage in Movies"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF262" title="New APIs For Controlling Memory Usage in Movies"></a><h2>New APIs For
Controlling Memory Usage in Movies</h2>
<p>QuickTime 6 introduces new APIs for applications that want
to exercise very fine-grained control over how memory is used by
movies. Most applications, however, will not need to use these APIs,
which were first introduced in Mac OS X 10.1, and only work in Mac
OS X. </p>
<p>On Mac OS 9, collections of media data (called chunks) that
were recently used are, under certain conditions, allowed to persist
in handles in the application heap with the &#8220;purgeable&#8221; flag
set. If the memory manager needs to reclaim their memory for other purposes,
those handles are automatically emptied. If QuickTime needs the
chunks again before they are emptied, it simply clears the purgeable
flag and uses them, avoiding the need to reload the data.</p>
<p>The Mac OS X Carbon Memory Manager does not currently implement
the purgeable flag, relying instead on the virtual memory system.
However, the concept of a &#8220;purgeable chunk&#8221; is still valuable
for QuickTime, since it identifies chunks that were recently needed and
may be needed again in the near future (perhaps depending on user
action). In Mac OS X 10.1 and later, QuickTime keeps track of purgeable
chunks. If the total amount of memory occupied by them exceeds a
per-application threshold called the purgeable chunk memory allowance,
QuickTime empties chunks until the total size is under it. This behavior
can be turned on and off using the <code>MediaSetChunkManagementFlags</code> function,
and the allowance can be configured using the <code>MediaSetPurgeableChunkMemoryAllowance</code> function.
Should you want to force QuickTime to empty all purgeable chunks,
you can call the <code>MediaEmptyAllPurgeableChunks</code> function.</p>
<a name="//apple_ref/c/func/MediaSetChunkManagementFlags" title="MediaSetChunkManagementFlags"></a><a name="//apple_ref/doc/c_ref/MediaSetChunkManagementFlags" title="MediaSetChunkManagementFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaSetChunkManagementFlags" title="MediaSetChunkManagementFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_109"></a><h3 class="tight">MediaSetChunkManagementFlags</h3>
<p class="spaceabove">Sets application-global flags controlling chunk management. </p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult MediaSetChunkManagementFlags (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,
UInt32 flags,
UInt32 flagsMask);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>Currently the only flag is <code>kEmptyPurgableChunksOverAllowance</code>,
which is <code>TRUE</code> by default.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/c/func/MediaGetChunkManagementFlags" title="MediaGetChunkManagementFlags"></a><a name="//apple_ref/doc/c_ref/MediaGetChunkManagementFlags" title="MediaGetChunkManagementFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaGetChunkManagementFlags" title="MediaGetChunkManagementFlags"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_110"></a><h3 class="tight">MediaGetChunkManagementFlags</h3>
<p class="spaceabove">Returns the current settings of chunk management flags.</p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult MediaGetChunkManagementFlags (
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,
UInt32 *flags);
</pre></p>
<h5 class="tight">Version Notes</h5>
<p>WARNING - Do not call this function under QuickTime 5.0.x.
It could cause a crash.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/c/func/MediaSetPurgeableChunkMemoryAllowance" title="MediaSetPurgeableChunkMemoryAllowance"></a><a name="//apple_ref/doc/c_ref/MediaSetPurgeableChunkMemoryAllowance" title="MediaSetPurgeableChunkMemoryAllowance"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaSetPurgeableChunkMemoryAllowance" title="MediaSetPurgeableChunkMemoryAllowance"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_111"></a><h3 class="tight">MediaSetPurgeableChunkMemoryAllowance</h3>
<p class="spaceabove">Configures the maximum amount of memory that QuickTime
will allow purgeable chunks to occupy. </p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult MediaSetPurgeableChunkMemoryAllowance (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Size" target="_top">Size</a> allowance);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This routine configures the maximum amount of memory that
QuickTime will allow purgeable chunks to occupy. This is an application-global
setting.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/c/func/MediaGetPurgeableChunkMemoryAllowance" title="MediaGetPurgeableChunkMemoryAllowance"></a><a name="//apple_ref/doc/c_ref/MediaGetPurgeableChunkMemoryAllowance" title="MediaGetPurgeableChunkMemoryAllowance"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaGetPurgeableChunkMemoryAllowance" title="MediaGetPurgeableChunkMemoryAllowance"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_112"></a><h3 class="tight">MediaGetPurgeableChunkMemoryAllowance</h3>
<p class="spaceabove">Returns the current purgeable chunk memory allowance.</p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult MediaGetPurgeableChunkMemoryAllowance (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh,
<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Size" target="_top">Size</a> *allowance);
</pre></p>
<h5 class="tight">Discussion</h5>
<p>This routine returns the current purgeable chunk memory allowance.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/c/func/MediaEmptyAllPurgeableChunks" title="MediaEmptyAllPurgeableChunks"></a><a name="//apple_ref/doc/c_ref/MediaEmptyAllPurgeableChunks" title="MediaEmptyAllPurgeableChunks"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-MediaEmptyAllPurgeableChunks" title="MediaEmptyAllPurgeableChunks"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_113"></a><h3 class="tight">MediaEmptyAllPurgeableChunks</h3>
<p class="spaceabove">Forces QuickTime to empty all purgeable chunks in this
application.</p>
<p class="spaceabove"><pre>
<!--a-->pascal<!--/a--> ComponentResult MediaEmptyAllPurgeableChunks (<a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/MediaHandler" target="_top">MediaHandler</a> mh);
</pre></p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.2 and later.</li></ul><h5 class="tight">Declared In</h5><code>MediaHandlers.h</code>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-232753" title="Miscellaneous Changes and Enhancements"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF263" title="Miscellaneous Changes and Enhancements"></a><h2>Miscellaneous
Changes and Enhancements</h2>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-232762" title="Change For All Video Output Components"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF264" title="Change For All Video Output Components"></a><h3>Change For All
Video Output Components</h3>
<p>In QuickTime 6 and later, all video output components which
support the <code>SetEchoPort</code> call should
call <code>QTVideoOutputBaseSetEchoPort</code> on
the base video output component to inform it about the change in
echo port.</p>
<div class="codesample"><table><tr><td scope="row"><pre>ComponentResult QTVideoOutputBaseSetEchoPort (<span></span></pre></td></tr><tr><td scope="row"><pre>                                            QTVideoOutputComponent vo,<span></span></pre></td></tr><tr><td scope="row"><pre>                                            CGrafPtr echoPort);<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-232797" title="QuickTime VR"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF265" title="QuickTime VR"></a><h3>QuickTime VR</h3>
<p>Two performance enhancements to QuickTime VR:</p>
<ul class="spaceabove"><li class="li"><p>Cubic previews are generated correctly in Export
to Fast Start QTVR. </p></li>
<li class="li"><p>Preview now comes in faster for cubics. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-232825" title="New QuickTime Menu in Windows"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF266" title="New QuickTime Menu in Windows"></a><h3>New QuickTime
Menu in Windows</h3>
<p>There is a new QuickTime menu in the Windows system tray.
The menu includes the following items in QuickTime 6:</p>
<ul class="spaceabove"><li class="li"><p>About QuickTime -&gt; Opens the About QuickTime
control panel</p></li>
<li class="li"><p>QuickTime Website -&gt; Opens the Apple QuickTime website</p></li>
<li class="li"><p>QuickTime Preferences -&gt; Opens Browser Plug-in control
panel</p></li>
<li class="li"><p>QuickTime Info -&gt; Launches QTInfo</p></li>
<li class="li"><p>Open QuickTime Player -&gt; Launches QuickTime Player</p></li>
<li class="li"><p>Open Picture Viewer -&gt; Opens picture viewer</p></li>
<li class="li"><p>Check for QuickTime Updates -&gt; Opens Browser Plug-in control
panel</p></li>
<li class="li"><p>Favorites -&gt; Lists a hierarchical menu with your favorites</p></li>
<li class="li"><p>Open Recent -&gt; Opens recently opened items </p></li>
<li class="li"><p>Exit QuickTime Task -&gt; Quits qttask</p></li></ul>
<p>There is also a new item in the control panel: a QuickTime
system tray icon. If unchecked, the tray icon will never appear.
If you choose to exit from the menu, it will exit, and when you
reboot your computer, it will reappear. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233019" title="New Movie Errors API"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF267" title="New Movie Errors API"></a><h3>New Movie Errors
API</h3>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-NewMovieErrorsAPI" title="New Movie Errors API"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_114"></a><h3 class="tight">New Movie Errors API</h3>
<p class="spaceabove">Adds orthogonal errors to a list of errors.</p>
<p class="spaceabove"><pre>
   QTAddMovieError(
   <a href="../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/Movie" target="_top">Movie</a> addTo,
   <!--a-->Component<!--/a--> adder,
   long errorCode,
   <a href="../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/QTErrorReplacementPtr" target="_top">QTErrorReplacementPtr</a> stringReplacements);
</pre></p>
<h5 class="tight">Parameters</h5><dl class="termdef">
<dt><em>addTo</em></dt>
<dd><p>The movie to add error to.</p></dd>
<dt><em>adder</em></dt>
<dd><p>The component which is adding the error. </p></dd>
<dt><em>errorCode</em></dt>
<dd><p>The error code being added. </p></dd>
<dt><em>stringReplacements</em></dt>
<dd><p>The list of strings to substitute (in
order) for &quot;^1&quot;, &quot;^2&quot;, etc. </p></dd></dl>
<h5 class="tight">Discussion</h5>
<p>This routine is used to add orthogonal errors to a list of
errors that will later be reported (at the end of an import or playback,
for example). Errors are stored in <code>'qter'</code> resources
within the component.</p>
<p>The <code>'qter'</code> resource
format is defined as follows:</p>
<div class="codesample"><table><tr><td scope="row"><pre>type 'qter' {<span></span></pre></td></tr><tr><td scope="row"><pre>    longint = $$Countof(ErrorSpec);<span></span></pre></td></tr><tr><td scope="row"><pre>    wide array ErrorSpec {<span></span></pre></td></tr><tr><td scope="row"><pre>    longint; // error code used to find this error<span></span></pre></td></tr><tr><td scope="row"><pre>    longint // error type<span></span></pre></td></tr><tr><td scope="row"><pre>        kQuickTimeErrorNotice = 1,<span></span></pre></td></tr><tr><td scope="row"><pre>        kQuickTimeErrorWarning = 2,<span></span></pre></td></tr><tr><td scope="row"><pre>        kQuickTimeErrorError = 3;<span></span></pre></td></tr><tr><td scope="row"><pre>// In the following strings, ^FILENAME, ^APPNAME, ^0, ^1, etc will be<span></span></pre></td></tr><tr><td scope="row"><pre>// replaced as appropriate.<span></span></pre></td></tr><tr><td scope="row"><pre>    pstring; // main error string<span></span></pre></td></tr><tr><td scope="row"><pre>    pstring; // explanation error string<span></span></pre></td></tr><tr><td scope="row"><pre>    pstring; // technical string (not displayed<span></span></pre></td></tr><tr><td scope="row"><pre>             // to user except in debug cases)<span></span></pre></td></tr><tr><td scope="row"><pre>    align long;<span></span></pre></td></tr><tr><td scope="row"><pre>    };<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div>
<p>Introduced in QuickTime 6.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233230" title="MIDI Files Now Imported In Place"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF268" title="MIDI Files Now Imported In Place"></a><h2>MIDI Files Now
Imported In Place</h2>
<p>QuickTime can now import standard MIDI files &#8220;in place.&#8221;
The user is no longer required to provide a filename and create
a movie file when QuickTime opens a movie through QuickTime Player
or functions such as NewMovieFromFile. The import options&#8211;&#8211;adding silence
to the beginning or end, making the file QuickTime 2 compatible&#8211;&#8211;are
no longer available.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233252" title="Enabling High Quality on MPEG-4 Video Tracks"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF269" title="Enabling High Quality on MPEG-4 Video Tracks"></a><h2>Enabling High
Quality on MPEG-4 Video Tracks</h2>
<p>When High Quality is enabled on a MPEG-4 video track, QuickTime
will post-process the decoded frames.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233274" title="QuickTime XML Importers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF270" title="QuickTime XML Importers"></a><h2>QuickTime XML
Importers</h2>
<p>QuickTime XML importers create movies based on the contents
of certain kinds of XML files saved with the <code>.mov</code> file
extension. XML files with the <code>.mov</code> file
extension are treated by networks and operating systems as QuickTime
movies. For example, these XML files can be embedded in Web pages
for the QuickTime browser plug-in or double-clicked from the desktop
to invoke QuickTime Player. </p>
<p>Because XML is text-based, these XML files can be created
by any application that can output text, such as a text editor or
server-side script.</p>
<p>XML importers are invoked automatically when a <code>.mov</code> file
is opened in QuickTime Player, the QuickTime plug-in, or by other
applications (using functions such as <code>NewMovieFromFile</code> or <code>NewMovieFromDataRef</code>).
QuickTime automatically detects the XML header and reads the XML type.
If an importer is available for that XML type, QuickTime attempts
to  create a movie from it.</p>
<p>To work with QuickTime XML importers, XML files must have
the following initial syntax:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;xxxx/xxxx&quot;?&gt;<span></span></pre></td></tr></table></div>
<p>where <code>&quot;xxxx/xxxx&quot;</code> is
the XML type, such as <code>&quot;application/smil&quot;</code> or <code>&quot;application/x-quicktime-media-link&quot;</code>. </p>
<p>For the movie to open, the XML type must be one for which
a QuickTime XML importer is installed.</p>
<p>There are importers for three XML types currently built into
QuickTime.</p>
<ul class="ul"><li class="li"><p>SMIL importer</p></li>
<li class="li"><p>QuickTime media link importer</p></li>
<li class="li"><p>Component preflight importer</p></li></ul>
<p>Note that XML importers were introduced and initially documented
as part of QuickTime 5. This section provides more complete information
about their use and features.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233387" title="SMIL Importer"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF271" title="SMIL Importer"></a><h3>SMIL Importer</h3>
<p>The SMIL importer opens SMIL files (<code>.smil</code>)
that have a <code>.mov</code> file
extension or are delivered over a network with the video/quicktime
MIME type. This allows you to direct SMIL files to QuickTime for
display (files with the <code>.smil</code> extension
are commonly handled by multiple applications, and it is hard to
predict which one will be chosen by a given browser or operating
system). Note that the XML header information must be prepended
to the SMIL file:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/smil&quot;?&gt;<span></span></pre></td></tr></table></div>
<p>For more information about the QuickTime SMIL importer implementation,
and the logic behind this implementation, refer to</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/REF/QT41_HTML/QT41WhatsNew-13.html<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233444" title="QuickTime Media Link Importer"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF272" title="QuickTime Media Link Importer"></a><h3>QuickTime Media
Link Importer</h3>
<p>The QuickTime media link importer opens media link files (<code>.qtl</code>)
that have a <code>.mov</code> file extension
or video/quicktime MIME type. </p>
<p>QuickTime media link files contain a movie URL and an optional
set of parameters, such as loop and full-screen. When delivered
over a network, these files are normally directed to QuickTime Player,
bypassing the QuickTime browser plug-in because of their file extension
(<code>.smil</code>) and MIME type: <code>&quot;application/x-quicktimeplayer&quot;</code>.
Note that their MIME type is different from their XML type, which
is <code>&quot;application/x-quicktime-media-link&quot;</code>.</p>
<p>The XML importer for QuickTime media links allows you to open
these files using the QuickTime plug-in, because the file extension
and MIME type are now <code>.mov</code> and <code>&quot;video/quicktime&quot;</code>.
This allows you to specify a movie URL for the QuickTime plug-in
as part of an external text file which can be modified independently
of HTML or any movie. This can be a useful alternative to using
alternate movies or <code>SRC=</code> and <code>QTSRC=</code> . </p>
<p>When opened locally from the desktop, rather than over a network
or through a browser, both .mov and <code>.qtl</code> files
should open in QuickTime Player. The <code>.qtl</code> file
extension and MIME type are relatively new, however, and not all
Windows or Mac OS systems know what to do with a <code>.qtl</code> file.
Changing a file extension from <code>.qtl</code> to <code>.mov</code> can
solve this problem by way of the XML importer. </p>
<p>The syntax of QuickTime media link files is always:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/x-quicktime-media-link&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;embed src=&quot;URL&quot; /&gt;<span></span></pre></td></tr></table></div>
<p>The embed tag in a <code>.qtl</code> file
can contain additional parameters, such as loop and autoplay. It supports
only a few of the parameters that can be specified in the HTML embed
tag, however. If you are targeting the QuickTime plug-in, check
to be sure you haven&#8217;t included unsupported attributes, such as
volume.</p>
<p>Two supported <code>.qtl</code> parameters, <code>fullscreen</code> and <code>quitwhendone</code>,
are applicable only to QuickTime Player. The QuickTime plug-in ignores
them.</p>
<p>For more about QuickTime media links, refer to</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/REF/whatsnewqt5/Max.2b.htm<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233591" title="Component Preflight Importer"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF273" title="Component Preflight Importer"></a><h3>Component Preflight
Importer</h3>
<p>The component preflight importer works with files of XML type <code>&quot;application/x-qtpreflight&quot;</code>.
A component preflight XML file should always have the <code>.mov</code> file
extension and <code>&quot;video/quicktime&quot;</code> MIME
type. </p>
<p>You can use the component preflight importer to test for the
presence of specific QuickTime components. QuickTime will offer
to automatically download and install any that are needed. This
can be a useful filter if your website includes movies that use components
not included in the mimimal QuickTime installation or components introduced
in a recent release of QuickTime.</p>
<p>The syntax for a component preflight XML file is:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/x-qtpreflight&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;qtpreflight&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;component type=&quot;ctyp&quot; subtype=&quot;subt&quot;/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/qtpreflight&gt;<span></span></pre></td></tr></table></div>
<p>where &quot;ctyp&quot; and &quot;subt&quot; are the actual
four-character codes for a component&#8217;s type and subtype.</p>
<p>The first three lines are always the same. They let QuickTime
know that this is an XML file of type <code>qtpreflight</code>.
The last line is always the same. It closes the <code>&lt;qtpreflight&gt;</code> element.
In between is the list of components to check for. You can have
multiple <code>&lt;component /&gt;</code> elements
in your file, and QuickTime will test for all of them.</p>
<p>For example, here&#8217;s an XML file that checks for the Sorenson
3 video decompressor and the QuickTime for Java component:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version=&quot;1.0&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;?quicktime type=&quot;application/x-qtpreflight&quot;?&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;qtpreflight&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;component type=&quot;imdc&quot; subtype=&quot;SVQ3&quot;/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;component type=&quot;null&quot; subtype=&quot;qtj &quot;/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/qtpreflight&gt;<span></span></pre></td></tr></table></div>
<p>Note that the type and subtype are four-character codes. They
are case-sensitive and a blank space is a significant character.
These values must be exactly four characters long, including any
spaces.</p>
<p>If any specified components are missing, QuickTime will check
to see if they are available for download on Apple&#8217;s servers.
QuickTime will then open a dialog box, either offering to download
and install the missing components or informing the user that the
software QuickTime needs in order to play this movie is not available.</p>
<p>All Apple-supplied components, and all approved third-party
download components, are available on the Apple servers. An &#8220;unavailable
software&#8221; dialog box is normally the result of an incorrect type
or subtype code, or use of a third-party component not registered
with Apple. </p>
<p>Components are typically packaged in groups for download.
If a component is needed, its parent package is downloaded and installed.
For example, the text importer is currently part of the authoring
package, so all the authoring components are downloaded and installed
if the text importer is needed. While you need to be aware of this,
you should not assume that any particular component will be downloaded
because another is. The organization and content of download packages
is subject to periodic change. It&#8217;s a good idea to test for all
the components that you need. Don&#8217;t worry; if you specify several components
in the same package, the package downloads only once.</p>
<p>Typical content creators and website developers have no easy
way to determine which components their movies rely on. An application
that took a movie or folder of movies as input, and produced a list
of required components as an output, would be useful for this purpose,
but as of this writing no such application is available.</p>
<p>Following is a list of some components that you might want
to check for. Note that the type field identifies the kind of operation
the component performs, and the subtype generally identifies the
kind of data it operates on. For example, all image decompressors
are of type &quot;<code>imdc</code>&quot;,
and all image compressors are of type &quot;<code>imco</code>&quot;.
A JPEG compressor or decompressor is of subtype &quot;<code>jpeg</code>&quot;,
while a Sorenson 3 compressor or decompressor is of subtype <code>&quot;SVQ3&quot;</code>.</p>
<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Component</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Type </p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Subtype</p></th>
</tr>


<tr>
<td  scope="row"><p>Sorenson 3 video</p></td>
<td ><p><code>&quot;imdc&quot;</code></p></td>
<td ><p><code>&quot;SVQ3&quot;</code></p></td>
</tr>
<tr>
<td  scope="row"><p>QDesign Music 2 audio</p></td>
<td ><p><code>&quot;sdec&quot;</code></p></td>
<td ><p><code>&quot;QDM2</code></p></td>
</tr>
<tr>
<td  scope="row"><p>MPEG-4 video</p></td>
<td ><p><code>&quot;imdc&quot;</code></p></td>
<td ><p><code>&quot;mp4v&quot;</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Lens Flare effect</p></td>
<td ><p><code>&quot;imdc&quot;</code></p></td>
<td ><p><code>&quot;lens&quot;</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Blur effect (effects generally)*</p></td>
<td ><p><code>&quot;imdc&quot;</code></p></td>
<td ><p><code>&quot;blur&quot;</code></p></td>
</tr>
<tr>
<td  scope="row"><p>Text importer*</p></td>
<td ><p><code>&quot;eat &quot;</code></p></td>
<td ><p><code>&quot;TEXT&quot;</code></p></td>
</tr>
<tr>
<td  scope="row"><p>MIDI or QuickTime Music*</p></td>
<td ><p><code>&quot;mhlr&quot;</code></p></td>
<td ><p><code>&quot;musi&quot;</code></p></td>
</tr>
<tr>
<td  scope="row"><p>ZyGoVideo video*</p></td>
<td ><p><code>&quot;imdc&quot;</code></p></td>
<td ><p><code>&quot;ZyGo&quot;</code></p></td>
</tr>
<tr>
<td  scope="row"><p>QuickTime for Java*</p></td>
<td ><p><code>&quot;null&quot;</code></p></td>
<td ><p><code>&quot;qtj &quot;</code></p></td>
</tr>

</table></div>
<p>*Not in minimum installation</p>
<p>The component preflight importer opens an empty movie. The
user is unlikely to know what to do with this, so it&#8217;s best to
open it in an unobtrusive place. One good solution is to embed it
in a Web page in a 2-pixel by 2-pixel rectangle, which is effectively
invisible.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_18" title="Note"></a><p><strong>Note:</strong>&nbsp;The dialog boxes
do not rely on the height and width allocated to the plug-in on
a Web page, so loading the empty movie in a 2 x 2 rectangle does
not affect them.</p></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-233933" title="Writing XML Importers"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF274" title="Writing XML Importers"></a><h3>Writing XML Importers</h3>
<p>It is certainly possible to write your own XML import components.
Documentation on this is forthcoming. </p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-234190" title="New XML Exporter "></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF275" title="New XML Exporter "></a><h2>New XML Exporter </h2>
<p>QuickTime 6 introduces a new XML exporter&#8211;&#8211;Export to QuickTime
Media Link&#8211;&#8211;which creates a small XML file that contains the
URL of a movie. The file may also contain additional user settings. </p>
<p>XML exporters create various kinds of XML files based on the
contents of a movie. The XML file created may also contain information
specific that is to the exporter or to user settings obtained through
a dialog.</p>
<p>The XML file created by the exporter can be treated as a QuickTime
movie. When the file is opened by QuickTime, QuickTime parses the
XML, attempts to open the movie specified in the src field, then
play it using the specified settings.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-234214" title="How It Works"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF276" title="How It Works"></a><h3>How It Works</h3>
<p>The QuickTime media link exporter creates an XML file of type <code>&quot;application/x-quicktime-media-link&quot;</code>.
This is a <code>.qtl</code> file of
MIME type <code>&quot;application/x-quicktimeplayer&quot;</code>.
Note that the XML type and the MIME type are not the same. The MIME
type and file extension are used by browsers and operating systems
to determine what application or plug-in should be used to handle
a file. The XML type tells QuickTime what kind of data the file
contains.</p>
<p>You can rename a QuickTime media link file by changing the
file extension from <code>.qtl</code> to <code>.mov</code>. This
changes the MIME and file types, but not the XML type.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_19" title="Note"></a><p><strong>Note:</strong>&nbsp;A <code>.qtl</code> file
is always handled by the QuickTime Player application, whereas a <code>.mov</code> file
is typically handled by the QuickTime browser plug-in when the file
is embedded in a Web page, and handled by QuickTime Player when
double-clicked from the desktop. </p></div>
<p>For more information about <code>.qtl</code> files,
see &#8220;What&#8217;s New in QuickTime 5&#8221; available at</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/REF/whatsnewqt5/Max.htm<span></span></pre></td></tr></table></div>
<p>and &#8220;New QuickTime Media Links XML Importer&#8221; at </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/REF/whatsnewqt5/Max.2b.htm#pgfId=93760.<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-234317" title="Media Link Exporter Settings"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF277" title="Media Link Exporter Settings"></a><h3>Media Link Exporter
Settings</h3>
<p>The QuickTime media link exporter includes the following settings: </p>
<ul class="spaceabove"><li class="li"><p>src (movie URL or path and filename)</p></li>
<li class="li"><p>movie name </p></li>
<li class="li"><p>movie ID</p></li>
<li class="li"><p>sound volume</p></li>
<li class="li"><p>full-screen mode</p></li>
<li class="li"><p>looping</p></li>
<li class="li"><p>autoplay</p></li>
<li class="li"><p>play every frame</p></li>
<li class="li"><p>kiosk mode (disallow saving)</p></li>
<li class="li"><p>controller</p></li>
<li class="li"><p>quit when done (exits QuickTime Player)</p></li>
<li class="li"><p>qtnext (the movie to play next)</p></li>
<li class="li"><p>href (URL to open if a user clicks the movie) </p></li></ul>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-234400" title="Using the Media Link Exporter"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF278" title="Using the Media Link Exporter"></a><h3>Using the Media
Link Exporter</h3>
<p>You can access the media link exporter by choosing Export
from the File menu in QuickTime Player, then choosing Movie to QuickTime
Media Link. You can either click Save, which creates an XML file
with the default settings, or click the Options button to specify
the settings yourself. (Note that Export from QuickTime Player requires QuickTime
Pro.)</p>
<p>The QuickTime Media Link Settings dialog is shown in <span class="content_text"><a href="QT6WhatsNew.html#//apple_ref/doc/uid/TP40000937-CH1g-234422">Figure 1-15</a></span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40000937-CH1g-234422" title="Figure 1-15The QuickTime Media Link Settings dialog in QuickTime Player"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF117" title="Figure 1-15The QuickTime Media Link Settings dialog in QuickTime Player"></a><p><strong>Figure 1-15&nbsp;&nbsp;</strong>The QuickTime Media Link Settings
dialog in QuickTime Player</p><img src = "../Art/media_link_settings.gif" alt = "" width="541" height="479"></div><br/>
<ul class="spaceabove"><li class="li"><p>URL field. You can change the URL if you plan
to put the movie on a different server or if you want the XML file
to specify a different movie.</p></li>
<li class="li"><p>Type field. This allows you to override the XML type. You
might do this if you were writing your own XML importer, but ordinarily
this field should be left blank.</p></li>
<li class="li"><p>Name and ID fields. These allow you to specify a movie name
and movie id. Note that the movie name is not the filename of the
movie.</p></li>
<li class="li"><p>Volume slider. This allows you to set the movie sound volume,
from 0 to 100%.</p></li>
<li class="li"><p>Fullscreen. This pop-up menu lets you set any of the full-screen
modes: half, normal, double, current, and full.</p></li>
<li class="li"><p>Loop. This pop-up menu lets you set the looping mode.</p></li></ul>
<p>There are checkboxes for Autoplay, Play every frame, Kiosk
mode, Controller, and Quit when done.</p>
<p>You can enter URLs in the text fields provided for QT Next
(the movie to play after this one) and HREF (the URL to load if
a user clicks the movie). </p>
<p>URLs are relative to the movie specified in the src field. </p>
<p>The Output Defaults checkbox writes the values of all settings
to the XML file, even if they are the same as the system defaults.
In most cases, however, this has no effect, because not specifying
a setting results in the system default. </p>
<p>The notable exception is the autoplay setting. A movie with
no autoplay setting may or may not autoplay, depending on the user
selection in the QuickTime Settings panel. If you want to be sure
that a movie will never autoplay, you should select Output Defaults
so that <code>autoplay=&quot;false&quot;</code> will
be set explicitly in the XML file. If you set <code>autoplay=&quot;true&quot;</code> it
will be set in the XML file regardless of the Output Defaults setting.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-234504" title="Default Settings"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF279" title="Default Settings"></a><h3>Default Settings</h3>
<p>By default the src field is set to either the URL or the path
and filename of the current movie. If you open a movie using a URL
data reference (&#8220;Open URL&#8221; in QuickTime Player), the XML file
contains the movie URL. If you open a movie using a file data reference
(&#8220;Open&#8221; in QuickTime Player), the URL contains a path and filename.</p>
<p>The XML user settings default to the settings currently stored
in the movie, which may not correspond to the current selections
in a running application. An application may maintain user settings
in transient memory, storing them in the movie only when saving.
For example, changing the loop setting in QuickTime Player will
not change the exported loop setting unless you save the movie before
exporting. </p>
<p>Applications developers may want to copy all user settings
into the movie&#8217;s user data atom before performing an export. All
the settings except qtnext can be set by applications using the
QuickTime API. See The QuickTime File Format for additional information
about Movie User Data, available at</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/QTFF/qtff.html<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_20" title="Note"></a><p><strong>Note:</strong>&nbsp;User settings
can also be stored in a movie using AppleScript.</p></div>
<p>Some settings can also be stored using QuickTime Player (volume,
loop, autoplay, and play every frame).</p>
<p>By default, the XML file contains only user settings that
have a value different from QuickTime&#8217;s defaults. For example,
a movie with no specified user settings has a controller and a volume
of 100%. By default, settings matching these defaults are not included
in the XML file. The XML file would specify the controller only
if it were false and volume only if it were not 100%. </p>
<p>By default, the following settings are not included in the
XML file if their values are as shown:</p>
<div class="codesample"><table><tr><td scope="row"><pre>autoplay=&quot;false&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>controller=&quot;true&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>kioskmode=&quot;false&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>loop=&quot;false&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>playeveryframe=&quot;false&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>quitwhendone=false&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>volume=&quot;100&quot;<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-234611" title="MovieQTList Embed Tag Attribute"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF280" title="MovieQTList Embed Tag Attribute"></a><h2>MovieQTList Embed
Tag Attribute</h2>
<p>QuickTime movies can contain structured data in QTList format.
A QTList has a user-defined structure, much like a database or an
XML file. QuickTime 5 and later include wired actions that allow
a movie to parse a QTList and take actions based on the contents. For
example, a QTList can contain a list of audio files, and the movie
can load and play songs from the list based on user selections.</p>
<p>QuickTime movies can read a properly structured XML file into
a QTList, or exchange XML-structured data between a QTList and a
server. This enables a QuickTime movie to act as the front end of
a database, for example, allowing the user to view or modify records stored
on a remote server.</p>
<p>A QuickTime movie can have one QTList for the movie as a whole,
as well as one for each track in the movie.</p>
<p>QuickTime 6 adds a <code>MovieQTList</code> parameter
that allows you to pass data into the movie-level QTList directly
from HTML. This lets you specify the default contents of the movie
QTList as part of your Web page. Combined with either JavaScript
or a server-side script, this enables you to dynamically pass data
into a movie when it is opened in a browser.</p>
<p>The <code>MovieQTList</code> parameter
is used in the <code>EMBED</code> and <code>OBJECT</code> tags
of your Web pages. For example: </p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;OBJECT CLASSID=&quot;clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        CODEBASE=&quot;http://www.apple.com/qtactivex/qtplugin.cab&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        WIDTH=&quot;xx&quot; HEIGHT=&quot;yy&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;PARAM NAME=&quot;src&quot; VALUE=&quot;my.mov&quot; /&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;PARAM NAME=&quot;MovieQTList&quot; VALUE=<span></span></pre></td></tr><tr><td scope="row"><pre>        &quot;&lt;myDataBase&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;myRecord&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;lastname&gt;Bailey&lt;/lastname&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;firstname&gt;Bill&lt;/firstname&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>                &lt;phone&gt;555-1212&lt;/phone&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/myRecord&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>         &lt;/myDataBase&gt;&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;Embed src=my.mov<span></span></pre></td></tr><tr><td scope="row"><pre>    height=yy width=xx<span></span></pre></td></tr><tr><td scope="row"><pre>    MovieQTList=<span></span></pre></td></tr><tr><td scope="row"><pre>&quot;&lt;myDataBase&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;myRecord&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;lastname&gt;Bailey&lt;/lastname&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;firstname&gt;Bill&lt;/firstname&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;phone&gt;555-1212&lt;/phone&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/myRecord&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/myDataBase&gt;&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>/&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/OBJECT&gt;<span></span></pre></td></tr></table></div>
<p>Note that the XML data is just data&#8211;&#8211;there is no XML header
or meta-information.</p>
<p>Most recent browsers can handle the HTML in the example above,
ignoring all the angle brackets and forward slashes because they
occur between quotes. Some older browsers may become confused, however,
and terminate the <code>PARAM</code> or <code>EMBED</code> tag
at the first &quot;&gt;&quot; in the <code>MovieQTList</code> parameter
value. You can prevent this by constructing the QTList data using JavaScript. </p>
<p>For example:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;script language=&quot;JavaScript&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    embedTag = '  &lt;embed'<span></span></pre></td></tr><tr><td scope="row"><pre>        + ' src=\&quot;my.mov\&quot;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + ' height=yy width=xx'<span></span></pre></td></tr><tr><td scope="row"><pre>        + ' MovieQTList='<span></span></pre></td></tr><tr><td scope="row"><pre>        + '  \&quot;&lt;myDataBase&gt;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + '    &lt;myRecord&gt;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + '      &lt;lastname&gt;Bailey&lt;/' + 'lastname&gt;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + '      &lt;firstname&gt;Bill&lt;/' + 'firstname&gt;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + '      &lt;phone&gt;555-1212&lt;/' + 'phone&gt;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + '    &lt;/' + 'myRecord&gt;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + '  &lt;/' + 'myDataBase&gt;\&quot;'<span></span></pre></td></tr><tr><td scope="row"><pre>        + ' /' + '&gt;;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    document.writeln(embedTag);<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/script&gt;<span></span></pre></td></tr></table></div>
<p>To use the <code>MovieQTList</code> parameter,
you typically add a set of wired actions to your movie (using either
the QuickTime API or a QuickTime editing program such as LiveStage
Pro) that use properties of a QTList. An example would be loading
a child movie using a URL from the movie QTList. You would then
format the data you wish to pass in your HTML so that it conforms
both to proper XML syntax and to the structure of your QTList.</p>
<p>The <code>MovieQTList</code> parameter
creates a movie QTList if the movie does not contain one already. If
the movie does contain a movie QTList, the <code>MovieQTList</code> parameter
values overwrite the existing list. This allows you to create a
movie that contains a default list to be used when the movie is
viewed outside your Web pages. </p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_21" title="Important:"></a><p><strong>Important:</strong>&nbsp;
Test your HTML carefully. No error message is displayed
if the data is incorrectly formatted for XML or fails to match the
structure of your QTList.</p><p></p></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-234772" title="SMIL Meta Tag Support in QuickTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF281" title="SMIL Meta Tag Support in QuickTime"></a><h2>SMIL Meta Tag
Support in QuickTime</h2>
<p>SMIL meta tag support was introduced and initially documented
as part of QuickTime 5. This section provides more complete information
about the properties defined in the SMIL 1.0 specification and those
defined by QuickTime. </p>
<p>In a SMIL document, a set of meta elements can be used to
define properties of the document, such as author, expiration date,
a list of keywords, and so on, and assign values to those properties.
Each meta element specifies a single property/value pair.</p>
<p>The following is an example of a meta element:</p>
<div class="codesample"><table><tr><td scope="row"><pre>    &lt;meta name= "foo" content="35"/&gt;<span></span></pre></td></tr></table></div>
<p>The name attribute identifies the property defined in this
meta element. The content attribute specifies the value of the property.
These two attributes are required. The id and the skip-content attributes
are also allowed in a meta element. (For more details on these attributes,
you should refer to the SMIL 1.0 specification.) </p>
<p>When a SMIL document is imported into QuickTime, properties
defined through the meta elements are converted into movie user
data items some of which are accessible through the movie property
window in QuickTime Player. The properties defined in the SMIL 1.0 and
those QuickTime defines are listed below. </p>
<p>Properties defined in SMIL 1.0: </p>
<ul class="ul"><li class="li"><p><code>base</code> </p></li></ul>
<p>The value of this property determines the base URI for all
relative URIs used in the document. The value given to this element
becomes a <code>&#8216;burl&#8217;</code> user
data item in the imported movie. QuickTime uses the value as the
base URL in resolving relative URLs it encounters in the movie.</p>
<ul class="ul"><li class="li"><p><code>pics-label or PICS-Label</code> </p></li></ul>
<p>The value of this property specifies a valid rating label
for the document as defined by PICS. QuickTime currently does not
support this property.</p>
<ul class="ul"><li class="li"><p><code>title</code> </p></li></ul>
<p>The value of this property contains the title of the presentation.
The value of this property becomes <code>kUserDataName
(&#8216;name&#8217;)</code> user data item in the imported
movie. </p>
<p>Properties QuickTime defines: </p>
<ul class="ul"><li class="li"><p><code>name</code> </p></li></ul>
<p>The value of this property contains the name of the presentation.
The value of this property becomes <code>kUserDataName
(&#8216;name&#8217;)</code> user data item in the imported
movie. Note that both the name meta data and the title meta data
map into the same user data item.</p>
<ul class="ul"><li class="li"><p><code>full-name</code> </p></li></ul>
<p>The value of this property contains the title of the presentation.
The value of this property becomes <code>kUserDataTextFullName(&#8216;&#169;nam&#8217;)</code> user
data item in the imported movie. Note the value of this user data
item is displayed in the movie property window of QuickTime Player.</p>
<ul class="ul"><li class="li"><p><code>author</code> </p></li></ul>
<p>The value of this property contains the author of the presentation.
The value of this property becomes <code>kUserDataTextAuthor
(&#8216;&#169;aut&#8217;)</code> user data item in the imported
movie. Note the value of this user data item is displayed in the
movie property window of QuickTime Player.</p>
<ul class="ul"><li class="li"><p><code>copyright</code> </p></li></ul>
<p>The value of this property contains the author of the presentation.
The value of this property becomes <code>kUserDataTextCopyright
(&#8216;&#169;cpy&#8217;)</code> user data item in the imported
movie. Note the value of this user data item is displayed in the
movie property window of QuickTime Player.</p>
<ul class="ul"><li class="li"><p><code>information</code> </p></li></ul>
<p>The value of this property contains the author of the presentation.
The value of this property becomes <code>kUserDataTextInformation
(&#8216;&#169;inf&#8217;)</code> user data item in the imported
movie. Note the value of this user data item is displayed in the
movie property window of QuickTime Player.</p>
<ul class="ul"><li class="li"><p><code>qt-userdata-xxx</code> </p></li></ul>
<p>where <code>xxx</code> is appended
to a <code>&#8216;&#169;&#8217;</code> character
and interpreted as an annotation user data tag (or a user data text
tag). For example, <code>qt-userdata-swr</code> becomes
the <code>&#8216;&#169;swr&#8217;</code> user
data text item. The value of this property contains a piece of annotation
of the presentation. </p>
<p>For more details on user data text items, refer to</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/APIREF/SOURCESV/workingwithmovieuserdata.htm<span></span></pre></td></tr></table></div>
<p>A list of user data tags can be found at</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/techpubs/quicktime/qtdevdocs/APIREF/SOURCESIV/userdataidentifiers.htm<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235107" title="JavaScript Support for ActiveX, Netscape 6 and Mozilla"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF282" title="JavaScript Support for ActiveX, Netscape 6 and Mozilla"></a><h2>JavaScript Support
for ActiveX, Netscape 6 and Mozilla</h2>
<p>New in QuickTime 6, the QuickTime ActiveX control for Windows
is fully scriptable using JavaScript.</p>
<p>This means you can now use JavaScript to control QuickTime
when Web pages are viewed using Internet Explorer for Windows, or
any other browser that supports the COM interface to ActiveX controls. </p>
<p>Also new in QuickTime 6, the QuickTime browser plug-in is
scriptable using the XPCOM interface supported by Netscape 6 and
later and Mozilla 1.0.</p>
<p>This means you can now use JavaScript to control QuickTime
when Web pages are viewed using Netscape 6 or later, or browsers
based on Mozilla 1.0, on both Mac OS and Windows.</p>
<p>QuickTime is now scriptable from Web pages viewed using any
browser that supports JavaScript and any of the LiveConnect, XPCOM,
or COM interfaces. This includes most current browsers for Windows
and Macintosh, with the notable exception of Internet Explorer for
Macintosh, which does not allow scripting of plug-ins.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_22" title="Note"></a><p><strong>Note:</strong>&nbsp;The QuickTime
browser plug-in has been scriptable using the LiveConnect interface
since QuickTime 4.1, as documented in &#8220;What's New in QuickTime
4.1,&#8221; available at <code>&lt;http://developer.apple.com/techpubs/quicktime/qtdevdocs/REF/QT41_HTML/QT41WhatsNew-72.html&gt;</code>.
This allowed scripting by Netscape 4 and 5 on both Mac OS and Windows. </p></div>
<p>In summary: </p>
<ul class="ul"><li class="li"><p>QuickTime 4.1 is scriptable using Netscape 4
or 5 on Macintosh or Windows.</p></li>
<li class="li"><p>QuickTime 6 adds scriptability using most current browsers
on Windows and Macintosh, including:</p><ul class="nested"><li class="nested li"><p>Netscape
4 and later (including Netscape 6) on Macintosh and Windows</p></li>
<li class="nested li"><p>Mozilla 1.0 on Macintosh and Windows</p></li>
<li class="nested li"><p>Internet Explorer for Windows</p></li>
<li class="nested li"><p>AOL 5 and later for Windows</p></li>
<li class="nested li"><p>MSN 6</p></li></ul></li>
<li class="li"><p>Plug-ins are not scriptable using Internet Explorer for Macintosh. </p></li></ul>
<p>To control a movie through the QuickTime plug-in using JavaScript,
you must include the parameter <code>EnableJavaSript=&quot;true&quot;</code> in
the movie&#8217;s EMBED tag (this parameter is not needed in the OBJECT
tag, but it does no harm there).</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_23" title="Note"></a><p><strong>Note:</strong>&nbsp;You cannot query
or control QuickTime from JavaScript until the browser loads an
instance of the plug-in. For example, you can write a movie&#8217;s
EMBED tag using JavaScript, but you cannot use JavaScript to check
the QuickTime version before writing the tag. For this kind of interaction,
you must run the JavaScript from a page that already has an embedded
movie loaded; you can then write tags to other documents based on
QuickTime properties.</p></div>
<p>JavaScript treats each embedded QuickTime movie in a Web page
as a separately addressable object. Movies can be identified by
name if there is a NAME parameter in the movie&#8217;s EMBED tag and
an ID attribute in the movie&#8217;s OBJECT tag. Internet Explorer for Windows
uses the ID attribute. Other browsers use the NAME parameter. Both
NAME and ID should be set to the same value. </p>
<p>For example, to create a movie that can be addressed in JavaScript
as &quot;Movie1&quot;, your OBJECT and EMBED tags would look something
like this:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;OBJECT classid=&quot;clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    codebase=&quot;http://www.apple.com/qtactivex/qtplugin.cab&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    width=&quot;180&quot; height=&quot;160&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    id=&quot;movie1&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;PARAM name=&quot;src&quot; value=&quot;My.mov&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;EMBED width=&quot;180&quot; height=&quot;160&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        src=&quot;My.mov&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        name=&quot;movie1&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        enablejavascript=&quot;true&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/EMBED&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/OBJECT&gt;<span></span></pre></td></tr></table></div>
<p>Movies can also be identified by their ordinal number in the
JavaScript <code>embeds[]</code> array. </p>
<p>An example of usage and syntax, showing JavaScript control
of multiple QuickTime movies using different methods of addressing,
can be found in the &#8220;Sample JavaScript Usage&#8221; section of &#8220;What&#8217;s
New in QuickTime 4.1&#8221; at:</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/documentation/quicktime/REF/QT41_HTML/QT41WhatsNew-80.html<span></span></pre></td></tr></table></div>
<p>QuickTime exposes dozens of methods to JavaScript, allowing
you to control not only the standard user interface actions, such
as playing and stopping a movie, but also more complex actions,
such as layering and compositing. You can use JavaScript, for example, to
enable and disable alternate audio, text, or video tracks, or change
a video track&#8217;s graphics mode or a sprite's current image. </p>
<p>Detailed descriptions of the QuickTime methods and properties
available to JavaScript can be found in the &#8220;JavaScript Support&#8221;
section of &#8220;What&#8217;s New in QuickTime 4.1&#8221; at:</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/documentation/quicktime/REF/QT41_HTML/QT41WhatsNew-72.html<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_24" title="Note"></a><p><strong>Note:</strong>&nbsp;A bug in the
current version of Netscape 6 for Mac OS X causes it not to see
the QuickTime plug-in unless a file is copied from the OS X Internet
Plugins folder to the Netscape 6 components folder. The file is <code>&quot;nsIQTScriptablePlugin.xpt&quot;</code> and
the NS6 components folder is usually: /Applications/Mozilla1.0/Mozilla1.0.app/Contents/MacOS/Components/
After the file is copied, Netscape 6 must be told to refresh its
components list. This can be done either by deleting the<code> xpti.dat</code> file
and restarting Netscape, or by issuing the JavaScript command: <code>navigator.plugins.refresh()</code>. </p></div>
<p>This bug is marked as fixed for the next release of Netscape
and Mozilla.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235365" title="Playing Shoutcast or Icecast Streams in QuickTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF283" title="Playing Shoutcast or Icecast Streams in QuickTime"></a><h2>Playing Shoutcast
or Icecast Streams in QuickTime</h2>
<p>QuickTime 6 allows you to play current Shoutcast or Icecast
streams that use MP3 compression. This section discusses the various
features of Shoutcast and Icecast streams, as well as what you need
to know in order to deliver these streams in real-time over a network.
If you are a content author, multimedia producer, or Webmaster,
you should read this section.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235379" title="Background"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF284" title="Background"></a><h3>Background</h3>
<p>Shoutcast and Icecast use a modified form of http to deliver
MP3 audio in real-time over a network. This is a popular and inexpensive
way to deliver radio over the Internet. It is especially popular
with small broadcasters, as it does not require the server to have
a registered domain name, just an IP address. It can deliver a live
stream or a playlist of recordings. On a Macintosh, you can tune
into hundreds of these streams by clicking the radio tower button
in iTunes. There are also several Shoutcast players for Windows,
such as WinAmp.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235393" title="Shoutcast and Icecast in QuickTime"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF285" title="Shoutcast and Icecast in QuickTime"></a><h3>Shoutcast and
Icecast in QuickTime</h3>
<p>QuickTime 4 introduced support for playing Shoutcast and Icecast
streams from QuickTime Player, the QuickTime browser plug-in, and
QuickTime applications programs. Support for <code>.pls</code> playlists
was added as part of QuickTime 5. These features were never fully
documented, however, and recent changes to the Shoutcast/Icecast
protocol make current streams unplayable by these earlier versions
of QuickTime.</p>
<p>There are three ways to open an Icecast or Shoutcast stream
using QuickTime:</p>
<ol class="ol"><li class="li"><p>Use QuickTime Player to open a URL or a playlist. </p></li>
<li class="li"><p>Embed the URL of a stream or playlist in a Web page. </p></li>
<li class="li"><p>Open a URL or playlist from your application. </p></li></ol>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235435" title="Opening Icecast or Shoutcast URLs"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF286" title="Opening Icecast or Shoutcast URLs"></a><h3>Opening Icecast
or Shoutcast URLs</h3>
<p>Whether you are using QuickTime Player, the QuickTime browser
plug-in, or application code, you need to understand how QuickTime
handles Icecast and Shoutcast URLs.</p>
<p>The URL of a typical Icecast or Shoutcast stream takes the
form:</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://Server[/path] [/file]:port<span></span></pre></td></tr></table></div>
<p>or</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://Server/path/file.pls<span></span></pre></td></tr></table></div>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_25" title="Note"></a><p><strong>Note:</strong>&nbsp;The port number
is commonly in the 8000-8999 range, but it can be any port number
designated by the server.</p></div>
<p>Many Shoutcast and Icecast servers do not have their own domain
names. Consequently, the URL is commonly in the form:</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://nnn.nnn.nnn.nnn:XXXX<span></span></pre></td></tr></table></div>
<p>where <code>nnn.nnn.nnn.nnn</code> is
the IP address of the server, and <code>XXXX</code> is
the port number.</p>
<p>If the URL ends in a <code>.pls</code> filename,
you can open the stream using QuickTime just as you would for any
non-movie file that QuickTime can play (such as an <code>.aiff</code> file,
for example).</p>
<p>If the URL does not end in a .pls filename, you must change
the protocol from http:// to icy:// for QuickTime to recognize it
as an Icecast or Shoutcast stream. </p>
<p>For example, to access </p>
<div class="codesample"><table><tr><td scope="row"><pre>http://ItsReggae.com:8004<span></span></pre></td></tr></table></div>
<p>tell QuickTime to open </p>
<div class="codesample"><table><tr><td scope="row"><pre>icy://ItsReggae.com:8004<span></span></pre></td></tr></table></div>
<p>whereas to access</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.ItsReggae.com/listen.pls<span></span></pre></td></tr></table></div>
<p>just use the unmodified URL. </p>
<p>As an alternative to changing URLs to icy:// protocol, you
can create a local .pls playlist that lists one or more stream URLs.
These URLs do not need to be changed from http:// to icy://. The
fact that they reside in a <code>.pls</code> file
tells QuickTime all it needs to know.</p>
<p>Playlists take the format:</p>
<div class="codesample"><table><tr><td scope="row"><pre>[playlist]<span></span></pre></td></tr><tr><td scope="row"><pre>numberofentries=&lt;n&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>File1=&lt;uri&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>Title1=&lt;title&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>Length1=&lt;length or -1&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>File2=&lt;uri&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>Title2=&lt;title&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>Length2=&lt;length or -1&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr></table></div>
<p>The Title field is optional. </p>
<p>The Length field is either the length of the recording in
seconds or -1 (unspecified or live stream).</p>
<p>For example, for a single live stream, the <code>.pls</code> file
might look like this:</p>
<div class="codesample"><table><tr><td scope="row"><pre>[playlist]<span></span></pre></td></tr><tr><td scope="row"><pre>NumberOfEntries=1<span></span></pre></td></tr><tr><td scope="row"><pre>File1=http://itsreggae.com:8004/<span></span></pre></td></tr><tr><td scope="row"><pre>length=-1<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235668" title="Playing Icecast or Shoutcast Streams in QuickTime Player"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF287" title="Playing Icecast or Shoutcast Streams in QuickTime Player"></a><h3>Playing Icecast
or Shoutcast Streams in QuickTime Player</h3>
<p>Use the Open URL menu command to open a stream directly. Be
sure to change the URL protocol from http:// to icy:// as described
previously.</p>
<p>You can open a <code>.pls</code> file
from QuickTime player using the Open menu command, the Open URL
menu command, or by dragging and dropping.</p>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235691" title="Playing Icecast or Shoutcast Streams in the QuickTime Browser Plug-in"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF288" title="Playing Icecast or Shoutcast Streams in the QuickTime Browser Plug-in"></a><h3>Playing Icecast
or Shoutcast Streams in the QuickTime Browser Plug-in</h3>
<p>The QuickTime plug-in is not normally registered to handle
the icy:// protocol or <code>.pls</code> file type.
To direct a Shoutcast or Icecast stream to the QuickTime plug-in,
you must use the <code>QTSRC</code> parameter
in your EMBED tag. The <code>SRC</code> parameter
should point to a file that QuickTime is always registered for,
such as a <code>.qtif</code> (QuickTime
image) or <code>.mov</code> (QuickTime movie).
This file is downloaded by the browser, so it should be small, but
it is not displayed by QuickTime. QuickTime knows by the <code>QTSRC</code> parameter
that you want to play something else.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000937-CH1g-DontLinkElementID_26" title="Note"></a><p><strong>Note:</strong>&nbsp;The OBJECT tag
calls for the QuickTime plug-in explicitly, so the <code>QTSRC</code> parameter
is not required. You may want to include it, however, so that your
EMBED and OBJECT tags have the same parameters, or this may simply
occur if you use an automated tool that creates OBJECT tags from
your EMBED tags.</p></div>
<p>Here is an example of the HTML you would use to play a Shoutcast
or Icecast stream from a Web page using the QuickTime browser plug-in,
assuming the URL of the stream is &quot;http://itsreggae.com:8004/&quot; </p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;OBJECT CLASSID=&quot;clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>             CODEBASE=&quot;http://www.apple.com/qtactivex/qtplugin.cab&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>                    WIDTH=&quot;320&quot; HEIGHT=&quot;16&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;PARAM NAME=&quot;src&quot; VALUE=&quot;icy://itsreggae.com:8004&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre>                    &lt;PARAM NAME=&quot;autoplay&quot; VALUE=&quot;true&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;EMBED PLUGINSPAGE=&quot;http://www.apple.com/quicktime/download/&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>                    SRC=&quot;UNeedQT.qtif&quot; TYPE=&quot;image/x-quicktime&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>                    WIDTH=&quot;320&quot; HEIGHT=&quot;16&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>                    QTSRC=&quot;icy://itsreggae.com:8004&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>                    AUTOPLAY=&quot;true&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre>             &lt;/EMBED&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>            &lt;/OBJECT&gt;<span></span></pre></td></tr></table></div>
<p>As described previously, you must substitute the icy:// protocol
identifier for the http:// protocol in the URL of a Shoutcast or
Icecast stream.</p>
<p>No such substitution is required for (or inside) <code>.pls</code> files,
but you must still use the EMBED&#8217;s SRC parameter to direct the
browser to a QuickTime file, and the QTSRC parameter to pass the
actual file to QuickTime. The HTML is essentially identical to the
example just shown, substituting</p>
<div class="codesample"><table><tr><td scope="row"><pre>http://www.ItsReggae.com/listen.pls<span></span></pre></td></tr></table></div>
<p>for </p>
<div class="codesample"><table><tr><td scope="row"><pre>icy://itsreggae.com:8004<span></span></pre></td></tr></table></div>
<a name="//apple_ref/doc/uid/TP40000937-CH1g-235812" title="Playing Icecast or Shoutcast Streams Using the QuickTime API"></a><a name="//apple_ref/doc/uid/TP40000937-CH1g-TPXREF289" title="Playing Icecast or Shoutcast Streams Using the QuickTime API"></a><h3>Playing Icecast
or Shoutcast Streams Using the QuickTime API</h3>
<p>You can open an Icecast or Shoutcast stream, or a <code>.pls</code> playlist
file, from within QuickTime applications. The simplest method is
to use <code>NewMovieFromFile</code> or <code>NewMovieFromDataRef</code> to
create a playable movie from the file or stream. In the case of
a <code>.pls</code> file, the data
reference might be a file alias or a URL. In the case of a stream,
the data reference will normally be a URL.</p>
<p>Again, as described previously, you must substitute &quot;icy://&quot;
for &quot;http://&quot; in the URL of a stream. Do this only for
streams, not for <code>.pls</code> files.</p>
<p>This creates a movie with a streaming track. Play it as you
would any streaming movie.</p>
<p></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><!-- Next button --></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2002-07-01<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/QT6WhatsNew/Chap1/QT6WhatsNew.html%3Fid%3DTP40000937-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/QT6WhatsNew/Chap1/QT6WhatsNew.html%3Fid%3DTP40000937-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/QT6WhatsNew/Chap1/QT6WhatsNew.html%3Fid%3DTP40000937-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
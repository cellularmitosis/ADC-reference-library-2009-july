<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">

<HTML>

<HEAD>

   <TITLE>Serving WebObjects</TITLE>

   <META NAME="GENERATOR" CONTENT="Mozilla/3.01Gold (WinNT; I) [Netscape]">

</HEAD>

<body bgcolor="#ffffff">

<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->





<P><A HREF="ServingWebObjectsTOC.html"><IMG SRC="ArrowUp.gif" HEIGHT=20 WIDTH=20></A><A HREF="ServingWebObjectsTOC.html">Table

of Contents</A> <A HREF="Statistics.html"><IMG SRC="ArrowLeft.gif" HEIGHT=20 WIDTH=20></A><A HREF="Statistics.html">Previous

Section</A> <A NAME="5032"></A></P>



<H2>Performance Testing</H2>



<P><A NAME="5033"></A>The WebObjects package comes with a special adaptor

that allows you to record a session and a tool that helps you play back

a recorded session. Using these tools, you can test your application setup

to determine if you have the appropriate number of instances running, the

appropriate amount of memory allocated, and so on. </P>



<P><A NAME="5034"></A><B>Note: </B>You cannot use the recording and playback

tools on applications that use HTML frames. </P>



<P><A NAME="5035"></A>To use the recording and playback performance testing

tools, do the following:</P>



<P> </P>



<OL>

<P><A NAME="5036"></A></P>



<LI>Copy the adaptor <B>WebObjects-Recording</B> from <I>NeXT_ROOT</I><B>/NextLibrary/WOAdaptors/CGI

</B>to your web server's cgi-bin directory. <A NAME="5037"></A></LI>



<LI>Use the Monitor to create an instance of the application. <A NAME="5038"></A></LI>



<LI>Start the application instance you just created. To do so, open a command-shell

window and enter the command line as shown in the section &quot;<A HREF="ManualStarting.html#4941">Starting

Up Applications From the Command Line</A>.&quot; Use the <B>-n</B> option

(which must be used in conjunction with the <B>-a</B> option) to specify

the instance number. Also use the <B>-browser OFF</B> option so that the

application does not automatically launch in your web browser. For example,

your command line might look like this: </LI>



<PRE><A NAME="5042"></A>        MyApp -a WODefaultAdaptor -n instanceNumber -c -browser OFF 

</PRE>



<P><A NAME="5043"></A></P>



<LI>In your web browser, enter this URL: </LI>



<PRE><A NAME="5044"></A>http://localhost/cgi-bin/WebObjects-Recording/MyApp?file=<I>completePath</I>

</PRE>



<P><A NAME="5045"></A></P>



<P>where <I>completePath</I> is the directory in which you want to store

the recorded session. The adaptor appends a <B>.rec</B> extension to the

path you specify. </P>



<P><A NAME="5046"></A></P>



<LI>Using the web browser, run a session of your WebObjects application.

You may want to record what you believe to be a typical session, or you

may want to perform a session that would put a maximum load on your system.

For example, you may want to record a session that performs as many database

fetches as possible. <A NAME="5047"></A></LI>



<P><B>Important: </B>During recording, only one user may be accessing the

application. Your session must not include any backtracking to a previously

displayed page. If you backtrack, you'll get unpredictable results. </P>



<P><A NAME="5048"></A></P>



<P>As you run the application, the WebObjects recording adaptor records

each request and response to a separate file in the directory you specified.</P>



<P> <A NAME="5049"></A></P>



<LI>When you have finished the session, close the browser window. To prevent

accidental calls to the WebObjects-Recording adaptor, remove it from your

server's cgi-bin directory. <A NAME="5050"></A></LI>



<LI>Open a command shell window and enter this command: </LI>



<PRE><A NAME="5051"></A>        WOPlayback -R completePath.rec -H hostname

</PRE>



<P><A NAME="5052"></A></P>



<P>where <I>completePath</I><B>.rec</B> is the directory that contains

the recorded session and <I>hostname</I> is the name of the host on which

you want to run the recorded session. </P>



<P><A NAME="5053"></A></P>



<P>The WOPlayback tool plays the recorded session repeatedly until you

explicitly stop it (for example, by pressing Control-C in a command shell

window). It is possible to run several versions of WOPlayback at the same

time to put more load on the server. </P>

</OL>



<P><A NAME="5054"></A>If you want, you can specify other options to the

WOPlayback tool as well. The following is a list of the available options:</P>



<P> </P>



<DL>

<P><A NAME="5055"></A></P>



<DT>-P <I>http_port</I> <A NAME="5056"></A></DT>



<DD>The port number of your HTTP server (the default is 80). <A NAME="5057"></A></DD>



<DT>-C <I>count </I><A NAME="5058"></A></DT>



<DD>Plays back the session <I>count</I> number of times instead of indefinitely.

<A NAME="5059"></A></DD>



<DT>-S <I>sleep_time</I> <A NAME="5060"></A></DT>



<DD>The number of seconds to wait in between requests. The default is 0.

<A NAME="5061"></A></DD>



<DT>-p <I>adaptor_path</I> <A NAME="5062"></A></DT>



<DD>Sends request using the <I>adaptor_path</I> instead of the recorded

URL. For example, suppose you recorded a session using a Netscape server

whose cgi-bin directory is named <B>cgi-bin</B> and you want to play it

back using the Microsoft Internet Information Server, whose cgi-bin directory

is named <B>Scripts</B> and has <B>WebObjects.dll</B> as the adaptor name.

Your <I>adaptor_path</I> is </DD>



<PRE><A NAME="5063"></A><TT>                /Scripts/WebObjects.dll</TT>

</PRE>

</DL>



<P><A NAME="5066"></A>If you'd like to improve the average response time

that resulted from this test, read the next section, &quot;<A HREF="PerformanceTuning.html#5069">Improving

Performance</A>&quot; for guidelines on how to do so.</P>



<P> </P>



<P><A HREF="ServingWebObjectsTOC.html"><IMG SRC="ArrowUp.gif" HEIGHT=20 WIDTH=20></A><A HREF="ServingWebObjectsTOC.html">Table

of Contents</A> <A HREF="PerformanceTuning.html"><IMG SRC="ArrowRight.gif" HEIGHT=20 WIDTH=20></A><A HREF="PerformanceTuning.html">Next

Section</A> </P>




<!-- start of footer -->

<!--#include virtual="/includes/framesetfooter" -->

<!--end of footer -->

</body>

</HTML>


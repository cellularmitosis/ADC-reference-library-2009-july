<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Running Open Firmware</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.47.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.48.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.4a.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H2.Heading2"><A NAME="pgfId=3473"> </A>Running Open Firmware</H1><P CLASS="T1.Text1"><A NAME="pgfId=3474"> </A>The Open Firmware Process begins as the startup firmware builds the device tree for built-in I/O devices and then searches expansion areas for other devices. The firmware polls the computer's PCI buses, interrogating addresses where devices might be found. Each time it finds a device with an Open Firmware expansion ROM, it copies the <A NAME="marker=3475"> </A>FCode from that ROM into system RAM and executes it, using the system's FCode loader. As it runs, the FCode program enters the properties of the device it represents into the current device tree node established by the Open Firmware program and stored in system RAM. </P><P CLASS="T1.Text1"><A NAME="pgfId=3476"> </A>An important set of device tree properties include Open Firmware drivers for PCI devices. <A NAME="marker=3477"> </A>Run-time drivers, which are stored as properties of the device node in the device tree, may be required for the startup process and for each operating system that may be launched. Other properties include operating characteristics of video cards and information used to install interrupt handlers.</P><P CLASS="T1.Text1"><A NAME="pgfId=3478"> </A>Open Firmware queries PCI cards that contain no FCode and creates basic node entries for them in the device tree. These nodes contain only the properties that can be generated by accessing a card's standard PCI configuration registers. Open Firmware creates <TT CLASS="cv">reg</TT> and <TT CLASS="cv">assigned-addresses</TT> properties, making the card accessible to operating-system code (although not to Open Firmware). These properties provide the card's unit address and permit address space allocation based on the card's PCI base register support. PCI properties are discussed in <A HREF="PCI_BOOK.12e.html#31251" CLASS="XRef">Standard Properties</A>.</P><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.47.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.48.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.4a.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
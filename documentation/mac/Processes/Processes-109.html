<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Defining a Response Procedure (IM: Pr)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING109></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Processes-108.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-110.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html"><B>Inside Macintosh:</B></A> <A HREF="Processes-2.html"><B>Processes</B></A><BR><DD><A HREF="Processes-105.html"><B>Chapter 5 - Notification Manager</B></A> / <A HREF="Processes-107.html"><B>Using the Notification Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING109-0></A>
<H2><A NAME=MARKER-9-88></A>Defining a Response Procedure</H2>
 The <CODE>nmResp</CODE> field of the notification record contains the address of a response procedure executed as the final stage of a notification. If no processing is necessary in response to the notification, then you can supply the value <CODE>NIL</CODE> in that field. If you supply the address of your own response procedure in the <CODE>nmResp</CODE> field, the Notification Manager passes it one parameter, a pointer to your notification record. For example, this is how you would declare a response procedure having the name <CODE>MyResponse</CODE>:<A NAME=MARKER-9-89></A><A NAME=MARKER-2-91></A><P>
<PRE>
PROCEDURE MyResponse (nmReqPtr: NMRecPtr);
</PRE>
 When the Notification Manager calls this response procedure, it does not set up the A5 register or application-specific system global variables for you. If you need to access your application's global variables, you should save its A5 value in the <CODE>nmRefCon</CODE> field. See the chapter "Memory Management Utilities" in the book <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I> for more information on saving and restoring the A5 world.<A NAME=MARKER-2-92></A><A NAME=MARKER-2-93></A><A NAME=MARKER-2-94></A><P>
 Response procedures should never cause anything to be drawn on the screen or otherwise affect the human interface. Rather, you should use them simply to remove notification requests from the notification queue and free any memory. If you specify the special <CODE>nmResp</CODE> value of -1, the Notification Manager removes the queue element from the queue automatically, and you don't have to do it yourself. You have to pass your own response routine, however, if you need to do anything else in the response procedure, such as free the memory block containing the queue element or set an application global variable indicating that the notification was received.<P>
 If you use audible or alert notifications, you should probably set <CODE>nmResp</CODE> to -1 to remove the notification record from the queue as soon as the sound ends or the user dismisses the alert box. However, if either <CODE>nmMark</CODE> or <CODE>nmIcon</CODE> has a nonzero value, you should not set <CODE>nmResp</CODE> to -1 (because the Notification Manager would remove the diamond mark or the small icon before the user could see it). Note that when the value of <CODE>nmResp</CODE> is -1, the Notification Manager does not free the memory block containing the queue element; it merely removes that element from the notification queue.<A NAME=MARKER-2-95></A><A NAME=MARKER-2-96></A><A NAME=MARKER-2-97></A><A NAME=MARKER-2-98></A><A NAME=MARKER-2-99></A><P>
 Because the execution of the response procedure is the last step in the notification process, your application can determine whether the notification was posted by examining a global variable that you set in the response procedure. In addition, to determine that the user has actually received the notification, you need to request an alert notification. This is necessary because the response procedure is executed only after the user clicks the OK button in the alert box.<A NAME=MARKER-2-94></A><P>
</BLOCKQUOTE><P>
<HR>
<center>
<A HREF="Processes-108.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Processes-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Processes-171.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Processes-110.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Processes-3.html">&copy; Apple Computer, Inc.</A><br>17 JUN 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<html><head><title>Mac OS X
 Manual Page For regerror(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/regerror" title="Mac OS X
 Manual Page for regerror(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/regerror"; name=regerror(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
REGEX(3)                 BSD Library Functions Manual                 <!-- a -->REGEX(3)<!-- /a -->

<b>NAME</b>
     <b>regcomp</b>, <b>regerror</b>, <b>regexec</b>, <b>regfree</b> -- regular-expression library

<b>LIBRARY</b>
     Standard C Library (libc, -lc)

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;regex.h&gt;</b>

     <u>int</u>
     <b>regcomp</b>(<u>regex</u><b>_</b><u>t</u> <u>*restrict</u> <u>preg</u>, <u>const</u> <u>char</u> <u>*restrict</u> <u>pattern</u>, <u>int</u> <u>cflags</u>);

     <u>size</u><b>_</b><u>t</u>
     <b>regerror</b>(<u>int</u> <u>errcode</u>, <u>const</u> <u>regex</u><b>_</b><u>t</u> <u>*restrict</u> <u>preg</u>, <u>char</u> <u>*restrict</u> <u>errbuf</u>, <u>size</u><b>_</b><u>t</u> <u>errbuf</u><b>_</b><u>size</u>);

     <u>int</u>
     <b>regexec</b>(<u>const</u> <u>regex</u><b>_</b><u>t</u> <u>*restrict</u> <u>preg</u>, <u>const</u> <u>char</u> <u>*restrict</u> <u>string</u>, <u>size</u><b>_</b><u>t</u> <u>nmatch</u>,
         <u>regmatch</u><b>_</b><u>t</u> <u>pmatch[restrict]</u>, <u>int</u> <u>eflags</u>);

     <u>void</u>
     <b>regfree</b>(<u>regex</u><b>_</b><u>t</u> <u>*preg</u>);

<b>DESCRIPTION</b>
     These routines implement IEEE Std 1003.2 (``POSIX.2'') regular expressions (``RE''s); see <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format">re_format(7)</a>.
     The <b>regcomp</b>() function compiles an RE, written as a string, into an internal form.  <b>regexec</b>() matches
     that internal form against a string and reports results.  <b>regerror</b>() transforms error codes from either
     into human-readable messages.  <b>regfree</b>() frees any dynamically-allocated storage used by the internal
     form of an RE.

     The header &lt;<u>regex.h&gt;</u> declares two structure types, <u>regex</u><b>_</b><u>t</u> and <u>regmatch</u><b>_</b><u>t</u>, the former for compiled
     internal forms and the latter for match reporting.  It also declares the four functions, a type
     <u>regoff</u><b>_</b><u>t</u>, and a number of constants with names starting with ``REG_''.

     The <b>regcomp</b>() function compiles the regular expression contained in the <u>pattern</u> string, subject to the
     flags in <u>cflags</u>, and places the results in the <u>regex</u><b>_</b><u>t</u> structure pointed to by <u>preg</u>.  The <u>cflags</u> argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
     ment is the bitwise OR of zero or more of the following flags:

     REG_EXTENDED  Compile modern (``extended'') REs, rather than the obsolete (``basic'') REs that are the
                   default.

     REG_BASIC     This is a synonym for 0, provided as a counterpart to REG_EXTENDED to improve readabil-<font color="#ffffff" class="whiteout">ity.&nbsp;readability.</font>
                   ity.

     REG_NOSPEC    Compile with recognition of all special characters turned off.  All characters are thus
                   considered ordinary, so the ``RE'' is a literal string.  This is an extension, compatible
                   with but not specified by IEEE Std 1003.2 (``POSIX.2''), and should be used with caution
                   in software intended to be portable to other systems.  REG_EXTENDED and REG_NOSPEC may
                   not be used in the same call to <b>regcomp</b>().

     REG_ICASE     Compile for matching that ignores upper/lower case distinctions.  See <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format">re_format(7)</a>.

     REG_NOSUB     Compile for matching that need only report success or failure, not what was matched.

     REG_NEWLINE   Compile for newline-sensitive matching.  By default, newline is a completely ordinary
                   character with no special meaning in either REs or strings.  With this flag, `[^' bracket
                   expressions and `.' never match newline, a `^' anchor matches the null string after any
                   newline in the string in addition to its normal function, and the `$' anchor matches the
                   null string before any newline in the string in addition to its normal function.

     REG_PEND      The regular expression ends, not at the first NUL, but just before the character pointed
                   to by the <u>re</u><b>_</b><u>endp</u> member of the structure pointed to by <u>preg</u>.  The <u>re</u><b>_</b><u>endp</u> member is of
                   type <u>const</u> <u>char</u> <u>*</u>.  This flag permits inclusion of NULs in the RE; they are considered
                   ordinary characters.  This is an extension, compatible with but not specified by IEEE Std
                   1003.2 (``POSIX.2''), and should be used with caution in software intended to be portable
                   to other systems.

     When successful, <b>regcomp</b>() returns 0 and fills in the structure pointed to by <u>preg</u>.  One member of that
     structure (other than <u>re</u><b>_</b><u>endp</u>) is publicized: <u>re</u><b>_</b><u>nsub</u>, of type <u>size</u><b>_</b><u>t</u>, contains the number of parenthe-<font color="#ffffff" class="whiteout">sized&nbsp;parenthesized</font>
     sized subexpressions within the RE (except that the value of this member is undefined if the REG_NOSUB
     flag was used).  If <b>regcomp</b>() fails, it returns a non-zero error code; see <u>DIAGNOSTICS</u>.

     The <b>regexec</b>() function matches the compiled RE pointed to by <u>preg</u> against the <u>string</u>, subject to the
     flags in <u>eflags</u>, and reports results using <u>nmatch</u>, <u>pmatch</u>, and the returned value.  The RE must have
     been compiled by a previous invocation of <b>regcomp</b>().  The compiled form is not altered during execution
     of <b>regexec</b>(), so a single compiled RE can be used simultaneously by multiple threads.

     By default, the NUL-terminated string pointed to by <u>string</u> is considered to be the text of an entire
     line, minus any terminating newline.  The <u>eflags</u> argument is the bitwise OR of zero or more of the fol-<font color="#ffffff" class="whiteout">lowing&nbsp;following</font>
     lowing flags:

     REG_NOTBOL    The first character of the string is not the beginning of a line, so the `^' anchor
                   should not match before it.  This does not affect the behavior of newlines under
                   REG_NEWLINE.

     REG_NOTEOL    The NUL terminating the string does not end a line, so the `$' anchor should not match
                   before it.  This does not affect the behavior of newlines under REG_NEWLINE.

     REG_STARTEND  The string is considered to start at <u>string</u> + <u>pmatch</u>[0].<u>rm</u><b>_</b><u>so</u> and to have a terminating
                   NUL located at <u>string</u> + <u>pmatch</u>[0].<u>rm</u><b>_</b><u>eo</u> (there need not actually be a NUL at that loca-<font color="#ffffff" class="whiteout">tion),&nbsp;location),</font>
                   tion), regardless of the value of <u>nmatch</u>.  See below for the definition of <u>pmatch</u> and
                   <u>nmatch</u>.  This is an extension, compatible with but not specified by IEEE Std 1003.2
                   (``POSIX.2''), and should be used with caution in software intended to be portable to
                   other systems.  Note that a non-zero <u>rm</u><b>_</b><u>so</u> does not imply REG_NOTBOL; REG_STARTEND
                   affects only the location of the string, not how it is matched.

     See <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format">re_format(7)</a> for a discussion of what is matched in situations where an RE or a portion thereof
     could match any of several substrings of <u>string</u>.

     Normally, <b>regexec</b>() returns 0 for success and the non-zero code REG_NOMATCH for failure.  Other non-<font color="#ffffff" class="whiteout">zero&nbsp;nonzero</font>
     zero error codes may be returned in exceptional situations; see <u>DIAGNOSTICS</u>.

     If REG_NOSUB was specified in the compilation of the RE, or if <u>nmatch</u> is 0, <b>regexec</b>() ignores the
     <u>pmatch</u> argument (but see below for the case where REG_STARTEND is specified).  Otherwise, <u>pmatch</u> points
     to an array of <u>nmatch</u> structures of type <u>regmatch</u><b>_</b><u>t</u>.  Such a structure has at least the members <u>rm</u><b>_</b><u>so</u>
     and <u>rm</u><b>_</b><u>eo</u>, both of type <u>regoff</u><b>_</b><u>t</u> (a signed arithmetic type at least as large as an <u>off</u><b>_</b><u>t</u> and a
     <u>ssize</u><b>_</b><u>t</u>), containing respectively the offset of the first character of a substring and the offset of
     the first character after the end of the substring.  Offsets are measured from the beginning of the
     <u>string</u> argument given to <b>regexec</b>().  An empty substring is denoted by equal offsets, both indicating
     the character following the empty substring.

     The 0th member of the <u>pmatch</u> array is filled in to indicate what substring of <u>string</u> was matched by the
     entire RE.  Remaining members report what substring was matched by parenthesized subexpressions within
     the RE; member <u>i</u> reports subexpression <u>i</u>, with subexpressions counted (starting at 1) by the order of
     their opening parentheses in the RE, left to right.  Unused entries in the array (corresponding either
     to subexpressions that did not participate in the match at all, or to subexpressions that do not exist
     in the RE (that is, <u>i</u> &gt; <u>preg</u>-&gt;<u>re</u><b>_</b><u>nsub</u>)) have both <u>rm</u><b>_</b><u>so</u> and <u>rm</u><b>_</b><u>eo</u> set to -1.  If a subexpression par-<font color="#ffffff" class="whiteout">ticipated&nbsp;participated</font>
     ticipated in the match several times, the reported substring is the last one it matched.  (Note, as an
     example in particular, that when the RE `(b*)+' matches `bbb', the parenthesized subexpression matches
     each of the three `b's and then an infinite number of empty strings following the last `b', so the
     reported substring is one of the empties.)

     If REG_STARTEND is specified, <u>pmatch</u> must point to at least one <u>regmatch</u><b>_</b><u>t</u> (even if <u>nmatch</u> is 0 or
     REG_NOSUB was specified), to hold the input offsets for REG_STARTEND.  Use for output is still entirely
     controlled by <u>nmatch</u>; if <u>nmatch</u> is 0 or REG_NOSUB was specified, the value of <u>pmatch</u>[0] will not be
     changed by a successful <b>regexec</b>().

     The <b>regerror</b>() function maps a non-zero <u>errcode</u> from either <b>regcomp</b>() or <b>regexec</b>() to a human-readable,
     printable message.  If <u>preg</u> is non-NULL, the error code should have arisen from use of the <u>regex</u><b>_</b><u>t</u>
     pointed to by <u>preg</u>, and if the error code came from <b>regcomp</b>(), it should have been the result from the
     most recent <b>regcomp</b>() using that <u>regex</u><b>_</b><u>t</u>.  The (<b>regerror</b>() may be able to supply a more detailed mes-<font color="#ffffff" class="whiteout">sage&nbsp;message</font>
     sage using information from the <u>regex</u><b>_</b><u>t</u>.)  The <b>regerror</b>() function places the NUL-terminated message
     into the buffer pointed to by <u>errbuf</u>, limiting the length (including the NUL) to at most <u>errbuf</u><b>_</b><u>size</u>
     bytes.  If the whole message won't fit, as much of it as will fit before the terminating NUL is sup-<font color="#ffffff" class="whiteout">plied.&nbsp;supplied.</font>
     plied.  In any case, the returned value is the size of buffer needed to hold the whole message (includ-<font color="#ffffff" class="whiteout">ing&nbsp;(including</font>
     ing terminating NUL).  If <u>errbuf</u><b>_</b><u>size</u> is 0, <u>errbuf</u> is ignored but the return value is still correct.

     If the <u>errcode</u> given to <b>regerror</b>() is first ORed with REG_ITOA, the ``message'' that results is the
     printable name of the error code, e.g. ``REG_NOMATCH'', rather than an explanation thereof.  If <u>errcode</u>
     is REG_ATOI, then <u>preg</u> shall be non-NULL and the <u>re</u><b>_</b><u>endp</u> member of the structure it points to must
     point to the printable name of an error code; in this case, the result in <u>errbuf</u> is the decimal digits
     of the numeric value of the error code (0 if the name is not recognized).  REG_ITOA and REG_ATOI are
     intended primarily as debugging facilities; they are extensions, compatible with but not specified by
     IEEE Std 1003.2 (``POSIX.2''), and should be used with caution in software intended to be portable to
     other systems.  Be warned also that they are considered experimental and changes are possible.

     The <b>regfree</b>() function frees any dynamically-allocated storage associated with the compiled RE pointed
     to by <u>preg</u>.  The remaining <u>regex</u><b>_</b><u>t</u> is no longer a valid compiled RE and the effect of supplying it to
     <b>regexec</b>() or <b>regerror</b>() is undefined.

     None of these functions references global variables except for tables of constants; all are safe for
     use from multiple threads if the arguments are safe.

<b>IMPLEMENTATION</b> <b>CHOICES</b>
     There are a number of decisions that IEEE Std 1003.2 (``POSIX.2'') leaves up to the implementor, either
     by explicitly saying ``undefined'' or by virtue of them being forbidden by the RE grammar.  This imple-<font color="#ffffff" class="whiteout">mentation&nbsp;implementation</font>
     mentation treats them as follows.

     See <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format">re_format(7)</a> for a discussion of the definition of case-independent matching.

     There is no particular limit on the length of REs, except insofar as memory is limited.  Memory usage
     is approximately linear in RE size, and largely insensitive to RE complexity, except for bounded repe-<font color="#ffffff" class="whiteout">titions.&nbsp;repetitions.</font>
     titions.  See <u>BUGS</u> for one short RE using them that will run almost any system out of memory.

     A backslashed character other than one specifically given a magic meaning by IEEE Std 1003.2
     (``POSIX.2'') (such magic meanings occur only in obsolete [``basic''] REs) is taken as an ordinary
     character.

     Any unmatched `[' is a REG_EBRACK error.

     Equivalence classes cannot begin or end bracket-expression ranges.  The endpoint of one range cannot
     begin another.

     RE_DUP_MAX, the limit on repetition counts in bounded repetitions, is 255.

     A repetition operator (`?', `*', `+', or bounds) cannot follow another repetition operator.  A repeti-<font color="#ffffff" class="whiteout">tion&nbsp;repetition</font>
     tion operator cannot begin an expression or subexpression or follow `^' or `|'.

     `|' cannot appear first or last in a (sub)expression or after another `|', i.e., an operand of `|' can-<font color="#ffffff" class="whiteout">not&nbsp;cannot</font>
     not be an empty subexpression.  An empty parenthesized subexpression, `()', is legal and matches an
     empty (sub)string.  An empty string is not a legal RE.

     A `{' followed by a digit is considered the beginning of bounds for a bounded repetition, which must
     then follow the syntax for bounds.  A `{' <u>not</u> followed by a digit is considered an ordinary character.

     `^' and `$' beginning and ending subexpressions in obsolete (``basic'') REs are anchors, not ordinary
     characters.

<b>SEE</b> <b>ALSO</b>
     <a href="../man1/grep.1.html#//apple_ref/doc/man/1/grep">grep(1)</a>, <a href="../man7/re_format.7.html#//apple_ref/doc/man/7/re_format">re_format(7)</a>

     IEEE Std 1003.2 (``POSIX.2''), sections 2.8 (Regular Expression Notation) and B.5 (C Binding for Regu-<font color="#ffffff" class="whiteout">lar&nbsp;Regular</font>
     lar Expression Matching).

<b>DIAGNOSTICS</b>
     Non-zero error codes from <b>regcomp</b>() and <b>regexec</b>() include the following:

     REG_NOMATCH   The <b>regexec</b>() function failed to match
     REG_BADPAT    invalid regular expression
     REG_ECOLLATE  invalid collating element
     REG_ECTYPE    invalid character class
     REG_EESCAPE   `\' applied to unescapable character
     REG_ESUBREG   invalid backreference number
     REG_EBRACK    brackets `[ ]' not balanced
     REG_EPAREN    parentheses `( )' not balanced
     REG_EBRACE    braces `{ }' not balanced
     REG_BADBR     invalid repetition <!-- a -->count(s)<!-- /a --> in `{ }'
     REG_ERANGE    invalid character range in `[ ]'
     REG_ESPACE    ran out of memory
     REG_BADRPT    `?', `*', or `+' operand invalid
     REG_EMPTY     empty (sub)expression
     REG_ASSERT    can't happen - you found a bug
     REG_INVARG    invalid argument, e.g. negative-length string
     REG_ILLSEQ    illegal byte sequence (bad multibyte character)

<b>HISTORY</b>
     Originally written by Henry Spencer.  Altered for inclusion in the 4.4BSD distribution.

<b>BUGS</b>
     This is an alpha release with known defects.  Please report problems.

     The back-reference code is subtle and doubts linger about its correctness in complex cases.

     The <b>regexec</b>() function performance is poor.  This will improve with later releases.  The <u>nmatch</u> argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
     ment exceeding 0 is expensive; <u>nmatch</u> exceeding 1 is worse.  The <b>regexec</b>() function is largely insensi-<font color="#ffffff" class="whiteout">tive&nbsp;insensitive</font>
     tive to RE complexity <u>except</u> that back references are massively expensive.  RE length does matter; in
     particular, there is a strong speed bonus for keeping RE length under about 30 characters, with most
     special characters counting roughly double.

     The <b>regcomp</b>() function implements bounded repetitions by macro expansion, which is costly in time and
     space if counts are large or bounded repetitions are nested.  An RE like, say,
     `((((a{1,100}){1,100}){1,100}){1,100}){1,100}' will (eventually) run almost any existing machine out of
     swap space.

     There are suspected problems with response to obscure error conditions.  Notably, certain kinds of
     internal overflow, produced only by truly enormous REs or by multiply nested bounded repetitions, are
     probably not handled well.

     Due to a mistake in IEEE Std 1003.2 (``POSIX.2''), things like `a)b' are legal REs because `)' is a
     special character only in the presence of a previous unmatched `('.  This can't be fixed until the spec
     is fixed.

     The standard's definition of back references is vague.  For example, does `a\(\(b\)*\2\)*d' match
     `abbbd'?  Until the standard is clarified, behavior in such cases should not be relied on.

     The implementation of word-boundary matching is a bit of a kludge, and bugs may lurk in combinations of
     word-boundary matching and anchoring.

BSD                              July 12, 2004                             BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/regerror.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/regerror.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/regerror.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

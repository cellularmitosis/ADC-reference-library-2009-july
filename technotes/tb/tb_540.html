<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note TB540: Help Manager Q&amp;As</title>                                       <meta name="categories" content="Human Interface Toolbox"><meta name="week-posted" content="Oct 1, 1990 - Oct 5, 1990"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002801" title="Help Manager Q&As"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxUserExperience-date.html">User Experience</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/UserExperience/index.html" target="_blank">Reference Library > User Experience</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TB540</div>
<div id="pageheadsub">Help Manager Q&amp;As</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><P id = "introtext">This Technical Note contains a collection of archived Q&amp;As relating to a specifictopic--questions sent the Developer Support Center (DSC) along withanswers from the DSC engineers. Current Q&amp;A's can be found on the <A HREF = "../../qa/index.html">Macintosh Technical Q&amp;A's web site</a>.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Oct 01 1990]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><h2>Changing help balloon text when dialog check box changes</h2><p>How can I make a help balloon's text change when the state of a check box orradio button in my dialog box changes? I can't get them to change until I movethe cursor away from the dialog item to dismiss the balloon, and then move thecursor back, when the correct balloon is drawn for the new control state.</p><p>You can force the balloon to be updated by calling <code>HMRemoveBalloon</code>; this willremove the balloon, and the Help Manager will immediately put up a new balloonreflecting the new state of the check box. Of course, before you do this,you'll want to call <code>HMIsBalloon</code> to make sure a balloon is up. Essentially,while changing the state of the check box (calling <code>SetCtlValue</code>), just insert acheck of <code>HMIsBalloon</code> and if it returns true, call <code>HMRemoveBalloon</code>. This couldplausibly cause a flash of the balloon if the user has already moved the mouseover another item before you process their click, though it would be rare andunlikely.</p><P><A HREF="#top">Back to top</A></p><h2>No pre-System 7 Help Manager</h2><P>Date Written:  7/12/90</p><P>Last reviewed:  8/30/91</p><p>Contrary to rumors you might have heard, the Help Manager (including balloonhelp package) will not be available for pre-7.0 systems.</p><P><A HREF="#top">Back to top</A></p><h2>Help Manager menu command-key bug and workaround</h2><P>Date Written:  6/4/91</p><P>Last reviewed:  8/13/91</p><p>I cannot get command-key equivalents to work on the System 7 Help menu. UnderSystem 6 the first item's command-? equivalent in my Help menu works, but underSystem 7 the <code>MenuKey</code> seems to return 0.</p><p>What you are experiencing is a bug in System 7. The bug only effects menu keysand the Help menu, so the workaround to it is really quite simple. Before youcall menu key, test the key to see if it is a question mark (in other words,perform the menu key function yourself in this instance). Some Pascal code thatmight do this (modified from the MPW sample.p application) follows. Inside yourcase statement in your event loop, the keystroke event case would looksomething like this:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>        keyDown, autoKey: BEGIN                {check for menukey equivalents}            key := CHR(BAnd(event.message, charCodeMask));            IF BAnd(event.modifiers, cmdKey) &lt;&gt; 0 THEN    {Command key down}                IF event.what = keyDown THEN BEGIN                    AdjustMenus;    {enable/disable/check menu items properly}     If key&lt;&gt;'?' then           { test for our special help menu keystroke }                       DoMenuCommand(MenuKey(key)) {if not,                                                    just handle normally}     Else begin       HiLiteMenu(kHMHelpMenuID);       DoMenuCommand(($10000*kHMHelpMenuID)+myHMItemNumber);     end;</pre>	</TD></TR></TABLE></CENTER><p>The workaround will not cause any problems if the bug's fixed in the future, soit is safe to include in your software.</p><P><A HREF="#top">Back to top</A></p><h2>Menu help balloons with application extensions</h2><P>Date Written:  6/19/91</p><P>Last reviewed:  10/15/91</p><p>How can my Macintosh application extension change the help balloons for menusit has modified in the application?</p><p>You can head patch (DON'T tail patch) <code>HMShowMenuBalloon</code> to call the HelpManager's <code>HMSetMenuResID</code> routine, which maps in an alternate menu help resource(<code>'hmnu'</code>). You create a copy of the application's <code>'hmnu'</code> resource, modify thecopy and map it in using <code>HMSetMenuResID</code>--something like this:</p><p>When you remove your changes to the menu, unmap your <code>'hmnu'</code> help menu resourcewith another call to <code>HMSetMenuResID</code>, as follows:</p><P><A HREF="#top">Back to top</A></p><h2>BalloonWriter 1.0f3 rez input file bug &amp; workaround</h2><P>Date Written:  7/5/91</p><P>Last reviewed:  8/30/91</p><p>A rez input file generated by BalloonWriter 1.0f3 is not the same as the MPW3.2 definitions in BalloonTypes.r. Until this is fixed, the only solution is togo in by hand and fix the resources yourself.</p><P><A HREF="#top">Back to top</A></p><h2>Balloon Help and modeless dialogs</h2><P>Date Written:  8/9/91</p><P>Last reviewed:  9/16/91</p><p>I have a problem with Balloon Help for modeless dialogs. The balloons don'tshow up most of the time unless the user clicks the mouse over the dialog itemof interest.</p><p>The problem you're having is that you're not calling <code>isDialogEvent</code> with nullevents. The most likely cause for this is that you're not getting null events,or you have your sleep time way too high in <code>WaitNextEvent</code>. If you're notgetting null events, it's probably due to unserviced update events in the eventqueue. If you can't ensure that you'll get null events back from <code>WaitNextEvent</code>,you must fudge them instead. This way the TextEdit insertion point will blinkproperly as well.</p><P><A HREF="#top">Back to top</A></p><h2>Balloon help for menus with submenus</h2><P>Date Written:  8/19/91</p><P>Last reviewed:  10/8/91</p><p>We defined balloon help for our menus and submenus, but if we click on the mainmenu item, the balloon for this item only appears in a flash and thendisappears. The help for the hierarchical items work, but if we drag on themain item again, no help appears.</p><p>When submenus are present, the help item for the parent menu item is notsupposed to show for three reasons: First, the menu item is the title of thesubmenu and you do not see the help for a menu title when the menu is pulleddown. (This is what actually causes the help balloon not to show. The system istreating the menu item as a menu title, with the side effect that you can neverposition the cursor over the item without popping down the submenu, so theitem's associated help will never show.) Second, Apple's human interface groupfelt that there would be little need for menu help once the submenu hasappeared (envisioning a balloon that says something like "The submenu attachedto this menu contains items that..." which would be redundant). The finalreason is that if the balloon came up it would obscure the submenu that justpopped up, forcing users to move the cursor to the submenu before they couldsee what choices are available. This looks bad and works bad.</p><P><A HREF="#top">Back to top</A></p><h2>Help for nested dialogs</h2><P>Date Written:  8/19/91</p><P>Last reviewed:  10/15/91</p><p>We define our helps through <code>'hdlg'</code> and the call <code>HMSetDialogResID</code> Does this callsupport nested dialogs?</p><p>The <code>HMSetDialogResID</code> is a global function. It acts on all dialogs that arecurrently up in addition to dialogs that are to come up (contrary to what themanual implies). So, to handle help for nested dialogs you should do thefollowing:</p><p>Always associate an <code>'hdlg'</code> with a dialog via the <code>'DITL'</code> help item wheneverpossible, thus eliminating the need to use <code>HMSetDialogResID</code>.</p><p>Before bringing up any dialog that you must use <code>HMSetDialogResID</code> with, youshould first call <code>hmGetDialogResID</code> to preserve the current state. When thedialog in question goes away or is de-activated (in the case of a modelessdialog), you should reset the ID to what it was before the dialog was put up.Also, if you are using this with modeless dialogs, be sure to again call<code>hmSetDialogResID</code> at activation.</p><P><A HREF="#top">Back to top</A></p><h2>Help menus with two menu bars</h2><P>Date Written:  9/11/91</p><P>Last reviewed:  10/15/91</p><p>I'm appending items to the system help menu but my program uses two menu barsand when I call <code>SetMenuBar</code> the items that were added to the help menu are lost.What can I do to keep from having to rebuild the help menu each time I do aSetMenuBar? I don't fully understand the ownership of the help menu (eachapplication gets its own?).</p><p>Well, if you must use two menu bars, then you will always have to re-add yourhelp menu items after a call to <code>setMenuBar</code>. Of course, the reason for this isthat the help menu, process menu, and keyboard menu are not considered part ofyour menu list. The system thinks it is doing you a favor by isolating thesemenus from you (which in the case of the process menu makes quite a good bit ofsense). Unfortunatly, you have found the one big flaw in the whole plan. Thesolution for you is to write a routine that calls <code>setMenuBar</code> and re-adds thehelp menu items all at the same time.</p><P><A HREF="#top">Back to top</A></p><h2>Balloon help for application windows</h2><P>Date Written:  9/11/92</p><P>Last reviewed:  10/15/91</p><p>If I program the balloon help myself for my windows, does this mean I mustprogram for the menus also, or can I use the resource method?</p><p>Each different type of balloon help--dialog, menu, and application--isindependent of the others. Before the Menu Manager puts up any balloons it willremove the current balloon. You should do the same (see information and warningon page 11-71 of <i>Inside Macintosh</i> Volume VI). Bottom line, you can usethe resource method for menu and dialog help (dialogs that use the DialogManager), and still manually provide help for your application windows.</p><P><A HREF="#top">Back to top</A></p><h2>Displaying button help strings for Chooser device package</h2><P>Date Written:  10/28/91</p><P>Last reviewed:  2/17/92</p><p>How do I put up balloons for buttons in the Chooser's window? The Chooserautomatically inserts the buttons for me and gives me no method of appendinganything to its dialog before it is displayed.</p><p>To get your own help strings displayed for any buttons or radio buttonsdisplayed for your Chooser device package, simply add a <code>'STR#'</code> resource with ID-5694 to your device resource file. The format of the resource is describedbelow:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>#define ChooserResID    -15904#define PackResID        -5694            // this is in the _Pack14 range/*    Any Chooser package can get balloons on all items that are normally      added to the Chooser dialog by containing a STR# resource of      resource ID = PackResID (-5694) and following the convention below: */      resource 'STR#' (PackResID, purgeable) {     {   &quot;kEnabledLeftButton&quot;,   // message for button (or control) that is                                 // Enabled but not checked        &quot;kDisabledLeftButton&quot;,   // message for the control that is Disabled        &quot;kCheckedLeftButton&quot;,    // message for the control that is Checked                                 // (i.e., CtrlValue&gt;0)        &quot;kOtherLeftButton&quot;,      // message for the control that is Other                                 // (i.e., CtrlValue&gt;1)        &quot;kEnabledRightButton&quot;,        &quot;kDisabledRightButton&quot;,        &quot;kCheckedRightButton&quot;,        &quot;kOtherRightButton&quot;,        &quot;kEnabledOnButton&quot;,        &quot;kDisabledOnButton&quot;,        &quot;kCheckedOnButton&quot;,        &quot;kOtherOnButton&quot;,        &quot;kEnabledOffButton&quot;,        &quot;kDisabledOffButton&quot;,        &quot;kCheckedOffButton&quot;,        &quot;kOtherOffButton&quot;,        &quot;kEnabledOnOffTitle&quot;,        &quot;kDisabledOnOffTitle&quot;,        &quot;kCheckedOnOffTitle&quot;,        &quot;kOtherOnOffTitle&quot;,     }</pre>	</TD></TR></TABLE></CENTER><p>You were also asking about overriding the default help when the cursor is overyour device list in the Chooser. To do this would require a lot of effort onyour part. It would involve getting the <code>'hdlg'</code> help resource used by theChooser (probably with <code>HMGetDialogResID</code>), stuffing your help string in place ofthe existing string for the device list (the device list is item 6 in thedialog list), and then putting back the original string once another device isselected. DTS doesn't recommend doing this since it might break in futurereleases of system software. The current Chooser mechanism simply wasn't set upfor it.</p><P><A HREF="#top">Back to top</A></p><h2>How to tell if a window is a help balloon window</h2><P>Date Written:  11/7/91</p><P>Last reviewed:  12/11/91</p><p>How can I tell whether a window is a Balloon Help window?</p><p>First, call the Help Manager procedure <code>HMIsBalloon</code> to determine whether aballoon is being displayed at all. Then call <code>HMGetBalloonWindow</code> to get the helpwindow's window pointer, and compare that to the window pointer of the windowyou've got.</p><p>Note that if HMIsBalloon returns TRUE and <code>HMGetBalloonWindow</code> returns a windowpointer of NIL, it means that the balloon "window" that's displayed reallyisn't a window at all; this will happen, for instance, if the balloon is beingdisplayed on top of a pulled-down menu (we call this "to boldly go where nowindow has gone before").</p><P><A HREF="#top">Back to top</A></p><h2>HMShowBalloon styled TEHandle limit and workaround</h2><P>Date Written:  12/9/91</p><P>Last reviewed:  2/17/92</p><p>Sometimes balloons won't show up when I call <code>HMShowBalloon</code>; I get a <code>paramErr</code>(-50) instead. The <code>hmHelpType</code> is <code>khmmTEHandle</code>. The <code>HMShowBalloon</code> function calls<code>TextWidth</code> on the <code>hText</code> of my <code>TEHandle</code> (the result of which is 1511 (338chars)), then multiplies that by the <code>lineHeight</code> (12), yielding 18132. It thencompares this to 17000, doesn't like the result, puts -50 into a register andbacks out of everything it has done previously. What is the Help Managerdoing?</p><p>The Help Manager checks against 17000 to ensure that the help balloon window isalways smaller than the Macintosh system screen. However, the value used(17000) should be a much larger value. As it is right now in System 7, you'relimited to about the same number of characters with a styled TEHandle as youare with a Pascal string: 255 characters.</p><p>To avoid this limitation, use clear concise phrases to make your help messageas short as possible. If you've already done that and your help message stillisn't short enough, you can use <code>khmmPict</code> or <code>khmmPictHandle</code> and use a picturefor your help message. Using a picture has the disadvantages that pictures usea little more memory for the same help message and you'll have to add carriagereturns for line breaks yourself where you need them. You can use MacDraw orsomething similar to create the pictures.</p><P><A HREF="#top">Back to top</A></p><h2>Balloon help equivalent for System 6 users</h2><P>Date Written:  12/9/91</p><P>Last reviewed:  2/6/92</p><p>We are currently adding balloon help to our application, but have run into aproblem with adding help to a custom Standard File routine. Our applicationneeds to run under both System 6 and System 7, so we're using the older<code>SFPGetFile()</code> call instead of System 7's <code>CustomGetFile</code>. Since we're not usingthe new Standard File calls, we can't take advantage of the <code>sfItemBalloonHelp</code>item provided with the new interface. How can we add help for our custom filedialog?</p><p>To add help balloons for additional dialog items in a <code>SFPGetFile</code> or <code>SFPPutFile</code>dialog, add an <code>'hdlg'</code> resource with resource -4000 for <code>SFPGet</code> calls or -3999for <code>SFPPut</code> calls. This resource contains help balloons for the standard itemsbut with additional help items for your dialog additions. Even though your DITLwill not be the standard -4000 (or -3999), Standard File will pick the -4000(or -3999) hdlg out of your resource fork and use it with your custom StandardFile dialog.</p><P><A HREF="#top">Back to top</A></p><h2>Help balloons and short messages with long words</h2><P>Date Written:  12/11/91</p><P>Last reviewed:  2/6/92</p><p>Sometimes long words get broken across lines in certain help balloons. Is therea way to tune the line-breaking algorithm balloon help uses?</p><p>If your application is simply adding help resources to your dialogs, thenyou're pretty much stuck with the algorithm the Help Manager uses. It decideshow big the balloon should be based on the length of your text and the heightof your text. Then it uses TextEdit to display your text in a rectangle thatsize. The problem you're seeing is short messages with long words break thealgorithm. The easy workaround is to make the height of your text larger. Forexample, try putting in one carriage return before the first word in your textand two carriage returns after the last word. You'll probably end up with anextra line of white space above and below the text in the balloon, but it willwrap correctly. The other easy solution is to insert "- " (a dash and a space)where you want your really long word to break. Both of these methods involvetrying the balloon text to see if it breaks where you want it to break.</p><P><A HREF="#top">Back to top</A></p><h2>More than 239 characters in a help balloon</h2><P>Date Written:  1/20/92</p><P>Last reviewed:  4/23/92</p><p>My Balloon Help message doesn't appear when I use a <code>'TEXT'</code> resource in a staticwindow as the message in the balloon, following string resource examples in<i>Inside Macintosh</i> Volume VI and modifying the code to indicate <code>'TEXT'</code>.Why doesn't this work?</p><p>While using <code>'TEXT'</code> resources in Help Manager balloons is a way to providestylized text, it doesn't mean that strings longer than 256 are possible. Infact, strings up to only 239 characters in length are valid. When stringlengths are greater than 239 the Help Manager takes a short-circuit return andno balloon is displayed. To work around this limit, you can draw a picture withthe text you want to display and then use the picture in the Help Managerballoon.</p><P><A HREF="#top">Back to top</A></p><h2>Workaround for help menu MenuKey bug</h2><P>Date Written:  2/11/92</p><P>Last reviewed:  6/14/93</p><p>Menu accelerators don't work in System 7.0's help menu. In addition, mouseclicks don't work in hierarchical menus added to the help menu. For example, weadded to our help menu--a "quit" item with "Q" as the accelerator and a submenucontaining an "exit" item with "X" as the accelerator to our menu. Selecting"quit" or "exit" should quit the program, but we are not getting that result.</p><p>Yes, this is a bug in the Help Manager and Menu Manager. The system is treatingany <code>MenuKey</code> return from the help menu as a "system" hit instead of anapplication menu hit. It should be addressed in the next major system release .In the meantime, you'll have to track menu keys in the help menu yourself,which is an added step in your <code>keyDown</code> handler, but is the only way to do itcurrently...</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>case keyDown:if(ERecord.modifiers &amp; cmdKey){if((ERecord.message &amp; charCodeMask) == myMenuHelpKey){DoHelpMenu();} else {/* do regular MenuKey call */</pre>	</TD></TR></TABLE></CENTER><p>Be sure to use a variable for <code>myMenuHelpKey</code>, instead of a constant, and read itfrom the menu when you start. This will prevent you from having to recompile ifyou change the help menu key for design or internationalizing reasons.</p><P><A HREF="#top">Back to top</A></p><h2>HMGetIndHelpMsg and 'hrct' resources</h2><P>Date Written:  2/24/92</p><P>Last reviewed:  6/11/92</p><p>My application opens a number of resource files. If my <code>'hrct'</code> resources aren'tin the most recently opened resource file, I get an error -192 (resource notfound) from <code>HMGetIndHelpMsg</code>. Is this a Help Manager bug?</p><p>Your <code>'hrct'</code> resources get loaded only from the most recently opened resourcefile because that's where the Help Manager is looking for them. The HelpManager uses <code>Get1Resource</code> to get <code>'hrct'</code>-type resources to avoid ResourceManager conflicts with other resources. This is simply a behavior of the HelpManager. To use <code>HMGetIndHelpMsg</code> properly, call <code>UseResFile</code> with the <code>refNum</code> ofthe file containing the <code>'hrct'</code> before you call the Help Manager. If the <code>'hrct'</code>is stored in your application resource fork, you can use <code>HomeResFile</code> or<code>CurResFile</code> (at the start of your program before you've opened any otherresource files) to get the refNum of the application resource file.</p><p>Not all Help Manager resources are treated this way, due to the design of theMacintosh Toolbox; <code>'hdlg' </code>resources, for example, are loaded using <code>GetResource</code>so that things like Standard File can have common help throughout allapplications.</p><P><A HREF="#top">Back to top</A></p><h2>HMSetBalloonContents controls runaway balloons</h2><P>Date Written:  5/24/91</p><P>Last reviewed:  10/9/91</p><p>Help! I've just added Balloon Help to my application, but I'm having someproblems. Whenever a balloon appears, it immediately begins floating away offthe top of the screen. What can I do to stop this madness?</p><p>It appears you failed to heed our warning when it comes to routines that canmove balloons. Consult Appendix D of <i>Inside Macintosh X-Ref,</i> "RoutinesThat May Pop Balloons or Cause Barometric Disturbances," for a complete listingof these help balloon meteorological nightmares. In addition, be sure to callthe new trap HMSetBalloonContents:</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>OSErr HMSetBalloonContents (balloonContents: INTEGER);CONST { types of balloon contents }  helium = 0;  air = 1;  water = 2;</pre>	</TD></TR></TABLE></CENTER><p>with balloonContents set to something greater than helium.</p><P><A HREF="#top">Back to top</A></p><h2>HMSetMenuResID &amp; kHMCompareItem with 'hmnu' resource</h2><P>Date Written:  3/14/91</p><P>Last reviewed:  7/29/91</p><p>My DA uses a lot of hierarchical menus for which I have help strings in a<code>'STR#'</code> resource. How do I get around potential renumbering problems? Is it safeto assume that I never get renumbered under System 7? Also, if a menu item hasa hierarchical menu, how do I get help for the item?</p><p>According to the Help Manager chapter of <i>Inside Macintosh</i> Volume VI,</p><P>"You can use the <code>HMSetMenuResID</code> function to set the <code>'hmnu'</code> resource for a menuthat did not previously have one or to supplement the existing <code>'hmnu'</code> resourcefor a menu.</p><P>The <code>menuID</code> parameter specifies the menu to associate with the <code>'hmnu'</code>resource.The <code>resID</code> parameter specifies the resource ID of the <code>'hmnu'</code> resourceto use for the menu specified by the <code>menuID</code> parameter. The menu identified bythe <code>menuID</code> parameter should correspond to an existing menu in your menu list.The Help Manager maintains a list of the menus whose <code>'hmnu'</code> resources you map(set or override) using the <code>HMSetMenuResID</code> function.</p><p>Specify -1 in the <code>resID</code> parameter to unmap the pairing of a particular menu and<code>'hmnu'</code> resource that you previously mapped using the <code>HMSetMenuResID</code> function.You should unmap any resource IDs before your application quits.</p><p>Result codes</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>        noErr                0        No error</pre>	</TD></TR></TABLE></CENTER><p>Regarding help items for hierarchical menus, you can use <code>kHMCompareItem</code> in your<code>'hmnu'</code> resource to match against the menu item in question, and display theappropriate help message at that time. See the "Providing Help Balloons forMenus" section for details on the HMCompareItem identifier.</p><P><A HREF="#top">Back to top</A></p><h2>Changing the default help balloon for your Macintosh application</h2><P>Date Written:  4/8/91</p><P>Last reviewed:  5/1/91</p><p>In the Macintosh Finder, when you point to the TeachText icon with Balloon Helpturned on, a little description about the application appears. How can I createa similar description for my application?</p><p>TeachText is a special utility application included with Macintosh systemsoftware. Consequently, some TeachText-specific information is stored in systemfiles. Specifically, the Finder Help file contains special strings which areused for the TeachText help balloons. Normal applications do not have thisprivilege.</p><p>You can create an 'hfdr' resource in your file, which lets you specify your ownhelp balloon text. You can use the Rez tool in MPW SARez, or BalloonWriter tomake an <code>'hfdr'</code>. Refer to "Overriding Help Balloons for Application Icons" inthe Help Manager chapter of <i>Inside Macintosh</i> Volume VI for moredetails.</p><P><A HREF="#top">Back to top</A></p><h2><br>Help balloons can't be attached to HyperCard palettes</h2><P>Date Written:  4/12/91</p><P>Last reviewed:  8/30/91</p><p>Help balloons cannot be attached to HyperCard palettes. The problem is thatpalettes are structures that are built on the fly and handled by an XCMD called"Palette." Short of writing your own Palette XCMD, there's no known way toattach help balloons to HyperCard palettes or to their contents.</p><P><A HREF="#top">Back to top</A></p><h2>Determining within HyperTalk whether balloon help is enabled</h2><P>Date Written:  4/12/91</p><P>Last reviewed:  8/30/91</p><p>There's no easy way to tell whether Balloon Help is enabled from withinHyperTalk, but an XFCN could be written to call <code>HMGetBalloons</code>, which wouldreturn a boolean indicating whether Balloon Help is enabled.</p><P><A HREF="#top">Back to top</A></p><h2>Macintosh Help Manager and resource files</h2><P>Date Written:  4/29/91</p><P>Last reviewed:  6/7/91</p><p>Is there some kind of bug with the Macintosh Balloon Help feature in System7.0? It goes into the application and uses the text from the 'STR#' resource ID4001 instead of the <code>'STR#'</code> resource ID 4001 of Finder Help.</p><p>The System 7.0 Help Manager stores its balloon strings in the Finder Helpresource file. Under certain circumstances, the Help Manager will access thestring resources in your application before it accesses the resources of theFinder Help file. Consequently, problems will occur if your applicationcontains certain <code>'STR#'</code> and <code>'STR '</code> resources.</p><p>There are only two circumstances in which your application may be affected.First, if your application uses a <code>'STR#'</code> resource with ID 4001, the HelpManager will use the first string resource of the list instead of thecorresponding resource in Finder Help. When the pointer is placed over yourapplication icon's text on the desktop, the default text, "Change the icon'sname by clicking on the name and typing," will be changed to the text stored in<code>'STR#'</code> 4001 of your application.</p><p>Second, if your application has a <code>'STR '</code> resource with ID 17251, the HelpManager will use that string resource instead of the corresponding stringresource in Finder Help. The default text, "This is an application--a programwith which you..." will be changed to the text stored in <code>'STR '</code> 17251 of yourapplication.</p><p>To avoid these problems, you have a few options. You can create your own <code>'hfdr'</code>resource to override <code>'STR '</code> 17251, or you can avoid using <code>'STR '</code> 17251 and<code>'STR#'</code> 4001. If you must use <code>'STR#'</code> 4001, paste the text "Change the icon'sname by clicking on the name and typing" into the first string and use the restof the strings for your application's use.</p><P><A HREF="#top">Back to top</A></p><h2>Control Panel cdev Balloon Help</h2><P>Date Written:  8/26/91</p><P>Last reviewed:  9/16/91</p><p>How do I completely mimic the help in Apple's Control Panel cdevs? Apple'scdevs have two forms of help: (1) point to the icon and you get the descriptivetext of what the cdev does, and (2) point to the name and you get both thedescriptive text and help on how to change the name. I can only get (1) fromthe (<code>hfdr</code>, -5696) resource. Also, when I open my control panel, THEN point tothe icon, I get the default help message, as if my balloon help were notpresent. If the control panel isn't open, then the help is correct. Apple'scdevs don't do this; the correct help is displayed regardless of whether or notthe cdev is open. What's up?</p><p>The truth is that you cannot mimic the help given for Apple's cdevs. The Finderis special-cased for the items that Apple includes on its disk, and in theFinder help file you'll find all the help messages that go along with the cdevsand DAs and such. You'll also find some <code>'fmap'</code> resources. These basically pointthe Finder to the proper help message for each filetype/creator combinationthat Apple has. This is how the Finder knows to treat the icon specially. Youaren't supposed to modify these resources, so there is no way to mimic theApple's cdev help.</p><P><A HREF="#top">Back to top</A></p><h2>cdevs and foreign language balloons</h2><P>Date Written:  8/26/91</p><P>Last reviewed:  6/14/93</p><p>My cdev contains a <code>'STR#'</code> resource for each foreign language we support. Priorto Balloon Help, text was taken from the resource file by doing a<code>GetResource('STR#', BASE_ID + countryCode)</code>. Now, with Balloon Help, I have tohave fixed resource IDs in the <code>'hdfr'</code> and <code>'hdlg'</code> resources. It would be nice tobe able to tell the Help Manager to use the <code>BASE_ID</code> + <code>countryCode</code> selector,though as a workaround, the INIT associated with the cdev renames resources sothat the correct text is selected.</p><p>You can set the dialog resource number explicitly from the code. Use the<code>HMSetDialogResID</code> (dialog number + country code), and have a different 'hdlg'for each country.</p>         <a name="Downloads"></a>       <P><A HREF="#top">Back to top</A></p><h2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (60K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tb_540.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tb/tb_540.html%3Fid%3DDTS10002801-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tb/tb_540.html%3Fid%3DDTS10002801-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tb/tb_540.html%3Fid%3DDTS10002801-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
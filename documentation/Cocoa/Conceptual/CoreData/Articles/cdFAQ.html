<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Core Data Programming Guide: Core Data FAQ</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Core Data FAQ"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001802" title="Core Data FAQ"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../index.html" target="_top">Core Data Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="cdZ104Versioning.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="cdGlossary.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        
        <a name="//apple_ref/doc/uid/TP40001802-CJBDBHCB" title="Core Data FAQ"></a><hr /><H1>Core Data FAQ</H1><p>This document provides answers to questions frequently asked about Core Data.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-242718">Where does a Managed Object Context Come From?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-242985">I have a to-many relationship from Entity A to Entity B. How do I fetch the instances of Entity B related to a given instance of Entity A?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW1">How do I fetch objects in the same order I created them?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-243615">How do I copy a managed object from one context to another?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW3">I have a key whose value is dependent on values of attributes in a related entity—how do I ensure it is kept up to date as the attribute values are changes and as the relationship is manipulated?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-244036">How do I get undo/redo for free in my non-document-architecture-based app?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-244688">How do I create a user interface from an entity?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-244719">In Xcode’s predicate builder, why don’t I see any properties for a fetched property predicate?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW4">When I remove objects from a detail table view managed by an array controller, why are they not removed from the object graph?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-244217">How do I get the GUI to validate the data entered by the user?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW5">How do I initialize a store with default data?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW6">How efficient is Core Data?</a>
				
			<br/>
			
        
			
			
				<a href="cdFAQ.html#//apple_ref/doc/uid/TP40001802-244739">Core Data looks similar to EOF. What are the differences?</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001802-242718" title="Where does a Managed Object Context Come From?"></a><h2>Where does a Managed Object Context Come From?</h2><p>Where a managed object context comes from is entirely application-dependent. In a Cocoa document-based application using <code>NSPersistentDocument</code>, the persistent document typically creates the context, and gives you access to it through the <code><a href="../../../Reference/ApplicationKit/Classes/NSPersistentDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSPersistentDocument/managedObjectContext" target="_top">managedObjectContext</a></code> method.</p><p>In a single-window application, if you create your project using the standard project assistant, the application delegate (the instance of the AppDelegate class) again creates the context, and gives you access to it through the <code>managedObjectContext</code> method. In this case, however, the code to create the context (and the rest of the Core Data stack) is explicit. It is written for you automatically as part of the template.</p><p>Note that you should not use instances of subclasses of <code>NSController</code> directly to execute fetches (for example, you should not create an instance of <code>NSArrayController</code> specifically to execute a fetch). Controllers are for managing the interaction between your model objects and your human interface.  At the model object level, you should just use a managed object context to perform the fetches directly.</p><a name="//apple_ref/doc/uid/TP40001802-242985" title="I have a to-many relationship from Entity A to Entity B. How do I fetch the instances of Entity B related to a given instance of Entity A?"></a><h2>I have a to-many relationship from Entity A to Entity B. How do I fetch the instances of Entity B related to a given instance of Entity A?</h2><p>You don’t. More specifically, there is no need to explicitly <em>fetch</em> the destination instances, you simply invoke the appropriate key-value coding or accessor method on the instance of Entity A. If the relationship is called “widgets”, then if you have implemented a custom class with a similarly named accessor method, you simply write:</p><div class="codesample"><table><tr><td scope="row"><pre>NSSet *asWidgets = [instanceA widgets];<span></span></pre></td></tr></table></div><p>Otherwise you use key-value coding:</p><div class="codesample"><table><tr><td scope="row"><pre>NSMutableSet *asWidgets = [instanceA mutableSetValueForKey:@"widgets"];<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001802-SW1" title="How do I fetch objects in the same order I created them?"></a><h2>How do I fetch objects in the same order I created them?</h2><p>Objects in a persistent store are unordered. Typically you should impose order at the controller or view layer, based on an attribute such as creation date. If there is order inherent in your data, you need to explicitly model that.</p><a name="//apple_ref/doc/uid/TP40001802-243615" title="How do I copy a managed object from one context to another?"></a><h2>How do I copy a managed object from one context to another?</h2><p>First, note that in a strict sense you are not copying the object. You are conceptually creating an additional reference to the same underlying data in the persistent store.</p><p>To copy a managed object from one context to another, you can use the object’s object ID, as illustrated in the following example.</p><div class="codesample"><table><tr><td scope="row"><pre>NSManagedObjectID *objectID = [managedObject objectID];<span></span></pre></td></tr><tr><td scope="row"><pre>NSManagedObject *copy = [context2 objectWithID:objectID];<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001802-SW3" title="I have a key whose value is dependent on values of attributes in a related entity&acirc;&#128;&#148;how do I ensure it is kept up to date as the attribute values are changes and as the relationship is manipulated?"></a><h2>I have a key whose value is dependent on values of attributes in a related entity—how do I ensure it is kept up to date as the attribute values are changes and as the relationship is manipulated?</h2><p>There are many situations in which the value of one property depends on that of one or more other attributes in another entity. If the value of one attribute changes, then the value of the derived property should also be flagged for change. How you ensure that key-value observing notifications are posted for these dependent properties depends on which version of Mac OS X you’re using and the cardinality of the relationship.</p><a name="//apple_ref/doc/uid/TP40001802-SW9" title="Mac OS X v10.5 and later for a to-one relationship"></a><h3>Mac OS X v10.5 and later for a to-one relationship</h3><p>If you are targeting Mac OS X v10.5 and later, and there is a to-one relationship to the related entity, then to trigger notifications automatically you should either override <code><a href="../../../Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/keyPathsForValuesAffectingValueForKey:" target="_top">keyPathsForValuesAffectingValueForKey:</a></code> or implement a suitable method that follows the pattern it defines for registering dependent keys.</p><p>For example, you could override <code><a href="../../../Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/keyPathsForValuesAffectingValueForKey:" target="_top">keyPathsForValuesAffectingValueForKey:</a></code> as shown in the following example:</p><div class="codesample"><table><tr><td scope="row"><pre>+ (NSSet *)keyPathsForValuesAffectingValueForKey:(NSString *)key<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSSet *keyPaths = [super keyPathsForValuesAffectingValueForKey:key];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if ([key isEqualToString:@"fullNameAndDepartment"])<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSSet *affectingKeys = [NSSet setWithObjects:@"lastName", @"firstName",<span></span></pre></td></tr><tr><td scope="row"><pre>                                                     @"department.deptName", nil];<span></span></pre></td></tr><tr><td scope="row"><pre>        keyPaths = [keyPaths setByAddingObjectsFromSet:affectingKeys];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return keyPaths;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Or, to achieve the same result, you could just implement <code>keyPathsForValuesAffectingFullNameAndDepartment</code> as illustrated in the following example: </p><div class="codesample"><table><tr><td scope="row"><pre>+ (NSSet *)keyPathsForValuesAffectingFullNameAndDepartment<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    return [NSSet setWithObjects:@"lastName", @"firstName",<span></span></pre></td></tr><tr><td scope="row"><pre>                                 @"department.deptName", nil];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001802-SW10" title="Mac OS X v10.4 and to-many relationships on Mac OS X v10.5"></a><h3>Mac OS X v10.4 and to-many relationships on Mac OS X v10.5</h3><p>If you are targeting Mac OS X v10.4, <code><a href="../../../Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/clm/NSObject/setKeys:triggerChangeNotificationsForDependentKey:" target="_top">setKeys:triggerChangeNotificationsForDependentKey:</a></code> does not allow key-paths, so you cannot follow the pattern described above.</p><p>If you are targeting Mac OS X v10.5, <code><a href="../../../Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html#//apple_ref/occ/clm/NSObject/keyPathsForValuesAffectingValueForKey:" target="_top">keyPathsForValuesAffectingValueForKey:</a></code> does not allow key-paths that include a to-many relationship. For example, suppose you have an Department entity with a to-many relationship (<code>employees</code>) to a Employee, and Employee has a <code>salary</code> attribute. You might want the Department entity have a <code>totalSalary</code> attribute that is dependent upon the salaries of all the Employees in the relationship. You can <em>not</em> do this with, for example, <code>keyPathsForValuesAffectingTotalSalary</code> and returning <code>employees.salary</code> as a key.</p><p>There are two possible solutions in both situations: </p><ol class="ol"><li class="li"><p>You can use key-value observing to register the parent (in this example, Department) as an observer of the relevant attribute of all the children (Employees in this example). You must add and remove the parent as an observer as child objects are added to and removed from the relationship (see <span class="content_text"><a href="../../KeyValueObserving/Concepts/KVOBasics.html#//apple_ref/doc/uid/20002252" target="_top">Registering for Key-Value Observing</a></span>). In the  <code>observeValueForKeyPath:ofObject:change:context:</code> method you update the dependent value in response to changes, as illustrated in the following code fragment:</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (context == totalSalaryContext) {<span></span></pre></td></tr><tr><td scope="row"><pre>        [self updateTotalSalary];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>    // deal with other observations and/or invoke super...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)updateTotalSalary<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    [self setTotalSalary:[self valueForKeyPath:@"employees.@sum.salary"]];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)setTotalSalary:(NSNumber *)newTotalSalary<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (totalSalary != newTotalSalary) {<span></span></pre></td></tr><tr><td scope="row"><pre>        [self willChangeValueForKey:@"totalSalary"];<span></span></pre></td></tr><tr><td scope="row"><pre>        [totalSalary release];<span></span></pre></td></tr><tr><td scope="row"><pre>        totalSalary = [newTotalSalary retain];<span></span></pre></td></tr><tr><td scope="row"><pre>        [self didChangeValueForKey:@"totalSalary"];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>- (NSNumber *)totalSalary<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    return totalSalary;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>	</li><li class="li"><p>You can register the parent with the application's notification center as an observer of its managed object context. The parent should respond to relevant change notifications posted by the children in a manner similar to that for key-value observing.</p></li></ol><a name="//apple_ref/doc/uid/TP40001802-244036" title="How do I get undo/redo for free in my non-document-architecture-based app?"></a><h2>How do I get undo/redo for free in my non-document-architecture-based app?</h2><p>In a Core Data document-based application, the standard <code>NSDocument</code> undo manager is replaced by the document’s managed object context’s undo manager. In a non-document-based application, your window’s delegate can supply the managed object context’s undo manager using the <code>windowWillReturnUndoManager:</code> delegate method. If your window delegate has an accessor method for the managed object context (as is the case if you use the Core Data Application template), your implementation of <code>windowWillReturnUndoManager:</code> might be as follows.</p><div class="codesample"><table><tr><td scope="row"><pre>- (NSUndoManager *) windowWillReturnUndoManager:(NSWindow *)sender {<span></span></pre></td></tr><tr><td scope="row"><pre>    return [[self managedObjectContext] undoManager];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40001802-244688" title="How do I create a user interface from an entity?"></a><h2>How do I create a user interface from an entity?</h2><p>There are two ways to create a user interface from an entity: on Mac OS X v10.4 and later you use the Xcode modeling tool in conjunction with Interface Builder; on Mac OS X v10.5 and later you can also use just Interface Builder.</p><p>On Mac OS X v10.4 and later, in the Data Modeling Tool, you can Option-click an entity in the Data Modeling tool in Xcode and drag it to a window or box in Interface Builder. See <em><a href="../../NSPersistentDocumentTutorial/index.html#//apple_ref/doc/uid/TP40001799" target="_top">NSPersistentDocument Core Data Tutorial</a></em> for an example. You must make sure that Xcode is the foreground application when you do this—Option-clicking on Xcode while it is not foreground will make it foreground and hide all other applications, including Interface Builder.</p><p>On Mac OS X v10.5 and later, in Interface Builder you can drag a Core Data Entity item from the Library onto a window or box. Interface Builder then presents a panel that allows you to select the entity you want from the currently-open Xcode projects.</p><p>Note that you can also create and configure an <code>NSController</code> instance in Interface Builder. As in the case of creating a user interface, you Option-click an entity in the Data Modeling tool in Xcode (or select the Core Data Entity item from the Library), but you drag it to a the Interface Builder file window. For editing one object, an <code>NSObjectController</code> instance is created; for editing many objects, an <code>NSArrayController</code> instance is created.</p><p>It is important to realize that neither Xcode nor Interface Builder does anything “special” when you create an interface this way. You could create and configure the interface yourself if you wanted—it would just take longer.</p><a name="//apple_ref/doc/uid/TP40001802-244719" title="In Xcode&acirc;&#128;&#153;s predicate builder, why don&acirc;&#128;&#153;t I see any properties for a fetched property predicate?"></a><h2>In Xcode’s predicate builder, why don’t I see any properties for a fetched property predicate?</h2><p>If you want to create a predicate for a fetched property in the predicate builder in Xcode, but don’t see any properties, you have probably not set the destination entity for the fetched property.</p><a name="//apple_ref/doc/uid/TP40001802-SW4" title="When I remove objects from a detail table view managed by an array controller, why are they not removed from the object graph?"></a><h2>When I remove objects from a detail table view managed by an array controller, why are they not removed from the object graph?</h2><p>If an array controller manages the collection of objects at the destination of a relationship, then by default the remove method simply removes the current selection from the relationship. If you want removed objects to be deleted from the object graph, then you need to enable the “Deletes Objects On Remove” option for the <code>contentSet</code> binding.</p><p>(This is particularly relevant if you create a user interface by dragging entities from the Xcode data modeling tool. See <em><a href="../../NSPersistentDocumentTutorial/index.html#//apple_ref/doc/uid/TP40001799" target="_top">NSPersistentDocument Core Data Tutorial</a></em> for an example.)</p><a name="//apple_ref/doc/uid/TP40001802-244217" title="How do I get the GUI to validate the data entered by the user?"></a><h2>How do I get the GUI to validate the data entered by the user?</h2><p>Core Data validates all managed objects when a managed object context is sent a <code>save:</code> message. In a Core Data document-based application, this is when the user saves the document. You can have the GUI validate it as the data is being entered by selecting the “Validates Immediately” option for a value binding in the Interface Builder bindings inspector. If you establish the binding programmatically, you supply in the binding options dictionary a value of <code>YES</code> (as an <code>NSNumber</code> object) for the key <code><a href="../../../Reference/ApplicationKit/Protocols/NSKeyValueBindingCreation_Protocol/Reference/Reference.html#//apple_ref/c/data/NSValidatesImmediatelyBindingOption" target="_top">NSValidatesImmediatelyBindingOption</a></code> (see <span class="content_text"><a href="../../../Reference/CocoaBindingsRef/Concepts/BindingsOptions.html#//apple_ref/doc/uid/20002304" target="_top">Binding Options</a></span>).</p><p>For details of how to write custom validation methods, see the subclassing notes for <code><a href="../../../Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/cl/NSManagedObject" target="_top">NSManagedObject</a></code>.</p><a name="//apple_ref/doc/uid/TP40001802-SW5" title="How do I initialize a store with default data?"></a><h2>How do I initialize a store with default data?</h2><p>There are two issues here: creating the data, and ensuring the data is imported only once.</p><p>There are several ways to create the data. </p><ul class="ul"><li class="li"><p>You can create the managed objects directly in code (as trivially illustrated in <em><a href="../../NSPersistentDocumentTutorial/index.html#//apple_ref/doc/uid/TP40001799" target="_top">NSPersistentDocument Core Data Tutorial</a></em>).</p></li><li class="li"><p>You can create a property list—or some other file-based representation—of the data, and store it as an application resource. When you want to use it, you must open the file and parse the representation to create managed objects.</p></li><li class="li"><p>You can create a separate persistent store that contains the default data. When you want to use it, you must copy the objects from the defaults store to the newly-created store.</p></li></ul><p>There are also several ways to ensure that the defaults are imported only once. If you are creating a document-based application using , you can follow the guideline described in <em><a href="../../NSPersistentDocumentTutorial/index.html#//apple_ref/doc/uid/TP40001799" target="_top">NSPersistentDocument Core Data Tutorial</a></em> (that is, you initialize the defaults in <code><a href="../../../Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/initWithType:error:" target="_top">initWithType:error:</a></code>).</p><p>If you are using a non-document-based application and started with the standard application template then after these lines of code:</p><div class="codesample"><table><tr><td scope="row"><pre>if ( ![fileManager fileExistsAtPath:applicationSupportFolder isDirectory:NULL] )<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    [fileManager createDirectoryAtPath:applicationSupportFolder attributes:nil];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>url = [NSURL fileURLWithPath: [applicationSupportFolder stringByAppendingPathComponent: @"Delete.xml"]];<span></span></pre></td></tr></table></div><p>you can add a check to determine whether the file at the url exists.  If it doesn't, you need to import the data.</p><p>If there is some reason that there might be a possibility that the store (hence file) gets created but the data is not imported, then you might consider adding a metadata flag to the store. You can check the metadata (using <code><a href="../../../Reference/CoreDataFramework/Classes/NSPersistentStoreCoordinator_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/clm/NSPersistentStoreCoordinator/metadataForPersistentStoreWithURL:error:" target="_top">metadataForPersistentStoreWithURL:error:</a></code>) more efficiently than executing a fetch (and it does not require you to hard code any default data values). </p><a name="//apple_ref/doc/uid/TP40001802-SW6" title="How efficient is Core Data?"></a><h2>How efficient is Core Data?</h2><p>Throughout the development of Core Data, the engineering team compared the runtime performance of a generic Core Data application with that of a similar application developed without using Core Data. In general, the Core Data implementation performed better. There may nevertheless be opportunities for further optimization, and the team continues to pursue performance aggressively. For a discussion of how you can ensure you use Core Data as efficiently as possible, see <span class="content_text"><a href="cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW1">“Core Data Performance.”</a></span></p><a name="//apple_ref/doc/uid/TP40001802-244739" title="Core Data looks similar to EOF. What are the differences?"></a><h2>Core Data looks similar to EOF. What are the differences?</h2><p>Core Data and EOF (the Enterprise Objects Framework that ships with WebObjects) share a common heritage, but have different goals. EOF is a Java-based framework that connects as a client to a database server. Core Data is an Objective-C-based framework designed to support desktop application development. Core Data supports a number of features not supported by EOF, and vice-versa.</p><a name="//apple_ref/doc/uid/TP40001802-244752" title="Features Supported Only by EOF"></a><h3>Features Supported Only by EOF</h3><p>EOF allows you to use custom SQL, shared editing contexts, and nested editing contexts. Core Data does not provide the equivalent of an <code>EOModelGroup</code>—the <code>NSManagedObjectModel</code> class provides methods for merging models from existing models, and for retrieving merged models from bundles.</p><p>EOF supports pre-fetching and batch faulting of relationships, on Mac OS X v10.4 Core Data does not. On Mac OS X v10.5, when you create a fetch request, you can use <code><a href="../../../Reference/CoreDataFramework/Classes/NSFetchRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFetchRequest/setRelationshipKeyPathsForPrefetching:" target="_top">setRelationshipKeyPathsForPrefetching:</a></code> to specify key paths for relationships that should be fetched with the target entity.</p><a name="//apple_ref/doc/uid/TP40001802-244771" title="Features Supported Only by Core Data"></a><h3>Features Supported Only by Core Data</h3><p>Core Data supports fetched properties; multiple configurations within a managed object model; local stores; store aggregation (the data for a given entity may be spread across multiple stores); customization and localization of property names and validation warnings; and the use of predicates for property validation.</p><a name="//apple_ref/doc/uid/TP40001802-244785" title="Class Mapping"></a><h3>Class Mapping</h3><p>There are parallels between many of the classes in Core Data and EOF.</p><ul class="spaceabove"><li class="li"><p><code>NSManagedObject</code> corresponds to <code>EOGenericRecord</code>.</p></li><li class="li"><p><code>NSManagedObjectContext</code> corresponds to <code>EOEditingContext</code>.</p></li><li class="li"><p><code>NSManagedObjectModel</code> corresponds to <code>EOModel</code>.</p></li><li class="li"><p><code>NSPersistentStoreCoordinator</code> corresponds to <code>EOObjectStoreCoordinator</code>.</p></li><li class="li"><p><code>NSEntityDescription</code>, <code>NSPropertyDescription</code>, <code>NSRelationshipDescription</code>, and <code>NSAttributeDescription</code> correspond to <code>EOEntity</code>, <code>EOProperty</code>, <code>EORelationship</code>, and <code>EOAttribute</code> respectively.</p></li></ul><a name="//apple_ref/doc/uid/TP40001802-SW7" title="Change Management"></a><h3>Change Management</h3><p>There is an important behavioral difference between EOF and Core Data with respect to change propagation. In Core Data, peer managed object contexts are <em>not</em> "kept in sync" in the same way as editing contexts in EOF.  Given two managed object contexts connected to the same persistent store coordinator, and with the "same" managed object in both contexts, if you modify one of the managed objects then save, the other is <em>not</em> re-faulted (changes are not propagated from one context to another). If you modify then save the other managed object, then (at least if you use the default merge policy) you will get an optimistic locking failure.</p><a name="//apple_ref/doc/uid/TP40001802-SW8" title="Multi-Threading"></a><h3>Multi-Threading</h3><p>The policy for locking a Core Data managed object context in a multithreaded environment is not the same policy as for an editing context in EOF.</p>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="cdZ104Versioning.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="cdGlossary.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-03-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html%3Fid%3DTP40001075-5.6&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html%3Fid%3DTP40001075-5.6&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html%3Fid%3DTP40001075-5.6&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

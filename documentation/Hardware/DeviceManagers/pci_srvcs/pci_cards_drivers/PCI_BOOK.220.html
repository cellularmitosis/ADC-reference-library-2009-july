<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Driver Operation</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.219.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.21f.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.221.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H1.Heading1"><A NAME="pgfId=3426"> </A>Driver Operation</H1><P CLASS="T1.Text1"><A NAME="pgfId=3427"> </A>Once your driver is installed in a stream and opened, it is ready for action. From that point on, the driver will respond to messages according to the interface specifications (TPI or DLPI) that it supports.</P><P CLASS="T1.Text1"><A NAME="pgfId=3428"> </A>Drivers have one additional requirement they must observe. If they are running as a result of a primary interrupt, they must call the <TT CLASS="cv">OTEnterInterrupt</TT> function before making any Open Transport calls. They must call <TT CLASS="cv">OTLeaveInterrupt</TT> before exiting their current interrupt level, after they have made their final call to any Open Transport routines.</P><P CLASS="T1.Text1"><A NAME="pgfId=3429"> </A>It is strongly suggested that the appropriate Open Transport functions be used for timing services and secondary interrupt services, so they will be most compatible with future versions of Mac&nbsp;OS. Open Transport is also compatible with current non-PCI Macintosh platforms.</P><P CLASS="T1.Text1"><A NAME="pgfId=3430"> </A> The Open Transport secondary interrupt services do not have the same restrictions as some other services, because any memory allocations needed are handled early. This prevents these functions from failing at inconvenient times.</P><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.221.html#pgfId=3431" CLASS="Hypertext">Interrupt-Safe Functions</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.222.html#pgfId=3456" CLASS="Hypertext">Secondary Interrupt Services</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.223.html#pgfId=3469" CLASS="Hypertext">Timer Services</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.224.html#pgfId=3494" CLASS="Hypertext">Atomic Services</A></H2><H2 CLASS="H2.Heading2TOC"><A HREF="PCI_BOOK.225.html#pgfId=3521" CLASS="Hypertext">Power Services</A></H2><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.219.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.21f.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.221.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
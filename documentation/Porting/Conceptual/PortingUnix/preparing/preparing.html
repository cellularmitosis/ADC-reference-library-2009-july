<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Porting UNIX/Linux Applications to Mac OS X: Preparing to Port</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Preparing to Port"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002849" title="Preparing to Port"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../Darwin/index.html#//apple_ref/doc/uid/TP30000440-TP30000422" target="_top">Darwin</a> &gt; <a href="../../../../Darwin/Porting-date.html#//apple_ref/doc/uid/TP30000440-TP30000422-TP30000553" target="_top">Porting</a> &gt; <a href="../intro/intro.html#//apple_ref/doc/uid/TP40002847-TPXREF101">Porting UNIX/Linux Applications to Mac OS X</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../background/background.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../compiling/compiling.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002849-TPXREF101" title="Preparing to Port"></a><h1>Preparing to Port</h1><p>A seasoned UNIX developer recognizes that no matter how similar two UNIX-based operating systems may be, there are always details that set one apart from another.</p><p>This chapter highlights areas to be aware of when compiling your code base for Mac OS X. It notes details about compiler flags that are important to you, and gives insight into how to link different parts of your code in Mac OS X. Many of these topics are covered more extensively in other resources as noted.</p><p>With few exceptions, this chapter applies to all varieties of UNIX developers. However, there are a few things that are specific to a given audience. These are pointed out as they appear.</p><p>If you are porting an open source application, you should first check to see if any of the open source port collections have already ported the application to avoid duplicating effort. You should also consider including your port in one of these collections to make it easier for others to take advantage of it. Finally, you should always make your changes available upstream to the original open source project for inclusion in future releases.</p><p>Some of the Darwin-based open source port collections include:</p><ul class="ul"><li class="li"><p>MacPorts (<span class="content_text"><a href="http://www.macports.org/" target="_blank">http://www.macports.org/</a></span>)</p></li><li class="li"><p>Fink (<span class="content_text"><a href="http://fink.sourceforge.net/" target="_blank">http://fink.sourceforge.net/</a></span>)</p></li><li class="li"><p>GNU-Darwin (<span class="content_text"><a href="http://www.gnu-darwin.org/" target="_blank">http://www.gnu-darwin.org/</a></span>)</p></li></ul><p>For more information on these port collections, visit their websites.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_34" title="Important:"></a><p><strong>Important:</strong>&nbsp;This information is provided solely for your convenience, and that mention of these projects in no way represents any recommendation or endorsement by Apple.</p><p></p></div><p>Before you bring the basic port of your code to Mac OS X, make sure that you have the requisite tools for the task. It helps to know what is and isn’t available to you by default.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="preparing.html#//apple_ref/doc/uid/TP40002849-SW1">The Mac OS X Command-Line Environment</a>
				
			<br/>
			
        
			
			
				<a href="preparing.html#//apple_ref/doc/uid/TP40002849-CJBGEIDC">Installing the Mac OS X Developer Tools</a>
				
			<br/>
			
        
			
			
				<a href="preparing.html#//apple_ref/doc/uid/TP40002849-BBCJABGC">Building Makefile Projects With Xcode</a>
				
			<br/>
			
        
			
			
				<a href="preparing.html#//apple_ref/doc/uid/TP40002849-TPXREF118">Windowing Environment Considerations</a>
				
			<br/>
			
        
			
			
				<a href="preparing.html#//apple_ref/doc/uid/TP40002849-SW2">Working with 64-bit Software</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002849-SW1" title="The Mac OS X Command-Line Environment"></a><h2>The Mac OS X Command-Line Environment</h2><p>The most important thing to do before porting an application is to familiarize yourself with the Mac OS X environment. In particular, you should familiarize yourself with the System Preferences application (and customize your computer to suit) and the Terminal application (to obtain a command-line interface).</p><p>The System Preferences application is located in the <code>Applications</code> folder at the root level of your hard drive. The <code>Terminal</code> application is located in the <code>Utilities</code> folder (which is within the <code>Applications</code> folder at the root level of your hard drive).</p><p>Once you have a Terminal window open, you can take advantage of a basic selection of common tools, assuming that they are installed. Before using Mac OS X as a development platform, you should make sure that the BSD subsystem is installed. On Mac OS X v10.4, this option is installed by default, but on previous versions, it was not.</p><p>You can check for this by looking for the BSD package receipt, <code>BSD.pkg</code>, in <code>/Library/Receipts</code>. If this receipt is not present on your system, you must reinstall Mac OS X. When you do, you must customize the installation by checking the BSD Subsystem checkbox.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_35" title="Note"></a><p><strong>Note:</strong>&nbsp;If you have already installed software updates, you cannot simply go back and reinstall over the existing system because of the potential for version conflicts with the software updates. If the BSD subsystem package is not installed, you will have to do an “archive and install” installation, then reinstall the software updates. For more information, see <span class="content_text"><a href="http://docs.info.apple.com/article.html?artnum=107120" target="_blank">Mac OS X: About the Archive and Install feature</a></span>.</p></div><p>With the BSD subsystem installed, a look through <code>/bin</code> and <code>/usr/bin</code> should reveal a familiar environment. Welcome home.</p><a name="//apple_ref/doc/uid/TP40002849-CJBGEIDC" title="Installing the Mac OS X Developer Tools"></a><h2>Installing the Mac OS X Developer Tools</h2><p>Because Mac OS X has a BSD core, you have access to the numerous open source tools that you are already familiar with (like the GNU tools<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_146"></a>, for example).</p><p>The Mac OS X Xcode Tools package provides additional tools that you will need to install to round out your development environment. These are not part of the default installation, but are essential to you. They contain some of the most important tools, such as the compiler<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_147"></a><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_148"></a> (gcc) and debugger<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_149"></a><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_150"></a> (gdb).</p><p>Most (if not all) of the tools described in this document are part of the Xcode Tools installation, so if you don’t find <code>autoconf</code> or <code>make</code>, for example, that probably means you don’t have Xcode Tools installed.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_36" title="Important:"></a><p><strong>Important:</strong>&nbsp;If you are using makefiles for compilation, you should install Xcode in the default location (<code>/usr</code>). If you do not, you may have to do extra work to get your scripts to run the compiler, linker, and so on in a nonstandard location.</p><p>If you are compiling UNIX applications, be sure to select the optional BSD SDK package when installing Xcode tools. This tells the installer to install a number of BSD-level headers, without which many UNIX applications will not compile.</p><p></p></div><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_151"></a><p>You can find the Xcode Tools Installer on your Mac OS X DVD (or as one of the CDs in the CD version). In addition, you can always obtain the very latest version online from the Apple Developer Connection (ADC) website, <span class="content_text"><a href="http://connect.apple.com" target="_blank">http://connect.apple.com</a></span>. You need an ADC account to download the Developer Tools. Free accounts are available for those who just need access to the tools.</p><p>After installing the Mac OS X Developer Tools, you will have a selection of new tools to take advantage of:</p><ul class="ul"><li class="li"><p>Inside <code>/Developer/Tools</code> are many Mac OS X-specific command-line tools. Documentation is provided in the form of man pages.</p></li><li class="li"><p><code>/usr/bin</code> now contains more command-line tools than were supplied by the BSD package alone, most notably gcc<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_152"></a> and gdb. <code>/usr/bin/cc</code> defaults to gcc 3 in Mac OS X version 10.2 and later, but gcc 2.95.2 is also available. See <span class="content_text"><a href="../compiling/compiling.html#//apple_ref/doc/uid/TP40002850-BCIGGEEA">“Choosing a Default Compiler ”</a></span> for more information.</p></li><li class="li"><p><code>/Developer/Applications</code> contains a wide assortment of graphical tools and utilities. Key among these are the following:</p><ul class="simple-spaceabove"><li><p>Xcode<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_153"></a> is a graphical integrated development environment for applications in multiple programming languages.</p></li><li><p>Interface Builder<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_154"></a> provides a simple way to build complex user interfaces. </p></li><li><p>FileMerge <a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_155"></a>lets you graphically compare and merge files and directories.</p></li><li><p>IORegistryExplorer<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_156"></a> helps you determine which devices are registered with the I/O KIT. See <span class="content_text"><a href="../additionalfeatures/additionalfeatures.html#//apple_ref/doc/uid/TP40002856-BAJHDECF">“Device Drivers”</a></span> for a discussion of the I/O Kit.</p></li><li><p>MallocDebug<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_157"></a> analyzes all allocated memory in an application. It can measure the memory allocated since a given point in time and detect memory leaks</p></li><li><p>PackageMaker<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_158"></a> builds easily distributable Mac OS X packages.</p></li></ul></li></ul><p>Documentation for these tools is available from the Apple Technical Publications website.</p><a name="//apple_ref/doc/uid/TP40002849-BBCJABGC" title="Building Makefile Projects With Xcode "></a><h2>Building Makefile Projects With Xcode </h2><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_159"></a><p>Mac OS X-native applications can be built in a number of environments. Most UNIX utilities are built using makefiles, though some are built using build scripts, imakefiles, or various other mechanisms.</p><p>If you are porting a UNIX command-line tool for personal use, you probably want to continue using the existing build environment, because keeping multiple build environments synchronized can be tricky at best. However if you are porting a more extensive tool and you plan to add a Mac OS X GUI to the tool, you may find it more convenient to work with the project in a development environment such as Xcode.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_37" title="Note"></a><p><strong>Note:</strong>&nbsp;These instructions apply to the latest version of Xcode.</p></div><p>Although Xcode keeps track of build settings in its own preferences files for information beyond what could normally be maintained in a makefile, it can also work closely with your project’s makefiles. If you want to use Xcode for development in Mac OS X, you can include a makefile in a Xcode project as follows:</p><ol class="ol"><li class="li"><p>Launch Xcode.</p></li><li class="li"><p>Choose New Project from the File menu.</p></li><li class="li"><p>Select whatever project type you are targeting. If you ultimately want an application, select something like Cocoa Application. If you are just trying to build a command-line utility, select one of the tools—for example, Standard Tool.</p></li><li class="li"><p>Follow the prompts to name and save your project. A new default project of that type is opened.</p></li><li class="li"><p>Open the Targets disclosure triangle and delete any default targets that may exist.</p></li><li class="li"><p>From the Project menu, Choose New Target.</p></li><li class="li"><p>Select “External Target” from the list. If this is not shown in the “Special Targets” list, you are not running the latest version of Xcode. Upgrade first.</p></li><li class="li"><p>Follow the prompts to name that target. When you have done this, a target icon with the name you just gave it appears in the Targets pane of the open Xcode window.</p></li><li class="li"><p>Double-click that new target. You should now see a new window with the build information for this target. This is <em>not</em> the same thing as clicking info. You <em>must</em> double-click the target itself.</p></li><li class="li"><p>In the “Custom Build Command” section of the target inspector, change the field called “Directory” to point to the directory containing your makefile, and change any other settings as needed. For example, in the Custom Build Settings pane, you could change Build Tool from <code>/usr/bin/gnumake</code> to <code>/usr/bin/bsdmake</code>. More information on the fields is available in Xcode Help.</p></li><li class="li"><p>Change the active target to your new target by choosing "Set Active Target" from the Project menu.</p></li><li class="li"><p>Add the source files to the project. To do this, first open the disclosure triangle beside the “Source” folder in the left side of the project window. Next, drag the folder containing the sources from the Finder into that “Source” folder in Xcode. Tell Xcode not to copy files. Xcode will recursively find all of the files in that folder. Delete anything you don’t want listed.</p></li><li class="li"><p>When you are ready to build the project, click the Build and Run button in the toolbar, select Build from the Build menu, or just press Command-B.</p></li><li class="li"><p>Once the project is built, tell Xcode where to find the executable by choosing “New Custom Executable” from the Project menu. Choose the path where the executable is located, then add the name of the executable.</p></li><li class="li"><p>Run the resulting program by pressing Command-R.</p></li></ol><p>This should get you started in bringing your application into the native build environment of Mac OS X.<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_160"></a></p><a name="//apple_ref/doc/uid/TP40002849-TPXREF118" title="Windowing Environment Considerations "></a><h2>Windowing Environment Considerations </h2><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_161"></a><p>Before you compile an application in Mac OS X, be aware that the Mac OS X native windowing and display subsystem, Quartz<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_162"></a>, is based on the Portable Document Format (PDF<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_163"></a>). Quartz consists of a lightweight window server as well as a graphics rendering library for two-dimensional shapes. The window server features device-independent color and pixel depth, layered compositing, and buffered windows. The rendering model is PDF based.</p><p>Quartz is not an X Window System implementation. If you need an X11R6<a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_164"></a> implementation, you can easily install one. For more information, see <span class="content_text"><a href="../unix_environments/unix_environments.html#//apple_ref/doc/uid/TP40002853-TPXREF109">“X11R6.”</a></span></p><p>Information on the graphical environments available to you can be found in <span class="content_text"><a href="../graphicalports/graphicalports.html#//apple_ref/doc/uid/TP40002851-TPXREF101">“Choosing a Graphical Environment for Your Application”</a></span><a name="//apple_ref/doc/uid/TP40002849-DontLinkElementID_165"></a> along with some things to consider when choosing a graphical environment.</p><a name="//apple_ref/doc/uid/TP40002849-SW2" title="Working with 64-bit Software"></a><h2>Working with 64-bit Software</h2><p>Beginning in version 10.4, Mac OS X supports execution of 64-bit command-line tools. It is also possible to use a 32-bit Mac OS X front-end application to provide a user interface through careful use of client-server communication.</p><p>This document primarily covers general porting issues. Issues specific to 64-bit computing are beyond the scope of this document. For additional information on porting 64-bit software to Mac OS X, see the document <em><a href="../../../../Darwin/Conceptual/64bitPorting/index.html#//apple_ref/doc/uid/TP40001064" target="_top">64-Bit Transition Guide</a></em>.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../background/background.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../compiling/compiling.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-04-08<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Porting/Conceptual/PortingUnix/preparing/preparing.html%3Fid%3DTP30001003-2.13&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Porting/Conceptual/PortingUnix/preparing/preparing.html%3Fid%3DTP30001003-2.13&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Porting/Conceptual/PortingUnix/preparing/preparing.html%3Fid%3DTP30001003-2.13&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
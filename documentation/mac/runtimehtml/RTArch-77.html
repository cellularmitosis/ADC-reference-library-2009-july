<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Universal Procedure Pointers and Routine Descriptors </TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING77></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="RTArch-76.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-78.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="RTArch-2.html"><B>Mac OS Runtime Architectures</B></A> / <BR><DD><A HREF="RTArch-75.html"><B>Chapter 6 - The Mixed Mode Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING77-0></A>
<H1>Universal Procedure Pointers and Routine Descriptors </H1>
 While the Mixed Mode Manager is the mechanism for switching between CFM-based code and classic 68K code, the actual interface between the two types of code is the <A NAME=MARKER-2-21></A>universal procedure pointer. A universal procedure pointer may be either of the following:<P>
<UL>
<LI>A pointer to classic 68K code.
<LI>A pointer to <A NAME=MARKER-2-22></A>a routine descriptor, a data structure that describes the address of the called routine, its parameter signature, and its calling conventions. The Mixed Mode Manager uses the routine descriptor as a key to translate between the CFM-based and classic 68K calling conventions.<P>
</UL>
 Both the calling code and the supplier of the called routine must agree to pass universal procedure pointers to each other. In general, you do not have to worry about which flavor of universal procedure pointer you are passing; as long as you pass a pointer of type <CODE>UniversalProcPtr</CODE>, the Mixed Mode Manager handles the rest and makes the mode switch when necessary. How you set up a universal procedure pointer varies depending on the type of code that initiates the call. <P>
<DL>
<DT><B>Note</B>
<DD>Note that the choices for universal procedure pointers reflect the Mixed Mode Manager rules described earlier. Classic 68K code can pass universal procedure pointers without any code modification because all classic 68K procedure pointers are simply redefined to be universal procedure pointers.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DL>
<DT><A HREF="RTArch-78.html#HEADING78-0">CFM-Based Code Originates the Call</A>
<DD>
<DT><A HREF="RTArch-79.html#HEADING79-0">Classic 68K Code Originates the Call</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="RTArch-76.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="RTArch-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="RTArch-147.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="RTArch-78.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="RTArch-3.html">&copy; Apple Computer, Inc.</A><br>11 MARCH 1997<P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML> 

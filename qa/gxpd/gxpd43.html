<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A GXPD43: Using GXNewPaperType</title><meta name="keywords" content="Mac OS 7 QuickDraw GX using GXNewPaperType papertype flags"><meta name="Description" content="Technical Q&amp;A GXPD43: NOTE: QuickDraw GX printer driversand GX printing extensions will not be supported in Mac OS8.0 or in future Mac OS releases. Q&amp;A identifies a bug inQuickDraw GX that makes a papertype, created by GXNewPaperType,not show up in the page set-up dialog. Q&amp;A provides a workaroundfor this bug, which includes a code fragment that sets thepapertype's flags."><meta name="categories" content="QuickDraw GX"><meta name="week-posted" content="Jan 6, 1997 - Jan 10, 1997"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001258" title="Using GXNewPaperType"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalqas/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/index.html" target="_blank">Reference Library > Graphics & Imaging</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A GXPD43</div>
<div id="pageheadsub">Using GXNewPaperType</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->		<!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600><TR> <td align="left"><hr width=500 align=center><TABLE BORDER="0"><TR>	<td bgcolor="#e6e6e6" align=left>		<B>Important for all Apple Printing and Graphics Developers: </B><p id=p4>		The information in this Technical Q &amp; A is still relevant up to and including		<A HREF="../../technotes/tn/tn1090.html" target="_blank">Mac OS 7.6</A>		with QuickDraw GX 1.1.5. Beginning with the release of Mac OS 8.0,		however, Apple plans to deliver a system which incorporates QuickDraw GX		graphics and typography <B>only</B>. QuickDraw GX printer drivers and GX printing		extensions will <B>not</B> be supported in Mac OS 8.0 or in future Mac OS releases. Apple's		goal is to simplify the user experience of printing by unifying the Macintosh		graphic and printing architectures and standardizing on the classic Printing		Manager. </P>				For details on Apple's official announcement, refer to 		<A HREF="../../technotes/gxchange.html" target="_blank">		&lt;/dev/technotes/gxchange.html&gt;</A>	</TD></TR></TABLE><BR><p id = p2>Q:  How can I create a new GX papertype on the fly within my QuickDraw GX application? I use <CODE>GXNewPaperType</CODE>, but for some reason the new papertype doesn't show up in the page set-up dialog.</p><p id=p4>A: This is actually related to a known bug in QuickDraw GX. If an application uses <CODE>GXNewPaperType</CODE> to create an application-defined paper type, GX doesn't find it in the page set-up dialog as it should. This is because GX is setting up the paper type flags incorrectly. But there is a workaround....</p><p id=p4>You need to create a job and custom <code>paperType</code> and flatten it to a file within the extensions folder. <CODE>GXNewPaperType</CODE> will create a valid <code>paperType</code>, but it does not set up the creator and the <code>paperType</code> flags correctly. Therefore, after calling <CODE>GXNewPaperType</CODE> to set up the new custom <code>paperType</code>, you'll need to set the <code>paperTypeFlags</code> and the creator. The following code fragments will do the trick.</P><p id=p4>The globals used to set up the creator and <code>paperType</code> flags:</P><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>OSErr           collectionErr = noErr;Str255          paperTypeName;gxRectangle     paperDims;gxRectangle     pageDims;Collection      paperTypeCollection;gxFlagsInfo     paperTypeFlags;gxCreatorInfo   paperTypeCreator;////  We use this information to check to make sure that our//  new paperType was set up as we thought after calling GXNewPaperType//GXGetPaperTypeName( theNewPaperType, paperTypeName );GXGetPaperTypeDimensions( theNewPaperType, &amp;pageDims, &amp;paperDims);////  We need to set our new paperType's flags and creator to allow//  GX to recognize it.//paperTypeCollection = GXGetPaperTypeCollection( theNewPaperType );paperTypeFlags.flags = gxOldAndNewPaperTypeFlag;collectionErr = AddCollectionItem( paperTypeCollection, gxFlagsTag,                                   gxPrintingTagID, sizeof(gxFlagsInfo),                                   &amp;paperTypeFlags );paperTypeCreator.creator = gxUserPaperType;collectionErr = AddCollectionItem( paperTypeCollection, gxCreatorTag,                                   gxPrintingTagID, sizeof(gxCreatorInfo),                                   &amp;paperTypeCreator );</pre>	</TD></TR></TABLE></CENTER>									<p id=p4>At this point, when a print dialog is displayed, the <code>paperType</code> list is recreated each time. This behavior ensures that any newly created <code>paperType</code> will be found from within a running app which is creating <code>paperTypes</code>.</P><p id=p4>After you have created the custom <code>paperType</code> and valid job, you'll need to call <CODE>GXFlattenJob</CODE> and <CODE>GXFlattenPaperType</CODE> and save this info into a file within the extension folder. Then it should show up in your page setup paper type list.</P></td></tr></table></center><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[Jan 09 1997]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/gxpd/gxpd43.html%3Fid%3DDTS10001258-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/gxpd/gxpd43.html%3Fid%3DDTS10001258-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/gxpd/gxpd43.html%3Fid%3DDTS10001258-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --> <hr width=500 align=center> </BODY> </HTML>
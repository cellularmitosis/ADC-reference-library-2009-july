<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Saving Object Changes to the Database</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.28.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2a.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=612407"> </A><A NAME="28036"> </A>Saving Object Changes to the Database</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=612408"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=612409"> </A>Describes how to save changes made to the enterprise objects managed by an EOEditingContext.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=612410"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=612411"> </A>Changes to enterprise objects are not reflected in the database until you invoke the <TT CLASS="Code">saveChanges</TT> method on the EOEditingContext that manages the objects. In a WebObjects application, the session's default editing context generally manages all of the enterprise objects in that session. To get the default editing context from within a component use</P><PRE CLASS="Code"><A NAME="pgfId=618025"> </A>editingContext = <TT CLASS="Code">this.session().defaultEditingContext();</TT></PRE><P CLASS="Body"><A NAME="pgfId=618030"> </A>To save your changes from your user interface, you need to create an action method that invokes <TT CLASS="Code">saveChanges</TT> as shown below.</P><PRE CLASS="Code"><A NAME="pgfId=618035"> </A><TT CLASS="Code">public WOComponent saveChanges() {</TT><A NAME="pgfId=618128"> </A><TT CLASS="Code">    this.session().defaultEditingContext().saveChanges();</TT><A NAME="pgfId=618129"> </A><TT CLASS="Code">    return null;</TT><A NAME="pgfId=618130"> </A><TT CLASS="Code">}</TT></PRE><P CLASS="Body"><A NAME="pgfId=612413"> </A>You can bind this method to the action attribute of a user interface dynamic element like WOHyperlink using WebObjects Builder.</P><P CLASS="Body"><A NAME="pgfId=618075"> </A>Your save can fail and raise an exception for many reasons. For example, the user might enter insufficient data, or the database might be down. When an exception is raised, the default WebObjects behavior is to display a page containing debugging information. This information is useful for the developer but inappropriate for the end user. The following code shows how to catch a save exception so you can present the user with an informative error message. This code is functionally identical to the code generated by the database wizard.</P><DIV><H4 CLASS="Code-Listing"><A NAME="pgfId=618076"> </A>Saving changes (Java)</H4><PRE CLASS="Code"><A NAME="pgfId=612458"> </A>public void saveChanges() throws Exception {<A NAME="pgfId=618131"> </A>  try {<A NAME="pgfId=618132"> </A>    this.session().defaultEditingContext().saveChanges();<A NAME="pgfId=618134"> </A>  }<A NAME="pgfId=618133"> </A>  catch (Exception exception) {<A NAME="pgfId=618135"> </A>    // An error occurred during the save. You could present an error<A NAME="pgfId=618136"> </A>    // page which explains the reason for the save failure. The default<A NAME="pgfId=618137"> </A>    // behavior is to raise an exception which presents a diagnostic page.<A NAME="pgfId=618138"> </A>    System.err.println(&quot;Cannot save changes &quot;);<A NAME="pgfId=618139"> </A>    throw exception;<A NAME="pgfId=618140"> </A>  }<A NAME="pgfId=618141"> </A>}</PRE></DIV></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=618093"> </A>See Also</H2></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=618104"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=612431"> </A>		How do I save changes from objects to my database?</LI><LI CLASS="Bulleted"><A NAME="pgfId=612432"> </A>		How can I handle an exception as the result of a save?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=612433"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=618150"> </A>Save</LI><LI CLASS="Bulleted"><A NAME="pgfId=618158"> </A>Changes</LI><LI CLASS="Bulleted"><A NAME="pgfId=618159"> </A>Exception</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=612438"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=612439"> </A>15 July, 1998. Carmine Marino. First Draft.<BR>26 February, 1999. Clif Liu. Second Draft.</P><P CLASS="Body"><A NAME="pgfId=602450"> </A></P></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.28.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2a.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
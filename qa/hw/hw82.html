<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 06-20-02--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A HW82: SDRAM Problems With Self-Powered USB Devices</title>	<meta name="keywords" content="USB, SDRAM, Self-Powered, PC100, Self Powered, DIMM, G4">	<meta name="Description" content="Technical Q&amp;A HW82: Non-compliant, self-powered USB devicesplugged into a G4 causes certain low-voltage-sensitive SDRAMto freeze and crash."><meta name="categories" content="Hardware"><meta name="week-posted" content="Feb 28, 2000 - Mar 3, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10001354" title="SDRAM Problems With Self-Powered USB Devices"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/HardwareDrivers/index.html">Hardware & Drivers</a> &gt; <a href="../../technicalqas/HardwareDrivers/idxUSB-date.html">USB</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A HW82</div>
<div id="pageheadsub">SDRAM Problems With Self-Powered USB Devices</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment -->			<!-- begin_content --> <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=600><TR> <td align="left"><hr width=500 align=center><p id=p2>Q: I have heard that there is a specific condition where a USB device plugged into a G4 causes certain SDRAM to freeze and crash.  Could you tell me how to identify or avoid this condition?</p><p id=p4>A: The issue you're speaking about can be found in the TIL article #75016at the following Apple URL:<BR><BR><A HREF="http://docs.info.apple.com/article.html?artnum=75016" target="_blank">http://docs.info.apple.com/article.html?artnum=75016</A></p><p id=p4>*This problem is somewhat rare and like a formula; it needs the right mixture of ingredients to occur.  Failures can show up as a variety of boot problems. Freezes, crashes, and tones are some of the failures that can occur, but they are not the only symptoms.  There are three components that cause the G4 fail in this manner:</p><OL TYPE="1"><LI><p id=p4>The problem can only occur on a G4 started from a <B>power off</B> condition. The problem will not exist from a restart (warm boot).</p></li><LI><p id=p4>One or more SDRAM DIMMs in the G4 must have SDRAM ICs that are sensitive to powering up from non-zero voltages. Only certain types of SDRAM ICs have this sensitivity.  If the SDRAM IC in the G4 is sensitive to voltages of approximately +0.3V immediately prior to power up, this may be a component of the failure.</p></li><LI><p id=p4>The final condition that needs to exist is the real culprit and catalyst of the failure. There are some self-powered USB devices (ones that use an AC adapter) that have inadvertently violated the USB 1.1 electrical specification for self-powered devices.</p></li></OL><p id=p4>Section 7.2.1 of the <CITE>Universal Serial Bus Specification, Revision 1.1, September 23, 1998</CITE>, states on page 135 of the "Self-Powered Functions" section that,  "No device shall supply (source) current on VBUS at its upstream port, a device may only draw (sink) current.  They may not provide power to the pull-up resistor on D+/D- unless VBUS is present ...."</p> <p id=p4>Unfortunately, several vendors of popular USB devices have used pull-up resistors to source the USB, D+ line from their own internal power source.  This causes a voltage of 3 or more volts to appear at D+ immediately after power is applied to the USB device.  When the USB cable from the self-powered device is connected to the G4, even though precautions have been taken, enough of the USB D+ voltage trickles through to provide about a +0.3 volt source to the DIMM sockets.</p>  <p id=p4>Note that a pull-up resistor tied to the internal power source of the USB device would cause a problem by sourcing current on either the USB D+ or the D- signal.</p><p id=p4>As mentioned above, +0.3 volts is not enough voltage to power almost any SDRAM DIMM.  However, if the SDRAM is sensitive to very low voltages and the G4 is off, this may be enough to turn the SDRAM, "partially on" prior to power up of the G4, causing problems during the G4's boot-up or power on self tests (POST).</p><p id=p4>To identify a potential problem with SDRAM you will need to look at the electrical specifications for the particular SDRAM die and IC.  Again, this problem only occurs with certain SDRAM and should be evaluated on a case-by-case basis.</p><p id=p4>To identify a potential problem with a self-powered USB device, you can attach both the AC power adapter and USB cable to the USB device and attach the other end of the AC adapter to power.</p><p id=p4>Measure the voltage between ground (pin 4 or the black wire) or the shield on the USB connector and the D+ line (pin 3 or the green wire in the USB cable) on the USB connector.  If the voltage reading is +3.0 volts or above then the vendor has tied a pull-up resistor to the internal power supply and is violating the USB spec.</p><p id=p4>Since the D- signal could also be a problem, the same measurement should be made between ground (pin 4 or the black wire) or the shield on the USB connector and the D- line (pin 2 or the white wire in the USB cable) on the USB connector.</p><p id=p4>To test for the problem, power off the G4, insert the suspected SDRAM DIMM into any of the SDRAM slots, connect the self-powered USB device to the G4 and power on the G4.  If the SDRAM is sensitive to this problem, it is likely that the G4 will play the error tones and fail immediately.  Other symptoms, such as crashes and freezes shortly after or during boot up, may occur.  If the system boots Mac OS and things seem to work normally, one or more of the conditions probably do not exist. </p></td></tr></table></CENTER><!-- end_content --><!-- begin_date --><H4 ALIGN=center>[Aug 21, 2003]</H4><!-- end_date --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/hw/hw82.html%3Fid%3DDTS10001354-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/hw/hw82.html%3Fid%3DDTS10001354-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/hw/hw82.html%3Fid%3DDTS10001354-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --> <hr width=500 align=center> </BODY> </HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>FormatRecToString(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING349></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-348.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-350.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-279.html"><B>Chapter 5 - Text Utilities</B></A> / <A HREF="Text-292.html"><B>Text Utilities Reference</B></A><BR><DL><DD><A HREF="Text-299.html"><B>Routines</B></A> / <A HREF="Text-347.html"><B>Using Number Format Specification Strings for International Number Formatting</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING349-0></A>
<H3><A NAME=MARKER-21-437></A><A NAME=MARKER-2-317></A>FormatRecToString</H3>
 The <CODE>FormatRecToString</CODE> function converts an internal representation of number formatting information into a number format specification string, which can be displayed and modified.<P>
<PRE>
FUNCTION FormatRecToString(myFormatRec: NumFormatStringRec;
                  partsTable: NumberParts; VAR outString: Str255;
                  VAR positions: TripleInt): FormatStatus;
</PRE>
<DL>
<DT><CODE>myFormatRec</CODE>
<DD> The internal representation of number formatting information, as created by a previous call to the <CODE>StringToFormatRec</CODE> function.
<DT>partsTable
<DD> A record obtained from the tokens (<CODE>'itl4'</CODE>) resource that shows the correspondence between generic number part separators (tokens) and their localized version (for example, a thousand separator is a comma in the United States and a decimal point in France).
<DT><CODE>outString</CODE>
<DD> On output, contains the number format specification string.
<DT><CODE>positions</CODE>
<DD> An array that specifies the starting position and length of each of the three possible format strings (positive, negative, or zero) in the number format specification string. Semicolons are used as separators in the string.
</DL>
<A NAME=HEADING349-7></A>
<H5>DESCRIPTION</H5>
 <CODE>FormatRecToString</CODE> is the inverse operation of <CODE>StringToFormatRec</CODE>. The internal representation of the formatting information in <CODE>myFormatRec</CODE> must have been created by a prior call to the <CODE>StringToFormatRec</CODE> function. The information in the number parts table specifies how to build the string representation.<A NAME=MARKER-2-6></A><P>
 The output number format specification string in <CODE>outString</CODE> specifies how numbers appear. This string contains three parts, which are separated by semicolons. The first part is the positive number format, the second is the negative number format, and the third part is the zero number format. The syntax for this string is described in detail in <A HREF=Text-291.html#MARKER-9-241>"Using Number Format Specification Strings,"</A> which begins on <A HREF=Text-291.html#MARKER-9-241>page 5-39</A>.<P>
 The <CODE>positions</CODE> parameter is an array of three integers (a <CODE>TripleInt</CODE> value), which specifies the starting position in <CODE>outString</CODE> of each of three formatting specifications:<A NAME=MARKER-2-250></A><CODE>
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Array entry<TH>What its value specifies<TR>
<TD>positions[fPositive]<TD>the index in <CODE>outString</CODE> of the first byte of the formatting specification for positive number values<TR>
<TD>positions[fNegative]<TD>the index in <CODE>outString</CODE> of the first byte of the formatting specification for negative number values<TR>
<TD>positions[fZero]<TD>the index in <CODE>outString</CODE> of the first byte of the formatting specification for zero number values</TABLE>
</CODE><P>
 <CODE>FormatRecToString</CODE> returns a value of type <CODE>FormatStatus</CODE> that denotes the confidence level for the conversion that it performed. The low byte of the <CODE>FormatStatus</CODE> value is of type <CODE>FormatResultType</CODE>, the values of which are described in <A HREF=Text-291.html#MARKER-9-15>Table 5-6</A> on <A HREF=Text-291.html#MARKER-9-15>page 5-38</A>.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD>Be sure to cast the result of <CODE>FormatRecToString</CODE> to a type <CODE>FormatResultType</CODE> before working with it.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING349-13></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>FormatRecToString</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_ScriptUtil<TD>$8210 FFEA</TABLE>
<P>
<A NAME=HEADING349-15></A>
<H5>SEE ALSO</H5>
 For comprehensive details on the number parts table, see the appendix "International Resources" in this book.<P>
 To obtain a handle to the number parts table from a tokens resource, use the <CODE>GetIntlResourceTable</CODE> procedure, which is described in the chapter "Script Manager" in this book.<A NAME=MARKER-2-341></A><A NAME=MARKER-2-296></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-348.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-350.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

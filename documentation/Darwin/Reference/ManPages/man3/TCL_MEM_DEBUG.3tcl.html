<html><head><title>Mac OS X Developer Tools
 Manual Page For TCL_MEM_DEBUG(3tcl)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3tcl/TCL_MEM_DEBUG" title="Mac OS X Developer Tools
 Manual Page for TCL_MEM_DEBUG(3tcl)"><a name="//apple_ref/doc/man/3/TCL_MEM_DEBUG" title="Mac OS X Developer Tools
 Manual Page for TCL_MEM_DEBUG(3tcl)"><!-- headerDoc=man; indexgroup=Section 3tcl; uid="//apple_ref/doc/man/3tcl/TCL_MEM_DEBUG"; name=TCL_MEM_DEBUG(3tcl) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac&nbsp;OS&nbsp;X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>

<p style='text-align:justify;'>This manual page is associated with the Mac&nbsp;OS&nbsp;X
developer tools.  The software or headers described may not be present on your
Mac&nbsp;OS&nbsp;X installation until you install the developer tools
package.  This package is available on your Mac&nbsp;OS&nbsp;X installation DVD,
and the latest versions can be downloaded from
<a href="http://developer.apple.com/tools/download/">developer.apple.com</a>.</p>

<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
TCL_MEM_DEBUG(3)                           Tcl Library Procedures                           TCL_MEM_DEBUG(3)



____________________________________________________________________________________________________________

<b>NAME</b>
       TCL_MEM_DEBUG - Compile-time flag to enable Tcl memory debugging.
____________________________________________________________________________________________________________


<b>DESCRIPTION</b>
       When Tcl is compiled with <b>TCL_MEM_DEBUG</b> defined, a powerful set of memory debugging aids are included
       in the compiled binary.  This includes C and Tcl functions which can aid with debugging memory leaks,
       memory allocation overruns, and other memory related errors.


<b>ENABLING</b> <b>MEMORY</b> <b>DEBUGGING</b>
       To  enable  memory debugging, Tcl should be recompiled from scratch with <b>TCL_MEM_DEBUG</b> defined.  This
       will also compile in a non-stub version of <b>Tcl_InitMemory</b> to add the <b>memory</b> command to Tcl.

       <b>TCL_MEM_DEBUG</b> must be either left defined for all modules or undefined for all modules that are going
       to  be  linked  together.   If  they  are  not,  link  errors will occur, with either <b>TclDbCkfree</b> and
       <b>Tcl_DbCkalloc</b> or <b>Tcl_Ckalloc</b> and <b>Tcl_Ckfree</b> being undefined.

       Once memory debugging support has been compiled into Tcl, the C functions <b>Tcl_ValidateAllMemory</b>,  and
       <b>Tcl_DumpActiveMemory</b>, and the Tcl <b>memory</b> command can be used to validate and examine memory usage.


<b>GUARD</b> <b>ZONES</b>
       When  memory  debugging  is  enabled,  whenever  a call to <b>ckalloc</b> is made, slightly more memory than
       requested is allocated so the memory debugging code can keep  track  of  the  allocated  memory,  and
       eight-byte  ``guard  zones'' are placed in front of and behind the space that will be returned to the
       caller.  (The sizes of the guard zones are defined  by  the  C  #define  <b>LOW_GUARD_SIZE</b>  and  #define
       <b>HIGH_GUARD_SIZE</b> in the file <u>generic/tclCkalloc.c</u> -- it can be extended if you suspect large overwrite
       problems, at some cost in performance.)  A known pattern is written into the guard zones  and,  on  a
       call  to  <b>ckfree</b>, the guard zones of the space being freed are checked to see if either zone has been
       modified in any way.  If one has been, the guard bytes and their new contents are identified,  and  a
       ``low  guard  failed''  or  ``high  guard  failed''  message is issued.  The ``guard failed'' message
       includes the address of the memory packet and the file name and line number of the code  that  called
       <b>ckfree</b>.   This  allows you to detect the common sorts of one-off problems, where not enough space was
       allocated to contain the data written, for example.


<b>DEBUGGING</b> <b>DIFFICULT</b> <b>MEMORY</b> <b>CORRUPTION</b> <b>PROBLEMS</b>
       Normally, Tcl compiled with memory debugging enabled will make it easy to isolate a corruption  prob-<font color="#ffffff" class="whiteout">lem.&nbsp;problem.</font>
       lem.   Turning  on memory validation with the memory command can help isolate difficult problems.  If
       you suspect (or know) that corruption is occurring before the Tcl interpreter comes up far enough for
       you to issue commands, you can set <b>MEM_VALIDATE</b> define, recompile tclCkalloc.c and rebuild Tcl.  This
       will enable memory validation from the first call to <b>ckalloc</b>, again, at a large performance impact.

       If you are desperate and validating memory on every call to <b>ckalloc</b> and <b>ckfree</b> isn't enough, you  can
       explicitly  call <b>Tcl_ValidateAllMemory</b> directly at any point.  It takes a <u>char</u> <u>*</u> and an <u>int</u> which are
       normally the filename and line number of the caller, but they can  actually  be  anything  you  want.
       Remember to remove the calls after you find the problem.


<b>SEE</b> <b>ALSO</b>
       ckalloc, memory, Tcl_ValidateAllMemory, Tcl_DumpActiveMemory


<b>KEYWORDS</b>
       memory, debug





Tcl                                                  8.1                                    TCL_MEM_DEBUG(3)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/TCL_MEM_DEBUG.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/TCL_MEM_DEBUG.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/TCL_MEM_DEBUG.3tcl.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

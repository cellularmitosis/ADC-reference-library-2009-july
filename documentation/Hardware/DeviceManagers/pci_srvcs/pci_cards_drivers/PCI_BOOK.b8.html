<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> Driver Description Structure</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.b7.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.b7.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.b9.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H3.Heading3"><A NAME="pgfId=3563"> </A><A NAME="29237"> </A>Driver Description Structure</H1><P CLASS="T1.Text1"><A NAME="pgfId=3565"> </A>The structure <A NAME="marker=3564"> </A><TT CLASS="cv">DriverDescription</TT> is used to match drivers with devices, set up and maintain a driver's run-time environment, and declare a driver's supported services.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=17455"> </A>struct DriverDescription {<BR>&nbsp;&nbsp;&nbsp;&nbsp;OSType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;driverDescSignature;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverDescVersion&nbsp;&nbsp;&nbsp;driverDescVersion;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;driverType;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverOSRuntime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;driverOSRuntimeInfo;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverOSService&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;driverServices;<BR>};<BR><BR>typedef struct DriverDescription DriverDescription;<BR>typedef struct DriverDescription *DriverDescriptionPtr;<BR><BR>enum {<BR>kTheDescriptionSignature = 'mtej' &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* first long word of */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* DriverDescription */<BR>};<BR><BR>typedef UInt32 DriverDescVersion;<BR>&nbsp;&nbsp;&nbsp;&nbsp;enum {<BR>&nbsp;&nbsp;&nbsp;&nbsp;kInitialDriverDescriptor = 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* first version of */<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* DriverDescription */<BR>};</CODE><p><b>Field descriptions</b></p><DL COMPACT><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=16654"> </A><TT CLASS="cv">driverDescSignature</TT><A NAME="31604"> </A></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3571"> </A> Signature of this <TT CLASS="cv">DriverDescription</TT> structure; currently <TT CLASS="cv">'mtej'</TT> is used for all. Replace with the constant <TT CLASS="cv">kTheDescriptionSignature</TT></DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=16665"> </A><TT CLASS="cv">driverDescVersion</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3572"> </A>Version of this driver description structure, used to distinguish different versions of <TT CLASS="cv">DriverDescription</TT> that have the same <TT CLASS="cv">driverDescSignature</TT> value. </DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=16674"> </A><TT CLASS="cv">driverType</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3573"> </A>Structure that contains driver name and version.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=16683"> </A><TT CLASS="cv">driverOSRuntimeInfo</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3574"> </A> Structure that contains driver run-time information, which determines how a driver is handled when Mac&nbsp;OS finds it. This structure also provides the driver's name to Mac&nbsp;OS and specifies the driver's ability to support concurrent requests.</DD><DT CLASS="DT.DefinitionTerm"><A NAME="pgfId=16693"> </A><TT CLASS="cv">driverServices</TT></DT><DD CLASS="DD.DefinitionDef"><A NAME="pgfId=3575"> </A>Structure used to declare the driver's supported programming interfaces.</DD></DL COMPACT><P CLASS="T1.Text1"><A NAME="pgfId=3576"> </A>The <TT CLASS="cv">driverType</TT>, <TT CLASS="cv">driverOSRuntimeInfo</TT>, and <TT CLASS="cv">driverServices</TT> structures are described in the next sections. A typical driver description is shown in <A HREF="PCI_BOOK.b8.html#31055" CLASS="XRef">Listing&nbsp;8-1</A>. </P><P CLASS="L.Listing"><B><A NAME="pgfId=3581"> </A>Listing&nbsp;8-1	<A NAME="31055"> </A>Typical driver description</B></P><CODE CLASS="Cv.Code"><A NAME="pgfId=17461"> </A>DriverDescription TheDriverDescription =<BR>{<BR>&nbsp;&nbsp;&nbsp;&nbsp;// signature info<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kTheDescriptionSignature,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// signature always first<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kInitialDriverDescriptor,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// version second<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;// type info<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;\pAAPL,Viper&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// device's name (must match<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// name in Name Registry)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x1,0x0,0x40,0x2,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Rev 1.0.0a2<BR>&nbsp;&nbsp;&nbsp;&nbsp;},<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;// OS run-time requirements<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kDriverIsUnderExpertControl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// run-time options<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| kDriverIsOpenedUponLoad,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;\p.Display_Video_Apple_Viper&quot;,<BR>&nbsp;&nbsp;&nbsp;&nbsp;},<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;// OS run-time info<BR>&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// number of service categories<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kServiceCategoryNdrvDriver,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// supports 'ndrv' category<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kNdrvTypeIsVideo,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// video type<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;// Version of service<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1, 0, 0, 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// major, minor, stage, rev<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>};</CODE><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.b7.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.b7.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.b9.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
<HTML>		<HEAD>        <title>KeepingTrack of Multiple Guests</title>		</HEAD>	<BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Creating_a__Guest_Class.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Adding_a_Second_Component.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF108"></a><h2><font face="Helvetica,Arial,Lucida Grande">KeepingTrack of Multiple Guests</font></h2><!-- apple_doc: pageHeadingEnd --><p><font face="Times">You've been using the variable <code>currentGuest</code> inthe Main component to hold the information entered by the user.You'll need another variable (an array) to store the list of allthe guests who have registered. </font></p><p><font face="Times">Before doing this, it is important to understand the scopeand life span of variables in WebObjects:</font></p><ul><p><li><em>Componentvariables</em>, such as <code>currentGuest</code>,exist for the lifetime of the component. These variables are definedin the component (in this case, <code>Main.java</code>)and are accessible only by its methods. Each user that uses a componentgets a separate instance of the variable.</li></p><p><li><em>Session variables</em> exist for the lifetimeof one user's session and are accessible by all code in the session.They are defined in <code>Session.java</code>.An instance of each session variable is created for each user. </li></p><p><li><em>Application variables</em> live as long asthe application does and are accessible by all code in the application.They are defined in <code>Application.java</code>.A single instance of an application variable is shared by all usersof the application.</li></p></ul><a name = "TPXREF109"></a><h3><font face="Helvetica,Arial,Lucida Grande">Creatinga Guest List</font></h3><p><font face="Times">To store the information from all guests that have accessedthe application, you'll create an application variable called <code>allGuests</code>,which exists for the life of the application.</font></p><ol><p><li>In ProjectBuilder, select Classes in the first column of the browser. Thenselect <code>Application.java</code> fromthe second column.<p>The application's code appears in thewindow. The following listing shows the code generated by the Wizard,along with code you will add.</p><pre>    // Generated by the WebObjects Wizard ...    import com.webobjects.foundation.*;     import com.webobjects.appserver.*;    import com.webobjects.eocontrol.*;    public class Application extends WOApplication {        protected NSMutableArray allGuests;        public static void main(String argv[]) {            WOApplication.main(argv, Application.class);        }        public Application() {            super();            allGuests = new NSMutableArray();            System.out.println("Welcome to " + this.name() + " !");             /* ** put your initialization code in here ** */        }        public void addGuest(Guest aGuest) {            allGuests.addObject(aGuest);        }        public void clearGuests() {            allGuests.removeAllObjects();        }    }</pre><p>Notethat there is one method already defined: <code>Application</code>,which is the constructor for the Application object. The first linecalls the constructor for Application's superclass (which is theclass WOApplication). The second line prints a message, that yousee in the Launch panel when you launch your application.</p></li></p><p><li>After the call to <code>super</code>,enter this code:<pre>    allGuests = new NSMutableArray();</pre><p>Thisstatement initializes <code>allGuests</code> tobe a new object of class NSMutableArray. This class provides methodsto add, change, and delete objects from an array.</p></li></p><p><li>At the top of the Application class definition, enter thisdeclaration:<pre>    protected NSMutableArray allGuests;</pre><p>Thisdeclares <code>allGuests</code> tobe of type NSMutableArray. Declaring it protected means that itis accessible only from this class or one of its subclasses. Itis standard object-oriented practice for a class to prevent otherclasses from directly manipulating its instance variables. Instead,you provide <em>accessor methods</em> that other objectsuse to read or modify the instance variables.</p></li></p><p><li>Add the accessor methods <code>addGuest</code> and <code>clearGuests</code>,as shown in the listing.<p>The <code>addGuest</code> methodadds an object of class Guest to the end of the <code>allGuests</code> array, usingthe NSMutableArray method <code>addObject</code>.</p><p>The <code>clearGuests</code> methodremoves all the objects from the array using the NSMutableArraymethod <code>removeAllObjects</code>.</p></li></p><p><li>Save <code>Application.java</code>.</li></p></ol><a name = "TPXREF110"></a><h3><font face="Helvetica,Arial,Lucida Grande">AddingGuests to the Guest List</font></h3><p><font face="Times">Now, when the user submits the form, you'll add the informationto the <code>allGuests</code> array ratherthan displaying it directly.</font></p><ol><p><li>Switch tothe code for <code>Main.java</code>.</li></p><p><li>In the <code>submit</code> method,add the following code before the return statement:<pre>    ((Application)application()).addGuest(currentGuest);    currentGuest = new Guest();</pre><p>Thiscode calls the application's <code>addGuest</code> method,which adds an object (in this case, <code>currentGuest</code>)to the end of the array. Then it creates a new Guest object to holdthe next guest's data.</p><p><code>Note:</code> The <code>addGuest</code> methodis defined in the class Application, which is a subclass of WOApplication.The component's <code>application</code> method(called in the above statement) returns an object of type WOApplication,so you must cast it to Application in order to access its <code>addGuest</code> method.</p></li></p></ol><p><font face="Times">Your next step is to create a new component to display thelist of guests that <code>allGuests</code> stores.</font></p>    <br><a href="Creating_a__Guest_Class.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Adding_a_Second_Component.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<p><font face="Geneva,Helvetica,Arial" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 03-24-01 --><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN1068: Writing PPD Files for Use With LaserWriter 8, version 8.4.1</title>       <meta name="keywords" content="Mac OS 8 Laserwriter writing PPD files ppdT ppdA icons">    <meta name="Description" content="Technical Note TN1068: This Technical Note describes howa printer vendor might customize the user interface for selectingprinter-specific options in a manner that is supported bythe LaserWriter 8 driver. This method involves adding resourcesand user items to PostScript Printer Description(PPD) filesfor your printer device. Technical Note also includes anappendix of the resource templates for the 'ppdT' and 'ppdA'resources."><meta name="categories" content="Printing"><meta name="week-posted" content="Aug 26, 1996 - Sep 6, 1996"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002909" title="Writing PPD Files for Use With LaserWriter 8, version 8.4.1"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxPrinting-date.html">Printing</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/Printing/index.html" target="_blank">Reference Library > Printing</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1068</div>
<div id="pageheadsub">Writing PPD Files for Use With LaserWriter 8, version 8.4.1</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"> <!-- begin_header_box --> <table width="600" cellpadding="0" cellspacing="0" border="0">	<tr>		<td width=300 valign="top" align=left scope="row">			<table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>				</tr>				<tr bgcolor="#e6e6e6">					<td background="images/tnmenubody.gif" width=300 align=left>						<span id="menutitle">							CONTENTS                             <br>                            <br>						</span>					</td>				</tr>				<tr bgcolor="#e6e6e6">					<td background="images/tnmenubody.gif" width=300 align=left><!-- begin_toc --><p id="menutext"><A HREF = "#Section1">Resources</A><BR><BR><A HREF = "#Section2">Icons</A><BR><BR><A HREF = "#Section3">Customizing the Panels within the Print Dialog</A><BR><BR><A HREF = "#addingppdt">Adding items to the '<CODE>ppdT</CODE>' resource</A><BR><BR><A HREF = "#theppda">The '<CODE>ppdA</CODE>' resource</A><BR><BR><A HREF = "#Section4">Adding Balloon Help</A><BR><BR><A HREF = "#Summary">Summary</A><BR><BR><A HREF = "#References">References</a><br><br><A HREF = "#AppendixA">Appendix A</a><br><br><A HREF="#Downloads">Downloadables</A></p>                  <!-- end_toc --> 								</td>				</tr>				<tr>					<td width=300 align=left scope="row">						<img src="images/tnmenubottom.gif" alt="" width=300 height=16>					</td>				</tr>			</table>		</td>		<td width=300 valign="top" align=left>			<!-- begin_intro_text -->            <P id = "introtext">This Technote, originally          written in November 1996, describes how a printer vendor might customize          the user interface for selecting printer-specific options in a manner that          is supported by the LaserWriter 8 driver. This method involves adding          resources and user items to PostScript Printer Description(PPD) files for          your printer device.</p><P id = "introtext">This Technote has been revised to reflect new features that are available as a result of the LaserWriter version 8.4.1 through 8.5.1 releases.</p><CENTER><TABLE BORDER=0 WIDTH=275><TR><td bgcolor="#E6E6E6" align=left><P id = "introtext"><B>Note:</B><BR>This document assumes that you are familiar with the PPD specification from Adobe Systems, Incorporated. If you are not familiar with how to create PPD files, you should first consult "<A HREF = "http://partners.adobe.com/asn/developer/technotes#postscript">Technote 5003</A>: PostScript Printer Description File Format Specification Version 4.3", which is available from Adobe Systems, Incorporated.</P></TD></TR></TABLE></CENTER><BR>               <!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Feb 06 1998]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_header_box --> <BR><BR><hr width=500 align=center>          <BR><BR> <!-- begin_content -->         <A NAME="Section1"></A>                  <H2>Resources</H2><BR>                  <P>There are a few resources that you can add to your PPD file to improve          the user experience with the LaserWriter 8.4 and above drivers.</p><P>Resource IDs must be in the range of driver-owned resources (that is -8160 to -4090), but the resources used in your PPD file should be in the ID range of -7500 to -6500 to avoid conflicts with future revisions of the LaserWriter driver.</P><P><A HREF="#top">Back to top</A></P>         <A NAME="Section2"></A>                  <H2>Icons</H2>                  <P>You will need four icon families in your PPD files to represent various          'stages' of a desktop printer: </p>              <BLOCKQUOTE><P>Icon family -16455 is the custom Finder icon. This icon family is             used by the LaserWriter driver in its dialogs. For instance, this icon          shows up: </p></BLOCKQUOTE>        <OL TYPE="1" START="1">        <LI>During the printer setup process in the Chooser once a PPD has           been chosen.<BR><BR></li>    <LI>In the Chooser dialog when the user chooses "Setup..." on a              printer that has already been set up.<BR><BR></li>    <LI>In driver's status dialog which narrates the spooling (2                 pass/background printing) or printing (1 pass/foreground printing)          progress of your user's document.<BR><BR></li>    </OL>            <p align=center><img src="images/tn1068_001.gif" alt="" width=49 height=37></P>        <p>Three additional icon families are pointed to by the '<CODE>BNDL</CODE>' resource of the PPD file:     '<CODE>dpnn</CODE>' for the default icon (usually the same as the custom Finder icon you provide)</p>        <p align=center><img src="images/tn1068_002.gif" alt="" width=49 height=37></P>      <p>  '<CODE>dpcn</CODE>' for the 'selected' version of the icon (with a bold border around it)</p>        <p align=center><img src="images/tn1068_003.gif" alt="" width=50 height=37></P>       <p> '<CODE>dpna</CODE>' for the 'not available' version of the icon (with an 'X' through it)</p>    <P align=center><img src="images/tn1068_004.gif" alt="" width=53 height=36></P>        Note: If there are no custom icons present in the PPD, the LaserWriter 8 driver uses the generic desktop printer icon suite.<P align=center><img src="images/tn1068_005.gif" alt="" width=49 height=45></P><P>Even though Apple has used the IDs -7189, -7188 and -7187 for these icon families and resource ID -7192 for the '<CODE>BNDL</CODE>' resource, none of these ID numbers are reserved and developers are encouraged to use them. </p><P>Please see any of Apple's LaserWriter PPDs for examples of these icons.</p><P><A HREF="#top">Back to top</A></P>         <A NAME="Section3"></A>                  <H2>Customizing the Panels within the Print Dialog</H2>                  <P>Custom items displayed within the Printer-Specific panel(s) of the print          dialog are controlled by two resources within the PPD file: the '<CODE>ppdT</CODE>'          resource and its associated '<CODE>DITL</CODE>' resources. The '<CODE>ppdT</CODE>'          resource describes          the printer specific features while the matching '<CODE>DITL</CODE>' shows the user          interface. Without these resources, the Printer-Specific panel(s) will          get the usual pop-up menus with PickOne constraints. A template for the          '<CODE>ppdT</CODE>' resource is contained within the LaserWriter 8.4.x and above drivers          and is described further in <A HREF = "#AppendixA">Appendix A</A>.</p>      <P>Custom alert behavior for feature constraints is controlled by three resources in the PPD file: the '<CODE>ppdA</CODE>' resource and it associated '<CODE>DITL</CODE>' and '<CODE>ALRT</CODE>' resources. The '<CODE>ppdA</CODE>' resource describes the feature constraints while the matching '<CODE>DITL</CODE>' and '<CODE>ALRT</CODE>' resources alert the user of the constraints. The '<CODE>ppdA</CODE>' resource can control any printer specific items specified with PPD OpenUI keywords; it can control not only those which appear on printer-specific panels, but it can also be used to constrain printer-specific items that appear on LaserWriter 8's built-in panels (e.g., duplex on the Layout panel or tray-switching on the Error handling panel). A template for the '<CODE>ppdA</CODE>' resource is contained within the LaserWriter 8.4.1 and above drivers and is described further in Appendix A.</p> <P>If you use the '<CODE>ppdT</CODE>' and '<CODE>ppdA</CODE>' resources, there are some necessary settings:</p><UL TYPE=DISC>    <LI>The '<CODE>ppdT</CODE>' and '<CODE>ppdA</CODE>' resources need to have their     signature set to '<CODE>rbi1</CODE>'.<BR><BR></li>        <LI>The '<CODE>ppdT</CODE>' resource needs to have the version field set to 1 or 2. If             the version is 1, in LaserWriter 8.5.1 and later, items in the                 corresponding '<CODE>DITL</CODE>' whose right coordinate is less than zero have             1000 added to their right and left coordinates before the dialog is             displayed. If the version is 2, then the '<CODE>DITL</CODE>' items are not updated.             Drivers before LaserWriter 8.5.1 ignore the '<CODE>ppdT</CODE>' resource if it is             version 2.<BR><BR></li>        <LI>The '<CODE>DITL</CODE>' resource must have the same corresponding ID as the             '<CODE>ppdT</CODE>' or '<CODE>ppdA</CODE>' resource. <BR><BR></li>        <LI>Please note that the coordinates within the '<CODE>DITL</CODE>' resource are             local to the print dialog, and you have the ability to construct a             '<CODE>DITL</CODE>' which would draw items over areas that are used by the                 driver. Don't do that... it is a future compatibility problem.<BR><BR></li>    </UL>      <A NAME="addingppdt"></A>      <H3>Adding items to the '<CODE>ppdT</CODE>' resource</H3>            <P>Once you've created a base '<CODE>ppdT</CODE>' resource, you can add items such as       checkboxes, radio buttons, menus, PICT controls and edit text fields to       the resource for printer specific options. </P><P>Items can be added as follows:</p><UL TYPE=DISC>    <LI>Radio Buttons are defined by a range of contiguous item numbers and a keyword. The item number should correspond to the item number within the '<CODE>DITL</CODE>' and the keyword should match the name of an option as defined with the *OpenUI keyword in the PPD file. Please look at the sample PPD for an example of radio buttons.<BR><BR></li><LI>Checkboxes are also defined by an item number and a PPD main keywordwhich specifies what feature the checkbox controls. Much like radiobuttons, the item number should correspond to the item number within the'<CODE>DITL</CODE>' and the keyword should match the name of a PPD main keyword asdefined with the *OpenUI keyword in the PPD file. This feature can onlycontrol PPD features which have PPD option keyword choices of "True" (checkbox on) and "False" (checkbox off).<BR><BR></li><LI>Menus are also defined by an item number, the PPD main keyword for thefeature controlled by the menu, and the list of PPD option keywords forthat main keyword, in the order they appear in your menu. The item numbermust point to a control item within the '<CODE>DITL</CODE>' which corresponds to a '<CODE>CNTL</CODE>' resource in the PPD resource fork. This '<CODE>CNTL</CODE>' resource then references the built-in Popup Menu CDEF and a '<CODE>MENU</CODE>' resource which contains the menu for this portion of the UI. Please look at the sample PPD for an example of a custom menu.<BR><BR></li><LI>PICT controls are more complicated to explain. The item number needs to correspond to a user item within the '<CODE>DITL</CODE>' that has the correct placement and size. The <CODE>color-offID</CODE> is the ID of a PICT resource to be displayed when the option is not chosen, and the monitor depth is 8-bit color or greater. The <CODE>1bit-offID</CODE> is used when monitor depth is less than 8-bit color. The <CODE>onID</CODE> entries are similar, except they are used when the option is chosen. The <CODE>forbiddenID</CODE> entries are used when the option cannot be chosen due to a <CODE>UIConstraint</CODE> within the PPD file (usually the same as the off choice, except with an added red X through the picture). The main entry again corresponds to the PPD keyword, and the option entry corresponds to the PPD option which is the "ON" state for that main keyword. Please see the sample PPD for an example of PICT controls.<BR><BR></li><LI>Under LaserWriter 8.5.1, support for edit text fields in the Print Dialog UI was added. Edit text fields can be used to allow the user to enter integer numbers, fixed numbers, or text strings. Apple has added this functionality by extending the '<CODE>ppdT</CODE>' resource which was introduced with LaserWriter 8.4.x and by adding a vendor specific extension to the standard PPD specification. Please see the sample PPD for an example of edit text fields.<BR><BR></li></UL><P>The '<CODE>ppdT</CODE>' resource has been extended to allow specification of the text edit fields. The new '<CODE>ppdT</CODE>' data for each set of edit text fields corresponding to a given feature is:</p><UL TYPE=DISC><LI>The number range of the dialog items which correspond to the set of text edit fields for this particular feature. The text edit fields for this feature are consecutively numbered <CODE>numTextFrom</CODE> to <CODE>numTextTo</CODE> (inclusive). The ordering of the text edit fields is used to match the data format specified with each edit text field and is also the order that data will be inserted into the PostScript stream.<BR><BR></li><LI>An optional alertID for use when a text edit field corresponding to a number is out of the allowable range for that field. Use 0 for the generic alert.<BR><BR></li><LI>An optional alertID for use when a text edit field corresponding to a text string contains more characters than are allowed for that field. Use 0 for the generic alert.<BR><BR></li><LI>The corresponding PPD main keyword for the printer feature for this set of text edit fields.<BR><BR></li></UL><P>The PPD data fork specification includes the usual set of PPD keywords for a UI feature. In addition, there are two additional main keyword/option keyword pairs used to allow the driver to determine the data format for the text edit fields, as well as the appropriate PostScript code to generate when the text edit fields are used for the feature invocation. </p><P>As illustrated in our sample PPD, the resource fork of this PPD file has a '<CODE>ppdT</CODE>' resource and '<CODE>DITL</CODE>' resource for the panel; as a result this UI is displayed as a set of radio buttons instead of the standard menu of choices. Our example is for a PPD file data fork which specifies three edit text fields for the main keyword *<CODE>APHalftoneUI</CODE>.</p><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>*OpenUI *APHalftoneUI/Halftoning: PickOne*DefaultHalftoneUI: PrintersDefault*APHalftoneUI PrintersDefault/Use default setting: ""*APHalftoneUI Commercial/Use Commercial: "80 45 (Dot) pop pop pop"*APHalftoneUI Newsletter/Use Newsletter: "120 45 (Newletter) pop pop pop"*APHalftoneUI Newspaper/Use Newspaper: "150 45 (Newspaper) pop pop pop"*APHalftoneUI Silkscreen/Use Silkscreen: "100 45 (Silkscreen) pop pop pop"*APHalftoneUI Set/Other: ""*CloseUI: *APHalftoneUI</pre>	</TD></TR></TABLE></CENTER><p>Note that the option 'Set' with the translation string 'Other' is included. [The option keyword to specify this extra choice must be 'Set'.] It is highlighted when the user selects that radio button and enters text into the edit text fields, as shown below: </p><p align=center><img src="images/tn1068_006.gif" alt="" width=507 height=317></P><P>Two additional PPD main keyword/option keyword pairs specify the data the driver needs to display the UI properly and generate the appropriate PostScript invocation code. The special derived main keyword used for this information is taken from the main keyword for this UI.  The derived main keyword is created by concatenating the text '<CODE>RBISet</CODE>' with the main keyword of the UI itself. In our case, the main keyword is '<CODE>APHalftoneUI</CODE>' so our derived main keyword is '<CODE>RBISetAPHalftoneUI</CODE>'.</p><P>There are two option keywords used with this main keyword. The option keywords are '<CODE>Data</CODE>' and '<CODE>Code</CODE>'. The '<CODE>Data</CODE>' option keyword is used to specify the data format, initial values, and data ranges appropriate for the edit text fields:</p><P>For numbers</p><UL TYPE=DISC>    <LI>the data type: can be fixed or long<BR><BR></li><LI>the minimum: e.g., 60.0<BR><BR></li><LI>the maximum: e.g., 150.0<BR><BR></li><LI>the initial value presented: e.g., 120.8<BR><BR></li></UL><P>For text</p><UL TYPE=DISC><LI>the initial value presented: e.g., (Custom)<BR><BR></li><LI>the maximum string length: e.g., 18 characters<BR><BR></li></UL><P>The data for a text edit field will be treated as text (as opposed to a number) if, instead of being introduced with '<CODE>fixed</CODE>' or '<CODE>long</CODE>', comprises of an opening '(', followed by the default text characters, then terminated by a closing ')'. There is no quoting of characters here so if characters outside the standard 7 bit ASCII set are required for the default text, then the corresponding Macintosh character codes must be used. Thesecharacters are treated as Macintosh encoded characters and the value of the PPD *<CODE>LanguageEncoding</CODE> keyword is not used to transform them. In addition, due to an existing bug, the ')' character cannot be used in the default text.</p><P>Here is the data specification for our example: </p>*<CODE>RBISetAPHalftoneUI</CODE> Data: "fixed 60. 150. 120.8 long 0 180 45 (Custom) 18"<BR><BR><P>In addition to the 'Data' option keyword, there is a 'Code' option keyword that is used when generating the PostScript invocation of the text edit feature. This invocation is used when the text edit portion of the UI is selected (the user selects the 'Other' radio button in our example above). Prior to inserting the PostScript invocation into the PostScript output stream, the driver pushes the data for each text edit field (in the same order as dialog item numbers for the fields themselves) onto the operand stack, then it emits the invocation code provided. For our example, the PPD data fork contains: </p>*<CODE>RBISetAPHalftoneUI</CODE> Code: " pop pop pop"<BR><BR><P>If the user enters values of 120.8, 45, and '<CODE>Custom</CODE>" in our example text edit fields in that order, the driver emits</p>120.8 45 (Custom) pop pop pop<BR><BR><P>into the PostScript output stream when this feature is invoked. Note that text edit items which are to be treated as text strings are properly generated as PostScript strings. Text edit items which are to be treated as numbers are properly generated as floating point numbers or integers depending on whether 'fixed' or 'long' is used to specify the data type.</p><H3>Compatibility with Earlier Drivers</H3><P>Since most of the features discussed in this Technote are based on theresource fork of the PPD file, they are unused by drivers earlier thanLaserWriter 8.4.x. For example, users of those older drivers will see theolder style generic pop-up menus for printer specific features instead ofthe fancy custom dialogs you have added to your PPD resource fork. For themost part, use of these new features causes no compatibility problems with earlier drivers. However, the specification of the extended textcapabilities introduced with LaserWriter 8.5.1 does require careful usageto avoid compatibility problems with earlier drivers.</p><H3>Drivers which don't use the resource fork</H3><P>There are two areas of compatibility which need to be considered when constructing a PPD file which uses the new extended text capabilities. The first issue is creating a PPD which works properly with older LaserWriter drivers (prior to LaserWriter 8.4), or platforms (such as Windows) where the resource fork of the PPD file is not used. Because the data fork portion of the PPD file needs to reflect some of the data for the text edit feature, we have been careful to ensure compatibility with these older drivers and other platforms. The special new derived keyword/option pairs should not be a problem, ignore these special main keyword.</p><P>However, we added an extra option keyword '<CODE>Set</CODE>' with the main keyword  '*<SAMP>APHalftoneUI</SAMP>'. This was to enable the driver to have the extra PickOne choice specified by the text edit fields. In older drivers, this will appear as an extra choice in the <CODE>APHalftoneUI</CODE> user interface, with the translation string 'Other'. The translation string could be anything and it is most likely appropriate for the invocation code to do nothing.</p><p>*<CODE>APHalftoneUI</CODE> Set/Other: ""</p><H3>Drivers which use the resource fork</H3><P>LaserWriter 8.4.x uses the resource fork, but doesn't know about the extended text portions of the '<CODE>ppdT</CODE>' resource. It doesn't know how to deal with text edit fields, should they be present in the dialogs. Since the '<CODE>DITL</CODE>' resource corresponding to the panel containing the text edit strings must contain the text edit items, it is beneficial to hide these items so that older drivers won't display them. To accommodate this need, there is special handling for '<CODE>DITL</CODE>' items if the '<CODE>ppdT</CODE>' resource corresponding to a given '<CODE>DITL</CODE>' has a version field of 1. In this case, for each dialog item with a right coordinate less than zero, the LaserWriter 8.5.x driver adds 1000 to both the right and left coordinates before displaying the panelcorresponding to the '<CODE>DITL</CODE>'. This allows PPD creators to hide items which should not be displayed by older PPD resource fork aware drivers, yet have those items appear properly in the UI otherwise.</p><P>Using our example PPD, the user sees the radio buttons in the standard UI, but, since we've hidden all the controls and items related to the text edit fields (by setting the '<CODE>ppdT</CODE>'s version field to 1), the user does not see those items, as shown in the screen shot below:</p><p align=center><img src="images/tn1068_007.gif" alt="" width=506 height=317></p><A NAME="theppda"></A>      <H3>The '<CODE>ppdA</CODE>' resource</H3>      <P>The '<CODE>ppdA</CODE>' resource can be used in order to specify UI constraints with greater than two features. The current PPD specification only allows for two way constraints; i.e. where feature A can constrain feature B. However, Apple has encountered numerous situations where three and four way constraints were needed, so we created the '<CODE>ppdA</CODE>' resource with LaserWriter 8.4.1 and above.  This resource allows for N-way constraints where N is greater than or equal to 2. For instance, if your printer has a constraint that photograde cannot be selected if you have less than X MB of memory and duplex is chosen, you need this new resource. In addition, the UI gets rather confusing to users when items constrain one another without explanation; it is useful, therefore, to provide more explicit feedback to the user with a combination of the '<CODE>ppdA</CODE>' resource and its associated '<CODE>DITL</CODE>' and '<CODE>ALRT</CODE>'.</p><P>The '<CODE>ppdA</CODE>' resource contains a trigger PPD main keyword and a list of option keywords for that main keyword which, when selected, triggers the checking of additionally specified constraining main/option pairs. The resource also contains a target main keyword/option pair that is set to clear the constraint, if the user wants to proceed. An alert of the same resource ID should be supplied in which the OK and Cancel buttons are items 1 and 2.</p><P>There is a <CODE>TMPL</CODE> for the '<CODE>ppdA</CODE>' in the driver's resource fork in LaserWriter 8.4.1 and above.</P><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=3>   <TR>   <td width=150 align=left>         <P><B>signature</B></p>    </TD><td width=400 align=left>         <P>should be '<CODE>rbi1</CODE>'</p>         </TD></TR><TR>      <td width=150 align=left>         <P><B>version</B></p>         </TD><td width=400 align=left>         <P>1</p>  </TD></TR>       <TR>      <td width=150 align=left>         <P><CODE><B>dlgDoneTime</B></CODE> </p>            </TD><td width=400 align=left>         <P>0 if this constraint should be checked each time a ppd control is set. 1 if this constraint should be checked when the dialog's OK button is hit or when the user switches panels within the dialog. This is useful if previously saved defaults cause a constraint failure of this '<CODE>ppdA</CODE>' resource. In that case, the dialog comes up with an explanation if the incorrect settings and the user is warned when OK is hit.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Trigger main</B>  </p>        </TD>       <td width=400 align=left>         <P>This constraint resource is checked when this trigger main keyword and any of its trigger options are being set by the user. If <CODE>dlgDoneTime</CODE> is set to 1, this constraint is only checked when changing panels or selecting the dialog OK button.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Trigger Option count</B></p>         </TD><td width=400 align=left>         <P>Number of constraining trigger option keywords for this main keyword.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Trigger Option</B></p>         </TD><td width=400 align=left>         <P>List of constraining trigger option keywords.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Target main</B></p>         </TD><td width=400 align=left>         <P>Main keyword for the target constraining feature.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Target option</B></p>         </TD><td width=400 align=left>         <P>Target option keyword that is set, if the user hits OK in the constraints alert. This option should NOT be constrained.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Target Option count</B></p>         </TD><td width=400 align=left>         <P>Number of constraining options for the target main keyword.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Option</B> </p>                </TD><td width=400 align=left>         <P>List of constraining option keywords for the target main keyword.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Constraint list count</B></p>         </TD><td width=400 align=left>         <P>Number of additional constraining PPD main keywords. For an n-way constraint, this number is n-2. This is non-zero if the constraint described by this '<CODE>ppdA</CODE>' resource is more than a two-way constraint. </p>    <P>For each item in this list, there is a main keyword, an option count, and a list     of option keywords which cause the constraint to fail. For the constraint to fail,     the current option setting for each main keyword must be in the list specified for     that main keyword.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Main</B> </p>                </TD><td width=400 align=left>         <P>Additional constraining main keyword.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Option count</B></p>         </TD><td width=400 align=left>         <P>Number of constraining options for this main keyword.</p></TD></TR><TR>      <td width=150 align=left>         <P><B>Option</B></p>         </TD><td width=400 align=left>         <P>The constraining option keyword(s).</p>          </TD></TR></TABLE><P>Please see the sample PPD for examples of the '<CODE>ppdA</CODE>' resource.</p><P><A HREF="#top">Back to top</A></P>         <A NAME="Section4"></A>                  <H2>Adding Balloon Help</H2>                  <P>You can add balloon help to the items described in your '<CODE>DITL</CODE>' in the          same way you would for dialog items in an application. You add a help          item to the '<CODE>DITL</CODE>', it points to a '<CODE>hdlg</CODE>' and that gets appended to any          already existing balloon help. The only thing to remember is that the PICT          controls used by LaserWriter 8 don't actually have multiple states, so you          need to write the help string for those items so it covers all the          possible cases. For more information on Balloon Help and the '<CODE>hdlg</CODE>' resource,          see <I>Inside Macintosh: More Macintosh Toolbox</I>, <a href="../../documentation/mac/MoreToolbox/MoreToolbox-138.html">Chapter 3</A>. Make sure that your          help resources are also in the range specified above.         </P><P><A HREF="#top">Back to top</A></P>         <A NAME="Summary"></A>                  <H2>Summary</H2>                  <P>That's all there's to it. Adding these resources will improve your          user experience for printer specific options. The best examples available          are the PPDs supplied with the LaserWriter 8 driver for use with Apple          printers and the sample PPD included with this document.</p><P><A HREF="#top">Back to top</A></P><a name="References"></a><H2>References</H2>            <p><A HREF = "http://partners.adobe.com/asn/developer/technotes#postscript">            Adobe PostScript Printer Description Specification from Adobe             Systems Incorporated.</A></p>            <p>            PostScript Language Reference Manual, 2nd Edition from Adobe             Systems Incorporated.</p>            <p><A HREF = "downloads/tn_1068.1.hqx">            LW 12/640 PS extended PPD sample</A></p>                        <p><a href="../../documentation/mac/MoreToolbox/MoreToolbox-2.html">            Inside Macintosh: More Macintosh Toolbox, Chapter 3</A></p><P><A HREF="#top">Back to top</A></P>         <A NAME="AppendixA"></A>                  <H2>Appendix A</H2>                  <p><B>Resource Templates for the '<CODE>ppdT</CODE>' and '<CODE>ppdA</CODE>'          resources</B></P><CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=550><TR>	<td bgcolor="#E6E6E6" align=left><pre>type 'ppdT' {    unsigned longint;                      // signature 'rbi1'    integer;                               // version    integer = $$Countof(Checkboxes);       // numCheckboxes    wide array Checkboxes        integer;                           // dlgItem        pstring;                           // main keyword        align word;    };    integer = $$Countof(Rads);             // numRadios    wide array Rads {        integer;                           // radsFrom        integer;                           // radsTo        pstring;                           // main keyword        align word;        integer = $$Countof(Options);      // numOptions        wide array Options {            pstring;                       // option keyword            align word;        };    };    integer = $$Countof(Menus);            // numMenus    wide array Menus {        integer;                           // dlgItem        pstring;                           // main keyword        align word;        integer = $$Countof(Options);      // numOptions        wide array Options {            pstring;                       // option keyword            align word;        };    };    integer = $$Countof(PictControls);     // numPicts    wide array PictControls {        integer;                           // dlgItem        integer;                           // color - offID        integer;                           // 1bit - offID        integer;                           // color - onID        integer;                           // 1bit - onID        integer;                           // color - forbiddenID        integer;                           // 1bit - forbiddenID        integer;                           // maskID        unsigned byte;                 // enabled        unsigned byte;                 // forbidden        unsigned byte;                 // value        unsigned byte;                 // reserved        longint;                           // reserved        pstring;                           // main keyword        align word;        pstring;                           // option keyword        align word;    };    integer = $$Countof(Text);             // text fields    wide array Text {        integer;                           // textFrom        integer;                           // textTo        integer;                           // numParamsAlertID        integer;                           // maxTextAlertID        pstring;                           // main keyword        align word;    };};type 'ppdA' {    unsigned longint;                     // signature 'rbi1'    integer;                              // version    byte;                                 // print time    byte;                                 // filler    byte;                                 // filler    byte;                                 // filler    pstring;                              // trigger main    align word;    integer = $$Countof(Options);         // option count    wide array Options {        pstring;                          // option        align word;    };    pstring;                              // target main    align word;    pstring;                              // target option    align word;    integer = $$Countof(Options1);        // option count    wide array Options1 {        pstring;                          // option        align word;    };    integer = $$Countof(MainKeywords);   // constraint list count    wide array MainKeywords {        pstring;                         // main        align word;        integer = $$Countof(Options2);   // option count        wide array Options2 {            pstring;                     // option            align word;        };    };};</pre>	</TD></TR></TABLE></CENTER>               <P><A HREF="#top">Back to top</A></p> <A NAME=Downloads></A>                  <H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="500">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (248K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/tn1068.pdf">Download</A></P>               </TD>            </TR></TABLE><P><A HREF="#top">Back to top</A></P></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1068.html%3Fid%3DDTS10002909-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1068.html%3Fid%3DDTS10002909-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1068.html%3Fid%3DDTS10002909-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Software Distribution Legacy Guide (Legacy): Checking the Installation With InstallationCheck</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Checking the Installation With InstallationCheck"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/20001943" title="Checking the Installation With InstallationCheck"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../index.html" target="_top">Software Distribution Legacy Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_spec_install_req.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_volume_check_ref.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/20001943-TPXREF6" title="Checking the Installation With InstallationCheck"></a><hr /><H1>Checking the Installation With InstallationCheck</H1><p>You can prevent users from installing your software on systems that do not meet certain criteria, such as minimum hardware requirements or the presence of required files or directories. To do so, you supply an executable file, named <code>InstallationCheck</code>, in your installation package that checks the criteria you are interested in. If those criteria are not met, you can cancel installation and supply a meaningful message to the user. When you cancel installation in this way, Installer exits and the installation cannot be continued.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001943-DontLinkElementID_24" title="Important:"></a><p><strong>Important:</strong>&nbsp;Starting in Mac OS  X version 10.3, installer applications may present the user with a security warning before a InstallationCheck tool is executed.</p><p></p></div><p>For another possible approach to specifying requirements, see <span class="content_text"><a href="sd_spec_install_req.html#//apple_ref/doc/uid/20001949-TPXREF4">“Specifying Installation Requirements.”</a></span></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <!-- TopicBook.pm uses this template for its miniTOCs, but needs a different title. -->
    <h4>Contents:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1009837-TPXREF7">InstallationCheck Overview</a>
				
			<br/>
			
        
			
			
				<a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1001988-CHEGAGIH">File Placement for Installation Checking</a>
				
			<br/>
			
        
			
			
				<a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002143-TPXREF3">Arguments and Environment Variables</a>
				
			<br/>
			
        
			
			
				<a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1032302-CHEFBDAB">Return Value for the InstallationCheck Executable</a>
				
			<br/>
			
        
			
			
				<a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002453-CHEJDJHJ">InstallationCheck Message Strings</a>
				
			<br/>
			
        
			
			
				<a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002656-TPXREF5">InstallationCheck Example</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/20001943-1009837" title="InstallationCheck Overview"></a><a name="//apple_ref/doc/uid/20001943-1009837-TPXREF7" title="InstallationCheck Overview"></a><h2>InstallationCheck Overview</h2><p>The Installer application looks for the InstallationCheck executable file in the <code>Resources</code> directory of the package. If found, the file is executed after authentication (if required) but before any other operations. See <span class="content_text"><a href="sd_install_process.html#//apple_ref/doc/uid/20001765-TPXREF5">“The Installation Process”</a></span> for a look at the larger picture of what happens during an installation.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001943-DontLinkElementID_25" title="Important:"></a><p><strong>Important:</strong>&nbsp;The InstallationCheck tool or script must have its executable bit set. This is done automatically when the package is built with PackageMaker.</p><p>When a metapackage is opened, Installer runs the InstallationCheck script of any package that includes one. However, it does not run an InstallationCheck script that is present in the metapackage itself.</p><p></p></div><p>InstallationCheck can use any criteria to allow or disallow installation. InstallationCheck returns a value that tells Installer whether or not to continue with installation. For details on this value, see <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1032302">“Return Value for the InstallationCheck Executable.”</a></span></p><div class="notebox"><a name="//apple_ref/doc/uid/20001943-DontLinkElementID_26" title="Note"></a><p><strong>Note:</strong>&nbsp;Most executable files used for installation checking are likely to be shell scripts. Such scripts can use any shell, as long as it starts with a standard <code>#!</code> comment to identify the shell.</p></div><p>When an installation is canceled, the value returned by InstallationCheck also indicates what message Installer displays. Installer obtains the message from an <code>InstallationCheck.strings</code> file you supply in the installation package. If you supply strings files for multiple locales, Installer displays the appropriate version based on the user’s current Languages preference. If you do not supply a message, Installer supplies a default message.</p><p>An InstallationCheck script is not the correct place to try to “fix” issues such as incorrect file permissions (for more on permissions, see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-TPXREF2">“Authorization, File Ownership, and Permissions”</a></span>). In general, you should perform installation checking only when absolutely necessary.</p><p>The following sections describe</p><ul class="ul"><li class="li"><p>where the <code>InstallationCheck</code> file and message files are placed in the installation package</p></li><li class="li"><p>the arguments and environment variables available to InstallationCheck</p></li><li class="li"><p>the return values InstallationCheck uses to specify an action and a message</p></li><li class="li"><p>the default messages supplied by Installer</p></li><li class="li"><p>the format of messages in a message file</p></li><li class="li"><p>a sample <code>InstallationCheck</code> script file</p></li></ul><p>In addition, see <span class="content_text"><a href="sd_trouble_shooting.html#//apple_ref/doc/uid/20001946-1010598">“Working With Script Files”</a></span> for tips on using executable files with PackageMaker and Installer.</p><a name="//apple_ref/doc/uid/20001943-1001988" title="File Placement for Installation Checking"></a><a name="//apple_ref/doc/uid/20001943-1001988-CHEGAGIH" title="File Placement for Installation Checking"></a><h2>File Placement for Installation Checking</h2><p>Each file executed as part of an installation, including <code>InstallationCheck</code>, should be placed in the <code>Resources</code> directory of the package (or metapackage) and must have its execution bit set. In the example described in <span class="content_text"><a href="sd_creating_package.html#//apple_ref/doc/uid/20001764-TPXREF5">“Creating a Package,”</a></span> you place script files in an <code>Install_resources</code> directory, then choose that directory as your <code>Resources</code> directory in PackageMaker.</p><p>If you place the file correctly and build the package with PackageMaker, it will automatically set the execution bit for the file. However, you may need to set explicit permissions for the executable—for more information, see <span class="content_text"><a href="sd_permissions_author.html#//apple_ref/doc/uid/20001769-TPXREF2">“Authorization, File Ownership, and Permissions.”</a></span></p><p>Any <code>InstallationCheck.strings</code> message files you provide should also be placed in the <code>Install_resources</code> directory (and end up in the package’s <code>Resources</code> directory), within a localized resource directory with the appropriate name. For example, the items labeled <code>-1-</code> through <code>-5-</code> in <span class="content_text">Listing 1</span> show the final file placement in a test package, whose strings files are localized for English and French. For information on which localized folder names you can use, see <span class="content_text"><a href="sd_pkg_anatomy.html#//apple_ref/doc/uid/20001767-1020608">“Localized Folder Names.”</a></span></p><a name="//apple_ref/doc/uid/20001943-1002069-CHDJEAJJ" title="Listing 1Location of InstallationCheck executable and strings files in a package"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001943-1002069" title="Listing 1Location of InstallationCheck executable and strings files in a package"></a><strong>Listing 1&nbsp;&nbsp;</strong>Location of InstallationCheck executable and strings files in a package</p><div class="codesample"><table><tr><td scope="row"><pre>Test.pkg<span></span></pre></td></tr><tr><td scope="row"><pre>    Contents<span></span></pre></td></tr><tr><td scope="row"><pre>        Archive.bom<span></span></pre></td></tr><tr><td scope="row"><pre>        Archive.pax.gz<span></span></pre></td></tr><tr><td scope="row"><pre>        Info.plist<span></span></pre></td></tr><tr><td scope="row"><pre>        Resources<span></span></pre></td></tr><tr><td scope="row"><pre>            Description.plist<span></span></pre></td></tr><tr><td scope="row"><pre>            InstallationCheck               -1-<span></span></pre></td></tr><tr><td scope="row"><pre>            English.lproj                   -2-<span></span></pre></td></tr><tr><td scope="row"><pre>                InstallationCheck.strings   -3-<span></span></pre></td></tr><tr><td scope="row"><pre>            French.lproj                    -4-<span></span></pre></td></tr><tr><td scope="row"><pre>                InstallationCheck.strings   -5-<span></span></pre></td></tr></table></div><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/20001943-DontLinkElementID_27" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;If no <code>InstallationCheck.strings</code> files are placed in localized directories, or no localized version is found for the user’s current language selection, Installer should look for a default version at the highest level in the <code>Resources</code> directory. Due to a bug, however, only string files in localized resource directories are currently used.</p><p></p><div class="clear"></div></div><a name="//apple_ref/doc/uid/20001943-1002143" title="Arguments and Environment Variables"></a><a name="//apple_ref/doc/uid/20001943-1002143-TPXREF3" title="Arguments and Environment Variables"></a><h2>Arguments and Environment Variables</h2><p>When Installer executes the <code>InstallationCheck</code> file, it provides four arguments:</p><ul class="ul"><li class="li"><p><code>$1</code>: The full path to the installation package. For example:</p><p><code>/Volumes/Projects/Testing/Simple_Carbon_App.pkg</code></p></li><li class="li"><p><code>$2</code>: The full path to the installation destination. For example:</p><p><code>/Applications</code></p></li><li class="li"><p><code>$3</code>: The mountpoint of the destination volume. For example:</p><p><code>/</code> or <code>/Volumes/External_Drive</code></p></li><li class="li"><p><code>$4</code>: The root directory for the current System folder:</p><p><code>/</code></p></li></ul><div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/20001943-DontLinkElementID_28" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;The values for the variables <code>$2</code>, <code>$3</code>, and <code>$4</code> are always set to <code>/</code>, and should not be counted on in your <code>InstallationCheck</code> script (even in the situation where you might expect that value).</p><p></p><div class="clear"></div></div><p>Installer also makes one environment variable available:</p><ul class="ul"><li class="li"><p><code>$SCRIPT_NAME</code>: The name of the file being executed. That is:</p><p><code>InstallationCheck</code></p></li></ul><a name="//apple_ref/doc/uid/20001943-1032302" title="Return Value for the InstallationCheck Executable"></a><a name="//apple_ref/doc/uid/20001943-1032302-CHEFBDAB" title="Return Value for the InstallationCheck Executable"></a><h2>Return Value for the InstallationCheck Executable</h2><p>InstallationCheck returns a value that Installer interprets as a pair of bit fields, as shown in <span class="content_text">Figure 1</span>. Bits 5 and 6 of the return value determine the action—that is, whether to continue the installation or to cancel it (with a message of explanation). When an installation is cancelled, Installer exits and the installation cannot be continued.</p><br/><div><a name="//apple_ref/doc/uid/20001943-1032319-CHDIDBHJ" title="Figure 1Bit fields in the value returned by InstallationCheck"></a><p><a name="//apple_ref/doc/uid/20001943-1032319" title="Figure 1Bit fields in the value returned by InstallationCheck"></a><strong>Figure 1&nbsp;&nbsp;</strong>Bit fields in the value returned by InstallationCheck</p><img src = "art/sd_installcheck_bitfield.gif" alt = "Bit fields in the value returned by InstallationCheck" width="235" height="101"></div><br/><p>The bit field consisting of bits 0–4 specifies a message index. Depending on the value of the action bits (bits 5 and 6), Installer uses the index to obtain a message string from the <code>InstallationCheck.strings</code> file. The strings file currently must be in a localized directory, as described in <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1001988">“File Placement for Installation Checking.”</a></span> If no strings file is provided or if the specified message cannot be found, Installer provides a default message.</p><div class="importantbox"><a name="//apple_ref/doc/uid/20001943-DontLinkElementID_29" title="Important:"></a><p><strong>Important:</strong>&nbsp;Bit 7 is reserved for future use and must be 0. As a general rule, set all unused bits to 0. You can do this by setting the return value to 0, then shifting in the required bits, as shown in <span class="content_text">Table 1</span>.</p><p></p></div><p><span class="content_text">Table 1</span> describes how Installer is intended to interpret the action bits (bits 5 and 6) in the value returned by InstallationCheck, and also notes a couple of places where, due to a bug, your results may vary from the intended results.</p><a name="//apple_ref/doc/uid/20001943-1010170-CHEHFDAE" title="Table 1How Installer should respond to value in bits 5 and 6"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20001943-1010170" title="Table 1How Installer should respond to value in bits 5 and 6"></a><strong>Table 1&nbsp;&nbsp;</strong>How Installer should respond to value in bits 5 and 6</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Bit values</p><p> (6 5)</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Numerical</p><p>value</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Obtain by</p><p>shifting</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Action</p></th></tr><tr><td  scope="row"><p>0 0</p></td><td ><p>0</p></td><td ><p>(not needed)</p></td><td ><p>no error; continue installation</p></td></tr><tr><td  scope="row"><p>0 1</p></td><td ><p>32</p></td><td ><p>1 &lt;&lt; 5</p></td><td ><p><strong>intended result:</strong> displays a warning message, but allows installation to continue</p></td></tr><tr><td  scope="row"><p></p></td><td ><p></p></td><td ><p></p></td><td ><p><strong>possible bug:</strong> allows installation to continue, but may show no error message</p></td></tr><tr><td  scope="row"><p>1 0</p></td><td ><p>64</p></td><td ><p>1 &lt;&lt; 6</p></td><td ><p><strong>intended result:</strong> cancels the installation without any message (fails silently)</p></td></tr><tr><td  scope="row"><p></p></td><td ><p></p></td><td ><p></p></td><td ><p><strong>possible bug:</strong> cancels the installation, but may display message “This software cannot be installed on this computer”</p></td></tr><tr><td  scope="row"><p>1 1</p></td><td ><p>96</p></td><td ><p>3 &lt;&lt; 5</p></td><td ><p>displays a warning message to the user, then cancels the installation</p></td></tr></table></div><p><span class="content_text">Table 2</span> shows possible bit field values for the message bit field (bits 0 through 4) in the value returned by InstallationCheck. The five bits allow for a value between 0 and 31. <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002490-CHEIFHGH">Table 3</a></span> shows default string values. <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002600-CHEFBAIB">Listing 2</a></span> shows a sample strings file.</p><a name="//apple_ref/doc/uid/20001943-1002366-CHEHCJHD" title="Table 2Values for bits 0 through 4 and resulting messages"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20001943-1002366" title="Table 2Values for bits 0 through 4 and resulting messages"></a><strong>Table 2&nbsp;&nbsp;</strong>Values for bits 0 through 4 and resulting messages</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Message</p></th></tr><tr><td  scope="row"><p>0</p></td><td ><p>Should not be 0 unless the action bit is also 0 (no error)</p></td></tr><tr><td  scope="row"><p>1–4</p></td><td ><p>Specifies a default string provided by Installer, as shown in <span class="content_text">Table 3</span> (currently only used when action bits have value 96; that is, both action bits are 1)</p></td></tr><tr><td  scope="row"><p>5–15</p></td><td ><p>Reserved for future use by Installer</p></td></tr><tr><td  scope="row"><p>16–31</p></td><td ><p>Specifies a message string in an <code>InstallationCheck.strings</code> file in the package, as shown in <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002536">“Strings Files for the InstallationCheck Executable”</a></span> (currently only used when action bits have value 96; that is, both action bits are 1)</p></td></tr></table></div><p>If the package contains strings files for multiple locales, Installer displays the appropriate version based on the user’s current Languages preference. For a sample strings file, see <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002536">“Strings Files for the InstallationCheck Executable.”</a></span></p><a name="//apple_ref/doc/uid/20001943-1002453" title="InstallationCheck Message Strings"></a><a name="//apple_ref/doc/uid/20001943-1002453-CHEJDJHJ" title="InstallationCheck Message Strings"></a><h2>InstallationCheck Message Strings</h2><p>As described in <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1032302">“Return Value for the InstallationCheck Executable,”</a></span> Installer either continues the installation (without warning) or cancels it (with a message of explanation), depending on the return value from InstallationCheck.</p><a name="//apple_ref/doc/uid/20001943-1002474" title="Default Messages Provided by Installer"></a><a name="//apple_ref/doc/uid/20001943-1002474-TPXREF4" title="Default Messages Provided by Installer"></a><h3>Default Messages Provided by Installer</h3><p>When the action bits are <code>11</code> (or value 96), Installer provides default message strings based on the value InstallationCheck returns in the message bit field (bits 0 to 4), as described in <span class="content_text">Table 3</span>.</p><a name="//apple_ref/doc/uid/20001943-1002490-CHEIFHGH" title="Table 3Installer default messages for InstallationCheck"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><a name="//apple_ref/doc/uid/20001943-1002490" title="Table 3Installer default messages for InstallationCheck"></a><strong>Table 3&nbsp;&nbsp;</strong>Installer default messages for InstallationCheck</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Message string</p></th></tr><tr><td  scope="row"><p>1</p></td><td ><p>This software cannot be installed on this computer.</p></td></tr><tr><td  scope="row"><p>2</p></td><td ><p>The software &lt;package name> cannot be installed on this computer.</p></td></tr><tr><td  scope="row"><p>3</p></td><td ><p>&lt;package name> cannot be installed on this computer.</p></td></tr><tr><td  scope="row"><p>4</p></td><td ><p>An error was encountered while running the InstallationCheck tool for package &lt;package name>.</p></td></tr><tr><td  scope="row"><p>5–15</p></td><td ><p>reserved for future use by Installer</p></td></tr></table></div><a name="//apple_ref/doc/uid/20001943-1002536" title="Strings Files for the InstallationCheck Executable"></a><a name="//apple_ref/doc/uid/20001943-1002536-CHEBIICJ" title="Strings Files for the InstallationCheck Executable"></a><h3>Strings Files for the InstallationCheck Executable</h3><p>To display a message when cancelling an installation, you provide one or more files named <code>InstallationCheck.strings</code> and place them in the appropriate localized directory within the package’s <code>Resources</code> directory. <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1001988">“File Placement for Installation Checking”</a></span> describes the placement of strings files in the package.</p><p>A strings file contains messages in the following format:</p><div class="codesample"><table><tr><td scope="row"><pre>"number string" = "message string";<span></span></pre></td></tr></table></div><p>where <code>"number string"</code> represents a numeric value between 16 and 31, as described in <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1002366-CHEHCJHD">Table 2</a></span> and <code>"message string"</code> is the string to display. Strings always end with a semicolon. An English strings file with two messages might look like the one in <span class="content_text">Listing 2</span>.</p><a name="//apple_ref/doc/uid/20001943-1002600-CHEFBAIB" title="Listing 2A sample InstallationCheck.strings file"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001943-1002600" title="Listing 2A sample InstallationCheck.strings file"></a><strong>Listing 2&nbsp;&nbsp;</strong>A sample InstallationCheck.strings file</p><div class="codesample"><table><tr><td scope="row"><pre>"16" = "Can't install unless you have a Super Drive.";<span></span></pre></td></tr><tr><td scope="row"><pre>"17" = "Can’t install unless you have more than 128MB of RAM.";<span></span></pre></td></tr></table></div><p>Installer only displays strings from the strings file if the action bits returned by InstallationCheck are <code>11</code> (or a value of 96). So to specify an index in your strings file, you add a value between 16 and 31 to 96. For example, if the message index returned to the Installer is 112 (or a bit value of <code>1101000</code>, indicating the installation should not be allowed and the message index is 16), the message displayed to the user is</p><div class="codesample"><table><tr><td scope="row"><pre>Can't install unless you have a Super Drive.<span></span></pre></td></tr></table></div><p>The bit fields in the value returned by InstallationCheck are described in detail in <span class="content_text"><a href="sd_install_check_ref.html#//apple_ref/doc/uid/20001943-1032302">“Return Value for the InstallationCheck Executable.”</a></span></p><a name="//apple_ref/doc/uid/20001943-1002656" title="InstallationCheck Example"></a><a name="//apple_ref/doc/uid/20001943-1002656-TPXREF5" title="InstallationCheck Example"></a><h2>InstallationCheck Example</h2><p><span class="content_text">Listing 3</span> shows a template for an InstallationCheck script. This script just displays its arguments and environment variables, then returns a value that causes Installer to stop the installation and display an error message. However, you can plug your installation check testing into this script.</p><p>You can examine output from InstallationCheck in the Console application (available in <code>/Applications/Utilities</code>). Alternatively, you can redirect output to a log file, using script statements like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>echo "Full volume path is: $path" >> /tmp/scripts.log<span></span></pre></td></tr></table></div><p>The first line in this script (<code>#!/bin/bash</code>) indicates that the script uses the <code>bash</code> shell, located in <code>/bin</code>. Other lines that begin with the <code>#</code> character are comments.</p><div class="notebox"><a name="//apple_ref/doc/uid/20001943-DontLinkElementID_30" title="Note"></a><p><strong>Note:</strong>&nbsp;Although this script has been tested, use care in cutting and pasting it from this document. For more information, see <span class="content_text"><a href="sd_trouble_shooting.html#//apple_ref/doc/uid/20001946-TPXREF8">“Troubleshooting Packages and Installation.”</a></span></p></div><a name="//apple_ref/doc/uid/20001943-1002720-CHEHJCFJ" title="Listing 3An InstallationCheck script that cancels installation and displays a message from the strings file"></a><p class="codesample"><a name="//apple_ref/doc/uid/20001943-1002720" title="Listing 3An InstallationCheck script that cancels installation and displays a message from the strings file"></a><strong>Listing 3&nbsp;&nbsp;</strong>An InstallationCheck script that cancels installation and displays a message from the strings file</p><div class="codesample"><table><tr><td scope="row"><pre>#!/bin/bash<span></span></pre></td></tr><tr><td scope="row"><pre>#<span></span></pre></td></tr><tr><td scope="row"><pre># This installation script just echoes the values of the available<span></span></pre></td></tr><tr><td scope="row"><pre># arguments and environmental variables.<span></span></pre></td></tr><tr><td scope="row"><pre>#<span></span></pre></td></tr><tr><td scope="row"><pre>echo "START INSTALLATIONCHECK SCRIPT"<span></span></pre></td></tr><tr><td scope="row"><pre>echo ""<span></span></pre></td></tr><tr><td scope="row"><pre>echo "Arguments:"<span></span></pre></td></tr><tr><td scope="row"><pre>echo ""<span></span></pre></td></tr><tr><td scope="row"><pre>echo "\$1: the full path to the install package."<span></span></pre></td></tr><tr><td scope="row"><pre>echo "     $1"<span></span></pre></td></tr><tr><td scope="row"><pre>echo "\$2: the full path to the install destination."<span></span></pre></td></tr><tr><td scope="row"><pre>echo "     $2"<span></span></pre></td></tr><tr><td scope="row"><pre>echo "\$3: the mountpoint of the destination volume."<span></span></pre></td></tr><tr><td scope="row"><pre>echo "     $3"<span></span></pre></td></tr><tr><td scope="row"><pre>echo "\$4: the root directory \"/\" for the current System folder."<span></span></pre></td></tr><tr><td scope="row"><pre>echo "     $4"<span></span></pre></td></tr><tr><td scope="row"><pre>echo ""<span></span></pre></td></tr><tr><td scope="row"><pre>echo "Environment variables:"<span></span></pre></td></tr><tr><td scope="row"><pre>echo ""<span></span></pre></td></tr><tr><td scope="row"><pre>echo ""<span></span></pre></td></tr><tr><td scope="row"><pre>echo "\$SCRIPT_NAME: $SCRIPT_NAME"<span></span></pre></td></tr><tr><td scope="row"><pre>echo ""<span></span></pre></td></tr><tr><td scope="row"><pre>let retval=112<span></span></pre></td></tr><tr><td scope="row"><pre>echo "\$retval = $retval"<span></span></pre></td></tr><tr><td scope="row"><pre>echo "END INSTALLATIONCHECK SCRIPT"<span></span></pre></td></tr><tr><td scope="row"><pre>exit $retval<span></span></pre></td></tr></table></div>

        <br/><br/> 

        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="sd_spec_install_req.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="sd_volume_check_ref.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-07-24<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_install_check_ref.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_install_check_ref.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/SoftwareDistribution4/Concepts/sd_install_check_ref.html%3Fid%3DTP40004615-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Xcode Build System Guide: Build Phases</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Build Phases"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002690" title="Build Phases"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../Xcode-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000557" target="_top">Xcode</a> &gt; <a href="../000-Introduction/Introduction.html#//apple_ref/doc/uid/TP40006904-CH1-SW1">Xcode Build System Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../100-Targets/bs_targets.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../300-Build_Settings/bs_build_settings.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002690-CJAGDDHI" title="Build Phases"></a><a name="//apple_ref/doc/writerid/xcode_user_guide_build_phases" title="Build Phases"></a><h1>Build Phases</h1><p>A <strong>build phase</strong> represents a task to be performed on a set of files. Each build phase specializes in a specific kind of file, such as header files, source files, resource files, and frameworks and libraries. Each build phase also performs specific operations on the files associated with it. That way, changes in the way files of the same kind are processed can be made by customizing the operations that the build phase performs.</p><p>This chapter provides an overview of build phases, explains how Xcode determines the order in which build phases are processed to build a product, describes in detail some of the build phases available, and explains how build rules allow you to customize the Compile Sources build phase and the Build ResourceManager Resources build phase in a target.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-SW7">Build Phase Overview</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-SW8">Using Build Phases</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCEIBFA">Build Phase Processing Order</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJAIFHHC">Adding and Deleting Build Phases</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJAFCFEG">Adding Files to a Build Phase</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCEIFIF">Compile Sources Build Phase</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJAHHAJI">Copy Files Build Phase</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJABHEIB">Run Script Build Phase</a>
				
			<br/>
			
        
			
			
				<a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCCFEDJ">Build Rules</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002690-SW7" title="Build Phase Overview"></a><h2>Build Phase Overview</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_32"></a><p>A build phase performs a set of operations on a group of files as part of building a product. To illustrate this process, think of the tasks you would perform to prepare for and deliver a presentation; many of the required tasks contain a set of inputs and outputs:</p><ol class="ol"><li class="li"><p>Specify the purpose of the presentation and identify the audience.</p><p>This task has no prerequisites but produces a set of criteria that serve as the guiding principles for the presentation.</p></li><li class="li"><p>Gather the appropriate data, such as articles, reports, and surveys.</p><p>Information gathering requires a set of criteria that specify what to look for and where to look for it. The outcome is a set of documents containing the data gathered.</p></li><li class="li"><p>Purchase a business suit.</p><p>This task has no inputs or outputs that directly relate to the presentation.</p></li><li class="li"><p>Analyze the data by collating facts, extrapolating trends, and summarizing representative opinions.</p><p>This task uses the data gathered in task 2 and produces one document containing the information on which the presentation is based.</p></li><li class="li"><p>Develop a set of slides, including compelling illustrations, from the information produced by your analysis.</p><p>This task requires the information produced in task 4 and produces a set of slides and illustrations, which could be presented using Keynote.</p></li><li class="li"><p>Deliver the presentation by showing the slides and illustrations in sequence and by engaging the audience with a loud, clear voice while maintaining eye contact with them.</p></li></ol><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_33"></a><p>The order in which build phases are executed in a target depends on their inputs and outputs. Most of the tasks shown earlier contain a set of inputs and outputs that associate them with each other in an anterior/posterior relationship. Tasks that contain inputs that are the outputs of other tasks or outputs that are the inputs of other tasks are <strong>ordered tasks</strong>. These are tasks that are executed in the order determined by their inputs and outputs. <strong>Unordered tasks</strong>, on the other hand, are tasks with no inputs and outputs, or tasks whose inputs are not the outputs of other tasks and whose outputs are not the inputs of other tasks. In <span class="content_text">Figure 2-1</span> the presentation tasks shown earlier are categorized as ordered and unordered.</p><br/><div><a name="//apple_ref/doc/uid/TP40002690-BBCJJFIJ" title="Figure 2-1Presentation tasks"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>Presentation tasks</p><img src = "../art/presentation_tasks.gif" alt = "Presentation tasks" width="335" height="417"></div><br/><p>Most of the tasks illustrated depend on another task’s outputs. The Specify Purpose task is the only task among the ordered tasks that doesn’t depend on the output of any other task; therefore, it’s performed first. The Purchase Suit task is the only unordered task; that is, it’s neither the anterior nor the posterior of other tasks. Therefore, it can be executed at any time during the preparation of the presentation.</p><a name="//apple_ref/doc/uid/TP40002690-SW8" title="Using Build Phases"></a><h2>Using Build Phases</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_34"></a><p>To build an application, you typically compile source files and link them to system frameworks and libraries. <span class="content_text">Figure 2-2</span> shows some of the operations needed to build the CircleView example application.</p><br/><div><a name="//apple_ref/doc/uid/TP40002690-BBCHBDEC" title="Figure 2-2Building an application"></a><p><strong>Figure 2-2&nbsp;&nbsp;</strong>Building an application</p><img src = "../art/file_centric_tasks.gif" alt = "Building an application" width="419" height="181"></div><br/><p>This simple project shows that there are many things to take into account when building a product. You have to copy resource files to the appropriate places, compile implementation files into object files, and link object files with the appropriate frameworks to produce a binary file. If you modify an implementation file, you must compile it, and link the generated object file with the other object files and the necessary frameworks.</p><p>If you analyze the files and the operations illustrated in <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCHBDEC">Figure 2-2</a></span>, you notice that the project contains three types of files: Files that are copied or installed, files that are processed or compiled to produce intermediate files (such as object files), and frameworks that are linked with the object files to produce a binary file. To build a product, appropriate operations are performed on the files, depending on their type.</p><p>Build phases associate groups of files with operations to be performed on them in order to build a product; for example, installing header files within frameworks, compiling source files, linking object files with system libraries or frameworks, and so on. As you add files to a project, Xcode associates them with the appropriate build phase, based on the files’ type (specified by each file’s extension). If you want to compile implementation files with a different compiler, you make the change once, at the build phase level (see <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCEIFIF">“Compile Sources Build Phase”</a></span> and <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCCFEDJ">“Build Rules”</a></span> for details). Build phases help make the process of building an application, plug-in, library, or framework, understandable and easy to customize, as illustrated in <span class="content_text">Figure 2-3</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40002690-BBCDBCGE" title="Figure 2-3Building an application using build phases"></a><p><strong>Figure 2-3&nbsp;&nbsp;</strong>Building an application using build phases</p><img src = "../art/bphase_centric_tasks.gif" alt = "Building an application using build phases" width="545" height="279"></div><br/><p>A build phase operates both on its inputs, which are the files associated with it (either by you or intrinsically by Xcode), and on its outputs, which are the files produced after the build phase is executed. Each build phase executes its task by invoking tools to perform the operations needed to accomplish the task.</p><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_35"></a><p>Xcode offers several build phases, which are shown in <span class="content_text">Table 2-1</span>. The name of the build phase reflects the task performed by that build phase.</p><a name="//apple_ref/doc/uid/TP40002690-BBCDIFFC" title="Table 2-1Build phases available in Xcode"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-1&nbsp;&nbsp;</strong>Build phases available in Xcode</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Build phase</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p>Copy Headers</p></td><td ><p>Installs header files with <code>public</code> or <code>private</code> roles in the appropriate locations in the product. See <span class="content_text"><a href="../100-Targets/bs_targets.html#//apple_ref/doc/uid/TP40002689-SW10">“Setting the Role of Header Files”</a></span> for details.</p></td></tr><tr><td  scope="row"><p>Copy Bundle Resources, Build Java Resources</p></td><td ><p>Installs files by copying the associated files from the project to the <code>Resources</code> directory in the product.</p></td></tr><tr><td  scope="row"><p>Copy Files</p></td><td ><p>Installs files by copying the associated files from the project to a location in the product or to a specific location in the target file system, such as <code>/Library/Frameworks</code> or <code>/Library/Application Support</code>.</p></td></tr><tr><td  scope="row"><p>Compile Sources</p></td><td ><p>Compiles source files into object files using a predefined tool, a tool you specify, or a build-rule script.</p></td></tr><tr><td  scope="row"><p>Run Script</p></td><td ><p>Executes a shell script. You can use any scripting language whose scripts you can execute from the command line, such as AppleScript, Perl, Python, Ruby, and so on.</p></td></tr><tr><td  scope="row"><p>Link Binary With Libraries</p></td><td ><p>Links object files with frameworks and libraries to produce a binary file.</p></td></tr><tr><td  scope="row"><p>Build ResourceManager Resources</p></td><td ><p>Compiles <code>.r</code> files into resources that go into a separate resource file or into the executable's resource fork.</p></td></tr><tr><td  scope="row"><p>Compile AppleScripts</p></td><td ><p>Compiles <code>.applescript</code> files and places the resulting <code>.scpt</code> files in the product’s <code>Resources/Scripts</code> directory.</p></td></tr></table></div><p><span class="content_text">Table 2-2</span> lists the build phases and their possible inputs and outputs.</p><a name="//apple_ref/doc/uid/TP40002690-BBCGHJIE" title="Table 2-2Input files and output files of build phases"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-2&nbsp;&nbsp;</strong>Input files and output files of build phases</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Build phase</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Inputs</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Outputs</p></th></tr><tr><td  scope="row"><p>Copy Headers</p></td><td ><p><code>.h</code> files</p></td><td ><p>Copies in appropriate locations in the product.</p></td></tr><tr><td  scope="row"><p>Compile Sources</p></td><td ><p><code>.c</code>, <code>.m</code>, <code>.y</code>, <code>.l</code>, among other types of source files</p></td><td ><p><code>.o</code> files in target’s <code>build</code> directory.</p></td></tr><tr><td  scope="row"><p>Link Binary With Libraries</p></td><td ><p><code>.framework</code>, <code>.dylib</code>, and the<code>.o</code> files in the target’s build directory</p></td><td ><p>Binary file, framework, or library in product destination directory.</p></td></tr><tr><td  scope="row"><p>Copy Bundle Resources</p></td><td ><p><code>.nib</code> files, <code>.strings</code> files, image files, and others</p></td><td ><p>Copies in the product’s <code>Resources</code> directory.</p></td></tr><tr><td  scope="row"><p>Build ResourceManager Resources</p></td><td ><p><code>.r</code>, and <code>.rsrc</code> files</p></td><td ><p>Resource (<code>.rsrc</code>) files in the product’s <code>Resources</code> directory.</p></td></tr><tr><td  scope="row"><p>Compile AppleScripts</p></td><td ><p><code>.applescript</code> files</p></td><td ><p>AppleScript script (<code>.scpt</code>) files in the product’s <code>Resources/Scripts</code> directory.</p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_36"></a><p>Each target has a set of build phases, separate from the build phases in other targets in your project. To view the build phases in a target, click the disclosure triangle next to the target in the Groups &amp; Files list.</p><br/><div><a name="//apple_ref/doc/uid/TP40002690-SW9" title="Figure 2-4Viewing build phases"></a><p><strong>Figure 2-4&nbsp;&nbsp;</strong>Viewing build phases</p><img src = "../art/viewingbuildphases.gif" alt = "Viewing build phases" width="405" height="438"></div><br/><a name="//apple_ref/doc/uid/TP40002690-BBCEIBFA" title="Build Phase Processing Order"></a><h2>Build Phase Processing Order</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_37"></a><p>The order in which the build system executes build phases is important because some build phases produce files that are part of the inputs of other build phases. Therefore, the former must be executed before the latter. In native targets, dependencies between build phases determine the order of execution. In Jam-based targets, you must ensure that the build phases within a target are ordered appropriately.</p><a name="//apple_ref/doc/uid/TP40002690-SW10" title="Build Phase Processing Order in Native Targets"></a><h3>Build Phase Processing Order in Native Targets</h3><p>In some cases, a build phase inherently includes the outputs of other build phases as its inputs. For example, the outputs (<code>.o</code> files) of the Compile Sources build phase are part of the inputs of the Link Binary With Libraries build phase. This makes the Compile Sources build phase an antecedent of the Link Binary With Libraries build phase. Therefore, the order in which build phases are executed in a target depends on their inputs and outputs.</p><p>Most build phases have their inputs and outputs defined implicitly. However, Run Script build phases may have neither. Here, the build system tries to run the associated script in the order specified within the target, but the actual point in the build process at which the script is run is undetermined. If you assign either input or output files to a Run Script build phase, the script’s point of execution in the build process is determined by other targets having the build phase’s outputs as their inputs, or the inputs of the build phase being the outputs of other build phases.</p><p><span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCDBCGE">Figure 2-3</a></span> illustrates this. Regardless of the order of the Compile Sources and the Link Binary With Libraries build phases in the target, the Compile Sources build phase is executed before the Link Binary With Libraries build phase. This is because the inputs to the Link Binary With Libraries build phase rely on output from the Compile Sources build phase.</p><p>In the Compile Sources build phase, the build system determines the order in which files are processed through the inputs and outputs of the target’s build rules, in a similar way in which the order of build phases is determined.</p><a name="//apple_ref/doc/uid/TP40002690-BBCCFIDD" title="Build Phase Processing Order in Jam-Based Targets"></a><h3>Build Phase Processing Order in Jam-Based Targets</h3><p>The order in which the build system executes the build phases in Jam-based targets is determined by the order of the build phases within a target. The order of the input files within the build phase determines the order in which the build system processes each file in that build phase.</p><p>You must make sure that build phases that produce files required by other build phases are listed first within the target. For example, the Compile Sources build phase must always be listed before the Link Binary With Libraries build phase. </p><p>Within the Compile Sources build phase, you must ensure that source files that generate derived files are placed above dependent files. For example, if a target has Yacc (<code>.y</code>) and Lex files (<code>.l</code>) files and processing the Lex files requires the C (<code>.c</code>) files generated from the Yacc files, within the build phase the Yacc files must be listed before the Lex files.</p><a name="//apple_ref/doc/uid/TP40002690-SW11" title="Reordering Build Phases"></a><h3>Reordering Build Phases</h3><p>Typically, there is no need to change the order of build phases in a target; the default arrangement works for the majority of cases. If, however, you find that you need to change the position of a build phase—for example, when adding custom build phases to a Jam-based target—you can reorder a build phase by dragging the icon for the build phase to its new location in the target.</p><a name="//apple_ref/doc/uid/TP40002690-CJAIFHHC" title="Adding and Deleting Build Phases"></a><h2>Adding and Deleting Build Phases</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_38"></a><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_39"></a><p>New targets—whether created through the New Target Assistant or as part of creating a project—already include a set of predefined build phases. The predefined build phases for a target vary, depending on the type of product created by the target. For example, a target that builds an application typically includes a Copy Bundle Resources build phase to copy resources into the application bundle; however, a target that builds a shell tool does not include this build phase. The predefined build phases work for most simple targets; however, you can accommodate more complex products and build steps by adding your own build phases.</p><p>To add a build phase:</p><ol class="ol"><li class="li"><p>(Optional) Select the target to which you want to add the build phase. Otherwise, Xcode adds the build phase to the active target.</p></li><li class="li"><p>Choose a build phase from:</p><ul class="ul"><li class="li"><p>Project > New Build Phase</p></li></ul><p><span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCDIFFC">Table 2-1</a></span> shows the available build phases.</p></li></ol><p>Xcode adds the new build phase after the currently selected build phase, or, if no build phase is selected, adds it as the last build phase in the target. Several types of build phases can appear only once in a target; for example, there can be only one Compile Sources build phase. However, a target can contain multiple instances of the Copy Files and Run Script build phases.</p><p>To delete a build phase, select it in the Groups &amp; Files list and press Delete, or choose Edit > Delete. Deleting a build phase does not delete the files in the build phase from the project or from the file system.</p><a name="//apple_ref/doc/uid/TP40002690-CJAFCFEG" title="Adding Files to a Build Phase"></a><h2>Adding Files to a Build Phase</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_40"></a><p>When you add a file to a project, Xcode lets you choose whether to also add the file to any targets in the project. When you add files to a target this way, Xcode automatically assigns the files to build phases, based on each file’s type.</p><p>To view the inputs to a particular build phase, you can:</p><ul class="ul"><li class="li"><p>Select the build phase in the Groups &amp; Files list. The files assigned to the build phase are displayed in the detail view.</p></li><li class="li"><p>Open the build phase in the Groups &amp; Files list.</p></li></ul><p>Intermediate files—files generated by Xcode in other build phases—are not listed. Xcode handles these intermediate files automatically.</p><p>If the default file placement is not sufficient for your needs, you can drag the file or files from their current build phase to the new build phase. You can also drag existing files from the project group to the appropriate build phase in the Groups &amp; Files list. To remove a file from a build phase, select the file and press Delete.</p><a name="//apple_ref/doc/uid/TP40002690-BBCEIFIF" title="Compile Sources Build Phase"></a><h2>Compile Sources Build Phase</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_41"></a><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_42"></a><p>The Compile Sources build phase is one of the most easily customized build phases (the other one being the Run Script build phase). The reason is that this build phase must handle a wide variety of file types. Xcode is preconfigured to process several types of source files, but you may have to compile source files that Xcode doesn’t know about.</p><p>The feature that makes the Compile Sources build phase so flexible is its support of <em>build rules</em>. They specify the tool or script the build system invokes to process files in Compile Sources and Build ResourceManager Resources build phases when building a product. For details on build rules, see <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCCFEDJ">“Build Rules.”</a></span></p><a name="//apple_ref/doc/uid/TP40002690-CJAHHAJI" title="Copy Files Build Phase"></a><a name="//apple_ref/doc/writerid/xcode_user_guide_copy_files_build_phase" title="Copy Files Build Phase"></a><h2><a name="//apple_ref/doc/uid/TP40002690-SW2" title="Copy Files Build Phase"></a>Copy Files Build Phase</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_43"></a><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_44"></a><p>A Copy Files build phase allows you to copy files and resources of any type to specific locations as part of the build process. It complements the build phases that copy specific types of files. An example is the Copy Headers build phase, which deals only with header files. You can have as many Copy Files build phases as you need in a target.</p><p>For example, using a Copy Files build phase, you can copy fonts to<code>/Library/Fonts</code>. Or, if you’re developing a plug-in, a Copy Files build phase can copy the generated plug-in to the appropriate location. You can have as many Copy Files build phases in a target as you need.</p><p>To create a Copy Files build phase:</p><ol class="ol"><li class="li"><p>In the project window, open the target to which you want to add the build phase, and select the build phase after which to add the new build phase.</p></li><li class="li"><p>Choose Project > New Build Phase > New Copy Files Build Phase. Xcode adds the new Copy Files build phase after the build phase selected in the Groups &amp; Files list.</p></li><li class="li"><p>Drag the files you want to copy from the Groups &amp; Files list to the Copy Files build phase.</p></li></ol><p>To configure the new Copy Files build phase, select it and open the Copy Files build phase editor, shown in <span class="content_text">Figure 2-5</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40002690-SW3" title="Figure 2-5Copy Files build phase editor"></a><p><strong>Figure 2-5&nbsp;&nbsp;</strong>Copy Files build phase editor</p><img src = "../art/build_phase_editor_copy_files.jpg" alt = "Copy Files build phase editor" ></div><br/><p>Together, the Destination pop-up menu and the Path field specify the location to which Xcode copies the files in the Copy Files build phase. The Destination pop-up menu lets you choose from a number of standard locations. <span class="content_text">Table 2-3</span> shows the destination-location names you can choose in a Copy Files build phase for an application called MyApp and the resulting destination path. All the options, except Absolute Path and Products Directory, specify paths inside the generated bundle.</p><a name="//apple_ref/doc/uid/TP40002690-CJBEBCBJ" title="Table 2-3Destination names and example destination paths of the Copy Files build phase"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-3&nbsp;&nbsp;</strong>Destination names and example destination paths of the Copy Files build phase</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Destination name</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Destination path</p></th></tr><tr><td  scope="row"><p>Absolute Path</p></td><td ><p>Anywhere.</p></td></tr><tr><td  scope="row"><p>Wrapper</p></td><td ><p><code>MyApp.app</code></p></td></tr><tr><td  scope="row"><p>Executables</p></td><td ><p><code>MyApp.app/Contents/MacOS</code></p></td></tr><tr><td  scope="row"><p>Resources</p></td><td ><p><code>MyApp.app/Contents/Resources</code></p></td></tr><tr><td  scope="row"><p>Java Resources</p></td><td ><p><code>MyApp.app/Contents/Resources/Java</code></p></td></tr><tr><td  scope="row"><p>Frameworks</p></td><td ><p><code>MyApp.app/Contents/Frameworks</code></p></td></tr><tr><td  scope="row"><p>Shared Frameworks</p></td><td ><p><code>MyApp.app/Contents/SharedFrameworks</code></p></td></tr><tr><td  scope="row"><p>Shared Support</p></td><td ><p><code>MyApp.app/Contents/SharedSupport</code></p></td></tr><tr><td  scope="row"><p>Plug-ins</p></td><td ><p><code>MyApp.app/Contents/PlugIns</code></p></td></tr><tr><td  scope="row"><p>Products Directory</p></td><td ><p>The directory in which Xcode places the project’s built products. See <span class="content_text"><!--a target="_top" -->"Build Locations"<!--/a--></span> in <em><a href="../../XcodeProjectManagement/index.html#//apple_ref/doc/uid/TP40006917" target="_top">Xcode Project Management Guide</a></em>.</p></td></tr></table></div><p>The Path field specifies the path, relative to the location specified in the Destination pop-up menu, to the target directory. If you choose Absolute Path from the menu, the Path field must contain the complete path to the destination directory for the files.</p><p>The “Copy only when installing” option lets you specify whether the build phase copies the files only in <em>install builds</em> of the product. That is, when using the <code>install</code> option of <code>xcodebuild</code> or when the Deployment Location (DEPLOYMENT_LOCATION) build setting is turned on. For more on <code><a href="../../../../Darwin/Reference/ManPages/man1/xcodebuild.1.html#//apple_ref/doc/man/1/xcodebuild" target="_top">xcodebuild</a></code>, see <span class="content_text"><!--a target="_top" -->"Building with xcodebuild"<!--/a--></span> in <em><a href="../../XcodeProjectManagement/index.html#//apple_ref/doc/uid/TP40006917" target="_top">Xcode Project Management Guide</a></em>.</p><a name="//apple_ref/doc/uid/TP40002690-CJABHEIB" title="Run Script Build Phase"></a><a name="//apple_ref/doc/writerid/xcode_user_guide_run_script_build_phase" title="Run Script Build Phase"></a><h2><a name="//apple_ref/doc/uid/TP40002690-SW1" title="Run Script Build Phase"></a>Run Script Build Phase</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_45"></a><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_46"></a><p>A Run Script build phase lets you execute any commands you need to perform a task. You can archive files using <code><a href="../../../../Darwin/Reference/ManPages/man1/tar.1.html#//apple_ref/doc/man/1/tar" target="_top">tar</a></code>, send mail, write messages to a log file, execute AppleScript scripts, and so on. You can use any of the shell languages available in your system. And you can have any number of Run Script build phases in a target.</p><p>Before executing your script, Xcode assigns the values of most build settings to environment variables. In particular, it sets the environment variables listed in <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCHHHFI">Table 2-4</a></span>, as well as any build settings that are defined for the active target. This includes build settings defined at the target layer, as well as any build settings inherited from lower layers. If you are building using <code><a href="../../../../Darwin/Reference/ManPages/man1/xcodebuild.1.html#//apple_ref/doc/man/1/xcodebuild" target="_top">xcodebuild</a></code>, Xcode also passes any build settings defined on the command line to the environment.</p><p><span class="content_text">Listing 2-1</span> shows how to print the value of a build setting by printing the value of the corresponding environment variable.</p><a name="//apple_ref/doc/uid/TP40002690-SW15" title="Listing 2-1Example Run Script&acirc;&#128;&#147;build-phase script"></a><p class="codesample"><strong>Listing 2-1&nbsp;&nbsp;</strong>Example Run Script–build-phase script</p><div class="codesample"><table><tr><td scope="row"><pre>echo "Building ${PRODUCT_NAME}"<span></span></pre></td></tr></table></div><p>This is the corresponding entry in the build transcript in the build results window:</p><div class="codesample"><table><tr><td scope="row"><pre><em>Building Sketch</em><span></span></pre></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP40002690-SW12" title="Note"></a><p><strong>Note:</strong>&nbsp;If you change the value of environment variables in one script, the change is not visible in another script. This is because Xcode does not recognize changes made to those environment variables during the script’s execution and because shell scripts are independent of each other. For details on the build settings that are reflected in the script’s environment variables, see <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-SW6">“Using Build Settings in Run Script Build Phases.”</a></span></p></div><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_47"></a><p>To perform operations on intermediate files, you can use several build settings, whose value—which Xcode sets before executing your script—you access through environment variables. A few of these build settings are listed in <span class="content_text">Table 2-4</span>; the complete list of build settings that Xcode sets is much larger; see <em><a href="../../../Reference/XcodeBuildSettingRef/index.html#//apple_ref/doc/uid/TP40003931" target="_top">Xcode Build Setting Reference</a></em> for the complete list of build settings. </p><a name="//apple_ref/doc/uid/TP40002690-BBCHHHFI" title="Table 2-4Environment variables accessible from a Run Script build phase"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-4&nbsp;&nbsp;</strong>Environment variables accessible from a Run Script build phase</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Environment variable</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th></tr><tr><td  scope="row"><p><code>ACTION</code></p></td><td ><p>The action being performed on the current target, such as <code>build</code> or <code>clean</code>.</p></td></tr><tr><td  scope="row"><p><code>BUILD_VARIANTS</code></p></td><td ><p>The variations—<code>debug</code>, <code>profile</code> or <code>normal</code>—that Xcode is creating for the product being built.</p></td></tr><tr><td  scope="row"><p><code>PROJECT_NAME</code></p></td><td ><p>The name of the project containing the target that is being built.</p></td></tr><tr><td  scope="row"><p><code>PRODUCT_NAME</code></p></td><td ><p>The name of the product being built, without any extension or suffix.</p></td></tr><tr><td  scope="row"><p><code>TARGET_NAME</code></p></td><td ><p>The name of the target being built.</p></td></tr><tr><td  scope="row"><p><code>TARGET_BUILD_DIR</code></p></td><td ><p>The location of the target being built.</p></td></tr><tr><td  scope="row"><p><code>BUILT_PRODUCTS_DIR</code></p></td><td ><p>The directory that holds the products created by building the targets in a project.</p></td></tr><tr><td  scope="row"><p><code>TEMP_FILES_DIR</code></p></td><td ><p>The directory that holds intermediate files for a specific target.</p></td></tr><tr><td  scope="row"><p><code>DERIVED_FILES_DIR</code></p></td><td ><p>The directory that holds intermediate source files generated by the Compile Sources build phase.</p></td></tr><tr><td  scope="row"><p><code>INSTALL_DIR</code></p></td><td ><p>The location of the installed product.</p></td></tr></table></div><p>The script executes using the permissions of the logged-in user. Xcode runs the script with the initial working directory set to the project directory.</p><p>To create a Run Script build phase:</p><ol class="ol"><li class="li"><p>In the Groups &amp; Files list, open the target to which you want to add the build phase, and select an existing build phase.</p></li><li class="li"><p>Choose Project > New Build Phase > New Shell Script Build Phase.</p></li></ol><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_48"></a><p>To configure the new Run Script build phase, open the Run Script build phase Info window, shown in <span class="content_text">Figure 2-6</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40002690-SW4" title="Figure 2-6Run Script build phase Info window"></a><p><strong>Figure 2-6&nbsp;&nbsp;</strong>Run Script build phase Info window</p><img src = "../art/build_phase_editor_run_script.jpg" alt = "Run Script build phase editor" ></div><br/><p>The Run Script build phase editor contains these fields:</p><ul class="ul"><li class="li"><p><strong>Shell.</strong> Specifies the path to the appropriate shell. </p></li><li class="li"><p><strong>Script.</strong> Specifies the script itself. You can type the contents of the script directly in the text field or invoke it from a file, as in the example shown above.</p></li><li class="li"><p><strong>Run script only when installing.</strong> Runs the script only during install builds, that is, when using the <code>install</code> option of <code>xcodebuild</code> or when the build settings Deployment Location (DEPLOYMENT_LOCATION) and Deployment Postprocessing (DEPLOYMENT_POSTPROCESSING) are on.</p></li><li class="li"><p><strong>Show environment variables in build log.</strong> Lists the build system’s environment variables in the build log.</p></li><li class="li"><p><strong>Input Files.</strong> Specifies the names of the input files the script operates on.</p></li><li class="li"><p><strong>Output Files.</strong> Specifies the files that the script produces.</p><p>In these two tables, file paths are interpreted relative to the project directory.</p></li></ul><p>Xcode uses the input and output files to determine whether to run the script and to determine the order in which the script is executed. Specifying input and output files ensures that Xcode runs the script only when the modification date of any of the input files is later than the modification date of any of the output files (reducing the time it takes to build your product), and that the files the script produces are included in the dependency analysis the build system performs before building your product. If you provide no outputs, Xcode runs the script every time you build the target.</p><p>After the script terminates, Xcode uses the script’s exit value to determine whether to continue the build. When the script exits with a nonzero exit value, Xcode stops the build. If you want to perform other actions—such as writing to a log file—in the event of a build failure, you must perform the appropriate action in the script.</p><a name="//apple_ref/doc/uid/TP40002690-SW6" title="Using Build Settings in Run Script Build Phases"></a><h3>Using Build Settings in Run Script Build Phases</h3><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_49"></a><p>As Xcode constructs the command-line invocations for the various tools it uses to build a product, it accesses the build settings available at the target level. Also, when it sets the environment variables for shell scripts in Run Script build phases, it resolves most build settings and sets environment variables with their values.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002690-SW13" title="Note"></a><p><strong>Note:</strong>&nbsp;Modifying the values of the environment variables that the build system sets for shell scripts in Run Script build phases has no effect on the value of the corresponding build setting. That is, shell scripts executed as part of the same build process after one in which you modify the environment variables get the unmodified values. This is the expected UNIX scoping behavior for environment variables.</p></div><a name="//apple_ref/doc/uid/TP40002690-BBCCFEDJ" title="Build Rules"></a><a name="//apple_ref/doc/writerid/xcode_user_guide_build_rules" title="Build Rules"></a><h2>Build Rules</h2><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_50"></a><p>Build rules specify how particular types of files are processed in Compile Sources build phases and specify which tool is used to process files in Build ResourceManager Resources build phases. For example, a build rule may indicate that all C source files be processed with the GCC compiler. Each build rule consists of a condition and an action. The condition determines whether a source file is processed with the associated action. Usually, the condition specifies a file type.</p><p>Xcode provides default build rules that process C-based files, assembly files, Rez files, and so on. You can add rules to process other types of file to each target. You can see the build rules in effect for a target in the Rules pane of the Target Info window, shown in <span class="content_text">Figure 2-7</span>. Build rules are processed in the order they appear in the Rules pane.</p><br/><div><a name="//apple_ref/doc/uid/TP40002690-SW5" title="Figure 2-7Target editor: Rules pane"></a><p><strong>Figure 2-7&nbsp;&nbsp;</strong>Target editor: Rules pane</p><img src = "../art/target_editor_rules.jpg" alt = "Target editor: Rules pane" ></div><br/><p>There are two types of build rules:</p><ul class="ul"><li class="li"><p><strong>System build rules.</strong> System build rules are predefined and unmodifiable, although you can override them. They include rules for processing C-based, Assembler, and Rez source files. See <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCHFFFE">“System Build Rules”</a></span> for details. System rules are the same for all targets in a project.</p></li><li class="li"><p><strong>Target-specific build rules.</strong> Target-specific build rules are custom rules that you have defined for a particular target.</p></li></ul><p>Target-specific build rules can specify files that the system build rules do not directly address, and can override the existing system build rules. For example, there’s a system build rule for the processing of C-based source files, which means that <code>.c</code> and <code>.m</code> files are processed by the same build rule. You can, however, add a target-specific build rule indicating that <code>.m</code> files be processed by a different compiler. In addition, instead of specifying a particular type of file, you can set the build rule’s condition to a pattern that matches a set of files. See <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJACIIHG">“Creating a Build Rule.”</a></span></p><p>You can view all build rules for a target, including available system build rules, by choosing All Rules from the pop-up menu at the top of the Rules pane in the target editor. To see only those build rules defined for the target, choose Rules Specific to Target.</p><p>A build rule’s action typically specifies the tool or compiler to use when processing files that meet the given condition. But you can also specify a build-rule script. The default interpreter is <code>/bin/sh</code>. However, you can specify any script interpreter by entering <code>#!&lt;interpreter_path></code> as the first line of the script. When you use a build-rule script, you must specify the files the script produces as the build rule’s output files. See <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJAEACAD">“Creating a Build Rule Script.”</a></span></p><p>When processing a source file, Xcode evaluates the build rules from top to bottom and chooses the first one whose condition matches the source file being processed. Because custom build rules appear above the built-in system rules, the custom build rules can override the system build rules.</p><p>After a file is processed by a build rule, the output produced may be processed by another build rule when the second build rule takes as input files of the type the first build rule produces. For example, say you have a command-line tool that generates a Rez (<code>.r</code>) file from another type of file. You create a custom build rule that takes the specialized file as input an processes it using your command-line tool. Because the product of your custom build rule is a Rez file, the Rez file is then processed by the Rez system rule, which produces a <code>.rsrc</code> file.</p><a name="//apple_ref/doc/uid/TP40002690-BBCHFFFE" title="System Build Rules"></a><h3>System Build Rules</h3><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_51"></a><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_52"></a><p>System build rules are predefined rules in all targets and are used to process several well-known file types. <span class="content_text">Table 2-5</span> lists the system build rules that Xcode provides.</p><a name="//apple_ref/doc/uid/TP40002690-BBCCBDHD" title="Table 2-5System build rules"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-5&nbsp;&nbsp;</strong>System build rules</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Rule</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Inputs</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Outputs</p></th></tr><tr><td  scope="row"><p>Data Model Compiler</p></td><td ><p><code>.xcdatamodel</code></p></td><td ><p><code>.mom</code></p></td></tr><tr><td  scope="row"><p>C</p></td><td ><p><code>.c</code>, <code>.m</code>, <code>.cpp</code>, <code>.mm</code></p></td><td ><p><code>.o</code></p></td></tr><tr><td  scope="row"><p>Assembler</p></td><td ><p><code>.s</code></p></td><td ><p><code>.o</code></p></td></tr><tr><td  scope="row"><p>Yacc</p></td><td ><p><code>.y</code></p></td><td ><p><code>.h</code>, <code>.c</code></p></td></tr><tr><td  scope="row"><p>Lex</p></td><td ><p><code>.l</code></p></td><td ><p><code>.c</code></p></td></tr><tr><td  scope="row"><p>Rez</p></td><td ><p><code>.r</code></p></td><td ><p><code>.rsrc</code><code></code></p></td></tr><tr><td  scope="row"><p>MiG</p></td><td ><p><code>.defs</code></p></td><td ><p><code>.c</code></p></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002690-CJACIIHG" title="Creating a Build Rule"></a><h3>Creating a Build Rule</h3><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_53"></a><p>In addition to having system build rules, Xcode lets you define custom build rules on a per-target basis. Custom build rules allow you to change the way files of a particular type are processed or add support for types of files not directly addressed by the system rules.</p><p>To define a build rule’s condition, choose a file type from the Process pop-up menu. You can also define rules that match arbitrary file names by choosing “Source files with names matching:” from the Process pop-up menu, and specifying a filename pattern in the text field that appears. This field accepts file name substitution (or globbing), accepting the same kinds of file patterns that you can use in a command shell editor. For example, to match all files whose names start with a capital letter and end with a <code>.def</code> suffix, you specify <code>[A-Z]*.def</code> as the pattern.</p><p>You define the build rule’s action by choosing one of the available compilers from the “using” pop-up menu. Xcode provides a number of built-in compilers to choose from. Alternatively, you can define a custom script for processing files that meet the build rule’s condition, as described in <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJAEACAD">“Creating a Build Rule Script.”</a></span></p><p>When processing a source file in the target, Xcode evaluates the build rules from top to bottom and chooses the first one whose condition matches the source file being processed. For this reason, you should put the most specific build rules above the more general ones. For example, a rule that matches only C++ files should appear above a rule that matches all C-like files—that is, C, C++, Objective-C, and Objective-C++ files.</p><p>To reorder a custom rule, drag it from its background.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40002690-SW14" title="Note"></a><p><strong>Note:</strong>&nbsp;System rules cannot be reordered.</p></div><a name="//apple_ref/doc/uid/TP40002690-CJAEACAD" title="Creating a Build Rule Script"></a><h3>Creating a Build Rule Script</h3><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_54"></a><p>Instead of choosing one of Xcode’s built-in compilers to process the files specified by a build rule’s condition, you can create a custom script to process those files.</p><p>To create a custom script for a build rule, choose:</p><ul class="spaceabove"><li class="li"><p>“using” > “Custom script”</p></li></ul><p>You can enter your script in the text field that appears, or you can store your script as a separate file in your project and invoke it from the text field using its project-relative path. In this case, you are actually defining a one-line build rule script that calls the script in your project.</p><p>In addition to defining the script, you also need to tell Xcode the paths of any output files that the script produces. Enter the path to each separate output file that is produced by the script in the “with output files” table below the script text field. For each file, create a row by clicking the plus (+) button. In this row, specify either the full (absolute) path or the project-relative path to the file. You can use any of the environment variables listed in <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-BBCEIIHH">Table 2-6</a></span>.</p><p>For example, suppose that you need to define a build rule to process files with the extension <code>.abcdef</code>. Also suppose that the build rule script produces a <code>.c</code> file for each <code>.abcdef</code> file and that the generated <code>.c</code> files are placed in the default directory for intermediate files. In this case, the output-files specification could look like this:</p><div class="codesample"><table><tr><td scope="row"><pre>$(DERIVED_FILES_DIR)/$(INPUT_FILE_BASE).c<span></span></pre></td></tr></table></div><p>Note the use of parentheses in this example. The output-files specification uses the standard Xcode syntax for accessing build settings. Your custom script, however, must use standard shell syntax to access any environment variables corresponding to Xcode build settings, as described in <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-CJAJCACG">“Execution Environment for Build Rule Scripts.”</a></span></p><p>The generated files are automatically fed back to the rule-processing engine. For example, continuing the <code>.abcdef</code> example rule, Xcode processes the <code>.c</code> files the script produces using the rule that processes <code>.c</code> files.</p><a name="//apple_ref/doc/uid/TP40002690-CJAJCACG" title="Execution Environment for Build Rule Scripts"></a><h3>Execution Environment for Build Rule Scripts</h3><a name="//apple_ref/doc/uid/TP40002690-DontLinkElementID_55"></a><p>Before executing a build-rule script, Xcode sets environment variables to reflect the values of some build settings used to build the product. See <span class="content_text"><a href="bs_build_phases.html#//apple_ref/doc/uid/TP40002690-SW6">“Using Build Settings in Run Script Build Phases”</a></span> for details. In addition, Xcode sets a few environment variables to values the script may need to access. <span class="content_text">Table 2-6</span> describes these environment variables.</p><a name="//apple_ref/doc/uid/TP40002690-BBCEIIHH" title="Table 2-6Environment variables for build rule scripts"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong>Table 2-6&nbsp;&nbsp;</strong>Environment variables for build rule scripts</caption><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Variable</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Example</p></th></tr><tr><td  scope="row"><p><code>DERIVED_FILES_DIR</code></p></td><td ><p>Path of the directory for derived (intermediate) files.</p></td><td ><p><code>/Users/me/project/build/Project.build/​Target.build/DerivedSources</code></p></td></tr><tr><td  scope="row"><p><code>INPUT_FILE_DIR</code></p></td><td ><p>Directory containing the source file.</p></td><td ><p><code>/Users/me/Project</code></p></td></tr><tr><td  scope="row"><p><code>INPUT_FILE_BASE</code></p></td><td ><p>Base filename of the source file being processed.</p></td><td ><p><code>source</code></p></td></tr><tr><td  scope="row"><p><code>INPUT_FILE_NAME</code></p></td><td ><p>Filename of the source file being processed, including its extension.</p></td><td ><p><code>source.cpp</code></p></td></tr><tr><td  scope="row"><p><code>INPUT_FILE_PATH</code></p></td><td ><p>Path to the source file being processed.</p></td><td ><p><code>/Users/me/Project/source.cpp</code></p></td></tr><tr><td  scope="row"><p><code>INPUT_FILE_REGION_PATH_COMPONENT</code></p></td><td ><p>Directory containing the source file being processed when it’s localized. Otherwise, an empty string <code>""</code>.</p></td><td ><p><code>en_US.lproj/</code></p></td></tr><tr><td  scope="row"><p><code>INPUT_FILE_SUFFIX</code></p></td><td ><p>Suffix of the source file being processed, including the leading period.</p></td><td ><p><code>.cpp</code></p></td></tr><tr><td  scope="row"><p><code>TARGET_BUILD_DIR</code></p></td><td ><p>Path to the directory into which the target’s products are being built.</p></td><td ><p><code>/Users/me/Project/build/Development</code></p></td></tr></table></div><p>For example, you can use these environment variables to access the current input file, as in the following shell script:</p><div class="codesample"><table><tr><td scope="row"><pre>cat ${INPUT_FILE_NAME} > ${DERIVED_FILES_DIR}/${INPUT_FILE_BASE}.c<span></span></pre></td></tr></table></div><p>Note that the build rule script uses standard shell syntax to access the environment variables, rather than the Xcode syntax for referencing build settings.</p><p>Xcode runs build rule scripts with the current working directory set to the project directory. This behavior lets you access specific source files by using their project-relative paths.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../100-Targets/bs_targets.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../300-Build_Settings/bs_build_settings.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-02-04<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/XcodeBuildSystem/200-Build_Phases/bs_build_phases.html%3Fid%3DTP40006904-1.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/XcodeBuildSystem/200-Build_Phases/bs_build_phases.html%3Fid%3DTP40006904-1.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/XcodeBuildSystem/200-Build_Phases/bs_build_phases.html%3Fid%3DTP40006904-1.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>DialogSelect(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING428></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-427.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-429.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-370.html"><B>Chapter 6 - Dialog Manager</B></A> / <A HREF="Toolbox-386.html"><B>Dialog Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-389.html"><B>Dialog Manager Routines</B></A> / <A HREF="Toolbox-425.html"><B>Handling Events in Dialog Boxes </B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING428-0></A>
<H3><A NAME=MARKER-9-560></A>DialogSelect</H3>
 <A NAME=MARKER-11-561></A><A NAME=MARKER-2-562></A>After determining that an event related to an active modeless dialog box or an active movable modal dialog box has occurred, you can use the <CODE>DialogSelect</CODE> function to handle most of the events inside the dialog box.<P>
<PRE>
FUNCTION DialogSelect (theEvent: EventRecord;
                       VAR theDialog: DialogPtr;
                       VAR itemHit: Integer): Boolean;
</PRE>
<DL>
<DT><CODE>theEvent</CODE>
<DD> An event record returned by an Event Manager function such as <CODE>WaitNextEvent</CODE>.
<DT><CODE>theDialog</CODE>
<DD> A pointer to a dialog record for the dialog box where the event occurred.
<DT><CODE>itemHit</CODE>
<DD> <DFN>A</DFN> number corresponding to the position of an item within the item list resource of the active dialog box.
</DL>
<A NAME=HEADING428-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>DialogSelect</CODE> function handles most of the events relating to a dialog box. If the event is an activate or update event for a dialog box, <CODE>DialogSelect</CODE> activates or updates it and returns <CODE>FALSE</CODE>. If the event involves an enabled item, <CODE>DialogSelect</CODE> returns a function result of <CODE>TRUE</CODE>. In its <CODE>itemHit</CODE> parameter, it returns the item number of the item selected by the user. In the parameter <CODE>theDialog</CODE>, it returns a pointer to <BR>the dialog record for the dialog box where the event occurred. In all other cases, the <CODE>DialogSelect</CODE> function returns <CODE>FALSE</CODE>. When <CODE>DialogSelect</CODE> returns <CODE>TRUE</CODE>, do whatever is appropriate as a response to the event involving that item in that particular dialog box; when it returns <CODE>FALSE</CODE>, do nothing.<P>
 Generally, only controls should be enabled in a dialog box; therefore your application should normally respond only when <CODE>DialogSelect</CODE> returns <CODE>TRUE</CODE> after the user clicks an enabled control, such as the OK button.<P>
 The <CODE>DialogSelect</CODE> function first obtains a pointer to the window containing the event. For update and activate events, the event record contains the window pointer. For other types of events, <CODE>DialogSelect</CODE> calls the Window Manager function <CODE>FrontWindow</CODE>. <BR>The Dialog Manager then makes this window the current graphics port by calling the QuickDraw procedure <CODE>SetPort</CODE>. Then <CODE>DialogSelect</CODE> prepares to handle the event by setting up text information if there are any editable text items in the active dialog box.<P>
 If the event is an update event for a dialog box, <CODE>DialogSelect</CODE> calls the Window Manager procedure <CODE>BeginUpdate</CODE>, the Dialog Manager procedure <CODE>DrawDialog</CODE>, <BR>and then the Window Manager procedure <CODE>EndUpdate</CODE>. When an item is a control defined in a control (<CODE>'CNTL'</CODE>)<DFN> resource, the rectangle added to the update region is the rectangle defined in the </DFN>control<DFN> resource</DFN>, not the display rectangle defined in the item <BR>list resource.<P>
 The <CODE>DialogSelect</CODE> function handles the event as follows:<P>
<UL>
<LI>In response to an activate or update event for the dialog box, <CODE>DialogSelect</CODE> activates or updates its window and returns <CODE>FALSE</CODE>.
<LI>If a key-down event or an auto-key event occurs and there's an editable text item <BR>in the dialog box, <CODE>DialogSelect</CODE> uses TextEdit to handle text entry and editing, <BR>and <CODE>DialogSelect</CODE> returns <CODE>TRUE<DFN> for a function result</DFN></CODE>. <DFN>In its <CODE>itemHit parameter, DialogSelect returns </CODE></DFN>the item number.
<LI>If a key-down event or an auto-key event occurs and there's no editable text item in the dialog box, <CODE>DialogSelect</CODE> returns <CODE>FALSE</CODE>.
<LI>If the user presses the mouse button while the cursor is in an editable text item, <CODE>DialogSelect</CODE> responds to the mouse activity as appropriate--that is, either by displaying an insertion point or by selecting text. If the editable text item is disabled, <CODE>DialogSelect</CODE> returns <CODE>FALSE</CODE>. If the editable text item is enabled, <CODE>DialogSelect</CODE> returns <CODE>TRUE<DFN> and in its itemHit parameter returns </DFN></CODE>the item number. Normally, editable text items are disabled, and you use the <CODE>GetDialogItemText</CODE> function to read the information in the items only after the OK button is clicked.
<LI>If the user presses the mouse button while the cursor is in a control, <CODE>DialogSelect</CODE> calls the Control Manager function <CODE>TrackControl</CODE>. If the user releases the mouse button while the cursor is in an enabled control, <CODE>DialogSelect</CODE> returns <CODE>TRUE<DFN> for a function result and in its itemHit parameter returns</DFN></CODE> the control's item number. Your application should respond appropriately--for example, by performing a command after the user clicks the OK button.
<LI>If the user presses the mouse button while the cursor is in any other enabled item in the dialog box, <CODE>DialogSelect</CODE> returns <CODE>TRUE<DFN> for a function result and in its itemHit parameter returns</DFN></CODE> the item's number. Generally, only controls should be enabled. If your application creates a complex control--such as one that measures how far a dial is moved--your application must handle mouse events in that item before passing the event to <CODE>DialogSelect</CODE>.
<LI>If the user presses the mouse button while the cursor is in a disabled item, or if it is in no item, or if any other event occurs, <CODE>DialogSelect</CODE> does nothing.
<LI>If the event isn't one that <CODE>DialogSelect</CODE> specifically checks for (if it's a null event, for example), and if there's an editable text item in the dialog box, <CODE>DialogSelect</CODE> calls the TextEdit procedure <CODE>TEIdle</CODE> to make the insertion point blink.<P>
</UL>
<A NAME=HEADING428-20></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 Because <CODE>DialogSelect</CODE> handles only mouse-down events in a dialog box and key-down events in a dialog box's editable text items, you should handle other events <BR>as appropriate before passing them to <CODE>DialogSelect</CODE>. Likewise, when <CODE>DialogSelect</CODE> calls <CODE>TrackControl</CODE>, it does not allow you to specify any action procedure necessary for anything more complex than a button, radio button, or checkbox. If you need a more complex control (for example, one that measures how long the user holds down the mouse button or how far the user has moved an indicator), you can create your own control or a picture or an application-defined item that draws a control-like object in your dialog box. You must then test for and respond to those events yourself.<P>
 Within dialog boxes, use the procedures <CODE>DialogCut</CODE>, <CODE>DialogCopy</CODE>, <CODE>DialogPaste</CODE>, and <CODE>DialogDelete</CODE> to support Cut, Copy, Paste, and Clear commands in editable text boxes.<P>
 The <CODE>DialogSelect</CODE> function is unreliable when running in versions of system software earlier than System 7. You shouldn't use this routine if you expect your application to run under earlier versions of system software.<P>
<A NAME=HEADING428-24></A>
<H5>SEE ALSO</H5>
 <DFN><A HREF=Toolbox-385.html#MARKER-9-316>Listing 6-25 on page 6-79</A></DFN> illustrates the use of <CODE>DialogSelect</CODE> to make the cursor blink in editable text items during null events;<DFN> <A HREF=Toolbox-385.html#MARKER-9-365>Listing 6-29 on page 6-92</A></DFN> illustrates the use of <CODE>DialogSelect</CODE> to handle mouse events in a modeless dialog box; <A HREF=Toolbox-385.html#MARKER-9-373>Listing 6-33 on page 6-96</A> illustrates the use of <CODE>DialogSelect</CODE> to handle key-down events in editable text items; <A HREF=Toolbox-385.html#MARKER-9-378>Listing 6-34 on page 6-98</A> illustrates the use of <CODE>DialogSelect</CODE> to handle activate events in a modeless dialog box. <A NAME=MARKER-2-563></A><A NAME=MARKER-2-564></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-427.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-429.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

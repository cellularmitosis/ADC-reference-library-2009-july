<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Porting CodeWarrior Projects to Xcode: Using PowerPlant in Universal Binaries</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Using PowerPlant in Universal Binaries"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002972" title="Using PowerPlant in Universal Binaries"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000436" target="_top">Tools</a> &gt; <a href="../../../Xcode-date.html#//apple_ref/doc/uid/TP30000440-TP30000436-TP30000557" target="_top">Xcode</a> &gt; <a href="../migration_overview/migration_overview.html#//apple_ref/doc/uid/TP40001286-TPXREF101">Porting CodeWarrior Projects to Xcode</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../mig_after_importing/mig_after_importing.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../mig_where_to_go/mig_where_to_go.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40002972-SW1" title="Using PowerPlant in Universal Binaries"></a><h1>Using PowerPlant in Universal Binaries</h1><p>You can use PowerPlant on an Intel-based Macintosh computer only after you make the changes detailed in this section. Most of the substantial changes that you need to make are to the PowerPlant <code>LStream</code> class. PowerPlant uses <code>LStream</code> for a number of different I/O tasks, of which the most important is reading to and writing from <code>'PPob'</code> resources. <span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-264914">“Changing LStream Code”</a></span> provides a detailed description of all the <code>LStream</code>-related changes that are required.</p><p>If you use the <code>LDataBrowser</code> PowerPlant class and the <code>'DBC#'</code> resource, you might also need to write a resource flipper. See <span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-262391">“Flipping the 'DBC#’ Resource Type.”</a></span></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002972-BAJHCGDE">Changing LStream Code</a>
				
			<br/>
			
        
			
			
				<a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002972-BAJEDHFB">Flipping the 'DBC#’ Resource Type</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40002217-CH241-264914" title="Changing LStream Code"></a><a name="//apple_ref/doc/uid/TP40002972-BAJHCGDE" title="Changing LStream Code"></a><h2>Changing LStream Code</h2><p>The changes discussed in this section cause <code>LStream</code> to always read and write big-endian data. After you make these changes</p><ul class="ul"><li class="li"><p><code>PPob</code> resources will work correctly on both PowerPC-based and Intel-based Macintosh computers, with the possible exception of custom types used by your application. Custom types will also work correctly if you ensure that the <code>LStream</code> constructors used by your custom types employ the streaming methods of <code>LStream</code> rather than the byte-manipulation methods.</p></li><li class="li"><p>Data read from and written to disk or to the network and that is written with <code>LStream</code> will be portable between PowerPC-based and Intel-based Macintosh computers, with the exception of calls to the methods shown in <span class="content_text">Listing 5-1</span>. For calls to those methods, your code should either swap bytes to big-endian format or switch to using the streaming methods of <code>LStream</code>. </p></li></ul><p>Make sure that you evaluate all calls to the methods in <span class="content_text">Listing 5-1</span> (including calls to any subclassed versions of these methods) to see if they require byte swapping.</p><a name="//apple_ref/doc/uid/TP40002972-BAJBCGIC" title="Listing 5-1Calls that may require swapping bytes"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002217-CH241-266731" title="Listing 5-1Calls that may require swapping bytes"></a><strong>Listing 5-1&nbsp;&nbsp;</strong>Calls that may require swapping bytes</p><div class="codesample"><table><tr><td scope="row"><pre>LStream::PutBytes<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::WriteData<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::WriteBlock<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::operator &lt;&lt; (Handle inHandle)<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::GetBytes<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::ReadData<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::ReadBlock<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::PeekData<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::operator >> (Handle &amp;outHandle)<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::WritePtr<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::ReadPtr<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::WriteHandle<span></span></pre></td></tr><tr><td scope="row"><pre>LStream::ReadHandle<span></span></pre></td></tr></table></div><p>If you have custom classes in a <code>PPob</code> resource, you should change their <code>LStream</code> constructors to avoid calling <code>LStream::ReadData</code>. Specifically, you need to change the code in the same way as the <code>LStream</code> constructors for <code>LControl</code>, <code>LListBox</code>, and other PowerPlant classes are changed in the following sections. The sections, organized by the files you need to change, describe the required code changes:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-264924">“LStream.h”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-265464">“LStream.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-265590">“LControl.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-265651">“LListBox.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-265832">“LPane.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-265947">“LPrintout.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266017">“LScroller.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266082">“LTable.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266147">“LView.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266222">“LWindow.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266312">“LPopupGroupBox.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266372">“LControlView.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266432">“LScrollerView.cp”</a></span></p></li><li class="li"><p><span class="content_text"><a href="UsingPPlantInUniversalBinaries.html#//apple_ref/doc/uid/TP40002217-CH241-266497">“LPageController.cp”</a></span></p></li></ul><a name="//apple_ref/doc/uid/TP40002217-CH241-264924" title="LStream.h"></a><a name="//apple_ref/doc/uid/TP40002972-BAJJEFDJ" title="LStream.h"></a><h3>LStream.h</h3><p>Change the <code>operator &lt;&lt; (const Rect&amp;inRect)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>Rect rect;<span></span></pre></td></tr><tr><td scope="row"><pre>rect.top = CFSwapInt16HostToBig(inRect.top);<span></span></pre></td></tr><tr><td scope="row"><pre>rect.left = CFSwapInt16HostToBig(inRect.left);<span></span></pre></td></tr><tr><td scope="row"><pre>rect.right= CFSwapInt16HostToBig(inRect.right);<span></span></pre></td></tr><tr><td scope="row"><pre>rect.bottom = CFSwapInt16HostToBig(inRect.bottom);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;rect, sizeof(rect));<span></span></pre></td></tr></table></div><p>Change the <code>operator &lt;&lt; (const Point &amp;inPoint)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>Point pt;<span></span></pre></td></tr><tr><td scope="row"><pre>pt.v = CFSwapInt16HostToBig(inPoint.v);<span></span></pre></td></tr><tr><td scope="row"><pre>pt.h = CFSwapInt16HostToBig(inPoint.h);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;pt, sizeof(pt));<span></span></pre></td></tr></table></div><p>Change the <code>operator &lt;&lt; (SInt16 inNum)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>SInt16 n;<span></span></pre></td></tr><tr><td scope="row"><pre>n = CFSwapInt16HostToBig(inNum);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;n, sizeof(n));<span></span></pre></td></tr></table></div><p>Change the <code>operator &lt;&lt; (UInt16 inNum)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>UInt16 n;<span></span></pre></td></tr><tr><td scope="row"><pre>n = CFSwapInt16HostToBig(inNum);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;n, sizeof(n));<span></span></pre></td></tr></table></div><p>Change the <code>operator &lt;&lt; (SInt32 inNum)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>SInt32 n;<span></span></pre></td></tr><tr><td scope="row"><pre>n = CFSwapInt32HostToBig(inNum);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;n, sizeof(n));<span></span></pre></td></tr></table></div><p>Change the <code>operator &lt;&lt; (UInt32 inNum)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>UInt32 n;<span></span></pre></td></tr><tr><td scope="row"><pre>n = CFSwapInt32HostToBig(inNum);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;n, sizeof(n));<span></span></pre></td></tr></table></div><p>Change the <code>operator &lt;&lt; (float inNum)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>CFSwappedFloat32 swappedFloat;<span></span></pre></td></tr><tr><td scope="row"><pre>swappedFloat = CFConvertFloat32HostToSwapped(inNum);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;swappedFloat, sizeof(swappedFloat));<span></span></pre></td></tr></table></div><p>Change the <code>operator &lt;&lt; (bool inBool)</code> method from a single <code>WriteBlock</code> call to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>UInt32 boolValue;<span></span></pre></td></tr><tr><td scope="row"><pre>boolValue = CFSwapInt32HostToBig(inBool);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;boolValue, sizeof(boolValue));<span></span></pre></td></tr></table></div><p>In the <code>operator >> (Rect &amp;outRect)</code> method, add this after the <code>ReadBlock</code> call:</p><div class="codesample"><table><tr><td scope="row"><pre>outRect.top = CFSwapInt16BigToHost(outRect.top);<span></span></pre></td></tr><tr><td scope="row"><pre>outRect.left = CFSwapInt16BigToHost(outRect.left);<span></span></pre></td></tr><tr><td scope="row"><pre>outRect.right= CFSwapInt16BigToHost(outRect.right);<span></span></pre></td></tr><tr><td scope="row"><pre>outRect.bottom = CFSwapInt16BigToHost(outRect.bottom);<span></span></pre></td></tr></table></div><p>In the <code>operator >> (Point &amp;outPoint)</code> method, add the following after the <code>ReadBlock</code> call:</p><div class="codesample"><table><tr><td scope="row"><pre>outPoint.v = CFSwapInt16BigToHost(outPoint.v);<span></span></pre></td></tr><tr><td scope="row"><pre>outPoint.h = CFSwapInt16BigToHost(outPoint.h);<span></span></pre></td></tr></table></div><p>In the <code>operator >> (SInt16 &amp;outNum)</code> method, add the following after the <code>ReadBlock</code> call:</p><p><code>outNum = CFSwapInt16BigToHost(outNum);</code></p><p>In the <code>operator >> (UInt16 &amp;outNum)</code> method, add the following after the <code>ReadBlock</code> call:</p><p><code>outNum = CFSwapInt16BigToHost(outNum);</code></p><p>In the <code>operator >> (SInt32 &amp;outNum)</code> method, add the following after the <code>ReadBlock</code> call:</p><p><code>outNum = CFSwapInt32BigToHost(outNum);</code></p><p>In the <code>operator >> (UInt32 &amp;outNum)</code> method, add the following after the <code>ReadBlock</code> call:</p><p><code>outNum = CFSwapInt32BigToHost(outNum);</code></p><p>In the <code>operator >> (float &amp;outNum)</code> method, replace the <code>ReadBlock</code> call with the following:</p><div class="codesample"><table><tr><td scope="row"><pre>CFSwappedFloat32 swappedFloat;<span></span></pre></td></tr><tr><td scope="row"><pre>ReadBlock(&amp;swappedFloat, sizeof(swappedFloat));<span></span></pre></td></tr><tr><td scope="row"><pre>outNum = CFConvertFloat32SwappedToHost(swappedFloat);<span></span></pre></td></tr></table></div><p>In the <code>operator >> (bool &amp;outBool)</code> method, replace the <code>ReadBlock</code> call with the following:</p><div class="codesample"><table><tr><td scope="row"><pre>UInt32 boolValue;<span></span></pre></td></tr><tr><td scope="row"><pre>ReadBlock(&amp;boolValue, sizeof(boolValue));<span></span></pre></td></tr><tr><td scope="row"><pre>outBool = CFSwapInt32BigToHost(boolValue);<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-265464" title="LStream.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJCDDDB" title="LStream.cp"></a><h3>LStream.cp</h3><p>In the <code>operator &lt;&lt; (double inNum)</code> method, change the <code>#if TARGET_CPU_PPC</code> block to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>#if TARGET_CPU_PPC || TARGET_CPU_X86<span></span></pre></td></tr><tr><td scope="row"><pre>// PowerPC and Intel doubles -- they're 8 bytes already, so just swap<span></span></pre></td></tr><tr><td scope="row"><pre>// if necessary and write.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>Assert_(sizeof(inNum) == 8);<span></span></pre></td></tr><tr><td scope="row"><pre>CFSwappedFloat64 swappedDouble = CFConvertDoubleHostToSwapped(inNum);<span></span></pre></td></tr><tr><td scope="row"><pre>WriteBlock(&amp;swappedDouble, sizeof(swappedDouble));<span></span></pre></td></tr></table></div><p>In the <code>operator >> (double&amp; outNum)</code> method, change the <code>#if TARGET_CPU_PPC</code> block to the following:</p><div class="codesample"><table><tr><td scope="row"><pre>#if TARGET_CPU_PPC || TARGET_CPU_X86<span></span></pre></td></tr><tr><td scope="row"><pre>// PowerPC and Intel doubles -- they're 8 bytes already, so just read<span></span></pre></td></tr><tr><td scope="row"><pre>// and swap if necessary.<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>Assert_(sizeof(outNum) == 8);<span></span></pre></td></tr><tr><td scope="row"><pre>CFSwappedFloat64 swappedDouble;<span></span></pre></td></tr><tr><td scope="row"><pre>ReadBlock(&amp;swappedDouble, sizeof(swappedDouble));<span></span></pre></td></tr><tr><td scope="row"><pre>outNum = CFConvertDoubleSwappedToHost(swappedDouble);<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-265590" title="LControl.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJBABAD" title="LControl.cp"></a><h3>LControl.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;controlInfo, sizeof(SControlInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> controlInfo.valueMessage;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> controlInfo.value;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> controlInfo.minValue;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> controlInfo.maxValue;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-265651" title="LListBox.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJFJAJF" title="LListBox.cp"></a><h3>LListBox.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;listInfo, sizeof(SListBoxInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> listInfo.hasHorizScroll;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> listInfo.hasVertScroll;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> listInfo.hasGrow;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> listInfo.hasFocusBox;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> listInfo.doubleClickMessage;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> listInfo.textTraitsID;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> listInfo.LDEFid;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> listInfo.numberOfItems;<span></span></pre></td></tr></table></div><p>In the <code>RestorePlace(LStream*inPlace)</code> method, replace the following line:</p><div class="codesample"><table><tr><td scope="row"><pre> inPlace->ReadData(&amp;theRect, sizeof(Rect));<span></span></pre></td></tr></table></div><p>with this line:</p><p><code>*inPlace >> theRect;</code></p><p>Further down in the method, just under the <code>if (vScroll != nil)</code> line, replace this line:</p><p><code>inPlace->ReadData(&amp;theRect, sizeof(Rect));</code></p><p>with this line:</p><p><code>*inPlace >> theRect;</code></p><p>And once more in the same method, just under the <code>if (hScroll != nil)</code> line, replace this line:</p><p><code>inPlace->ReadData(&amp;theRect, sizeof(Rect));</code></p><p>with this line:</p><p><code>*inPlace >> theRect;</code></p><a name="//apple_ref/doc/uid/TP40002217-CH241-265832" title="LPane.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJCCFHI" title="LPane.cp"></a><h3>LPane.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;thePaneInfo, sizeof(SPaneInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>SInt32 viewPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.paneID;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.width;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.height;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.visible;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.enabled;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.bindings.left;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.bindings.top;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.bindings.right;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.bindings.bottom;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.left;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.top;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePaneInfo.userCon;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> viewPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>thePaneInfo.superView = reinterpret_cast&lt;LView *>(viewPtr);<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-265947" title="LPrintout.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJCDCHI" title="LPrintout.cp"></a><h3>LPrintout.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;thePrintoutInfo, sizeof(SPrintoutInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> thePrintoutInfo.width;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePrintoutInfo.height;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePrintoutInfo.active;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePrintoutInfo.enabled;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePrintoutInfo.userCon;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> thePrintoutInfo.attributes;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266017" title="LScroller.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJEFBEJ" title="LScroller.cp"></a><h3>LScroller.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;scrollerInfo, sizeof(SScrollerInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> scrollerInfo.horizBarLeftIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.horizBarRightIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.vertBarTopIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.vertBarBottomIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.scrollingViewID;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266082" title="LTable.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJIBIHJ" title="LTable.cp"></a><h3>LTable.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;tableInfo, sizeof(STableInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> tableInfo.numberOfRows;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> tableInfo.numberOfCols;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> tableInfo.rowHeight;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> tableInfo.colWidth;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> tableInfo.cellDataSize;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266147" title="LView.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJCHEHG" title="LView.cp"></a><h3>LView.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;viewInfo, sizeof(SViewInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> viewInfo.imageSize.width;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> viewInfo.imageSize.height;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> viewInfo.scrollPos.h;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> viewInfo.scrollPos.v;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> viewInfo.scrollUnit.h;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> viewInfo.scrollUnit.v;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> viewInfo.reconcileOverhang;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266222" title="LWindow.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJFAAJC" title="LWindow.cp"></a><h3>LWindow.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;windowInfo, sizeof(SWindowInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> windowInfo.WINDid;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.layer;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.attributes;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.minimumWidth;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.minimumHeight;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.maximumWidth;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.maximumHeight;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.standardSize.width;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.standardSize.height;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> windowInfo.userCon;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266312" title="LPopupGroupBox.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJCFIIE" title="LPopupGroupBox.cp"></a><h3>LPopupGroupBox.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;cInfo, sizeof(SControlInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> cInfo.valueMessage;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> cInfo.value;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> cInfo.minValue;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> cInfo.maxValue;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266372" title="LControlView.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJFFCFF" title="LControlView.cp"></a><h3>LControlView.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;cInfo, sizeof(SControlInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> cInfo.valueMessage;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> cInfo.value;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> cInfo.minValue;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> cInfo.maxValue;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266432" title="LScrollerView.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJDCDJC" title="LScrollerView.cp"></a><h3>LScrollerView.cp</h3><p>In the <code>LStream</code> constructor, replace this line:</p><p><code>inStream->ReadData(&amp;scrollerInfo, sizeof(SScrollerViewInfo));</code></p><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> scrollerInfo.horizBarLeftIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.horizBarRightIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.vertBarTopIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.vertBarBottomIndent;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> scrollerInfo.scrollingViewID;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-266497" title="LPageController.cp"></a><a name="//apple_ref/doc/uid/TP40002972-BAJCGICI" title="LPageController.cp"></a><h3>LPageController.cp</h3><p>In the <code>LStream</code> constructor, replace these lines:</p><div class="codesample"><table><tr><td scope="row"><pre>inStream->ReadData( &amp;mBackColor, sizeof(RGBColor));<span></span></pre></td></tr><tr><td scope="row"><pre>inStream->ReadData( &amp;mFaceColor, sizeof(RGBColor));<span></span></pre></td></tr><tr><td scope="row"><pre>inStream->ReadData( &amp;mPushedTextColor, sizeof(RGBColor));<span></span></pre></td></tr></table></div><p>with the following lines:</p><div class="codesample"><table><tr><td scope="row"><pre>*inStream >> mBackColor.red;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mBackColor.green;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mBackColor.blue;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mFaceColor.red;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mFaceColor.green;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mFaceColor.blue;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mPushedTextColor.red;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mPushedTextColor.green;<span></span></pre></td></tr><tr><td scope="row"><pre>*inStream >> mPushedTextColor.blue;<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40002217-CH241-262391" title="Flipping the &#39;DBC#&acirc;&#128;&#153; Resource Type"></a><a name="//apple_ref/doc/uid/TP40002972-BAJEDHFB" title="Flipping the &#39;DBC#&acirc;&#128;&#153; Resource Type"></a><h2>Flipping the 'DBC#’ Resource Type</h2><p>If you use the <code>LDataBrowser</code> PowerPlant class, you might be using a <code>'DBC#'</code> resource. If so, you will need to write a resource flipper similar to that shown in <span class="content_text">Listing 5-2</span>.</p><a name="//apple_ref/doc/uid/TP40002972-BAJHJJHB" title="Listing 5-2Code that flips the &#39;DBC#&#39; resource type"></a><p class="codesample"><a name="//apple_ref/doc/uid/TP40002217-CH241-262418" title="Listing 5-2Code that flips the &#39;DBC#&#39; resource type"></a><strong>Listing 5-2&nbsp;&nbsp;</strong>Code that flips the <code>'DBC#'</code> resource type</p><div class="codesample"><table><tr><td scope="row"><pre>struct DataBrowserColumnSetup {<span></span></pre></td></tr><tr><td scope="row"><pre>    DataBrowserTableViewColumnID    propertyID;         // UInt32<span></span></pre></td></tr><tr><td scope="row"><pre>    DataBrowserPropertyType         propertyType;       // unsigned long<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt32                          nameStrIndex;<span></span></pre></td></tr><tr><td scope="row"><pre>    DataBrowserPropertyFlags        propertyFlags;      // UInt32<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16                          minimumWidth;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16                          maximumWidth;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16                          initialWidth;<span></span></pre></td></tr><tr><td scope="row"><pre>    ControlContentType              btnContentType;     // SInt16<span></span></pre></td></tr><tr><td scope="row"><pre>    ControlButtonGraphicAlignment   btnContentAlign;    // SInt16<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt16                          btnContentDataID;<span></span></pre></td></tr><tr><td scope="row"><pre>    ControlButtonGraphicAlignment   titleAlignment;     // SInt16<span></span></pre></td></tr><tr><td scope="row"><pre>    ControlButtonTextPlacement      titlePlacement;     // SInt16<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt16                          titleFontTypeID;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt16                          titleFontStyle;<span></span></pre></td></tr><tr><td scope="row"><pre>    SInt16                          titleFontSize;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16                          titleOffset;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct DataBrowserColumnSetup   DataBrowserColumnSetup;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus FlipDBC_(OSType dataDomain, OSType dataType,<span></span></pre></td></tr><tr><td scope="row"><pre>                  short id, void* dataPtr, UInt32 dataSize,<span></span></pre></td></tr><tr><td scope="row"><pre>                  Boolean currentlyNative, void* refcon)<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    DataBrowserColumnSetup *dbc;<span></span></pre></td></tr><tr><td scope="row"><pre>    UInt16 count;<span></span></pre></td></tr><tr><td scope="row"><pre>    int i;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (currentlyNative) {<span></span></pre></td></tr><tr><td scope="row"><pre>        count = *(UInt16 *) dataPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>        *(UInt16 *) dataPtr = EndianU16_NtoB(count);<span></span></pre></td></tr><tr><td scope="row"><pre>    } else {<span></span></pre></td></tr><tr><td scope="row"><pre>        *(UInt16 *) dataPtr = EndianU16_BtoN(count);<span></span></pre></td></tr><tr><td scope="row"><pre>        count = *(UInt16 *) dataPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    dataPtr += sizeof(UInt16);<span></span></pre></td></tr><tr><td scope="row"><pre>    dbc = (DataBrowserColumnSetup *) dataPtr;<span></span></pre></td></tr><tr><td scope="row"><pre>    for(i = 0; i &lt; count; i++, dbc++) {<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->propertyID = Endian32_Swap(dbc->propertyID);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->propertyType = Endian32_Swap(dbc->propertyType);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->nameStrIndex = Endian32_Swap(dbc->nameStrIndex);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->propertyFlags = Endian32_Swap(dbc->propertyFlags);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->minimumWidth = Endian16_Swap(dbc->minimumWidth);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->maximumWidth = Endian16_Swap(dbc->maximumWidth);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->initialWidth = Endian16_Swap(dbc->initialWidth);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->btnContentType = Endian16_Swap(dbc->btnContentType);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->titleAlignment = Endian16_Swap(dbc->titleAlignment);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->titlePlacement = Endian16_Swap(dbc->titlePlacement);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->titleFontTypeID = Endian16_Swap(dbc->titleFontTypeID);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->titleFontStyle = Endian16_Swap(dbc->titleFontStyle);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->titleFontSize = Endian16_Swap(dbc->titleFontSize);<span></span></pre></td></tr><tr><td scope="row"><pre>        dbc->titleOffset = Endian16_Swap(dbc->titleOffset);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return noErr;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../mig_after_importing/mig_after_importing.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../mig_where_to_go/mig_where_to_go.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-10-26<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Conceptual/MovingProjectsToXcode/UsingPPlantInUniversalBinaries/UsingPPlantInUniversalBinaries.html%3Fid%3D20001708-5.6&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Conceptual/MovingProjectsToXcode/UsingPPlantInUniversalBinaries/UsingPPlantInUniversalBinaries.html%3Fid%3D20001708-5.6&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Conceptual/MovingProjectsToXcode/UsingPPlantInUniversalBinaries/UsingPPlantInUniversalBinaries.html%3Fid%3D20001708-5.6&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Java 1.4.1 Release Notes: Multiple Versions of Java</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Multiple Versions of Java"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../documentation/Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../documentation/Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../documentation/Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../documentation/Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../documentation/Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../documentation/Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000284" title="Multiple Versions of Java"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000872" target="_top">Release Notes</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000872-TP30000425" target="_top">Java</a> &gt; <a href="../about/about.html#//apple_ref/doc/uid/TP30000282-DontLinkElementID_33">Java 1.4.1 Release Notes</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../whatsnew/whatsnew.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../system_properties/system_properties.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../documentation/Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000284-DontLinkElementID_34" title="Multiple Versions of Java"></a><h1><a name="//apple_ref/doc/uid/TP30000284-BAJFFABE" title="Multiple Versions of Java"></a>Multiple Versions of Java</h1><p>This release marks a break with tradition for Mac OS X and Java. In previous releases there could only be one version of Java installed on the system. Developers only needed to be concerned with a single Java version for a particular version of Mac OS X. With the Java 1.4.1release, there is the possibility that users will have two different versions of Java on their system. As a developer you need to take this into account for both future development and support of existing Java applications.</p>
<p>Note that there are only two versions of Java when a user has explicitly installed Java 1.4.1. If a user has not explicitly installed Java 1.4.1, they will have only Java 1.3.1, and any 1.4.1-specific code will not work. They can download Java 1.4.1through Software Update or from <span class="content_text"><a href="http://www.apple.com/downloads/macosx/" target="_blank">http://www.apple.com/downloads/macosx/</a></span>. As a developer, there are many ways you can determine whether Java 1.4.1 is installed, <code>System.getProperty("java.vm.version")</code> and <code>java -version</code> probably being the simplest. A user shouldn’t have to resort to the command line. Instead they can just use the Finder to look in <code>/Library/Receipts</code> for an item named <code>Java1.4.1.pkg</code>.</p>
<p>The following sections discuss pertinent details you should be aware of to make sure that you are using the correct version of Java for your application. Since there are various ways in which you can deploy Java applications on Mac OS X, the sections are broken down based on your deployment vehicle.The following information applies only if the computer your application is being run on has both Java 1.4.1and Java 1.3.1 installed.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000284-DontLinkElementID_35" title="Note"></a><p><strong>Note:</strong>&nbsp; If you are developing WebObjects applications, see the AppleCare Knowledge Base article number 75505 for WebObjects–specific information relevent to using Java 1.3.1 with Java 1.4.1 installed. You can access this information from <span class="content_text"><a href="http://www.info.apple.com/" target="_blank">http://www.info.apple.com/</a></span>.</p></div>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-TPXREF138">Java Applications as Mac OS X Application Bundles</a>
				
			<br/>
			
        
			
			
				<a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-TPXREF140">Java Web Start Applications</a>
				
			<br/>
			
        
			
			
				<a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-TPXREF141">Double-clickable JAR Files</a>
				
			<br/>
			
        
			
			
				<a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-TPXREF142">Command Line  Applications</a>
				
			<br/>
			
        
			
			
				<a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-TPXREF144">Java Applets</a>
				
			<br/>
			
        
			
			
				<a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-TPXREF145">Native Applications That Invoke Java Through JNI</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000284-TPXREF138" title="Java Applications as Mac OS X Application Bundles"></a><h2>Java Applications as Mac OS X Application Bundles</h2>
<p>When deploying a Java application on Mac OS X, you should wrap the Java application inside a native Mac OS X application bundle. This application bundle is just a directory with some information about the application itself and a native code stub to launch the Java application. You can construct an application bundle very easily with Jar Bundler which is available in <code>/Developer/Tools</code>. For users, the end result is a native application that is double-clickable in the Finder. </p>
<p>By default, existing Java applications that have been bundled as native applications run with the Java 1.3.1 VM. As such, they exhibit the same behavior as they did before installing Java 1.4.1. This behavior provides the cleanest user experience. From a user’s perspective, an application continues to work the same way it has always worked. This is important since, from the user’s perspective, the application is not necessarily a Java application, but rather a Mac OS X application. </p>
<p>You may determine that you want users to run your existing applications with Java 1.4.1 instead of Java 1.3.1, perhaps to take advantage of new features in the 1.4.1 version. In that case it is your responsibility to designate the appropriate version of Java for your application. You can do this by modifying the <code>Info.plist</code> file of the native application bundle.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000284-DontLinkElementID_36" title="Note"></a><p><strong>Note:</strong>&nbsp; Even if you do not need to take advantage of Java 1.4.1, you should update your application bundle to note which version of Java you want your application to run with. Although Mac OS X version 10.2 chooses to use Java 1.3.1 if none is specified, future versions of Java or the operating system may choose otherwise.</p></div>
<p>For new applications, set the VM version in the Build Information pane of Jar Bundler, or the Pure Java-Specific pane in Project Builder’s target editor. If you are modifying an existing application, modify the <code>JVMVersion</code> property in the<code> Info.plist</code> file. This file is in the Contents folder of the application bundle. To view this file in the Finder, Control-click the application icon, then choose “Show Package Contents.”</p>
<p>The <code>Info.plist</code> file is an XML document, so you can modify it with any text editor. If there is not already a key for JVMVersion, you need to add one. This key should be in the <code>Java</code> dictionary. For example, the Java section of the <code>Info.plist</code> might look something like <span class="content_text"><a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-BAJBFEBG">Listing 3-1</a></span>.</p>
<a name="//apple_ref/doc/uid/TP30000284-BAJBFEBG" title="Listing 3-1Info.plist without JVMVersion property"></a><p class="codesample"><strong>Listing 3-1&nbsp;&nbsp;</strong><code>Info.plist</code> without <code>JVMVersion</code> property</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;key>Java&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>MainClass&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>YourApplication&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ClassPath&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>$JAVAROOT/YourApplication.jar&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr></table></div>
<p>At the same level as the existing key and string combination for the <code>ClassPath</code>, add in a key value of <code>JVMVersion</code> and a string value from <span class="content_text"><a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-BAJDHIAG">Table 3-1</a></span> as appropriate. The resulting Info.plist should look something like that shown in <span class="content_text"><a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-BAJHCFAJ">Listing 3-2</a></span>.</p>
<a name="//apple_ref/doc/uid/TP30000284-BAJHCFAJ" title="Listing 3-2Info.plist with JVMVersion property"></a><p class="codesample"><strong>Listing 3-2&nbsp;&nbsp;</strong><code>Info.plist</code> with <code>JVMVersion</code> property</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;key>Java&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;dict><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>MainClass&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>YourApplication&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>JVMVersion&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>1.4+&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;key>ClassPath&lt;/key><span></span></pre></td></tr><tr><td scope="row"><pre>        &lt;string>$JAVAROOT/YourApplication.jar&lt;/string><span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/dict><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000284-BAJDHIAG" title="Table 3-1Designations for particular versions of Java in Mac OS X version 10.2"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 3-1&nbsp;&nbsp;</strong>Designations for particular versions of Java in Mac OS X version 10.2</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Value</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Java version used </p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Notes</p></th>
</tr>


<tr>
<td  scope="row"><p>1.3.1</p></td>
<td ><p>1.3.1</p></td>
<td ><p>Specifies an exact version of Java.</p></td>
</tr>
<tr>
<td  scope="row"><p>1.3*</p></td>
<td ><p>1.3.1</p></td>
<td ><p>Requests the highest version of Java 1.3 available. Note that if Java 1.3 is updated in future releases of Mac OS X the highest version of Java 1.3 will be used.</p></td>
</tr>
<tr>
<td  scope="row"><p>1.3+</p></td>
<td ><p>1.4.1</p></td>
<td ><p>Requests the highest version of Java above 1.3. Note that if Java is updated in future releases of Mac OS X, the highest numbered version will be used.</p></td>
</tr>
<tr>
<td  scope="row"><p>1.4.1</p></td>
<td ><p>1.4.1</p></td>
<td ><p>Specifies an exact version of Java. </p></td>
</tr>
<tr>
<td  scope="row"><p>1.4*</p></td>
<td ><p>1.4.1</p></td>
<td ><p>Specifies the highest version of the Java 1.4 available. Note that if Java 1.4 is updated in future releases of Mac OS X the highest version of Java 1.4 will be used.</p></td>
</tr>
<tr>
<td  scope="row"><p>1.4+</p></td>
<td ><p>1.4.1</p></td>
<td ><p>Specifies the highest version of Java above 1.4. Note that if Java is updated in future releases of Mac OS X, the highest numbered version will be used.</p></td>
</tr>

</table></div>
<p>Some older applications may have an <code>MRJApp.properties</code> file instead of an <code>Info.plist</code> file. For these applications, add the following line with <em>value</em> set to an appropriate value from <span class="content_text"><a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-BAJDHIAG">Table 3-1</a></span>: <code>com.apple.mrj.application.JVMVersion=</code><em>value</em>.</p>
<a name="//apple_ref/doc/uid/TP30000284-TPXREF140" title="Java Web Start Applications "></a><h2>Java Web Start Applications </h2>
<p>Java Web Start applications follow the guidelines laid out for standard JNLP-based applications. Your JNLP file should specify a <code>J2SE Version</code> key. This key is evaluated to determine whether to run your application with Java 1.3.1 or Java 1.4.1. The values presented in <span class="content_text"><a href="multiplevms.html#//apple_ref/doc/uid/TP30000284-BAJDHIAG">Table 3-1</a></span> also apply to Java Web Start applications. For more information on Java Web Start, see the <em>Developers Guide</em> at <span class="content_text"><a href="http://java.sun.com/products/javawebstart/1.2/docs/developersguide.html" target="_blank">http://java.sun.com/products/javawebstart/1.2/docs/developersguide.html</a></span>.</p>
<p>If you do not specify a value for the <code> j2seversion</code> key, Java 1.3.1 is used by the application.</p>
<p>When a user runs the same Java Web Start application multiple times, Mac OS X provides the option of building a native application bundle around that application. With this release of Java 1.4.1 these application bundles always launch with Java 1.3.1 regardless of what the JNLP file says.</p>
<a name="//apple_ref/doc/uid/TP30000284-TPXREF141" title="Double-clickable JAR Files"></a><h2>Double-clickable JAR Files</h2>
<p>If a JAR file has a <code>main</code> class specified in its manifest file, a user can launch it just by double clicking the JAR file. Double-clickable JAR files are run with Java 1.4.1. If you need to run a JAR file with Java 1.3.1, you can either wrap it as a Mac OS X application bundle using Jar Bundler or you can launch it from the command line with <code>/System/Library/Frameworks/JavaVM.framework/Versions/1.3.1/Commands/java -jar</code> <em>YourJARFile.jar</em>.</p>
<a name="//apple_ref/doc/uid/TP30000284-TPXREF142" title="Command Line  Applications"></a><h2>Command Line  Applications</h2>
<p>Running <code>java</code> from the command line runs Java 1.4.1. The Java commands in<code> /usr/bin</code> are linked to the most current version of Java tools on the system. In this release they are linked to commands in <code>/System/Library/Frameworks/JavaVM.framework/Versions/1.4.1/Commands</code>. If you need to run the Java 1.3.1 version of a command line Java tool, you may do so by explicitly calling the appropriate Java 1.3.1 command in <code>/System/Library/Frameworks/JavaVM.framework/Versions/1.3.1/Commands</code>.</p>
<p>If you are building shell scripts for distribution to customers that link to a specific version of a Java command in <code>/System/Library/Frameworks/JavaVM.framework</code> you should consider wrapping your application as a Mac OS X application with Jar Bundler. Specifying a specific path in the operating system (other than <code>/usr/bin</code>) is not the most robust solution since changes to Mac OS X may render these paths obsolete and your application broken.</p>
<a name="//apple_ref/doc/uid/TP30000284-TPXREF144" title="Java Applets"></a><h2>Java Applets</h2>
<p>Java Applets cannot choose which version of Java they invoke. This choice is made instead by the browser. Microsoft’s Internet Explorer uses Java 1.3.1. Apple’s Safari uses Java 1.4.1. (Applet Launcher also uses Java 1.4.1.)</p>
<a name="//apple_ref/doc/uid/TP30000284-TPXREF145" title="Native Applications That Invoke Java Through JNI "></a><h2>Native Applications That Invoke Java Through JNI </h2>
<p>By default, if the first call into the JavaVM framework is <code><!--a-->JNI_CreateJavaVM<!--/a--></code> where <code>JNI_VERSION_1_2</code> specified, the Java 1.3.1 virtual machine (VM) is used. This is done to maintain backward compatibility with the Java 1.3.1 version of applications that may already be in use on the system. If you need to use the 1.4.1 VM and link against the 1.4.1 version of <code>jni.h</code>, pass <code>JNI_VERSION_1_4</code> instead of <code>JNI_VERSION_1_2</code>. If you call <code><!--a-->JNI_GetDefaultJavaVMInitArgs<!--/a--></code> before <code><!--a-->JNI_CreateJavaVM<!--/a--></code> you will also get Java 1.4.1.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../whatsnew/whatsnew.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../system_properties/system_properties.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../documentation/Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2003-06-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/releasenotes/Java/java141/multiplevms/multiplevms.html%3Fid%3DTP40000889-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/releasenotes/Java/java141/multiplevms/multiplevms.html%3Fid%3DTP40000889-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/releasenotes/Java/java141/multiplevms/multiplevms.html%3Fid%3DTP40000889-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
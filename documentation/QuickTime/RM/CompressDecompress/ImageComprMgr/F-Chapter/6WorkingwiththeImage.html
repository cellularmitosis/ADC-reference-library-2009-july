<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime Compression and Decompression Guide: Working with the Image Compression Manager</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Working with the Image Compression Manager"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager" title="Working with the Image Compression Manager"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../../../CompressionDecompression-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000498" target="_top">Compression &amp; Decompression</a> &gt; <a href="../A-Intro/1Introduction.html#//apple_ref/doc/uid/TP40000878-IntroductiontoQuickTimeCompressionandDecompressionGuide-DontLinkElementID_145">QuickTime Compression and Decompression Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../E-Chapter/5CompressorsSupplied.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../G-Chapter/7HowtoCompressandDec.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-SW1" title="Working with the Image Compression Manager"></a>
<h1>Working with the Image Compression Manager</h1>

<p>This chapter describes how to use the Gestalt Manager to determine what version of the Image Compression Manager is available. Included is a brief discussion of the information about compressors and compressed data that can be obtained from the Image Compression Manager.</p>
<p>The chapter also describes the various functions you can use to</p>
<ul class="ul">
<li class="li"><p>gather information about the Image Compression Manager and the installed compressor components</p></li>
<li class="li"><p>collect information about compressed images and images that are about to be compressed</p></li>
<li class="li"><p>manipulate the parameters that control sequence decompression and to get information about memory that the decompressor has allocated</p></li>
</ul>



<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_28">Getting Information About Compressors and Compressed Data</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_29">Getting Information About Compressor Components</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_30">Getting Information About Compressed Data</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_31">Compressing Images</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_32">Spooling Compressed Data</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_33">Application-Defined Functions</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_34">Changing Sequence-Compression Parameters</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_35">Changing Sequence-Decompression Parameters</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_36">Working With Images</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_37">Working With Sequences</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_38">Working With Pictures and PICT Files</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_39">Decompressing Images</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_40">Image Transcoding Functions</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_41">The Image Description Structure</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_42">Compression Quality Constants</a>
				
			<br/>
			
        
			
			
				<a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_43">The Compressor Name List Structure</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_28" title="Getting Information About Compressors and Compressed Data"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-GettingInformationAboutCompressorsandCompressedData" title="Getting Information About Compressors and Compressed Data"></a>Getting Information About Compressors and Compressed Data</h2>
<p>Use the Gestalt environmental selector <code>gestaltCompressionMgr</code> to determine whether the Image Compression Manager is available. Gestalt returns a 32-bit value indicating the version of the Image Compression Manager that is installed. This return value is formatted in the same way as the value returned by the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CodecManagerVersion" target="_top">CodecManagerVersion</a></code>  function, and it contains the version number specified as an integer value.</p>

<div class="codesample"><table><tr><td scope="row"><pre>#define gestaltCompressionMgr 'icmp'<span></span></pre></td></tr></table></div>

<p>The Image Compression Manager provides a number of functions that allow your application to obtain information about the facilities available for image compression or about compressed images. Your application may use some of these functions to select a specific compressor or decompressor for a given operation or to determine how much memory to allocate to receive a decompressed image. In addition, your application may use some of these functions to determine the capabilities of the components that are available on the user&#8217;s computer system. You can then condition the options your program makes available to the user based on the user&#8217;s system configuration.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_29" title="Getting Information About Compressor Components"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-GettingInformationAboutCompressorComponents" title="Getting Information About Compressor Components"></a>Getting Information About Compressor Components</h2>
<p>This section describes the functions that allow your application to gather information about the Image Compression Manager and the installed compressor components.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CodecManagerVersion" target="_top">CodecManagerVersion</a></code> function to retrieve the version number associated with the Image Compression Manager that is installed on a particular computer.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FindCodec" target="_top">FindCodec</a></code>, <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCodecInfo" target="_top">GetCodecInfo</a></code>, and <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCodecNameList" target="_top">GetCodecNameList</a></code> functions to locate and retrieve information about the compressor components that are available on a computer.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_30" title="Getting Information About Compressed Data"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-GettingInformationAboutCompressedData" title="Getting Information About Compressed Data"></a>Getting Information About Compressed Data</h2>
<p>This section describes the functions that enable your application to collect information about compressed images and images that are about to be compressed. Your application may use some of these functions in preparation for compressing or decompressing an image or sequence.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCompressionTime" target="_top">GetCompressionTime</a></code> function to determine how long it will take for a compressor to compress a specified image. Similarly, you can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetMaxCompressionSize" target="_top">GetMaxCompressionSize</a></code> function to find out how large the compressed image may be after the compression operation.</p>
<p>You can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCompressedImageSize" target="_top">GetCompressedImageSize</a></code> to determine the size of a compressed image that does not have a complete image description.</p>
<p>The <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetSimilarity" target="_top">GetSimilarity</a></code> function allows you to determine how similar two images are. This information is useful when you are performing temporal compression on an image sequence.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_31" title="Compressing Images"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-CompressingImages" title="Compressing Images"></a>Compressing Images</h2>
<p>The Image Compression Manager provides a rich set of functions that allow applications to compress images. Some of these functions present a straightforward interface that is suitable for applications that need little control over the compression operation. Others permit applications to control the parameters that govern the compression operation.</p>
<p>This section describes the basic steps that your application follows when compressing a single frame of image data. Following this discussion, Listing&#160;5-1 shows a sample function that compresses an image.</p>
<p>First, determine the parameters for the compression operation. Typically, the user specifies these parameters in a user dialog box you may supply via the standard compression dialog component. Your application may choose to give the user the ability to specify such parameters as the compression algorithm, image quality, and so on.</p>
<p>Your application may give the user the option to specify a compression algorithm based on an important performance characteristic. For example, the user may be most concerned with size, speed, or quality. The Image Compression Manager allows your application to choose the compressor component that meets the specified criterion.</p>
<p>To determine the maximum size of the resulting compressed image, your application should then call the Image Compression Manager&#8217;s <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetMaxCompressionSize" target="_top">GetMaxCompressionSize</a></code> function. You provide the specified compression parameters to this function. In response, the Image Compression Manager invokes the appropriate compressor component to determine the maximum number of bytes required to store the compressed image. Your application should then reserve sufficient memory to accommodate the compressed image or use a data-unloading function to spool the compressed data to disk (see <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-SpoolingCompressedData">Spooling Compressed Data</a></span> for more information about data-unloading functions).</p>
<p>Once the user has specified the compression parameters and your application has established an appropriate environment for the operation, call the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressImage" target="_top">CompressImage</a></code> (or <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FCompressImage" target="_top">FCompressImage</a></code>) function to compress the image. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressImage" target="_top">CompressImage</a></code> function if your application does not need to control all the parameters governing compression. If your application needs access to other compression parameters, use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FCompressImage" target="_top">FCompressImage</a></code> function.</p>
<p>The Image Compression Manager manages the compression operation and invokes the appropriate compressor. The manager returns the compressed image and its associated image description structure to your application. Note that the image description structure contains a field indicating the size of the resulting image.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_162" title="Note"></a>
<p><strong>Note:</strong>&nbsp;
You should use the standard compression dialog component to set up the parameters for compression. </p>
</div>
<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_163" title="Listing 5-1Compressing and decompressing an image"></a>
<p class="codesample"><strong>Listing 5-1&nbsp;&nbsp;</strong>Compressing and decompressing an image</p>
<div class="codesample"><table><tr><td scope="row"><pre>#include &#60;Types.h&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>#include &#60;Traps.h&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>#include &#60;Memory.h&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>#include &#60;Errors.h&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>#include &#60;FixMath.h&#62;<span></span></pre></td></tr><tr><td scope="row"><pre>#include "Movies.h"<span></span></pre></td></tr><tr><td scope="row"><pre>#include "ImageCompression.h"<span></span></pre></td></tr><tr><td scope="row"><pre>#include "StdCompression.h"<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>#define kMgrChoose 0<span></span></pre></td></tr><tr><td scope="row"><pre>PicHandle GetQTCompressedPict (PixMapHandle myPixMap);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>PicHandle GetQTCompressedPict( PixMapHandle myPixMap )<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;maxCompressedSize = 0; <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Handle&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;compressedDataH = nil; <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Ptr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;compressedDataP; <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;ImageDescriptionHandle&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;imageDescH = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;OSErr&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;theErr;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;PicHandle&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;myPic = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Rect&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bounds = (**myPixMap).bounds; <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CodecType&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;theCodecType = 'jpeg';<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CodecComponent&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;theCodec = (CodecComponent)anyCodec;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CodecQ&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;spatialQuality = codecNormalQuality; <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;depth = 0;/* let ICM choose depth */ <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;theErr = GetMaxCompressionSize( myPixMap, &#38;bounds, depth,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;spatialQuality, theCodecType, <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(CompressorComponent)theCodec, <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#38;maxCompressedSize); <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;if ( theErr ) return nil;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;imageDescH = (ImageDescriptionHandle)NewHandle(4);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;compressedDataH = NewHandle(maxCompressedSize);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;if ( compressedDataH != nil &#38;&#38; imageDescH != nil )<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;MoveHHi(compressedDataH);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;HLock(compressedDataH);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;compressedDataP = StripAddress(*compressedDataH);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;theErr = CompressImage( myPixMap,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#38;bounds,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;spatialQuality,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;theCodecType,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;imageDescH,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;compressedDataP);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if ( theErr == noErr )<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ClipRect(&#38;bounds);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;myPic = OpenPicture(&#38;bounds);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;theErr = DecompressImage( compressedDataP,<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;imageDescH, <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;myPixMap, <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#38;bounds, <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#38;bounds, <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;srcCopy, <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nil ); <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ClosePicture();<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if ( theErr<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|| GetHandleSize((Handle)myPic) == sizeof(Picture) )<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;KillPicture(myPic);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;myPic = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;}<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;if (imageDescH) DisposeHandle( (Handle)imageDescH);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;if (compressedDataH) DisposeHandle( compressedDataH);<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;return myPic;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>


<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_32" title="Spooling Compressed Data"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-SpoolingCompressedData" title="Spooling Compressed Data"></a>Spooling Compressed Data</h2>
<p>During compression and decompression operations it may be necessary to spool the image data to or from storage other than computer memory. If your application uses the Image Compression Manager functions that handle picture files, the Image Compression Manager manages this spooling for you. However, if you use the functions that work with pixel maps or sequences and your application cannot store the image data in memory, it is your application&#8217;s responsibility to spool the data.</p>
<p>The Image Compression Manager provides a mechanism that allows the compressors and decompressors to invoke spooling functions provided by your application. There are two kinds of data-spooling functions: data-loading functions and data-unloading functions. Decompressors call data-loading functions during image decompression. The data-loading function is responsible for providing compressed image data to the decompressor. The decompressor then decompresses the data and writes the resulting image to the appropriate location. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ApplicationDefinedFunctions">Application-Defined Functions</a></span> for a detailed description of the calling sequence used by the decompressor component when it invokes your data-loading function.</p>
<p>Compressors call data-unloading functions during image compression. The data-unloading function must remove the compressed image data from memory. The compressor can then compress more of the image and write the compressed image data into the available buffer space. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ApplicationDefinedFunctions">Application-Defined Functions</a></span> for a detailed description of the calling sequence used by the compressor component when it invokes your data-unloading function.</p>
<p>When compressing sequences, your application assigns a data-unloading function by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetCSequenceFlushProc" target="_top">SetCSequenceFlushProc</a></code> function. When decompressing sequences, you assign a data-loading function by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceDataProc" target="_top">SetDSequenceDataProc</a></code> function.</p>
<p>When your application assigns a spooling function to an image or sequence operation, you must also specify a data buffer and the size of that buffer. The <code>codecMinimumDataSize</code> value specifies the smallest data buffer you may allocate for image data spooling.</p>

<div class="codesample"><table><tr><td scope="row"><pre>#define codecMinimumDataSize 32768&#160;&#160;/* minimum data size */<span></span></pre></td></tr></table></div>


<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_33" title="Application-Defined Functions"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ApplicationDefinedFunctions" title="Application-Defined Functions"></a>Application-Defined Functions</h2>
<p>This section describes four callback functions that you may provide to compressor components and an application-defined function that specifies alignment behavior.</p>
<p>The Image Compression Manager defines four callback functions that applications may provide to compressors or decompressors. These callbacks are data-loading functions, data-unloading functions, completion functions, and progress functions.</p>
<ul class="ul">
<li class="li"><p>Data-loading functions and data-unloading functions support spooling of compressed data.</p></li>
<li class="li"><p>Completion functions allow compressors and decompressors to report that asynchronous operations have completed.</p></li>
<li class="li"><p>Progress functions provide a mechanism for compressors and decompressors to report their progress toward completing an operation.</p></li>
</ul>
<p>This section describes the interfaces presented when compressors invoke your callback functions. These application-defined functions may be called by compressor components during a compression or decompression operation.</p>
<p>You identify a callback function to an Image Compression Manager function by specifying a pointer to a callback function structure. These structures contain two fields: a pointer to the callback function and a reference constant value. There is one callback function structure for each type of callback function. See the individual function descriptions in the sections that follow for descriptions of the structures.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_34" title="Changing Sequence-Compression Parameters"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ChangingSequenceCompressionParameters" title="Changing Sequence-Compression Parameters"></a>Changing Sequence-Compression Parameters</h2>
<p>This section describes the functions that allow your application to manipulate the parameters that control sequence compression and to get information about memory that the compressor has allocated. You can use these functions during the sequence-compression process. Your application establishes the default value for most of these parameters with the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressSequenceBegin" target="_top">CompressSequenceBegin</a></code> function. Some of these functions deal with parameter values that cannot be set when starting a sequence.</p>
<p>You can determine the location of the previous image buffer used by the Image Compression Manager by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCSequencePrevBuffer" target="_top">GetCSequencePrevBuffer</a></code> function.</p>
<p>You can set a number of compression parameters. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetCSequenceFlushProc" target="_top">SetCSequenceFlushProc</a></code> function to assign a data-unloading function to the operation. You can set the rate at which the Image Compression Manager inserts key frames into the compressed sequence by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetCSequenceKeyFrameRate" target="_top">SetCSequenceKeyFrameRate</a></code> function. You can set the frame against which the compressor compares a frame when performing temporal compression by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetCSequencePrev" target="_top">SetCSequencePrev</a></code> function. Finally, you can control the quality of the compressed image by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetCSequenceQuality" target="_top">SetCSequenceQuality</a></code> function.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_35" title="Changing Sequence-Decompression Parameters"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ChangingSequenceDecompressionParameters" title="Changing Sequence-Decompression Parameters"></a>Changing Sequence-Decompression Parameters</h2>
<p>This section discusses the functions that enable your application to manipulate the parameters that control sequence decompression and to get information about memory that the decompressor has allocated. Your application establishes the default value for most of these parameters with the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DecompressSequenceBegin" target="_top">DecompressSequenceBegin</a></code> function. Some of these functions deal with parameter values that cannot be set when starting a sequence.</p>
<p>You can determine the buffers used by a decompressor component when it decompresses a sequence. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetDSequenceImageBuffer" target="_top">GetDSequenceImageBuffer</a></code> function to determine the location of the image buffer. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetDSequenceScreenBuffer" target="_top">GetDSequenceScreenBuffer</a></code> function to determine the location of the screen buffer.</p>
<p>You can control a number of the parameters that affect a decompression operation (note that changing these parameters may temporarily affect performance). Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceAccuracy" target="_top">SetDSequenceAccuracy</a></code> function to control the accuracy of the decompression. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceDataProc" target="_top">SetDSequenceDataProc</a></code> function to assign a data-loading function to the operation. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceMask" target="_top">SetDSequenceMask</a></code> function to set the clipping region for the resulting image. You can establish a blend matte for the operation by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceMatte" target="_top">SetDSequenceMatte</a></code> function. You can alter the spatial characteristics of the resulting image by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceMatrix" target="_top">SetDSequenceMatrix</a></code> function. Your application can establish the size and location of the operation&#8217;s source rectangle by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceSrcRect" target="_top">SetDSequenceSrcRect</a></code> function. Finally, you can set the transfer mode used by the decompressor when it draws to the screen by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetDSequenceTransferMode" target="_top">SetDSequenceTransferMode</a></code> function.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_36" title="Working With Images"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithImages" title="Working With Images"></a>Working With Images</h2>
<p>This section discusses the functions that allow your application to compress and decompress single-frame images stored as pixel maps (of data type <code><!--a target="_top" -->PixMap<!--/a--></code> ). See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithSequences">Working With Sequences</a></span> for information on compressing and decompressing sequences of images. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithPicturesandPICTFiles">Working With Pictures and PICT Files</a></span> for information on compressing and manipulating single-frame images stored as pictures or picture files (in PICT format).</p>
<p>The Image Compression Manager provides two sets of functions for compressing and decompressing images. If you do not need to assert a lot of control over the compression operation, you can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressImage" target="_top">CompressImage</a></code> and <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DecompressImage" target="_top">DecompressImage</a></code> functions to work with compressed images. If you need more control over the compression parameters, you can use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FCompressImage" target="_top">FCompressImage</a></code> and <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FDecompressImage" target="_top">FDecompressImage</a></code> functions.</p>
<p>You can convert a compressed image from one compression format to another by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/ConvertImage" target="_top">ConvertImage</a></code> function.</p>
<p>You can alter the spatial characteristics of a compressed image by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/TrimImage" target="_top">TrimImage</a></code> function.</p>
<p>You can work with an image&#8217;s color table with the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetImageDescriptionCTable" target="_top">SetImageDescriptionCTable</a></code> and <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetImageDescriptionCTable" target="_top">GetImageDescriptionCTable</a></code> functions.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_37" title="Working With Sequences"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithSequences" title="Working With Sequences"></a>Working With Sequences</h2>
<p>This section describes the functions that enable your application to compress and decompress sequences of images. Each image in the sequence is referred to as a <em>frame.</em> Note that the sequence carries no time information. The Movie Toolbox manages all temporal aspects of displaying the sequence. Consequently, your application can focus on the order of images in the sequence.</p>
<p>To process a sequence of frames, your program first begins the sequence (by issuing either the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressSequenceBegin" target="_top">CompressSequenceBegin</a></code> or <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DecompressSequenceBegin" target="_top">DecompressSequenceBegin</a></code> functions). You then process each frame in the sequence (use <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressSequenceFrame" target="_top">CompressSequenceFrame</a></code> to compress a frame; use <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DecompressSequenceFrame" target="_top">DecompressSequenceFrame</a></code> to decompress a frame). When you are done, close the sequence by issuing the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CDSequenceEnd" target="_top">CDSequenceEnd</a></code> function. You can check on the status of the current operation by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CDSequenceBusy" target="_top">CDSequenceBusy</a></code> function.</p>
<p>Note that the Image Compression Manager provides a rich set of functions that allow your application to control many of the parameters that govern sequence processing. You set default values for most of these parameters when you start the sequence. These additional functions allow you to modify those parameters while you are processing a sequence. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ChangingSequenceCompressionParameters">Changing Sequence-Compression Parameters</a></span> for information on functions that affect sequence compression. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ChangingSequenceDecompressionParameters">Changing Sequence-Decompression Parameters</a></span> for information on functions that affect sequence decompression.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_38" title="Working With Pictures and PICT Files"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithPicturesandPICTFiles" title="Working With Pictures and PICT Files"></a>Working With Pictures and PICT Files</h2>
<p>This section describes the functions that let your application compress and decompress single-frame images stored as pictures and PICT files. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithImages">Working With Images</a></span> for information on compressing and manipulating single-frame images stored as pixel map structures. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithSequences">Working With Sequences</a></span> for information on compressing and decompressing sequences of images.</p>
<p>As with image compression, the Image Compression Manager provides two sets of functions for working with compressed pictures. If you do not need to control the compression parameters, use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressPicture" target="_top">CompressPicture</a></code> or <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressPictureFile" target="_top">CompressPictureFile</a></code> functions. If you need more control over the operation, use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FCompressPicture" target="_top">FCompressPicture</a></code> or <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FCompressPictureFile" target="_top">FCompressPictureFile</a></code> functions.</p>
<p>The Image Compression Manager automatically expands compressed pictures when you display them. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DrawPictureFile" target="_top">DrawPictureFile</a></code> function to display the contents of a picture file. If you want to alter the spatial characteristics of the image, use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DrawTrimmedPicture" target="_top">DrawTrimmedPicture</a></code> or <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DrawTrimmedPictureFile" target="_top">DrawTrimmedPictureFile</a></code> functions.</p>
<p>You can work with an image&#8217;s control information by calling the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetPictureFileHeader" target="_top">GetPictureFileHeader</a></code> function.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_39" title="Decompressing Images"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DecompressingImages" title="Decompressing Images"></a>Decompressing Images</h2>
<p><span class="content_text">Working With Pictures</span> discusses how applications can display compressed images that are stored as pictures by calling the <code>DrawPicture</code> function. The Image Compression Manager also provides functions that allow your application to display single-frame compressed images. As with image compression, your application can choose to specify all the parameters that govern the operation, or it can leave many of these choices to the Image Compression Manager.</p>
<p>This section describes the steps your application must follow to decompress an image into a pixel map.</p>
<p>First, your application determines where to display the decompressed image. Your application must specify the destination graphics port to the Image Compression Manager. In addition, you may indicate that only a portion of the source image is to be displayed. You describe the desired portion of the image by specifying a rectangle in the coordinate system of the source image. You can determine the size of the source image by examining the image description structure associated with the image (see <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-TheImageDescriptionStructure">The Image Description Structure</a></span> for more information about image description structures).</p>
<p>Your application may also specify that the image is to be mapped into the destination graphics port. The Image Compression Manager provides two mechanisms for mapping images during decompression. The <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DecompressImage" target="_top">DecompressImage</a></code> function accepts a second rectangle as a parameter. During decompression the Image Compression Manager maps the desired image to the destination rectangle, scaling the resulting image as appropriate to fit the destination rectangle. The <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FDecompressImage" target="_top">FDecompressImage</a></code> function allows your application to specify a mapping matrix for the operation. Currently, the Image Compression Manager supports only scaling and translation matrix operations.</p>
<p>Your application can invoke further effects by specifying a mask region or blend matte for the image. Mask regions and mattes control which pixels in the source image are drawn to the destination. <strong>Mask</strong> <strong>regions</strong> define the part of the source image that is displayed. During decompression the Image Compression Manager displays only those pixels in the source image that correspond to bits in the mask that are set to 1. Mask regions must be defined in the destination coordinate system.</p>
<p><strong>Blend</strong> <strong>mattes</strong> contain several bits per pixel and are defined in the coordinate system of the source image. Mattes provide a mechanism for mixing two images. The Image Compression Manager displays the weighted average of the source and destination based on the corresponding pixel in the matte.</p>
<p>Decompress the image by calling the Image Compression Manager&#8217;s&#160;<code>DecompressImage</code> or <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FDecompressImage" target="_top">FDecompressImage</a></code> function. Your application must provide an image description structure along with the other parameters governing the operation. Use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/DecompressImage" target="_top">DecompressImage</a></code> function for simple decompression operations. If your application needs greater control, use the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/FDecompressImage" target="_top">FDecompressImage</a></code> function. See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithImages">Working With Images</a></span> for detailed descriptions of these functions.</p>
<p>The Image Compression Manager manages the decompression operation and invokes the appropriate decompressor component. The manager returns the decompressed image to the location specified by your application.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_40" title="Image Transcoding Functions"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-ImageTranscodingFunctions" title="Image Transcoding Functions"></a>Image Transcoding Functions</h2>
<p>A transcoder translates an image compressed in one format into a different compression format. A transcoder can use an algorithm that directly translates from one format into another, which is often faster and more accurate than decompression and recompression. If your application requests decompression of an image, but no decompressor for the image can be found, QuickTime will search for a transcoder that can be used to convert the image into a format for which a decompressor is available. The transcoder functions directly available to your application are:</p>
<ul class="ul">
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/ImageTranscodeSequenceBegin" target="_top">ImageTranscodeSequenceBegin</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/ImageTranscodeFrame" target="_top">ImageTranscodeFrame</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/ImageTranscodeDisposeFrameData" target="_top">ImageTranscodeDisposeFrameData</a></code></p></li>
<li class="li"><p><code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/ImageTranscodeSequenceEnd" target="_top">ImageTranscodeSequenceEnd</a></code></p></li>
</ul>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_41" title="The Image Description Structure"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-TheImageDescriptionStructure" title="The Image Description Structure"></a>The Image Description Structure</h2>
<p>An image description structure contains information that defines the characteristics of a compressed image or sequence. Data in the image description structure indicates the type of compression that was used, the size of the image when displayed, the resolution at which the image was captured, and so on. One image description structure may be associated with one or more compressed frames.</p>
<p>The <code><!--a target="_top" -->ImageDescription<!--/a--></code> data type defines the layout of an image description structure. In addition, an image description structure may contain additional data in extensions and custom color tables. The Image Compression Manager provides functions that allow you to get and set the data in image description structure extensions and custom color tables.</p>
<ul class="ul">
<li class="li"><p>See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-WorkingWithImages">Working With Images</a></span> for more information about the functions <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetImageDescriptionCTable" target="_top">GetImageDescriptionCTable</a></code> and <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/SetImageDescriptionCTable" target="_top">SetImageDescriptionCTable</a></code>, which allow you to work with custom color tables in image description structures.</p></li>
<li class="li"><p>See the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetImageDescriptionExtension" target="_top">GetImageDescriptionExtension</a></code>, <code>SetImageDescriptionExtension</code>, <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/RemoveImageDescriptionExtension" target="_top">RemoveImageDescriptionExtension</a></code>, <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CountImageDescriptionExtensionType" target="_top">CountImageDescriptionExtensionType</a></code>, and <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetNextImageDescriptionExtensionType" target="_top">GetNextImageDescriptionExtensionType</a></code> functions, which allow you to work with image description structure extensions.</p></li>
</ul>

<div class="codesample"><table><tr><td scope="row"><pre>struct ImageDescription {<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long idSize;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* total size of this structure */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CodecType cType;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* compressor creator type */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long resvd1;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* reserved--must be set to 0 */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short resvd2;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* reserved--must be set to 0 */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short dataRefIndex;&#160;&#160;&#160;&#160;&#160;/* reserved--must be set to 0 */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short version;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* version of compressed data */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short revisionLevel;&#160;&#160;&#160;&#160;/* compressor that created data */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long vendor;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* compressor developer that created data */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CodecQ temporalQuality;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* degree of temporal compression */ <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CodecQ spatialQuality;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* degree of spatial compression */ <span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short width;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* width of source image in pixels */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short height;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* height of source image in pixels */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed hRes;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* horizontal resolution of source image */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Fixed vRes;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* vertical resolution of source image */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;long dataSize;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* size in bytes of compressed data */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short frameCount;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* number of frames in image data */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;Str31 name;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* name of compression algorithm */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short depth;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* pixel depth of source image */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short clutID;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* ID number of the color table for image */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct ImageDescription ImageDescription;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef ImageDescription *ImageDescriptionPtr, **ImageDescriptionHandle;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>idSize</code></p></td>
<td ><p>Defines the total size of this image description structure with extra data including color lookup tables and other per sequence data.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>cType</code></p></td>
<td ><p>Indicates the type of compressor component that created this compressed image data. The value of this field indicates the compression algorithm supported by the component. The <code>Codec</code> data type defines a field in the compressor name list structure that identifies the compression method employed by a given compressor component. Apple Computer's Developer Technical Support group assigns these values so that they remain unique. These values correspond, in turn, to text strings that can identify the compression method to the user. See the description of <code>GetCodecNameList</code> for a list of valid values.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>resvd1</code></p></td>
<td ><p>Reserved for Apple. This field must be set to 0.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>resvd2</code></p></td>
<td ><p>Reserved for Apple. This field must be set to 0.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>dataRefIndex</code></p></td>
<td ><p>Reserved for Apple. This field must be set to 0.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>version</code></p></td>
<td ><p>Indicates the version of the compressed data. The contents of this field should indicate the version of the compression algorithm that was used to create the compressed data. By examining this field, decompressors that support many versions of an algorithm can determine the proper way to decompress the image.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>revisionLevel</code></p></td>
<td ><p>Indicates the version of the compressor that created the compressed image. Developers of compressors and decompressors assign these version numbers.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>vendor</code></p></td>
<td ><p>Identifies the developer of the compressor that created the compressed image.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>temporalQuality</code></p></td>
<td ><p>Indicates the degree of temporal compression performed on the image data associated with this description. This field is valid only for sequences.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>spatialQuality</code></p></td>
<td ><p>Indicates the degree of spatial compression performed on the image data associated with this description. This field is valid for sequences and still images.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>width</code></p></td>
<td ><p>Contains the width of the source image, in pixels.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>height</code></p></td>
<td ><p>Contains the height of the source image, in pixels.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>hRes</code></p></td>
<td ><p>Contains the horizontal resolution of the source image, in dots per inch.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>vRes</code></p></td>
<td ><p>Contains the vertical resolution of the source image, in dots per inch.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>dataSize</code></p></td>
<td ><p>Indicates the size of the compressed image, in bytes. This field is valid only for still images. Set this field to 0 if the size is unknown.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>frameCount</code></p></td>
<td ><p>Contains the number of frames in the image data associated with this description.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>name</code></p></td>
<td ><p>Indicates the compression algorithm used to create the compressed data. This algorithm is stored in Pascal string format. It always takes up 32 bytes no matter how long the string is. The 32 bytes consist of 31 bytes plus one length byte. The value of this field should correspond to the compressor type specified by the <code>cType</code> field, as well as to the value of the <code>typeName</code> field in the appropriate compressor name structure returned by the <code>GetCodecNameList</code> function. Applications may use the contents of this field to indicate the type of compression used for the associated image.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>depth</code></p></td>
<td ><p>Contains the pixel depth specified for the compressed image. Values of 1, 2, 4, 8, 16, 24, and 32 indicate the depth of color images. Values of 34, 36, and 40 indicate 2-bit, 4-bit, and 8-bit grayscale, respectively, for grayscale images.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>clutID</code></p></td>
<td ><p>Contains the ID of the color table for the compressed image, or other special values. If this field is set to 0, then a custom color table is defined for the compressed image. You can use the <code>GetImageDescriptionCTable</code> function to retrieve the color table. If this field is set to -1, the image does not use a color table.</p></td>
</tr>

</table></div>
<p>See <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-CompressionQualityConstants">Compression Quality Constants</a></span> for a list of available values for the <code>temporalQuality</code> and <code>spatialQuality</code> fields.</p>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_42" title="Compression Quality Constants"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-CompressionQualityConstants" title="Compression Quality Constants"></a>Compression Quality Constants</h2>
<p>Compressor components may allow applications to assert some control over the image quality that results from a compression or decompression operation. For example, the <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/CompressSequenceBegin" target="_top">CompressSequenceBegin</a></code> function provides the <code>spatialQuality</code> and <code>temporalQuality</code> parameters so that applications can indicate the level of image accuracy desired within individual frames and across adjacent frames in a sequence, respectively. These quality values become a property of the compressed data and are stored in the image description structure (described on <span class="content_text"><a href="6WorkingwiththeImage.html#//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-TheImageDescriptionStructure">The Image Description Structure</a></span> ) associated with the image or sequence.</p>
<p>For a given compression operation, your application can determine the quality that the component supports by issuing the  <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCompressionTime" target="_top">GetCompressionTime</a></code> function.</p>
<p>The <code>CodecQ</code> data type defines a field that identifies the quality characteristics of a given image or sequence. Note that individual components may not implement all the quality levels shown here. In addition, components may implement other quality levels in the range from <code>codecMinQuality</code> to <code>codecMaxQuality</code>. Relative quality should scale within the defined value range. Values above <code>codecLosslessQuality</code> are reserved for use by individual components.</p>

<div class="codesample"><table><tr><td scope="row"><pre>/* compression quality values */<span></span></pre></td></tr><tr><td scope="row"><pre>#define codecMinQuality &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x000L&#160;&#160;&#160;&#160;&#160;&#160;/* minimum valid value */<span></span></pre></td></tr><tr><td scope="row"><pre>#define codecLowQuality&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x100L&#160;&#160;&#160;&#160;&#160;&#160;/* low-quality reproduction */<span></span></pre></td></tr><tr><td scope="row"><pre>#define codecNormalQuality&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x200L &#160;&#160;&#160;&#160;&#160;/* normal-quality repro */ <span></span></pre></td></tr><tr><td scope="row"><pre>#define codecHighQuality&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x300L&#160;&#160; &#160;&#160;&#160;/* high-quality repro */ <span></span></pre></td></tr><tr><td scope="row"><pre>#define codecMaxQuality&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x3FFL &#160;&#160;&#160;&#160;&#160;/* maximum-quality repro */<span></span></pre></td></tr><tr><td scope="row"><pre>#define codecLosslessQuality&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x400L&#160;&#160;&#160;&#160;&#160;&#160;/* lossless-quality repro */ <span></span></pre></td></tr><tr><td scope="row"><pre>typedef unsigned long CodecQ;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>codecMinQuality</code></p></td>
<td ><p>Specifies the minimum valid value for a <code>CodecQ</code> field.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>codecLowQuality</code></p></td>
<td ><p>Specifies low-quality image reproduction. This value should correspond to the lowest image quality that still results in acceptable display characteristics.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>codecNormalQuality</code></p></td>
<td ><p>Specifies image reproduction of normal quality.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>codecHighQuality</code></p></td>
<td ><p>Specifies high-quality image reproduction. This value should correspond to the highest image quality that can be achieved with reasonable performance.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>codecMaxQuality</code></p></td>
<td ><p>Specifies the maximum standard value for a <code>CodecQ</code> field.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>codecLosslessQuality</code></p></td>
<td ><p>Specifies lossless compression or decompression. This special value is valid only for components that can support lossless compression or decompression.</p></td>
</tr>

</table></div>

<a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-DontLinkElementID_43" title="The Compressor Name List Structure"></a>
<h2><a name="//apple_ref/doc/uid/TP40000878-WorkingwiththeImageCompressionManager-TheCompressorNameListStructure" title="The Compressor Name List Structure"></a>The Compressor Name List Structure</h2>
<p>The compressor name list structure contains a list of compressor name structures. (A compressor name structure identifies a compressor or decompressor component.) The data structure contains name and type information for the component. The <code><a href="../../../../Reference/QTRef_CompDecomp/Reference/reference.html#//apple_ref/c/func/GetCodecNameList" target="_top">GetCodecNameList</a></code> function returns an array of these structures, formatted into a compressor name list structure. The <code><!--a target="_top" -->CodecNameSpecList<!--/a--></code> data type defines a compressor name list structure.</p>

<div class="codesample"><table><tr><td scope="row"><pre>/* compressor name list structure */<span></span></pre></td></tr><tr><td scope="row"><pre>struct CodecNameSpecList {<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;short count;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* how many compressor name structures */<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;CodecNameSpec list[1];&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<span></span></pre></td></tr><tr><td scope="row"><pre>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* array of compressor name structures */<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr><tr><td scope="row"><pre>typedef struct CodecNameSpecList CodecNameSpecList;<span></span></pre></td></tr><tr><td scope="row"><pre>typedef CodecNameSpecList *CodecNameSpecListPtr;<span></span></pre></td></tr></table></div>

<div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Field</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Description</p></th>
</tr>


<tr>
<td  scope="row"><p><code>count</code></p></td>
<td ><p>Indicates the number of compressor name structures contained in the <code>list</code> array that follows.</p></td>
</tr>
<tr>
<td  scope="row"><p><code>list</code></p></td>
<td ><p>Contains an array of compressor name structures. Each structure corresponds to one compressor component or type that meets the selection criteria your application specifies when it issues the <code>GetCodecNameList</code> function. The <code>count</code> field indicates the number of structures stored in this array.</p></td>
</tr>

</table></div>




        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../E-Chapter/5CompressorsSupplied.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../G-Chapter/7HowtoCompressandDec.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005, 2006 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2006-01-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/RM/CompressDecompress/ImageComprMgr/F-Chapter/6WorkingwiththeImage.html%3Fid%3DTP40000878-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/RM/CompressDecompress/ImageComprMgr/F-Chapter/6WorkingwiththeImage.html%3Fid%3DTP40000878-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/RM/CompressDecompress/ImageComprMgr/F-Chapter/6WorkingwiththeImage.html%3Fid%3DTP40000878-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
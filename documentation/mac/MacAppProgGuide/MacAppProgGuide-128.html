<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Overview (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING128></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-127.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-129.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <A HREF="MacAppProgGuide-78.html"><B>Part 2 - Working With MacApp</B></A><BR><DD><A HREF="MacAppProgGuide-127.html"><B>Chapter 25 - Working With Lists and Iteration</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING128-0></A>
<H1>Overview</H1>
 <A NAME=MARKER-2-20></A>A <I>list</I> is a data structure that stores a variable number of items of similar types. MacApp provides classes for creating and manipulating lists, allowing your application to use lists without having to implement the low-level details. MacApp's list classes and methods are shown in <A HREF=#MARKER-9-22>Figure 25-1</A>.<P>
<B>Figure 25-1  <A NAME=MARKER-10-17></A><A NAME=MARKER-9-22></A>List classes and methods</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/MacApp_PG-L-080.gif"><P>
 MacApp's list classes use a dynamic array model. Each item in a list has a unique index--you can access the items in a list by index or by standard list-traversal methods. The <CODE>TSortedList</CODE> class and its descendants can store <I>only</I> references to items that descend from the <CODE>TObject</CODE> class. Other MacApp-defined list classes, such as <CODE>THandleList</CODE>, store generic references that can be used to deal with a variety of developer-defined data types.<P>
 <I>Iteration</I> is a general-purpose mechanism for traversing the items in a list. MacApp provides the <CODE>CIterator</CODE> class and many specialized subclasses that operate on various types of lists. Iteration classes can traverse the items in a list without knowing the exact details of the data structures involved.<P>
 <A HREF=#MARKER-9-24>Figure 25-2</A> shows MacApp's iteration classes and methods.<P>
<B>Figure 25-2  <A NAME=MARKER-2-23></A><A NAME=MARKER-9-24></A>Iteration classes and methods</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/MacApp_PG-L-081.gif"><P>
<A NAME=HEADING128-9></A>
<H2><A NAME=MARKER-2-25></A>Working With Lists of Objects</H2>
 MacApp's <CODE>TSortedList</CODE> and <CODE>TList</CODE> classes provide extensive capabilities for working with lists of objects that descend from <CODE>TObject</CODE>. The <CODE>TSortedList</CODE> class includes methods and fields for processing an ordered list in which each element is a reference to an object. The <CODE>TList</CODE> class is a subclass of <CODE>TSortedList</CODE> that doesn't sort the objects. <CODE>TList</CODE> is used widely by MacApp, and it can be a valuable tool in your application as well.<P>
<DL>
<DT><B>Note</B>
<DD>This section describes the <CODE>TSortedList</CODE> and <CODE>TList</CODE> classes, which refer to objects. The <CODE>TSortedHandleList</CODE> and <CODE>THandleList</CODE> provide virtually identical operations on handles.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
<A NAME=HEADING128-12></A>
<H3>Creating a List</H3>
 MacApp provides the <CODE>NewList</CODE> routine to create and initialize a new <CODE>TList</CODE> object. The convenience routine <CODE>NewAllocatedList</CODE> lets you create a new <CODE>TList</CODE> object and at the same time specify the number of elements for which storage should be allocated. Each of these routines calls <CODE>Failure</CODE> if the list cannot be allocated.<P>
<A NAME=HEADING128-14></A>
<H3><A NAME=MARKER-9-26></A>Adding an Object to a List</H3>
 You add an object to a <CODE>TList</CODE> with a method that inserts a reference to the specified object into the list. The insertion method calls <CODE>Failure</CODE> if an attempt is made to insert the reference at an index that is out of range.<P>
 The following insertion methods are available:<P>
<DL>
<DT><CODE>AtPut<B></B></CODE>
<DD> The <A NAME=MARKER-2-28></A><CODE>AtPut</CODE> method replaces the object reference at the specified position with a reference to the new object, without freeing the old object.
<DT><CODE>Insert<B></B></CODE>
<DD> For the <CODE>TList</CODE> class, the <A NAME=MARKER-2-30></A><CODE>Insert</CODE> method inserts the object reference at the end of the list. For the <CODE>TSortedList</CODE> class, the parent class of <CODE>TList</CODE>, <CODE>Insert</CODE> adds the object reference in sorted order, based on the list's <CODE>Compare</CODE> method.
<DT><CODE>InsertBefore<B></B></CODE>
<DD> The <A NAME=MARKER-2-32></A><CODE>InsertBefore</CODE> method inserts the object reference before the reference at the specified index. If the index is equal to 1, the object reference is inserted at the head of the list.
<DT><CODE>InsertFirst<B></B></CODE>
<DD> The <A NAME=MARKER-2-34></A><CODE>InsertFirst</CODE> method inserts the object reference at the front of the list and makes its index equal to 1. 
<DT><CODE>InsertLast<B></B></CODE>
<DD> The <A NAME=MARKER-2-36></A><CODE>InsertLast</CODE> method inserts the object reference at the end of the list.
</DL>
 MacApp's iteration mechanism, described beginning on <A HREF=#MARKER-9-57>page 576</A>, allows you to iterate over a list correctly, even as items are added to the list.<P>
<A NAME=HEADING128-23></A>
<H3>Deleting an Object From a List</H3>
 MacApp's list classes provide a number of methods for deleting an item from a list--not all are available in every list class:<P>
<DL>
<DT><A NAME=MARKER-9-37></A><CODE>AtDelete<B></B></CODE>
<DD> The <A NAME=MARKER-2-38></A><CODE>AtDelete</CODE> method deletes the object reference at the specified index position.
<DT><CODE>Delete<B></B></CODE>
<DD> The <CODE>Delete</CODE> method deletes the first reference to the object in the list. The object itself is not freed. <A NAME=MARKER-2-41></A><CODE>Delete</CODE> does nothing if the object is not found in the list.
<DT><CODE>DeleteAll<B></B></CODE>
<DD> The <A NAME=MARKER-2-43></A><CODE>DeleteAll</CODE> method deletes every element from the list, but does not free any of the objects.
<DT><B>IMPORTANT</B>
<DD>These methods delete a reference from the list--they do <I>not</I> free any memory occupied by the referred-to item itself. See the section <A HREF=#MARKER-9-56>"Freeing a List"</A> (<A HREF=#MARKER-9-57>page 576</A>) for more information on freeing a list and the items it references.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 MacApp's iteration mechanism, described beginning on <A HREF=#MARKER-9-57>page 576</A>, allows list iteration to proceed correctly, even as items are deleted from the list.<P>
<A NAME=HEADING128-30></A>
<H3>Finding an Object in a List</H3>
 The <CODE>TList</CODE> class provides a number of methods for finding an object in a list. You can find an object that is the same as another object, or find a specific object by its position in the list.<P>
 The following methods are available:<P>
<DL>
<DT><A NAME=MARKER-9-44></A><CODE>At<B></B></CODE>
<DD> The <A NAME=MARKER-2-45></A><CODE>At</CODE> method returns the object reference at the specified index.
<DT><CODE>First<B></B></CODE>
<DD> The <A NAME=MARKER-2-47></A><CODE>First</CODE> method returns the first object reference in the list. It returns <CODE>NULL</CODE> if the list is empty.
<DT><CODE>Last<B></B></CODE>
<DD> The <A NAME=MARKER-2-49></A><CODE>Last</CODE> method returns the last object reference in the list. It returns <CODE>NULL</CODE> if the list is empty.
<DT><CODE>GetEqualItemNo<B></B></CODE>
<DD> The <A NAME=MARKER-2-51></A><CODE>GetEqualItemNo</CODE> method uses the object's <A NAME=MARKER-2-52></A><CODE>CompareObject</CODE> method to test for equality. This allows object equality to be determined by the object. An "equal" object may be found, even though the object being looked for is not, in fact, identical to the one found.
<DT><CODE>GetIdentityItemNo</CODE>
<DD> The <A NAME=MARKER-2-54></A><CODE>GetIdentityItemNo</CODE> method uses the <CODE>operator==</CODE> function to compare items in the list to the item being searched for. The <CODE>operator==</CODE> function is overloaded in <CODE>TObject</CODE>, where it calls the <CODE>IsEqual</CODE> method, which does nothing in <CODE>TObject</CODE>. As a result, <CODE>GetIdentityItemNo</CODE> does nothing unless you override the <CODE>IsEqual</CODE> method.
<DT><B>IMPORTANT</B>
<DD>To use the <CODE>GetIdentityItemNo</CODE> method, you must override the <CODE>IsEqual</CODE> method with a version that can identify equality between the items stored in your list.<A NAME=MARKER-10-1></A><EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING128-39></A>
<H2><A NAME=MARKER-9-56></A>Freeing a List</H2>
 The <CODE>TDynamicArray::Free</CODE> method frees the memory occupied by a list itself but does <I>not</I> free the items referred to. You can call the <CODE>FreeAll</CODE> method to free each of the objects in a list of object references (<CODE>TSortedList</CODE> and descendants) or each of the handles in a list of handle references (<CODE>TSortedHandleList</CODE> and descendants). The list itself becomes empty but is not freed. You can call the <CODE>FreeList</CODE> method to free each object in the list and then free the list as well.<P>
<A NAME=HEADING128-41></A>
<H2><A NAME=MARKER-9-57></A>Iteration</H2>
 Iteration allows you to traverse an array or list and perform some operation on each element. MacApp provides the <A NAME=MARKER-2-58></A><CODE>CIterator</CODE> class and several specialized subclasses for this purpose. For example, the <A NAME=MARKER-2-59></A><CODE>CArrayIterator</CODE> class iterates through an array of indexed items, the <CODE>cMenuIterator</CODE> class iterates through the menu handles in a menu list, the <CODE>CBehaviorIterator</CODE> class iterates through the behaviors that are associated with an event handler, and the <CODE>CSubViewIterator</CODE> class iterates through a list of subviews belonging to a view.<P>
 Each iterator class is defined for use with a specific kind of list (for example, <CODE>CObjectIterator</CODE> works with <CODE>TSortedList</CODE>) and can iterate correctly over the items in the list. This allows iteration to continue correctly, even as items are added to or deleted from a list. Iteration can be performed with both sorted and nonsorted lists and can be performed in either the forward or backward direction.<P>
 The most important base class for iterators is the <CODE>CArrayIterator</CODE> class. Like several of its subclasses, the <CODE>CArrayIterator</CODE> class provides multiple constructor methods for your convenience. The constructor methods of <CODE>CArrayIterator</CODE> call the initialization method, <CODE>IArrayIterator</CODE>, which sets the iterator's fields, including the following:<P>
<DL>
<DT><CODE>fCurrentIndex<B></B></CODE>
<DD> The <A NAME=MARKER-2-61></A><CODE>fCurrentIndex</CODE> field specifies the current index during iteration.
<DT><CODE>fDynamicArray<B></B></CODE>
<DD> The <A NAME=MARKER-2-63></A><CODE>fDynamicArray</CODE> field refers to the dynamic array for the list that is iterated through.
<DT><CODE>fHighBound<B></B></CODE>
<DD> The <A NAME=MARKER-2-65></A><CODE>fHighBound</CODE> field is the upper bound for forward iteration through the list.
<DT><CODE>fIterateForward<B></B></CODE>
<DD> The <A NAME=MARKER-2-67></A><CODE>fIterateForward</CODE> field is set to <CODE>TRUE</CODE> for forward iteration through the list and to <CODE>FALSE</CODE> for backward iteration.
<DT><CODE>fLowBound<B></B></CODE>
<DD> The <A NAME=MARKER-2-69></A><CODE>fLowBound</CODE> field is the lower bound for backward iteration through the list.
</DL>
 The <CODE>CArrayIterator</CODE> class also provides methods for inserting and deleting items in the list during iteration so that the iteration process is not invalidated by the change to the list. It includes the following methods:<P>
<DL>
<DT><CODE>DeleteElementAt<B></B></CODE>
<DD> The <A NAME=MARKER-2-71></A><CODE>DeleteElementAt</CODE> method adjusts the iteration index to account for the deleted element.
<DT><CODE>InsertElementBefore<B></B></CODE>
<DD>  The <A NAME=MARKER-2-73></A><CODE>InsertElementBefore</CODE> method adjusts the iteration index to account for the added element.<A NAME=MARKER-2-74></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-127.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-129.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

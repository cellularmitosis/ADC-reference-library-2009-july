<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Creating a Hierarchical Menu(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING99></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-98.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-100.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-89.html"><B>Chapter 3 - Menu Manager</B></A> / <A HREF="Toolbox-97.html"><B>Using the Menu Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING99-0></A>
<H2><A NAME=MARKER-9-270></A>Creating a Hierarchical Menu</H2>
 <A NAME=MARKER-2-497></A>A hierarchical menu is a menu that has a submenu attached to one or more of its menu items. Submenus can be useful when your application needs to offer additional choices to the user without taking up extra space in the menu bar. If you use a submenu in your application, use it to give the user additional choices or to choose attributes, not additional commands. <A NAME=MARKER-2-272></A><A NAME=MARKER-2-273></A><P>
 A menu item of a pull-down menu is the title of the attached submenu. A menu item that has a triangle facing right in the location of the keyboard equivalent identifies <BR>that a submenu is attached to the menu item. The title of a submenu should represent <BR>the choices it contains. <A HREF=#MARKER-9-274>Figure 3-32</A> shows a menu with a submenu whose menu title is Label Style.<P>
<B>Figure 3-32  <A NAME=MARKER-9-274></A>A menu item with a submenu</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/Figure_1-32_MMS-32.jpg"><P>
 When a user drags the cursor through a menu and rests it on a menu item with a submenu attached to it, the Menu Manager displays the submenu after a brief delay. <BR>The title of the submenu remains highlighted while the user browses through the submenu; the Menu Manager unhighlights the menu title of the submenu when the <BR>user releases the mouse button. <P>
 Your application is responsible for placing any marks next to the current choice or attribute of the submenu. For example, in <A HREF=#MARKER-9-274>Figure 3-32</A> the application placed the checkmark next to the Numeric menu item to indicate the current choice. If the user makes a new choice from the menu, your application should update the menu items accordingly.<P>
 You can specify that a particular menu item has a submenu by identifying this characteristic (using the <CODE>hierarchicalMenu</CODE> constant) when you define the menu item in its <CODE>'MENU'</CODE> resource. You cannot assign keyboard equivalents to a menu item that has a submenu. (You can define keyboard equivalents for the menu items in the submenu, but this is not recommended.) You identify the menu ID of the submenu in place of the marking character in the menu item's resource description. Thus, a menu item that has a submenu cannot have a marking character and cannot have a keyboard equivalent.<P>
 To insert a submenu into the current menu list, you must use the <CODE>InsertMenu</CODE> procedure. The <CODE>GetNewMBar</CODE> function does not read in the resource descriptions of <BR>any submenus.<P>
 <A HREF=#MARKER-9-275>Listing 3-7</A> shows the <CODE>'MENU'</CODE> resource for an application-defined menu called Outline. The Outline menu contains a number of menu items, including the Label Style menu item. The description of this menu item contains the constant <CODE>hierarchicalMenu</CODE>, which indicates that the item has a submenu. This menu item description also contains the menu ID of the submenu (defined by the <CODE>mSubMenu</CODE> constant). The menu ID of a submenu of an application must be from 1 through 235; the menu ID of a submenu of a desk accessory must be from 236 through 255.<P>
 The submenu is defined by the menu with the menu ID specified by the Label Style menu item. You define the menu items of a submenu in the same way as you would a pull-down menu (except you shouldn't define keyboard equivalents for items in a submenu, and you shouldn't attach a submenu to another submenu).<P>
<B>Listing 3-7  <A NAME=MARKER-9-275></A> Rez input for a description of a hierarchical menu with a submenu</B><P>
<PRE>
#define mOutline 135
#define mSubMenu 181

resource 'MENU' (mOutline, preload) {
      mOutline ,                          /*menu ID*/
      textMenuProc,                       
      0b0000000000000000000000000010000,  
      enabled, 
      &quot;Outline&quot;,                          /*menu title*/
      {                                   /*menu items*/
         &quot;Expand&quot;,            noicon, &quot;E&quot;,   nomark, plain;
         &quot;Expand To...&quot;,        noicon, nokey, nomark, plain;
         &quot;Expand All&quot;,        noicon, nokey, nomark, plain;
         &quot;Collapse&quot;,          noicon, nokey, nomark, plain;
         &quot;-&quot;,                 noicon, nokey, nomark, plain;
         /*the Label Style item has a submenu with menu ID mSubMenu*/
         &quot;Label Style&quot;,       noicon, hierarchicalMenu, mSubMenu, plain;
         &quot;-&quot;,                 noicon, nokey, nomark, plain; 
         &quot;Move Left&quot;,         noicon, &quot;L&quot;,   nomark, plain;
         &quot;Move Right&quot;,        noicon, &quot;R&quot;,   nomark, plain; 
         &quot;Move Up&quot;,           noicon, &quot;U&quot;,   nomark, plain; 
         &quot;Move Down&quot;,         noicon, &quot;D&quot;,   nomark, plain 
      }
};


resource 'MENU' (mSubMenu , preload) {
      mSubMenu ,                          /*menu ID*/
      textMenuProc,                       
      0b0000000000000000000000001111111,  
      enabled,                            
      &quot;Label Style&quot;,                      /*menu title (ignored--defined */
                                          /* by parent menu item text)*/
      {                                   /*menu items*/
         &quot;Alphabetic&quot;,        noicon, nokey, nomark, plain;    
         &quot;Bullet&quot;,            noicon, nokey, nomark, plain;    
         &quot;Chicago&quot;,           noicon, nokey, nomark, plain;    
         &quot;Harvard&quot;,           noicon, nokey, nomark, plain;    
         &quot;Legal&quot;,             noicon, nokey, nomark, plain;    
         &quot;Numeric&quot;,           noicon, nokey, nomark, plain;    
         &quot;Roman&quot;,             noicon, nokey, nomark, plain     
      }
};
</PRE>
 When you use <CODE>GetNewMBar</CODE> to read in menu descriptions and create a new menu list, <CODE>GetNewMBar</CODE> records the menu ID of any submenu in the menu record but does not read in the description of the submenu. To read a description of a submenu, use the <CODE>GetMenu</CODE> function. To actually insert a submenu into the current menu list, you must use the <CODE>InsertMenu</CODE> procedure.<P>
 When needed, your application can use the <CODE>GetMenu</CODE> function to read a description of the characteristics of a menu from a <CODE>'MENU'</CODE> resource. The <CODE>GetMenu</CODE> function creates a menu record for the menu, allocating space for the menu record in your application's heap. The <CODE>GetMenu</CODE> function creates the menu and menu items (and fills in the menu record) according to its <CODE>'MENU'</CODE> resource. The <CODE>GetMenu</CODE> function does not insert the menu into a menu list. When you're ready to add it to the current menu list, use the <CODE>InsertMenu</CODE> procedure. <P>
 <A HREF=#MARKER-9-277>Listing 3-8</A> uses the <CODE>GetMenu</CODE> function to read the description of a submenu and uses the <CODE>InsertMenu</CODE> procedure to insert the menu into the current menu list. <A NAME=MARKER-2-498></A><P>
<B>Listing 3-8  <A NAME=MARKER-9-277></A>Creating a hierarchical menu<A NAME=MARKER-2-278></A></B><P>
<PRE>
PROCEDURE MyMakeSubMenu (subMenuResID: Integer);
VAR
   subMenu: MenuHandle;
BEGIN
   subMenu := GetMenu(subMenuResID);
   InsertMenu(subMenu, -1);
END;
</PRE>
 To insert a submenu into the current menu list using the <CODE>InsertMenu</CODE> procedure, specify -1 in the second parameter to insert the menu into the submenu portion of the menu list. As the user traverses menu items, if a menu item has a submenu the <CODE>MenuSelect</CODE> function looks in the submenu portion of the menu list for the submenu; it searches for a menu with a defined menu ID that matches the menu ID specified by the hierarchical menu item. If it finds a menu with a matching menu ID, it attaches the submenu to the menu item and allows the user to browse through the submenu. <A NAME=MARKER-2-279></A><A NAME=MARKER-2-280></A><A NAME=MARKER-2-281></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-98.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-100.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

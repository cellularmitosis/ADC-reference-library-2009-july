<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Routines(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING147></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-146.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-148.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-126.html"><B>Chapter 3 - QuickDraw Text</B></A> / <A HREF="Text-143.html"><B>QuickDraw Text Reference</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING147-0></A>
<H2><A NAME=MARKER-2-253></A>Routines</H2>
 This section describes the routines that you use to set the text characteristics of the graphics port drawing environment, measure and draw text, lay out lines of text, and determine where to position the caret and which glyphs to highlight in a range of text. It also describes two low-level routines that you can use to measure and draw text.<P>
 Four parameters that are common to a number of routines are described in detail here. These parameters are also listed and defined briefly in the each routine.<P>
<A NAME=HEADING147-3></A>
<H4><A NAME=MARKER-9-254></A>The slop Parameter</H4>
 The <CODE>DrawJustified</CODE>, <CODE>MeasureJustified</CODE>, <CODE>PixelToChar</CODE>, and <CODE>CharToPixe</CODE>l routines take a <CODE>slop</CODE> parameter. The value of this parameter is the number of pixels by which the width of the text segment is to be changed, after the text has been scaled. The <CODE>slop</CODE> is a signed value that specifies how much the text is to be extended or condensed. The <CODE>slop</CODE> is derived from the calculations made using the proportion returned from the <CODE>PortionLine</CODE> function for a style run. To measure or draw text that is not to be extended or condensed, pass a <CODE>slop</CODE> value of 0.<P>
<A NAME=HEADING147-5></A>
<H4><A NAME=MARKER-9-255></A>The styleRunPosition Parameter</H4>
 The <CODE>PortionLine</CODE>, <CODE>MeasureJustified</CODE>, <CODE>DrawJustified</CODE>, <CODE>PixelToChar</CODE>, and <CODE>CharToPixel</CODE> routines take a <CODE>styleRunPosition</CODE> parameter. This parameter specifies the position of the style run on the display line, and is used to<P>
<UL>
<LI>determine the proportion of total slop to apply to a style run
<LI>measure or draw a line of justified text
<LI>identify where to break a line of text
<LI>determine the caret position to mark an insertion point or highlight text.<P>
</UL>
 The style run position parameter is meaningful only for those script systems that use intercharacter spacing for justification. For all other script systems, the parameter exists for future extensibility. Although the style run position parameter is not used, for example, for justifying text in the Roman script system, to allow for future compatibility, you should always specify the appropriate value for it for all calls that take it.<P>
 For those script systems that do use intercharacter spacing, space between style runs may be allocated differently depending upon whether the style run is leftmost, rightmost, or between two other style runs. For example, depending on the script system, if a style run occurs at the beginning or end of a line, extra space <I>may not</I> be added to the outer edge of the outermost glyph, whereas if a style run is interior to a line, all of the glyphs of the text may be treated the same: extra space is allocated to both sides of every glyph including those at either end of the style run.<P>
<DL>
<DT><B>Note</B>
<DD>The current implementations of simple script systems such as Roman and Cyrillic do not justify a line of text by changing the width of nonspace characters. Instead, they rely solely on the use of space characters: the same amount of extra width is added to (or subtracted from) every space whether the space is at the beginning or end of the line or interior to it.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Use one of the following constants (defined as type <CODE>JustStyleCode</CODE>) in <BR>the <CODE>styleRunPosition</CODE> parameter.
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Constant<TH>Value<TH>Meaning<TR>
<TD><A NAME=MARKER-2-52></A>onlyStyleRun<TD>0<TD>Only style run on the line<TR>
<TD><A NAME=MARKER-2-95></A>leftStyleRun<TD>1<TD>Leftmost of multiple style runs on the line<TR>
<TD><A NAME=MARKER-2-96></A>rightStyleRun<TD>2<TD>Rightmost of multiple style runs on the line<TR>
<TD>middleStyleRun<TD>3<TD>Interior style run: neither leftmost nor rightmost</TABLE>
<P>
<A NAME=HEADING147-15></A>
<H4><A NAME=MARKER-9-256></A>The numer and denom Parameters</H4>
 The <CODE>PortionLine</CODE>, <CODE>DrawJustified</CODE>, <CODE>MeasureJustified</CODE>, <CODE>PixelToChar</CODE>, <CODE>CharToPixel</CODE>, <CODE>StdText</CODE>, and <CODE>StdTxMeas</CODE> routines take <CODE>numer</CODE> and <CODE>denom</CODE> parameters. Both <CODE>numer</CODE> and <CODE>denom</CODE> are point values: <CODE>numer</CODE> specifies the numerator for the horizontal and vertical scaling factors, and <CODE>denom</CODE> specifies the denominator for <BR>the horizontal and vertical scaling factors. Together, these values specify the scaling factors for the text: <CODE>numer.v</CODE> over <CODE>denom.v</CODE> gives the vertical scaling (height), and <CODE>numer.h</CODE> over <CODE>denom.h</CODE> gives the horizontal scaling factors (width). For routines that take these parameters, you need to specify values for <CODE>numer</CODE> and <CODE>denom</CODE> even if you are not scaling the text. For unscaled text, you can specify scaling factors of 1, 1.<P>
 For all routines except <CODE>StdTxtMeas</CODE> that take these parameters, <CODE>numer</CODE> and <CODE>denom</CODE> are input parameters only. For <CODE>StdTxtMeas</CODE>, <CODE>numer</CODE> and <CODE>denom</CODE> are reference parameters. On output, these parameters contain additional scaling to be applied to the text. Use of the output values is explained in the description of <A HREF=Text-177.html#MARKER-9-369>"StdTxMeas" on page 3-96</A>.<P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DT><A HREF="Text-147.html#HEADING147-3">The slop Parameter</A>
<DD>
<DT><A HREF="Text-147.html#HEADING147-5">The styleRunPosition Parameter</A>
<DD>
<DT><A HREF="Text-147.html#HEADING147-15">The numer and denom Parameters</A>
<DD>
<DL>
<DT><A HREF="Text-148.html#HEADING148-0">Setting Text Characteristics</A>
<DD>
<DT><A HREF="Text-156.html#HEADING156-0">Drawing Text</A>
<DD>
<DT><A HREF="Text-161.html#HEADING161-0">Measuring Text</A>
<DD>
<DT><A HREF="Text-167.html#HEADING167-0">Laying Out a Line of Text</A>
<DD>
<DT><A HREF="Text-171.html#HEADING171-0">Determining the Caret Position, and Selecting and Highlighting Text</A>
<DD>
<DT><A HREF="Text-175.html#HEADING175-0">Low-Level QuickDraw Text Routines</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-146.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-148.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Mac OS X Assembler Reference: Assembler Directives</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Assembler Directives"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000823" title="Assembler Directives"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/DeveloperTools/index.html#//apple_ref/doc/uid/TP30001281-TP30000436" target="_top">Tools</a> &gt; <a href="../../../../../reference/DeveloperTools/idxCompilersDebuggers-date.html#//apple_ref/doc/uid/TP30001281-TP30000436-TP30001025" target="_top">Compiling &amp; Debugging</a> &gt; <a href="../000-Introduction/introduction.html#//apple_ref/doc/uid/TP30000851-CH211-DontLinkElementID_9">Mac OS X Assembler Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../030-Assembly_Language_Statements/asm_language.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../050-PowerPC_Addressing_Modes_and_Assembler_Instructions/ppc_instructions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30000823-SW1" title="Assembler Directives"></a><h1><a name="//apple_ref/doc/uid/TP30000823-TPXREF101" title="Assembler Directives"></a>Assembler Directives</h1><p>This chapter describes <a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_23"></a>assembler directives (also known as <a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_24"></a>pseudo operations, or pseudo-ops), which allow control over the actions of the assembler.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF102">Directives for Designating the Current Section</a>
				
			<br/>
			
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF146">Directives for Moving the Location Counter</a>
				
			<br/>
			
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF149">Directives for Generating Data</a>
				
			<br/>
			
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF157">Directives for Dealing With Symbols</a>
				
			<br/>
			
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-CJBJAAGI">Directives for Dead-Code Stripping</a>
				
			<br/>
			
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF169">Miscellaneous Directives</a>
				
			<br/>
			
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF178">PowerPC-Specific Directives</a>
				
			<br/>
			
        
			
			
				<a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF185">Additional Processor-Specific Directives</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000823-TPXREF102" title="Directives for Designating the Current Section"></a><h2>Directives for Designating the Current Section</h2><p>The assembler supports designation of arbitrary sections with the <code>.section</code> and <code>.zerofill</code> directives (descriptions appear below).  Only those sections specified by a directive in the assembly file appear in the resulting object file (including implicit <code>.text</code> directives—see <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-CJBDFFDF">“Built-in Directives.”</a></span>  Sections appear in the object file in the order their directives first appear in the assembly file.  When object files are linked by the link editor, the output objects have their sections in the order the sections first appear in the object files that are linked.  See the <code>ld(1)</code> Mac OS X man page for more details.</p><p>Associated with each section in each segment is an implicit <a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_25"></a>location counter, which begins at zero and is incremented by 1 for each byte assembled into the section.  There is no way to explicitly reference a particular location counter, but the directives described here can be used to “activate” the location counter for a section, making it the <em>current</em> location counter.  As a result, the assembler begins assembling into the section associated with that location counter.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;If the <code>-n</code> command-line option isn’t used, the (<code>__TEXT,__text</code>) section is used by default at the beginning of each file being assembled, just as if each file began with the <code>.text</code> directive.</p></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF103" title=".section"></a><h3>.section</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.section  segname , sectname [[[ , type ] , attribute ] , sizeof_stub ]<span></span></pre></td></tr></table></div><p>The <code>.section</code> directive causes the assembler to begin assembling into the section given by <em>segname</em> and <em>sectname</em>.  A section created with this directive contains initialized data or instructions and is referred to as a content section.  <em>type</em> and <em>attribute</em> may be specified as described under <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-CJBIFBJG">“Section Types and Attributes.”</a></span> If <em>type</em> is <code>symbol_stubs</code>, then the <em>sizeof_stub</em> field must be given as the size in bytes of the symbol stubs contained in the section.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF104" title=".zerofill"></a><h3>.zerofill</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.zerofill  segname , sectname [ , symbolname , size [ , align_expression ]]<span></span></pre></td></tr></table></div><p>The <code>.zerofill</code> directive causes <em>symbolname</em> to be created as uninitialized data in the section given by <em>segname</em> and <em>sectname</em>, with a size in bytes given by <em>size</em>.  A power of 2 between 0 and 15 may be given for <em>align_expression</em> to indicate what alignment should be forced on <em>symbolname</em>, which is placed on the next expression boundary having the given alignment.  See <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF147">“.align”</a></span> for details.</p><a name="//apple_ref/doc/uid/TP30000823-CJBIFBJG" title="Section Types and Attributes"></a><h3>Section Types and Attributes</h3><p>A content section has a type, which informs the link editor about special processing needed for the items in that section.  The most common form of special processing is for sections containing literals (strings, constants, and so on) where only one copy of the literal is needed in the output file and the same literal can be used by all references in the input files.</p><p>A section’s attributes record supplemental information about the section that  the link editor may use in processing that section. For example, the <code>pure_instructions</code> attribute indicates that a section contains only valid machine instructions.</p><p>A section’s type and attribute are recorded in a Mach-O file as the <code>flags</code> field in the section header, using constants defined in the header file <code>mach-o/loader.h</code>.  The following sections describe the various types and attributes by the names used to identify them in a <code>.section</code> directive.  The name of the related constant is also given in parentheses following the identifier.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF105" title="Type Identifiers"></a><h4>Type Identifiers</h4><p>The following sections describe section type identifiers.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF106" title="regular (S_REGULAR)"></a><h5>regular (S_REGULAR)</h5><p>A <code>regular</code> section may contain any kind of data and gets no special processing from the link editor.  This is the default section type.  Examples of <code>regular</code> sections include program instructions or initialized data.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF107" title="cstring_literals (S_CSTRING_LITERALS)"></a><h5>cstring_literals (S_CSTRING_LITERALS)</h5><p>A <code>cstring_literals</code> section contains null-terminated literal C language character strings.  The link editor places only one copy of each literal into the output file’s section and relocates references to different copies of the same literal to the one copy in the output file.  There can be no relocation entries for a section of this type, and all references to literals in this section must be inside the address range for the specific literal being referenced.  The last byte in a section of this type must be a null byte, and the strings can’t contain null bytes in their bodies.  An example of a <code>cstring_literals</code> section is one for the literal strings that appear in the body of an ANSI C function where the compiler chooses to make such strings read only.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF108" title="4byte_literals (S_4BYTE_LITERALS)"></a><h5>4byte_literals (S_4BYTE_LITERALS)</h5><p>A <code>4byte_literals</code> section contains 4-byte literal constants.  The link editor places only one copy of each literal into the output file’s section and relocates references to different copies of the same literal to the one copy in the output file.  There can be no relocation entries for a section of this type, and all references to literals in this section must be inside the address range for the specific literal being referenced.  An example of a <code>4byte_literals</code> section is one in which single-precision floating-point constants are stored for a RISC machine (these would normally be stored as immediates in CISC machine code).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF109" title="8byte_literals (S_8BYTE_LITERALS)"></a><h5>8byte_literals (S_8BYTE_LITERALS)</h5><p>An <code>8byte_literals</code> section contains 8-byte literal constants.  The link editor places only one copy of each literal into the output file’s section and relocates references to different copies of the same literal to the one copy in the output file.  There can be no relocation entries for a section of this type, and all references to literals in this section must be inside the address range for the specific literal being referenced.  An example of a <code>8byte_literals</code> section is one in which double-precision floating-point constants are stored for a RISC machine (these would normally be stored as immediates in CISC machine code).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF110" title="literal_pointers (S_LITERAL_POINTERS)"></a><h5>literal_pointers (S_LITERAL_POINTERS)</h5><p>A <code>literal_pointers</code> section contains 4-byte pointers to literals in a literal section.  The link editor places only one copy of a pointer into the output file’s section for each pointer to a literal with the same contents.  The link editor also relocates references to each literal pointer to the one copy in the output file.  There must be exactly one relocation entry for each literal pointer in this section, and all references to literals in this section must be inside the address range for the specific literal being referenced.  The relocation entries can be external relocation entries referring to undefined symbols if those symbols identify literals in another object file.  An example of a <code>literal_pointers</code> section is one containing selector references generated by the Objective-C compiler.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF111" title="symbol_stubs (S_SYMBOL_STUBS)"></a><h5>symbol_stubs (S_SYMBOL_STUBS)</h5><p>A <code>symbol_stubs</code> section contains symbol stubs, which are sequences of machine instructions (all the same size) used for lazily binding undefined function calls at runtime.  If a call to an undefined function is made, the compiler outputs a call to a symbol stub instead, and tags the stub with an indirect symbol that indicates what symbol the stub is for.  On transfer to a symbol stub, a program executes instructions that eventually reach the code for the indirect symbol associated with that stub.  Here’s a sample of assembly code based on a function <code>func()</code> containing only a call to the undefined function <code>foo()</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>    .text<span></span></pre></td></tr><tr><td scope="row"><pre>    .align 2<span></span></pre></td></tr><tr><td scope="row"><pre>    .globl _func<span></span></pre></td></tr><tr><td scope="row"><pre> _func:<span></span></pre></td></tr><tr><td scope="row"><pre>    b L_foo$stub<span></span></pre></td></tr><tr><td scope="row"><pre>    .symbol_stub<span></span></pre></td></tr><tr><td scope="row"><pre> L_foo$stub:                            ;<span></span></pre></td></tr><tr><td scope="row"><pre>    .indirect_symbol _foo               ;<span></span></pre></td></tr><tr><td scope="row"><pre>    lis r11,ha16(L_foo$lazy_ptr)        ;<span></span></pre></td></tr><tr><td scope="row"><pre>    lwz r12,lo16(L_foo$lazy_ptr)(r11)   ; the symbol stub<span></span></pre></td></tr><tr><td scope="row"><pre>    mtctr r12                           ;<span></span></pre></td></tr><tr><td scope="row"><pre>    addi r11,r11,lo16(L_foo$lazy_ptr)   ;<span></span></pre></td></tr><tr><td scope="row"><pre>    bctr                                ;<span></span></pre></td></tr><tr><td scope="row"><pre>    .lazy_symbol_pointer<span></span></pre></td></tr><tr><td scope="row"><pre> L_foo$lazy_ptr:                        ;<span></span></pre></td></tr><tr><td scope="row"><pre>    .indirect_symbol _foo               ; the symbol pointer<span></span></pre></td></tr><tr><td scope="row"><pre>    .long dyld_stub_binding_helper      ; to be replaced by _foo's address<span></span></pre></td></tr></table></div><p>The symbol-stub sections in the IA-32 architecture—instead of using a stub and a lazy pointer—use one branch instruction that specifies the target. This is the corresponding IA-32 assembly code:</p><div class="codesample"><table><tr><td scope="row"><pre>    .text<span></span></pre></td></tr><tr><td scope="row"><pre>    .align 2<span></span></pre></td></tr><tr><td scope="row"><pre>    .globl _func<span></span></pre></td></tr><tr><td scope="row"><pre>_func:<span></span></pre></td></tr><tr><td scope="row"><pre>    pushl   %ebp<span></span></pre></td></tr><tr><td scope="row"><pre>    movl    %esp, %ebp<span></span></pre></td></tr><tr><td scope="row"><pre>    subl    $8, %esp<span></span></pre></td></tr><tr><td scope="row"><pre>    call    L_foo$stub<span></span></pre></td></tr><tr><td scope="row"><pre>    leave<span></span></pre></td></tr><tr><td scope="row"><pre>    ret<span></span></pre></td></tr><tr><td scope="row"><pre>    .symbol_stub<span></span></pre></td></tr><tr><td scope="row"><pre>L_foo$stub:<span></span></pre></td></tr><tr><td scope="row"><pre>     .indirect_symbol _foo<span></span></pre></td></tr><tr><td scope="row"><pre>     hlt ; hlt ; hlt ; hlt ; hlt<span></span></pre></td></tr></table></div><p>In the assembly code, <code>_func</code> branches to <code>L_foo$stub</code>, which is responsible for finding the definition of the function <code><!--a-->foo()<!--/a--></code>. On PPC (and PPC64), <code>L_foo$stub</code> jumps to the contents of <code>L_foo$lazy_ptr</code>. This value is initially the address of the <code>dyld_stub_binding_helper</code> code, which after executing causes it to overwrite the contents of <code>L_foo$lazy_ptr</code> with the address of the real function, <code>_foo</code>, and jump to <code>_foo</code>.</p><p>On IA-32, the branch instruction points to the dynamic linker. The first time the stub is called, the dynamic linker modifies the instruction so that it jumps to the real function in subsequent calls.</p><p>The indirect symbol entries for <code>_foo</code> provide information to the static and dynamic linkers for binding the symbol stub. Each symbol stub and lazy pointer entry must have exactly one such indirect symbol, associated with the first address in the stub or pointer entry. See <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF159">“.indirect_symbol”</a></span> for more information.</p><p>The static link editor places only one copy of each stub into the output file’s section for a particular indirect symbol, and relocates all references to the stubs with the same indirect symbol to the stub in the output file. Further, the static link editor eliminates a stub if it determines that the target is in the same linkage unit and doesn’t need redirecting at runtime. No global symbols can be defined in <code>symbol_stubs</code> sections. </p><p>On PPC, the stub can refer only to itself, one lazy symbol pointer (referring to the same indirect symbol as the stub), and the <code>dyld_stub_binding_helper()</code> function.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF112" title="lazy_symbol_pointers (S_LAZY_SYMBOL_POINTERS)"></a><h5>lazy_symbol_pointers (S_LAZY_SYMBOL_POINTERS)</h5><p>A <code>lazy_symbol_pointers</code> section contains 4-byte symbol pointers that eventually contain the value of the indirect symbol associated with the pointer.  These pointers are used by symbol stubs to lazily bind undefined function calls at runtime. A lazy symbol pointer initially contains an address in the symbol stub of instructions that cause the symbol pointer to be bound to the function definition (in the example in <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF111">“symbol_stubs (S_SYMBOL_STUBS),”</a></span> the lazy pointer <code>L_foo$lazy_ptr</code> initially contains the address for <code>dyld_stub_binding_helper</code> but gets overwritten with the address for <code>_foo</code>). The dynamic link editor binds the indirect symbol associated with the lazy symbol pointer by overwriting it with the value of the symbol.</p><p>The static link editor places a copy of a lazy pointer in the output file only if the corresponding symbol stub is in the output file.  Only the corresponding symbol stub can make a reference to a lazy symbol pointer, and no global symbols can be defined in this type of section.  There must be one indirect symbol associated with each lazy symbol pointer.  An example of a <code>lazy_symbol_pointers</code> section is one in which the compiler has generated calls to undefined functions, each of which can be bound lazily at the time of the first call to the function.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF113" title="non_lazy_symbol_pointers (S_NON_LAZY_SYMBOL_POINTERS)"></a><h5>non_lazy_symbol_pointers (S_NON_LAZY_SYMBOL_POINTERS)</h5><p>A <code>non_lazy_symbol_pointers</code> section contains 4-byte symbol pointers that contain the value of the indirect symbol associated with a pointer that may be set at any time before any code makes a reference to it.  These pointers are used by the code to reference undefined symbols.  Initially these pointers have no interesting value but get overwritten by the dynamic link editor with the value of the symbol for the associated indirect symbol before any code can make a reference to it.</p><p>The static link editor places only one copy of each non-lazy pointer for its indirect symbol into the output file and relocates all references to the pointer with the same indirect symbol to the pointer in the output file.  The static link editor further can fill in the pointer with the value of the symbol if a definition of the indirect symbol for that pointer is present in the output file.  No global symbols can be defined in this type of section.  There must be one indirect symbol associated with each non-lazy symbol pointer.  An example of a <code>non_lazy_symbol_pointers</code> section is one in which the compiler has generated code to indirectly reference undefined symbols to be bound at runtime—this preserves the sharing of the machine instructions by allowing the dynamic link editor to update references without writing on the instructions.</p><p>Here's an example of assembly code referencing an element in the undefined structure.  The corresponding C code would be:</p><div class="codesample"><table><tr><td scope="row"><pre>struct s {<span></span></pre></td></tr><tr><td scope="row"><pre>        int member1, member2;<span></span></pre></td></tr><tr><td scope="row"><pre>    };<span></span></pre></td></tr><tr><td scope="row"><pre>    extern struct s bar;<span></span></pre></td></tr><tr><td scope="row"><pre>    int func()<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        return(bar.member2);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>The PowerPC assembly code might look like this:</p><div class="codesample"><table><tr><td scope="row"><pre>    .text<span></span></pre></td></tr><tr><td scope="row"><pre>    .align 2<span></span></pre></td></tr><tr><td scope="row"><pre>    .globl _func<span></span></pre></td></tr><tr><td scope="row"><pre> _func:<span></span></pre></td></tr><tr><td scope="row"><pre>    lis r3,ha16(L_bar$non_lazy_ptr)<span></span></pre></td></tr><tr><td scope="row"><pre>    lwz r2,lo16(L_bar$non_lazy_ptr)(r3)<span></span></pre></td></tr><tr><td scope="row"><pre>    lwz r3,4(r2)<span></span></pre></td></tr><tr><td scope="row"><pre>    blr<span></span></pre></td></tr><tr><td scope="row"><pre>    .non_lazy_symbol_pointer<span></span></pre></td></tr><tr><td scope="row"><pre> L_bar$non_lazy_ptr:<span></span></pre></td></tr><tr><td scope="row"><pre>    .indirect_symbol _bar<span></span></pre></td></tr><tr><td scope="row"><pre>    .long 0<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF114" title="mod_init_funcs (S_MOD_INIT_FUNC_POINTERS)"></a><h5>mod_init_funcs (S_MOD_INIT_FUNC_POINTERS)</h5><p>A <code>mod_init_funcs</code> section contains 4-byte pointers to functions that are to be called just after the module containing the pointer is bound into the program by the dynamic link editor.  The static link editor does no special processing for this section type except for disallowing section ordering.  This is done to maintain the order the functions are called (which is the order their pointers appear in the original module).  There must be exactly one relocation entry for each pointer in this section.  An example of a <code>mod_init_funcs</code> section is one in which the compiler has generated code to call C++ constructors for modules that get dynamically bound at runtime.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF115" title="mod_term_funcs (S_MOD_TERM_FUNC_POINTERS)"></a><h5>mod_term_funcs (S_MOD_TERM_FUNC_POINTERS)</h5><p>A <code>mod_term_funcs</code> section contains 4-byte pointers to functions that are to be called just before the module containing the pointer is unloaded by the dynamic link editor or the program is terminated. The static link editor does no special processing for this section type except for disallowing section ordering.  This is done to maintain the order the functions are called (which is the order their pointers appear in the original module). There must be exactly one relocation entry for each pointer in this section. An example of a <code>mod_term_funcs</code> section is one in which the compiler has generated code to call C++ destructors for modules that get dynamically bound at runtime.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF116" title="coalesced (S_COALESCED)"></a><h5>coalesced (S_COALESCED)</h5><p>A <code>coalesced</code> section can contain any instructions or data and is used when more than one definition of a symbol could be defined in multiple object files being linked together.  The static link editor keeps the data associated with the coalesced symbol from the first object file it links and silently discards the data from other object files. An example of a <code>coalesced</code> section is one in which the compiler has generated code for implicit instantiations of C++ templates.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF117" title="Attribute Identifiers"></a><h4>Attribute Identifiers</h4><p>The following sections describe attribute identifiers.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF118" title="none (0)"></a><h5>none (0)</h5><p>No attributes for this section.  This is the default section attribute.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF122" title="S_ATTR_SOME_INSTRUCTIONS"></a><h5>S_ATTR_SOME_INSTRUCTIONS</h5><p>This attribute is set by the assembler whenever it assembles a machine instruction in a section. There is no directive associated with it, since you cannot set it yourself. It is used by the dynamic link editor together with <code>S_ATTR_EXT_RELOC</code> and <code>S_ATTR_LOC_RELOC</code>, set by the static link editor, to know it must flush the cache and other processor-related functions when it relocates instructions by writing on them.</p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_1" title="no_dead_strip (S_ATTR_NO_DEAD_STRIP)"></a><h5>no_dead_strip (S_ATTR_NO_DEAD_STRIP)</h5><p>The <code>no_dead_strip</code> section attribute specifies that a particular section must not be dead-stripped. See <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-CJBJAAGI">“Directives for Dead-Code Stripping”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF120" title="no_toc (S_ATTR_NO_TOC)"></a><h5>no_toc (S_ATTR_NO_TOC)</h5><p>The <code>no_toc</code> section attribute means that the global symbols in this section are not to be used in the table of contents of a static library as produced by the program <code>ranlib(1)</code>.  This is normally used with a <code>coalesced</code> section when it is expected that each object file has a definition of the symbols that it uses.</p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_2" title="live_support (S_ATTR_LIVE_SUPPORT)"></a><h5>live_support (S_ATTR_LIVE_SUPPORT)</h5><p>The <code>live_support</code> section attribute specifies that a section’s blocks must not be dead-stripped if they reference code that is live, but the reference is undetectable. See <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-CJBJAAGI">“Directives for Dead-Code Stripping”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF119" title="pure_instructions (S_ATTR_PURE_INSTRUCTIONS)"></a><h5>pure_instructions (S_ATTR_PURE_INSTRUCTIONS)</h5><p>The <code>pure_instructions</code> attribute means that this section contains nothing but machine instructions.  This attribute would be used for the (<code>__TEXT,__text</code>) section of Mac OS X compilers and sections that have a section type of <code>symbol_stubs</code>.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF121" title="strip_static_syms (S_ATTR_STRIP_STATIC_SYMS)"></a><h5>strip_static_syms (S_ATTR_STRIP_STATIC_SYMS)</h5><p>The <code>strip_static_syms</code> section attribute means that the static symbols in this section can be stripped from linked images that are used with the dynamic linker when debugging symbols are also stripped.  This is normally used with a <code>coalesced</code> section that has private <code>extern</code> symbols, so that after linking and the private extern symbols have been turned into static symbols they can be stripped to save space in the linked image.</p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_3" title="self_modifying_code (S_ATTR_SELF_MODIFYING_CODE)"></a><h5>self_modifying_code (S_ATTR_SELF_MODIFYING_CODE)</h5><p>The <code>self_modifying_code</code> section attribute identifies a section with code that can be modified by the dynamic linker. For example, IA-32 symbol stubs are implemented as branch instructions that initially point to the dynamic linker but are modified by the dynamic linker to point to the real symbol.</p><a name="//apple_ref/doc/uid/TP30000823-CJBDFFDF" title="Built-in Directives"></a><h3>Built-in Directives</h3><p>The directives described here are simply built-in equivalents for <code>.section</code> directives with specific arguments.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF123" title="Designating Sections in the __TEXT Segment"></a><h4>Designating Sections in the __TEXT Segment</h4><p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_26"></a>The directives listed below cause the assembler to begin assembling into the indicated section of the <code>__TEXT</code> segment.  Note that the underscore before <code>__TEXT, __text</code>, and the rest of the segment names is actually two underscore characters.</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Directive</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Section</p></th></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_27"></a>.text</code></p></td><td ><p>(<code>__TEXT,__text</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_28"></a>.const</code></p></td><td ><p>(<code>__TEXT,__const</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_29"></a>.static_const</code></p></td><td ><p>(<code>__TEXT,__static_const</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_30"></a>.cstring</code></p></td><td ><p>(<code>__TEXT,__cstring</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_31"></a>.literal4</code></p></td><td ><p>(<code>__TEXT,__literal4</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_32"></a>.literal8</code></p></td><td ><p>(<code>__TEXT,__literal8</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_33"></a>.literal16</code></p></td><td ><p>(<code>__TEXT,__literal16</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_34"></a>.constructor</code></p></td><td ><p>(<code>__TEXT,__constructor</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_35"></a>.destructor</code></p></td><td ><p>(<code>__TEXT,__destructor</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_36"></a>.fvmlib_init0</code></p></td><td ><p>(<code>__TEXT,__fvmlib_init0</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_37"></a>.fvmlib_init1</code></p></td><td ><p>(<code>__TEXT,__fvmlib_init1</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_38"></a>.symbol_stub</code></p></td><td ><p>(<code>__TEXT,__symbol_stub1</code> or <code>__TEXT,__jump_table</code>)</p></td></tr><tr><td  scope="row"><p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_39"></a><code>.picsymbol_stub</code></p></td><td ><p>(<code>__TEXT, __picsymbolstub1</code> or <code>__TEXT, __picsymbol_stub</code>)</p></td></tr></table></div><p>The following sections describe the sections in the <code>__TEXT</code> segment and the types of information that should be assembled into each of them.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF124" title=".text"></a><h5>.text</h5><p>This is equivalent to <code>.section __TEXT,__text,regular,pure_instructions</code> when the default <code>-dynamic</code> flag is in effect and equivalent to <code>.section __TEXT,__text,regular</code> when the <code>-static</code> flag is specified.</p><p>The compiler places only machine instructions in the (<code>__TEXT,__text</code>) section (no read-only data, jump tables or anything else).  With this, the entire (<code>__TEXT,__text</code>) section is pure instructions and tools that operate on object files. The runtime can take advantage of this to locate the instructions of the program and not get confused with data that could have been mixed in.  To make this work, all runtime support code linked into the program must also obey this rule (all Mac OS X library code follows this rule).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF125" title=".const"></a><h5>.const</h5><p>This is equivalent to <code>.section __TEXT,__const</code></p><p>The compiler places all data declared <code>const</code> and all jump tables it generates for switch statements in this section.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF126" title=".static_const"></a><h5>.static_const</h5><p>This is equivalent to <code>.section __TEXT,__static_const</code></p><p>This is not currently used by the compiler.  It was added to the assembler so that the compiler may separate global and <code>static const</code> data into separate sections if it wished to.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF127" title=".cstring"></a><h5>.cstring</h5><p>This is equivalent to <code>.section __TEXT,__cstring, cstring_literals</code></p><p>This section is marked with the section type <code>cstring_literals</code>, which the link editor recognizes.  The link editor merges the like literal C strings in all the input object files to one unique C string in the output file.  Therefore this section must contain only C strings (a C string in a sequence of bytes that ends in a null byte, <code>\0</code>, and does not contain any other null bytes except its terminator).  The compiler places literal C strings found in the code that are not initializers and do not contain any embedded nulls in this section.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF128" title=".literal4"></a><h5>.literal4</h5><p>This is equivalent to <code>.section __TEXT,__literal4,4byte_literals</code></p><p>This section is marked with the section type <code>4byte_literals</code>, which the link editor recognizes.  The link editor can then merge the like 4 byte literals in all the input object files to one unique 4 byte literal in the output file.  Therefore, this section must contain only 4 byte literals. This is typically intended for single precision floating-point constants and the compiler uses this section for that purpose.  On some architectures it is more efficient to place these constants in line as immediates as part of the instruction.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF129" title=".literal8"></a><h5>.literal8</h5><p>This is equivalent to <code>.section __TEXT,__literal8,8byte_literals</code></p><p>This section is marked with the section type <code>8byte_literals</code>, which the link editor recognizes.  The link editor then can merge the like 8 byte literals in all the input object files to one unique 8 byte literal in the output file.  Therefore, this section must contain only 8 byte literals. This is typically intended for double precision floating-point constants and the compiler uses this section for that purpose.  On some architectures it is more efficient to place these constants in line as immediates as part of the instruction.</p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_4" title=".literal16"></a><h5>.literal16</h5><p>This is equivalent to <code>.section __TEXT,__literal16,16byte_literals</code></p><p>This section is marked with the section type <code>16byte_literals</code>, which the link editor recognizes. The link editor can then merge the like 16 byte literals in all the input object files to one unique 16 byte literal in the output file. Therefore, this section must contain only 16 byte literals. This is typically intended for vector constants and the compiler uses this section for that purpose.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF130" title=".constructor"></a><h5>.constructor</h5><p>This is equivalent to <code>.section __TEXT,__constructor</code></p><a name="//apple_ref/doc/uid/TP30000823-TPXREF131" title=".destructor"></a><h5>.destructor</h5><p>This is equivalent to <code>.section __TEXT,__destructor</code></p><p>The <code>.constructor</code> and <code>.destructor</code> sections are used by the C++ runtime system, and are reserved exclusively for the C++ compiler.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF132" title=".fvmlib_init0"></a><h5>.fvmlib_init0</h5><p>This is equivalent to <code>.section __TEXT,__fvmlib_init0</code></p><a name="//apple_ref/doc/uid/TP30000823-TPXREF133" title=".fvmlib_init1"></a><h5>.fvmlib_init1</h5><p>This is equivalent to <code>.section __TEXT,__fvmlib_init1</code></p><p>The <code>.fvmlib_init0</code> and <code>.fvmlib_init1</code> sections are used by the obsolete fixed virtual memory shared library initialization. The compiler doesn't place anything in these sections, as they are reserved exclusively for the obsolete shared library mechanism.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF134" title=".symbol_stub"></a><h5>.symbol_stub</h5><p>This section is of type <code>symbol_stubs</code> and has the attribute <code>pure_instructions</code>. The compiler places symbol stubs in this section for undefined functions that are called in the module. This is the standard symbol stub section for nonposition-independent code.</p><p>Symbol stubs are implemented differently on PPC (and PPC64) and on IA-32. The following sections describe each implementation.</p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_5" title="PowerPC .symbol_stub"></a><h5>PowerPC .symbol_stub</h5><p>On PowerPC (PPC and PPC64), <code>.symbol_stub</code> is equivalent to <code>.section __TEXT,__symbol_stub1, symbol_stubs, pure_instructions, 20</code>.</p><p>The standard symbol stub on PPC and PPC64 is 20 bytes and has an alignment of 4 bytes (.<code>align 2</code>). For example, a stub for the symbol <code>_foo</code> would be (using a lazy symbol pointer <code>L_foo$lazy_ptr</code>):</p><div class="codesample"><table><tr><td scope="row"><pre>        .symbol_stub<span></span></pre></td></tr><tr><td scope="row"><pre>L_foo$stub:<span></span></pre></td></tr><tr><td scope="row"><pre>        .indirect_symbol _foo<span></span></pre></td></tr><tr><td scope="row"><pre>        lis     r11,ha16(L_foo$lazy_ptr)<span></span></pre></td></tr><tr><td scope="row"><pre>        lwz     r12,lo16(L_foo$lazy_ptr)(r11)<span></span></pre></td></tr><tr><td scope="row"><pre>        mtctr   r12<span></span></pre></td></tr><tr><td scope="row"><pre>        addi    r11,r11,lo16(L_foo$lazy_ptr)<span></span></pre></td></tr><tr><td scope="row"><pre>        bctr<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        .lazy_symbol_pointer<span></span></pre></td></tr><tr><td scope="row"><pre>L_foo$lazy_ptr:<span></span></pre></td></tr><tr><td scope="row"><pre>        .indirect_symbol _foo<span></span></pre></td></tr><tr><td scope="row"><pre>        .long   dyld_stub_binding_helper<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-SW2" title="IA-32 .symbol_stub"></a><h5>IA-32 .symbol_stub</h5><p>On IA-32, <code>.symbol_stub</code> is equivalent to <code>.section __IMPORT,__jump_table, symbol_stubs, self_modifying_code + pure_instructions, 5</code>.</p><p>On IA-32 this section has an additional attribute, <code>self_modifying_code</code>, which specifies that the code in this section can be modified at runtime. At runtime, the dynamic linker uses this feature in IA-32 stubs to change the branch instruction in the stub so that it jumps to the real symbol instead of their initial target, the dynamic linker itself. This is an example of a symbol stub of the <code>_foo</code> symbol:</p><div class="codesample"><table><tr><td scope="row"><pre>        .section __IMPORT,__jump_table,symbol_stubs,self_modifying_code+pure_instructions,5<span></span></pre></td></tr><tr><td scope="row"><pre>L_foo$stub:<span></span></pre></td></tr><tr><td scope="row"><pre>        .indirect_symbol _foo<span></span></pre></td></tr><tr><td scope="row"><pre>        hlt ; hlt ; hlt ; hlt ; hlt<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF135" title=".picsymbol_stub"></a><h5>.picsymbol_stub</h5><p>In PowerPC, this directive translates to <code>.section __TEXT, __picsymbolstub1, symbol_stubs, pure_instructions, NBYTES</code>.</p><p>This section is of type <code>symbol_stubs</code> and has the attribute <code>pure_instructions</code>.  The compiler places symbol stubs in this section for undefined functions that are called in the module.  This is the standard symbol stub section for position-independent code.  The value of <code>NBYTES</code> is dependent on the target architecture.</p><p>The standard position-independent symbol stub for the PowerPC is 36 bytes and has an alignment of 4 bytes (.<code>align 2</code>). <code></code>For example, a stub for the<code></code>symbol <code>_foo</code> would be (using a lazy symbol pointer <code>L_foo$lazy_ptr</code>):</p><div class="codesample"><table><tr><td scope="row"><pre>    .picsymbol_stub<span></span></pre></td></tr><tr><td scope="row"><pre> L_foo$stub:<span></span></pre></td></tr><tr><td scope="row"><pre>    .indirect_symbol _foo<span></span></pre></td></tr><tr><td scope="row"><pre>    mflr r0<span></span></pre></td></tr><tr><td scope="row"><pre>    bcl 20,31,L0$_foo<span></span></pre></td></tr><tr><td scope="row"><pre> L0$_foo:<span></span></pre></td></tr><tr><td scope="row"><pre>    mflr r11<span></span></pre></td></tr><tr><td scope="row"><pre>    addis r11,r11,ha16(L_foo$lazy_ptr - L0$_foo)<span></span></pre></td></tr><tr><td scope="row"><pre>    mtlr r0<span></span></pre></td></tr><tr><td scope="row"><pre>    lwz r12,lo16(L_foo$lazy_ptr - L0$_foo)(r11)<span></span></pre></td></tr><tr><td scope="row"><pre>    mtctr r12<span></span></pre></td></tr><tr><td scope="row"><pre>    addi r11,r11,lo16(L_foo$lazy_ptr - L0$_foo)<span></span></pre></td></tr><tr><td scope="row"><pre>    bctr<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF136" title="Designating Sections in the __DATA Segment"></a><h4>Designating Sections in the __DATA Segment</h4><p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_40"></a>These directives cause the assembler to begin assembling into the indicated section of the <code>__DATA</code> segment:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Directive</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Section</p></th></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_41"></a>.data</code></p></td><td ><p>(<code>__DATA,__data</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_42"></a>.static_data</code></p></td><td ><p>(<code>__DATA,__static_data</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_43"></a>.non_lazy_symbol_pointer</code></p></td><td ><p>(<code>__DATA,__nl_symbol_pointer</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_44"></a>.lazy_symbol_pointer</code></p></td><td ><p>(<code>__DATA,__la_symbol_pointer</code>)</p></td></tr><tr><td  scope="row"><p><code>.dyld</code></p></td><td ><p>(<code>__DATA,__dyld</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_45"></a>.mod_init_func</code></p></td><td ><p>(<code>__DATA,__mod_init_func</code>)</p></td></tr><tr><td  scope="row"><p><code><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_46"></a>.mod_term_func</code></p></td><td ><p>(<code>__DATA,__mod_term_func</code>)</p></td></tr><tr><td  scope="row"><p><code>.const_data</code></p></td><td ><p>(<code>__DATA,__const</code>)</p></td></tr></table></div><p>The following sections describe the sections in the <code>__DATA</code> segment and the types of information that should be assembled into each of them.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF137" title=".data"></a><h5>.data</h5><p>This is equivalent to    .<code>section __DATA, __data</code></p><p>The compiler places all non-<code>const</code> initialized data (even initialized to zero) in this section.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF138" title=".static_data"></a><h5>.static_data</h5><p>This is equivalent to .<code>section __DATA, __static_data</code></p><p>This is not currently used by the compiler.  It was added to the assembler so that the compiler could separate global and static data symbol into separate sections if it wished to.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF144" title=".const_data"></a><h5>.const_data</h5><p>This is equivalent to <code>.section __DATA, __const, regular</code>.</p><p>This section is of type <code>regular</code> and has no attributes. This section is used when dynamic code is being compiled for <code>const</code> data that must be initialized.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF140" title=".lazy_symbol_ptr"></a><h5>.lazy_symbol_ptr</h5><p>This is equivalent to    .<code>section __DATA, __la_symbol_ptr,lazy_symbol_pointers</code></p><p>This section is of type <code>lazy_symbol_pointers</code> and has no attributes.  The compiler places a lazy symbol pointer in this section for each symbol stub it creates for undefined functions that are called in the module.   (See <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF134">“.symbol_stub”</a></span> for examples.) This section has an alignment of 4 bytes (.<code>align 2</code>).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF139" title=".non_lazy_symbol_ptr"></a><h5>.non_lazy_symbol_ptr</h5><p>This is equivalent to   <code> .section __DATA, __nl_symbol_ptr,non_lazy_symbol_pointers</code></p><p>This section is of type <code>non_lazy_symbol_pointers</code> and has no attributes. The compiler places a non-lazy symbol pointer in this section for each undefined symbol referenced by the module (except for function calls). This section has an alignment of 4 bytes (.<code>align 2</code>).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF142" title=".mod_init_func"></a><h5>.mod_init_func</h5><p>This is equivalent to    <code>.section __DATA, __mod_init_func, mod_init_funcs</code></p><p>This section is of type<code> mod_init_funcs </code>and has no attributes.  The C++ compiler places a pointer to a function in this section for each function it creates to call the constructors (if the module has them).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF143" title=".mod_term_func"></a><h5>.mod_term_func</h5><p>This is equivalent to    <code>.section __DATA, __mod_term_func, mod_term_funcs</code></p><p>This section is of type<code> mod_term_funcs </code>and has no attributes.  The C++ compiler places a pointer to a function in this section for each function it creates to call the destructors (if the module has them).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF141" title=".dyld"></a><h5>.dyld</h5><p>This is equivalent to    <code>.section __DATA, __dyld,regular</code></p><p>This section is of type <code>regular</code> and has no attributes.  This section is used by the dynamic link editor.  The compiler doesn’t place anything in this section, as it is reserved exclusively for the dynamic link editor.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF145" title="Designating Sections in the __OBJC Segment"></a><h4>Designating Sections in the __OBJC Segment</h4><p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_47"></a>These directives cause the assembler to begin assembling into the indicated section of the <code>__OBJC</code> segment (or the <code>__TEXT</code> segment):</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Directive</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Section</p></th></tr><tr><td  scope="row"><p><code>.objc_class</code></p></td><td ><p>(<code>__OBJC,__class</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_meta_class</code></p></td><td ><p>(<code>__OBJC,__meta_class</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_cat_cls_meth</code></p></td><td ><p>(<code>__OBJC,__cat_cls_meth</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_cat_inst_meth</code></p></td><td ><p>(<code>__OBJC,__cat_inst_meth</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_protocol</code></p></td><td ><p>(<code>__OBJC,__protocol</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_string_object</code></p></td><td ><p>(<code>__OBJC,__string_object</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_cls_meth</code></p></td><td ><p>(<code>__OBJC,__cls_meth</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_inst_meth</code></p></td><td ><p>(<code>__OBJC,__inst_meth</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_cls_refs</code></p></td><td ><p>(<code>__OBJC,__cls_refs</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_message_refs</code></p></td><td ><p>(<code>__OBJC,__message_refs</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_symbols</code></p></td><td ><p>(<code>__OBJC,__symbols</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_category</code></p></td><td ><p>(<code>__OBJC,__category</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_class_vars</code></p></td><td ><p>(<code>__OBJC,__class_vars</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_instance_vars</code></p></td><td ><p>(<code>__OBJC,__instance_vars</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_module_info</code></p></td><td ><p>(<code>__OBJC,__module_info</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_class_names</code></p></td><td ><p>(<code>__TEXT,__cstring</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_meth_var_types</code></p></td><td ><p>(<code>__TEXT,__cstring</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_meth_var_names</code></p></td><td ><p>(<code>__TEXT,__cstring</code>)</p></td></tr><tr><td  scope="row"><p><code>.objc_selector_strs</code></p></td><td ><p>(<code>__OBJC,__selector_strs</code>)</p></td></tr></table></div><p>All sections in the <code>__OBJC</code> segment, including old sections that are no longer used and future sections that may be added, are exclusively reserved for the Objective-C compiler’s use.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF146" title="Directives for Moving the Location Counter"></a><h2>Directives for Moving the Location Counter</h2><p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_48"></a>This section describes directives that advance the location counter to a location higher in memory.  They have the additional effect of setting the intervening memory to some value.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF147" title=".align"></a><h3>.align</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.align    align_expression [ , 1byte_fill_expression [,max_bytes_to_fill]]<span></span></pre></td></tr><tr><td scope="row"><pre>.p2align  align_expression [ , 1byte_fill_expression [,max_bytes_to_fill]]<span></span></pre></td></tr><tr><td scope="row"><pre>.p2alignw align_expression [ , 2byte_fill_expression [,max_bytes_to_fill]]<span></span></pre></td></tr><tr><td scope="row"><pre>.p2alignl align_expression [ , 4byte_fill_expression [,max_bytes_to_fill]]<span></span></pre></td></tr><tr><td scope="row"><pre>.align32  align_expression [ , 4byte_fill_expression [,max_bytes_to_fill]]<span></span></pre></td></tr></table></div><p>The align directives advance the location counter to the next <em>align_expression</em> boundary, if it isn't currently on such a boundary. <em>align_expression</em> is a power of 2 between 0 and 15 (for example, the argument of <code>.align 3</code> means 2 ^ 3 (8)–byte alignment). The fill expression, if specified, must be absolute. The space between the current value of the location counter and the desired value is filled with the fill expression (or with zeros, if <em>fill_expression</em> isn't specified).  The space between the current value of the location counter to the alignment of the fill expression width is filled with zeros first.  Then the fill expression is used until the desired alignment is reached. <em>max_bytes_to_fill</em> is the maximum number of bytes that are allowed to be filled for the align directive.  If the align directive can't be done in <em>max_bytes_to_fill</em> or less, it has no effect. If there is no <em>fill_expression</em> and the section has the <code>pure_instructions</code> attribute, or contains some instructions, the <code>nop</code> opcode is used as the fill expression.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_15" title="Note"></a><p><strong>Note:</strong>&nbsp;The assembler enforces no alignment for any bytes created in the object file (data or machine instructions).  You must supply the desired alignment before any directive or instruction.</p></div><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.align 3<span></span></pre></td></tr><tr><td scope="row"><pre>one:    .double 0r1.0<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF148" title=".org"></a><h3>.org</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.org  expression [ , fill_expression ]<span></span></pre></td></tr></table></div><p>The <code>.org</code> directive sets the location counter to <em>expression</em>, which must be a currently known absolute expression.  This directive can only move the location counter up in address.  The fill expression, if specified, must be absolute.  The space between the current value of the location counter and the desired value is filled with the low-order byte of the fill expression (or with zeros, if <em>fill_expression</em> isn’t specified).</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_16" title="Note"></a><p><strong>Note:</strong>&nbsp;If the output file is later link-edited, the <code>.org</code> directive isn’t preserved.</p></div><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.org 0x100,0xff<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF149" title="Directives for Generating Data"></a><h2>Directives for Generating Data</h2><p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_49"></a>The directives described in this section generate data. (Unless specified otherwise, the data goes into the current section.) In some respects, they are similar to the directives explained in <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF146">“Directives for Moving the Location Counter”</a></span>—they do have the effect of moving the location counter—but this isn’t their primary purpose.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF150" title=".ascii and .asciz"></a><h3>.ascii and .asciz</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.ascii  [ "string" ] [ , "string" ] ...<span></span></pre></td></tr><tr><td scope="row"><pre>.asciz  [ "string" ] [ , "string" ] ...<span></span></pre></td></tr></table></div><p>These directives translate character strings into their ASCII equivalents for use in the source program.  Each directive takes zero or more comma-separated strings surrounded by quotation marks.  Each string can contain any character or escape sequence that can appear in a character string; the newline character cannot appear, but it can be represented by the escape sequence <code>\012</code> or <code>\n</code>: </p><ul class="spaceabove"><li class="li"><p>The <code>.ascii</code> directive generates a sequence of ASCII characters.  </p></li><li class="li"><p>The <code>.asciz</code> directive is similar to the <code>.ascii</code> directive, except that it automatically terminates the sequence of ASCII characters with the null character (<code>\0</code>), necessary when generating strings usable by C programs.</p></li></ul><p>If no strings are specified, the directive is ignored.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.ascii "Can't open the DSP.\0"<span></span></pre></td></tr><tr><td scope="row"><pre>.asciz "%s has changes.\tSave them?"<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF151" title=".byte, .short, .long, and .quad"></a><h3>.byte, .short, .long, and .quad</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.byte  [ expression ] [ , expression ] ...<span></span></pre></td></tr><tr><td scope="row"><pre>.short  [ expression ] [ , expression ] ...<span></span></pre></td></tr><tr><td scope="row"><pre>.long  [ expression ] [ , expression ] ...<span></span></pre></td></tr><tr><td scope="row"><pre>.quad [ expression ] [ , expression ] ...<span></span></pre></td></tr></table></div><p>These directives reserve storage locations in the current section and initialize them with specified values.  Each directive takes zero or more comma-separated absolute expressions and generates a sequence of bytes for each expression.  The expressions are truncated to the size generated by the directive:</p><ul class="spaceabove"><li class="li"><p><code>.byte</code> generates 1 byte per expression.</p></li><li class="li"><p><code>.short</code> generates 2 bytes per expression.</p></li><li class="li"><p><code>.long</code> generates 4 bytes per expression.</p></li><li class="li"><p><code>.quad</code> generates 8 bytes per expression.</p></li></ul><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.byte  74,0112,0x4A,0x4a,'J                             | the same byte<span></span></pre></td></tr><tr><td scope="row"><pre>.short 64206,0175316,0xface                             | the same short<span></span></pre></td></tr><tr><td scope="row"><pre>.long  -1234,037777775456,0xfffffb2e                    | the same long<span></span></pre></td></tr><tr><td scope="row"><pre>.quad  -1234,01777777777777777775456,0xfffffffffffffb2e | the same quad<span></span></pre></td></tr></table></div><div class="notebox"><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_17" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>.quad</code> directive doesn’t handle a relocatable expression of the form <code>.quad foo - bar</code> when the values of <code>foo</code> or <code>bar</code> are more than 32 bits.</p></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF155" title=".comm"></a><h3>.comm</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.comm  name, size<span></span></pre></td></tr></table></div><p>The <code>.comm</code> directive creates a common symbol named <em>name</em> of <em>size</em> bytes.  If the symbol isn’t defined elsewhere, its type is “common.”  </p><p>The link editor allocates storage for common symbols that aren’t otherwise defined.  Enough space is left after the symbol to hold the maximum size (in bytes) seen for each symbol in the (<code>__DATA,__common</code>) section.  </p><p>The link editor aligns each such symbol (based on its size aligned to the next greater power of two) to the maximum alignment of the (<code>__DATA,__common</code>) section.  For information about how to change the maximum alignment, see the description of <code>-sectalign</code> in the <code>ld(1)</code> Mac OS X man page.  </p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.comm _global_uninitialized,4<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF153" title=".fill"></a><h3>.fill</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.fill repeat_expression , fill_size , fill_expression<span></span></pre></td></tr></table></div><p>The <code>.fill</code> directive advances the location counter by <em>repeat_expression</em> times <em>fill_size</em> bytes:</p><ul class="spaceabove"><li class="li"><p><em>fill_size</em> is in bytes, and must have the value <code>1</code>, <code>2</code>, or <code>4</code></p></li><li class="li"><p><em>repeat_expression</em> must be an absolute expression greater than zero</p></li><li class="li"><p><em>fill_expression</em> may be any absolute expression (it gets truncated to the fill size)</p></li></ul><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.fill 69,4,0xfeadface   | put out 69 0xfeadface’s<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF156" title=".lcomm"></a><h3>.lcomm</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.lcomm  name, size [ , align ]<span></span></pre></td></tr></table></div><p>The <code>.lcomm</code> directive creates a symbol named <em>name</em> of <em>size</em> bytes in the (<code>__DATA,__bss</code>) section.  It contains zeros at execution.  The name isn’t declared as global, and hence is unknown outside the object module.</p><p>The optional <em>align</em> expression, if specified, causes the location counter to be rounded up to an <em>align</em> power-of-two boundary before assigning the location counter to the value of <em>name</em>.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.lcomm abyte,1     | or:  .lcomm abyte,1,0<span></span></pre></td></tr><tr><td scope="row"><pre>.lcomm padding,7<span></span></pre></td></tr><tr><td scope="row"><pre>.lcomm adouble,8   | or:  .lcomm adouble,8,3<span></span></pre></td></tr></table></div><p>These are the same as:</p><div class="codesample"><table><tr><td scope="row"><pre>.zerofill __DATA,__bss,abyte,1<span></span></pre></td></tr><tr><td scope="row"><pre>.lcomm __DATA,__bss,padding,7<span></span></pre></td></tr><tr><td scope="row"><pre>.lcomm __DATA,__bss,adouble,8<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF152" title=".single  and .double"></a><h3>.single  and .double</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.single  [ number ] [ , number ] ...<span></span></pre></td></tr><tr><td scope="row"><pre>.double  [ number ] [ , number ] ...<span></span></pre></td></tr></table></div><p>These directives reserve storage locations in the current section and initialize them with specified values.  Each directive takes zero or more comma-separated decimal floating-point numbers:</p><ul class="spaceabove"><li class="li"><p><code>.single</code> takes IEEE single-precision floating point numbers. It reserves 4 bytes for each number and initializes them to the value of the corresponding number.</p></li><li class="li"><p><code>.double</code> takes IEEE double-precision floating point numbers. It reserves 8 bytes for each number and initializes them to the value of the corresponding number.</p></li></ul><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.single 3.33333333333333310000e-01<span></span></pre></td></tr><tr><td scope="row"><pre>.double 0.00000000000000000000e+00<span></span></pre></td></tr><tr><td scope="row"><pre>.single +Infinity<span></span></pre></td></tr><tr><td scope="row"><pre>.double -Infinity<span></span></pre></td></tr><tr><td scope="row"><pre>.single NaN<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF154" title=".space"></a><h3>.space</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.space  num_bytes [ , fill_expression ]<span></span></pre></td></tr></table></div><p>The <code>.space</code> directive advances the location counter by <em>num_bytes</em>, where <em>num_bytes</em> is an absolute expression greater than zero<code></code>.  The fill expression, if specified, must be absolute.  The space between the current value of the location counter and the desired value is filled with the low-order byte of the fill expression (or with zeros, if <em>fill_expression</em> isn’t specified).</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>ten_ones:<span></span></pre></td></tr><tr><td scope="row"><pre>          .space 10,1<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF157" title="Directives for Dealing With Symbols"></a><h2>Directives for Dealing With Symbols</h2><p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_50"></a>This section describes directives that have an effect on symbols and the symbol table.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF158" title=".globl"></a><h3>.globl</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.globl  symbol_name<span></span></pre></td></tr></table></div><p>The <code>.globl</code> directive makes <em>symbol_name</em> external.  If <em>symbol_name</em> is otherwise defined (by <code>.set</code> or by appearance as a label), it acts within the assembly exactly as if the <code>.globl</code> statement was not given; however, the link editor may be used to combine this object module with other modules referring to this symbol.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.globl abs<span></span></pre></td></tr><tr><td scope="row"><pre>      .set abs,1<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>      .globl var<span></span></pre></td></tr><tr><td scope="row"><pre>var:  .long 2<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF159" title=".indirect_symbol"></a><h3>.indirect_symbol</h3><p>SYNOPSIS:</p><div class="codesample"><table><tr><td scope="row"><pre>.indirect_symbol symbol_name<span></span></pre></td></tr></table></div><p>The<code> .indirect_symbol </code>directive creates an indirect symbol with<code></code><em>symbol_name</em> and associates the current location with the indirect symbol.  An indirect symbol must be defined immediately before each item in a <code>symbol_stub, lazy_symbol_pointers, </code>and<code> non_lazy_symbol_pointers </code>section.  The static and dynamic linkers use<code></code><em>symbol_name</em> to identify the symbol associated with the item following the directive.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF160" title=".reference"></a><h3>.reference</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.reference  symbol_name<span></span></pre></td></tr></table></div><p>The <code>.reference</code> directive causes <em>symbol_name</em> to be an undefined symbol present in the output file’s symbol table.  This is useful in referencing a symbol without generating any bytes to do it (used, for example, by the Objective-C runtime system to reference superclass objects).</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.reference  .objc_class_name_Object<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF161" title=".weak_reference"></a><h3>.weak_reference</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.weak_reference  symbol_name<span></span></pre></td></tr></table></div><p>The <code>.weak_reference</code> directive causes <em>symbol_name</em> to be a weak undefined symbol present in the output file’s symbol table. This is used by the compiler when referencing a symbol with the <code>weak_import</code> attribute.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.weak_reference  .objc_class_name_Object<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF162" title=".lazy_reference"></a><h3>.lazy_reference</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.lazy_reference  symbol_name<span></span></pre></td></tr></table></div><p>The <code>.lazy_reference</code> directive causes <em>symbol_name</em> to be a lazy undefined symbol present in the output file’s symbol table.  This is useful when referencing a symbol without generating any bytes to do it (used, for example, by the Objective-C runtime system with the dynamic linker to reference superclass objects but allow the runtime to bind them on first use).</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.lazy_reference  .objc_class_name_Object<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF163" title=".weak_definition"></a><h3>.weak_definition</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.weak_definition symbol_name<span></span></pre></td></tr></table></div><p>The <code>.weak_definition</code> directive causes <em>symbol_name</em> to be a weak definition. <em>symbol_name</em> can be defined only in a <code>coalesced</code> section. This is used by the C++ compiler to support template instantiation.  The compiler uses a <code>coalesced</code> section with the <code>.weak_definition</code> directive for implicitly instantiated templates. And it uses a regular section (<code>.text, .data</code>, a so on) for an explicit template instantiation.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF164" title=".private_extern"></a><h3>.private_extern</h3><p>SYNOPSIS:</p><div class="codesample"><table><tr><td scope="row"><pre>.private_extern symbol_name<span></span></pre></td></tr></table></div><p>The <code>.private_extern</code> directive makes <em>symbol_name</em> a private external symbol.  When the link editor combines this module with other modules (and the -<code>keep_private_externs</code> command-line option is not specified) the symbol turns it from global to static. If both <code>.private_extern</code> and <code>.globl</code> assembler directives are used on the same symbol, the effect is as if only the <code>.private_extern</code> directive was used.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF165" title=".stabs, .stabn, and .stabd"></a><h3>.stabs, .stabn, and .stabd</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.stabs  n_name , n_type , n_other , n_desc , n_value<span></span></pre></td></tr><tr><td scope="row"><pre>.stabn  n_type , n_other , n_desc , n_value<span></span></pre></td></tr><tr><td scope="row"><pre>.stabd  n_type , n_other , n_desc<span></span></pre></td></tr></table></div><p>These directives are used to place symbols in the symbol table for the symbolic debugger (a “stab” is a symbol table entry).  </p><ul class="spaceabove"><li class="li"><p><code>.stabs</code> specifies all the fields in a symbol table entry. <em>n_name</em> is the name of a symbol; if the symbol name is null, the <code>.stabn</code> directive may be used instead.</p></li><li class="li"><p><code>.stabn</code> is similar to<code> .stabs</code>, except that it uses a NULL (<code>""</code>) name.  </p></li><li class="li"><p><code>.stabd</code> is similar to <code>.stabn</code>, except that it uses the value of the location counter (<code>.</code>) as the <em>n_value</em> field.</p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_18" title="Note"></a><p><strong>Note:</strong>&nbsp;The <em>n_other</em> field of a <code>.stabs</code> directive is ignored, and the value of the <em>n_sect</em> field (what was the <em>n_other</em> field) is set based on the symbol used for the <em>n_value</em> parameter.</p></div><p>In each case, the <em>n_type</em> field is assumed to contain a 4.3BSD-like value for the N_TYPE bits (defined in <code>mach-o/stab.h</code>).  For <code>.stabs</code> and <code>.stabn</code>, the <code>n_sect</code> field of the Mach-O file’s <code>nlist</code> is set to the section number of the symbol for the specified <em>n_value</em> parameter.  For <code>.stabd</code>, the <code>n_sect</code> field is set to the current section number for the location counter.  The <code>nlist</code> structure is defined in <code>mach-o/nlist.h</code>.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.stabs  "hello.c",100,0,0,Ltext<span></span></pre></td></tr><tr><td scope="row"><pre>.stabn  192,0,0,LBB2<span></span></pre></td></tr><tr><td scope="row"><pre>.stabd  68,0,15<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF166" title=".desc"></a><h3>.desc</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.desc  symbol_name , absolute_expression<span></span></pre></td></tr></table></div><p>The <code>.desc</code> directive sets the <code>n_desc</code> field of the specified symbol to<em> absolute_expression</em>.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.desc _environ, 0x10 ; set the REFERENCED_DYNAMICALLY bit<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF167" title=".set"></a><h3>.set</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.set  symbol_name , absolute_expression<span></span></pre></td></tr></table></div><p>The <code>.set</code> directive creates the symbol <em>symbol_name</em> and sets its value to <em>absolute_expression</em>.  This is the same as using <em>symbol_name</em><code>=</code><em>absolute_expression</em>.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.set one,1<span></span></pre></td></tr><tr><td scope="row"><pre>two = 2<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF168" title=".lsym"></a><h3>.lsym</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.lsym  symbol_name , expression<span></span></pre></td></tr></table></div><p>A unique and otherwise unreferenceable symbol of the <em>symbol_name</em>, <em>expression</em> pair is created in the symbol table. The symbol created is a static symbol with a type of absolute (<code>N_ABS</code>). Some Fortran 77 compilers use this mechanism to communicate with the debugger.</p><a name="//apple_ref/doc/uid/TP30000823-CJBJAAGI" title="Directives for Dead-Code Stripping"></a><h2>Directives for Dead-Code Stripping</h2><p>Dead-code stripping is the process by which the static link editor removes unused code and data blocks from executable files. This process helps reduce the overall size of executables, which in turn improves performance by reducing the memory footprint of the executable. It also allows programs to link successfully in the situation where unused code refers to an undefined symbol, something that would normally result in a link error. For more information on dead-code stripping, see <span class="content_text"><!--a target="_top" -->"Linking"<!--/a--></span> in <em><!--a target="_top" -->Xcode 2.1 User Guide<!--/a--></em>.</p><p>The following sections describe the dead-code stripping directives.</p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_6" title=".subsections_via_symbols"></a><h3>.subsections_via_symbols</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.subsections_via_symbols<span></span></pre></td></tr></table></div><p>The <code>.subsections_via_symbols</code> directive tells the static link editor that the sections of the object file can be divided into individual blocks. These blocks are then stripped if they are not used by other code. This directive applies to all section declarations in the assembly file and should be placed outside any section declarations, as shown here:</p><div class="codesample"><table><tr><td scope="row"><pre>.subsections_via_symbols<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>; Section declarations...<span></span></pre></td></tr></table></div><p>When using this directive, ensure that each symbol in the section is at the beginning of a block of code. Implicit dependencies between blocks of code may result in the removal of needed code from the executable. For example, the following section contains three symbols, but execution of the code at <code>_plus_three</code> ends at the <code>blr</code> statement at the bottom of the code block:</p><div class="codesample"><table><tr><td scope="row"><pre>.text<span></span></pre></td></tr><tr><td scope="row"><pre> .globl _plus_three<span></span></pre></td></tr><tr><td scope="row"><pre> _plus_three:<span></span></pre></td></tr><tr><td scope="row"><pre> addi r3, r3, 1<span></span></pre></td></tr><tr><td scope="row"><pre> .globl _plus_two<span></span></pre></td></tr><tr><td scope="row"><pre> _plus_two:<span></span></pre></td></tr><tr><td scope="row"><pre> addi r3, r3, 1<span></span></pre></td></tr><tr><td scope="row"><pre> .globl _plus_one<span></span></pre></td></tr><tr><td scope="row"><pre> _plus_one:<span></span></pre></td></tr><tr><td scope="row"><pre> addi r3, r3, 1<span></span></pre></td></tr><tr><td scope="row"><pre> blr<span></span></pre></td></tr></table></div><p>If you use the <code>.subsections_via_symbols</code> directive on this code and <code>_plus_two</code> and <code>_plus_three</code> are not called by any other code, the static link editor would not add <code>_plus_two</code> and <code>_plus_one</code> to the executable. In that case, <code>_plus_three</code> would not return the correct value because part of its implementation would be missing. In addition, if <code>_plus_one</code> is dead-stripped, the program may crash when <code>_plus_three</code> is executed, as it would continue executing into the following block.</p><a name="//apple_ref/doc/uid/TP30000823-DontLinkElementID_7" title=".no_dead_strip"></a><h3>.no_dead_strip</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.no_dead_strip symbol_name<span></span></pre></td></tr></table></div><p>The <code>.no_dead_strip</code> directive tells the assembler that the symbol specified by <em>symbol_name</em> must not be dead-stripped. For example, the following code prevents <code>_my_version_string</code> from being dead-stripped:</p><div class="codesample"><table><tr><td scope="row"><pre>.no_dead_strip _my_version_string<span></span></pre></td></tr><tr><td scope="row"><pre>.cstring<span></span></pre></td></tr><tr><td scope="row"><pre>_my_version_string:<span></span></pre></td></tr><tr><td scope="row"><pre>.ascii "Version 1.1"<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF169" title="Miscellaneous Directives"></a><h2>Miscellaneous Directives</h2><p>This section describes additional directives that don’t fit into any of the previous sections.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF170" title=".abort"></a><h3>.abort</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.abort  [  "abort_string" ]<span></span></pre></td></tr></table></div><p>The <code>.abort</code> directive causes the assembler to ignore further input and quit processing.  No files are created.  The directive could be used, for example, in a pipe-interconnected version of a compiler—the first major syntax error would cause the compiler to issue this directive, saving unnecessary work in assembling code that would have to be discarded anyway.</p><p>The optional <code></code><em>abort_string</em><code></code> is printed as part of the error message when the <code>.abort</code> directive is encountered.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>#ifndef VAR<span></span></pre></td></tr><tr><td scope="row"><pre>    .abort "You must define VAR to assemble this file."<span></span></pre></td></tr><tr><td scope="row"><pre>#endif<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF175" title=".abs"></a><h3>.abs</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.abs  symbol_name , expression<span></span></pre></td></tr></table></div><p>This directive sets the value of <em>symbol_name</em> to <code>1</code> if <em>expression</em> is an absolute expression; otherwise, it sets the value to zero<code></code>.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.macro var<span></span></pre></td></tr><tr><td scope="row"><pre>.abs is_abs,$0<span></span></pre></td></tr><tr><td scope="row"><pre>.if is_abs==1<span></span></pre></td></tr><tr><td scope="row"><pre>.abort "must be absolute"<span></span></pre></td></tr><tr><td scope="row"><pre>.endif<span></span></pre></td></tr><tr><td scope="row"><pre>.endmacro<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF176" title=".dump and .load"></a><h3>.dump and .load</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.dump filename<span></span></pre></td></tr><tr><td scope="row"><pre>.load filename<span></span></pre></td></tr></table></div><p>These directives let you dump and load the absolute symbols and macro definitions for faster loading and faster assembly.</p><p>These work like this:</p><div class="codesample"><table><tr><td scope="row"><pre>.include "big_file_1"<span></span></pre></td></tr><tr><td scope="row"><pre>.include "big_file_2"<span></span></pre></td></tr><tr><td scope="row"><pre>.include "big_file_3"<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre>.include "big_file_N"<span></span></pre></td></tr><tr><td scope="row"><pre>.dump    "symbols.dump"<span></span></pre></td></tr></table></div><p>The <code>.dump</code> directive writes out all the N_ABS symbols and macros.  You can later use the <code>.load</code> directive to load all the N_ABS symbols and macros faster than you could with <code>.include</code>:</p><div class="codesample"><table><tr><td scope="row"><pre>.load "symbols.dump"<span></span></pre></td></tr></table></div><p>One useful side effect of loading symbols this way is that they aren’t written out to the object file.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF171" title=".file and .line"></a><h3>.file and .line</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.file  file_name<span></span></pre></td></tr><tr><td scope="row"><pre>.line  line_number<span></span></pre></td></tr></table></div><p>The <code>.file</code> directive causes the assembler to report error messages as if it were processing the file <em>file_name</em>.</p><p>The <code>.line</code> directive causes the assembler to report error messages as if it were processing the line <em>line_number</em>.  The next line after the <code>.line</code> directive is assumed to be <em>line_number</em>.</p><p>The assembler turns C preprocessor comments of the form:</p><div class="codesample"><table><tr><td scope="row"><pre># line_number file_name level<span></span></pre></td></tr></table></div><p>into:</p><div class="codesample"><table><tr><td scope="row"><pre>.line line_number; .file file_name<span></span></pre></td></tr></table></div><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.line 6<span></span></pre></td></tr><tr><td scope="row"><pre>nop       | this is line 6<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF172" title=".if, .elseif, .else, and .endif"></a><h3>.if, .elseif, .else, and .endif</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.if expression<span></span></pre></td></tr><tr><td scope="row"><pre>.elseif expression<span></span></pre></td></tr><tr><td scope="row"><pre>.else<span></span></pre></td></tr><tr><td scope="row"><pre>.endif<span></span></pre></td></tr></table></div><p>These directives are used to delimit blocks of code that are to be assembled conditionally, depending on the value of an expression.  A block of conditional code may be nested within another block of conditional code.  <em>expression</em> must be an absolute expression.</p><p>For each <code>.if</code> directive:</p><ul class="spaceabove"><li class="li"><p>there must be a matching <code>.endif</code></p></li><li class="li"><p>there may be as many intervening <code>.elseif</code>’s as desired</p></li><li class="li"><p>there may be no more than one intervening <code>.else</code> before the tailing <code>.endif</code></p></li></ul><p>Labels or multiple statements must not be placed on the same line as any of these directives; otherwise, statements including these directives are not recognized and produce errors or incorrect conditional assembly.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.if a==1<span></span></pre></td></tr><tr><td scope="row"><pre>.long 1<span></span></pre></td></tr><tr><td scope="row"><pre>.elseif a==2<span></span></pre></td></tr><tr><td scope="row"><pre>.long 2<span></span></pre></td></tr><tr><td scope="row"><pre>.else<span></span></pre></td></tr><tr><td scope="row"><pre>.long 3<span></span></pre></td></tr><tr><td scope="row"><pre>.endif<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-TPXREF173" title=".include"></a><h3>.include</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.include "filename"<span></span></pre></td></tr></table></div><p>The <code>.include</code> directive causes the named file to be included at the current point in the assembly. The <code>-Idir</code> option to the assembler specifies alternative paths to be used in searching for the file if it isn’t found in the current directory.</p><p>EXAMPLE</p><div class="codesample"><table><tr><td scope="row"><pre>.include  "macros.h"<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP30000823-CJBHJJEC" title=".machine"></a><h3>.machine</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.machine arch_type<span></span></pre></td></tr></table></div><p>The <code>.machine</code> directive specifies the target architecture of the assembly file. <em>arch_type</em> can be any architecture type you can specify in the <code>-arch</code> option of the assembler driver. See <span class="content_text"><a href="../010-Using_the_Assembler/using_asm.html#//apple_ref/doc/uid/TP30000820-TPXREF103">“Assembler Options”</a></span> for more information.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF174" title=".macro, .endmacro, .macros_on, and .macros_off"></a><h3>.macro, .endmacro, .macros_on, and .macros_off</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.macro<span></span></pre></td></tr><tr><td scope="row"><pre>.endmacro<span></span></pre></td></tr><tr><td scope="row"><pre>.macros_on<span></span></pre></td></tr><tr><td scope="row"><pre>.macros_off<span></span></pre></td></tr></table></div><p>These directives allow you to define simple macros (once a macro is defined, however, you can’t redefine it).  For example:</p><div class="codesample"><table><tr><td scope="row"><pre>.macro  var<span></span></pre></td></tr><tr><td scope="row"><pre>instruction_1  $0,$1<span></span></pre></td></tr><tr><td scope="row"><pre>instruction_2  $2<span></span></pre></td></tr><tr><td scope="row"><pre> . . .<span></span></pre></td></tr><tr><td scope="row"><pre>instruction_N<span></span></pre></td></tr><tr><td scope="row"><pre>.long $n<span></span></pre></td></tr><tr><td scope="row"><pre>.endmacro<span></span></pre></td></tr></table></div><p><code>$</code><em>d</em> (where <em>d</em> is a single decimal digit, 0 through 9) represents each argument—there can be at most 10 arguments.  <code>$</code><em>n</em> is replaced by the actual number of arguments the macro is invoked with.</p><p>When you use a macro, arguments are separated by a comma (except inside matching parentheses—for example, <code>xxx(1,3,4),yyy</code> contains only two arguments).  You could use the macro defined above as follows:</p><div class="codesample"><table><tr><td scope="row"><pre>var  #0,@sp,4<span></span></pre></td></tr></table></div><p>This would be expanded to:</p><div class="codesample"><table><tr><td scope="row"><pre>instruction_1 #0,@sp<span></span></pre></td></tr><tr><td scope="row"><pre>instruction_2 4<span></span></pre></td></tr><tr><td scope="row"><pre> . . .<span></span></pre></td></tr><tr><td scope="row"><pre>instruction_N<span></span></pre></td></tr><tr><td scope="row"><pre>.long 3<span></span></pre></td></tr></table></div><p>The directives <code>.macros_on</code> and <code>.macros_off</code> allow macros to be written that override an instruction or directive while still using the instruction or directive.  For example:</p><div class="codesample"><table><tr><td scope="row"><pre>.macro .long<span></span></pre></td></tr><tr><td scope="row"><pre>.macros_off<span></span></pre></td></tr><tr><td scope="row"><pre>.long $0,$0<span></span></pre></td></tr><tr><td scope="row"><pre>.macros_on<span></span></pre></td></tr><tr><td scope="row"><pre>.endmacro<span></span></pre></td></tr></table></div><p>If you don’t specify an argument, the macro substitutes nothing (see <span class="content_text"><a href="asm_directives.html#//apple_ref/doc/uid/TP30000823-TPXREF175">“.abs”</a></span><code></code>).</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF178" title="PowerPC-Specific Directives"></a><h2>PowerPC-Specific Directives</h2><p>The following directives are specific to the PowerPC architecture.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF181" title=".flag_reg"></a><h3>.flag_reg</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.flag_reg reg_number<span></span></pre></td></tr></table></div><p>This causes the uses of the <em>reg_number</em> general register to get flagged as warnings. This is intended for use in macros.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF179" title=".greg"></a><h3>.greg</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.greg symbol_name, expression...<span></span></pre></td></tr></table></div><p>This directive sets <em>symbol_name</em> to <code>1</code> when <em>expression</em> is a general register or zero otherwise.  It is intended for use in macros.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF180" title=".no_ppc601"></a><h3>.no_ppc601</h3><p>SYNOPSIS</p><p>This causes PowerPC 601 instructions to be flagged as errors.  This is the same as if the <code>-no_ppc601</code> option is specified.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF182" title=".noflag_reg"></a><h3>.noflag_reg</h3><p>SYNOPSIS</p><div class="codesample"><table><tr><td scope="row"><pre>.noflag_reg reg_number<span></span></pre></td></tr></table></div><p>This turns off the flagging of the uses of the <em>reg_number</em> general register so they don’t get flagged as warnings.  This is intended for use in macros.</p><a name="//apple_ref/doc/uid/TP30000823-TPXREF185" title="Additional Processor-Specific Directives"></a><h2>Additional Processor-Specific Directives</h2><p>The following processor-specific directives are synonyms for other standard directives described earlier in this chapter; although they are listed here for completeness, their use isn’t recommended. Wherever possible, you should use the standard directive instead.</p><p>The following are i386-specific directives:</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>i386 Directive</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Standard Directive</p></th></tr><tr><td  scope="row"><p><code>.ffloat</code></p></td><td ><p><code>.single</code></p></td></tr><tr><td  scope="row"><p><code>.dfloat</code></p></td><td ><p><code>.double</code></p></td></tr><tr><td  scope="row"><p><code>.tfloat</code></p></td><td ><p><code>[expression]</code> ¨ 80-bit IEEE extended precision floating-point</p></td></tr><tr><td  scope="row"><p><code>.word</code></p></td><td ><p><code>.short</code></p></td></tr><tr><td  scope="row"><p><code>.value</code></p></td><td ><p><code>.short</code></p></td></tr><tr><td  scope="row"><p><code>.ident</code></p></td><td ><p>(ignored)</p></td></tr><tr><td  scope="row"><p><code>.def</code></p></td><td ><p>(ignored)</p></td></tr><tr><td  scope="row"><p><code>.optim</code></p></td><td ><p>(ignored)</p></td></tr><tr><td  scope="row"><p><code>.version</code></p></td><td ><p>(ignored)</p></td></tr><tr><td  scope="row"><p><code>.ln</code></p></td><td ><p>(ignored)</p></td></tr></table></div>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../030-Assembly_Language_Statements/asm_language.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../050-PowerPC_Addressing_Modes_and_Assembler_Instructions/ppc_instructions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-07<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/DeveloperTools/Reference/Assembler/040-Assembler_Directives/asm_directives.html%3Fid%3DTP30000851-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/DeveloperTools/Reference/Assembler/040-Assembler_Directives/asm_directives.html%3Fid%3DTP30000851-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/DeveloperTools/Reference/Assembler/040-Assembler_Directives/asm_directives.html%3Fid%3DTP30000851-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
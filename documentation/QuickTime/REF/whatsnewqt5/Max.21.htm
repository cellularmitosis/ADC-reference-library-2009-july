<HTML><head><script language="JavaScript" src="../../RM/frametest.js"></script><TITLE> The QTVR Flattener</TITLE><script language=javascript> window.parent.focus(); </script></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>What's New in QuickTime 5</I><P>| <A HREF="Max.20.htm">Previous</A> | <A HREF="Max.1.htm">Chapter Contents</A> | <A HREF="Max.htm">Chapter Top</A> | <A HREF="Max.22.htm">Next</A> |</P></DIV><!-- QTnavbar end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=93488"> </A>The QTVR Flattener</H1><P CLASS="T1.Text1"><A NAME="pgfId=93489"> </A>The QTVR Flattener is a movie export component that converts an existing QuickTime&nbsp;VR single node movie into a new movie that is optimized for the Web. The flattener re-orders media samples; and for panoramas the flattener creates a small preview of the panorama. When viewed on the Web, this preview appears after 5% to 10% of the movie data has been downloaded, allowing users to see a lower-resolution version of the panorama before the full resolution version is available. </P><P CLASS="T1.Text1"><A NAME="pgfId=93490"> </A>In QuickTime&nbsp;5, this QTVR Flattener has been enhanced. There is a new implementation of tile ranking that works with horizontal and cubic panos, and also with two-dimensional tiling. The result is that panoramas appear to come in faster. </P><P CLASS="T1.Text1"><A NAME="pgfId=93491"> </A>To use the QTVR Flattener from your application, you first create a <A NAME="marker=93492"> </A>QuickTime&nbsp;VR movie, then open the QTVR Flattener component and call the <TT CLASS="cv">MovieExportToFile</TT> routine, as shown in <A HREF="Max.21.htm#32608" CLASS="XRef">Listing&nbsp;4</A>.</P><P CLASS="L.Listing"><A NAME="pgfId=93497"> </A>Listing&nbsp;4 <A NAME="32608"> </A>Using the QTVR flattener </P><CODE CLASS="Cv.Code"><A NAME="pgfId=97101"> </A>ComponentDescription desc;<BR>Component flattener;<BR>ComponentInstance qtvrExport = nil;</code><br><CODE CLASS="Cv.Code"><A NAME="pgfId=97105"> </A>desc.componentType = MovieExportType;<BR>desc.componentSubType = MovieFileType;<BR>desc.componentManufacturer = kQTVRFlattenerManufacturer; <BR>desc.componentFlags = 0;<BR>desc.componentFlagsMask = 0;</code><br><CODE CLASS="Cv.Code"><A NAME="pgfId=97109"> </A>flattener = FindNextComponent(nil, &amp;desc);<BR>if (flattener) qtvrExport = OpenComponent (flattener);</code><br><CODE CLASS="Cv.Code"><A NAME="pgfId=97113"> </A>if (qtvrExport)<BR>&nbsp;&nbsp;&nbsp;&nbsp;MovieExportToFile (qtvrExport, &amp;myFileSpec, myQTVRMovie, nil, 0, 0);</code><br><P CLASS="T1.Text1"><A NAME="pgfId=93505"> </A>The code snippet shown in <A HREF="Max.21.htm#32608" CLASS="XRef">Listing&nbsp;4</A> creates a flattened movie file specified by the <TT CLASS="cv">myFileSpec</TT> parameter. If your QuickTime&nbsp;VR movie is a panorama, the flattened movie file includes a quarter size, blurred JPEG, compressed preview of the panorama image.</P><P CLASS="Note"><A NAME="pgfId=93506"> </A>The constants <TT CLASS="cv">MovieExportType</TT> and <TT CLASS="cv">MovieFileType</TT> used in <A HREF="Max.21.htm#32608" CLASS="XRef">Listing&nbsp;4</A> are defined in the header files <TT CLASS="cv">QuickTimeComponents.h</TT> and <TT CLASS="cv">Movies.h</TT>, respectively, and are defined as <TT CLASS="cv">'spit'</TT> and <TT CLASS="cv">'MooV'</TT>.  </P><P CLASS="Note"><A NAME="pgfId=93513"> </A>The various authoring atom type constants can be found in the 5.0 version of <TT CLASS="cv">QuickTimeVRFormat.h</TT>.  </P><H2 CLASS="H3.Heading3TOC"><A HREF="Max.22.htm#pgfId=93517" CLASS="Hypertext">Presenting Users with the QTVR Flattener Dialog Box</A></H2><H2 CLASS="H3.Heading3TOC"><A HREF="Max.23.htm#pgfId=93522" CLASS="Hypertext">Communicating Directly with the Component</A></H2><H2 CLASS="H3.Heading3TOC"><A HREF="Max.24.htm#pgfId=93529" CLASS="Hypertext">Sample Atom Container for the QTVR Flattener</A></H2><hr>&#169; 2001 Apple Computer, Inc.<!-- QTnavbar start --><P><I>What's New in QuickTime 5</I><P>| <A HREF="Max.20.htm">Previous</A> | <A HREF="Max.1.htm">Chapter Contents</A> | <A HREF="Max.htm">Chapter Top</A> | <A HREF="Max.22.htm">Next</A> |</P></DIV><!-- QTnavbar end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<html><head><title>Mac OS X
 Manual Page For B(3pm)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3pm/B" title="Mac OS X
 Manual Page for B(3pm)"><a name="//apple_ref/doc/man/3/B" title="Mac OS X
 Manual Page for B(3pm)"><!-- headerDoc=man; indexgroup=Section 3pm; uid="//apple_ref/doc/man/3pm/B"; name=B(3pm) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
B(3pm)                                Perl Programmers Reference Guide                                B(3pm)



<b>NAME</b>
       B - The Perl Compiler

<b>SYNOPSIS</b>
               use B;

<b>DESCRIPTION</b>
       The "B" module supplies classes which allow a Perl program to delve into its own innards. It is the
       module used to implement the "backends" of the Perl compiler. Usage of the compiler does not require
       knowledge of this module: see the <u>O</u> module for the user-visible part. The "B" module is of use to
       those who want to write new compiler backends. This documentation assumes that the reader knows a
       fair amount about perl's internals including such things as SVs, OPs and the internal symbol table
       and syntax tree of a program.

<b>OVERVIEW</b>
       The "B" module contains a set of utility functions for querying the current state of the Perl inter-<font color="#ffffff" class="whiteout">preter;&nbsp;interpreter;</font>
       preter; typically these functions return objects from the B::SV and B::OP classes, or their derived
       classes.  These classes in turn define methods for querying the resulting objects about their own
       internal state.

<b>Utility</b> <b>Functions</b>
       The "B" module exports a variety of functions: some are simple utility functions, others provide a
       Perl program with a way to get an initial "handle" on an internal object.

       <b>Functions</b> <b>Returning</b> <b>"B::SV"</b>, "B::AV", "B::HV", and "B::CV" objects

       For descriptions of the class hierarchy of these objects and the methods that can be called on them,
       see below, "OVERVIEW OF CLASSES" and "SV-RELATED CLASSES".

       sv_undef
           Returns the SV object corresponding to the C variable "sv_undef".

       sv_yes
           Returns the SV object corresponding to the C variable "sv_yes".

       sv_no
           Returns the SV object corresponding to the C variable "sv_no".

       svref_2object(SVREF)
           Takes a reference to any Perl value, and turns the referred-to value into an object in the appro-<font color="#ffffff" class="whiteout">priate&nbsp;appropriate</font>
           priate B::OP-derived or B::SV-derived class. Apart from functions such as "main_root", this is
           the primary way to get an initial "handle" on an internal perl data structure which can then be
           followed with the other access methods.

           The returned object will only be valid as long as the underlying OPs and SVs continue to exist.
           Do not attempt to use the object after the underlying structures are freed.

       amagic_generation
           Returns the SV object corresponding to the C variable "amagic_generation".

       init_av
           Returns the AV object (i.e. in class B::AV) representing INIT blocks.

       check_av
           Returns the AV object (i.e. in class B::AV) representing CHECK blocks.

       begin_av
           Returns the AV object (i.e. in class B::AV) representing BEGIN blocks.

       end_av
           Returns the AV object (i.e. in class B::AV) representing END blocks.

       comppadlist
           Returns the AV object (i.e. in class B::AV) of the global comppadlist.

       regex_padav
           Only when perl was compiled with ithreads.

       main_cv
           Return the (faked) CV corresponding to the main part of the Perl program.

       <b>Functions</b> <b>for</b> <b>Examining</b> <b>the</b> <b>Symbol</b> <b>Table</b>


       walksymtable(SYMREF, METHOD, RECURSE, PREFIX)
           Walk the symbol table starting at SYMREF and call METHOD on each symbol (a B::GV object) visited.
           When the walk reaches package symbols (such as "Foo::") it invokes RECURSE, passing in the symbol
           name, and only recurses into the package if that sub returns true.

           PREFIX is the name of the SYMREF you're walking.

           For example:

             # Walk CGI's symbol table calling print_subs on each symbol.
             # Recurse only into CGI::Util::
             walksymtable(\%CGI::, 'print_subs', sub { $_[0] eq 'CGI::Util::' },
                          'CGI::');

           <u>print</u><b>_</b><u>subs()</u> is a B::GV method you have declared. Also see "B::GV Methods", below.

       <b>Functions</b> <b>Returning</b> <b>"B::OP"</b> <b>objects</b> <b>or</b> <b>for</b> <b>walking</b> <b>op</b> <b>trees</b>

       For descriptions of the class hierarchy of these objects and the methods that can be called on them,
       see below, "OVERVIEW OF CLASSES" and "OP-RELATED CLASSES".

       main_root
           Returns the root op (i.e. an object in the appropriate B::OP-derived class) of the main part of
           the Perl program.

       main_start
           Returns the starting op of the main part of the Perl program.

       walkoptree(OP, METHOD)
           Does a tree-walk of the syntax tree based at OP and calls METHOD on each op it visits. Each node
           is visited before its children. If "walkoptree_debug" (see below) has been called to turn debug-<font color="#ffffff" class="whiteout">ging&nbsp;debugging</font>
           ging on then the method "walkoptree_debug" is called on each op before METHOD is called.

       walkoptree_debug(DEBUG)
           Returns the current debugging flag for "walkoptree". If the optional DEBUG argument is non-zero,
           it sets the debugging flag to that. See the description of "walkoptree" above for what the debug-<font color="#ffffff" class="whiteout">ging&nbsp;debugging</font>
           ging flag does.

       <b>Miscellaneous</b> <b>Utility</b> <b>Functions</b>


       ppname(OPNUM)
           Return the PP function name (e.g. "pp_add") of op number OPNUM.

       hash(STR)
           Returns a string in the form "0x..." representing the value of the internal hash function used by
           perl on string STR.

       <!-- a -->cast_I32(I)<!-- /a -->
           Casts I to the internal I32 type used by that perl.

       minus_c
           Does the equivalent of the "-c" command-line option. Obviously, this is only useful in a BEGIN
           block or else the flag is set too late.

       cstring(STR)
           Returns a double-quote-surrounded escaped version of STR which can be used as a string in C
           source code.

       perlstring(STR)
           Returns a double-quote-surrounded escaped version of STR which can be used as a string in Perl
           source code.

       class(OBJ)
           Returns the class of an object without the part of the classname preceding the first "::". This
           is used to turn "B::UNOP" into "UNOP" for example.

       threadsv_names
           In a perl compiled for threads, this returns a list of the special per-thread threadsv variables.

<b>OVERVIEW</b> <b>OF</b> <b>CLASSES</b>
       The C structures used by Perl's internals to hold SV and OP information (PVIV, AV, HV, ..., OP, SVOP,
       UNOP, ...) are modelled on a class hierarchy and the "B" module gives access to them via a true
       object hierarchy. Structure fields which point to other objects (whether types of SV or types of OP)
       are represented by the "B" module as Perl objects of the appropriate class.

       The bulk of the "B" module is the methods for accessing fields of these structures.

       Note that all access is read-only.  You cannot modify the internals by using this module. Also, note
       that the B::OP and B::SV objects created by this module are only valid for as long as the underlying
       objects exist; their creation doesn't increase the reference counts of the underlying objects. Trying
       to access the fields of a freed object will give incomprehensible results, or worse.

       <b>SV-RELATED</b> <b>CLASSES</b>

       B::IV, B::NV, B::RV, B::PV, B::PVIV, B::PVNV, B::PVMG, B::BM, B::PVLV, B::AV, B::HV, B::CV, B::GV,
       B::FM, B::IO. These classes correspond in the obvious way to the underlying C structures of similar
       names. The inheritance hierarchy mimics the underlying C "inheritance". For 5.9.1 and later this is:

                                    B::SV
                                      |
                       +--------------+----------+------------+
                       |              |          |            |
                     B::PV          B::IV      B::NV        B::RV
                          \         /          /
                           \       /          /
                            B::PVIV          /
                                \           /
                                 \         /
                                  \       /
                                   B::PVNV
                                      |
                                      |
                                   B::PVMG
                                      |
                           +-----+----+------+-----+-----+
                           |     |    |      |     |     |
                         B::BM B::AV B::GV B::HV B::CV B::IO
                                      |            |
                                   B::PVLV         |
                                                 B::FM

       For 5.9.0 and earlier, PVLV is a direct subclass of PVMG, so the base of this diagram is

                                  |
                               B::PVMG
                                  |
                +------+-----+----+------+-----+-----+
                |      |     |    |      |     |     |
             B::PVLV B::BM B::AV B::GV B::HV B::CV B::IO
                                               |
                                               |
                                             B::FM

       Access methods correspond to the underlying C macros for field access, usually with the leading
       "class indication" prefix removed (Sv, Av, Hv, ...). The leading prefix is only left in cases where
       its removal would cause a clash in method name. For example, "GvREFCNT" stays as-is since its abbre-<font color="#ffffff" class="whiteout">viation&nbsp;abbreviation</font>
       viation would clash with the "superclass" method "REFCNT" (corresponding to the C function "SvRE-<font color="#ffffff" class="whiteout">FCNT").&nbsp;"SvREFCNT").</font>
       FCNT").

       <b>B::SV</b> <b>Methods</b>


       REFCNT
       FLAGS
       object_2svref
           Returns a reference to the regular scalar corresponding to this B::SV object. In other words,
           this method is the inverse operation to the <u>svref</u><b>_</b><u>2object()</u> subroutine. This scalar and other
           data it points at should be considered read-only: modifying them is neither safe nor guaranteed
           to have a sensible effect.

       <b>B::IV</b> <b>Methods</b>


       IV  Returns the value of the IV, <u>interpreted</u> <u>as</u> <u>a</u> <u>signed</u> <u>integer</u>. This will be misleading if "FLAGS &amp;
           SVf_IVisUV". Perhaps you want the "int_value" method instead?

       IVX
       UVX
       int_value
           This method returns the value of the IV as an integer.  It differs from "IV" in that it returns
           the correct value regardless of whether it's stored signed or unsigned.

       needs64bits
       packiv

       <b>B::NV</b> <b>Methods</b>


       NV
       NVX

       <b>B::RV</b> <b>Methods</b>


       RV

       <b>B::PV</b> <b>Methods</b>

       PV  This method is the one you usually want. It constructs a string using the length and offset
           information in the struct: for ordinary scalars it will return the string that you'd see from
           Perl, even if it contains null characters.

       RV  Same as B::RV::RV, except that it will <u>die()</u> if the PV isn't a reference.

       PVX This method is less often useful. It assumes that the string stored in the struct is null-termi-<font color="#ffffff" class="whiteout">nated,&nbsp;null-terminated,</font>
           nated, and disregards the length information.

           It is the appropriate method to use if you need to get the name of a lexical variable from a pad-<font color="#ffffff" class="whiteout">name&nbsp;padname</font>
           name array. Lexical variable names are always stored with a null terminator, and the length field
           (SvCUR) is overloaded for other purposes and can't be relied on here.

       <b>B::PVMG</b> <b>Methods</b>


       MAGIC
       SvSTASH

       <b>B::MAGIC</b> <b>Methods</b>


       MOREMAGIC
       precomp
           Only valid on r-magic, returns the string that generated the regexp.

       PRIVATE
       TYPE
       FLAGS
       OBJ Will <u>die()</u> if called on r-magic.

       PTR
       REGEX
           Only valid on r-magic, returns the integer value of the REGEX stored in the MAGIC.

       <b>B::PVLV</b> <b>Methods</b>


       TARGOFF
       TARGLEN
       TYPE
       TARG

       <b>B::BM</b> <b>Methods</b>


       USEFUL
       PREVIOUS
       RARE
       TABLE

       <b>B::GV</b> <b>Methods</b>


       is_empty
           This method returns TRUE if the GP field of the GV is NULL.

       NAME
       SAFENAME
           This method returns the name of the glob, but if the first character of the name is a control
           character, then it converts it to ^X first, so that *^G would return "^G" rather than "\cG".

           It's useful if you want to print out the name of a variable.  If you restrict yourself to globs
           which exist at compile-time then the result ought to be unambiguous, because code like "${"^G"} =
           1" is compiled as two ops - a constant string and a dereference (rv2gv) - so that the glob is
           created at runtime.

           If you're working with globs at runtime, and need to disambiguate *^G from *{"^G"}, then you
           should use the raw NAME method.

       STASH
       SV
       IO
       FORM
       AV
       HV
       EGV
       CV
       CVGEN
       LINE
       FILE
       FILEGV
       GvREFCNT
       FLAGS

       <b>B::IO</b> <b>Methods</b>


       LINES
       PAGE
       PAGE_LEN
       LINES_LEFT
       TOP_NAME
       TOP_GV
       FMT_NAME
       FMT_GV
       BOTTOM_NAME
       BOTTOM_GV
       SUBPROCESS
       IoTYPE
       IoFLAGS
       IsSTD
           Takes one arguments ( 'stdin' | 'stdout' | 'stderr' ) and returns true if the IoIFP of the object
           is equal to the handle whose name was passed as argument ( i.e. $io-&gt;IsSTD('stderr') is true if
           IoIFP($io) == <u>PerlIO</u><b>_</b><u>stdin()</u> ).

       <b>B::AV</b> <b>Methods</b>


       FILL
       MAX
       OFF
       ARRAY
       ARRAYelt
           Like "ARRAY", but takes an index as an argument to get only one element, rather than a list of
           all of them.

       AvFLAGS

       <b>B::CV</b> <b>Methods</b>

       STASH
       START
       ROOT
       GV
       FILE
       DEPTH
       PADLIST
       OUTSIDE
       OUTSIDE_SEQ
       XSUB
       XSUBANY
           For constant subroutines, returns the constant SV returned by the subroutine.

       CvFLAGS
       const_sv

       <b>B::HV</b> <b>Methods</b>


       FILL
       MAX
       KEYS
       RITER
       NAME
       PMROOT
       ARRAY

       <b>OP-RELATED</b> <b>CLASSES</b>

       "B::OP", "B::UNOP", "B::BINOP", "B::LOGOP", "B::LISTOP", "B::PMOP", "B::SVOP", "B::PADOP", "B::PVOP",
       "B::LOOP", "B::COP".

       These classes correspond in the obvious way to the underlying C structures of similar names. The
       inheritance hierarchy mimics the underlying C "inheritance":

                                        B::OP
                                          |
                          +---------------+--------+--------+
                          |               |        |        |
                       B::UNOP          B::SVOP B::PADOP  B::COP
                        ,'  `-.
                       /       `--.
                  B::BINOP     B::LOGOP
                      |
                      |
                  B::LISTOP
                    ,' `.
                   /     \
               B::LOOP B::PMOP

       Access methods correspond to the underlying C structre field names, with the leading "class indica-<font color="#ffffff" class="whiteout">tion"&nbsp;indication"</font>
       tion" prefix ("op_") removed.

       <b>B::OP</b> <b>Methods</b>

       These methods get the values of similarly named fields within the OP data structure.  See top of
       "op.h" for more info.

       next
       sibling
       name
           This returns the op name as a string (e.g. "add", "rv2av").

       ppaddr
           This returns the function name as a string (e.g. "PL_ppaddr[OP_ADD]", "PL_ppaddr[OP_RV2AV]").

       desc
           This returns the op description from the global C PL_op_desc array (e.g. "addition" "array
           deref").

       targ
       type
       opt
       static
       flags
       private
       spare

       <b>B::UNOP</b> <b>METHOD</b>


       first

       <b>B::BINOP</b> <b>METHOD</b>

       last

       <b>B::LOGOP</b> <b>METHOD</b>


       other

       <b>B::LISTOP</b> <b>METHOD</b>

       children

       <b>B::PMOP</b> <b>Methods</b>


       pmreplroot
       pmreplstart
       pmnext
       pmregexp
       pmflags
       pmdynflags
       pmpermflags
       precomp
       pmoffset
           Only when perl was compiled with ithreads.

       <b>B::SVOP</b> <b>METHOD</b>


       sv
       gv

       <b>B::PADOP</b> <b>METHOD</b>


       padix

       <b>B::PVOP</b> <b>METHOD</b>

       pv

       <b>B::LOOP</b> <b>Methods</b>


       redoop
       nextop
       lastop

       <b>B::COP</b> <b>Methods</b>


       label
       stash
       stashpv
       file
       cop_seq
       arybase
       line
       warnings
       io

<b>AUTHOR</b>
       Malcolm Beattie, "mbeattie@sable.ox.ac.uk"



perl v5.8.8                                      2001-09-21                                           B(3pm)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/B.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/B.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/B.3pm.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

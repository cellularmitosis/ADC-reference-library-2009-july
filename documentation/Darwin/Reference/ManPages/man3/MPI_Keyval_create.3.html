<html><head><title>Mac OS X
 Manual Page For MPI_Keyval_create(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/MPI_Keyval_create" title="Mac OS X
 Manual Page for MPI_Keyval_create(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/MPI_Keyval_create"; name=MPI_Keyval_create(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MPI_Keyval_create(3OpenMPI)                                                      MPI_Keyval_create(3OpenMPI)



<b>NAME</b>
       <b>MPI_Keyval_create</b> - Generates a new attribute key -- use of this routine is deprecated.


<b>SYNTAX</b>
<b>C</b> <b>Syntax</b>
       #include &lt;mpi.h&gt;
       int MPI_Keyval_create(MPI_Copy_function *<u>copy</u><b>_</b><u>fn</u>,
            MPI_Delete_function *<u>delete</u><b>_</b><u>fn</u>, int *<u>keyval</u>, void *<u>extra</u><b>_</b><u>state</u>)


<b>Fortran</b> <b>Syntax</b>
       INCLUDE 'mpif.h'
       MPI_KEYVAL_CREATE(<u>COPY</u><b>_</b><u>FN,</u> <u>DELETE</u><b>_</b><u>FN,</u> <u>KEYVAL,</u> <u>EXTRA</u><b>_</b><u>STATE,</u> <u>IERROR</u>)
            EXTERNAL  <u>COPY</u><b>_</b><u>FN,</u> <u>DELETE</u><b>_</b><u>FN</u>
            INTEGER   <u>KEYVAL,</u> <u>EXTRA</u><b>_</b><u>STATE,</u> <u>IERROR</u>



<b>INPUT</b> <b>PARAMETERS</b>
       copy_fn   Copy callback function for keyval.

       delete_fn Delete callback function for keyval.

       extra_state
                 Extra state for callback functions.


<b>OUTPUT</b> <b>PARAMETERS</b>
       keyval    Key value for future access (integer).

       IERROR    Fortran only: Error status (integer).


<b>DESCRIPTION</b>
       Note that use of this routine is <u>deprecated</u> as of MPI-2. Please use MPI_Comm_create_keyval instead.

       This deprecated routine is not available in C++.

       Generates  a  new  attribute key. Keys are locally unique in a process and opaque to the user, though
       they are explicitly stored in integers. Once allocated, the  key  value  can  be  used  to  associate
       attributes and access them on any locally defined communicator.

       The  copy_fn function is invoked when a communicator is duplicated by MPI_COMM_DUP. copy_fn should be
       of type MPI_Copy_function, which is defined as follows:

         typedef int MPI_Copy_function(MPI_Comm oldcomm, int keyval,
                                       void *extra_state, void *attribute_val_in,
                                       void *attribute_val_out, int *flag)

       A Fortran declaration for such a function is as follows:

         SUBROUTINE COPY_FUNCTION(OLDCOMM, KEYVAL, EXTRA_STATE, ATTRIBUTE_VAL_IN,
                     ATTRIBUTE_VAL_OUT, FLAG, IERR)
         INTEGER OLDCOMM, KEYVAL, EXTRA_STATE,
         ATTRIBUTE_VAL_IN, ATTRIBUTE_VAL_OUT, IERR
         LOGICAL FLAG

       The copy callback function is invoked for each key value in oldcomm in arbitrary order. Each call  to
       the  copy  callback is made with a key value and its corresponding attribute. If it returns flag = 0,
       then the attribute is deleted in the  duplicated  communicator.  Otherwise  (  flag  =  1),  the  new
       attribute  value  is set to the value returned in attribute_val_out. The function returns MPI_SUCCESS
       on success and an error code on failure (in which case MPI_Comm_dup will fail).

       copy_fn may be specified as MPI_NULL_COPY_FN or MPI_DUP_FN from either C or Fortran; MPI_NULL_COPY_FN
       is  a function that does nothing other than return flag = 0, and MPI_SUCCESS. MPI_DUP_FN is a simple-<font color="#ffffff" class="whiteout">minded&nbsp;simpleminded</font>
       minded copy function that sets flag = 1, returns the value of attribute_val_in in  attribute_val_out,
       and returns MPI_SUCCESS.


<b>NOTES</b>
       Key values are global (available for any and all communicators).

       There  are  subtle  differences between C and Fortran that require that the copy_fn be written in the
       same language that MPI_Keyval_create is called from. This should not be a  problem  for  most  users;
       only  programers  using  both Fortran and C in the same program need to be sure that they follow this
       rule.

       Even though both formal arguments attribute_val_in and attribute_val_out are  of  type  void*,  their
       usage  differs.  The C copy function is passed by MPI in attribute_val_in the value of the attribute,
       and in attribute_val_out the address of the attribute, so as to allow  the  function  to  return  the
       (new) attribute value. The use of type void* for both is to avoid messy type casts.

       A  valid  copy  function is one that completely duplicates the information by making a full duplicate
       copy of the data structures implied by an attribute; another might just  make  another  reference  to
       that  data  structure,  while  using a reference-count mechanism. Other types of attributes might not
       copy at all (they might be specific to oldcomm only).

       Analogous to copy_fn is a callback deletion function, defined as follows. The delete_fn  function  is
       invoked  when  a  communicator  is  deleted  by  MPI_Comm_free  or  when a call is made explicitly to
       MPI_Attr_delete. delete_fn should be of type MPI_Delete_function, which is defined as follows:

         typedef int MPI_Delete_function(MPI_Comm comm, int keyval,
             void *attribute_val, void *extra_state);

       A Fortran declaration for such a function is as follows:

         SUBROUTINE DELETE_FUNCTION(COMM, KEYVAL,ATTRIBUTE_VAL, EXTRA_STATE, IERR)
             INTEGER COMM, KEYVAL, ATTRIBUTE_VAL, EXTRA_STATE, IERR

       This function is called by MPI_Comm_free, MPI_Attr_delete, and MPI_Attr_put to do whatever is  needed
       to  remove an attribute. The function returns MPI_SUCCESS on success and an error code on failure (in
       which case MPI_COMM_FREE will fail).

       delete_fn may be specified as MPI_NULL_DELETE_FN from either C or FORTRAN;  MPI_NULL_DELETE_FN  is  a
       function that does nothing, other than returning MPI_SUCCESS.

       The special key value MPI_KEYVAL_INVALID is never returned by MPI_Keyval_create. Therefore, it can be
       used for static initialization of key values.


<b>ERRORS</b>
       Almost all MPI routines return an error value; C routines as the value of the  function  and  Fortran
       routines  in  the  last argument. C++ functions do not return errors. If the default error handler is
       set to MPI::ERRORS_THROW_EXCEPTIONS, then on error the C++ exception mechanism will be used to  throw
       an MPI:Exception object.

       Before  the  error value is returned, the current MPI error handler is called. By default, this error
       handler aborts the MPI job, except for I/O function errors. The error handler  may  be  changed  with
       MPI_Comm_set_errhandler;  the  predefined  error handler MPI_ERRORS_RETURN may be used to cause error
       values to be returned. Note that MPI does not guarantee that an MPI  program  can  continue  past  an
       error.


<b>SEE</b> <b>ALSO</b>
       MPI_Keyval_free



Open MPI 1.2                                   September 2006                    MPI_Keyval_create(3OpenMPI)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Keyval_create.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Keyval_create.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Keyval_create.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

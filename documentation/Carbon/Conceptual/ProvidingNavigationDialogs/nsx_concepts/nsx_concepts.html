<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Navigation Services Programming Guide: Navigation Services Concepts</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Navigation Services Concepts"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001147-CH202" title="Navigation Services Concepts"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../UserExperience-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000465" target="_top">User Experience</a> &gt; <a href="../nsx_intro/nsx_intro.html#//apple_ref/doc/uid/TP30001147-CH204-DontLinkElementID_9">Navigation Services Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../nsx_intro/nsx_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../nsx_tasks/nsx_tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001147-CH202-CIHIGJIE" title="Navigation Services Concepts"></a><h1>Navigation Services Concepts</h1><p>Before you start using the Navigation Services API in your application, it’s a good idea to be familiar with the user interface provided by Navigation Services functions and to know how user settings are handled. You also need to have an understanding of the programming model in terms of:</p><ul class="ul"><li class="li"><p>The tasks you must perform</p></li><li class="li"><p>The tasks that Navigation Services takes care of for you</p></li><li class="li"><p>The customization options that are available</p></li></ul><p>After you’ve read through the concepts in this chapter, you’ll be prepared to write code following the instructions and sample code in <span class="content_text"><a href="../nsx_tasks/nsx_tasks.html#//apple_ref/doc/uid/TP30001147-CH203-BABGIAGG">“Navigation Services Tasks.”</a></span></p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="nsx_concepts.html#//apple_ref/doc/uid/TP30001147-CH202-CHDFDEDH">Navigation Services Dialogs</a>
				
			<br/>
			
        
			
			
				<a href="nsx_concepts.html#//apple_ref/doc/uid/TP30001147-CH202-DontLinkElementID_3">Dialog Display State</a>
				
			<br/>
			
        
			
			
				<a href="nsx_concepts.html#//apple_ref/doc/uid/TP30001147-CH202-DontLinkElementID_4">The Programming Model</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001147-CH202-CHDFDEDH" title="Navigation Services Dialogs"></a><h2>Navigation Services Dialogs</h2><p>This section describes Navigation Services from the perspective of what the user does. When the user performs any of the following actions, your application can use the Navigation Services API to provide the appropriate dialog to the user:</p><ul class="ul"><li class="li"><p>Opens a file, folder, or volume</p></li><li class="li"><p>Saves a new, untitled file</p></li><li class="li"><p>Saves an existing file under a new name (Save As)</p></li><li class="li"><p>Closes a file that has unsaved changes</p></li><li class="li"><p>Quits an application that has one or more files with unsaved changes</p></li></ul><a name="//apple_ref/doc/uid/TP30001147-CH202-CHDEDCBD" title="Open Dialogs"></a><h3>Open Dialogs</h3><p>When the user chooses Open from the File menu in an application an Open dialog, similar to that shown in <span class="content_text">Figure 1-1</span>, appears. This dialog allows users to navigate through the file system to a location. The callouts in the figure point to the standard elements—those provided automatically by Navigation Services. The standard elements are:</p><ul class="spaceabove"><li class="li"><p>Back and forth arrows for traversing the file hierarchy</p></li><li class="li"><p>A button to toggle between list and column views</p></li><li class="li"><p>A pop-up menu for changing location</p></li><li class="li"><p>A sidebar that contains a list of places</p></li><li class="li"><p>An area that allows users to browse the file system</p></li><li class="li"><p>The Cancel button</p></li><li class="li"><p>The Open button, which is dimmed unless an appropriate item is selected; then it becomes the default button</p></li></ul><p>Open dialogs can also optionally have an Enable pop-up menu that allows users to filter what’s shown as active. This particular Open dialog has an Enable menu set to restrict documents to those created by the SimpleText application.</p><br/><div><a name="//apple_ref/doc/uid/TP30001147-CH202-BABBGFFJ" title="Figure 1-1A full Open dialog"></a><p><strong>Figure 1-1&nbsp;&nbsp;</strong>A full Open dialog</p><img src = "../art/figure2_1.gif" alt = "A full Open dialog" width="508" height="341"></div><br/><p>The Open dialog shown in <span class="content_text">Figure 1-1</span> is a Choose Object dialog—a user can open one or more files, folders, or volumes. In other words, there aren’t any restrictions placed on what the user can open. Navigation Services has four other dialogs that are used when you want to restrict users to opening just files, or to just a single file, a single folder, or a single volume. These restrictive dialogs display as active only the items that can be opened; other items appeared dimmed and can’t be selected. In addition, the window title changes to indicate what can be opened. For example, a Choose Folder dialog would have the window title Open Folder. Only folders would appear active—files would appear dimmed. See <span class="content_text"><a href="../nsx_tasks/nsx_tasks.html#//apple_ref/doc/uid/TP30001147-CH203-BEIGBDGD">“Create the Dialog”</a></span> for the functions you use to create each type of dialog.</p><a name="//apple_ref/doc/uid/TP30001147-CH202-DontLinkElementID_1" title="Save Dialogs"></a><h3>Save Dialogs</h3><p>A user sees a Save dialog when:</p><ul class="spaceabove"><li class="li"><p>Choosing Save from the File menu for a new document that is untitled</p></li><li class="li"><p>Choosing Save As from the File menu</p></li></ul><p>In either case, two types of dialogs can appear—a minimal Save dialog and a full Save dialog. The minimal Save dialog, shown in <span class="content_text">Figure 1-2</span>, is displayed the first time a user saves a document in an application. This dialog provides a text field for the user to enter a filename. Applications can optionally specify a default filename to display. The dialog has a Where pop-up menu that, by default, suggests the Documents folder for the user. The user can open the pop-up menu to choose from locations previously set in the Finder sidebar or a recently-visited location. If none of those locations are acceptable, the user can click the disclosure button to the right of the text field to access the full Save dialog.</p><br/><div><a name="//apple_ref/doc/uid/TP30001147-CH202-BABEAEJI" title="Figure 1-2A minimal Save dialog"></a><p><strong>Figure 1-2&nbsp;&nbsp;</strong>A minimal Save dialog</p><img src = "../art/figure2_2.gif" alt = "A minimal Save dialog" width="267" height="192"></div><br/><p>The full Save dialog, shown in <span class="content_text">Figure 1-3</span>, contains all of the default elements that appear in the full Open dialog described in <span class="content_text"><a href="nsx_concepts.html#//apple_ref/doc/uid/TP30001147-CH202-CHDEDCBD">“Open Dialogs.”</a></span> It also contains a Save As field for the user to enter a filename. Note that Save dialogs, except in rare cases, should be sheets.</p><br/><div><a name="//apple_ref/doc/uid/TP30001147-CH202-BABIJEID" title="Figure 1-3A full Save dialog"></a><p><strong>Figure 1-3&nbsp;&nbsp;</strong>A full Save dialog</p><img src = "../art/figure2_3.gif" alt = "A full Save dialog" width="409" height="357"></div><br/><a name="//apple_ref/doc/uid/TP30001147-CH202-DontLinkElementID_2" title="Close Dialogs"></a><h3>Close Dialogs</h3><p>Close dialogs remind users that the document (or documents) they are about to close has unsaved changes and provide an option for the user to save changes. There are several varieties of the Close dialog. <span class="content_text"><a href="nsx_concepts.html#//apple_ref/doc/uid/TP30001147-CH202-CHDEAEGA">Figure 1-4</a></span> shows an Ask Save Changes dialog, appropriate to display when the user attempts to close a file that contains unsaved changes or quit from an application when there is an open document with unsaved changes.</p><br/><div><a name="//apple_ref/doc/uid/TP30001147-CH202-CHDEAEGA" title="Figure 1-4An Ask Save Changes dialog"></a><p><strong>Figure 1-4&nbsp;&nbsp;</strong>An Ask Save Changes dialog</p><img src = "../art/figure2_4.gif" alt = "An Ask Save Changes dialog" width="365" height="175"></div><br/><p><span class="content_text"><a href="nsx_concepts.html#//apple_ref/doc/uid/TP30001147-CH202-CHDDCFJC">Figure 1-5</a></span> shows an Ask Review Documents dialog, appropriate to display when the user attempts to quit an application that has several open documents with unsaved changes.</p><br/><div><a name="//apple_ref/doc/uid/TP30001147-CH202-CHDDCFJC" title="Figure 1-5An Ask Review Documents dialog"></a><p><strong>Figure 1-5&nbsp;&nbsp;</strong>An Ask Review Documents dialog</p><img src = "../art/figure2_5.gif" alt = "An Ask Review Documents dialog" width="351" height="107"></div><br/><p>There is also a dialog that asks the user (when appropriate) if changes should be discarded. This dialog provides the opportunity for a user to revert to a previously saved version of a document. See <span class="content_text"><a href="../nsx_tasks/nsx_tasks.html#//apple_ref/doc/uid/TP30001147-CH203-BEIGBDGD">“Create the Dialog”</a></span> for the functions you use to create each type of Close dialog.</p><a name="//apple_ref/doc/uid/TP30001147-CH202-DontLinkElementID_3" title="Dialog Display State"></a><h2>Dialog Display State</h2><p>When an Open or Save dialog is displayed, its display state determines:</p><ul class="ul"><li class="li"><p>Position. The default position is to display the dialog at the center of the screen. (not relevant for sheets)</p></li><li class="li"><p>Location. The Documents folder for the user is the default location.</p></li><li class="li"><p>Whether the Save dialog is minimal (the default) or full. (Open dialogs are always full.)</p></li><li class="li"><p>Whether the browser shows column view or list view. The default is column view.</p></li></ul><p>If a user makes changes, such as disclosing a minimal dialog or switching column view to list view, Navigation Services automatically keeps track of the user’s settings and uses them the next time it displays an open or save dialog in that application. In most cases, using the previous settings to set the display state for a dialog is a time-saver for the user.</p><p>Navigation Services always saves user settings for open and close dialogs so that the display state of open dialogs are independent of the display state of close dialogs. Your application can set up Navigation Services to save user settings for different types of open and close dialogs. For example, you could save user settings for saving template documents separately from the settings used for saving other types of documents. You can save user settings for different dialogs by passing a preferences key to Navigation Services. Navigation Services uses the key as an index into the user settings for that dialog. You’ll see how to use a preferences key to accomplish this task in <span class="content_text"><a href="../nsx_tasks/nsx_tasks.html#//apple_ref/doc/uid/TP30001147-CH203-BABGIAGG">“Navigation Services Tasks.”</a></span></p><a name="//apple_ref/doc/uid/TP30001147-CH202-DontLinkElementID_4" title="The Programming Model"></a><h2>The Programming Model</h2><p>Navigation Services uses a callback model to handle user interaction with an open, save, or close dialog. To use Navigation Services in your application, you need to tell it what dialog you want to use and provide options to create the dialog so it looks the way you want it to look. Then you ask Navigation Services to display the dialog. Navigation Services displays the dialog, and when the user takes an action, it informs your application (by invoking a callback you provide). Your applications in turn responds to the action (in the callback you set up). You must dispose of the dialog when it closes. </p><p>At a minimum, you need to write three functions when you use Navigation Services in your application:</p><ul class="ul"><li class="li"><p>An Open function that processes open commands by setting up an Open dialog and requesting Navigation Services to display the dialog.</p></li><li class="li"><p>A Save function that processes save commands by setting up a Close or Save dialog and requesting Navigation Services to display the dialog.</p></li><li class="li"><p>An event callback, which is invoked when the user interacts with a dialog. It’s in this callback that you respond to user actions. Navigation services passes you a reply record that contains everything you need to respond to the action.</p></li></ul><p>You don’t need to perform any design or layout of the actual dialog. By setting up some initial options, and requesting Navigation Services to create and display the dialog, you get a dialog similar to one of the dialogs shown in <span class="content_text"><a href="nsx_concepts.html#//apple_ref/doc/uid/TP30001147-CH202-CHDFDEDH">“Navigation Services Dialogs.”</a></span> You also don’t need to keep track of what’s happening with the displayed dialog. When the user takes action, your callback is invoked.</p><p>The reply record passed to your callback by Navigation Services contains the following information about the user action:</p><ul class="ul"><li class="li"><p>Whether the user closed the dialog by pressing Return or Enter, or by clicking the default button in an Open or Save dialog</p></li><li class="li"><p>Whether the user is replacing an existing file, making it necessary for you to remove or rename the existing file</p></li><li class="li"><p>An Apple event descriptor list (<code>AEDescList</code>) that contains references (<code>typeFSRef</code>) to items selected by the user. For Open dialogs, the list can contain an array of <code>FSRef</code> values.</p></li><li class="li"><p>The keyboard script system used for the filename.</p></li><li class="li"><p>For a Save dialog, a string that specifies the name of the file to be saved.</p></li><li class="li"><p>Whether the file extension should be hidden.</p></li></ul><p>For more details on the reply record, see <code>NavReplyRecord</code> in <span class="content_text"><a href="../../../Reference/Navigation_Services_Ref/index.html#//apple_ref/doc/uid/TP30000240" target="_top">Navigation Services Reference</a></span>.</p><p>If the default settings and built-in behavior of Navigation Services aren’t quite what you need, you have a number of ways to customize navigation dialogs.</p><ul class="ul"><li class="li"><p>You can add custom items to a dialog, including messages and controls. You specify a rectangle to add to the dialog, and then add controls and text to that item. For an example, see <span class="content_text"><a href="../nsx_tasks/nsx_tasks.html#//apple_ref/doc/uid/TP30001147-CH203-BABEJFJC">Figure 2-4</a></span>.</p></li><li class="li"><p>You can restrict the items the user can open or save. Navigation Services provides filtering based on uniform type identifiers and <code>OSType</code> data types. If you want more sophisticated filtering, you need to write a callback. See <span class="content_text"><a href="../nsx_tasks/nsx_tasks.html#//apple_ref/doc/uid/TP30001147-CH203-BEIBEAHH">“Filtering the Types of Files That Users Can Open”</a></span> for more information.</p></li><li class="li"><p>You can provide a preview for custom data. Navigation Services provides a preview for files that contain standard <code>OSType</code> data. If your application uses files that contain custom content and you want users to see a preview of that content, you need to write a preview callback. This is optional. If you don’t provide a callback, users see the icon you set up for your documents, or they see a generic document icon.</p></li></ul><p>You can find step-by-step instructions on how to write code using Navigation Services in <span class="content_text"><a href="../nsx_tasks/nsx_tasks.html#//apple_ref/doc/uid/TP30001147-CH203-BABGIAGG">“Navigation Services Tasks.”</a></span></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../nsx_intro/nsx_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../nsx_tasks/nsx_tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-07-10<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/ProvidingNavigationDialogs/nsx_concepts/nsx_concepts.html%3Fid%3DTP30001147-2.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/ProvidingNavigationDialogs/nsx_concepts/nsx_concepts.html%3Fid%3DTP30001147-2.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/ProvidingNavigationDialogs/nsx_concepts/nsx_concepts.html%3Fid%3DTP30001147-2.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>FSMegaInfo - /Read Me About FSMegaInfo.txt</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/Darwin/index.html">Darwin</a> &gt; <a href="../../samplecode/Darwin/idxFileManagement-date.html">File Management</a> &gt; <A HREF="javascript:location.replace('index.html');">FSMegaInfo</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->


	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">FSMegaInfo</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/Read Me About FSMegaInfo.txt</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/AliasManager.c</option>
<option value="listing2.html">/BSD.c</option>
<option value="listing3.html">/BSD.h</option>
<option value="listing4.html">/BSDAttrList.c</option>
<option value="listing5.html">/Command.c</option>
<option value="listing6.html">/Command.h</option>
<option value="listing7.html">/DiskArb.c</option>
<option value="listing8.html">/FieldPrinter.c</option>
<option value="listing9.html">/FieldPrinter.h</option>
<option value="listing10.html">/FileManager.c</option>
<option value="listing11.html">/FolderManager.c</option>
<option value="listing12.html">/FSMegaInfo.c</option>
<option value="listing13.html">/Read Me About FSMegaInfo.txt</option>
<option value="listing14.html">/Tests/ten-five-intel.txt</option>
<option value="listing15.html">/Tests/ten-five-one-ppc64.txt</option>
<option value="listing16.html">/Tests/ten-five-ppc.txt</option>
<option value="listing17.html">/Tests/ten-four-eleven-intel.txt</option>
<option value="listing18.html">/Tests/ten-four-eleven-ppc.txt</option></select>
				</p>
				</form>
				<p><strong><a href="FSMegaInfo.zip">Download Sample</a></strong> (&#147;FSMegaInfo.zip&#148;, 522.7K)<BR>
<strong><a href="FSMegaInfo.dmg">Download Sample</a></strong> (&#147;FSMegaInfo.dmg&#148;, 920.2K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">Read Me About FSMegaInfo
========================
1.0

This tool is designed to help folks who are implementing a plug-in file system
(VFS plug-ins) on Mac OS X.  You can use it to print information about various
file system objects (volumes, directories, and files).  This allows you to
compare the information on your volume with the information returned by
canonical Apple file systems, such as HFS Plus, AppleShare, and MS-DOS/FAT.  The
sample exercises the following areas of functionality:

o BSD -- access, stat, lstat, statfs, lstatfs, getfsstat, getdirentries,
readdir, fts, listxattr, getxattr, pathconf, getattrlist

o File Manager -- FSGetVolumeInfo, FSGetVolumeParms, PBHGetVolParms [1],
FSGetVolumeMountInfo, PBGetVolMountInfo [1], FSCopyDiskIDForVolume,
FSCopyURLForVolume, FSGetCatalogInfo, FSGetCatalogInfoBulk, PBDTGetComment [1]

o Alias Manager -- GetAliasInfo [1], FSCopyAliasInfo

o Folder Manager -- FSFindFolder

o Disk Arbitration -- DADiskCopyDescription

Notes:
[1] These commands are unavailable when run as a 64-bit program because the
underlying routines are not available to 64-bit code.

The sample is designed to run on Mac OS X 10.4 and later (I tested in on
10.4.11 and 10.5 on both Intel- and PowerPC-based computers).  You could port it
to older versions of Mac OS X, although that would require disabling a number of
the printing options because they print information that's not available on
older systems.

Packing List
------------
The sample contains the following items:

o Read Me About FSMegaInfo.txt -- This document.
o FSMegaInfo.c -- The program's main.
o Command.h, Command.c -- A module containing common infrastructure for all
commands.
o FieldPrinter.h, FieldPrinter.c -- A module to print various data types.

o AliasManager.c -- Code for the Alias Manager commands.
o BSD.h, BSD.c -- Code for the BSD commands.
o BSDAttrList.c -- Even more BSD code, this time focused on getattrlist and its
ilk.
o DiskArb.c -- Code for the Disk Arbitration commands.
o FileManager.c -- Code for the File Manager commands.
o FolderManager.c -- Code for the Disk Arbitration commands.

o FSMegaInfo.xcodeproj -- An Xcode project for the program.
o build -- A directory containing a compiled version of the program.

o Tests -- A directory containing test code.

Using the Sample
----------------
To use the sample, just run it from the command line.  This prints out a list
of available commands.  You can use the &quot;help&quot; command to get help on a specific
command.  For example:

$ build/Debug/FSMegaInfo help stat
usage: FSMegaInfo [globalOptions] stat itemPath
       Print information from stat.

You can then run the command:

$ build/Debug/FSMegaInfo stat /
stat '/'
    st_dev     = 0x0e000002 (major=14, minor=2, disk0s2)
    st_ino     = 2
    st_mode    = 0x000041fd (drwxrwxr-x)
    st_nlink   = 44
    st_uid     = 0 (root)
    st_gid     = 0 (wheel)
    st_rdev    = 0x00000000 (major=0, minor=0, console)
    st_atime   = 1202937884.0 (Wed Feb 13 21:24:44 2008)
    st_mtime   = 1202935492.0 (Wed Feb 13 20:44:52 2008)
    st_ctime   = 1202935492.0 (Wed Feb 13 20:44:52 2008)
    st_size    = 1564 (1 KB)
    st_blocks  = 0
    st_blksize = 4096
    st_flags   = 0x00000000
    st_gen     = 0

If you specify the &quot;-v&quot; flag, you get a more verbose output.  For example, in
the &quot;stat&quot; command, &quot;-v&quot; prints each of the flags symbolically:

$ build/Debug/FSMegaInfo -v stat /
stat '/'
    st_dev     = 0x0e000002 (major=14, minor=2, disk0s2)
    [...]
    st_flags   = 0x00000000
        UF_NODUMP    = NO
        UF_IMMUTABLE = NO
        UF_APPEND    = NO
        UF_OPAQUE    = NO
        SF_ARCHIVED  = NO
        SF_IMMUTABLE = NO
        SF_APPEND    = NO
    st_gen     = 0

On Mac OS X 10.5 and later, you can access the 32-bit version of the program
using &lt;x-man-page://1/arch&gt;.  For example, on an 64-bit capable Intel-based
computer, the &quot;GetAliasInfo&quot; command will not work by default because the
program runs as 64-bit and the underlying function, GetAliasInfo, is not
available in 64-bit.

$ build/Debug/FSMegaInfo GetAliasInfo /
usage: FSMegaInfo [globalOptions] command...
[...]

You can force the program to run as 32-bit using &quot;arch&quot;.

$ arch -i386 build/Debug/FSMegaInfo GetAliasInfo /
    asiZoneName   = ''
    asiServerName = ''
    asiVolumeName = 'Guy Smiley'
    Path Elements
        [0]     = 'Guy Smiley'

Building the Sample
-------------------
The sample was built using Xcode 3.0 on Mac OS X 10.5.1.  To build the code,
open the project and choose Build from the Build menu.  This will build the
&quot;FSMegaInfo&quot; tool in the &quot;build&quot; directory.

How it Works
------------
While the tool's code is long and complex, it's basic operation isn't.  It
simple calls a specific API routine (for example, &quot;stat&quot;) and prints the
results.  There's lots of infrastructure to make it easy to supply arguments to
the API routine, and to pretty print the results.

Credits and Version History
---------------------------
If you find any problems with this sample, or any suggestions for extra
commands, please mail &lt;dts@apple.com&gt; and I'll see what I can do.

1.0 (Feb 2008) was the first shipping version. 

Share and Enjoy.

Apple Developer Technical Support
Networking, Communications, Hardware

15 Feb 2008
</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/FSMegaInfo/listing13.html%3Fid%3DDTS10004032-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/FSMegaInfo/listing13.html%3Fid%3DDTS10004032-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/FSMegaInfo/listing13.html%3Fid%3DDTS10004032-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
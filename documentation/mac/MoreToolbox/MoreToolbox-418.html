<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Identifying Files (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING418></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-417.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-419.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-402.html"><B>Chapter 7 - Translation Manager</B></A> / <A HREF="MoreToolbox-414.html"><B>Writing a Translation Extension</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING418-0></A>
<H2>Identifying Files</H2>
 <A NAME=MARKER-2-167></A><A NAME=MARKER-2-168></A>Once Macintosh Easy Open knows the types of files from and to which your extension can translate, it might call your extension to determine whether your extension can translate a particular file. This further check is necessary because some documents might have file types that are not specific enough for translation purposes. For example, a document imported from a different operating system might have a file type of <CODE>'TEXT'</CODE>. Your translation extension might be able to determine, however, that the file actually contains SurfWriterPC data and hence deserves special format conversion treatment.<P>
 When your translation extension is called with the <CODE>kTranslateIdentifyFile</CODE> request code, your extension should identify the particular document. The <CODE>TranslateEntry</CODE> extension (shown in <A HREF=MoreToolbox-416.html#MARKER-9-149>Listing 7-5 on page 7-25</A>) dispatches to its <CODE>DoIdentifyFile</CODE> function when it receives this request code. <A HREF=#MARKER-9-169>Listing 7-7</A> shows the skeleton of a <CODE>DoIdentifyFile</CODE> function.<P>
<B>Listing 7-7  <A NAME=MARKER-9-169></A>Identifying file types<A NAME=MARKER-2-170></A></B><P>
<PRE>
FUNCTION DoIdentifyFile (self: ComponentInstance; theDoc: FSSpec; 
                         VAR docKind: FileType): ComponentResult;
VAR
   isKnown: Boolean; {indicates whether this extension can identify the file}
BEGIN
   {call an extension-defined routine to do the real work}
   isKnown := MyIdentifyDocument(theDoc, docKind);
   IF isKnown THEN
      DoIdentifyFile := noErr
   ELSE
      DoIdentifyFile := noTypeErr;
END;
</PRE>
 Some documents can be identified simply by inspecting their file type and creator. Other documents (in particular, those of type <CODE>'TEXT'</CODE>) might require opening the files and examining their contents to determine whether they can be translated by your extension. If your extension cannot recognize the document type, <CODE>DoIdentifyFile</CODE> should return <CODE>noTypeErr</CODE>. Otherwise, <CODE>DoIdentifyFile</CODE> should return <CODE>noErr</CODE>, and the <CODE>docKind</CODE> parameter should be set to the recognized file type.<P>
<DL>
<DT><B>Note</B>
<DD>Your <CODE>DoIdentifyFile</CODE> function should not return <CODE>'TEXT'</CODE> as a file type unless it's certain that the document consists of plain, unformatted ASCII text.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 You should be aware that even if your extension identifies a particular document as one that it can translate, Macintosh Easy Open might not in fact call your extension to do the translation.<A NAME=MARKER-2-171></A><A NAME=MARKER-2-172></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-417.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-419.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

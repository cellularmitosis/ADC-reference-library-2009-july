<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Routines(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING296></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-295.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-297.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-284.html"><B>Chapter 12 - Multinode Architecture</B></A> / <A HREF="Networking-291.html"><B>Multinode Architecture Reference</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING296-0></A>
<H2><A NAME=MARKER-9-71></A>Routines</H2>
 This section describes the multinode routines that you use to<A NAME=MARKER-2-72></A><P>
<UL>
<LI>acquire a multinode address
<LI>remove a multinode address once you are finished with it 
<LI>send packets from a specific multinode<P>
</UL>
 The multinode architecture is implemented in the .MPP driver. To pass parameters required for a multinode routine, you use the multinode parameter block of type <CODE>MNParamBlock</CODE>. You must define this parameter block type in your application. (See <A HREF=Networking-295.html#MARKER-9-63>"The Multinode Parameter Block" on page 12-18</A>.) An arrow preceding a parameter indicates whether the parameter is an input or an output parameter:
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Arrow<TH>Meaning<TR>
<TD>--><TD>Input<TR>
<TD><--<TD>Output</TABLE>
<P>
 The <CODE>AddNode</CODE>, <CODE>RemoveNode</CODE>, and <CODE>NetWrite</CODE> routines use different fields of the multi-<BR>node parameter block for parameters specific to the routine. The description of each routine identifies the parameter block values that the routine requires. <P>
<DL>
<DT><B>Assembly-language note</B>
<DD>You call the multinode commands from assembly language by putting a routine selector in the <CODE>csCode</CODE> field of the parameter block and calling the <CODE>_Control</CODE> trap. To execute the <CODE>_Control</CODE> trap asynchronously, include the value <CODE>,ASYNC</CODE> in the operand field. Note, however, that <BR>you must execute the <CODE>AddNode</CODE> routine as an immediate (<CODE>immed</CODE>) synchronous routine.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Because the MPW interface files do not define an interface for the multinode architecture, you must use the Device Manager's interface to call the multinode routines from a high-level language. <P>
 To acquire a multinode address, you execute the <CODE>AddNode</CODE> routine specifying a routine selector of 262 in the <CODE>csCode</CODE> field. You must issue the <CODE>AddNode</CODE> routine as an immediate control call to the Device Manager. See <A HREF=Networking-287.html#MARKER-9-24>Listing 12-1 on page 12-8</A> for an example of how to make an immediate control call from the Pascal language. <P>
 To issue the <CODE>RemoveNode</CODE> (<CODE>csCode</CODE> equals 263) and <CODE>NetWrite</CODE> (<CODE>csCode</CODE> equals 261) routines, you use the Device Manager's <CODE>PBControl</CODE> function. The <CODE>PBControl</CODE> function is defined as follows: <P>
<PRE>
FUNCTION PBControl (paramBlock: ParmBlkPtr; async: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE><A NAME=MARKER-2-73></A>paramBlock</CODE>
<DD> A pointer to the multinode parameter block of type <CODE>MNParamBlock</CODE> that contains the parameters required by the multinode routine to be executed. 
<DT><CODE><A NAME=MARKER-2-74></A>async</CODE> 
<DD> A Boolean value that specifies whether the function is to be executed synchronously or asynchronously. Set the <CODE>async</CODE> parameter to <CODE>TRUE</CODE> to execute the function asynchronously.
</DL>
<A NAME=HEADING296-15></A>
<H5>DESCRIPTION </H5>
 You can execute the <CODE>PBControl</CODE> function synchronously or asynchronously by setting the <CODE>async</CODE> flag. The <CODE>PBControl</CODE> function takes a pointer to a multinode parameter block that contains a <CODE>csCode</CODE> field in which you specify the routine selector for the particular routine to be executed; you must specify a numeric value for this field. You must also specify the .MPP driver reference number as the value of the multinode parameter block's <CODE>ioRefNum</CODE> field. The Device Manager's <CODE>OpenDriver</CODE> function returns the .MPP driver reference number when you call it to open the .MPP driver. <P>
<HR>
<B>Subtopics</B>
<B><!-- TOC --><DL>
<DT><A HREF="Networking-296.html#HEADING296-15"><B></B>DESCRIPTION </A>
<DD>
<DL>
<DT><A HREF="Networking-297.html#HEADING297-0">Adding and Removing Multinode Addresses</A>
<DD>
<DT><A HREF="Networking-300.html#HEADING300-0">Sending Datagrams Through Multinodes</A>
<DD>
</DL>
</DL>
</B>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-295.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-297.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

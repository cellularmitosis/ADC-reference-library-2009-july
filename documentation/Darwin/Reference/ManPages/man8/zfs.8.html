<html><head><title>Mac OS X
 Manual Page For zfs(8)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/8/zfs" title="Mac OS X
 Manual Page for zfs(8)"><!-- headerDoc=man; indexgroup=Section 8; uid="//apple_ref/doc/man/8/zfs"; name=zfs(8) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
zfs(8)                                   BSD System Manager's Manual                                  zfs(8)



<b>NAME</b>
       zfs - configures ZFS file systems

<b>SYNOPSIS</b>
       <b>zfs</b> [<b>-?</b>]


       <b>zfs</b> <b>create</b> [[<b>-o</b> property=<u>value</u>]]... <u>filesystem</u>


       <b>zfs</b> <b>create</b> [<b>-s</b>] [<b>-b</b> <u>blocksize</u>] [[<b>-o</b> property=<u>value</u>]]... <b>-V</b> <u>size</u> <u>volume</u>


       <b>zfs</b> <b>destroy</b> [<b>-rRf</b>] <u>filesystem</u>|<u>volume</u>|<u>snapshot</u>


       <b>zfs</b> <b>clone</b> <u>snapshot</u> <u>filesystem</u>|<u>volume</u>


       <b>zfs</b> <b>promote</b> <u>filesystem</u>


       <b>zfs</b> <b>rename</b> <u>filesystem</u>|<u>volume</u>|<u>snapshot</u>
           [<u>filesystem</u>|<u>volume</u>|<u>snapshot</u>]


       <b>zfs</b> <b>snapshot</b> [<b>-r</b>] <u>filesystem@name</u>|<u>volume@name</u>


       <b>zfs</b> <b>rollback</b> [<b>-rRf</b>] <u>snapshot</u>


       <b>zfs</b> <b>list</b> [<b>-rH</b>] [<b>-o</b> <u>prop</u>[,<u>prop</u>] ]... [ <b>-t</b> <u>type</u>[,<u>type</u>]...]
           [ <b>-s</b> <u>prop</u> [<b>-s</b> <u>prop</u>]... [ <b>-S</b> <u>prop</u> [<b>-S</b> <u>prop</u>]...
           [<u>filesystem</u>|<u>volume</u>|<u>snapshot</u>|<u>/pathname</u>|.<u>/pathname</u> ...


       <b>zfs</b> <b>set</b> <u>property</u>=<u>value</u> <u>filesystem</u>|<u>volume</u> ...


       <b>zfs</b> <b>get</b> [<b>-rHp</b>] [<b>-o</b> <u>field</u>[,<u>field</u>]...]
           [<b>-s</b> <u>source</u>[,<u>source</u>]...] <u>all</u> | <u>property</u>[,<u>property</u>]...
            <u>filesystem</u>|<u>volume</u>|<u>snapshot</u> ...


       <b>zfs</b> <b>inherit</b> [<b>-r</b>] <u>property</u> <u>filesystem</u>|<u>volume</u>... ...


       <b>zfs</b> <b>mount</b>


       <b>zfs</b> <b>mount</b> [<b>-o</b> <u>options</u>] [<b>-O</b>] <b>-a</b>


       <b>zfs</b> <b>mount</b> [<b>-o</b> <u>options</u>] [<b>-O</b>] <u>filesystem</u>


       <b>zfs</b> <b>unmount</b> [<b>-f</b>] <b>-a</b>


       <b>zfs</b> <b>unmount</b> [<b>-f</b>] <u>filesystem</u>|<u>mountpoint</u>


       <b>zfs</b> <b>share</b> <b>-a</b>


       <b>zfs</b> <b>share</b> <u>filesystem</u>


       <b>zfs</b> <b>unshare</b> [<b>-f</b>] <b>-a</b>


       <b>zfs</b> <b>unshare</b> [<b>-f</b>] <u>filesystem</u>|<u>mountpoint</u>


       <b>zfs</b> <b>send</b> [<b>-i</b> <u>snapshot1</u>] <u>snapshot2</u>


       <b>zfs</b> <b>receive</b> [<b>-vnF</b> ] <u>filesystem</u>|<u>volume</u>|<u>snapshot</u>


       <b>zfs</b> <b>receive</b> [<b>-vnF</b> ] <b>-d</b> <u>filesystem</u>


<b>DESCRIPTION</b>
       The  <b>zfs</b>  command  configures  ZFS  datasets  within  a ZFS storage pool, as described in <a href="zpool.8.html#//apple_ref/doc/man/8/zpool"><b>zpool</b>(8)</a>. A
       dataset is identified by a unique path within the ZFS namespace. For example:

         pool/{filesystem,volume,snapshot}



       where the maximum length of a dataset name is <b>MAXNAMELEN</b> (256 bytes).

       A dataset can be one of the following:

       <u>file</u> <u>system</u>    A standard POSIX file system. ZFS file systems can be mounted within the standard file
                      system namespace and behave like any other file system.


       <u>volume</u>         A  logical  volume exported as a raw or block device. This type of dataset should only
                      be used under special circumstances. File systems are typically used in most  environ-<font color="#ffffff" class="whiteout">ments.&nbsp;environments.</font>
                      ments.


       <u>snapshot</u>       A  read-only version of a file system or volume at a given point in time. It is speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
                      fied as <u>filesystem@name</u> or <u>volume@name</u>.


   <b>ZFS</b> <b>Read-only</b> <b>Implementation</b>
       ZFS on OSX is implemented as a readonly filesystem by default.  This means that only the ZFS  subcom-<font color="#ffffff" class="whiteout">mands&nbsp;subcommands</font>
       mands  that  do  non  write  operations  are  permitted.  Permitted subcommands are <b>list</b>, <b>get</b>, <b>mount</b>,
       <b>unmount</b>, and <b>send</b>.

       A full ZFS implementation that allows all subcommands and is read/write is available for download  at
       <a href="http://connect.apple.com/">http://connect.apple.com/</a>

       To determine which version of ZFS is loaded(readonly or writable):

         <b>#</b> <b>kextstat</b> <b>|</b> <b>grep</b> <b>zfs</b>

       com.apple.filesystems.zfs.readonly  is  the  readonly kext version.  com.apple.filesystems.zfs is the
       writable kext version.


   <b>ZFS</b> <b>File</b> <b>System</b> <b>Hierarchy</b>
       A ZFS storage pool is a logical collection of devices that provide space for datasets. A storage pool
       is also the root of the ZFS file system hierarchy.

       The  root of the pool can be accessed as a file system, such as mounting and unmounting, taking snap-
       shots, and setting properties. The physical storage characteristics,  however,  are  managed  by  the
       <a href="zpool.8.html#//apple_ref/doc/man/8/zpool"><b>zpool</b>(8)</a> command.

       See <a href="zpool.8.html#//apple_ref/doc/man/8/zpool"><b>zpool</b>(8)</a> for more information on creating and administering pools.

   <b>Snapshots</b>
       A  snapshot  is  a  read-only  copy  of  a  file system or volume. Snapshots can be created extremely
       quickly, and initially consume no additional space within the pool. As data within the active dataset
       changes, the snapshot consumes more data than would otherwise be shared with the active dataset.

       Snapshots  can have arbitrary names. Snapshots of volumes can be cloned or rolled back, but cannot be
       accessed independently.

       File system snapshots can be accessed under the ".zfs/snapshot" directory in the  root  of  the  file
       system.  Snapshots are automatically mounted on demand and may be unmounted at regular intervals. The
       visibility of the ".zfs" directory can be controlled by the "snapdir" property.

   <b>Clones</b>
       A clone is a writable volume or file system whose initial contents are the same as  another  dataset.
       As  with  snapshots,  creating  a clone is nearly instantaneous, and initially consumes no additional
       space.

       Clones can only be created from a snapshot. When a snapshot is cloned, it creates an implicit  depen-
       dency  between  the  parent and child. Even though the clone is created somewhere else in the dataset
       hierarchy, the original snapshot cannot be destroyed as long as a clone exists. The "origin" property
       exposes this dependency, and the <b>destroy</b> command lists any such dependencies, if they exist.

       The  clone  parent-child  dependency  relationship can be reversed by using the "<b>promote</b>" subcommand.
       This causes the "origin" file system to become a clone of the specified file system, which  makes  it
       possible to destroy the file system that the clone was created from.

   <b>Mount</b> <b>Points</b>
       Creating  a  ZFS  file  system  is  a simple operation, so the number of file systems per system will
       likely be numerous. To cope with this, ZFS automatically manages mounting and  unmounting  file  sys-
       tems.  All automatically managed file systems are mounted by ZFS at boot time.

       By  default,  file  systems are mounted under /Volumes/fs, where fs is the name of the file system in
       the ZFS namespace. Directories are created and destroyed as needed.

       A file system can also have a mount point set in the "mountpoint" property. This directory is created
       as  needed,  and ZFS automatically mounts the file system when the "<b>zfs</b> <b>mount</b> <b>-a</b>" command is invoked.
       The mountpoint property can be inherited, so if <b>Volumes/pool/home</b> has a mount point of <b>/export/stuff</b>,
       then <b>pool/home/user</b> automatically inherits a mount point of <b>/export/stuff/user</b>.

       A file system mountpoint property of "none" prevents the file system from being mounted.

       If  needed,  ZFS  file  systems can also be managed with traditional tools (<b>mount</b>, <b>umount</b>). If a file
       system's mount point is set to "legacy", ZFS makes no attempt to manage  the  file  system,  and  the
       administrator is responsible for mounting and unmounting the file system.

   <b>Native</b> <b>Properties</b>
       Properties  are divided into two types, native properties and user defined properties. Native proper-
       ties either export internal statistics or control ZFS behavior. In addition,  native  properties  are
       either editable or read-only. User properties have no effect on ZFS behavior, but you can use them to
       annotate datasets in a way that is meaningful in your environment. For more  information  about  user
       properties, see the "User Properties" section.

       Every  dataset  has  a  set of properties that export statistics about the dataset as well as control
       various behavior. Properties are inherited from the parent unless overridden by the  child.  Snapshot
       properties  can  not be edited; they always inherit their inheritable properties. Properties that are
       not applicable to snapshots are not displayed.

       The values of numeric properties can be specified using the following  human-readable  suffixes  (for
       example,  "k",  "KB", "M", "Gb", etc, up to Z for zettabyte). The following are all valid (and equal)
       specifications:

         "1536M", "1.5g", "1.50GB".



       The values of non-numeric properties are case sensitive and must be  lowercase,  except  for  "mount-
       point" and "sharenfs".

       The  first set of properties consist of read-only statistics about the dataset. These properties can-
       not be set, nor are they inherited. Native properties apply to all  dataset  types  unless  otherwise
       noted.

       <b>type</b>             The type of dataset: "filesystem", "volume", "snapshot", or "clone".


       <b>creation</b>         The time this dataset was created.


       <b>used</b>             The  amount  of  space consumed by this dataset and all its descendants. This is the
                        value that is checked against this dataset's quota and reservation. The  space  used
                        does not include this dataset's reservation, but does take into account the reserva-
                        tions of any descendant datasets.  The amount of space that a dataset consumes  from
                        its  parent,  as  well  as the amount of space that will be freed if this dataset is
                        recursively destroyed, is the greater of its space used and its reservation.

                        When snapshots (see the "Snapshots" section) are created, their space  is  initially
                        shared  between  the  snapshot and the file system, and possibly with previous snap-
                        shots. As the file system changes, space that was previously shared  becomes  unique
                        to  the  snapshot,  and counted in the snapshot's space used. Additionally, deleting
                        snapshots can increase the amount of space unique to (and used by) other  snapshots.

                        The  amount of space used, available, or referenced does not take into account pend-
                        ing changes. Pending changes are generally accounted for within a few seconds.  Com-
                        mitting  a change to a disk using <!-- a --><b>fsync</b>(3c)<!-- /a --> or <b>O_SYNC</b> does not necessarily guarantee
                        that the space usage information is updated immediately.


       <b>available</b>        The amount of space available to the dataset and all  its  children,  assuming  that
                        there  is  no  other  activity  in  the pool. Because space is shared within a pool,
                        availability can be limited by any number of factors, including physical pool  size,
                        quotas, reservations, or other datasets within the pool.

                        This property can also be referred to by its shortened column name, "avail".


       <b>referenced</b>       The  amount  of  data  that  is  accessible by this dataset, which may or may not be
                        shared with other datasets in the pool. When a snapshot or clone is created, it ini-
                        tially  references  the  same  amount of space as the file system or snapshot it was
                        created from, since its contents are identical.

                        This property can also be referred to by its shortened column name, "refer".


       <b>compressratio</b>    The compression ratio achieved for this dataset, expressed as a multiplier. Compres-
                        sion can be turned on by running "zfs set compression=on <u>dataset</u>". The default value
                        is "off".


       <b>mounted</b>          For file systems, indicates whether the file system is currently mounted. This prop-
                        erty can be either "yes" or "no".


       <b>origin</b>           For  cloned  file systems or volumes, the snapshot from which the clone was created.
                        The origin cannot be destroyed (even with the <b>-r</b> or <b>-f</b> options) so long as  a  clone
                        exists.


       The following two properties can be set to control the way space is allocated between datasets. These
       properties are not inherited, but do affect their descendants.

       <b>quota=</b><u>size</u> | <u>none</u>

           Limits the amount of space a dataset and its descendants can consume. This  property  enforces  a
           hard  limit on the amount of space used. This includes all space consumed by descendants, includ-
           ing file systems and snapshots. Setting a quota on a descendant of a dataset that already  has  a
           quota does not override the ancestor's quota, but rather imposes an additional limit.

           Quotas cannot be set on volumes, as the "volsize" property acts as an implicit quota.


       <b>reservation=</b><u>size</u> | <u>none</u>

           The minimum amount of space guaranteed to a dataset and its descendants. When the amount of space
           used is below this value, the dataset is treated as if it were taking  up  the  amount  of  space
           specified  by its reservation. Reservations are accounted for in the parent datasets' space used,
           and count against the parent datasets' quotas and reservations.

           This property can also be referred to by its shortened column name, "reserv".


       <b>volsize=</b><u>size</u>

           For volumes.  ZFS volumes are not supported yet in OSX.


       <b>volblocksize=</b><u>blocksize</u>

           For volumes. ZFS volumes are not supported yet in OSX.



       <b>recordsize=</b><u>size</u>

           Specifies a suggested block size for files in the file system. This property is  designed  solely
           for  use with database workloads that access files in fixed-size records. <b>ZFS</b> automatically tunes
           block sizes according to internal algorithms optimized for typical access patterns.

           For databases that create very large files but access them in small random  chunks,  these  algo-
           rithms  may  be suboptimal. Specifying a "recordsize" greater than or equal to the record size of
           the database can result in significant performance gains. Use of this property for  general  pur-
           pose file systems is strongly discouraged, and may adversely affect performance.

           The  size specified must be a power of two greater than or equal to 512 and less than or equal to
           128 Kbytes.

           Changing the file system's <b>recordsize</b> only affects files created afterward;  existing  files  are
           unaffected.

           This property can also be referred to by its shortened column name, "recsize".


       <b>mountpoint=</b><u>path</u> | <u>none</u> | <u>legacy</u>

           Controls  the  mount  point  used  for  this file system. See the "Mount Points" section for more
           information on how this property is used.

           When the mountpoint property is changed for a file system, the file system and any children  that
           inherit  the mount point are unmounted. If the new value is "legacy", then they remain unmounted.
           Otherwise, they are automatically remounted in the new location if the  property  was  previously
           "legacy"  or  "none",  or  if they were mounted before the property was changed. In addition, any
           shared file systems are unshared and shared in the new location.


       <b>sharenfs=</b><u>on</u> | <u>off</u> | <u>opts</u>

           Controls whether the file system is shared via <b>NFS</b>, and what options are used. A file system with
           a sharenfs property of "off" is managed through traditional tools such as <!-- a --><b>share</b>(1M)<!-- /a -->, <!-- a --><b>unshare</b>(1M)<!-- /a -->,
           and <!-- a --><b>dfstab</b>(4)<!-- /a -->. Otherwise, the file system is automatically shared  and  unshared  with  the  "<b>zfs</b>
           <b>share</b>"  and  "<b>zfs</b>  <b>unshare</b>"  commands.  If  the property is set to "on", the <!-- a --><b>share</b>(1M)<!-- /a --> command is
           invoked with no options. Otherwise, the <!-- a --><b>share</b>(1M)<!-- /a --> command is invoked with options  equivalent  to
           the contents of this property.

           When  the  "sharenfs"  property is changed for a dataset, the dataset and any children inheriting
           the property are re-shared with the new options, only if the property was previously "off", or if
           they  were shared before the property was changed. If the new property is "off", the file systems
           are unshared.



       <b>checksum=</b><u>on</u> | <u>off</u> | <u>fletcher2</u>, | <u>fletcher4</u> | <u>sha256</u>

           Controls the checksum used to verify data integrity. The default value is "on",  which  automati-
           cally  selects  an  appropriate  algorithm  (currently,  <u>fletcher2</u>, but this may change in future
           releases). The value "off" disables integrity checking on user data. Disabling checksums is NOT a
           recommended practice.


       <b>compression=</b><u>on</u> | <u>off</u> | <u>lzjb</u> | <u>gzip</u> | <u>gzip-N</u>

           Controls  the  compression  algorithm  used for this dataset. The "lzjb" compression algorithm is
           optimized for performance while providing decent data compression. Setting  compression  to  "on"
           uses  the "lzjb" compression algorithm. The "gzip" compression algorithm is not yet supported for
           OSX.  The "gzip" compression algorithm uses the same compression as the <a href="../man1/gzip.1.html#//apple_ref/doc/man/1/gzip"><b>gzip</b>(1)</a> command.  You can
           specify the "gzip" level by using the value "gzip-<u>N</u>", where <u>N</u> is an integer from 1 (fastest) to 9
           (best compression ratio). Currently, "gzip" is equivalent to "gzip-6" (which is also the  default
           for <a href="../man1/gzip.1.html#//apple_ref/doc/man/1/gzip"><b>gzip</b>(1)</a>).

           This property can also be referred to by its shortened column name "compress".


       <b>atime=</b><u>on</u> | <u>off</u>

           Controls  whether  the access time for files is updated when they are read. Turning this property
           off avoids producing write traffic when reading files and can result in  significant  performance
           gains, though it might confuse mailers and other similar utilities. The default value is "on".


       <b>devices=</b><u>on</u> | <u>off</u>

           Controls whether device nodes can be opened on this file system. The default value is "on".


       <b>exec=</b><u>on</u> | <u>off</u>

           Controls  whether  processes  can  be executed from within this file system. The default value is
           "on".


       <b>setuid=</b><u>on</u> | <u>off</u>

           Controls whether the set-<b>UID</b> bit is respected for the file system. The default value is "on".


       <b>readonly=</b><u>on</u> | <u>off</u>

           Controls whether this dataset can be modified. The default value is "off".

           This property can also be referred to by its shortened column name, "rdonly".



       <b>snapdir=</b><u>hidden</u> | <u>visible</u>

           Controls whether the ".zfs" directory is hidden or visible in the root of the file system as dis-
           cussed in the "Snapshots" section. The default value is "hidden".


       <b>aclmode=discard</b> | <b>groupmask</b> | <b>passthrough</b>

           Controls  how  an  <b>ACL</b>  is  modified during <a href="../man2/chmod.2.html#//apple_ref/doc/man/2/chmod"><b>chmod</b>(2)</a>. A file system with an "aclmode" property of
           "<b>discard</b>" deletes all <b>ACL</b> entries that do not represent the mode of the file. An "aclmode"  prop-
           erty of "<b>groupmask</b>" (the default) reduces user or group permissions. The permissions are reduced,
           such that they are no greater than the group permission bits, unless it is a user entry that  has
           the same <b>UID</b> as the owner of the file or directory. In this case, the <b>ACL</b> permissions are reduced
           so that they are no greater than owner permission bits. A file system with an "aclmode"  property
           of "<b>passthrough</b>" indicates that no changes will be made to the <b>ACL</b> other than generating the nec-
           essary <b>ACL</b> entries to represent the new mode of the file or directory.


       <b>aclinherit=discard</b> | <b>noallow</b> | <b>secure</b> | <b>passthrough</b>

           Controls how <b>ACL</b> entries are inherited when files and directories are created. A file system with
           an  "aclinherit"  property  of  "<b>discard</b>" does not inherit any <b>ACL</b> entries. A file system with an
           "aclinherit" property value of "<b>noallow</b>" only  inherits  inheritable  <b>ACL</b>  entries  that  specify
           "deny"  permissions.  The  property  value  "<b>secure</b>"  (the  default)  removes the "<b>write_acl</b>" and
           "<b>write_owner</b>" permissions when the <b>ACL</b> entry is inherited. A file  system  with  an  "aclinherit"
           property  value  of  "<b>passthrough</b>" inherits all inheritable <b>ACL</b> entries without any modifications
           made to the <b>ACL</b> entries when they are inherited.


       <b>canmount=on</b> | <b>off</b>

           If this property is set to "<b>off</b>", the file system cannot be mounted, and is ignored by "<b>zfs</b> <b>mount</b>
           <b>-a</b>".  This  is  similar  to  setting the "mountpoint" property to "<b>none</b>", except that the dataset
           still has a normal "mountpoint" property which can be inherited. This allows datasets to be  used
           solely  as  a  mechanism  to  inherit  properties. One use case is to have two logically separate
           datasets have the same mountpoint, so that the children of  both  datasets  appear  in  the  same
           directory, but may have different inherited characteristics. The default value is "<b>on</b>".

           This property is not inherited.


       <b>xattr=on</b> | <b>off</b>

           Controls whether extended attributes are enabled for this file system. The default value is "<b>on</b>".


       <b>copies=1</b> | <b>2</b> | <b>3</b>

           Controls the number of copies of data stored for this dataset. These copies are  in  addition  to
           any  redundancy  provided by the pool, for example, mirroring or raid-z. The copies are stored on
           different disks, if possible. The space used by multiple copies is charged to the associated file
           and dataset, changing the "used" property and counting against quotas and reservations.

           Changing this property only affects newly-written data. Therefore, set this property at file sys-
           tem creation time by using the "<b>-o</b> copies=" option.


   <b>Temporary</b> <b>Mount</b> <b>Point</b> <b>Properties</b>
       When a file system is mounted, either through <!-- a --><b>mount</b>(1M)<!-- /a --> for legacy mounts or the "<b>zfs</b> <b>mount</b>"  command
       for  normal  file  systems,  its  mount  options are set according to its properties. The correlation
       between properties and mount options is as follows:

             PROPERTY                MOUNT OPTION
             devices                 devices/nodevices
             exec                    exec/noexec
             readonly                ro/rw
             setuid                  setuid/nosetuid
             xattr                   xattr/noxattr



       In addition, these options can be set on a per-mount basis using the <b>-o</b> option, without affecting the
       property  that is stored on disk. The values specified on the command line override the values stored
       in the dataset. The <b>-nosuid</b> option is  an  alias  for  "nodevices,nosetuid".   These  properties  are
       reported  as "temporary" by the "<b>zfs</b> <b>get</b>" command. If the properties are changed while the dataset is
       mounted, the new setting overrides any temporary settings.

   <b>User</b> <b>Properties</b>
       In addition to the standard native properties, ZFS supports arbitrary user properties.  User  proper-
       ties  have  no  effect  on  ZFS behavior, but applications or administrators can use them to annotate
       datasets.

       User property names must contain a colon (":") character, to distinguish them from native properties.
       They might contain lowercase letters, numbers, and the following punctuation characters: colon (":"),
       dash ("-"), period ("."), and underscore ("_"). The expected convention is that the property name  is
       divided  into two portions such as "<u>module</u>:<u>property</u>", but this namespace is not enforced by <b>ZFS</b>. User
       property names can be at most 256 characters, and cannot begin with a dash ("-").

       When making programmatic use of user properties, it is strongly  suggested  to  use  a  reversed  <b>DNS</b>
       domain  name  for the <u>module</u> component of property names to reduce the chance that two independently-
       developed packages use the same property name for different purposes. Property names  beginning  with
       "com.apple." are reserved for use by Apple Inc.

       The  values  of user properties are arbitrary strings, are always inherited, and are never validated.
       All of the commands that operate on properties ("zfs list", "zfs get", "zfs set", etc.) can  be  used
       to  manipulate  both native properties and user properties.  Use the "<b>zfs</b> <b>inherit</b>" command to clear a
       user property . If the property is not defined in any parent dataset, it is removed  entirely.  Prop-
       erty values are limited to 1024 characters.

   <b>Volumes</b> <b>as</b> <b>Swap</b> <b>or</b> <b>Dump</b> <b>Devices</b>
       To  set  up  a swap area, create a <b>ZFS</b> volume of a specific size and then enable swap on that device.
       For more information, see the EXAMPLES section.

       Do not swap to a file on a <b>ZFS</b> file system. A <b>ZFS</b> swap file configuration is not supported.

       Using a <b>ZFS</b> volume as a dump device is not supported.

<b>SUBCOMMANDS</b>
       All subcommands that modify state are logged persistently to the pool in their original form.

       <b>zfs</b> <b>?</b>

           Displays a help message.


       <b>zfs</b> <b>create</b> [[<b>-o</b> property=value]...] <u>filesystem</u>

           Creates a new <b>ZFS</b> file system. The file system is automatically mounted according to the  "mount-
           point" property inherited from the parent.

           <b>-o</b> property=value    Sets  the  specified  property as if "<b>zfs</b> <b>set</b> <b>property=value</b>" was invoked at
                                the same time the dataset was created. Any editable <b>ZFS</b> property can also be
                                set at creation time. Multiple <b>-o</b> options can be specified. An error results
                                if the same property is specified in multiple <b>-o</b> options.



       <b>zfs</b> <b>create</b> [<b>-s</b>] [<b>-b</b> <u>blocksize</u>] [[<b>-o</b> property=value]...] <b>-V</b> <u>size</u> <u>volume</u>

           Creates a volume of the given size.  The size represents the logical  size  as  exported  by  the
           device. By default, a reservation of equal size is created.

           <u>size</u> is automatically rounded up to the nearest 128 Kbytes to ensure that the volume has an inte-
           gral number of blocks regardless of <u>blocksize</u>.

           <b>-s</b>                   Creates a sparse volume with no reservation. See  "volsize"  in  the  Native
                                Properties section for more information about sparse volumes.


           <b>-o</b> property=value    Sets  the  specified  property as if "<b>zfs</b> <b>set</b> <b>property=value</b>" was invoked at
                                the same time the dataset was created. Any editable <b>ZFS</b> property can also be
                                set at creation time. Multiple <b>-o</b> options can be specified. An error results
                                if the same property is specified in multiple <b>-o</b> options.


           <b>-b</b> <u>blocksize</u>         Equivalent to "<b>-o</b> <b>volblocksize=</b><u>blocksize</u>". If this option  is  specified  in
                                conjunction with "<b>-o</b> <b>volblocksize</b>", the resulting behavior is undefined.



       <b>zfs</b> <b>destroy</b> [<b>-rRf</b>] <u>filesystem</u>|<u>volume</u>|<u>snapshot</u>

           Destroys  the given dataset. By default, the command unshares any file systems that are currently
           shared, unmounts any file systems that are currently mounted, and refuses to  destroy  a  dataset
           that has active dependents (children, snapshots, clones).

           <b>-r</b>    Recursively  destroy  all  children. If a snapshot is specified, destroy all snapshots with
                 this name in descendant file systems.


           <b>-R</b>    Recursively destroy all dependents, including cloned file systems outside the target  hier-
                 archy.  If a snapshot is specified, destroy all snapshots with this name in descendant file
                 systems.


           <b>-f</b>    Force an unmount of any file systems using the "<b>unmount</b> <b>-f</b>" command.  This  option  has  no
                 effect on non-file systems or unmounted file systems.

           Extreme  care  should be taken when applying either the <b>-r</b> or the <b>-f</b> options, as they can destroy
           large portions of a pool and cause unexpected behavior for mounted file systems in use.


       <b>zfs</b> <b>clone</b> <u>snapshot</u> <u>filesystem</u>|<u>volume</u>

           Creates a clone of the given snapshot. See the "Clones" section for details. The  target  dataset
           can be located anywhere in the <b>ZFS</b> hierarchy, and is created as the same type as the original.


       <b>zfs</b> <b>promote</b> <u>filesystem</u>

           Promotes  a  clone  file system to no longer be dependent on its "origin" snapshot. This makes it
           possible to destroy the file system that the clone  was  created  from.  The  clone  parent-child
           dependency  relationship  is  reversed,  so  that the "origin" file system becomes a clone of the
           specified file system.

           The snaphot that was cloned, and any snapshots previous to this snapshot, are now  owned  by  the
           promoted  clone. The space they use moves from the "origin" file system to the promoted clone, so
           enough space must be available to accommodate these snapshots. No new space is consumed  by  this
           operation, but the space accounting is adjusted. The promoted clone must not have any conflicting
           snapshot names of its own. The "<b>rename</b>" subcommand can be used to rename  any  conflicting  snap-
           shots.


       <b>zfs</b> <b>rename</b> <u>filesystem</u>|<u>volume</u>|<u>snapshot</u> <u>filesystem</u>|<u>volume</u>|<u>snapshot</u>

           Renames  the given dataset. The new target can be located anywhere in the <b>ZFS</b> hierarchy, with the
           exception of snapshots. Snapshots can only be renamed within the parent file  system  or  volume.
           When renaming a snapshot, the parent file system of the snapshot does not need to be specified as
           part of the second argument. Renamed file systems can inherit new mount  points,  in  which  case
           they are unmounted and remounted at the new mount point.


       <b>zfs</b> <b>snapshot</b> [<b>-r</b>] <u>filesystem@name</u>|<u>volume@name</u>

           Creates a snapshot with the given name. See the "Snapshots" section for details.

           <b>-r</b>    Recursively create snapshots of all descendant datasets. Snapshots are taken atomically, so
                 that all recursive snapshots correspond to the same moment in time.



       <b>zfs</b> <b>rollback</b> [<b>-rRf</b>] <u>snapshot</u>

           Roll back the given dataset to a previous snapshot. When a dataset is rolled back, all data  that
           has  changed since the snapshot is discarded, and the dataset reverts to the state at the time of
           the snapshot. By default, the command refuses to roll back to a  snapshot  other  than  the  most
           recent  one. In order to do so, all intermediate snapshots must be destroyed by specifying the <b>-r</b>
           option. The file system is unmounted and remounted, if necessary.

           <b>-r</b>    Recursively destroy any snapshots more recent than the one specified.


           <b>-R</b>    Recursively destroy any more recent snapshots, as well as any clones of those snapshots.


           <b>-f</b>    Force an unmount of any file systems using the "<b>unmount</b> <b>-f</b>" command.



       <b>zfs</b> <b>list</b> [<b>-rH</b>] [<b>-o</b> <u>prop</u>[,<u>prop</u>] ]... [ <b>-t</b> <u>type</u>[,<u>type</u>]...] [ <b>-s</b> <u>prop</u> [<b>-s</b> <u>prop</u>]... [ <b>-S</b> <u>prop</u> [<b>-S</b>
       <u>prop</u>]... [<u>filesystem</u>|<u>volume</u>|<u>snapshot</u>|<u>/pathname</u>|.<u>/pathname</u> ...

           Lists the property information for the given datasets in tabular form. If specified, you can list
           property information by the absolute pathname or the relative pathname. By default, all  datasets
           are displayed and contain the following fields:

             name,used,available,referenced,mountpoint



           <b>-H</b>         Used  for  scripting  mode.  Do  not print headers and separate fields by a single tab
                      instead of arbitrary whitespace.


           <b>-r</b>         Recursively display any children of the dataset on the command line.


           <b>-o</b> <u>prop</u>    A comma-separated list of properties to display. The property must be one of the prop-
                      erties  described  in  the "Native Properties" section, or the special value "name" to
                      display the dataset name.


           <b>-s</b> <u>prop</u>    A property to use for sorting the output by column in ascending  order  based  on  the
                      value  of  the  property.  The property must be one of the properties described in the
                      "Properties" section, or the special value "name" to sort by the dataset name.  Multi-
                      ple properties can be specified at one time using multiple <b>-s</b> property options. Multi-
                      ple <b>-s</b> options are evaluated from left to right in decreasing order of importance.

                      The following is a list of sorting criteria:

                          o      Numeric types sort in numeric order.

                          o      String types sort in alphabetical order.

                          o      Types inappropriate for a row sort that row to the literal bottom,  regard-
                                 less of the specified ordering.

                          o      If  no sorting options are specified the existing behavior of "<b>zfs</b> <b>list</b>" is
                                 preserved.


           <b>-S</b> <u>prop</u>    Same as the <b>-s</b> option, but sorts by property in descending order.


           <b>-t</b> <u>type</u>    A comma-separated list of types to display,  where  "type"  is  one  of  "filesystem",
                      "snapshot" or "volume". For example, specifying "<b>-t</b> <b>snapshot</b>" displays only snapshots.



       <b>zfs</b> <b>set</b> <u>property</u>=<u>value</u> <u>filesystem</u>|<u>volume</u> ...

           Sets the property to the given value for each dataset. Only some properties can  be  edited.  See
           the  "Properties"  section for more information on what properties can be set and acceptable val-
           ues. Numeric values can be specified as exact values, or in a human-readable form with  a  suffix
           of  "B",  "K",  "M",  "G",  "T",  "P", "E", "Z" (for bytes, Kbytes, Mbytes, gigabytes, terabytes,
           petabytes, exabytes, or zettabytes, respectively). Properties cannot be set on snapshots.


       <b>zfs</b> <b>get</b> [<b>-rHp</b>] [<b>-o</b> <u>field</u>[,<u>field</u>]...] [<b>-s</b> <u>source</u>[,<u>source</u>]...] <u>all</u> | <u>property</u>[,<u>property</u>]... <u>filesys</u>-
       <u>tem</u>|<u>volume</u>|<u>snapshot</u> ...

           Displays  properties  for the given datasets. If no datasets are specified, then the command dis-
           plays properties for all datasets on the system. For each property,  the  following  columns  are
           displayed:

                 name      Dataset name
                 property  Property name
                 value     Property value
                 source    Property source. Can either be local, default,
                           temporary, inherited, or none (-).


           All  columns are displayed by default, though this can be controlled by using the <b>-o</b> option. This
           command takes a comma-separated list of properties as described in the  "Native  Properties"  and
           "User Properties" sections.

           The special value "all" can be used to display all properties for the given dataset.

           <b>-r</b>           Recursively display properties for any children.


           <b>-H</b>           Display output in a form more easily parsed by scripts. Any headers are omitted, and
                        fields are explicitly separated by a single tab instead of an  arbitrary  amount  of
                        space.


           <b>-o</b> <u>field</u>     A  comma-separated  list  of columns to display. "name,property,value,source" is the
                        default value.


           <b>-s</b> <u>source</u>    A comma-separated list of sources to display. Those properties coming from a  source
                        other than those in this list are ignored. Each source must be one of the following:
                        "local,default,inherited,temporary,none". The default value is all sources.


           <b>-p</b>           Display numbers in parsable (exact) values.



       <b>zfs</b> <b>inherit</b> [<b>-r</b>] <u>property</u> <u>filesystem</u>|<u>volume</u> ...

           Clears the specified property, causing it to be inherited from an ancestor. If  no  ancestor  has
           the  property  set, then the default value is used. See the "Properties" section for a listing of
           default values, and details on which properties can be inherited.

           <b>-r</b>    Recursively inherit the given property for all children.



       <b>zfs</b> <b>mount</b>

           Displays all <b>ZFS</b> file systems currently mounted.


       <b>zfs</b> <b>mount</b>[<b>-o</b> <u>opts</u>] [<b>-O</b>] <b>-a</b>

           Mounts all available ZFS file systems. Invoked automatically as part of the boot process.

           <b>-o</b> <u>opts</u>    An optional comma-separated list of mount options to use temporarily for the  duration
                      of the mount. See the "Temporary Mount Point Properties" section for details.


           <b>-O</b>         Perform an overlay mount. See <!-- a --><b>mount</b>(1M)<!-- /a --> for more information.



       <b>zfs</b> <b>mount</b> [<b>-o</b> <u>opts</u>] [<b>-O</b>] <u>filesystem</u>

           Mounts a specific ZFS file system. This is typically not necessary, as file systems are automati-
           cally mounted when they are created or the  mountpoint  property  has  changed.  See  the  "Mount
           Points" section for details.

           <b>-o</b> <u>opts</u>    An  optional comma-separated list of mount options to use temporarily for the duration
                      of the mount. See the "Temporary Mount Point Properties" section for details.


           <b>-O</b>         Perform an overlay mount. See <!-- a --><b>mount</b>(1M)<!-- /a --> for more information.



       <b>zfs</b> <b>unmount</b> <b>-a</b>

           Unmounts all currently mounted <b>ZFS</b> file systems. Invoked automatically as part  of  the  shutdown
           process.


       <b>zfs</b> <b>unmount</b> [<b>-f</b>] <u>filesystem</u>|<u>mountpoint</u>

           Unmounts  the  given file system. The command can also be given a path to a <b>ZFS</b> file system mount
           point on the system.

           <b>-f</b>    Forcefully unmount the file system, even if it is currently in use.



       <b>zfs</b> <b>share</b> <b>-a</b>

           Share is not supported for ZFS on OSX.



       <b>zfs</b> <b>unshare</b> <b>-a</b>

           Unshare is not supported for ZFS on OSX.




       <b>zfs</b> <b>send</b> [<b>-i</b> <u>snapshot1</u>] <u>snapshot2</u>

           Creates a stream representation of snapshot2, which is written to standard output. The output can
           be  redirected  to a file or to a different system (for example, using <a href="../man1/ssh.1.html#//apple_ref/doc/man/1/ssh"><b>ssh</b>(1)</a>. By default, a full
           stream is generated.

           <b>-i</b> <u>snapshot1</u>    Generate an incremental stream  from  <u>snapshot1</u>  to  <u>snapshot2</u>.  The  incremental
                           source <u>snapshot1</u> can be specified as the last component of the snapshot name (for
                           example, the part after the "@"), and it is assumed to be from the same file sys-
                           tem as <u>snapshot2</u>.



       The  format  of the stream is evolving. No backwards compatibility is guaranteed. You may not be able
       to receive your streams on future versions of <b>ZFS</b>.

       <b>zfs</b> <b>receive</b> [<b>-vnF</b>] <u>filesystem</u>|<u>volume</u>|<u>snapshot</u>
       <b>zfs</b> <b>receive</b> [<b>-vnF</b>] <b>-d</b> <u>filesystem</u>

           Creates a snapshot whose contents are as specified in the stream provided on standard input. If a
           full stream is received, then a new file system is created as well. Streams are created using the
           "<b>zfs</b> <b>send</b>" subcommand, which by default creates a full stream. "<b>zfs</b> <b>recv</b>" can be used as an alias
           for "<b>zfs</b> <b>receive</b>".

           If  an  incremental  stream is received, then the destination file system must already exist, and
           its most recent snapshot must match the incremental stream's source. The destination file  system
           and  all of its child file systems are unmounted and cannot be accessed during the receive opera-
           tion.

           The name of the snapshot (and file system, if a full stream is  received)  that  this  subcommand
           creates depends on the argument type and the <b>-d</b> option.

           If  the argument is a snapshot name, the specified <u>snapshot</u> is created. If the argument is a file
           system or volume name, a snapshot with the same name as the sent snapshot is created  within  the
           specified  <u>filesystem</u>  or <u>volume</u>.  If the <b>-d</b> option is specified, the snapshot name is determined
           by appending the sent snapshot's name to the specified <u>filesystem</u>. If the <b>-d</b> option is specified,
           any required file systems within the specified one are created.

           <b>-d</b>    Use the name of the sent snapshot to determine the name of the new snapshot as described in
                 the paragraph above.


           <b>-v</b>    Print verbose information about the stream and the time required  to  perform  the  receive
                 operation.


           <b>-n</b>    Do not actually receive the stream. This can be useful in conjunction with the <b>-v</b> option to
                 determine what name the receive operation would use.


           <b>-F</b>    Force a rollback of the <u>filesystem</u> to  the  most  recent  snapshot  before  performing  the
                 receive operation.



<b>EXAMPLES</b>
       <b>Example</b> <b>1</b> Creating a ZFS File System Hierarchy

       The   following   commands   create  a  file  system  named  "<b>pool/home</b>"  and  a  file  system  named
       "<b>pool/home/bob</b>". The mount point "<b>/export/home</b>" is set for the parent file system, and  automatically
       inherited by the child file system.


         # zfs create pool/home
         # zfs set mountpoint=/export/home pool/home
         # zfs create pool/home/bob



       <b>Example</b> <b>2</b> Creating a ZFS Snapshot

       The following command creates a snapshot named "yesterday". This snapshot is mounted on demand in the
       ".zfs/snapshot" directory at the root of the "<b>pool/home/bob</b>" file system.


         # zfs snapshot pool/home/bob@yesterday



       <b>Example</b> <b>3</b> Taking and destroying multiple snapshots

       The following command creates snapshots named "<b>yesterday</b>" of "<b>pool/home</b>" and all  of  its  descendant
       file  systems. Each snapshot is mounted on demand in the ".zfs/snapshot" directory at the root of its
       file system. The second command destroys the newly created snapshots.


         # <b>zfs</b> <b>snapshot</b> <b>-r</b> <b>pool/home@yesterday</b>
         <b>#</b> <b>zfs</b> <b>destroy</b> <b>-r</b> <b>pool/home@yesterday</b>



       <b>Example</b> <b>4</b> Turning Off Compression

       The following commands turn compression off for all file systems under  "<b>pool/home</b>",  but  explicitly
       turns it on for "<b>pool/home/anne</b>".


         <b>#</b> <b>zfs</b> <b>set</b> <b>compression=off</b> <b>pool/home</b>
         <b>#</b> <b>zfs</b> <b>set</b> <b>compression=on</b> <b>pool/home/anne</b>



       <b>Example</b> <b>5</b> Listing ZFS Datasets

       The following command lists all active file systems and volumes in the system.


         <b>#</b> <b>zfs</b> <b>list</b>


           NAME                      USED  AVAIL  REFER  MOUNTPOINT
           pool                      100G   60G       -  /Volumes/pool
           pool/home                 100G   60G       -  /Volumes/export/home
           pool/home/bob              40G   60G     40G  /Volumes/export/home/bob
           pool/home/bob@yesterday     3M     -     40G  -
           pool/home/anne             60G   60G     40G  /Volumes/export/home/anne



       <b>Example</b> <b>6</b> Setting a Quota on a ZFS File System

       The following command sets a quota of 50 gbytes for "<b>pool/home/bob</b>".


         <b>#</b> <b>zfs</b> <b>set</b> <b>quota=50G</b> <b>pool/home/bob</b>



       <b>Example</b> <b>7</b> Listing ZFS Properties

       The following command lists all properties for "<b>pool/home/bob</b>".


         <b>#</b> <b>zfs</b> <b>get</b> <b>all</b> <b>pool/home/bob</b>


           NAME           PROPERTY       VALUE                  SOURCE
           pool/home/bob  type           filesystem             -
           pool/home/bob  creation       Fri Feb 23 14:20 2007  -
           pool/home/bob  used           24.5K                  -
           pool/home/bob  available      50.0G                  -
           pool/home/bob  referenced     24.5K                  -
           pool/home/bob  compressratio  1.00x                  -
           pool/home/bob  mounted        yes                    -
           pool/home/bob  quota          50G                    local
           pool/home/bob  reservation    none                   default
           pool/home/bob  recordsize     128K                   default
           pool/home/bob  mountpoint     /pool/home/bob         default
           pool/home/bob  sharenfs       off                    default
           pool/home/bob  shareiscsi     off                    default
           pool/home/bob  checksum       on                     default
           pool/home/bob  compression    off                    default
           pool/home/bob  atime          on                     default
           pool/home/bob  devices        on                     default
           pool/home/bob  exec           on                     default
           pool/home/bob  setuid         on                     default
           pool/home/bob  readonly       off                    default
           pool/home/bob  zoned          off                    default
           pool/home/bob  snapdir        hidden                 default
           pool/home/bob  aclmode        groupmask              default
           pool/home/bob  aclinherit     secure                 default
           pool/home/bob  canmount       on                     default
           pool/home/bob  xattr          on                     default





       The following command gets a single property value.


         <b>#</b> <b>zfs</b> <b>get</b> <b>-H</b> <b>-o</b> <b>value</b> <b>compression</b> <b>pool/home/bob</b>
         on



       The following command lists all properties with local settings for "<b>pool/home/bob</b>".


         <b>#</b> <b>zfs</b> <b>get</b> <b>-r</b> <b>-s</b> <b>local</b> <b>-o</b> <b>name,property,value</b> <b>all</b> <b>pool/home/bob</b>

           NAME             PROPERTY      VALUE
           pool             compression   on
           pool/home        checksum      off



       <b>Example</b> <b>8</b> Rolling Back a ZFS File System

       The  following  command  reverts  the contents of "<b>pool/home/anne</b>" to the snapshot named "<b>yesterday</b>",
       deleting all intermediate snapshots.


         <b>#</b> <b>zfs</b> <b>rollback</b> <b>-r</b> <b>pool/home/anne@yesterday</b>



       <b>Example</b> <b>9</b> Creating a ZFS Clone

       The following command creates a  writable  file  system  whose  initial  contents  are  the  same  as
       "<b>pool/home/bob@yesterday</b>".


         <b>#</b> <b>zfs</b> <b>clone</b> <b>pool/home/bob@yesterday</b> <b>pool/clone</b>



       <b>Example</b> <b>10</b> Promoting a ZFS Clone

       The  following  commands  illustrate  how  to test out changes to a file system, and then replace the
       original file system with the changed one, using clones, clone promotion, and renaming:


         <b>#</b> <b>zfs</b> <b>create</b> <b>pool/project/production</b>
          populate /pool/project/production with data
         <b>#</b> <b>zfs</b> <b>snapshot</b> <b>pool/project/production@today</b>
         <b>#</b> <b>zfs</b> <b>clone</b> <b>pool/project/production@today</b> <b>pool/project/beta</b>
          make changes to /pool/project/beta and test them
         <b>#</b> <b>zfs</b> <b>promote</b> <b>pool/project/beta</b>
         <b>#</b> <b>zfs</b> <b>rename</b> <b>pool/project/production</b> <b>pool/project/legacy</b>
         <b>#</b> <b>zfs</b> <b>rename</b> <b>pool/project/beta</b> <b>pool/project/production</b>
          once the legacy version is no longer needed, it can be
          destroyed
         <b>#</b> <b>zfs</b> <b>destroy</b> <b>pool/project/legacy</b>



       <b>Example</b> <b>11</b> Inheriting ZFS Properties

       The following command causes "<b>pool/home/bob</b>" and "<b>pool/home/anne</b>" to inherit the "checksum"  property
       from their parent.


         <b>#</b> <b>zfs</b> <b>inherit</b> <b>checksum</b> <b>pool/home/bob</b> <b>pool/home/anne</b>



       <b>Example</b> <b>12</b>  Replicating ZFS Data

       The  following commands send a full stream and then an incremental stream to respective backup files,
       restoring them into "<b>poolB/received/fs</b>@a" and "<b>poolB/received/fs@b</b>", respectively. "<b>poolB</b>" must  con-
       tain the file system "<b>poolB/received</b>", and must not initially contain "<b>poolB/received/fs</b>".


         # zfs send pool/fs@a &gt; /tmp/backup_full \
         # zfs receive poolB/received/fs@a &lt; /tmp/backup_full
         # zfs send -i a pool/fs@b &gt; /tmp/backup.today \
         # zfs receive poolB/received/fs &lt; /tmp/backup.today



       <b>Example</b> <b>13</b> Using the  zfs receive -d Option

       The following command sends a full stream of "<b>poolA/fsA/fsB@snap</b>" to a backup file, receiving it into
       "<b>poolB/received/fsA/fsB@snap</b>". The "<b>fsA/fsB@snap</b>" portion of the received snapshot's name  is  deter-
       mined  from the name of the sent snapshot. "<b>poolB</b>" must contain the file system "<b>poolB/received</b>".  If
       "<b>poolB/received/fsA</b>" does not exist, it will be created as an empty file system.


         <b>#</b> <b>zfs</b> <b>send</b> <b>poolA/fsA/fsB@snap</b> <b>&gt;</b> <b>/tmp/backup.fsB</b> <b>\</b>
            <b>#</b> <b>zfs</b> <b>receive</b> <b>-d</b> <b>poolB/received</b> <b>&lt;</b> <b>/tmp/backup.fsB</b>




       <b>Example</b> <b>14</b> Setting User Properties

       The following example sets the user defined "com.example:department" property for a dataset.


         <b>#</b> <b>zfs</b> <b>set</b> <b>com.example:department=12345</b> <b>tank/accounting</b>



<b>EXIT</b> <b>STATUS</b>
       The following exit values are returned:

       <b>0</b>    Successful completion.


       <b>1</b>    An error occurred.


       <b>2</b>    Invalid command line options were specified.


<b>SEE</b> <b>ALSO</b>
       <a href="../man1/ssh.1.html#//apple_ref/doc/man/1/ssh"><b>ssh</b>(1)</a>, <a href="mount.8.html#//apple_ref/doc/man/8/mount"><b>mount</b>(8)</a>, <a href="zpool.8.html#//apple_ref/doc/man/8/zpool"><b>zpool</b>(8)</a>, <a href="../man1/chmod.1.html#//apple_ref/doc/man/1/chmod"><b>chmod</b>(1)</a>, <a href="../man1/stat.1.html#//apple_ref/doc/man/1/stat"><b>stat</b>(1)</a>, <a href="../man2/fsync.2.html#//apple_ref/doc/man/2/fsync"><b>fsync</b>(2)</a>, <a href="zfs.util.8.html#//apple_ref/doc/man/8/zfs.util">zfs.util(8)</a>


<b>HISTORY</b>
       The <b>zpool</b> command first appeared in Mac OS X 10.5 (Leopard).




Mac OS X                                         16 Mar 2007                                          zfs(8)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man8/zfs.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man8/zfs.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man8/zfs.8.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

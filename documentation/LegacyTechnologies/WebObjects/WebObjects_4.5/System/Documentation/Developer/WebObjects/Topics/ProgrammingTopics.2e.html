<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN"><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Pessimistic Locking in Oracle</TITLE></HEAD><body bgcolor="#ffffff"><!--start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!--start of path --><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b> <a href="../../../../../../index.html" target="_top">Documentation</a> <b>&gt;</b> <a href="../../../../../webobjects.html" target="_top">WebObjects 4.5</a> <b>&gt;</b>Programming Topics</font><br><br><!--end of path --><DIV><a name="top"></a><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2d.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2f.html"><img src="next.gif" border="0" width="49" height="16"></A></DIV><H1 CLASS="TopictTitle"><A NAME="pgfId=606100"> </A><A NAME="23842"> </A>Pessimistic Locking in Oracle</H1><DIV><H2 CLASS="Synopsis"><A NAME="pgfId=606101"> </A>Synopsis</H2><P CLASS="Body"><A NAME="pgfId=606102"> </A>Describes how pessimistic locking works in Oracle.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606103"> </A>Discussion</H2><P CLASS="Body"><A NAME="pgfId=606104"> </A>Oracle supports row-level pessimistic locking. By default EOF uses Oracle's <TT CLASS="Code">SELECT FOR UPDATE</TT> without the <TT CLASS="Code">NO WAIT</TT> clause. This can be changed by calling OracleSQLExpression's <TT CLASS="Code">setUseNoWaitLocks</TT> class method.</P><P CLASS="Body"><A NAME="pgfId=606105"> </A>The standard <TT CLASS="Code">SELECT FOR UPDATE</TT> lock will cause all the <TT CLASS="Code">UPDATE</TT> or <TT CLASS="Code">SELECT FOR UPDATE</TT> statements from other database connections to block until a commit, rollback, or a deadlock exception occurs. A deadlock exception occurs when one user has row A locked and is trying to lock row B, while another user has row B locked and is trying to lock row A. In this case, Oracle disables one of the users locks while letting the other user lock both rows.</P><P CLASS="Body"><A NAME="pgfId=606106"> </A>When using the <TT CLASS="Code">SELECT FOR UPDATE NO WAIT</TT> locks, Oracle will cause an exception whenever a locked row is selected. This can be useful if you don't want to block a user for an indefinite amount of time.</P><P CLASS="Body"><A NAME="pgfId=606107"> </A>Also note that a <TT CLASS="Code">SELECT</TT> statement without the <TT CLASS="Code">FOR UPDATE</TT> clause will always work. This can be somewhat dangerous. For example, suppose user A fetches an object without locking it. User B fetches the object with locking and saves it. User A then modifies the object and again saves it, overwriting what user B has done. The only way this can be avoided is to use a consistent locking strategy.</P></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606108"> </A>See Also</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606109"> </A><A HREF="ProgrammingTopics.2e.html#23842" CLASS="XRef">Pessimistic Locking in Oracle</A></LI><LI CLASS="Bulleted"><A NAME="pgfId=613240"> </A><A HREF="ProgrammingTopics.2a.html#15618" CLASS="XRef">Choosing an Approach for Locking</A></LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606111"> </A>Questions</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606112"> </A>	What is locking?</LI><LI CLASS="Bulleted"><A NAME="pgfId=606113"> </A>	How does pessimistic locking work with Oracle?</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606114"> </A>Keywords</H2><UL><LI CLASS="Bulleted"><A NAME="pgfId=606115"> </A>Lock</LI><LI CLASS="Bulleted"><A NAME="pgfId=615902"> </A>Pessimistic</LI><LI CLASS="Bulleted"><A NAME="pgfId=606116"> </A>Oracle</LI></UL></DIV><DIV><H2 CLASS="Heading1"><A NAME="pgfId=606117"> </A>Revision History</H2><P CLASS="Body"><A NAME="pgfId=606118"> </A>22 July, 1998. Paul Haddad. First Draft.</P><PRE CLASS="Code"><A NAME="pgfId=602450"> </A></PRE></DIV><HR>&#169 1999 Apple Computer, Inc.<P><A HREF="TopicsTOC.html"><img src="up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2d.html"><img src="previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="ProgrammingTopics.2f.html"><img src="next.gif" border="0" width="49" height="16"></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></BODY></HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Interactive Movies: QuickTime Sprites, Sprite Animation and Wired Movies</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="QuickTime Sprites, Sprite Animation and Wired Movies"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40000883-CH206" title="QuickTime Sprites, Sprite Animation and Wired Movies"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../../WiredMoviesandSprites-date.html#//apple_ref/doc/uid/TP30000440-TP30000433-TP30000594" target="_top">Wired Movies and Sprites</a> &gt; <a href="../preface/QT_Interactive_preface.html#//apple_ref/doc/uid/TP40000883-CH204-DontLinkElementID_69">Interactive Movies</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../generalintro/1-General-Intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../spritemediahandler/3-Sprite-Media-Handler.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_52" title="QuickTime Sprites, Sprite Animation and Wired Movies"></a><h1><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJFCHFE" title="QuickTime Sprites, Sprite Animation and Wired Movies"></a>QuickTime Sprites, Sprite Animation and Wired Movies</h1><p>This chapter provides a general introduction to QuickTime sprites, sprite animation, and wired movies. </p><p>If you are a content author or tool developer, you’ll want to read this chapter to grasp the fundamentals of how sprites, the sprite toolbox, and wired movies work together in the QuickTime software architecture. The chapter provides a conceptual overview of this architecture, with each section laying down the fundamental building blocks. </p><p>Originally introduced in QuickTime 3, wired movies have enabled content authors and developers to push the envelope as far as creating interactive QuickTime movies. These interactive movies can be played in any Web browser using the QuickTime plug-in, and in all applications that use the QuickTime movie controller API. Each new software version of QuickTime, including the latest release of QuickTime 5.01, has been enhanced to take advantage of the capabilities provided by wired movies.</p><p>This chapter is divided into the following major sections:</p><ul class="ul"><li class="li"><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJCACCB">“Sprite Animation and the Sprite Toolbox”</a></span> introduces you to the fundamentals of sprite animation and the sprite toolbox. </p></li><li class="li"><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJDFHDH">“Wired Movies”</a></span> introduces you to QuickTime events, actions, targets, parameters, expressions, operands, and operators. </p></li></ul><p>Beyond this chapter, you’ll find a discussion of the sprite media handler in <span class="content_text"><a href="../spritemediahandler/3-Sprite-Media-Handler.html#//apple_ref/doc/uid/TP40000883-CH207-CJBEEIFB">“Chapter 3, Sprite Media Handler,”</a></span> which explains how you can use the media handler to add a sprite animation track to a QuickTime movie. In <span class="content_text"><a href="../authoringwiredmovies/4-Authoring-Wired-Movies.html#//apple_ref/doc/uid/TP40000883-CH208-BCIDCFEG">“Chapter 4, Authoring Wired Movies and Sprite Animations,”</a></span> you’ll learn how you can author wired movies and sprite animations using the sprite media handler. </p><p>With this knowledge, you should be ready to tackle more difficult programming tasks, as discussed in <span class="content_text"><a href="../advancedinteractive/7-Advanced-Interactive.html#//apple_ref/doc/uid/TP40000883-CH211-BCICIJJI">“Chapter 7, Creating Advanced Interactive Movies,”</a></span> That chapter describes a set of features that allow authors and tool developers to create more complex, advanced interactive movies. These features include the use of embedded movies, new wired actions and events, and new ways to communicate between a wired movie and JavaScript in a Web browser. The chapter also includes a section <span class="content_text"><a href="../advancedinteractive/7-Advanced-Interactive.html#//apple_ref/doc/uid/TP40000883-CH211-BCIHFEJJ">“Custom Wired Actions”</a></span> that describes how custom action handler components may be written to perform new types of actions. </p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJCACCB">Sprite Animation and the Sprite Toolbox</a>
				
			<br/>
			
        
			
			
				<a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJDFHDH">Wired Movies</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40000883-CH206-BAJCACCB" title="Sprite Animation and the Sprite Toolbox"></a><h2>Sprite Animation and the Sprite Toolbox</h2><p>This section introduces you to the fundamentals of sprite animation and the sprite toolbox. Sprites were introducted in QuickTime 2.5 and have since been enhanced in later versions of QuickTime.</p><p>The section also discusses the ways in which sprite animation differs from traditional video animation. The metaphor of a sprite animation as a theatrical play is used, in which sprite tracks are characterized as the boundaries of the stage and a sprite world as the stage itself. To extend the metaphor, you may want to think of sprites as actors performing on that stage. </p><p>Each sprite has properties that describe its location and appearance at a given time. During an animation sequence, the application modifies the sprite’s properties to cause it to change its appearance and move around the screen. Sprites may be mixed with still-image graphics to produce a wide variety of effects while using relatively little memory.</p><p>You use the sprite toolbox to add sprite-based animation to your application. The sprite toolbox, which is a set of data types and functions, handles all the tasks necessary to compose and modify sprites, their backgrounds and properties, in addition to transferring the results to the screen or to an alternate destination.</p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF101" title="Sprites and the Sprite Toolbox"></a><h3>Sprites and the Sprite Toolbox</h3><p>This section introduces you to the terminology used to define sprites and describes the characteristics that govern the creation of sprite animation in an application. </p><p>If you’re writing an application that uses sprite animation outside of a QuickTime movie, you use the routines available to you in the sprite toolbox. If your application is designed to work with QuickTime movies, you can take advantage of the routines available to you in the sprite media handler. In <span class="content_text"><a href="../spritemediahandler/3-Sprite-Media-Handler.html#//apple_ref/doc/uid/TP40000883-CH207-CJBEEIFB">“Chapter 3, Sprite Media Handler,”</a></span> these routines and the sprite media handler are discussed in more detail. </p><p>The sprite toolbox is a set of data types and functions you can use to add sprite-based animation to an application. The sprite toolbox handles invalidating appropriate areas as sprite properties change, the composition of sprites and their background on an offscreen buffer, and the transfer of the result to the screen or to an alternate destination. </p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF102" title="Sprite World Characteristics"></a><h3>Sprite World Characteristics</h3><p>A sprite world is a graphics world for a sprite animation. To create a sprite animation in an application, you must first create a sprite world. You do not need to create a sprite world to create a sprite track in a QuickTime movie.</p><p>Once you have created a sprite world, you create sprites associated with that sprite world. You can think of a sprite world as a stage on which your sprites perform. When you dispose of a sprite world, its associated sprites are disposed of as well.</p><p>For sprites in a sprite world, you modify a sprite’s properties by calling the <code>SetSpriteProperty</code> function, passing a constant to indicate which property you want to modify. <code>SetSpriteProperty</code> invalidates the appropriate portions of the sprite world, which are redrawn when <code>SpriteWorldIdle</code> is called. </p><p>When you call <code>SetSpriteProperty</code> to modify a property of a sprite, <code>SetSpriteProperty</code> invalidates the appropriate regions of the sprite world. When your application calls <code>SpriteWorldIdle</code>, the sprite world redraws its invalid regions. A sprite world coordinate system is defined by translating the sprite’s display coordinate system by the sprite world’s matrix, as shown in <span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJIIABA">Figure 2-1</a></span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_53" title="Figure 2-1Sprite world coordinate system"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJIIABA" title="Figure 2-1Sprite world coordinate system"></a><strong>Figure 2-1&nbsp;&nbsp;</strong>Sprite world coordinate system</p><img src = "../art/qts13.gif" alt = "Sprite world coordinate system" width="379" height="264"></div><br/><p>For sprites in a sprite world, you control a sprite’s image by setting the sprite’s <code>kSpritePropertyImageDescription</code> and <code>kSpritePropertyImageDataPtr</code> properties.</p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF103" title="Sprite Tracks"></a><h3>Sprite Tracks</h3><p>For sprites in a sprite track, all sprite images are stored in one of the sprite track’s key frame samples. This allows the sprites in the sprite track to share images. A sprite’s image index (<code>kSpritePropertyImageIndex</code>) specifies the sprite’s current image in the pool of available images. All images assigned to a sprite must share the same image description, unless you assign group IDs (<code>kSpriteImagePropertyGroupID</code>).</p><p>For sprites in a sprite track, you modify a sprite property by creating an override sample of the appropriate type.</p><p>Three sprite track properties, <code>kSpriteTrackPropertyBackgroundColor</code>, <code>kSpriteTrackPropertyOffscreenBitDepth</code>, and <code>kSpriteTrackPropertySampleFormat</code>, describe properties of a sprite track in a QuickTime movie. </p><p>In <span class="content_text"><a href="../spritemediahandler/3-Sprite-Media-Handler.html#//apple_ref/doc/uid/TP40000883-CH207-CJBEEIFB">“Chapter 3, Sprite Media Handler,”</a></span> these properties are discussed in more detail. </p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF104" title="Sprite Animation"></a><h3>Sprite Animation</h3><p>Sprite animation differs substantially from traditional video animation. With traditional video animation, you describe a frame by specifying the color of each pixel. By contrast, with sprite animation, you describe a frame by specifying which sprites appear at various locations. At a given moment a sprite displays a single image selected from a pool of images shared by all of the sprites. </p><p>You can think of a sprite animation as a theatrical play. In a QuickTime movie, the sprite track bounds are the stage; in an application, a sprite world is the stage. The background is the play’s set; the background may be a single solid color, an image, or a combination of images. The sprites are the actors in the play.</p><p>A sprite has properties that describe its location and appearance at a given point in time. During the course of an animation, you modify a sprite’s properties to cause it to change its appearance and move around the set or stage. </p><p>Each sprite has a corresponding image. During the animation, you can change a sprite’s image. For example, you can assign a series of images to a sprite in succession to perform cell-based animation. </p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF105" title="Sprite Spatial Concepts "></a><h3>Sprite Spatial Concepts </h3><p>This section explains sprite spatial concepts, which you may need to understand in order to work with sprites both on the desktop (outside a QuickTime movie) and within QuickTime movies. These concepts include</p><ul class="spaceabove"><li class="li"><p>matrix</p></li><li class="li"><p>local coordinate system</p></li><li class="li"><p>source box</p></li><li class="li"><p>bounding box</p></li><li class="li"><p>four corners</p></li><li class="li"><p>registration point</p></li><li class="li"><p>display space</p></li></ul><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF106" title="Local Coordinate System"></a><h4>Local Coordinate System</h4><p>A local coordinate system is used to position a sprite within a sprite track or sprite world. The origin is the sprite track’s upper-left corner. </p><p>For example, if a sprite’s matrix contains a horizontal translation of 50 and a vertical translation of 25, the sprite is positioned such that its left side is located 50 pixels to the right of the sprite track’s left side, and its top is 25 pixels down from the top of the sprite track or sprite world.</p><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJBCFHJ">Figure 2-2</a></span> shows the local coordinate system of a sprite track. </p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_54" title="Figure 2-2A sprite track&acirc;&#128;&#153;s local coordinate system"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJBCFHJ" title="Figure 2-2A sprite track&acirc;&#128;&#153;s local coordinate system"></a><strong>Figure 2-2&nbsp;&nbsp;</strong>A sprite track’s local coordinate system</p><img src = "../art/qts12.gif" alt = "A sprite track’s local coordinate system" width="255" height="207"></div><br/><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF107" title="Source Box"></a><h4>Source Box</h4><p>A sprite’s source box, as shown in <span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJHBHEB">Figure 2-3</a></span>, is defined as a rectangle with a top-left point of (0, 0), and its width and height set to the width and height of the sprite’s current image.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_55" title="Figure 2-3A sprite&acirc;&#128;&#153;s source box"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJHBHEB" title="Figure 2-3A sprite&acirc;&#128;&#153;s source box"></a><strong>Figure 2-3&nbsp;&nbsp;</strong>A sprite’s source box</p><img src = "../art/qts01.gif" alt = "A sprite’s source box" width="177" height="159"></div><br/><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF108" title="Bounding Box"></a><h4>Bounding Box</h4><p>The bounding box of a sprite, shown in <span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJEBJBG">Figure 2-4</a></span>, is the smallest rectangle that encloses the sprite’s area after its matrix is applied. If a sprite is only translated, its bounding box will have the same dimensions as its source box. However, if the sprite is rotated 45 degrees, the bounding box may be larger than its source box.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_56" title="Figure 2-4A bounding box in a sprite track&acirc;&#128;&#153;s local coordinate system"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJEBJBG" title="Figure 2-4A bounding box in a sprite track&acirc;&#128;&#153;s local coordinate system"></a><strong>Figure 2-4&nbsp;&nbsp;</strong>A bounding box in a sprite track’s local coordinate system</p><img src = "../art/qts08.gif" alt = "A bounding box in a sprite track’s local coordinate system" width="313" height="213"></div><br/><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF109" title="Four Corners"></a><h4>Four Corners</h4><p>Some sprite actions and operands refer to a sprite’s four corners. These four corners are expressed in its track’s local coordinate system. They are the points derived by taking the four corners of the sprite’s source box and applying the current image’s registration point and the sprite’s source matrix. </p><p>The first corner is the top-left, the second corner is the top-right, the third corner is the bottom right, and the fourth corner is the bottom-left.</p><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJEEDGJ">Figure 2-5</a></span> shows a rotated bounding box in a sprite track’s local coordinate system.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_57" title="Figure 2-5The rotated bounding box becomes the sprite four corners"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJEEDGJ" title="Figure 2-5The rotated bounding box becomes the sprite four corners"></a><strong>Figure 2-5&nbsp;&nbsp;</strong>The rotated bounding box becomes the sprite four corners</p><img src = "../art/qts09.gif" alt = "The rotated bounding box becomes the sprite four corners" width="313" height="213"></div><br/><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF110" title="Registration Point"></a><h4>Registration Point</h4><p>A sprite image registration point, shown in <span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJHDCCF">Figure 2-6</a></span>, defines an offset that is applied to a sprite’s source matrix. A sprite’s default registration point is (0,0), or the top left of its source box. </p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_58" title="Figure 2-6Default sprite image registration points"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJHDCCF" title="Figure 2-6Default sprite image registration points"></a><strong>Figure 2-6&nbsp;&nbsp;</strong>Default sprite image registration points</p><img src = "../art/qts02.gif" alt = "Default sprite image registration points" width="421" height="195"></div><br/><p>When a sprite with a default registration point of (0,0) is translated to a location by setting the x and y translation elements of its source matrix, the sprite’s upper-left corner is placed at the given location. If a sprite’s source box is 100 pixels wide and 100 pixels tall, then setting the sprite image’s registration point to (50,50) causes the center of the sprite to be translated to the x and y translation of its source matrix. This also causes the wired sprite action <code>kActionSpriteRotate</code> to rotate the sprite about its center.</p><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJDDBFC">Figure 2-7</a></span> shows a default registration point in a sprite track’s local coordinate system.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_59" title="Figure 2-7Default registration point in a sprite track&acirc;&#128;&#153;s local coordinate system"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJDDBFC" title="Figure 2-7Default registration point in a sprite track&acirc;&#128;&#153;s local coordinate system"></a><strong>Figure 2-7&nbsp;&nbsp;</strong>Default registration point in a sprite track’s local coordinate system</p><img src = "../art/qts03.gif" alt = "Default registration point in a sprite track’s local coordinate system" width="393" height="271"></div><br/><p>If your animation is cel-based, your images may vary in size, so you may want the registration for the center in order for the images used by the sprites to line up correctly, as shown in <span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJDGFJF">Figure 2-8</a></span>. </p><p>For example, if you have a sprite-displayed explosion, the first cels may be smaller than the last. By setting the registration point to the center of each image, the explosion animation will be centered at the sprite’s location defined by its matrix.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_60" title="Figure 2-8Centered registration points"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJDGFJF" title="Figure 2-8Centered registration points"></a><strong>Figure 2-8&nbsp;&nbsp;</strong>Centered registration points</p><img src = "../art/qts04.gif" alt = "Centered registration points" width="432" height="233"></div><br/><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJHABCC">Figure 2-9</a></span> shows a centered registration point in a sprite track’s local coordinate system. </p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_61" title="Figure 2-9A centered registration point in a sprite track&acirc;&#128;&#153;s local coordinate system"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJHABCC" title="Figure 2-9A centered registration point in a sprite track&acirc;&#128;&#153;s local coordinate system"></a><strong>Figure 2-9&nbsp;&nbsp;</strong>A centered registration point in a sprite track’s local coordinate system</p><img src = "../art/qts05.gif" alt = "A centered registration point in a sprite track’s local coordinate system" width="406" height="283"></div><br/><div class="notebox"><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_62" title="Note"></a><p><strong>Note:</strong>&nbsp;When a sprite uses images of different sizes, you assign group IDs to the images. (For more information on group IDs, see<span class="content_text"><a href="../spritemediahandler/3-Sprite-Media-Handler.html#//apple_ref/doc/uid/TP40000883-CH207-CJBFGCFD">“Assigning Group IDs”</a></span> ). Group IDs are illustrated in the code sample in <span class="content_text"><a href="../samplecodeappendix/Appendix-A-sample-code.html#//apple_ref/doc/uid/TP40000883-CH214-CJBJFHCE">“QTWiredSprite.c Sample Code”</a></span> . </p></div><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJJDABA">Figure 2-10</a></span> shows an example of registration points in a QuickTime movie.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_63" title="Figure 2-10Registration points in a QuickTime movie"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJJDABA" title="Figure 2-10Registration points in a QuickTime movie"></a><strong>Figure 2-10&nbsp;&nbsp;</strong>Registration points in a QuickTime movie</p><img src = "../art/qts06.gif" alt = "Registration points in a QuickTime movie" width="440" height="217"></div><br/><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJCFJII">Figure 2-11</a></span> shows an example of centered registration points in a QuickTime movie.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_64" title="Figure 2-11Centered registration points in a QuickTime movie"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJCFJII" title="Figure 2-11Centered registration points in a QuickTime movie"></a><strong>Figure 2-11&nbsp;&nbsp;</strong>Centered registration points in a QuickTime movie</p><img src = "../art/qts07.gif" alt = "Centered registration points in a QuickTime movie" width="440" height="218"></div><br/><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF111" title="Display Space"></a><h4>Display Space</h4><p>Display space, shown in <span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJDHEEC">Figure 2-12</a></span>, refers to the pixels drawn in a window. In order to determine the area that a sprite is drawn to in display space, its registration point is first applied to its source matrix. This result is concatenated with its track’s matrix and then concatenated with its movie’s matrix.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_65" title="Figure 2-12A sprite display space and movie matrix identity"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJDHEEC" title="Figure 2-12A sprite display space and movie matrix identity"></a><strong>Figure 2-12&nbsp;&nbsp;</strong>A sprite display space and movie matrix identity</p><img src = "../art/qts10.gif" alt = "A sprite display space and movie matrix identity" width="389" height="347"></div><br/><p><span class="content_text"><a href="2-Intro-Wired-Sprites.html#//apple_ref/doc/uid/TP40000883-CH206-BAJJFCEA">Figure 2-13</a></span> shows a movie matrix scaled down to one-half size.</p><br/><div><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_66" title="Figure 2-13A movie matrix scaled down to one-half size"></a><p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJJFCEA" title="Figure 2-13A movie matrix scaled down to one-half size"></a><strong>Figure 2-13&nbsp;&nbsp;</strong>A movie matrix scaled down to one-half size</p><img src = "../art/qts11.gif" alt = "A movie matrix scaled down to one-half size" width="235" height="181"></div><br/><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF112" title="Sprite Properties"></a><h3>Sprite Properties</h3><p>A sprite’s matrix property (<code>kSpritePropertyMatrix</code>) describes the sprite’s location and scaling within its sprite world or sprite track. By modifying a sprite’s matrix, you can modify the sprite’s location so that it appears to move in a smooth path on the screen or so that it jumps from one place to another. You can modify a sprite’s size, so that it shrinks, grows, or stretches. Depending on which image compressor is used to create the sprite images, other transformations, such as rotation, may be supported as well. Translation-only matrices provide the best performance.</p><p>A sprite’s layer property (<code>kSpritePropertyLayer</code>) is a numeric value that specifies a sprite’s layer in the animation. Sprites with lower layer numbers appear in front of sprites with higher layer numbers. To designate a sprite as a background sprite, you should assign it the special layer number <code>kBackgroundSpriteLayerNum</code>.</p><p>A sprite’s visible property (<code>kSpritePropertyVisible</code>) specifies whether or not the sprite is visible. To make a sprite visible, you set the sprite’s visible property to <code>TRUE</code>.</p><p>A sprite’s graphics mode property (<code>kSpritePropertyGraphicsMode</code>) specifies a graphics mode and blend color that indicates how to blend a sprite with any sprites behind it and with the background. To set a sprite’s graphics mode, you call <code>SetSpriteProperty</code>, passing a pointer to a <code>ModifierTrackGraphicsModeRecord</code> structure.</p><a name="//apple_ref/doc/uid/TP40000883-CH206-BAJDFHDH" title="Wired Movies"></a><h2>Wired Movies</h2><p>Wired movies enable you to create QuickTime movies that are highly interactive and responsive to user input. What this means is that user input is simply translated into QuickTime events. In response to these events, actions may be performed. Each action has a specific target, which is the element in a movie the action is performed on. Target types may include sprites, tracks, and the movie itself. A few actions don’t require a target. Actions have a set of parameters that help describe how the target element is changed.</p><p>Typical wired actions—such as jumping to a particular time in a movie or setting a sprite’s image index—enable you to create a sprite that acts as a button. In response to a mouse down event, for example, a wired sprite could change its own image index property, so that its button-pressed image is displayed. In response to a mouse up event, the sprite can change its image index property back to the button up image and, additionally, specify that the movie jump to a particular time.</p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF113" title="Adding Actions"></a><h3>Adding Actions</h3><p>When you wire a sprite track, you add actions to it. Wired sprite tracks may be the only tracks in a movie, but they are commonly used in concert with other types of tracks. Actions associated with sprites in a sprite track, for example, can control the audio volume and balance of an audio track, or the graphics mode of a video track. </p><p>Wired sprite tracks may also be used to implement a graphical user interface for an application. Applications can find out when actions are executed, and respond however they wish. For example, a CD audio controller application could use an action sprite track to handle its graphics and user interface.</p><p>These wired sprite actions are not only provided by sprite tracks. In principle, you can “wire” any QuickTime media handler. In QuickTime, all of these may contain actions: QuickTime VR, text, and sprites. </p><p>For a complete description of all available wired actions, refer to the <em>QuickTime API Reference</em>, which is available at</p><div class="codesample"><table><tr><td scope="row"><pre>http://developer.apple.com/documentation/Quicktime/QuickTime.html<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF114" title="QuickTime Events"></a><h3>QuickTime Events</h3><p>When it is associated with a QuickTime movie, the movie controller checks to see if a track in the movie provides actions in response to QuickTime events. If one or more tracks provide actions, the movie controller will then monitor the activity of the mouse and send the appropriate mouse-related events. </p><p>These mouse events include: <code>kQTEventMouseClick</code>, <code>kQTEventMouseClickEnd</code>, <code>kQTEventMouseClickEndTriggerButton</code>, <code>kQTEventMouseEnter</code>, and <code>kQTEventMouseExit</code>. </p><p>Other types of events do not require user interaction in order to be generated. </p><p>The <code>kQTEventIdle</code> event is sent to each sprite in a sprite track if that sprite track’s <code>kSpriteTrackPropertyQTIdleEventsFrequency</code> property is set to a value other than the default value <code>kNoQTIdleEvents</code>.</p><p>The <code>kQTEventFrameLoaded</code> is generated when a sprite track sample which contains actions for it is loaded.</p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF115" title="Actions and Their Targets"></a><h3>Actions and Their Targets</h3><p>Any number of actions may be executed in response to a single QuickTime event. By using sprite track variables to maintain state, as well as conditional and looping actions, more sophisticated event handlers may be created—similar to <code>If..Then</code> and <code>While</code> statements in the C programming language.</p><p>The target of an action specifies on which element of the movie the action should be performed. Each action has an associated target type. For example, the action <code>kActionSpriteSetVisible</code> should only target a sprite—not a track or movie. Most of the track actions need to target either a specific track type, or a subset of track types, such as spatial or audio tracks. The target types include sprite, track, movie, 3D nodes, and no target. </p><p>Sprite and track targets may be specified in several different ways using names, IDs, or indices. </p><p>Targets are resolved at the time their action is executed. This is important to keep in mind because movies may change over time. Actions which are intended to target a movie element for the current movie time should precede actions which change the movie time. Sprites, for example, may be considered to have a lifetime lasting from one key frame to the next, so a sprite with a certain ID at one time may be different from a sprite with the same ID at another time in the movie. </p><p>Note that you may only target “live” movie elements, that is, ones that exist for the current movie time.</p><p>All events except the <code>frameLoaded</code> event are sent to a specific sprite or QuickDraw 3D node. This sprite is considered the current default sprite target, and its track is considered the current default track target. Since the <code>frameLoaded</code> event is sent to a sprite track, only the default track target is set.</p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF116" title="Action Parameters"></a><h3>Action Parameters</h3><p>Actions have some number of required parameters. The parameters each have a data type. For example, the <code>SpriteSetVisible</code> action has a single <code>Boolean</code> parameter which makes the sprite visible if set to <code>true</code>, and invisible if set to <code>false</code>. </p><p>Parameters with numeric data types may optionally be specified by an expression. The <code>SpriteSetVisible</code> action, for example, could have an expression which evaluates to <code>true</code> if the movie is playing and <code>false</code> if it is stopped.</p><p>Options which modify a parameter’s value may be specified for some parameters. Each action defines which options are allowed for its parameters. Parameters which allow options to be specified are typically associated with a property of the action’s target. The current value of this property is used in conjunction with the parameter’s value and options to determine the new value.</p><p>The <code>kActionFlagActionIsDelta</code> constant takes the current property value and adds the parameter’s value to it. This value is pinned to the minimum and maximum values. The <code>kActionFlagParameterWrapsAround</code> constant causes the value to wrap within the range defined by the minimum and maximum value. If the new value is greater than the maximum value, it wraps around to the minimum, plus the difference between the new and the maximum value. </p><p>Parameters all have default minimum and maximum values. When using the delta, or delta with wraparound options, the minimum and maximum value options further limit this range. </p><p>The <code>kActionFlagActionIsToggle</code> constant is used with properties that only have two possible values, such as a visible property which may be either <code>true</code> or <code>false</code>. Using it repeatedly on a sprite’s visible property, for example, will toggle it between visible and invisible. The actual value of the parameter is ignored when using the toggle.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_67" title="Note"></a><p><strong>Note:</strong>&nbsp;Named time parameters use the indexed chapter text tracks to obtain time values from the names.</p></div><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF117" title="Expressions"></a><h3>Expressions</h3><p>Expressions may generally be used in place of numeric and Boolean values. Numeric action parameters, action target IDs, and action target indexes may all use expressions. They are also used in conjunction with the <code>Case</code> and <code>While</code> statement actions as conditional Boolean expressions. </p><p>Expressions may contain just a single operand, or may be complex, containing any number of operators and operands.</p><div class="importantbox"><a name="//apple_ref/doc/uid/TP40000883-CH206-DontLinkElementID_68" title="Important:"></a><p><strong>Important:</strong>&nbsp;Expressions are evaluated internally as single-precision, floating-point numbers. This means that all operands with numeric data types that are used in an expression are cast to a single precision floating point. For a few of the operand types, such as the sprite ID operands, it is possible to have a round-off error problem. This can be avoided by using sprite IDs that can be expressed using single- precision, floating-point numbers. </p><p></p></div><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF118" title="Operators"></a><h3>Operators</h3><p>Operators are used in expressions, and are applied to their operands to calculate numeric values. The data format for Binary operations is prefix-based. </p><p>Binary operators may be applied to a list of two or more operands. They are first applied to the first two operands, then applied to this result and the next operand in the list. For example, (2 * (4 * 6)) can be represented as the <code>kOperatorMultiply</code> operator with a list of three <code>kOperandConstant</code> operands, containing the values 4, 6, and 2 in that order. </p><p>Unary operators are applied to a single operand. </p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF119" title="Operands"></a><h3>Operands</h3><p>Each operand is evaluated as part of an expression. Most operands have specific target types, similar to actions, since they evaluate to the current value of a specific property of the target. For example, the <code>kOperandQTVRPanAngle</code> returns the current pan angle of the operand’s target QuickTime VR track. </p><p>Other operands, such as <code>kOperandKeyIsDown</code> and <code>kOperandMouseLocalHLoc</code>, allow for a polling form of input by determining the current state of the keyboard or the location of the mouse.</p><p>Constants may be specified using the <code>kOperandConstant</code> operand.</p><p>The <code>kOperandExpression</code> allows for expressions to be nested within other expressions. </p><a name="//apple_ref/doc/uid/TP40000883-CH206-TPXREF120" title="External Movie Targets for Wired Actions "></a><h3>External Movie Targets for Wired Actions </h3><p>QuickTime allows your application to target external movies in addition to tracks and objects within tracks, such as sprites and QuickDraw 3D nodes. </p><p>In QuickTime, wired actions may be performed on an element of another movie. For example, you can create a movie which acts as a custom Movie Controller, setting the rate and volume of one or more separate movies on the same Web page. Or you could create two co-operative, talking head movies that have a conversation, each waiting for the other to finish before speaking their next piece. Because each movie has its own independent time base, you can achieve results that are impossible if you used a single wired movie that uses this mechanism. </p><p>External movies may be referred to either by name or by ID. There is a standard way to tag a movie with name and ID properties.</p><p>Since a QuickTime movie has no knowledge of what other QuickTime movies are currently open, the software that is playing the movies works with a movie controller in order to resolve the external movie names or IDs to actual movie references. The QuickTime plug-in and Movie Player both support external movie targets. Using the QuickTime plug-in, the movies should all be on the same Web page. Using the Movie Player, they should all be open movie documents.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../generalintro/1-General-Intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../spritemediahandler/3-Sprite-Media-Handler.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2002 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2002-10-01<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/IQ_InteractiveMovies/introwiredsprites/2-Intro-Wired-Sprites.html%3Fid%3DTP40000883-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/IQ_InteractiveMovies/introwiredsprites/2-Intro-Wired-Sprites.html%3Fid%3DTP40000883-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/IQ_InteractiveMovies/introwiredsprites/2-Intro-Wired-Sprites.html%3Fid%3DTP40000883-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
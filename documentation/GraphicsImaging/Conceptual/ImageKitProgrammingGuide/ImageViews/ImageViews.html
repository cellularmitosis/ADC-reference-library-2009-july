<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Image Kit Programming Guide: Viewing, Editing, and Saving Images in an Image View</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Viewing, Editing, and Saving Images in an Image View"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40004907-CH4" title="Viewing, Editing, and Saving Images in an Image View"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000424" target="_top">Graphics &amp; Imaging</a> &gt; <a href="../../../Quartz-date.html#//apple_ref/doc/uid/TP30000440-TP30000424-TP30000559" target="_top">Quartz</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40004907-CH1-SW1">Image Kit Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ImageKitComponents/ImageKitComponents.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ImageBrowser/ImageBrowser.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40004907-CH4-SW9" title="Viewing, Editing, and Saving Images in an Image View"></a><h1>Viewing, Editing, and Saving Images in an Image View</h1><p>The <code>IKImageView</code> class displays a single image in a frame and optionally can allow a user to drag an image to it. It is similar to the <code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSImageView_Class/Reference/Reference.html#//apple_ref/occ/cl/NSImageView" target="_top">NSImageView</a></code> class, except that <code>IKImageView</code> supports any image file format that Quartz 2D and the Image I/O framework support, including Quartz images (<code><a href="../../../Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code>), images that have metadata, and images whose location is specified as an <code><!--a target="_top" -->NSURL<!--/a--></code> object. In addition, the <code>IKImageView</code> class supports zoom, rotation, selection, cropping, and other image editing operations.</p><p>This chapter shows the user interface for an image view, the image edit panel (<code>IKImageEditPanel</code> class), and the save options accessory view (pane) (<code>IKSaveOptions</code> class). It provides instructions for creating an image editing application incrementally. You’ll see how to:</p><ul class="ul"><li class="li"><p>View images in an image view</p></li><li class="li"><p>Set up an image view to use the Image Edit panel</p></li><li class="li"><p>Set up a pane for saving images in various formats</p></li><li class="li"><p>Add zoom controls</p></li><li class="li"><p>Add image editing tools</p></li><li class="li"><p>Add a Save panel that uses image saving options</p></li></ul>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ImageViews.html#//apple_ref/doc/uid/TP40004907-CH4-SW10">The Image View User Interface</a>
				
			<br/>
			
        
			
			
				<a href="ImageViews.html#//apple_ref/doc/uid/TP40004907-CH4-SW11">Viewing an Image in an Image View</a>
				
			<br/>
			
        
			
			
				<a href="ImageViews.html#//apple_ref/doc/uid/TP40004907-CH4-SW16">Saving Images</a>
				
			<br/>
			
        
			
			
				<a href="ImageViews.html#//apple_ref/doc/uid/TP40004907-CH4-SW17">Supporting Zooming</a>
				
			<br/>
			
        
			
			
				<a href="ImageViews.html#//apple_ref/doc/uid/TP40004907-CH4-SW18">Adding Image Editing Tools</a>
				
			<br/>
			
        
			
			
				<a href="ImageViews.html#//apple_ref/doc/uid/TP40004907-CH4-SW19">Supporting Opening Image Files</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40004907-CH4-SW10" title="The Image View User Interface"></a><h2>The Image View User Interface</h2><p>The image view (<code><a href="../../../Reference/IKImageView/IKImageView_Reference.html#//apple_ref/occ/cl/IKImageView" target="_top">IKImageView</a></code>) in the user interface looks similar to any view that contains an image. The image shown in <span class="content_text">Figure 2-1</span> could just as easily be in an <code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/cl/NSView" target="_top">NSView</a></code> object, an <code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSImageView_Class/Reference/Reference.html#//apple_ref/occ/cl/NSImageView" target="_top">NSImageView</a></code> object, or  a Carbon window. </p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW1" title="Figure 2-1An image view"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>An image view</p><img src = "../Art/plain_view.jpg" alt = "An image view" ></div><br/><p>An <code>IKImageView</code> object has an important characteristic that no other image container has. When the user double-clicks an image in an image view, an Image Edit panel appears, as shown in <span class="content_text">Figure 2-2</span>. The panel allows the user to make adjustments to the image, apply a number of effects, and view image metadata and properties. The Adjust pane provides the most commonly used image adjustments.</p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW2" title="Figure 2-2The Adjust pane of the Image Edit panel"></a><p><strong>Figure 2-2&nbsp;&nbsp;</strong>The Adjust pane of the Image Edit panel</p><img src = "../Art/adjustpane.jpg" alt = "The Adjust pane of the Image Edit panel" ></div><br/><p>The Effects pane (shown in <span class="content_text">Figure 2-3</span>) allows the user, with a single click, to preview and apply sharpening, blurring, or color filters.</p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW3" title="Figure 2-3The Effects pane of the Image Edit panel"></a><p><strong>Figure 2-3&nbsp;&nbsp;</strong>The Effects pane of the Image Edit panel</p><img src = "../Art/effectspane.jpg" alt = "The Effects pane of the Image Edit panel" ></div><br/><p>The Details pane displays all the metadata for an image, as well as a comprehensive list of image properties, as shown in <span class="content_text">Figure 2-4</span>. If the image information is more than can fit in the pane, the Image Kit supplies scroll bars automatically.</p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW4" title="Figure 2-4The Details pane of the Image Edit panel"></a><p><strong>Figure 2-4&nbsp;&nbsp;</strong>The Details pane of the Image Edit panel</p><img src = "../Art/detailspane1.jpg" alt = "The Details pane of the Image Edit panel" ></div><br/><p>There are very few tasks you need to perform for the Image Edit panel to appear. You need to set the appropriate image view state, set up a shared instance of the Image Edit panel (<code><a href="../../../Reference/IKImageEditPanel/IKImageEditPanel_Reference.html#//apple_ref/occ/cl/IKImageEditPanel" target="_top">IKImageEditPanel</a></code>), and set the data source. The Image Kit framework takes care of the rest—showing the panel, switching panes, responding to changes made by the user, fetching and displaying image information, and closing the Image Edit panel.</p><p>The image view supports the use of tools for moving zooming, cropping, rotating, and applying annotations to an image. You need to provide a user interface for zoom operation and tool selection. At a minimum, you need to set up a menu similar to what’s shown in <span class="content_text">Figure 2-5</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW5" title="Figure 2-5A menu that supports zooming and tools"></a><p><strong>Figure 2-5&nbsp;&nbsp;</strong>A menu that supports zooming and tools</p><img src = "../Art/ikmenu.jpg" alt = "A menu that supports zooming and tools (Replace this)" ></div><br/><p>Ideally, you would also provide controls in the image view window, as shown in <span class="content_text">Figure 2-6</span>. The figure shows two segmented controls (created in Interface Builder using <code>NSSegmentedControl</code> controls), each of which uses custom icons that you provide.</p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW6" title="Figure 2-6Controls that support zooming and tool selection"></a><p><strong>Figure 2-6&nbsp;&nbsp;</strong>Controls that support zooming and tool selection</p><img src = "../Art/vultures_tools.jpg" alt = "Controls that support zooming and tool selection" ></div><br/><p>The image view keeps track of the zoom factor, the rotation angle, and whether the image can be edited. You need to respond to the user’s selection by setting the tool mode. The Image Kit framework takes care of animating move, zoom, and rotation operations; showing a rotation circle (see <span class="content_text">Figure 2-7</span>); displaying crop and selection rectangles; and displaying an annotation area. You need to implement copying data to the pasteboard, cropping the image, and handling the text for the annotation area.</p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW7" title="Figure 2-7The rotation user interface"></a><p><strong>Figure 2-7&nbsp;&nbsp;</strong>The rotation user interface</p><img src = "../Art/ikrotate.jpg" alt = "The rotation user interface" ></div><br/><p>No image viewing and editing application would be complete without the ability to save an edited image. The <code><a href="../../../Reference/IKSaveOptions/IKSaveOptions_Reference.html#//apple_ref/occ/cl/IKSaveOptions" target="_top">IKSaveOptions</a></code> class provides an accessory view for an <code><a href="../../../../Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSavePanel" target="_top">NSSavePanel</a></code> object that allows the user to choose an image file format and to set options appropriate for that format. The user can choose from among a number of formats. The options appropriate for that format appear below the format. For example, for a TIFF format, the user can choose compression options (as shown in <span class="content_text">Figure 2-8</span>). </p><br/><div><a name="//apple_ref/doc/uid/TP40004907-CH4-SW8" title="Figure 2-8A Save As dialog with an accessory view (pane) for file format options"></a><p><strong>Figure 2-8&nbsp;&nbsp;</strong>A Save As dialog with an accessory view (pane) for file format options</p><img src = "../Art/iksaveoptions.jpg" alt = "A Save As dialog with an accessory view (pane) for file format options" ></div><br/><a name="//apple_ref/doc/uid/TP40004907-CH4-SW11" title="Viewing an Image in an Image View"></a><h2>Viewing an Image in an Image View</h2><p>This section shows how to open and display an image in an image view. You’ll set the image view options so that the Image Edit panel opens when the user double-clicks the image. First you’ll set up the Xcode project, the project files, and the controller interface. Then you’ll create the user interface in Interface Builder. Finally, you’ll add the necessary routines to the implementation file.</p><a name="//apple_ref/doc/uid/TP40004907-CH4-SW12" title="Setting Up the Project, Project Files, and the Controller Interface"></a><h3>Setting Up the Project, Project Files, and the Controller Interface</h3><p>Follow these steps to set up the project:</p><ol class="ol"><li class="li"><p>Open Xcode, choose File > New Project.</p></li><li class="li"><p>Choose Cocoa Application and click Next.</p></li><li class="li"><p>Name the project <code>My Image Viewer</code>, and click Finish.</p></li><li class="li"><p>Choose Project > Add to Project and add the Quartz and Quartz Core frameworks.</p><p>For details, see <span class="content_text"><a href="../ImageKitComponents/ImageKitComponents.html#//apple_ref/doc/uid/TP40004907-CH3-SW4">“Using the Image Kit in Xcode.”</a></span></p></li><li class="li"><p>Choose Project > Add to Project, navigate to an image to use as a default image, and click Add.</p></li><li class="li"><p>In the sheet that appears, click Add.</p><p>This image appears in the view whenever the application launches. </p></li><li class="li"><p>Choose File > New File.</p></li><li class="li"><p>Choose Objective-C Class and click Next.</p></li><li class="li"><p>Name the file <code>Controller.m</code> and keep the option to create the header file. Then click Finish.</p></li><li class="li"><p>In the <code>Controller.h</code> file, import the Quartz framework by adding this statement just below the statement to import Cocoa:</p><p><code>#import &lt;Quartz/Quartz.h></code></p></li><li class="li"><p>Add a directive for the <code>IKImageView</code> class:</p><p><code>@class IKImageView;</code></p></li><li class="li"><p>Add instance variables to the Controller interface.</p><p>You need an image view and a window to contain the view. You’ll set these up later in Interface Builder. </p><div class="codesample"><table><tr><td scope="row"><pre>IBOutlet IKImageView *  mImageView;<span></span></pre></td></tr><tr><td scope="row"><pre>IBOutlet NSWindow *     mWindow;<span></span></pre></td></tr></table></div><p>You need to keep track of image properties and the uniform type identifier of the image in the view.</p><div class="codesample"><table><tr><td scope="row"><pre>NSDictionary * mImageProperties;<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *     mImageUTType;<span></span></pre></td></tr></table></div></li><li class="li"><p>Save and close the <code>Controller.h</code> file.</p></li><li class="li"><p>In the <code>Controller.m</code> file, import the Application Kit classes by adding this statement.</p><p><code>#import &lt;AppKit/AppKit.h></code></p></li><li class="li"><p>Close the <code>Controller.m</code> file.</p></li></ol><a name="//apple_ref/doc/uid/TP40004907-CH4-SW13" title="Creating the User Interface"></a><h3>Creating the User Interface</h3><p>Set up the user interface in Interface Builder by following these steps:</p><ol class="ol"><li class="li"><p>Double-click the <code>MainMenu.nib</code> file (located in the Resources group) to open Interface Builder.</p></li><li class="li"><p>Choose File > Synchronize With Xcode.</p></li><li class="li"><p>Double-click the Window icon in the nib document window.</p></li><li class="li"><p>In the Size inspector, set the width of the window to 800 and the height to 600.</p></li><li class="li"><p>Drag a Image View from the Library to the window and resize the view to fit the window.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40004907-CH4-SW14" title="Tip"></a><p><strong>Tip:</strong>&nbsp;Type Image View in the search field to locate it easily.</p></div></li><li class="li"><p>In the Size inspector, the Autosizing springs should look as follows. If they don’t, set them so they do.</p><div class="item_figure"><img src = "../Art/struts.jpg" alt = "Autosizing spring and strus" ></div></li><li class="li"><p>Drag an Object (<code>NSObject</code>) from the Library to the nib document window.</p><div class="item_figure"><img src = "../Art/NSObject.jpg" alt = "An NSObject in the IB library." ></div></li><li class="li"><p>Type Controller in the Name field of the Identity inspector and press Return.</p></li><li class="li"><p>Choose Controller from the Class pop-up menu.</p></li><li class="li"><p>Control-drag from the controller icon to the title bar of the window. Then click the <code>mWindow</code> outlet that appears in the connections panel.</p> </li><li class="li"><p>Control-drag from the controller icon to the <code>IKImageView</code> view. Then click the <code>mImageView</code> outlet that appears in the connections panel.</p> </li><li class="li"><p>Control-drag from the window icon to the controller icon. Then click the <code>delegate</code> outlet that appears in the connections panel.</p><div class="item_figure"><img src = "../Art/delegate.jpg" alt = "Delegate outlet in heads up display" ></div></li><li class="li"><p>Save the nib file.</p></li></ol><a name="//apple_ref/doc/uid/TP40004907-CH4-SW15" title="Adding Routines to the Implementation File"></a><h3>Adding Routines to the Implementation File</h3><p>Now you’ll go back to Xcode to add code to implement the image viewer.</p><ol class="ol"><li class="li"><p>Open the <code>Controller.m</code> file.</p></li><li class="li"><p>Add an <code>openImageURL:</code> method to take care of opening images.</p><p>The easiest  way of opening an image is to use the <code>setImageWithURL:</code> method. This method is best for RAW images. </p><div class="codesample"><table><tr><td scope="row"><pre>- (void)openImageURL: (NSURL*)url<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>     [mImageView setImageWithURL: url];<span></span></pre></td></tr><tr><td scope="row"><pre>     [mWindow setTitleWithRepresentedFilename: [url path]];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>An alternate implementation is to use the Quartz opaque data types <code><a href="../../../Reference/CGImage/Reference/reference.html#//apple_ref/c/tdef/CGImageRef" target="_top">CGImageRef</a></code> and <code><a href="../../../Reference/CGImageSource/Reference/reference.html#//apple_ref/c/tdef/CGImageSourceRef" target="_top">CGImageSourceRef</a></code> and their associated functions to create an image source, extract an image, get the image properties, and set the image to the image view. If you are using a TIFF file that contains multiple images, you need this implementation to display any image other than the first one. That’s because <code>setImageWithURL:</code> displays only the first image of a multiple-image file.</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)openImageURL: (NSURL*)url<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    CGImageRef          image = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre>    CGImageSourceRef    isr = CGImageSourceCreateWithURL( (CFURLRef)url, NULL);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (isr)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        image = CGImageSourceCreateImageAtIndex(isr, 0, NULL);<span></span></pre></td></tr><tr><td scope="row"><pre>        if (image)<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>         mImageProperties = (NSDictionary*)CGImageSourceCopyPropertiesAtIndex(<span></span></pre></td></tr><tr><td scope="row"><pre>                isr, 0, (CFDictionaryRef)mImageProperties);<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        CFRelease(isr);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if (image)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>      [mImageView setImage: image<span></span></pre></td></tr><tr><td scope="row"><pre>          imageProperties: mImageProperties];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>     [mWindow setTitleWithRepresentedFilename: [url path]];<span></span></pre></td></tr><tr><td scope="row"><pre>      CGImageRelease(image);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Add an <code>awakeFromNib</code> method.</p><p>This method first creates a URL for the default image file by getting the path to the resource in the bundle and then converting the path to a URL. After opening the URL, the method sets up the image view so that the Image Edit  panel can open, and the image zooms to fit the view.</p><p>Make sure that you substitute the appropriate string for “earring”, which should be the name of the default image file without its filename extension. Also, use the appropriate extension.</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)awakeFromNib<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *   path = [[NSBundle mainBundle] pathForResource: @"earring"<span></span></pre></td></tr><tr><td scope="row"><pre>                            ofType: @"jpg"];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSURL *      url = [NSURL fileURLWithPath: path];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [self openImageURL: url];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    // customize the IKImageView...<span></span></pre></td></tr><tr><td scope="row"><pre>    [mImageView setDoubleClickOpensImageEditPanel: YES];<span></span></pre></td></tr><tr><td scope="row"><pre>    [mImageView setCurrentToolMode: IKToolModeMove];<span></span></pre></td></tr><tr><td scope="row"><pre>    [mImageView zoomImageToFit: self];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Open the <code>Controller.h</code> files and add the following method signature.</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)openImageURL: (NSURL*)url;<span></span></pre></td></tr></table></div></li><li class="li"><p>Click Build and Go.</p></li><li class="li"><p>When the application launches, double-click the image to make sure that the Image Edit panel opens.</p><p>If the window opens, but an image does not appear, make sure that you’ve included the correct filename in your code.</p></li><li class="li"><p>Resize the image to make sure that it zooms to fit the size of the window.</p><p>If the image does not zoom to fit, check the connections between the window and the controller in Interface Builder.</p></li></ol><p>The next section shows how to use the <code><a href="../../../Reference/IKSaveOptions/IKSaveOptions_Reference.html#//apple_ref/occ/cl/IKSaveOptions" target="_top">IKSaveOptions</a></code> class to add an accessory view to the Save panel.</p><a name="//apple_ref/doc/uid/TP40004907-CH4-SW16" title="Saving Images"></a><h2>Saving Images</h2><p>The <code><a href="../../../Reference/IKSaveOptions/IKSaveOptions_Reference.html#//apple_ref/occ/cl/IKSaveOptions" target="_top">IKSaveOptions</a></code> class handles image and PDF saving options. After creating an <code>NSSavePanel</code> object, you  allocate and initialize a save options accessory view and then add the view to the Save dialog. Keep in mind that <code><a href="../../../Reference/IKSaveOptions/IKSaveOptions_Reference.html#//apple_ref/occ/cl/IKSaveOptions" target="_top">IKSaveOptions</a></code> handles the options, but it does not actually save the image or PDF. After you set up the save options accessory panel, you also need to implement a save method.</p><p>Follow these steps to add the image options accessory view to the My Image Viewer  application:</p><ol class="ol"><li class="li"><p>Open the <code>Controller.h</code> file and add a save options instance variable.</p><div class="codesample"><table><tr><td scope="row"><pre>IKSaveOptions * mSaveOptions;<span></span></pre></td></tr></table></div></li><li class="li"><p>Add the following method signature:</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)saveImage: (id)sender;<span></span></pre></td></tr></table></div></li><li class="li"><p>In the <code>Controller.m</code> file, add a  method that presents a Save panel with the save options accessory view (pane).</p><p>The method first creates an instance of the <code>NSSavePanel</code> class. Then it allocates a save options object and initializes it with the image properties and UT type of the image that will be saved. Next the code adds the save options view to the Save panel. It shows the Save panel as a sheet, providing a selector that is invoked when the Save panel terminates. (You’ll write that method next.)</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)saveImage: (id)sender<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSSavePanel * savePanel = [NSSavePanel savePanel];<span></span></pre></td></tr><tr><td scope="row"><pre>    mSaveOptions = [[IKSaveOptions alloc]<span></span></pre></td></tr><tr><td scope="row"><pre>                        initWithImageProperties: mImageProperties<span></span></pre></td></tr><tr><td scope="row"><pre>                                    imageUTType: mImageUTType];<span></span></pre></td></tr><tr><td scope="row"><pre>    [mSaveOptions addSaveOptionsAccessoryViewToSavePanel: savePanel];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSString * fileName = [[mWindow representedFilename] lastPathComponent];<span></span></pre></td></tr><tr><td scope="row"><pre>    [savePanel beginSheetForDirectory: NULL<span></span></pre></td></tr><tr><td scope="row"><pre>                    file: fileName<span></span></pre></td></tr><tr><td scope="row"><pre>          modalForWindow: mWindow<span></span></pre></td></tr><tr><td scope="row"><pre>           modalDelegate: self<span></span></pre></td></tr><tr><td scope="row"><pre>          didEndSelector: @selector(savePanelDidEnd:returnCode:contextInfo:)<span></span></pre></td></tr><tr><td scope="row"><pre>             contextInfo: NULL];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Add a <code>savePanelDidEnd</code> method that performs the actual saving.</p><p>If the user clicks the Save button, the method obtains the filename and type and retrieves the image from the view. If the image exists, the method uses the <code><a href="../../../Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/tdef/CGImageDestinationRef" target="_top">CGImageDestinationRef</a></code> opaque type (from the Image I/O framework) to create an image destination based on a URL representation of the file path. It saves the image with its properties, finalizes the destination, and releases the <code>CGImageDestination</code> object because it is no longer needed.</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)savePanelDidEnd: (NSSavePanel *)sheet<span></span></pre></td></tr><tr><td scope="row"><pre>             returnCode: (int)returnCode<span></span></pre></td></tr><tr><td scope="row"><pre>            contextInfo: (void *)contextInfo<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (returnCode == NSOKButton)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSString * path = [sheet filename];<span></span></pre></td></tr><tr><td scope="row"><pre>        NSString * newUTType = [mSaveOptions imageUTType];<span></span></pre></td></tr><tr><td scope="row"><pre>        CGImageRef image;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>        image = [mImageView image];<span></span></pre></td></tr><tr><td scope="row"><pre>        if (image)<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>            NSURL * url = [NSURL fileURLWithPath: path];<span></span></pre></td></tr><tr><td scope="row"><pre>            CGImageDestinationRef dest = CGImageDestinationCreateWithURL((CFURLRef)url,<span></span></pre></td></tr><tr><td scope="row"><pre>                         (CFStringRef)newUTType, 1, NULL);<span></span></pre></td></tr><tr><td scope="row"><pre>            if (dest)<span></span></pre></td></tr><tr><td scope="row"><pre>            {<span></span></pre></td></tr><tr><td scope="row"><pre>                CGImageDestinationAddImage(dest, image,<span></span></pre></td></tr><tr><td scope="row"><pre>                            (CFDictionaryRef)[mSaveOptions imageProperties]);<span></span></pre></td></tr><tr><td scope="row"><pre>                CGImageDestinationFinalize(dest);<span></span></pre></td></tr><tr><td scope="row"><pre>                CFRelease(dest);<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>        } else<span></span></pre></td></tr><tr><td scope="row"><pre>        {<span></span></pre></td></tr><tr><td scope="row"><pre>            NSLog(@"*** saveImageToPath - no image");<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Save the <code>Controller.m</code> file.</p></li><li class="li"><p>Open the <code>MainMenu.nib</code> file.</p></li><li class="li"><p>Double-click the MainMenu icon in the nib document window. </p></li><li class="li"><p>Open the File menu so you can see the menu items New, Open, and so on.</p></li><li class="li"><p>Control-drag from the Save menu item to the controller. </p></li><li class="li"><p>In the connections panel for the controller, choose <code>saveImage:</code>.</p></li><li class="li"><p>Save the nib file.</p></li><li class="li"><p>In Xcode, click Build and Go.</p></li><li class="li"><p>After the application launches, choose File > Save. You should see a Save panel appear with an accessory view that looks similar to the following. </p><div class="item_figure"><img src = "../Art/saveoptions.jpg" alt = "A Save As dialog with options for saving image formats." ></div><p>Choose other items from the Format menu to see the options that are offered for each image format.</p><div class="item_figure"><img src = "../Art/saveoptionspopup.jpg" alt = "" ></div></li></ol><a name="//apple_ref/doc/uid/TP40004907-CH4-SW17" title="Supporting Zooming"></a><h2>Supporting Zooming</h2><p>To support zooming, you need to add menu commands or controls (or both) for zooming, and a method to respond to the commands.</p><p>To support zooming, follow these steps:</p><ol class="ol"><li class="li"><p>Add the following method signature to the <code>Controller.h</code> file, then save the file:</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)doZoom: (id)sender;<span></span></pre></td></tr></table></div></li><li class="li"><p>Open the <code>Controller.m</code> file and add constants for the zoom factor.</p><div class="codesample"><table><tr><td scope="row"><pre>#define ZOOM_IN_FACTOR  1.414214 // doubles the area<span></span></pre></td></tr><tr><td scope="row"><pre>#define ZOOM_OUT_FACTOR 0.7071068 // halves the area<span></span></pre></td></tr></table></div></li><li class="li"><p>Add a method to handle commands to zoom out, zoom in, zoom to fit, and zoom to the actual size of the image.</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)doZoom: (id)sender<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSInteger zoom;<span></span></pre></td></tr><tr><td scope="row"><pre>    CGFloat   zoomFactor;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if ([sender isKindOfClass: [NSSegmentedControl class]])<span></span></pre></td></tr><tr><td scope="row"><pre>        zoom = [sender selectedSegment];<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>        zoom = [sender tag];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    switch (zoom)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        case 0:<span></span></pre></td></tr><tr><td scope="row"><pre>            zoomFactor = [mImageView zoomFactor];<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView setZoomFactor: zoomFactor * ZOOM_OUT_FACTOR];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case 1:<span></span></pre></td></tr><tr><td scope="row"><pre>            zoomFactor = [mImageView zoomFactor];<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView setZoomFactor: zoomFactor * ZOOM_IN_FACTOR];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case 2:<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView zoomImageToActualSize: self];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case 3:<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView zoomImageToFit: self];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Open the <code>MainMenu.nib</code> file.</p></li><li class="li"><p>Double-click the MainMenu icon in the nib document  window.</p></li><li class="li"><p>Create a new menu by dragging a Submenu Menu item from the Library and dropping it between the Edit and Format menu items. </p></li><li class="li"><p>Name the new menu Views.</p></li><li class="li"><p>Add menu items from the library to the Views menu so that you have enough for these zoom commands. Use the inspector to add the tags and key equivalents shown in the table.</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Command</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Tag</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Key equivalent</p></th></tr><tr><td  scope="row"><p>Zoom Out</p></td><td ><p>0</p></td><td ><p>Command –</p></td></tr><tr><td  scope="row"><p>Zoom In</p></td><td ><p>1</p></td><td ><p>Command =</p></td></tr><tr><td  scope="row"><p>Zoom to Actual Size</p></td><td ><p>2</p></td><td ><p> </p></td></tr><tr><td  scope="row"><p>Zoom to Fit</p></td><td ><p>3</p></td><td ><p> </p></td></tr></table></div></li><li class="li"><p>Control-drag from each item to the Controller icon. Then, in the connections panel for the controller, click <code>doZoom:</code>.</p></li><li class="li"><p>Save the <code>MainMenu.nib</code> file.</p></li><li class="li"><p>In Xcode, click Build and Go. Then make sure that the zoom commands operate as expected.</p></li><li class="li"><p>Quit the application and go back to the <code>MainMenu.nib</code> file in Interface Builder. </p><p>This time you’ll revise the window user interface by adding zoom controls.</p></li><li class="li"><p>Change the image view size so that the top of the view is 50 pixels from the top of the window. </p><p>You’ll need this space to put zoom controls.</p></li><li class="li"><p>Drag a segmented control from the Library to the top-left side of the window.</p></li><li class="li"><p>In the Attributes inspector for the control  set the number of segments to 4.</p></li><li class="li"><p>Double-click each segment to change its label and to use the inspector to add a tag. Use the commands and tags shown previously for the Views menu.</p><p>If possible, you should add artwork, similar to the following, to the Xcode project so that you can use icons instead of text labels.</p><div class="item_figure"><img src = "../Art/zoom_icon_images.jpg" alt = "" ></div></li><li class="li"><p>In the Size inspector, set the Control Size to small.</p></li><li class="li"><p>In the Attributes inspector, choose Select Any in the Mode pop-up menu.</p></li><li class="li"><p>Control-drag from the segmented zoom control to the Controller icon. Then, in the connections panel for the controller, click <code>doZoom:</code>.</p></li><li class="li"><p>Click the Info button in the nib document window. When the MainMenu.nib Info window opens, set the Deployment Target pop-up menu to Mac OS X v10.5.</p></li><li class="li"><p>Save the nib file.</p></li><li class="li"><p>In Xcode, click Build and Go. Then make sure that the zoom commands operate as expected.</p><div class="item_figure"><img src = "../Art/zoom_icons.jpg" alt = "" ></div></li></ol><a name="//apple_ref/doc/uid/TP40004907-CH4-SW18" title="Adding Image Editing Tools"></a><h2>Adding Image Editing Tools</h2><p>The <code><a href="../../../Reference/IKImageView/IKImageView_Reference.html#//apple_ref/occ/cl/IKImageView" target="_top">IKImageView</a></code> class has built-in support for move, select, crop, rotate, and annotate tools. To set up the image editing application to include the tools for these actions, follow these steps:</p><ol class="ol"><li class="li"><p>In Xcode, add image files (Project > Add to Project), similar to the following, for each of the tool modes—move, select, crop, rotate, and annotate.</p><p>You’ll need to use an application  such as Adobe Illustrator  to create icons. See <em><a href="../../../../UserExperience/Conceptual/AppleHIGuidelines/index.html#//apple_ref/doc/uid/20000957" target="_top">Apple Human Interface Guidelines</a></em> for information on using icons in the interface.</p><div class="item_figure"><img src = "../Art/tool_icons.jpg" alt = "" ></div></li><li class="li"><p>Add the following method signature to the <code>Controller.h</code> file:</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)switchToolMode: (id)sender;<span></span></pre></td></tr></table></div></li><li class="li"><p>Add a method to the <code>Controller.m</code> file to handle setting the tool mode.</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)switchToolMode: (id)sender<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSInteger newTool;<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([sender isKindOfClass: [NSSegmentedControl class]])<span></span></pre></td></tr><tr><td scope="row"><pre>        newTool = [sender selectedSegment];<span></span></pre></td></tr><tr><td scope="row"><pre>    else<span></span></pre></td></tr><tr><td scope="row"><pre>       newTool = [sender tag];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    switch (newTool)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        case 0:<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView setCurrentToolMode: IKToolModeMove];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case 1:<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView setCurrentToolMode: IKToolModeSelect];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case 2:<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView setCurrentToolMode: IKToolModeCrop];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case 3:<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView setCurrentToolMode: IKToolModeRotate];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>        case 4:<span></span></pre></td></tr><tr><td scope="row"><pre>            [mImageView setCurrentToolMode: IKToolModeAnnotate];<span></span></pre></td></tr><tr><td scope="row"><pre>            break;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Save the <code>Controller.m</code> file.</p></li><li class="li"><p>Open the <code>MainMenu.nib</code> file.</p></li><li class="li"><p>Add a submenu to the Views menu and name it Tools.</p></li><li class="li"><p>Add the following items to the Tools submenu, using the inspector to add the tag values.</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><tr><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Item</p></th><th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Tag</p></th></tr><tr><td  scope="row"><p>Move</p></td><td ><p>0</p></td></tr><tr><td  scope="row"><p>Select</p></td><td ><p>1</p></td></tr><tr><td  scope="row"><p>Crop</p></td><td ><p>2</p></td></tr><tr><td  scope="row"><p>Rotate</p></td><td ><p>3</p></td></tr><tr><td  scope="row"><p>Annotate</p></td><td ><p>4</p></td></tr></table></div></li><li class="li"><p>Control-drag from the Move menu item to the Controller icon. Choose <code>switchToolMode:</code> in the connections panel for the controller.</p></li><li class="li"><p>Repeat the previous step for each of the other items in the Tools menu.</p></li><li class="li"><p>Add a segmented control to the top-right side of the window so the control is aligned with the zoom controls.</p></li><li class="li"><p>In the Attributes inspector, set the number of segments to 5.</p></li><li class="li"><p>In the Size inspector, set the Size to small and the Width to 60.</p></li><li class="li"><p>Switch to the Attributes inspector.</p></li><li class="li"><p>For each segment,  drag the appropriate icon from the Media pane of the Library, and set the segment to autosize.</p><p>From left to right, the icons should represent Move, Select, Crop, Annotate, and Rotate.</p></li><li class="li"><p>Choose Select One from the Mode pop-up menu.</p></li><li class="li"><p>Make sure that Selected is checked for Segment 1.</p></li><li class="li"><p>In the Size inspector set the Autosizing struts and springs so they look as follows: </p><div class="item_figure"><img src = "../Art/tools_struts.jpg" alt = "Top and right strut set. Horizontal spring set." ></div></li><li class="li"><p>Control-drag from the segmented control to the controller and connect to the <code>switchToolMode:</code> action.</p></li><li class="li"><p>Save the nib file.</p></li><li class="li"><p>In Xcode, click Build and Go. Then test the Tools menu and the toolbar.</p><p>The move and rotate tools operate without any additional code on your part. The selection and crop tools copy the selected areas to the pasteboard. You need to provide code that implements pasting from the pasteboard. The annotate tool simply shows a colored circle. You need to write code that supports text entry and editing, and saves the annotation.</p></li></ol><a name="//apple_ref/doc/uid/TP40004907-CH4-SW19" title="Supporting Opening Image Files"></a><h2>Supporting Opening Image Files</h2><p>As it is now, your application opens a default image file. It would be greatly improved if it allowed the user to choose an image other than the default. Next you’ll write an open image method that is invoked when the user chooses File > Open. You need to provide a selector that is invoked when the Open panel closes. If the user chooses an image, your <code>openImageURL:</code> method (which you already added to the application) is invoked.</p><p>Follow these steps to support letting the user open image files: </p><ol class="ol"><li class="li"><p>Add the following method signature to the <code>Controller.h</code> file:</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)openImage: (id)sender;<span></span></pre></td></tr></table></div></li><li class="li"><p>Write an  open image method.</p><p>The method creates an instance of the <code>NSOpenPanel</code> class and defines the allowable filename extensions. It then calls a method that shows the Open panel.</p><div class="codesample"><table><tr><td scope="row"><pre>- (IBAction)openImage: (id)sender<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    NSOpenPanel * openPanel = [NSOpenPanel openPanel];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *    extensions = @"tiff/tif/TIFF/TIF/jpg/jpeg/JPG/JPEG/pdf/PDF";<span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *     types = [extensions pathComponents];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [openPanel beginSheetForDirectory: NULL<span></span></pre></td></tr><tr><td scope="row"><pre>                                 file: NULL<span></span></pre></td></tr><tr><td scope="row"><pre>                                types: types<span></span></pre></td></tr><tr><td scope="row"><pre>                       modalForWindow: mWindow<span></span></pre></td></tr><tr><td scope="row"><pre>                        modalDelegate: self<span></span></pre></td></tr><tr><td scope="row"><pre>                       didEndSelector: @selector(openPanelDidEnd:returnCode:contextInfo:)<span></span></pre></td></tr><tr><td scope="row"><pre>                          contextInfo: NULL];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Write a selector method that’s invoked when the Open panel terminates.</p><p>If the user chooses an image, this method calls the <code>openImageURL:</code> method, passing to it the first item in the selected path.</p><div class="codesample"><table><tr><td scope="row"><pre>- (void)openPanelDidEnd: (NSOpenPanel *)panel<span></span></pre></td></tr><tr><td scope="row"><pre>             returnCode: (int)returnCode<span></span></pre></td></tr><tr><td scope="row"><pre>            contextInfo: (void  *)contextInfo<span></span></pre></td></tr><tr><td scope="row"><pre>{<span></span></pre></td></tr><tr><td scope="row"><pre>    if (returnCode == NSOKButton)<span></span></pre></td></tr><tr><td scope="row"><pre>    {<span></span></pre></td></tr><tr><td scope="row"><pre>        [self openImageURL: [[panel URLs] objectAtIndex: 0]];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></li><li class="li"><p>Save the <code>Controller.m</code> file.</p></li><li class="li"><p>Double-click the MainMenu icon in the nib document window.</p></li><li class="li"><p>Click the File menu so you can see the items in it—New, Open, and so on. </p></li><li class="li"><p>Control-drag from the Open menu item to the controller and connect to the <code>openImage:</code> action in the connections panel.</p></li><li class="li"><p>Save the nib file.</p></li><li class="li"><p>In Xcode, click Build and Go.</p><p>Choose File > Open and make sure that you can open an image.</p></li></ol>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../ImageKitComponents/ImageKitComponents.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../ImageBrowser/ImageBrowser.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-06-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/GraphicsImaging/Conceptual/ImageKitProgrammingGuide/ImageViews/ImageViews.html%3Fid%3DTP40004907-1.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/GraphicsImaging/Conceptual/ImageKitProgrammingGuide/ImageViews/ImageViews.html%3Fid%3DTP40004907-1.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/GraphicsImaging/Conceptual/ImageKitProgrammingGuide/ImageViews/ImageViews.html%3Fid%3DTP40004907-1.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
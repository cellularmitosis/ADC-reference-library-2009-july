<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SCSI Manager Parameter Block Header(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING162></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-161.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-163.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-151.html"><B>Chapter 4 - SCSI Manager 4.3</B></A> / <A HREF="Devices-156.html"><B>SCSI Manager 4.3 Reference</B></A><BR><DL><DD><A HREF="Devices-157.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING162-0></A>
<H3><A NAME=MARKER-9-74></A>SCSI Manager Parameter Block Header</H3>
 <A NAME=MARKER-2-75></A>You use the SCSI Manager parameter block to pass information to the <CODE>SCSIAction</CODE> function. Because many of the functions that you access through <CODE>SCSIAction</CODE> require additional information, the parameter block consists of a common header (<CODE>SCSIPBHdr</CODE>) followed by function-specific fields, if any. This section describes the parameter block header common to all <CODE>SCSIAction</CODE> functions. The function-specific extensions are described in the following sections.<P>
 The SCSI Manager parameter block header is defined by the <CODE>SCSI_PB</CODE> data type.<P>
<PRE>
#define SCSIPBHdr              \
   struct   SCSIHdr *qLink;    \
   SInt16   scsiReserved1;     \
   UInt16   scsiPBLength;      \
   UInt8    scsiFunctionCode;  \
   UInt8    scsiReserved2;     \
   OSErr    scsiResult;        \
   DeviceIdent scsiDevice;     \
   CallbackProc scsiCompletion;\
   UInt32   scsiFlags;         \
   UInt8    *scsiDriverStorage;\
   Ptr      scsiXPTprivate;    \
   SInt32   scsiReserved3;

struct SCSI_PB
{
   SCSIPBHdr
};
typedef struct SCSI_PB SCSI_PB;
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE><A NAME=MARKER-2-32></A>qLink</CODE>
<DD> A pointer to the next entry in the request queue. This field is used internally by the SCSI Manager and must be set to 0 when the parameter block is initialized. The SCSI Manager functions always set this field to 0 before returning, so you do not need to set it to 0 again before reusing a parameter block.
<DT><CODE><A NAME=MARKER-2-77></A>scsiPBLength</CODE>
<DD> The size of the parameter block, in bytes, including the parameter block header.
<DT><CODE><A NAME=MARKER-2-78></A>scsiFunctionCode</CODE>
<DD> A function selector code that specifies the service being requested. <A HREF=Devices-173.html#MARKER-9-2>Table 4-2 on page 4-39</A> lists these codes.
<DT><CODE><A NAME=MARKER-2-36></A>scsiResult</CODE>
<DD> The result code returned by the XPT or SIM when the function completes. The value <CODE>scsiRequestInProgress</CODE> indicates that the request is still in progress or queued.
<DT><CODE><A NAME=MARKER-2-80></A>scsiDevice</CODE>
<DD> A 4-byte value that uniquely identifies the target device for a request. The <CODE>DeviceIdent</CODE> data type designates the bus number, target SCSI ID, and logical unit number (LUN).
<DT><CODE><A NAME=MARKER-2-81></A>scsiCompletion</CODE>
<DD> A pointer to a completion routine.
<DT><CODE><A NAME=MARKER-9-82></A><A NAME=MARKER-2-83></A>scsiFlags</CODE>
<DD> Flags indicating the transfer direction and any special handling required for this request.
<TABLE BORDER="0" CELLPADDING=3><TD>&nbsp;<TD><CODE>scsiDirectionMask<BR></CODE>A bit field that specifies transfer direction, using these constants:<P><CODE> scsiDirectionIn   </CODE>Data in<BR><CODE>scsiDirectionOut  </CODE>Data out<BR><CODE>scsiDirectionNone </CODE>No data phase expected<TR>
<TD>&nbsp;<TD><CODE>scsiDisableAutosense<BR></CODE><A NAME=MARKER-2-337></A>Disable the automatic <CODE>REQUEST SENSE</CODE> feature.<TR>
<TD>&nbsp;<TD><CODE>scsiCDBLinked<BR></CODE>The parameter block contains a linked CDB. This option may not be supported by all SIMs.<TR>
<TD>&nbsp;<TD><CODE>scsiQEnable </CODE>Enable target queue actions. This option may not be supported by all SIMs.<TR>
<TD>&nbsp;<TD><CODE>scsiCDBIsPointer<BR></CODE>Set if the <CODE>scsiCDB</CODE> field of a SCSI I/O parameter block contains a pointer. If clear, the <CODE>scsiCDB</CODE> field contains the actual CDB. In either case, the <CODE>scsiCDBLength</CODE> field contains the number of bytes in the SCSI command descriptor block.<TR>
<TD>&nbsp;<TD><CODE>scsiInitiateSyncData<BR></CODE>Set if the SIM should attempt to initiate a synchronous data transfer by sending the <CODE>SDTR</CODE> message. If successful, the device normally remains in the synchronous transfer mode until it is reset or until you specify asynchronous mode by setting the <CODE>scsiDisableSyncData</CODE> flag. Because <CODE>SDTR</CODE> negotiation occurs every time this flag is set, you should set it only when negotiation is actually needed.<TR>
<TD>&nbsp;<TD><CODE>scsiDisableSyncData<BR></CODE>Disable synchronous data transfer. The SIM sends an <CODE>SDTR</CODE> message with a REQ/ACK offset of 0 to indicate asynchronous data transfer mode. You should set this flag only when negotiation is actually needed.<TR>
<TD>&nbsp;<TD><CODE>scsiSIMQHead </CODE>Place the parameter block at the head of the SIM queue. This can be used to insert error handling at the head of a frozen queue.<TR>
<TD>&nbsp;<TD><CODE>scsiSIMQFreeze<BR></CODE>Freeze the SIM queue after completing this transaction. See <A HREF=Devices-153.html#MARKER-9-43>"Error Recovery Techniques" on page 4-10</A> for information about using this flag.<TR>
<TD>&nbsp;<TD><CODE>scsiSIMQNoFreeze<BR></CODE>Disable SIM queue freezing for this transaction.<TR>
<TD>&nbsp;<TD><CODE>scsiDoDisconnect<BR></CODE>Explicitly allow device to disconnect.<TR>
<TD>&nbsp;<TD><CODE>scsiDontDisconnect<BR></CODE>Explicitly prohibit device disconnection. If this flag and the <CODE>scsiDoDisconnect</CODE> flag are both 0, the SIM determines whether to allow or prohibit disconnection, based on performance criteria.<TR>
<TD>&nbsp;<TD><CODE>scsiDataReadyForDMA<BR></CODE>Data buffer is locked and non-cacheable.<TR>
<TD>&nbsp;<TD><CODE>scsiDataPhysical<BR></CODE>Data buffer address is physical.<TR>
<TD>&nbsp;<TD><CODE>scsiSensePhysical<BR></CODE>Autosense data pointer is physical.</TABLE>

<DT><CODE><A NAME=MARKER-2-84></A>scsiDriverStorage<DFN></DFN></CODE>
<DD> A pointer to the device driver's private storage. This field is not affected or used by the SCSI Manager.<A NAME=MARKER-2-85></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-161.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-163.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

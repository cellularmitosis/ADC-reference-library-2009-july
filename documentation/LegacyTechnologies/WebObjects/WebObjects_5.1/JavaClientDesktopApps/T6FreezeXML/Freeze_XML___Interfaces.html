<HTML>
	<HEAD>
		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
		<meta name="generator" content="XML_Publisher">
		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">
        <title>Freeze
XML User Interfaces</title>
		</HEAD>
	<BODY bgcolor="#ffffff">
<!-- start of header -->
<!--#include virtual="/includes/framesetheader" -->
<!-- end of header --> <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Task_Freezi__Interfaces.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="Customize_the_XML.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerTop -->  
<!-- apple_doc: pageHeadingStart --><a name = "TPXREF111"></a><a name="-651515"></a><h2><font face="Lucida Grande,Helvetica,Arial">Freeze
XML User Interfaces</font></h2><!-- apple_doc: pageHeadingEnd -->

<p><b>Problem:</b> You need more finely grained control
over the user interface than the Direct to Java Client Assistant
allows.</p>
<p><b>Solution:</b> Use the XML generated by Assistant
as a starting point, then edit it by hand to suit your needs.</p>
<p>Freezing XML is another way to customize Direct to Java Client
applications. While Assistant allows you to make basic user interface
customizations to your application, it is necessarily limited. Freezing
XML, however, gives you finer control over your application's
user interface. With that said, you should use Assistant as much
as you can since freezing XML makes your application more complex
and less flexible than just using Assistant.</p>
<p>Freezing XML involves these steps:</p>
<ul><li>making a
new D2WComponent</font></li>
<li>copying an XML description from Assistant and editing it in
the new component's <code>.html</code> file</font></li>
<li>writing a rule to tell the rule system to use the XML component</font></li></ul>
<p></p><br><table border = "0" BGCOLOR="#E6E6E6">

<tr>
<td scope="row"><b>Note: </b>Before
freezing XML, your data model should be as complete as possible.
When just using Assistant to customize applications, changes to
data models are automatically picked up in most cases. However,
the more advanced customization techniques, starting with XML freezing,
make data model&#150;user interface synchronization more difficult. </td>
</tr>

</table><br>
<p>Follow these steps to customize the user interface of the
Admissions application using frozen XML:</p>
<ol><li>In Project
Builder, select the Web Components group, choose File &gt; New File,
and select Component from the WebObjects list, as shown in  <a href="#BCIDBGBG">Figure 13-1</a>.
Do not select Display Group Component or Java Client Component.<br>
<a name = "BCIDBGBG"></a><a name="-652994"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
13-1 Select Component as the file type</font></b></p>
 <img src = "../Art/newcomponent.gif" alt = "[image: ../Art/newcomponent.gif]">
</font></li>
<li>Name the new component "StudentFormWindow" and make sure
Application Server is the selected target, as shown in  <a href="#BCIJDIBD">Figure 13-2</a>. <p>The
recommend convention for naming frozen XML components is <em>EntityNameTaskNameWindowType</em>.
So, if the entity in question is Student, and the task is query,
the frozen XML component should be named "StudentQueryWindow."</p><p>Click
Finish.</p><br><a name = "BCIJDIBD"></a><a name="-653016"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure 13-2 Name
new component "StudentFormWindow"</font></b></p> <img src = "../Art/namexmlcomponent.gif" alt = "[image: ../Art/namexmlcomponent.gif]">
</font></li>
<li>The Project Builder assistant for new component files creates
a standard WebObjects component, so you need to change it to a D2WComponent.
Add the import statement for <code>com.webobjects.directtoweb</code> and
change the superclass of <code>StudentFormWindow</code> to <code>D2WComponent</code>,
as shown in  <a href="#BCIIGAJH">Listing 13-1</a>.<a name = "BCIIGAJH"></a><a name="-653080"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Listing 13-1 Change
the superclass of StudentFormWindow to D2WComponent</font></b></p>
<pre>import com.webobjects.foundation.*; import com.webobjects.appserver.*; import com.webobjects.eocontrol.*; import com.webobjects.eoaccess.*; import com.webobjects.directtoweb.*;  public class StudentFormWindow extends D2WComponent {     public StudentFormWindow(WOContext context) {         super(context);     } }</pre></font></li>
<li>Build and run the application and start the client application. </font></li>
<li>Switch to the XML pane in Assistant.</font></li>
<li>Under Specification, select entity=Student, question=window,
task=form. This puts the XML description for that selection in the
XML window as shown in  <a href="#BCIDGIBD">Figure 13-3</a>.<br>
<a name = "BCIDGIBD"></a><a name="-653126"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
13-3 XML description of Student entity,
form window</font></b></p> <img src = "../Art/studentformxmltab.gif" alt = "[image: ../Art/studentformxmltab.gif]">
</font></li>
<li>Copy the whole XML specification and paste it into the <code>StudentFormWindow.html</code> file
in Project Builder. <code>StudentFormWindow.html</code> is
in the StudentFormWindow component.</font></li>
<li>In Project Builder, select the Resources group and choose
File &gt; New File and select Empty File. Name the file "d2w.d2wmodel"
and make sure Application Server is the selected target, as shown
in  <a href="#BCIGBIDB">Figure 13-4</a>. This
file will hold custom rules you write. Skip this step if your project
already has a <code>d2w.d2wmodel</code> file.<p>You
need to make a new <code>.d2wmodel</code> file
for a few reasons. First, Assistant stores its rules in the <code>user.d2wmodel</code> file
and writes out this file whenever it saves. So, any rules you add
or change manually in the <code>user.d2wmodel</code> file
is wiped out by Assistant. </p><p>By writing rules in a separate
file, you can maintain a custom set of rules and still use Assistant
for basic customizations. At runtime, all the <code>user.d2wmodel</code> files
in the frameworks and all the <code>d2w.d2wmodel</code> files
in your project and in your project's frameworks are merged, so
the rule system picks up your custom rules and the rules you specified
with Assistant, along with all the default rules.</p><br>
<a name = "BCIGBIDB"></a><a name="-654179"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
13-4 Make a new rule file for custom rules</font></b></p>
 <img src = "../Art/newd2wmodel.gif" alt = "[image: ../Art/newd2wmodel.gif]">
</font></li>
<li>Put the Rule Editor application (found in <tt>/Developer/Applications/</tt>)
in the Dock. Drag the <code>d2w.d2wmodel</code> file
to the Rule Editor icon in the Dock to open it. </font></li>
<li>Click New to make a new rule and add these arguments to the
left-hand side: <code>(task = 'form') and (entity.name
= 'Student')</code>.<p>Collectively, the left-hand
side arguments constitute the rule's <b>condition</b>.
If the condition exists (that is, the user or application performs
some action that triggers the condition), the rule fires and the
right-hand side of the rule is evaluated.</p><p>In this case,
if the query task is triggered (usually by a user action) on the
Student entity, the condition of this rule is <code>true</code>,
so the rule fires. Collectively, the left-hand side arguments ask
"how should this part of the application behave?" And since
the condition has been triggered, the behavior of this part of the
application is changed per the right-hand side arguments. </p><p>As
mentioned earlier, Direct to Java Client applications have four
basic tasks: query, form, list, and identify. (The rule system defines
other tasks with which you usually do not need to interact). In
this step, specifying task=form tells the rule system that this rule
pertains to the form task. By specifying the entity with entity.name=Student,
the rule system knows that this rule pertains to the form task for
the Student entity. However, if you want to use the frozen XML window
for the query task, you would instead specify task=query.</p></font></li>
<li>Set the right-hand side key to "window" and the value
to "StudentFormWindow". Set the priority to 50. Refer to  <a href="#BCIGIFGA">Figure 13-5</a> for
clarity. For an explanation of rule system priorities, see  <a href="../InsideTheRuleSystem/iRule_System_AJGJBBH.html" target="_top">"Rule System Priorities"</a>.<br>
<a name = "BCIGIFGA"></a><a name="-662826"></a><p><b><font face="Geneva,Helvetica,Arial" size="2">Figure
13-5 Add a rule to use frozen XML</font></b></p>
 <img src = "../Art/newruleinruleeditor.gif" alt = "[image: ../Art/newruleinruleeditor.gif]">
<p>The right-hand
side arguments constitute the answer to the question posed in the left-hand
side arguments. The answer is made up of a key and a value for that
key. In this case, the key is "window" and the value is "StudentFormWindow."
So in this case, the answer is "use the StudentFormWindow as the
window for form tasks for the Student entity." </p><p>For
high-level questions like <code>controller</code>, <code>window</code>,
and <code>modalDialog</code>, the
rule system expects the value to be the name of a D2WComponent,
like StudentFormWindow or any of the default D2WComponent classes
defined in <code>com.webobjects.eogeneration.*;</code> (see <tt>/System/Library/Frameworks/JavaEOGeneration.framework/Resources/</tt>).</p></font></li>
<li>Save the <code>.d2wmodel</code> file.</font></li></ol>
<br>
    <!-- insert Show/Hide frames -->
<script type="text/javascript" language="JavaScript"><!--
function loadFrames(){
if (top == self || (parent.frames[1].name != content))
    top.location.href = 'index.html?' + location.href;
}

if (self != top) {
  // loaded in frames
  document.write('<a href="'+self.location+'" target="_top"><img src="../images/hideframes.gif" border="0" alt="Hide Frames"></a>');
  }
else {
  // not loaded frames
	document.write('<a href="JavaScript:loadFrames()"><img src="../images/showframes.gif" border="0" alt="Show Frames"></a>');
}
//--></script>
<!-- end Show/Hide frames -->
<a href="Task_Freezi__Interfaces.html" target="content"><img src="../images/previous.gif" border="0"></a>&nbsp;<a href="Customize_the_XML.html" target="content"><img src="../images/next.gif" border="0"></a>&nbsp;<!-- apple_doc:infillMarkerBottom --> <br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated May 1, 2002)</font></p><!-- start of footer -->
<!--#include virtual="/includes/framesetfooter" -->
<!-- end of footer -->
</body>
</html>

<html><head><title>Mac OS X
 Manual Page For lastlog(5)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/5/lastlog" title="Mac OS X
 Manual Page for lastlog(5)"><!-- headerDoc=man; indexgroup=Section 5; uid="//apple_ref/doc/man/5/lastlog"; name=lastlog(5) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
UTMP(5)                     BSD File Formats Manual                    <!-- a -->UTMP(5)<!-- /a -->

<b>NAME</b>
     <b>utmp</b>, <b>wtmp</b>, <b>lastlog</b> -- login records (DEPRECATED)

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;utmp.h&gt;</b>

<b>DESCRIPTION</b>
     The interfaces in file &lt;<u>utmp.h&gt;</u> are all <b>DEPRECIATED</b> and are only provided for compatibility with previ-<font color="#ffffff" class="whiteout">ous&nbsp;previous</font>
     ous releases of Mac OS X.  See <a href="../man3/pututxline.3.html#//apple_ref/doc/man/3/pututxline">pututxline(3)</a> and <a href="utmpx.5.html#//apple_ref/doc/man/5/utmpx">utmpx(5)</a> for the supported interfaces.

     &lt;<u>utmp.h&gt;</u> declares the structures used to record information about current users in the file <b>utmp</b>,
     logins and logouts in the file <b>wtmp</b>, and last logins in the file <b>lastlog</b>.  The time stamps of date
     changes, shutdowns and reboots are also logged in the <b>wtmp</b> file.

     These files can grow rapidly on busy systems, daily or weekly rotation is recommended.  If any of these
     files do not exist, it is not created.  These files must be created manually and are normally main-<font color="#ffffff" class="whiteout">tained&nbsp;maintained</font>
     tained in either the script <u>/etc/daily</u> or the script <u>/etc/weekly</u>.  (See <a href="../man8/cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a>.)

           #define _PATH_UTMP      "/var/run/utmp"
           #define _PATH_WTMP      "/var/log/wtmp"
           #define _PATH_LASTLOG   "/var/log/lastlog"

           #define UT_NAMESIZE     8
           #define UT_LINESIZE     8
           #define UT_HOSTSIZE     16

           struct lastlog {
                   time_t  ll_time;
                   char    ll_line[UT_LINESIZE];
                   char    ll_host[UT_HOSTSIZE];
           };

           struct utmp {
                   char    ut_line[UT_LINESIZE];
                   char    ut_name[UT_NAMESIZE];
                   char    ut_host[UT_HOSTSIZE];
                   time_t  ut_time;
           };

     Each time a user logs in, the login program looks up the user's UID in the file <b>lastlog.</b> If it is
     found, the timestamp of the last time the user logged in, the terminal line and the hostname are writ-<font color="#ffffff" class="whiteout">ten&nbsp;written</font>
     ten to the standard output. (Providing the login is not <u>quiet</u>, see <a href="../man1/login.1.html#//apple_ref/doc/man/1/login">login(1)</a>.)  The login program then
     records the new login time in the file <b>lastlog</b>.

     After the new <u>lastlog</u> record is written , the file <b>utmp</b> is opened and the <u>utmp</u> record for the user
     inserted.  This record remains there until the user logs out at which time it is deleted.  The <b>utmp</b>
     file is used by the programs <a href="../man1/rwho.1.html#//apple_ref/doc/man/1/rwho">rwho(1)</a>, <a href="../man1/users.1.html#//apple_ref/doc/man/1/users">users(1)</a>, <a href="../man1/w.1.html#//apple_ref/doc/man/1/w">w(1)</a>, and <a href="../man1/who.1.html#//apple_ref/doc/man/1/who">who(1)</a>.

     Next, the login program opens the file <b>wtmp</b>, and appends the user's <u>utmp</u> record.  The same <u>utmp</u> record,
     with an updated time stamp is later appended to the file when the user logs out. (See <a href="../man8/launchd.8.html#//apple_ref/doc/man/8/launchd">launchd(8)</a>.)  The
     <b>wtmp</b> file is used by the programs <a href="../man1/last.1.html#//apple_ref/doc/man/1/last">last(1)</a> and <a href="../man8/ac.8.html#//apple_ref/doc/man/8/ac">ac(8)</a>.

     In the event of a date change, a shutdown or reboot, the following items are logged in the <b>wtmp</b> file.

     reboot
     shutdown    A system reboot or shutdown has been initiated.  The character `~' is placed in the field
                 <u>ut</u><b>_</b><u>line</u>, and reboot or shutdown in the field <u>ut</u><b>_</b><u>name</u>.  (See <a href="../man8/shutdown.8.html#//apple_ref/doc/man/8/shutdown">shutdown(8)</a> and <a href="../man8/reboot.8.html#//apple_ref/doc/man/8/reboot">reboot(8)</a>.)

     date        The system time has been manually or automatically updated.  (See <a href="../man1/date.1.html#//apple_ref/doc/man/1/date">date(1)</a>.)  The command
                 name date is recorded in the field <u>ut</u><b>_</b><u>name</u>.  In the field <u>ut</u><b>_</b><u>line</u>, the character `|' indi-<font color="#ffffff" class="whiteout">cates&nbsp;indicates</font>
                 cates the time prior to the change, and the character `{' indicates the new time.

<b>FILES</b>
     <b>(These</b> <b>files</b> <b>no</b> <b>longer</b> <b>exist</b> <b>in</b> <b>10.5</b> <b>or</b> <b>later.)</b>

     /var/run/utmp     The <b>utmp</b> <b>file.</b>
     /var/log/wtmp     The <b>wtmp</b> <b>file.</b>
     /var/log/lastlog  The <b>lastlog</b> <b>file.</b>

<b>SEE</b> <b>ALSO</b>
     <a href="../man1/last.1.html#//apple_ref/doc/man/1/last">last(1)</a>, <a href="../man1/login.1.html#//apple_ref/doc/man/1/login">login(1)</a>, <a href="../man1/who.1.html#//apple_ref/doc/man/1/who">who(1)</a>, <a href="../man8/ac.8.html#//apple_ref/doc/man/8/ac">ac(8)</a>, <a href="../man8/launchd.8.html#//apple_ref/doc/man/8/launchd">launchd(8)</a>

<b>HISTORY</b>
     A <b>utmp</b> and <b>wtmp</b> file format appeared in Version 6 AT&amp;T UNIX.  The <b>lastlog</b> file format appeared in
     3.0BSD.

4th Berkeley Distribution       March 17, 1994       4th Berkeley Distribution
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man5/lastlog.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man5/lastlog.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man5/lastlog.5.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

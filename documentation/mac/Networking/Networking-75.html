<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PRegisterName(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING75></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-74.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-76.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-61.html"><B>Chapter 3 - Name-Binding Protocol (NBP)</B></A> / <A HREF="Networking-66.html"><B>NBP Reference</B></A><BR><DL><DD><A HREF="Networking-72.html"><B>Routines</B></A> / <A HREF="Networking-73.html"><B>Registering an Entity </B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING75-0></A>
<H3><A NAME=MARKER-9-108></A>PRegisterName</H3>
 <A NAME=MARKER-11-109></A>The <A NAME=MARKER-2-13></A><CODE>PRegisterName</CODE> function adds a unique names table entry to the local node's NBP names table. <A NAME=MARKER-2-111></A><P>
<PRE>
FUNCTION PRegisterName (thePBptr: MPPPBPtr; async: Boolean): OSErr;
</PRE>
<DL>
<DT><CODE>thePBptr</CODE>
<DD> A pointer to an MPP parameter block.
<DT><CODE>async</CODE>
<DD> A Boolean that indicates whether the function should be executed asyn-<BR>chronously or synchronously. Specify <CODE>TRUE</CODE> for asynchronous execution.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The function result.<TR>
<TD>--><TD>ioRefNum<TD>Integer<TD>The .MPP driver reference number. <TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>registerName</CODE>. <TR>
<TD>--><TD>interval<TD>Byte<TD>The retry interval.<TR>
<TD><-><TD>count<TD>Byte<TD>The retry count.<TR>
<TD>--><TD>entityPtr<TD>Ptr<TD>A pointer to a names table entry.<TR>
<TD>--><TD>verifyFlag<TD>Byte<TD>A flag to indicate whether NBP is to verify NBP names as unique.</TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE>ioCompletion</CODE>
<DD> <A NAME=MARKER-2-45></A>A pointer to a completion routine that you can provide. When you execute a function asynchronously, the .MPP driver calls your completion routine when it completes execution of the function if you specify a pointer to the routine as the value of this field. Specify <CODE>NIL</CODE> for this field if you do not wish to provide a completion routine. If you execute a function synchronously, the .MPP driver ignores the <CODE>ioCompletion</CODE> field. For information about completion routines, see the chapter "Introduction to AppleTalk" in this book. 
<DT><CODE>ioResult</CODE>
<DD> The result of the function. When you execute the function asynchro-<BR>nously, the function sets this field to 1 and returns a function <BR>result of <CODE>noErr</CODE> as soon as the function begins execution. When <BR>the function completes execution, it sets the <CODE>ioResult</CODE> field to the actual result code.
<DT><CODE><A NAME=MARKER-9-47></A>ioRefNum</CODE>
<DD> The .MPP driver reference number. The MPW interface fills in <BR>this field. 
<DT><CODE>csCode</CODE>
<DD> <A NAME=MARKER-2-114></A>The command code of the .MPP command to be executed. The MPW interface fills in this field.
<DT><CODE><A NAME=MARKER-2-115></A>interval</CODE>
<DD> The retry interval to be used by NBP when it verifies the uniqueness of the name. The retry interval value specifies how long the function is to wait between retries in 8-tick units. A value of 7 for the <CODE>interval</CODE> field is usually sufficient (7 <EM></EM> 8 = 56 ticks equals approximately 1 second). 
<DT><CODE><A NAME=MARKER-2-205></A>count</CODE>
<DD> On input, the retry count to be used by NBP when it verifies the uniqueness of the name. Its value tells the <CODE>PRegisterName</CODE> function how many times to retry. A retry count of 5 is usually sufficient. On return, the number of times that NBP actually attempted to verify the uniqueness of the name. 
<DT><CODE><A NAME=MARKER-2-211></A>entityPtr</CODE>
<DD> A pointer to a names table entry. You can use the <CODE>NBPSetNTE</CODE> procedure to create a names table entry.You cannot use wildcard characters in the object name and type name fields of the names table entry, but you must use an asterisk (*)--indicating the local zone--for the zone name field. 
<DT><CODE><A NAME=MARKER-2-55></A>verifyFlag</CODE>
<DD> A f<A NAME=MARKER-2-18></A>lag that determines whether NBP attempts to verify that the name you are adding to the names table is unique. Set this flag to a nonzero number to have NBP verify the name. You can set this flag to zero during program development, but to avoid confusion caused by duplicate names on a network, you should always set the <CODE>verifyFlag</CODE> parameter to a nonzero number in released software.
</DL>
<A NAME=HEADING75-14></A>
<H5>DESCRIPTION</H5>
 Before another entity can send information to your entity over AppleTalk, it must have your entity's internet socket address. Also, for users to be able to select your application, the entity must be made visible throughout the network. <P>
 The <CODE>PRegisterName</CODE> function adds an entry for a network entity to the node's NBP names table, making it possible for a user or another process to locate that entity through its NBP name (consisting of object, type, and zone names). The process whose name is registered with NBP is referred to as a <A NAME=MARKER-2-217></A><I>network-visible entity</I>. <P>
 Because the object, type, and zone names in a names table entry are of arbitrary length, you cannot create this record in Pascal (which requires you to declare the length of character strings when you define the record). Use the <CODE>NBPSetNTE</CODE> procedure to create the names table entry. If you execute the function asynchronously and you do not specify a completion routine, your process can poll the <CODE>ioResult</CODE> field to determine when the function completes execution. <P>
 You can assign any number of names to a single socket. If you use a single socket for more than one process, you must provide a socket listener. <P>
 If you use the <CODE>PKillNPB</CODE> function to cancel the <CODE>PRegisterName</CODE> function and the cancel request is successful, <CODE>PRegisterName</CODE> returns a function result of <CODE>reqAborted</CODE>. <P>
<A NAME=HEADING75-20></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 The names table entry that you provide remains the property of NBP until you use the <CODE>PRemoveName</CODE> function to remove the entry from the names table. You must allocate a nonrelocatable block for the names table entry, or lock any relocatable block that you use for it until you are ready to remove the entry. <P>
<A NAME=HEADING75-22></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>PRegisterName</CODE> function from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>registerName</CODE> in the <CODE>csCode</CODE> field of the parameter block. To execute the <CODE>_Control</CODE> trap asynchronously, include the value <CODE>,ASYNC</CODE> in the operand field. To execute this function from assembly language, you must also specify the driver reference number. <P>
<A NAME=HEADING75-24></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>nbpDuplicate<TD>-1027<TD>Name already exists<TR>
<TD>tooManyReqs<TD>-1097<TD>Too many concurrent requests; wait a few minutes, then try the request again <TR>
<TD>reqAborted<TD>-1105<TD>Request canceled</TABLE>
</H5>
<A NAME=HEADING75-25></A>
<H5>SEE ALSO</H5>
 To create a names table entry, use the <CODE>NBPSetNTE</CODE> procedure, described on <A HREF=Networking-74.html#MARKER-9-98>page 3-22</A>.<P>
 For the names table entry record format, see <A HREF=Networking-62.html#MARKER-9-20>Figure 3-2 on page 3-5</A>. <P>
 For the <CODE>NamesTableEntry</CODE> data type declaration, see <A HREF=Networking-69.html#MARKER-9-81>"Names Table Entry Record" on page 3-19</A>.<P>
 To cancel a name registration request, use the <CODE>PKillNBP</CODE> function, described on <A HREF=Networking-82.html#MARKER-9-169>page 3-36</A>.<P>
 For information about socket listeners, see the chapter "Datagram Delivery <A NAME=MARKER-2-147></A>Protocol (DDP)" in <A NAME=MARKER-2-165></A>this <A NAME=MARKER-2-67></A>book. <A NAME=MARKER-2-74></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-74.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-76.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

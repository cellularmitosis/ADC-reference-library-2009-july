<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!-- Template 01-05-01 --><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Note TN1121: Mac OS 8.1</title>      <meta name="keywords" content="Mac OS 8.1 documentation features Finder Start Manager MathLib">    <meta name="Description" content="Technical Note TN1121: This Technical Note documents MacOS 8.1 and the changes that most likely will affect developers.Topics include: Finder 8.1, HFS Plus volume format, FileManager Disk Cache, Start Manager, etc."><meta name="categories" content="Overview, Operating System and System Releases"><meta name="week-posted" content="Dec 29, 1997 - Jan 2, 1998"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002961" title="Mac OS 8.1"></a><A NAME="top"></A><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxMacOS9Earlier-date.html">Mac OS 9 & Earlier</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/index.html" target="_blank">Reference Library</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note TN1121</div>
<div id="pageheadsub">Mac OS 8.1</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><center><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left">          <!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                        <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left><!-- begin_toc --><p id="menutext"><A HREF = "#Finder8.1">Finder 8.1</A><BR><BR>      <A HREF = "#HFSPlus">HFS Plus volume format</A><BR><BR>      <A HREF = "#FileManagerDiskCache">File Manager Disk Cache</A><BR><BR>      <A HREF = "#ExtensionTableManager">Start Manager</A><BR><BR>      <A HREF = "#SoundforPCISystems">Sound for PCI Systems</A><BR><BR>      <A HREF = "#MathLibv3">MathLib v3</A><BR><BR>      <A HREF = "#ADBManager">ADB Manager</A><BR><BR>      <A HREF = "#AppearanceManager">Appearance Manager</A><BR><BR>      <A HREF = "#PCExchange">PC Exchange</A><BR><BR>      <A HREF = "#AppleLocationManager2.0">Apple Location Manager   2.0.1</A><BR><BR>      <A HREF = "#VirtualMemoryPaging">Virtual Memory</A><BR><BR>      <A HREF = "#FileSystemManager">File System Manager</A><BR><BR>      <A HREF = "#DriverGestaltAdditions">DriverGestalt Additions</A><BR><BR>         <A HREF = "#Java2.0">Mac OS Runtime for Java   2.0</A><BR><BR>      <A HREF = "#OpenTransport1.3">Open Transport 1.3</A><BR><BR>      <A HREF = "#TextEncodingConverter">Text Encoding Converter   Manager 1.3</A><BR><BR><A HREF="#Downloads">Downloadables</A></p>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left>            			<!-- begin_intro_text --><CENTER><TABLE BORDER=0 WIDTH=250><TR><td bgcolor="#E6E6E6" align=left><p id="introtext"><B>Note:</B><BR>Many of the changes mentioned here are accompanied bycorresponding changes to interface files. These updated interfacefiles will be available in the next release (after 3.0.1) of<a href="http://developer.apple.com/sdk/index.html">UniversalInterfaces</A>.</P></TD></TR></TABLE></CENTER><p id="introtext">Mac OS 8.1 introduces a number of new and/or updated technologies. This Technote documents the changes that most likely will affectdevelopers.</P><!-- end_intro_text --><!-- begin_date --><h3>&nbsp;Updated: [Jan 30 1998]</h3><!-- end_date -->        </td>    </tr></table> <!-- end_header_box --><BR><BR><hr width=500 align=center><BR><BR><!-- begin_content -->        </td></tr></table></center><center><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><H2><A NAME="Finder8.1"></A>Finder 8.1</H2><P>Finder 8.1 changes fall into three categories:</P><UL>   <LI><A HREF = "#FinderNewfeatures">New features</A></li>      <LI><A HREF = "#FinderEnhancements">Enhancements to existing   features</A></li>      <LI><A HREF = "#FinderBugfixes">Bug fixes</A></li></UL><P>Finder 8.1 also defines two new bits in its<A HREF = "#FinderGestalt">Gestalt selector</A>.</P><A NAME="FinderNewfeatures"></A><H3>New features:</H3><UL>   <LI>Get Info windows for disk volumes show the volume format.<BR></li>         <LI>Folder windows have a "sort order" button which toggles the   order of list views. Sort order is also accessible through the   AppleScript property "sort direction" of class "container   window".<BR></li>         <LI>A key sequence of "Command-Shift-W" will close any window,   including pop-up windows. A key sequence of   "Command-Shift-Option-W" will close all windows, including pop-up   windows. Either of these key sequences will return a pop-up window   to its "normal" state before closing it.<BR></li>        <LI>Support for "unconventional" desktop printing via LaserWriter   8. See <A HREF = "../../technotes/tn/tn1112.html">Technote 1112</A>,    "Introducing the LaserWriter Driver Version 8.5.1".<BR></li>            <LI>The <CODE>bSupportsAsyncRequests</CODE> bit of the   <CODE>vMAttrib</CODE> field of the   <CODE>GetVolParmsInfoBuffer</CODE> structure is honored. File   systems that set this bit are guaranteeing that they can correctly   handle asynchronous File Manager requests.<BR></li>         <LI>The <CODE>vmVolumeGrade</CODE> field of the   <CODE>GetVolParmsInfoBuffer</CODE> structure is honored. File   system developers should fill in this field according to the   following formula:<CODE> -1 * (transfer rate in bytes per   second)</CODE>. Since Finder checks the <CODE>vmVolumeGrade</CODE>   field before initiating each copy operation, file systems should   feel free to produce different values for this field as often as   they like. A file system might choose to change this field based   on such metrics as network reliability or the number of users   logged in to a server.</li></UL><A NAME="FinderEnhancements"></A><H3>Enhancements to existingfeatures:</H3><UL>   <LI>File copying operations have been substantially accelerated in   many cases.<BR></li>            <LI>Window opening (both drawing and redrawing) has been   substantially accelerated.<BR></li>   </UL><A NAME="FinderBugfixes"></A><H3>Bug fixes:</H3><P>Dozens of bugs have been fixed, including many in AppleScriptsupport. Some internal subsystems have been redesigned andre-implemented for substantially better stability.</P><H4>Finder/AppleScript bug fixes:</H4><UL>   <LI>The <CODE>typeIconFamily</CODE> data type is once again   supported.<BR></li>            <LI>Creating folders and renaming objects will now record   properly.<BR></li>            <LI>A copy operation with "replacing conflicts" no longer   fails.<BR></li>            <LI>The support for "entire contents" has been rewritten   completely and should be more reliable in general.<BR></li>            <LI>Setting a view which has not been enabled in the View Options   dialog no longer causes unpredictable behavior.<BR>   </li>         <LI>Support for the  kAEFinderSuite/kAESync ('fndr'/'fupd') event now conforms   more closely to that of Finder 7. Because of fundamental differences between Finder 7   and 8, there is no way to make the behavior absolutely   identical.<BR></li>            <LI>File type comparisons are now case-sensitive.<BR></li>            <LI>Duplicate and move operations "with routing suppressed" now   works correctly.<BR></li>            <LI>Several memory leaks were eliminated, some of which existed   prior to Finder 8.0. Several involved "whose" clause   resolution and disposing of the descriptors used to represent   the search specification. Another leak had to do with token   handles in token descriptors not getting disposed when the token   did.<BR></li>            <LI>Attempts to resolve a broken alias will now reliably produce   an error -5018 (<CODE>afpObjectNotFound</CODE>).<BR></li>            <LI>Support for "whose" clauses now works properly with respect to   processes.<BR></li>   </UL><H4>Other specific bug fixes:</H4><UL>   <LI>Finder 8.0 disables the Put Away item in the Special menu for   all RAM disks which (truthfully, per DTS sample code) identify   themselves as such. It was thought this would provide better user   experience for users of the Mac OS RAM disk, but it had unintended   effects on third-party RAM disks. This menu item is no longer   disabled under these circumstances.<BR></li>            <LI>For any drag flavor whose data was larger than 1024 bytes,   Finder 8.0 was reliably storing only the very first chunk of   flavor data in the <CODE>DragReference</CODE>.<BR></li>            <LI>Finder 8.0 created incorrect clipping files when the drag   contained flavors with the <CODE>flavorNotSaved</CODE> flag. The   item count stored in the clipping was too high. Finder 8.1 handles   <CODE>flavorNotSaved</CODE> correctly and tolerates bogus clipping   files created by Finder 8.0.<BR></li>            <LI>Finder 8.0 occasionally created custom icon files where they were not needed.   Finder 8.1 does not do this.<BR></li>            <LI>Finder 8.1 honors the order in which a group of icons are selected. The   order can be important for subsequent commands to that group, like   a Print or Open command.<BR></li>            <LI>Get Info on a CFM-68K application now includes the "Memory   requirements will increase/decrease" message, which only used to   appear for PowerPC-native applications.<BR></li>            <LI>Finder 8.0 did not post the watch cursor every time it became   busy. Finder 8.1 posts it in more of these cases.<BR></li>   </UL><A NAME="FinderGestalt"></A><H3>Gestalt:</H3><P>As a result of the above changes and changes in Finder 8, Finder'sGestalt selector response value has acquired two new defined bitsunder Mac OS 8.1:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>enum{    gestaltFinderFloppyRootComments = 8,    gestaltFinderLargeAndNotSavedFlavorsOK = 9};</pre></TD></TR></TABLE></CENTER><BR><BR><P><CODE>gestaltFinderFloppyRootComments</CODE> describes whetherdesktop database comments for floppy disks contain data the usertyped in (notes, etc.) or are used internally by Finder. Under Mac OS8 and later, this field is used by Finder; if Finder everrelinquishes the use of the field, it will set this bit.</P><P><CODE>gestaltFinderLargeAndNotSavedFlavorsOK</CODE> describeswhether two bugs (described above) in Finder's handling of clippingfiles have been fixed. Under Mac OS 8.1, this bit is set.</P><P>Before testing for either of these bits, you should first test forthe presence of Mac OS 8 or later. If Mac OS 8 is present, neither ofthese bits will be set.</P><hr width=500 align=center><H2><A NAME="HFSPlus"></A>HFS Plus Volume Format</H2><P>Mac OS 8.1 introduces support for Apple's new volume format, HFSPlus (also known as Mac OS Extended). This format is available foruse with any storage device larger than 32MB that support the HFSvolume format.</P><H3>Benefits Provided in Mac OS 8.1</H3><P>The main benefit in this release of the Mac OS Extendedvolume format is the use of smaller allocation blocks. The size ofallocation blocks used for a particular volume depend on its size.</p><BLOCKQUOTE><TABLE BORDER=0>   <TR>      <td width=92 height=16 align=left>         <P>Volume Size</p>      </TD><td width=134 height=16 align=left>         <P>Default allocation block size</p>      </TD></TR>   <TR>      <td width=92 align=left>         <P>&lt;= 256 MB</p>      </TD><td width=134 align=left>         <P>512</p>      </TD></TR>   <TR>      <td width=92 align=left>         <P>&lt;= 512 MB</p>      </TD><td width=134 align=left>         <P>1K</p>      </TD></TR>   <TR>      <td width=92 align=left>         <P>&lt;= 1GB</p>      </TD><td width=134 align=left>         <P>2K</p>      </TD></TR>   <TR>      <td width=92 align=left>         <P>&gt; 1GB</p>      </TD><td width=134 align=left>         <P>4K</p>      </TD></TR></TABLE></BLOCKQUOTE><P>The default allocation block size of 4K was chosen for volumeslarger than 1GB. For a number of reasons:</P><UL>   <LI>The more allocation blocks you have (because of smaller size), the   greater the probability of fragmentation.</li>   <LI>The VM page size is 4K.  If your allocation   blocks are a multiple of 4K, then your Virtual Memory pages won't be   fragmented (though the entire backing store file might be).</li>      <LI>A survey of actual fork sizes on actual HFS disks   revealed that reducing the allocation block size to 4K gave   proportional reduction in the wasted space on a volume.  Reducing   the allocation block size further did not reduce the wasted space   nearly as much.  There was a distinct "knee" in the curve between   2K and 8K.</li>      <LI>Doing I/O in larger chunks (4K-16K or more, per I/O)   dramatically improves performance compared to small (512 byte)   I/O.</li></UL><H3>Future Benefits</H3><P>The Mac OS Extended volume format also provides support for longUnicode file names, large files, and extended attributes. However,Mac OS 8.1 does not introduce the new APIs required to access theseadvanced features. The support for Mac OS Extended volumes was addedin such a way that use of these volumes should be transparent todevelopers who use only the documented File Manager API.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Even though there are no APIs todirectly manipulate Unicode file names, the File Manager uses Unicodeto store file names on HFS Plus volumes. These file namesare stored in the catalog in an different order than the <CODE>RelString</CODE> order for HFSvolumes. If an application depends on the way files are ordered ondisk, it will probably behave differently with the different formats.</P></TD></TR></TABLE></CENTER><BR><BR><P>Mac OS 8.1 introduces a few changes to the existing File Manager API  that developers should be aware of. Thesechanges include routines for getting extended volume information andfor controlling the formatting process. These changes are describedin a separate HFS Plus Technote which will be published in the nearfuture along with another document, "Mac OS Extended Volume Format",that describes the format of an HFS Plus volume.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>If your application makes use of any undocumentedFile Manager low memory vectors, it will probably not work withMac OS 8.1. Most of these private vectors were either changed or removed when support forHFS Plus volumes was added.</P></TD></TR></TABLE></CENTER><BR><BR><hr width=500 align=center><H2><A NAME="FileManagerDiskCache"></A>File Manager Disk Cache</H2><P>The File Manager provides services for storage and retrieval ofdisk based information.</P><P>The File Manager disk cache performance on multi-block I/Ooperations has been improved. Cached multi-block I/O operationsshould be noticeably faster.</P><hr width=500 align=center><H2><A NAME="ExtensionTableManager"></A>Start Manager Changes</H2><P>The Start Manager was changed in Mac OS 8.1 to add a mechanism forcontrolling the loading of extensions at system startup. During theboot process, an extension table is created before any extensions areloaded. This table is then used by the boot code to determine whichextensions should be loaded and in which order.</P><P>Prior to the introduction of the Extension Table Manager in Mac OS 8.1,extensions were loaded from three folders, Extensions, Control Panels and theSystem Folder, in the order they were found on the disk. On an HFS volume,items are stored in the catalog in <CODE>RelString</CODE> order, i.e., in theorder the names would be in if sorted by the <CODE>RelString</CODE> function.This is the same order items are returned in by the File Manager's<CODE>GetFInfo</CODE> routine.</P><P>With the introduction of Mac OS 8.1 a new bootable disk format was introduced,HFS Plus. On an HFS Plus volume, items are stored in the catalog in a differentorder than a Mac OS Standard volume because of the internal use of Unicode foritem names. Since extensions were loaded in the order they were found in thecatalog, extensions would load in a different order when booted from an HFS vs.an HFS Plus volume.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Apple has always maintained that extensions cannot dependon extension loading order; however, many extensions requirespecific loading order.</P></TD></TR></TABLE></CENTER><BR><BR><P>To prevent problems for our users, and to ensure that extensionsload in the same order regardless of the volume format used, anextension table mechanism was added to the Start Manager. The defaultbehavior of the extension table handler is to sort the extensionsinto <CODE>RelString</CODE> order for each folder extensions are loaded from. Theresult is that extensions are loaded in the same order regardless ofwhich type of volume the system is booting from.</P><P>The Extension Table Manager also provides a mechanism that third-party products can use to watch, and optionally control, theextension loading process. A Technote covering this new mechanism isin progress and will be released in the near future.</P><hr width=500 align=center><H2><A NAME="SoundforPCISystems"></A>Sound for PCI Systems</H2><P>There have been a number of additions and changes to the soundsoftware for PCI-based Macintoshes under Mac OS 8.1 that will affectdevelopers.</P><H3>Additions</H3><P>A programmatic method for selecting sound sources via the SoundInput Manager using <CODE>OSType</CODE> selectors has been added. Both input andplaythrough sources are selectable this way.</P><UL>   <LI>The input source via the Sound Input Manager</li>      <LI>A playthrough source.</li></UL><P>Four new selectors have been added to the built-in sound inputdriver:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>enum {    siMonitorAvailable      = 'mnav',    siMonitorSource         = 'mons',    siOSTypeInputSource     = 'inpt',    siOSTypeInputAvailable  = 'inav'};</pre></TD></TR></TABLE></CENTER><BR><BR><P>These selectors allow the use of several new constants toset a particular input source or monitor source programmatically. Forinstance, to have the user record the CD, an application could usecode like this:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>inline OSErr SetInputSource (long soundRefNum, OSType inputSource) {    return SPBSetDeviceInfo (soundRefNum, siOSTypeInputSource, &amp;inputSource);}</pre></TD></TR></TABLE></CENTER><BR><BR><P>where <CODE>inputSource</CODE> was set to <CODE>kCDSource</CODE>.</P><P>The <CODE>OSType</CODE> sources were required to guarantee input sourceselection without user intervention, since the old sound inputnumbers were not consistent across machines.</P><P>The currently defined input source selectors are:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>enum {    kNoSource         = 'none',     /*no source selection*/    kCDSource         = 'cd  ',     /*internal CD player input*/    kExtMicSource     = 'emic',     /*external mic input*/    kRCAInSource      = 'irca',     /*RCA jack input*/    kTVFMTunerSource  = 'tvfm',    kDAVInSource      = 'idav',     /*DAV analog input*/    kIntMicSource     = 'imic',     /*internal mic input*/    kMediaBaySource   = 'mbay',     /*media bay input*/    kModemSource      = 'modm',     /*modem input*/    kZoomVideoSource  = 'zvpc'      /*zoom video input*/};</pre></TD></TR></TABLE></CENTER><BR><BR><H3>Changes</H3><UL>   <LI>Reduced interrupt buffer sizes, which allows for decreased   latency when playing and recording. The new buffer sizes, with VM   off, are 512 samples per interrupt, which decreases the latency   of sound at 44.1 kHz to approximately 11.6 ms. With VM on, the   buffer sizes are 4 times larger.<BR></li>            <LI>The sound buffers are again a fixed size which do not change   with sample rate.<BR></li>            <LI>The built-in sound input driver no longer supports the   <CODE>siOptionsDialog</CODE> selector. This support was removed for a number of   reasons.<BR>            <UL>      <LI>It is felt that drivers should not present a user      interface.</li>            <LI>The existing interface was rather clunky and inconsistent      between Mac OS computers.</li>            <LI>QuickTime's Sequence Grabber offers much of the same      support, and looks and works better.</li>      </UL></li></UL><H3>End User Experience</H3><P>There have also been some minor changes, which makethe sound experience more enjoyable and predictable for the user.They are:</P><UL>   <LI>User interface changes to support monitor sources instead of   "input" sources for the user to play back analog audio devices such   as CDs. There is a new Control Strip module and Monitors &amp; Sound   has changed to provide the user a choice of "monitor source."<BR></li>            <LI>The internal speaker and headphone port(s) act as a single   output port once again. Thus, if a headphone is inserted, the   internal speaker will always be inactive. This simplifies the UI   for output controls to a single set of controls (e.g. for volume,   mute, etc.).</li></UL><hr width=500 align=center><H2><A NAME="MathLibv3"></A><CODE>MathLib</CODE> v3</H2><P><CODE>MathLib</CODE> is a collection of numerical functions designed tofacilitate a wide range of numerical programming in preparation for C9X.All of its routines are IEEE-754 aware and treat exceptions, NaNs,positive and negative zero and infinity consistent with the floating-point standard. The interface to <CODE>MathLib</CODE> is defined in the <CODE>fp.h</CODE>and <CODE>fenv.h</CODE> interface files.</P><P><CODE>MathLib</CODE> v3 is a major rewrite of <CODE>MathLib</CODE> that boosts performanceand increases accuracy.</P><H3>Performance</H3><P><CODE>MathLib</CODE> v3 boosts the performance of many of its functions by anaverage of 30 % when measured with a uniform distribution over asubset of the domain of each function.</P><H3>Accuracy</H3><P>The accuracy of routines in <CODE>MathLib</CODE> v3 have been improved, mostnotably in the trigonometric functions (e.g, sin and cos). While mostnumerical functions have been improved, the double data typetrigonometric functions are now more in line with their long doublecounterpart due to a change in their argument reduction methodology.</P><P>Argument reduction in <CODE>MathLib</CODE> v2 was 53-bit Pi based. To improvecoherency and uniformity between double and long double, thetrigonometric functions in <CODE>MathLib</CODE> v3 reduce their arguments with a107-bit Pi. This may introduce a difference in the computed resultsof circular functions in <CODE>MathLib</CODE> v2 vs <CODE>MathLib</CODE> v3.</P><P>The reason for this difference is that <CODE>MathLib</CODE> v2 and <CODE>MathLib</CODE> v3carry out a machine Pi argument reduction as opposed to an infinitePi reduction. Any change in the precision of Pi will affect the finalresult. Arguments passed to <CODE>MathLib</CODE> v3 are no longer able to matchthe argument reduction seed Pi, (which now has 107-bits of precision)hence, exact edge case results are no longer produced. Forexample, cos(Pi/2) is no longer exactly 0, but about 6E-17. Thisresult is still well below the roundoff threshold of the IEEE doubledata type.</P><P>All circular inequalities and equalities are maintainedunder <CODE>MathLib</CODE> v3, but their precision has improved. For example,sin(x)^2+cos(x)^2 = 1 more often in an exact sense.</P><P>To get cos(&#177;Pi/2) = 0.0, instead of 6E-17, developers havetwo choices:</p><UL TYPE=DISC>    <LI>Continue using <CODE>MathLib</CODE> v2</li>    <LI>special case cos(&#177;nPi/2) using the IEEE remainder function before calling<CODE>MathLib</CODE>.</li></UL>  <P>Using <CODE>MathLib</CODE> v2 will forfeit the performance and addedprecision of <CODE>MathLib</CODE> v3.</P><hr width=500 align=center><H2><A NAME="ADBManager"></A>ADB Manager</H2><P>A change was made to the ADB Manager to fix a problem on PowerMacintosh 4400 and 4400-based Mac OS clones where PS/2 inputdevices were reported as being available, when in fact none wereconnected. The ADB Manager now properly checks for PS/2 input devicesand removes entries for nonexistent devices from its device table.This problem affected Game Sprockets and any applications which usedit.</P><hr width=500 align=center><H2><A NAME="AppearanceManager"></A>Appearance Manager</H2><P>Mac OS 8.1 includes Appearance Manager 1.0.1. This version ofAppearance did not ship as a separate SDK. You should use theAppearance Manager 1.0.2 SDK. While the SDK contains a newer versionof the Appearance Manager, there were no API changes. </p><hr width=500 align=center><H2><A NAME="PCExchange"></A>PC Exchange</H2><P>PC Exchange permits Macintosh users to mount MS-DOS and Windowsdisks on their desktops.</P><P>Mac OS 8.1 installs Version 2.2 of PC Exchange, which adds:</P><UL>   <LI>Support for Win95 long filenames (LFN)<BR></li>            <LI>Support for the FAT32 disk format (in addition to FAT12 and   FAT16)</li></UL><H3>VFAT Long Filename Support</H3><P>PC Exchange 2.2 supports Win95 long filenames and can read Unicodefilenames of up to 31 characters. Limitations with the Finder andfile system require truncation of filenames greater than 31characters. If the truncated names are not subsequently edited by theuser, they will remain &gt;31 character names on disk. PC Exchange2.2 can also create Win95 long filenames of up to 31 characters inlength under Mac OS 8.1.</P><H4>Language Kit Users</H4><P>Users of Apple's Language Kits should be aware that PC Exchangeallows file names with characters which are technically illegal underWindows 95, but are used to represent non-Roman characters by theLanguage Kits. Such users may encounter "illegal character" errorswhen running Windows 95 disk utilities such as ScanDisk. Users areadvised to select "ignore" for such errors to avoid unwanted changesto their file names.</P><H4>Different PC Filenames</H4><P>Previous versions of PC Exchange use a different method toconstruct PC filenames. PC Exchange 2.2 uses the same method asMicrosoft. For example, the file "helloworld.doc" would have a PCfilename of "!HELLOWO.DOC" under previous versions of PC Exchange.Under PC Exchange 2.2, the file "helloworld.doc" would have a longfilename of "helloworld.doc" and a PC filename of "HELLOW~1.DOC". ThePC names of files which have been created under previous versions ofPC Exchange will not change unless the user modifies the filename.</P><H3>FAT32 Support</H3><P>The FAT32 disk format introduced with Windows 95 OSR 2 issupported by PC Exchange 2.2.</P><H4>Formatting PC Disks</H4><P>Users can format floppies for the Mac OS, PC, or ProDOS. Users mayformat PC volumes on their Macintosh, but they cannot change theformat of a hard disk or removable medium from Mac OS to PC or viceversa. Allowing this might result in the loss of user data without warning.</P><H3>Bug fixes</H3><P>There have been a number of bugs fixes, including proper stringtruncation on two-byte systems and some low-level bugs.</P><hr width=500 align=center><H2><A NAME="AppleLocationManager2.0"></A>Apple Location Manager2.0.1</H2><P>Apple Location Manager is a toolbox extension that allowsusers to save and restore sets of configurations ("locations") undera single name. For example, a user can define a group of printers,network settings, and extension sets for multiple locations.</P><P>Apple Location Manager 2.0.1 includes the following changes:</P><UL>   <LI>No longer restricted to PowerBooks</li>      <LI>New UI</li>      <LI><A HREF = "#ALMAdditionalAPIcalls">Additional API calls</A></li>      <LI><A HREF = "#ALMNewnotifications">New notifications</A></li>      <LI><A HREF = "#ALMNewmoduletypes">New module types</A></li>      <LI><A HREF = "#ALMCFM68Ksupport">CFM-68K support</A></li>      <LI><A HREF = "#ALMRebootlevelescalation">Reboot level   escalation</A></li>      <LI><A HREF = "#ALMBugfixes">Bug fixes</A></li>      <LI><A HREF = "#ALMName">Name</A></li>      <LI><A HREF = "#ALMSDK">SDK</A></li>   </UL><A NAME="ALMAdditionalAPIcalls"></A><H3>Additional API Calls</H3><P>If <CODE>gestaltALMHasSFLocation</CODE> is returned from a gestalt call with<CODE>gestaltALMAttr</CODE>, then the following calls are supported:</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>extern pascal OSErrALMPutLocation (ConstStr255Param            prompt,                ALMLocationName             name,                SInt16                      numTypes,                ConstALMModuleTypeListPtr   typeList,                ModalFilterYDUPP            filter,                void*                       yourDataPtr)</pre></TD></TR></TABLE></CENTER><BR><BR><P>This function allows the developer to create a location using astandardized interface. Typically, the developer will pass<CODE>kALMAddAllOff</CODE> or <CODE>kALMAddAllOnSimple</CODE> for <CODE>numTypes</CODE>, and NULL for<CODE>typeList</CODE>, but it is possible to pass an array of module signatures.The filter and <CODE>yourDataPtr</CODE> parameters behave as in Standard File.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>extern pascal OSErrALMMergeLocation (ConstStr255Param            prompt,                  ALMLocationName             name,                  SInt16                      numTypes,                  ConstALMModuleTypeListPtr   typeList,                  ModalFilterYDUPP            filter,                  void*                       yourDataPtr);</pre></TD></TR></TABLE></CENTER><BR><BR><P>This function allow the developer to merge settings into an existinglocation using a standardized interface; the parameters are as with<CODE>ALMPutLocation</CODE>, though typically a module signature array is used inthis case.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>extern pascal OSErrALMGetLocation (ConstStr255Param    prompt,                ALMLocationName     name,                ModalFilterYDUPP    filter,                void*               yourDataPtr);</pre></TD></TR></TABLE></CENTER><BR><BR><P>To ask the user to choose a location by name, call this.</P><P>This function allows a user to choose a location by name.</P><A NAME="ALMNewnotifications"></A><H3>New Notifications</H3><P>Previously, an interested program couldreceive notification that the current location had changed. In ALM2.0.1, if bit <CODE>gestaltALMHasRescanNotifiers</CODE> returned from<CODE>gestaltALMAttr</CODE> is set, the client code will be notified whenthe locations list is changed (a location gets deleted, renamed, oradded). In this way, interested programs will know if locationdata they retrieved earlier (such as through a call to<CODE>ALMGetIndLocation</CODE>) might be out of date because the user has editedthe locations list.</P><A NAME="ALMNewmoduletypes"></A><H3>New Module Types</H3><P>Under ALM 1.0.x, all modules had file types of '<CODE>thng</CODE>'. Under ALM2.0.1, '<CODE>thng</CODE>' files are still supported, but the preferred file typesare '<CODE>almn</CODE>' and '<CODE>almb</CODE>'. An '<CODE>almn</CODE>' file is a preference-swappingmodule, such as "Extension Set". An '<CODE>almb</CODE>' file is an action module,such as "Auto-Open Items". The distinction is that the "value" of anaction module cannot be directly determined from the system--itrequires user intervention (for example, in the case of Auto-OpenItems, the user is asked what files to open).</P><P>Developers are encouraged to adopt these new file types so thatmodules can be auto-routed to the Module folder in a later version ofthe system software.</P><A NAME="ALMCFM68Ksupport"></A><H3>CFM-68K Support</H3><P>All calls in ALM 2.0.1 are available under CFM-68K.</P><A NAME="ALMRebootlevelescalation"></A><H3>Reboot Level Escalation</H3><P>When a module was called with the <CODE>kALMSetCurrentSelect</CODE> selector,the value of the *<CODE>flags</CODE> parameter was <CODE>kALMNoChange</CODE> under 1.0.x.  Under2.0 this value is the current "escalation" of the setting; that is, thelevel to which all modules prior to the developer's module haveraised the setting. For example, if a location contains an ExtensionSet that requires a restart, and subsequent modules do not want toact if the system is restarting, the module can use the input valueto decide how to interpret the <CODE>SetCurrent</CODE> call.</P><A NAME="ALMBugfixes"></A><H3>Bug Fixes</H3><UL>   <LI>Calling <CODE>ALMSwitchToLocation</CODE> from an INIT did not work prior to   ALM 2.0.1.<BR></li>            <LI>Under <CODE>ALMConfirmName</CODE>, the users filterproc was not called   under both dialogs presented prior to 2.0; now it is, and the   window refCons can be used to determine which dialog is up. All   dialog elements are documented constants.<BR></li>            <LI>It was possible to call <CODE>ALMSwitchToLocation</CODE> from within a   module during a call to <CODE>ALMSwitchToLocation</CODE>. This tail-biting now   generates an error.<BR></li>            <LI>Modules could not return an error on their Open calls; they   can now (for example, if they do not wish to display because a   necessary piece of hardware is not available on a given machine).</li></UL><A NAME="ALMName"></A><H3>Name</H3><P>Apple may, for business reasons, change the name of "AppleLocation Manager". Developers are cautioned not to rely on the namesof items such as the modules folder, and should use <CODE>FindFolder</CODE>.</P><A NAME="ALMSDK"></A><H3>SDK</H3><P>The <a href="http://developer.apple.com/sdk/index.html">Apple Location Manager 2.0.1 SDK</A> is available on the Jan 98 MacOS SDK CDs. The necessary interface files are included in UniversalInterfaces 3.0.1.</P><hr width=500 align=center><H2><A NAME="VirtualMemoryPaging"></A>Virtual Memory</H2><P>The Virtual Memory Manager provides virtual memory services forthe Mac OS.</P><P>There have been a number of changes to the Virtual Memory Manageraimed at providing improved performance for applications. Some ofthese changes are transparent to applications, while others allowapplications to actively control Virtual Memory.</P><H3>System Level Changes</H3><UL>   <LI>Apple Virtual Memory's file mapping code (used by the Code   Fragment Manager) was rewritten to provide much better   performance. Preparation of code fragments with Virtual Memory on    should be noticeably faster.<BR></li>            <LI>Apple Virtual Memory supports the   <A HREF = "#kdgVMOptions"><CODE>kdgVMOptions</CODE></A> <CODE>DriverGestalt</CODE> selector,   which allows disk drivers to tell Virtual Memory and the Memory   Control panel what Virtual Memory operations are supported by a   disk drive.</li></UL><H3>Virtual Memory Paging Control Functions</H3><P>The Virtual Memory Paging Control functions allow applications tohelp the Virtual Memory Manager optimize system performance. This isaccomplished by giving the Virtual Memory Manager hints about:</P><UL>   <LI>How memory pages are likely to be used in the near future<BR></li>            <LI>What pages will not be used in the near future<BR></li>            <LI>What pages are not likely to be changed again in the near   future<BR></li>            <LI>What pages contain data that will not ever be needed again.</li></UL><H4>Determining When Virtual Memory Paging Control Functions AreAvailable</H4><P>You can determine when the four Virtual Memory Paging Controlfunctions (<A HREF = "#MakeMemoryResident"><CODE>MakeMemoryResident</CODE></A>,<A HREF = "#MakeMemoryNonResident"><CODE>MakeMemoryNonResident</CODE></A>,<A HREF = "#FlushMemory"><CODE>FlushMemory</CODE></A>, and<A HREF = "#ReleaseMemoryData"><CODE>ReleaseMemoryData</CODE></A>) are available bycalling Gestalt with the <CODE>gestaltVMAttr</CODE> selector and checking if the<CODE>gestaltVMHasPagingControl</CODE> bit (bit 4) is set in the response.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>Boolean VMHasPagingControl(void){    long response;    if ( (Gestalt( gestaltVMAttr, &amp;response ) == noErr) &amp;&amp;         ((response &amp; ( 1L &lt;&lt; gestaltVMHasPagingControl )) != 0) )    {        return ( true );    }    else    {        return ( false );    }}</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Virtual Memory Page States</H4><P>Mac OS virtual memory pages can be in several states. A page'sstate determines what happens when it's not resident in physicalmemory, and is made resident, and what happens when it's resident inphysical memory and is made non-resident. Understanding how the stateof a page affects the Mac OS virtual memory system will help youunderstand the purpose of the Virtual Memory Paging Controlfunctions.</P><P>A page can be either resident or non-resident. A page that iscurrently in physical memory is resident. A page that is currentlynot in physical memory is non-resident.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Pages held by<a href="../../documentation/mac/Memory/Memory-161.html"><CODE>HoldMemory</CODE></A>or locked by<a href="../../documentation/mac/Memory/Memory-163.html"><CODE>LockMemory</CODE></A>,<a href="../../documentation/mac/Memory/Memory-164.html"><CODE>LockMemoryContiguous</CODE></A>,and<A HREF = "tn1069.html"><CODE>LockMemoryForOutput</CODE></A>are always resident.</P></TD></TR></TABLE></CENTER><BR><BR><P>A resident page has two states: clean and dirty. A clean page'sdata does not need to written from memory to the backing store filebefore the page is made non-resident. A dirty page's data must bewritten from memory to the backing store file before the page is madenon-resident.</P><P>A non-resident page also has two states: valid on disk and invalidon disk. A non-resident page which is valid on disk must be read fromthe backing store file into memory when it is made resident. Anon-resident page which is invalid on disk does not need to be readfrom the backing store file into memory when it is made resident.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>Memory pages are used for file mapping CFM containersstored in file data forks are always clean when resident (becausethey are read-only) and are always valid on disk when non-resident.</P></TD></TR></TABLE></CENTER><BR><BR><A NAME="MakeMemoryResident"></A><H3><CODE>MakeMemoryResident</CODE></H3><P>Use the <CODE>MakeMemoryResident</CODE> function to make a portion of theaddress space resident in physical memory. <CODE>MakeMemoryResident</CODE> can beused to optimize system performance by causing the Virtual MemoryManager to read in pages that will be needed in the future.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>pascal OSErr MakeMemoryResident (void *address,                                 unsigned long count);&nbsp;address   The starting address of the range of memory to be made resident.count     The size, in bytes, of the range of memory to be made resident.</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Description</H4><P>The <CODE>MakeMemoryResident</CODE> function makes a portion of the addressspace beginning at <CODE>address</CODE> and having a size of <CODE>count</CODE> bytes residentin physical memory.</P><P>If the <CODE>address</CODE> parameter supplied to the <CODE>MakeMemoryResident</CODE>function is not on a page boundary, then it is rounded down to thenearest page boundary. Similarly, if the specified range does not endon a page boundary, the <CODE>count</CODE> parameter is rounded up so that theentire range of memory is made resident.</P><P>The <CODE>MakeMemoryResident</CODE> function makes the range of memory residentas efficiently as possible. Non-resident pages that are made residentare always marked clean.</P><H4>Special Considerations</H4><P>Even though <CODE>MakeMemoryResident</CODE> does not move or purge memory, youmust not call it at interrupt time.</P><P>The specified range must be entirely in allocated space in mainmemory (the System and Process Manager memory partitions), orentirely in a single file-mapped space.</P><H4>Assembly-Language Information</H4><P>The trap macro and routine selector for the <CODE>MakeMemoryResident</CODE>function are:</P><h4>Trap macro Selector</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>_MemoryDispatch    $000B</pre></TD></TR></TABLE></CENTER><BR><BR><P>The registers on entry and exit for this routine are</P><h4>Registers on entry</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Selector codeA0    Starting addressA1    Number of bytes to make resident</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Registers on exit</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Result code</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Result Codes</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>noErr                   0  No errorparamErr              -50  The address range specified is invalidnotEnoughMemoryErr   -620  There is insufficient physical memory to make entire range resident</pre></TD></TR></TABLE></CENTER><BR><BR><A NAME="MakeMemoryNonResident"></A><H3><CODE>MakeMemoryNonResident</CODE></H3><P>Use the <CODE>MakeMemoryNonResident</CODE> function to make a portion of theaddress space non-resident. <CODE>MakeMemoryNonResident</CODE> can be used tooptimize system performance by giving the Virtual Memory Managerpages which can be used to handle future page faults.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>pascal OSErr MakeMemoryNonResident (void *address,                                    unsigned long count);&nbsp;address   The starting address of the range of memory to be made non-resident.count     The size, in bytes, of the range of memory to be made non-resident.</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Description</H4><P>The <CODE>MakeMemoryNonResident</CODE> function makes a portion of the addressspace beginning at <CODE>address</CODE> and having a size of <CODE>count</CODE> bytesnon-resident.</P><P>If the <CODE>address</CODE> parameter supplied to the <CODE>MakeMemoryResident</CODE>function is not on a page boundary, it is rounded up to thenearest page boundary. Similarly, if the specified range does not endon a page boundary, the <CODE>count</CODE> parameter is rounded down so that onlypages completely contained in the range of memory are madenon-resident (although all pages of the specified range are flushed).This means that less memory than was specified may be madenon-resident.</P><P>All dirty pages of the specified range are first written to thebacking store file and then marked valid on disk.</P><P>Any pages of the specified range that are held (with <CODE>HoldMemory</CODE>)or locked (with <CODE>LockMemory</CODE> or <CODE>LockMemoryForOutput</CODE>) will not be madenon-resident, but are flushed.</P><H4>Special Considerations</H4><P>Even though <CODE>MakeMemoryNonResident</CODE> does not move or purge memory,you must not call it at interrupt time.</P><P>The specified range must be entirely in allocated space in mainmemory (the System and Process Manager memory partitions), orentirely in a single file mapped space.</P><H4>Assembly-Language Information</H4><P>The trap macro and routine selector for the <CODE>MakeMemoryNonResident</CODE>function are:</P><h4>Trap macro Selector</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>_MemoryDispatch    $000D</pre></TD></TR></TABLE></CENTER><BR><BR><P>The registers on entry and exit for this routine are</P><h4>Registers on entry</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Selector codeA0    Starting addressA1    Number of bytes to make non-resident</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Registers on exit</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Result code</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Result Codes</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>noErr            0   No errorparamErr       -50   The address range specified is invalid</pre></TD></TR></TABLE></CENTER><BR><BR><A NAME="FlushMemory"></A><H3><CODE>FlushMemory</CODE></H3><P>Use the <CODE>FlushMemory</CODE> function to make a portion of the addressspace clean. This can be useful when you want to ensure the backingstore file's data matches what is in a resident page. <CODE>FlushMemory</CODE> canalso be used to optimize system performance by letting the VirtualMemory Manager know what pages can be made clean because they areunlikely to change again in the near future (making those pagesnon-resident will not require I/O in the future).</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>pascal OSErr FlushMemory (void *address,                          unsigned long count);</pre></TD></TR></TABLE></CENTER><BR><BR>                               <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>address      The starting address of the range of memory to flush.count      The size, in bytes, of the range of memory to flush.</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Description</H4><P>The <CODE>FlushMemory</CODE> function makes a portion of the address space,beginning at <CODE>address</CODE> and having a size of <CODE>count</CODE> bytes, clean. Alldirty pages found in the specified range are written to the backingstore file. Resident pages are left resident by <CODE>FlushMemory</CODE>.</P><P>If the <CODE>address</CODE> parameter supplied to the <CODE>FlushMemory</CODE> function isnot on a page boundary, then it is rounded down to the nearest pageboundary. Similarly, if the specified range does not end on a pageboundary, the <CODE>count</CODE> parameter is rounded up so that the entire rangeof memory is flushed.</P><H4>Special Considerations</H4><P>Even though <CODE>FlushMemory</CODE> does not move or purge memory, you mustnot call it at interrupt time.</P><P>The specified range must be entirely in allocated space in mainmemory (the System and Process Manager memory partitions), orentirely in a single file mapped space.</P><H4>Assembly-Language Information</H4><P>The trap macro and routine selector for the <CODE>FlushMemory</CODE> functionare:</P><h4>Trap macro Selector</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>_MemoryDispatch    $000E</pre></TD></TR></TABLE></CENTER><BR><BR><P>The registers on entry and exit for this routine are</P><h4>Registers on entry</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Selector codeA0    Starting addressA1    Number of bytes to flush</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Registers on exit</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Result code</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Result Codes</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>noErr           0   No errorparamErr      -50   The address range specified is invalid</pre></TD></TR></TABLE></CENTER><BR><BR><A NAME="ReleaseMemoryData"></A><H3><CODE>ReleaseMemoryData</CODE></H3><P>Use the <CODE>ReleaseMemoryData</CODE> function to release the data of aportion of the address space. <CODE>ReleaseMemoryData</CODE> can be used tooptimize system performance by preventing unnecessary writing to andreading from the backing store file.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>pascal OSErr ReleaseMemoryData (void *address,                                unsigned long count);</pre></TD></TR></TABLE></CENTER><BR><BR><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>address      The starting address of the range of memory to release.count      The size, in bytes, of the range of memory to release.</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Description</H4><P>The <CODE>ReleaseMemoryData</CODE> function informs the Virtual Memory Managerthat a portion of the address space, beginning at <CODE>address</CODE> and having asize of <CODE>count</CODE> bytes, is no longer needed.</P><P>If the <CODE>address</CODE> parameter supplied to the <CODE>ReleaseMemoryData</CODE>function is not on a page boundary, then it is rounded up to thenearest page boundary. Similarly, if the specified range does not endon a page boundary, the <CODE>count</CODE> parameter is rounded down so that onlypages completely contained in the range of memory are madeinvalidated. This means that less memory than was specified may bereleased.</P><P>All resident pages in the specified range are marked clean withoutwriting their contents to the backing store file; all non-residentpages in read/write areas of the specified range are marked invalidon disk (Note: read-only file mapped areas are not invalidated ondisk). Following a <CODE>ReleaseMemoryData</CODE> request with a<CODE>MakeMemoryNonResident</CODE> request makes pages in the specified rangeimmediately available for reuse by the Virtual Memory Manager.</P><H4>Special Considerations</H4><P>If the released range is subsequently accessed, the values inmemory will be unpredictable.</P><P>Even though <CODE>ReleaseMemoryData</CODE> does not move or purge memory, youshould not call it at interrupt time.</P><P>The specified range must be entirely in allocated space in mainmemory (the System and Process Manager memory partitions), orentirely in a single file mapped space.</P><P>The Memory Manager calls <CODE>ReleaseMemoryData</CODE> for <CODE>NewPtr</CODE>, <CODE>NewHandle</CODE>,<CODE>TempNewHandle</CODE>, and <CODE>InitZone</CODE> requests. There's no need to duplicatethe work the Memory Manager has already done.</P><H4>Assembly-Language Information</H4><P>The trap macro and routine selector for the <CODE>ReleaseMemoryData</CODE>function are:</P><h4>Trap macro Selector</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>_MemoryDispatch    $000C</pre></TD></TR></TABLE></CENTER><BR><BR><P>The registers on entry and exit for this routine are</P><h4>Registers on entry</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Selector codeA0    Starting addressA1    Number of bytes to release</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Registers on exit</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>D0    Result code</pre></TD></TR></TABLE></CENTER><BR><BR><H4>Result Codes</H4><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>noErr            0   No errorparamErr       -50   The address range specified is invalid</pre></TD></TR></TABLE></CENTER><BR><BR><H2><A NAME="FileSystemManager"></A>File System Manager</H2><P>The File System Manager provides a general means by which foreignfile systems can be installed, identified, and interfaced to theOperating System. Mac OS 8.1 includes version 2.0 of the File SystemManager, which includes a number of changes:</P><UL>   <LI><CODE>gestaltFSMVersion</CODE> will return version 2.0.<BR></li>            <LI>All multi-block I/O requests through <CODE>UTCacheReadIP</CODE>,   <CODE>UTCacheWriteIP</CODE>, <CODE>UTVolCacheReadIP</CODE>, and <CODE>UTVolCacheWriteIP</CODE>    now use an   XIOParam block, so foreign file systems that use 4GB block storage    or larger can be accessed.<BR></li>            <LI>Fixed <CODE>FSM's _Control</CODE> patch that asks foreign file systems for   icons (via <CODE>ffsGetIconMessage</CODE>) so that it only looks for   synchronous requests -- <CODE>ffsGetIconMessage</CODE> can't be made at   interrupt time, so asynchronous requests were not safe to   handle.<BR></li>            <LI>Fixed a bug in <CODE>ffsGetIconMessage</CODE> introduced in Mac OS 8 that   made it fail.<BR></li>            <LI>Foreign file systems are now called with the <CODE>ffsUnloadMessage</CODE>   at a time that's safe to make other File Manager requests.    This lets you call the Code Fragment Manager to unload code fragments.      Previously, foreign file systems got the <CODE>ffsUnloadMessage</CODE> while   the File Manager was busy and any direct or indirect File Manager   requests would deadlock the system.<BR></li>            <LI>In some rare cases, a foreign file system's <CODE>HFSCIProc</CODE> would be   called with a <CODE>MountVol</CODE> request outside of the context of a File   Manager request. This could cause a system crash if the foreign   file system made a cache I/O request while the File Manager was   busy with another request. Now all requests to foreign file   systems come from within the context of a File Manager   request.<BR></li>            <LI>FSM now supports <CODE>idSectors</CODE> greater than or equal to   <CODE>kMaximumBlocksIn4GB</CODE> on foreign file system volumes.<BR></li>            <LI>FSM would sometimes call a foreign file system's <CODE>HFSCIProc</CODE>   with a <CODE>MountVol</CODE> or a <CODE>VolumeMount</CODE> request while running on   <B>another</B> foreign file system's stack. If that stack wasn't   large enough, it could cause a crash. This was fixed.<BR></li>            <LI><CODE>UTVolCacheWriteIP</CODE> never worked correctly in Mac OS 8 due to a   disk cache bug. That bug has been fixed.<BR></li>            <LI>Fixed a possible memory leak in <CODE>fsmDrvQElChangedMessage</CODE>   code.<BR></li>            <LI>Fixed a rare crashing bug in <CODE>fsmGetFSIconMessage</CODE> code.</li></UL><P>An updated version of the Guide to the File System Manager will beavailable in the near future.</P><hr width=500 align=center>        </TD>    </TR></TABLE>        <TABLE WIDTH="500">    <TR>        <td align="left"><H2><A NAME="DriverGestaltAdditions"></A><CODE>DriverGestalt</CODE> Additions</H2><P>The <CODE>DriverGestalt</CODE> driver status and control calls allow drivers toprovide information about the services they provide to clients of thedriver.</P><P>Two new <CODE>DriverGestalt</CODE> selectors have been added. These newselectors allow drivers to provide information to the system aboutthe support they provide for VM backing store and about the physicalcharacteristics of the media they support.</P><P>The selectors are:</P><BLOCKQUOTE><P><CODE><A HREF = "#kdgVMOptions">kdgVMOptions</A></CODE>Returns information about VM support</P><P><CODE><A HREF = "#kdgMediaInfo">kdgMediaInfo</A></CODE> Returnsinformation about supported media</P></BLOCKQUOTE><A NAME="kdgVMOptions"></A><H3><CODE>kdgVMOptions</CODE></H3><P>The <CODE>kdgVMOptions</CODE> <CODE>DriverGestalt</CODE> selector allows a diskdriver to tell the Virtual Memory Manager about its support forVirtual Memory operations. The disk drive for which the driver shouldreturn information for is indicated by the value in the<CODE>ioVRefNum</CODE> field of the <CODE>DriverGestaltParam</CODE>.This is a per-drive call, not a per-driver call.</P><P>The response to this selector is a<CODE>DriverGestaltVMOptionsResponse</CODE> structure. The<CODE>vmOptions</CODE> field contain flags that, when combined andtested against the possible masks, indicate a drive's suitability forvarious combinations of Virtual Memory operations.</P><P>The only three valid responses to <CODE>kdgVMOptions</CODE> at this time are<CODE>kAllowVMNoneMask</CODE>, <CODE>kAllowVMReadOnlyMask</CODE>, and<CODE>kAllowVMReadWriteMask</CODE> (i.e., setting only<CODE>kAllowVMWriteBit</CODE> is not valid).</P><UL>   <LI><CODE>kAllowVMNoneMask</CODE>: Indicates that a drive should   never be in the page fault path. Examples of this are drives that   have manual eject buttons that are not disabled by software,   drives with very slow throughput, or drives that depend on a   network connection.<BR></li>            <LI><CODE>kAllowVMReadOnlyMask</CODE>: Indicates that a drive   should never be written to but is safe for read-only file mapping.   Examples of this are WORM drives, where each write eats write-once   space on the disks, and CD-ROM drives which are read-only media.<BR></li>            <LI><CODE>kAllowVMReadWriteMask</CODE>: Indicates that a drive can   be used by Virtual Memory to create its main backing store file.   Examples of this are fast read/write drives that don't allow   manual eject and don't use a network connection.</li></UL><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>IMPORTANT:</B><BR>All bits not defined here are reserved andshould be set to zero until they are defined for a specific purpose.</P></TD></TR></TABLE></CENTER><BR><BR><P>The <CODE>kdcVMOptions</CODE> Driver Configure<CODE>_Control</CODE> call provides the ability to change a driver'sresponse to <CODE>kdgVMOptions</CODE> Driver Gestalt requests. Adriver should return <CODE>controlErr</CODE> if it doesn't want toprovide the ability to change the <CODE>kdgVMOptions</CODE> response.If a driver supports the <CODE>kdcVMOptions</CODE> Driver Configure<CODE>_Control</CODE> call, but is asked to set an option bit that itdoesn't support (for example, if a read-only device is asked to setthe <CODE>kAllowVMWriteBit</CODE>), it should return<CODE>paramErr</CODE>.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>struct DriverGestaltVMOptionsResponse {    UInt32      vmOptions;};typedef struct DriverGestaltVMOptionsResponse DriverGestaltVMOptionsResponse;&nbsp;/* Bits and masks for DriverGestaltVMOptionsResponse.vmOptions field */enum {    kAllowVMReadBit         = 0,        /* Allow VM to use this drive for read access */    kAllowVMWriteBit        = 1,        /* Allow VM to use this drive for write access */    kAllowVMNoneMask        = 0,    kAllowVMReadOnlyMask    = 1 &lt;&lt; kAllowVMReadBit,    kAllowVMReadWriteMask   = (1 &lt;&lt; kAllowVMReadBit) + (1 &lt;&lt; kAllowVMWriteBit)};</pre></TD></TR></TABLE></CENTER><BR><BR><A NAME="kdgMediaInfo"></A><H3><CODE>kdgMediaInfo</CODE></H3><P>The <CODE>kdgMediaInfo</CODE> <CODE>DriverGestalt</CODE> selector allows a disk driver totell the caller about physical characteristics of the device itsupports. The disk drive for which the driver should return informationfor is indicated by the value in the <CODE>ioVRefNum</CODE> field ofthe <CODE>DriverGestaltParam</CODE>. This is a per-drive call, not aper-driver call.</P><P>The response to this selector is a <CODE>DriverGestaltMediaInfoResponse</CODE>structure. The fields in this structure contain the physical blocksize, the number of blocks that are of that size, and the media typefor a given device.</P><P>On drives that support ejectable media, the response can changedepending on what media is currently in the drive.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note:</B><BR>The only current defined media types areCD-ROM and DVD-ROM. This is because an application that makes this call currently only caresif it's one of these two types. Until this changes, all other media types should return<CODE>kMediaTypeUnknown.</CODE></P></TD></TR></TABLE></CENTER><BR><BR><P>The File Manager calls this selector and uses the values returnedto help determine the value it will use for the allocation block sizewhen formatting a volume as Mac OS Extended.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>struct DriverGestaltMediaInfoResponse {    UInt32          numberBlocks;   /* number of blocks */    UInt32          blockSize;      /* physical size of blocks */    SInt16          mediaType;      /* media type identifier */};typedef struct DriverGestaltMediaInfoResponse DriverGestaltMediaInfoResponse;&nbsp;/* DriverGestaltMediaInfoResponse.mediaType constants */enum {    kMediaTypeUnknown    = 128,   /* media type is unknown */    kMediaTypeCDROM      = 129,   /* media type is a CD-ROM */    kMediaTypeDVDROM     = 130,   /* media type is a DVD-ROM */    kMediaTypeNoMedia    = -1     /* no media is present */};</pre></TD></TR></TABLE></CENTER><BR><BR><hr width=500 align=center><H2><A NAME="Java2.0"></A>Mac OS Runtime for Java2.0</H2><P>MRJ 2.0 supports Sun's Java version 1.1.3 specification, which hasadded or improved support in the following areas:</P><UL>   <LI>Internationalization</li>      <LI>Security and Signed Applets</li>      <LI>AWT Enhancements</li>      <LI>JavaBeans</li>      <LI>JAR File Format</li>      <LI>Networking Enhancements</li>      <LI>I/O Enhancements</li>      <LI>Math Package</li>      <LI>Remote Method Invocation</li>      <LI>Object Serialization</li>      <LI>Reflection</li>      <LI>JDBC - Connecting Java and Databases</li>      <LI>Inner Classes</li>      <LI>Java Native Interface</li>      <LI>Performance Enhancements</li>      <LI>The demonstration applets have been updated and/or replaced   with new examples</li></UL><P>For further information, see the<A HREF = "http://applejava.apple.com/">Mac OS Runtime for Java</A>site.</P><hr width=500 align=center>        </TD>    </TR></TABLE><TABLE WIDTH="500">    <TR>        <td align="left"><H2><A NAME="OpenTransport1.3"></A>Open Transport 1.3</H2><P>Mac OS 8.1 installs Open Transport v1.3, which contains a numberof new features and bug fixes.</P><P>An updated <B><a href="http://developer.apple.com/sdk/index.html">OT 1.3 SDK</A> </B>and <B><a href="http://developer.apple.com/sdk/index.html">OT 1.3 Release Notes</A></B> are available.</P><H3>Bug fixes:</H3><H4>General</H4><UL>   <LI>Plugged a 256-byte memory leak which could occur each time ARA   3.0 made a PPP connection. This leak could possibly have also   affected other protocols.<BR></li>            <LI>Added and corrected <CODE>'CCI'</CODE> resources to the   Open Transport components to support Extension Manager 4.0 and   higher.<BR></li>            <LI>Removed many unnecessary debugger breaks from the debug   version of OpenTransport. This includes the debugger breaks you   get on boot on every non-PCI Power Macintosh and on all PCI   PowerBooks.<BR></li>            <LI>Fixed a bug in the OT patch on <CODE>CRMInstall</CODE> that   caused serial ports to sometimes  fail to register properly. This   was most notably a problem with the Global Village Platinum Pro PC   Card. The symptom was getting a "Serial port in use" error when   try to connect with the PPP control panel.<BR></li>            <LI>Fixed a bug in option management handling that prevented the   setting of DDP options when using an ADSP or ATP endpoints.<BR></li>            <LI>Fixed a crash that occurred when a 68K client running in   emulation on a Power PC system called   <CODE>OTUseSyncIdleEvents</CODE>. This same crash also occurred   with CFM-68K clients.<BR></li>            <LI>Fixed a bug that caused <CODE>OTOpenEndpoint</CODE> and   <CODE>OTAsyncOpenEndpoint</CODE> to sometimes return garbage for   the <CODE>EndpointRef</CODE>, if there was an error. These   functions now return a NULL result if an error occurs.<BR></li>            <LI>Fixed a memory leak in <CODE>InitOpenTransport</CODE> if it   was called from an ASLM shared library.<BR></li>            <LI>Fixed problems with the "tilisten" module that caused   listening endpoints to go deaf. The symptom was that a listening   endpoint would return the <CODE>kOTStateChangeErr</CODE> on   various Open Transport calls to process incoming events.<BR></li>            <LI>Fixed a memory leak in the "tilisten" module.<BR></li>            <LI>Fixed synchronous <CODE>OTConnect</CODE> to call a notifier   with <CODE>kOTSyncIdleEvent</CODE> while waiting to complete the   call.<BR></li>            <LI>Fixed a bug in <CODE>OTSndDisconnect</CODE> that could cause   corruption of the cookie parameter that gets passed with a   <CODE>T_MEMORYRELEASED</CODE> event if a send (i.e.   <CODE>OTSnd</CODE>), with AckSends enabled, interrupts   <CODE>OTSndDisconnect</CODE> at just the right time.</li></UL><H4>Open Transport Debugger Preferences (for debug version only)</H4><UL>   <LI>The OT Debugger Preferences file is now installed into the   MacsBug Preferences folder.<BR></li>            <LI>Fixed up <CODE>OTErrors</CODE> text.<BR></li>            <LI>Added <CODE>modname</CODE> and <CODE>modnext</CODE> macros   which can be used to display the name of the module calling   <CODE>putnext</CODE>, and the module name that will next receive   the message block. To be used, register R3 must contain the   pointer to a module's queue element such as when you break on   entry to the <CODE>putnext</CODE> call.<BR></li>            <LI>Added <CODE>qname</CODE> and <CODE>dmsg</CODE> macros.<BR></li>            <LI>Fixed value for <CODE>M_CTL</CODE> in the   <CODE>MSGTypes</CODE> text template.<BR></li>            <LI>Fixed <CODE>module_info</CODE> so it is correct for Power   PC.<BR></li>            <LI>Added <CODE>module_info68k</CODE> for displaying   <CODE>module_info</CODE> on 68K machines.<BR></li>            <LI>Made <CODE>msgb::fNext</CODE> of type <CODE>msgb</CODE> so you   can quickly see all message blocks in the message chain.</li></UL><H4>AppleTalk</H4><UL>   <LI>Fixed a bug that sometimes prevented ARA 3.0 from properly   setting the default zone (the zone that is automatically selected   in the Chooser).<BR></li>            <LI>Fixed a crash that could occur when using LocalTalk in a low   memory situation.<BR></li>            <LI>Fixed a bug in the Chooser that caused it to add duplicate   <CODE>'STR ' -4090</CODE> resources to the selected Chooser device   file (i.e. LaserWriter 8) each time you selected the device. This   only happened if you had no zones. This bug could eventually cause   the device file to become corrupt.<BR></li>            <LI>Integrated newer <CODE>'ltlk'</CODE> resources from IRTalk to   fix problems with using IRTalk on certain desktop machines.<BR></li>            <LI>Fixed PAP so that SendData requests are no longer sent from a   listening endpoint after the PAP connection has been closed.<BR></li>            <LI>Fixed problems with the PAP server handling multiple sessions.   Although more than one session could be opened to the server at a   time, the server would only service one of the sessions. It will   now service all of the open sessions in parallel.<BR></li>            <LI>Fixed PAP so it properly handles dealing with more then 64K   transactions (files &gt; 240M). It had a rollover problem when the   sequence number reached 64K.<BR></li>            <LI>Fixed D3 register corruption on Power Macintoshes that   occurred when calling any OT routine that resulted in data being   sent out over a LocalTalk connection. This bug is most apparent if   you have 68K code that calls Power PC code that then calls an OT   send routine (i.e. <CODE>OTSnd</CODE>). Upon return to the 68K   code, the D3 register would have been corrupted.<BR></li>            <LI>Fixed the <CODE>ATALK_IOC_FULLSELFSEND</CODE> macro.<BR></li>           <LI>Fixed an ARA 3.0 problem on ARAP connections, where the server was shut down by    manual restart and the client reported that the connection would disconnect in one   minute, when in fact the connection had already been broken.</li></UL><H4>TCP/IP</H4><UL>   <LI>Improved HTTP performance by not delaying before sending out   the second packet from the server.</li></UL><H4>Links</H4><UL>   <LI>Fixed a bug in the "tpi8022x" module when processing an option   management call to place an Ethernet endpoint into promiscuous   mode, such that the code entered an infinite loop.</li>      <LI>Fixed a bug in the "tpi8022x" module which limited a rawmode   Ethernet endpoint to sending a maximum data packet of 1486 bytes   instead of the full 1500 bytes.</li></UL><H4>API Changes</H4><UL>   <LI>Bumped the <CODE>kInetInterfaceInfoVersion</CODE> up to 3 to   indicate support for single link multi-homing. See section on   <A HREF = "#SingleLinkMultihoming">Single Link Multi-homing</A>.<BR></li>            <LI>Changed <CODE>OTCreatePCMCIAPortRef</CODE> to   <CODE>OTCreatePCCardPortRef</CODE> and fixed the bus reference it   uses to <CODE>kOTPCCardBus</CODE>.<BR></li>            <LI>Added <CODE>kOTNetbufIsRawMode</CODE> constant for specifying   <CODE>TNetbufs</CODE> that contain raw mode data.<BR></li>            <LI>Added <CODE>mi_open_detached</CODE>. It was already in   "<CODE>OpenTptModule.h</CODE>", but never properly exported by the OT   libraries. It is similar to <CODE>mi_open_comm</CODE>, but is   useful when you need to make the call before the module is   actually open, such as when you maintain separate   <CODE>q_ptr</CODE> data for upper and lower queues, and you want   to allocate the <CODE>q_ptr</CODE> for the lower queue before the   <CODE>I_LINK</CODE> is received.<BR></li>            <LI>Support the new 8.0.1 <CODE>DriverLoaderLib</CODE> which allows multiple   <CODE>'ndrv'</CODE>s in a CFM code fragment.<BR></li>            <LI>Really added support for CFM port scanners and configurators.   On Power PC, you no longer need to write your port scanners and   resident configurators using ASLM. This support was actually in OT   1.1.1, but only worked if you explicitly registered your shared   library with CFM (which required use of a private CFM   <CODE>SPI</CODE>). OT will now scan the Extensions folder on boot,   looking for all <CODE>'shlb'</CODE> and <CODE>'libr'</CODE> files   with an extended <CODE>'cfrg'</CODE> resources. The extended   <CODE>'cfrg'</CODE> is then used to locate port scanner and   resident configurator shared libraries within the file. Your   extended <CODE>'cfrg'</CODE> resource for a resident configurator   should look as follows:   <BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>#define UseExtendedCFRGTemplate 1#include "OpenTransport.r"#include "CodeFragmentTypes.r"resource 'cfrg' (0){  {    extendedEntry {    kPowerPC,    kFullLib,    kNoVersionNum,      /* Current Version Number */    kNoVersionNum,      /* Old Def Version Number */    kDefaultStackSize,    kNoAppSubFolder,    kIsLib,    kOnDiskFlat,    kZeroOffset,    kWholeFork,    "XYZProtocolRS_ConfiguratorLib",    /* start of extended info */    kOTCFMClass,    kOTConfiguratorCFMTag,    "",    "",    "XYZProtocol"       /* external name: may be seen by user */    }  }};</pre></TD></TR></TABLE></CENTER><BR><BR>      <P>Use <CODE>kOTPortScannerCFMTag</CODE> for port scanners instead   of <CODE>kOTPortConfiguratorCFMTag</CODE>.</P></li></UL>&nbsp;<H4>CFM-68K Support</H4><UL> <LI>CFM-68K is now officially supported. See the "Open Transport CFM-68K   Developer Note" (part of the <a href="http://developer.apple.com/dev/opentransport/ot_sdk.html">OT SDK</A>)    for details. The OT Installer has   been modified to automatically install CFM-68K support.</li></UL><A NAME="SingleLinkMultihoming"></A><H3>Single Link Multi-homing</H3><P>Open Transport 1.3 introduces <STRONG>single linkmulti-homing</STRONG>, a mechanism by which Open Transport cansupport multiple IP addresses on the same hardware interface.Synonyms for this feature include IP Aliasing, Secondary IP addresssupport, IP Masquerading, "Multihoming", and IP Multinode support.This is useful for sites like Internet Service Providers (ISPs), thatwant to give each of their clients a distinct IP address, withoutrequiring separate computers for each address. Web server softwarepackages or server plug-ins that utilize this feature can offervirtual domain support that supports all web browsers.</P><P>This functionality is transparent to Open Transport clients whoare not specifically interested in single link multi-homing. Thefollowing information will help TCP/IP server developers implementsingle link multi-homing support into their products.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>IMPORTANT:</B><BR>As described below, in a multi-homedenvironment, if you bind to a specific IP address, you will onlyreceived connections targeted at that IP address. While this isuseful if you want to support different operations on different IPaddresses, most programs do not want this. If your program does nottake advantage of single link multi-homing, it's important that itbind listening endpoints to the address <CODE>kOTAnyInetAddress</CODE>, not to aspecific IP address (such as the address returned by<CODE>OTInetGetInterfaceInfo</CODE>). The use of <CODE>kOTAnyInetAddress</CODE> has always beenthe recommended way of binding listening endpoints, and single linkmulti-homing makes it important that you follow this recommendation.</P></TD></TR></TABLE></CENTER><BR><BR><H3>Single Link Multi-homing System Setup</H3><P>Single link multi-homing support is only available with OpenTransport 1.3 or higher. Your product will need to check that thisversion of Open Transport is present. See the section<A HREF = "#CheckingOpenTransportVersion">Checking the Open TransportVersion</A> for details on how to check for the presence of OpenTransport 1.3 or higher.</P><P>You configure a system to use multiple IP addresses as follows:</P><UL>   <LI>The TCP/IP Control Panel must be set for manual   addressing.<BR></li>            <LI>You create a text file with the required name, "IP Secondary   Addresses", and put it into the Preferences folder in the System   Folder.</li></UL><P>Each line of the IP Secondary Addresses file contains a secondaryIP address to be used by the system, and an optional subnet mask androuter address for the secondary IP address. If there is no subnetmask entry, then a default subnet mask for the IP address class willbe used. If there is no router address entry, then the default routerassociated with the primary address will be used.</P><P>Each secondary address entry must be prefixed by "ip=". Eachsubnet mask entry must be prefixed by "sm=". Each router addressentry must be prefixed by "rt=". An example of the contents of the IPSecondary Addresses file follows.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>; 'ip=' for ip address, 'sm=' subnet mask, 'rt=' router address;  Note: nspace in 'ip=192.168.22.200';; IP address             Subnet Mask          router addresses;-----------             -----------          ----------------ip=192.168.22.200        sm=255.255.255.0     rt=192.168.20.1ip=192.168.22.201                             rt=192.168.20.1ip=192.168.22.202</pre></TD></TR></TABLE></CENTER><BR><BR><P>The order of the entries is important. The "rt=" entry must followthe "sm=" entry if used.</P><P>When Open Transport 1.3 activates TCP/IP, the primary address willbe obtained from the TCP/IP Control Panel setting. Open Transportthen looks for the IP Secondary Addresses file in the Preferencesfolder, to determine if additional addresses should also beconfigured. If there are duplicate IP address entries in the IPSecondary Addresses file, the duplicated addresses will be ignored.When Open Transport binds a TCP/IP connection, if there is an addressconflict of the primary or any secondary addresses with another host,Open Transport will present an error message using a dialog box andwill unload Open Transport TCP/IP from memory. The error dialog willdisplay the conflicting IP address, the hardware address of theconflicting machine and note that your TCP/IP network interface hasbeen shut down.</P><A NAME="CheckingOpenTransportVersion"></A><H3>Checking the OpenTransport Version</H3><P>To check that Open Transport version 1.3 is present, use theGestalt function with the <CODE>gestaltOpenTptVersions</CODE><CODE>'otvr'</CODE> selector. Check that the result is greater orequal to <CODE>kOTIPSingleLinkMultihomingVersion</CODE>.</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>enum{    kOTIPSingleLinkMultihomingVersion = 0x01300000    // OT 1.3};</pre></TD></TR></TABLE></CENTER><BR><BR><H3>InetInterfaceInfo Structure Change</H3><P>The <CODE>OTInetGetInterfaceInfo</CODE> returns information aboutthe local host. Under Open Transport 1.3, the <CODE>InetInterfaceInfo</CODE>structure has changed to allow the function to returnadditional information on supported secondary addresses. The newversion of the structure is as follows</P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>struct InetInterfaceInfo{    InetHost          fAddress;    InetHost          fNetmask;    InetHost          fBroadcastAddr;    InetHost          fDefaultGatewayAddr;    InetHost          fDNSAddr;    UInt16            fVersion;    UInt16            fHWAddrLen;    UInt8*            fHWAddr;    UInt32            fIfMTU;    UInt8*            fReservedPtrs[2];    InetDomainName    fDomainName;    UInt32            fIPSecondaryCount;  // returns number of IP secondary addresses    UInt8             fReserved[252];};</pre></TD></TR></TABLE></CENTER><BR><BR><P>You can pass this new structure to the<CODE>OTInetGetInterfaceInfo</CODE>. On return, the<CODE>fIPSecondaryCount</CODE> field returns the number of secondaryIP addresses configured for the system. If there are secondaryaddresses, use the <CODE>OTInetGetSecondaryAddresses</CODE> functionto obtain the additional addresses.</P><P>To distinguish this structure from earlier variants, the<CODE>OTInetGetInterfaceInfo</CODE> sets the <CODE>fVersion</CODE>field to 3.</P><H3><CODE>OTInetGetSecondaryAddresses</CODE></H3><P><B>FUNCTION</B></P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre> OTInetGetSecondaryAddresses return active secondary IP addresses</pre></TD></TR></TABLE></CENTER><BR><BR><P><B>C INTERFACE</B></P><BR><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><pre>OSStatus OTInetGetSecondaryAddresses(InetHost* addr, UInt32* count, SInt32 index);</pre></TD></TR></TABLE></CENTER><BR><BR><P><B>C++ INTERFACE</B></P><P> None. C++ clients use the C interface to this function.</P><P>DESCRIPTION</P><TABLE BORDER=1>   <TR>      <TH WIDTH=73>         <P ALIGN=LEFT>Parameters</p>      </TH><TH WIDTH=94>         <P ALIGN=LEFT>Before Call</p>      </TH><TH WIDTH=88>         <P ALIGN=LEFT>After Call</p>      </TH></TR>   <TR>      <td width=73 align=left>         <P>addr</p>      </TD><td width=94 align=left>         <P>x</p>      </TD><td width=88 align=left>         <P>(x)</p>      </TD></TR>   <TR>      <td width=73 align=left>         <P>count</p>      </TD><td width=94 align=left>         <P>(x)</p>      </TD><td width=88 align=left>         <P>(x)</p>      </TD></TR>   <TR>      <td width=73 align=left>         <P>index</p>      </TD><td width=94 align=left>         <P>x</p>      </TD><td width=88 align=left>         <P>/</p>      </TD></TR></TABLE><P><CODE>OTInetGetSecondaryAddress</CODE> is used to copy thesupported secondary addresses associated with an IP interface.<CODE>OTInetGetSecondaryAddress</CODE> uses the index parameter tospecify which IP interface to obtain secondary addresses for. For theprimary IP interface, set index to <CODE>kDefaultInetInterface</CODE>which is -1. <CODE>OTInetGetSecondaryAddress</CODE> uses the countparameter to know how many secondary addresses to return in thebuffer pointed to by <CODE>addr</CODE>. The <CODE>addr</CODE> buffermust be of size <CODE>count</CODE> * <CODE>sizeof(InetAddr)</CODE> tohold all of the desired addresses. Use the<CODE>fIPSecondaryCount</CODE> field of the<CODE>InetInterfaceInfstructure </CODE>returned by calling<CODE>OTInetGetInterfaceInfo</CODE> to determine the required size ofthe buffer. <CODE>OTInetGetSecondaryAddress</CODE> also modifiescount to indicate the number of secondary addresses actually returnedif less than the specified number of secondary addresses arereturned.</P><hr width=500 align=center><H2><A NAME="TextEncodingConverter"></A>Text Encoding ConverterManager 1.3</H2><P>The Text Encoding Conversion Manager provides twofacilities--the Text Encoding Converter and the UnicodeConverter--that your application can use to handle textencoding conversion on the Mac OS.</P><P>For further information, see <I>Inside Macintosh:</I><a href="../../documentation/Carbon/text/TextEncodConversionMgr/tecmgr.html">TextEncoding Conversion Manager Documentation</A>.</P><P>Version 1.3 of the Text Encoding Converter Manager (TEC) isincluded with Mac OS 8.1. The HFS Plus volume format introduced withMac OS 8.1 stores filenames using the canonical decomposition form ofUnicode 2.0; several of the TEC 1.3 changes are to support HFS Plus.</P><UL>   <LI><A HREF = "#TECInterfaceFileChanges">Interface File   Changes</A></li>      <LI><A HREF = "#TECImplementationBugFixes">Implementation Bug   Fixes</A></li>      <LI><A HREF = "#TECImplementationEnhancements">Implementation   Enhancements</A></li>      <LI><A HREF = "#TECMappingChanges">Mapping Changes</A></li>      <LI><A HREF = "#TECUserInterfaceChanges">User Interface   Changes</A></li></UL><A NAME="TECInterfaceFileChanges"></A><H3>Interface File Changes</H3><UL>   <LI>Moved contents of old <CODE>Unicode.h</CODE> into new file   <CODE>UnicodeConverter.h</CODE> to avoid confusion as other Unicode-related   functionality is added over the next few months. <CODE>Unicode.h</CODE>   includes <CODE>UnicodeConverter.h</CODE>, but is otherwise currently empty.<BR></li>            <LI>Added constant <CODE>kUnicodeCanonicalDecompVariant</CODE> (<CODE>TextCommon.h</CODE>)   to specify a variant of Unicode using canonical decomposition   (maximal decomposition with characters in canonical order). This   constant has the same value as the constant   <CODE>kUnicodeMaxDecomposedVariant</CODE> (unsupported in earlier versions of   TEC). (The only other Unicode variant currently supported allows   all defined Unicode characters, and is specified by the constant   <CODE>kUnicodeNoSubset</CODE>).<BR></li>            <LI>Added constant <CODE>kUnicodeUseHFSPlusMapping</CODE> (<CODE>UnicodeConverter.h</CODE>),   which can be used for the <CODE>mappingVersion</CODE> field of a <CODE>UnicodeMapping</CODE>   structure to specify the mapping version used by HFS Plus. (The   only other constant specifying a value for this field is   <CODE>kUnicodeUseLatestMapping</CODE>).<BR></li>            <LI>Defined new feature/fix bits for the   <CODE>tecUnicodeConverterFeatures</CODE> field of the <CODE>TECInfo</CODE> structure   returned by <CODE>TECGetInfo</CODE>, to indicate new bug fixes/enhancements in   TEC 1.3. These bits are:      <P><CODE>kTECTextRunBitClearFixBit</CODE>    <CODE>ConvertFromUnicodeToTextRun</CODE> &amp;   <CODE>ConvertFromUnicodeToScriptCodeRun</CODE> now function correctly if the   <CODE>kUnicodeTextRunBit</CODE> is clear (previously their determination of   best target encoding was incorrect).</P>      <P><CODE>kTECTextToUnicodeScanFixBit</CODE> <CODE>ConvertFromTextToUnicode</CODE> mappings can now depend on context and   saved state. There are several related changes:</P>      <UL>      <LI>Malformed input produces <CODE>kTextMalformedInputErr</CODE>.</li>            <LI><CODE>ConvertFromTextToUnicode</CODE> accepts the control flags      <CODE>kUnicodeLooseMappingsMask</CODE>, <CODE>kUnicodeKeepInfoMask</CODE>,      <CODE>kUnicodeStringUnterminatedMask</CODE>.</li>            <LI>No redundant direction overrides when converting Mac OS      Arabic &amp; Hebrew to Unicode</li>            <LI>Improved mapping of 0x30-0x39 digits in Mac OS Arabic when      loose mappings are used</li>            <LI>Better context-dependent mapping of certain characters in      Mac OS Indic encodings.<BR><BR></li>            </UL></li>      <LI>Renamed the static library initialization and termination   functions from <CODE>InitializeUnicode</CODE> and <CODE>TerminateUnicode</CODE> to   <CODE>InitializeUnicodeConverter</CODE> and <CODE>TerminateUnicodeConverter</CODE>, for the   same reasons as in (a) above. This should not be a problem, since   we have not previously released a version of the static library.   However, the old names are still exported by the static library,   just in case.</li></UL><A NAME="TECImplementationBugFixes"></A><H3>Implementation BugFixes</H3><UL>   <LI>Fixed a crashing bug in <CODE>TECGetAvailableSniffers</CODE> which occurred   in low-memory situations.<BR></li>            <LI><CODE>TECGetTextEncodingFromInternetName</CODE> was sensitive to the case   of the Internet name passed in, even though Internet names are   supposed to be case-insensitive.<BR></li>            <LI><CODE>TECCreateOneToManyConverter</CODE> and   <CODE>TECCreateOneToManyConverterFromPath</CODE> should return <CODE>paramError</CODE> if   the <CODE>numOutputEncodings</CODE> is 0.<BR></li>            <LI>Actually allowed the <CODE>kUnicodeStringUnterminatedBit</CODE> control   flag to be used with <CODE>ConvertFromUnicodeToText</CODE> (...ToTextRun,   ...ToScriptCodeRun). This control was previously documented for use   with these APIs (and the supporting code was implemented).   However, if it was used, the functions returned <CODE>paramErr</CODE>, due to   an error in parameter validity checking.<BR></li>            <LI>Fixed problems with <CODE>ConvertFromUnicodeToTextRun</CODE>   (...ToScriptCodeRun) when the <CODE>kUnicodeTextRun</CODE> control flag is clear;   in this case these functions were making bad guesses about the   best target encoding.<BR></li>            <LI>Fixed problems with handle locking and unlocking that showed   up when multiple threads were calling the Unicode Converter.<BR></li>            <LI><CODE>ConvertFromUnicodeToTextRun</CODE> (...ToScriptCodeRun) could enter   infinite loop when running out of buffer space after executing a   fallback handler.<BR></li>            <LI>Fixed several problems in <CODE>ConvertFromUnicodeToText</CODE>   (...ToTextRun, ...ToScriptCodeRun) for Unicode in UTF-8 format: Errors   in direction resolution (and a crash when handling bidirectional text), and   errors recovering from scanning ahead too far for text element   boundaries.<BR></li>            <LI>In <CODE>ConvertFromUnicodeToText</CODE> (...ToTextRun, ...ToScriptCodeRun),   the <CODE>kUnicodeVerticalFormBit</CODE> was ignored when converting to any   Japanese variant except <CODE>kJapaneseStandardVariant</CODE> and   <CODE>kJapanesePostScriptScreenVariant</CODE>.<BR></li>            <LI>Fixed <CODE>CreateUnicodeToTextRunInfo</CODE> (and the ...ByEncoding and   ...ByScriptCode forms) so that if 0 is passed for number of   mappings/encodings/scripts or if NULL is passed for the array,  it   only creates entries for the script variants that are installed,   instead of for all of the possible variants for each installed   script.</li></UL><A NAME="TECImplementationEnhancements"></A><H3>ImplementationEnhancements</H3><UL>   <LI>Allowed the following control flags to be used with   <CODE>ConvertFromTextToUnicode</CODE> (previously, these were only intended for   use with <CODE>ConvertFromUnicodeToText</CODE>, ...ToTextRun, ...ToScriptCodeRun):   <CODE>kUnicodeLooseMappingsMask</CODE>, <CODE>kUnicodeKeepInfoMask</CODE>,   <CODE>kUnicodeStringUnterminatedMask</CODE>.<BR></li>            <LI>Improved the <CODE>ConvertFromTextToUnicode</CODE> scanner to emit   context-dependent information that can affect the mappings, and   provided for saving scanner state in the <CODE>TextToUnicodeInfo</CODE>   structure if <CODE>kUnicodeKeepInfoMask</CODE> is set. Enhanced the mapping   table formats to permit mappings that depend on context   information from the scanner and on tolerance information (i.e.   whether loose mappings are requested).<BR></li>            <LI>When <CODE>ConvertFromTextToUnicode</CODE> encounters an invalid sequence   of bytes in a particular encoding--such as 0x8120 in   Shift-JIS--it now reports <CODE>kTextMalformedInputErr</CODE>   (previously, it attempted to look up the invalid combination and   returned <CODE>kTECUnmappableElementErr</CODE>).<BR></li>            <LI>The 68K static library version of the Unicode Converter &amp;   Text Common functionality is available with this release. In order   to use it, the TEC 1.3 extension and the TEC 1.3 Text Encodings   folder and files must be present.</li></UL><A NAME="TECMappingChanges"></A><H3>Mapping Changes</H3><P>Among other things, the changes listed below ensure 100% roundtrip fidelity for strict mapping in either direction (non-Unicode toUnicode and back or vice versa) for both Mac OS encodings and othernon-Unicode encodings.</P><UL>   <LI>Added tables to support mapping between Mac OS encodings and   the <CODE>kUnicodeCanonicalDecompVariant</CODE> variant of Unicode; the mapping   version for these tables is <CODE>kUnicodeUseHFSPlusMapping</CODE>. These   tables are located in the Text Encoding Converter extension   itself, rather than in files in the Text Encodings folder (note   that some of these tables also support other mappings, such as   Shift-JIS, EUC-CN, Big-5, and EUC-KR). Note: This Unicode variant   is currently not supported by the high-level Text Encoding   Converter.<BR></li>            <LI>Eliminated redundant direction overrides when converting from   Mac OS Arabic, Farsi or Hebrew to Unicode.<BR></li>            <LI>If <CODE>ConvertFromTextToUnicode</CODE> is called with the   <CODE>kUnicodeLooseMappings</CODE> bit set, then the mapping of 0x30-0x39   digits in MacArabic and MacFarsi depends on the context, in a   manner similar to how the WorldScript I display of these digits   depends on context. If the 0x30-0x90 digits are preceded by Latin   letters or other "strong European" characters, they display as   "Western" digits in WorldScript I, and they are mapped to Unicode   characters 0030-0039. Otherwise, they are displayed with the   Arabic digits forms in WorldScript I, and they are mapped to the   Unicode characters 0660-0669. <BR></li>            <LI>Fixed the scanners for EUC-CN and Big-5 to use the correct   high-byte range.<BR></li>            <LI>In cases where we mapped to a Unicode character that has a   one-character canonical decomposition, change the mapping to use   the canonical decomposition. This affected the following mappings   for Mac OS encodings:      <TABLE BORDER=1>      <TR>         <td width=181 align=left>            <P>Roman, Croatian, Icelandic, Turkish</p>         </TD><td width=85 align=left>            <P>0xBD</p>         </TD></TR>      <TR>         <td width=181 align=left>            <P>Greek</p>         </TD><td width=85 align=left>            <P>0xAF</p>         </TD></TR>      <TR>         <td width=181 align=left>            <P>Symbol</p>         </TD><td width=85 align=left>            <P>0xE1 and 0xF1</p>         </TD></TR>   </TABLE></li>      <LI>Changed mapping of several characters in Mac OS Romanian   (0xAF, 0xBF, 0xDE, 0xDF) to use COMBINING COMMA BELOW.<BR></li>            <LI>Mapped the remainder of the user-defined range in MacJapanese   and Shift-JIS.<BR></li>            <LI>Defined several new corporate characters to be "grouping   transcoding hints": These precede a group of 2,3 or 4 standard   Unicode characters that are to be treated as a group for   transcoding. This way we can map additional characters that are in   Apple character sets--but not in Unicode--using mostly   standard Unicodes plus one of these transcoding hints. Using   these, we changed the mapping for several characters in Mac OS   encodings that previously just mapped to single corporate   characters:      <TABLE BORDER=1>      <TR>         <td width=117 align=left>            <P>Japanese</p>         </TD><td width=432 align=left>            <P>0x8591, 0x85AB-AD, 0x85BF-C1, 0x865D, 0x869E, 0x86CE,            0x86D3-D6, 0x87FB-FC</p>         </TD></TR>      <TR>         <td width=117 align=left>            <P>Hebrew</p>         </TD><td width=432 align=left>            <P>0xC0</p>         </TD></TR>      <TR>         <td width=117 align=left>            <P>Farsi TrueType variant</p>         </TD><td width=432 align=left>            <P>0xA4</p>         </TD></TR>      <TR>         <td width=117 align=left>            <P>Symbol</p>         </TD><td width=432 align=left>            <P>0xE6-EE, 0xF4, 0xF6-FE</p>         </TD></TR>   </TABLE>      <P>We also changed the mapping for several Mac OS Korean   characters that were using two "combining disambiguation tag   transcoding hints" to just use one. This affected 0xA14F-50,   0xA16A, 0xA170, 0xA198, 0xA19F, 0xA245-46, 0xA64E, 0xA78A, 0xA78E,   0xA792.</P></li>      <LI>Other mapping fixes for Mac OS encodings:      <TABLE BORDER=1>      <TR>         <td width=145 align=left>            <P>Devanagari</p>         </TD><td width=404 align=left>            <P>Deleted obsolete mappings for byte pairs 0xF0B5,            0xF0B8, 0xF0BF</p>         </TD></TR>      <TR>         <td width=145 align=left>            <P>Gurmukhi</p>         </TD><td width=404 align=left>            <P>Deleted mappings for byte pairs xB4E9, xB5E9, xBAE9,            xBFE9, xC0E9, xC9E9. Changed the mapping for 0x91</p>         </TD></TR>      <TR>         <td width=145 align=left>            <P>Arabic AlBayan variant</p>         </TD><td width=404 align=left>            <P>0x81 should be unmappable</p>         </TD></TR>      <TR>         <td width=145 align=left>            <P>Mac OS VT100 font encoding</p>         </TD><td width=404 align=left>            <P>Added mappings for 0xE2, 0xE3, 0xF5, 0xF6</p>         </TD></TR>      <TR>         <td width=145 align=left>            <P>Korean</p>         </TD><td width=404 align=left>            <P>Added mappings for many additional characters (these            are all in the Apple extensions area)</p>         </TD></TR>   </TABLE></li>      <LI>Changed loose mapping of Unicode LINE SEPARATOR to be RETURN   (instead of LINE FEED) for Mac OS encodings.</li></UL><A NAME="TECUserInterfaceChanges"></A><H3>User Interface Changes</H3><UL>   <LI>In Mac OS 8.1, the Text Encoding Converter extension is a   required system component; the Extensions Manager will not allow   it to be disabled, Finder will issue a warning if a user attempts   to remove it, and a boot warning will be issued if it is not   present.<BR></li>            <LI>Changed the Japanese name of Shift-JIS  (returned by   <CODE>GetTextEncodingName</CODE>) to have "Shift-JIS" in romaji instead of   katakana.</li></UL><BR><P><A HREF="#top">Back to top</A></P>        <A NAME="Downloads"></A>         <br><h2>Downloadables</h2>        <center><TABLE BORDER=0 CELLPADDING=3 WIDTH="600">          <TR>             <td width=50 align=left>               <P ALIGN=center><img src="images/acrobatsmall.gif" align=middle alt="Acrobat" width=22 height=23></P>            </TD>            <td align="left">               <p>Acrobat version of this Note (124K).</P>            </TD>            <td width=60 align=left>               <p><A HREF="pdf/tn1121.pdf">Download</A></P>            </TD>          </TR>        </TABLE></center><BR><BR>        </td></tr></table></center><!-- end_content --><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/tn/tn1121.html%3Fid%3DDTS10002961-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/tn/tn1121.html%3Fid%3DDTS10002961-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/tn/tn1121.html%3Fid%3DDTS10002961-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<html><head><title>Mac OS X
 Manual Page For vsyslog(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/vsyslog" title="Mac OS X
 Manual Page for vsyslog(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/vsyslog"; name=vsyslog(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
SYSLOG(3)                BSD Library Functions Manual                <!-- a -->SYSLOG(3)<!-- /a -->

<b>NAME</b>
     <b>closelog</b>, <b>openlog</b>, <b>setlogmask</b>, <b>syslog</b>, <b>vsyslog</b> -- control system log

<b>LIBRARY</b>
     Standard C Library (libc, -lc)

<b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;syslog.h&gt;</b>

     <u>void</u>
     <b>closelog</b>(<u>void</u>);

     <u>void</u>
     <b>openlog</b>(<u>const</u> <u>char</u> <u>*ident</u>, <u>int</u> <u>logopt</u>, <u>int</u> <u>facility</u>);

     <u>int</u>
     <b>setlogmask</b>(<u>int</u> <u>maskpri</u>);

     <u>void</u>
     <b>syslog</b>(<u>int</u> <u>priority</u>, <u>const</u> <u>char</u> <u>*message</u>, <u>...</u>);

     <b>#include</b> <b>&lt;syslog.h&gt;</b>
     <b>#include</b> <b>&lt;stdarg.h&gt;</b>

     <u>void</u>
     <b>vsyslog</b>(<u>int</u> <u>priority</u>, <u>const</u> <u>char</u> <u>*message</u>, <u>va</u><b>_</b><u>list</u> <u>args</u>);

<b>DESCRIPTION</b>
     The <b>syslog</b>() function writes <u>message</u> to the system message logger.  The message is then written to the
     system console, log files, logged-in users, or forwarded to other machines as appropriate.  (See
     <a href="../man8/syslogd.8.html#//apple_ref/doc/man/8/syslogd">syslogd(8)</a>.)

     The message is identical to a <a href="printf.3.html#//apple_ref/doc/man/3/printf">printf(3)</a> format string, except that `%m' is replaced by the current
     error message.  (As denoted by the global variable <u>errno</u>; see <a href="strerror.3.html#//apple_ref/doc/man/3/strerror">strerror(3)</a>.)  A trailing newline is
     added if none is present.

     Newlines and other non-printable characters embedded in the message string are printed in an alternate
     format.  This prevents someone from using non-printable characters to construct misleading log messages
     in an output file.  Newlines are printed as "\n", tabs are printed as "\t".  Other control characters
     are printed using a caret ("^") representation, for example "^M" for carriage return.

     The <b>vsyslog</b>() function is an alternate form in which the arguments have already been captured using the
     variable-length argument facilities of <a href="stdarg.3.html#//apple_ref/doc/man/3/stdarg">stdarg(3)</a>.

     The message is tagged with <u>priority</u>.  Priorities are encoded as a <u>facility</u> and a <u>level</u>.  The facility
     describes the part of the system generating the message.  The level is selected from the following
     <u>ordered</u> (high to low) list:

     LOG_EMERG     A panic condition.  This is normally broadcast to all users.

     LOG_ALERT     A condition that should be corrected immediately, such as a corrupted system database.

     LOG_CRIT      Critical conditions, e.g., hard device errors.

     LOG_ERR       Errors.

     LOG_WARNING   Warning messages.

     LOG_NOTICE    Conditions that are not error conditions, but should possibly be handled specially.

     LOG_INFO      Informational messages.

     LOG_DEBUG     Messages that contain information normally of use only when debugging a program.

     The <b>openlog</b>() function provides for more specialized processing of the messages sent by <b>syslog</b>() and
     <b>vsyslog</b>().  The parameter <u>ident</u> is a string that will be prepended to every message.  The <u>logopt</u> argu-<font color="#ffffff" class="whiteout">ment&nbsp;argument</font>
     ment is a bit field specifying logging options, which is formed by OR'ing one or more of the following
     values:

     LOG_CONS      If <b>syslog</b>() cannot pass the message to <a href="../man8/syslogd.8.html#//apple_ref/doc/man/8/syslogd">syslogd(8)</a> it will attempt to write the message to
                   the console (``<u>/dev/console</u>'').

     LOG_NDELAY    Open the connection to <a href="../man8/syslogd.8.html#//apple_ref/doc/man/8/syslogd">syslogd(8)</a> immediately.  Normally the open is delayed until the
                   first message is logged.  Useful for programs that need to manage the order in which file
                   descriptors are allocated.

     LOG_PERROR    Write the message to standard error output as well to the system log.

     LOG_PID       Log the process id with each message: useful for identifying instantiations of daemons.

     The <u>facility</u> parameter encodes a default facility to be assigned to all messages that do not have an
     explicit facility encoded:

     LOG_AUTH      The authorization system: <a href="../man1/login.1.html#//apple_ref/doc/man/1/login">login(1)</a>, <a href="../man1/su.1.html#//apple_ref/doc/man/1/su">su(1)</a>, <a href="../man8/getty.8.html#//apple_ref/doc/man/8/getty">getty(8)</a>, etc.

     LOG_AUTHPRIV  The same as LOG_AUTH, but logged to a file readable only by selected individuals.

     LOG_CRON      The cron daemon: <a href="../man8/cron.8.html#//apple_ref/doc/man/8/cron">cron(8)</a>.

     LOG_DAEMON    System daemons, such as <a href="../man8/routed.8.html#//apple_ref/doc/man/8/routed">routed(8)</a>, that are not provided for explicitly by other facili-<font color="#ffffff" class="whiteout">ties.&nbsp;facilities.</font>
                   ties.

     LOG_FTP       The file transfer protocol daemons: <a href="../man8/ftpd.8.html#//apple_ref/doc/man/8/ftpd">ftpd(8)</a>, <a href="../man8/tftpd.8.html#//apple_ref/doc/man/8/tftpd">tftpd(8)</a>.

     LOG_KERN      Messages generated by the kernel.  These cannot be generated by any user processes.

     LOG_LPR       The line printer spooling system: <a href="../man1/lpr.1.html#//apple_ref/doc/man/1/lpr">lpr(1)</a>, <a href="../man8/lpc.8.html#//apple_ref/doc/man/8/lpc">lpc(8)</a>, <!-- a -->lpd(8)<!-- /a -->, etc.

     LOG_MAIL      The mail system.

     LOG_NEWS      The network news system.

     LOG_SECURITY  Security subsystems, such as <!-- a -->ipfw(4)<!-- /a -->.

     LOG_SYSLOG    Messages generated internally by <a href="../man8/syslogd.8.html#//apple_ref/doc/man/8/syslogd">syslogd(8)</a>.

     LOG_USER      Messages generated by random user processes.  This is the default facility identifier if
                   none is specified.

     LOG_UUCP      The uucp system.

     LOG_LOCAL0    Reserved for local use.  Similarly for LOG_LOCAL1 through LOG_LOCAL7.

     The <b>closelog</b>() function can be used to close the log file.

     The <b>setlogmask</b>() function sets the log priority mask to <u>maskpri</u> and returns the previous mask.  Calls
     to <b>syslog</b>() with a priority not set in <u>maskpri</u> are rejected.  The mask for an individual priority <u>pri</u>
     is calculated by the macro <b>LOG_MASK</b>(<u>pri</u>); the mask for all priorities up to and including <u>toppri</u> is
     given by the macro <b>LOG_UPTO</b>(<u>toppri</u>);.  The default allows all priorities to be logged.

<b>RETURN</b> <b>VALUES</b>
     The routines <b>closelog</b>(), <b>openlog</b>(), <b>syslog</b>(), and <b>vsyslog</b>() return no value.

     The routine <b>setlogmask</b>() always returns the previous log mask level.

<b>EXAMPLES</b>
           syslog(LOG_ALERT, "who: internal error 23");

           openlog("ftpd", LOG_PID | LOG_NDELAY, LOG_FTP);

           setlogmask(LOG_UPTO(LOG_ERR));

           syslog(LOG_INFO, "Connection from host %d", CallingHost);

           syslog(LOG_INFO|LOG_LOCAL2, "foobar error: %m");

<b>LEGACY</b> <b>SYNOPSIS</b>
     <b>#include</b> <b>&lt;syslog.h&gt;</b>
     <b>#include</b> <b>&lt;stdarg.h&gt;</b>

     These include files are necessary for all functions.

<b>SEE</b> <b>ALSO</b>
     <a href="../man1/logger.1.html#//apple_ref/doc/man/1/logger">logger(1)</a>, <a href="../man5/compat.5.html#//apple_ref/doc/man/5/compat">compat(5)</a>, <a href="../man8/syslogd.8.html#//apple_ref/doc/man/8/syslogd">syslogd(8)</a>

<b>HISTORY</b>
     These functions appeared in 4.2BSD.

<b>BUGS</b>
     Never pass a string with user-supplied data as a format without using `%s'.  An attacker can put format
     specifiers in the string to mangle your stack, leading to a possible security hole.  This holds true
     even if the string was built using a function like <b>snprintf</b>(), as the resulting string may still con-<font color="#ffffff" class="whiteout">tain&nbsp;contain</font>
     tain user-supplied conversion specifiers for later interpolation by <b>syslog</b>().

     Always use the proper secure idiom:

           syslog(LOG_ERR, %s, string);

BSD                              June 4, 1993                              BSD
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/vsyslog.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/vsyslog.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/vsyslog.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

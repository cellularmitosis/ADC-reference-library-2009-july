<html><head><title>Mac OS X
 Manual Page For dom(n)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/n/dom" title="Mac OS X
 Manual Page for dom(n)"><a name="//apple_ref/doc/man/n/dom" title="Mac OS X
 Manual Page for dom(n)"><!-- headerDoc=man; indexgroup=Section n; uid="//apple_ref/doc/man/n/dom"; name=dom(n) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
dom(n)                                                                                                dom(n)



____________________________________________________________________________________________________________

<b>NAME</b>
       dom - Create an in-memory DOM tree from XML

<b>SYNOPSIS</b>
       package require tdom

       <b>dom</b> <u>method</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
____________________________________________________________________________________________________________

<b>DESCRIPTION</b>
       This  command  provides the creation of complete DOM trees in memory. In the usual case a string con-<font color="#ffffff" class="whiteout">taining&nbsp;containing</font>
       taining a XML information is parsed and converted into a DOM tree. <u>method</u> indicates a  specific  sub-<font color="#ffffff" class="whiteout">command.&nbsp;subcommand.</font>
       command.

       The valid methods are:

       <b>dom</b> <b>parse</b> <b>?</b><u>options</u><b>?</b> <b>?</b><u>data</u><b>?</b>
              Parses the XML information and builds up the DOM tree in memory providing a Tcl object command
              to this DOM document object. Example:



                     dom parse $xml doc
                     $doc documentElement root

              parses the XML in the variable xml, creates the DOM tree in memory, make a  reference  to  the
              document object, visible in Tcl as a document object command, and assigns this new object name
              to the variable doc. When doc gets freed, the DOM tree and the associated Tcl  command  object
              (document and all node objects) are freed automatically.




                     set document [dom parse $xml]
                     set root     [$document documentElement]

              parses  the  XML  in the variable xml, creates the DOM tree in memory, make a reference to the
              document object, visible in Tcl as a document object command,  and  returns  this  new  object
              name,  which  is then stored in <u>document</u>.  To free the underlying DOM tree and the associative
              Tcl object commands (document + nodes + fragment nodes) the document object command has to  be
              explicitly deleted by:




                     $document delete

              or

                     rename $document ""

              The valid options are:

              <b>-simple</b>
                     If  <u>-simple</u>  is  specified, a simple but fast parser is used (conforms not fully to XML
                     recommendation). That should double parsing and DOM generation speed. The  encoding  of
                     the  data  is not transformed inside the parser. The simple parser does not respect any
                     encoding information in the XML declaration. It skips over the internal DTD subset  and
                     ignores  any  information in it. Therefor it doesn't include defaulted attribute values
                     into the tree, even if the according attribute declaration is in the  internal  subset.
                     It also doesn't expand internal or external entity references other than the predefined
                     entities and character references.

              <b>-html</b>  If <u>-html</u> is specified, a fast HTML parser is used, which  tries  to  even  parse  badly
                     formed HTML into a DOM tree.

              <b>-keepEmpties</b>
                     If  <u>-keepEmpties</u> is specified, text nodes, which contain only whitespaces, will be part
                     of the resulting DOM tree. In default case (<u>-keepEmpties</u> not given)  those  empty  text
                     nodes are removed at parsing time.

              <b>-channel</b>  <u>&lt;channel-ID&gt;</u>
                     If  <u>-channel</u>  <u>&lt;channel-ID&gt;</u> is specified, the input to be parsed is read from the speci-<font color="#ffffff" class="whiteout">fied&nbsp;specified</font>
                     fied channel. The encoding  setting  of  the  channel  (via  fconfigure  -encoding)  is
                     respected,  ie  the  data read from the channel are converted to UTF-8 according to the
                     encoding settings, befor the data is parsed.

              <b>-baseurl</b>  <u>&lt;baseURI&gt;</u>
                     If <u>-baseurl</u> <u>&lt;baseURI&gt;</u> is specified, the baseURI is used as the base URI  of  the  docu-<font color="#ffffff" class="whiteout">ment.&nbsp;document.</font>
                     ment.  External  entities referenced in the document are resolved relative to this base
                     URI. This base URI is also stored within the DOM tree.

              <b>-feedbackAfter</b>  <u>&lt;#bytes&gt;</u>
                     If <u>-feedbackAfter</u> <u>&lt;#bytes&gt;</u> is specified, the  tcl  command  ::dom::domParseFeedback  is
                     evaluated  after parsing every #bytes. If you use this option, you have to create a tcl
                     proc named ::dom::domParseFeedback, otherwise you will get  an  error.  Please  notice,
                     that the calls of ::dom::domParseFeedback are not done exactly every #bytes, but always
                     at the first element start after every #bytes.

              <b>-externalentitycommand</b>  <u>&lt;script&gt;</u>
                     If <u>-externalentitycommand</u> <u>&lt;script&gt;</u> is specified, the specified tcl script is called  to
                     resolve any external entities of the document. The actual evaluated command consists of
                     this option followed by three arguments: the base uri, the  system  identifier  of  the
                     entity  and the public identifier of the entity. The base uri and the public identifier
                     may be the empty list. The script has to return a tcl list  consisting  of  three  ele-<font color="#ffffff" class="whiteout">ments.&nbsp;elements.</font>
                     ments.  The  first element of this list signals, how the external entity is returned to
                     the processor. At the moment, the two allowed types are  "string"  and  "channel".  The
                     second  element of the list has to be the (absolute) base URI of the external entity to
                     be parsed.  The third element of the list are data, either the already read data out of
                     the  external entity as string in the case of type "string", or the name of a tcl chan-<font color="#ffffff" class="whiteout">nel,&nbsp;channel,</font>
                     nel, in the case of type "channel".

              <b>-useForeignDTD</b>  <u>&lt;boolean&gt;</u>
                     If &lt;boolean&gt; is true and the document does not have an external subset, the parser will
                     call  the -externalentitycommand script with empty values for the systemId and publicID
                     arguments. Pleace notice, that, if the document also doesn't have an  internal  subset,
                     the  -startdoctypedeclcommand  and  -enddoctypedeclcommand  scripts,  if  set,  are not
                     called. The <u>-useForeignDTD</u> respects

              <b>-paramentityparsing</b>  <u>&lt;always|never|notstandalone&gt;</u>
                     The <u>-paramentityparsing</u> option controls, if the parser tries to  resolve  the  external
                     entities  (including  the  external DTD subset) of the document, while building the DOM
                     tree. <u>-paramentityparsing</u> requires an argument, which must be either "always", "never",
                     or "notstandalone". The value "always" means, that the parser tries to resolves (recur-<font color="#ffffff" class="whiteout">sively)&nbsp;(recursively)</font>
                     sively) all external entities of the XML source. This is the default, in case <u>-paramen</u>-<font color="#ffffff" class="whiteout">tityparsing&nbsp;-paramentityparsing</font>
                     <u>tityparsing</u>  is  omitted.  The  value  "never" means, that only the given XML source is
                     parsed and no external entity (including the external  subset)  will  be  resolved  and
                     parsed.  The  value  "notstandalone" means, that all external entities will be resolved
                     and parsed, with the execption of documents, which explicitly  states  standalone="yes"
                     in their XML declaration.


       <b>dom</b> <b>createDocument</b> <u>docElemName</u> <b>?</b><u>objVar</u><b>?</b>
              Creates a new DOM document object with one element node with node name <u>docElemName</u>. The <u>objVar</u>
              controlls the memory handling as explained above.

       <b>dom</b> <b>createDocumentNS</b> <u>uri</u> <u>docElemName</u> <b>?</b><u>objVar</u><b>?</b>
              Creates a new DOM document object with one element node with node name <u>docElemName</u>. <u>Uri</u>  gives
              the  namespace  of the document element to create. The <u>objVar</u> controlls the memory handling as
              explained above.

       <b>dom</b> <b>setResultEncoding</b> <b>?</b><u>encodingName</u><b>?</b>
              If <u>encodingName</u> is not given the current global result encoding is  returned.   Otherwise  the
              global  result  encoding  is  set to <u>encodingName</u>.  All character data, attribute values, etc.
              will then be converted from UTF-8, which is delivered from the Expat XML parser, to the  given
              8  bit  encoding  at  XML/DOM  parse  time.   Valid values for <u>encodingName</u> are: utf-8, ascii,
              cp1250,  cp1251,  cp1252,  cp1253,  cp1254,  cp1255,  cp1256,  cp437,  cp850,  en,  iso8859-1,
              iso8859-2,  iso8859-3,  iso8859-4,  iso8859-5,  iso8859-6,  iso8859-7,  iso8859-8,  iso8859-9,
              koi8-r.

       <b>dom</b> <b>createNodeCmd</b> <u>?-returnNodeCmd?</u> <u>(element|comment|text|cdata|pi)Node</u> <u>commandName</u>
              This method creates Tcl commands, which in turn create tDOM nodes.  Tcl  commands  created  by
              this  command are only avaliable inside a script given to the domNode method <u>appendFromScript</u>.
              If a command created with <u>createNodeCmd</u> is invoked in any other context, it will return error.
              The  created command <u>commandName</u> replaces any existing command or procedure with that name. If
              the <u>commandName</u> includes any namespace qualifiers, it is created in the specified namespace.

              If such command is invoked inside a script given as argument to the domNode method <u>appendFrom</u>-<font color="#ffffff" class="whiteout">Script,&nbsp;appendFromScript,</font>
              <u>Script</u>, it creates a new node and appends this node at the end of the child list of the invok-<font color="#ffffff" class="whiteout">ing&nbsp;invoking</font>
              ing element node. If the option <u>-returnNodeCmd</u> was given, the command returns the created node
              as  Tcl command. If this option was omitted, the command returns nothing. Each command creates
              always the same type of node. Which type of node is created by the command  is  determined  by
              the first argument to the <u>createNodeCmd</u>. The syntax of the created command depends on the type
              of the node it creates.

              If the first argument of the method is <u>elementNode</u>, the created command will create an element
              node. The tag name of the created node is <u>commandName</u> without namespace qualifiers. The syntax
              of the created command is:




                     <b>elementNodeCmd</b> <u>?attributeName</u> <u>attributeValue</u> <u>...?</u> <u>?script?</u>
                     <b>elementNodeCmd</b> <u>?-attributeName</u> <u>attributeValue</u> <u>...?</u> <u>?script?</u>
                     <b>elementNodeCmd</b> <u>name</u><b>_</b><u>value</u><b>_</b><u>list</u> <u>script</u>


              The command syntax allows three different ways to specify the attributes of the resulting ele-<font color="#ffffff" class="whiteout">ment.&nbsp;element.</font>
              ment. These could be specified with <u>attributeName</u> <u>attributeValue</u> argument pairs, in an "option
              style" way with <u>-attriubteName</u> <u>attributeValue</u> argument pairs (the '-' character is  only  syn-<font color="#ffffff" class="whiteout">tactical&nbsp;syntactical</font>
              tactical  sugar  and  will  be  stripped  off)  or  as a Tcl list with elements interpreted as
              attribute name and the corresponding attribute value.  The attribute name elements in the list
              may have a leading '-' character, which will be stripped off.

              Every <u>elementNodeCmd</u> accepts an optional Tcl script as last argument. This script is evaluated
              as recursive <u>appendFromScript</u> script with the node created by the <u>elementNodeCmd</u> as parent  of
              all nodes created by the script.

              If the first argument of the method is <u>textNode</u>, the command will create a text node. The syn-<font color="#ffffff" class="whiteout">tax&nbsp;syntax</font>
              tax of the created command is:




                     <b>textNodeCmd</b> ?-disableOutputEscaping? <u>data</u>


              If the optional flag <u>-disableOutputEscaping</u> is given, the escaping of the ampersand  character
              (&amp;) and the left angle bracket (&lt;) inside the data is disabled. You should use this flag care-
              fully.

              If the first argument of the method is <u>commentNode</u>, or <u>cdataNode</u>, the command will  create  an
              comment node or CDATA section node. The syntax of the created command is:




                     <b>nodeCmd</b> <u>data</u>


              If  the  first argument of the method is <u>piNode</u>, the command will create a processing instruc-<font color="#ffffff" class="whiteout">tion&nbsp;instruction</font>
              tion node. The syntax of the created command is:




                     <b>piNodeCmd</b> <u>target</u> <u>data</u>


       <b>dom</b> <b>setStoreLineColumn</b> <u>?boolean</u><b>?</b>
              If switched on, the DOM nodes will contain line and column position information for the origi-<font color="#ffffff" class="whiteout">nal&nbsp;original</font>
              nal XML document after parsing. The default is, not to store line and column position informa-<font color="#ffffff" class="whiteout">tion.&nbsp;information.</font>
              tion.

       <b>dom</b> <b>setNameCheck</b> <u>?boolean</u><b>?</b>
              If NameCheck is true, every method which expects an XML Name, a full qualified name or a  pro-<font color="#ffffff" class="whiteout">cessing&nbsp;processing</font>
              cessing  instructing  target will check, if the given string is valid according to his produc-<font color="#ffffff" class="whiteout">tion&nbsp;production</font>
              tion rule. For commands created with the <u>createNodeCmd</u> method to be used  in  the  context  of
              <u>appendFromScript</u> the status of the flag at creation time decides. If NameCheck is true at cre-<font color="#ffffff" class="whiteout">ation&nbsp;creation</font>
              ation time, the command will check his arguments, otherwise not.  The  <u>setNameCheck</u>  set  this
              flag. It returns the current NameCheck flag state. The default state for NameCheck is true.

       <b>dom</b> <b>setTextCheck</b> <u>?boolean</u><b>?</b>
              If  TextCheck is true, every command which expects XML Chars, a comment, a CDATA section value
              or a processing instructing value will check, if the given string is valid  according  to  his
              production  rule. For commands created with the <u>createNodeCmd</u> method to be used in the context
              of <u>appendFromScript</u> the status of the flag at creation time decides. If TextCheck is  true  at
              creation time, the command will check his arguments, otherwise not.The <u>setTextCheck</u> method set
              this flag. It returns the current TextCheck flag state. The default  state  for  TextCheck  is
              true.

       <b>dom</b> <b>isName</b> <u>name</u>
              Returns  1,  if  <u>name</u> is a valid XML Name according to production 5 of the XML 1.0 recommenda-<font color="#ffffff" class="whiteout">tion.&nbsp;recommendation.</font>
              tion. Otherwise it returns 0.

       <b>dom</b> <b>isPIName</b> <u>name</u>
              Returns 1, if <u>name</u> is a valid XML processing instruction target according to production 17  of
              the XML 1.0 recommendation. Otherwise it returns 0.

       <b>dom</b> <b>isNCName</b> <u>name</u>
              Returns 1, if <u>name</u> is a valid NCName according to production 4 of the of the Namespaces in XML
              recommendation. Otherwise it returns 0.

       <b>dom</b> <b>isQName</b> <u>name</u>
              Returns 1, if <u>name</u> is a valid QName according to production 6 of the of the Namespaces in  XML
              recommendation. Otherwise it returns 0.

       <b>dom</b> <b>isCharData</b> <u>string</u>
              Returns  1,  if every character in <u>string</u> is a valid XML Char according to production 2 of the
              XML 1.0 recommendation. Otherwise it returns 0.

       <b>dom</b> <b>isComment</b> <u>string</u>
              Returns 1, if <u>string</u> is a valid comment according to production 15 of the XML 1.0  recommenda-<font color="#ffffff" class="whiteout">tion.&nbsp;recommendation.</font>
              tion. Otherwise it returns 0.

       <b>dom</b> <b>isCDATA</b> <u>string</u>
              Returns 1, if <u>string</u> is valid according to production 20 of the XML 1.0 recommendation. Other-<font color="#ffffff" class="whiteout">wise&nbsp;Otherwise</font>
              wise it returns 0.

       <b>dom</b> <b>isPIValue</b> <u>string</u>
              Returns 1, if <u>string</u> is valid according to production 16 of the XML 1.0 recommendation. Other-<font color="#ffffff" class="whiteout">wise&nbsp;Otherwise</font>
              wise it returns 0.

<b>KEYWORDS</b>
       XML, DOM, Document, node, parsing



Tcl                                                                                                   dom(n)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/mann/dom.n.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/mann/dom.n.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/mann/dom.n.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

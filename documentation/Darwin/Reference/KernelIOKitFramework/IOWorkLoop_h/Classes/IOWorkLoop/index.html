<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>IOWorkLoop</title>
<meta http-equiv="Content-Type" content="text/html; charset=ascii">
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/Darwin/index.html#//apple_ref/doc/uid/TP30001281-TP30000422" target="_top">Darwin</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/kernel_fw_leo" target="_top">Kernel Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&#160;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<a name="//apple_ref/doc/class/IOWorkLoop" title="IOWorkLoop"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOWorkLoop">IOWorkLoop</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Inherits from:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<a href="../../../OSObject_h/Classes/OSObject/index.html#//apple_ref/cpp/cl/OSObject" target="_top">OSObject</a>
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOWorkLoop.h</a></div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<!-- begin discussion --><p>An IOWorkLoop is a thread of control that is intended to be used to provide single threaded access to hardware.  This class has no knowledge of the nature and type of the events that it marshals and forwards.  When a device driver successfully starts (see IOService::start), it is expected to create the event sources it will need to receive events.  Then a work loop is initialized and the events are added to the work loop for monitoring.  In general this set up will be automated by the family superclass of the specific device.
<br><br>
The thread main method walks the event source linked list and messages each one requesting a work check.  At this point each event source is expected to notify its registered owner that the event has occurred.  After each event has been walked and each indicates that another loop isn't required (by setting the 'more' flag to false) the thread will go to sleep on a signaling semaphore.
<br><br>
When an event source is registered with a work loop it is informed of the semaphore to use to wake up the loop.
<!-- end discussion -->
</p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/_maintRequest/IOReturn/(void*,void*,void*,void*)" target="_top">_maintRequest</a></tt></dt>
<dd><p>Synchronous implementation of addEventSource and removeEventSource functions. 
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/addEventSource/IOReturn/(IOEventSource*)" target="_top">addEventSource</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/disableAllEventSources/void/()" target="_top">disableAllEventSources</a></tt></dt>
<dd><p>Calls disable() in all event sources.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/disableAllInterrupts/void/()" target="_top">disableAllInterrupts</a></tt></dt>
<dd><p>Calls disable() in all interrupt event sources.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/enableAllEventSources/void/()" target="_top">enableAllEventSources</a></tt></dt>
<dd><p>Calls enable() in all event sources.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/enableAllInterrupts/void/()" target="_top">enableAllInterrupts</a></tt></dt>
<dd><p>Calls enable() in all interrupt event sources.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/free/void/()" target="_top">free</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/getThread/IOThread/()" target="_top">getThread</a></tt></dt>
<dd><p>Gets the workThread.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/inGate/bool/()" target="_top">inGate</a></tt></dt>
<dd><p>Is the current execution context holding the work-loop's gate? 
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/init/bool/()" target="_top">init</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/onThread/bool/()" target="_top">onThread</a></tt></dt>
<dd><p>Is the current execution context on the work thread? 
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/removeEventSource/IOReturn/(IOEventSource*)" target="_top">removeEventSource</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/runAction/IOReturn/(Action,OSObject*,void*,void*,void*,void*)" target="_top">runAction</a></tt></dt>
<dd><p>Single thread a call to an action with the work-loop.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/runEventSources/bool/()" target="_top">runEventSources</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOWorkLoop/threadMain/void/()" target="_top">threadMain</a></tt></dt>
<dd></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOWorkLoop/threadMainContinuation/void/(IOWorkLoop*)" target="_top">threadMainContinuation</a></tt></dt>
<dd><p>Static function that calls the threadMain function. 
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOWorkLoop/workLoop/IOWorkLoop*/()" target="_top">workLoop</a></tt></dt>
<dd><p>Factory member function to construct and intialize a work loop.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/clm/IOWorkLoop/workLoopWithOptions/IOWorkLoop*/(IOOptionBits)" target="_top">workLoopWithOptions</a></tt></dt>
<dd><p>Factory member function to constuct and intialize a work loop.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/doc/title:clm/IOWorkLoop/workLoopWithOptions(IOOptionBitsoptions)/IOWorkLoop*/(IOOptionBits)" target="_top">workLoopWithOptions(IOOptionBits options)</a></tt></dt>
<dd><p>Factory member function to constuct and intialize a work loop.
</p></dd>
</dl>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/_maintRequest/IOReturn/(void*,void*,void*,void*);   name=IOWorkLoop::_maintRequest --><a name="//apple_ref/cpp/instm/IOWorkLoop/_maintRequest/IOReturn/(void*,void*,void*,void*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="_maintRequest">_maintRequest</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Synchronous implementation of addEventSource and removeEventSource functions. 
<!-- end abstract --></p>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">_maintRequest</span><!-- /a -->(
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">command</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">data</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->kIOReturnUnsupported if the command given is not implemented, kIOReturnSuccess otherwise.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This function implements the commands as defined in the maintCommandEnum.  It can be subclassed but it isn't an external API in the usual sense.  A subclass implementation of _maintRequest would be called synchronously with respect to the work loop and it should be implemented in the usual way that an ioctl would be.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/addEventSource/IOReturn/(IOEventSource*);   name=IOWorkLoop::addEventSource --><a name="//apple_ref/cpp/instm/IOWorkLoop/addEventSource/IOReturn/(IOEventSource*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="addEventSource">addEventSource</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">addEventSource</span><!-- /a -->(
    <a href="../../../IOEventSource_h/Classes/IOEventSource/index.html#//apple_ref/cpp/cl/IOEventSource" target="_top" class="type"><span class="type">IOEventSource</span></a> <span class="type">*</span><span class="param">newEvent</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>newEvent</code></dt>
<dd><p>Pointer to IOEventSource subclass to add.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Always returns kIOReturnSuccess. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Add an event source to be monitored by the work loop.  This function does not return until the work loop has acknowledged the arrival of the new event source.  When a new event has been added the threadMain will always restart its loop and check all outstanding events.  The event source is retained by the work loop.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/disableAllEventSources/void/();   name=IOWorkLoop::disableAllEventSources --><a name="//apple_ref/cpp/instm/IOWorkLoop/disableAllEventSources/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="disableAllEventSources">disableAllEventSources</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Calls disable() in all event sources.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">disableAllEventSources</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>For all event sources in eventChain, call disable() function.  See IOEventSource::disable().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/disableAllInterrupts/void/();   name=IOWorkLoop::disableAllInterrupts --><a name="//apple_ref/cpp/instm/IOWorkLoop/disableAllInterrupts/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="disableAllInterrupts">disableAllInterrupts</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Calls disable() in all interrupt event sources.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">disableAllInterrupts</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>For all event sources (ES) for which IODynamicCast(IOInterruptEventSource, ES) is valid,  in eventChain call disable() function.  See IOEventSource::disable().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/enableAllEventSources/void/();   name=IOWorkLoop::enableAllEventSources --><a name="//apple_ref/cpp/instm/IOWorkLoop/enableAllEventSources/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="enableAllEventSources">enableAllEventSources</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Calls enable() in all event sources.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">enableAllEventSources</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>For all event sources in eventChain, call enable() function.  See IOEventSource::enable().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/enableAllInterrupts/void/();   name=IOWorkLoop::enableAllInterrupts --><a name="//apple_ref/cpp/instm/IOWorkLoop/enableAllInterrupts/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="enableAllInterrupts">enableAllInterrupts</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Calls enable() in all interrupt event sources.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">enableAllInterrupts</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>For all event sources (ES) for which IODynamicCast(IOInterruptEventSource, ES) is valid, in eventChain call enable() function.  See IOEventSource::enable().
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/free/void/();   name=IOWorkLoop::free --><a name="//apple_ref/cpp/instm/IOWorkLoop/free/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="free">free</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">free</span><!-- /a -->(); </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Mandatory free of the object independent of the current retain count.  If the work loop is running, this method will not return until the thread has successfully terminated.  Each event source in the chain will be released and the working semaphore will be destroyed.
<br><br>
If the client has some outstanding requests on an event they will never be informed of completion.  If an external thread is blocked on any of the event sources they will be awakened with a KERN_INTERUPTED status. 
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/getThread/IOThread/();   name=IOWorkLoop::getThread --><a name="//apple_ref/cpp/instm/IOWorkLoop/getThread/IOThread/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="getThread">getThread</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Gets the workThread.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">IOThread</span><!-- /a --> <!-- a --><span class="function">getThread</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns workThread.

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/inGate/bool/();   name=IOWorkLoop::inGate --><a name="//apple_ref/cpp/instm/IOWorkLoop/inGate/bool/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="inGate">inGate</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Is the current execution context holding the work-loop's gate? 
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">inGate</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if IOThreadSelf() is gate holder.

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/init/bool/();   name=IOWorkLoop::init --><a name="//apple_ref/cpp/instm/IOWorkLoop/init/bool/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="init">init</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <a href="../../../IOFWPhysicalAddressSpace_h/index.html#//apple_ref/c/func/init" target="_top" class="function"><span class="function">init</span></a>(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if initialized successfully, false otherwise. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Initializes an instance of the workloop.  This method creates and initializes the signaling semaphore, the controller gate lock, and spawns the thread that will continue executing.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/onThread/bool/();   name=IOWorkLoop::onThread --><a name="//apple_ref/cpp/instm/IOWorkLoop/onThread/bool/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="onThread">onThread</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Is the current execution context on the work thread? 
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">onThread</span><!-- /a -->() <span class="keyword">const</span>; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns true if IOThreadSelf() == workThread. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/removeEventSource/IOReturn/(IOEventSource*);   name=IOWorkLoop::removeEventSource --><a name="//apple_ref/cpp/instm/IOWorkLoop/removeEventSource/IOReturn/(IOEventSource*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="removeEventSource">removeEventSource</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">removeEventSource</span><!-- /a -->(
    <a href="../../../IOEventSource_h/Classes/IOEventSource/index.html#//apple_ref/cpp/cl/IOEventSource" target="_top" class="type"><span class="type">IOEventSource</span></a> <span class="type">*</span><span class="param">toRemove</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>toRemove</code></dt>
<dd><p>Pointer to IOEventSource subclass to remove.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns kIOReturnSuccess if successful, kIOReturnBadArgument if toRemove couldn't be found. 

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Remove an event source from the work loop.  This function does not return until the work loop has acknowledged the removal of the event source.  When an event has been removed the threadMain will always restart its loop and check all outstanding events.  The event source will be released before return.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/runAction/IOReturn/(Action,OSObject*,void*,void*,void*,void*);   name=IOWorkLoop::runAction --><a name="//apple_ref/cpp/instm/IOWorkLoop/runAction/IOReturn/(Action,OSObject*,void*,void*,void*,void*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="runAction">runAction</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Single thread a call to an action with the work-loop.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">runAction</span><!-- /a -->(
    <!-- a --><span class="type">Action</span><!-- /a --> <span class="param">action</span>,
    <a href="../../../OSObject_h/Classes/OSObject/index.html#//apple_ref/cpp/cl/OSObject" target="_top" class="type"><span class="type">OSObject</span></a> <span class="type">*</span><span class="param">target</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><!-- a --><span class="type">arg0</span><!-- /a --> = <span class="number">0</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><!-- a --><span class="type">arg1</span><!-- /a --> = <span class="number">0</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><!-- a --><span class="type">arg2</span><!-- /a --> = <span class="number">0</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><!-- a --><span class="type">arg3</span><!-- /a --> = <span class="number">0</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>action</code></dt>
<dd><p>Pointer to function to be executed in work-loop context.</p></dd>
<dt><code>arg0</code></dt>
<dd><p>Parameter for action parameter, defaults to 0.</p></dd>
<dt><code>arg1</code></dt>
<dd><p>Parameter for action parameter, defaults to 0.</p></dd>
<dt><code>arg2</code></dt>
<dd><p>Parameter for action parameter, defaults to 0.</p></dd>
<dt><code>arg3</code></dt>
<dd><p>Parameter for action parameter, defaults to 0.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns the value of the Action callout.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Client function that causes the given action to be called in
a single threaded manner.  Beware: the work-loop's gate is recursive and runAction can cause direct or indirect re-entrancy.  When executing on a client's thread, runAction will sleep until the work-loop's gate opens for
execution of client actions, the action is single threaded against all other work-loop event sources.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/runEventSources/bool/();   name=IOWorkLoop::runEventSources --><a name="//apple_ref/cpp/instm/IOWorkLoop/runEventSources/bool/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="runEventSources">runEventSources</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">runEventSources</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Return false if the work loop is shutting down, true otherwise.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Consists of the inner 2 loops of the threadMain function(qv).
The outer loop terminates when there is no more work, and the inside loop
walks the event list calling the checkForWork method in each event source.
If an event source has more work to do, it can set the more flag and the
outer loop will repeat.
<br><br>
This function can be used to clear a priority inversion between the normal
workloop thread and multimedia's real time threads.  The problem is that
the interrupt action routine is often held off by high priority threads.
So if they want to get their data now they will have to call us and ask if
any data is available.  The multi-media user client will arrange for this
function to be called, which causes any pending interrupts to be processed
and the completion routines called.  By the time the function returns all
outstanding work will have been completed at the real time threads
priority.
</p>
<!-- end discussion -->
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOWorkLoop/threadMain/void/();   name=IOWorkLoop::threadMain --><a name="//apple_ref/cpp/instm/IOWorkLoop/threadMain/void/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="threadMain">threadMain</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">threadMain</span><!-- /a -->(); </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Work loop threads main function.  This function consists of 3 loops: the outermost loop is the semaphore clear and wait loop, the middle loop terminates when there is no more work, and the inside loop walks the event list calling the checkForWork method in each event source.  If an event source has more work to do, it can set the more flag and the middle loop will repeat.  When no more work is outstanding the outermost will sleep until an event is signalled or the least wakeupTime, whichever occurs first.  If the event source does not require the semaphore wait to time out, it must set the provided wakeupTime parameter to zero.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOWorkLoop/threadMainContinuation/void/(IOWorkLoop*);   name=IOWorkLoop::threadMainContinuation --><a name="//apple_ref/cpp/clm/IOWorkLoop/threadMainContinuation/void/(IOWorkLoop*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="threadMainContinuation">threadMainContinuation</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Static function that calls the threadMain function. 
<!-- end abstract --></p>
<p></p>
<pre><tt>private</tt>
<br><span class="keyword">static</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">threadMainContinuation</span><!-- /a -->(
    <a href="index.html#//apple_ref/cpp/cl/IOWorkLoop" target="_top" class="type"><span class="type">IOWorkLoop</span></a> <span class="type">*</span><span class="param">self</span>); </pre>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOWorkLoop/workLoop/IOWorkLoop*/();   name=IOWorkLoop::workLoop --><a name="//apple_ref/cpp/clm/IOWorkLoop/workLoop/IOWorkLoop*/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="workLoop">workLoop</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Factory member function to construct and intialize a work loop.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">static</span> <a href="index.html#//apple_ref/cpp/cl/IOWorkLoop" target="_top" class="type"><span class="type">IOWorkLoop</span></a> <span class="type">*</span><!-- a --><span class="function">workLoop</span><!-- /a -->(); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a workLoop instance if constructed successfully, 0 otherwise. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=clm;  uid=//apple_ref/cpp/clm/IOWorkLoop/workLoopWithOptions/IOWorkLoop*/(IOOptionBits);   name=IOWorkLoop::workLoopWithOptions --><a name="//apple_ref/cpp/clm/IOWorkLoop/workLoopWithOptions/IOWorkLoop*/(IOOptionBits)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="workLoopWithOptions">workLoopWithOptions</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Factory member function to constuct and intialize a work loop.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">static</span> <a href="index.html#//apple_ref/cpp/cl/IOWorkLoop" target="_top" class="type"><span class="type">IOWorkLoop</span></a> <span class="type">*</span><!-- a --><span class="function">workLoopWithOptions</span><!-- /a -->(
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>options</code></dt>
<dd><p>Options - kPreciousStack to avoid stack deallocation on paging path.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a workLoop instance if constructed successfully, 0 otherwise. 

<!-- end return value --></p>
<p></p>
<hr>
<!-- headerDoc=title:clm;  uid=//apple_ref/doc/title:clm/IOWorkLoop/workLoopWithOptions(IOOptionBitsoptions)/IOWorkLoop*/(IOOptionBits);   name=IOWorkLoop::workLoopWithOptions(IOOptionBits options) --><a name="//apple_ref/doc/title:clm/IOWorkLoop/workLoopWithOptions(IOOptionBitsoptions)/IOWorkLoop*/(IOOptionBits)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="workLoopWithOptions(IOOptionBitsoptions)">workLoopWithOptions(IOOptionBits options)</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Factory member function to constuct and intialize a work loop.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">static</span> <a href="index.html#//apple_ref/cpp/cl/IOWorkLoop" target="_top" class="type"><span class="type">IOWorkLoop</span></a> <span class="type">*</span><!-- a --><span class="function">workLoopWithOptions</span><!-- /a -->(
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>options</code></dt>
<dd><p>Options - kPreciousStack to avoid stack deallocation on paging path.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns a workLoop instance if constructed successfully, 0 otherwise. 

<!-- end return value --></p>
<p></p>
<h2>Typedefs</h2>
<hr>
<!-- headerDoc=tdef;  uid=//apple_ref/cpp/tdef/IOWorkLoop/Action;   name=IOWorkLoop::Action --><a name="//apple_ref/cpp/tdef/IOWorkLoop/Action"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="Action">Action</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">typedef</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> ( <span class="type">*</span><!-- a --><span class="function">Action</span><!-- /a -->)(
    <a href="../../../OSObject_h/Classes/OSObject/index.html#//apple_ref/cpp/cl/OSObject" target="_top" class="type"><span class="type">OSObject</span></a> <span class="type">*</span><span class="param">target</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">arg0</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">arg1</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">arg2</span>,
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">arg3</span>); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Fields</font></h5>
<dl>
<dt><code>target</code></dt>
<dd><p>Target of the function, can be used as a refcon.  Note if a C++ function
was specified, this parameter is implicitly the first parameter in the target
member function's parameter list.</p></dd>
<dt><code>arg0</code></dt>
<dd><p>Argument to action from run operation.</p></dd>
<dt><code>arg1</code></dt>
<dd><p>Argument to action from run operation.</p></dd>
<dt><code>arg2</code></dt>
<dd><p>Argument to action from run operation.</p></dd>
<dt><code>arg3</code></dt>
<dd><p>Argument to action from run operation.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Type and arguments of callout C function that is used when
a runCommand is executed by a client.  Cast to this type when you want a C++
member function to be used.  Note the arg1 - arg3 parameters are straight pass
through from the runCommand to the action callout.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=tdef;  uid=//apple_ref/cpp/tdef/IOWorkLoop/maintCommandEnum;   name=IOWorkLoop::maintCommandEnum --><a name="//apple_ref/cpp/tdef/IOWorkLoop/maintCommandEnum"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="maintCommandEnum">maintCommandEnum</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">typedef</span> <span class="keyword">enum</span> {
    <!-- a --><span class="var">mAddEvent</span><!-- /a -->,
    <!-- a --><span class="var">mRemoveEvent</span><!-- /a --> 
} <!-- a --><span class="var">maintCommandEnum</span><!-- /a -->; </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Constants</font></h5>
<blockquote>
<dl>
<dt><code>mAddEvent</code></dt>
<dd><p>Used to tag a Remove event source command.</p></dd>
<dt><code>mRemoveEvent</code></dt>
<dd><p>Used to tag a Remove event source command.</p></dd>
</dl>
</blockquote>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Enumeration of commands that _maintCommand can deal with.  
<!-- end discussion -->
</p>
<p></p>
<h2>Structs and Unions</h2>
<hr>
<!-- headerDoc=tag;  uid=//apple_ref/cpp/tag/IOWorkLoop/ExpansionData;   name=IOWorkLoop::ExpansionData --><a name="//apple_ref/cpp/tag/IOWorkLoop/ExpansionData"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="ExpansionData">ExpansionData</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">struct</span> <a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> { 
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <!-- a --><span class="var">options</span><!-- /a -->; 
}; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This structure will be used to expand the capablilties of the IOWorkLoop in the future.
<!-- end discussion -->
</p>
<p></p>
<h2>Member Data</h2>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/controlG;   name=IOWorkLoop::controlG --><a name="//apple_ref/cpp/data/IOWorkLoop/controlG"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="controlG">controlG</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><a href="../../../IOCommandGate_h/Classes/IOCommandGate/index.html#//apple_ref/cpp/cl/IOCommandGate" target="_top" class="type"><span class="type">IOCommandGate</span></a> <span class="type">*</span><!-- a --><span class="var">controlG</span><!-- /a -->; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Internal control gate to maintain event system.<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/eventChain;   name=IOWorkLoop::eventChain --><a name="//apple_ref/cpp/data/IOWorkLoop/eventChain"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="eventChain">eventChain</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><a href="../../../IOEventSource_h/Classes/IOEventSource/index.html#//apple_ref/cpp/cl/IOEventSource" target="_top" class="type"><span class="type">IOEventSource</span></a> <span class="type">*</span><!-- a --><span class="var">eventChain</span><!-- /a -->; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Pointer to first event source in linked list.<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/gateLock;   name=IOWorkLoop::gateLock --><a name="//apple_ref/cpp/data/IOWorkLoop/gateLock"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="gateLock">gateLock</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><!-- a --><span class="type">IORecursiveLock</span><!-- /a --> <span class="type">*</span><!-- a --><span class="var">gateLock</span><!-- /a -->; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Mutual exclusion lock that is used by close and open Gate functions.  
This is a recursive lock, which allows multiple layers of code to share a single IOWorkLoop without deadlock.  This is common in IOKit since threads of execution tend to follow the service plane in the IORegistry, and multiple objects along the call path may acquire the gate for the same (shared) workloop.<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/loopRestart;   name=IOWorkLoop::loopRestart --><a name="//apple_ref/cpp/data/IOWorkLoop/loopRestart"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="loopRestart">loopRestart</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="var">loopRestart</span><!-- /a -->; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Set if an event chain has been changed and the system has to be rechecked from start.  (Internal use only)<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/reserved;   name=IOWorkLoop::reserved --><a name="//apple_ref/cpp/data/IOWorkLoop/reserved"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="reserved">reserved</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> <span class="type">*</span><a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/data/reserved" target="_top" class="var"><span class="var">reserved</span></a>; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Reserved for future use.  (Internal use only)<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/workThread;   name=IOWorkLoop::workThread --><a name="//apple_ref/cpp/data/IOWorkLoop/workThread"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="workThread">workThread</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><!-- a --><span class="type">IOThread</span><!-- /a --> <!-- a --><span class="var">workThread</span><!-- /a -->; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Work loop thread.<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/workToDo;   name=IOWorkLoop::workToDo --><a name="//apple_ref/cpp/data/IOWorkLoop/workToDo"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="workToDo">workToDo</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">volatile</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="var">workToDo</span><!-- /a -->; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Used to to indicate that an interrupt has fired and needs to be processed.<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOWorkLoop/workToDoLock;   name=IOWorkLoop::workToDoLock --><a name="//apple_ref/cpp/data/IOWorkLoop/workToDoLock"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="workToDoLock">workToDoLock</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><!-- a --><span class="type">IOSimpleLock</span><!-- /a --> <span class="type">*</span><!-- a --><span class="var">workToDoLock</span><!-- /a -->; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The spin lock that is used to guard the 'workToDo' variable.<!-- end discussion -->
</p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOWorkLoop_h/Classes/IOWorkLoop/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOWorkLoop_h/Classes/IOWorkLoop/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOWorkLoop_h/Classes/IOWorkLoop/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&#160;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2008-12-19
</div>
<!-- headerDoc=cl; uid=//apple_ref/cpp/cl/IOWorkLoop;  name=IOWorkLoop--><a name="//apple_ref/cpp/cl/IOWorkLoop"></a>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><HTML><!--Template 8-10-00--><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css">   <title>Technical Q&amp;A QTMTB59: Using MovieExportSetSampleDescription to specify the format of exported data</title><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><meta name="keywords" content="ConvertMovieToFile, MovieExportSetSampleDescription, export,movie"><meta name="Description" content="Technical Q&amp;A QTMTB59: Shows how to  use the ConvertMovieToFilefunction to export a WAV audio-only movie to an AIFF fileusing a specific compressor such as QUALCOMM PureVoice."><meta name="categories" content="QuickTime Movie Toolbox"><meta name="week-posted" content="Sep 4, 2000 - Sep 8, 2000"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002029" title="Using MovieExportSetSampleDescription to specify the format of exported data"></a><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/QuickTime/index.html">QuickTime</a> &gt; <a href="../../technicalqas/QuickTime/idxImportExport-date.html">Import & Export</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QTMTB59</div>
<div id="pageheadsub">Using MovieExportSetSampleDescription to specify the format of exported data</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER> <!-- --> <!-- Document Body --></P><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600>   <TR>      <td align="left">                  <hr width=500 align=center>                  <P id=p2>Q: I'd like to use the <CODE>ConvertMovieToFile</CODE> function to export a WAV audio-only movie to an AIFF file using a specific compressor such as QUALCOMM PureVoice. How do I specify the movie export component use the designated compressor?</P>                  <P id=p4>A: Use the <CODE>MovieExportSetSampleDescription</CODE> function to specify the format of the exported data. This function is supported by the Apple sound movie export component (though it is not necessarily implemented by all movie export components - if it's not, the component will return the <CODE>codecUnimpErr</CODE> error). Here's code showing how to use the <CODE>MovieExportSetSampleDescription</CODE> to specify the format of the exported data:</P>         </TD>	</TR></TABLE></center><BR>                  <CENTER><TABLE BORDER=0 CELLPADDING=0 WIDTH=480>            <TR>               <td align="left">                  <P>&nbsp;<B>Listing 1</B>. Using the <CODE>MovieExportSetSampleDescription</CODE> function to specify the format of exported data.</P></TD>            </TR>         </TABLE></CENTER><BR>                           <CENTER><TABLE BORDER=0 CELLPADDING=5 WIDTH=470>	<TR>		<td bgcolor="#EEEEE0" align=left><pre>OSErr ExportWAVEtoAIFF (Movie theMovie, FSSpec *theFile){    ComponentInstance            myComponent = NULL;    SoundDescriptionHandle        myDesc = NULL;    ComponentResult                myErr = badComponentType;    // open a movie export component    myComponent = GetAIFFMovieExportComponent();    if (myComponent == NULL)        goto bail;    // create and fill in a sound description    myDesc = (SoundDescriptionHandle)NewHandleClear(sizeof(SoundDescription));    if (myDesc == NULL)    {        myErr = MemError();        goto bail;    }    // specify the export format    (**myDesc).descSize = sizeof(SoundDescription);    (**myDesc).sampleSize = 16;    (**myDesc).sampleRate = rate22050hz;    (**myDesc).dataFormat = kQUALCOMMCompression;    (**myDesc).dataRefIndex = 1;    (**myDesc).numChannels = 1;    // tell the export component to use the    // specified audio characteristics    myErr = MovieExportSetSampleDescription(myComponent,          (SampleDescriptionHandle)myDesc, SoundMediaType);    if (myErr != noErr)        goto bail;    // export the movie into a file    myErr = ConvertMovieToFile(                        theMovie,        // the movie to convert                        NULL,            // the first track                        theFile,         // the output file                        kQTFileTypeAIFF, // the output file type                        sigMoviePlayer,  // the output file creator                        smSystemScript,  // the script                        NULL,            // resource ID                        0L,              // no flags                        myComponent);    // the export componentbail:    // dispose of any storage we allocated    if (myComponent != NULL)        CloseComponent(myComponent);    if (myDesc != NULL)        DisposeHandle((Handle)myDesc);    return((OSErr)myErr);}ComponentInstance GetAIFFMovieExportComponent(){    ComponentDescription cd;    Component c = 0;    ComponentInstance ci=0;    cd.componentType = MovieExportType;    cd.componentSubType = kQTFileTypeAIFF;    cd.componentManufacturer = SoundMediaType;    cd.componentFlags = 0;    cd.componentFlagsMask = 0;    c = FindNextComponent( c, &amp;cd );    if (c != nil)    {        ci = OpenComponent(c);    }    return ci;}</pre><!-- begin_date --><H4 ALIGN=center>[Sep 05 2000]</H4><!-- end_date -->		</TD>	</TR></TABLE></center><BR><P ALIGN=center></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qtmtb/qtmtb59.html%3Fid%3DDTS10002029-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qtmtb/qtmtb59.html%3Fid%3DDTS10002029-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qtmtb/qtmtb59.html%3Fid%3DDTS10002029-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></P></BODY></HTML>
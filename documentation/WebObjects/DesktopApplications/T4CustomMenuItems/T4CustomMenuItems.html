<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>WebObjects Java Client Programming Guide (Legacy): Adding Custom Menu Items</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Adding Custom Menu Items"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001017-CH310" title="Adding Custom Menu Items"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../LegacyTechnologies/index.html#//apple_ref/doc/uid/TP30000440-TP30000470" target="_top">Legacy Documents</a> &gt; <a href="../../../LegacyTechnologies/Tools-date.html#//apple_ref/doc/uid/TP30000440-TP30000470-TP30000463" target="_top">Tools</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP30001017-CH297-TP1">WebObjects Java Client Programming Guide (Legacy)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../T2UsingFactory/T2UsingFactory.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../T3CustomActions/T3CustomActions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30001017-CH310-TP1" title="Adding Custom Menu Items"></a><h1>Adding Custom Menu Items</h1><p>There are many ways to add custom menu items to a Direct to Java Client application.<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_729"></a> This chapter describes the most common mechanisms.Para</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="T4CustomMenuItems.html#//apple_ref/doc/uid/TP30001017-CH310-TPXREF38">About Actions</a>
				
			<br/>
			
        
			
			
				<a href="T4CustomMenuItems.html#//apple_ref/doc/uid/TP30001017-CH310-CEGEDJJH">New D2WComponent</a>
				
			<br/>
			
        
			
			
				<a href="T4CustomMenuItems.html#//apple_ref/doc/uid/TP30001017-CH310-TPXREF36">Application-Wide Actions</a>
				
			<br/>
			
        
			
			
				<a href="T4CustomMenuItems.html#//apple_ref/doc/uid/TP30001017-CH310-TPXREF41">Menu-Specific Actions</a>
				
			<br/>
			
        
			
			
				<a href="T4CustomMenuItems.html#//apple_ref/doc/uid/TP30001017-CH310-TPXREF43">Controller-Specific Actions</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001017-CH310-TPXREF38" title="About Actions"></a><h2>About Actions</h2><p>Before learning how to add actions to your application, you should understand the different kinds of actions in Direct to Java Client applications. If you consult <span class="content_text"><a href="../Appendix_A/XMLDescriptions.html#//apple_ref/doc/uid/TP30001017-CH323-TP1">“Controllers and Actions Reference,”</a></span> you’ll find a number of types of available actions. Whereas the appendix simply lists the XML tags and attributes of each action, this section describes the differences between each type of action and what each attribute represents.</p><dl class="termdef">	<dt><code>APPLICATIONACTION<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_730"></a><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_731"></a></code></dt><dd><p>These actions are added to the menu specified by the <code>descriptionPath</code> parameter. They invoke a method in the application object specified by the <code>actionName</code> parameter.</p></dd><dt><code>CONTROLLERHIERARCHYACTION<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_732"></a><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_733"></a></code></dt><dd><p>These actions are added to the menu specified by the <code>descriptionPath</code> parameter. They invoke a method in the controller hierarchy specified by the <code>actionName</code> parameter. This means that the menu items for these types of actions are available only if the action method is defined in the controller hierarchy whose top level controller is active in the application.</p></dd><dt><code>HELPWINDOWACTION<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_734"></a></code></dt><dd><p>These actions are added to the Help menu. They invoke rule system tasks specified by the <code>task</code> parameter.</p></dd><dt><code>TOOLWINDOWACTION<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_735"></a><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_736"></a></code></dt><dd><p>These actions are added to the Tools menu. They invoke rule system tasks specified by the <code>task</code> parameter.</p></dd><dt><code>WINDOWACTION<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_737"></a><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_738"></a></code></dt><dd><p>These actions are added to the menu specified by the <code>descriptionPath</code> parameter. They invoke rule system tasks specified by the <code>task</code> parameter.</p></dd></dl><p>The default actions in a Direct to Java Client application are defined in the <code>com.webobjects.eoapplication</code> package. As described in <span class="content_text"><a href="../T1RestrictingAccess/T1RestrictingAccess.html#//apple_ref/doc/uid/TP30001017-CH308-TP1">“Restricting Access to an Application,”</a></span> you can take control of the actions in menus by overriding the <code>actions</code> key in the rule system. </p><p>You write a rule whose right-hand side key is <code>actions</code> and right-hand side value is the name of a D2WComponent in the application that specifies the custom actions.<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_739"></a></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_218" title="Note"></a><p><strong>Note:</strong>&nbsp;If you want to use the default actions in a Direct to Java Client application, you specify additional actions with the <code>additionalActions<a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_740"></a><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_741"></a></code> key, which also points to a D2WComponent defining the actions.</p></div><p>The following sections describe how to add the different types of actions to your application. Since they all require a D2WComponent, the task for adding one to an application is given first.</p><a name="//apple_ref/doc/uid/TP30001017-CH310-CEGEDJJH" title="New D2WComponent"></a><h2>New D2WComponent</h2><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_742"></a><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_743"></a><p><strong>Problem:</strong> You want to add a D2WComponent to your project to hold custom actions (or for other customization purposes).</p><p><strong>Solution:</strong> Add a WOComponent to your project and make it a D2WComponent.</p><p>The first step in adding custom actions is to create a new D2WComponent in which to define them. In a Direct to Java Client project, add a new WebObjects component to the Application Server target. Call it UserActions. This creates a new component of type <code>com.webobjects.appserver.WOComponent</code>. However, you need a D2WComponent, so add an import statement for the <code>com.webobjects.directtoweb</code> package and change the superclass of UserActions to D2WComponent, as shown in <span class="content_text"><a href="T4CustomMenuItems.html#//apple_ref/doc/uid/TP30001017-CH310-BGBECDEI">Listing 13-1</a></span>.</p><a name="//apple_ref/doc/uid/TP30001017-CH310-BGBECDEI" title="Listing 13-1Changing the superclass of UserActions"></a><p class="codesample"><strong>Listing 13-1&nbsp;&nbsp;</strong>Changing the superclass of UserActions</p><div class="codesample"><table><tr><td scope="row"><pre>import com.webobjects.appserver.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.foundation.*;<span></span></pre></td></tr><tr><td scope="row"><pre>import com.webobjects.directtoweb.*; // add this<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>public class UserActions extends D2WComponent { //change superclass to this<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    public UserActions(WOContext context) {<span></span></pre></td></tr><tr><td scope="row"><pre>        super(context);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Now you can add actions to this component to provide custom menu items to your application as described in the following sections.</p><a name="//apple_ref/doc/uid/TP30001017-CH310-TPXREF36" title="Application-Wide Actions"></a><h2>Application-Wide Actions</h2><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_744"></a><p><strong>Problem:</strong> You want to add a new menu item that is always available in the client application. The menu item invokes an action method.</p><p><strong>Solution:</strong> Use <code>APPLICATIONACTION</code>.</p><p>Suppose your application has a main window that provides access to the application’s primary functions. It’s conceivable that this window might become hidden underneath other windows as users use the application. So, you can provide a custom menu item that brings this window forward.</p><p>You specify the method an <code>APPLICATIONACTION</code> object invokes with the <code>actionName</code> parameter. The rule system looks for the method in subclasses of the client’s principal class, EODynamicApplication (direct project types) or EOApplication (nondirect project types). If the method cannot be found, the menu item is still displayed but it is disabled (grayed out).</p><p>In the HTML file of the D2WComponent that contains your application’s custom menu items (<code>UserActions.html</code> in the UserActions component created with the steps described in <span class="content_text"><a href="T4CustomMenuItems.html#//apple_ref/doc/uid/TP30001017-CH310-CEGEDJJH">“New D2WComponent”</a></span>), the XML description for an <code>APPLICATIONACTION</code> object that invokes a method called <code>bringForwardMainWindow</code> looks like this:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;APPLICATIONACTION actionName="bringForwardMainWindow" menuAccelerator="shift B" descriptionPath="Window/Main Window"/><span></span></pre></td></tr></table></div><p>This description specifies a custom action that is displayed in the Window menu as the menu item Main Window with the keyboard equivalent Shift-B. It invokes a method called <code>bringForwardMainWindow</code> on the client application’s principal class. <code>APPLICATIONACTION</code> XML descriptions can include other parameters. The possible parameters for XML descriptions of actions are listed in <span class="content_text"><a href="../Appendix_A/XMLDescriptions.html#//apple_ref/doc/uid/TP30001017-CH323-TPXREF101">“EOActions XML Descriptions.”</a></span></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_219" title="Note"></a><p><strong>Note:</strong>&nbsp;XML descriptions, when used in the <code>.html</code> file of D2WComponents, replace all the HTML in those files.</p></div><a name="//apple_ref/doc/uid/TP30001017-CH310-TPXREF41" title="Menu-Specific Actions"></a><h2>Menu-Specific Actions</h2><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_745"></a><p><strong>Problem:</strong> You want to add a new menu item that is always available in the client application and that invokes a task defined in the rule system. The menu item appears in either the Help menu or the Tools menu.</p><p><strong>Solution:</strong> Use <code>HELPWINDOWACTION</code> or <code>TOOLWINDOWACTION</code>.</p><p>Suppose your application includes a frozen XML component containing help for the application. The HTML file of the D2WComponent containing your custom rules would include this XML description:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;HELPWINDOWACTION task="help" menuAccelerator="shift T" descriptionPath="Window/Main Window"/><span></span></pre></td></tr></table></div><p>If the frozen XML component containing the help file is named HelpWindow, the rule to load it is as follows:</p><dl class="table-display"><dt>Left-Hand Side:</dt><dd><code>(task='help')</code></dd><dt>Key:</dt><dd><code>window</code></dd><dt>Value:</dt><dd><code>"HelpWindow"</code></dd><dt>Priority:</dt><dd><code>50</code></dd></dl><p class="clear"></p><p>This defines a new task that opens the frozen XML component specified in the right-hand side value.</p><p>To add a menu item to the Tools menu, follow the steps for adding an item to the Help menu, changing <code>HELPWINDOWACTION</code> to <code>TOOLWINDOWACTION</code> in the XML description.</p><a name="//apple_ref/doc/uid/TP30001017-CH310-TPXREF43" title="Controller-Specific Actions"></a><h2>Controller-Specific Actions</h2><a name="//apple_ref/doc/uid/TP30001017-CH310-DontLinkElementID_746"></a><p><strong>Problem:</strong> You want to add a new menu item that is available only in the client application for a particular controller hierarchy. The menu item invokes an action in a particular controller hierarchy.</p><p><strong>Solution:</strong> Use a <code>CONTROLLERHIERARCHYACTION</code>.</p><p>Sometimes you want a menu item to be available only while a particular task or user interface component is active. For example, in <span class="content_text"><a href="../AdvancedTutorial/AdvancedTutorial.html#//apple_ref/doc/uid/TP30001017-CH303-TP1">“Enhancing the Application,”</a></span> a custom action is added to the application to send a report of a student’s information. In the tutorial, the custom action is added only to form windows for the Student entity, but this would also be a good action to add as a menu item. </p><p>However, this menu item should be available only if a student record is in the frontmost window. So <code>CONTROLLERHIERARCHYACTION</code> is the appropriate type of action. These actions are enabled only if the action method is in a class that is part of the controller hierarchy represented in the frontmost window of an application.The HTML file of the D2WComponent containing your custom rules would include this XML description:</p><div class="codesample"><table><tr><td scope="row"><pre>&lt;CONTROLLERHIERARCHYACTION actionName="activateMainWindow" menuAccelerator="shift A" descriptionPath="Window/Main Window"/><span></span></pre></td></tr></table></div><p>This invokes a method called <code>activateMainWindow</code> in a class that is part of the frontmost controller hierarchy.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../T2UsingFactory/T2UsingFactory.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../T3CustomActions/T3CustomActions.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2002, 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-08-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/WebObjects/DesktopApplications/T4CustomMenuItems/T4CustomMenuItems.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/WebObjects/DesktopApplications/T4CustomMenuItems/T4CustomMenuItems.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/WebObjects/DesktopApplications/T4CustomMenuItems/T4CustomMenuItems.html%3Fid%3DTP30001017-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
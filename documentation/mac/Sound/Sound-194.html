<!-- legacy work start -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<!-- legacy work end -->


<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)

LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Checking for Speech Manager Capabilities (IM: S)  (deprecated)</Title>

<!-- legacy work start -->
        <META NAME="Generator" CONTENT="manual">
        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">
        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">
        <META NAME="IndexTitle" CONTENT="Inside Macintosh: Sound (Not Recommended)">
        <meta name="xcode-display" content="render">

        <LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->
        <script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
<!-- legacy work end -->

</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<A NAME=HEADING194></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Sound-193.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-195.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Sound-2.html"><B>Sound</B></A> / <BR><DD><A HREF="Sound-187.html"><B>Chapter 4 - Speech Manager</B></A> / <A HREF="Sound-193.html"><B>Using the Speech Manager</B></A></DL></FONT><P>
<HR>

<!-- legacy work start -->
<script type="text/javascript"> placeWatermark()</script>
<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
<i>Inside Macintosh: Sound</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div>
<!-- legacy work end -->


<BLOCKQUOTE>
<A NAME=HEADING194-0></A>
<H2><A NAME=MARKER-9-127></A>Checking for Speech Manager Capabilities</H2>
 <A NAME=MARKER-2-128></A>Because the Speech Manager is not available in all system software versions, you should always check for speech capabilities before attempting to use them. <A HREF=#MARKER-9-130>Listing 4-1</A> defines a function that determines whether the Speech Manager is available.<A NAME=MARKER-2-129></A><P>
<B>Listing 4-1  <A NAME=MARKER-9-130></A>Checking for speech generation capabilities<A NAME=MARKER-2-131></A></B><P>
<PRE>
FUNCTION MySpeechMgrPresent: OSErr;
VAR
   myErr:      OSErr;
   myFeature:  LongInt;                            {feature being tested}
BEGIN
   {Test Speech Manager present bit.}
   myerr := Gestalt(gestaltSpeechAttr, myFeature);
   IF (myErr = noErr) AND (BTst(myFeature, gestaltSpeechMgrPresent)) THEN
   BEGIN
      myErr := SpeakString('The Speech Manager is working and');
      {Wait until synthesizer is done speaking.}
      WHILE (SpeechBusy &lt;&gt; 0) DO
      BEGIN                                        {do nothing}
      END;

      myErr := SpeakString('is almost done.');     
      {Wait until synthesizer is done speaking.}
      WHILE (SpeechBusy &lt;&gt; 0) DO
      BEGIN                                        {do nothing}
      END;
      MySpeechMgrPresent := myErr;
   END;
END;
</PRE>
 The <CODE>MySpeechMgrPresent</CODE> function defined in <A HREF=#MARKER-9-130>Listing 4-1</A> uses the <CODE>Gestalt</CODE> function to determine whether the Speech Manager is available. The <CODE>MySpeechMgrPresent</CODE> function tests the <CODE>gestaltSpeechMgrPresent</CODE> bit, and, if the Speech Manager is present, the <CODE>MySpeechMgrPresent</CODE> function speaks the string passed to the <CODE>SpeakString </CODE>function. If the <CODE>Gestalt</CODE> function cannot obtain the desired information and returns a result code other than <CODE>noErr</CODE>, the <CODE>MySpeechMgrPresent</CODE> function assumes that the Speech Manager is not available.<A NAME=MARKER-2-132></A><P>
 The <CODE>SpeakString</CODE> function uses an implied speech channel, that is, the speech channel is automatically created and disposed of by the Speech Manager. The <CODE>SpeakString</CODE> function is useful when you need to synthesize Pascal-style strings of fewer than 256 characters. If you need to process text that is longer than 255 characters, then you must allocate a speech channel and use one of the routines that can generate speech in a channel such as the <CODE>SpeakText</CODE> or <CODE>SpeakBuffer</CODE> function. These routines are much more flexible in that they allow you to speak more text, customize the speech using speech selectors, or alter the generated speech by changing its modulation, pitch, rate, or voice.<A NAME=MARKER-2-133></A><A NAME=MARKER-2-134></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Sound-193.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Sound-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Sound-336.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Sound-195.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Sound-3.html">&copy; Apple Computer, Inc.</A><br>2 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><HEAD><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Q&amp;A QTPC08: Specifying Chunk Sizes</title><meta name="keywords" content="Mac OS 8 QuickTime samplesPerChunk Chunk sizes SetMediaPreferredChunkSize GetMediaPreferredChunkSize"><meta name="Description" content="Technical Q&amp;A QTPC08: Q&amp;A discusses the QuickTime movie atom'schunk value. Q&amp;A focuses on such topics as what the chunkarchitecture was designed for, why creating one huge chunkand reading it causes the system to run out of memory, andhow to set and get a media's maximum chunk size."><meta name="categories" content="QuickTime Performance and Compatibility"><meta name="week-posted" content="Jul 31, 1995 - Aug 4, 1995"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"><a name="//apple_ref/doc/uid/DTS10002040" title="Specifying Chunk Sizes"></a> <!-- white background --><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalqas/index.html">Technical Q&As</a> &gt; <a href="../../technicalqas/QuickTime/index.html">QuickTime</a> &gt; <a href="../../technicalqas/QuickTime/idxDesignGuidelines-date.html">Design Guidelines</a> &gt; </p><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Q&amp;A QTPC08</div>
<div id="pageheadsub">Specifying Chunk Sizes</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER>			<!-- -->						<!-- Document Body --><table cellspacing="0" cellpadding="0" border="0" WIDTH="600"><tr><td align="left" scope="row"><font size="+4">Q</font>  I need some advice about setting up movie atoms. Certain values (e.g., samplesPerChunk) are variable, but I have found that extreme cases don't work. For example, I want to make a movie all in one chunk, since this results in asimple movie-atom structure. However, when I made a movie with an audio track that had only one 4MB chunk, the playback failed without any error message (ifMovie Player 2.0 had less memory than that assigned to the application).<p>Why do movies created by most applications have a lot of chunks, even when thedata is contiguous from chunk to chunk, and the chunks are all the same size?</p><font size="+4">A</font>  The chunk architecture was designed for faster playback ofmovie material, based on the classical computer science notion that grouping material forfaster caching makes the application faster overall. We use a parameter to define the default chunk sizes, based on our current strategy for playback optimization.<p>Creating one huge chunk causes the system to read the whole chunk at once, andin your extreme case, you are truly running out of memory. The Mac operateswith a very static memory model (unless VM is enabled, which we don'trecommend, because page hits slow down any system that is trying to play backsound and video samples).</p><p>Our concept is that the Movie Toolbox will do the right thing concerningchunking of samples, so we don't have APIs for this  purpose. We recommend thatyou avoid changing the default values with Dumpster and similar tools.</p><p>QuickTime 2.0 introduced the SetMediaPreferredChunkSize andGetMediaPreferredChunkSize calls for specifying the maximum chunk size for amedia and for retrieving the current maximum value. Anything beyond this isoutside the control of the developer.</p><!-- begin_date --><H4 ALIGN=center>[Aug 01 1995]</H4><!-- end_date --></td></tr></table></CENTER><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/qa/qtpc/qtpc08.html%3Fid%3DDTS10002040-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/qa/qtpc/qtpc08.html%3Fid%3DDTS10002040-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/qa/qtpc/qtpc08.html%3Fid%3DDTS10002040-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Sound Files  (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imintrosound.6.htm">Previous</A> | <A target="doc" HREF="imintrosound.1.htm">Chapter contents</A> | <A target="doc" HREF="imintrosound.htm">Chapter top</A> | <A target="doc" HREF="imintrosound.2.htm">Section top</A> | <A target="doc" HREF="imintrosound.8.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=694"> </A><A NAME="29256"> </A>Sound Files<A NAME="marker=138"> </A><A NAME="marker=299"> </A> </H1><P CLASS="T0.Text0"><A NAME="pgfId=695"> </A><A NAME="marker=160"> </A>Although most sampled sounds that you want your application to produce can be stored as sound resources, there are times when it is preferable to store sounds in <B CLASS="bold">sound files.</B> For example, it is usually easier for different applications to share files than it is to share resources. So, if you want your application to play a sampled sound created by another application (or if you want other applications to be able to play a sampled sound created by your application), it might be better to store the sampled-sound data in a file, not in a resource. Similarly, if you are developing versions of your application that run on other operating systems, you might need a method of storing sounds that is independent of the Macintosh Operating System and its reliance on resources to store data. Generally, it is easier to transfer data stored in data files from one operating system to another than it is to transfer data stored in resources.<A NAME="marker=139"> </A><A NAME="marker=140"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=697"> </A>There are other reasons you might want to store some sampled sounds in files and not in resources. If you have a very large sampled sound, it might not be possible to create a resource large enough to hold all the audio data. Resources are limited in size by the structure of resource files (and in particular because offsets to resource data are stored as 24-bit quantities). Sound files, however, can be much larger because the only size limitations are those imposed by the file system on all files. If the sampled-sound data for some sound occupies more than about a half megabyte of space, you should probably store the sound as a file.<A NAME="marker=141"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=698"> </A><A NAME="marker=280"> </A><A NAME="marker=142"> </A><A NAME="marker=143"> </A>To address these various needs, Apple and several third-party developers have defined two sampled-sound file formats, known as the <B CLASS="bold">Audio Interchange File Format (AIFF)</B> and the <B CLASS="bold">Audio Interchange File Format Extension for Compression (AIFF-C).</B> The names emphasize that the formats are designed primarily as data interchange formats. However, you should find both AIFF and AIFF-C flexible enough to use as data storage formats as well. Even if you choose to use a different storage format, your application should be able to convert to and from AIFF and AIFF-C if you want to facilitate sharing of sound data among applications. AIFF format files have file type <TT CLASS="cv">'AIFF'</TT> and AIFF-C format files have file type <TT CLASS="cv">'AIFC'</TT>.<A NAME="marker=508"> </A><A NAME="marker=501"> </A></P><P CLASS="Note"><A NAME="pgfId=734"> </A>Do not confuse AIFF and AIFF-C files (referred to in this chapter as <I CLASS="italics">sound files</I>) with Finder sound files. Each <B CLASS="bold">Finder sound file</B> contains a sound resource that plays when the user double clicks on the file in the Finder (or selects the file and chooses Open from the File menu). A user can create a Finder sound file by dragging a sound out of the System file, and a user can drag a Finder sound file into the System file to add the file's sound to the list of available system alert sounds. You can create a Finder sound file by creating a file of type <TT CLASS="cv">'sfil'</TT> with a creator of <TT CLASS="cv">'movr'</TT> and placing in the file a single sound resource. You can play such a file by using Resource Manager routines to open the Finder sound file and then by using the <TT CLASS="cv">SndPlay</TT> function to play the single sound resource contained in it. <A NAME="marker=91"> </A><A NAME="marker=84"> </A><A NAME="marker=81"> </A><A NAME="marker=80"> </A><A NAME="marker=64"> </A> <A NAME="marker=63"> </A><A NAME="marker=102"> </A><A NAME="marker=487"> </A><A NAME="marker=348"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=700"> </A>The main difference between the AIFF and AIFF-C formats is that AIFF-C allows you to store either compressed or noncompressed audio data, whereas AIFF allows you to store noncompressed audio data only. The AIFF-C format is more general than the AIFF format and is easier to modify. The AIFF-C format can be extended to handle new compression types and application-specific data. As a result, if your application reads or writes sound files, it should be able to handle both AIFF and AIFF-C files. <A target="doc" HREF="imintrosound.7.htm#30975" CLASS="XRef">Table 0-1</A> summarizes the capabilities of the AIFF and AIFF-C file formats.<A NAME="marker=146"> </A></P><TABLE><CAPTION><P CLASS="Tb.Table"><A NAME="pgfId=704"> </A>Table&nbsp;1 <A NAME="30975"> </A>AIFF and AIFF-C capabilities</P></CAPTION><TR><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=656"> </A>File<BR>type</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=758"> </A>Read<BR>sampled</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=759"> </A>Read<BR>compressed</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=760"> </A>Write<BR>sampled</P></TH><TH ROWSPAN="1" COLSPAN="1"><P CLASS="TbH.TblHd"><A NAME="pgfId=762"> </A>Write<BR>compressed</P></TH></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=993"> </A>AIFF</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=994"> </A>Yes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=995"> </A>No</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=996"> </A>Yes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=997"> </A>No</P></TD></TR><TR><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=998"> </A>AIFF-C</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=999"> </A>Yes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=1000"> </A>Yes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=1001"> </A>Yes</P></TD><TD ROWSPAN="1" COLSPAN="1"><P CLASS="TbT.TblText"><A NAME="pgfId=1002"> </A>Yes</P></TD></TR></TABLE><P CLASS="T1.Text1"><A NAME="pgfId=702"> </A>The enhanced Sound Manager includes <B CLASS="bold">play-from-disk</B> routines that allow you to play AIFF and AIFF-C files continuously from disk even while other tasks execute. You might think of the play-from-disk routines as providing you with the ability to install a &quot;tape player&quot; in a sound channel. Once the sound begins to play, it continues uninterrupted until it finishes or until an application pauses or stops it.<A NAME="marker=263"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=708"> </A><A NAME="marker=290"> </A><A NAME="marker=129"> </A><A NAME="marker=128"> </A><A NAME="marker=127"> </A>You can play a sampled sound stored in a file of type AIFF or AIFF-C by opening the file and passing its file reference number to the <TT CLASS="cv">SndStartFilePlay</TT> function. If the file is of type AIFF-C and the data is compressed, then the data is automatically expanded during playback. The <TT CLASS="cv">SndStartFilePlay</TT> function works like the <TT CLASS="cv">SndPlay</TT> function but does not require the entire sound to be in RAM at one time. Instead, the Sound Manager uses two buffers, each of which is smaller than the sound itself. The Sound Manager plays one buffer of sound while filling the other with data from disk. After it finishes playing the first buffer, the Sound Manager switches buffers, and plays data in the second while refilling the first. This <B CLASS="bold">double buffering</B> technique minimizes RAM usage at the expense of additional disk overhead. As a result, <TT CLASS="cv">SndStartFilePlay</TT> is ideal for playing very large sounds.</P><P CLASS="T1.Text1"><A NAME="pgfId=688"> </A>The disk overhead incurred when using <TT CLASS="cv">SndStartFilePlay</TT> is relatively light, and most mass-storage devices currently available for Macintosh computers have response times that are good enough that <TT CLASS="cv">SndStartFilePlay</TT> can retrieve audio data from disk and play a sound without audible gaps. There are no limits on the number of concurrent disk-based sampled-sound playbacks other than those imposed by processor speed and disk capability. On machines with sufficient CPU resources, several continuous playbacks can occur at once. Disk fragmentation can affect the performance of playing sampled-sound files from disk. In addition, playing multiple sounds from the same hard disk may degrade overall performance.<A NAME="marker=134"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=693"> </A>The Sound Manager currently supports continuous play from disk only on certain Macintosh computers. You should use the <TT CLASS="cv">Gestalt</TT> function to determine whether a specific machine supports play from disk. Also, if a sound channel is being used for continuous play from disk, then no other sound commands can be sent to that channel.<A NAME="marker=135"> </A><A NAME="marker=144"> </A><A NAME="marker=314"> </A><A NAME="marker=587"> </A><A NAME="marker=167"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imintrosound.6.htm">Previous</A> | <A target="doc" HREF="imintrosound.1.htm">Chapter contents</A> | <A target="doc" HREF="imintrosound.htm">Chapter top</A> | <A target="doc" HREF="imintrosound.2.htm">Section top</A> | <A target="doc" HREF="imintrosound.8.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Summary of the Window Manager(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING296></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-295.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-297.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-188.html"><B>Chapter 4 - Window Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING296-0></A>
<H1>Summary of the Window Manager</H1>
<A NAME=HEADING296-1></A>
<H2>Pascal Summary</H2>
<A NAME=HEADING296-2></A>
<H3>Constants</H3>
<PRE>
CONST
   {window types}
   documentProc      = 0;  {movable, sizable window, no zoom box}
   dBoxProc          = 1;  {alert box or modal dialog box}
   plainDBox         = 2;  {plain box}
   altDBoxProc       = 3;  {plain box with shadow}
   noGrowDocProc     = 4;  {movable window, no size box or }
                           { zoom box}
   movableDBoxProc   = 5;  {movable modal dialog box}
   zoomDocProc       = 8;  {standard document window}
   zoomNoGrow        = 12; {zoomable, nonresizable window}
   rDocProc          = 16; {rounded-corner window}
   {window kinds}
   dialogKind        = 2;  {dialog or alert box window}
   userKind          = 8;  {window created by the application}
   {part codes returned by FindWindow}
   inDesk            = 0;  {none of the following}
   inMenuBar         = 1;  {in menu bar}
   inSysWindow       = 2;  {in desk accessory window}
   inContent         = 3;  {anywhere in content region except size }
                           { box if window is active, }
                           { anywhere including size box if window }
                           { is inactive}
   inDrag            = 4;  {in drag (title bar) region}
   inGrow            = 5;  {in size box (active window only)}
   inGoAway          = 6;  {in close box}
   inZoomIn          = 7;  {in zoom box (window in standard state)}
   inZoomOut         = 8;  {in zoom box (window in user state)}
   {axis constraints on DragGrayRgn}
   noConstraint      = 0;  {no constraints}
   hAxisOnly         = 1;  {move on horizontal axis only}
   vAxisOnly         = 2;  {move on vertical axis only}
   {window definition function task codes}
   wDraw       = 0;  {draw window frame}
   wHit        = 1;  {report where mouse-down occurred}
   wCalcRgns   = 2;  {calculate strucRgn and contRgn}
   wNew        = 3;  {perform additional initialization}
   wDispose    = 4;  {perform additional disposal tasks}
   wGrow       = 5;  {draw grow image during resizing}
   wDrawGIcon  = 6;  {draw size box and scroll bar outline}

   {window definition function wHit return codes}
   wNoHit      = 0;  {none of the following}
   wInContent  = 1;  {anywhere in content region except size }
                     { box if window is active, }
                     { anywhere including size box if window }
                     { is inactive}
   wInDrag     = 2;  {in drag (title bar) region}
   wInGrow     = 3;  {in size box (active window only)}
   wInGoAway   = 4;  {in close box}
   wInZoomIn   = 5;  {in zoom box (window in standard state)}
   wInZoomOut  = 6;  {in zoom box (window in user state)}
   {window color information table part codes}
   wContentColor     = 0;     {content region background}
   wFrameColor       = 1;     {window outline}
   wTextColor        = 2;     {window title and button text}
   wHiliteColor      = 3;     {reserved}
   wTitleBarColor    = 4;     {reserved}
   wHiliteColorLight = 5;     {lightest stripes in title bar }
                              { and lightest dimmed text}
   wHiliteColorDark  = 6;     {darkest stripes in title bar }
                              { and darkest dimmed text}
   wTitleBarLight    = 7;     {lightest parts of title bar background}
   wTitleBarDark     = 8;     {darkest parts of title bar background}
   wDialogLight      = 9;     {lightest element of dialog box frame}
   wDialogDark       = 10;    {darkest element of dialog box frame}
   wTingeLight       = 11;    {lightest window tinging}
   wTingeDark        = 12;    {darkest window tinging}
   {resource ID of desktop pattern}
   deskPatID         = 16;
</PRE>
<A NAME=HEADING296-10></A>
<H3>Data Types</H3>
<PRE>
TYPE  CWindowPtr  = CGrafPtr; 
      CWindowPeek = ^CWindowRecord;
CWindowRecord =
RECORD
   port:          CGrafPort;     {window's graphics port}
   windowKind:    Integer;       {class of window}
   visible:       Boolean;       {visibility}
   hilited:       Boolean;       {highlighting}
   goAwayFlag:    Boolean;       {presence of close box}
   spareFlag:     Boolean;       {presence of zoom box}
   strucRgn:      RgnHandle;     {handle to structure region}
   contRgn:       RgnHandle;     {handle to content region}
   updateRgn:     RgnHandle;     {handle to update region}
   windowDefProc: Handle;        {handle to window definition function}
   dataHandle:    Handle;        {handle to window state data record}
   titleHandle:   StringHandle;  {handle to window title}
   titleWidth:    Integer;       {title width in pixels}
   controlList:   ControlHandle; {handle to control list}
   nextWindow:    CWindowPeek;   {pointer to next window record in }
                                 { window list}
   windowPic:     PicHandle;     {handle to optional picture}
   refCon:        LongInt;       {storage available to your application}
END;
WindowPtr   = GrafPtr; 
WindowPeek  = ^WindowRecord;
WindowRecord = 
RECORD                           {all fields have same use as }
                                 { in color window record}
   port:          GrafPort;      {window's graphics port}
   windowKind:    Integer;       {class of window}
   visible:       Boolean;       {visibility}
   hilited:       Boolean;       {highlighting}
   goAwayFlag:    Boolean;       {presence of close box}
   spareFlag:     Boolean;       {presence of zoom box}
   strucRgn:      RgnHandle;     {handle to structure region}
   contRgn:       RgnHandle;     {handle to content region}
   updateRgn:     RgnHandle;     {handle to update region}
   windowDefProc: Handle;        {handle to window definition function}
   dataHandle:    Handle;        {handle to window state data record}
   titleHandle:   StringHandle;  {handle to window title}
   titleWidth:    Integer;       {title width in pixels}
   controlList:   ControlHandle; {handle to control list}
   nextWindow:    WindowPeek;    {pointer to next window record in }
                                 { window list}
   windowPic:     PicHandle;     {handle to optional picture}
   refCon:        LongInt;       {storage available to your application}
END;
WStateDataPtr = ^WStateData;
WStateDataHandle = ^WStateDataPtr;
WStateData =            {zoom state data record}
RECORD
   userState:  Rect;    {size and location established by user}
   stdState:   Rect;    {size and location established by application}
END;
WCTabPtr = ^WinCTab;
WCTabHandle = ^WCTabPtr;
WinCTab =                        {window color information table}
RECORD
   wCSeed:     LongInt;          {reserved}
   wCReserved: Integer;          {reserved}
   ctSize:     Integer;          {number of entries in table -1}
   ctTable:    ARRAY [0..4] OF ColorSpec;
                                 {array of color specification records}
END;
ColorSpec   =
RECORD
   value:      Integer;          {part identifier}
   rgb:        RGBColor;         {RGB value}
END;
AuxWinHandle= ^AuxWinPtr;
AuxWinPtr   = ^AuxWinRec;
AuxWinRec   =                    {auxiliary window record}
RECORD
   awNext:        AuxWinHandle;  {handle to next record}
   awOwner:       WindowPtr;     {pointer to window}
   awCTable:      CTabHandle;    {handle to color table}
   dialogCItem:   Handle;        {storage used by Dialog Manager}
   awFlags:       LongInt;       {reserved}
   awReserved:    CTabHandle;    {reserved}
   awRefCon:      LongInt;       {reference constant, for }
                                 { use by application}
END;
</PRE>
<A NAME=HEADING296-22></A>
<H3>Window Manager Routines</H3>
<A NAME=HEADING296-23></A>
<H4>Initializing the Window Manager</H4>
<PRE>
PROCEDURE InitWindows;
</PRE>
<A NAME=HEADING296-25></A>
<H4>Creating Windows</H4>
<PRE>
FUNCTION GetNewCWindow(windowID: Integer; wStorage: Ptr;
behind: WindowPtr): WindowPtr;
FUNCTION GetNewWindow(windowID: Integer; wStorage: Ptr;
behind: WindowPtr): WindowPtr;
FUNCTION NewCWindow(wStorage: Ptr; boundsRect: Rect;
title: Str255; visible: Boolean;
procID: Integer; behind: WindowPtr;
goAwayFlag: Boolean;
refCon: LongInt): WindowPtr;
FUNCTION NewWindow(wStorage: Ptr; boundsRect: Rect;
title: Str255; visible: Boolean;
theProc: Integer; behind: WindowPtr;
goAwayFlag: Boolean;
refCon: LongInt): WindowPtr;
</PRE>
<A NAME=HEADING296-30></A>
<H4>Naming Windows</H4>
<PRE>
PROCEDURE SetWTitle(theWindow: WindowPtr; title: Str255);
PROCEDURE GetWTitle(theWindow: WindowPtr; VAR title: Str255);
</PRE>
<A NAME=HEADING296-33></A>
<H4>Displaying Windows</H4>
<PRE>
PROCEDURE DrawGrowIcon(theWindow: WindowPtr);
PROCEDURE SelectWindow(theWindow: WindowPtr);
PROCEDURE ShowWindow(theWindow: WindowPtr);
PROCEDURE HideWindow (theWindow: WindowPtr);
PROCEDURE ShowHide (theWindow: WindowPtr; showFlag: Boolean);
PROCEDURE HiliteWindow (theWindow: WindowPtr; fHilite: Boolean);
PROCEDURE BringToFront (theWindow: WindowPtr);
PROCEDURE SendBehind (theWindow, behindWindow: WindowPtr);
</PRE>
<A NAME=HEADING296-42></A>
<H4>Retrieving Window Information</H4>
<PRE>
FUNCTION FindWindow (thePoint: Point;
VAR theWindow: WindowPtr): Integer;
FUNCTION FrontWindow: WindowPtr;
</PRE>
<A NAME=HEADING296-45></A>
<H4>Moving Windows</H4>
<PRE>
PROCEDURE DragWindow (theWindow: WindowPtr; 
startPt: Point; boundsRect: Rect);
PROCEDURE MoveWindow (theWindow: WindowPtr; 
hGlobal, vGlobal: Integer; front: Boolean);
FUNCTION DragGrayRgn (theRgn: RgnHandle; startPt: Point;
limitRect, slopRect: Rect; axis: Integer;
actionProc: ProcPtr): LongInt;
FUNCTION PinRect (theRect: Rect; thePt: Point): LongInt;
</PRE>
<A NAME=HEADING296-50></A>
<H4>Resizing Windows</H4>
<PRE>
FUNCTION GrowWindow (theWindow: WindowPtr; 
startPt: Point; sizeRect: Rect): LongInt;
PROCEDURE SizeWindow (theWindow: WindowPtr; w, h: Integer;
fUpdate: Boolean);
</PRE>
<A NAME=HEADING296-53></A>
<H4>Zooming Windows</H4>
<PRE>
FUNCTION TrackBox (theWindow: WindowPtr; thePt: Point;
partCode: Integer): Boolean;
PROCEDURE ZoomWindow (theWindow: WindowPtr; 
partCode: Integer; front: Boolean);
</PRE>
<A NAME=HEADING296-56></A>
<H4>Closing and Deallocating Windows</H4>
<PRE>
FUNCTION TrackGoAway (theWindow: WindowPtr; thePt: Point): Boolean;
PROCEDURE CloseWindow (theWindow: WindowPtr);
PROCEDURE DisposeWindow (theWindow: WindowPtr);
</PRE>
<A NAME=HEADING296-60></A>
<H4>Maintaining the Update Region</H4>
<PRE>
PROCEDURE BeginUpdate (theWindow: WindowPtr);
PROCEDURE EndUpdate (theWindow: WindowPtr);
PROCEDURE InvalRect (badRect: Rect);
PROCEDURE InvalRgn (badRgn: RgnHandle);
PROCEDURE ValidRect (goodRect: Rect);
PROCEDURE ValidRgn (goodRgn: RgnHandle);
</PRE>
<A NAME=HEADING296-67></A>
<H4>Setting and Retrieving Other Window Characteristics</H4>
<PRE>
PROCEDURE SetWindowPic (theWindow: WindowPtr; Pic: PicHandle);
FUNCTION GetWindowPic (theWindow: WindowPtr): PicHandle;
PROCEDURE SetWRefCon (theWindow: WindowPtr; data: LongInt);
FUNCTION GetWRefCon (theWindow: WindowPtr): LongInt;
FUNCTION GetWVariant (theWindow: WindowPtr): Integer;
</PRE>
<A NAME=HEADING296-73></A>
<H4>Manipulating the Desktop</H4>
<PRE>
PROCEDURE SetDeskCPat (deskPixPat: PixPatHandle);
FUNCTION GetGrayRgn : RgnHandle;
PROCEDURE GetCWMgrPort (VAR wMgrCPort: CGrafPtr);
PROCEDURE GetWMgrPort (VAR wPort: GrafPtr);
</PRE>
<A NAME=HEADING296-78></A>
<H4>Manipulating Window Color Information</H4>
<PRE>
PROCEDURE SetWinColor (theWindow: WindowPtr; 
newColorTable: WCTabHandle);
FUNCTION GetAuxWin (theWindow: WindowPtr;
VAR awHndl: AuxWinHandle): Boolean;
</PRE>
<A NAME=HEADING296-81></A>
<H4>Low-Level Routines</H4>
<PRE>
FUNCTION CheckUpdate (VAR theEvent: EventRecord): Boolean;
PROCEDURE ClipAbove (window: WindowPeek);
PROCEDURE SaveOld (window: WindowPeek);
PROCEDURE DrawNew (window: WindowPeek; update: Boolean);
PROCEDURE PaintOne (window: WindowPeek; clobberedRgn: RgnHandle);
PROCEDURE PaintBehind (startWindow: WindowPeek;
clobberedRgn: RgnHandle);
PROCEDURE CalcVis (window: WindowPeek);
PROCEDURE CalcVisBehind (startWindow: WindowPeek;
clobberedRgn: RgnHandle);
</PRE>
<A NAME=HEADING296-90></A>
<H3>Application-Defined Routine</H3>
<A NAME=HEADING296-91></A>
<H4>The Window Definition Function</H4>
<PRE>
FUNCTION MyWindow(varCode: Integer; theWindow: WindowPtr;
message: Integer; param: LongInt): LongInt;
</PRE>
<A NAME=HEADING296-93></A>
<H2>C Summary</H2>
<A NAME=HEADING296-94></A>
<H3>Constants</H3>
<PRE>
enum {
   /*window types*/
   documentProc      = 0,  /*movable, sizable window, no zoom box*/
   dBoxProc          = 1,  /*alert box or modal dialog box*/
   plainDBox         = 2,  /*plain box*/
   altDBoxProc       = 3,  /*plain box with shadow*/
   noGrowDocProc     = 4,  /*movable window, no size box or zoom box*/
   movableDBoxProc   = 5,  /*movable modal dialog box*/
   zoomDocProc       = 8,  /*standard document window*/
   zoomNoGrow        = 9,  /*zoomable, nonresizable window*/
   rDocProc          = 16, /*rounded-corner window*/

   /*window kinds*/
   dialogKind        = 2,  /*dialog or alert box window*/
   userKind          = 8,  /*window created by the application*/

   /*part codes returned by FindWindow*/
   inDesk            = 0,  /*none of the following*/
   inMenuBar         = 1,  /*in menu bar*/
   inSysWindow       = 2,  /*in desk accessory window*/
   inContent         = 3,  /*anywhere in content region except size box if*/
                           /* window is active, anywhere including */
                           /* size box if window is inactive*/
   inDrag            = 4,  /*in drag (title bar) region*/
   inGrow            = 5,  /*in size box (active window only)*/
   inGoAway          = 6,  /*in close box*/
   inZoomIn          = 7,  /*in zoom box (window in standard state)*/
   inZoomOut         = 8   /*in zoom box (window in user state)*/
};

enum {
   /*axis constraints on DragGrayRgn*/
   noConstraint      = 0,  /*no constraints*/
   hAxisOnly         = 1,  /*move on horizontal axis only*/
   vAxisOnly         = 2   /*move on vertical axis only*/
};


enum {
   /*window definition function task codes*/
   wDraw       = 0,  /*draw window frame*/
   wHit        = 1,  /*report where mouse-down occurred*/
   wCalcRgns   = 2,  /*calculate strucRgn and contRgn*/
   wNew        = 3,  /*perform additional initialization*/
   wDispose    = 4,  /*perform additional disposal tasks*/
   wGrow       = 5,  /*draw grow image during resizing*/
   wDrawGIcon  = 6,  /*draw size box and scroll bar outline*/

   /*window definition function wHit return codes*/
   wNoHit      = 0,  /*none of the following*/
   wInContent  = 1,  /*in content region (except grow, if active)*/
   wInDrag     = 2,  /*in drag region*/
   wInGrow     = 3,  /*in grow region (active window only)*/
   wInGoAway   = 4,  /*in go-away region (active window only)*/
   wInZoomIn   = 5,  /*in zoom box for zooming in (active window */
                     /* only)*/
   wInZoomOut  = 6,  /*in zoom box for zooming out (active window */
                     /* only)*/
   deskPatID   = 16, /*resource ID of desktop pattern*/

   /*window color information table part codes*/
   wContentColor     = 0,     /*the background of the window's */
                              /* content region*/
   wFrameColor       = 1,     /*the window outline*/
   wTextColor        = 2,     /*window title and text in buttons*/
   wHiliteColor      = 3,     /*reserved*/
   wTitleBarColor    = 4,     /*reserved*/
   wHiliteColorLight = 5,     /*lightest stripes in title bar */
                              /* and lightest dimmed text*/
   wHiliteColorDark  = 6,     /*darkest stripes in title bar */
                              /* and darkest dimmed text*/
   wTitleBarLight    = 7,     /*lightest parts of title bar background*/
   wTitleBarDark     = 8,     /*darkest parts of title bar background*/
   wDialogLight      = 9,     /*lightest element of dialog box frame*/
   wDialogDark       = 10,    /*darkest element of dialog box frame*/
   wTingeLight       = 11,    /*lightest window tinging*/
   wTingeDark        = 12     /*darkest window tinging*/
};
</PRE>
<A NAME=HEADING296-96></A>
<H3>Data Types</H3>
<PRE>
struct CWindowRecord {
   CGrafPort            port;          /*window's graphics port*/
   short                windowKind;    /*class of the window*/
   Boolean              visible;       /*visibility*/
   Boolean              hilited;       /*highlighting*/
   Boolean              goAwayFlag;    /*presence of close box*/
   Boolean              spareFlag;     /*presence of zoom box*/
   RgnHandle            strucRgn;      /*handle to structure region*/
   RgnHandle            contRgn;       /*handle to content region*/
   RgnHandle            updateRgn;     /*handle to update region*/
   Handle               windowDefProc; /*handle to window definition */
                                       /* function*/
   Handle               dataHandle;    /*handle to window state data record*/
   StringHandle         titleHandle;   /*handle to window title*/
   short                titleWidth;    /*title width in pixels*/
   ControlHandle        controlList;   /*handle to control list*/
   struct CWindowRecord *nextWindow;   /*next window in window list*/
   PicHandle            windowPic;     /*handle to optional picture*/
   long                 refCon;        /*storage available to your */
                                       /* application*/
};
typedef struct CWindowRecord CWindowRecord;
typedef CWindowRecord *CWindowPeek;
struct WindowRecord {
   GrafPort             port;          /*window's graphics port*/
   short                windowKind;    /*class of the window*/
   Boolean              visible;       /*visibility*/
   Boolean              hilited;       /*highlighting*/
   Boolean              goAwayFlag;    /*presence of close box*/
   Boolean              spareFlag;     /*presence of zoom box*/
   RgnHandle            strucRgn;      /*handle to structure region*/
   RgnHandle            contRgn;       /*handle to content region*/
   RgnHandle            updateRgn;     /*handle to update region*/
   Handle               windowDefProc; /*handle to window definition */
                                       /* function*/
   Handle               dataHandle;    /*handle to window state data record*/
   StringHandle         titleHandle;   /*handle to window title*/
   short                titleWidth;    /*title width in pixels*/
   ControlHandle        controlList;   /*handle to window's control list*/
   struct WindowRecord  *nextWindow;   /*next window in window list*/
   PicHandle            windowPic;     /*handle to optional picture*/
   long                 refCon;        /*reference constant*/
};
typedef struct WindowRecord WindowRecord;
typedef WindowRecord *WindowPeek;
struct WStateData {
   Rect  userState;  /*user state*/
   Rect  stdState;   /*standard state*/
};
typedef struct WStateData WStateData;
typedef WStateData *WStateDataPtr, **WStateDataHandle;
struct AuxWinRec {
    struct AuxWinRec **awNext;      /*handle to next record*/
    WindowPtr        awOwner;       /*pointer to window */
    CTabHandle       awCTable;      /*handle to color table*/
    Handle           dialogCItem;   /*storage used by Dialog Manager*/
    long             awFlags;       /*reserved*/
    CTabHandle       awReserved;    /*reserved*/
    long             awRefCon;      /*reference constant, for use by */
                                    /* application*/
};
typedef struct AuxWinRec AuxWinRec;
typedef AuxWinRec *AuxWinPtr, **AuxWinHandle;
struct WinCTab {
   long        wCSeed;           /*reserved*/
   short       wCReserved;       /*reserved*/
   short       ctSize;           /*number of entries in table --1*/
   ColorSpec   ctTable[5];       /*array of color specification records*/
};
typedef struct WinCTab WinCTab;
typedef WinCTab *WCTabPtr, **WCTabHandle;
</PRE>
<A NAME=HEADING296-107></A>
<H3>Window Manager Routines</H3>
<A NAME=HEADING296-108></A>
<H4>Initializing the Window Manager</H4>
<PRE>
pascal void InitWindows(void);
</PRE>
<A NAME=HEADING296-110></A>
<H4>Creating Windows</H4>
<PRE>
pascal WindowPtr GetNewCWindow
   (short windowID, void *wStorage,
WindowPtr behind);
pascal WindowPtr GetNewWindow
   (short windowID, void *wStorage,
WindowPtr behind);
pascal WindowPtr NewCWindow(void *wStorage, const Rect *boundsRect,
ConstStr255Param title, Boolean visible,
short procID, WindowPtr behind,
Boolean goAwayFlag, long refCon);
pascal WindowPtr NewWindow(void *wStorage, const Rect *boundsRect,
ConstStr255Param title, Boolean visible,
short theProc, WindowPtr behind,
Boolean goAwayFlag, long refCon);
</PRE>
<A NAME=HEADING296-117></A>
<H4>Naming Windows</H4>
<PRE>
pascal void SetWTitle(WindowPtr theWindow, ConstStr255Param title);
pascal void GetWTitle(WindowPtr theWindow, Str255 title);
</PRE>
<A NAME=HEADING296-120></A>
<H4>Displaying Windows</H4>
<PRE>
pascal void DrawGrowIcon(WindowPtr theWindow);
pascal void SelectWindow(WindowPtr theWindow);
pascal void ShowWindow(WindowPtr theWindow);
pascal void HideWindow(WindowPtr theWindow);
pascal void ShowHide(WindowPtr theWindow, Boolean showFlag);
pascal void HiliteWindow(WindowPtr theWindow, Boolean fHilite);
pascal void BringToFront(WindowPtr theWindow);
pascal void SendBehind(WindowPtr theWindow, WindowPtr behindWindow);
</PRE>
<A NAME=HEADING296-129></A>
<H4>Retrieving Mouse Information</H4>
<PRE>
pascal short FindWindow(Point thePoint, WindowPtr *theWindow);
pascal WindowPtr FrontWindow(void);
</PRE>
<A NAME=HEADING296-132></A>
<H4>Moving Windows</H4>
<PRE>
pascal void DragWindow(WindowPtr theWindow, Point startPt,
const Rect *boundsRect);
pascal void MoveWindow(WindowPtr theWindow, short hGlobal,
short vGlobal, Boolean front);
pascal long DragGrayRgn(RgnHandle theRgn, Point startPt,
const Rect *boundsRect,
const Rect *slopRect,
short axis, DragGrayRgnProcPtr actionProc);
pascal long PinRect(const Rect *theRect, Point *thePt);
</PRE>
<A NAME=HEADING296-137></A>
<H4>Resizing Windows</H4>
<PRE>
pascal long GrowWindow(WindowPtr theWindow, Point startPt,
const Rect *bBox);
pascal void SizeWindow(WindowPtr theWindow, short w, short h,
Boolean fUpdate);
</PRE>
<A NAME=HEADING296-140></A>
<H4>Zooming Windows</H4>
<PRE>
pascal Boolean TrackBox(WindowPtr theWindow, Point thePt,
short partCode);
pascal void ZoomWindow(WindowPtr theWindow, short partCode,
Boolean front);
</PRE>
<A NAME=HEADING296-143></A>
<H4>Closing and Deallocating Windows</H4>
<PRE>
pascal Boolean TrackGoAway(WindowPtr theWindow, Point thePt);
pascal void CloseWindow(WindowPtr theWindow);
pascal void DisposeWindow(WindowPtr theWindow);
</PRE>
<A NAME=HEADING296-147></A>
<H4>Maintaining the Update Region</H4>
<PRE>
pascal void BeginUpdate(WindowPtr theWindow);
pascal void EndUpdate(WindowPtr theWindow);
pascal void InvalRect(const Rect *badRect);
pascal void InvalRgn(RgnHandle badRgn);
pascal void ValidRect(const Rect *goodRect);
pascal void ValidRgn(RgnHandle goodRgn);
</PRE>
<A NAME=HEADING296-154></A>
<H4>Setting and Retrieving Other Window Characteristics</H4>
<PRE>
pascal void SetWindowPic(WindowPtr theWindow, PicHandle pic);
pascal PicHandle GetWindowPic
   (WindowPtr theWindow);
pascal void SetWRefCon(WindowPtr theWindow, long data);
pascal long GetWRefCon(WindowPtr theWindow);
pascal short GetWVariant(WindowPtr theWindow);
</PRE>
<A NAME=HEADING296-161></A>
<H4>Manipulating the Desktop</H4>
<PRE>
pascal void SetDeskCPat(PixPatHandle deskPixPat);
#define GetGrayRgn()(* (RgnHandle* 0X09EE))
pascal void GetCWMgrPort(CGrafPtr *wMgrCPort);
pascal void GetWMgrPort(GrafPtr *wPort);
</PRE>
<A NAME=HEADING296-166></A>
<H4>Manipulating Window Color Information</H4>
<PRE>
pascal void SetWinColor(WindowPtr theWindow,
WCTabHandle newColorTable);
pascal Boolean GetAuxWin(WindowPtr theWindow, AuxWinHandle *awHndl);
</PRE>
<A NAME=HEADING296-169></A>
<H4>Low-Level Routines</H4>
<PRE>
pascal Boolean CheckUpdate(EventRecord *theEvent);
pascal void ClipAbove(WindowPeek window;)
pascal void SaveOld(WindowPeek window);
pascal void DrawNew(WindowPeek window, Boolean update);
pascal void PaintOne(WindowPeek window, RgnHandle clobberedRgn);
pascal void PaintBehind(WindowPeek startWindow,
RgnHandle clobberedRgn);
pascal void CalcVis(WindowPeek window);
pascal void CalcVisBehind(WindowPeek startWindow,
RgnHandle clobberedRgn);
</PRE>
<A NAME=HEADING296-178></A>
<H3>Application-Defined Routine</H3>
<A NAME=HEADING296-179></A>
<H4>The Window Definition Function</H4>
<PRE>
pascal long MyWindow(short varCode, WindowPtr theWindow, 
short message, long param);
</PRE>
<A NAME=HEADING296-181></A>
<H2>Assembly-Language Summary</H2>
<A NAME=HEADING296-182></A>
<H3>Data Types</H3>
<A NAME=HEADING296-183></A>
<H4>Window Record and Color Window Record Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>windowPort</CODE><TD>108 bytes<TD>window's graphics port<TR>
<TD>108<TD><CODE>windowKind</CODE><TD>word<TD>how window was created<TR>
<TD>110<TD><CODE>wVisible</CODE><TD>byte<TD>visibility status<TR>
<TD>111<TD><CODE>wHilited</CODE><TD>byte<TD>highlighted status<TR>
<TD>112<TD><CODE>wGoAway</CODE><TD>byte<TD>presence of close box<TR>
<TD>113<TD><CODE>wZoom</CODE><TD>byte<TD>presence of zoom box<TR>
<TD>114<TD><CODE>structRgn</CODE><TD>long<TD>handle to structure region<TR>
<TD>118<TD><CODE>contRgn</CODE><TD>long<TD>handle to content region<TR>
<TD>122<TD><CODE>updateRgn</CODE><TD>long<TD>handle to update region<TR>
<TD>126<TD><CODE>windowDef</CODE><TD>long<TD>handle to window definition function<TR>
<TD>130<TD><CODE>wDataHandle</CODE><TD>long<TD>handle to window state data record<TR>
<TD>134<TD><CODE>wTitleHandle</CODE><TD>long<TD>handle to window's title<TR>
<TD>138<TD><CODE>wTitleWidth</CODE><TD>word<TD>title width in pixels<TR>
<TD>140<TD><CODE>wControlList</CODE><TD>long<TD>handle to window's control list<TR>
<TD>144<TD><CODE>nextWindow</CODE><TD>long<TD>pointer to next window in window list<TR>
<TD>148<TD><CODE>windowPic</CODE><TD>long<TD>handle to picture for updates<TR>
<TD>152<TD><CODE>wRefCon</CODE><TD>long<TD>reference constant field</TABLE>
</H4>
<A NAME=HEADING296-184></A>
<H4>Window State Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>userState</CODE><TD>8 bytes<TD>user state rectangle<TR>
<TD>8<TD><CODE>stdState</CODE><TD>8 bytes<TD>standard state rectangle</TABLE>
</H4>
<A NAME=HEADING296-185></A>
<H4>Window Color Information Table Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>ctSeed</CODE><TD>long<TD>ID number for table<TR>
<TD>4<TD><CODE>ctFlags</CODE><TD>word<TD>flags word<TR>
<TD>6<TD><CODE>ctSize</CODE><TD>word<TD>number of entries minus 1<TR>
<TD>8<TD><CODE>ctTable</CODE><TD>variable<TD>a series of color specification records (8 bytes each)</TABLE>
</H4>
<A NAME=HEADING296-186></A>
<H4>Auxiliary Window Record Data Structure
<TABLE BORDER="0" CELLPADDING=3><TD>0<TD><CODE>awNext</CODE><TD>long<TD>handle to next window in chain<TR>
<TD>4<TD><CODE>awOwner</CODE><TD>long<TD>pointer to associated window record<TR>
<TD>8<TD><CODE>awCTable</CODE><TD>long<TD>handle to window color information table<TR>
<TD>12<TD><CODE>dialogCItem</CODE><TD>long<TD>handle to dialog color structures<TR>
<TD>16<TD><CODE>awFlags</CODE><TD>long<TD>handle for QuickDraw<TR>
<TD>20<TD><CODE>awResrv</CODE><TD>long<TD>reserved<TR>
<TD>24<TD><CODE>awRefCon</CODE><TD>long<TD>user constant</TABLE>
</H4>
<A NAME=HEADING296-187></A>
<H3>Global Variables
<TABLE BORDER="0" CELLPADDING=3><TD>AuxWinHead<TD>Handle to beginning of auxiliary window list.<TR>
<TD>CurActivate<TD>Pointer to window to receive activate event.<TR>
<TD>CurDeactive<TD>Pointer to window to receive deactivate event.<TR>
<TD>DeskHook<TD>Address of procedure for painting desktop.<TR>
<TD>DeskPattern<TD>Pattern in which desktop is painted (8 bytes).<TR>
<TD>DragHook<TD>Address of optional procedure to execute during <CODE>TrackGoAway</CODE>, <CODE>TrackBox</CODE>, <CODE>DragWindow</CODE>, <CODE>GrowWindow</CODE>, and <CODE>DragGrayRgn</CODE>.<TR>
<TD>DragPattern<TD>Pattern of dragged region's outline (8 bytes).<TR>
<TD>GrayRgn<TD>Handle to desktop region.<TR>
<TD>OldContent<TD>Handle to saved content region.<TR>
<TD>OldStructure<TD>Handle to saved structure region.<TR>
<TD>PaintWhite<TD>Flag indicating whether to paint window white before update event (2 bytes).<TR>
<TD>SaveUpdate<TD>Flag indicating whether to generate update events (2 bytes).<TR>
<TD>SaveVisRgn<TD>Handle to saved visible region.<TR>
<TD>WindowList<TD>Pointer to first window in window list.<TR>
<TD>WMgrPort<TD>Pointer to Window Manager port.</TABLE>
</H3>
 <P>
 <P>
</BLOCKQUOTE><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-295.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-297.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

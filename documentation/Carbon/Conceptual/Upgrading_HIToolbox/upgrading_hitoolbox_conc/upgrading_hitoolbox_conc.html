<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Upgrading to the Mac OS X HIToolbox: The Modern Advantage</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="The Modern Advantage"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30001140-CH202" title="The Modern Advantage"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../HumanInterfaceToolbox-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000516" target="_top">Human Interface Toolbox</a> &gt; <a href="../upgrading_hitoolbox_intro/upgrading_hitoolbox_intro.html#//apple_ref/doc/uid/TP30001140-CH201-DontLinkElementID_17">Upgrading to the Mac OS X HIToolbox</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../upgrading_hitoolbox_intro/upgrading_hitoolbox_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../upgrading_hitoolbox_tasks/upgrading_hitoolbox_tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_16" title="The Modern Advantage"></a><h1><a name="//apple_ref/doc/uid/TP30001140-CH202-CHDHIJDE" title="The Modern Advantage"></a>The Modern Advantage</h1><p> If your Carbon user interface still uses classic Mac OS technologies—such as resources, the Dialog Manager, <code>WaitNextEvent</code>, QuickDraw, and procedure pointer–based custom window, menu, or control definitions—Apple encourages you to upgrade your code to use their modern Mac OS X replacements. </p><ul class="ul"><li class="li"><p>Nib files are the modern replacement for resource files in creating and managing controls, windows, and menus. </p></li><li class="li"><p>HIView is the object-oriented view system for implementing Carbon user interface elements in Mac OS X.</p></li><li class="li"><p>Carbon events is the modern event messaging system for Carbon applications. </p></li><li class="li"><p>Quartz is the modern drawing API in Mac OS X.</p></li></ul><p>This chapter outlines the advantages of using these technologies.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="upgrading_hitoolbox_conc.html#//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_1">Nibs Replace Resources</a>
				
			<br/>
			
        
			
			
				<a href="upgrading_hitoolbox_conc.html#//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_2">Wait No More</a>
				
			<br/>
			
        
			
			
				<a href="upgrading_hitoolbox_conc.html#//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_3">Better Performance Through Compositing</a>
				
			<br/>
			
        
			
			
				<a href="upgrading_hitoolbox_conc.html#//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_4">New View-Based Controls</a>
				
			<br/>
			
        
			
			
				<a href="upgrading_hitoolbox_conc.html#//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_5">Draw With Quartz</a>
				
			<br/>
			
        
			
			
				<a href="upgrading_hitoolbox_conc.html#//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_6">It’s the Future</a>
				
			<br/>
			
        
			
			
				<a href="upgrading_hitoolbox_conc.html#//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_7">Adopt Incrementally</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_1" title="Nibs Replace Resources"></a><h2>Nibs Replace Resources</h2><p>Interface Builder provides an intuitive drag-and-drop method of laying out your user interface. It stores information about your interface in special nib files (or simply “nibs”) that you can then load into your Carbon application. It also allows you to set commonly-used values such as control/view IDs, window attributes, initial values, and so on. Because the nib file is independent of your executable file, you can make changes to your user interface without having to recompile any code. For example, you can reposition controls or adjust initial radio button or checkbox states by simply modifying the appropriate nib file. </p><a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_2" title="Wait No More "></a><h2>Wait No More </h2><p>Carbon events replaces the classic <code>WaitNextEvent</code> event handling model. It is both simpler to use and more sophisticated than its predecessor, and it offers improved performance. </p><p>Carbon events eliminate the need for polling; your application no longer has to query the system for events. Instead, you simply register for the events you want to receive. These events get dispatched directly to the relevant target where individual event handlers can then process the event. </p><p>With this event model, you no longer need boilerplate code in your application to obtain and dispatch events. In addition, you can replace many functions that polled the system with Carbon event handlers. Some examples: </p><ul class="ul"><li class="li"><p>Instead of using <code>Button</code> to determine if the user pressed the mouse button, you simply register to be notified whenever the mouse button is pressed.</p></li><li class="li"><p>In the past, if you wanted to implement a timer, you had to poll the system to determine how many ticks had passed. Now, you can simply install a Carbon event timer that calls a handler when the specified time has elapsed.</p></li><li class="li"><p>If you wanted to change window elements as the mouse rolled over them, you used to have to poll for the mouse position. Now, you can register mouse tracking areas with the system, and you are notified with a Carbon event whenever the mouse enters or leaves a given area.</p></li></ul><p>In addition, if you use the standard window handler, the Carbon Event Manager installs numerous default handlers, most of which do what you would have wanted to do anyway. For example, in a window containing multiple HIViews, pressing Tab automatically advances the keyboard focus. You also benefit from Apple updates. For example, if Apple improved the algorithm for determining how to advance the focus, your application would gain this benefit automatically. </p><p>The standard event handlers also make it easy for your application to support assistive devices, as mandated by section 508 of the Workforce Investment Act of 1998. If your application uses standard user interface elements, you gain this support automatically.</p><a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_3" title="Better Performance Through Compositing"></a><h2>Better Performance Through Compositing</h2><p>Compositing mode (which you should not confuse with Quartz compositing) is a special window setting that attempts to minimize the amount of necessary drawing; images are redrawn only when they change, and areas that are hidden beneath opaque views are never drawn. Compositing mode is available in Mac OS X v10.2 and later. </p><p>The Mac OS X HIToolbox uses the term HIView to refer to controls that have been modified to optionally or exclusively support compositing mode. At heart, an HIView is nothing more than a new name for the existing <code>ControlRef</code> type. The <code>HIViewRef</code> type is identical to the <code>ControlRef</code> type , both at the programming language level and the implementation level. You can use most standard Control Manager calls on them, as well as the new <code>HIViewXXX</code> functions.</p><p>For example, the pushbutton control is considered an HIView, because it can be used in either a compositing or non-compositing window. The ListBox control is not considered an HIView, because it cannot be used in a compositing window. The Scroll view, introduced in Mac OS X 10.2, is considered an HIView, and can be used only in compositing mode. The difference between a control and a view, therefore, is primarily one of implementation changes that allow the control to behave correctly in a compositing window.</p><p>Compositing mode results in a number of performance advantages. For example, implementing live window resizing or scrolling in the past often resulted in images and controls being redrawn multiple times. At best, this resulted in sluggish performance, and at worst there may have been flickering onscreen due to the multiple redraws. In contrast, when in compositing mode, drawing occurs only once during a given pass through the event loop, and no image or control is drawn more often than necessary. To gain the benefits of compositing mode, all drawing in your window must be done from within a compositing-aware view (either a standard view or a custom view that you have written). Classic window update events are not provided for compositing windows.</p><p>In addition, compositing mode respects the z-order (that is, the layering) of controls, which makes it much easier to manipulate controls or views independently of each other. You no longer have to worry about erasing backgrounds, keeping track of control hierarchies, or aligning patterns when drawing or redrawing controls. For example, if you partially cover one view with another, you do not need to keep track of which view is above which, or worry about what happens when a view redraws. </p><a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_4" title="New View-Based Controls"></a><h2>New View-Based Controls</h2><p>The HIView model introduces a number of new controls. Some of them simplify the work required to implement existing controls, while others provide new functionality altogether. Most work in both compositing and noncompositing windows.</p><ul class="ul"><li class="li"><p>The combo box combines an editable text field and a pop-up menu.</p></li><li class="li"><p>The scroll view automatically handles scrolling and live updating of scrollable information. By adopting this view, you no longer need to write code to calculate the positions of scroll thumbs or keep track of the content position. Note that the scroll view is available to windows only in compositing mode. </p></li><li class="li"><p>The search field lets users enter search information, just as in Mail or Safari. </p></li><li class="li"><p>The text view is a text container that uses the Multilingual Text Engine (MLTE). If you have only simple text-manipulation requirements, this view does most of the work for you. </p></li><li class="li"><p>The web view provides an easy way to display HTML web content.</p></li><li class="li"><p>The image view is a container for holding any sort of image. </p></li><li class="li"><p>The segmented view is a segmented button much like the icon/list/column view switcher in the Finder. </p></li></ul><p>In addition, if you want to create custom toolbar items in a toolbar, you must implement the items as custom HIViews.</p><p>The object-oriented nature of views makes it easier to customize; you can subclass or modify existing controls without too much effort, and the resulting code is much more portable. A custom view-based control may only require you to implement a few event handlers to override the behavior of a standard control. Another advantage to moving code “under the hood” is that when Apple fine-tunes, adds features, or otherwise improves functionality, your application can benefit automatically. You don’t have to worry about retuning your code to adopt every change, and there’s less likelihood of something breaking your code. </p><a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_5" title="Draw With Quartz"></a><h2>Draw With Quartz</h2><p>Quartz is the imaging model for Mac OS X. In terms of features and flexibility, it is far superior to QuickDraw. New Apple technologies will leverage the power of Quartz, so it’s in your best interest to make your application Quartz-savvy. Because HIView user interface objects were designed with Quartz in mind, you can easily use all its features. </p><p>Note that even though Quartz relies on a different coordinate system than QuickDraw, the system flips the context before presenting it to your HIView drawing handler, so you can continue to leverage your QuickDraw-compatible code. Also, because you receive the drawing context from a Carbon event, you do not have to worry about handling ports, creating contexts, and so on; you simply draw. </p><p>In addition, if your application used the Appearance Manager, you can now use the HITheme API which allows you to draw Aqua-compliant features using Quartz. </p><p>For more information about using Quartz, see <em><a href="../../../../GraphicsImaging/Conceptual/drawingwithquartz2d/index.html#//apple_ref/doc/uid/TP30001066" target="_top">Quartz 2D Programming Guide</a></em>.</p><a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_6" title="It&acirc;&#128;&#153;s the Future"></a><h2>It’s the Future</h2><p>Apple is committed to the HIViews, Carbon events, and nib files for Carbon implementations of the user interface. All new controls and other features will be based on HIView. If you want your application to take advantage of the latest features, you need to adopt the modern HIToolbox. </p><a name="//apple_ref/doc/uid/TP30001140-CH202-DontLinkElementID_7" title="Adopt Incrementally"></a><h2>Adopt Incrementally</h2><p>Because backwards compatibility has been a hallmark of Mac OS system software, you do not have to throw out all your older implementations to begin updating your user interface code. </p><ul class="ul"><li class="li"><p>Nib files can coexist with resources in the same application. You can first adopt nibs for windows that require views or compositing, and address the rest as your schedule permits.</p></li><li class="li"><p>An application can support both <code>WaitNextEvent</code> event dispatching and Carbon events. For example, you can convert to Carbon events first in windows that use HIView, and update the others as time permits. Another priority is to upgrade any user interface code that polls or otherwise makes poor use of CPU cycles. </p></li><li class="li"><p>You can adopt compositing mode on a window-by-window basis. </p></li><li class="li"><p>HIView supports both QuickDraw and Quartz, so you can migrate your drawing code incrementally as well. </p></li></ul>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../upgrading_hitoolbox_intro/upgrading_hitoolbox_intro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../upgrading_hitoolbox_tasks/upgrading_hitoolbox_tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2004 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2004-06-28<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/Upgrading_HIToolbox/upgrading_hitoolbox_conc/upgrading_hitoolbox_conc.html%3Fid%3DTP30001140-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/Upgrading_HIToolbox/upgrading_hitoolbox_conc/upgrading_hitoolbox_conc.html%3Fid%3DTP30001140-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/Upgrading_HIToolbox/upgrading_hitoolbox_conc/upgrading_hitoolbox_conc.html%3Fid%3DTP30001140-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
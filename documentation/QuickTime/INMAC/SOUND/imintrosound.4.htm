<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Sound Production (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imintrosound.3.htm">Previous</A> | <A target="doc" HREF="imintrosound.1.htm">Chapter contents</A> | <A target="doc" HREF="imintrosound.htm">Chapter top</A> | <A target="doc" HREF="imintrosound.2.htm">Section top</A> | <A target="doc" HREF="imintrosound.5.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=678"> </A>Sound Production</H1><P CLASS="T0.Text0"><A NAME="pgfId=1063"> </A><A NAME="marker=70"> </A>A Macintosh computer produces sound when the Sound Manager sends some data through a sound channel to the available audio hardware, usually at the request of an application. The audio hardware is a <B CLASS="bold">digital-to-analog converter (DAC)</B> that translates digital sound data into analog audio signals. Those signals are then sent to the internal speaker, to a sound output connector (to which the user can connect headphones, external speakers, or sound amplification equipment), or to other sound output hardware.<A NAME="marker=51"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=810"> </A><A NAME="marker=60"> </A>The DAC in Macintosh Plus and Macintosh SE computers is a Sony sound chip. The Macintosh II, Macintosh Portable, Macintosh PowerBook and Macintosh Quadra families of computers contain two Sony sound chips (to provide stereo output capability) as well as the <B CLASS="bold">Apple Sound Chip (ASC),</B> a customized chip that provides enhanced audio output characteristics as well as emulation capabilities for the earlier sound hardware.<A NAME="marker=57"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1199"> </A>Some recent models of Macintosh computers contain built-in sound hardware that extends the Apple Sound Chip's features. For example, Macintosh computers with built-in microphones include the <B CLASS="bold">Enhanced Apple Sound Chip (EASC).</B> Some Macintosh computers contain DSP chips that provide very high-quality sound (16-bit stereo sound, at rates up to 44&nbsp;kHz). There are also NuBus expansion cards available from third-party developers that provide other audio DAC hardware.<A NAME="marker=50"> </A><A NAME="marker=222"> </A><A NAME="marker=599"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1128"> </A><A NAME="marker=238"> </A>A user can select a sound output device or control characteristics of the selected device through the <B CLASS="bold">Sound Out control panel,</B> shown in <A target="doc" HREF="imintrosound.4.htm#23452" CLASS="XRef">Figure 0-6</A>. The available sound output devices are listed in the center of the panel. In this case, two sound output devices are attached to the computer, the built-in speaker and a speaker attached to the SurfBoard DSP card. The highlighted icon shows which device is the <A NAME="marker=600"> </A><B CLASS="bold">current sound output device.</B> All sounds produced by the Sound Manager are sent to that device for playback, unless you specify some other device when creating a sound channel. (See the description of <TT CLASS="cv">SndNewChannel</TT> in the chapter &quot;Sound Manager&quot; for details on specifying an output device explicitly.)</P><P CLASS="Fg.Figure"><A NAME="pgfId=673"> </A>Figure&nbsp;6 <A NAME="23452"> </A>The Sound Out control panel</P><DIV><IMG SRC="imintrosound-6.gif"></DIV><P CLASS="Note"><A NAME="pgfId=1066"> </A>This book shows the Sound control panels introduced with version 3.0 of the Sound Manager. Users can use the pop-up menu at the top of the panel to select one of four or more subpanels (Alert Sounds, Sound In, Sound Out, and Volumes). It's possible to add new subpanels to the Sound control panel. See the chapter on control panel extensions in the book <I CLASS="italics">Inside Macintosh: Operating System Utilities</I>. <A NAME="marker=576"> </A><A NAME="marker=262"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1070"> </A>You can play a sound by calling a Sound Manager routine such as <TT CLASS="cv">SysBeep</TT> (to play the system alert sound), <TT CLASS="cv">SndPlay</TT> (to play a sound stored in memory), or <TT CLASS="cv">SndStartFilePlay</TT> (to play a sound stored in a file). The Sound Manager then issues one or more sound commands to the audio hardware. A <B CLASS="bold">sound command</B> is an instruction to produce sound, modify sound, or otherwise assist in the overall process of sound production.<A NAME="marker=583"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1205"> </A>To ensure that sound commands are issued in the correct order, the Sound Manager uses a structure called a sound channel to store commands. A <B CLASS="bold">sound channel</B> is associated with a first-in, first-out (FIFO) queue of sound commands. Queued commands are sent to the sound hardware through a sound output device component, a component that manages the last stage of communication with the audio hardware. <A target="doc" HREF="imintrosound.4.htm#42063" CLASS="XRef">Figure 0-7</A> shows how your application communicates, through the Sound Manager and the sound output device component, with the current sound output device.<A NAME="marker=584"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=661"> </A>Figure&nbsp;7 <A NAME="42063"> </A>The relation of the Sound Manager to the audio hardware<A NAME="marker=62"> </A></P><DIV><IMG SRC="imintrosound-7.gif"></DIV><P CLASS="Note"><A NAME="pgfId=674"> </A><A NAME="35263"> </A>This chapter does not discuss sound commands or channels in detail, because you do not need to know about these details to play sound data stored in sound resources or sound files. This chapter describes only how to play and record sampled sounds. For more information on sound channels and sound commands, see the chapter <A target="doc" HREF="imsoundmgr.htm" CLASS="XRef">&quot;Sound Manager&quot;</A> in this book. </P><P CLASS="T1.Text1"><A NAME="pgfId=730"> </A>You can play sounds either synchronously or asynchronously. When you play a sound <B CLASS="bold">synchronously,</B> the Sound Manager alone has control over the CPU while it executes commands in a sound channel. Your application does not continue executing until the sound has finished playing. When you play a sound <B CLASS="bold">asynchronously,</B> your application can continue other processing while the sound is playing. This chapter shows how to play sounds only synchronously. To learn how to play sounds asynchronously, see the chapter <A target="doc" HREF="imsoundmgr.htm" CLASS="XRef">&quot;Sound Manager&quot;</A> in this book.</P><P CLASS="T1.Text1"><A NAME="pgfId=662"> </A><A NAME="marker=255"> </A><A NAME="marker=349"> </A>Sometimes it is necessary to bypass the queue of sound commands. If, for example, you want to stop all sound production on a particular channel immediately, it would be counterproductive to put the command into the sound channel because that command wouldn't be processed until any others already in the queue were processed. You can send sound commands directly to the hardware component, as shown in <A target="doc" HREF="imintrosound.4.htm#29111" CLASS="XRef">Figure 0-8</A>.</P><P CLASS="T1.Text1"><A NAME="pgfId=666"> </A>When you bypass the sound channel in this way, any commands that are already queued but not yet sent to the sound output device component remain queued. You can, however, flush the channel at any time by sending the Sound Manager the appropriate request.<A NAME="marker=237"> </A><A NAME="marker=363"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=663"> </A>Figure&nbsp;8 <A NAME="29111"> </A>Bypassing the command queue</P><DIV><IMG SRC="imintrosound-8.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=664"> </A><A NAME="marker=585"> </A><A NAME="marker=30"> </A><A NAME="marker=282"> </A>It's possible to have several channels of sound open at one time. The Sound Manager (using a sound-mixing component called the <B CLASS="bold">Apple Mixer component</B>) mixes together the data coming from all open sound channels and sends a single stream of sound data to the current sound output device. This allows a single application to play two or more sounds at once. It also allows multiple applications to play sounds at the same time, as illustrated in <A target="doc" HREF="imintrosound.4.htm#40899" CLASS="XRef">Figure 0-9</A>.</P><P CLASS="Fg.Figure"><A NAME="pgfId=665"> </A>Figure&nbsp;9 <A NAME="40899"> </A>Mixing multiple channels of sampled sound</P><DIV><IMG SRC="imintrosound-9.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=672"> </A><A NAME="marker=345"> </A><A NAME="marker=586"> </A><A NAME="marker=373"> </A><A NAME="marker=108"> </A>The Sound Manager was first released for all Macintosh computers as part of system software version 6.0. System software versions 6.0.7 and later include an <B CLASS="bold">enhanced Sound Manager</B> (that is, version 2.0) that provides routines for continuous play from disk, sound mixing, and audio compression and expansion. System software versions 6.0.7 and later also include the Sound Input Manager, which allows for recording sounds through either a built-in microphone or some other sound input device.<A NAME="marker=101"> </A><A NAME="marker=620"> </A><A NAME="marker=251"> </A><A NAME="marker=344"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=659"> </A><A NAME="marker=38"> </A>More recent versions of the Sound Manager significantly improve the performance of the Sound Manager's operations and extends its capabilities. Version 3.0 of the Sound Manager is as much as two to three times more efficient than previous versions, which allows your application to do more processing while a sound is playing. In addition, version 3.0 of the Sound Manager provides three important new capabilities:</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=679"> </A><B CLASS="bold">Support for 16-bit audio samples.</B> Versions of the Sound Manager earlier than version 3.0 support only 8-bit monophonic or stereo audio samples with sample rates up to 22&nbsp;kHz. The Sound Manager version 3.0 supports 16-bit stereo audio samples with sample rates up to 64&nbsp;kHz, thereby allowing your application to produce CD-quality sound. Moreover, the Sound Manager version 3.0 automatically converts 16-bit samples into 8-bit samples on Macintosh computers that do not have the hardware to output 16-bit sounds.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=822"> </A><B CLASS="bold">Support for non-Apple audio hardware.</B> The Sound Manager version 3.0 and later use a sound architecture that allows support for third-party audio hardware. This allows a user to install audio hardware capable of recording and producing CD-quality sound. Versions 3.0 and later also include a new Sound control panel that allows the user to redirect sound output to any available audio hardware.</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=823"> </A><A NAME="marker=37"> </A><B CLASS="bold">Support for plug-in codecs.</B> Versions of the Sound Manager earlier than version 3.0 support audio compression and expansion only at ratios of 3:1 and 6:1. The Sound Manager version 3.0 provides support for other compressed audio data formats by allowing plug-in audio compression and expansion components (or codecs).<A NAME="marker=48"> </A></LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=924"> </A>You provide support for your own sound output devices or for your own compression and decompression algorithms by writing an appropriate sound component. See the chapter &quot;Sound Components&quot; later in this book for complete details.<A NAME="marker=85"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=1206"> </A>The Sound Manager version 3.0 is supported only on Macintosh computers with an ASC or comparable hardware. In particular, the Sound Manager version 3.0 is not supported on Macintosh Classic, Macintosh Plus, or Macintosh SE computers. As a result, you should always test whether the specific capabilities you want to use are present before attempting to use them. You can use the <TT CLASS="cv">Gestalt</TT> function to do this, as illustrated in <A target="doc" HREF="imintrosound.e.htm#27444" CLASS="XRef">&quot;Checking For Sound-Recording Equipment&quot;</A> and in <A target="doc" HREF="imintrosound.11.htm#17736" CLASS="XRef">&quot;Checking For Speech Capabilities&quot;</A>.<A NAME="marker=49"> </A><A NAME="marker=313"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=676"> </A>This book describes the capabilities and programming interfaces of version 3.0 of the Sound Manager. Many of the techniques described here can also be used with earlier versions of the Sound Manager, but some cannot. Make sure to test your application thoroughly with all versions of the Sound Manager you want to run under.<A NAME="marker=71"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imintrosound.3.htm">Previous</A> | <A target="doc" HREF="imintrosound.1.htm">Chapter contents</A> | <A target="doc" HREF="imintrosound.htm">Chapter top</A> | <A target="doc" HREF="imintrosound.2.htm">Section top</A> | <A target="doc" HREF="imintrosound.5.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>dspClose(IM:N)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING129></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Networking-128.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-130.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Networking-2.html"><B>Networking</B></A> / <BR><DD><A HREF="Networking-98.html"><B>Chapter 5 - AppleTalk Data Stream Protocol (ADSP) </B></A> / <A HREF="Networking-115.html"><B>ADSP Reference</B></A><BR><DL><DD><A HREF="Networking-122.html"><B>Routines</B></A> / <A HREF="Networking-123.html"><B>Establishing and Terminating an ADSP Connection</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING129-0></A>
<H3>dspClose </H3>
 The <CODE>dspClose</CODE> <A NAME=MARKER-2-369></A>routine closes a connection <A NAME=MARKER-2-370></A>end. You use the <CODE>PBControl</CODE> function <BR>to call the <CODE>dspClose</CODE> routine. See <A HREF=Networking-122.html#MARKER-9-273>"Routines" on page 5-43</A> for a description of the <CODE>PBControl</CODE> function.<P>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD>--><TD>ioCompletion<TD>ProcPtr<TD>A pointer to a completion routine.<TR>
<TD><--<TD>ioResult<TD>OSErr<TD>The function result. <TR>
<TD>--><TD>ioCRefNum<TD>Integer<TD>The driver reference number.<TR>
<TD>--><TD>csCode<TD>Integer<TD>Always <CODE>dspClose</CODE> for this function.<TR>
<TD>--><TD>ccbRefNum<TD>Integer<TD>The CCB reference number.<TR>
<TD>--><TD>abort<TD>Byte<TD>A value specifying to abort send requests <BR>if not 0.</TABLE>
</B><P>
<DL>
<H5>Field Description</H5>
<DT><CODE>csCode</CODE>
<DD> The routine selector, always equal to <CODE>dspClose</CODE> for this routine. 
<DT><CODE>ccbRefNum</CODE>
<DD> The connection control block (CCB) reference number that was returned by the <CODE>dspNewCID</CODE> routine for the connection end that <BR>you want to close.
<DT><CODE>abort</CODE>
<DD> A value that specifies whether or not to send all of the data in the send queue and all outstanding messages before closing the connection end. If the abort parameter is nonzero, ADSP cancels any outstanding requests to send data packets (such as the <CODE>dspAttention</CODE> routine) and discards all data in the send queue. <BR>If the abort parameter is 0, ADSP does not close the connection <BR>end until all of the data in the send queue and all outstanding attention messages have been sent and acknowledged.
</DL>
<A NAME=HEADING129-6></A>
<H5>DESCRIPTION</H5>
 The <CODE>dspClose</CODE> routine closes the connection end. The connection end is still established; that is, ADSP retains ownership of the CCB, send queue, receive queue, and attention-<BR>message buffer. You can continue to read bytes from the receive queue after you have called the <CODE>dspClose</CODE> routine. Use the <CODE>dspRemove</CODE> routine instead of the <CODE>dspClose</CODE> routine if you are finished with reading bytes from the receive queue and want to release the memory associated with the connection end. <P>
<A NAME=HEADING129-8></A>
<H5><A NAME=MARKER-9-163></A>SPECIAL CONSIDERATIONS</H5>
 The <CODE>dspClose</CODE> routine does not return an error if you call it for a connection end that is already closed.<P>
<A NAME=HEADING129-10></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 To execute the <CODE>dspClose</CODE> routine from assembly language, call the <CODE>_Control</CODE> trap macro with a value of <CODE>dspClose</CODE> in the <CODE>csCode</CODE> field of the parameter block. <P>
<A NAME=HEADING129-12></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>errRefNum<TD>-1280<TD>Bad connection reference number</TABLE>
</H5>
<A NAME=HEADING129-13></A>
<H5>SEE ALSO</H5>
 For information on <A NAME=MARKER-2-373></A>how to remove a connection end and release the memory associated with <A NAME=MARKER-2-374></A>it, see the description of the <CODE>dspRemove</CODE> routine that follows.<A NAME=MARKER-2-375></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Networking-128.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Networking-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Networking-304.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt= "Book Index"></A> <A HREF="Networking-130.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Networking-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

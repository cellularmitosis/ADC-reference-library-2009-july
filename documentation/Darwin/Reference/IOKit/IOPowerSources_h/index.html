<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=HTML">
<title>IOPowerSources.h</title>
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../reference/HardwareDrivers/index.html#//apple_ref/doc/uid/TP30001281-TP40003576" target="_top">Hardware & Drivers</a> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/iokit_fw" target="_top">I/O Kit Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOPowerSources.h">IOPowerSources.h</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Include Path:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><p>&lt;IOKit/ps&gt;</p></div></div></td>
</tr>
<tr>
<td scope="row"><b>Path:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><p>/System/Library/Frameworks/IOKit.framework/Versions/A/Headers/ps/IOPowerSources.h</p></div></div></td>
</tr>
<tr>
<td scope="row"><b>See Also:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><dl>
<dt>
<a href="../IOPSKeys_h/index.html#//apple_ref/doc/header/IOPSKeys.h" target="_top"><p>IOPSKeys</p></a>
</dt>
<dd></dd>
</dl></div></div></td>
</tr>
<tr>
<td scope="row"><b>Includes:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<!-- a -->&lt;sys/cdefs.h&gt;<!-- /a -->
</div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<!-- begin discussion --><p>This header provides uniform access to the state of power sources attached to the system.
You can receive a change notification when any power source data changes.
"Power sources" currently include batteries and UPS devices.
</p>
<p>The header follows CF semantics in that it is the caller's responsibility to CFRelease() anything
returned by a "Copy" function, and the caller should not CFRelease() anything returned by a "Get" function.
</p>
<!-- end discussion -->
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/c/func/IOPSCopyPowerSourcesInfo" target="_top">IOPSCopyPowerSourcesInfo</a></tt></dt>
<dd><p>Returns a blob of Power Source information in an opaque CFTypeRef. 
</p></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/IOPSCopyPowerSourcesList" target="_top">IOPSCopyPowerSourcesList</a></tt></dt>
<dd><p>Returns a CFArray of Power Source handles, each of type CFTypeRef.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/IOPSGetPowerSourceDescription" target="_top">IOPSGetPowerSourceDescription</a></tt></dt>
<dd><p>Returns a CFDictionary with readable information about the specific power source.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/c/func/IOPSNotificationCreateRunLoopSource" target="_top">IOPSNotificationCreateRunLoopSource</a></tt></dt>
<dd><p>Returns a CFRunLoopSourceRef that notifies the caller when power source
information changes.
</p></dd>
</dl>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/IOPSCopyPowerSourcesInfo;  indexgroup=Power Sources ;   name=IOPSCopyPowerSourcesInfo --><a name="//apple_ref/c/func/IOPSCopyPowerSourcesInfo"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="IOPSCopyPowerSourcesInfo">IOPSCopyPowerSourcesInfo</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns a blob of Power Source information in an opaque CFTypeRef. 
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/c/tdef/CFTypeRef" target="_top" class="type"><span class="type">CFTypeRef</span></a> <a href="index.html#//apple_ref/c/func/IOPSCopyPowerSourcesInfo" target="_top" class="function"><span class="function">IOPSCopyPowerSourcesInfo</span></a>(
    <span class="param">void</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->NULL if errors were encountered, a CFTypeRef otherwise.
Caller must CFRelease() the return value when done accessing it.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>Clients should not directly access data in the returned CFTypeRef - 
they should use the accessor functions IOPSCopyPowerSourcesList and 
IOPSGetPowerSourceDescription, instead.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/IOPSCopyPowerSourcesList;  indexgroup=Power Sources ;   name=IOPSCopyPowerSourcesList --><a name="//apple_ref/c/func/IOPSCopyPowerSourcesList"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="IOPSCopyPowerSourcesList">IOPSCopyPowerSourcesList</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns a CFArray of Power Source handles, each of type CFTypeRef.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../CoreFoundation/Reference/CFArrayRef/Reference/reference.html#//apple_ref/c/tdef/CFArrayRef" target="_top" class="type"><span class="type">CFArrayRef</span></a> <a href="index.html#//apple_ref/c/func/IOPSCopyPowerSourcesList" target="_top" class="function"><span class="function">IOPSCopyPowerSourcesList</span></a>(
    <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/c/tdef/CFTypeRef" target="_top" class="type"><span class="type">CFTypeRef</span></a> <span class="param">blob</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>blob</code></dt>
<dd><p>Takes the CFTypeRef returned by IOPSCopyPowerSourcesInfo()</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns NULL if errors were encountered, otherwise a CFArray of CFTypeRefs.
Caller must CFRelease() the returned CFArrayRef.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>The caller shouldn't directly access the CFTypeRefs, but should use
IOPSGetPowerSourceDescription on each member of the CFArrayRef.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/IOPSGetPowerSourceDescription;  indexgroup=Power Sources ;   name=IOPSGetPowerSourceDescription --><a name="//apple_ref/c/func/IOPSGetPowerSourceDescription"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="IOPSGetPowerSourceDescription">IOPSGetPowerSourceDescription</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns a CFDictionary with readable information about the specific power source.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../CoreFoundation/Reference/CFDictionaryRef/Reference/reference.html#//apple_ref/c/tdef/CFDictionaryRef" target="_top" class="type"><span class="type">CFDictionaryRef</span></a> <a href="index.html#//apple_ref/c/func/IOPSGetPowerSourceDescription" target="_top" class="function"><span class="function">IOPSGetPowerSourceDescription</span></a>(
    <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/c/tdef/CFTypeRef" target="_top" class="type"><span class="type">CFTypeRef</span></a> <span class="param">blob</span>,
    <a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/c/tdef/CFTypeRef" target="_top" class="type"><span class="type">CFTypeRef</span></a> <span class="param">ps</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>blob</code></dt>
<dd><p>The CFTypeRef returned by IOPSCopyPowerSourcesInfo()</p></dd>
<dt><code>ps</code></dt>
<dd><p>One of the CFTypeRefs in the CFArray returned by IOPSCopyPowerSourcesList()</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns NULL if an error was encountered, otherwise a CFDictionary. Caller should 
NOT release the returned CFDictionary - it will be released as part of the CFTypeRef returned by
IOPSCopyPowerSourcesInfo().

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>See the C-strings defined in IOPSKeys.h for specific keys into the dictionary.
Don't expect all keys to be present in any dictionary. Some power sources, for example,
may not support the "Time Remaining To Empty" key and it will not be present in their dictionaries.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=func;  uid=//apple_ref/c/func/IOPSNotificationCreateRunLoopSource;  indexgroup=Power Sources ;   name=IOPSNotificationCreateRunLoopSource --><a name="//apple_ref/c/func/IOPSNotificationCreateRunLoopSource"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="IOPSNotificationCreateRunLoopSource">IOPSNotificationCreateRunLoopSource</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Returns a CFRunLoopSourceRef that notifies the caller when power source
information changes.
<!-- end abstract --></p>
<p></p>
<pre><a href="../../../../CoreFoundation/Reference/CFRunLoopSourceRef/Reference/reference.html#//apple_ref/c/tdef/CFRunLoopSourceRef" target="_top" class="type"><span class="type">CFRunLoopSourceRef</span></a> <a href="index.html#//apple_ref/c/func/IOPSNotificationCreateRunLoopSource" target="_top" class="function"><span class="function">IOPSNotificationCreateRunLoopSource</span></a>(
    <span class="param">IOPowerSourceCallbackType</span>,
    <a href="../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span>);  </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>callback</code></dt>
<dd><p>A function to be called whenever any power source is added, removed, or changes.</p></dd>
<dt><code>context</code></dt>
<dd><p>Any user-defined pointer, passed to the IOPowerSource callback.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Returns NULL if an error was encountered, otherwise a CFRunLoopSource. Caller must
release the CFRunLoopSource.

<!-- end return value --></p>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/IOKit/IOPowerSources_h/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/IOKit/IOPowerSources_h/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/IOKit/IOPowerSources_h/index.html%3Fid%3DTP30000815-5.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&nbsp;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2009-02-23
</div>
<!-- headerDoc=Header;  uid=//apple_ref/doc/header/IOPowerSources.h;  indexgroup=Power Sources ;   name=IOPowerSources.h --><a name="//apple_ref/doc/header/IOPowerSources.h"></a>
</body>
</html>

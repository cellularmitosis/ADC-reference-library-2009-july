<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Property List Programming Guide: Quick Start for Property Lists</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Quick Start for Property Lists"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/10000048i-CH4" title="Quick Start for Property Lists"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DataManagement-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000445" target="_top">Data Management</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/10000048-CJBGDEGD">Property List Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../AboutPropertyLists/AboutPropertyLists.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/10000048i-CH4-SW5" title="Quick Start for Property Lists"></a><h1>Quick Start for Property Lists</h1><p>This mini-tutorial gives you a quick, practical introduction to property lists. You start by specifying a short property list in XML. Then you design an application that, when it launches, reads and converts the elements of the XML property list into their object equivalents and stores these objects in instance variables. The application displays these object values in the user interface and allows you to change them. When you quit the application, it writes out the modified property list as XML. When you relaunch the application, the new values are displayed.</p>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW8">Create the XML Property List</a>
				
			<br/>
			
        
			
			
				<a href="QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW9">Define Storage for the Property-List Objects</a>
				
			<br/>
			
        
			
			
				<a href="QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW10">Create the User Interface</a>
				
			<br/>
			
        
			
			
				<a href="QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW6">Read in the Property List</a>
				
			<br/>
			
        
			
			
				<a href="QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW7">Write Out the Property List</a>
				
			<br/>
			
        
			
			
				<a href="QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW11">Run and Test the Application</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/10000048i-CH4-SW8" title="Create the XML Property List"></a><h2>Create the XML Property List</h2><p>In Xcode, create a simple Cocoa application project—call it PropertyListExample. Then select the Resources folder of the project and choose New File from the File menu. In the “Other” template category, select the Property List template and click Next. Name the file “Data.plist”.</p><p>Double-click the Data.plist file in Xcode (you’ll find it in the Resources folder). Xcode displays an empty property list in a special editor. Edit the property list so that it looks like the following example:</p><br/><div><img src = "../Art/xcode_plist_editor.jpg" alt = "Xcode property list editor" ></div><br/><p>You can also edit the property list in a text editor such as TextEdit or BBEdit. When you’re finished, it should look like the following XML code.</p><a name="//apple_ref/doc/uid/10000048i-CH4-SW1"></a><div class="codesample"><table><tr><td scope="row"><pre>&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
&lt;plist version="1.0">
&lt;dict>
    &lt;key>Name&lt;/key>
    &lt;string>John Doe&lt;/string>
    &lt;key>Phones&lt;/key>
    &lt;array>
        &lt;string>408-974-0000&lt;/string>
        &lt;string>503-333-5555&lt;/string>
    &lt;/array>
&lt;/dict>
&lt;/plist><span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/10000048i-CH4-SW9" title="Define Storage for the Property-List Objects"></a><h2>Define Storage for the Property-List Objects</h2><p>In this step, you’ll add a coordinating controller class to the project and declare properties to hold the property-list objects defined in <code>Data.plist</code>. (Note the distinction here between declared <em>property</em> and <em>property</em>-list object.)</p><p>In Xcode, select the Classes folder and choose New File from the File menu. Select the Objective-C Class template and name the files “Controller.h” and “Controller.m”. Make the following declarations in <code>Controller.h</code>.</p><div class="codesample"><table><tr><td scope="row"><pre>#import &lt;Cocoa/Cocoa.h><span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@interface Controller : NSObject {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *personName;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSMutableArray *phoneNumbers;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@property (copy, nonatomic) NSString *personName;<span></span></pre></td></tr><tr><td scope="row"><pre>@property (retain, nonatomic) NSMutableArray *phoneNumbers;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>In <code>Controller.m</code>, have the compiler synthesize accessor methods for these properties:</p><div class="codesample"><table><tr><td scope="row"><pre>@implementation Controller<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@synthesize personName;<span></span></pre></td></tr><tr><td scope="row"><pre>@synthesize phoneNumbers;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><a name="//apple_ref/doc/uid/10000048i-CH4-SW10" title="Create the User Interface"></a><h2>Create the User Interface</h2><p>Double-click the project’s nib file to open it in Interface Builder. Create a simple user interface similar to the following:</p><br/><div><img src = "../Art/plist_quickstart_ui.jpg" alt = "User interface for tutorial application" ></div><br/><div class="notebox"><a name="//apple_ref/doc/uid/10000048i-CH4-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;This mini-tutorial shows user-interface techniques and programming interfaces that are specific to Mac OS X. If you want to use an iPhone OS application for this example, you must use techniques and API that are appropriate to that platform.</p></div><p>The table view should have a single column that is editable. </p><p>For reasons of simplicity and efficiency, you’ll next bind the text field to the <code>personName</code> property. But your Controller object will act as a data source for the table. Let’s start with the text field.</p><ol class="ol"><li class="li"><p>Drag an generic Object proxy from the Library into the nib document window. Select it and, in the Identify pane of the inspector, type or select “Controller” for its class identity.</p></li><li class="li"><p>Drag an Object Controller object from the Library into the nib document window. Control-drag (or right-click-drag) a line from Object Controller to Controller and, in the connection window that pops up, select “content”.</p></li><li class="li"><p>Select the editable text field and, in the Bindings pane of the inspector, bind the value attribute of the text field according to the following:</p><ul class="ul"><li class="li"><p>Bind to: Object Controller</p></li><li class="li"><p>Controller Key: selection</p></li><li class="li"><p>Model Key Path: personName</p></li></ul></li></ol><p>Next, Control-drag a line from File’s Owner in the nib document window (File’s Owner in this case represents the global <code><a href="../../../Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/cl/NSApplication" target="_top">NSApplication</a></code> object) to the Controller object and then select <code>delegate</code> in the connection window. As you’ll see, the application delegate (Controller) plays a role in saving the property list to its XML representation.</p><p>For the table view, Control-drag a line from the table view to the Controller object in the nib document window. Select the <code>dataSource</code> outlet in the connection window. Save the nib file. Copy the code in <span class="content_text">Listing 1-1</span> to <code>Controller.m</code>. </p><a name="//apple_ref/doc/uid/10000048i-CH4-SW2" title="Listing 1-1Implementation code for table view&acirc;&#128;&#153;s data source"></a><p class="codesample"><strong>Listing 1-1&nbsp;&nbsp;</strong>Implementation code for table view’s data source</p><div class="codesample"><table><tr><td scope="row"><pre> - (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {<span></span></pre></td></tr><tr><td scope="row"><pre>    return self.phoneNumbers.count;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre> - (id)tableView:(NSTableView *)tableView<span></span></pre></td></tr><tr><td scope="row"><pre>         objectValueForTableColumn:(NSTableColumn *)tableColumn<span></span></pre></td></tr><tr><td scope="row"><pre>         row:(NSInteger)row {<span></span></pre></td></tr><tr><td scope="row"><pre>    return [phoneNumbers objectAtIndex:row];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object<span></span></pre></td></tr><tr><td scope="row"><pre>         forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {<span></span></pre></td></tr><tr><td scope="row"><pre>    [phoneNumbers replaceObjectsAtIndexes:[NSIndexSet indexSetWithIndex:row]<span></span></pre></td></tr><tr><td scope="row"><pre>                  withObjects:[NSArray arrayWithObject:object]];<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Note that the last method synchronizes changes to items in the table view with the <code>phoneNumbers</code> mutable array that backs it.</p><a name="//apple_ref/doc/uid/10000048i-CH4-SW6" title="Read in the Property List"></a><h2>Read in the Property List</h2><p>Now that the necessary user-interface tasks are completed, we can focus on code that is specific to property lists. In its <code>init</code> method, the Controller object reads in the XML property list from the application bundle and converts its elements into the corresponding property-list objects. <span class="content_text">Listing 1-2</span> shows how it does this.</p><a name="//apple_ref/doc/uid/10000048i-CH4-SW3" title="Listing 1-2Reading in and converting the XML property list"></a><p class="codesample"><strong>Listing 1-2&nbsp;&nbsp;</strong>Reading in and converting the XML property list</p><div class="codesample"><table><tr><td scope="row"><pre>- (id) init {<span></span></pre></td></tr><tr><td scope="row"><pre>    if (self = [super init]) {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSString *errorDesc = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>        NSPropertyListFormat format;<span></span></pre></td></tr><tr><td scope="row"><pre>        NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];<span></span></pre></td></tr><tr><td scope="row"><pre>        NSData *plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];<span></span></pre></td></tr><tr><td scope="row"><pre>        NSDictionary *temp = (NSDictionary *)[NSPropertyListSerialization<span></span></pre></td></tr><tr><td scope="row"><pre>            propertyListFromData:plistXML<span></span></pre></td></tr><tr><td scope="row"><pre>            mutabilityOption:NSPropertyListMutableContainersAndLeaves<span></span></pre></td></tr><tr><td scope="row"><pre>            format:&amp;format errorDescription:&amp;errorDesc];<span></span></pre></td></tr><tr><td scope="row"><pre>        if (!temp) {<span></span></pre></td></tr><tr><td scope="row"><pre>            NSLog(errorDesc);<span></span></pre></td></tr><tr><td scope="row"><pre>            [errorDesc release];<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>        self.personName = [temp objectForKey:@"Name"];<span></span></pre></td></tr><tr><td scope="row"><pre>        self.phoneNumbers = [NSMutableArray arrayWithArray:[temp objectForKey:@"Phones"]];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return self;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>This code first gets the file-system path to the file containing the XML property list (<code>Data.plist</code>) in the application bundle and then uses the <code>NSFileManager</code> method <code><a href="../../../Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/contentsAtPath:" target="_top">contentsAtPath:</a></code> to read it into memory as an <code><a href="../../../Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/cl/NSData" target="_top">NSData</a></code> object. Then it calls the <code>NSPropertyListSerialization</code> class method <code><a href="../../../Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html#//apple_ref/occ/clm/NSPropertyListSerialization/propertyListFromData:mutabilityOption:format:errorDescription:" target="_top">propertyListFromData:mutabilityOption:format:errorDescription:</a></code> to convert the static property list into the corresponding property-list objects—specifically, a dictionary containing a string and an array of strings. It assigns the string and the array of strings to the appropriate properties of the Controller object.</p><a name="//apple_ref/doc/uid/10000048i-CH4-SW7" title="Write Out the Property List"></a><h2>Write Out the Property List</h2><p>When the user quits the application, you want to save the current values of the <code>personName</code> and <code>phoneNumbers</code> properties in a dictionary object, convert those property-list objects to a static XML representation, and then write that XML data to the application bundle. The <code><a href="../../../Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/applicationShouldTerminate:" target="_top">applicationShouldTerminate:</a></code> delegation method of <code>NSApplication</code> is the appropriate place to write the code shown in <span class="content_text">Listing 1-3</span>.</p><a name="//apple_ref/doc/uid/10000048i-CH4-SW4" title="Listing 1-3Converting and writing the property list to the application bundle "></a><p class="codesample"><strong>Listing 1-3&nbsp;&nbsp;</strong>Converting and writing the property list to the application bundle </p><div class="codesample"><table><tr><td scope="row"><pre>- (NSApplicationTerminateReply)applicationShouldTerminate:(NSApplication *)sender {<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *errorDesc;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *bundlePath = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSDictionary *plistDict = [NSDictionary dictionaryWithObjects:<span></span></pre></td></tr><tr><td scope="row"><pre>            [NSArray arrayWithObjects: personName, phoneNumbers, nil]<span></span></pre></td></tr><tr><td scope="row"><pre>            forKeys:[NSArray arrayWithObjects: @"Name", @"Phones", nil]];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict<span></span></pre></td></tr><tr><td scope="row"><pre>            format:NSPropertyListXMLFormat_v1_0<span></span></pre></td></tr><tr><td scope="row"><pre>            errorDescription:&amp;errorDesc];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (plistData) {<span></span></pre></td></tr><tr><td scope="row"><pre>        [plistData writeToFile:bundlePath atomically:YES];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    else {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(errorDesc);<span></span></pre></td></tr><tr><td scope="row"><pre>        [errorDesc release];<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    return NSTerminateNow;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>This code creates an <code><a href="../../../Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDictionary" target="_top">NSDictionary</a></code> object containing the values of the <code>personName</code> and <code>phoneNumbers</code> properties and associates these with the keys “Name” and “Phones”. Then, using the <code><a href="../../../Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html#//apple_ref/occ/clm/NSPropertyListSerialization/dataFromPropertyList:format:errorDescription:" target="_top">dataFromPropertyList:format:errorDescription:</a></code> class method of <code><a href="../../../Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html#//apple_ref/occ/cl/NSPropertyListSerialization" target="_top">NSPropertyListSerialization</a></code>, it converts this top-level dictionary and the other property-list objects it contains into XML data. Finally, it writes the XML data to <code>Data.plist</code> in the application bundle. </p><a name="//apple_ref/doc/uid/10000048i-CH4-SW11" title="Run and Test the Application"></a><h2>Run and Test the Application</h2><p>Build and and run the application. The window appears with the name and phone numbers you specified in the XML property list. Modify the name and a phone number and quit the application. Find the application bundle in the Finder, open it, and look at the <code>Data.plist</code> file in a text editor. You’ll see that the changes you made in the user interface are reflected in the XML property list. If you launch the application again, it displays the changed values.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Introduction/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../AboutPropertyLists/AboutPropertyLists.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-11-19<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/PropertyLists/QuickStartPlist/QuickStartPlist.html%3Fid%3D10000048i-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/PropertyLists/QuickStartPlist/QuickStartPlist.html%3Fid%3D10000048i-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/PropertyLists/QuickStartPlist/QuickStartPlist.html%3Fid%3D10000048i-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
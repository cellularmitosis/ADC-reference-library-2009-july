<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>SUpdateSRT(IM: D)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING87></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->




<!-- Main Body -->

<CENTER>
<P>
<A HREF="Devices-86.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-88.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Devices-2.html"><B>Devices</B></A> / <BR><DD><A HREF="Devices-53.html"><B>Chapter 2 - Slot Manager</B></A> / <A HREF="Devices-57.html"><B>Slot Manager Reference</B></A><BR><DL><DD><A HREF="Devices-65.html"><B>Slot Manager Routines</B></A> / <A HREF="Devices-83.html"><B>Enabling, Disabling, Deleting, and Restoring sResources</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING87-0></A>
<H3>SUpdateSRT</H3>
 <A NAME=MARKER-11-357></A><A NAME=MARKER-2-358></A>For system software versions earlier than System 7, you can use the <CODE>SUpdateSRT</CODE> function to update the slot resource table record for an existing sResource. A new record will be added if the sResource does not already exist in the slot resource table.<P>
<PRE>
FUNCTION SUpdateSRT (spBlkPtr: SpBlockPtr): OSErr;
</PRE>
<DL>
<DT>spBlkPtr
<DD> A pointer to a Slot Manager parameter block.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD><symbol>--><EM></EM><TD><CODE>spIOReserved</CODE><TD>Integer<TD>The value to be stored in the <CODE>IOReserved</CODE> field of the slot resource table.<TR>
<TD><symbol>--><EM></EM><TD><CODE>spRefNum</CODE><TD>Integer<TD>The device driver reference number.<TR>
<TD><symbol>--><EM></EM><TD><CODE>spSlot</CODE><TD>SignedByte<TD>The slot number.<TR>
<TD><symbol>--><EM></EM><TD><CODE>spId</CODE><TD>SignedByte<TD>The sResource ID.<TR>
<TD><symbol>--><EM></EM><TD><CODE>spExtDev</CODE><TD>SignedByte<TD>The external device identifier.</TABLE>
</B><P>
<A NAME=HEADING87-5></A>
<H5>DESCRIPTION</H5>
 The <CODE>SUpdateSRT</CODE> function adds or updates an record in the slot resource table. You specify an sResource with the <CODE>spSlot</CODE>, <CODE>spID</CODE>, and <CODE>spExtDev</CODE> fields of the Slot Manager parameter block you point to in the spBlkPtr parameter. If a matching record is found in the slot resource table, the <CODE>RefNum</CODE> and <CODE>IOReserved</CODE> fields of the table are updated. If the record is not found, the sResource is added to the table by reading the appropriate declaration ROM. Updates may be made to enabled sResources only.<P>
<A NAME=HEADING87-7></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 In System 7, this function was replaced by the <CODE>InsertSRTRec</CODE> function (described on <A HREF=Devices-86.html#MARKER-9-349>page 2-54</A>). You should use the <CODE>SUpdateSRT</CODE> function only if version 1 or later of the Slot Manager is not available. You can use the <CODE>SVersion</CODE> function, described on <A HREF=Devices-67.html#MARKER-9-273>page 2-30</A>, to determine whether the Slot Manager is version 1 or later.<P>
<A NAME=HEADING87-9></A>
<H5>ASSEMBLY-LANGUAGE INFORMATION</H5>
 The trap macro and routine selector for the <CODE>SUpdateSRT</CODE> function are
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT>Trap macro<TH>Selector<TR>
<TD>_SlotManager<TD>$002B</TABLE>
<P>
 You must set up register D0 with the routine selector and register A0 with the address of the Slot Manager parameter block. When <CODE>_SlotManager</CODE> returns, register D0 contains the result code.
<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT colspan=2>Registers on entry<TR>
<TD>A0<TD>Address of the parameter block<TR>
<TD>D0<TD>$002B</TABLE>

<TABLE BORDER="0" CELLPADDING=3><TH ALIGN=LEFT colspan=2>Registers on exit<TR>
<TD>D0<TD>Result code</TABLE>
<P>
<A NAME=HEADING87-12></A>
<H5>RESULT CODES
<TABLE BORDER="0" CELLPADDING=3><TD>noErr<TD>0<TD>No error<TR>
<TD>memFullErr<TD>-108<TD>Not enough room in heap<TR>
<TD><CODE>smEmptySlot</CODE><TD>-300<TD>No card in this slot<TR>
<TD>smUnExBusErr<TD>-308<TD>Bus error<TR>
<TD>smBadRefId<TD>-330<TD>Reference ID not found in list<TR>
<TD>smSlotOOBErr<TD>-337<TD>Slot number out of bounds<TR>
<TD>smNoMoresRsrcs<TD>-344<TD>Specified sResource not found</TABLE>
</H5>
<A NAME=HEADING87-13></A>
<H5>SEE ALSO</H5>
 For more information about the slot resource table, see <A HREF=Devices-55.html#MARKER-9-106>"About the Slot Manager" on page 2-15</A>. <A NAME=MARKER-2-359></A><P>
 For information about the preferred routine for adding an sResource to the slot resource table, see the <CODE>InsertSRTRec</CODE> function, described on <A HREF=Devices-86.html#MARKER-9-349>page 2-54</A>. For information about deleting an sResource from the slot resource table, see the <CODE>SDeleteSRTRec</CODE> function, described on <A HREF=Devices-85.html#MARKER-9-343>page 2-52</A>.<A NAME=MARKER-2-360></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Devices-86.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Devices-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Devices-328.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Devices-88.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Devices-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>
<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->
</BODY>
</HTML>  

<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>ConnectionInitializationRoutine (IM: PS)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING62></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="PPCSoftware-61.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCSoftware-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCSoftware-86.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCSoftware-63.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="PPCSoftware-2.html"><B>PowerPC System Software</B></A> / <BR><DD><A HREF="PPCSoftware-40.html"><B>Chapter 3 - Code Fragment Manager</B></A> / <A HREF="PPCSoftware-43.html"><B>Code Fragment Manager Reference</B></A><BR><DL><DD><A HREF="PPCSoftware-61.html"><B>Fragment-Defined Routines</B></A> / <A HREF="PPCSoftware-57.html"><B></B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING62-0></A>
<H3>ConnectionInitializationRoutine</H3>
 <A NAME=MARKER-2-162></A>You can define a fragment initialization routine that is executed by the Code Fragment Manager when the fragment is first loaded into memory and prepared for execution. An initialization routine has the following type definition:<P>
<PRE>
typedef OSErr ConnectionInitializationRoutine 
                                       (InitBlockPtr initBlkPtr);
</PRE>
<DL>
<DT>initBlkPtr
<DD> A pointer to a fragment initialization block specifying information about the fragment.
</DL>
<B>
<TABLE BORDER="0" CELLPADDING=3><TD><EM>--></EM><TD>contextID<TD>long<TD>A context ID.<TR>
<TD><EM>--></EM><TD>closureID<TD>long<TD>A closure ID.<TR>
<TD><EM>--></EM><TD>connectionID<TD>long<TD>A connection ID.<TR>
<TD><EM>--></EM><TD>fragLocator<TD>FragmentLocator<TD>A fragment location block.<TR>
<TD><EM>--></EM><TD>libName<TD>Ptr<TD>A pointer to fragment's name.<TR>
<TD><EM>--></EM><TD>reserved4a<TD>long<TD>Reserved.<TR>
<TD><EM>--></EM><TD>reserved4b<TD>long<TD>Reserved.<TR>
<TD><EM>--></EM><TD>reserved4c<TD>long<TD>Reserved.<TR>
<TD><EM>--></EM><TD>reserved4d<TD>long<TD>Reserved.</TABLE>
</B><P>
<A NAME=HEADING62-5></A>
<H5>DESCRIPTION</H5>
 A fragment's initialization routine is executed immediately after the fragment has been loaded into memory (if necessary) and prepared for execution, and immediately before the fragment's main routine (if it has one) is executed. The initialization routine is passed a pointer to an initialization block, which contains information about the fragment, such as its location and connection ID. See <A HREF=PPCSoftware-45.html#MARKER-9-90>"Fragment Initialization Block" on page 3-15</A> for a description of the fields of the initialization block.<A NAME=MARKER-2-163></A><P>
 You can use the initialization routine to perform any tasks that need to be performed before any of the code or data in the fragment is accessed. For example, you might want to open the fragment's resource fork (if it has one). You can determine the location of the fragment's container from the <CODE>FragmentLocator</CODE> field of the fragment initialization block whose address is passed to your initialization routine.<P>
<A NAME=HEADING62-8></A>
<H5>RESULT CODES</H5>
 Your initialization routine should return <CODE>noErr</CODE> if it executes successfully, and some other result code if it does not. If your initialization routine returns any result code other than <CODE>noErr</CODE>, the entire load fails and the error <CODE>fragUserInitProcErr</CODE> is returned to the code that requested the root load.<A NAME=MARKER-2-164></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="PPCSoftware-61.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="PPCSoftware-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="PPCSoftware-86.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="PPCSoftware-63.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="PPCSoftware-3.html">&copy; Apple Computer, Inc.</A><br>3 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

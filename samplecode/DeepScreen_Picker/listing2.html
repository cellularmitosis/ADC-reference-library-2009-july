<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>DeepScreen Picker - /DeepScreen Picker.p</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; <A HREF="javascript:location.replace('index.html');">DeepScreen Picker</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/index.html" target="_blank">Reference Library > Graphics & Imaging</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">DeepScreen Picker</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/DeepScreen Picker.p</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/About DeepScreen Picker.txt</option>
<option value="listing2.html">/DeepScreen Picker.p</option>
<option value="listing3.html">/DeepScreen Picker.r</option></select>
				</p>
				</form>
				<p><strong><a href="DeepScreen_Picker.zip">Download Sample</a></strong> (&#147;DeepScreen_Picker.zip&#148;, 6.6K)<BR>
<strong><a href="DeepScreen_Picker.dmg">Download Sample</a></strong> (&#147;DeepScreen_Picker.dmg&#148;, 64.0K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">{------------------------------------------------------------------------------##  Macintosh Developer Technical Support##  DeepScreen Picker Sample Application##  DeepScreen Picker   -   Make file name.#  DeepScreen Picker.p  -  MPW 3.2 Pascal Source#  DeepScreen Picker.r  -  MPW 3.2 Rez Source##  Purpose:##  This is a very simple sample program that demonstrates how to force the #  Color Picker dialog onto the deepest device available.  It does nothing#  more than save the current GDevice, find the deepest GDevice, make it#  current and activate (and center) the Color Picker dialog.  It's not a#  *real* app by a long shot.##  Dave Hersey, MacDTS, 3/21/91#------------------------------------------------------------------------------}Program DeepScreen;USES  QuickDraw, ToolIntf, Picker, Packages;CONST  cpDLOG  = -5760;  (* The resource number of the Color Picker Dialog. *)    { Initialize everything for the program, make sure we can run. }Procedure Initialize;VAR  err      : OSErr;  theWorld  : SysEnvRec;  BEGIN{  Test the computer to be sure we can do color.  If not we would crash,  which would be bad.  If we can't run, just beep and exit. }  err := SysEnvirons(1, theWorld);  IF NOT (theWorld.hasColorQD) THEN  BEGIN    SysBeep(3);    ExitToShell;  END;  {  Initialize all the needed managers. }  InitGraf(@thePort);  InitFonts;  InitWindows;  InitMenus;  TEInit;  InitDialogs(NIL);  InitCursor;END;  { Initialize }{  Display the Color Picker dialog on the deepest device.  Note that this  procedure does not distinguish between color and grayscale devices, it  only returns the deepest device it finds.  If that makes a difference,  or if the color device should win if we have a tie for deepest GDevice,  you will need to alter the code.  In this case, you should call  GetDeviceList then look at each device in the list rather than call  GetMaxDevice.  You can check for color capability by looking at the  gdDevType bit of gdFlags with TestDeviceAttribute.  If this bit is set,  color is supported.  You can use that and the pixelSize of the GDevice's  gdPMap to make your own GDevice selection.}Procedure DeepPick;VAR  deepGDH          : GDHandle;  inColor, outColor    : RGBColor;  where          : Point;  cpWidth, cpHeight    : Integer;  scWidth, scHeight    : Integer;  deepRect        : Rect;  cPickDLOG        : DialogTHndl;  bounds          : Rect;  BEGIN{  Find the bounds of the deepest device.  Passing the maximum enclosing  rectangle to GetMaxDevice assures that we find the deepest device  available. }  SetRect(bounds, -32767, -32767, 32767, 32767);  deepGDH := GetMaxDevice(bounds);  deepRect := deepGDH^^.gdRect;{  If the device we found is the main GDevice, its top-left corner will be at  (0, 0).  Passing this value to GetColor will neatly place the Color Picker  dialog on the screen.  If the top-left corner is not (0, 0), the deepest  screen is not the main GDevice.  In this case, we'll have to calculate the  dialog's position ourselves. }  IF (deepGDH &lt;&gt; GetMainDevice) THEN  BEGIN{  Not the main GDevice.  Load the Color Picker dialog's resource so we can  get its dimensions.  Do the calculations necessary to center the dialog  horizontally and align it so that 1/3 of the remaining vertical whitespace  is above the dialog.  This will position the dialog the way the Color  Picker would have if this were the main GDevice and we set 'where' to  (0, 0).  When done, release the resource. }    cPickDLOG := DialogTHndl (GetResource('DLOG', cpDLOG));    IF (cPickDLOG &lt;&gt; nil) THEN    BEGIN      cpWidth := cPickDLOG^^.boundsRect.right - cPickDLOG^^.boundsRect.left;      cpHeight := cPickDLOG^^.boundsRect.bottom - cPickDLOG^^.boundsRect.top;      scWidth := deepRect.right - deepRect.left;      scHeight := deepRect.bottom - deepRect.top;      deepRect.left := deepRect.left + (scWidth - cpWidth) DIV 2;      deepRect.top := deepRect.top + (scHeight - cpHeight) DIV 3;      ReleaseResource(Handle(cPickDLOG));    END;  END;{  Set 'where' to the appropriate value to neatly place the dialog.  For our  initial color selection, I've picked fushia.  When all set, call GetColor. }  SetPt(where, deepRect.left, deepRect.top);    inColor.red := 65535;  inColor.green := 0;  inColor.blue := 65535;  IF GetColor(where, 'Pick a color, any color:', inColor, outColor) THEN    (* whatever. *);END;  { DeepPick }{  Main body of program DeepScreen.  Initialize, then display the Color Picker dialog  on the deepest device. }BEGIN   Initialize;  DeepPick;END.  { DeepScreen Picker }</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/DeepScreen_Picker/listing2.html%3Fid%3DDTS10000081-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/DeepScreen_Picker/listing2.html%3Fid%3DDTS10000081-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/DeepScreen_Picker/listing2.html%3Fid%3DDTS10000081-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
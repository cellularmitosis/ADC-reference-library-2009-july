<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>SFAuthorization Class Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="SFAuthorization Class Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40002009" title="SFAuthorization"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../../../reference/Security/index.html#//apple_ref/doc/uid/TP30001281-TP30000434" target="_top">Security</a> &gt; <a href="../../../../../../../reference/Security/idxAuthorization-date.html#//apple_ref/doc/uid/TP30001281-TP30000434-TP30001024" target="_top">Authorization</a> &gt; <a href="../index.html" target="_top">SFAuthorization Class Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/History.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/occ/cl/SFAuthorization" title="SFAuthorization"></a><a name="//apple_ref/doc/c_ref/SFAuthorization" title="SFAuthorization"></a><a name="//apple_ref/doc/uid/TP40002009-BABDBGDC" title="SFAuthorization"></a><h1>SFAuthorization Class Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span style="white-space: nowrap;">Inherits from</span></strong></td><td><div style="margin-bottom:1px"><a href="../../../../../../Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/cl/NSObject" target="_top">NSObject</a></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Conforms to</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../../../../../Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCoding" target="_top">NSCoding</a></span><br/><span class="content_text"><a href="../../../../../../Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject" target="_top">NSObject (NSObject)</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px">/Library/Frameworks/<a href="../../../../AuthServicesObjCRef/index.html#//apple_ref/doc/uid/TP40001854" target="_top">SecurityFoundation.framework</a></div></td></tr><tr><td scope="row"><strong>Availability</strong></td><td><div style="margin-bottom:1px"><div>Available in Mac OS X v10.3 and later</div></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Companion guide</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../../../../Conceptual/authorization_concepts/index.html#//apple_ref/doc/uid/TP30000995" target="_top">Authorization Services Programming Guide</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">SFAuthorization.h</span><br/></div></td></tr></table></div><br/>




<a name="//apple_ref/doc/uid/TP40002009-4355" title="Overview"></a><h2>Overview</h2>

<p class="spaceabove">The <code>SFAuthorization</code> class allows you to restrict a user’s access to particular features in your Mac OS X application or daemon. </p>
<p>The <code>SFAuthorization</code> class is an Objective-C interface for some of the functions in the Authorization Services API. You can use the <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/authorizationRef">authorizationRef</a></code> method to obtain an authorization reference, used in other calls to Authorization Services functions. The Authorization Services API is documented in <em><a href="../../../../authorization_ref/index.html#//apple_ref/doc/uid/TP30000826" target="_top">Authorization Services C Reference</a></em>.</p>




<a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_1" title="Tasks"></a><h2>Tasks</h2>
<a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_2" title="Allocating and Initializing an Authorization Object"></a>
		<h3 class="tasks">Allocating and Initializing an Authorization Object</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorization">+&#xA0;authorization</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns an authorization object initialized with a default environment, flags, and rights.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorizationWithFlags:rights:environment:">+&#xA0;authorizationWithFlags:rights:environment:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns an authorization object initialized with the specified flags, rights and environment.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/initWithFlags:rights:environment:">&#8211;&#xA0;initWithFlags:rights:environment:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Initializes an authorization object with the specified flags, rights, and environment.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_3" title="Obtaining an Authorization Reference"></a>
		<h3 class="tasks">Obtaining an Authorization Reference</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/authorizationRef">&#8211;&#xA0;authorizationRef</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the authorization reference for this object.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_4" title="Authorizing Rights"></a>
		<h3 class="tasks">Authorizing Rights</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/permitWithRights:flags:environment:authorizedRights">&#8211;&#xA0;permitWithRights:flags:environment:authorizedRights</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Authorizes and preauthorizes rights to access a privileged operation and returns the granted rights. &#032;(<font color="red">Deprecated.</font>&#032;Use <code>obtainWithRights:flags:environment:authorizedRights:error:</code> instead.)'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRights:flags:environment:authorizedRights:error:">&#8211;&#xA0;obtainWithRights:flags:environment:authorizedRights:error:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Authorizes and preauthorizes rights to access a privileged operation and returns the granted rights. '/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/permitWithRight:flags:">&#8211;&#xA0;permitWithRight:flags:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Authorizes and preauthorizes one specific right. &#032;(<font color="red">Deprecated.</font>&#032;Use <code>obtainWithRight:flags:</code> instead.)'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRight:flags:">&#8211;&#xA0;obtainWithRight:flags:</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Authorizes and preauthorizes one specific right. '/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_5" title="Preventing Credentials from Being Shared"></a>
		<h3 class="tasks">Preventing Credentials from Being Shared</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/invalidateCredentials">&#8211;&#xA0;invalidateCredentials</a></code>
                    
                    			
                        <img src="../../../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Prevents any rights that were obtained by this object from being preserved.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_6" title="Class Methods"></a><h2>Class Methods</h2><a name="//apple_ref/occ/clm/SFAuthorization/authorization" title="authorization"></a><a name="//apple_ref/doc/uid/TP40002009-CJBBEDGC" title="authorization"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_9"></a>
<h3 class="verytight">authorization</h3>
<p class="spaceabove">Returns an authorization object initialized with a default environment, flags, and rights.</p><p class="spaceabovemethod">+ (id)authorization</p><h5 class="tight">Return Value</h5><p>The authorization object.</p>

<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.3 and later.</li></ul>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorizationWithFlags:rights:environment:">+&#xA0;authorizationWithFlags:rights:environment:</a></code></li>
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/initWithFlags:rights:environment:">&#8211;&#xA0;initWithFlags:rights:environment:</a></code></li></ul><h5 class="tight">Declared In</h5><code>SFAuthorization.h</code><a name="//apple_ref/occ/clm/SFAuthorization/authorizationWithFlags:rights:environment:" title="authorizationWithFlags:rights:environment:"></a><a name="//apple_ref/doc/uid/TP40002009-CJBIEBEB" title="authorizationWithFlags:rights:environment:"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_10"></a>
<h3 class="verytight">authorizationWithFlags:rights:environment:</h3>
<p class="spaceabove">Returns an authorization object initialized with the specified flags, rights and environment.</p><p class="spaceabovemethod">+ (id)authorizationWithFlags:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationFlags" target="_top">AuthorizationFlags</a>)<em>flags</em> rights:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRights" target="_top">AuthorizationRights</a> *)<em>rights</em> environment:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationEnvironment" target="_top">AuthorizationEnvironment</a> *)<em>environment</em></p>
<h5 class="tight">Parameters</h5><dl class="termdef">

<dt><em>flags</em></dt>
<dd><p>A bit mask for specifying authorization options. Use the following option sets:</p><ul class="termdef"><li class="termdef"><p>Pass the constant <code>kAuthorizationFlagDefaults</code> if no options are necessary.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagExtendRights</code> mask to request rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagPartialRights</code> and <code>kAuthorizationFlagExtendRights</code> masks to request partial rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagPreAuthorize</code> and <code>kAuthorizationFlagExtendRights</code> masks to preauthorize rights.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagDestroyRights</code> mask to prevent the Security framework from preserving the rights obtained during this call.</p></li></ul></dd>
<dt><em>rights</em></dt>
<dd><p>A pointer to a set of authorization rights you create. Pass <code>NULL</code> if the application requires no rights at this time.</p></dd>
<dt><em>environment</em></dt>
<dd><p>Data used when authorizing or preauthorizing rights. In Mac OS X v10.3 and later, you can pass icon or prompt data to be used in the authentication dialog box. Possible values for this parameter are listed in <code>Security.framework/Headers/AuthorizationTags.h</code>. The data passed in this parameter is not stored in the authorization reference; it is used only during authorization. If you are not passing any data in this parameter, pass the constant <code>kAuthorizationEmptyEnvironment</code>.</p></dd></dl><h5 class="tight">Return Value</h5><p>The authorization object.</p>
<h5 class="tight">Discussion</h5><p>Normally, such initialization is not required, as you pass in flags, rights, and environmental data when you request authorization.</p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.3 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorization">+&#xA0;authorization</a></code></li></ul><h5 class="tight">Declared In</h5><code>SFAuthorization.h</code><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_7" title="Instance Methods"></a><h2>Instance Methods</h2><a name="//apple_ref/occ/instm/SFAuthorization/authorizationRef" title="authorizationRef"></a><a name="//apple_ref/doc/uid/TP40002009-CJBBJEIF" title="authorizationRef"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_11"></a><h3 class="verytight">authorizationRef</h3>
<p class="spaceabove">Returns the authorization reference for this object.</p><p class="spaceabovemethod">- (<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRef" target="_top">AuthorizationRef</a>)authorizationRef</p><h5 class="tight">Return Value</h5><p>The authorization reference.</p>
<h5 class="tight">Discussion</h5><p>You can use the authorization reference in calls to Authorization Services functions.</p><p>For additional information see <em><a href="../../../../authorization_ref/index.html#//apple_ref/doc/uid/TP30000826" target="_top">Authorization Services C Reference</a></em>.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.3 and later.</li></ul><h5 class="tight">Declared In</h5><code>SFAuthorization.h</code><a name="//apple_ref/occ/instm/SFAuthorization/initWithFlags:rights:environment:" title="initWithFlags:rights:environment:"></a><a name="//apple_ref/doc/uid/TP40002009-CJBDJBJG" title="initWithFlags:rights:environment:"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_12"></a><h3 class="verytight">initWithFlags:rights:environment:</h3>
<p class="spaceabove">Initializes an authorization object with the specified flags, rights, and environment.</p><p class="spaceabovemethod">- (id)initWithFlags:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationFlags" target="_top">AuthorizationFlags</a>)<em>flags</em> rights:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRights" target="_top">AuthorizationRights</a> *)<em>rights</em> environment:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationEnvironment" target="_top">AuthorizationEnvironment</a> *)<em>environment</em></p>
<h5 class="tight">Parameters</h5><dl class="termdef">

<dt><em>flags</em></dt>
<dd><p>A bit mask for specifying authorization options. Use the following option sets:</p><ul class="termdef"><li class="termdef"><p>Pass the constant <code>kAuthorizationFlagDefaults</code> if no options are necessary.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagExtendRights</code> mask to request rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagPartialRights</code> and <code>kAuthorizationFlagExtendRights</code> masks to request partial rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagPreAuthorize</code> and <code>kAuthorizationFlagExtendRights</code> masks to preauthorize rights.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagDestroyRights</code> mask to prevent the Security framework from preserving the rights obtained during this call.</p></li></ul></dd>
<dt><em>rights</em></dt>
<dd><p>A pointer to a set of authorization rights you create. Pass <code>NULL</code> if the application requires no rights at this time.</p></dd>
<dt><em>environment</em></dt>
<dd><p>Data used when authorizing or preauthorizing rights. In Mac OS X v10.3 and later, you can pass icon or prompt data to be used in the authentication dialog box. Possible values for this parameter are listed in <code>Security/AuthorizationTags.h</code>. If you are not passing any data in this parameter, pass the constant <code>kAuthorizationEmptyEnvironment</code>.</p></dd></dl><h5 class="tight">Return Value</h5><p>The authorization object.</p>
<h5 class="tight">Discussion</h5><p>You can use this method to initialize an authorization object. Normally, such initialization is not required, as you pass in flags, rights, and environmental data when you request authorization.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.3 and later.</li></ul>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorization">+&#xA0;authorization</a></code></li>
<li class="availability">  <code><a href="../../../../../../Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/alloc" target="_top">+alloc</a></code> (NSObject)</li>
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorizationWithFlags:rights:environment:">+&#xA0;authorizationWithFlags:rights:environment:</a></code></li>
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRights:flags:environment:authorizedRights:error:">&#8211;&#xA0;obtainWithRights:flags:environment:authorizedRights:error:</a></code></li></ul><h5 class="tight">Declared In</h5><code>SFAuthorization.h</code><a name="//apple_ref/occ/instm/SFAuthorization/invalidateCredentials" title="invalidateCredentials"></a><a name="//apple_ref/doc/uid/TP40002009-CJBIDIIA" title="invalidateCredentials"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_13"></a><h3 class="verytight">invalidateCredentials</h3>
<p class="spaceabove">Prevents any rights that were obtained by this object from being preserved.</p><p class="spaceabovemethod">- (void)invalidateCredentials</p>
<h5 class="tight">Discussion</h5><p> This method effectively ensures that authorizations are not shared.</p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.3 and later.</li></ul>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRights:flags:environment:authorizedRights:error:">&#8211;&#xA0;obtainWithRights:flags:environment:authorizedRights:error:</a></code></li>
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRight:flags:">&#8211;&#xA0;obtainWithRight:flags:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorizationWithFlags:rights:environment:">+&#xA0;authorizationWithFlags:rights:environment:</a></code></li>
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/initWithFlags:rights:environment:">&#8211;&#xA0;initWithFlags:rights:environment:</a></code></li></ul><h5 class="tight">Declared In</h5><code>SFAuthorization.h</code><a name="//apple_ref/occ/instm/SFAuthorization/obtainWithRight:flags:" title="obtainWithRight:flags:"></a><a name="//apple_ref/doc/uid/TP40002009-SW2" title="obtainWithRight:flags:"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_14"></a><h3 class="verytight">obtainWithRight:flags:</h3><p class="spaceabove">Authorizes and preauthorizes one specific right. </p><p class="spaceabovemethod">- (BOOL)obtainWithRight:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a>)<em>rightName</em> flags:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationFlags" target="_top">AuthorizationFlags</a>)<em>flags</em> error:(<a href="../../../../../../Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSError" target="_top">NSError</a> **)<em>error</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>rightName</em></dt><dd><p>The name of an authorization right.</p></dd><dt><em>flags</em></dt><dd><p>A bit mask for specifying authorization options. See <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRights:flags:environment:authorizedRights:error:">obtainWithRights:flags:environment:authorizedRights:error:</a></code> for details about possible flag values.</p></dd><dt><em>error</em></dt><dd><p>On completion, the result code returned by the method. See “Result Codes” in <em><a href="../../../../authorization_ref/index.html#//apple_ref/doc/uid/TP30000826" target="_top">Authorization Services C Reference</a></em>.</p></dd></dl><h5 class="tight">Return Value</h5><p><code>YES</code> if operation completes successfully.</p><h5 class="tight">Discussion</h5><p>Use this method to authorize or preauthorize a single right. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.3 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRights:flags:environment:authorizedRights:error:">&#8211;&#xA0;obtainWithRights:flags:environment:authorizedRights:error:</a></code></li></ul><a name="//apple_ref/occ/instm/SFAuthorization/obtainWithRights:flags:environment:authorizedRights:error:" title="obtainWithRights:flags:environment:authorizedRights:error:"></a><a name="//apple_ref/doc/uid/TP40002009-SW1" title="obtainWithRights:flags:environment:authorizedRights:error:"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_15"></a><h3 class="verytight">obtainWithRights:flags:environment:authorizedRights:error:</h3><p class="spaceabove">Authorizes and preauthorizes rights to access a privileged operation and returns the granted rights. </p><p class="spaceabovemethod">- (BOOL)obtainWithRights:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRights" target="_top">AuthorizationRights</a> *)<em>rights</em> flags:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationFlags" target="_top">AuthorizationFlags</a>)<em>flags</em> environment:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationEnvironment" target="_top">AuthorizationEnvironment</a> *)<em>environment</em> authorizedRights:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRights" target="_top">AuthorizationRights</a> **)<em>authorizedRights</em> error:(<a href="../../../../../../Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSError" target="_top">NSError</a> **)<em>error</em>;</p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>rights</em></dt><dd><p>A pointer to a set of authorization rights you create. Pass <code>NULL</code> if the application requires no rights at this time. </p></dd><dt><em>flags</em></dt><dd><p>A bit mask for specifying authorization options. Use the following option sets:</p><ul class="termdef"><li class="termdef"><p>Pass the constant <code>kAuthorizationFlagDefaults</code> if no options are necessary.</p></li><li class="termdef"><p>Specify the <code>kAuthorizationFlagExtendRights</code> mask to request rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li><li class="termdef"><p>Specify the <code>kAuthorizationFlagPartialRights</code> and <code>kAuthorizationFlagExtendRights</code> masks to request partial rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li><li class="termdef"><p>Specify the <code>kAuthorizationFlagPreAuthorize</code> and <code>kAuthorizationFlagExtendRights</code> masks to preauthorize rights.</p></li><li class="termdef"><p>Specify the <code>kAuthorizationFlagDestroyRights</code> mask to prevent the Security framework from preserving the rights obtained during this call.</p></li></ul></dd><dt><em>environment</em></dt><dd><p>Data used when authorizing or preauthorizing rights. In Mac OS X v10.3 and later, you can pass icon or prompt data to be used in the authentication dialog box. Possible values for this parameter are listed in <code>Security/AuthorizationTags.h</code>. If you are not passing any data in this parameter, pass the constant <code>kAuthorizationEmptyEnvironment</code>.</p></dd><dt><em>authorizedRights</em></dt><dd><p>A pointer to a newly allocated <code>AuthorizationRights</code> structure. On return, this structure contains the rights granted by the Security framework. If you do not require this information, pass <code>NULL</code>. If you specify the <code>kAuthorizationFlagPreAuthorize</code> mask in the <code>flags</code> parameter, the method returns all the requested rights, including those not granted, but the flags of the rights that could not be preauthorized include the <code>kAuthorizationFlagCanNotPreAuthorize</code> bit.</p><p>Free the memory associated with this set of rights by calling the Authorization Services function <code><a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationFreeItemSet" target="_top">AuthorizationFreeItemSet</a></code>. </p></dd><dt><em>error</em></dt><dd><p>On completion, the result code returned by the method. See “Result Codes” in <em><a href="../../../../authorization_ref/index.html#//apple_ref/doc/uid/TP30000826" target="_top">Authorization Services C Reference</a></em>.</p></dd></dl><h5 class="tight">Return Value</h5><p><code>YES</code> if operation completes successfully.</p><h5 class="tight">Discussion</h5><p>There are three main reasons to use this method. The first reason is to preauthorize rights by specifying the <code>kAuthorizationFlagPreAuthorize</code>, <code>kAuthorizationFlagInteractionAllowed</code>, and <code>kAuthorizationFlagExtendRights</code> masks as authorization options. Preauthorization is most useful when a right has a zero timeout. For example, you can preauthorize in the application and if it succeeds, call the helper tool and request authorization. This eliminates calling the helper tool if the Security framework cannot later authorize the specified rights.</p><p>The second reason to use this method is to authorize rights before performing a privileged operation by specifying the <code>kAuthorizationFlagInteractionAllowed</code>, and <code>kAuthorizationFlagExtendRights</code> masks as authorization options.</p><p>The third reason to use this method is to authorize partial rights. By specifying the <code>kAuthorizationFlagPartialRights</code>, <code>kAuthorizationFlagInteractionAllowed</code>, and <code>kAuthorizationFlagExtendRights</code> masks as authorization options, the Security framework grants all rights it can authorize. On return, the authorized set contains all the rights.</p><p>If you do not specify the <code>kAuthorizationFlagPartialRights</code> mask and the Security framework denies at least one right, then the method returns <code>NO</code> and the <code>error</code> parameter returns <code>errAuthorizationDenied</code>.</p><p>If you do not specify the <code>kAuthorizationFlagInteractionAllowed</code> mask and the Security framework requires user interaction, then the method returns <code>NO</code> and the <code>error</code> parameter returns <code>errAuthorizationInteractionNotAllowed</code>.</p><p>If you specify the <code>kAuthorizationFlagInteractionAllowed</code> mask and the user cancels the authentication process, then the method returns <code>NO</code> and the <code>error</code> parameter returns <code>errAuthorizationCanceled</code>.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationFreeItemSet" target="_top">AuthorizationFreeItemSet</a></code></li><li class="availability">  <code><a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyRights" target="_top">AuthorizationCopyRights</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRight:flags:">&#8211;&#xA0;obtainWithRight:flags:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorizationWithFlags:rights:environment:">+&#xA0;authorizationWithFlags:rights:environment:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/initWithFlags:rights:environment:">&#8211;&#xA0;initWithFlags:rights:environment:</a></code></li></ul><h5 class="tight">Declared In</h5><code>SFAuthorization.h</code><a name="//apple_ref/occ/instm/SFAuthorization/permitWithRight:flags:" title="permitWithRight:flags:"></a><a name="//apple_ref/doc/uid/TP40002009-CJBIDHFI" title="permitWithRight:flags:"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_16"></a><h3 class="verytight">permitWithRight:flags:</h3>
<p class="spaceabove">Authorizes and preauthorizes one specific right. &#032;(<strong>Deprecated.</strong>&#032;Use <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRight:flags:">obtainWithRight:flags:</a></code> instead.)</p><p class="spaceabovemethod">- (<a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a>)permitWithRight:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationString" target="_top">AuthorizationString</a>)<em>rightName</em> flags:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationFlags" target="_top">AuthorizationFlags</a>)<em>flags</em></p>
<h5 class="tight">Parameters</h5><dl class="termdef">

<dt><em>rightName</em></dt>
<dd><p>The name of an authorization right.</p></dd>
<dt><em>flags</em></dt>
<dd><p>A bit mask for specifying authorization options. See <code>permitWithRights:flags:environment:authorizedRights</code> for details about possible flag values.</p></dd></dl>
<h5 class="tight">Discussion</h5><p>Use this method to authorize or preauthorize a single right. </p>
<h5 class="tight">Availability</h5><ul class="availability">
<li class="availability">Available in Mac OS X v10.3 and later.</li></ul>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/permitWithRights:flags:environment:authorizedRights">&#8211;&#xA0;permitWithRights:flags:environment:authorizedRights</a></code></li></ul><h5 class="tight">Declared In</h5><code>SFAuthorization.h</code><a name="//apple_ref/occ/instm/SFAuthorization/permitWithRights:flags:environment:authorizedRights" title="permitWithRights:flags:environment:authorizedRights"></a><a name="//apple_ref/doc/uid/TP40002009-CJBHFCEB" title="permitWithRights:flags:environment:authorizedRights"></a><a name="//apple_ref/doc/uid/TP40002009-DontLinkElementID_17"></a><h3 class="verytight">permitWithRights:flags:environment:authorizedRights</h3>
<p class="spaceabove">Authorizes and preauthorizes rights to access a privileged operation and returns the granted rights. &#032;(<strong>Deprecated.</strong>&#032;Use <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/obtainWithRights:flags:environment:authorizedRights:error:">obtainWithRights:flags:environment:authorizedRights:error:</a></code> instead.)</p><p class="spaceabovemethod">- (<a href="../../../../../../Carbon/Reference/ErrorHandler/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a>)permitWithRights:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRights" target="_top">AuthorizationRights</a> *)<em>rights</em> flags:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationFlags" target="_top">AuthorizationFlags</a>)<em>flags</em> environment:(const <a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationEnvironment" target="_top">AuthorizationEnvironment</a> *)<em>environment</em> authorizedRights:(<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRights" target="_top">AuthorizationRights</a> **)<em>authorizedRights</em></p>
<h5 class="tight">Parameters</h5><dl class="termdef">

<dt><em>rights</em></dt>
<dd><p>A pointer to a set of authorization rights you create. Pass <code>NULL</code> if the application requires no rights at this time. </p></dd>
<dt><em>flags</em></dt>
<dd><p>A bit mask for specifying authorization options. Use the following option sets:</p><ul class="termdef"><li class="termdef"><p>Pass the constant <code>kAuthorizationFlagDefaults</code> if no options are necessary.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagExtendRights</code> mask to request rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagPartialRights</code> and <code>kAuthorizationFlagExtendRights</code> masks to request partial rights. You can also specify the <code>kAuthorizationFlagInteractionAllowed</code> mask to allow user interaction.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagPreAuthorize</code> and <code>kAuthorizationFlagExtendRights</code> masks to preauthorize rights.</p></li>
<li class="termdef"><p>Specify the <code>kAuthorizationFlagDestroyRights</code> mask to prevent the Security framework from preserving the rights obtained during this call.</p></li></ul></dd>
<dt><em>environment</em></dt>
<dd><p>Data used when authorizing or preauthorizing rights. In Mac OS X v10.3 and later, you can pass icon or prompt data to be used in the authentication dialog box. Possible values for this parameter are listed in <code>Security/AuthorizationTags.h</code>. If you are not passing any data in this parameter, pass the constant <code>kAuthorizationEmptyEnvironment</code>.</p></dd>
<dt><em>authorizedRights</em></dt>
<dd><p>A pointer to a newly allocated <code>AuthorizationRights</code> structure. On return, this structure contains the rights granted by the Security framework. If you do not require this information, pass <code>NULL</code>. If you specify the <code>kAuthorizationFlagPreAuthorize</code> mask in the <code>flags</code> parameter, the method returns all the requested rights, including those not granted, but the flags of the rights that could not be preauthorized include the <code>kAuthorizationFlagCanNotPreAuthorize</code> bit.</p><p>Free the memory associated with this set of rights by calling the Authorization Services function <code><a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationFreeItemSet" target="_top">AuthorizationFreeItemSet</a></code>. </p></dd></dl>
<h5 class="tight">Discussion</h5><p>There are three main reasons to use this method. The first reason is to preauthorize rights by specifying the <code>kAuthorizationFlagPreAuthorize</code>, <code>kAuthorizationFlagInteractionAllowed</code>, and <code>kAuthorizationFlagExtendRights</code> masks as authorization options. Preauthorization is most useful when a right has a zero timeout. For example, you can preauthorize in the application and if it succeeds, call the helper tool and request authorization. This eliminates calling the helper tool if the Security framework cannot later authorize the specified rights.</p><p>The second reason to use this method is to authorize rights before performing a privileged operation by specifying the <code>kAuthorizationFlagInteractionAllowed</code>, and <code>kAuthorizationFlagExtendRights</code> masks as authorization options.</p><p>The third reason to use this method is to authorize partial rights. By specifying the <code>kAuthorizationFlagPartialRights</code>, <code>kAuthorizationFlagInteractionAllowed</code>, and <code>kAuthorizationFlagExtendRights</code> masks as authorization options, the Security framework grants all rights it can authorize. On return, the authorized set contains all the rights.</p><p>If you do not specify the <code>kAuthorizationFlagPartialRights</code> mask and the Security framework denies at least one right, then the status of this method on return is <code>errAuthorizationDenied</code>.</p><p>If you do not specify the <code>kAuthorizationFlagInteractionAllowed</code> mask and the Security framework requires user interaction, then the status of this method on return is <code>errAuthorizationInteractionNotAllowed</code>.</p><p>If you specify the <code>kAuthorizationFlagInteractionAllowed</code> mask and the user cancels the authentication process, then the status of this method on return is <code>errAuthorizationCanceled</code>.</p><h5 class="tight">Special Considerations</h5><p>The <code>authorizedRights</code> parameter is not supported in Mac OS X v10.3; use the Authorization Services function <code><a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationCopyRights" target="_top">AuthorizationCopyRights</a></code> instead. In Mac OS X v10.3 there is an error in the signature in the header file for this parameter. If you pass this argument as (<a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/doc/c_ref/AuthorizationRights" target="_top">AuthorizationRights</a> **)<em>authorizedRights</em>, as shown in this document, it works as described.</p>
<h5 class="tight">See Also</h5><ul class="availability">
<li class="availability">  <code><a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationFreeItemSet" target="_top">AuthorizationFreeItemSet</a></code></li>
<li class="availability">  <code><a href="../../../../authorization_ref/Reference/reference.html#//apple_ref/c/func/AuthorizationCopyRights" target="_top">AuthorizationCopyRights</a></code></li>
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/permitWithRight:flags:">&#8211;&#xA0;permitWithRight:flags:</a></code></li><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/clm/SFAuthorization/authorizationWithFlags:rights:environment:">+&#xA0;authorizationWithFlags:rights:environment:</a></code></li>
<li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/SFAuthorization/initWithFlags:rights:environment:">&#8211;&#xA0;initWithFlags:rights:environment:</a></code></li></ul>









        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/History.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2009 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2009-01-06<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Security/Reference/SecurityFoundationFramework/Classes/SFAuthorization_Class/Reference/Reference.html%3Fid%3DTP40003953-3.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Security/Reference/SecurityFoundationFramework/Classes/SFAuthorization_Class/Reference/Reference.html%3Fid%3DTP40003953-3.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Security/Reference/SecurityFoundationFramework/Classes/SFAuthorization_Class/Reference/Reference.html%3Fid%3DTP40003953-3.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
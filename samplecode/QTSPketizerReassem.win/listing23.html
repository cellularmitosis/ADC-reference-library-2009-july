<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>QTSPketizerReassem.win - /IMAAudioRTP/RTPMPIMAAudio/Headers/IMAAudioPayload.h</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/QuickTime/index.html">QuickTime</a> &gt; <a href="../../samplecode/QuickTime/idxStreaming-date.html">Streaming</a> &gt; <A HREF="javascript:location.replace('index.html');">QTSPketizerReassem.win</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">QTSPketizerReassem.win</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/IMAAudioRTP/RTPMPIMAAudio/Headers/IMAAudioPayload.h</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/ComponentVideoRTP/RTPMPComponentVideo/Headers/ComponentVideoPayload.h</option>
<option value="listing2.html">/ComponentVideoRTP/RTPMPComponentVideo/Headers/ComponentVideoRTP.h</option>
<option value="listing3.html">/ComponentVideoRTP/RTPMPComponentVideo/Headers/ComponentVideoRTPResources.h</option>
<option value="listing4.html">/ComponentVideoRTP/RTPMPComponentVideo/Headers/RTPDefines.h</option>
<option value="listing5.html">/ComponentVideoRTP/RTPMPComponentVideo/Headers/RTPMPComponentVideo.h</option>
<option value="listing6.html">/ComponentVideoRTP/RTPMPComponentVideo/Headers/RTPMPComponentVideoDispatch.h</option>
<option value="listing7.html">/ComponentVideoRTP/RTPMPComponentVideo/Headers/RTPMPComponentVideoResources.h</option>
<option value="listing8.html">/ComponentVideoRTP/RTPMPComponentVideo/Sources/ComponentThing.r</option>
<option value="listing9.html">/ComponentVideoRTP/RTPMPComponentVideo/Sources/ComponentVideoPayload.c</option>
<option value="listing10.html">/ComponentVideoRTP/RTPMPComponentVideo/Sources/RTPMPComponentVideo.c</option>
<option value="listing11.html">/ComponentVideoRTP/RTPMPComponentVideo/Sources/RTPMPComponentVideo.r</option>
<option value="listing12.html">/ComponentVideoRTP/RTPRssmComponentVideo/Headers/ComponentVideoPayload.h</option>
<option value="listing13.html">/ComponentVideoRTP/RTPRssmComponentVideo/Headers/ComponentVideoRTP.h</option>
<option value="listing14.html">/ComponentVideoRTP/RTPRssmComponentVideo/Headers/ComponentVideoRTPResources.h</option>
<option value="listing15.html">/ComponentVideoRTP/RTPRssmComponentVideo/Headers/RTPDefines.h</option>
<option value="listing16.html">/ComponentVideoRTP/RTPRssmComponentVideo/Headers/RTPRssmComponentVideo.h</option>
<option value="listing17.html">/ComponentVideoRTP/RTPRssmComponentVideo/Headers/RTPRssmComponentVideoDispatch.h</option>
<option value="listing18.html">/ComponentVideoRTP/RTPRssmComponentVideo/Headers/RTPRssmComponentVidResources.h</option>
<option value="listing19.html">/ComponentVideoRTP/RTPRssmComponentVideo/Sources/ComponentThing.r</option>
<option value="listing20.html">/ComponentVideoRTP/RTPRssmComponentVideo/Sources/ComponentVideoPayload.c</option>
<option value="listing21.html">/ComponentVideoRTP/RTPRssmComponentVideo/Sources/RTPRssmComponentVideo.c</option>
<option value="listing22.html">/ComponentVideoRTP/RTPRssmComponentVideo/Sources/RTPRssmComponentVideo.r</option>
<option value="listing23.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/IMAAudioPayload.h</option>
<option value="listing24.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/IMAAudioQueue.h</option>
<option value="listing25.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/IMAAudioRTP.h</option>
<option value="listing26.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/IMAAudioRTPResources.h</option>
<option value="listing27.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/RTPDefines.h</option>
<option value="listing28.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/RTPMPIMAAudio.h</option>
<option value="listing29.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/RTPMPIMAAudioDispatch.h</option>
<option value="listing30.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/RTPMPIMAAudioResources.h</option>
<option value="listing31.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/TCycle.h</option>
<option value="listing32.html">/IMAAudioRTP/RTPMPIMAAudio/Headers/TQueue.h</option>
<option value="listing33.html">/IMAAudioRTP/RTPMPIMAAudio/Sources/ComponentThing.r</option>
<option value="listing34.html">/IMAAudioRTP/RTPMPIMAAudio/Sources/IMAAudioPayload.c</option>
<option value="listing35.html">/IMAAudioRTP/RTPMPIMAAudio/Sources/IMAAudioQueue.c</option>
<option value="listing36.html">/IMAAudioRTP/RTPMPIMAAudio/Sources/RTPMPIMAAudio.c</option>
<option value="listing37.html">/IMAAudioRTP/RTPMPIMAAudio/Sources/RTPMPIMAAudio.r</option>
<option value="listing38.html">/IMAAudioRTP/RTPMPIMAAudio/Sources/TCycle.c</option>
<option value="listing39.html">/IMAAudioRTP/RTPMPIMAAudio/Sources/TQueue.c</option>
<option value="listing40.html">/IMAAudioRTP/RTPRssmIMAAudio/Headers/IMAAudioPayload.h</option>
<option value="listing41.html">/IMAAudioRTP/RTPRssmIMAAudio/Headers/IMAAudioRTP.h</option>
<option value="listing42.html">/IMAAudioRTP/RTPRssmIMAAudio/Headers/IMAAudioRTPResources.h</option>
<option value="listing43.html">/IMAAudioRTP/RTPRssmIMAAudio/Headers/RTPDefines.h</option>
<option value="listing44.html">/IMAAudioRTP/RTPRssmIMAAudio/Headers/RTPRssmIMAAudio.h</option>
<option value="listing45.html">/IMAAudioRTP/RTPRssmIMAAudio/Headers/RTPRssmIMAAudioDispatch.h</option>
<option value="listing46.html">/IMAAudioRTP/RTPRssmIMAAudio/Headers/RTPRssmIMAAudioResources.h</option>
<option value="listing47.html">/IMAAudioRTP/RTPRssmIMAAudio/Sources/ComponentThing.r</option>
<option value="listing48.html">/IMAAudioRTP/RTPRssmIMAAudio/Sources/IMAAudioPayload.c</option>
<option value="listing49.html">/IMAAudioRTP/RTPRssmIMAAudio/Sources/RTPRssmIMAAudio.c</option>
<option value="listing50.html">/IMAAudioRTP/RTPRssmIMAAudio/Sources/RTPRssmIMAAudio.r</option>
<option value="listing51.html">/Readme.txt</option></select>
				</p>
				</form>
				<p><strong><a href="QTSPketizerReassem.win.zip">Download Sample</a></strong> (&#147;QTSPketizerReassem.win.zip&#148;, 323.9K)<BR>
<strong><a href="QTSPketizerReassem.win.dmg">Download Sample</a></strong> (&#147;QTSPketizerReassem.win.dmg&#148;, 627.5K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    IMAAudioPayload.h  Contains:  Declaration of IMAAudioPayload datatype and its operations  Copyright:  &copy; 1997-1999 by Apple Computer Inc. all rights reserved.      X-Sample-IMA-ADPCM-4-1-v0 Payload  -----------------------------------------------------------------    RTP clock rate: 55125 Hz      220500 Hz is the least common mutiple of the frame rates    (sample rate divided by samples per frame) this payload    format uses.  At this clock rate, the duration of a frame at    any sample rate would be an exact integer number of clock    cycles.  This frequency is somewhat high, though, given the    available timestamp precision.  But removing two factors of    2, yielding 55125 Hz, gives a reasonable clock rate and still    allows for integer durations using multiples of, at worst,    four (i.e., two factors of 2) frames.      Payload Format:                         1   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5  +-+-+-+-+-+-+-+-|-+-+-+-+-+-+-+-+  |  SR   | CC  | IC  | IX  | IT  |  +-+-+-+-+-+-+-+-|-+-+-+-+-+-+-+-+  :           Audio Data          :  +-+-+-+-+-+-+-+-|-+-+-+-+-+-+-+-+        SR - 4 bits      RFC 1890 recommended sample rate as follows:            0 =  8000 Hz        1 = 11025        2 = 16000        3 = 22050        4 = 24000        5 = 32000        6 = 44100        7 = 48000               8-15 - reserved        Although this payload encoding uses the sample rates    recommended by RFC 1890, other payload encodings are not    restricted to these rates.  An encoding may use any sample    rates it requires.      CC - 3 bits      One less than the channel count.  That is, 0 = mono,    1 = stereo, 2 = 3 channels, etc.          IC - 3 bits        One less than the count of network packets in the current    interleave group.          IX - 3 bits        Interleave index.  Position, from zero to IC, of this network    packet in the current interleave group.          IT - 3 bits        Interleave tail.  Interleave index (IX) of the network packet    that contains the last frame of data in the current    interleave group.          Audio Data - 1 or more 34-octet frames        IMA 4:1 ADPCM encoded audio data.  The total frame count in    an interleave group is a multiple of the channel count    (i.e., CC + 1).    E X A M P L E  -----------------------------------------------------------------    Deriving the first interleave group for the described audio data  according to the given user settings:      Audio Data  Sample rate = 11025 Hz  Channels    = 2  Length      = 2000 frames  Start time  = 3 seconds  Duration    = 5.805 seconds (1000 frames)  +------+------+------+------+------+   +------+------+------+  |  L0  |  R0  |  L1  |  R1  |  L2  |...| R998 | L999 | R999 |  +------+------+------+------+------+   +------+------+------+    User Settings        Interleaving          = 3    Packet length limit   = 1460 bytes (header and 42 frames)    Packet duration limit = 100 ms (17 frames)            Interleave Group 1        Timestamp = 165375 (55125 Hz x 3 seconds)    Length    = 50 frames (17 x 3 packets rounded to 2-channel multiple)          Packet 1             Packet 2             Packet 3  Timestamp = 165375   Timestamp = 165375   Timestamp = 165375  Length    = 17 fr    Length    = 17 fr    Length    = 16 fr  Duration  = 0        Duration  = 0        Duration  = 8000 (25 fr)      Header:              Header:              Header:  SR = 1               SR = 1               SR = 1  CC = 1               CC = 1               CC = 1  IC = 2               IC = 2               IC = 2  IX = 0               IX = 1               IX = 2  IT = 1               IT = 1               IT = 1  Data:                Data:                Data:  +------+             +------+             +------+  |  L0  |             |  R0  |             |  L1  |  +------+             +------+             +------+  |  R1  |             |  L2  |             :      :  +------+             +------+             :      :  :      :             :      :             :      :  :      :             :      :             +------+  :      :             :      :             |  R23 |  +------+             +------+             +------+  |  L24 |             |  R24 |  +------+             +------+*/#ifndef __COMPONENTVIDEOPAYLOAD__#define __COMPONENTVIDEOPAYLOAD__/* --------------------------------------------------------------------------- *    H E A D E R S * --------------------------------------------------------------------------- */#include &lt;MacTypes.h&gt;/* --------------------------------------------------------------------------- *    M A C R O S * --------------------------------------------------------------------------- */#ifndef REZ#  if __cplusplus#    define C_CAST( aType )        ( aType )#    define REINTERPRET_CAST( aType )  reinterpret_cast&lt; aType &gt;#    define STATIC_CAST( aType )      static_cast&lt; aType &gt;#    define CONST_CAST( aType )      const_cast&lt; aType &gt;#  else#    define __CAST( anExpression )    ( anExpression )#    define C_CAST( aType )        ( aType ) __CAST#    define REINTERPRET_CAST( aType )  C_CAST( aType )#    define STATIC_CAST( aType )      C_CAST( aType )#    define CONST_CAST( aType )      C_CAST( aType )#  endif /* __cplusplus */#endif /* REZ *//* --------------------------------------------------------------------------- *    C O N S T A N T S * --------------------------------------------------------------------------- */enum{  kIMAAudioPayloadRTPTimeScale = 55125UL};enum{  kIMAAudioPayloadFixedHeaderWordCount = 1};enum{  kIMAAudioPayloadFrameSampleCount    = 64UL,  kIMAAudioPayloadWordSampleCount      = 4,  kIMAAudioPayloadInterleaveCountLimit  = 8};/* --------------------------------------------------------------------------- *    D A T A T Y P E S * --------------------------------------------------------------------------- * *  The IMAAudioPayload structure represents the payload format defined *  above.  Unfortunately, the position of bit fields in C data structures is *  implementation-dependent, so the data structure cannot declare individual *  fields of the payload format. * */typedef struct{  UInt16  itsPredictor;  UInt16  itsAudioData[        kIMAAudioPayloadFrameSampleCount / kIMAAudioPayloadWordSampleCount ];} IMAAudioFrame;typedef struct{  UInt16      itsFixedHeader[ kIMAAudioPayloadFixedHeaderWordCount ];  IMAAudioFrame  itsAudioFrames[ 1 ];} IMAAudioPayload;/* --------------------------------------------------------------------------- *    P R O T O T Y P E S * --------------------------------------------------------------------------- * *  These functions get and set fields of the IMAAudioPayload.  Some functions *  use values that differ from the representation encoded in the payload: * *    IMAAudioPayloadChannelCountLimit() *    IMAAudioPayloadSetChannelCount() *    IMAAudioPayloadChannelCount()    These functions expect or return *                      actual count of channels, not one *                      less than the channel count. * *    IMAAudioPayloadSetSampleRate() *    IMAAudioPayloadSampleRate()      These functions expect or return *                      actual UnsignedFixed sample rates, *                      not symbolic constants. *                      IMAAudioPayloadSetSampleRate() *                      returns the rate actually encoded, *                      which might differ from the rate *                      given. * *    IMAAudioPayloadSetInterleaving() *    IMAAudioPayloadInterleaveCount()  These functions expect or return *                      actual count of interleaved *                      packets, not one less than the *                      interleave count. */UInt32IMAAudioPayloadChannelCountLimit(  void );UInt32IMAAudioPayloadInterleaveCountLimit(  void );IMAAudioPayload *IMAAudioPayloadInitialize(  IMAAudioPayload *  inPayload );UInt32IMAAudioPayloadSetChannelCount(  IMAAudioPayload *  inPayload,  UInt32        inChannelCount );UnsignedFixedIMAAudioPayloadSetSampleRate(  IMAAudioPayload *  inPayload,  UnsignedFixed    inSampleRate );UInt32IMAAudioPayloadSetInterleaving(  IMAAudioPayload *  inPayload,  UInt32        inInterleaveCount,  UInt32        inInterleaveGroupFrameCount );UInt32IMAAudioPayloadIncrementInterleaveIndex(  IMAAudioPayload *  inPayload );UInt32IMAAudioPayloadChannelCount(  const IMAAudioPayload *    inPayload );UnsignedFixedIMAAudioPayloadSampleRate(  const IMAAudioPayload *    inPayload );UInt32IMAAudioPayloadInterleaveCount(  const IMAAudioPayload *    inPayload );UInt32IMAAudioPayloadInterleaveIndex(  const IMAAudioPayload *    inPayload );UInt32IMAAudioPayloadInterleaveTail(  const IMAAudioPayload *    inPayload );#endif /* __COMPONENTVIDEOPAYLOAD__ */</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/QTSPketizerReassem.win/listing23.html%3Fid%3DDTS10001048-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/QTSPketizerReassem.win/listing23.html%3Fid%3DDTS10001048-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/QTSPketizerReassem.win/listing23.html%3Fid%3DDTS10001048-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
<!-- Generated by Harlequin WebMaker 2.2.3 (30-Apr-1996)
Macintosh Common Lisp Version 3.0kp2p2 [AppGen 3.0b1kp2p2] -->
<HTML> <HEAD>
<TITLE>Recipes--Dialog Boxes and Controls (MacApp PG)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING108></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MacAppProgGuide-107.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-109.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MacAppProgGuide-2.html"><B>Programmer's Guide to MacApp</B></A> / <A HREF="MacAppProgGuide-78.html"><B>Part 2 - Working With MacApp</B></A><BR><DD><A HREF="MacAppProgGuide-106.html"><B>Chapter 19 - Working With Dialog Boxes  and Controls</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING108-0></A>
<H1><A NAME=MARKER-2-25></A>Recipes--Dialog Boxes and Controls</H1>
 This section provides a general outline of how to work with dialog boxes and controls, as well as recipes and sample code that demonstrate how to display a modal dialog box and respond to user manipulation of control objects.<P>
<A NAME=HEADING108-2></A>
<H2><A NAME=MARKER-2-26></A><A NAME=MARKER-9-34></A>Working With Dialog Boxes and Controls--A General Outline</H2>
 Dialog boxes are handled like other window and view objects in your application. Dialog boxes usually contain controls such as buttons, checkboxes, and scroll bars. MacApp defines the <CODE>TControl</CODE> class, a subclass of <CODE>TView</CODE>, and a number of specialized control view subclasses.<P>
<OL>
<LI>To initialize MacApp's UDialog unit, you call the <A NAME=MARKER-2-28></A><CODE>InitUDialog</CODE> routine from your <CODE>main</CODE> routine, after calling <CODE>InitUMacApp</CODE> and before creating your application object. (See <A HREF=MacAppProgGuide-84.html#MARKER-9-34>"Recipe--Launching a Simple Application," beginning on page 292</A>.)
<LI><A NAME=MARKER-9-29></A>To use a dialog box in your application, follow these steps:<P>
<UL>
<LI>Define a subclass of <CODE>TDialogView</CODE> to serve as the main dialog-box view. 
<LI>Use a view-editing program to define a window containing the main dialog-box view and its view hierarchy of control views and other view objects.
<LI>In the resource definition, set the window's <A NAME=MARKER-2-30></A><CODE>fTargetID</CODE> field to the view ID of an edit-text or number-text view to be selected when the dialog box is first displayed. If there are no edit- or number-text views in the dialog box, set <CODE>fTargetID</CODE> to the view ID of the dialog view.<P>
</UL>
<LI>To work with control view objects in a dialog box, follow these steps (see also the recipe beginning on <A HREF=MacAppProgGuide-117.html#MARKER-9-66>page 461</A>):<P>
<UL>
<LI>Define a subclass of each MacApp control view class that you need to modify.
<LI>Override the <CODE>DoEvent</CODE> method of your control view class to handle specific events. Constants for the event numbers generated by user actions with control objects are defined in the UMacAppGlobals unit and are shown in <A HREF=#MARKER-9-1>Table 19-1</A>.<P>
For a different approach to control view objects, see the recipe beginning on <A HREF=#MARKER-9-35>page 465</A>.<P>
</UL>
<LI>To use a modal dialog box <A HREF=#MARKER-9-39>(page 467)</A>, follow these steps:<P>
<UL>
<LI>In your view resource template (described in step 2 above), identify which control items in the dialog box cause it to be dismissed.
<LI>Create the window and view hierarchy for your dialog box from the view resource you have defined. Call the <CODE>NewTemplateWindow</CODE> method of MacApp's global view server object (<CODE>gViewServer</CODE>) to create the window.
<LI>If you do not use the <CODE>TDialogView</CODE> class for your dialog-box view, make sure the view class you do use calls its window's <CODE>SetDialogItems</CODE> method to associate a <CODE>TDialogBehavior</CODE> object (see <A HREF=MacAppProgGuide-69.html#MARKER-9-268>page 239</A>) with the window. (The <CODE>TDialogView</CODE> class calls <CODE>SetDialogItems</CODE> automatically in its <CODE>DoPostCreate</CODE> method.)
<LI>Call the window's <CODE>PoseModally</CODE> method to display the dialog box. The window's <CODE>PoseModally</CODE> method calls the <CODE>PoseModally</CODE> method of its <CODE>TDialogBehavior</CODE> object. The window's <CODE>PoseModally</CODE> method returns the ID of the control object that dismisses the dialog box. For example, the user may dismiss the dialog box by clicking the OK button, the Cancel button, or another button. Your application can base its action on the returned ID.
<LI>After <CODE>PoseModally</CODE> returns, call the <CODE>Close</CODE> method of the window.<A NAME=MARKER-2-31></A><P>
</UL>
</OL>
<A NAME=HEADING108-19></A>
<H2><A NAME=MARKER-2-32></A><A NAME=MARKER-9-66></A>Recipe--Responding to User Actions in a Control View </H2>
 When a user presses the mouse button while the cursor is over an application window, the application receives a mouse-down event from the operating system. The application object dispatches the event to the window containing the mouse-down event--typically, the event is passed down to the smallest subview that contains the event and wishes to respond to it. This type of event dispatching is described in <A HREF=MacAppProgGuide-42.html#MARKER-9-64>"View Hierarchy Dispatching," beginning on page 103</A>.<P>
 MacApp's control view classes include views to display standard buttons, scroll bars, checkboxes, radio buttons, and text- and number-entry fields. All of these classes descend from the <CODE>TCtlMgr</CODE> class, and for many of them the <CODE>TCtlMgr::DoMouseCommand</CODE> method handles a mouse-down event in the control view. The <CODE>DoMouseCommand</CODE> method calls the Toolbox routine <CODE>TrackControl</CODE> to track the mouse while the user presses the mouse button. If <CODE>TrackControl</CODE> returns a nonzero value (the user clicked the control), <CODE>DoMouseCommand</CODE> calls <CODE>HandleEvent</CODE>, passing the control view's <CODE>fEventNumber</CODE> field. Possible values for the <CODE>fEventNumber</CODE> field are shown in <A HREF=#MARKER-9-1>Table 19-1</A>.<P>
 The <CODE>HandleEvent</CODE> method is a method of <CODE>TEventHandler</CODE>. It gives any enabled behavior object a chance to handle the event in its <CODE>DoEvent</CODE> method. If none does, it calls the control view's <CODE>DoEvent</CODE> method. You can override <CODE>DoEvent</CODE> in your control view subclasses to respond to a user click on the control.<P>
 MacApp defines event number constants, as well as certain change notification constants, in the UMacAppGlobals unit. Both are shown in <A HREF=#MARKER-9-1>Table 19-1</A>.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-1></A><B>Table 19-1 MacApp event and change notification constants</B> </CAPTION>
<TH>Event name<TH>Number<TH>Description<TR>
<TD>mOKHit<TD>1<TD>OK button clicked.<TR>
<TD>mCancelHit<TD>2<TD>Cancel button clicked.<TR>
<TD>mButtonHit<TD>3<TD><CODE>TButton</CODE> object clicked.<TR>
<TD>mCheckBoxHit<TD>4<TD>Checkbox object clicked.<TR>
<TD>mClusterHit<TD>5<TD>Cluster object clicked.<TR>
<TD>mEditTextHit<TD>6<TD>Edit text object clicked.<TR>
<TD>mIconHit<TD>7<TD><CODE>TIcon</CODE> object clicked.<TR>
<TD>mListItemHit<TD>8<TD>List item clicked.<TR>
<TD>mListScrollBarHit<TD>9<TD>Scroll bar of <CODE>TListView</CODE> object clicked.<TR>
<TD>mPictureHit<TD>10<TD><CODE>TPicture</CODE> object clicked.<TR>
<TD>mPopupHit<TD>11<TD>Pop-up menu object clicked.<TR>
<TD>mRadioHit<TD>12<TD>Radio button clicked.<TR>
<TD>mStaticTextHit<TD>13<TD>Static text object clicked.<TR>
<TD>mHScrollBarHit<TD>14<TD>Horizontal scroll-bar object clicked.<TR>
<TD>mVScrollBarHit<TD>15<TD>Vertical scroll-bar object clicked.<TR>
<TD>mEditTabKey<TD>16<TD>Tab key pressed during editing.<TR>
<TD>mEditReturnKey<TD>17<TD>Return key pressed during editing.<TR>
<TD>mEditEnterKey<TD>18<TD>Enter key pressed during editing.<TR>
<TD>mPatternHit<TD>19<TD><CODE>TPattern</CODE> object clicked.<TR>
<TD>mControlHit<TD>20<TD>Control object clicked.<TR>
<TD>mCancelKey<TD>21<TD>Cancel button selected by keypress.<TR>
<TD>mDefaultKey<TD>22<TD>Default button selected by keypress.<TR>
<TD>mSmallIconHit<TD>23<TD>Small icon object clicked.<TR>
<TD>mBecameWindowTarget<TD>24<TD>Object became window target.<TR>
<TD>mResignedWindowTarget<TD>25<TD>Object resigned as window target.<TR>
<TD>mBecameTarget<TD>26<TD>Object became target.<TR>
<TD>mResignedTarget<TD>27<TD>Object resigned as target.<TR>
<TD>mClosed<TD>28<TD>View closed.<TR>
<TD>mAboutToLoseControl<TD>29<TD>Application about to be switched out.<TR>
<TD>mScrapChanged<TD>30<TD>Data in desk scrap changed.<TR>
<TD>mTurnOn<TD>31<TD>Control item turned on.<TR>
<TD>mTurnOff<TD>32<TD>Control item turned off.<TR>
<TD>mToggle<TD>33<TD>Control item toggled.<TR>
<TD>mDismiss<TD>34<TD>Item dismissed.</TABLE>
<P>
 To override the <CODE>DoEvent</CODE> method of a control view class to respond to a user action, you perform these steps:<P>
<OL>
<LI>Define a subclass for the control view.<P>
<UL>
<LI>The subclass should descend from the <CODE>TCtlMgr</CODE> class, or from one of MacApp's predefined control classes, such as <CODE>TButton</CODE> or <CODE>TCheckBox</CODE>.
<LI>Override the <CODE>DoEvent</CODE> method.<P>
</UL>
<LI>Implement a <CODE>DoEvent</CODE> method.<P>
<UL>
<LI>In the <CODE>DoEvent</CODE> method, respond to event numbers of interest.
<LI>For other event numbers, call <CODE>Inherited</CODE>.<P>
</UL>
</OL>
 The sample code shown in this recipe is for a hypothetical button class.<P>
<A NAME=HEADING108-32></A>
<H3>Define a Subclass for the Control View</H3>
 The following is a partial listing for a custom button class:<P>
<PRE>
class TYourSpecialButton : public TButton
{
   MA_DECLARE_CLASS;
   
public:
   virtual void DoEvent(EventNumber eventNumber,
                     TEventHandler*source,
                     TEvent*     event);
// Some code not shown.
}
</PRE>
 You define additional fields and methods to perform the operations specific to the TYourSpecialButton class.<P>
<A NAME=HEADING108-36></A>
<H3>Implement a DoEvent Method</H3>
 The <CODE>DoEvent</CODE> method is called when a user clicks an instance of your control class--in this case, a special button view. The <CODE>DoEvent</CODE> method responds to event numbers of interest and calls <CODE>Inherited</CODE> for event numbers it does not handle.<P>
<PRE>
void TYourSpecialButton::DoEvent(EventNumbereventNumber,
                           TEventHandler*source,
                           TEvent*     event) // Override.
{
   switch (eventNumber)
   {
      case mButtonHit:
            // Perform any special handling for your 
            // button class here.
         break;

      default:
         // Event not handled; pass it on.
         Inherited::DoEvent(eventNumber, source, event);
         break;
   }
}
</PRE>
 This simple version of <CODE>DoEvent</CODE> performs special handling for an mButtonHit event number. Otherwise, it calls <CODE>Inherited</CODE> to let its parent class handle the event.<A NAME=MARKER-2-34></A><P>
<A NAME=HEADING108-40></A>
<H2><A NAME=MARKER-9-35></A><A NAME=MARKER-2-36></A>Recipe--An Alternative Approach to User Actions in <BR>a Control</H2>
 The previous recipe described how to handle a user action by defining a subclass of <CODE>TButton</CODE> and overriding the <CODE>DoEvent</CODE> method. Although that mechanism is effective and works for buttons and other controls, it does have some drawbacks:<P>
<UL>
<LI>Your button class may require knowledge of other things that take place in its dialog box.
<LI>You may have to define many subclasses of <CODE>TButton</CODE>, even though each class has a very limited function.<P>
</UL>
 On the other hand, you nearly always define a subclass of <CODE>TDialogView</CODE> (see <A HREF=#MARKER-9-29>page 460</A>), and the dialog view class is a logical place to centralize knowledge about events that take place in the dialog. Why not use the <CODE>TDialogView</CODE> class to handle user actions for simple control items?<P>
 To handle events (in this case, a button hit) in your subclass of <CODE>TDialogView</CODE>, you perform these steps:<P>
<OL>
<LI>Define a unique constant for each event you will handle.
<LI>Define a view resource for your dialog view.<P>
<UL>
<LI>Use the <CODE>TButton</CODE> class for a button used in the dialog box.
<LI>Set the event number field of the button to the constant you defined.<P>
</UL>
<LI>Override the <CODE>DoEvent</CODE> method in your subclass of <CODE>TDialogView</CODE>.<P>
<UL>
<LI>Your <CODE>DoEvent</CODE> method should handle all the event constants you have defined.<P>
</UL>
</OL>
 The sample code in this recipe is for a hypothetical dialog view.<P>
<A NAME=HEADING108-53></A>
<H3>Define a Unique Constant for Each Event You Will Handle</H3>
 To identify a button event you are interested in, you use code like the following:<P>
<PRE>
const EventNumber mCountRaisinsButtonHit = 14001;
</PRE>
 The constant number, in this case 14001, should be well outside the range of event numbers defined by MacApp (shown in <A HREF=MacAppProgGuide-107.html#MARKER-9-24>Figure 19-1</A>). Also, make sure that any event number constants you define remain unique across all code modules in your application.<P>
<A NAME=HEADING108-57></A>
<H3>Define a View Resource for Your Dialog View</H3>
 The use of view dialog resources is described in <A HREF=MacAppProgGuide-101.html#MARKER-9-58>"Working With View Resource Templates," beginning on page 425</A>. Using a view resource editor application, you can create view hierarchies in a graphical environment. A view editor also allows you to set initial values for many fields of the view objects in the hierarchy.<P>
 Use a view editor to create a <CODE>TButton</CODE> object for the Count Raisins button, then set the button's <CODE>fEventNumber</CODE> field to 14001.<P>
<DL>
<DT><B>IMPORTANT</B>
<DD>Be sure the number you enter (14001) matches the constant defined in the previous step.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
<A NAME=HEADING108-61></A>
<H3>Override the DoEvent Method in Your Subclass of TDialogView</H3>
 You normally define a subclass of <CODE>TDialogView</CODE> to serve as the main dialog view for dialog boxes in your application. You can define your subclass with code like the following, which overrides the DoEvent method:<P>
<PRE>
class TYourDialogView : public TDialogView
{
   MA_DECLARE_CLASS;
   
public:
   virtual void DoEvent(EventNumber eventNumber,
                     TEventHandler*source,
                     TEvent*     event); // Override.
.
.
.

}
</PRE>
 Your version of the DoEvent method should handle any control event constants you have defined, using code like the following:<P>
<PRE>
void TYourDialogView::DoEvent(EventNumbereventNumber,
                        TEventHandler*source,
                        TEvent*     event) // Override.
{
   switch (eventNumber)
   {
      case mCountRaisinsButtonHit:
            long raisinsPerBox = this-&gt;CountTheRaisins()
            this-&gt;SetRaisinCount(raisinsPerBox);
            // Any other code to handle this case.
         break;

      // Add cases for other event numbers your dialog view handles.

      // Default is to pass the event on.
      default:
         // Event not handled; pass it on.
         Inherited::DoEvent(eventNumber, source, event);
         break;
   }
}
</PRE>
 In this case, when the Count Raisins button is hit, the dialog view determines how many raisins are in the box and sets the appropriate variable. It may need to access other fields of the dialog box, which it can rightly be expected to know about.<P>
 You can use this mechanism to handle many control events for a given dialog box, though at some point the switch statement may become too large for good coding style.<A NAME=MARKER-2-37></A><P>
<A NAME=HEADING108-68></A>
<H2><A NAME=MARKER-2-38></A><A NAME=MARKER-9-39></A>Recipe--Displaying a Modal Dialog Box</H2>
 The DemoDialogs application has a Modal Beep Dialog menu command. The menu command displays a modal dialog box containing OK and Cancel buttons, a static text item, and a number text item in which the user can enter the number of beeps. The default number of beeps is 1, the minimum is 1, and the maximum is 10. These values are specified in the file <CODE>DemoDialogs.r</CODE>, in the <CODE>cModelessBeepDialog</CODE> view resource, in the <CODE>NumberText</CODE> subview definition, by the text "1, 1, 10" (shown on page 470). You can modify these values by editing the view resource.<P>
 If the user dismisses the dialog box with the OK button, the specified number of beeps is performed, unless it is out of range--then an error message is displayed and the dialog box is not dismissed. If the user cancels the dialog box, no beeps are performed. The Modal Beep Dialog menu command demonstrates how to display a modal dialog box.<P>
 To display a modal dialog box, you perform these steps:<P>
<OL>
<LI>Define a <CODE>'View'</CODE> resource for the dialog box window and view hierarchy.<P>
<UL>
<LI>Define a resource ID constant for the view resource.
<LI>Define the view resource for the window.<P>
</UL>
<LI>Create, display, and close the dialog box.<P>
<UL>
<LI>Create the window with the <CODE>NewTemplateWindow</CODE> method.
<LI>Call the window's <CODE>PoseModally</CODE> method to display the dialog box.
<LI>Call the window's <CODE>Close</CODE> method after the user dismisses the dialog box.<P>
</UL>
</OL>
 The sample code shown in this recipe is from the DemoDialogs application.<P>
<A NAME=HEADING108-80></A>
<H3>Define a 'View' Resource for the Dialog-Box Window Hierarchy</H3>
 The recipe beginning on <A HREF=MacAppProgGuide-105.html#MARKER-9-35>page 451</A> (<A HREF=MacAppProgGuide-105.html#MARKER-9-35>"Recipe--Creating a Window From a View Resource"</A>) describes how to define a resource ID constant and a view resource for a window. The key to defining a view resource for a dialog box is to use a <CODE>TDialogView</CODE> as the parent view for any control view objects in the dialog box.<P>
 The DemoDialogs application defines a constant for the Modal Beep Dialog menu command in the file <CODE>DemoDialogs.r</CODE>:<P>
<PRE>
#define cModalBeepDialog1005
</PRE>
 The following is a partial listing of the <CODE>'View'</CODE> resource for the dialog box displayed by the Modal Beep Dialog menu command. It is defined in the file <CODE>DemoDialogs.r</CODE>:<P>
<PRE>
resource 'View' (cModalBeepDialog, purgeable)
{MAThreeOh, 
   {
   ViewSignatureAndClassname
      {'wind', 857, &quot;&quot;, 'WIND', enabled, noIdle, {}, MAThreeOh, 
      {72, 64}, {80, 270}, sizeVariable, sizeVariable, shown,
      .
      .
      .
      Window {movableDBoxProc, 'numb', goAwayBox, notResizable,
         ignoreFirstClick, freeOnClosing, disposeOnFree,
         closesDocument, openWithDocument,dontAdaptToScreen,
         dontStagger, forceOnScreen, centerHorizontally,
         doesntFloat, doesntHideOnSuspend, generateActivates, 0,
         kWindowTitles, 6}, 1}, 
   ViewSignatureAndClassname
      {'dlog', 666, &quot;&quot;, 'DLOG', enabled, noIdle, {},
      MAThreeOh, {0, 0}, {1000, 500}, sizeFixed, sizeFixed,
      shown, doesntWantToBeTarget, handlesCursor, 
      letsSubViewsHandleCursor, noCursorID, handlesHelp, 
      letsSubViewsHandleHelp, noHelpID, 1, NoDrawingEnvironment {},
      NoAdorners {}, 0, DialogView {'ok  ', 'cncl'}, 4}, 
   ViewSignatureAndClassname
      {'butn', 208, &quot;&quot;, 'ok  ', enabled, noIdle, {}, MAThreeOh, 
      .
      .
      .
   ViewSignatureAndClassname
      {'butn', 92, &quot;&quot;, 'cncl', enabled, noIdle, {}, MAThreeOh, 
      .
      .
      .
   ViewSignatureAndClassname
      {'stat', 96, &quot;&quot;, noID, notEnabled, noIdle, {}, MAThreeOh, 
      .
      .
      .
   ViewSignatureAndClassname
      {'nmbr', 176, &quot;&quot;, 'numb', enabled, noIdle,
      .
      .
      .
      NumberText {mEditTextHit, notHilited, notDimmed, sizeable,
      {3, 3, 3, 3}, 130, dontPreferOutline, dontAutoWrap,
      dontEraseFirst, justRight, kStaticTextText, 19, 5,
      LeftRightUpDownBackspace, 1, 1, 10},NoSubviews}
   }
};
</PRE>
 This view resource defines a window containing a dialog view, Cancel and OK buttons, a static text view, and a number text view. Note that the view ID for the number text view is <CODE>'numb'</CODE>.<P>
<A NAME=HEADING108-87></A>
<H3>Create, Display, and Close the Dialog Box</H3>
 The DemoDialogs application creates, displays, and closes the Modal Beep Dialog dialog box in the MakeModalBeepDialog method:<P>
<PRE>
void TTestApplication::MakeModalBeepDialog(CommandNumber aCommandNumber)

{
   TWindow *   aWindow = NULL;
   IDType      dismisser;
   TNumberText * aNumberText = NULL;
   long        n = 0;

   // Create the dialog box window. Fail if unsuccessful.
   aWindow = gViewServer-&gt;NewTemplateWindow(
                              (short)aCommandNumber, NULL);
   FailNIL(aWindow);

   // Display the dialog box as a modal dialog.
   dismisser = aWindow-&gt;PoseModally();

   // On return, examine dismisser.
   if (dismisser == 'ok  ')
   {
      // Find the number text view and extract the number of beeps.
      // Use dynamic cast to make sure we have the right kind of view.
      aNumberText = MA_DYNAMIC_CAST(TNumberText,
                              aWindow-&gt;FindSubView('numb'));
      if (aNumberText)
         n = aNumberText-&gt;GetValue();
   }
   aWindow-&gt;CloseAndFree();
   for (long i = 1; i &lt;= n; i++)
      gApplication-&gt;Beep(2);

} // TTestApplication::MakeModalBeepDialog
</PRE>
 Validation occurs when the user attempts to dismiss the dialog box with the OK button. Validation is described in <A HREF=MacAppProgGuide-69.html#MARKER-9-306>"Validating Dialog-Box Data," beginning on page 244</A>. In your application, you can replace the code that creates beeps with code that uses the entered number for some other purpose.<P>
<A NAME=HEADING108-91></A>
<H3>Call the Window's PoseModally Method to Display the Dialog Box</H3>
 The following line from the MakeModalBeepDialog method displays the modal dialog box:<P>
<PRE>
dismisser = aWindow-&gt;PoseModally();
</PRE>
 The <CODE>TWindow::PoseModally</CODE> method calls the PoseModally method of its <CODE>TDialogBehavior</CODE> behavior object. That method repeatedly makes the call<P>
 <CODE>gApplication-&gt;PollEvent(kAllowApplicationToSleep);</CODE><P>
 until the dialog box is dismissed. It then returns the ID of the control object that dismissed the dialog box (such as the Cancel or OK button).<P>
<A NAME=HEADING108-97></A>
<H3>Call the Window's Close Method</H3>
 The following line from the MakeModalBeepDialog method closes the modal dialog box window:<P>
<PRE>
aWindow-&gt;CloseAndFree();
</PRE>
 The <CODE>CloseAndFree</CODE> method calls <CODE>Close</CODE> to close the window. If the window is freed on closing, <CODE>CloseAndFree</CODE> also frees it.<A NAME=MARKER-2-40></A><P>
<DL>
<DT><B>Note</B>
<DD>Your application can validate data when the user attempts to close the dialog box. If the data is invalid, you can put up an error message and leave the dialog box open. For more information, see <A HREF=MacAppProgGuide-69.html#MARKER-9-312>"Validating Data When a User Accepts Changes to a Dialog Box," beginning on page 244</A>.<A NAME=MARKER-2-41></A><EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MacAppProgGuide-107.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MacAppProgGuide-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MacAppProgGuide-158.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MacAppProgGuide-109.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MacAppProgGuide-3.html">&copy; Apple Computer, Inc.</A><br>25 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>NSCondition Class Reference</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="NSCondition Class Reference"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40004593-RH2" title="NSCondition"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> &gt; <a href="../../../../../reference/Cocoa/index.html#//apple_ref/doc/uid/TP30001281-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../../../reference/Cocoa/idxProcessManagement-date.html#//apple_ref/doc/uid/TP30001281-TP30000416-TP30000456" target="_top">Process Management</a> &gt; <a href="../index.html" target="_top">NSCondition Class Reference</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/History.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/occ/cl/NSCondition" title="NSCondition"></a><a name="//apple_ref/doc/c_ref/NSCondition" title="NSCondition"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-BABECICG" title="NSCondition"></a><h1>NSCondition Class Reference</h1><div class="spec_sheet_info_box"><table cellspacing="0" class="specbox"><tr><td scope="row"><strong><span style="white-space: nowrap;">Inherits from</span></strong></td><td><div style="margin-bottom:1px"><a href="../../Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/cl/NSObject" target="_top">NSObject</a></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Conforms to</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../Foundation/Protocols/NSLocking_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSLocking" target="_top">NSLocking</a></span><br/><span class="content_text"><a href="../../Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intf/NSObject" target="_top">NSObject (NSObject)</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Framework</span></strong></td><td><div style="margin-bottom:1px">/System/Library/Frameworks/<a href="../../Foundation/ObjC_classic/index.html#//apple_ref/doc/uid/20001091" target="_top">Foundation.framework</a></div></td></tr><tr><td scope="row"><strong>Availability</strong></td><td><div style="margin-bottom:1px"><div>Available in Mac OS X v10.5 and later.</div></div></td></tr><tr><td scope="row"><strong><span class="noWrap">Companion guide</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text"><a href="../../../Conceptual/Multithreading/index.html#//apple_ref/doc/uid/10000057i" target="_top">Threading Programming Guide</a></span><br/></div></td></tr><tr><td scope="row"><strong><span style="white-space: nowrap;">Declared in</span></strong></td><td><div style="margin-bottom:1px"><span class="content_text">NSLock.h</span><br/></div></td></tr></table></div><br/>



<a name="//apple_ref/doc/uid/TP40004593-RH2-1173" title="Overview"></a><h2>Overview</h2>

<p class="spaceabove">The <code>NSCondition</code> class implements a condition variable whose semantics follow those used for POSIX-style conditions. A condition object acts as both a lock and a checkpoint in a given thread. The lock protects your code while it tests the condition and performs the task triggered by the condition. The checkpoint behavior requires that the condition be true before the thread proceeds with its task. While the condition is not true, the thread blocks. It remains blocked until another thread signals the condition object. </p><p>The semantics for using an <code>NSCondition</code> object are as follows:</p><ol class="ol"><li class="li"><p>Lock the condition object.</p></li><li class="li"><p>Test a boolean predicate. (This predicate is a boolean flag or other variable in your code that indicates whether it is safe to perform the task protected by the condition.)</p></li><li class="li"><p>If the boolean predicate is false, call the condition object’s <code>wait</code> or <code>waitUntilDate:</code> method to block the thread. Upon returning from these methods, go to step 2 to retest your boolean predicate. (Continue waiting and retesting the predicate until it is true.) </p></li><li class="li"><p>If the boolean predicate is true, perform the task.</p></li><li class="li"><p>Optionally update any predicates (or signal any conditions) affected by your task. </p></li><li class="li"><p>When your task is done, unlock the condition object.</p></li></ol><p>The pseudocode for performing the preceding steps would therefore look something like the following:</p><div class="codesample"><table><tr><td scope="row"><pre>lock the condition<span></span></pre></td></tr><tr><td scope="row"><pre>while (!(boolean_predicate)) {<span></span></pre></td></tr><tr><td scope="row"><pre>    wait on condition<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>do protected work<span></span></pre></td></tr><tr><td scope="row"><pre>(optionally, signal or broadcast the condition again or change a predicate value)<span></span></pre></td></tr><tr><td scope="row"><pre>unlock the condition<span></span></pre></td></tr></table></div><p>Whenever you use a condition object, the first step is to lock the condition. Locking the condition ensures that your predicate and task code are protected from interference by other threads using the same condition. Once you have completed your task, you can set other predicates or signal other conditions based on the needs of your code. You should always set predicates and signal conditions while holding the condition object’s lock.  </p><p>When a thread waits on a condition, the condition object unlocks its lock and blocks the thread. When the condition is signaled, the system wakes up the thread. The condition object then reacquires its lock before returning from the <code>wait</code> or <code>waitUntilDate:</code> method. Thus, from the point of view of the thread, it is as if it always held the lock.</p><p>A boolean predicate is an important part of the semantics of using conditions because of the way signaling works. Signaling a condition does not guarantee that the condition itself is true. There are timing issues involved in signaling that may cause false signals to appear. Using a predicate ensures that these spurious signals do not cause you to perform work before it is safe to do so. The predicate itself is simply a flag or other variable in your code that you test in order to acquire a Boolean result. </p><p> For more information on how to use conditions, see <span class="content_text"><!--a target="_top" -->Using POSIX Thread Locks<!--/a--></span> in <em><a href="../../../Conceptual/Multithreading/index.html#//apple_ref/doc/uid/10000057i" target="_top">Threading Programming Guide</a></em>.</p>



<a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_1" title="Tasks"></a><h2>Tasks</h2>
<a name="//apple_ref/doc/uid/TP40004593-RH2-SW3" title="Waiting for the Lock"></a>
		<h3 class="tasks">Waiting for the Lock</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/wait">&#8211;&#xA0;wait</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Blocks the current thread until the condition is signaled.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/waitUntilDate:">&#8211;&#xA0;waitUntilDate:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Blocks the current thread until the condition is signaled or the specified time limit is reached.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40004593-RH2-SW5" title="Signaling Waiting Threads"></a>
		<h3 class="tasks">Signaling Waiting Threads</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/signal">&#8211;&#xA0;signal</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Signals the condition, waking up one thread waiting on it.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/broadcast">&#8211;&#xA0;broadcast</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Signals the condition, waking up all threads waiting on it.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40004593-RH2-SW7" title="Accessor Methods"></a>
		<h3 class="tasks">Accessor Methods</h3>
		
		
		
		
		<ul class="tooltip">
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/setName:">&#8211;&#xA0;setName:</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Assigns a name to the receiver.'/>
                    
                </span></li>
			
				
                <li class="tooltip"><span onMouseOut="hidetip()" onMouseOver="showtip(this,event);">
                    
                    <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/name">&#8211;&#xA0;name</a></code>
                    
                    			
                        <img src="../../../../Resources/Images/info_icon.jpg" width="10" height="10" border="0" class="tooltipicon" abstract='Returns the name associated with the receiver.'/>
                    
                </span></li>
			
		</ul>


<a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_2" title="Instance Methods"></a><h2>Instance Methods</h2><a name="//apple_ref/occ/instm/NSCondition/broadcast" title="broadcast"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-borderType" title="broadcast"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_3"></a>
<h3 class="verytight">broadcast</h3>
<p class="spaceabove">Signals the condition, waking up all threads waiting on it.</p><p class="spaceabovemethod">- (void)broadcast</p><h5 class="tight">Discussion</h5><p>If no threads are waiting on the condition, this method does nothing.</p><p>To avoid race conditions, you should invoke this method only while the receiver is locked. </p>
<h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSLock.h</code><a name="//apple_ref/occ/instm/NSCondition/name" title="name"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-SW2" title="name"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_4"></a><h3 class="verytight">name</h3><p class="spaceabove">Returns the name associated with the receiver.</p><p class="spaceabovemethod">- (<a href="../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)name</p><h5 class="tight">Return Value</h5><p>The name of the receiver.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/setName:">&#8211;&#xA0;setName:</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSLock.h</code><a name="//apple_ref/occ/instm/NSCondition/setName:" title="setName:"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-SW1" title="setName:"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_5"></a><h3 class="verytight">setName:</h3><p class="spaceabove">Assigns a name to the receiver.</p><p class="spaceabovemethod">- (void)setName:(<a href="../../Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/c_ref/NSString" target="_top">NSString</a> *)<em>newName</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>newName</em></dt><dd><p>The new name for the receiver. This method makes a copy of the specified string.</p></dd></dl><h5 class="tight">Discussion</h5><p>You can use a name string to identify a condition object within your code. Cocoa also uses this name as part of any error descriptions involving the receiver.</p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="Reference.html#//apple_ref/occ/instm/NSCondition/name">&#8211;&#xA0;name</a></code></li></ul><h5 class="tight">Declared In</h5><code>NSLock.h</code><a name="//apple_ref/occ/instm/NSCondition/signal" title="signal"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-SW6" title="signal"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_6"></a><h3 class="verytight">signal</h3><p class="spaceabove">Signals the condition, waking up one thread waiting on it.</p><p class="spaceabovemethod">- (void)signal</p><h5 class="tight">Discussion</h5><p>You use this method to wake up one thread that is waiting on the condition. You may call this method multiple times to wake up multiple threads. If no threads are waiting on the condition, this method does nothing.</p><p>To avoid race conditions, you should invoke this method only while the receiver is locked. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">Declared In</h5><code>NSLock.h</code><a name="//apple_ref/occ/instm/NSCondition/wait" title="wait"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-SW4" title="wait"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_7"></a><h3 class="verytight">wait</h3><p class="spaceabove">Blocks the current thread until the condition is signaled.</p><p class="spaceabovemethod">- (void)wait</p><h5 class="tight">Discussion</h5><p>You must lock the receiver prior to calling this method. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="../../Foundation/Protocols/NSLocking_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSLocking/lock" target="_top">&#8211;&#xA0;lock</a></code> (<code>NSLocking</code>)</li></ul><h5 class="tight">Declared In</h5><code>NSLock.h</code><a name="//apple_ref/occ/instm/NSCondition/waitUntilDate:" title="waitUntilDate:"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-borderRect" title="waitUntilDate:"></a><a name="//apple_ref/doc/uid/TP40004593-RH2-DontLinkElementID_8"></a>
<h3 class="verytight">waitUntilDate:</h3>
<p class="spaceabove">Blocks the current thread until the condition is signaled or the specified time limit is reached.</p><p class="spaceabovemethod">- (BOOL)waitUntilDate:(<a href="../../Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDate" target="_top">NSDate</a> *)<em>limit</em></p><h5 class="tight">Parameters</h5><dl class="termdef"><dt><em>limit</em></dt><dd><p>The time at which to wake up the thread if the condition has not been signaled. </p></dd></dl><h5 class="tight">Return Value</h5><p><code>YES</code> if the condition was signaled; otherwise, <code>NO</code> if the time limit was reached. </p><h5 class="tight">Discussion</h5><p>You must lock the receiver prior to calling this method. </p><h5 class="tight">Availability</h5><ul class="availability"><li class="availability">Available in Mac OS X v10.5 and later.</li></ul><h5 class="tight">See Also</h5><ul class="availability"><li class="availability">  <code><a href="../../Foundation/Protocols/NSLocking_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSLocking/lock" target="_top">&#8211;&#xA0;lock</a></code> (<code>NSLocking</code>)</li></ul>
<h5 class="tight">Declared In</h5><code>NSLock.h</code>





        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <!-- Previous button --><span style="margin-left: 8px"><a href="../History/History.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-09-09<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Reference/NSCondition_class/Reference/Reference.html%3Fid%3DTP40004593-1.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Reference/NSCondition_class/Reference/Reference.html%3Fid%3DTP40004593-1.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Reference/NSCondition_class/Reference/Reference.html%3Fid%3DTP40004593-1.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
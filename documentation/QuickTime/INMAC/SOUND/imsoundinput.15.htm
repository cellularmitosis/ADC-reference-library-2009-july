<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE>Sound Input Parameter Blocks (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.14.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.14.htm">Section top</A> | <A target="doc" HREF="imsoundinput.16.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="RH3.RoutineHd3"><A NAME="pgfId=1101"> </A>Sound Input Parameter Blocks<A NAME="marker=313"> </A></H1><P CLASS="T0.Text0"><A NAME="pgfId=1116"> </A>The <TT CLASS="cv">SPBRecord</TT> and <TT CLASS="cv">SPBRecordToFile</TT> functions require a pointer to a sound input parameter block that defines characteristics of the recording. If you define a sound input completion routine or a sound input interrupt routine, your routine receives a pointer to&nbsp;a sound input parameter block. If you are using only the Sound Input Manager's high-level <TT CLASS="cv">SndRecord</TT> and <TT CLASS="cv">SndRecordToFile</TT> functions, the operation of sound input parameter blocks is transparent to your application. A sound input parameter block is defined by the <TT CLASS="cv">SPB</TT> data type.<A NAME="marker=312"> </A></P><CODE CLASS="CvF.CodeFull"><A NAME="pgfId=13560"> </A>TYPE SPB =<BR>RECORD<BR>&nbsp;&nbsp;&nbsp;&nbsp;inRefNum:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{reference number of input device}<BR>&nbsp;&nbsp;&nbsp;&nbsp;count:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of bytes to record}<BR>&nbsp;&nbsp;&nbsp;&nbsp;milliseconds:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{number of milliseconds to record}<BR>&nbsp;&nbsp;&nbsp;&nbsp;bufferLength:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{length of buffer to record into}<BR>&nbsp;&nbsp;&nbsp;&nbsp;bufferPtr:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ptr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pointer to buffer to record into}<BR>&nbsp;&nbsp;&nbsp;&nbsp;completionRoutine:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProcPtr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pointer to a completion routine}<BR>&nbsp;&nbsp;&nbsp;&nbsp;interruptRoutine:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ProcPtr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{pointer to an interrupt routine}<BR>&nbsp;&nbsp;&nbsp;&nbsp;userLong:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{for application's use}<BR>&nbsp;&nbsp;&nbsp;&nbsp;error:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSErr;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{error returned after recording}<BR>&nbsp;&nbsp;&nbsp;&nbsp;unused1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongInt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{reserved}<BR>END;<BR></CODE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5906"> </A><A NAME="marker=5910"> </A><A NAME="marker=5911"> </A><TT CLASS="cv">inRefNum</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1104"> </A>The reference number of the sound input device (as received from the <TT CLASS="cv">SPBOpenDevice</TT> function) from which the recording is to occur.<A NAME="marker=296"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5917"> </A><A NAME="marker=5921"> </A><TT CLASS="cv">count</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1105"> </A>On input, the number of bytes to record. On output, the number of bytes actually recorded. If this field specifies a longer recording time than the <TT CLASS="cv">milliseconds</TT> field, then the <TT CLASS="cv">milliseconds</TT> field is ignored on input.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5927"> </A><A NAME="marker=5931"> </A><TT CLASS="cv">milliseconds</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1106"> </A>On input, the number of milliseconds to record. On output, the number of milliseconds actually recorded. If this field specifies a longer recording time than the <TT CLASS="cv">count</TT> field, then the <TT CLASS="cv">count</TT> field is ignored on input.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5937"> </A><A NAME="marker=5941"> </A><TT CLASS="cv">bufferLength</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1107"> </A>The length of the buffer into which recorded sound data is placed. The recording time specified by the <TT CLASS="cv">count</TT> or <TT CLASS="cv">milliseconds</TT> field is truncated to fit into this length, if necessary.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5947"> </A><A NAME="marker=5951"> </A><TT CLASS="cv">bufferPtr</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1108"> </A>A pointer to the buffer into which recorded data is placed. If this field is <TT CLASS="cv">NIL</TT>, then the <TT CLASS="cv">count</TT>, <TT CLASS="cv">milliseconds</TT>, and <TT CLASS="cv">bufferLength</TT> fields are ignored and the recording will continue indefinitely until the <TT CLASS="cv">SPBStopRecording</TT> function is called. However, the data is not stored anywhere, so setting this field to <TT CLASS="cv">NIL</TT> is useful only if you want to do something in a sound input interrupt routine but do not want to save the recorded sound.<A NAME="marker=301"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5957"> </A><A NAME="marker=5961"> </A><TT CLASS="cv">completionRoutine</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1109"> </A> A pointer to a completion routine that is called when the recording terminates as a result of your calling the <TT CLASS="cv">SPBStopRecording</TT> function or when the limit specified by the <TT CLASS="cv">count</TT> or <TT CLASS="cv">milliseconds</TT> field is reached. The completion routine executes only if <TT CLASS="cv">SPBRecord</TT> is called asynchronously and therefore is called at interrupt time.<A NAME="marker=412"> </A><A NAME="marker=128"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5968"> </A><A NAME="marker=5972"> </A><TT CLASS="cv">interruptRoutine</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1110"> </A> A pointer to a routine that is called by asynchronous recording devices when their internal buffers are full. You can define a sound input interrupt routine to modify uncompressed sound samples before they are placed into the buffer specified in the <TT CLASS="cv">bufferPtr</TT> parameter. The interrupt routine executes only if <TT CLASS="cv">SPBRecord</TT> is called asynchronously and therefore is called at interrupt time.<A NAME="marker=413"> </A></BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5979"> </A><A NAME="marker=5983"> </A><TT CLASS="cv">userLong</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1111"> </A>A long integer available for the application's own use. You can use this field, for instance, to pass a handle to an application-defined structure to the completion routine or to the interrupt routine.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5989"> </A><A NAME="marker=5993"> </A><TT CLASS="cv">error</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1112"> </A>On exit, the error that occurred during recording. This field contains a value greater than 0 while recording unless an error occurs, in which case it contains a value less than 0 that indicates an operating system error. Your application can poll this field to check on the status of an asynchronous recording. If recording terminates without an error, this field contains 0.</BLOCKQUOTE><P CLASS="DT.DefinitionTerm"><A NAME="pgfId=5999"> </A><A NAME="marker=6003"> </A><TT CLASS="cv">unused1</TT></P><BLOCKQUOTE CLASS="DD.DefinitionDef"><A NAME="pgfId=1113"> </A>Reserved for use by Apple. You should always initialize this field&nbsp;to&nbsp;0.<A NAME="marker=307"> </A><A NAME="marker=196"> </A></BLOCKQUOTE><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound Manager</I><P>| <A target="doc" HREF="imsoundinput.14.htm">Previous</A> | <A target="doc" HREF="imsoundinput.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundinput.htm">Chapter top</A> | <A target="doc" HREF="imsoundinput.14.htm">Section top</A> | <A target="doc" HREF="imsoundinput.16.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
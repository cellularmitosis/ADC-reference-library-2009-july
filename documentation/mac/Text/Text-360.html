<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Testing for the Script Manager and Script Systems(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING360></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-359.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-361.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-354.html"><B>Chapter 6 - Script Manager</B></A> / <A HREF="Text-359.html"><B>Using the Script Manager</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING360-0></A>
<H2>Testing for the Script Manager and Script Systems</H2>
 <A NAME=MARKER-2-333></A>This section describes how to use the <CODE>Gestalt</CODE> function to test for the current version of the Script Manager and the number of active script systems. For details on the <CODE>Gestalt</CODE> function, see the Gestalt Manager chapter of <I><A HREF="../OSUtilities/OSUtilities-2.html">Inside Macintosh: Operating System Utilities</A></I>.<P>
 The Operating System initializes the Script Manager at startup. The Script Manager then initializes the Roman script system. Next the Script Manager initializes any other installed 1-byte simple script system whose <CODE>smsfAutoInit</CODE> bit (see <A HREF=Text-372.html#MARKER-9-523>page 6-69</A>) is set. The Script Manager then allows the script extensions WorldScript I and WorldScript II (if present) to initialize all installed 1-byte complex and 2-byte script systems.<P>
 <A NAME=MARKER-2-649></A>When initializing a script system, the Script Manager or script extension first checks to make sure that there is enough memory for the script system, and then checks that an international bundle resource is present in the System file and that at least one font in the proper ID range for that script system is present in the System file or in the Fonts folder. If these resources are present, the script system is considered to be <B>enabled</B> (available for use by the Script Manager and applications). If the required resources are not available, the script system remains disabled.<P>
<DL>
<DT><B>Note</B>
<DD>The Script Manager is fully loaded and all script systems are enabled before any files of type <CODE>'INIT'</CODE> in the Extensions folder are launched. Thus, all Script Manager routines can be called from system extensions.<EM></EM> <B><A NAME=MARKER-2-83></A>  </B><A NAME=MARKER-2-651></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 <A NAME=MARKER-2-70></A>Use <CODE>Gestalt</CODE> with the <CODE>gestaltScriptMgrVersion</CODE> selector to obtain a result in the response parameter that identifies the version number of the Script Manager. This is the same value returned by a call to the <CODE>GetScriptManagerVariable</CODE> function with the selector constant <CODE>smVersion</CODE>. <A HREF=Text-358.html#MARKER-9-549>Table 6-1 on page 6-6</A> lists some of the routines and features available with the principal versions of the Script Manager.<A NAME=MARKER-2-653></A><P>
 <A HREF=#MARKER-9-570>Table 6-2</A> gives more detail on the version numbers returned by <CODE>Gestalt</CODE> or by <CODE>GetScriptManagerVariable</CODE> with the selector <CODE>smVersion</CODE>, for all versions of system software and all versions of the Script Manager. It also shows the Roman script system versions returned by the <CODE>GetScriptVariable</CODE> function with the selector <CODE>smScriptVersion</CODE>.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-570></A><B>Table 6-2 Version numbers for the Script Manager and Roman script system</B></CAPTION>
<TH>System software version<TH>Script Manager <BR>(newer ROMs)<TH>Script Manager <BR>(older ROMs)<TH>Roman <BR>script system<TR>
<TD>6.0.3 and earlier<TD>N.A.<TD>&lt;= $20F<TD>&lt;= $101<TR>
<TD>6.0.4 Roman<TD>$215<TD>$211<TD>$101<TR>
<TD>6.0.4 non-Roman<TD>$216<TD>$212<TD>$101<TR>
<TD>6.0.5 all<TD>$217 ( = 2.23)<TD>$213<TD>$101<TR>
<TD colspan=4>Above this line, minor version numbers are binary; below, they are BCD:<TR>
<TD>6.0.7 all<A HREF="#FOOTNOTE-4">[4]</A><TD>$231 ( = 2.3.1)<TD>$230<TD>$101<TR>
<TD>J-6.0.7.1 (Japanese)<A HREF="#FOOTNOTE-5">[5]</A><TD>$231<TD>$230<TD>$101<TR>
<TD>6.0.8 all<TD>$231<TD>$230<TD>$101<TR>
<TD>6.1 (non-Roman)<TD>$241<TD>$240<TD>$101<TR>
<TD>7.0<TD>$700<TD>$700<TD>$700<TR>
<TD>7.0.1 Roman<TD>$700<TD>$700<TD>$700<TR>
<TD>7.0.1 non-Rman<TD>$701<TD>$701<TD>$701<TR>
<TD>7.1<TD>$710<TD>$710<TD>$710</TABLE>
<P>
<DL>
<DT><B>Note</B>
<DD>In versions of system software earlier than 6.0.7, the major and minor version numbers are each treated as if they were binary. Thus a result of $217 from <CODE>Gestalt</CODE> means a Script Manager version of 2.23 (in decimal). Starting with system 6.0.7, version numbers are returned as binary-coded decimal numbers, so a result of $710 means a Script Manager version of 7.10 (or 7.1.0).<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 Use the <CODE>Gestalt</CODE> selector <CODE>gestaltScriptCount</CODE> to obtain a result in the response parameter that gives the number of active script systems. This is the same value returned by a call to the <CODE>GetScriptManagerVariable</CODE> function with the <CODE>smEnabled</CODE> selector.<P>
 Obtaining the number of active script systems is most useful for testing whether <BR>more than a single script system is present. If the result is 1, only the Roman script system is present and text-handling is simplest. If the result is greater than 1, at <BR>least one non-Roman script system is present, and your application needs to be able to handle its text<A NAME=MARKER-2-2></A>.<A NAME=MARKER-9-1></A><P>
<HR>

<A NAME="FOOTNOTE-4">[4] <CODE>Gestalt</CODE> actually returns $606 as the system version for non-Roman versions of system 6.0.7.
<HR>

<A NAME="FOOTNOTE-5">[5] <CODE>Gestalt</CODE> actually returns $609 as the system version for system J-6.0.7.1.
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-359.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-361.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

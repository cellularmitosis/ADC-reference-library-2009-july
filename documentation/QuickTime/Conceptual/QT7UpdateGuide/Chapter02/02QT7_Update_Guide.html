<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>QuickTime 7 Update Guide: What&amp;#8217;s New in QuickTime 7</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="What&amp;#8217;s New in QuickTime 7"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001163-CH313" title="What&amp;#8217;s New in QuickTime 7"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000433" target="_top">QuickTime</a> &gt; <a href="../Chapter01/Introduction.html#//apple_ref/doc/uid/TP40001163-CH240-DontLinkElementID_160">QuickTime 7 Update Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Chapter01/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Chapter03/03QT7_Update_Guide.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_161" title="What&amp;#8217;s New in QuickTime 7"></a><h1><a name="//apple_ref/doc/uid/TP40001163-CH313-TPXREF101" title="What&amp;#8217;s New in QuickTime 7 "></a>What&#8217;s New in QuickTime 7 </h1><p>This chapter describes in detail the many new
and enhanced features available in QuickTime 7. It is intended to
provide developers with a conceptual overview, in addition code
samples and illustrations of usage, so that developers can take
advantage of many of these new features in QuickTime 7 in their
applications. </p>
<p>The new functions discussed in this chapter are cross-referenced,
with links, to their complete descriptions in Chapter 3, <span class="content_text"><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-TPXREF101">“New Functions, Data Types, and Constants in QuickTime 7.”</a></span> </p>
<p>If you are a QuickTime API-level developer, content author,
multimedia producer, or Webmaster who is currently working with
QuickTime, you should read this chapter in order to understand the
fundamental changes that have taken place in the QuickTime software
architecture.</p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-353285">Installing QuickTime 7</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-TPXREF116">QuickTime in Perspective</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BBCCCHCE">Changes to QuickTime Player and QuickTime Pro</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-CJBICDCB">New QuickTime Kit Framework</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BBCIAFAI">Audio Enhancements</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BBCGDBDF">Video Enhancements</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BBCJJGHE">Replacing NewMovieFrom... Functions</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BBCBDDGA">QuickTime Metadata Enhancements and API</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BBCDCDGC">QuickTime Sample Table API</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BBCJEIBE">JavaScript Support and Accessibility in Safari</a>
				
			<br/>
			
        
			
			
				<a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-BAJFHABC">Other Changes and Enhancements</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001163-CH313-353285" title="Installing QuickTime 7"></a><h2>Installing
QuickTime 7</h2>
<p>QuickTime 7 is installed automatically as part of Mac OS X
v10.4. </p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-353321" title="Hardware and Software Requirements"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-TPXREF117" title="Hardware and Software Requirements"></a><h3>Hardware and Software
Requirements</h3>
<p>QuickTime 7 requires the following minimum configuration:</p>
<ul class="spaceabove"><li class="li"><p>Mac OS X v10.4, v10.3, or Windows</p></li>
<li class="li"><p>PowerPC G3 or better running at 400 MHz or higher</p></li>
<li class="li"><p>At least 256 MB of RAM</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-374857" title="New Pro Key Required"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-TPXREF118" title="New Pro Key Required"></a><h3>New Pro Key Required</h3>
<p>QuickTime 7 replaces existing point releases of QuickTime
6 for Mac OS X. A new Pro key is required; QuickTime 6 Pro keys
will not unlock the Pro features of QuickTime 7.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-652196" title="QuickTime in Perspective"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-TPXREF116" title="QuickTime in Perspective"></a><h2>QuickTime in
Perspective</h2>
<p>The QuickTime API is dedicated to extending the reach of application
developers by letting them invoke the full range of multimedia&#8217;s
capabilities. It supports a wide range of standards-based formats,
in addition to proprietary formats from Apple and others. The QuickTime
API is not static, however, and has evolved over the course of the
last decade to adopt new idioms, new data structures, and new ways
of doing things. </p>
<p>The C/C++ portion of the QuickTime API comprises more than
2500 functions that provide services to applications. These services
include audio and video capture and playback; movie editing, composition,
and streaming; still image import, export, and display; audio-visual
interactivity, and more. </p>
<p>A new Cocoa (Objective-C) API for QuickTime, available in
Mac OS X v10.4 and v10.3, provides a much less complex programmer
interface, and represents a distillation and abstraction of the
most essential QuickTime functions as a small set of classes and methods.
A great deal of functionality has been packed into a relatively
small objective API.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-787360" title="New Features of QuickTime 7"></a><h3>New
Features of QuickTime 7</h3>
<p>This release of QuickTime includes a number of major new features
for users, developers, and content creators, including improvements
in the QuickTime architecture, file format, user interface, and
API. There are significant improvements in the audio, video, and metadata
capabilities, as well as a new Cocoa API, and numerous other enhancements.</p>
<ul class="spaceabove"><li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-739480">“Changes to QuickTime Player and QuickTime Pro”</a></span> describes the
new user interface for QuickTime Player and QuickTime Pro and some
of the changes from previous versions of the player. </p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-748236">“New QuickTime Kit Framework”</a></span> describes a new Cocoa (Objective-C)
framework for developing QuickTime applications. This new API opens
the world of QuickTime programming to a new group of developers
without requiring them to learn the large, complex C/C++ QuickTime
API. The new framework encapsulates a tremendous amount of QuickTime
functionality in a small, easily-mastered API with a handful of new
objects, classes, and methods.</p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-718813">“Audio Enhancements”</a></span> describes the many new audio features
of QuickTime 7, including support for multichannel sound, playback,
capture, compression, and export of high-resolution audio, a new
sound description, and new functions for movie audio control, audio
conversion configuration, audio extraction, movie export, and level
and frequency metering. </p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-662682">“Video Enhancements”</a></span> describes QuickTime&#8217;s new support for
frame reordering video compression and the H.264 codec. Frame reordering
support is a major advance that involves new sample tables for video,
allowing video frames to have independent decode and display times.
This allows improved display, editing, and compression of H.264
and other advanced video codecs. A new set of functions and structures
are introduced to allow developers to work with samples that have
independent decode and display times. </p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-736845">“New Abstractions Layers For OpenGL Rendering”</a></span> describes
the new Visual Context, an abstraction layer that eliminates dependence
on graphics worlds (GWorlds) and supports rendering directly to
engines such as OpenGL.</p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-556033">“Replacing NewMovieFrom... Functions”</a></span> describes the <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/NewMovieFromProperties">NewMovieFromProperties</a></code> function,
which allows you to set up properties before creating a movie. This
function also allows you to create movies that are not necessarily
associated with a graphics world, movies that can render their output
to a visual context, such as an OpenGL texture buffer, and movies
that play to a particular audio device.</p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-674504">“QuickTime Metadata Enhancements and API”</a></span> describes the new QuickTime extensible
metadata format, allowing developers to efficiently reference text,
audio, video, or other material that describes a movie, a track,
or a media. Support is also added for including metadata from other
file types in native format; the QuickTime 7 release includes native
support for iTunes metadata.</p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-678597">“QuickTime Sample Table API”</a></span> describes the new API for working
with QT Sample Tables, a logical replacement for arrays of media
sample references. The new API greatly extends the functionality
of media sample references, and the new API supports frame reordering
compressed media.</p></li>
<li class="li"><p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-648083">“JavaScript Support and Accessibility in Safari”</a></span> describes the
JavaScript support for the Safari browser. This means you can now
use JavaScript to control QuickTime when web pages are viewed using
Safari.</p></li>
<li class="li"> <p><span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-788325">“Other Changes and Enhancements”</a></span> discusses QuickTime 7&#8217;s
new persistent cache option, which is important for web authors
and content developers to understand because it may impact the way
that QuickTime content is downloaded and saved from their websites.
New updates and fixes to QuickTime for Java are also discussed in
this section.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-652333" title="New Directions in QuickTime 7"></a><h3>New
Directions in QuickTime 7</h3>
<p>Key areas of change evident in QuickTime 7 are:</p>
<ul class="spaceabove"><li class="li"><p>A shift of emphasis toward a Core Audio approach
to sound, and away from the Sound Manager approach, throughout QuickTime.</p></li>
<li class="li"><p>A shift of emphasis toward configuring components using component
properties and an abstraction layer, or context, and away from the
exclusive use of standard dialogs supplemented by direct access
to low-level components. </p></li>
<li class="li"><p>A shift of emphasis toward a more object-oriented organization,
with more high-level functionality in QuickTime itself supporting
lighter-weight applications.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-786598" title="What Developers Need To Do"></a><h4>What
Developers Need To Do</h4>
<p>If you work with audio at a relatively low level, you should
become familiar with the Mac OS X Core Audio framework and learn
how it differs from the older Sound Manager. The use of Core Audio
concepts and data structures is becoming ubiquitous in QuickTime
for both Mac OS X and Windows. For details, see Apple&#8217;s <span class="content_text"><a href="http://developer.apple.com/documentation/MusicAudio/Reference/CoreAudio/index.html" target="_top">Core Audio</a></span> documentation.</p>
<p>If you work directly with components, you should become familiar
with the API for discovering, getting, and setting component properties.
While standard dialogs for configuration are still common, there
are often times when either no dialog or an application-specific
dialog is preferable, as well as cases where low-level control or device-specific
configuration is needed that a standard dialog cannot supply. </p>
<p>For example, the component property API allows configuration
at any level of detail without requiring a user interface dialog
or direct communication with low-level components. In many cases,
an abstraction layer, or <strong>context</strong>&#8211;&#8211;either
visual or audio&#8211;&#8211;can be created, allowing transparent connection
to different kinds of low-level components, devices, or rendering
engines. </p>
<p>The new extensible QuickTime metadata format, discussed in
the section <span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-674504">“QuickTime Metadata Enhancements and API,”</a></span> uses a similar method of configuration
through an abstract set of properties, as a means of &#8220;future-proofing&#8221;
the architecture. The same is true of the new API for working with
QuickTime sample tables, described in the section <span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-678597">“QuickTime Sample Table API.”</a></span></p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-752312" title="Object Model Evolution"></a><h4>Object
Model Evolution</h4>
<p>A substantial reorganization of the QuickTime engine has been
taking place &#8220;under the hood&#8221; in this software release. This
reorganization is intended to allow increased access to QuickTime
functionality from object-oriented frameworks such as Cocoa (Objective-C). </p>
<p>As the QuickTime document object model continues to evolve,
the goal is to provide developers with easier access to the more
powerful parts of the QuickTime engine using relatively lightweight
object-oriented applications or even scripts&#8211;&#8211;without having
to delve into the large and sometimes complex procedural C/C++ QuickTime
API. If you haven&#8217;t experimented with Cocoa and the Xcode tools
yet, this is a good time to get started.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-652402" title="In Summary QuickTime 6 through QuickTime 7"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-TPXREF120" title="In Summary QuickTime 6 through QuickTime 7"></a><h3>In Summary QuickTime
6 through QuickTime 7</h3>
<p>The following table summarizes the point releases of QuickTime
6 and the features of QuickTime 7.</p><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>QuickTime version </p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Mac OS X</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Windows</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Mac OS 9</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Features</p></th>
</tr>


<tr>
<td  scope="row"><p>6</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p>MPEG-4 and lots more. </p></td>
</tr>
<tr>
<td  scope="row"><p>6.01</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p>Bug fix for QuickTime 6. Last version for all three platforms. </p></td>
</tr>
<tr>
<td  scope="row"><p>6.03</p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p>     x</p></td>
<td ><p>Bug fixes to address security issues. Mac OS 9 only.</p></td>
</tr>
<tr>
<td  scope="row"><p>6.1</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p></p></td>
<td ><p>Improved MPEG-4 video, full-screen modes, wired actions. </p></td>
</tr>
<tr>
<td  scope="row"><p>6.2</p></td>
<td ><p>     x</p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p>Support for iTunes 4, enhanced AAC codec, limited DRM.</p></td>
</tr>
<tr>
<td  scope="row"><p>6.3</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p></p></td>
<td ><p>Improved AAC codec, 3GPP support, which includes AMR codec. </p></td>
</tr>
<tr>
<td  scope="row"><p>6.4 for
Mac OS X</p></td>
<td ><p>     x</p></td>
<td ><p></p></td>
<td ><p></p></td>
<td ><p>New data reference functions, multithreading, new graphics functions,
component and movie property access, other API additions.</p></td>
</tr>
<tr>
<td  scope="row"><p>6.5</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p></p></td>
<td ><p>3GPP, 3GPP2, and AMC support for mobile multimedia, Unicode
text support.</p></td>
</tr>
<tr>
<td  scope="row"><p>6.5.1</p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p></p></td>
<td ><p>Apple Lossless codec for audio.</p></td>
</tr>
<tr>
<td  scope="row"><p>7 </p></td>
<td ><p>     x</p></td>
<td ><p>     x</p></td>
<td ><p></p></td>
<td ><p>High-resolution, multichannel audio support, frame reordering
video and H.264 support, new Cocoa API, support for rendering to OpenGL
and elimination of dependence on graphics worlds (GWorlds), new metadata
format, QuickTime sample table API, changes to QuickTime Player
and Pro UI.</p></td>
</tr>

</table></div>
<a name="//apple_ref/doc/uid/TP40001163-CH313-739480" title="Changes to QuickTime Player and QuickTime Pro"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCCCHCE" title="Changes to QuickTime Player and QuickTime Pro"></a><h2>Changes to QuickTime
Player and QuickTime Pro</h2>
<p>QuickTime 7 introduces a number of new features and changes
to the user interface of QuickTime Player and QuickTime Pro. These
are briefly described in this section. Both Player and Pro are available
in Mac OS X v10.4 and are also backward-compatible with Mac OS X
v10.3.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-744168" title="New in QuickTime Player"></a><h3>New
in QuickTime Player</h3>
<p>The new QuickTime Player, shown in <span class="content_text">Figure 2-1</span>,
is a native Cocoa application. The intent of this new design is
to better integrate QuickTime Player in general with the Mac OS
X user experience. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-745648" title="Figure 2-1The new QuickTime Player application"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCCBECC" title="Figure 2-1The new QuickTime Player application"></a><p><strong>Figure 2-1&nbsp;&nbsp;</strong>The new QuickTime Player application</p>
<img src = "../art/new_qtplayer.jpg" alt = "" ></div><br/>
<p>The following are some of the new user-level features available
in QuickTime Player:</p>
<ul class="spaceabove"><li class="li"><p><strong>H.264 video support</strong>. This
state-of-the-art, standards-based codec delivers exceptional-quality
video at the lowest data rate possible, across the entire bandwidth spectrum.</p></li>
<li class="li"><p><strong>New audio and playback controls</strong>. Users
can use the new A/V Controls window (previously available only to
QuickTime Pro users) to adjust settings for the best audio and playback
experience. Users can now easily change settings, including playback speed,
volume, bass, treble, and balance, as shown in <span class="content_text">Figure 2-2</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-789990" title="Figure 2-2New audio, playback, and video controls in QuickTime Player and QuickTime Player with Core Image support in Mac OSX v10.4"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCHFCEJ" title="Figure 2-2New audio, playback, and video controls in QuickTime Player and QuickTime Player with Core Image support in Mac OSX v10.4"></a>
<p><strong>Figure 2-2&nbsp;&nbsp;</strong>New audio, playback, and video controls
in QuickTime Player and QuickTime Player with Core Image support
in Mac OSX v10.4</p><img src = "../art/av_controls.jpg" alt = "" ></div><p>A
new video controls panel is also available, as shown in the right
portion of <span class="content_text">Figure 2-2</span>. This option, however, is only available
for users with a special video card on Mac OS X v10.4 where Core
Image support is provided. The video controls let the user adjust
for brightness, color, contrast, and tint.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_162" title="Note"></a><p><strong>Note:</strong>&nbsp;Core
Image extends the basic graphics capabilities of the system to provide
a framework for implementing complex visual behaviors in your application.
Core Image uses GPU-based acceleration and 32-bit floating-point
support to provide fast image processing and pixel-level accurate
content.</p></div></li>
<li class="li"><p><strong>Zero-configuration streaming</strong>. You no longer
need to set your Internet connection speed in QuickTime Preferences.
QuickTime automatically determines the best connection speed for
your computer. If a connection is lost during streaming, QuickTime
automatically reconnects to the server.</p></li>
<li class="li"><p><strong>Live resize</strong>. Playback continues smoothly
as you change the size of the QuickTime Player window. (Note that
there may be hardware dependencies that affect the speed and smoothness
of live resizing.)</p></li>
<li class="li"><p><strong>Multichannel audio</strong>. QuickTime Player can
now play 24 audio channels&#8211;&#8211;and beyond. With external speakers,
you can enjoy the full sound effects of movies and games. </p><p>By
accessing the Window &gt; Show Movie Properties dialog and selecting
Audio Settings, as shown in <span class="content_text">Figure 2-3</span>, you can set
the volume, balance, bass, and treble for a QuickTime movie. In
addition, if you select the sound track property in the dialog,
you can set the speaker for each audio channel in that track, specifying
the speaker through which the audio can be heard.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-785539" title="Figure 2-3The audio settings dialog with sliders for audio control and channel speaker assignments "></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCGEGFJ" title="Figure 2-3The audio settings dialog with sliders for audio control and channel speaker assignments "></a>
<p><strong>Figure 2-3&nbsp;&nbsp;</strong>The audio settings dialog with sliders
for audio control and channel speaker assignments </p>
<img src = "../art/audio_settings_channels.jpg" alt = "" ></div></li>
<li class="li"><p><strong>All-new content guide</strong>. The completely redesigned
QuickTime Content Guide provides the latest in news, education,
and entertainment on the Internet.</p></li>
<li class="li"><p><strong>Screen-reader compatibility</strong>. Using VoiceOver,
included with Mac OS X v10.4, users with visual disabilities can
enjoy QuickTime Player features.</p></li>
<li class="li"><p><strong>Spotlight-friendly content</strong>. New in Mac
OS X v10.4, Spotlight makes it easy to find your QuickTime content.
Spotlight can search for movie attributes such as artist, copyright,
codec, and so on.</p></li>
<li class="li"><p><strong>Easy access to QuickTime Pro</strong>. Items available
only in QuickTime Pro display &#8220;Pro&#8221; by their names. If you choose
one of these items, you&#8217;ll see a definition of the feature and
learn how to upgrade to QuickTime Pro. Note that the designation
&#8220;Pro&#8221; is only present when QuickTime Player is not the Pro version.</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-744183" title="New in QuickTime Pro"></a><h3>New
in QuickTime Pro</h3>
<p>The following are some of the new user-level features available
in the Pro version of QuickTime Player:</p>
<ul class="spaceabove"><li class="li"><p><strong>Creating H.264 video.</strong> Users
can take advantage of this codec for a variety of video needs, ranging
from HD (high definition) to 3G (for mobile devices). This new codec provides
better quality at lower bandwidth, enabling users to deliver high-quality video
over the Internet. </p></li>
<li class="li"><p><strong>Creating multichannel audio</strong>. Users can
create a rich multimedia experience by labeling each audio channel
(for example, Left, Right, Left Surround, LFE, and so on), as shown
in <span class="content_text">Figure 2-3</span>. QuickTime automatically mixes the audio
to work with the speaker setup of each user.</p></li>
<li class="li"><p><strong>Recording audio and video</strong>. With a digital
video camera connected to your computer, you can enrich your email
messages with video clips. In addition, with enhanced recording
of audio and video, users can add narration, for example, to their
slide shows.</p></li>
<li class="li"><p><strong>Sharing movies</strong>. Users can easily create
a movie file for sending via email or posting to your .Mac HomePage.
Select File &gt; Share and a dialog appears that lets you choose
a maximum size for the attached movie you want to share and then
exports the movie to either your Mail program or to your .Mac HomePage,
as shown in <span class="content_text">Figure 2-4</span>. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-785875" title="Figure 2-4Sharing attached movies either as email or on your .Mac HomePage"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJHCJDC" title="Figure 2-4Sharing attached movies either as email or on your .Mac HomePage"></a><p><strong>Figure 2-4&nbsp;&nbsp;</strong>Sharing
attached movies either as email or on your .Mac HomePage</p>
<img src = "../art/sharing.jpg" alt = "" ></div></li>
<li class="li"><p><strong>Full screen playback enhancements</strong>. Full
screen mode now provides floating Dashboard-style controls similar
to the controls available for DVD Player. These include pause, play,
stop, fast forward, and rewind, as illustrated in <span class="content_text">Figure 2-5</span>.
Users move the pointer to display the controller; after a few seconds,
the controller fades away. Note that the controller does not appear
with interactive movies when the mouse is moved, so that it does
not interfer with movie content. Users can press the keyboard control-C
to make it appear or disappear immediately. This new zooming transition, enabling
you to go in and out of Full Screen, is dependent on the user&#8217;s
computer hardware, as well as the media being played back.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-785901" title="Figure 2-5Full screen controls with a floating movie controller"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCCJGDI" title="Figure 2-5Full screen controls with a floating movie controller"></a>
<p><strong>Figure 2-5&nbsp;&nbsp;</strong>Full screen controls with a floating
movie controller</p><img src = "../art/full_screen_controls.jpg" alt = "" ></div><p>Users can access full screen
mode by choosing the View &gt; Full Screen or using its keyboard
equivalent. To display the DVD-style full screen controls, users
choose QuickTime Player &gt; Preferences &gt; Full Screen and select
&#8220;Display full screen controls,&#8221; as shown in <span class="content_text">Figure 2-6</span>.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-785927" title="Figure 2-6Full Screen preferences with the full screen controls selected"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCEAGCC" title="Figure 2-6Full Screen preferences with the full screen controls selected"></a>
<p><strong>Figure 2-6&nbsp;&nbsp;</strong>Full Screen preferences with the full
screen controls selected</p><img src = "../art/qtplay_fullscreen_record.jpg" alt = "" ></div></li>
<li class="li"><p><strong>Concurrent exports</strong>. Users can export multiple
files at once&#8212;and continue with their next playback or editing
task. <span class="content_text">Figure 2-7</span> shows the default export settings for exporting a
movie to a QuickTime movie.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-746032" title="Figure 2-7The default export settings for exporting a movie to a QuickTime movie"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCEFCDA" title="Figure 2-7The default export settings for exporting a movie to a QuickTime movie"></a><p><strong>Figure 2-7&nbsp;&nbsp;</strong>The default export settings for exporting
a movie to a QuickTime movie</p><img src = "../art/export_settings.jpg" alt = "" ></div></li>
<li class="li"><p>The export options enable Pro users to export to a variety
of image, text, audio, and movie formats, as shown in <span class="content_text">Figure 2-8</span>. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-752991" title="Figure 2-8Export options available in QuickTime Pro"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCIHGIC" title="Figure 2-8Export options available in QuickTime Pro"></a>
<p><strong>Figure 2-8&nbsp;&nbsp;</strong>Export options available in QuickTime
Pro</p><img src = "../art/export_options.jpg" alt = "" ></div></li>
<li class="li"><p><strong>Enhanced and redesigned interface for movie settings</strong>.
The Movie Properties window has been redesigned to facilitate movie
authoring. <span class="content_text">Figure 2-9</span> illustrates the Movie Properties dialog,
with annotations of the movie selected.</p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-753039" title="Figure 2-9The Movie Properties dialog"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCIAGBG" title="Figure 2-9The Movie Properties dialog"></a><p><strong>Figure 2-9&nbsp;&nbsp;</strong>The Movie Properties dialog</p>
<img src = "../art/show_mov_prop.jpg" alt = "" ></div></li>
<li class="li"><p><strong>New options for image manipulation</strong> in the
Visual Settings pane of the Movie Properties dialog of a video track,
as shown in <span class="content_text">Figure 2-10</span>. </p><div class="item_figure"><a name="//apple_ref/doc/uid/TP40001163-CH313-789714" title="Figure 2-10QuickTime Pro visual settings options for image control and manipulation"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJBGIBI" title="Figure 2-10QuickTime Pro visual settings options for image control and manipulation"></a><p><strong>Figure 2-10&nbsp;&nbsp;</strong>QuickTime Pro visual settings options
for image control and manipulation</p><img src = "../art/qtplayer_visual_settings.jpg" alt = "" ></div><p>In addition,
users are provided with other options to manipulate and control
image transparency in QuickTime movies and image files, shown in <span class="content_text">Figure 2-11</span>.</p></li></ul>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-789778" title="Figure 2-11QuickTime Pro user options for controlling image transparency"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJGAECC" title="Figure 2-11QuickTime Pro user options for controlling image transparency"></a><p><strong>Figure 2-11&nbsp;&nbsp;</strong>QuickTime Pro user options for controlling
image transparency</p><img src = "../art/qtplay_transparency.jpg" alt = "" ></div><br/>
<a name="//apple_ref/doc/uid/TP40001163-CH313-753053" title="Other Changes and Enhancements"></a><h3>Other
Changes and Enhancements</h3>
<p>QuickTime Preferences now has the option &#8220;Use high quality
video setting when available.&#8221; Users can set this as the default
for displaying high-quality video tracks, such as DV. <span class="content_text">Figure 2-12</span> shows
the options available in the General pane of QuickTime Player Preferences.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-753066" title="Figure 2-12The General pane in QuickTime Player Preferences "></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCGCBIB" title="Figure 2-12The General pane in QuickTime Player Preferences "></a><p><strong>Figure 2-12&nbsp;&nbsp;</strong>The General pane in QuickTime Player
Preferences </p><img src = "../art/qtplay_gen_prefs.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-13</span> shows the new File menu in QuickTime Player.
The Open File command enables users to open any of a number of digital
media types that QuickTime supports, including movies, still images,
VR panoramas, Flash, and so on. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-745899" title="Figure 2-13The new File menu in the QuickTime Player with New Movie Recording selected"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCEFJJF" title="Figure 2-13The new File menu in the QuickTime Player with New Movie Recording selected"></a><p><strong>Figure 2-13&nbsp;&nbsp;</strong>The new File menu in the QuickTime
Player with New Movie Recording selected</p><img src = "../art/new_movie_recording.jpg" alt = "" ></div><br/>
<p>Choosing the File &gt; New Movie Recording menu item enables
you to record video from an external digital video camera. Recording
is transparent and easy to use, as QuickTime automatically recognizes
the device and opens a new QuickTime Player with a red button in
the lower center, as shown in <span class="content_text">Figure 2-14</span>. The Player
also displays the current recording duration, as well as the size
of the recording in megabytes.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-786150" title="Figure 2-14Movie recording from a digital device in a new QuickTime player"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJBIBHB" title="Figure 2-14Movie recording from a digital device in a new QuickTime player"></a><p><strong>Figure 2-14&nbsp;&nbsp;</strong>Movie recording from a digital device
in a new QuickTime player</p><img src = "../art/movie_recording.jpg" alt = "" ></div><br/>
<p>Choosing the File &gt; New Audio Recording menu item enables
you to record audio from an external or internal audio device. Once
recording begins, a new QuickTime Player appears, as shown in <span class="content_text">Figure 2-15</span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-786183" title="Figure 2-15Audio recording"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJIBIAB" title="Figure 2-15Audio recording"></a><p><strong>Figure 2-15&nbsp;&nbsp;</strong>Audio recording</p><img src = "../art/audio_mov.jpg" alt = "" ></div><br/>
<p>To change the video or audio source for your recording, or
to specify the quality of recording you want, you choose QuickTime
Player &gt; Preferences &gt; Recording, as shown in <span class="content_text">Figure 2-16</span>.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-786257" title="Figure 2-16Recording preferences"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJFIBGH" title="Figure 2-16Recording preferences"></a><p><strong>Figure 2-16&nbsp;&nbsp;</strong>Recording preferences</p>
<img src = "../art/recording_prefs.jpg" alt = "" ></div><br/>
<p>The Save dialog that the Save As command opens now has a &#8220;Make
movie as a self-contained,&#8221; selected by default, which is a change
from previous versions of QuickTime Player.</p>
<p>Choosing the File &gt; Update Existing Software menu item
shown in <span class="content_text">Figure 2-17</span> lets you update the version to the latest
version of QuickTime available through Software Update.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-745863" title="Figure 2-17The new QuickTime Player menu"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCICCCC" title="Figure 2-17The new QuickTime Player menu"></a><p><strong>Figure 2-17&nbsp;&nbsp;</strong>The new QuickTime Player menu</p>
<img src = "../art/qtplayer_menu_fix.jpg" alt = "" ></div><br/>
<p>The Edit menu has changed from previous versions of QuickTime,
as shown in <span class="content_text">Figure 2-18</span>. </p>
<p>Support for multiple undos is now provided. There is a command
Trim to Selection (instead of Trim) and there is no longer a Replace
command (users can&#8217;t do delete and paste as a single operation).</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-749749" title="Figure 2-18The QuickTime Pro Edit menu items with Trim to Selection selected"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCJHCFG" title="Figure 2-18The QuickTime Pro Edit menu items with Trim to Selection selected"></a><p><strong>Figure 2-18&nbsp;&nbsp;</strong>The QuickTime Pro Edit menu items
with Trim to Selection selected</p><img src = "../art/edit_menu_fix.jpg" alt = "" ></div><br/>
<p>The Movie menu has been renamed and is now the View menu,
as shown in <span class="content_text">Figure 2-19</span>. The Show Movie Properties command has been
moved to the Windows menu. Note that this overrides any full screen
settings made in user preferences for the current presentation only.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-745450" title="Figure 2-19The View menu options"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCJADGG" title="Figure 2-19The View menu options"></a><p><strong>Figure 2-19&nbsp;&nbsp;</strong>The View menu options</p>
<img src = "../art/view_menu_fix.jpg" alt = "" ></div><br/>
<p>The Present Movie command now opens a sheet as shown in <span class="content_text">Figure 2-20</span>.
The same functionality as in previous versions is provided. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-749803" title="Figure 2-20The Present Movie sheet"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCDEAII" title="Figure 2-20The Present Movie sheet"></a><p><strong>Figure 2-20&nbsp;&nbsp;</strong>The Present Movie sheet</p>
<img src = "../art/pres_movie_sheet.jpg" alt = "" ></div><br/>
<p>The Window menu (<span class="content_text">Figure 2-21</span>) now provides
commands for getting movie properties and showing audio/video controls. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-749825" title="Figure 2-21The Window menu with Show A/V Controls selected"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCHIAEH" title="Figure 2-21The Window menu with Show A/V Controls selected"></a><p><strong>Figure 2-21&nbsp;&nbsp;</strong>The Window menu with Show A/V Controls
selected</p><img src = "../art/window_menu_fix.jpg" alt = "" ></div><br/>
<p>Choosing the Window &gt; Show Movie Properties menu item and
selecting Video Track 1 (shown in <span class="content_text">Figure 2-22</span>) enables you
to specify certain properties of that track. For example, if you
select Annotations and want to add a field, you have multiple choices,
including Album, Artist, Author, and so on. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-786289" title="Figure 2-22Movie properties with annotations and added fields selected"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJCIBGG" title="Figure 2-22Movie properties with annotations and added fields selected"></a><p><strong>Figure 2-22&nbsp;&nbsp;</strong>Movie properties with annotations
and added fields selected</p><img src = "../art/annotations_add_field.jpg" alt = "" ></div><br/>
<p>Choosing the Window &gt; Show Movie Properties menu item and
selecting Video Track 1 (shown in <span class="content_text">Figure 2-23</span>) with Other
Settings selected enables you to specify certain properties of that
track, including language, preloading of the track, caching, and
so on. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-786381" title="Figure 2-23Other settings available in the movie properties pane"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJHIBGB" title="Figure 2-23Other settings available in the movie properties pane"></a><p><strong>Figure 2-23&nbsp;&nbsp;</strong>Other settings available in the movie
properties pane</p><img src = "../art/mov_prop_other_set.jpg" alt = "" ></div><br/>
<p>The movie properties window has been reorganized, as shown
in <span class="content_text">Figure 2-24</span>. The Presentation pane provides users with
four choices for presenting movie, as well as options for displaying
various types of movie controllers. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-766514" title="Figure 2-24The Presentation pane with a QTVR controller selected "></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCIJADG" title="Figure 2-24The Presentation pane with a QTVR controller selected "></a><p><strong>Figure 2-24&nbsp;&nbsp;</strong>The Presentation pane with a QTVR
controller selected </p><img src = "../art/movie_controller_types.jpg" alt = "" ></div><br/>
<ul class="spaceabove"><li class="li"><p><strong>New selection handles and fade in/out
behavior</strong>. When the user moves the mouse over a selection
of the movie, ticks appear that indicate you can make a selection
over that area. When you move the mouse over the playbar, the movie
will fade the selection indicators in and out. Users can also set
in and out points now by placing the current time marker and typing
I or O. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-748236" title="New QuickTime Kit Framework"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-CJBICDCB" title="New QuickTime Kit Framework"></a><h2>New QuickTime
Kit Framework</h2>
<p>QuickTime 7 introduces Cocoa developers to a new QuickTime
Kit framework (<code>QTKit.framework</code>).
The QuickTime Kit is a Objective-C framework with a rich API for manipulating
time-based media. </p>
<p>At a basic level, QuickTime Kit provides support for displaying
and editing QuickTime movies, relying on abstractions and data types
that are already familiar to many Cocoa programmers, such as delegation
and notification. QuickTime Kit introduces new data types for QuickTime-related
operations only when necessary. </p>
<p>Specifically, two QuickTime Kit classes&#8211;&#8211;<code>QTMovie</code> and <code>QTMovieView</code>&#8211;&#8211;are
intended to replace the existing Application Kit classes <code>NSMovie</code> and <code>NSMovieView</code>.</p>
<p>The QuickTime Kit framework is new in Mac OS X v10.4 but is
also backward-compatible with Mac OS X v10.3 (Panther) as well. </p>
<p>The QuickTime Kit framework provides a set of Objective-C
classes and methods designed for the basic manipulation of media,
including movie playback, editing, import and export to standard
media formats, among other capabilities. The QuickTime Kit framework
is at once powerful, yet easy to include in your Cocoa application. <span class="content_text">Figure 2-25</span> shows
the QuickTime Kit framework&#8217;s class hierarchy. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-704054" title="Figure 2-25The QuickTime Kit framework class hierarchy"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCGIAHC" title="Figure 2-25The QuickTime Kit framework class hierarchy"></a><p><strong>Figure 2-25&nbsp;&nbsp;</strong>The QuickTime Kit framework class
hierarchy</p><img src = "../art/qtkit_framework.gif" alt = "" width="237" height="181"></div><br/>
<p>Although the QuickTime Kit framework contains only five classes,
you can use these classes and their associated methods, notifications,
and protocols to accomplish a broad range of tasks, such as displaying,
controlling, and editing QuickTime movies in your Cocoa applications. </p>
<p>A QTKit palette is also provided in Interface Builder that
lets you simply drag a QuickTime movie object, complete with a controller
for playback, into a window, and then set attributes for the movie&#8211;&#8211;all
of this without writing a single line of code.</p>
<p><span class="content_text">Figure 2-26</span> shows an animated version of what happens
in Interface Builder when you drag the QuickTime object from the
QTKit palette to the application window. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-704075" title="Figure 2-26The QuickTime object dragged to the application window "></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCDAAHH" title="Figure 2-26The QuickTime object dragged to the application window "></a><p><strong>Figure 2-26&nbsp;&nbsp;</strong>The QuickTime object dragged to the
application window </p><img src = "../art/drag_qtpal_to_window.jpg" alt = "" ></div><br/>
<p>After you drag the QuickTime object into the application window,
you have a QuickTime movie view object with a control bar in the
bottom-left corner of the window, as shown in <span class="content_text">Figure 2-27</span>.
By dragging the QuickTime movie view object by its corner handle
to the upper-right corner of the window, the entire window fills
up so that the movie view object with its control bar is visible. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-748498" title="Figure 2-27The QuickTime movie view object dragged to fill the entire contents of the window"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCDDFCA" title="Figure 2-27The QuickTime movie view object dragged to fill the entire contents of the window"></a><p><strong>Figure 2-27&nbsp;&nbsp;</strong>The QuickTime movie view object dragged
to fill the entire contents of the window</p><img src = "../art/qtpal_changed_to_qtmovie.jpg" alt = "" ></div><br/>
<p>The QuickTime Kit framework is documented in the <span class="content_text"><a href="../../../Reference/QTCocoaObjCKit/index.html#//apple_ref/doc/uid/TP40001164" target="_top">QuickTime Kit Reference</a></span> in conformance with the standards established
for Apple&#8217;s Cocoa documentation suite. A tutorial for using the
new framework, <span class="content_text"><a href="../../QTKitProgrammingGuide/index.html#//apple_ref/doc/uid/TP40001245" target="_top">QuickTime Kit Programming Guide</a></span>, is also available online and in
PDF format. You can learn how to take advantage of the new QuickTime
Kit framework classes and methods and build your own QTKitPlayer application,
as well as learn how to extend its functionality.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-718813" title="Audio Enhancements"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCIAFAI" title="Audio Enhancements"></a><h2>Audio Enhancements</h2>
<p>QuickTime 7 breaks free of the limitations of the Sound Manager,
adding many new features and capabilities that developers can take
advantage of in their audio playback and capture applications.</p>
<p>Notably, QuickTime 7 now supports <strong>high-resolution
audio</strong>, that is, audio sampled at sample rates higher than
64 kHz and up to 192 kHz, with up to 24 channels and support for
surround sound. This is in stark contrast to the implementation
of the Sound Manager, which only supported mono and stereo. High-resolution
audio is supported by Apple&#8217;s Core Audio technology. </p>
<p>The result of these new audio enhancements is as follows:</p>
<ul class="ul"><li class="li"><p>A much richer approach to sound in QuickTime,
with support for higher sampling rates, such as 96 kHz and 192 kHz,
multiple channels and multiple channel layouts, including 5.1 surround
sound and up to 24 discrete channels, meaning channels without any
layout imposed on them. Support is also provided for a variety of
more accurate audio representations, such as 24-bit uncompressed
audio, during capture, playback, and export. Synchronization and
access to uncompressed audio on a per-sample basis is also greatly
improved, including access to raw PCM audio samples from VBR-compressed
audio sources.</p></li>
<li class="li"><p>The introduction of a new abstraction layer: the audio context.
An audio context represents a connection to a particular audio device.
Using an audio context allows you to easily connect a movie to an
audio device.</p></li>
<li class="li"><p>A more flexible architecture for capturing audio. For instance,
multiple sequence grabber audio channels <code>SGAudioMediaType</code>)
can capture from a single device at the same time, even if the device
doesn&#8217;t permit multiple clients directly, and devices with different
channel layouts or different PCM audio formats can be interconnected seamlessly. </p></li>
<li class="li"><p>Conversion of audio from one format to another on the fly,
performing channel mix-down or remapping, upsampling or downsampling,
and sample conversion as needed. This conversion can be performed
during export, or as part of the output chain to a device with different
playback characteristics than the stored audio, or as part of the
capture and storage chain to map input from one or more devices
into one or more storage formats. </p></li></ul>
<p>Most components, with a few exceptions such as streaming and
MPEG-4 exporting, will be able to make use of these new capabilities
immediately. This release of QuickTime updates a number of components
so that it is possible to capture, play back, edit, and export a
broad variety of enhanced audio right away. </p>
<p>In brief, QuickTime 7 includes the following enhancements,
discussed in this section:</p>
<ul class="ul"><li class="li"><p>A new abstraction layer for audio</p></li>
<li class="li"><p>A new sound description</p></li>
<li class="li"><p>A suite of sound description functions</p></li>
<li class="li"><p>New movie property to prevent pitch-shifting</p></li>
<li class="li"><p>New functions for gain, balance, and mute</p></li>
<li class="li"><p>New level and frequency metering API</p></li>
<li class="li"><p>New audio extraction and conversion API</p></li>
<li class="li"><p>New audio compression configuration component</p></li>
<li class="li"><p>New movie export properties to support high-resolution audio</p></li>
<li class="li"><p>New sequence grabber component for audio (<code>SGAudioMediaType</code>)</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-787559" title="New Abstraction Layer For Audio"></a><h3>New
Abstraction Layer For Audio</h3>
<p>QuickTime 7 introduces the <strong>audio context</strong>&#8211;&#8211;a
new abstraction that represents playing to an audio device. </p>
<p>As defined, a QuickTime audio context is an abstraction for
a connection to an audio device. This allows you to work more easily
and efficiently with either single or multiple audio devices in
your application. </p>
<p>To create an audio context, you call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTAudioContextCreateForAudioDevice">QTAudioContextCreateForAudioDevice</a></code> and
pass in the UID of the device, which is typically a <code>CFString</code>.
An audio context is then returned. You can then pass that audio
content either into <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/NewMovieFromProperties">NewMovieFromProperties</a></code>,
as you would pass in a visual context, or you can open your movie
however you would normally open it and call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieAudioContext">SetMovieAudioContext</a></code>.
What that does is route all the sound tracks of the movie to that particular
device. </p>
<p>Note that if you want to route two different movies to the
same device, you cannot use the same audio context because the audio
context is a single connection to that device. What you do is call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTAudioContextCreateForAudioDevice">QTAudioContextCreateForAudioDevice</a></code> again
and pass in the same device UID to get another <code>AudioContext</code> for
the same device, and pass that to your second movie.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-658796" title="High-Resolution Audio Support"></a><h3>High-Resolution
Audio Support</h3>
<p>High-resolution audio makes use of an enhanced sound description
with the ability to describe high sampling rates, multiple channels,
and more accurate audio representation and reproduction. </p>
<p>Significantly, the new sound description has larger fields
to describe the sampling rate and number of channels, so that the
sound description is no longer the limiting factor for these characteristics. </p>
<p>The sound description has built-in support for variable-bit-rate
(VBR) audio encoding with variable-duration compressed frames. Extensions
to the sound description allow you to describe the spatial layout
of the channels, such as quadraphonic and 5.1 surround sound, or
to label channels as <strong>discrete</strong>&#8211;&#8211;that is, not
tied to a particular geometry. For more information, see <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/tag/SoundDescriptionV2">&#8220;SoundDescriptionV2&#8221;</a></code>.</p>
<p>New movie audio properties include a summary channel layout
property, providing a nonredundant listing of all the channel types
used in the movie&#8212;such as L/R for stereo, or L/R/Ls/Rs/C for 5-channel
surround sound&#8212;and a device channel layout, listing all the channel
types used by the movie&#8217;s output device. </p>
<p><span class="content_text">Figure 2-28</span> shows the layout of surround speakers. The
terminology is defined in Table 1-1.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-738555" title="Figure 2-28Layout of surround speakers"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCFEACC" title="Figure 2-28Layout of surround speakers"></a><p><strong>Figure 2-28&nbsp;&nbsp;</strong>Layout of surround speakers</p>
<img src = "../art/surround_speakers.jpg" alt = "" ></div><br/><a name="//apple_ref/doc/uid/TP40001163-CH313-738566" title="Table 2-1Surround sound definitions"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5">
<caption class="tablecaption"><strong>Table 2-1&nbsp;&nbsp;</strong>Surround sound definitions</caption>

<tr>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Speaker</p></th>
<th scope="col" align="left" style="font-weight: bold" bgcolor="#CCCCCC"><p>Definition</p></th>
</tr>


<tr>
<td  scope="row"><p>L</p></td>
<td ><p>Left speaker</p></td>
</tr>
<tr>
<td  scope="row"><p>R</p></td>
<td ><p>Right speaker</p></td>
</tr>
<tr>
<td  scope="row"><p>C</p></td>
<td ><p>Center speaker</p></td>
</tr>
<tr>
<td  scope="row"><p>Ls</p></td>
<td ><p>Left surround speaker</p></td>
</tr>
<tr>
<td  scope="row"><p>Rs</p></td>
<td ><p>Right surround speaker</p></td>
</tr>
<tr>
<td  scope="row"><p>LFE</p></td>
<td ><p>Sub-woofer (Note that LFE is an abbreviation for low-frequency effects) </p></td>
</tr>

</table></div>
<p>The new sound description is supported by the data types and
structures used in the Core Audio framework for Mac OS X (see <span class="content_text"><a href="http://developer.apple.com/documentation/MusicAudio/Reference/CoreAudio/index.html" target="_top">Core Audio</a></span> documentation). While the Core Audio API itself is not
available to Windows programmers, QuickTime for Windows may include the
relevant data structures, such as audio buffers and stream descriptions,
audio time stamps and channel layouts, and so on, described in the
Core Audio documentation.</p>
<p>A suite of functions has been included to support the handling
of sound descriptions opaquely. </p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-726833" title="Playback"></a><h4>Playback</h4>
<p>Playback at the high level is automatic and transparent; if
you play a movie that contains 96 kHz or 192 kHz sound, it should
just work. You should not have to modify your code. The same is
true for cut-and-paste editing. If the chosen output device does
not support the channel layout, sampling rate, or sample size of
the movie audio, mix-down and resampling are performed automatically.</p>
<p>Import of high-resolution audio is automatic, provided the
import component has been updated to support high-resolution audio.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-726914" title="Export"></a><h4>Export</h4>
<p>Export of high-resolution audio is likewise transparent at
the high level. Export at the lower levels requires some additional
code. Your application must &#8220;opt in&#8221; to the new audio features
explicitly if it &#8220;talks&#8221; directly to an export component instance.
You do this by calling <code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/doc/c_ref/QTSetComponentProperty" target="_top">QTSetComponentProperty</a></code> on
the exporter component instance and passing in the <code><!--a  -->kQTMovieExporterPropertyID_EnableHighResolutionAudioFeatures<!--/a--></code> property.
This is illustrated in the code sample <span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-766090">Listing 2-1</a></span>.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-727017" title="Capture"></a><h4>Capture</h4>
<p>Capturing high-resolution audio requires new code to configure
and use the new sequence grabber component for audio. The new audio
capture API offers a number of improvements, including the ability
to share an input device among multiple sequence grabber channels
and the usage of multiple threads for increased efficiency.</p>
<p>When all components in a chain are able to work with high-resolution
audio, clock information can be preserved across operations for
sample-accurate synchronization.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-727040" title="Sound Description Creation and Accessor Functions"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCGAFIC" title="Sound Description Creation and Accessor Functions"></a><h3>Sound Description
Creation and Accessor Functions</h3>
<p>QuickTime 7 provides new functions that let you create, access,
and convert sound descriptions.</p>
<p>Sound descriptions can take three basic inputs: an <code>AudioStreamBasicDescription</code>,
a channel layout, and magic cookie. Sound descriptions are now treated
as if they are opaque. In QuickTime 7, when you are handed a sound
description, for example, you don&#8217;t have to go in and look at
the version field. </p>
<p>If you want to create a sound description, you can simply
hand it an <code>AudioStreamBasicDescription</code>,
an optional channel layout if you have one, and an optional magic
cookie if you need one for the described audio format. Note that
it is the format (codec) of the audio that determines whether it
needs a magic cookie, not the format of the sound description. </p>
<p>By calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSoundDescriptionCreate">QTSoundDescriptionCreate</a></code>, you can make
a sound description of any version you choose&#8211;&#8211;for example,
one that is of the lowest possible version, given that it is stereo and
16-bit, or one of any particular version you want or request.</p>
<p>The main point about the new API is the capability provided
to create a sound description and the usage of new property getters
and setters. To accomplish this, follow these steps:</p>
<ol class="ol"><li class="li"><p>Get an <code>AudioStreamBasicDescription</code> from
a sound description. </p></li>
<li class="li"><p>Get a channel layout from a sound description (if there is
one). </p></li>
<li class="li"><p>Get the magic cookie from magic cookie (if there is one). </p></li></ol>
<p>At this point, you have all the information you need to talk
to Core Audio about this audio. You can also:</p>
<ol class="ol"><li class="li"><p>Get a user-readable textual description of the
format described by the <code>SoundDescription</code>.</p></li>
<li class="li"><p>Add or replace a channel layout to an existing sound description.
For example, this is what QuickTime Player does in the properties
panel where the user can change the channel assignments.</p></li>
<li class="li"><p>Add a magic cookie to a sound description. (This is not needed
very often unless you are writing a movie importer, for example.)</p></li></ol>
<p>To convert an existing QuickTime sound description into the
new V2 sound description, you call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSoundDescriptionConvert">QTSoundDescriptionConvert</a></code>. This lets
you convert sound descriptions from one version to another. </p>
<p>For a description of versions 0 and 1 of the <code><!--a  -->SoundDescription<!--/a--></code> record,
see the documentation for the <span class="content_text"><a href="../../../../../referencelibrary/QuickTime/idxFileFormatSpecification-date.html#//apple_ref/doc/uid/TP30000943-TP30000433-TP30000509" target="_top">QuickTime File Format</a></span>.</p>
<p>For a description of version 2 of the <code><!--a  -->SoundDescription<!--/a--></code> record,
see <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/tag/SoundDescriptionV2">&#8220;SoundDescriptionV2&#8221;</a></code>. For details
of the sound description functions, see <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSoundDescriptionCreate">QTSoundDescriptionCreate</a></code> and <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSoundDescriptionConvert">QTSoundDescriptionConvert</a></code>.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-784529" title="Audio Playback Enhancements"></a><h3>Audio
Playback Enhancements</h3>
<p>In addition to playing back high-resolution audio, QuickTime
7 introduces the following audio playback enhancements:</p>
<ul class="spaceabove"><li class="li"><p>The ability to play movies at a nonstandard rate
without pitch-shifting the audio.</p></li>
<li class="li"><p>Getting and setting the gain, balance, and mute values for
a movie, or the gain and mute values for a track.</p></li>
<li class="li"><p>Providing audio level and frequency metering during playback. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-658988" title="Preventing Pitch-Shifting"></a><h4>Preventing
Pitch-Shifting</h4>
<p>A new property is available for use with the <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/NewMovieFromProperties">NewMovieFromProperties</a></code> function: <code><a href="../../../Reference/QT7-1_Update_Reference/Constants/Constants.html#//apple_ref/doc/c_ref/kQTAudioPropertyID_RateChangesPreservePitch" target="_top">kQTAudioPropertyID_RateChangesPreservePitch</a></code>.
When this property is set, changing the movie playback rate will
not result in pitch-shifting of the audio. This allows you to fast-forward
through a movie without hearing chipmunks.</p>
<p>Setting this property also affects playback of scaled edits,
making it possible to change the tempo of a sound segment or scale
it to line up with a video segment, for example, without changing
the pitch of the sound. </p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-659015" title="Gain, Mute, and Balance"></a><h4>Gain,
Mute, and Balance</h4>
<p>New functions are available to set the left-right balance
for a movie, set the gain for a movie or track, or to mute and unmute
a movie or track without changing the gain or balance settings. </p>
<p>The gain and mute functions duplicate existing functions for
setting track and movie volume, but the new functions present a
simpler and more consistant programmer interface. </p>
<p>For example, to mute the movie using the old <code><a href="../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/doc/c_ref/SetMovieVolume" target="_top">SetMovieVolume</a></code> function,
you would pass in a negative volume value; to preserve the current
volume over a mute and unmute operation, you had to first read the
volume, then negate it and set it for muting, then negate it and
set it again to unmute. By comparison, the new <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieAudioMute">SetMovieAudioMute</a></code> function
simply mutes or unmutes the movie without changing the gain value.</p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_163" title="Note"></a><p><strong>Note:</strong>&nbsp;The values set
using these functions are not persistent; that is, they are not
saved with the movie.</p></div>
<p>For details, see </p>
<ul class="spaceabove"><li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetTrackAudioGain">GetTrackAudioGain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SetTrackAudioGain">SetTrackAudioGain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetTrackAudioMute">GetTrackAudioMute</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SetTrackAudioMute">SetTrackAudioMute</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioGain">GetMovieAudioGain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SetMovieAudioGain">SetMovieAudioGain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioMute">GetMovieAudioMute</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SetMovieAudioMute">SetMovieAudioMute</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioBalance">GetMovieAudioBalance</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SetMovieAudioBalance">SetMovieAudioBalance</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-659172" title="Level and Frequency Metering"></a><h4>Level
and Frequency Metering</h4>
<p>It is now easy to obtain real-time measurements of the average
audio output power level in one or more frequency bands.</p>
<p>You can specify the number of frequency bands to meter. QuickTime
divides the possible frequency spectrum (approximately half the
audio sampling rate) into that many bands. You can ask QuickTime
for the center frequency of each resulting band for display in your user
interface.</p>
<p>You can measure the levels either before or after any mix-down
or remapping to an output device. For example, if you are playing
four-channel surround sound into a stereo output device, you might
want to meter the audio levels of all four channels, or you might
prefer to see the actual output values delivered to the stereo device. </p>
<p>To use the frequency metering API, follow these steps:</p>
<ol class="ol"><li class="li"><p>Set the number of frequency bands to meter using <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieAudioFrequencyMeteringNumBands">SetMovieAudioFrequencyMeteringNumBands</a></code>. </p></li>
<li class="li"><p>Call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/GetMovieAudioFrequencyMeteringBandFrequencies">GetMovieAudioFrequencyMeteringBandFrequencies</a></code> if
you need to know the frequencies of the resulting bands.</p></li>
<li class="li"><p>Finally, make periodic calls to <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/GetMovieAudioFrequencyLevels">GetMovieAudioFrequencyLevels</a></code> to
obtain measurements in all specified bands. You can obtain either
the average values, the peak hold values, or both.</p></li></ol>
<p>For details, see</p>
<ul class="spaceabove"><li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioVolumeMeteringEnabled">GetMovieAudioVolumeMeteringEnabled</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SetMovieAudioVolumeMeteringEnabled">SetMovieAudioVolumeMeteringEnabled</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioVolumeLevels">GetMovieAudioVolumeLevels</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioFrequencyMeteringNumBands">GetMovieAudioFrequencyMeteringNumBands</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SetMovieAudioFrequencyMeteringNumBands">SetMovieAudioFrequencyMeteringNumBands</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioFrequencyMeteringBandFrequencies">GetMovieAudioFrequencyMeteringBandFrequencies</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMovieAudioFrequencyLevels">GetMovieAudioFrequencyLevels</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-659300" title="Audio Conversion, Export, and Extraction "></a><h3>Audio
Conversion, Export, and Extraction </h3>
<p>The new audio extraction API lets you retrieve mixed, uncompressed
audio from a movie. </p>
<p>Note that the audio extraction API currently <em>only</em> mixes
audio from sound tracks. Other media types, such as muxed MPEG-1
audio inside a program stream, are not currently supported.</p>
<p>To use the audio extraction API, follow these steps:</p>
<ol class="ol"><li class="li"><p>Begin by calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionBegin">MovieAudioExtractionBegin</a></code>. This returns
an opaque session object that you pass to subsequent extraction
routines.</p></li>
<li class="li"><p>You can then get the <code><a href="../../../../MusicAudio/Reference/CoreAudio/core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription" target="_top">AudioStreamBasicDescription</a></code> for
the audio or layout. Note that some properties are of variable size,
such as the channel layout, depending on the audio format, so getting
the information involves a two-step process. </p><ol class="ol"><li class="ol ol"><p>First,
you call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionGetPropertyInfo">MovieAudioExtractionGetPropertyInfo</a></code> to
find out how much space to allocate.</p></li>
<li class="ol ol"><p>Next, call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionGetProperty">MovieAudioExtractionGetProperty</a></code> to obtain
the actual value of the property.</p></li></ol></li>
<li class="li"><p>You can use the <code><a href="../../../../MusicAudio/Reference/CoreAudio/core_audio_types/core_audio_types.html#//apple_ref/doc/c_ref/AudioStreamBasicDescription" target="_top">AudioStreamBasicDescription</a></code> to
specify a different uncompressed format than Float 32. This causes
the extraction API to automatically convert from the stored audio
format into your specified format. </p></li>
<li class="li"><p>Use the <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionSetProperty">MovieAudioExtractionSetProperty</a></code> function
to specify channel remapping&#8211;&#8211;that is, a different layout&#8211;&#8211;sample
rate conversion, and preferred sample size. You can also use this
function to specify interleaved samples (default is non-interleaved)
or to set the movie time to an arbitrary point. </p></li></ol>
<p>Note that there are basically two things you set here: an
audio stream basic description (ASBD) and a channel layout. (ASBD
sets the format, sample, number of channels, interleavings, and
so on.)</p>
<p>Setup is now complete. You can now make a series of calls
to <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/MovieAudioExtractionFillBuffer">MovieAudioExtractionFillBuffer</a></code> to
receive uncompressed PCM audio in your chosen format. </p>
<ol class="ol"><li class="li"><p>The default is for the first call to begin extracting
audio at the start of the movie, and for subsequent calls to begin
where the last call left off, but you can set the extraction point anywhere
in the movie timeline by calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/MovieAudioExtractionSetProperty">MovieAudioExtractionSetProperty</a></code> and setting
the movie time.</p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/MovieAudioExtractionFillBuffer">MovieAudioExtractionFillBuffer</a></code> will
set <code><!--a  -->kMovieAudioExtractionComplete<!--/a--></code> in <em>outFlags</em> when
you reach the end of the movie audio.</p></li>
<li class="li"><p>You must call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/MovieAudioExtractionEnd">MovieAudioExtractionEnd</a></code> when
you are done. This deallocates internal buffers and data structures
that would otherwise continue to use memory and resources.</p></li></ol>
<p><em>A caveat: </em>Ideally, the uncompressed samples
would be bitwise identical whether you obtained the samples by starting
at the beginning of the movie and iterating through it, or by randomly
setting the movie time and extracting audio samples. This is typically
the case, but for some compression schemes the output of the decompressor
depends not only on the compressed sample, but the seed value in
the decompressor that remains after previous operations.</p>
<p>The current release of QuickTime does not perform the necessary
work to determine what the seed value would be when the movie time
is changed prior to extracting audio; while the extracted audio
is generally indistinguishable by ear, it may not always be bitwise identical.</p>
<p>For details about audio conversion, export, and extraction,
refer to the information about the following functions:</p>
<ul class="spaceabove"><li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionBegin">MovieAudioExtractionBegin</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionGetPropertyInfo">MovieAudioExtractionGetPropertyInfo</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionGetProperty">MovieAudioExtractionGetProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionSetProperty">MovieAudioExtractionSetProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionFillBuffer">MovieAudioExtractionFillBuffer</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MovieAudioExtractionEnd">MovieAudioExtractionEnd</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-659494" title="Standard Audio Compression Enhancements"></a><h3>Standard
Audio Compression Enhancements</h3>
<p>QuickTime 7 introduces a new standard compressor component, <code>StandardCompressionSubTypeAudio</code>,
that adds the ability to configure high-resolution audio output
formats. It uses Core Audio internally instead of the Sound Manager,
and has a full set of component properties to make configuration
easier, especially when the developer wishes to bring up an application-specific
dialog, or no dialog, rather than the typical compression dialog.</p>
<p>This component essentially replaces the <code>StandardCompressionSubTypeSound</code> component, which
is limited to 1 or 2 channel sound with sampling rates of 65 kHz
or less. That component is retained for backward compatability with
existing code, but its use is no longer recommended.</p>
<p>The <code>StandardCompressionSubTypeAudio</code> component
is configured by getting and setting component properties, instead
of using GetInfo and SetInfo calls. These properties have a class
and ID, instead of just a single selector.</p>
<p>The component property API allows configuration at any level
of detail without requiring a user interface dialog or direct communication
with low-level components. </p>
<p>For details, refer to the sections <span class="content_text"><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550702">“SGAudio Component Property Classes”</a></span>and <span class="content_text"><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550839">“SGAudio Component Property IDs.”</a></span></p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_164" title="Note"></a><p><strong>Note:</strong>&nbsp;You can also
configure the new standard audio compression component by calling <code><a href="../../../Reference/QTRef_MovieComponents/Reference/reference.html#//apple_ref/doc/c_ref/SCSetSettingsFromAtomContainer" target="_top">SCSetSettingsFromAtomContainer</a></code>.
You can pass the new standard audio compression component either
a new atom container obtained from <code><a href="../../../Reference/QTRef_MovieComponents/Reference/reference.html#//apple_ref/doc/c_ref/SCGetSettingsAsAtomContainer" target="_top">SCGetSettingsAsAtomContainer</a></code> or
an old atom container returned by calling the same function (<code><!--a-->SCGetSettingsAsAtomContainer)<!--/a--></code> on
the old <code>SubTypeSound</code> component.</p></div>
<p>If you use <code><!--a-->MovieExportToDataRefFromProcedures<!--/a--></code>,
your getProperty proc will need to support some of these property
IDs as new selectors. Note that the Movie Exporter getProperty proc
API is not changing to add a class (the class is implied). </p>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_165" title="Note"></a><p><strong>Note:</strong>&nbsp;Not all properties
can be implemented by getProperty procs; the properties that getProperty
procs can implement are marked with the word &quot;DataProc&quot;.
See the inline documentation in <code>QuickTimeComponents.h</code> for
more information. </p></div>
<a name="//apple_ref/doc/uid/TP40001163-CH313-659572" title="Audio Export Enhancements"></a><h3>Audio
Export Enhancements</h3>
<p>Some movie export components now support high-resolution audio. </p>
<p>Export of high-resolution audio is transparent at the high
level. If you export from a movie containing high-resolution audio
to a format whose export component supports it, the transfer of
data is automatic; if the export component does not support high-resolution audio,
mix-down, resampling, and sound description conversion are automatic.</p>
<p>Export at the lower levels requires some additional code.
Your application must &#8220;opt in&#8221; to the new audio features explicitly
if it talks directly to an export component instance. (This is to
prevent applications that have inadvisedly chosen to &#8220;walk&#8221;
the opaque atom settings structure from crashing when they encounter
the new and radically different structure.) The following code snippet
(<span class="content_text">Listing 2-1</span>) illustrates the opt-in process.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-766090" title="Listing 2-1Opting in for high-resolution audio export"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-CJBJFDBC" title="Listing 2-1Opting in for high-resolution audio export"></a><p class="codesample"><strong>Listing 2-1&nbsp;&nbsp;</strong>Opting
in for high-resolution audio export</p>
<div class="codesample"><table><tr><td scope="row"><pre>ComponentInstance exporterCI;<span></span></pre></td></tr><tr><td scope="row"><pre>ComponentDescription search = { &#8217;spit&#8217;, &#8217;MooV&#8217;, &#8217;appl&#8217;, 0, 0 };<span></span></pre></td></tr><tr><td scope="row"><pre>Boolean useHighResolutionAudio = true, canceled;<span></span></pre></td></tr><tr><td scope="row"><pre>OSStatus err = noErr;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>Component c = FindNextComponent(NULL, &amp;search);<span></span></pre></td></tr><tr><td scope="row"><pre>exporterCI = OpenComponent(c);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// Hey exporter, I understand high-resolution audio!!<span></span></pre></td></tr><tr><td scope="row"><pre>(void) QTSetComponentProperty(// disregard error<span></span></pre></td></tr><tr><td scope="row"><pre>        exporterCI,<span></span></pre></td></tr><tr><td scope="row"><pre>        kQTPropertyClass_MovieExporter,<span></span></pre></td></tr><tr><td scope="row"><pre>        kQTMovieExporterPropertyID_EnableHighResolutionAudioFeatures,<span></span></pre></td></tr><tr><td scope="row"><pre>        sizeof(Boolean),<span></span></pre></td></tr><tr><td scope="row"><pre>        &amp;useHighResolutionAudio);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>err = MovieExportDoUserDialog(exporterCI, myMovie, NULL, 0, 0, &amp;canceled);<span></span></pre></td></tr></table></div>
<p>For additional details, see <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550563">&#8220;Movie Exporter Properties&#8221;</a></code>.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-737422" title="Audio Capture Enhancements"></a><h3>Audio
Capture Enhancements</h3>
<p>There is a new sequence grabber channel component (<code><!--a  -->&#8217;sgch&#8217;<!--/a--></code>)
subtype for audio, <code><!--a  -->SGAudioMediaType<!--/a--></code> (<code><!--a  -->&#8217;audi&#8217;<!--/a--></code>),
which allows capture of high-resolution audio, supporting multi-channel,
high sample rate, high accuracy sound. This is intended to replace
the older <code><a href="../../../Reference/QTRef_Constants/Reference/reference.html#//apple_ref/doc/c_ref/SoundMediaType" target="_top">SoundMediaType</a></code> component. </p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_166" title="Important:"></a><p><strong>Important:</strong>&nbsp;

The new component still captures a sound track of type <code>SoundMediaType</code> (<code>&#8217;soun&#8217;</code>);
only the <em>sequence grabber</em> media type changes,
not the final track media type.</p><p></p></div>
<p>The new audio channel component has a number of noteworthy
features, including:</p>
<ul class="spaceabove"><li class="li"><p>audio capture to VBR compressed formats</p></li>
<li class="li"><p>enabling or disabling of source channels on a multi-channel
input device</p></li>
<li class="li"><p>mix-down and remapping of multi-channel audio source material</p></li>
<li class="li"><p>discrete and spatial labeling of channels (for example, 5.1
or discrete)</p></li>
<li class="li"><p>audio format and sample rate conversion during capture</p></li>
<li class="li"><p>sharing of audio input devices among multiple sequence grabber
audio channels</p></li>
<li class="li"><p>sharing of audio playback devices among multiple sequence
grabber audio channels</p></li>
<li class="li"><p>notification of audio device hotplug/unplug events</p></li>
<li class="li"><p>audio preview of source data or compressed data</p></li>
<li class="li"><p>splitting audio channels from a record device to separate
tracks in a movie</p></li>
<li class="li"><p>redundant capture of multichannel audio to separate tracks
in a movie (with independent data rates and compression settings)</p></li>
<li class="li"><p>client callbacks of audio pre- and post-mixdown, and pre-
and post-conversion with propagation of audio time stamps and audio
samples to interested clients</p></li>
<li class="li"><p>improved A/V sync</p></li>
<li class="li"><p>improved threading model compared with the legacy <code>SoundMediaType</code></p></li>
<li class="li"><p>lower latency audio grabs</p></li>
<li class="li"><p>reduced dependency on frequent <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGIdle" target="_top">SGIdle</a></code> calls</p></li></ul>
<p>This new, advanced functionality makes extensive use of Core
Audio methodology and data structures. </p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-762312" title="Configuring Audio Channel Components"></a><h4>Configuring
Audio Channel Components</h4>
<p>The audio channel component can be configured
using component properties. This has several advantages over using
a sequence grabber panel. For one thing, it can be configured without
a user dialog, or using an application-specific dialog. For another,
it is possible to test for properties and get or set them dynamically,
allowing the same code to configure multiple audio input devices,
including unfamiliar devices. </p>
<p>The application does not need to bypass the channel component
and connect directly to an input device, such as a <code>SoundInputDriver</code>,
to set low-level properties. This allows multiple capture channels
to share a single input device, and keeps application code from
becoming tied to a particular device type.</p>
<p>For a full list of the <code>SGAudioMediaType</code> component
properties, see <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550839">&#8220;SGAudio Component Property IDs&#8221;</a></code>.
For a full list of component property classes, see <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550702">&#8220;SGAudio Component Property Classes&#8221;</a></code>.</p>
<p>Once the component is configured, the audio capture&#8212;plus
any desired mixdown, format or sample-rate conversion, and compression&#8212;take
place in a combination of real-time and high-priority threads. Multichannel
data is interleaved and samples are put into a queue. You can set
up callbacks to watch the data at any of several points in the chain: pre-mixdown,
post-mixdown, pre-conversion, or post-conversion.</p>
<p>The actual writing of the captured audio to a storage medium,
such as a disk file, takes place during calls to <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGIdle" target="_top">SGIdle</a></code>.</p>
<p>One input device can be shared by multiple sequence grabber
channels, as illustrated in <span class="content_text">Figure 2-29</span>. Because independent
mix and conversion stages exist for each sequence grabber audio
channel, the sequence grabber audio channels can capture different
channel mixes, sampling rates, sample sizes, or compression schemes
from the same source. Similarly, multiple sequence grabber audio
channels can share a common output device for previewing.</p>
<p>Channel mixdown or remapping, sample conversion, and any compression
are all performed on high-priority threads. Each sequence grabber
channel receives data from only those audio channels it has requested,
in the format it has specified. The following processing may occur
in the background:</p>
<ul class="spaceabove"><li class="li"><p>software gain adjustment</p></li>
<li class="li"><p>mixing</p></li>
<li class="li"><p>sample rate conversion</p></li>
<li class="li"><p>bit-depth widening or shortening</p></li>
<li class="li"><p>float to integer conversion</p></li>
<li class="li"><p>byte-order conversion (big-endian to little-endian or vice-versa)</p></li>
<li class="li"><p>encoding of frames into compressed packets of data in the
specified format</p></li>
<li class="li"><p>interleaving</p></li></ul>
<p>The resulting frames or packets are held in a queue, to be
written to file or broadcast stream on the main thread. This is
accomplished during calls to <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGIdle" target="_top">SGIdle</a></code>,
at which time the audio is chunked and interleaved with any video
data being captured.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-762933" title="Sequence Grabber Audio Channel Mapping"></a><h4>Sequence
Grabber Audio Channel Mapping</h4>
<p><span class="content_text">Figure 2-29</span> is a high-level diagram that shows some
of the internal workings of the sequence grabber audio channel,
such as the Core Audio matrix mixer and the audio converter that
lets you convert, compress, and interleave audio, and then queue
the audio. From the queue, the audio can be written to disk in desired
chunk sizes. One distinct advantage of this process is that you
can take a single device and share it among multiple channels. This
results in simultaneous recording from multiple devices into multiple tracks
in a QuickTime movie. In addition, you can record multiple tracks
from a single device.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-783069" title="Figure 2-29QuickTime audio device sharing among sequence grabber channels"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCGEFJC" title="Figure 2-29QuickTime audio device sharing among sequence grabber channels"></a><p><strong>Figure 2-29&nbsp;&nbsp;</strong>QuickTime audio device sharing among
sequence grabber channels</p><img src = "../art/qt_audio_dev_share.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-30</span> illustrates a usage case that involves client
channel mapping. This shows how a client can instantiate multiple
sequence grabber audio channels that share a recording device. This
enables the &#8220;splitting&#8221; of device channels across multiple tracks
in a QuickTime movie. In <span class="content_text">Figure 2-30</span>, there is single
recording device, with four channels. The first two channels record
into Track 1 in a QuickTime movie. The second sequence grabber audio
channel, which records into Track 2 in a QuickTime movie, only wants
channel 4 from the recording device, so that you can get one stereo
track and one mono track. </p>
<p>In this example, device Track 0 will get into Movie Track
1, while Movie Track 3 has only one slot to fill. You can mix and
match different channel map valences in such a way as to disable
certain tracks in a movie and get submixes, for example. In code,
it looks like this: </p>
<div class="codesample"><table><tr><td scope="row"><pre>SInt32 map 1 [ ] = { 0, 1 };<span></span></pre></td></tr><tr><td scope="row"><pre>SInt32 map 2 [ ] = { 3 };<span></span></pre></td></tr></table></div>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-784583" title="Figure 2-30Client channel mapping with &amp;#8220;splitting&amp;#8221; of device channels"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCJEAII" title="Figure 2-30Client channel mapping with &amp;#8220;splitting&amp;#8221; of device channels"></a><p><strong>Figure 2-30&nbsp;&nbsp;</strong>Client channel mapping with &#8220;splitting&#8221;
of device channels</p><img src = "../art/chan_map_client.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-31</span> shows another usage case that also involves
client channel mapping. </p>
<p>A sequence grabber audio channel shown in the illustration
can get four channels from a device in any order that makes sense
for the client. Consider, for instance, a device that supports four-channels
of audio. Using the channel map property IDs (<span class="content_text"><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550839">“SGAudio Component Property IDs”</a></span>),
you can reorder channels from a recording device to a desired movie
channel valence. In code, it looks like this:</p>
<div class="codesample"><table><tr><td scope="row"><pre>SInt32 map [ 4 ] = { 3, 2, 1, 0 };<span></span></pre></td></tr></table></div>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-765065" title="Figure 2-31Channel mapping with reordering of channels"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCEICAD" title="Figure 2-31Channel mapping with reordering of channels"></a><p><strong>Figure 2-31&nbsp;&nbsp;</strong>Channel mapping with reordering of
channels</p><img src = "../art/chan_mapping.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-32</span> shows another example of what you can do
with the feature of channel mapping, in this case <strong>mult&#8217;-ing</strong>,
that is, duplicating channels from a recording device into multiple
output channels in QuickTime movie tracks. For instance, you can
take advantage of this channel mapping feature if you have one recording
device and two sequence grabber audio channels, and they&#8217;re both
going to make the same movie. The first sequence grabber audio channel
wants the first stereo pair twice (1, 2, 1, 2), while the second
wants the second stereo pair twice (3, 4, 3, 4). In code, it looks
like this (zero-based indexing): </p>
<div class="codesample"><table><tr><td scope="row"><pre>SInt32 map 1 [ ] = { 0, 1, 0, 1 };<span></span></pre></td></tr><tr><td scope="row"><pre>SInt32 map 2 [ ] = { 2, 3, 2, 3 };<span></span></pre></td></tr></table></div>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-765141" title="Figure 2-32Channel mapping enabling mult-ing"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCFIEHB" title="Figure 2-32Channel mapping enabling mult-ing"></a><p><strong>Figure 2-32&nbsp;&nbsp;</strong>Channel mapping enabling mult-ing</p>
<img src = "../art/chan_map_mult.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-33</span> illustrates the what you can do with multiple
mixes. Because you can duplicate device channels onto multiple output
tracks, you can create a movie containing multiple mixes of the
same source material. </p>
<p>This is useful for a recording situation where you have a
six channel recording device and are presenting 5.1 material. You
could make a QuickTime movie that has four tracks in it. In this
case, the first track is getting the raw, unmixed source&#8211;&#8211;that
is, channels one through six. You will have a six discrete channel
track, meaning that the first channel plays out to the first speaker,
the second channel out to the second speaker, and so on. </p>
<p>In sequence grabber audio channel #2, you&#8217;ll get a 5.1 mix
and apply spatial orientation to the six channels, specifying the
speakers to which the audio will play. All four tracks are going
into a QuickTime movie. Sequence grabber audio channel #3 presents
a stereo mix-down, while sequence grabber audio channel #4 presents
a mono mix-down. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-785044" title="Figure 2-33Channel mapping with simultaneous multiple mixes"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCDEJJC" title="Figure 2-33Channel mapping with simultaneous multiple mixes"></a><p><strong>Figure 2-33&nbsp;&nbsp;</strong>Channel mapping with simultaneous
multiple mixes</p><img src = "../art/chan_map_sim.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-34</span> shows channel mapping with multi-date rates,
similar to multiple mixes, except that you can also apply compression
to the mixes. As a result, you can broadcast multiple streams at
once. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-765285" title="Figure 2-34Channel mapping with multi-data rates"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCGFAGC" title="Figure 2-34Channel mapping with multi-data rates"></a><p><strong>Figure 2-34&nbsp;&nbsp;</strong>Channel mapping with multi-data rates</p>
<img src = "../art/chan_map_data_rate.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-35</span> shows sequence grabber audio callbacks,
which are analogous to the <code>VideoMediaType</code> sequence
grabber channel video bottlenecks. The callbacks provide developers
with different places in the audio chain where they can &#8220;pipe
in&#8221; and look at the samples.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-783182" title="Figure 2-35Sequence grabber audio callbacks, analogous to sequence grabber video bottlenecks callbacks"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCFDDAJ" title="Figure 2-35Sequence grabber audio callbacks, analogous to sequence grabber video bottlenecks callbacks"></a><p><strong>Figure 2-35&nbsp;&nbsp;</strong>Sequence grabber audio callbacks,
analogous to sequence grabber video bottlenecks callbacks</p>
<img src = "../art/qt_audio_callbacks.jpg" alt = "" ></div><br/>
<p><span class="content_text">Figure 2-36</span> shows sequence grabber audio callbacks,
with real-time preview. Clients can specify what they want to preview,
using the sequence grabber channel play flags. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-765371" title="Figure 2-36SGAudio callbacks with real-time preview"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCJAFEI" title="Figure 2-36SGAudio callbacks with real-time preview"></a><p><strong>Figure 2-36&nbsp;&nbsp;</strong>SGAudio callbacks with real-time
preview</p><img src = "../art/qt_audio_callbacks_preview.jpg" alt = "" ></div><br/>
<a name="//apple_ref/doc/uid/TP40001163-CH313-737896" title="Using Sequence Grabber Audio Features"></a><h3>Using
Sequence Grabber Audio Features</h3>
<p>To make use of the new sequence grabber audio features, follow
these steps:</p>
<ol class="ol"><li class="li"><p>Instantiate a sequence grabber channel of subtype <code><!--a  -->SGAudioMediaType<!--/a--></code> (<code>&#8217;audi&#8217;</code>),
by calling <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGNewChannel" target="_top">SGNewChannel</a></code><code>(sg,
SGAudioMediaType, &amp;audiChannel)</code>. </p></li>
<li class="li"><p>Use the QuickTime component property API to obtain a list
of available input and preview devices from the sequence grabber
channel, by getting the property <code><!--a  -->kQTSGPropertyID_DeviceListWithAttributes<!--/a--></code> (<code>&#8217;#dva&#8217;</code>).</p></li>
<li class="li"><p>Use the same component property API to get the input device
characteristics and set the desired audio format and device settings.
See <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550702">&#8220;SGAudio Component Property Classes&#8221;</a></code> and <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550839">&#8220;SGAudio Component Property IDs&#8221;</a></code> for
details. Note that this is sometimes a two-stage process, as next
described. </p></li>
<li class="li"><ol class="ol"><li class="ol ol"><p>Use <code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/doc/c_ref/QTGetComponentPropertyInfo" target="_top">QTGetComponentPropertyInfo</a></code> to
determine the size of the property value.</p></li>
<li class="ol ol"><p>Allocate the necessary container and use <code><a href="../../../WhatsNewQT6_4/Chap1/QT6WhatsNew.html#//apple_ref/doc/c_ref/QTGetComponentProperty" target="_top">QTGetComponentProperty</a></code> to
obtain the actual value. This is necessary with properties such
as channel layout, which is a variable length structure.</p></li></ol></li>
<li class="li"><p>Call <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGStartRecord" target="_top">SGStartRecord</a></code> or <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGStartPreview" target="_top">SGStartPreview</a></code>,
enabling the sequence grabber, and then make periodic calls to <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGIdle" target="_top">SGIdle</a></code>.</p></li></ol>
<p>If you are capturing only sequence grabber audio media, it
is no longer necessary to make extremely frequent calls to <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGIdle" target="_top">SGIdle</a></code>,
since this function is only used to write the samples to storage,
not to capture data from the input device. When capturing video
or using an old-style sequence grabber sound media component, however,
you must still call <code><a href="../../../Reference/QTRef_SequenceGrabber/Reference/reference.html#//apple_ref/doc/c_ref/SGIdle" target="_top">SGIdle</a></code> frequently
(at a frequency greater than the video sample rate or the sound
chunk rate).</p>
<p>By setting the appropriate sequence grabber channel properties
and setting up a callback, you can examine samples at various points
in the input chain, such as premix, postmix, preconversion, and
postconversion. For details, see <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/SGAudioCallbackProc">SGAudioCallbackProc</a></code>, <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/tag/SGAudioCallbackStruct">SGAudioCallbackStruct</a></code>, <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550702">&#8220;SGAudio Component Property Classes&#8221;</a></code> and <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-550839">&#8220;SGAudio Component Property IDs&#8221;</a></code>.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-662682" title="Video Enhancements"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCGDBDF" title="Video Enhancements"></a><h2>Video Enhancements</h2>
<p>QuickTime 7 introduces a number of important video enhancements,
discussed in this section. These include</p>
<ul class="ul"><li class="li"><p>Support for compressed video using frame reordering.
Support is added for compression, playback, streaming, and low-level
access to stored samples.</p></li>
<li class="li"><p>A new visual context that provides an abstraction layer that
is intended to decouple QuickTime from graphics worlds (GWorlds).
This decoupling allows programmers to work in QuickTime without
needing to understand QuickDraw, and to more easily render QuickTime
directly using engines such as OpenGL.</p></li>
<li class="li"><p>Support for H.264 video compression, including QuickTime components
for export, playback, and live streaming. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-662714" title="Frame Reordering Video"></a><h3>Frame
Reordering Video</h3>
<p>QuickTime 7 adds support for <strong>frame reordering</strong> video
compression. This is a major advance that involves new sample tables
for video to allow video frames to have independent decode and display
times. </p>
<p>The result of using frame reordering for video compression
is improved display, editing, and capture in H.264 and other advanced
video codec formats. Enhancements include a new API for working
with media sample times, adding and finding samples, and a new Image
Compression Manager (ICM) API.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-662727" title="Understanding Frame Reordering Video Compression"></a><h4>Understanding
Frame Reordering Video Compression</h4>
<p>QuickTime supports many types of video compression, including
spatial compression algorithms, such as photo-JPEG, and temporal
compression algorithms, in which some video frames are described
completely, while other frames are described in terms of their differences
from other video frames.</p>
<p>Up until the introduction of H.264 in QuickTime 7, video frames
could be of three kinds:</p>
<ul class="spaceabove"><li class="li"><p>I-frames (independently decodable)</p></li>
<li class="li"><p>P-frames (predicted from a previous I- or P-frame)</p></li>
<li class="li"><p>B-frames (predicted from one past and one future I- or P-frame)</p></li></ul>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_167" title="Note"></a><p><strong>Note:</strong>&nbsp;B-frame, I-frame,
and P-frame are all video compression methods used by the MPEG standard. <strong>B-frame</strong> is
an abbreviation for <em>bi-directional</em> frame, or
bi-directional predictive frame. B-frames rely on the frames preceding
and following them and only contain data that has changed from the
preceding frame or is different from data in the next frame.</p><strong>P-frame</strong> is
an abbreviation for <em>predictive</em> frame, or predicted
frame. P-frames follow I-frames and contain only the data that has
changed from the preceding I-frame. P-frames rely on I-frames to
fill in most of its data.</p><strong>I-frame</strong>,
also known as keyframes, is an abbreviation for <em>intraframe</em>. An
I-frame stores all the data required to display the frame. In common
usage, I-frames are interspersed with P-frames and B-frames in a
compressed video. </p></div>
<p>Because B-frames predict from a future frame, that frame has
to be decoded before the B-frame, yet displayed after it; this is
why frame reordering is needed.The decoded order is no longer the
same as the displayed order.The QuickTime support for frame reordering is
quite general.In the H.264 codec, the concepts of the direction
of prediction, and the numbers of referenced frames, and the kind
of frame that is referenced, are all decoupled. In H.264, an encoder
may choose to make a stream in which P-frames refer to a future frame,
or a B-frame which refers to two past or future frames, for example.</p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_168" title="Important:"></a><p><strong>Important:</strong>&nbsp;
Prior to this release, QuickTime supported self-contained
video frames (keyframes, also called sync-frames or I-frames) and
frames that depended on previous frames (P-frames). Many modern
compressors also make use of frame reordering, in which frames can
depend on future frames.Those future frames have to be decoded before
the frame in question, but displayed after it&#8211;&#8211;hence the reordering. Traditional
B-frames are one example: they depend on a past and a future I-
or P-frame.That future I- or P-frame has to be given to the decoder before
the B-frame, but is displayed after the B-frame itself. This means
that the frames are stored or streamed in decode order, rather than in
display order.</p><p></p></div>
<p>For decompressors that don&#8217;t use frame reorderings, the
decode order and the display order are the same, and QuickTime sample
tables are traditionally organized to reflect this. Samples are
stored in decode order, which is presumed to be the display order,
and the sample tables specify the duration of each sample&#8217;s display;
the display time is the time when the track begins plus the duration
of all previous samples. </p>
<p>The addition of frame reordering support means that QuickTime
now has an optional sample table for video that specifies the offset
between the decode time and the display time. This allows frames
to be stored in decode order but displayed in a different order. The
decode time is still the beginning of the track plus the decode
duration of all previous samples, but it is now necessary to examine
the offset table to determine which samples precede others and calculate
the correct display time. </p>
<p>For high-level programmers, this all happens transparently.
Developers who work directly with sample numbers and sample times,
however, must be aware of this new feature. A new, expanded API
is available to support this.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-662770" title="Finding and Adding Samples"></a><h4>Finding
and Adding Samples</h4>
<p>Developers who need to work with specific samples based on
the samples&#8217; display times, or who are adding samples to a media
directly, need to use a different API when working with media that
uses frame reorderings.</p>
<p>For example, programmers who use the function <code><a href="../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/doc/c_ref/MediaTimeToSampleNum" target="_top">MediaTimeToSampleNum</a></code> must
instead use the two functions <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/MediaDecodeTimeToSampleNum">MediaDecodeTimeToSampleNum</a></code> and <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/MediaDisplayTimeToSampleNum">MediaDisplayTimeToSampleNum</a></code> when working
with frame reordering compressed video, as each sample now has a
decode time and a display time instead of a single media time (combined
decode/display time). </p>
<p>Similarly, when adding samples to a media that permits display
offsets, it is necessary to use the new <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/AddMediaSample2">AddMediaSample2</a></code> instead
of <code><a href="../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/doc/c_ref/AddMediaSample" target="_top">AddMediaSample</a></code>, as the new function
permits the user to pass a display offset and specify properties
that are unique to media with display offsets, such as whether subsequent
samples are allowed to have earlier display times than the current
sample.</p>
<p>Calling one of the old functions that use a single media time
value on new-format media that contains display offsets will return
the error code <code><!--a  -->kQTErrMediaHasDisplayOffsets<!--/a--></code>.</p>
<p>The new API elements all use 64-bit time values, whereas the
older API elements use 32-bit values. Calling one of the old functions
with a 64-bit time value returns the error code <code><!--a  -->kQTErrTimeValueTooBig<!--/a--></code>.</p>
<p>When creating a media for frame reordering compressed video
track, pass in the new flag <code><!--a  -->kCharacteristicSupportsDisplayOffsets<!--/a--></code>.</p>
<p>For details, see:</p>
<ul class="spaceabove"><li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/AddMediaSample2">AddMediaSample2</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ExtendMediaDecodeDurationToDisplayEndTime">ExtendMediaDecodeDurationToDisplayEndTime</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaAdvanceDecodeTime">GetMediaAdvanceDecodeTime</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaDataSizeTime64">GetMediaDataSizeTime64</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaDecodeDuration">GetMediaDecodeDuration</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaDisplayDuration">GetMediaDisplayDuration</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaDisplayEndTime">GetMediaDisplayEndTime</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaDisplayStartTime">GetMediaDisplayStartTime</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaNextInterestingDecodeTime">GetMediaNextInterestingDecodeTime</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaNextInterestingDisplayTime">GetMediaNextInterestingDisplayTime</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/GetMediaSample2">GetMediaSample2</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MediaContainsDisplayOffsets">MediaContainsDisplayOffsets</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MediaDecodeTimeToSampleNum">MediaDecodeTimeToSampleNum</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/MediaDisplayTimeToSampleNum">MediaDisplayTimeToSampleNum</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/TrackTimeToMediaDisplayTime">TrackTimeToMediaDisplayTime</a></code></p></li></ul>
<p>There is additional support for programmers who work directly
with arrays of media sample references. Although these new functions
work with frame reordering video or other media with independent
decode and display times, they can also be used with ordinary media
types. See <span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-678597">“QuickTime Sample Table API.”</a></span></p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-662994" title="Compressing Video Using Frame Reordering"></a><h4>Compressing
Video Using Frame Reordering</h4>
<p>When compressing video that uses frame reordering, there is
no longer a one-to-one correspondence between submitting a frame
for compression and getting back a compressed sample. The Image
Compression Manager (ICM) and the compressor component may buffer
multiple images before determining that a series of frames should be
B-frames and a subsequent image should be decompressed out of order
so that the B-frames can refer to it. The new ICM functions do not
require a strict correlation between input frames and output frames.
Frames may be rearranged by compression and decompression modules. </p>
<p>The new functions allow groups of multiple pixel buffers to
be in use at various processing points in order to avoid unnecessary
copying of data, using <code>CVPixelBuffers</code> and <code>CVPixelBufferPool</code>s.
These new types are Core Foundation based. They follow Core Foundation&#8217;s
protocols for reference counting (create/copy/retain/release). Each
type has its own retain and release functions which are type-safe
and NULL-safe, but otherwise equivalent to <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRetain" target="_top">CFRetain</a></code> and <code><a href="../../../../CoreFoundation/Reference/CFTypeRef/Reference/reference.html#//apple_ref/doc/c_ref/CFRelease" target="_top">CFRelease</a></code>.
Note that the CVPixelBuffer functions generally provide their output
data through callbacks, rather than as return values or function parameters.</p>
<p>In general, the new functions return <code><a href="../../../Reference/QTRef_DataTypes/Reference/reference.html#//apple_ref/doc/c_ref/OSStatus" target="_top">OSStatus</a></code>,
with the exception of some simple Get functions that return single
values.</p>
<p>Clients create compression sessions using <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionCreate">ICMCompressionSessionCreate</a></code>. They then
feed pixel buffers in display order to <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionEncodeFrame">ICMCompressionSessionEncodeFrame</a></code>. Encoded
frames may not be output immediately, and may not be returned in
the same order as they are input&#8212;encoded frames will be returned
in decode order, which will sometimes differ from display order.
One of the parameters to <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/ICMCompressionSessionCreate">ICMCompressionSessionCreate</a></code> specifies
a callback routine that QuickTime will call when each encoded frame
is ready. Frames should be stored in the order they are output (decode
order).</p>
<p>To force frames up to a certain display time to be encoded
and output, call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionCompleteFrames">ICMCompressionSessionCompleteFrames</a></code>.</p>
<p>To obtain a pixel buffer pool that satisfies the requirements
of both your pixel buffer producer and the compressor, pass the
pixel buffer producer&#8217;s pixel buffer options into <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/ICMCompressionSessionCreate">ICMCompressionSessionCreate</a></code>,
and then call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionGetPixelBufferPool">ICMCompressionSessionGetPixelBufferPool</a></code>. The
compression session constructs an appropriate pixel buffer pool. </p>
<p>Alternatively, you can create your own pixel buffer pool by
obtaining the compressor&#8217;s pixel buffer attributes, choosing a
format compatible with your pixel buffer producer, and setting that
compressor&#8217;s input format using the component properties API.
The process of obtaining the pixel buffer attributes is illustrated
in the following code snippet.</p>
<div class="codesample"><table><tr><td scope="row"><pre>CFDictionaryRef attributesDictionary = NULL;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>err = ICMCompressionSessionGetProperty(<span></span></pre></td></tr><tr><td scope="row"><pre>    session,<span></span></pre></td></tr><tr><td scope="row"><pre>    kQTPropertyClass_ICMCompressionSession,<span></span></pre></td></tr><tr><td scope="row"><pre>    kICMCompressionSessionPropertyID_CompressorPixelBufferAttributes,<span></span></pre></td></tr><tr><td scope="row"><pre>    sizeof(CFDictionaryRef),<span></span></pre></td></tr><tr><td scope="row"><pre>    &amp;attributesDictionary,<span></span></pre></td></tr><tr><td scope="row"><pre>    NULL);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>if (attributesDictionary) {<span></span></pre></td></tr><tr><td scope="row"><pre>    // ...use...<span></span></pre></td></tr><tr><td scope="row"><pre>    CFRelease(attributesDictionary);<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>
<p>You can also pass arbitrary pixel buffers to <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/ICMCompressionSessionEncodeFrame">ICMCompressionSessionEncodeFrame</a></code>;
if they&#8217;re incompatible with the compressor&#8217;s requirements,
then the compression session will make compatible copies and pass
those to the compressor. This requires less setup but can result in
significantly slower operation.</p>
<p>When the compressor no longer needs a source pixel buffer,
it will release it. You may also pass <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/ICMCompressionSessionEncodeFrame">ICMCompressionSessionEncodeFrame</a></code> a
callback to be called when the source pixel buffer is released.</p>
<p>Clients may call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionGetImageDescription">ICMCompressionSessionGetImageDescription</a></code> to
get the image description for the encoded frames. Where possible,
the ICM will allow this to be called before the first frame is encoded.</p>
<p>For additional details, see:</p>
<ul class="spaceabove"><li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionCreate">ICMCompressionSessionCreate</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionGetProperty">ICMCompressionSessionGetProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionGetPixelBufferPool">ICMCompressionSessionGetPixelBufferPool</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionEncodeFrame">ICMCompressionSessionEncodeFrame</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionGetImageDescription">ICMCompressionSessionGetImageDescription</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/ICMCompressionSessionCompleteFrames">ICMCompressionSessionCompleteFrames</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-663251" title="H.264 Codec"></a><h3>H.264
Codec</h3>
<p>The H.264 codec is the latest standards-based video codec.
Published jointly by the ITU as H.264&#8211;&#8211;Advanced Video Coding,
and by ISO as MPEG-4 Part 10&#8211;&#8211;Advanced Video Coding, the H.264
codec promises better image quality at lower bit rates than the
current MPEG-4 video codec, and also better live streaming characteristics
than the current H.263 codec.</p>
<p>This represents a significant increase in quality and performance,
while operating in a standards-based framework.</p>
<p>QuickTime 7 for Mac OS X v10.4 includes a QuickTime decompressor
component and an exporter component for creating and playing H.264-encoded
video in QuickTime.</p>
<p>The H.264 codec makes use of QuickTime 7&#8217;s new support for
frame reordering video compression.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-736845" title="New Abstractions Layers For OpenGL Rendering"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCFCEII" title="New Abstractions Layers For OpenGL Rendering"></a><h3>New Abstractions
Layers For OpenGL Rendering</h3>
<p>QuickTime 7 introduces the <strong>visual context</strong>&#8212;an
abstraction that represents a visual output destination for a movie&#8212;and
the <strong>OpenGL texture context</strong>, an implementation
of the visual context that renders a movie&#8217;s output as a series
of OpenGL textures.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-736866" title="QuickTime Visual Context"></a><h4>QuickTime
Visual Context</h4>
<p>A QuickTime visual context provides an abstraction layer that
decouples QuickTime movies from GWorlds. This allows you to work
in QuickTime without have to rely on QuickDraw concepts and structures.
A visual context enables you to render QuickTime output using engines
such as OpenGL.</p>
<p>A visual context can act as a virtual output device, rendering
the movie&#8217;s visual output, streaming it, storing it, or processing
it in any number of ways.</p>
<p>A visual context can also act as a bridge between a QuickTime
movie and an application&#8217;s visual rendering environment. For example,
you can set up a visual context for OpenGL textures. This causes
a movie to produce its visual output as a series of OpenGL textures. You
can then pass the textures to OpenGL for rendering, without having
to copy the contents of a GWorld and transform it into an OpenGL
texture yourself. In this case, the visual context performs the
transformation from pixel buffers to OpenGL textures and delivers
the visual output to your application.</p>
<p>A <code>QTVisualContextRef</code> is
an opaque token that represents a drawing destination for a movie.
The visual context is, in object-oriented terms, a base class for
other concrete implementations of visual rendering environments.
The output of the visual context depends entirely on the implementation.
The implementation supplied with QuickTime 7 produces a series of
OpenGL textures, but the list of possible outputs is extensible. </p>
<p>You create a visual context by calling a function that instantiates
a context of a particular type, such as <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTOpenGLTextureContextCreate">QTOpenGLTextureContextCreate</a></code>.
This allocates a context object suitable for passing to functions
such as <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieVisualContext">SetMovieVisualContext</a></code> or <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/NewMovieFromProperties">NewMovieFromProperties</a></code>, which target
the visual output of the movie to the specified context.</p>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_169" title="Important:"></a><p><strong>Important:</strong>&nbsp;
To use a visual context, open or create your movie
using the <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/NewMovieFromProperties">NewMovieFromProperties</a></code> function.</p><p></p></div>
<p>In order to use a visual context with a QuickTime movie, you
should instantiate the movie using the new <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/NewMovieFromProperties">NewMovieFromProperties</a></code> function. This
creates a movie that can accept a visual context. You can either
specify the desired visual context when you instantiate the movie,
or set the initial visual context to <code>NIL</code> (to
prevent the movie from inheriting the current GWorld), and set the
visual context later using <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieVisualContext">SetMovieVisualContext</a></code>.
See <span class="content_text"><a href="02QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH313-556033">“Replacing NewMovieFrom... Functions”</a></span> for details.</p>
<p>It is also possible to set a visual context for a movie that
was instantiated using an older function, such as <code><a href="../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/NewMovieFromFile" target="_top">NewMovieFromFile</a></code>.
Such a movie will be associated with a GWorld. You change this to
a visual context by first calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieVisualContext">SetMovieVisualContext</a></code> on
the movie with the visual context set to <code>NIL</code>.
This disassociates the movie from its GWorld (or any previous visual
context). You can then call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieVisualContext">SetMovieVisualContext</a></code> a
second time, this time passing in a <code>QTVisualContextRef</code>.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-736979" title="OpenGL Texture Context"></a><h4>OpenGL
Texture Context</h4>
<p>QuickTime 7 includes an OpenGL texture context. </p>
<p>A <code>QTOpenGLTextureContext</code> is
a specific implementation of the visual context that provides the
movie&#8217;s visual data to a client application as OpenGL textures.
These textures can then be rendered to the screen using OpenGL,
composited with other graphics, run through CoreImage filters, or
whatever else you, as the application developer, choose to do.</p>
<p>To use a <code>QTOpenGLTextureContext</code> for
rendering to OpenGL, you must first set up an OpenGL session using
your own code (Carbon, Cocoa, or CGL, for example).</p>
<div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_170" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;
Call QuickTime OpenGL texture context functions only
when you are certain that no other thread is making calls to the
same OpenGL context that the QuickTime texture context is using.</p><p></p><div class="clear"></div></div>
<p>Follow these steps:</p>
<ol class="ol"><li class="li"><p>Create an OpenGL texture context by calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTOpenGLTextureContextCreate">QTOpenGLTextureContextCreate</a></code>,
passing in the desired <code>CGLContext</code> and <code>CGLPixelFormat</code>. </p></li>
<li class="li"><p>Use the <code>QTVisualContextRef</code> that
you get back to refer to your new visual context in other functions.</p></li></ol>
<div class="notebox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_171" title="Note"></a><p><strong>Note:</strong>&nbsp;Mac OS X v10.4
exposes a new function in Carbon&#8217;s OpenGL API (AGL) to get a <code>CGLPixelFormat</code> from
an <code>AGLPixelFormat</code>.</p></div>
<ol class="ol"><li class="li"><p>You can use the function <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTVisualContextSetImageAvailableCallback">QTVisualContextSetImageAvailableCallback</a></code> to
pass in an optional callback function if you want to be notified
when the context has a new texture ready. A visual context callback
of this type notifies you that a texture is available, but it may
not actually be created until you ask for it. It is even possible
for a texture to become invalid and be flushed after the callback
and before the retrieval. Consequently, you should always poll for
a new texture by calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTVisualContextIsNewImageAvailable">QTVisualContextIsNewImageAvailable</a></code> in
your render loop.</p></li>
<li class="li"><p>The two functions that check for availability, <code><!--a-->QTVisualContextNewImageAvailable<!--/a--></code> and the
callback function, are the <em>only</em> QuickTime OpenGL
texture context functions that are completely thread safe. All the
other texture context functions must be called from a point in your
application when it can be guaranteed that no other thread will
make OpenGL calls to the same OpenGL context used by the texture
context.</p></li>
<li class="li"><p>Set the <code><!--a-->QTVisualContext<!--/a--></code> as the
visual output of a movie by calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/NewMovieFromProperties">NewMovieFromProperties</a></code> or <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieVisualContext">SetMovieVisualContext</a></code>.
Note that <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieVisualContext">SetMovieVisualContext</a></code> will
fail if the movie was not opened using <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/NewMovieFromProperties">NewMovieFromProperties</a></code>.
Additionally, this call may fail if the host hardware is incapable
of supporting the visual context for any reason. For example, many
current graphics cards have a size limit of 2048 pixels in any dimension
for OpenGL textures, so the attempt to set the visual context to
OpenGL textures would fail with a larger movie. (One work-around
for this problem is to resize the movie to fit within the hardware
limitations given by <code>glGetIntegerv(GL_MAX_TEXTURE_SIZE,
&amp;maxTextureSize)</code>).</p></li>
<li class="li"><p>Poll for the availability of new textures by calling <code><!--a-->QTVisualContextNewImageAvailable<!--/a--></code> during
your render loop. Be aware that this function, or the optional callback,
may be notifying you of a texture&#8217;s availability well ahead of
its display time, while previous undisplayed textures remain enqueued.</p></li>
<li class="li"><p>Your application can get a texture when you are ready to work
with it by calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTVisualContextCopyImageForTime">QTVisualContextCopyImageForTime</a></code>.
You may then pass the texture to OpenGL for display. Be aware, however,
that calls to this function may produce a null texture at times
when there is no visual output at the specified point in the movie
timeline.</p></li></ol>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_172" title="Important:"></a><p><strong>Important:</strong>&nbsp;
You cannot call for textures out of order. Once you
ask for a copy of the texture for a given time, that texture and
any textures for previous times are no longer available.</p><p></p></div>
<ol class="ol"><li class="li"><p>You should make periodic calls to <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTVisualContextTask">QTVisualContextTask</a></code> during
your program to allocate time for the OpenGL visual context to do
its work. </p></li>
<li class="li"><p>Again, it is critical that this OpenGL texture function be
called only at a point in your application when it can be guaranteed
that no other thread will make OpenGL calls to the same OpenGL context
used by the QuickTime visual context.</p></li>
<li class="li"><p>When you are done with the visual context, release it by calling <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTVisualContextRelease">QTVisualContextRelease</a></code>.
You can nest calls that retain and release the context as needed.
These calls increment and decrement the context&#8217;s reference count.
When the count reachs zero, the context is deallocated and disposed.
If your application creates the <code>QTOpenGLContext</code>,
it is responsible for releasing it.</p></li></ol>
<p>For additional details, see:</p>
<ul class="spaceabove"><li class="li"><p><code><!--a-->QTVisualContextRef<!--/a--></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextCopyImageForTime">QTVisualContextCopyImageForTime</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextGetAttribute">QTVisualContextGetAttribute</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextGetTypeID">QTVisualContextGetTypeID</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextIsNewImageAvailable">QTVisualContextIsNewImageAvailable</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextSetAttribute">QTVisualContextSetAttribute</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextSetImageAvailableCallback">QTVisualContextSetImageAvailableCallback</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextRetain">QTVisualContextRetain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextRelease">QTVisualContextRelease</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTVisualContextTask">QTVisualContextTask</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/SetMovieVisualContext">SetMovieVisualContext</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/GetMovieVisualContext">GetMovieVisualContext</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTOpenGLTextureContextCreate">QTOpenGLTextureContextCreate</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTVisualContextRetain">QTVisualContextRetain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTVisualContextRelease">QTVisualContextRelease</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTOpenGLTextureAvailableCallbackProc">QTOpenGLTextureAvailableCallbackProc</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-788704" title="Limitation Working With QuartzExtreme"></a><h4>Limitation
Working With QuartzExtreme</h4>
<p>Developers working on non-QuartzExtreme computers should be
aware of a specific limitation with QTVisualContext. The limitation
is that with QuartzExtreme turned off, the creation of a QTVisualContext
fails with error -108.</p>
<p>If you launch QuartzDebug and turn off QuartzExtreme, and
then launch the LiveVideoMixer and import a movie into a channel,
it won&#8217;t play. In the console, the following error message is
returned: <code>QTVisualContext creation failed with
error:-108</code>.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-556033" title="Replacing NewMovieFrom... Functions"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCJJGHE" title="Replacing NewMovieFrom... Functions"></a><h2>Replacing NewMovieFrom...
Functions</h2>
<p>QuickTime 7 introduces a replacement&#8211;&#8211;<code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/NewMovieFromProperties">NewMovieFromProperties</a></code>&#8211;&#8211; for <code><a href="../../../Reference/QTRef_MovieManager/Reference/reference.html#//apple_ref/doc/c_ref/NewMovie" target="_top">NewMovie</a></code>, <code><a href="../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/NewMovieFromDataRef" target="_top">NewMovieFromDataRef</a></code>,
and all other <code>NewMovieFrom...</code> functions. </p>
<p>In previous versions of QuickTime, you could use other functions
that create new movies, including <code><a href="../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/NewMovieFromFile" target="_top">NewMovieFromFile</a></code> and <code><a href="../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/NewMovieFromDataRef" target="_top">NewMovieFromDataRef</a></code>.
These functions accept flags that allow you to set some movie characteristics
at creation time, but other movie characteristics are always set
by default. For example, there must be a valid graphics port associated
with a movie created by these functions, even if the movie does
not output video.</p>
<p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/NewMovieFromProperties">NewMovieFromProperties</a></code> allows you to
configure an extensible set of properties before creating a movie.
This has a number of advantages. </p>
<ul class="ul"><li class="li"><p>You can open a movie with exactly the properties
you want, preventing QuickTime from taking undesired default actions. </p></li>
<li class="li"><p>You can also specify properties that the older functions do
not know about, such as a visual context for the movie. </p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-738759" title="Using NewMovieFromProperties"></a><h3>Using
NewMovieFromProperties</h3>
<p>To instantiate a movie using <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/NewMovieFromProperties">NewMovieFromProperties</a></code>,
follow these steps:</p>
<ol class="ol"><li class="li"><p>Pass in a CFString file path, a URL, or set up
a data reference, just as you would for <code><a href="../../../Reference/QTRef_MovieToolkit/Reference/reference.html#//apple_ref/doc/c_ref/NewMovieFromDataRef" target="_top">NewMovieFromDataRef</a></code> or
one of the other <code>NewMovieFrom_</code> functions.</p></li>
<li class="li"><p>Next, set up a visual context for the movie to use by calling
a function that creates a context of a the desired type, such as <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTOpenGLTextureContextCreate">QTOpenGLTextureContextCreate</a></code>.
Similarly, you can set up an audio context if you want a device
other than the default device.</p></li>
<li class="li"><p>Call <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/NewMovieFromProperties">NewMovieFromProperties</a></code>, passing in the
data reference for the movie and the <code>QTVisualContextRef</code> for
the visual context, plus any appropriate properties listed in the <code>QTNewMoviePropertyArray</code>. </p></li></ol>
<p>Properties are passed in using a <code>QTNewMoviePropertyElement</code> struct,
which specifies the property class and property ID of each property.</p>
<p>The movie will automatically retain the visual context, so
if your application does not need to work with the context directly,
you may release it now.</p>
<p>For additional details, see:</p>
<ul class="spaceabove"><li class="li"><p><code><!--a-->QTNewMoviePropertyArray<!--/a--></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTNewMoviePropertyElement">QTNewMoviePropertyElement</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/NewMovieFromProperties">NewMovieFromProperties</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-674504" title="QuickTime Metadata Enhancements and API"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCBDDGA" title="QuickTime Metadata Enhancements and API"></a><h2>QuickTime Metadata
Enhancements and API</h2>
<p>QuickTime 7 introduces a new extensible metadata storage format
that allows more flexible and efficient storage of metadata, including
encapsulated storage of metadata in native format (without translating
to and from a defined QuickTime format). For developers, this means
that you can now write cleaner, more generic code that enables you to
look at, for example, all the metadata in a QuickTime or iTunes
music track using just a single function call.</p>
<p>Metadata, of course, is information about a file, track, or
media, such as the white balance used to create a photographic image
or the artist, album, and title of an MP3 track. Traditionally,
metadata information is stored in QuickTime user data items or in
ancilliary tracks in a movie. For example, copyright information
is normally stored in a <code>&#8217;@cpy&#8217;</code> user data
item, while cover art for an AAC audio track is normally stored
in a track that is not displayed by all applications. </p>
<p>The new metadata enhancements in QuickTime 7 allow you to
access both old (QuickTime) and new (iTunes) formats. The new metadata
storage format is intended as a replacement for QuickTime user data,
which was limited in features and robustness. Specifically, the
metadata enhancements introduced in QuickTime 7 provide the following capabilities:</p>
<ul class="ul"><li class="li"><p>The ability to assign data types to any metadata
that you place into the new storage format.</p></li>
<li class="li"><p>The ability to assign locale information&#8211;&#8211;for example,
a particular language or country&#8211;&#8211;to the format.</p></li>
<li class="li"><p>The ability to use a more descriptive key in the storage format&#8211;&#8211;for
example, a reverse DNS format, such as com.apple.quicktime.mov.</p></li></ul>
<p>The new metadata format allows storage of data that is not
possible in user data items, without extending the list of item
types exhaustively, and allows labeling of metadata unambiguously,
rather than as data in an undisplayed media track. It also permits inclusion
of metadata that is always stored external to the movie, even when
the movie is flattened (saved as self-contained).</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-736459" title="How It Works"></a><h3>How
It Works</h3>
<p>Metadata is encapsulated in an opaque container and accessed
using a <code>QTMetDataRef</code>.
A <code><!--a  -->QTMetaDataRef<!--/a--></code> represents a metadata
repository consisting of one or more native metadata containers.
The QuickTime metadata API supports unified access to and management
of these containers.</p>
<p>Each container consists of some number of metadata items.
Metadata items correspond to individually labeled values with characteristics
such as keys, data types, locale information, and so on. Note that
what QuickTime calls <em>items</em> are sometimes referred
to as <em>attributes</em> or <em>properties</em> in
other metadata systems.</p>
<p>You address each container by its storage format (<code><!--a  -->kQTMetaDataStorageFormat<!--/a--></code>).
Initially, there is support for classic QuickTime user data items,
iTunes metadata, and a richer QuickTime metadata container format.
A <code><!--a  -->QTMetaDataRef<!--/a--></code> may have one or all
of these. No direct access to the native storage containers is provided.</p>
<p><code><!--a  -->QTMetaDataRefs<!--/a--></code> may be associated
with a movie, track or media. This parallels user data atoms usage
but provides access to other kinds of metadata storage at those
levels.</p>
<p>A metadata item is assigned a runtime identifier (<code><!--a  -->QTMetaDataItem<!--/a--></code>)
that along with the <code><!--a  -->QTMetaDataRef<!--/a--></code> identifies
the particular item (and value) across all native containers managed
by the <code><!--a  -->QTMetaDataRef<!--/a--></code>.</p>
<p>Each item is addressed by a key, or label. The key is not
necessarily unique within its container, as it is possible to have
multiple items with the same key (for example, multiple author items).
Functions exist to enumerate all items or only items with a particular
key.</p>
<p>Because a <code><!--a  -->QTMetaDataRef<!--/a--></code> may
provide access to different native metadata containers with differing
key structures&#8212;a four-char-code for one, a string for another,
and so on&#8212;the key structure is also specified. A <code><!--a  -->QTMetaDataKeyFormat<!--/a--></code> indicates
the key structure to functions that take keys. This also supports
container formats that allow multiple key structures or multiple
versions of key structures.</p>
<p>To allow unified access across disparate containers, you can
specify a wildcard storage format. This can be used for operations
such as searches across container formats. A special key format
called <code><!--a  -->kQTMetaDataKeyFormatCommon<!--/a--></code> indicates
one of a set of common keys that can be handled by multiple native
containers (for example, copyright). </p>
<p>Both modes of operation are illustrated in <span class="content_text">Figure 2-37</span>. </p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-736572" title="Figure 2-37Metadata modes of operations "></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BABIEJGG" title="Figure 2-37Metadata modes of operations "></a><p><strong>Figure 2-37&nbsp;&nbsp;</strong>Metadata modes of operations </p>
<img src = "../art/MetaDataDiagram.jpg" alt = "" ></div><br/>
<a name="//apple_ref/doc/uid/TP40001163-CH313-736619" title="Advantages of the New Metadata Format"></a><h3>Advantages
of the New Metadata Format</h3>
<p>The QuickTime metadata format is inherently extensible. Instead
of a set of structures and enumerated parameters, the metadata API
uses a set of properties that can be enumerated, and whose characteristics
can be discovered, dynamically at runtime. This is analogous to the
QuickTime component property function in that you first get the
property info, such as its size and format, and then you allocate
the appropriate container or structure to get or set the actual
property.</p>
<p>The new QuickTime metadata format and API consist of the following
structures, enumerations, and functions, grouped in sections followed
by the specific functions:</p>
<ul class="spaceabove"><li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-553195">&#8220;Metadata Format Constants&#8221;</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-553378">&#8220;Metadata Property IDs&#8221;</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-553720">&#8220;Metadata Key Constants&#8221;</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/uid/TP40001163-CH314-625909">&#8220;Metadata Error Codes&#8221;</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTCopyMovieMetaData">QTCopyMovieMetaData</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTCopyTrackMetaData">QTCopyTrackMetaData</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTCopyMediaMetaData">QTCopyMediaMetaData</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataAddItem">QTMetaDataAddItem</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataGetItemCount">QTMetaDataGetItemCount</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataGetItemProperty">QTMetaDataGetItemProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataGetItemPropertyInfo">QTMetaDataGetItemPropertyInfo</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataGetItemValue">QTMetaDataGetItemValue</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataGetNextItem">QTMetaDataGetNextItem</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataGetProperty">QTMetaDataGetProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataGetPropertyInfo">QTMetaDataGetPropertyInfo</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataRetain">QTMetaDataRetain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataRelease">QTMetaDataRelease</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataRemoveItem">QTMetaDataRemoveItem</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataRemoveItemsWithKey">QTMetaDataRemoveItemsWithKey</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataSetItem">QTMetaDataSetItem</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataSetItemProperty">QTMetaDataSetItemProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTMetaDataSetProperty">QTMetaDataSetProperty</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-678597" title="QuickTime Sample Table API"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCDCDGC" title="QuickTime Sample Table API"></a><h2>QuickTime Sample
Table API</h2>
<p>The new QuickTime sample table API in QuickTime 7 is used
when you need to obtain information about samples&#8212;such as their
size, location, and sample descriptions&#8212;or to set this kind of
information (for example, when adding samples or blocks of samples
to a media directly, without using the services of an importer or
sequence grabber).</p>
<p>This new API introduces <code>QTSampleTable</code> as
a logical replacement for the arrays of sample reference records
used with the older functions <code><a href="../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/doc/c_ref/AddMediaSampleReferences" target="_top">AddMediaSampleReferences</a></code> and <code><a href="../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/doc/c_ref/AddMediaSampleReferences64" target="_top">AddMediaSampleReferences64</a></code>.
New functions allow you to operate on whole tables of data simultaneously.</p>
<p>Like many new QuickTime APIs, the QuickTime sample table API
uses opaque data types whose properties can be discovered dynamically
at runtime. This is analogous to the component properties API for
configuring components. You use a <code><a href="../../../../MusicAudio/Reference/CoreAudio/audiocodec/audiocodec.html#//apple_ref/doc/c_ref/GetPropertyInfo" target="_top">GetPropertyInfo</a></code> function
to discover the size and format of a property, then allocate the
necessary container or structure to get or set the actual property.</p>
<p>This API works with both simple media types that have a single
media time for each sample and new media types such as frame reordering
video that have independent decode and display times for samples.</p>
<div class="warningbox"><img src="../../../../Resources/Images/icon_warning.gif" alt="!" width="20" height="20" border="0" class="warningicon" /><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_173" title="Warning:"></a><p><strong>Warning:</strong>&nbsp;
When using the QuickTime sample table API to work with
constant-bit-rate (CBR) compressed audio, the audio is represented
in a new way.</p><p></p><div class="clear"></div></div>
<p>In the QuickTime sample table API, sample numbers for audio
always refer to packets. This is simpler and more consistant, but
it means that a new function may not return the same value as an
older, analogous function when called with reference to compressed
CBR sound. For example, <code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/doc/c_ref/QTSampleTableGetNumberOfSamples">QTSampleTableGetNumberOfSamples</a></code> may
return a different sample count than <code><a href="../../../Reference/QTRef_TrackAndMedia/Reference/reference.html#//apple_ref/doc/c_ref/GetMediaSampleCount" target="_top">GetMediaSampleCount</a></code>.</p>
<p>All compressed audio is quantized into packets, and each packet
can be decompressed into multiple PCM samples. With previous APIs,
media sample numbers for CBR sound refer to PCM samples, rather
than the compressed packets. When the same APIs are applied to variable-bit-rate
(VBR) sound, however, the sample numbers refer to packets. This inconsistency
means that code using these older APIs must handle CBR and VBR differently.
In this API, by contrast, sample numbers always refer to packets.</p>
<p>This applies only to <em>compressed</em> CBR sound,
however. In uncompressed sound tracks, each packet is simply an
uncompressed PCM frame, so the value is the same whether the sample
number refers to packets or PCM samples.</p>
<p>For full details of the QuickTime sample table API, see:</p>
<ul class="ul"><li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableCreateMutable">QTSampleTableCreateMutable</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableCreateMutableCopy">QTSampleTableCreateMutableCopy</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableAddSampleDescription">QTSampleTableAddSampleDescription</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableCopySampleDescription">QTSampleTableCopySampleDescription</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableAddSampleReferences">QTSampleTableAddSampleReferences</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/AddSampleTableToMedia">AddSampleTableToMedia</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/CopyMediaMutableSampleTable">CopyMediaMutableSampleTable</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableReplaceRange">QTSampleTableReplaceRange</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetProperty">QTSampleTableGetProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableSetProperty">QTSampleTableSetProperty</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetPropertyInfo">QTSampleTableGetPropertyInfo</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetNumberOfSamples">QTSampleTableGetNumberOfSamples</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetSampleDescriptionID">QTSampleTableGetSampleDescriptionID</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetDataSizePerSample">QTSampleTableGetDataSizePerSample</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetSampleFlags">QTSampleTableGetSampleFlags</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetDataOffset">QTSampleTableGetDataOffset</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetDisplayOffset">QTSampleTableGetDisplayOffset</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetTypeID">QTSampleTableGetTypeID</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetDecodeDuration">QTSampleTableGetDecodeDuration</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetNextAttributeChange">QTSampleTableGetNextAttributeChange</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableGetTimeScale">QTSampleTableGetTimeScale</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableRelease">QTSampleTableRelease</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableReplaceRange">QTSampleTableReplaceRange</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableRetain">QTSampleTableRetain</a></code></p></li>
<li class="li"><p><code><a href="../Chapter03/03QT7_Update_Guide.html#//apple_ref/c/func/QTSampleTableSetTimeScale">QTSampleTableSetTimeScale</a></code></p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-648083" title="JavaScript Support and Accessibility in Safari"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BBCJEIBE" title="JavaScript Support and Accessibility in Safari"></a><h2>JavaScript Support
and Accessibility in Safari</h2>
<p>New in QuickTime 7, the QuickTime plug-in for Safari is now
fully scriptable using JavaScript. This means you can now use JavaScript
to control QuickTime when webpages are viewed using Safari. </p>
<p>Two plug-ins are available in QuickTime 7 for Mac OS X v10.4:
Carbon and a new Cocoa plug-in. From the user&#8217;s perspective, these
plug-ins look and behave the same. The Cocoa plug-in works only
in Safari, however. The benefit for both users and developers is
that the plug-in is now scriptable.</p>
<p>To control a movie through the QuickTime plug-in using JavaScript,
you must include the parameter <code>EnableJavaSript=&quot;true&quot;</code> in
the movie&#8217;s <code>EMBED</code> tag
(this parameter is not needed in the <code>OBJECT</code> tag,
but it does no harm there).</p>
<p>JavaScript treats each embedded QuickTime movie in a webpage
as a separately addressable object. Movies can be identified by
name if there is a <code>NAME</code> parameter
in the movie&#8217;s <code>EMBED</code> tag
and an <code>ID</code> attribute in
the movie&#8217;s <code>OBJECT</code> tag.
Internet Explorer for Windows uses the <code>ID</code> attribute.
Other browsers use the <code>NAME</code> parameter.
Both <code>NAME</code> and <code>ID</code> should
be set to the same value. </p>
<p>For example, to create a movie that can be addressed in JavaScript
as <code>Movie1</code>, your <code>OBJECT</code> and <code>EMBED</code> tags
would look something like this:</p>
<div class="codesample"><table><tr><td scope="row"><pre>&lt;OBJECT classid=&quot;clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    codebase=&quot;http://www.apple.com/qtactivex/qtplugin.cab&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    width=&quot;180&quot; height=&quot;160&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>    id=&quot;movie1&quot; &gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;PARAM name=&quot;src&quot; value=&quot;My.mov&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;EMBED width=&quot;180&quot; height=&quot;160&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        src=&quot;My.mov&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        name=&quot;movie1&quot;<span></span></pre></td></tr><tr><td scope="row"><pre>        enablejavascript=&quot;true&quot;&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;/EMBED&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/OBJECT&gt;<span></span></pre></td></tr></table></div>
<p>Movies can also be identified by their ordinal number in the
JavaScript <code>embeds[]</code> array. </p>
<p>An example of usage and syntax, showing JavaScript control
of multiple QuickTime movies using different methods of addressing,
can be found in <span class="content_text"><a href="http://developer.apple.com/documentation/QuickTime/REF/QT41_HTML/QT41WhatsNew-80.html" target="_top">Sample JavaScript Usage</a></span>.</p>
<p>QuickTime exposes dozens of methods to JavaScript, allowing
you to control not only the standard user interface actions, such
as playing and stopping a movie, but also more complex actions,
such as layering and compositing. You can use JavaScript, for example, to
enable and disable alternate audio, text, or video tracks, or change
a video track&#8217;s graphics mode or a sprite&#8217;s current image. </p>
<p>Detailed descriptions of the QuickTime methods and properties
available to JavaScript can be found in <span class="content_text"><a href="http://developer.apple.com/documentation/QuickTime/REF/QT41_HTML/QT41WhatsNew-72.html" target="_top">JavaScript Support</a></span>.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-788325" title="Other Changes and Enhancements"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJFHABC" title="Other Changes and Enhancements"></a><h2>Other Changes
and Enhancements</h2>
<p>This section discusses the following changes and enhancements
that are available in QuickTime 7. </p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-791434" title="New Persistent Cache Option "></a><h3>New
Persistent Cache Option </h3>
<p>QuickTime 7 introduces a new <strong>persistent cache</strong> option,
which is enabled in the System Preferences &gt; QuickTime &gt; Browser
panel, as shown in <span class="content_text">Figure 2-38</span>. Users, web
authors, and web content developers should understand the consequences
of this new option because it may impact the way that QuickTime
content is downloaded and saved from their websites. The reason
is that QuickTime&#8217;s caching behavior has changed in this release.</p>
<br/><div><a name="//apple_ref/doc/uid/TP40001163-CH313-791678" title="Figure 2-38QuickTime Browser preferences with the Save movies in disk cache box checked"></a><a name="//apple_ref/doc/uid/TP40001163-CH313-BAJHAFFF" title="Figure 2-38QuickTime Browser preferences with the Save movies in disk cache box checked"></a><p><strong>Figure 2-38&nbsp;&nbsp;</strong>QuickTime Browser preferences with
the Save movies in disk cache box checked</p><img src = "../art/presistent_cache_prefs.jpg" alt = "" ></div><br/>
<div class="importantbox"><a name="//apple_ref/doc/uid/TP40001163-CH313-DontLinkElementID_174" title="Important:"></a><p><strong>Important:</strong>&nbsp;
The new cache is <em>only</em> used by
QuickTime. Content downloaded by QuickTime is <em>not</em> stored in
the browser cache.</p><p></p></div>
<a name="//apple_ref/doc/uid/TP40001163-CH313-791781" title="Changes to File Caching"></a><h4>Changes
to File Caching</h4>
<p>By default, the user preference is set to &#8220;Save movies in
disk cache.&#8221; This means that files downloaded by QuickTime and
written to the cache will now stay in the cache when the last connection
to the file is closed. By contrast, in pre-QuickTime 7 versions,
downloaded files would be written to disk and but only remain there
as long as the user kept open a connection to the file. After the
movie was closed, the local file would be deleted. If you wanted
to look at the movie again, you would have to download the file
in its entirety another time. </p>
<p>If the user unchecks the preference, QuickTime&#8217;s old behavior
prevails&#8212;that is, movies downloaded to disk will only be saved
as long as they remain open. There may be situations, for example,
when unchecking the box is warranted: users don&#8217;t want any QuickTime
content to be cached perhaps for privacy reasons, or if they don&#8217;t
have enough disk space on their computers.</p>
<p>When the preference is checked, movies downloaded by QuickTime
will be saved in the cache. The slider allows the user to set the
maximum size of the cache (the minimum is 100 MB). Note that QuickTime&#8217;s
cache is per user, not computer wide. This means that if you have
more than one account on the computer, each user&#8217;s setting and
cached movies are for themselves only.</p>
<p>When the cache is on, files may not remain in the persistent
cache because of settings on the server. If you have administrator
(admin) access to a server, you can tell the server to include information
in the file header that specifies how long it is allowed to stay
on the user&#8217;s computer. The header can say, &#8220;Don&#8217;t cache this
at all.&#8221; Or, &#8220;Only keep it for a week.&#8221; QuickTime pays close
attention to the information that is stored in the headers. </p>
<p>In particular, when the cache is enabled QuickTime honors
the &#8220;expiration date,&#8221; often supplied by web servers to inform
clients of how long a file remains valid after it has been downloaded.
Until the expiration date supplied by the server is reached, QuickTime
will respond to additional requests for the file by supplying the
file from the cache instead of by fetching it again from the server.
This remains true even if the file is changed on the server before
the expiration date is reached. Previous versions of QuickTime as
described above always downloaded a file afresh, if a previous version
of it was no longer still open and in use, and therefore changes
to files made before the expiration date would often be accessible
immediately.</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-791807" title="How To Control File Caching"></a><h4>How
To Control File Caching</h4>
<p>There are several ways to control QuickTime&#8217;s file caching
behavior. Each step, listed below, may be appropriate for a different
situation:</p>
<ul class="spaceabove"><li class="li"><p><strong>HTTP headers</strong>. Useful only
if you have admin access to the server on which the files are posted.
Consult your web server documentation for specifics (for example,
look for &#8220;Cache-Control: no-cache&#8221; and &#8220;Expires:&#8221;).</p></li>
<li class="li"><p><strong>&#8220;cache&#8221; EMBED/OBJECT attribute</strong>. Useful
if your movies are embedded in HTML pages, but you don&#8217;t have
adminaccess to the server. This is a very common situation.</p><p>In
previous versions of QuickTime, this tag told the plug-in to ask
the browser not to keep an embedded movie in its cache. This is
still true, but now it also tells the plug-in to not keep the movie
in the QuickTime persistent cache either. </p></li>
<li class="li"><p><strong>XML movies</strong>. The &#8220;cache&#8221; attribute has
been added to QuickTime Media Link importer. Adding &#8216;cache=&#8221;false&#8221;&#8217;
to a media link movie will keep it from being saved in QuickTime&#8217;s
persistent cache. See the documentation <span class="content_text"><a href="http://developer.apple.com/documentation/QuickTime/WhatsNewQT5/QT5NewChapt1/chapter_1_section_39.html" target="_top">QuickTime Media Links XML Importer</a></span> for more information about this movie
importer.</p></li></ul>
<p>When a movie is tagged as &#8220;not cacheable&#8221; with any of
these methods, QuickTime will not keep the movie or any media loaded
by it in the persistent cache (for example, sprite images loaded
by URL).</p>
<a name="//apple_ref/doc/uid/TP40001163-CH313-788402" title="Updates to QuickTime for Java"></a><h3>Updates
to QuickTime for Java</h3>
<p>QuickTime for Java (QTJ) is now fully supported in QuickTime
7. QTJ is now installed by default in QuickTime 7. </p>
<p>This release includes a number of important bug fixes requested
by QuickTime for Java developers. These are as follows:</p>
<ul class="spaceabove"><li class="li"><p>Major fixes for issues related to drawing and
correct QTComponent rendering</p></li>
<li class="li"><p>Compatibility with headless applications</p></li>
<li class="li"><p>Fixes for issues related to movie progress procedures and
movie exporting</p></li>
<li class="li"><p>Fixes for Applet issues, including support for MPEG video
playback in an applet </p></li>
<li class="li"><p>Support for 2-byte character file names</p></li>
<li class="li"><p>Security fixes</p></li></ul>
<a name="//apple_ref/doc/uid/TP40001163-CH313-788441" title="Support for Quartz Composer"></a><h3>Support
for Quartz Composer</h3>
<p>QuickTime can read Quartz Composers. Also, Quartz Composer
compositions can be exported as QuickTime movies.</p>
<p>You can accomplish this either by using the Export menu command
in the Quartz Composer Editor, or by opening the composition in
QuickTime Player and saving it as a movie. </p>
<p></p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../Chapter01/Introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../Chapter03/03QT7_Update_Guide.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2005 Apple Computer, Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2005-04-29<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/QuickTime/Conceptual/QT7UpdateGuide/Chapter02/02QT7_Update_Guide.html%3Fid%3DTP40001163-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/QuickTime/Conceptual/QT7UpdateGuide/Chapter02/02QT7_Update_Guide.html%3Fid%3DTP40001163-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/QuickTime/Conceptual/QT7UpdateGuide/Chapter02/02QT7_Update_Guide.html%3Fid%3DTP40001163-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
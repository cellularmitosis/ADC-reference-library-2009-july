<!-- legacy work start --><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/html4/loose.dtd"><!-- legacy work end --><HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><TITLE> Sound Component Chains (deprecated)</title><!-- legacy work start -->        <META NAME="Generator" CONTENT="manual">        <META http-equiv="content-type" CONTENT="text/html;charset=utf-8">        <META NAME = "Copyright" CONTENT="Copyright 2007 Apple Inc. All Rights Reserved.">        <META NAME="IndexTitle" CONTENT="Sound Input Manager (Not Recommended)">        <meta name="xcode-display" content="render">        <LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css"> <!-- before submitting, globally replace ".." with "developer.apple.com" -->        <script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script><!-- legacy work end --></HEAD><BODY BGCOLOR="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- path goes here --><!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundcomps.2.htm">Previous</A> | <A target="doc" HREF="imsoundcomps.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundcomps.htm">Chapter top</A> | <A target="doc" HREF="imsoundcomps.2.htm">Section top</A> | <A target="doc" HREF="imsoundcomps.4.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --><H1 CLASS="H2.Heading2"><A NAME="pgfId=1098"> </A>Sound Component Chains</H1><P CLASS="T0.Text0"><A NAME="pgfId=992"> </A>Prior to version 3.0, the Sound Manager performed all audio data processing internally, using its own filters to decompress audio data, convert sample rates, mix separate sound channels, and so forth. This effectively rendered it difficult, if not impossible, to add other data modification filters to process the audio data. (The now-obsolete method of installing a sound modifier with the <TT CLASS="cv">SndAddModifier</TT> routine did not work reliably.) More importantly, the Sound Manager was responsible for managing the entire stream of audio data, from the application to the available sound-producing audio hardware. This made it very difficult to support new sound output devices.<A NAME="marker=223"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=993"> </A>In versions 3.0 and later, the Sound Manager provides a new audio data processing architecture based on components, illustrated in <A target="doc" HREF="imsoundcomps.3.htm#24444" CLASS="XRef">Figure&nbsp;3</A>. The fundamental idea is that the process of playing a sound can be divided into a number of specific steps, each of which has well-defined inputs and outputs. <A target="doc" HREF="imsoundcomps.3.htm#24444" CLASS="XRef">Figure&nbsp;3</A> shows the steps involved in playing an 11&nbsp;kHz compressed sampled sound resource on a Macintosh II computer.</P><P CLASS="T1.Text1"><A NAME="pgfId=1000"> </A><A NAME="marker=258"> </A>An application sends the compressed sound data to the Sound Manager, which constructs an appropriate <B CLASS="bold">sound component chain</B> that links the unprocessed audio data&nbsp;to the sound components required to modify the data into a form that can be sent to the current sound output device. As you can see in <A target="doc" HREF="imsoundcomps.3.htm#24444" CLASS="XRef">Figure&nbsp;3</A>, the Sound Manager links together sound components that, in sequence, expand the compressed sound data into audio samples, convert the sample rate from 11&nbsp;kHz to 22&nbsp;kHz, mix those samples with samples from any other sound channels that might be playing, and then write the samples to the available audio hardware (in this case, the FIFO buffer in the Apple&nbsp;Sound Chip).</P><P CLASS="I.Important"><A NAME="pgfId=1101"> </A>The Sound Manager itself converts both wave-table data and square-wave data into sampled-sound data before sending the data into&nbsp;a chain of sound components. As a result, sound components need to be concerned only with sampled-sound data. </P><P CLASS="Fg.Figure"><A NAME="pgfId=1071"> </A>Figure&nbsp;3 <A NAME="24444"> </A>The component-based sound architecture</P><DIV><IMG SRC="imsoundcomps-1.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=637"> </A>The components in a component chain may vary, depending both on the format of the audio data sent to the Sound Manager by an application and on the capabilities of the&nbsp;current sound output device. The chain shown in <A target="doc" HREF="imsoundcomps.3.htm#24444" CLASS="XRef">Figure&nbsp;3</A> is necessary to handle the compressed 11&nbsp;kHz sound because the Apple Sound Chip can handle only 22&nbsp;kHz noncompressed sampled-sound data. Other sound output devices may be able to do more processing internally, thereby reducing the amount of processing required by the sound component chain. For instance, a DSP-based sound card might be capable of converting sample rates itself. In that case, the Sound Manager would not install the rate conversion component into the sound component chain. The resulting sound component chain is shown in <A target="doc" HREF="imsoundcomps.3.htm#14213" CLASS="XRef">Figure&nbsp;4</A>.<A NAME="marker=506"> </A></P><P CLASS="Fg.Figure"><A NAME="pgfId=1006"> </A>Figure&nbsp;4 A component chain for audio hardware that can convert sample rates<A NAME="14213"> </A></P><DIV><IMG SRC="imsoundcomps-2.gif"></DIV><P CLASS="T1.Text1"><A NAME="pgfId=1072"> </A>The principal function of a sound component is to transfer data from the source down the chain of sound components while performing some specific modification on the data. It does this by getting a block of data from its <B CLASS="bold">source component</B> (the component that immediately precedes it in the chain). The sound component then processes that data and stores it in the component's own private buffers. The next component can then get that processed data, perform its own modifications, and pass the data to the next component in the chain. Eventually, the audio data flows through the Apple Mixer (described in the next section) to the <B CLASS="bold">sound output device component,</B> which sends the data to the current sound output device.<A NAME="marker=367"> </A><A NAME="marker=394"> </A><A NAME="marker=428"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=708"> </A>Notice that only the sound output device component communicates directly with the sound output hardware. This insulates all other sound components from having to know anything about the current sound output device. Rather, those components (sometimes called <B CLASS="bold">utility components</B>) can simply operate on a stream of bytes.<A NAME="marker=431"> </A></P><P CLASS="T1.Text1"><A NAME="pgfId=730"> </A>The Sound Manager provides sound output device components for all sound output devices built into Macintosh computers. It also provides utility components for many typical kinds of audio data manipulation, including</P><UL><LI CLASS="B1.Bullet1"><A NAME="pgfId=1116"> </A>sample rate conversion</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=1117"> </A>audio data expansion</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=1118"> </A>sample size conversion</LI><LI CLASS="B1.Bullet1"><A NAME="pgfId=1120"> </A>format conversion (for example, converting offset binary data to two's complement)</LI></UL><P CLASS="T1.Text1"><A NAME="pgfId=1121"> </A>Currently, you can write sound output device components to handle communication with your own sound output devices. You can also write utility components to handle custom compression and expansion schemes. You cannot currently write any other kind of utility component.<A NAME="marker=133"> </A></P><hr>&#169; 1999 Apple Computer, Inc.<!-- QTnavbar start --><P><I>Inside Macintosh: Sound</I><P>| <A target="doc" HREF="imsoundcomps.2.htm">Previous</A> | <A target="doc" HREF="imsoundcomps.1.htm">Chapter contents</A> | <A target="doc" HREF="imsoundcomps.htm">Chapter top</A> | <A target="doc" HREF="imsoundcomps.2.htm">Section top</A> | <A target="doc" HREF="imsoundcomps.4.htm">Next</a> | <!-- QTnavbar end --><!-- legacy work start --><script type="text/javascript"> placeWatermark()</script><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox" style="position: relative;"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b><i>Sound Input Manager</i> is deprecated as of Mac OS X v10.5. For new audio development in Mac OS X, use Core Audio. See the <a href="http://developer.apple.com/referencelibrary/MusicAudio/" target="_top">Audio</a> page in the ADC Reference Library.</p></div></div></div><!-- legacy work end --></DIV></DIV></DIV></DIV><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></BODY></HTML>
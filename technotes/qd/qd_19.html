<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"			"http://www.w3.org/TR/REC-html40/loose.dtd"><html><head><LINK REL="stylesheet" HREF="../../adcstyle.css" TYPE="text/css"><LINK REL="stylesheet" HREF="../../style.css" TYPE="text/css"><title>Technical Note QD19: Fixed CLUT Devices and the Single Techno Nerd</title><meta name="keywords" content="PowerBook 160 180 Duo Fixed CLUT devices modifying color environment"><meta name="Description" content="Technical Note QD19: This Technical Note describes what aFixed CLUT device is and presents some solutions to the challengespresented by this display type. This Technical Note primarilyapplies to applications that modify the color environmenton Macintosh PowerBooks 160, 180 and Duo.">                                                                             <meta name="categories" content="QuickDraw"><meta name="week-posted" content="Nov 30, 1992 - Dec 4, 1992"><LINK REL="stylesheet" HREF="../../css/adcstyle.css" TYPE="text/css"><script language="JavaScript" type="text/javascript" src="../../js/adc.js"></script></HEAD><BODY BGCOLOR="#FFFFFF"><a name="//apple_ref/doc/uid/DTS10002732" title="Fixed CLUT Devices and the Single Techno Nerd"></a><a name="top"></A><!-- top_of_header_marker_comment --><!-- begin_header_information --><!--#include virtual="/adcnavbar" --><p><a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../technicalnotes/index.html">Technical Notes</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../technicalnotes/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; </p><div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="../../referencelibrary/GraphicsImaging/index.html" target="_blank">Reference Library > Graphics & Imaging</a></li>
	</ul>
</div>




</div></div></div><!-- end_header_information --><!-- bottom_of_header_marker_comment --><!-- top_of_titles_marker_comment --><CENTER><table width="600" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left" scope="row">
<h1>
<div id="pagehead">Technical Note QD19</div>
<div id="pageheadsub">Fixed CLUT Devices and the Single Techno Nerd</div>
</h1>
</td></tr></table></CENTER><!-- bottom_of_titles_marker_comment --><CENTER><TABLE BORDER=0 CELLSPACING=1 WIDTH=600><TR><td align="left"><!-- begin_header_box --><table width="600" cellpadding="0" cellspacing="0" border="0">    <tr>        <td width=300 valign="top" align=left scope="row">            <table border="0" width="300" cellpadding="0" cellspacing="0">			<tr>                        <td width=300 align=left> <img src="images/tnmenutop.gif" alt="" align="bottom" width=300 height=7></td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>                                         <span id="menutitle">                            CONTENTS                             <br>                            <br>                        </span>                    </td>                </tr>                <tr bgcolor="#e6e6e6">                    <td background="images/tnmenubody.gif" width=300 align=left>					<!-- begin_toc -->										<p id="menutext"><A HREF="#Section1">Introduction</A><BR><BR><A HREF="#Section2">So What!</A><BR><BR><A HREF="#Section3">In Conclusion</A><BR><BR><A HREF="#References">References</A><BR><BR><A HREF="#Downloads">Downloadables</A></P>                   <!-- end_toc -->                  </td>                </tr>                <tr>                    <td width=300 align=left scope="row">                        <img src="images/tnmenubottom.gif" alt="" width=300 height=16>                    </td>                </tr>            </table>        </td>        <td width=300 valign="top" align=left><!-- begin_intro_text --><p id="introtext">Applications that need a given set of colors to look good or make use of colortable animation can obtain undesired results in PowerBook 160, PowerBook 180,and PowerBook Duo Macintosh models. The reason for this is that these modelssport Fixed Color Devices associated with the flat screen display. This Technote describes what a Fixed CLUT device is and presents some solutions to thechallenges presented by this display type.</p><!-- end_intro_text --><!-- begin_date --><h3 align=center>[Dec 01 1992]</h3><!-- end_date -->                </TD>             </TR>          </TABLE>          <!-- end_table_box --> <BR><BR>          <hr width=500 align=center>          <BR><BR>          <!-- begin_content --><a name=Section1></A><H2>Introduction</h2><p>Since the introduction of the Macintosh II, <i>Inside Macintosh</i> Volume Vdefined three types of graphics devices:</p><p>Indexed CLUT devices ( <code>gdType</code> = 0 )</p>    <p>Fixed CLUT devices ( <code>gdType</code> = 1 )</p>    <p>Direct RGB devices ( <code>gdType</code> = 2 )</p><p>In the case of indexed devices, values that range from 0 to 2[n ]-1 (where <i>n</i> is the depth of the device under consideration) pointto entries in a table of RGB triplets, thus determining the color associatedwith a given pixel value. In the case of direct RGB devices, the pixel value isin itself an RGB triplet, therefore defining the color associated with the pixel.</p><p>Up to recently, the only type of indexed CLUT devices known to humanity hasbeen <code>gdType</code>&nbsp;=&nbsp;0 or Indexed CLUT devices; these are the devices thatdrive most display boards when set to depths between 1 and 8 (2 colors to 256colors). As far as color is concerned, the main feature of indexed devices isthat the color table for a given device can be changed either directly by using<code>SetEntries</code> or indirectly when the Palette Manager establishes the colorenvironment in response to a palette associated with the frontmost window (ifit has one.)</p><p>Fixed CLUT devices enter with the introduction of the PowerBook&nbsp;Duo,PowerBook&nbsp;160, and PowerBook&nbsp;180 portables. All these machinessupport 16-color gray displays (depth&nbsp;=&nbsp;4); the trick is thatalthough the video does have a color table, it can not be changed at all. Whatthis means is that no color table animation is possible and that the palettemanager can not give you the colors you want or affect palette animation.</p><p>Checking for the type of device is really simple. Once you have the devicehandle all you have to write is something like:</p><p><code>DisplayInfo.gdType = (*currDev) -&gt; gdType;</code></p><p>Naturally, once the application knows it has to deal with a Fixed CLUT device,it may want to do something based on this information.</p><a id="Section2"></a><P><A HREF="#top">Back to top</A></p><H2>So What!</h2><p>At this point the smart reader is probably starting to wonder what kind of helpthis Technote is going to provide as far as not having to stay alone at homethis Friday evening: Sadly enough the answer is <i>none</i>. Nevertheless itcan help avoid support calls from PowerBook users when their favoriteapplication starts acting weird.</p><p>Now, the first thing to emphasize is that most developers don't have to worryabout this--it is not as if your word processing application is going to startcrashing. However, applications that by their nature have to modify the colorenvironment to run properly have to take some precautions.</p><p>We will discuss some scenarios and the implications for each one. Otherpossibilities may exist, but these will help you understand the issues.</p><h3>Non-Color-Intensive Applications Need Not to Worry</h3><p>Applications that deal with text and black-and-white stuff should not beconcerned. Even applications that provide limited color capabilities will haveno problem.</p><h3>Color-Enhanced Applications</h3><p>Certain applications such as games and presentation packages require a givenset of colors to look "cool." Probably the Palette Manager is used in order toassure that the minimal set of colors is present. Applications like these needto make sure there is a fallback similar to the one used when the applicationis running in a black-and-white environment. Note that prompting the user tochange the depth won't do much good.</p><h3>Color-Intensive Applications</h3><p>Applications that require heavy manipulation of the color environment to dotheir stuff need to be ready to take the path taken when the machine the useris on has no color or can not be set to the optimum depth. Applications thatcall the video driver directly such as those that animate colors by calling the<code>_Control</code> routine especially need to make sure the device in question is capableof color table changing; the control call returns an error -17 (<code>controlErr</code> -Driver can not respond to Control call) if <code>SetEntries</code> or <code>DirectSetEntries</code> is tried.</p><BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note 1:</B><BR>The PowerBook Duo can be docked to a number of different dockingstations, the currently available docking stations are:</p><ol type="a">	<li>Duo Dock. In this case the flat display is not used at all and the main device becomes an Indexed CLUT device with depths depending on the monitor being used.</li>	<li>Mini Dock. The main display is still in use and the monitor configuration for the machine becomes a two-display system with one Indexed CLUT device  (external display) and a Fixed CLUT device (flat display).</li></ol></TD></TR></TABLE></CENTER><BR> <BR><CENTER><TABLE BORDER=0 WIDTH=550><TR><td bgcolor="#E6E6E6" align=left><P><B>Note 2:</B><BR>PowerBook Duo, PowerBook 160, and PowerBook 180 Macintoshcomputers can be configured in a display mode called Mirroring using thePowerBook Display control panel. In this configuration the system sees twodevices that share the same bounds. The result is that drawing to the maindevice results in drawing into both screens with QuickDraw taking care of thedetails such as different depths and color/black-and-white settings.</p></TD></TR></TABLE></CENTER><BR><a id="Section3"></a><P><A HREF="#top">Back to top</A></p><H2>In Conclusion</h2><p>Fixed CLUT devices add a little twist to the things that an applicationdeveloper has to be aware of. With the popularity of the PowerBook line, itbecomes really important that applications know how to configure in this casein order to continue providing smooth performance under the varied conditionsnow existent in the Macintosh family of computers.</p> <P><A HREF="#top">Back to top</A></p><a id="References"></a><h2>References</h2><P><i>Inside Macintosh</i>, Volume VI, The Graphics Devices Manager</p><p>Macintosh Duo System Developer Note (Available on the Developer CD)</p><p>Macintosh PowerBook 160 and Macintosh PowerBook 180 Developer Note (Available on the Developer CD)</p><a name="Downloads"></a>         <P><A HREF="#top">Back to top</A></p><H2>Downloadables</H2>                  <TABLE BORDER=0 CELLPADDING=3 WIDTH="100%">            <TR>               <td width=50 align=left>                  <P ALIGN=center><img src="images/acrobatsmall.gif" width=22 height=23 align=middle alt="Acrobat gif"></P>               </TD>               <td align="left">                  <P>Acrobat version of this Note (52K).</P>               </TD>               <td width=60 align=left>                  <P><A HREF="pdf/qd_19.pdf">Download</A></P>               </TD>            </TR>                    </TABLE>         <BR></TD></TR></table></center><!-- begin_footer_information -->	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/technotes/qd/qd_19.html%3Fid%3DDTS10002732-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/technotes/qd/qd_19.html%3Fid%3DDTS10002732-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/technotes/qd/qd_19.html%3Fid%3DDTS10002732-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
<!--#include virtual="/includes/footer"--><!-- end_footer_information --></BODY></HTML>
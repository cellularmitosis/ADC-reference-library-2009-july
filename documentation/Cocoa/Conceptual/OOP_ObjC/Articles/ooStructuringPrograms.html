<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Object-Oriented Programming with Objective-C: Structuring Programs</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Structuring Programs"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40005149-CH4" title="Structuring Programs"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000416" target="_top">Cocoa</a> &gt; <a href="../../../DesignGuidelines-date.html#//apple_ref/doc/uid/TP30000440-TP30000416-TP30000556" target="_top">Design Guidelines</a> &gt; <a href="../Introduction/Introduction.html#//apple_ref/doc/uid/TP40005149-CH1-SW2">Object-Oriented Programming with Objective-C</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ooObjectModel.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ooStructuringTask.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40005149-CH4-SW2" title="Structuring Programs"></a>
    <h1>Structuring Programs</h1>
    
        <p>Object-oriented programs have two kinds of structure. One can be seen in the inheritance hierarchy of class definitions. The other is evident in the pattern of message passing as the program runs. These messages reveal a network of object connections.
        </p>
        <ul class="ul">
            <li class="li">
                <p>The inheritance hierarchy explains how objects are related by type. For example, in the program that models water use, it might turn out that Faucets and Pipes are the same kind of object, except that Faucets can be turned on and off and Pipes can have multiple connections to other Pipes. This similarity would be captured in the program design if the Faucet and Pipe classes inherit from a common superclass.</p>
            </li>
            <li class="li">
                <p>The network of object connections explains how the program works. For example, Appliance objects might send messages requesting water to Valves, and Valves to Pipes. Pipes might communicate with the Building object, and the Building object with all the Valves, Faucets, and Pipes, but not directly with Appliances. To communicate with each other in this way, objects must know about each other. An Appliance would need a connection to a Valve, and a Valve to a Pipe, and so on. These connections define a program structure.</p>
            </li>
        </ul>
        <p>Object-oriented programs are designed by laying out the network of objects with their behaviors and patterns of interaction and by arranging the hierarchy of classes. There’s structure both in the program’s activity and in its definition.</p>
    
    
        
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="ooStructuringPrograms.html#//apple_ref/doc/uid/TP40005149-CH4-SW3">Outlet Connections</a>
				
			<br/>
			
        
			
			
				<a href="ooStructuringPrograms.html#//apple_ref/doc/uid/TP40005149-CH4-SW6">Aggregation and Decomposition</a>
				
			<br/>
			
        
			
			
				<a href="ooStructuringPrograms.html#//apple_ref/doc/uid/TP40005149-CH4-SW7">Models and Frameworks</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40005149-CH4-87100" title="Outlet Connections"></a><a name="//apple_ref/doc/uid/TP40005149-CH4-SW3" title="Outlet Connections"></a>
            <h2>Outlet Connections</h2>
            <p>
                <a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_65"></a>
                <a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_66"></a>Part of the task of designing an object-oriented program is to arrange the object network. The network doesn’t have to be static; it can change dynamically as the program runs. Relationships between objects can be improvised as needed, and the cast of objects that play assigned roles can change from time to time. But there has to be a script.</p>
            <p>Some connections can be entirely transitory. A message might contain an argument identifying an object, perhaps the sender of the message, that the receiver can communicate with. As it responds to the message, the receiver can send messages to that object, perhaps identifying itself or still another object that the object can in turn communicate with. Such connections are fleeting; they last only as long as the chain of messages.</p>
            <p>But not all connections between objects can be handled on the fly. Some need to be recorded in program data structures. There are various ways to do this. A table might be kept of object connections, or there might be a service that identifies objects by name. However, the simplest way is for each object to have <a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_67"></a> instance variables that keep track of the other objects it must communicate with. These instance variables—termed <strong>outlets</strong>
                <a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_68"></a> because they record the outlets for messages—define the principal connections between objects in the program network.</p>
            <p>Although the names of outlet instance variables are arbitrary, they generally reflect the roles that outlet objects play. <span class="content_text">Figure 4-1</span> illustrates an object with four outlets—an “agent,” a “friend,” a “neighbor,” and a “boss.” The objects that play these parts may change every now and then, but the roles remain the same.</p>
            <br/><div><a name="//apple_ref/doc/uid/TP40005149-CH4-87132" title="Figure 4-1Outlets"></a><a name="//apple_ref/doc/uid/TP40005149-CH4-SW1" title="Figure 4-1Outlets"></a>
                <p><strong>Figure 4-1&nbsp;&nbsp;</strong>Outlets</p>
                <img src = "../Art/outlets.gif" alt = "" width="337" height="276">
            </div><br/>
            <p>Some outlets are set when the object is first initialized and may never change. Others might be set automatically as the consequence of other actions. Still others can be set freely, using methods provided just for that purpose.</p>
            <p>However they’re set, outlet instance variables reveal the structure of the application. They link objects into a communicating network, much as the components of a water system are linked by their physical connections or as individuals are linked by their patterns of social relations.<a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_69"></a>
                <a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_70"></a>
            </p>
            <a name="//apple_ref/doc/uid/TP40005149-CH4-87155" title="Extrinsic and Intrinsic Connections"></a><a name="//apple_ref/doc/uid/TP40005149-CH4-SW4" title="Extrinsic and Intrinsic Connections"></a>
                <h3>Extrinsic and Intrinsic Connections</h3>
                <p>Outlet connections can capture many different kinds of relationships between objects. Sometimes the connection is between objects that communicate more or less as equal partners in an application, each with its own role to play and neither dominating the other. For example, an Appliance object might have an outlet instance variable to keep track of the Valve it’s connected to.</p>
                <p>Sometimes one object should be seen as being part of another. For example, a Faucet might use a Meter object to measure the amount of water being released. The Meter would serve no other object and would act only under orders from the Faucet. It would be an intrinsic part of the Faucet, in contrast to an Appliance’s extrinsic connection to a Valve.</p>
                <p>Similarly, an object that oversees other objects might keep a list of its charges. A Building object, for example, might have a list of all the Pipes in the program. The Pipes would be considered an intrinsic part of the Building and belong to it. Pipes, on the other hand, would maintain extrinsic connections to each other.</p>
                <p>Intrinsic outlets<a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_71"></a> behave differently from extrinsic ones. When an object is freed or archived in a file on disk, the objects that its intrinsic outlets point to must be freed or archived with it. For example, when a Faucet is freed, its Meter is rendered useless and therefore should be freed as well. A Faucet archived without its Meter would be of little use when it’s unarchived (unless it could create a new Meter for itself).</p>
                <p>Extrinsic outlets<a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_72"></a>, on the other hand, capture the organization of the program at a higher level. They record connections between relatively independent program subcomponents. When an Appliance is freed, the Valve it was connected to still is of use and remains in place. When an Appliance is unarchived, it can be connected to another Valve and resume playing the same sort of role it played before.</p>
            
            <a name="//apple_ref/doc/uid/TP40005149-CH4-87189" title="Activating the Object Network"></a><a name="//apple_ref/doc/uid/TP40005149-CH4-SW5" title="Activating the Object Network"></a>
                <h3>Activating the Object Network</h3>
                <p>The object network is set into motion by an external stimulus. If you’re writing an interactive application with a user interface, it will respond to user actions on the keyboard and mouse. A program that tries to factor very large numbers might start when you pass it a target number on the command line. Other programs might respond to data received over a phone line, information obtained from a database, or information about the state of a mechanical process the program monitors.</p>
                <p>Programs often are activated by a flow of <strong>events</strong>
                    <a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_73"></a>, reports of external activity of some sort. Applications that display a user interface are driven by events from the keyboard and mouse. Every press of a key or click of the mouse generates events that the application receives and responds to. An object-oriented program structure (a network of objects that’s prepared to respond to an external stimulus) is ideally suited for this kind of user-driven application.<a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_74"></a>
                </p>
            
        
        <a name="//apple_ref/doc/uid/TP40005149-CH4-87213" title="Aggregation and Decomposition"></a><a name="//apple_ref/doc/uid/TP40005149-CH4-SW6" title="Aggregation and Decomposition"></a>
            <h2>Aggregation and Decomposition</h2>
            <p>Another part of the design task is deciding the arrangement of classes—when to add functionality to an existing class by defining a subclass and when to define an independent class. The problem can be clarified by imagining what would happen in the extreme case:</p>
            <ul class="ul">
                <li class="li">
                    <p> It’s possible to conceive of a program consisting of just one object. Since it’s the only object, it can send messages only to itself. It therefore can’t take advantage of polymorphism, or the modularity of a variety of classes, or a program design conceived as a network of interconnected objects. The true structure of the program would be hidden inside the class definition. Despite being written in an object-oriented language, there would be very little that was object-oriented about it.</p>
                </li>
                <li class="li">
                    <p>On the other hand, it’s also possible to imagine a program that consists of hundreds of different kinds of objects, each with very few methods and limited functionality. Here, too, the structure of the program would be lost, this time in a maze of object connections.</p>
                </li>
            </ul>
            <p>Obviously, it’s best to avoid either of these extremes, to keep objects large enough to take on a substantial role in the program but small enough to keep that role well-defined. The structure of the program should be easy to grasp in the pattern of object connections.</p>
            <p>Nevertheless, the question often arises of whether to add more functionality to a class or to factor out the additional functionality and put it in a separate class definition. For example, a Faucet needs to keep track of how much water is being used over time. To do that, you could either implement the necessary methods in the Faucet class, or you could devise a generic Meter object to do the job, as suggested earlier. Each Faucet would have an outlet connecting it to a Meter, and the Meter would not interact with any object but the Faucet.</p>
            <p>The choice often depends on your design goals. If the Meter object could be used in more than one situation, perhaps in another project entirely, it would increase the reusability of your code to factor the metering task into a separate class. If you have reason to make Faucet objects as self-contained as possible, the metering functionality could be added to the Faucet class.</p>
            <p>It’s generally better to try for reusable code and avoid having large classes that do so many things that they can’t be adapted to other situations. When objects are designed as components, they become that much more reusable. What works in one system or configuration might well work in another.</p>
            <p>Dividing functionality between different classes doesn’t necessarily complicate the programming interface. If the Faucet class keeps the Meter object private, the Meter interface wouldn’t have to be published for users of the Faucet class; the object would be as hidden as any other Faucet instance variable.</p>
        
        <a name="//apple_ref/doc/uid/TP40005149-CH4-87266" title="Models and Frameworks"></a><a name="//apple_ref/doc/uid/TP40005149-CH4-SW7" title="Models and Frameworks"></a>
            <h2>Models and Frameworks</h2>
            <p>Objects combine state and behavior, and so resemble things in the real world. Because they resemble real things, designing an object-oriented program is very much like thinking about real things—what they do, how they work, and how one thing is connected to another.</p>
            <p>When you design an object-oriented program, you are, in effect, putting together a computer simulation of how something works. Object networks look and behave like models of real systems. An object-oriented program can be thought of as a model, even if there’s no actual counterpart to it in the real world.</p>
            <p>Each component of the model—each kind of object—is described in terms of its behavior, responsibilities, and interactions with other components. Because an object’s interface lies in its methods, not its data, you can begin the design process by thinking about what a system component must do, not how it’s represented in data. Once the behavior of an object is decided, the appropriate data structure can be chosen, but this is a matter of implementation, not the initial design.</p>
            <p>For example, in the water-use program, you wouldn’t begin by deciding what the Faucet data structure looked like, but what you wanted a Faucet to do—make a connection to a Pipe, be turned on and off, adjust the rate of flow, and so on. The design is therefore not bound from the outset by data choices. You can decide on the behavior first, and implement the data afterwards. Your choice of data structures can change over time without affecting the design.</p>
            <p>Designing an object-oriented program doesn’t necessarily entail writing great amounts of code. The reusability of class definitions means that the opportunity is great for building a program largely out of classes devised by others. It might even be possible to construct interesting programs entirely out of classes someone else defined. As the suite of class definitions grows, you have more and more reusable parts to choose from.</p>
            <p>Reusable classes come from many sources. Development projects often yield reusable class definitions, and some enterprising developers market them. Object-oriented programming environments typically come with class libraries. There are well over two hundred classes in the Cocoa libraries. Some of these classes offer basic services (hashing, data storage, remote messaging). Others are more specific (user interface devices, video displays, sound).</p>
            <p>Typically, a group of library classes work together to define a partial program structure. These classes constitute a software framework<a name="//apple_ref/doc/uid/TP40005149-CH4-DontLinkElementID_75"></a> (or kit) that can be used to build a variety of different kinds of applications. When you use a framework, you accept the program model it provides and adapt your design to it. You use the framework by:</p>
            <ul class="ul">
                <li class="li">
                    <p>Initializing and arranging instances of framework classes</p>
                </li>
                <li class="li">
                    <p>Defining subclasses of framework classes</p>
                </li>
                <li class="li">
                    <p>Defining new classes of your own to work with classes defined in the framework</p>
                </li>
            </ul>
            <p>In each of these ways, you not only adapt your program to the framework, but you also adapt the generic framework structure to the specialized purposes of your application.</p>
            <p>The framework, in essence, sets up part of an object network for your program and provides part of its class hierarchy. Your own code completes the program model started by the framework.</p>
        
    


        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="ooObjectModel.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="ooStructuringTask.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-11-19<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Cocoa/Conceptual/OOP_ObjC/Articles/ooStructuringPrograms.html%3Fid%3DTP40005149-1.2&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Cocoa/Conceptual/OOP_ObjC/Articles/ooStructuringPrograms.html%3Fid%3DTP40005149-1.2&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Cocoa/Conceptual/OOP_ObjC/Articles/ooStructuringPrograms.html%3Fid%3DTP40005149-1.2&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
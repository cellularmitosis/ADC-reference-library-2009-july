<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>

	<!-- BEGIN META TAG INFO -->
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="home" href="http://developer.apple.com/">
	<link rel="find" href="http://developer.apple.com/search/">
	<link rel="stylesheet" type="text/css" href="../../documentation/css/adcstyle.css" title="fonts">
	<script language="JavaScript" src="../../documentation/js/adc.js" type="text/javascript"></script>
	<!-- END META TAG INFO -->
	
	<!-- BEGIN TITLE -->
	<title>RAVE Starter Samples - /Gouraud Sample/Gouraud Triangle.cp</title>
	<!-- END TITLE -->
<script language="JavaScript">
function JumpToNewPage() {
	window.location=document.scpopupmenu.gotop.value;
	return true;
}
</script>

</head>

<!-- BEGIN BODY OPEN -->
<body>
<!--END BODY OPEN -->

<!-- START CENTER OPEN -->
<center>
<!-- END CENTER OPEN -->

	<!-- BEGIN LOGO AND SEARCH -->
	<!--#include virtual="/includes/adcnavbar"-->
	<!-- END LOGO AND SEARCH -->
		
		
	<!-- START BREADCRUMB -->
	<div id="breadcrumb">
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td scope="row"><img width="340" height="10" src="images/1dot.gif" alt=""></td>
			<td><img width="340" height="10" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr valign="middle">
			<td align="left" colspan="2">
			<a href="http://developer.apple.com/">ADC Home</a> &gt; <a href="../../referencelibrary/index.html">Reference Library</a> &gt; <a href="../../samplecode/index.html">Sample Code</a> &gt; <a href="../../samplecode/LegacyTechnologies/index.html">Legacy Documents</a> &gt; <a href="../../samplecode/LegacyTechnologies/idxGraphicsImaging-date.html">Graphics & Imaging</a> &gt; <A HREF="javascript:location.replace('index.html');">RAVE Starter Samples</A> &gt; 
			</td>
		</tr>
		<tr>
			<td colspan="2" scope="row"><img width="680" height="35" src="images/1dot.gif" alt=""></td>
		</tr>
	</table>
	</div>
	<!-- END BREADCRUMB -->

	<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;"><div class="legacybox"><h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../images/closebutton.png" width="14" height="14" border="0"  alt="close button"></a></span></h1>

<p><strong>Important: </strong>This document is part of the Legacy section of the ADC Reference Library. This information should not be used for new development.</p>

<div class="reflibtopic">
	<p>Current information on this Reference Library topic can be found here:</p>
	<ul>
				<li><a href="http://developer.apple.com/referencelibrary/GraphicsImaging/index.html" target="_blank">Reference Library > Graphics & Imaging</a></li>
	</ul>
</div>




</div></div></div>

	<!-- START MAIN CONTENT -->
	
	<!-- START TITLE GRAPHIC AND INTRO-->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td><h1><div id="pagehead">RAVE Starter Samples</div></h1></td>
		</tr>
	</table>
	<!-- END TITLE GRAPHIC AND INTRO -->
	<!-- START WIDE COLUMN -->
	<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr align="left" valign="top">
			<td id="scdetails">
				<h2>/Gouraud Sample/Gouraud Triangle.cp</h2>
				<form name="scpopupmenu" onSubmit="return false;" method=post>
				<p><strong>View Source Code:</strong> 
					<select name="gotop" onChange="JumpToNewPage();" style="width:340px"><option selected value="ingnore">Select File</option>
<option value="listing1.html">/CallBack Sample/Gouraud Callback.cp</option>
<option value="listing2.html">/Gouraud Sample/Gouraud Triangle.cp</option>
<option value="listing3.html">/RAVE CommonCode/Common Stuff.h</option>
<option value="listing4.html">/RAVE CommonCode/RAVE Utilities.cp</option>
<option value="listing5.html">/RAVE CommonCode/RAVE Utilities.h</option>
<option value="listing6.html">/Texture Sample/Texture Triangle.cp</option></select>
				</p>
				</form>
				<p><strong><a href="RAVE_Starter_Samples.zip">Download Sample</a></strong> (&#147;RAVE_Starter_Samples.zip&#148;, 49.3K)<BR>
<strong><a href="RAVE_Starter_Samples.dmg">Download Sample</a></strong> (&#147;RAVE_Starter_Samples.dmg&#148;, 110.7K)</p>
				<!--
				<p><strong><a href="#">Download Sample</a></strong> (&#147;filename.sit&#148;, 500K)</p>
				-->
			</td>
		</tr>
		<tr>
			<td scope="row"><img width="680" height="10" src="images/1dot.gif" alt=""><br>
			<img height="1" width="680" src="images/1dot_919699.gif" alt=""><br>
			<img width="680" height="20" src="images/1dot.gif" alt=""></td>
		</tr>
		<tr>
			<td scope="row">
	<!--googleon: index -->
<pre class="sourcecodebox">/*  File:    Gouraud Triangle.cp  Contains:    Written by: Timothy Carroll    Copyright:  Copyright &copy; 1998-1999 by Apple Computer, Inc., All Rights Reserved.        You may incorporate this Apple sample source code into your program(s) without        restriction. This Apple sample source code has been provided &quot;AS IS&quot; and the        responsibility for its operation is yours. You are not permitted to redistribute        this Apple sample source code as &quot;Apple sample source code&quot; after having made        changes. If you're going to re-distribute the source, we require that you make        it clear in the source that the code was descended from Apple sample source        code, but that you've made changes.  Change History (most recent first):        7/15/1999  Karl Groethe  Updated for Metrowerks Codewarror Pro 2.1        */#include &lt;RAVE.h&gt;#include &quot;Common Stuff.h&quot;#include &quot;RAVE Utilities.h&quot;#include &lt;Fonts.h&gt;#include &lt;Windows.h&gt;#include &lt;Menus.h&gt;#include &lt;TextEdit.h&gt;#include &lt;Dialogs.h&gt;#include &lt;Memory.h&gt;// Standard declarationsvoid main (void);void DoRAVEWindow(void);void main (void){  // do standard mac init  InitGraf(&amp;qd.thePort);  InitFonts();  InitWindows();  InitMenus();  TEInit();  InitDialogs(nil);  InitCursor();  MaxApplZone();  MoreMasters(); MoreMasters(); MoreMasters(); MoreMasters(); MoreMasters();  // Initialize the SIN and COS lookup tables (see RAVE Utilities.cp)  if (InitializeLookups() == noErr)    DoRAVEWindow();}void DoRAVEWindow(void){  // These hold our errors  OSErr      theErr = noErr;  TQAError    theQAErr = kQANoErr;    // These hold the window and device we'll put on the screen  GDHandle    device = NULL;  WindowRef    theWindow = NULL;    // We try to center the window on the device.  Rect      bounds = {0,0,320,320};  Rect      deviceRect;    // We use these parameters to describe our environment to RAVE  TQADevice    qaDevice;  TQARect     qaBoundsRect;    // we get these items back from RAVE  TQAEngine     *theEngine = NULL;  TQADrawContext  *theContext = NULL;    // We use these in our drawing loop to create our RAVE animation.  int       loop = 0;  TQAVGouraud   theTriangle[3];    RgnHandle    gray;  Rect      grayRect;      // First, grab the first monitor with the deepest display  gray = GetGrayRgn();  grayRect = (**gray).rgnBBox;  device = GetMaxDevice(&amp;grayRect);  FAIL_NIL (device, &quot;\pERROR: No monitors found&quot;)    // Center our bounds in the middle of the screen.  deviceRect = (**device).gdRect;  OffsetRect (&amp;bounds,          (deviceRect.right+deviceRect.left-bounds.right)/2,          (deviceRect.bottom+deviceRect.top-bounds.bottom)/2);    // Create a Window to hold the RAVE information.      theWindow = NewCWindow(NULL, &amp;bounds, &quot;\pRAVE Window&quot;, true, zoomDocProc, (WindowRef) -1, false, 0);  FAIL_NIL (theWindow, &quot;\pERROR: Couldn't create RAVE Window&quot;)    SetPortWindowPort (theWindow);    // Next we need to find a RAVE engine and then build a DrawContext to draw into it.  First, we'll find  // an engine that is capable of drawing to the selected GDevice.  qaDevice.deviceType = kQADeviceGDevice;  qaDevice.device.gDevice = device;    // We have to explicitly enable the Apple hardware card because it isn't 100% RAVE compliant.  // If we use this engine, we have to write special case code to deal with it.#if qEnableAppleHardware  QAEngineEnable (kQAVendor_Apple,kQAEngine_AppleHW);#endif    // We'll just grab the first engine that the system offers us.  theEngine = QADeviceGetFirstEngine (&amp;qaDevice);  FAIL_NIL (theEngine, &quot;\pERROR:  No RAVE engines available.&quot;)    // Next we need to set up the a QARect with the Window's rectangle in GDevice local coordinates.    qaBoundsRect.left = bounds.left - deviceRect.left;  qaBoundsRect.right = bounds.right  - deviceRect.left;  qaBoundsRect.top = bounds.top - deviceRect.top;  qaBoundsRect.bottom = bounds.bottom - deviceRect.top;  // If we wanted to create a clipping region, we'd do it here    // Finally, we're ready to create the draw context!  theQAErr = QADrawContextNew (&amp;qaDevice, &amp;qaBoundsRect, NULL, theEngine,                  kQAContext_DeepZ | kQAContext_DoubleBuffer, &amp;theContext);  if (theQAErr != kQANoErr) SIGNAL_ERROR(&quot;\pERROR:  Failed to create RAVE draw context&quot;)  FAIL_NIL (theContext, &quot;\pERROR:  Failed to create RAVE draw context&quot;)    // set the background to black  QASetFloat (theContext, kQATag_ColorBG_a, 1.0);  QASetFloat (theContext, kQATag_ColorBG_r, 0.0);  QASetFloat (theContext, kQATag_ColorBG_g, 0.0);  QASetFloat (theContext, kQATag_ColorBG_b, 0.0);    // Finally, everything is ready!  We'll create an animated sequence and end it when the user  // presses a button.    while (!Button())  {  // Set up our points  theTriangle[0].x = 160 + 150*gCosArray[loop];  theTriangle[0].y = 160 + 150*gSinArray[loop];  theTriangle[0].z = 0.25;  theTriangle[0].invW = 1.0;  theTriangle[0].a = 1;  theTriangle[0].r = 1.0;  theTriangle[0].g = 0.0;  theTriangle[0].b = 0.0;    theTriangle[1].x = 160 + 150*gCosArray[(loop+240) % 720];  theTriangle[1].y = 160 + 150*gSinArray[(loop+240) % 720];  theTriangle[1].z = 0.25;  theTriangle[1].invW = 1.0;  theTriangle[1].a = 1;  theTriangle[1].r = 0.0;  theTriangle[1].g = 1.0;  theTriangle[1].b = 0.0;      theTriangle[2].x = 160 + 150*gCosArray[(loop+480) % 720];  theTriangle[2].y = 160 + 150*gSinArray[(loop+480) % 720];  theTriangle[2].z = 0.25;  theTriangle[2].invW = 1.0;  theTriangle[2].a = 1;  theTriangle[2].r = 0.0;  theTriangle[2].g = 0.0;  theTriangle[2].b = 1.0;    // Render the triangle.  QARenderStart (theContext, NULL, NULL);  QADrawTriGouraud (theContext, &amp;theTriangle[0], &amp;theTriangle[1], &amp;theTriangle[2], kQATriFlags_None);  QARenderEnd(theContext, NULL);      // Increment our loop position 2.5 degrees  loop = (loop+5) % 720;  }    error:  // Either we got an error or the user finished.  In any case, tear everything down and return    if (theContext != NULL)    QADrawContextDelete (theContext);  if (theWindow != NULL)    DisposeWindow(theWindow);  return;}</pre>
	<!--googleoff: index -->
			</td>
		</tr>
	</table>
	<!-- END WIDE COLUMN -->

	<!-- END MAIN CONTENT -->
		<table width="680" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/samplecode/RAVE_Starter_Samples/listing2.html%3Fid%3DDTS10000155-1.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/samplecode/RAVE_Starter_Samples/listing2.html%3Fid%3DDTS10000155-1.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/samplecode/RAVE_Starter_Samples/listing2.html%3Fid%3DDTS10000155-1.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

	<!-- START BOTTOM APPLE NAVIGATION -->
	<!--#include virtual="/includes/footer"-->
	<!-- END BOTTOM APPLE NAVIGATION -->

<!-- START CENTER CLOSE -->
</center>
<!-- END CENTER CLOSE -->

</body>
</html>
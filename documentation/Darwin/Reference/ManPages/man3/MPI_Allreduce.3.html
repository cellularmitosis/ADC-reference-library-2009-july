<html><head><title>Mac OS X
 Manual Page For MPI_Allreduce(3)</title>
<style type="text/css"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { font-size: 1px; background: #ffffff; color: #ffffff; } --></style>
<style type="text/css" media="print, aural, braille, embossed, projection, tty"><!-- @import "../../../../adcstyle.css"; .char {background: #ffffff; color:#0000ff;}.comment {background:#ffffff; color:#236e25}.function {background:#ffffff; color:#000000;}.keyword {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.param {background:#ffffff; color:#000000;}.preprocessor {background:#ffffff; color:#236e25}.string {background: #ffffff; color:#891315;}.template {background:#ffffff; color:#761550;}.type {background:#ffffff; color:#761550;}.var {background:#ffffff; color:#000000;} pre.manpages {font-size: 10pt;} .graybox { border-top: 1px solid #919699; border-left: 1px solid #919699; margin-bottom: 10px; } .graybox th { padding: 4px 8px 4px 8px; background: #E2E2E2; font-size: 12px; font-weight: bold; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .graybox td { padding: 8px; font-size: 12px; text-align: left; vertical-align: top; border-bottom: 1px solid #919699; border-right: 1px solid #919699; } .whiteout { display: none; } --></style>
</head><body bgcolor="white">
<a name="//apple_ref/doc/man/3/MPI_Allreduce" title="Mac OS X
 Manual Page for MPI_Allreduce(3)"><!-- headerDoc=man; indexgroup=Section 3; uid="//apple_ref/doc/man/3/MPI_Allreduce"; name=MPI_Allreduce(3) --></a>
<!--#include virtual="/includes/framesetheader"-->
<table width=600><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <!-- a href="" target="_top" -->Mac OS X<!-- /a --> <b>&gt;</b> <a href="../index.html#//apple_ref/doc/framework/manpages" target="_top">Mac OS X Man Pages</a></font>
<!-- end breadcrumb insert request -->
<p>&nbsp;</p>
</td></tr></table>
<!-- end of header -->
<table border="0"  cellpadding="2" cellspacing="2" width="630pt"><tr><td valign="top" height="12" colspan="5" scope="row">
<p style='text-align:justify;'>This document is a Mac OS X manual page.  Manual pages are a command-line technology
for providing documentation.  You can view these manual pages locally using the
<a href="../man1/man.1.html#//apple_ref/doc/man/1/man">man(1)</a> command.
These manual pages come from many different sources, and thus, have a variety of writing
styles.</p>
<p style='text-align:justify;'>For more information about the manual page format, see the manual page for 
<a href="../man5/manpages.5.html#//apple_ref/doc/man/5/manpages">manpages(5)</a>.</p>
</td></tr></table>
<hr />
<table border="0"  cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row"><pre class="manpages"><tt>
MPI_Allreduce(3OpenMPI)                                                              MPI_Allreduce(3OpenMPI)



<b>NAME</b>
       <b>MPI_Allreduce</b>  - Combines values from all processes and distributes the result back to all processes.


<b>SYNTAX</b>
<b>C</b> <b>Syntax</b>
       #include &lt;mpi.h&gt;
       int MPI_Allreduce(void <u>*sendbuf</u>, void <u>*recvbuf</u>, int <u>count</u>,
            MPI_Datatype <u>datatype</u>, MPI_Op <u>op</u>, MPI_Comm <u>comm</u>)


<b>Fortran</b> <b>Syntax</b>
       INCLUDE 'mpif.h'
       MPI_ALLREDUCE(<u>SENDBUF</u>, <u>RECVBUF</u>, <u>COUNT</u>, <u>DATATYPE</u>, <u>OP</u>,
                 <u>COMM</u>, <u>IERROR</u>)
            &lt;type&gt;    <u>SENDBUF</u>(*), <u>RECVBUF</u>(*)
            INTEGER   <u>COUNT</u>, <u>DATATYPE</u>, <u>OP</u>, <u>COMM</u>, <u>IERROR</u>


<b>C++</b> <b>Syntax</b>
       #include &lt;mpi.h&gt;
       void MPI::Comm::Allreduce(const void* <u>sendbuf</u>, void* <u>recvbuf</u>,
            int <u>count</u>, const MPI::Datatype&amp; <u>datatype</u>, const
            MPI::Op&amp; <u>op</u>) const=0


<b>INPUT</b> <b>PARAMETERS</b>
       sendbuf   Starting address of send buffer (choice).

       count     Number of elements in send buffer (integer).

       datatype  Datatype of elements of send buffer (handle).

       op        Operation (handle).

       comm      Communicator (handle).


<b>OUTPUT</b> <b>PARAMETERS</b>
       recvbuf   Starting address of receive buffer (choice).

       IERROR    Fortran only: Error status (integer).


<b>DESCRIPTION</b>
       Same as MPI_Reduce except that the result appears in the receive buffer of all the group members.

       <b>Example</b> <b>1:</b> A routine that computes the product of a vector and an array that are distributed across a
       group  of  processes  and  returns  the answer at all nodes (compare with Example 2, with MPI_Reduce,
       below).

       SUBROUTINE PAR_BLAS2(m, n, a, b, c, comm)
       REAL <!-- a -->a(m)<!-- /a -->, b(m,n)    ! local slice of array
       REAL <!-- a -->c(n)<!-- /a -->            ! result
       REAL <!-- a -->sum(n)<!-- /a -->
       INTEGER n, comm, i, j, ierr

       ! local sum
       DO j= 1, n
         <!-- a -->sum(j)<!-- /a --> = 0.0
         DO i = 1, m
           <!-- a -->sum(j)<!-- /a --> = <!-- a -->sum(j)<!-- /a --> + <!-- a -->a(i)<!-- /a -->*b(i,j)
         END DO
       END DO

       ! global sum
       CALL MPI_ALLREDUCE(sum, c, n, MPI_REAL, MPI_SUM, comm, ierr)

       ! return result at all nodes
       RETURN

       <b>Example</b> <b>2:</b> A routine that computes the product of a vector and an array that are distributed across a
       group of processes and returns the answer at node zero.

       SUBROUTINE PAR_BLAS2(m, n, a, b, c, comm)
       REAL <!-- a -->a(m)<!-- /a -->, b(m,n)    ! local slice of array
       REAL <!-- a -->c(n)<!-- /a -->            ! result
       REAL <!-- a -->sum(n)<!-- /a -->
       INTEGER n, comm, i, j, ierr

       ! local sum
       DO j= 1, n
         <!-- a -->sum(j)<!-- /a --> = 0.0
         DO i = 1, m
           <!-- a -->sum(j)<!-- /a --> = <!-- a -->sum(j)<!-- /a --> + <!-- a -->a(i)<!-- /a -->*b(i,j)
         END DO
       END DO

       ! global sum
       CALL MPI_REDUCE(sum, c, n, MPI_REAL, MPI_SUM, 0, comm, ierr)

       ! return result at node zero (and garbage at the other nodes)
       RETURN

<b>USE</b> <b>OF</b> <b>IN-PLACE</b> <b>OPTION</b>
       When  the communicator is an intracommunicator, you can perform an all-reduce operation in-place (the
       output buffer is used as the input buffer).  Use the variable MPI_IN_PLACE as the value of <u>sendbuf</u> at
       all processes.

       Note  that  MPI_IN_PLACE  is  a  special  kind  of  value; it has the same restrictions on its use as
       MPI_BOTTOM.

       Because the in-place option converts the receive buffer into a  send-and-receive  buffer,  a  Fortran
       binding that includes INTENT must mark these as INOUT, not OUT.


<b>WHEN</b> <b>COMMUNICATOR</b> <b>IS</b> <b>AN</b> <b>INTER-COMMUNICATOR</b>
       When  the communicator is an inter-communicator, the reduce operation occurs in two phases.  The data
       is reduced from all the members of the first group and received by all  the  members  of  the  second
       group.   Then  the  data  is reduced from all the members of the second group and received by all the
       members of the first.  The operation exhibits a symmetric, full-duplex behavior.

       The first group defines the root process.  The root process uses MPI_ROOT as the value of <u>root</u>.   All
       other processes in the first group use MPI_PROC_NULL as the value of <u>root</u>.  All processes in the sec-<font color="#ffffff" class="whiteout">ond&nbsp;second</font>
       ond group use the rank of the root process in the first group as the value of <u>root</u>.

       When the communicator is an intra-communicator, these groups are the same, and the  operation  occurs
       in a single phase.

<b>NOTES</b> <b>ON</b> <b>COLLECTIVE</b> <b>OPERATIONS</b>
       The  reduction  functions  (  <u>MPI</u><b>_</b><u>Op</u>  )  do not return an error value.  As a result, if the functions
       detect an error, all they can do is either call <u>MPI</u><b>_</b><u>Abort</u> or silently skip the problem.  Thus, if you
       change  the error handler from <u>MPI</u><b>_</b><u>ERRORS</u><b>_</b><u>ARE</u><b>_</b><u>FATAL</u> to something else, for example, <u>MPI</u><b>_</b><u>ERRORS</u><b>_</b><u>RETURN</u>
       , then no error may be indicated.


<b>ERRORS</b>
       Almost all MPI routines return an error value; C routines as the value of the  function  and  Fortran
       routines  in  the  last argument. C++ functions do not return errors. If the default error handler is
       set to MPI::ERRORS_THROW_EXCEPTIONS, then on error the C++ exception mechanism will be used to  throw
       an MPI:Exception object.

       Before  the  error value is returned, the current MPI error handler is called. By default, this error
       handler aborts the MPI job, except for I/O function errors. The error handler  may  be  changed  with
       MPI_Comm_set_errhandler;  the  predefined  error handler MPI_ERRORS_RETURN may be used to cause error
       values to be returned. Note that MPI does not guarantee that an MPI  program  can  continue  past  an
       error.





Open MPI 1.2                                     March 2007                          MPI_Allreduce(3OpenMPI)
</tt></pre>
</td></tr></table>
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Allreduce.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Allreduce.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/ManPages/man3/MPI_Allreduce.3.html%3Fid%3DTP40000894-7.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</body></html>

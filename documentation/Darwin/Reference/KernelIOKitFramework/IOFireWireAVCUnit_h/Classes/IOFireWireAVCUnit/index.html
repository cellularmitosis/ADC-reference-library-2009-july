<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>IOFireWireAVCUnit</title>
<meta http-equiv="Content-Type" content="text/html; charset=ascii">
<meta name="generator" content="HeaderDoc">
<style><!--
#tocMenu {
		display: block;
		position:fixed;
		top:0px;
		left:0px;
		width:210px;
		height:100%;
		background:transparent;
}
#bodyText {
		margin-left: 210px;
}
--></style>
<meta id="toc-file" name="toc-file" content="toc.html">
<script language="JavaScript" src="../../../../../../Resources/JavaScript/page.js" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="../../../../../../Resources/CSS/frameset_styles.css">
<style type="text/css"><!--.keyword {background:#ffffff; color:#761550;}.template {background:#ffffff; color:#761550;}.number {background: #ffffff; color:#0000ff;}.function {background:#ffffff; color:#000000;}.string {background: #ffffff; color:#891315;}.preprocessor {background:#ffffff; color:#236e25}.comment {background:#ffffff; color:#236e25}.char {background: #ffffff; color:#0000ff;}.var {background:#ffffff; color:#000000;}.type {background:#ffffff; color:#761550;}.param {background:#ffffff; color:#000000;}.graybox {         border-top: 1px solid #919699;         border-left: 1px solid #919699;         margin-bottom: 10px;         }  .graybox th {         padding: 4px 8px 4px 8px;         background: #E2E2E2;         font-size: 12px;         font-weight: bold;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  .graybox td {         padding: 8px;         font-size: 12px;         text-align: left;         vertical-align: top;         border-bottom: 1px solid #919699;         border-right: 1px solid #919699;         }  --></style>
</head>
<body bgcolor="#ffffff" onload="initialize_page();">
<noscript>
<div id="tocMenu">
<iframe id="toc_content" name="toc_content" src="toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
</div>
</noscript>
<div id="bodyText">
<!-- start of header -->

<!-- start of header -->
<!--#include virtual="/includes/framesetheader"-->
<!-- end of header -->

<table width="600"><tr><td scope="row">
<!-- begin breadcrumb insert request --><font face="Geneva,Helvetica,Arial" size="1">
 <a target="_top" href="http://developer.apple.com">ADC Home</a> <b>&gt;</b> <a href="../../../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> <b>&gt;</b> <a href="../../../../../../../reference/index.html#//apple_ref/doc/uid/TP30001281" target="_top">Reference</a> <b>&gt;</b> <a href="../../../../../../../reference/Darwin/index.html#//apple_ref/doc/uid/TP30001281-TP30000422" target="_top">Darwin</a> <b>&gt;</b> <a href="../../../index.html#//apple_ref/doc/framework/kernel_fw_leo" target="_top">Kernel Framework Reference</a></font>
<!-- end breadcrumb insert request -->
<p>&#160;</p>
</td></tr></table>
<!-- end of header --><a name="top"></a>
<a name="//apple_ref/doc/class/IOFireWireAVCUnit" title="IOFireWireAVCUnit"></a>
<hr>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h1><a name="IOFireWireAVCUnit">IOFireWireAVCUnit</a></h1>
</td></tr></table>
<div class="spec_sheet_info_box"><table cellspacing="0" class="specbox">
<tr>
<td scope="row"><b>Inherits from:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text">
<a href="../IOFireWireAVCNub/index.html#//apple_ref/cpp/cl/IOFireWireAVCNub" target="_top">IOFireWireAVCNub</a>
</div></div></td>
</tr>
<tr>
<td scope="row"><b>Declared In:</b></td>
<td><div style="margin-bottom:1px"><div class="content_text"><a href="../../index.html" target="_top">IOFireWireAVCUnit.h</a></div></div></td>
</tr>
</table></div>
<h2>Overview</h2>
<p><!-- begin abstract --></p>
<p>nub for AVC devices
<!-- end abstract --></p>
<hr>
<br><h2>Functions</h2>
<a name="HeaderDoc_functions"></a>
<dl>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFireWireAVCUnit/AVCCommand/IOReturn/(constUInt8*,UInt32,UInt8*,UInt32*)" target="_top">AVCCommand</a></tt></dt>
<dd><p>Sends an AVC command to the device and stores the response.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFireWireAVCUnit/AVCCommandInGeneration/IOReturn/(UInt32,constUInt8*,UInt32,UInt8*,UInt32*)" target="_top">AVCCommandInGeneration</a></tt></dt>
<dd><p>Sends an AVC command to the device and stores the response. The command must complete in the specified
FireWire bus generation otherwise kIOFireWireBusReset is returned.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFireWireAVCUnit/handleClose/void/(IOService*,IOOptionBits)" target="_top">handleClose</a></tt></dt>
<dd><p>Overrideable method to control the open / close behaviour of an IOService.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFireWireAVCUnit/handleOpen/bool/(IOService*,IOOptionBits,void*)" target="_top">handleOpen</a></tt></dt>
<dd><p>Overrideable method to control the open / close behaviour of an IOService.
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFireWireAVCUnit/matchPropertyTable/bool/(OSDictionary*)" target="_top">matchPropertyTable</a></tt></dt>
<dd><p>Matching language support
Match on the following properties of the unit:
Vendor_ID
GUID
Unit_Type
and available sub-units, match if the device has at least the requested number of a sub-unit type:
AVCSubUnit_0 -&gt; AVCSubUnit_1f
</p></dd>
<dt><tt><a href="index.html#//apple_ref/cpp/instm/IOFireWireAVCUnit/updateAVCCommandTimeout/IOReturn/()" target="_top">updateAVCCommandTimeout</a></tt></dt>
<dd><p>By default, AVCCommands timeout 10 seconds after receiving an Interim response.
This function resets the timeout of the current command to 10 seconds from the current time.
Call this repeatedly for AVC commands that take a very long time to execute to prevent premature
timeout.
</p></dd>
</dl>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFireWireAVCUnit/AVCCommand/IOReturn/(constUInt8*,UInt32,UInt8*,UInt32*);  indexgroup=AVC ;   name=IOFireWireAVCUnit::AVCCommand --><a name="//apple_ref/cpp/instm/IOFireWireAVCUnit/AVCCommand/IOReturn/(constUInt8*,UInt32,UInt8*,UInt32*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="AVCCommand">AVCCommand</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sends an AVC command to the device and stores the response.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">AVCCommand</span><!-- /a -->(
    <span class="keyword">const</span> <!-- a --><span class="var">UInt8</span><!-- /a --> <span class="var">*</span> <!-- a --><span class="var">command</span><!-- /a -->,
    <!-- a --><span class="var">UInt32</span><!-- /a --> <!-- a --><span class="var">cmdLen</span><!-- /a -->,
    <!-- a --><span class="var">UInt8</span><!-- /a --> <span class="var">*</span> <!-- a --><span class="var">response</span><!-- /a -->,
    <!-- a --><span class="var">UInt32</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">responseLen</span><!-- /a -->); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>command</code></dt>
<dd><p>Pointer to command to send.</p></dd>
<dt><code>cmdLen</code></dt>
<dd><p>Length of the command.</p></dd>
<dt><code>response</code></dt>
<dd><p>Pointer to place to store the response.</p></dd>
<dt><code>responseLen</code></dt>
<dd><p>Pointer to response length - initialize to the size of the buffer pointed to by response,
updated to the number of bytes returned by the device.</p></dd>
</dl>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFireWireAVCUnit/AVCCommandInGeneration/IOReturn/(UInt32,constUInt8*,UInt32,UInt8*,UInt32*);  indexgroup=AVC ;   name=IOFireWireAVCUnit::AVCCommandInGeneration --><a name="//apple_ref/cpp/instm/IOFireWireAVCUnit/AVCCommandInGeneration/IOReturn/(UInt32,constUInt8*,UInt32,UInt8*,UInt32*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="AVCCommandInGeneration">AVCCommandInGeneration</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Sends an AVC command to the device and stores the response. The command must complete in the specified
FireWire bus generation otherwise kIOFireWireBusReset is returned.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">AVCCommandInGeneration</span><!-- /a -->(
    <!-- a --><span class="type">UInt32</span><!-- /a --> <span class="param">generation</span>, 
    <span class="keyword">const</span> <!-- a --><span class="var">UInt8</span><!-- /a --> <span class="var">*</span> <!-- a --><span class="var">command</span><!-- /a -->,
    <!-- a --><span class="var">UInt32</span><!-- /a --> <!-- a --><span class="var">cmdLen</span><!-- /a -->,
    <!-- a --><span class="var">UInt8</span><!-- /a --> <span class="var">*</span> <!-- a --><span class="var">response</span><!-- /a -->,
    <!-- a --><span class="var">UInt32</span><!-- /a --> <span class="var">*</span><!-- a --><span class="var">responseLen</span><!-- /a -->); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>generation</code></dt>
<dd><p>The bus generation that the command must execute in.</p></dd>
<dt><code>command</code></dt>
<dd><p>Pointer to command to send.</p></dd>
<dt><code>cmdLen</code></dt>
<dd><p>Length of the command.</p></dd>
<dt><code>response</code></dt>
<dd><p>Pointer to place to store the response.</p></dd>
<dt><code>responseLen</code></dt>
<dd><p>Pointer to response length - initialize to the size of the buffer pointed to by response,
updated to the number of bytes returned by the device.</p></dd>
</dl>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFireWireAVCUnit/handleClose/void/(IOService*,IOOptionBits);  indexgroup=AVC ;   name=IOFireWireAVCUnit::handleClose --><a name="//apple_ref/cpp/instm/IOFireWireAVCUnit/handleClose/void/(IOService*,IOOptionBits)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleClose">handleClose</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Overrideable method to control the open / close behaviour of an IOService.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <!-- a --><span class="function">handleClose</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">forClient</span>, 
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>forClient</code></dt>
<dd><p>Designates the client of the provider requesting the close.</p></dd>
<dt><code>options</code></dt>
<dd><p>Options for the close, may be interpreted by the implementor of handleOpen.</p></dd>
</dl>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>See IOService for discussion.
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFireWireAVCUnit/handleOpen/bool/(IOService*,IOOptionBits,void*);  indexgroup=AVC ;   name=IOFireWireAVCUnit::handleOpen --><a name="//apple_ref/cpp/instm/IOFireWireAVCUnit/handleOpen/bool/(IOService*,IOOptionBits,void*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="handleOpen">handleOpen</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Overrideable method to control the open / close behaviour of an IOService.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">handleOpen</span><!-- /a -->(
    <a href="../../../IOService_h/Classes/IOService/index.html#//apple_ref/cpp/cl/IOService" target="_top" class="type"><span class="type">IOService</span></a> <span class="type">*</span><span class="param">forClient</span>, 
    <a href="../../../USB_h/index.html#//apple_ref/c/tag/IOOptionBits" target="_top" class="type"><span class="type">IOOptionBits</span></a> <span class="param">options</span>, 
    <a href="../../../../../../GraphicsImaging/Reference/ImageCaptureDeviceModulesReference/ICADevice/CompositePage.html#//apple_ref/c/tdef/void" target="_top" class="type"><span class="type">void</span></a> <span class="type">*</span><span class="param">arg</span> ); </pre>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Parameters</font></h5>
<dl>
<dt><code>forClient</code></dt>
<dd><p>Designates the client of the provider requesting the open.</p></dd>
<dt><code>options</code></dt>
<dd><p>Options for the open, may be interpreted by the implementor of handleOpen.</p></dd>
</dl>
<h5 class="tight"><font face="Lucida Grande,Helvetica,Arial">Return Value</font></h5>
<p><!-- begin return value -->Return true if the open was successful, false otherwise.

<!-- end return value --></p>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>See IOService for discussion.                
<!-- end discussion -->
</p>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFireWireAVCUnit/matchPropertyTable/bool/(OSDictionary*);  indexgroup=AVC ;   name=IOFireWireAVCUnit::matchPropertyTable --><a name="//apple_ref/cpp/instm/IOFireWireAVCUnit/matchPropertyTable/bool/(OSDictionary*)"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="matchPropertyTable">matchPropertyTable</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>Matching language support
Match on the following properties of the unit:
Vendor_ID
GUID
Unit_Type
and available sub-units, match if the device has at least the requested number of a sub-unit type:
AVCSubUnit_0 -&gt; AVCSubUnit_1f
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="function">matchPropertyTable</span><!-- /a -->(
    <a href="../../../OSDictionary_h/Classes/OSDictionary/index.html#//apple_ref/cpp/cl/OSDictionary" target="_top" class="type"><span class="type">OSDictionary</span></a> <span class="type">*</span><span class="param">table</span>); </pre>
<p></p>
<hr>
<!-- headerDoc=instm;  uid=//apple_ref/cpp/instm/IOFireWireAVCUnit/updateAVCCommandTimeout/IOReturn/();  indexgroup=AVC ;   name=IOFireWireAVCUnit::updateAVCCommandTimeout --><a name="//apple_ref/cpp/instm/IOFireWireAVCUnit/updateAVCCommandTimeout/IOReturn/()"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="updateAVCCommandTimeout">updateAVCCommandTimeout</a></h3>
</td></tr></table>
<hr>
<p><!-- begin abstract --></p>
<p>By default, AVCCommands timeout 10 seconds after receiving an Interim response.
This function resets the timeout of the current command to 10 seconds from the current time.
Call this repeatedly for AVC commands that take a very long time to execute to prevent premature
timeout.
<!-- end abstract --></p>
<p></p>
<pre><tt>public</tt>
<br><span class="keyword">virtual</span> <a href="../../../IOReturn_h/index.html#//apple_ref/c/tdef/IOReturn" target="_top" class="type"><span class="type">IOReturn</span></a> <!-- a --><span class="function">updateAVCCommandTimeout</span><!-- /a -->(); </pre>
<p></p>
<h2>Structs and Unions</h2>
<hr>
<!-- headerDoc=tag;  uid=//apple_ref/cpp/tag/IOFireWireAVCUnit/ExpansionData;  indexgroup=AVC ;   name=IOFireWireAVCUnit::ExpansionData --><a name="//apple_ref/cpp/tag/IOFireWireAVCUnit/ExpansionData"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="ExpansionData">ExpansionData</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><span class="keyword">struct</span> <a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> { 
    <a href="../../../OSArray_h/Classes/OSArray/index.html#//apple_ref/cpp/cl/OSArray" target="_top" class="type"><span class="type">OSArray</span></a> <span class="type">*</span><!-- a --><span class="var">fAVCAsyncCommands</span><!-- /a -->; 
    <a href="../../../IOFireWireController_h/Classes/IOFireWireController/index.html#//apple_ref/cpp/cl/IOFireWireController" target="_top" class="type"><span class="type">IOFireWireController</span></a> <span class="type">*</span><!-- a --><span class="var">fControl</span><!-- /a -->; 
    <!-- a --><span class="type">bool</span><!-- /a --> <!-- a --><span class="var">enableRobustAVCCommandResponseMatching</span><!-- /a -->; 
}; </pre>
<h5 class="tight">
<font face="Lucida Grande,Helvetica,Arial">Discussion</font>
</h5>
<!-- begin discussion --><p>This structure is used to expand the capablilties of the class in a binary compatible way
<!-- end discussion -->
</p>
<p></p>
<h2>Member Data</h2>
<hr>
<!-- headerDoc=data;  uid=//apple_ref/cpp/data/IOFireWireAVCUnit/fIOFireWireAVCUnitExpansion;  indexgroup=AVC ;   name=IOFireWireAVCUnit::fIOFireWireAVCUnitExpansion --><a name="//apple_ref/cpp/data/IOFireWireAVCUnit/fIOFireWireAVCUnitExpansion"></a>
<table border="0" cellpadding="2" cellspacing="2" width="300"><tr><td valign="top" height="12" colspan="5" scope="row">
<h3><a name="fIOFireWireAVCUnitExpansion">fIOFireWireAVCUnitExpansion</a></h3>
</td></tr></table>
<hr>
<p></p>
<pre><tt>protected</tt>
<br><a href="../../../IOFWAddressSpace_h/index.html#//apple_ref/c/tag/ExpansionData" target="_top" class="type"><span class="type">ExpansionData</span></a> <span class="type">*</span><!-- a --><span class="var">fIOFireWireAVCUnitExpansion</span><!-- /a -->; </pre>
<p></p>
<p><!-- start of footer -->

<!-- start of footer --> 
	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOFireWireAVCUnit_h/Classes/IOFireWireAVCUnit/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOFireWireAVCUnit_h/Classes/IOFireWireAVCUnit/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Darwin/Reference/KernelIOKitFramework/IOFireWireAVCUnit_h/Classes/IOFireWireAVCUnit/index.html%3Fid%3DTP30000816-3.4&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

</p>
<p>&#160;</p>
<!--#include virtual="/footer"-->
<!-- end of footer -->


<!-- end of footer -->
Last Updated: 2008-12-19
</div>
<!-- headerDoc=cl; uid=//apple_ref/cpp/cl/IOFireWireAVCUnit; indexgroup=AVC ; name=IOFireWireAVCUnit--><a name="//apple_ref/cpp/cl/IOFireWireAVCUnit"></a>
</body>
</html>

<HTML><HEAD><META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter"><script language="JavaScript" src="frametest.js"></script><TITLE> DoDriverIO Parameter Data Structures</TITLE></HEAD><BODY BGCOLOR="#ffffff"><DIV><a name="top"></a><!-- start of banner --><!--#include virtual="/includes/framesetheader" --><!-- end of banner --><!-- start of path --><font face="Geneva,Helvetica,Arial" size="1"><b><br>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Documentation</a> &gt; <!-- a href="" target="_top" -->Hardware<!-- /a -->  <b>&gt; </b><a href="../../devicemgrs.html" target="_top">Device Managers and Drivers</a> <b>&gt; </b><a href="../pci_srvcs.html" target="_top">PCI Card Services</a> <b>&gt; </b>Designing PCI Cards and Drivers for Power Macintosh Computers</font><br><br><!-- end of path --><A HREF="PCI_BOOK.bd.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.bd.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.bf.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><HR></DIV><H1 CLASS="H3.Heading3"><A NAME="pgfId=3679"> </A>DoDriverIO Parameter Data Structures</H1><P CLASS="T1.Text1"><A NAME="pgfId=3680"> </A>The data types and structures that the <TT CLASS="cv">DoDriverIO</TT> entry point uses have the following declarations:</P><CODE CLASS="Cv.Code"><A NAME="pgfId=16969"> </A>typedef struct OpaqueRef *KernelID;</CODE><br><code>enum{<BR>&nbsp;&nbsp;&nbsp;&nbsp;kInvalidID = 0<BR>&nbsp;&nbsp;&nbsp;&nbsp;};<BR>&nbsp;&nbsp;&nbsp;&nbsp;typedef KernelID IOCommandID;</CODE><P CLASS="T1.Text1"><A NAME="pgfId=3682"> </A>Type <TT CLASS="cv">KernelID</TT> is a 32-bit opaque identifier used to identify various operating system resources. Mac&nbsp;OS I/O services that create or allocate a resource return an ID. The ID is later used to specify the resource to perform operations on it or delete it. With type <TT CLASS="cv">OpaqueRef</TT>, the value of the ID tells you nothing--you can't tell which resource it identifies without calling Mac&nbsp;OS. You also can't tell what ID you'll get back the next time you create a resource, and you can't tell the relationship between any two resources by the relationship between their IDs. When a resource is deleted, its ID becomes invalid for a long time. If you accidentally use an ID for a resource that has been deleted, chances are you'll get an error instead of accessing a different resource.</P><CODE CLASS="Cv.Code"><A NAME="pgfId=16977"> </A>union IOCommandContents { /* contents are command specific*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;ParmBlkPtr &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pb;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverInitInfoPtr &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initialInfo;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverFinalInfoPtr &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;finalInfo;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverReplaceInfoPtr &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replaceInfo;<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverSupersededInfoPtr&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;supersededInfo;<BR>};<BR><BR><A NAME="pgfId=16981"> </A>typedef union IOCommandContents IOCommandContents;<BR><BR><A NAME="pgfId=16985"> </A>typedef UInt32 IOCommandCode;<BR><BR><A NAME="pgfId=16989"> </A>enum{ /*'ndrv' driver services*/<BR>&nbsp;&nbsp;&nbsp;&nbsp;kOpenCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* open command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kCloseCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* close command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kReadCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* read command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kWriteCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* write command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kControlCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* control command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kStatusCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* status command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kKillIOCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* kill I/O command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kInitializeCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* initialize command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kFinalizeCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* finalize command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kReplaceCommand,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* replace driver command */<BR>&nbsp;&nbsp;&nbsp;&nbsp;kSupersededCommand&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* driver superseded command */<BR>};<BR><BR><A NAME="pgfId=16993"> </A>typedef UInt32 IOCommandKind;<BR><BR><A NAME="pgfId=16997"> </A>enum{<BR>&nbsp;&nbsp;&nbsp;&nbsp;kSynchronousIOCommandKind &nbsp;&nbsp;= 1,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kAsynchronousIOCommandKind &nbsp;= 2,<BR>&nbsp;&nbsp;&nbsp;&nbsp;kImmediateIOCommandKind &nbsp;&nbsp;&nbsp;&nbsp;= 4<BR>};<BR><BR><A NAME="pgfId=17001"> </A>struct DriverInitInfo {<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverRefNum&nbsp;&nbsp;&nbsp;&nbsp;refNum;<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegEntryID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deviceEntry;<BR>};<BR><BR><A NAME="pgfId=17007"> </A>struct DriverFinalInfo {<BR>&nbsp;&nbsp;&nbsp;&nbsp;DriverRefNum&nbsp;&nbsp;&nbsp;&nbsp;refNum;<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegEntryID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deviceEntry;<BR>};<BR><BR><A NAME="pgfId=17013"> </A>typedef struct DriverInitInfo DriverInitInfo, *DriverInitInfoPtr;<BR><BR><A NAME="pgfId=17019"> </A>typedef struct DriverInitInfo DriverReplaceInfo,<BR>*DriverReplaceInfoPtr;<BR><BR><A NAME="pgfId=17025"> </A>typedef struct DriverFinalInfo DriverFinalInfo,<BR>*DriverFinalInfoPtr;<BR><BR><A NAME="pgfId=17031"> </A>typedef struct DriverFinalInfo DriverSupersededInfo,<BR>*DriverSupersededInfoPtr;<BR><BR><A NAME="pgfId=17037"> </A>struct InitializationInfo {<BR>&nbsp;&nbsp;&nbsp;&nbsp;refNum&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refNum;<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegEntryID&nbsp;&nbsp;deviceEntry;<BR>};<BR><BR><A NAME="pgfId=17043"> </A>struct FinalizationInfo {<BR>&nbsp;&nbsp;&nbsp;&nbsp;refNum&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refNum;<BR>&nbsp;&nbsp;&nbsp;&nbsp;RegEntryID&nbsp;&nbsp;deviceEntry;<BR>};<BR><BR><A NAME="pgfId=17049"> </A>typedef struct InitializationInfo InitializationInfo;<BR><BR><A NAME="pgfId=17055"> </A>typedef struct InitializationInfo *InitializationInfoPtr;<BR><BR><A NAME="pgfId=17061"> </A>typedef struct FinalizationInfo FinalizationInfo;<BR><BR><A NAME="pgfId=17067"> </A>typedef struct FinalizationInfo *FinalizationInfoPtr;</CODE><HR>&#169 1999 Apple Computer, Inc. &#150 (Last Updated 26 March 99)<P><A HREF="PCI_BOOK.bd.html"><img src="images/up.gif" border="0" width="36" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.bd.html"><img src="images/previous.gif" border="0" width="66" height="16"></A><nobr>&nbsp;</nobr><A HREF="PCI_BOOK.bf.html"><img src="images/next.gif" border="0" width="49" height="16"></A><!-- insert Show/Hide frames --><a href="javascript:testFrame()"><script><!--document.write(frameLink);//--></script><!-- end Show/Hide frames --></A><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></HTML>
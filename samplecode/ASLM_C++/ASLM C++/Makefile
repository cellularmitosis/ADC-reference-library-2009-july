# Makefile for the TProcess SLM Library function# Kent Sandvik, Apple DTS Monday, August 10, 1992 1:19:37# Copyright Apple Computer, Inc 1992. All rights reserved.# We will have three folders, Sources, Objects and Built. If# these folder are missing, please create them:#	newfolder Objects; newfolder Sources; newfolder Built;# DEFAULT TOOL DEFINITIONS ----------------------------------------------## List all the flags and file/folder path definitions here:CPlus        = CPlusStdAIncludes = -i "{AIncludes}" -i "{CIncludes}:"StdCIncludes = -i "{CIncludes}" -i "{CIncludes}:"StdPIncludes = StdCPIncludes = -i "{CIncludes}" -i "{CIncludes}:"StdADump     = StdCDump     = StdPDump     = StdCPDump    =  LIB          = Lib {SymbolOption}LINK         = Link {SymbolOption} -model farCOUNT        = CountCOUNTOPTS    = CTAGS        = CtagsCTAGSOPTS    = -p -local -updateDELETE       = DeleteDELETEOPTS   = -iFILES        = FilesFILESOPTS    = -lLIBOPTS      = LINKOPTS     = MAKEFILE     = MakefilePRINT        = PrintPRINTOPTS    = REZ          = RezSETFILE      = SetFileSETFILEOPTS  = -t 'MPST' -c 'MPS '# COMPILER OPTIONS -- for SLM/DLL use -----------------------------------## List all the additional flags for compilers for SLM use here:AOptions = {SymbolOption} {ModelOption} {MyPreAOptions} -model far -case on {MyAOptions}COptions = {SymbolOption} {ModelOption} {MyPreCOptions} -model far -mf -b2 -w2 -opt full {MyCOptions}ROptions = {SymbolOption} {ModelOption} {MyPreROptions}  {MyROptions}CPOptions = {SymbolOption} {ModelOption} {MyPreCPlusOptions} -model far -mf -b2 -opt full -w1 -z15 -z17 {MyCPlusOptions}# PATH DEFINITIONS ------------------------------------------------------## List all the path definitions four our source, library and object files:SOURCES			= :Sources:OBJECTS			= :Objects:BUILT			= :Built:SLMLIBRARIES	= {Libraries}# DEFAULT C++ BUILD RULE ------------------------------------------------## Define here the default rule for building C++ source files:.cp.o	Ä	.cp	IF {Progress}; Echo "¶t¶tCompiling {Default}.cp"; END		CPlus {DepDir}{Default}.cp -o {Targ} {StdCPDump} {CPOptions} {StdCPIncludes}# TARGETS -- the files we need for building the shared library ----------## Define here all the files that are dependent on the final shared library:TARGETS =		"{OBJECTS}ProcessNV.RSRC" ¶				"{OBJECTS}Process.RSRC" ¶				"{BUILT}ProcessLibrary" ¶				"{OBJECTS}TestTool.RSRC" ¶				"{BUILT}TestTool"			# DEPENDENCY LISTS -- various SLM sub-parts -----------------------------## Define here various parts of the SLM, the dependencies they have:# Library.RSRC dependenciesLIBRARY_RSRC = 	"{OBJECTS}ProcessNV.cp.o" ¶				"{OBJECTS}Process.cp.o"				# TestTool.RSRC dependenciesTESTTOOL_RSRC = "{OBJECTS}TestTool.cp.o"# Library general object files needed for the final linkLIBRARY_OBJS =	"{SLMLIBRARIES}LibraryManager.o" "{Libraries}Runtime.o" ¶				"{Libraries}Interface.o" "{CLibraries}StdCLib.o" ¶				"{CLibraries}CPlusLib.o"# Tool general object files needed for the finla linkTOOL_OBJS = 	"{OBJECTS}ProcessNV.cl.o" "{CLibraries}CPlusLib.o" ¶				"{Libraries}ToolLibs.o" "{SLMLIBRARIES}LibraryManager.o" ¶				"{Libraries}Runtime.o" "{Libraries}Interface.o" ¶				"{CLibraries}StdCLib.o"				# Res files (.r) needed for building LibraryLIBRARY_R =		"{SOURCES}Process.r"# Res files (.r) needed for building test toolTOOL_R =		"{SOURCES}TestTool.r"# NV .cp file dependency for .RSRC filesLIB_NVSRC	=	"{SOURCES}ProcessNV.cp"# DEFAULT BUILD RULE ----------------------------------------------------## Define here the default build rule for objects and all files:"{Objects}"	Ä "{Sources}"all			Ä 	{TARGETS}# FILE DEPENDENCIES -----------------------------------------------------## Define here all the known file dependencies with all SLM build files:# LibraryNV.RSRC file"{OBJECTS}ProcessNV.RSRC"	Ä	{LIB_NVSRC}# Library.RSRC file"{OBJECTS}Process.RSRC"		ÄÄ	{LIBRARY_RSRC} {LIBRARY_OBJS}	IF {Progress}; Echo "¶t¶tLinking {Targ}"; END	{LINK} -w -d -t exmp -c RSED 		-sg "ProcessLibrary"="Main","STDCLIB","SANELIB"¶	,"INTENV","SADEV","STDIO" -sg %A5Init=A5Init -m "DynamicCodeEntry" -o {Targ} ¶		{LIBRARY_RSRC} {LIBRARY_OBJS}# The Shared Library itself"{BUILT}ProcessLibrary"	ÄÄ {LIBRARY_R} ¶		"{RIncludes}SLMVersionResource.r" ¶		"{RIncludes}SysTypes.r" "{OBJECTS}ProcessNV.RSRC" ¶		"{OBJECTS}Process.RSRC"	If {Progress}; Echo "¶t¶tRezzing {Targ}"; End	{REZ} -t libr -c OMGR -s "{OBJECTS}" ¶		-i "{RIncludes}:" -i "{RIncludes}" ¶		-i "{OBJECTS}" -o {Targ} {LIBRARY_R}"{Built}ProcessLibrary"	ÄÄ {LIBRARY_R} ¶		"{RIncludes}SLMVersionResource.r" ¶		"{RIncludes}SysTypes.r" "{OBJECTS}ProcessNV.RSRC" ¶		"{OBJECTS}Process.RSRC"	{SETFILE} -a ib {Targ}# TestTool"{OBJECTS}TestTool.RSRC"	ÄÄ {TESTTOOL_RSRC} {TOOL_OBJS}	If {Progress}; Echo "¶t¶tLinking {Targ}"; End	{LINK} -w -d -t exmp -c RSED -sn STDIO=Main -sn INTENV=Main -sn %A5Init=Main -o {Targ} ¶		{TESTTOOL_RSRC} {TOOL_OBJS}"{BUILT}TestTool"	ÄÄ {TOOL_R} ¶		"{RIncludes}SLMVersionResource.r" ¶		"{RIncludes}SysTypes.r" "{OBJECTS}TestTool.RSRC"	If {Progress}; Echo "¶t¶tRezzing {Targ}"; End	{REZ} -t MPST -c "MPS " -s "{OBJECTS}" ¶		-i "{RIncludes}:" -i "{RIncludes}" ¶		-i "{OBJECTS}" -o {Targ} {TOOL_R}		# SPECIAL COMPILE STATEMENTS -------------------------------------------## Define here any special compile statements needed to build various# shared library parts (like the special CPlusPC tool):# LibraryNV.cp.o file"{OBJECTS}ProcessNV.cp.o" Ä  "{SOURCES}ProcessNV.cp" ¶		"{Sources}Process.h" ¶		"{CIncludes}LibraryManagerClasses.h" ¶		"{CIncludes}LibraryManager.h" ¶		"{CIncludes}LibraryManagerUtilities.h"	If {Progress}; Echo "¶t¶tCompiling ProcessNV.cp"; End		CPlusPC -resfile "{OBJECTS}ProcessNV.RSRC" -resid 0 -client "{OBJECTS}ProcessNV.cl.o" ¶		-libname slm:dtsl -restype code {CPOptions} "{SOURCES}ProcessNV.cp"  ¶			{StdCPDump} {StdCPIncludes} -o {Targ}# LibraryNV.cl.o file"{Objects}ProcessNV.cl.o"	Ä	"{OBJECTS}ProcessNV.cp.o"		SetFile -m . "{OBJECTS}ProcessNV.cl.o"# THE END -------------------------------------------------------------#
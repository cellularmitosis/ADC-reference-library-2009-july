<HTML>		<HEAD>        <title>Addingthe MovieDetails Page</title>		</HEAD>	<BODY bgcolor="#ffffff">		<!-- start of header -->		<!--#include virtual="/includes/framesetheader" -->		<!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="Refining_Main.wo.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Refining_Your_Model.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "TPXREF129"></a><h2><font face="Helvetica,Arial,Lucida Grande">Addingthe MovieDetails Page</font></h2><!-- apple_doc: pageHeadingEnd --><p><font face="Times">The MovieDetails page shows you the detailed information abouta movie you select in the Main page. For this to work, the Mainpage has to tell the MovieDetails page which movie the user selected.The MovieDetails page keeps track of the selected movie in its own instancevariable. In this section, you'll</font></p><ul><p><li>Create anew component whose interface you'll create yourself.</li></p><p><li>Assign Main's selected movie to a variable in the MovieDetailspage.</li></p><p><li>Create a way to navigate from Main to MovieDetails and back.</li></p></ul><p><font face="Times">In the sections following this one, you'll extend the MovieDetailspage to display movie roles and the starring actors.</font></p><a name = "TPXREF130"></a><h3><font face="Helvetica,Arial,Lucida Grande">Creatingthe MovieDetails Component</font></h3><ol><p><li>In ProjectBuilder, choose File &gt; New in Project.</li></p><p><li>In the New File panel, click the Web Components suitcase.</li></p><p><li>Type MovieDetails in the Name field.</li></p><p><li>Click OK.</li></p><p><li>In the wizard panel, choose None for available assistance.</li></p><p><li>Click Finish.</li></p><p><li>Open the new component, <code>MovieDetails.wo</code>,in WebObjects Builder.</li></p></ol><a name = "TPXREF131"></a><h3><font face="Helvetica,Arial,Lucida Grande">Storingthe Selected Movie</font></h3><p><font face="Times">Now, in the MovieDetails component, create a variable thatholds the application's selected movie. Later on, you'll addcode to the <code>Main.java</code> classthat assigns Main's selected movie to this variable.</font></p><ol><p><li>Choose AddKey from the pull-down list.<P><img src = "../Art/addvar.gif" alt = "[image: ../Art/addvar.gif]"></li></p><p><li>Name the variable selectedMovie.</li></p><p><li>Set the variable's type to Movie.<p>Movie isn't actuallya class; it's an entity. It's listed in the combo box as a typealong with entries for all the entities in your model. When youchoose an entity as the type for your variable, WebObjects Builderrecognizes that the variable is an enterprise object. Using informationin the model, WebObjects Builder can determine the entity's correspondingenterprise object class and the properties of that class.</p></li></p><p><li>Check the "An instance variable" box.</li></p><p><li>Check the "A method returning the value" box.</li></p><p><li>Check the "A method setting the value" box.</li></p><p><li>Click Add.</li></p></ol><a name = "TPXREF132"></a><h3><font face="Helvetica,Arial,Lucida Grande">Navigatingfrom Main to MovieDetails</font></h3><p><font face="Times">To get to the MovieDetails page from the Main page, usersuse a hyperlink. Clicking the hyperlink should set MovieDetail's <code>selectedMovie</code> variableand then open the MovieDetails page.</font></p><ol><p><li>Add a hyperlinkat the bottom of the Main component.</li></p><p><li>Replace the text "Hyperlink" with "Movie Details".<P><img src = "../Art/mnhylink.gif" alt = "[image: ../Art/mnhylink.gif]"></li></p><p><li>Choose Add Action from the pull-down list.</li></p><p><li>In the Add Action panel, type showDetails in the Name field.</li></p><p><li>Select MovieDetails from the "Page returned" combo box.</li></p><p><li>Click Add.</li></p><p><li>Bind the <code>showDetails</code> actionto the hyperlink's <code>action</code> attribute.</li></p><p><li>In Project Builder, modify the <code>showDetails</code> actionin <code>Main.java</code> to looklike the following:<pre>    public MovieDetails showDetails() {        MovieDetails nextPage =    (MovieDetails)pageWithName("MovieDetails");        // Initialize your component here        EOEnterpriseObject selection =            (EOEnterpriseObject)movieDisplayGroup.selectedObject();        nextPage.setSelectedMovie(selection);        return nextPage;    }</pre><p>Thismethod creates the MovieDetails page and then invokes its <code>setSelectedMovie</code> methodwith the movie that's selected in the Main page. The display groupmethod <code>selectedObject</code> returnsits selected object, which, in the Main component, is set when a userclicks a movie title hyperlink.</p></li></p></ol><a name = "TPXREF133"></a><h3><font face="Helvetica,Arial,Lucida Grande">DesigningMovieDetails' User Interface</font></h3><p><font face="Times">Now lay out the user interface for MovieDetails. When you'redone, your component should look like the following:</font></p><P><img src = "../Art/movdetui.gif" alt = "[image: ../Art/movdetui.gif]"><ol><p><li>Create atop-level heading with the text Movie Details.<p>Recall thatto create a top-level heading, you type the text of the heading,select the text, click the <img src = "../Art/heading.gif" alt = "[image: ../Art/heading.gif]"> buttonto add a heading element around the text, and then use the Inspectorto set the heading's level, as you did in  <a sector="mod" href="../GuestBook/iCreating_th_e_s_Content.html" target="_top">"Using the Inspector"</a>.</p></li></p><p><li>Below the heading, add a string element.</li></p><p><li>With the string element selected, add a heading.<p>Thisadds a new level-1 heading element around the string. The MovieDetailspage will show the title of the selected movie in this heading.</p></li></p><p><li>Click &lt;H1&gt; in the path view. The Inspector now displaysthe Heading Level.</li></p><p><li>Click 3 in the Heading Inspector.</li></p><p><li>Add labels and string elements to display the selected movie'scategory, date released, and revenue.</li></p><p><li>Bold the labels.</li></p><p><li>Bind <code>selectedMovie</code>.<code>title</code> tothe <code>value</code> attribute ofthe first string element (the one in the heading).</li></p><p><li>Similarly, create bindings for the Category, Date Released,and Revenue strings.</li></p><p><li>At the bottom of the page, add a horizontal rule.</li></p></ol><a name = "TPXREF134"></a><h3><font face="Helvetica,Arial,Lucida Grande">AddingDate and Number Formats</font></h3><p><font face="Times">String elements have <code>dateformat</code> and <code>numberformat</code> attributesjust like text field elements. Create bindings for the Date Releasedand Revenue strings so that <code>dateReleased</code> and <code>revenue</code> valuesare displayed the way they are in the Main page.</font></p><ol><p><li>Add the dateformat "%d %B %Y" to the Date Released string. You canselect the format from the combo box in the Inspector's bindingcolumn.</li></p><p><li>Add the number format "$###,##0" to the Revenuestring. You can select the format from the combo box in the Inspector'sbinding column.</li></p></ol><a name = "TPXREF135"></a><h3><font face="Helvetica,Arial,Lucida Grande">Navigatingfrom MovieDetails to Main</font></h3><p><font face="Times">Now add a hyperlink to the MovieDetails page so users cannavigate back to the Main page from MovieDetails.</font></p><ol><p><li>Add a hyperlinkto the bottom of the page.</li></p><p><li>Label it Movie Search.<P><img src = "../Art/dehylink.gif" alt = "[image: ../Art/dehylink.gif]"></li></p><p><li>Bind the hyperlink's <code>pageName</code> attributeto the text (including the quotes) "Main". You can select"Main" from the combo box in the inspector's binding column.<p>Recallthat the <code>pageName</code> attributeis a mechanism for navigating to another page without writing code.By setting the attribute to "Main", you're telling the application toopen the MovieSearch page when the hyperlink is clicked.</p></li></p></ol><a name = "TPXREF136"></a><h3><font face="Helvetica,Arial,Lucida Grande">RunningMovies</font></h3><p><font face="Times">Be sure that all your project's files are saved (includingthe components in WebObjects Builder), and build and run your application.In the Main page, select a movie and click the Movie Details link.The MovieDetails page should display all the movie's information.</font></p>    <br><a href="Refining_Main.wo.html" target="_right"><img src="../Images/previous.gif" border="0" alt="Previous"></a><a href="Refining_Your_Model.html" target="_right"><img src="../Images/next.gif" border="0" alt="Next"></a>&nbsp;<p><font face="Geneva,Helvetica,Arial" size="1">&#169; 2001 Apple Computer, Inc.</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
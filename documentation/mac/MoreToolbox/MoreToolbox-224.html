<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The List Record (IM: MTb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING224></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="MoreToolbox-223.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-225.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="MoreToolbox-2.html"><B>More Macintosh Toolbox</B></A> / <BR><DD><A HREF="MoreToolbox-202.html"><B>Chapter 4 - List Manager</B></A> / <A HREF="MoreToolbox-220.html"><B>List Manager Reference</B></A><BR><DL><DD><A HREF="MoreToolbox-221.html"><B>Data Structures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING224-0></A>
<H3>The List Record<A NAME=MARKER-2-267></A></H3>
 The List Manager uses a list record to store many types of information about a list. Usually you access a list record through a handle to the list record defined by the data type <CODE>ListHandle</CODE>. The <CODE>ListRec</CODE> data type defines a list record. <P>
<PRE>
TYPE ListRec   =
RECORD
   rView:      Rect;             {list's display rectangle}
   port:       GrafPtr;          {list's graphics port}
   indent:     Point;            {indent distance for drawing}
   cellSize:   Point;            {size in pixels of a cell}
   visible:    Rect;             {boundary of visible cells}
   vScroll:    ControlHandle;    {vertical scroll bar}
   hScroll:    ControlHandle;    {horizontal scroll bar}
   selFlags:   SignedByte;       {selection flags}
   lActive:    Boolean;          {TRUE if list is active}
   lReserved:  SignedByte;       {reserved}
   listFlags:  SignedByte;       {automatic scrolling flags}
   clikTime:   LongInt;          {TickCount at time of last click}
   clikLoc:    Point;            {position of last click}
   mouseLoc:   Point;            {current mouse location}
   lClikLoop:  Ptr;              {routine called by LClick}
   lastClick:  Cell;             {last cell clicked}
   refCon:     LongInt;          {for application use}
   listDefProc:                  {list definition procedure}
               Handle;  
   userHandle: Handle;           {for application use}
   dataBounds: Rect;             {boundary of cells allocated}
   cells:      DataHandle;       {cell data}
   maxIndex:   Integer;          {used internally}
   cellArray:                    {offsets to data}
               ARRAY[1..1] OF Integer;
END;
   ListPtr     = ^ListRec;       {pointer to a list record}
   ListHandle  = ^ListPtr;       {handle to a list record}
</PRE>
<DL>
<H5>Field Description</H5>
<DT><CODE>rView</CODE>
<DD> Specifies the rectangle in which the list's visible rectangle is located, in local coordinates of the graphics port specified by the <CODE>port</CODE> field. Note that the list's visible rectangle does not include the area needed for the list's scroll bars. The width of a vertical scroll bar (which equals the height of a horizontal scroll bar) is 15 pixels.
<DT><CODE>port</CODE>
<DD> Specifies the graphics port of the window containing the list.
<DT><CODE>indent</CODE>
<DD> Defines the location, relative to the upper-left corner of a cell, at which drawing should begin. List definition procedures should set this field to a value appropriate to the type of data that a cell in a list is to contain.
<DT><CODE>cellSize</CODE>
<DD> Contains the size in pixels of each cell in the list. When your application creates a list, it can either specify the cell size or let the List Manager calculate the cell size. You should not change the <CODE>cellSize</CODE> field directly; if you need to change the cell size after creating a list, use the <CODE>LCellSize</CODE> procedure.
<DT><CODE>visible</CODE>
<DD> Specifies the cells in a list that are visible within the area specified by the <CODE>rView</CODE> field. The List Manager sets the <CODE>left</CODE> and <CODE>top</CODE> fields of <CODE>visible</CODE> to the coordinates of the first visible cell; however, the List Manager sets the <CODE>right</CODE> and <CODE>bottom</CODE> fields so that each is 1 greater than the horizontal and vertical coordinates of the last visible cell. For example, if a list contains 4 columns and 10 rows but only the first 2 columns and the first 5 rows are visible (that is, the last visible cell has coordinates (1,4)), the List Manager sets the <CODE>visible</CODE> field to (0,0,2,5).
<DT><CODE>vScroll</CODE>
<DD> Contains a control handle for a list's vertical scroll bar, or <CODE>NIL</CODE> if a list does not have a vertical scroll bar.
<DT><CODE>hScroll</CODE>
<DD> Contains a control handle for a list's horizontal scroll bar, or <CODE>NIL</CODE> if a list does not have a vertical scroll bar.
<DT><CODE>selFlags</CODE>
<DD> Indicates the selection flags for a list. When your application creates a list, the List Manager clears the <CODE>selFlags</CODE> field to 0. This defines the List Manager's default selection algorithm. To change the default behavior for a particular list, set the desired bits in the list's <CODE>selFlags</CODE> field.
<DT>
<DD> You can use these constants to refer to bits in this field:
</DL>
<PRE>
               CONST 
                  {allow only one item to be selected at once}
                  lOnlyOne       = -128;
                  {enable multiple item selection without Shift}
                  lExtendDrag    = 64;
                  {prevent discontiguous selections}
                  lNoDisjoint    = 32;
                  {reset list before responding to Shift-click}
                  lNoExtend      = 16;
                  {Shift-drag selects items passed by cursor}
                  lNoRect        = 8;
                  {allow use of Shift key to deselect items}
                  lUseSense      = 4;
                  {disable highlighting of empty cells}
                  lNoNilNilite   = 2;
</PRE>
<DL>
<DT><CODE>lActive</CODE>
<DD> Indicates whether the list is active (<CODE>TRUE</CODE> if active, <CODE>FALSE</CODE> if inactive).
<DT><CODE>lReserved</CODE>
<DD> Reserved.
<DT><CODE>listFlags</CODE>
<DD> Indicates whether the List Manager should automatically scroll the list if the user clicks the list and then drags the cursor outside <BR>the list display rectangle. 
<DT>
<DD> The following constants define bits in this field that determine whether horizontal autoscrolling and vertical autoscrolling are enabled:
</DL>
<PRE>
               CONST
                  {allow automatic vertical scrolling}
                  lDoVAutoscroll    = 2;
                  {allow automatic horizontal scrolling}
                  lDoHAutoscroll    = 1;
</PRE>
<DL>
<DT>
<DD> By default, the List Manager enables horizontal autoscrolling for a list if the list includes a horizontal scroll bar, and enables vertical autoscrolling for a list if the list includes a vertical scroll bar.
<DT><CODE>clikTime</CODE>
<DD> Specifies the time in ticks of the last click in the list. If your application depends on the value contained in this field, then<BR>your application should update the field should the application select a list item in response to keyboard input.
<DT><CODE>clikLoc</CODE>
<DD> Specifies the location in local coordinates of the last click in the list.
<DT><CODE>mouseLoc</CODE>
<DD> Indicates the current location of the cursor in local coordinates. This value is continuously updated by the <CODE>LClick</CODE> function after the user clicks a list.
<DT><CODE>lClikLoop</CODE>
<DD> Contains a pointer to a click-loop procedure repeatedly called by the <CODE>LClick</CODE> function, or <CODE>NIL</CODE> if the default click-loop procedure is to be used. For information on click-loop procedures, see <A HREF=MoreToolbox-266.html#MARKER-9-412>"Click-Loop Procedures" beginning on page 4-90</A>.
<DT><CODE>lastClick</CODE>
<DD> Specifies the coordinates of the last cell in the list that was clicked. This may not be the same as the last cell selected if the user selects a range of cells by Shift-dragging or Command-dragging. If your application depends on the value contained in this field, then <BR>your application should update the field whenever your application selects a list item in response to keyboard input.
<DT><CODE>refCon</CODE>
<DD> Contains 4 bytes for use by your application.
<DT><CODE>listDefProc</CODE>
<DD> Contains a handle to the code for the list definition procedure that defines how the list is drawn.
<DT><CODE>userHandle</CODE>
<DD> Contains 4 bytes that your application can use as needed. For example, your application might use this field to store a handle to additional storage associated with the list. However, the <CODE>LDispose</CODE> procedure does not automatically release this storage when disposing of the list.
<DT><CODE>dataBounds</CODE>
<DD> Specifies the range of cells in a list. When your application creates a list, it specifies the initial bounds of the list. As your application adds rows and columns, the List Manager updates this field. The List Manager sets the <CODE>left</CODE> and <CODE>top</CODE> fields of <CODE>dataBounds</CODE> to the coordinates of the first cell in the list; the List Manager sets the <CODE>right</CODE> and <CODE>bottom</CODE> fields so that each is 1 greater than the horizontal and vertical coordinates of the last cell. For example, if a list contains 4 columns and 10 rows (that is, the last cell in the list has coordinates (3,9)), the List Manager sets the <CODE>dataBounds</CODE> field to (0,0,4,10).
<DT><CODE>cells</CODE>
<DD> Contains a handle to a relocatable block used to store cell data. Your application should not change the contents of this relocatable block directly.
<DT><CODE>maxIndex</CODE>
<DD> Used internally.
<DT><CODE>cellArray</CODE>
<DD> Contains offsets to data that indicate the location of different cells' data within the data handle specified by the <CODE>cells</CODE> parameter. Your application should not access this field directly.<A NAME=MARKER-2-263></A><A NAME=MARKER-2-315></A><A NAME=MARKER-2-316></A>
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="MoreToolbox-223.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="MoreToolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="MoreToolbox-513.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="MoreToolbox-225.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="MoreToolbox-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>   

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Managing Fonts: QuickDraw (Not Recommended): Managing Fonts: QuickDraw Concepts</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Managing Fonts: QuickDraw Concepts"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	<meta name="ROBOTS" content="NOINDEX"/>
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP30000221" title="Managing Fonts: QuickDraw Concepts"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000420" target="_top">Carbon</a> &gt; <a href="../../../TextFonts-date.html#//apple_ref/doc/uid/TP30000440-TP30000420-TP30000461" target="_top">Text &amp; Fonts</a> &gt; <a href="../fm_intro/fmintro.html#//apple_ref/doc/uid/TP30000219-DontLinkElementID_83">Managing Fonts: QuickDraw (Not Recommended)</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../fm_intro/fmintro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../fm_tasks/fmtasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        <script type="text/javascript" language="JavaScript">placeWatermark()</script>
<div id="legacyOuterWrapper"><div align="center" id="watermark">
<div class="legacybox">
<h1>Legacy Document<span class="closebutton"><a href="javascript:closeWatermark()"><img src="../../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
QuickDraw is deprecated in Mac OS X version 10.5 and later. Use Core Text instead for Mac OS X v10.5 and later, as described in <em><a href="../../CoreText_Programming/index.html#//apple_ref/doc/uid/TP40005533" target="_top">Core Text Programming Guide</a></em>. For applications that must run on Mac OS X v10.4 and earlier, use Apple Type Services (ATS), as described in <em><a href="../../ATS_Concepts/index.html#//apple_ref/doc/uid/TP30000981" target="_top">Apple Type Services for Fonts Programming Guide</a></em>.</p></div></div></div>
        <a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_1" title="Managing Fonts: QuickDraw Concepts"></a><h1><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF101" title="Managing Fonts: QuickDraw Concepts"></a>Managing Fonts: QuickDraw Concepts</h1><p>This chapter provides an overview of font management on the Macintosh and includes recent changes in how fonts are managed under Carbon. The information in this chapter will help you if you are designing a font or if your application uses different font families or allows the user to choose from a variety of fonts. </p><p>If you are new to font management on the Macintosh, you should read the entire chapter. If you are also new to handling text in Mac OS, you should first read “Introduction to Text on the Macintosh.” See </p><p><span class="content_text"><a href="http://developer.apple.com/documentation/mac/Text/Text-13.html" target="_top">http://developer.apple.com/documentation/mac/Text/Text-13.html</a></span></p><p>General font-related information and programming suggestions are found in the discussion of font handling in that chapter. You should also be familiar with QuickDraw. See</p><p><span class="content_text"><a href="http://developer.apple.com/documentation/mac/Text/Text-126.html" target="_top">http://developer.apple.com/documentation/mac/Text/Text-126.html</a></span></p><p>If you have already worked with the Font Manager and are familiar with fonts, you should read <span class="content_text"><a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJEFHED">“Font Support in the Mac OS”</a></span> and <span class="content_text"><a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJCJGFA">“How the Font Manager Tracks Changes to the Font Database.”</a></span> </p><p>If you are writing a font editor, you also need to read the <em>TrueType Font Format Specification</em>, and the <em>OpenType Font Format Specification</em>. You can find links to these specifications, as well as additional information on TrueType Fonts, on the Apple typography website:</p><p><span class="content_text"><a href="http://developer.apple.com/fonts/" target="_top">http://developer.apple.com/fonts/</a></span></p><p>This chapter begins with an overview of the terminology used to describe fonts and basic Font Manager concepts, including</p><ul class="ul"><li class="li"><p>characters, character codes, and glyphs</p></li><li class="li"><p>bitmapped and outline fonts</p></li><li class="li"><p>font families, font names, and font IDs</p></li><li class="li"><p>system and application font usage</p></li><li class="li"><p>font measurements such as left-side bearing, advance width, base line, leading, and kerning</p></li></ul><p>This chapter then describes</p><ul class="ul"><li class="li"><p>how font resources are used to store fonts, including information on data–fork and resource–fork fonts</p></li><li class="li"><p>font and font family references that replace the font ID </p></li><li class="li"><p>how the Font Manager finds the information your application or QuickDraw requests</p></li><li class="li"><p>how the Font Manger and QuickDraw work together to create or alter glyph bitmaps for displaying and printing</p></li><li class="li"><p>how the Font Manager keeps track of changes to the font database</p></li></ul>
<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF102">Fonts</a>
				
			<br/>
			
        
			
			
				<a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJEFHED">Font Support in the Mac OS</a>
				
			<br/>
			
        
			
			
				<a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF111">How the Font Manager Works</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF102" title="Fonts"></a><h2>Fonts</h2><p>This section describes the terminology used throughout the Font Manager documentation to refer to the individual elements of a font, different types of fonts, and the different functions a font can have. If you are already familiar with font terminology on the Macintosh, you can skip this section.</p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF103" title="Characters, Character Codes, and Glyphs"></a><h3>Characters, Character Codes, and Glyphs</h3><p>The smallest element in any character set is a <strong>character</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_97"></a>, which is a symbol that represents the concept of, for example, a lowercase “b”, the number “2”, or the arithmetic operation “+”. You do not ever see a character on a display device. What you actually see on a display device is a <strong>glyph</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_98"></a>, the visual representation of the character. One glyph can represent one character, such as a lowercase ”b”; more than one character, such as the “fi” ligature, which is a single glyph that could represent two characters; or a nonprinting character, such as the space character.</p><p>The Font Manager identifies an individual character by a <strong>character code</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_99"></a> and provides the glyph for that character to QuickDraw. Character codes for most character sets are single byte values between $00 and $FF; however, the character codes for some large character sets, such as the Japanese character set, are two bytes long. A font designer must supply a <strong>missing-character glyph</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_100"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_101"></a> for characters that are not included in the font. QuickDraw displays this glyph whenever the user presses a key for a character that is not in the font.</p><p>Although most fonts assign the same glyphs to character code values $00 to $7F, there are differences in which glyphs are assigned to the remaining character codes. For example, the glyph assigned to byte value $F0 () in the Apple Standard Roman character set is not typically included in a font defined for a computer that does not use the Mac OS. Different regions of the world require different glyphs for their typography, which make it impossible for any one standard to be complete.</p><p><strong>Character-encoding</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_102"></a> schemes were developed to manage the assignment of different glyphs to character codes in different fonts. An encoding scheme names each character and then maps that name into a character code in each font. PostScript fonts that use an encoding scheme that differs from the standard Apple encoding scheme can specify their glyph assignments in the encoding table of the font family resource described in the style mapping table. See <em>Inside Macintosh: Text</em> located on the Apple developer website:</p><p><span class="content_text"><a href="http://developer.apple.com/documentation/mac/Text/Text-2.html" target="_top">http://developer.apple.com/documentation/mac/Text/Text-2.html</a></span></p><p>The Font Manager handles two types of glyphs: bitmapped glyphs<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_103"></a> and glyphs from outline fonts<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_104"></a>. A <strong>bitmapped glyph</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_105"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_106"></a> is a bitmap (a collection of bits arranged in rows and columns) designed at a fixed point size<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_107"></a> for a particular display device, such as a monitor or a printer. For example, after deciding that a glyph for a screen font should be so many pixels tall and so many pixels wide, a font designer carefully chooses the individual pixels that constitute the bitmapped glyph. A pixel is the smallest dot the screen can display. The font stores the bitmapped glyph as a picture for the display device.</p><p>A glyph<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_108"></a> from an <strong>outline font</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_109"></a> is a model of how a glyph should look. A font designer uses lines and curves rather than pixels to draw the glyph. The outline, a mathematical description of a glyph from an outline font, has no designated point size or display device characteristic (such as the size of a pixel) attached to it. The Font Manager uses the outline as a pattern to create bitmaps at any size for any display device.</p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF104" title="Kinds of Fonts"></a><h3>Kinds of Fonts</h3><p>Each glyph has some characteristics that distinguish it from other glyphs that represent the same character: for example, the shape of the oval, the design of the stem, or whether or not the glyph has a serif. If all the glyphs for a particular character set share certain characteristics, they form a type face<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_110"></a>, which is a distinctly designed collection of glyphs. Each typeface has its own name, such as New York, Geneva, or Symbol. The same typeface can be used with different hardware, such as typesetting machines, monitors, or laser printers.</p><p>A <strong>style</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_111"></a> is a specific variation in the appearance of a glyph that can be applied consistently to all the glyphs in a typeface. Styles available in the Mac OS include plain, bold, italic, underline, outline, shadow, condensed, and extended. QuickDraw can add styles, such as bold or italic to bitmaps, or a font designer can design a font in a specific style (for instance, Courier Bold).</p><p>A <strong>font</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_112"></a> refers to a complete set of glyphs in a specific typeface and style. And, in the case of bitmapped fonts, a specific size. <strong>Bitmapped fonts </strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_113"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_114"></a>are fonts of the bitmapped font (<code>'NFNT'</code>) resource<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_115"></a> type or <code>'FONT'<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_116"></a></code> resource type that provide an individual bitmap for each glyph in each size and style. Courier plain 10-point, Courier bold 10-point, and Courier plain 12-point, for example, are considered three different fonts. If the user requests a font that is not available in a particular size, QuickDraw can alter a bitmapped font at a different size to created the required glyphs. However, this generated bitmap often appears to be irregular in some way.</p><p><strong>Outline fonts</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_117"></a> are fonts of the outline font (<code>'sfnt'<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_118"></a></code>) resource type that consist of glyphs in a particular typeface and style with no size restriction. The Font Manager can generate thousands of point sizes from the same outline font. For example, a single outline<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_119"></a> Courier font can produce Courier 10-point, Courier 12-point, and Courier 200-point.</p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF105" title="Identifying Fonts"></a><h3>Identifying Fonts</h3><p>When multiple fonts of the same typeface are present in system software, the Font Manager groups them into <strong>font families</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_120"></a>. Each font in a font family can be bitmapped or outline. Bitmapped fonts in the same family can be different styles or sizes. For example, an outline plain font for Geneva and two bitmapped fonts for Geneva plain 12-point and Geneva italic 12-point might make up one font family named Geneva, to which a user could subsequently add other sizes or styles. </p><p>A font has a <strong>font name</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_121"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_122"></a>, which is stored as a string such as “Geneva” or “New York”. The font name is usually the same name as the typeface from which it was derived. If a font is not in plain style, its style becomes part of the font’s name and distinguishes it from the plain style of that font: for example “Palatino” and “Palatino Bold”.</p><p>A <strong>font family reference</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_123"></a> is a reference to an opaque structure that represents a collection of fonts with the same design characteristics. You can use the font family reference to refer to font families while you application is running. However, if you need to refer a font or font family every time your application launches (that is, across reboots), you should refer to the font or font family by name, and not by the font family reference. </p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF106" title="Font Measurements"></a><h3>Font Measurements</h3><p>Font designers use specific terms for the <a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_124"></a>measurements of different parts of a glyph, whether outline or bitmapped. <span class="content_text">Figure 2-1</span> shows the terms used for the most frequently used measurements. </p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_2" title="Figure 1-1Terms for font measurements"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJIIJAI" title="Figure 1-1Terms for font measurements"></a><strong>Figure 1-1&nbsp;&nbsp;</strong>Terms for font measurements</p><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_125"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_126"></a><img src = "../art/fm01.gif" alt = "Terms for font measurements" width="386" height="287"></div><br/><p></p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_3" title="Note"></a><p><strong>Note:</strong>&nbsp;The terms given here are based on the characteristics of the Roman script system which is associated with most European languages and uses fonts that are meant to be read from left to right. Some other script systems use different definitions for some of these terms. However, QuickDraw always draws glyphs using the glyph origin and advance width measurement, even if the font is read from right to left.</p></div><p>As shown in <span class="content_text">Figure 2-1</span>, the <strong>bounding box</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_127"></a> of a glyph is the smallest rectangle that entirely encloses the pixels of the glyph. The <strong>glyph origin</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_128"></a> is where QuickDraw begins drawing the glyph. Notice that there is some white space between the glyph origin and the visible beginning of the glyph: this is the <strong>left-side bearing</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_129"></a> of the glyph. The left-side bearing value can be negative, which lessens the spacing between adjacent characters. The <strong>advance width</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_130"></a> is the full horizontal measurement of the glyph as measured from its glyph origin to the glyph origin of the next glyph on the line, including the white space on both sides.</p><p>If all of the glyph images in the font were superimposed using a common glyph origin, the smallest rectangle that would enclose the resulting image is the <strong>font rectangle</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_131"></a>.</p><p>The glyphs of a <strong>fixed-width font</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_132"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_133"></a> all have the same advance width. Fixed-width fonts are also know as <strong>monospaced fonts</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_134"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_135"></a>. In Courier, a fixed-width font, the uppercase “M” has the same width as the lowercase “i”. In a <strong>proportional font</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_136"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_137"></a>, different glyphs may have different widths, so the uppercase “M” is wider than the lowercase “i”. </p><p>Most glyphs in a font appear to sit on the <strong>base line</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_138"></a>, an imaginary horizontal line. The <strong>ascent line</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_139"></a> is an imaginary horizontal line chosen by the font’s designer that aligns approximately with the tops of the uppercase letters in the font, because these are the tallest commonly used glyphs in a font. The ascent line is the same distance from the base line for all glyphs in the font. The <strong>descent line</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_140"></a> is an imaginary horizontal line that usually aligns with the bottoms of descenders (the tails on the glyphs such as “p” or “g”), and it is the same distance from the base line for every glyph in the font. The ascent and descent lines are part of the font designer’s recommendations about line spacing as measured from base line to base line. All of these lines are horizontal because Roman text is read from left to right, in a straight horizontal line.</p><p>For bitmapped fonts, the ascent line marks the <strong>maximum y-value</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_141"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_142"></a> and the descent line marks the <strong>minimum y-value</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_143"></a> used for the font. The y-value is the location on the vertical axis of each indicated line: the minimum y-value is the lowest location on the vertical axis and the maximum y-value is the highest location on the vertical axis. For outline fonts, a font designer can create individual glyphs that extend above the ascent line or below the descent line. The integral sign in <span class="content_text">Figure 2-2</span>, for example, is much taller than the uppercase “M”. In this case, the maximum y-value is more important than the ascent line for determining the proper line spacing for a line containing both of these glyphs. You can have the Font Manager reduce such oversized glyphs so that they fit between the ascent and descent lines. See <span class="content_text"><a href="../fm_tasks/fmtasks.html#//apple_ref/doc/uid/TP30000982-TP30000222-BBCFDIIE">“Preserving the Shapes of Glyphs”</a></span> for details.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_4" title="Figure 1-2The ascent line and maximum y-value"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJDHBCC" title="Figure 1-2The ascent line and maximum y-value"></a><strong>Figure 1-2&nbsp;&nbsp;</strong>The ascent line and maximum y-value</p><img src = "../art/fm02box.gif" alt = "The ascent line and maximum y-value" width="425" height="215"></div><br/><p><strong>Font size</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_144"></a> (or point size) indicates the size<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_145"></a> of a font’s glyphs as measured from the base line of one line of text to the base line of the next line of single-spaced text. In the United States, font size is traditionally measured in <strong>points</strong>, and there are 72.27 traditional points per inch. However, QuickDraw and the PostScript language define 1 point to be 1/72 of an inch, so there are exactly 72 points per inch on the Macintosh.</p><p>All bitmaps must fit on the QuickDraw coordinate plane. On a 72-dpi display device, fonts have an upper size limit<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_146"></a> of 32,767 points.</p><p>There is not a strict typographical standard for defining a point size<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_147"></a>. It is often, but not always, the sum of the ascent, descent, and leading values for a font. Point size is used by a font designer to indicate the size of a font relative to other fonts in the same family. Glyphs from fonts with the same point size are not necessarily of the same height. This means that a 12-point font can exceed the measurement of 12 points from the base line of one line of text to the base line of the next.</p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;The Font Manager does not force fonts that are specified as having a certain point size to be of that size. This could affect the alignment and spacing of text, so you need to take it into account when your application lays out text. You may need to determine the actual height of the text that you are displaying by using the QuickDraw function <code><a href="../../../Reference/QuickDraw_Text/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/MeasureText" target="_top">MeasureText</a></code> rather than relying on the point size of the font.</p></div><p><strong>Leading</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_148"></a> (pronounced “LED-ing”) is the amount of blank vertical space between the descent line of one line of text drawn using a font and the ascent line of the next line of single-spaced text drawn in the same font. The Font Manager returns the font’s suggested leading, which is in pixels, in the <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FontMetrics" target="_top">FontMetrics</a></code> function for both outline and bitmapped fonts. QuickDraw returns similar information in the <code><a href="../../../Reference/QuickDraw_Text/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/GetFontInfo" target="_top">GetFontInfo</a></code> function. Although the designer specifies a recommended leading value for each font, you can always change that value if you need more or less space between the lines of text in your application. The <strong>line spacing</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_149"></a> for a font can be calculated by adding the value of the leading to the distance from the ascent line to the descent line of a single line of text.</p><p>Although each glyph has a specific advance width and left-side bearing measurement assigned to it, you can change the amount of white space that appears between glyphs. <strong>Kerning</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_150"></a> is the process of drawing part of a glyph<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_151"></a> so that is overlaps another glyph. The period in the top portion of <span class="content_text">Figure 2-3</span> stands apart from the uppercase “Y”. In the bottom portion of the figure, the word and the period have been kerned: the period has been moved under the right arm of the “Y” and the glyphs of the word are closer. Kerning data (the distances by which pairs of specified glyphs should be moved closer together) is stored in the kerning tables of the different font resources.<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_152"></a></p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_6" title="Figure 1-3Unkerned text (top) and kerned text (bottom)"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJDFCHE" title="Figure 1-3Unkerned text (top) and kerned text (bottom)"></a><strong>Figure 1-3&nbsp;&nbsp;</strong>Unkerned text (top) and kerned text (bottom)</p><img src = "../art/fm03.gif" alt = "Unkerned text (top) and kerned text (bottom)" width="214" height="125"></div><br/><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF107" title="Font Rendering"></a><h3>Font Rendering</h3><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_153"></a><p>This section describes how TrueType<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_154"></a> outline fonts are rendered by a font rendering engine. Although PostScript fonts are rendered using different mathematical algorithms, the two rendering methods are similar in that both use mathematical equations to estimate <a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_155"></a>contours. For information on PostScript font<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_156"></a> rendering, see the <em>PostScript Language Reference Manual</em> by Adobe Systems, Inc., available through Addison-Wesley Publishing Company.</p><p>TrueType outline fonts are stored in an outline font (<code>'sfnt'</code>) resource as a collection of outline points. (Do not confuse these outline points with the points that determine point size, or the <code>Point</code> data type, which specifies a location in the QuickDraw coordinate plane.) A font rendering engine calculates lines and curves between the points, sets the bits that make the bitmap, and then sends the bitmap to QuickDraw for display.</p><p>There are two types of outline points: <strong>on-curve points</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_157"></a> define the endpoints of lines and <strong>off-curve points</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_158"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_159"></a> determine the curvature of the line between the on-curve points. Two consecutive on-curve points define a straight line. To draw a curve, the font rendering engine needs a third point that is off the curve and between the two on-curve points.</p><p>A font rendering engine uses this parametric <a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_160"></a>Bézier equation<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_161"></a> to draw the curves of the glyph from an outline font:</p><br/><div><img src = "../art/font_equation.gif" alt = "image: ../art/font_equation.gif" width="177" height="17"></div><br/><p>where t ranges between 0 and 1 as the curve moves from point A to point C. A and C are on-curve points; B s an off-curve point.</p><p><span class="content_text">Figure 2-4</span> shows two Bézier curves. The positions of on-curve points A and C remain constant, while off-curve point B shifts. The curve changes in relation to the position of point B.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_7" title="Figure 1-4The effect of an off-curve point on two B&Atilde;&copy;zier curves"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJJBFBE" title="Figure 1-4The effect of an off-curve point on two B&Atilde;&copy;zier curves"></a><strong>Figure 1-4&nbsp;&nbsp;</strong>The effect of an off-curve point on two Bézier curves</p><img src = "../art/fm09.gif" alt = "The effect of an off-curve point on two Bézier curves" width="397" height="249"></div><br/><p>A font designer can use any number of outline points to create a glyph outline. These points must be numbered consecutively along the contours of the glyph, because a font rendering engine draws lines on curves sequentially. This process produces a glyph such as the lower case “b” in <span class="content_text">Figure 2-5</span>.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_8" title="Figure 1-5An outline with points on and off the curve"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJJBFIJ" title="Figure 1-5An outline with points on and off the curve"></a><strong>Figure 1-5&nbsp;&nbsp;</strong>An outline with points on and off the curve</p><img src = "../art/fm10.gif" alt = "An outline with points on and off the curve" width="177" height="369"></div><br/><p>There are several groups of points in <span class="content_text">Figure 2-5</span> that include two consecutive off-curve points. For instance, points 2 and 3 are both off-curve. In this case, the font rendering engine interpolates an on-curve point midway between the two off-curve points, thereby defining two Bézier curves, as shown in <span class="content_text">Figure 2-6</span>. Note that this additional on-curve point is used for creation of the glyph only; the font rendering engine does not alter the outline font resource’s list of points.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_9" title="Figure 1-6A curve with consecutive off-curve points"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJCCABC" title="Figure 1-6A curve with consecutive off-curve points"></a><strong>Figure 1-6&nbsp;&nbsp;</strong>A curve with consecutive off-curve points</p><img src = "../art/fm11.gif" alt = "A curve with consecutive off-curve points" width="261" height="297"></div><br/><p>When the font rendering engine has finished drawing a closed loop, it has completed one contour of the outline. The font designer groups the points in the outline font resource into contours. In <span class="content_text">Figure 2-5</span>, the font rendering engine draws the first contour in the glyph from point 0 to point 17, and the second contour from point 18 to the end, creating the glyph in <span class="content_text">Figure 2-7</span>.<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_162"></a></p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_10" title="Figure 1-7A glyph from an outline font"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJJHFDJ" title="Figure 1-7A glyph from an outline font"></a><strong>Figure 1-7&nbsp;&nbsp;</strong>A glyph from an outline font</p><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_163"></a><img src = "../art/fm12.gif" alt = "A glyph from an outline font" width="205" height="199"></div><br/><p>At this stage the glyph does not have a fixed point size<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_164"></a>. Remember that point size is measured as the distance from the base line of one line of text to the base line of the next line of single-spaced text. The font rendering engine has the measurements of the outline relative to the base line and ascent line, so it can correlate the measurements with the requested point size and calculate how large the outline should be for that point size.</p><p>The font rendering engine uses the contours to determine the boundaries of the bitmap for this glyph when it is displayed. For example, the Macintosh computer’s screen is a grid made of pixels. The font rendering engine fits the glyph, scaled for the correct size, to this grid. If the center of one section of this grid (comparable to a pixel or a printer dot) falls on a contour or within two contours, the font rendering engine sets the bit for the bitmap.</p><p>Because there are two contours for the glyph in <span class="content_text">Figure 2-7</span> the font rendering engine begins with pixels at the boundary marked by contour 1 and stops when it gets to contour 2. Some glyphs need only one contour, such as the uppercase “I” in some fonts. Others, such as the Å glyph, have three or more contours. </p><p>If the pixels (or dots) are tiny in proportion to the outline (when resolution is high or the point size of the glyph is large), they fill out the outline smoothly, and any pixels that jut out from the contours are not noticeable. If the display device has a low resolution or the point size is small, the pixels are large in relation to the outline. You can see in <span class="content_text">Figure 2-8</span> that the outline has produced an unattractive bitmap. There are gaps and blocky areas that would not be found in the high-resolution version of the same glyph.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_11" title="Figure 1-8An unmodified glyph from an outline font at a small point size"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJIHEHC" title="Figure 1-8An unmodified glyph from an outline font at a small point size"></a><strong>Figure 1-8&nbsp;&nbsp;</strong>An unmodified glyph from an outline font at a small point size</p><img src = "../art/fm13.gif" alt = "An unmodified glyph from an outline font at a small point size" width="310" height="201"></div><br/><p>Because the size of the pixels or dots used by the display device cannot change, the outline should adapt in order to produce a better bitmap. To achieve this end, font designers include instructions<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_165"></a> in the outline font resources that indicate how to change the shape of the outline under various conditions, such as low resolution or small point size. The lowercase “b” outline in <span class="content_text">Figure 2-9</span> is the same one depicted in <span class="content_text">Figure 2-8</span>, except that the font rendering engine has applied the instructions to the figure and produces a better bitmapped glyph. These instructions are equivalent to “move these points here” or “change the angle formed by these points.” A font designer includes programs consisting of these instructions in certain outline font resource tables, where the font rendering engine finds them and executes them under specified conditions. Most applications do not need to use instructions; however, if you want to know more about them, see the <em>TrueType Font Format Specification</em> (available through <span class="content_text"><a href="http://developer.apple.com/fonts/" target="_top">http://developer.apple.com/fonts/</a></span>). </p><p>In the case of the Mac OS, once the Font Manager has produced the outline according to the design and instructions, it creates a bitmap and sends the bitmap to QuickDraw, which draws it on the screen. The Font Manager then saves the bitmapped glyph in memory (caches it) and uses it the next time the user requests this glyph in this font at this <a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_166"></a>point size.<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_167"></a></p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_12" title="Figure 1-9An instructed glyph from an outline font"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJEDGJJ" title="Figure 1-9An instructed glyph from an outline font"></a><strong>Figure 1-9&nbsp;&nbsp;</strong>An instructed glyph from an outline font</p><img src = "../art/fm14.gif" alt = "An instructed glyph from an outline font" width="282" height="199"></div><br/><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJEFHED" title="Font Support in the Mac OS"></a><h2>Font Support in the Mac OS</h2><p>Prior to the release of Mac OS 8.5, the Font Manager supported only bitmapped fonts and TrueType outline fonts whose data were stored only in the resource fork. With the release of Mac OS 8.5, Apple began to provide support for TrueType and OpenType fonts<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_168"></a> that are stored in data–fork files. As a result, you can use the Font Manager to access both resource–fork and data–fork fonts. There are many new Font Manager functions you can use to assure your application supports both kinds of fonts. </p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF108" title="Data&acirc;&#128;&#147;Fork Fonts"></a><h3>Data–Fork Fonts</h3><p>There are currently two types of <a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_169"></a>data–fork fonts: TrueType<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_170"></a> and OpenType<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_171"></a>. TrueType data–fork fonts originated on the Windows platform. These fonts store data in an <code>'sfnt'</code> structure in a file with the extension <code>.TTF</code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_172"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_173"></a>. In the past, to use these fonts in the Mac OS, a user would first have to use a utility to convert the font as a resource-based suitcase. Starting with Mac OS 8.5, this is no longer necessary.</p><p>TrueType collections, or <code>.TTC</code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_174"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_175"></a> files, contain several <code>'sfnt'</code> font structures organized with a simple directory scheme. This organization allows the individual fonts to share complete tables among each other. Until now, these fonts have also not been usable on the Macintosh. TrueType collections have the file type <code>'ttcf'</code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_176"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_177"></a>.</p><p>OpenType represents new naming and packaging for fonts. Adobe, in conjunction with Microsoft, have defined a data–fork-based, <code>'sfnt'</code> structured font file to contain PostScript font data. The <code>'sfnt'</code> structure is in a file with the extension <code>.OTF</code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_178"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_179"></a>. The glyph data itself is stored in a new format called CFF<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_180"></a>, or Compact Font Format<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_181"></a>. The structure was designed such that these fonts behave the same as TrueType fonts on the Windows platform. These fonts are also designed to work in the Mac OS.</p><p>An OpenType font file contains data, in table format, that comprises either a TrueType or a PostScript outline font. Rasterizers use combinations of data from the tables contained in the font to render the TrueType or PostScript glyph outlines. Some of this supporting data is used no matter which outline format is used; some of the supporting data is specific to either TrueType or PostScript.</p><p>The Finder in Mac OS 8.5 was enhanced to support identification and autorouting of data–fork font files. Individual font files (<code>.TTF</code> and <code>.OTF</code>) and collection files (<code>.TTC</code>). are assigned file types <code>'sfnt'</code> and <code>'ttcf'</code>, respectively, by Internet Config when the fonts are first brought onto the system. When dropped into the System Folder, the Finder assigns appropriate icons to the files and automatically routes them to the Fonts folder.</p><p> Currently, there is no support for double-clicking a data–fork font file. They behave most like the individual TrueType files (as opposed to suitcases) and as such, they cannot be renamed or opened.<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_182"></a></p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF109" title="Resource&acirc;&#128;&#147;Fork Fonts"></a><h3>Resource–Fork Fonts</h3><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_183"></a><p>The Font Manager takes care of the details of how fonts are stored in resources, reading the resource fields when required and building <strong>internal representations</strong> of the data stored in them. </p><p>There are three types of resources associated with resource–fork fonts:</p><ul class="spaceabove"><li class="li"><p>Bitmapped font<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_184"></a> (<code>'NFNT'<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_185"></a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_186"></a>) resource<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_187"></a>s describe bitmapped fonts. These bitmapped font resources have an identical structure to the earlier <code>'FONT'<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_188"></a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_189"></a> resources<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_190"></a>, which they replace, but the bitmapped font resources add a more flexible numbering scheme. </p></li><li class="li"><p>Outline font (<code>'sfnt'<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_191"></a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_192"></a>) resource<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_193"></a>s describe outline fonts. </p></li><li class="li"><p>Font family (<code>'FOND'<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_194"></a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_195"></a>) resource<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_196"></a>s describe font families<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_197"></a>, including information such as which fonts are included in the family and the recommended width for a glyph at a given point <a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_198"></a>size. </p></li></ul><div class="notebox"><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_13" title="Note"></a><p><strong>Note:</strong>&nbsp;<code>'FONT'</code> resources that are not referenced by a <code>'FOND'</code> resource are not supported. <code>'FONT'</code> resources are not supported in Mac OS X and should be converted to <code>'NFNT'</code> resources.</p></div><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF110" title="Font File Formats"></a><h3>Font File Formats</h3><p>There are a variety of font file formats<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_199"></a> you should be aware of when working with the Font Manager. The font file formats<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_200"></a> can have different implications for how the fonts are enumerated and font data is accessed in Mac OS X versus in Mac OS 8 and 9. The most important file formats include the following:</p><ul class="spaceabove"><li class="li"><p>Suitcase<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_201"></a>. There are resource–fork and data–fork suitcases. If you want to use a suitcase in Mac OS 9, you should package it as a traditional resource–fork suitcase. Data–fork suitcases (<code>.dfont<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_202"></a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_203"></a>) are supported only in Mac OS X. </p></li><li class="li"><p>Multiple-file resource-based PostScript<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_204"></a> fonts<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_205"></a>. Outline data is stored in a separate file from the font suitcase. Mac OS 8 and 9 supports plain and Multiple Master LWFN-class fonts<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_206"></a>. (CID fonts<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_207"></a> not packaged in an <code>'sfnt'</code> structure, that is, “naked” CID and OCF are not currently supported in Mac OS X.)</p></li><li class="li"><p>Data–fork<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_208"></a> fonts. These are fonts that consist of a single data–fork file that contains <code>'sfnt'</code> font data structures. Typically, there is only one <code>'sfnt'</code> per file, as with OpenType and Windows TrueType fonts, but there may be more, in which case you would have a TrueType collection file. There is no suitcase associated with the font, so there is no <code>'FOND'</code> resource or associated bitmapped fonts. This means that in Mac OS 9 (with or without CarbonLib) these fonts do not belong to any font family and cannot be used with the Font Manger and QuickDraw. (See <code><a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJBJIAI">“Compatibility Issues”</a></code> for information on associating a <code>FOND</code> resource with a data–fork font.) In Mac OS X, the system synthesizes font family information to allow the fonts to be accessible to the entire system. </p></li></ul><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJHDEEE" title="Font Family and Font References "></a><h3>Font Family and Font References </h3><p>The font family ID and font ID have been replaced by the font family reference and font reference. </p><p>A <strong>font family reference</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_209"></a> (<code>FMFontFamily</code>) represents a collection of fonts with the same design characteristics. It replaces the standard QuickDraw font identifier and may be used with all QuickDraw functions, including <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/GetFontName" target="_top">GetFontName</a></code> and <code><a href="../../../Reference/QuickDraw_Text/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/TextFont" target="_top">TextFont</a></code>. A font family reference does not imply a particular <strong>script system</strong>, nor is the character encoding of a font family determined by an arithmetic mapping of its value. </p><div class="notebox"><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_14" title="Note"></a><p><strong>Note:</strong>&nbsp;The Font Manager uses opaque data types to store information about fonts and font families. You cannot access a font family or font object directly. Instead, you must use the accessor functions provided in the Font Manager API.</p></div><p>A <strong>font family</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_210"></a> is a collection of fonts, each of which is identified by a <strong>font reference</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_211"></a> (<code>FMFont</code>) that maps to a single <strong>font object</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_212"></a> registered with the font database<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_213"></a>.</p><p>Each font object maps to one or more combinations of a font family reference and a standard QuickDraw style. This is roughly equivalent to the information stored in the font association table of the <code>'FOND'</code> resource handle, with the exception of a descriptor for point size. Since each font object represents the entire array of point sizes for a given font, a font family reference and style together fully specify any given font object. A <strong>font family instance</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_214"></a> (<code>FMFontFamilyInstance</code>) is a data structure that contains a font family reference, font style, and font size.</p><p>The system software always maps the <strong>system font</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_215"></a> to <code>sysFont</code> and the <strong>application font</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_216"></a> to <code>applFont</code>. The system software uses the system font for drawing items such as system menus and system dialogs. The application font is the font that your application uses for text unless specified otherwise by you or the user. The fonts assigned as the system and application fonts depend on the Appearance Manager settings as well as the Script Manager variables <code>smScriptSysFond</code>, <code>smScriptAppFond</code>, <code>smScriptSysFondSize</code>, and <code>smScriptAppFondSize</code>. </p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJBJIAI" title="Compatibility Issues"></a><h3>Compatibility Issues</h3><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_217"></a><p>You should read this section only if you need to parse a font association table<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_218"></a> for a <code>'FOND'</code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_219"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_220"></a>resource<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_221"></a>. </p><p>The Font Manager cannot make use of any font for which there is no <code>'FOND'</code> resource, as that resource forms the basis for accessing and processing fonts. Data–fork fonts do not have a <code>'FOND'</code> resource and so are not usable as is by the Font Manager in Mac OS 8 and 9 or the Classic environment, but they are usable in Mac OS X. It is not possible right now for the Font Manager to synthesize a <code>'FOND</code>' resource, but there is a work-around the Font Manager uses to connect a <code>'FOND'</code> resource to a data fork. It involves the creation of an <code>'afnt'</code>, or font alias, resource.</p><p>The Font Manager<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_222"></a> uses the <code>'FOND'</code> font association table to choose from among the available bitmap sizes in a font, or to elect to use an outline font. Each entry in the font association table contains a size field to indicate the bitmap size, with the special value of zero denoting an outline font (<code>'sfnt'</code> resource). The Font Manager uses the entry's resource ID to access the appropriate type of resource using the Resource Manager.</p><p>Starting with Mac OS 8.5, Apple defined the size (-1) to indicate that an outline font is stored in a data fork. The font association table entry’s resource ID is <code>'afnt'</code>. An <code>'afnt'</code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_223"></a>resource<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_224"></a> is simply an alias record that has the structure shown in <span class="content_text">Figure 2-10</span>. For more information on alias records, see the <em><a href="../../../Reference/Alias_Manager/index.html#//apple_ref/doc/uid/TP30000146" target="_top">Alias Manager Reference</a></em> in Carbon File Management Documentation.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_15" title="Figure 1-10An alias record"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-CJBHDCAI" title="Figure 1-10An alias record"></a><strong>Figure 1-10&nbsp;&nbsp;</strong>An alias record</p><img src = "../art/fm18.gif" alt = "An alias record" width="385" height="119"></div><br/><p>Apple currently reserves all of the user bits and has defined the least significant:</p><ol class="ol"><li class="li"><p>A value of all zeros for the user bits indicates a simple, single–font data fork. The alias data can be passed to the Alias Manager for resolution. The target font is then expected to begin at offset zero in the file. </p></li><li class="li"><p>If the least significant byte of the user bit word is 1, then an offset into the data–fork file is present following the private alias data in the resource. This is used for targeting a member of a TrueType collection file. Thus, an <code>'afnt'</code> resource targets a single font. </p></li></ol><p>Starting with Mac OS 9, a font management utility can activate data for fonts by simply making a <code>'FOND'</code> and associated <code>'afnt'</code> resources visible to the Font Manager. The data for files themselves can reside outside the Fonts folder. When creating the alias that goes in the <code>'afnt'</code> resource, do not make a “minimal” alias. Ideally, the alias should be relative to the temporary file (or the suitcase file, if a suitcase is created). Keeping the data–fork file out of the Fonts folder is efficient since the system opens the data–fork file only when needed. Although you can reference data forks on network volumes, it is not recommended because the network connection could close unexpectedly in midstream. Data–fork files can also be stored on and accessed from CDs.<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_225"></a></p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF111" title="How the Font Manager Works"></a><h2>How the Font Manager Works</h2><p>The Font Manager<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_226"></a> works in conjunction with QuickDraw<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_227"></a>. QuickDraw treats the glyphs that make up text as small images that make up a larger, coherent image. It uses size information, such as height and width, the same way it users similar information when arranging an image that does not contain text. The Font Manager, by contrast, keeps track of detailed font information such as the glyphs’ character codes, whether fonts are fixed-width or proportional, and which fonts are related to each other by name. When QuickDraw draws text in a particular font, it sends a request for that font to the Font Manager. The Font Manager finds the font or the closest match to it that is available, and provides QuickDraw with the necessary information to lay out text and implement the appropriate stylistic variations.</p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF112" title="How QuickDraw Requests a Font "></a><h3>How QuickDraw Requests a Font </h3><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_228"></a><p>When your application calls a QuickDraw<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_229"></a> function, QuickDraw gets information from the Font Manager about the font specified in the current graphics port and the individual glyphs of that font. The Font Manager performs any necessary calculations and returns the requested information to QuickDraw.</p><p>QuickDraw makes its request for font information using a font input structure. This structure contains the font family reference, the size, the style, and the scaling factors of the font request.</p><p>QuickDraw makes a font request by filling in a font input structure (<code>FMInput</code>) and calling the function <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FMSwapFont" target="_top">FMSwapFont</a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_230"></a>. If your application needs to make a font request in the same way that QuickDraw does, you can call <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FMSwapFont" target="_top">FMSwapFont</a></code>. The <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FMSwapFont" target="_top">FMSwapFont</a></code> function has been optimized to return as quickly as possible if the request is for a recently requested font. Building the global width tables, which is described in <code><a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJBBCAD">“How the Font Manager Calculates Glyph Widths”</a></code>, is one of the more time-consuming tasks in this process, which is why the Font Manager maintains a cache of width tables.</p><p>The Font Manager looks for the font family of the requested font and from that determines information about which font it can use to meet the request. </p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJFHIBE" title="How the Font Manager Responds to a Font Request"></a><h3>How the Font Manager Responds to a Font Request</h3><p>The Font Manager<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_231"></a> returns information to QuickDraw in a font output structure (<code>FMOutput</code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_232"></a>). This structure contains a handle to the font resource that the <code>FMInput<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_233"></a></code> structure requested, information on how different stylistic variations affect the display of the font’s glyphs, and the scaling factors.</p><p>When the Font Manager gets a request for a font in a font input structure, it attempts to find a font family resource for the requested font family. If the font family resource is available, the Font Manager looks in the font family resource for the font family reference of the appropriate font resource to match the request. If a font family resource is not available, the Font Manager takes additional steps until it finds a suitable substitute.</p><p>When responding to a font request, the Font Manager first looks for a font family resource of the specified size. It then looks for the stylistic variation that was requested. It does this by assigning weights to the various styles and then choosing the font whose style weight most closely matches the weight of the requested style.</p><p>If the Font Manager cannot find the exact font style that QuickDraw has requested, it uses the closest font style that it does find for that font and QuickDraw then applies the correct style to that font. For example, if an italic version of the requested font cannot be found, the Font Manager returns the plain version of the font and QuickDraw slants the characters as it draws them. The <strong>QuickDraw styles</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_234"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_235"></a> include the values<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_236"></a><code>bold</code>, <code>italic</code>, <code>underline</code>, <code>outline</code>, <code>shadow</code>, <code>condense</code>, and <code>extend</code>.</p><p>With the additional complication of having both bitmapped and outline fonts available, this process can sometimes produce results other than those that you expect. The Font Manager can be set to favor either outline or bitmapped fonts when both are available to meet a request. (For information on how to do this, see <span class="content_text"><a href="../fm_tasks/fmtasks.html#//apple_ref/doc/uid/TP30000982-TP30000222-BBCHGHGB">“Favoring Outline or Bitmapped Fonts”</a></span>). The following scenario is one example of how the font that is selected can be a surprise:</p><ol class="ol"><li class="li"><p>You have specified that bitmapped fonts are to be preferred over outline fonts when both are available in a specific size.</p></li><li class="li"><p>The system software on which your application is running has the bitmap font Times 12 and the outline fonts Times, Times Italic, and Times Bold.</p></li><li class="li"><p>The user requests Times Bold 12.</p></li><li class="li"><p>The Font Manager chooses the bitmapped version of Times 12 and QuickDraw algorithmically smears it to create the bold effect.</p></li></ol><p>There is not much that you can do about such situations except to be aware that setting the Font Manager to prefer one kind of font over another has implications beyond what you might expect. </p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-TPXREF113" title="How the Font Manager Scales Fonts"></a><h3>How the Font Manager Scales Fonts</h3><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_237"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_238"></a><p><strong>Font scaling</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_239"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_240"></a> is the process of changing a glyph<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_241"></a> from one size or shape to another. The Font Manager and QuickDraw can scale bitmapped and outline fonts in three ways: changing a glyph’s point size, modifying the glyph (but not its point size) for display on a different device, and altering the shape of the glyph.</p><p>For bitmapped fonts<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_242"></a>, the Font Manager does not actually perform scaling of the glyph bitmaps. Instead the Font Manager finds an appropriate font and computes the horizontal and vertical scaling factors that QuickDraw must apply to scale the bitmaps. QuickDraw performs all modifications of bitmapped glyph fonts.</p><p>The simplest form of scaling occurs when the Font Manager returns scaling factors for QuickDraw to change a glyph from one point size to another on the same display device. If the glyph is bitmapped and the requested font size is not available, there are certain rules the Font Manager follows to create a new bitmapped glyph from an existing one (see <code><a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJBCFJB">“The Scaling Process for a Bitmapped Font”</a></code>). If the glyph is from an outline font, the Font Manager uses the outline for that glyph to create a bitmap (see <code><a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJCJGGE">“The Scaling Process for an Outline Font”</a></code>).</p><p><span class="content_text">Figure 2-11</span> shows how the Font Manager and QuickDraw scale a bitmapped font and an outline<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_243"></a> font from 9 points to 40 points for screen display. The sizes of the bitmapped fonts available to the Font Manager to create all 32 sizes were 9, 10, 12, 14, 18, and 24. </p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_16" title="Figure 1-11A comparison of scaled bitmapped and outline fonts"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJDJEBF" title="Figure 1-11A comparison of scaled bitmapped and outline fonts"></a><strong>Figure 1-11&nbsp;&nbsp;</strong>A comparison of scaled bitmapped and outline fonts</p><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_244"></a><img src = "../art/fm05box.gif" alt = "A comparison of scaled bitmapped and outline fonts" width="501" height="175"></div><br/><p>The Font Manager produces better results by scaling glyphs from outline fonts, because it changes the font’s original outline to the new size or shape, and then creates the bitmap. Outlines give better results than bitmaps when scaled, because the outlines are intended for use at all point sizes, whereas bitmaps are not.</p><p>The Font Manager also determines that a glyph must be scaled when moving it from one device to another device with a different resolution: for instance, from the screen to a printer. A bitmap that is 72 pixels high on a 72-dpi screen measures one inch, but on a 144-dpi printer it measures a half inch. In order to print a figure the same size as the original screen bitmap, QuickDraw needs a bitmap twice the size of the original. If there are no bitmaps available in twice the point size of the bitmap that appears on the screen, the Font Manager returns the proper scaling factors, and QuickDraw scales the original bitmap to twice its original size in order to draw it on the printer.</p><p>With some QuickDraw calls, your application can also use the Font Manager to explicitly scale a glyph by stretching or shrinking it. For example, you can use the Font Manager to scale a glyph that is normally 12 points to one that is 12 points high but stretched to the width of the entire page of text. Your application tells the Font Manager how to scale a glyph using <strong>font scaling factors</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_245"></a>, which are represented as proportions or fractions that indicate how the Font Manager should scale the glyph in the vertical and horizontal directions. The ratio given by the font scaling factors determines whether the glyph grows or shrinks. If the ratio is greater than one, the glyph increases in size, and if it is less than one, the glyph decreases in size. If the font scaling factors are 1-to-1 for both horizontal and vertical scaling, the glyph does not change size.</p><p>In some circumstances, the Font Manager finds a font and returns different scaling factors to QuickDraw. The scaling factors in a QuickDraw font request tell the Font Manager how much QuickDraw wants to scale the font, and the scaling factors returned by the Font Manager tell QuickDraw how much to actually scale the glyphs before drawing them.</p><p>In <span class="content_text">Figure 2-12</span>, the font scaling factors are 2/1 in the horizontal direction and 1/1 in the vertical direction. The glyph stays the same height, but grows twice as large in width.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_17" title="Figure 1-12A glyph stretched horizontally"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJBGGDA" title="Figure 1-12A glyph stretched horizontally"></a><strong>Figure 1-12&nbsp;&nbsp;</strong>A glyph stretched horizontally</p><img src = "../art/fm06.gif" alt = "A glyph stretched horizontally" width="160" height="81"></div><br/><p>In <span class="content_text">Figure 2-13</span>, the font scaling factors are 2/1 in the vertical direction and 1/1 in the horizontal direction. The glyph stays the same width, but grows to twice its original height.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_18" title="Figure 1-13A glyph stretched vertically"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-CJBBJAIC" title="Figure 1-13A glyph stretched vertically"></a><strong>Figure 1-13&nbsp;&nbsp;</strong>A glyph stretched vertically</p><img src = "../art/fm07.gif" alt = "A glyph stretched vertically" width="150" height="113"></div><br/><p>In <span class="content_text">Figure 2-14</span>, the scaling factors are 1/1 in the vertical direction and 1/2 in the horizontal direction. The glyph stays the same height but retains only half its width.</p><br/><div><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_19" title="Figure 1-14A glyph condensed horizontally"></a><p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-CJBHBDFH" title="Figure 1-14A glyph condensed horizontally"></a><strong>Figure 1-14&nbsp;&nbsp;</strong>A glyph condensed horizontally</p><img src = "../art/fm08.gif" alt = "A glyph condensed horizontally" width="128" height="83"></div><br/><p>If the font scaling factors are 2/1 in both directions and the font is an outline font, then the Font Manager computes the size of the glyph as twice the specified size and QuickDraw draws the glyph. With bitmapped fonts, QuickDraw first looks for a bitmap at twice the size of the original before redrawing the glyph at the new point size.</p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJBCFJB" title="The Scaling Process for a Bitmapped Font"></a><h4>The Scaling Process for a Bitmapped Font</h4><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_246"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_247"></a><p>Although the Font Manager does not scale the glyph bitmaps of a bitmapped font, it does compute the scaling factors that QuickDraw uses to perform the scaling. The Font Manager computes scaling factors other than 1/1 when the exact point size requested is not available. Font scaling is the default behavior; however you can disable it, as described below. When the Font Manager cannot find the proper bitmapped font that QuickDraw has requested and font scaling<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_248"></a> is enabled, it uses the following procedure:</p><ol class="ol"><li class="li"><p>The Font Manager looks for a font of the same font family that is twice the size of the font requested. If it finds that font, the Font Manager computes and returns to QuickDraw factors to scale it down to the requested size.</p></li><li class="li"><p>The Font Manager looks for a font of the same font family that is half the size of the font requested. If it finds that font, the Font Manager computes and returns to QuickDraw factors to scale it up to the requested size.</p></li><li class="li"><p>The Font Manager looks for a font of the same font family that is the next larger size of the font requested. If it finds that font, the Font Manager computes and returns to QuickDraw factors to scale it down to the requested size.</p></li><li class="li"><p>The Font Manager looks for a font of the same font family that is the next smaller size of the font requested. If it finds that font, the Font Manager computes and returns to QuickDraw factors to scale it down to the requested size.</p></li><li class="li"><p>If the Font Manager cannot find any size of that font family, it returns the application font, system font, or a substitute font, as described in <code><a href="fmconcepts.html#//apple_ref/doc/uid/TP30000982-TP30000221-BAJFHIBE">“How the Font Manager Responds to a Font Request”</a></code>. The Font Manager computes and returns to QuickDraw the factors to scale that font to the requested size.</p></li></ol><p>You can disable<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_249"></a> the scaling of bitmapped fonts in your applications by calling the function <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/SetFScaleDisable" target="_top">SetFScaleDisable</a></code>. When the Font Manager cannot find the proper bitmapped font that QuickDraw has requested and font scaling is disabled, the Font Manager looks for a different font to substitute instead of scaling. </p><p>With scaling disabled, the Font Manager looks for a font with characters with the correct width, which may mean that their height is smaller than the requested size. The Font Manger returns this font and returns the scaling factors of 1/1, so that QuickDraw does not scale the bitmaps. QuickDraw draws the smaller font, the widths of which produce the spacing of the requested font. This is faster than font scaling and accurately mirrors the word spacing and line breaks that the document will have when printed, especially if fractional character widths are used. Disabling and enabling of font scaling are described in <span class="content_text"><a href="../fm_tasks/fmtasks.html#//apple_ref/doc/uid/TP30000982-TP30000222-BBCJCHBB">“Using Fractional Glyph Widths and Font Scaling.”</a></span></p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJCJGGE" title="The Scaling Process for an Outline Font"></a><h4>The Scaling Process for an Outline Font</h4><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_250"></a><p>The Font Manager always scales an outline font<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_251"></a> in order to produce a bitmapped glyph in the requested size, regardless of whether font scaling for bitmapped fonts is enabled or disabled. An outline font is considered to be the model for all possible point sizes, so the Font Manager is not scaling it from one “real” size to a “created” size, the way it does for a bitmapped font. It is drawing the outline in the requested point size, so that it can then create the bitmapped glyph.<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_252"></a></p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJBBCAD" title="How the Font Manager Calculates Glyph Widths"></a><h3>How the Font Manager Calculates Glyph Widths</h3><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_253"></a><p>Integer glyph widths are measurements of a glyph’s width that are in whole pixels. Fractional glyph widths are measurements that can include fractions of a pixel. For instance, instead of a glyph measuring exactly 5 pixels across, it may be 5.5 pixels across. Fractional glyph widths allow the sizes of glyphs as stored by the Font Manager to be closer in proportion to the original glyphs of the font than integer widths allow. Fractional widths also make it possible for high-resolution printers to print with better spacing.</p><p>You can enable or disable the use of fractional glyph widths in your application, as described in <span class="content_text"><a href="../fm_tasks/fmtasks.html#//apple_ref/doc/uid/TP30000982-TP30000222-BBCJCHBB">“Using Fractional Glyph Widths and Font Scaling.”</a></span> As a default, fractional widths are disabled to retain compatibility with older applications.</p><p>When using fractional glyph widths, the Font Manager stores the locations of glyphs more accurately than any actual screen can display. Since screen glyphs are made up of whole pixels, QuickDraw cannot draw a glyph that is 5.5 pixels wide. The placement of glyphs on the screen matches the eventual placement of glyphs on a page printed by the high-resolution printer more closely, but the spacing between glyphs and words is uneven as QuickDraw rounds off the fractional parts. The extent of the distortion that is visible on the screen depends on the font point size relative to the resolution of the screen.</p><p>The Font Manager communicates fractional glyph widths to QuickDraw through the <strong>global width table</strong><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_254"></a>, a data structure that is allocated by the system. The Font Manager fills in this table by accessing data from one of several places:</p><ul class="spaceabove"><li class="li"><p>Integer glyph widths are taken from the width/offset table of the bitmapped font resource and the horizontal device metrics table of the outline font resource.</p></li><li class="li"><p>Fractional glyph widths are taken from the glyph-width table in the bitmapped font resource, the horizontal metrics table in the outline font resources, and the family glyph-width table in the font family resource.</p></li></ul><p>The Font Manager looks for width data in the following sequence:</p><ol class="ol"><li class="li"><p>For a bitmapped font, it first looks for a font glyph-width table in the font data structure, which is the record used to represent in memory the data in a bitmapped font resource. For an outline font, it first looks for data in the horizontal metrics table. The width table for bitmapped fonts is described in the section “The Bitmapped Font ('NFNT') Resource” while the width table for outline fonts is described in “The Horizontal Device Metrics Table.” Both sections are in <em>Inside Macintosh: Text</em> located on the Apple developer documentation website.</p></li><li class="li"><p>It the Font Manger does not find this table, it looks in the font family data structure for a family glyph-width table. The font family record is used to represent in memory the data in a font family resource. This is described in “The Family Glyph-Width Table” in <em>Inside Macintosh: Text</em> located on the Apple developer documentation website.</p></li><li class="li"><p>If the Font Manager does not find a family glyph-width table, it derives the global character widths from the integer width contained in the width/offset table in the bitmapped font record as described in “The Bitmapped Font ('NFNT') Resource” in <em>Inside Macintosh: Text</em> located on the Apple developer documentation website.s</p></li></ol><div class="notebox"><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_20" title="Note"></a><p><strong>Note:</strong>&nbsp;If you need to use different widths than those returned by the global width table, you should change the values in the global width table only. You should never change any values in the font resources themselves.</p></div><p>To use fractional glyph widths effectively, your application must get accurate widths when laying out text. Your application should obtain glyph widths either from the QuickDraw function <code><a href="../../../Reference/QuickDraw_Text/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/MeasureText" target="_top">MeasureText</a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_255"></a> or by looking in the global width table. You can get a handle to the global width table by calling the function <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FontMetrics" target="_top">FontMetrics</a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_256"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_257"></a>.<a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_258"></a></p><a name="//apple_ref/doc/uid/TP30000982-TP30000221-BAJCJGFA" title="How the Font Manager Tracks Changes to the Font Database"></a><h3>How the Font Manager Tracks Changes to the Font Database</h3><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_259"></a><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_260"></a><p>The Font Manager uses a database to keep track of available fonts and provides a simple mechanism to track changes to the font database. Any operation that adds, deletes, or modifies one or more font family or font objects triggers an update of a global generation count. Each font family and font object modified during a transaction is tagged with a copy of the generation count. </p><p>You can use Font Manager accessor functions (<code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FMGetGeneration" target="_top">FMGetGeneration</a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_261"></a>, <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FMGetFontGeneration" target="_top">FMGetFontGeneration</a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_262"></a>, <code><a href="../../../Reference/Font_Manager/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/doc/c_ref/FMGetFontFamilyGeneration" target="_top">FMGetFontFamilyGeneration</a></code><a name="//apple_ref/doc/uid/TP30000221-DontLinkElementID_263"></a>) to get the current value of the generation count and the generation tag associated with a font family and font object. Then, you can use these values along with Font Manager enumeration functions to identify the changes in the database.</p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../fm_intro/fmintro.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../fm_tasks/fmtasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2007 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2007-12-11<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Carbon/Conceptual/Managing_FontManager/fm_concepts/fmconcepts.html%3Fid%3DTP30000982-2.1&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Carbon/Conceptual/Managing_FontManager/fm_concepts/fmconcepts.html%3Fid%3DTP30000982-2.1&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Carbon/Conceptual/Managing_FontManager/fm_concepts/fmconcepts.html%3Fid%3DTP30000982-2.1&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
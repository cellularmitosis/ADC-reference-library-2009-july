<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The Size Resource(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING87></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-86.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-88.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-28.html"><B>Chapter 2 - Event Manager</B></A> / <A HREF="Toolbox-43.html"><B>Event Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-86.html"><B>Resource</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING87-0></A>
<H3><A NAME=MARKER-9-485></A>The Size Resource</H3>
 <A NAME=MARKER-16-486></A><A NAME=MARKER-2-307></A><A NAME=MARKER-21-335></A>Every application executing in System 7, as well as every application executing under MultiFinder, should contain a size (<CODE>'SIZE'</CODE>) resource. One of the principal functions <BR>of the <CODE>'SIZE'</CODE> resource is to inform the Operating System about the memory size requirements for the application so that the Operating System can set up an appropriately sized partition for the application. The <CODE>'SIZE'</CODE> resource is also used to indicate certain scheduling options to the Operating System, such as whether the application can accept suspend and resume events. The <CODE>'SIZE'</CODE> resource in System 7 contains additional information indicating whether the application is 32-bit clean, whether it supports stationery documents, whether it uses TextEdit's inline input services, whether the application wishes to receive notification of the termination of <BR>any applications it has launched, and whether the application wishes to receive high- level events.<A NAME=MARKER-2-197></A><P>
 A <CODE>'SIZE'</CODE> resource consists of a 16-bit flags field followed by two 32-bit size fields. The flags field specifies operating characteristics of the application, and the size fields indicate the minimum and preferred partition sizes for the application. The <DFN>minimum partition size </DFN>is the actual limit below which your application will not run. The <DFN>preferred partition size</DFN> is the memory size at which your application can run most effectively and which the Operating System attempts to secure upon launching the application. If that amount of memory is unavailable, the application is placed into the largest contiguous block available, provided that it is larger than the specified minimum size.<A NAME=MARKER-2-299></A><P>
<DL>
<DT><B>Note</B>
<DD>If the amount of available memory is between the minimum and the preferred sizes, the Finder displays a dialog box asking if the user wants to run the application using the amount of memory available. If your application does not have a <CODE>'SIZE'</CODE> resource, it is assigned a default partition size of 512 KB and the Process Manager uses a default value <BR>of <CODE>FALSE</CODE> for all specifications normally defined by constants in the <BR>flags field. <EM>u</EM>   <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
 When you define a <CODE>'SIZE'</CODE> resource, you should give it a resource ID of -1. A user can modify the preferred size in the Finder's information window for your application. If the user does alter the preferred partition size, the Operating System creates a new <CODE>'SIZE'</CODE> resource having resource ID 0.  The Process Manager also creates a new <CODE>'SIZE'</CODE> resource when the user modifies any of the other settings in the resource.<P>
 In system software version 7.1 the user can also modify the minimum size in the Finder's information window for your application. In version 7.1, if the user alters either the minimum or the preferred partition size, the Operating System creates two new <CODE>'SIZE'</CODE> resources, one with resource ID 0 and one with resource ID 1.<P>
 At application launch time, the Process Manager looks for a <CODE>'SIZE'</CODE> resource with ID 0 for the preferred partition size; if this resource is not found, it uses your original <CODE>'SIZE'</CODE> resource with ID -1. In version 7.1, the Process Manager looks for a <CODE>'SIZE'</CODE> resource with ID 0 for the preferred size and looks for a <CODE>'SIZE'</CODE> resource with ID 1 for the minimum size; if these resources are not found, it uses your original <CODE>'SIZE'</CODE> resource with ID -1. <P>
 <A HREF=#MARKER-9-492>Listing 2-19</A> shows the structure of the <CODE>'SIZE'</CODE> resource in Rez format. See <A HREF=Toolbox-39.html#MARKER-9-130>Listing 2-4</A> in <A HREF=Toolbox-39.html#MARKER-9-127>"Creating a Size Resource,"</A> beginning on <A HREF=Toolbox-39.html#MARKER-9-127>page 2-30</A> for a sample <CODE>'SIZE'</CODE> resource for <BR>an application.<A NAME=MARKER-9-336></A><P>
<B>Listing 2-19  <A NAME=MARKER-9-492></A>A Rez template for a <CODE>'SIZE'</CODE> resource</B><P>
<PRE>
type 'SIZE' {
   boolean  reserved;                  /*reserved*/
   boolean  ignoreSuspendResumeEvents, /*ignores suspend-resume events*/
            acceptSuspendResumeEvents; /*accepts suspend-resume events*/
   boolean  reserved;                  /*reserved*/
   boolean  cannotBackground,          /*can't use background null events*/
            canBackground;             /*can use background null events*/
   boolean  needsActivateOnFGSwitch,   /*needs activate event following */
                                       /* major switch*/
            doesActivateOnFGSwitch;    /*activates own windows in */
                                       /* response to OS events*/
   boolean  backgroundAndForeground,   /*app has a user interface*/
            onlyBackground;            /*app has no user interface*/
   boolean  dontGetFrontClicks,        /*don't return mouse events */
                                       /* in front window on resume*/
            getFrontClicks;            /*do return mouse events */
                                       /* in front window on resume*/
   boolean  ignoreAppDiedEvents,       /*applications use this*/
            acceptAppDiedEvents;       /*app launchers use this*/
   boolean  not32BitCompatible,        /*works with 24-bit addr*/
            is32BitCompatible;         /*works with 24- or 32-bit addr*/
   boolean  notHighLevelEventAware,    /*can't use high-level events*/
            isHighLevelEventAware;     /*can use high-level events*/
   boolean  onlyLocalHLEvents,         /*only local high-level events*/
            localAndRemoteHLEvents;    /*also remote high-level events*/
   boolean  notStationeryAware,        /*can't use stationery documents*/
            isStationeryAware;         /*can use stationery documents*/
   boolean  dontUseTextEditServices,   /*can't use inline services*/
            useTextEditServices;       /*can use inline services*/
   boolean  reserved;                  /*reserved*/
   boolean  reserved;                  /*reserved*/
   boolean  reserved;                  /*reserved*/
                                       /*memory sizes are in bytes*/
   unsigned longint;                   /*preferred memory size*/
   unsigned longint;                   /*minimum memory size*/
};
</PRE>
 The nonreserved bits in the flags field have the following meanings:<P>
<DL>
<DT><B>Flag descriptions</B>
<DT><CODE>acceptSuspendResumeEvents</CODE>
<DD> When set, indicates that your application can process suspend and resume events (which the Operating System sends to your application before sending it into the background or when bringing it into the foreground). <A NAME=MARKER-2-170></A>
<DT><B>Note</B>
<DD>If you set the <CODE>acceptSuspendResumeEvents</CODE> flag, you should also set the<CODE> doesActivateOnFGSwitch</CODE> flag. <EM>u</EM>   <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
<DT><CODE>canBackground</CODE>
<DD> When set, indicates that your application wants to receive null event processing time while in the background. If your application has nothing to do in the background, you should not set this flag.<A NAME=MARKER-2-144></A>
<DT><CODE>doesActivateOnFGSwitch</CODE>
<DD> When set, indicates that your application takes responsibility for activating and deactivating any windows in response to a suspend or resume event. If the <CODE>acceptSuspendResumeEvents</CODE> flag is set, if the <CODE>doesActivateOnFGSwitch</CODE> flag is not set, and if your application is suspended, then your application receives an activate event following the suspend event. However, if you set the <CODE>doesActivateOnFGSwitch</CODE> flag, then your application won't receive activate events associated with operating-system events, and you must take care of activation and deactivation when it receives the corresponding suspend or resume event. This means that if a window of your application is frontmost, you should treat <BR>a suspend event as though a deactivate event were received as <BR>well (assuming that both the <CODE>doesActivateOnFGSwitch</CODE> and <CODE>acceptSuspendResumeEvents</CODE> flags are set). For example, you should hide scroll bars, hide any caret, and unhighlight any selected text if your application moves to the background. If you do not set this flag, the Process Manager creates an offscreen window to force the activate and deactivate events to occur.<A NAME=MARKER-2-41></A>
<DT><CODE>onlyBackground</CODE>
<DD> When set, indicates that your application runs only in the background. Usually this is because it does not have a user interface <BR>and cannot run in the foreground.<A NAME=MARKER-2-496></A>
<DT><CODE>getFrontClicks</CODE>
<DD> When set, indicates that your application is to receive the mouse-down and mouse-up events that are used to bring your application into the foreground when the user clicks in your application's frontmost window. Typically, the user simply wants to bring your application into the foreground, so it is usually not desirable to receive the mouse events (which would probably move the insertion point or start drawing immediately, depending on the application). The Finder is one application, however, that has the <CODE>getFrontClicks</CODE> flag set.<A NAME=MARKER-2-171></A>
<DT>
<DD> When the user clicks in the front window of your application and causes a foreground switch, your application receives a resume event. Your application should activate its front window in response to the resume event. In this case if your application's <CODE>getFrontClicks</CODE> flag is not set, your application does not receive the associated mouse event that caused the foreground switch. If your application's <CODE>getFrontClicks</CODE> flag is set, your application does receive the associated mouse event.
<DT>
<DD> Your application always receives the associated mouse event when the user clicks in one of your application's windows other than the front window and causes a foreground switch.
<DT>
<DD> When your application receives a mouse-down event in System 7, your application can examine bit 0 of the <CODE>modifiers</CODE> field of the event record to determine if the mouse-down event caused a foreground switch. This information can be especially useful if your application sets its <CODE>getFrontClicks</CODE> flag. For example, your application can examine bit 0 to determine whether to process the mouse-down event (probably depending on whether the clicked item was visible before the foreground switch).
<DT><CODE>acceptAppDiedEvents</CODE>
<DD> When set, indicates that your application is to be notified whenever an application launched by your application terminates or crashes.  If the Process Manager is available, your application receives this information as an Apple event, the Application Died event. See the chapter "Process Manager" chapter in <I><A HREF="../Processes/Processes-2.html">Inside Macintosh: Processes</A></I> for more information about launching applications and receiving Application Died events.<A NAME=MARKER-2-172></A>
<DT><B> <B>Note</B></B>
<DD>Some early versions of MultiFinder do not send application-died events, and your application should not depend on receiving them if it is running in System 6. These events are provided primarily for use by debuggers.<EM> u</EM>   <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
<DT><CODE>is32BitCompatible</CODE>
<DD> When set, indicates that your application can be run with the 32-bit Memory Manager. You should not set this flag unless you have thoroughly tested your application on a 32-bit system (such as <BR>a Macintosh IIci computer running System 7 in 32-bit mode or under A/UX).<A NAME=MARKER-2-499></A>
<DT><CODE>isHighLevelEventAware</CODE>
<DD> When set, indicates that your application can send and receive high-level events. If this flag is not set, the Event Manager does <BR>not give your application high-level events when you call <CODE>WaitNextEvent</CODE>. There is no way to mask out specific types of high-level events; if this flag is set, your application receives all types of high-level events sent to your application.<A NAME=MARKER-2-174></A>
<DT>
<DD> Your application must support the four required Apple events if you set the <CODE>isHighLevelEventAware</CODE> flag. See <I><A HREF="../IAC/IAC-2.html">Inside Macintosh: Interapplication Communication</A></I> for information that describes how <BR>to respond to the four required Apple events.
<DT><CODE>localAndRemoteHLEvents</CODE>
<DD> When set, indicates that your application is to be visible to applications running on other computers on a network (in addition to applications running on the local computer). If this flag is not <BR>set, your application does not receive high-level events across <BR>a network.<A NAME=MARKER-9-44></A>
<DT><CODE>isStationeryAware</CODE>
<DD> When set, indicates that your application can recognize stationery documents. If this flag is not set and the user opens a stationery document, the Finder duplicates the document and prompts the user for a name for the duplicate document. For information about how your application can use stationery documents, see the chapter "Finder Interface" in this book.<A NAME=MARKER-2-502></A><A NAME=MARKER-2-177></A>
<DT> <CODE>useTextEditServices<BR></CODE>When set, indicates that your application can use the inline text services provided by TextEdit. See <I><A HREF="../Text/Text-2.html">Inside Macintosh: Text</A></I> for information about the inline input capabilities of TextEdit. <A NAME=MARKER-21-179></A><A NAME=MARKER-2-183></A>
<DD>
</DL>
 The numbers you specify as your application's preferred and minimum memory sizes depend on the particular memory requirements of your application. Your application's memory requirements depend on the size of your application's static heap, dynamic heap, A5 world, and stack. (See "Introduction to Memory Management" in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I> for complete details about these areas of your application's partition.)<P>
 The static heap size includes objects that are always present during the execution of the application--for example, code segments, Toolbox data structures for window records, and so on. <P>
 Dynamic heap requirements depend on how many objects are created on a per- document basis (which may vary in size proportionally with the document itself) <BR>and the number of objects that are required for specific commands or functions. <P>
 The size of the A5 world depends on the amount of global data and the number of intersegment jumps the application contains. <P>
 Finally, the stack contains variables, return addresses, and temporary information. The application stack size varies among computers, so you should base your values for the stack size according to the stack size required on a Macintosh Plus (8 KB). The Process Manager automatically adjusts your requested amount of memory to compensate for the different stack sizes on different machines. For example, if you request 512 KB, more stack space (approximately 16 KB) will be allocated on machines with larger default stack sizes. <A NAME=MARKER-2-186></A> <A NAME=MARKER-9-257></A><A NAME=MARKER-9-309></A><A NAME=MARKER-2-306></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-86.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-88.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

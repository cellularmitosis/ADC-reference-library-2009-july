<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>OpenCPicture (IM: Im)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING344></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!--end of header -->

<center>
<A HREF="QuickDraw-343.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-345.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="QuickDraw-2.html"><B>Imaging With QuickDraw</B></A> / <BR><DD><A HREF="QuickDraw-332.html"><B>Chapter 7 - Pictures</B></A> / <A HREF="QuickDraw-335.html"><B>Pictures Reference</B></A><BR><DL><DD><A HREF="QuickDraw-342.html"><B>QuickDraw and Picture Utilities Routines</B></A> / <A HREF="QuickDraw-343.html"><B>Creating and Disposing of Pictures</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING344-0></A>
<H3><A NAME=MARKER-9-169></A>OpenCPicture</H3>
 <A NAME=MARKER-11-171></A><A NAME=MARKER-11-171></A><A NAME=MARKER-2-489></A><A NAME=MARKER-2-510></A>To begin defining a picture in extended version 2 format, use the <CODE>OpenCPicture</CODE> function.<P>
<PRE>
FUNCTION OpenCPicture (newHeader: OpenCPicParams): PicHandle;
</PRE>
<DL>
<DT><CODE>newHeader</CODE>
<DD> An <CODE>OpenCPicParams</CODE> record, which is defined as follows (see <A HREF=QuickDraw-338.html#MARKER-9-111>page 7-28</A> for a description of the <CODE>OpenCPicParams</CODE> data type):
</DL>
<PRE>
            TYPE OpenCPicParams = 
            RECORD
               srcRect:    Rect;    {optimal bounding rectangle }
                                    { for displaying picture at }
                                    { resolution indicated in }
                                    { hRes, vRes fields}
               hRes:       Fixed;   {best horizontal resolution; }
                                    { $00480000 specifies 72 dpi}
               vRes:       Fixed;   {best vertical resolution; }
                                    { $00480000 specifies 72 dpi}
               version:    Integer; {set to -2}
               reserved1:  Integer; {reserved; set to 0}
               reserved2:  LongInt; {reserved; set to 0}
            END;
</PRE>
<A NAME=HEADING344-5></A>
<H5>DESCRIPTION</H5>
 The <CODE>OpenCPicture</CODE> function returns a handle to a new <CODE>Picture</CODE> record (described on <A HREF=QuickDraw-337.html#MARKER-9-102>page 7-26</A>). Use the <CODE>OpenCPicture</CODE> function to begin defining a picture; <CODE>OpenCPicture</CODE> collects your subsequent drawing commands in this record. When defining a picture, you can use all other QuickDraw drawing routines described in this book, with the exception of <CODE>CopyMask</CODE>, <CODE>CopyDeepMask</CODE>, <CODE>SeedFill</CODE>, <CODE>SeedCFill</CODE>, <CODE>CalcMask</CODE>, and <CODE>CalcCMask</CODE>. (Nor can you use the <CODE>PlotCIcon</CODE> procedure, described in <I><A HREF="../MoreToolbox/MoreToolbox-2.html">Inside Macintosh: More Macintosh Toolbox</A></I>.) <P>
 You can also use the <CODE>PicComment</CODE> procedure (described on <A HREF=QuickDraw-346.html#MARKER-9-182>page 7-39</A>) to include picture comments in your picture definition.<P>
 The <CODE>OpenCPicture</CODE> function creates pictures in the extended version 2 format. This format permits your application to specify resolutions when creating images. <P>
 Use the <CODE>OpenCPicParams</CODE> record you pass in the <CODE>newHeader</CODE> parameter to specify the horizontal and vertical resolution for the picture, and specify an optimal bounding rectangle for displaying the picture at this resolution. When you later call the <CODE>DrawPicture</CODE> procedure (described on <A HREF=QuickDraw-350.html#MARKER-9-202>page 7-43</A>) to play back the saved picture, you supply a destination rectangle, and <CODE>DrawPicture</CODE> scales the picture so that it is completely aligned with the destination rectangle. To display a picture at a resolution other than that at which it was created, your application should compute an appropriate destination rectangle by scaling its width and height by the following factor:<P>
 scale factor = destination resolution / source resolution<P>
 For example, if a picture was created at 300 dpi and you want to display it at 75 dpi, then your application should compute the destination rectangle width and height as 1/4 of those of the picture's bounding rectangle.<P>
 The <CODE>OpenCPicture</CODE> function calls the <CODE>HidePen</CODE> procedure, so no drawing occurs on the screen while the picture is open (unless you call the <CODE>ShowPen</CODE> procedure just after <CODE>OpenCPicture</CODE>, or you called <CODE>ShowPen</CODE> previously without balancing it by a call to <CODE>HidePen</CODE>).<P>
 Use the handle returned by <CODE>OpenCPicture</CODE> when referring to the picture in subsequent routines, such as the <CODE>DrawPicture</CODE> procedure.<P>
 After defining the picture, close it by using the <CODE>ClosePicture</CODE> procedure, described on <A HREF=QuickDraw-347.html#MARKER-9-189>page 7-41</A>. To draw the picture, use the <CODE>DrawPicture</CODE> procedure, described on <A HREF=QuickDraw-350.html#MARKER-9-202>page 7-43</A>.<P>
 After creating the picture, your application can use the <CODE>GetPictInfo</CODE> function (described on <A HREF=QuickDraw-353.html#MARKER-9-226>page 7-46</A>) to gather information about it. The <CODE>PictInfo</CODE> record (described on <A HREF=QuickDraw-341.html#MARKER-9-137>page 7-31</A>) returned by <CODE>GetPictInfo</CODE> returns the picture's resolution and optimal bounding rectangle.<P>
<A NAME=HEADING344-16></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 When creating a picture, you should generally use the <CODE>ClosePicture</CODE> procedure to finish it before you open the Printing Manager with the <CODE>PrOpen</CODE> procedure. There are two main reasons for this. First, you should allow the printing driver to use as much memory as possible. Second, the Printing Manager creates its own type of graphics port--one that replaces the standard QuickDraw drawing operations stored in the <CODE>grafProcs</CODE> field of a <CODE>CGrafPort</CODE> or <CODE>GrafPort</CODE> record; to avoid unexpected results when creating a picture, you should draw into a graphics port created with QuickDraw instead of drawing into a printing port created by the Printing Manager. <P>
 After calling <CODE>OpenCPicture</CODE>, be sure to finish your picture definition by calling <CODE>ClosePicture</CODE> before you call <CODE>OpenCPicture</CODE> again. You cannot nest calls to <CODE>OpenCPicture</CODE>.<P>
 Always use the <CODE>ClipRect</CODE> procedure to specify a clipping region appropriate for your picture before you call <CODE>OpenCPicture</CODE>. If you do not use <CODE>ClipRect</CODE> to specify a clipping region, <CODE>OpenCPicture</CODE> uses the clipping region specified in the current graphics port. If the clipping region is very large (as it is when a graphics port is initialized) and you scale the picture when drawing it, the clipping region can become invalid when <CODE>DrawPicture</CODE> scales the clipping region--in which case, your picture will not be drawn. On the other hand, if the graphics port specifies a small clipping region, part of your drawing may be clipped when you draw it. Setting a clipping region equal to the port rectangle of the current graphics port, as shown in <A HREF=QuickDraw-334.html#MARKER-9-44>Listing 7-1 on page 7-10</A>, always sets a valid clipping region.<P>
 The <CODE>OpenCPicture</CODE> function may move or purge memory.<P>
<A NAME=HEADING344-21></A>
<H5>SEE ALSO</H5>
 The <CODE>PrOpen</CODE> procedure is described in the chapter "Printing Manager" in this book. The <CODE>ClipRect</CODE> procedure is described in the chapter "Basic QuickDraw" in this book. The <CODE>ShowPen</CODE> and <CODE>HidePen</CODE> procedures are described in the chapter "QuickDraw Drawing" in this book.<P>
 <A HREF=QuickDraw-334.html#MARKER-9-44>Listing 7-1 on page 7-10</A> illustrates the use of the <CODE>OpenCPicture</CODE> function.<A NAME=MARKER-9-511></A><A NAME=MARKER-2-175></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="QuickDraw-343.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="QuickDraw-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="QuickDraw-476.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="QuickDraw-345.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="QuickDraw-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

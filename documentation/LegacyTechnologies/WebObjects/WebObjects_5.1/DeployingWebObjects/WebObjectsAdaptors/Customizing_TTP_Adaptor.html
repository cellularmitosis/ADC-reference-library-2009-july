<HTML>		<HEAD>		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">		<meta name="Copyright" content="Copyright 2001 Apple Computer, Inc. All Rights Reserved.">        <title>Customizing the HTTP Adaptor</title>		</HEAD>	<BODY bgcolor="#ffffff"><!-- start of header --><!--#include virtual="/includes/framesetheader" --><!-- end of header --><!-- start of path --><table cellspacing=0 border=0 width=600 valign="left"><tr><td scope="row"><font face="Geneva,Helvetica,Arial" size="1"><b>PATH<spacer type="horizontal" size="5">&nbsp;</b><a href="../../../index.html">Documentation</a> <b>></b> <a href="../../webobjects.html" target="_top">WebObjects</a></font></td></tr></table><br><!-- end of path --><a href="The_WebObje_mation_Page.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="../DeploymentElements/index.html" target="_top"><img src="../images/next.gif" border="0"></a>&nbsp;<br><!-- apple_doc: pageHeadingStart --><a name = "BBCDGJGH"></a><h2><font face="Lucida Grande,Helvetica,Arial">Customizing the HTTP Adaptor</font></h2><!-- apple_doc: pageHeadingEnd --><p>For the most part, you shouldn't need to modify the defaultvalues of settings in the configuration file. However, if you wantto change the way the HTTP adaptor obtains your site's state information,for example, you'll need to perform some of the procedures explainedhere.</p><p>These are the tasks explained in this section:</p><ul><li> <a href="#BBCCCFFI">"Setting the Multicast Address and Port"</a></font></li><li> <a href="#BBCCGDFA">"Setting the Host List"</a></font></li><li> <a href="#BBCCEFGD">"Setting the Name of the HTTP Adaptor Configuration File"</a></font></li><li> <a href="#BBCBEFIC">"Setting Access to the WebObjects Adaptor Information Page"</a></font></li><li> <a href="#BBCBHEGI">"Setting an Alias for cgi-bin in the WebObjects URL"</a></font></li><li> <a href="#BBCFEDEH">"Setting the Document Root Path of the HTTP server"</a></font></li></ul><br><a name = "BBCCCFFI"></a><h3><font face="Lucida Grande,Helvetica,Arial">Setting the Multicast Addressand Port</font></h3><p>The following list explains how to set the multicast address,port, and configuration refresh interval (in seconds) in the supportedHTTP adaptors. The default values for each of these properties are <code>239.128.14.2</code>, <code>1085</code>,and <code>10</code> respectively.The adaptor uses the configuration interval to determine the amountof time that passes between state discoveries on your site. Thehost-discovery process occurs 10 times less frequently than thetime indicated by the configuration refresh interval. With the configurationrefresh interval set to <code>10</code>,the discovery process occurs every 100 seconds.</p><ul><li><b>Apache</b> Setthe value of the <code>WebObjectsConfig</code> variablein the <code>apache.conf </code>fileto the desired values, using the format shown below:<pre>WebObjectsConfig webobjects://&lt;address&gt;:&lt;port&gt; &lt;configuration_interval&gt;</pre></font></li><li><b>ISAPI</b> Add two keys to the Registry, <code>CONF_URL</code> and <code>CONF_INTERVAL</code>,choose <code>REG_SZ</code> as theirdata type, and set their values as follows:<pre>\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\CONF_URL  webobjects://&lt;address&gt;:&lt;port&gt;\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\CONF_INTERVAL  &lt;configuration_interval&gt;</pre></font></li><li><b>NSAPI</b> Add the following line to the <code>magnus.conf</code> file:<pre>Init fn=&quot;WebObjects_init&quot; root=&quot;/opt/ns-home/docs&quot; config=&quot;webobjects:// &lt;address&gt;:&lt;port&gt; confinterval=&quot;&lt;configuration_interval&gt;&quot;</pre></font></li><li><b>CGI</b> Set the <code>WO_CONFIG_URL</code> environmentvariable to <code>webobjects://&lt;address&gt;:&lt;port&gt;</code>. Makesure your HTTP server is configured to pass the variable to theadaptor (consult your HTTP server's documentation for instructions).</font></li></ul><br><a name = "BBCCGDFA"></a><h3><font face="Lucida Grande,Helvetica,Arial">Setting the Host List</font></h3><p>The following list explains how to set a host list for a sitewith two hosts, <code>host1</code> and <code>host2</code>, inthe supported adaptors with a configuration interval of <code>10</code> (theconfiguration interval cannot be set in the CGI adaptor). </p><ul><li><b>Apache</b> Setthe <code>WebObjectsConfig</code> variablein the <code>apache.conf</code> fileto the desired list of hosts. By default it's set to <code>http://localhost:108510</code> (the <code>10</code> isthe configuration refresh interval). Separate each host with a comma,as shown in the following example:<pre>WebObjectsConfig http://host1:1085,http://host2:1085 10</pre></font></li><li><b>ISAPI</b> Add two keys to the Registry, <code>CONF_URL</code> and <code>CONF_INTERVAL</code>,choose <code>REG_SZ</code> as theirdata type, and set their values as follows:<pre>\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\CONF_URL  http://host1:1085,http://host2:1085\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\CONF_INTERVAL  10</pre></font></li><li><b>NSAPI</b> Set the <tt>WebObjects_init</tt> function'sarguments in the <code>magnus.conf</code> fileas follows:<pre>Init fn=&quot;WebObjects_init&quot; root=&quot;/opt/ns-home/docs&quot; config=&quot;http:// host1:1085,http://host2:1085&quot; confinterval=&quot;10&quot;</pre></font></li><li><b>CGI</b> Set the <code>WO_CONFIG_URL</code> environmentvariable to <code>http://host1:1085,http://host:1085</code>.Make sure the HTTP server is configured to pass the variable tothe adaptor (consult your HTTP server's documentation for instructions).</font></li></ul><br><a name = "BBCCEFGD"></a><h3><font face="Lucida Grande,Helvetica,Arial">Setting the Name of the HTTPAdaptor Configuration File</font></h3><ul><li><b>Apache</b> Setthe value of <code>WebObjectsConfig</code> variablein the <code>apache.conf</code> fileto the path of the adaptor configuration file.<pre>WebObjectsConfig file://&lt;path-to-an-xml-config-file&gt; 10</pre></font></li><li><b>ISAPI</b> Add the <code>CONF_URL</code> keyto the Registry, choose <code>REG_SZ</code> asits data type, and set the adaptor configuration file path as itsvalue, as the following example shows:<pre>\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\CONF_URL  file://&lt;path-to-an-xml-config-file&gt;</pre></font></li><li><b>NSAPI</b> Set the arguments of the <code>WebObjects_init</code> functionin the <code>magnus.conf</code> fileas follows:<pre>Init fn=&quot;WebObjects_init&quot; root=&quot;/opt/ns-home/docs&quot; config=&quot;file:// &lt;path-to-an-xml-config-file&gt;&quot;</pre></font></li><li><b>CGI</b> Set the <code>WO_CONFIG_URL</code> environmentvariable to <code>file://&lt;path-to-an-xml-config-file&gt;</code>.Make sure the HTTP server is configured to pass the variable tothe adaptor (consult your HTTP server's documentation for instructions).</font></li></ul><br><a name = "BBCBEFIC"></a><h3><font face="Lucida Grande,Helvetica,Arial">Setting Access to the WebObjectsAdaptor Information Page</font></h3><p>You can provide access to the WebObjects adaptor informationpage to a specific user or to everyone. To provide access to a singleuser, you set the values of the <code>username</code> and <code>password</code> properties.To provide public access, set the <code>username</code> attributeto <code>public</code>. The followinglist explains how to provide access to the information page to auser named Joe in the supported adaptors. For the changes to takeeffect, you need to restart the HTTP server.</p><ul><li><b>Apache</b> Addthe following lines to the <tt>apache.conf</tt> file,located in the <tt>/System/Library/WebObjects/Adaptor/Apache</tt> directory:<pre>WebObjectsAdminUsername joeWebObjectsAdminPassword secret</pre></font></li><li><b>ISAPI</b> Add two keys to the Registry, <code>WOUSERNAME</code> and <code>WOPASSWORD</code>,choose <code>REG_SZ</code> as their datatype, and set their values as follows:<pre>\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\WOUSERNAME  joe\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\WOPASSWORD  secret</pre></font></li><li><b>NSAPI</b> Add the following line to <code>magnus.conf</code>:<pre>Init fn=&quot;WebObjects_init&quot; root=&quot;/opt/ns-home/docs&quot; config=&quot;webobjects:// &lt;address&gt;:&lt;port&gt;&quot; username=&quot;joe&quot; password=&quot;secret&quot;</pre></font></li><li><b>CGI</b> Set the <code>WO_ADAPTOR_INFO_USERNAME</code> and <code>WO_ADAPTOR_INFO_PASSWORD</code> environment variablesto the appropriate values. Make sure the HTTP server is configuredto pass the variables to the adaptor (consult your HTTP server'sdocumentation for instructions).</font></li></ul><br><a name = "BBCBHEGI"></a><h3><font face="Lucida Grande,Helvetica,Arial">Setting an Alias for cgi-binin the WebObjects URL</font></h3><p>The following list explains how to change the <code>cgi-bin</code> partof the URL used to connect to an application instance to <code>Store</code> inthe Apache, NSAPI, and CGI adaptors:</p><ul><li><b>Apache</b> Inthe <code>apache.conf</code> file,change the line<pre>WebObjectsAlias /cgi-bin/WebObjects</pre><p>to</p><pre>WebObjectsAlias /Store/WebObjects</pre></font></li><li><b>NSAPI</b> In the <code>magnus.conf</code> file,change the lines<pre>NameTrans from=&quot;/cgi-bin/WebObjects&quot; fn=&quot;WebObjectsNameTrans&quot; name=&quot;webobjects&quot;NameTrans from=&quot;/cgi-bin&quot; fn=&quot;pfx2dir&quot; dir=&quot;/opt/ns-home/cgi-bin&quot; name=&quot;cgi&quot;</pre><p>to</p><pre>NameTrans from=&quot;/Store/WebObjects&quot; fn=&quot;WebObjectsNameTrans&quot; name=&quot;webobjects&quot;NameTrans from=&quot;/Store&quot; fn=&quot;pfx2dir&quot; dir=&quot;/opt/ns-home/cgi-bin&quot; name=&quot;cgi&quot;</pre></font></li></ul><br><a name = "BBCFEDEH"></a><h3><font face="Lucida Grande,Helvetica,Arial">Setting the Document Root Pathof the HTTP server</font></h3><ul><li><b>Apache</b> Inthe <code>apache.conf</code> file,change the line<pre>WebObjectsDocumentRoot /Library/WebServer/Documents</pre><p>to</p><pre>WebObjectsDocumentRoot &lt;document-root-path&gt;</pre></font></li><li><b>ISAPI</b> Add the following Registry entry:<pre>\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Apple\\WebObjects\\Configuration\\DOCUMENT_ROOT  &lt;document-root-path&gt;</pre></font></li><li><b>NSAPI</b> In the <code>magnus.conf</code> file,change the value of the <code>root</code> variablein every line that defines it to the desired path. For example,the line<pre>Init fn=&quot;WebObjects_init&quot; root=&quot;/opt/ns-home/docs&quot; config=&quot;http:// localhost:1085&quot;</pre><p>needsto be changed to</p><pre>Init fn=&quot;WebObjects_init&quot; root=&quot;&lt;document-root-path&gt;&quot; config=&quot;http:// localhost:1085&quot;</pre></font></li><li><b>CGI</b> Set the value of the <code>CGI_DOCUMENT_ROOT</code> environmentvariable to the desired path. Make sure that your HTTP server isconfigured to pass the variable to the adaptor (consult your HTTPserver's documentation for instructions).</font></li></ul><br><a href="The_WebObje_mation_Page.html" target="content"><img src="../images/previous.gif" border="0"></a><a href="../DeploymentElements/index.html" target="_top"><img src="../images/next.gif" border="0"></a>&nbsp;<br><br><p><hr><font face="Geneva,Helvetica,Arial" size="2">&#169; 2002 Apple Computer, Inc. (Last Updated January 8, 2002)</font></p><!-- start of footer --><!--#include virtual="/includes/framesetfooter" --><!-- end of footer --></body></html>
<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>The System Error Alert Table Resource (IM: U)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING36></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="OSUtilities-35.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="OSUtilities-37.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="OSUtilities-2.html"><B>Operating System Utilities</B></A> / <BR><DD><A HREF="OSUtilities-28.html"><B>Chapter 2 - System Error Handler</B></A> / <A HREF="OSUtilities-30.html"><B>System Error Handler Reference</B></A><BR><DL><DD><A HREF="OSUtilities-35.html"><B>Resources</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING36-0></A>
<H3><A NAME=MARKER-9-76></A><A NAME=MARKER-9-78></A>The System Error Alert Table Resource<A NAME=MARKER-9-85></A></H3>
 The System Error Handler stores system error alert tables in resources with resource type <CODE>'DSAT'</CODE>. During system startup, the system error alert table resource with resource ID 0 is loaded. This resource describes the "Welcome to Macintosh" alert box. Immediately thereafter, that table is disposed of and replaced with the system error alert table resource with resource ID 2.<A NAME=MARKER-2-58></A><A NAME=MARKER-2-92></A><P>
<DL>
<DT><B>Note</B>
<DD>In early versions of system software the system error alert table was called the "user alert table" and its resource type was of type <CODE>'INIT'</CODE>.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/triangle.gif">
</DL>
 A system error alert table consists of a group of alert definitions, text definitions, icon definitions, procedure definitions, button definitions, and button-title definitions. These definitions provide information about the alert box as a whole: the text, icon, buttons, and titles for those buttons to be displayed in the alert box, and the procedures to be executed. The first word (2 bytes) of any definition contains a definition ID, which must be unique across all definitions. Some definitions reference other definitions. For example, a button definition includes a word to reference a button-title definition and a word to reference a procedure definition. This section describes the format of the system error alert table as a whole and of the various types of definitions.<P>
 A system error alert table's first word indicates the number of entries in the table. Following these 2 bytes is a 14-byte alert definition that defines an alert box to be used for all system errors that do not have their own alert box definitions. This alert box definition is followed by additional definitions, which need not be in any particular order. For example, a system alert table could contain all alert box definitions before any other definitions, but this might not be the case. <A HREF=#MARKER-9-82>Figure 2-5</A> illustrates the overall structure of a system error alert table.<A NAME=MARKER-2-1></A><P>
<B>Figure 2-5  <A NAME=MARKER-9-82></A>The structure of a system error alert table</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/ERR-L-01.jpg"><P>
 All definitions in a system error alert table contain a 4-byte definition header. The first word of the header is the unique definition ID for that definition, which corresponds to the appropriate system error for alert box definitions, and the second word is a number indicating the length in bytes of the remainder of the definition. <A NAME=MARKER-9-76></A><P>
 <A HREF=#MARKER-9-85>Figure 2-6</A> shows the format of an alert definition. <A NAME=MARKER-9-67></A><P>
<B>Figure 2-6  <A NAME=MARKER-9-85></A>The structure of an alert definition</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/ERR-L-02.jpg"><P>
 Following the definition header, the alert definition consists of five word-length fields containing the definition IDs for a primary text definition, a secondary text definition, an icon definition, a procedure definition, and a button definition. For each alert definition, two button definitions must be defined with consecutive numbers. The lower of these numbers is specified in the button definition ID field. When an application specifies a resume procedure, the <CODE>SysError</CODE> procedure uses the button definition with the higher ID.<P>
 A definition ID of 0 is used for any field to which no definition corresponds. For example, if a system error alert box contains only one text string, the field for the secondary text definition ID contains 0. A button definition ID of 0 indicates that <CODE>SysError</CODE> should return to the procedure that called it; this is used for disk-insertion alerts. If the procedure definition ID is 0, <CODE>SysError</CODE> does not invoke an alert procedure (which should not be confused with a resume procedure). <A NAME=MARKER-2-68></A><P>
 A text definition specifies the text that is to be drawn in the system error alert box. Because an alert box can have up to two lines of text, the alert definition allows for two text definitions. The primary text definition specifies the first line of text in the system error alert box and the secondary text definition specifies the second line of text. <BR><A HREF=#MARKER-9-88>Figure 2-7</A> illustrates the format of a text definition.<A NAME=MARKER-2-95></A><P>
<B>Figure 2-7  <A NAME=MARKER-9-88></A>The structure of a text definition</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/ERR-L-06.jpg"><P>
 Following the definition header, a text definition includes a 4-byte field indicating the point, specified in global coordinates, at which the text is to be drawn. Following this field is a variable-length field consisting of the text to be drawn. The System Error Handler responds to the slash (/) character by advancing to the beginning of the next line. This mechanism allows a single text definition to consist of a multiline message. The last byte of the definition must contain <CODE>0</CODE> to indicate the end of the text. <A NAME=MARKER-2-71></A><P>
 An icon definition specifies what icon the System Error Handler draws in the system error alert box, where to draw it, whether the icon is black-and-white or color, the bit depth of the icon, and other data as necessary. <A HREF=#MARKER-9-91>Figure 2-8</A> shows the format of an icon definition.<A NAME=MARKER-2-72></A><P>
<B>Figure 2-8  <A NAME=MARKER-9-91></A>The structure of an icon definition</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/ERR-L-07.jpg"><P>
 Following the definition header, the icon definition contains an 8-byte field indicating the rectangle, specified in global coordinates, in which to draw the icon. The following 128 bytes consist of icon data. <A NAME=MARKER-2-73></A><P>
 An alert definition uses a procedure definition to specify a procedure to be executed whenever the <CODE>SysError</CODE> procedure draws a system error alert box. Button definitions (described next) use procedure definitions to specify an action to be taken when the user presses a particular button. <A HREF=#MARKER-9-93>Figure 2-9</A> illustrates the format of a procedure definition.<P>
<B>Figure 2-9  <A NAME=MARKER-9-93></A>The structure of a procedure definition</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/ERR-L-03.jpg"><P>
 After the definition header, a procedure definition consists only of a variable-length field that contains the procedure's code. The procedure takes no parameters.<P>
 A button definition specifies the buttons that the System Error Handler should draw in the system error alert box. A button definition may reference 0, 1, 2, or more buttons. <A HREF=#MARKER-9-95>Figure 2-10</A> shows the format of a button definition.<A NAME=MARKER-2-77></A><P>
<B>Figure 2-10  <A NAME=MARKER-9-95></A>The structure of a button definition</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/ERR-L-04.jpg"><P>
 Following the definition header is a word indicating the number of buttons in the button definition. Following this is 12 bytes for each defined button. Each of these 12-byte groups consists of a word containing the button-title definition ID for the text within the button, 8 bytes containing a rectangle, in global coordinates, that specifies the location of the button, and a word containing the procedure definition ID for the procedure to be executed when the button is pressed. <A NAME=MARKER-2-78></A><P>
 A button-title definition specifies the text to be drawn within a button. <A HREF=#MARKER-9-104>Figure 2-11</A> shows a button-title definition.<A NAME=MARKER-2-79></A> Following the definition header of the button-title definition are the actual characters in the string.<A NAME=MARKER-2-41></A><A NAME=MARKER-2-9></A><A NAME=MARKER-2-2></A><A NAME=MARKER-2-4></A><A NAME=MARKER-9-58></A><A NAME=MARKER-2-8></A><P>
<B>Figure 2-11  <A NAME=MARKER-9-104></A>The structure of a button-title definition</B><P>
<IMG ALIGN = BOTTOM SRC = "graphics/ERR-L-05.jpg"><P>



</BLOCKQUOTE>
<HR>
<center>
<A HREF="OSUtilities-35.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="OSUtilities-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="OSUtilities-222.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="OSUtilities-37.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="OSUtilities-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Certificate, Key, and Trust Services Programming Guide: Certificate, Key, and Trust Services Concepts</title>
	<meta id="Generator" name="Generator" content="Gutenberg"/>
	<meta id="GeneratorVersion" name="GeneratorVersion" content="v132"/>
	<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
	<meta id="Copyright" name="Copyright" content="Copyright 2009 Apple Inc. All Rights Reserved."/>
	<meta id="IndexTitle" name="IndexTitle" content="Certificate, Key, and Trust Services Concepts"/>
	<meta id="xcode-display" name="xcode-display" content="render"/>
	<meta id="toc-file" name="toc-file" content="../toc.html"/>
	<meta id="RESOURCES" content="../../../../Resources" />
	
	<link rel="stylesheet" type="text/css" href="../../../../Resources/CSS/frameset_styles.css"/>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/prototype.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/lib/scriptaculous.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/page.js"></script>
	<script language="JavaScript" type="text/javascript" src="../../../../Resources/JavaScript/pedia.js"></script>
	<!--[if lte IE 6]>
		<style type="text/css">
			/*<![CDATA[*/ 
			html {overflow-x:auto; overflow-y:hidden;  }
			/*]]>*/
		</style>
	<![endif]-->
</head>    
<body bgcolor="#ffffff" onload="initialize_page();"><a name="//apple_ref/doc/uid/TP40001358-CH204" title="Certificate, Key, and Trust Services Concepts"></a>
    <noscript>
    <div id="tocMenu">
        <iframe id="toc_content" name="toc_content" SRC="../toc.html" width="210" height="100%" align="left" frameborder="0">This document set is best viewed in a browser that supports iFrames.</iframe>
    </div>
    </noscript>
    <div id="bodyText">
        <a name="top"></a>
        <div class="hideOnPrint hideInXcode">
        <!-- start of header -->
        <!--#include virtual="/includes/framesetheader" -->
        <!-- end of header -->
        </div>
        
        <!-- start of path -->
<div class="breadcrumb hideOnPrint hideInXcode"><a href="http://developer.apple.com/" target="_top">ADC Home</a> &gt; <a href="../../../../../referencelibrary/index.html#//apple_ref/doc/uid/TP30000943" target="_top">Reference Library</a> &gt; <a href="../../../../index.html#//apple_ref/doc/uid/TP30000440" target="_top">Guides</a> &gt; <a href="../../../index.html#//apple_ref/doc/uid/TP30000440-TP30000434" target="_top">Security</a> &gt; <a href="../../../Authentication-date.html#//apple_ref/doc/uid/TP30000440-TP30000434-TP30000487" target="_top">Authentication</a> &gt; <a href="../01introduction/introduction.html#//apple_ref/doc/uid/TP40001358-CH203-DontLinkElementID_10">Certificate, Key, and Trust Services Programming Guide</a> &gt; </div><br class="hideInXcode"/><!-- end of path -->
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../01introduction/introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../iPhone_Tasks/iPhone_Tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCUpperSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" hideText="Hide TOC" showText="Show TOC" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <hr />
        
        
        <a name="//apple_ref/doc/uid/TP40001358-CH204-DontLinkElementID_11" title="Certificate, Key, and Trust Services Concepts"></a><h1><a name="//apple_ref/doc/uid/TP40001358-CH204-TP9" title="Certificate, Key, and Trust Services Concepts"></a>Certificate, Key, and Trust Services Concepts</h1><p>Certificate, Key, and Trust Services is a collection of functions and data structures used to authenticate and authorize users and processes using keys and certificates. Because in Mac OS X and iPhone OS, certificates and keys are stored on a keychain, many of the functions in this API must be used in conjunction with functions in the Keychain Services API.</p>
<p>This chapter discusses some of the concepts you need to understand in order to use the Certificate, Key, and Trust Services API. In addition, keys and certificates are defined and discussed in <em><a href="../../Security_Overview/index.html#//apple_ref/doc/uid/TP30000976" target="_top">Security Overview</a></em>. </p>


<!-- This template is being used for both PDF and HTML. -->

    
    <h4>In this section:</h4>
    
    
    <p class="blockquote">
    
        
			
			
				<a href="concepts.html#//apple_ref/doc/uid/TP40001358-CH204-DontLinkElementID_2">Certificates, Keys, and Identities</a>
				
			<br/>
			
        
			
			
				<a href="concepts.html#//apple_ref/doc/uid/TP40001358-CH204-DontLinkElementID_3">Certificate, Key, and Trust Services and CDSA</a>
				
			<br/>
			
        
			
			
				<a href="concepts.html#//apple_ref/doc/uid/TP40001358-CH204-DontLinkElementID_4">Policies and Trust</a>
				
			<br/>
			
        

    </p><br/>

<a name="//apple_ref/doc/uid/TP40001358-CH204-DontLinkElementID_2" title="Certificates, Keys, and Identities"></a><h2>Certificates, Keys, and Identities</h2>
<p>A <strong>digital certificate</strong> is a collection of data used to verify the identity of the holder or sender of the certificate. For example, a certificate contains such information as: </p>
<ul class="ul"><li class="li"><p>Certificate issuer</p></li>
<li class="li"><p>Certificate holder</p></li>
<li class="li"><p>Validity period (the certificate is not valid before or after this period)</p></li>
<li class="li"><p>Public key of the owner of the certificate</p></li>
<li class="li"><p><strong>Certificate extensions</strong>, which contain additional information such as allowable uses for the private key associated with the certificate</p></li>
<li class="li"><p>Digital signature from the certification authority to ensure that the certificate has not been altered and to indicate the identity of the issuer</p></li></ul>
<p>Each certificate is verified through the use of another certificate, creating a chain of certificates that ends with the <strong>root certificate</strong>. The issuer of a certificate is called a <strong>certification authority</strong> (CA). The owner of the root certificate is the root certification authority. See <em><a href="../../Security_Overview/index.html#//apple_ref/doc/uid/TP30000976" target="_top">Security Overview</a></em> for more details about the structure and contents of a certificate.</p>
<p>Every public key is half of a public-private key pair. As implied by the names, the <strong>public key</strong> can be obtained by anyone, but the <strong>private key</strong> is kept secret by the owner of the key. Data encrypted with the private key can be decrypted only with the public key, and <em>vice versa</em>. In order to both encrypt and decrypt data, therefore, a given user must have both a public key (normally embedded in a certificate) and a private key. The combination of a certificate and its associated private key is known as an <strong>identity</strong>. Certificate, Key, and Trust Services includes functions to find the certificate or key associated with an identity and to find an identity when given search criteria. The search criteria include the permitted uses for the key.</p>
<p>In Mac OS X and iPhone OS, keys and certificates are stored on a <strong>keychain</strong>, a database that provides secure (that is, encrypted) storage for private keys and other secrets as well as unencrypted storage for other security-related data. The Certificate, Key, and Trust Services functions that search for keys, certificates, and identities all use the keychain for this purpose.  On a Mac OS X system, you can use the Keychain Access utility to see the contents of the keychain and to examine the contents of certificates.</p>
<a name="//apple_ref/doc/uid/TP40001358-CH204-DontLinkElementID_3" title="Certificate, Key, and Trust Services and CDSA"></a><h2>Certificate, Key, and Trust Services and CDSA</h2>
<p>In Mac OS X, Certificate, Key, and Trust services and other security APIs are built on the open-source Common Data Security Architecture (CDSA) and its programming interface, Common Security Services Manager (CSSM). </p>
<p>The Certificate, Key, and Trust Services API provides functions to perform most of the operations needed by applications, including generating key pairs, retrieving the certificate or private key associated with an identity, retrieving root certificates from the system, validating certificates, and evaluating trust. However, the underlying CSSM API provides more capabilities that might be of interest to specialty applications, such as applications designed to administer the security of a computer or network. For this reason, the Certificate, Key, and Trust Services API includes a number of functions that return or create CSSM structures so that you can move freely back and forth between Certificate, Key, and Trust Services and CSSM. </p>
<p>For more information about the CSSM API, see <em>Common Security: CDSA and CSSM, version 2 (with corrigenda)</em> from The Open Group (<span class="content_text"><a href="http://www.opengroup.org/security/cdsa.htm" target="_blank">http://www.opengroup.org/security/cdsa.htm</a></span>).</p>
<a name="//apple_ref/doc/uid/TP40001358-CH204-DontLinkElementID_4" title="Policies and Trust"></a><h2>Policies and Trust</h2>
<p>Certain attributes of a digital certificate (known as <em>certificate extensions</em>) are said to establish a <strong>level of trust</strong> for a digital certificate. The level of trust for a certificate is used to answer the question “Should I trust this certificate for this action?” A <strong>trust policy</strong> is a set of rules that specify how to evaluate a certificate to see if it is valid for a specific level of trust. </p>
<p>For example, in Mac OS X the AppleX509TP module implements a trust policy referred to as the S/MIME policy, which specifies how to verify email addresses in addition to basic validation of the certificate. When you set up a trust evaluation in the Certificate, Key, and Trust Services API, you specify which policy to  use in evaluating trust. This is how you indicate the use for which you want to verify the certificate’s validity. For example, if you specify the SSL policy, you are in effect asking whether the certificate can be trusted for use in establishing a secure connection over a network. </p>
<p>Some policies have options (see the <span class="content_text"><a href="../../../Reference/certifkeytrustservices/certKeyTrustPolicies/certKeyTrustPolicies.html#//apple_ref/doc/uid/TP30000157-CH204" target="_top">AppleX509TP Trust Policies</a></span> appendix in <em><a href="../../../Reference/certifkeytrustservices/index.html#//apple_ref/doc/uid/TP30000157" target="_top">Certificate, Key, and Trust Services Reference</a></em>). For example, the certificate revocation list policy includes options, which include flags. When the <code>CSSM_TP_ACTION_REQUIRE_CRL_PER_CERT</code> flag is set, a certificate is not valid unless every certificate in the certificate chain has been successfully verified using a certificate revocation list. Option structures for the AppleX509TP trust policies are defined in <code>cssmapple.h</code>. The Certificate, Key, and Trust Services API uses default option values for each policy. </p>

        <br /><br /> 
        
        <div class="mini_nav_text" align="left">
        <span class="navButtons">
        <a href="../01introduction/introduction.html">&lt; Previous Page</a><span style="margin-left: 8px"><a href="../iPhone_Tasks/iPhone_Tasks.html">Next Page &gt;</a></span>
        </span>
        <span id="showHideTOCLowerSpan">
        <a href="#" onclick="showHideTOC();"><img src="../../../../Resources/Images/show_toc_icon.gif" width="15" height="14" border="0" style="margin-bottom: -2px;" alt="" /></a> <a href="#" onclick="showHideTOC();">Hide TOC</a>
        </span>
        </div>

        <br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> <!--#if expr="0=1" -->&#x00a9; 2003, 2008 Apple Inc. All Rights Reserved. &#40;<!--#endif -->Last updated: 2008-11-19<!--#if expr="0=1" -->&#041;<!--#endif --></p></div>

        
        <div class="hideOnPrint hideInXcode">
        <!-- start of footer -->
        	<table width="100%" border="0" cellpadding="0" cellspacing="0">
		<tr>
			<td><div style="width: 100%; height: 1px; background-color: #919699; margin-top: 5px; margin-bottom: 15px"></div></td>
		</tr>
		<tr>
			<td align="center"><br/>
				<table border="0" cellpadding="0" cellspacing="0" class="graybox">
					<tr>
						<th>Did this document help you?</th>
					</tr>
					<tr>
						<td>
						    <div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=1&url=/documentation/Security/Conceptual/CertKeyTrustProgGuide/02concepts/concepts.html%3Fid%3DTP40001358-2.0&media=dvd" target=_new>Yes</a>:  Tell us what works for you.</div>
							<div style="margin-bottom: 8px"><a href="http://developer.apple.com/feedback/?v=2&url=/documentation/Security/Conceptual/CertKeyTrustProgGuide/02concepts/concepts.html%3Fid%3DTP40001358-2.0&media=dvd" target=_new>It&#8217;s good, but:</a> Report typos, inaccuracies, and so forth.</div>
							<div><a href="http://developer.apple.com/feedback/?v=3&url=/documentation/Security/Conceptual/CertKeyTrustProgGuide/02concepts/concepts.html%3Fid%3DTP40001358-2.0&media=dvd" target=_new>It wasn&#8217;t helpful</a>: Tell us what would have helped.</div>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>

        <!--#include virtual="/includes/framesetfooter" -->
        <!-- end of footer -->
        </div>
    </div>
</body>
</html>
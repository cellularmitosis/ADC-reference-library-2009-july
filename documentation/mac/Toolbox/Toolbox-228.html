<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>NewWindow(IM:Tb)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING228></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Toolbox-227.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-229.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Toolbox-2.html"><B>Macintosh Toolbox Essentials</B></A> / <BR><DD><A HREF="Toolbox-188.html"><B>Chapter 4 - Window Manager</B></A> / <A HREF="Toolbox-213.html"><B>Window Manager Reference</B></A><BR><DL><DD><A HREF="Toolbox-221.html"><B>Window Manager Routines</B></A> / <A HREF="Toolbox-224.html"><B>Creating Windows</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING228-0></A>
<H3><A NAME=MARKER-9-366></A>NewWindow</H3>
 <A NAME=MARKER-11-367></A><A NAME=MARKER-2-368></A>Use the <CODE>NewWindow</CODE> function to create a new window with the characteristics specified by a list of parameters when Color QuickDraw is not available. The <CODE>NewWindow</CODE> function takes the same parameters as <CODE>NewCWindow</CODE> and, like <CODE>NewCWindow</CODE>, returns a <CODE>WindowPtr</CODE> as its function result. The only difference is that <CODE>NewWindow</CODE> creates a window in a monochrome graphics port, not a color graphics port. The window record and graphics port record that describe monochrome and color graphics ports are the same size and can be used interchangeably in most Window Manager routines.<P>
<PRE>
FUNCTION NewWindow (wStorage: Ptr; boundsRect: Rect;
                     title: Str255; visible: Boolean;
                     theProc: Integer; behind: WindowPtr;
                     goAwayFlag: Boolean;
                     refCon: LongInt): WindowPtr;
</PRE>
<DL>
<DT>wStorage
<DD> A pointer to the window record. If you specify <CODE>NIL</CODE> as the value of <CODE>wStorage</CODE>, <CODE>NewWindow</CODE> allocates the window record as a nonrelocatable object in the heap. You can reduce the chances of heap fragmentation by allocating the storage from a block of memory reserved for this purpose by your application and passing a pointer to it in the <CODE>wStorage</CODE> parameter.
<DT>boundsRect
<DD> A rectangle, in global coordinates, specifying the window's initial size and location. This parameter becomes the port rectangle of the window's graphics port. For the standard window types, <CODE>boundsRect</CODE> defines <BR>the content region of the window. The <CODE>NewWindow</CODE> function places <BR>the origin of the local coordinate system at the upper-left corner of the port rectangle.
<DT><B>Note</B>
<DD>The <CODE>NewWindow</CODE> function actually calls the QuickDraw procedure <CODE>OpenPort</CODE> to create the graphics port. The bitmap, pen pattern, and <BR>other characteristics of the window's graphics port are the same as <BR>the default values set by <CODE>OpenPort</CODE>, except for the character font, <BR>which is set to the application font instead of the system font. The coordinates of the graphics port's port boundaries and visible region <BR>are changed along with its port rectangle.<EM></EM>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
<DT><CODE>title</CODE>
<DD> A string that specifies the window's title.
<DT>
<DD> If the title is too long to fit in the title bar, the title is truncated. If the window has a close box, characters at the end of the title are truncated; if there's no close box, the title is centered and truncated at both ends.
<DT>
<DD> To suppress the title in a window with a title bar, pass an empty string, not <CODE>NIL</CODE>.
<DT>visible
<DD> A Boolean value indicating visibility status: <CODE>TRUE</CODE> means that the Window Manager displays the window; <CODE>FALSE</CODE> means it does not.
<DT>
<DD> If the value of the <CODE>visible</CODE> parameter is <CODE>TRUE</CODE>, the Window Manager draws a new window as soon as the window exists. The Window Manager first calls the window definition function to draw the window frame. If the value of the <CODE>goAwayFlag</CODE> parameter (described below) is also <CODE>TRUE</CODE> and the window is frontmost (that is, if the value of the <CODE>behind</CODE> parameter is <CODE>Pointer(-1)</CODE>), the Window Manager instructs the window definition function to draw a close box in the window frame. After drawing the frame, the Window Manager generates an update event to trigger your application's drawing of the content region.
<DT>
<DD> When you create a window, you typically specify <CODE>FALSE</CODE> as the value of the <CODE>visible</CODE> parameter. When you're ready to display the window, you call the <CODE>ShowWindow</CODE> procedure, described on <A HREF=Toolbox-235.html#MARKER-9-388>page 4-80</A>.
<DT>theProc
<DD> <CODE><A NAME=MARKER-2-369></A></CODE>The window's definition ID, which specifies both the window definition function and the variation code for that definition function.
<DT>
<DD> The Window Manager supports nine standard window types, which are handled by two window definition functions. You can create windows of the standard types by specifying one of the type constants: 
</DL>
<PRE>
            CONST
               documentProc      = 0;  {standard document }
                                       { window, no zoom box}
               dBoxProc          = 1;  {alert box or modal }
                                       { dialog box}
               plainDBox         = 2;  {plain box}
               altDBoxProc       = 3;  {plain box with shadow}
               noGrowDocProc     = 4;  {movable window, }
                                       { no size box or zoom box}
               movableDBoxProc   = 5;  {movable modal dialog box}
               zoomDocProc       = 8;  {standard document window}
               zoomNoGrow        = 12; {zoomable, nonresizable }
                                       { window}
               rDocProc          = 16; {rounded-corner window}
</PRE>
<DL>
<DT>
<DD> You can control the diameter of curvature of rounded-corner windows by adding an integer to the <CODE>rDocProc</CODE> constant, as described in <A HREF=Toolbox-293.html#MARKER-9-629>"The Window Resource" beginning on page 4-116</A>.
<DT><CODE>behind</CODE>
<DD> A pointer to the window that appears immediately in front of the new window on the desktop.
<DT>
<DD> To place a new window in front of all other windows on the desktop, specify a value of <CODE>Pointer(-1)</CODE>. When you place a new window in front of all others, <CODE>NewWindow</CODE> removes highlighting from the previously active window, highlights the newly created window, and generates activate events that trigger your application's updating of both windows. Note that if you create an invisible window in front of all others on the desktop, the user sees no active window until you make the new window visible (or make another window active).
<DT>
<DD> To place a new window behind all other windows, specify a value of <CODE>NIL</CODE>.
<DT>goAwayFlag
<DD> A Boolean value that determines whether or not the window has a close box. If the value of <CODE>goAwayFlag</CODE> is <CODE>TRUE</CODE> and the window type supports a close box, the Window Manager draws a close box in the title bar and recognizes mouse clicks in the close region; if the value of <CODE>goAwayFlag</CODE> is <CODE>FALSE</CODE> or the window type does not support a close box, it does not. 
<DT>refCon
<DD> The window's reference constant, set and used only by your application. (See <A HREF=Toolbox-202.html#MARKER-9-133>"Managing Multiple Windows" beginning on page 4-23</A> for some suggested ways to use the <CODE>refCon</CODE> parameter.)
</DL>
<A NAME=HEADING228-22></A>
<H5>DESCRIPTION</H5>
 The <CODE>NewWindow</CODE> function creates a window as specified by its parameters, adds it to the window list,  and returns a pointer to the newly created window record. You can use the returned window pointer to refer to this window in most Window Manager routines. If <CODE>NewWindow</CODE> is unable to read the window definition function from the resource file, it returns <CODE>NIL</CODE>.<P>
 If the window's definition function is not already in memory, <CODE>NewWindow</CODE> reads it into memory and stores a handle to it in the window record. It allocates space for the structure and content regions of the window and asks the window definition function to calculate those regions.<P>
 Storing the characteristics of your windows as resources, especially window titles and window items, makes your application easier to localize.<P>
<A NAME=HEADING228-26></A>
<H5>SPECIAL CONSIDERATIONS</H5>
 If you let the Window Manager create the window record in your application's heap, call the <CODE>DisposeWindow</CODE> procedure to close the window and dispose of its window record. If you allocated the memory for the window record yourself and passed a pointer to <CODE>NewCWindow</CODE>, use the <CODE>CloseWindow</CODE> procedure to close the window and the <CODE>DisposePtr</CODE> procedure, documented in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I>, to dispose of the window record.<A NAME=MARKER-2-370></A><P>
<A NAME=HEADING228-28></A>
<H5>SEE ALSO</H5>
 For the procedures for closing a window and removing the structures from memory, see the descriptions of the <CODE>DisposeWindow</CODE> procedure on <A HREF=Toolbox-258.html#MARKER-9-489>page 4-97</A>, the <CODE>CloseWindow</CODE> procedure on <A HREF=Toolbox-257.html#MARKER-9-483>page 4-96</A>, and the <CODE>DisposePtr</CODE> procedure in <I><A HREF="../Memory/Memory-2.html">Inside Macintosh: Memory</A></I>.<A NAME=MARKER-2-348></A><P>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Toolbox-227.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Toolbox-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Toolbox-490.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Toolbox-229.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Toolbox-3.html">&copy; Apple Computer, Inc.</A><br>11 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

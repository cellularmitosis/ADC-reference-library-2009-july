<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Debugging With GraphicsBug(IM: XU)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING156></A>


<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="GXEnvironment-155.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-157.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="GXEnvironment-2.html"><B>QuickDraw GX Environment and Utilities</B></A> / <BR><DD><A HREF="GXEnvironment-145.html"><B>Chapter 4 - QuickDraw GX Debugging</B></A> / <A HREF="GXEnvironment-153.html"><B>Using QuickDraw GX Debugging</B></A></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING156-0></A>
<H2><A NAME=MARKER-9-122></A>Debugging With GraphicsBug</H2>
 <A NAME=MARKER-2-87></A><A NAME=MARKER-2-124></A><A NAME=MARKER-2-125></A>GraphicsBug reads and verifies only graphics objects. It does not create objects, dispose of objects, or modify objects in any manner. GraphicsBug never interferes with an application and does not cause bugs to appear or disappear.<P>
 <A NAME=MARKER-9-39></A><A HREF=#MARKER-9-1>Table 4-11</A> summarizes the GraphicsBug commands. This list is available online by typing "?", "help", or "HELP" when in the command line of GraphicsBug. You can copy or save the brief explanations as a text file.
<TABLE BORDER="0" CELLPADDING=3>
<CAPTION><A NAME=MARKER-9-1></A><B>Table 4-11 GraphicsBug commands and responses</B> </CAPTION>
<TH>Command<TH>Response<TR>
<TD>DA<BR><CODE>[bu(sy) <BR>di(rect) <BR>fr(ee) <BR>i(ndirect) <BR>t(emp) u(n)b(usy)<BR> u(n)l(oaded)]<BR>[&lt;type&gt;[type&gt;...]]</CODE><TD>Display all blocks in the heap, or all that match parameters. Example: <CODE>DA bu line layout polygon</CODE>.<TR>
<TD>DM addr[n|t(ype)]<TD>Display memory from <CODE>addr</CODE> for <I>n</I> bytes or as a type. Example: <CODE>DM 1b2358 t</CODE>.<TR>
<TD>DV<TD>Display version.<TR>
<TD>ER number<TD>Display error name that matches this number.<TR>
<TD><CODE>F addr[number[start[end]]]<BR>[bu(sy) <BR>di(rect) <BR>fr(ee) <BR>i(ndirect) <BR>t(emp) u(n)b(usy)<BR> u(n)l(oaded)]<BR>[&lt;type&gt;[type&gt;...]]</CODE><TD>Find references to <CODE>addr</CODE> in the heap blocks that match parameters. Example: <CODE>F 0x4456A 3 ul picture</CODE>.<TR>
<TD>FL addr[filename]<TD>Display the stream produced by flattening this shape. Example: <CODE>FL 0x3321A "flat shapes"</CODE>.<TR>
<TD>GG<TD>Display graphics globals<TR>
<TD>HC<TD>Check the heap.<TR>
<TD><CODE>HD <BR>[bu(sy) <BR>di(rect) <BR>fr(ee) <BR>i(ndirect) <BR>t(emp) u(n)b(usy) u(n)l(oaded)]<BR>HD [&lt;type&gt; [&lt;type&gt;...]]</CODE><TD>Dump the heap or the heap parts that match parameters. Example: <CODE>HD bu line layout polygon</CODE>.<TR>
<TD colspan=2>&nbsp;<TR>
<TD>HT<TD>Total the heap.<TR>
<TD>HX addr|&lt;heapname&gt;<TD>Switch to the heap containing <CODE>addr</CODE>, or named <CODE>&lt;heapname&gt;</CODE>. Example: <CODE>HX System</CODE>.<TR>
<TD>HZ<TD>List the known heaps.<TR>
<TD>IG<TD>Display initialization globals.<TR>
<TD>LC (process)<TD>List the known graphics clients. <TR>
<TD>LP<TD>List the known processes that have a graphics client.<TR>
<TD>CG<TD>Display other (generic, nongraphic) globals.<TR>
<TD>Q<TD>Quit.<TR>
<TD>UF filename[page number]<TD>Display the contents of the file by flattening it. Use page number to specify a page of a print file.<TR>
<TD>V [addr]<TD>Validate all (no parameters) or validate specific block.<TR>
<TD>GG<TD>Graphics globals.<TR>
<TD>WH addr<TD>Display the block containing <CODE>addr</CODE>. <BR>Operators: -, +, *, /, %, ^, |, &amp;, [, @, *, ], ~, (, ) <BR>Numbers: .0x$#3 "strings: ""<A NAME=MARKER-2-2></A></TABLE>
<P>
 In addition to the GraphicsBug commands above, you can Option-double-click (hold down the Option key and double-click) on a memory address to display memory as a type, use the up/down arrow keys to set the scrolling speed, use dot '.' to represent the last displayed address, and use shape as an argument to the <CODE>DA</CODE>, <CODE>F</CODE>, and <CODE>HD</CODE> commands to display all graphics client-owned shapes.<P>
<A NAME=HEADING156-4></A>
<H3>Analyzing a Picture Shape</H3>
 <A NAME=MARKER-9-124></A>The following sections demonstrate the use of GraphicsBug for the analysis of a picture containing seven shapes. The code that creates the picture and the analysis of the data stream for each flattened shape is given in the section "Analyzing the Data Streams of Flattened Shapes" in the chapter "QuickDraw GX Stream Format."<P>
<A NAME=HEADING156-6></A>
<H4>Determining the Heap Size for All Shapes in the Picture</H4>
 You can use the GraphicsBug <CODE>HT</CODE> command to display the heap total in bytes for a specified graphics client heap. First run the application, then select the graphics client heap from the GraphicsBug heap menu, then apply the <CODE>HT</CODE> command. <A HREF=#MARKER-9-128>Listing 4-2</A> showsa sample output of the <CODE>HT</CODE> command: the GraphicsBug heap size in bytes. Note that the size of the graphics client and its heap is 86724 bytes. You can use this procedure to select the initial size of your application's graphics client heap or heaps. For additional information about specifying the size of your graphics client heap, see the section "Creating a Graphics Client and its Graphics Client Heap" in the chapter "QuickDraw GX Memory Management."<P>
<B>Listing 4-2  <A NAME=MARKER-9-128></A>Totaling the graphics client and its heap</B><P>
<PRE>
Totaling the heap at 00c07de8 (all shapes heap). 
          Total Blocks                 Total of Block Sizes 
Free      0000001b    #       27       0000fff8    #    65528 
Direct    00000044    #       68       00001dbc    #     7612 
Indirect  00000047    #       71       000031bc    #    12732 
Sub Heaps 00000000    #        0       00000000    #        0 
Heap Size 000000a6    #      166       000152c4    #    86724 
</PRE>
<A NAME=HEADING156-10></A>
<H4>Analyzing the Shapes in the Picture</H4>
 You can use the GraphicsBug <CODE>HD PIC</CODE> command to display the memory locations of the seven shapes in the picture. <A HREF=#MARKER-9-129>Listing 4-3</A> shows the GraphicsBug output for the picture shape created by the application "all shapes." User input is shown in boldface.<P>
 The GraphicsBug command lines shown in <A HREF=#MARKER-9-129>Listing 4-3</A> are used as follows:<P>
<UL>
<LI>hd pic command turns <CODE>pic</CODE> into <CODE>picture.</CODE>
<LI><CODE>dm 00c0886c t</CODE> command displays default picture data.
<LI>dm 00c0a4a0 t displays the data for the picture with seven shapes. Note that there are multiple text shapes displayed because the <CODE>gxUniqueItemsShape</CODE> attribute was set.<P>
</UL>
<B>Listing 4-3  <A NAME=MARKER-9-129></A>Determining the memory locations of the shapes in the picture</B><P>
<PRE>
hx &quot;all shapes&quot;
heap set to 00c07de8  &quot;all shapes&quot;
hd pic 
 Start    Length  \x90   Typ Busy Mstr Ptr Temp TBsy Disk   Object 
00c0886c 00000048+00   i       00c1d02c                picture 
00c0a4a0 00000108+00   i       00c1d010                picture 
          Total Blocks            Total of Block Sizes 
Blocks    00000002  #        2    00000150    #      336 
dm 00c0886c t
displaying picture gxShape from 00c0886c
  devShape        nil 
  owners            1 
  seed              0 
  flags      isDefaultShape  
  attributes gxMapTransformShape  
  gxStyle      00c083b0     
  gxInk        00c08460     
  gxTransform  00c088b4     
  tagList         nil 
  cacheList       nil 
  geo.flags         0
  fillType   evenOddFill 
  entries    0 
  references 00000000 
      gxShape        (type)       gxStyle           gxInk         gxTransform 
dm 00c0a4a0 t
displaying picture gxShape from 00c0a4a0
  devShape   00c0a98c 
  owners            1 
  seed              0 
  flags             0  
  attributes 
/* 
There are multiple text shapes because the gxUniqueItemsShape attribute was 
set.
*/
  gxStyle      00c083b0     
  gxInk        00c08460     
  gxTransform  00c088b4    
  tagList         nil 
  cacheList       nil 
geo.flags         0 
  fillType   evenOddFill 
  entries    12 
  references 00c08d1c 
      gxShape   (type)      gxStyle        gxInk      gxTransform 
    00c08dd0  (line)       00000000       00000000       00000000    
    00c0949c  (rectangle)  00000000       00000000       00000000     
    00c099e4  (curve)      00000000       00000000       00000000     
    00c09bd0  (path)       00000000       00000000       00000000
    00c0a220  (text)       00000000       00000000       00000000     
    00c0a220  (text)       00c0a268       00c08e1c       00c0997c     
    00c0a220  (text)       00c0a268       00c09b98       00c0a350     
    00c0a220  (text)       00c0a268       00c0a640       00c0bc30     
    00c0a220  (text)       00c0a268       00c0a678       00c0a6b0     
    00c0a220  (text)       00c0a268       00c0a750       00c0a788     
    00c0a828  (polygon)    00000000       00000000       00000000     
    00c0bc94  (bitmap)     00000000       00000000       00000000 
</PRE>
<A NAME=HEADING156-19></A>
<H4>Analyzing the Rectangle in the Picture</H4>
 You can use the <CODE>dm</CODE> command or Option-double-click command on the memory location of one of the seven shapes from <A HREF=#MARKER-9-129>Listing 4-3</A> to display information about the shape. <A HREF=#MARKER-9-130>Listing 4-4</A> shows the GraphicsBug output for the rectangle shape. The command line is shown in boldface.<P>
<B>Listing 4-4  <A NAME=MARKER-9-130></A>Analyzing the rectangle shape in the picture</B><P>
<PRE>
dm 00c0949c t
Displaying rectangle gxShape from 00c0949c 
  devShape        nil 
  owners            1 
  seed              0 
  flags             0  
  attributes no attributes  
  gxStyle      00c0984c     
  gxInk        00c098fc     
  gxTransform  00c0961c     
  tagList         nil 
  cacheList       nil 
  geo.flags         0 
  fillType   closedFrameFill 
{   150.0000,    25.0000}  {   200.0000,    75.0000} 
</PRE>
<A NAME=HEADING156-23></A>
<H4>Analyzing the Ink in the Rectangle</H4>
 You can select a memory location of one of the objects in the rectangle from <A HREF=#MARKER-9-130>Listing 4-4</A> and use the <CODE>dm</CODE> command or GraphicsBug Option-double click command to display information about the object. <A HREF=#MARKER-9-132>Listing 4-5</A> shows the GraphicsBug output for the ink in the rectangle shape. The command line is shown in boldface.<A NAME=MARKER-2-183></A><P>
<B>Listing 4-5  <A NAME=MARKER-9-132></A>Analyzing the ink in the rectangle shape</B><P>
<PRE>
dm 00c098fc t
Displaying gxInk from 00c098fc
  devInk       00c094e8 
  privateFlags        0  
  attributes          0  
  owners              1 
  seed                0 
  tagList           nil 
  space        gxRGBSpace 
  profile           nil 
  value(s)       1.0000 (ffff)  0.0000 0x0000  0.0000 0x0000   
  mode         gxCopyMode 
</PRE>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="GXEnvironment-155.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="GXEnvironment-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="GXEnvironment-445.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="GXEnvironment-157.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="GXEnvironment-3.html">&copy; Apple Computer, Inc.</A><br>7 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  

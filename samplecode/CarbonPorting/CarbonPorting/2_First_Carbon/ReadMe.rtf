{\rtf1\mac\ansicpg10000\cocoartf824\cocoasubrtf380
{\fonttbl\f0\fswiss\fcharset77 Helvetica-Bold;\f1\fswiss\fcharset77 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww9180\viewh8860\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\ql\qnatural

\f0\b\fs36 \cf0 ExamplePrefs 2.0
\f1\b0\fs24 \
\
Step 2 in your Carbonizing project is the first actual Carbon version of the program.  The goal of this version is to get a working program that will run in Mac OS X and look "normal", while making a few changes as possible.  The TARGET_API_MAC_XXX constants are manually defined in the prefix file in order to switch on which headers to include.  Because the Classic version uses Toolbox accessor functions, not all that much code had to be conditionalized  for Classic/Carbon.  To support the Aqua theme, there are almost all new window, dialog, and control resources, new metrics in the headers, and support in the source for determining the runtime OS and loading the appropriate UI.  This was easily the bulk of the work.  The help system gets a major overhaul to use Help Tags instead of Help Balloons, which took significant effort as well.  The "About..." Apple/Application menu item drops the "..." in Mac OS X and the File menu drops the Quit item and separator, all programmatically.  A 'carb' resource is added for Mac OS 9.1 and later Mac OS 9's.  A 'plst' resource is added for Mac OS X.  Since Carbon doesn't support code resources (i.e. the 'LDEF'), the icon list definition function is built into the main binary.  Instead of LNew(), CreateCustomList() is used for the window.  RegisterListDefinition() is used for the dialog so that the 'ldes' resource can be used unmodified.  A few calls to QDFlushPortBuffer() are necessary to get the buttons in the dialog to flash when the appropriate keys are pressed.  The window/list method is more work than the dialog/list box control method in Carbon as well as Classic, 624 lines to 323 lines.}
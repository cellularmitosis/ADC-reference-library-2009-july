<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>PortionLine(IM: Tx)</TITLE>
<LINK REL="stylesheet" TYPE="text/css" HREF="../../Resources/CSS/frameset_styles.css">
<script type="text/javascript" language="JavaScript" src="../../Resources/JavaScript/page.js"></script>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000">

<div style="width:100%; position:fixed;"><div align="center" id="watermark" style="position: relative; margin-left:auto; margin-right:auto; z-index:20; width:500px;">
<div class="legacybox" style="position: relative;">
<h1>Legacy Document<span class=closebutton><a href="javascript:closeWatermark()"><img src="../../Resources/Images/closebutton.png" width="14" height="14" border="0" align="top" alt="close button"></a></span></h1><p><b>Important:</b>
The information in this document is obsolete and should not be used for new development.</p></div></div></div>


<A NAME=HEADING170></A>



<!-- start of header -->

<!--#include virtual="/includes/framesetheader" -->

<!-- end of header -->


<!-- Main Body -->

<CENTER>
<P>
<A HREF="Text-169.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-171.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<FONT SIZE=-1><DL><DT><a href="../../macos8/mac8.html" onmouseover="window.status='Macintosh Documentation'; return true"><B>Inside Macintosh:</B></A> <A HREF="Text-2.html"><B>Text</B></A> / <BR><DD><A HREF="Text-126.html"><B>Chapter 3 - QuickDraw Text</B></A> / <A HREF="Text-143.html"><B>QuickDraw Text Reference</B></A><BR><DL><DD><A HREF="Text-147.html"><B>Routines</B></A> / <A HREF="Text-167.html"><B>Laying Out a Line of Text</B></A></DL></DL></FONT><P>
<HR>
<BLOCKQUOTE>
<A NAME=HEADING170-0></A>
<H3><A NAME=MARKER-9-343></A><A NAME=MARKER-2-39></A>PortionLine</H3>
 The <A NAME=MARKER-2-373></A><CODE>PortionLine</CODE> function determines the correct proportion of extra space to apply to the specified style run in a line of justified text.<P>
<PRE>
FUNCTION PortionLine(textPtr: Ptr; textLen: LongInt; 
                        styleRunPosition: JustStyleCode; 
                        numer: Point; denom: Point) : Fixed;
</PRE>
<DL>
<DT><CODE>textPtr</CODE>
<DD> A pointer to the style run.
<DT><CODE>textLen</CODE>
<DD> The number of bytes in the text of the style run.
<DT><CODE>styleRunPosition</CODE>
<DD> The position on the line of this style run. The style run can be the only one on the line, the leftmost on the line, the rightmost on the line, or one between two other style runs.
<DT><CODE>numer</CODE>
<DD> A point giving the numerator for the horizontal and vertical <BR>scaling factors.
<DT><CODE>denom</CODE>
<DD> A point giving the denominator for the horizontal and vertical <BR>scaling factors.
</DL>
<A NAME=HEADING170-8></A>
<H5>DESCRIPTION</H5>
 You use <CODE>PortionLine</CODE> in formatting a line of justified text. It helps you determine how to distribute the slop for a line among its style runs. When you know the total slop for a line of text, you need to determine what portion of it to attribute to each style run. To do this, you call the <CODE>PortionLine</CODE> function once for each style run on the line. The <CODE>PortionLine</CODE> function computes the portion of extra space for a style run, taking into account the font, size, style, and scaling factors of the style run. It returns a number that represents the portion of the slop to be applied to the style run for which it is called. You use the value that <CODE>PortionLine</CODE> returns to determine the percentage of slop that you should attribute to a style run.<P>
 To determine the percentage of slop to allocate to each style run, you compute what percentage each portion is of the sum of all portions. To determine the actual slop value in pixels for each style run, you apply the percentage to the total slop value. The following steps summarize this process:<P>
<OL>
<LI>Call <CODE>PortionLine</CODE> for each style run on the line.
<LI>Add the returned values together.
<LI>Calculate the percentage of the slop value for each style run using the ratio of the value returned by <CODE>PortionLine</CODE> for that style run and the total of the values returned for all of the style runs on the line.
<LI>Calculate the number of pixels to be added to each style run by multiplying the percentage of the slop for each style run by the total number of pixels.<P>
</OL>
 For more information about the scaling factors, see <A HREF=Text-147.html#MARKER-9-256>"The numer and denom Parameters" on page 3-64</A>. See <A HREF=Text-147.html#MARKER-9-255>"The styleRunPosition Parameter" on page 3-63</A> for a description of the <CODE>styleRunPosition</CODE> parameter and the values it takes.<P>
<DL>
<DT><B>Note</B>
<DD>Be sure to pass the same values for <CODE>styleRunPosition</CODE> and the scaling factors (<CODE>numer</CODE> and <CODE>denom</CODE>) to <CODE>PortionLine</CODE> that you pass to any of the other justification routines for this style run.<EM></EM><A NAME=MARKER-2-892></A><A NAME=MARKER-9-665></A>  <IMG ALIGN = BOTTOM SRC = "graphics/diamond.gif">
</DL>
</BLOCKQUOTE>
<HR>
<center>
<A HREF="Text-169.html"><IMG ALIGN = BOTTOM SRC = "prev.gif" border=none hspace=20 alt="Previous"></A> <A HREF="Text-2.html"><IMG ALIGN = BOTTOM SRC = "content.gif" border=none hspace=20 alt="Book Contents"></A> <A HREF="Text-594.html"><IMG ALIGN = BOTTOM SRC = "index.gif" border=none hspace=20 alt="Book Index"></A> <A HREF="Text-171.html"><IMG ALIGN = BOTTOM SRC = "next.gif" border=none hspace=20 alt="Next"></A> </CENTER><P>
<center><font size=-1><A HREF="Text-3.html">&copy; Apple Computer, Inc.</A><br>6 JUL 1996</center></font><P>

<!-- start of footer  -->

<!--#include virtual="/includes/framesetfooter" -->

<!-- end of footer -->


</BODY>
</HTML>  
